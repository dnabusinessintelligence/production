/*

Siesta 5.3.2
Copyright(c) 2009-2020 Bryntum AB
https://bryntum.com/contact
https://bryntum.com/products/siesta/license

*/
var JSON;"undefined"==typeof Joose&&function(){var Joose={};Joose.C="undefined"!=typeof JOOSE_CFG?JOOSE_CFG:{},Joose.is_IE=!1,Joose.is_NodeJS=Boolean("undefined"!=typeof process&&process.pid),Joose.top=Joose.is_NodeJS&&global||this,Joose.stub=function(){return function(){throw new Error("Modules can not be instantiated")}},Joose.VERSION="3.50.1","undefined"!=typeof module&&(module.exports=Joose),(this.Joose=Joose).A={each:function(array,func,scope){scope=scope||this;for(var i=0,len=array.length;i<len;i++)if(!1===func.call(scope,array[i],i))return!1},eachR:function(array,func,scope){scope=scope||this;for(var i=array.length-1;0<=i;i--)if(!1===func.call(scope,array[i],i))return!1},exists:function(array,value){for(var i=0,len=array.length;i<len;i++)if(array[i]==value)return!0;return!1},map:function(array,func,scope){scope=scope||this;for(var res=[],i=0,len=array.length;i<len;i++)res.push(func.call(scope,array[i],i));return res},grep:function(array,func){var a=[];return Joose.A.each(array,function(t){func(t)&&a.push(t)}),a},remove:function(array,removeEle){var a=[];return Joose.A.each(array,function(t){t!==removeEle&&a.push(t)}),a}},Joose.S={saneSplit:function(str,delimeter){var res=(str||"").split(delimeter);return 1!=res.length||res[0]||res.shift(),res},uppercaseFirst:function(string){return string.substr(0,1).toUpperCase()+string.substr(1,string.length-1)},strToClass:function(name,top){var current=top||Joose.top;return Joose.A.each(name.split("."),function(segment){if(!current)return!1;current=current[segment]}),current}};function baseFunc(){}var enumProps=["hasOwnProperty","valueOf","toString","constructor"],manualEnum=!0;for(var i in{toString:1})manualEnum=!1;Joose.O={each:function(object,func,scope){for(var i in scope=scope||this,object)if(!1===func.call(scope,object[i],i))return!1;if(manualEnum)return Joose.A.each(enumProps,function(el){if(object.hasOwnProperty(el))return func.call(scope,object[el],el)})},eachOwn:function(object,func,scope){return scope=scope||this,Joose.O.each(object,function(value,name){if(object.hasOwnProperty(name))return func.call(scope,value,name)},scope)},copy:function(source,target){return target=target||{},Joose.O.each(source,function(value,name){target[name]=value}),target},copyOwn:function(source,target){return target=target||{},Joose.O.eachOwn(source,function(value,name){target[name]=value}),target},getMutableCopy:function(object){return baseFunc.prototype=object,new baseFunc},extend:function(target,source){return Joose.O.copy(source,target)},isEmpty:function(object){for(var i in object)if(object.hasOwnProperty(i))return!1;return!0},isInstance:function(obj){return obj&&obj.meta&&obj.constructor==obj.meta.c},isClass:function(obj){return obj&&obj.meta&&obj.meta.c==obj},wantArray:function(obj){return obj instanceof Array?obj:[obj]},isFunction:function(obj){return"function"==typeof obj&&obj.constructor!=/ /.constructor}},Joose.I={Array:function(){return[]},Object:function(){return{}},Function:function(){return arguments.callee},Now:function(){return new Date}},Joose.Proto=Joose.stub(),Joose.Proto.Empty=Joose.stub(),Joose.Proto.Empty.meta={},function(){Joose.Proto.Object=Joose.stub();var SUPER=function(){var self=SUPER.caller;if(self==SUPERARG&&(self=self.caller),!self.SUPER)throw"Invalid call to SUPER";return self.SUPER[self.methodName].apply(this,arguments)},SUPERARG=function(){return this.SUPER.apply(this,arguments[0])};Joose.Proto.Object.prototype={SUPERARG:SUPERARG,SUPER:SUPER,INNER:function(){throw"Invalid call to INNER"},BUILD:function(config){return 1==arguments.length&&"object"==typeof config&&config||{}},initialize:function(){},toString:function(){return"a "+this.meta.name}},Joose.Proto.Object.meta={constructor:Joose.Proto.Object,methods:Joose.O.copy(Joose.Proto.Object.prototype),attributes:{}},Joose.Proto.Object.prototype.meta=Joose.Proto.Object.meta}(),function(){Joose.Proto.Class=function(){return this.initialize(this.BUILD.apply(this,arguments))||this};var bootstrap={VERSION:null,AUTHORITY:null,constructor:Joose.Proto.Class,superClass:null,name:null,attributes:null,methods:null,meta:null,c:null,defaultSuperClass:Joose.Proto.Object,BUILD:function(name,extend){return this.name=name,{__extend__:extend||{}}},initialize:function(props){var extend=props.__extend__;this.VERSION=extend.VERSION,this.AUTHORITY=extend.AUTHORITY,delete extend.VERSION,delete extend.AUTHORITY,this.c=this.extractConstructor(extend),this.adaptConstructor(this.c),extend.constructorOnly?delete extend.constructorOnly:this.construct(extend)},construct:function(extend){if(this.prepareProps(extend)){var superClass=this.superClass=this.extractSuperClass(extend);this.processSuperClass(superClass),this.adaptPrototype(this.c.prototype),this.finalize(extend)}},finalize:function(extend){this.processStem(extend),this.extend(extend)},prepareProps:function(extend){return!0},extractConstructor:function(extend){var res=extend.hasOwnProperty("constructor")?extend.constructor:this.defaultConstructor();return delete extend.constructor,res},extractSuperClass:function(extend){if(extend.hasOwnProperty("isa")&&!extend.isa)throw new Error("Attempt to inherit from undefined superclass ["+this.name+"]");var res=extend.isa||this.defaultSuperClass;return delete extend.isa,res},processStem:function(){var superMeta=this.superClass.meta;this.methods=Joose.O.getMutableCopy(superMeta.methods||{}),this.attributes=Joose.O.getMutableCopy(superMeta.attributes||{})},initInstance:function(instance,props){Joose.O.copyOwn(props,instance)},defaultConstructor:function(){return function(arg){var BUILD=this.BUILD,args=BUILD&&BUILD.apply(this,arguments)||arg||{},thisMeta=this.meta;return thisMeta.initInstance(this,args),thisMeta.hasMethod("initialize")&&this.initialize(args)||this}},processSuperClass:function(superClass){var superProto=superClass.prototype;if(!superClass.meta){var extend=Joose.O.copy(superProto);extend.isa=Joose.Proto.Empty,delete extend.constructor;var meta=new this.defaultSuperClass.meta.constructor(null,extend);superClass.meta=superProto.meta=meta,meta.c=superClass}this.c.prototype=Joose.O.getMutableCopy(superProto),this.c.superClass=superProto},adaptConstructor:function(c){c.meta=this,c.hasOwnProperty("toString")||(c.toString=function(){return this.meta.name})},adaptPrototype:function(proto){proto.constructor=this.c,proto.meta=this},addMethod:function(name,func){func.SUPER=this.superClass.prototype,func.methodName=name,this.methods[name]=func,this.c.prototype[name]=func},addAttribute:function(name,init){this.attributes[name]=init,this.c.prototype[name]=init},removeMethod:function(name){delete this.methods[name],delete this.c.prototype[name]},removeAttribute:function(name){delete this.attributes[name],delete this.c.prototype[name]},hasMethod:function(name){return Boolean(this.methods[name])},hasAttribute:function(name){return void 0!==this.attributes[name]},hasOwnMethod:function(name){return this.hasMethod(name)&&this.methods.hasOwnProperty(name)},hasOwnAttribute:function(name){return this.hasAttribute(name)&&this.attributes.hasOwnProperty(name)},extend:function(props){Joose.O.eachOwn(props,function(value,name){"meta"!=name&&"constructor"!=name&&(Joose.O.isFunction(value)&&!value.meta?this.addMethod(name,value):this.addAttribute(name,value))},this)},subClassOf:function(classObject,extend){return this.subClass(extend,null,classObject)},subClass:function(extend,name,classObject){return(extend=extend||{}).isa=classObject||this.c,new this.constructor(name,extend).c},instantiate:function(){function f(){}f.prototype=this.c.prototype;var obj=new f;return this.c.apply(obj,arguments)||obj}};Joose.Proto.Class.prototype=Joose.O.getMutableCopy(Joose.Proto.Object.prototype),Joose.O.extend(Joose.Proto.Class.prototype,bootstrap),Joose.Proto.Class.prototype.meta=new Joose.Proto.Class("Joose.Proto.Class",bootstrap),Joose.Proto.Class.meta.addMethod("isa",function(someClass){function f(){}return f.prototype=this.c.prototype,new f instanceof someClass})}(),Joose.Managed=Joose.stub(),Joose.Managed.Property=new Joose.Proto.Class("Joose.Managed.Property",{name:null,init:null,value:null,definedIn:null,initialize:function(props){Joose.Managed.Property.superClass.initialize.call(this,props),this.computeValue()},computeValue:function(){this.value=this.init},preApply:function(targetClass){},postUnApply:function(targetClass){},apply:function(target){target[this.name]=this.value},isAppliedTo:function(target){return target[this.name]==this.value},unapply:function(from){if(!this.isAppliedTo(from))throw"Unapply of property ["+this.name+"] from ["+from+"] failed";delete from[this.name]},cloneProps:function(){return{name:this.name,init:this.init,definedIn:this.definedIn}},clone:function(name){var props=this.cloneProps();return props.name=name||props.name,new this.constructor(props)}}).c,Joose.Managed.Property.ConflictMarker=new Joose.Proto.Class("Joose.Managed.Property.ConflictMarker",{isa:Joose.Managed.Property,apply:function(target){throw new Error("Attempt to apply ConflictMarker ["+this.name+"] to ["+target+"]")}}).c,Joose.Managed.Property.Requirement=new Joose.Proto.Class("Joose.Managed.Property.Requirement",{isa:Joose.Managed.Property,apply:function(target){if(!target.meta.hasMethod(this.name))throw new Error("Requirement ["+this.name+"], defined in ["+this.definedIn.definedIn.name+"] is not satisfied for class ["+target+"]")},unapply:function(from){}}).c,Joose.Managed.Property.Attribute=new Joose.Proto.Class("Joose.Managed.Property.Attribute",{isa:Joose.Managed.Property,slot:null,initialize:function(){Joose.Managed.Property.Attribute.superClass.initialize.apply(this,arguments),this.slot=this.name},apply:function(target){target.prototype[this.slot]=this.value},isAppliedTo:function(target){return target.prototype[this.slot]==this.value},unapply:function(from){if(!this.isAppliedTo(from))throw"Unapply of property ["+this.name+"] from ["+from+"] failed";delete from.prototype[this.slot]},clearValue:function(instance){delete instance[this.slot]},hasValue:function(instance){return instance.hasOwnProperty(this.slot)},getRawValueFrom:function(instance){return instance[this.slot]},setRawValueTo:function(instance,value){return instance[this.slot]=value,this}}).c,Joose.Managed.Property.MethodModifier=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier",{isa:Joose.Managed.Property,prepareWrapper:function(){throw"Abstract method [prepareWrapper] of "+this+" was called"},apply:function(target){var name=this.name,targetProto=target.prototype,isOwn=targetProto.hasOwnProperty(name),original=targetProto[name],superProto=target.meta.superClass.prototype,originalCall=isOwn?original:function(){return superProto[name].apply(this,arguments)},methodWrapper=this.prepareWrapper({name:name,modifier:this.value,isOwn:isOwn,originalCall:originalCall,superProto:superProto,target:target});isOwn&&(methodWrapper.__ORIGINAL__=original),methodWrapper.__CONTAIN__=this.value,(methodWrapper.__METHOD__=this).value.displayName=this.getDisplayName(target),methodWrapper.displayName="internal wrapper",targetProto[name]=methodWrapper},getDisplayName:function(target){return target.meta.name+"["+this.name+"]"},isAppliedTo:function(target){var targetCont=target.prototype[this.name];return targetCont&&targetCont.__CONTAIN__==this.value},unapply:function(from){var name=this.name,fromProto=from.prototype,original=fromProto[name].__ORIGINAL__;if(!this.isAppliedTo(from))throw"Unapply of method ["+name+"] from class ["+from+"] failed";original?fromProto[name]=original:delete fromProto[name]}}).c,Joose.Managed.Property.MethodModifier.Override=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.Override",{isa:Joose.Managed.Property.MethodModifier,prepareWrapper:function(params){var modifier=params.modifier,originalCall=params.originalCall,superProto=params.superProto,superMetaConst=superProto.meta.constructor,isCallToProto=!(superMetaConst!=Joose.Proto.Class&&superMetaConst!=Joose.Proto.Object||params.isOwn&&originalCall.IS_OVERRIDE),original=originalCall;isCallToProto&&(original=function(){var beforeSUPER=this.SUPER;this.SUPER=superProto.SUPER;var res=originalCall.apply(this,arguments);return this.SUPER=beforeSUPER,res});function override(){var beforeSUPER=this.SUPER;this.SUPER=original;var res=modifier.apply(this,arguments);return this.SUPER=beforeSUPER,res}return override.IS_OVERRIDE=!0,override},getDisplayName:function(target){return target.meta.name+"[override "+this.name+"]"}}).c,Joose.Managed.Property.MethodModifier.Put=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.Put",{isa:Joose.Managed.Property.MethodModifier.Override,prepareWrapper:function(params){if(params.isOwn)throw"Method ["+params.name+"] is applying over something ["+params.originalCall+"] in class ["+params.target+"]";return Joose.Managed.Property.MethodModifier.Put.superClass.prepareWrapper.call(this,params)},getDisplayName:function(target){return target.meta.name+"["+this.name+"]"}}).c,Joose.Managed.Property.MethodModifier.After=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.After",{isa:Joose.Managed.Property.MethodModifier,prepareWrapper:function(params){var modifier=params.modifier,originalCall=params.originalCall;return function(){var res=originalCall.apply(this,arguments);return modifier.apply(this,arguments),res}},getDisplayName:function(target){return target.meta.name+"[after "+this.name+"]"}}).c,Joose.Managed.Property.MethodModifier.Before=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.Before",{isa:Joose.Managed.Property.MethodModifier,prepareWrapper:function(params){var modifier=params.modifier,originalCall=params.originalCall;return function(){return modifier.apply(this,arguments),originalCall.apply(this,arguments)}},getDisplayName:function(target){return target.meta.name+"[before "+this.name+"]"}}).c,Joose.Managed.Property.MethodModifier.Around=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.Around",{isa:Joose.Managed.Property.MethodModifier,prepareWrapper:function(params){function bound(){return originalCall.apply(me,arguments)}var me,modifier=params.modifier,originalCall=params.originalCall;return function(){me=this;var boundArr=[bound];return boundArr.push.apply(boundArr,arguments),modifier.apply(this,boundArr)}},getDisplayName:function(target){return target.meta.name+"[around "+this.name+"]"}}).c,Joose.Managed.Property.MethodModifier.Augment=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.Augment",{isa:Joose.Managed.Property.MethodModifier,prepareWrapper:function(params){var AUGMENT=function(){for(var callstack=[],self=AUGMENT;callstack.push(self.IS_AUGMENT?self.__CONTAIN__:self),self=self.IS_AUGMENT&&(self.__ORIGINAL__||self.SUPER[self.methodName]););var beforeINNER=this.INNER;this.INNER=function(){var innerCall=callstack.pop();return innerCall?innerCall.apply(this,arguments):void 0};var res=this.INNER.apply(this,arguments);return this.INNER=beforeINNER,res};return AUGMENT.methodName=params.name,AUGMENT.SUPER=params.superProto,AUGMENT.IS_AUGMENT=!0,AUGMENT},getDisplayName:function(target){return target.meta.name+"[augment "+this.name+"]"}}).c,Joose.Managed.PropertySet=new Joose.Proto.Class("Joose.Managed.PropertySet",{isa:Joose.Managed.Property,properties:null,propertyMetaClass:Joose.Managed.Property,initialize:function(props){Joose.Managed.PropertySet.superClass.initialize.call(this,props),this.properties=props.properties||{}},addProperty:function(name,props){var metaClass=props.meta||this.propertyMetaClass;return delete props.meta,props.definedIn=this,props.name=name,this.properties[name]=new metaClass(props)},addPropertyObject:function(object){return this.properties[object.name]=object},removeProperty:function(name){var prop=this.properties[name];return delete this.properties[name],prop},haveProperty:function(name){return null!=this.properties[name]},haveOwnProperty:function(name){return this.haveProperty(name)&&this.properties.hasOwnProperty(name)},getProperty:function(name){return this.properties[name]},each:function(func,scope){Joose.O.each(this.properties,func,scope||this)},eachOwn:function(func,scope){Joose.O.eachOwn(this.properties,func,scope||this)},eachAll:function(func,scope){this.each(func,scope)},cloneProps:function(){var props=Joose.Managed.PropertySet.superClass.cloneProps.call(this);return props.propertyMetaClass=this.propertyMetaClass,props},clone:function(name){var clone=this.cleanClone(name);return clone.properties=Joose.O.copyOwn(this.properties),clone},cleanClone:function(name){var props=this.cloneProps();return props.name=name||props.name,new this.constructor(props)},alias:function(what){var props=this.properties;Joose.O.each(what,function(aliasName,originalName){var original=props[originalName];original&&this.addPropertyObject(original.clone(aliasName))},this)},exclude:function(what){var props=this.properties;Joose.A.each(what,function(name){delete props[name]})},beforeConsumedBy:function(){},flattenTo:function(target){var targetProps=target.properties;this.eachOwn(function(property,name){var targetProperty=targetProps[name];targetProperty instanceof Joose.Managed.Property.ConflictMarker||(targetProps.hasOwnProperty(name)&&null!=targetProperty?targetProperty!=property&&(target.removeProperty(name),target.addProperty(name,{meta:Joose.Managed.Property.ConflictMarker})):target.addPropertyObject(property))},this)},composeTo:function(target){this.eachOwn(function(property,name){target.haveOwnProperty(name)||target.addPropertyObject(property)})},composeFrom:function(){if(arguments.length){var flattening=this.cleanClone();Joose.A.each(arguments,function(arg){var isDescriptor=!(arg instanceof Joose.Managed.PropertySet),propSet=isDescriptor?arg.propertySet:arg;propSet.beforeConsumedBy(this,flattening),isDescriptor&&((arg.alias||arg.exclude)&&(propSet=propSet.clone()),arg.alias&&propSet.alias(arg.alias),arg.exclude&&propSet.exclude(arg.exclude)),propSet.flattenTo(flattening)},this),flattening.composeTo(this)}},preApply:function(target){this.eachOwn(function(property){property.preApply(target)})},apply:function(target){this.eachOwn(function(property){property.apply(target)})},unapply:function(from){this.eachOwn(function(property){property.unapply(from)})},postUnApply:function(target){this.eachOwn(function(property){property.postUnApply(target)})}}).c;var __ID__=1;Joose.Managed.PropertySet.Mutable=new Joose.Proto.Class("Joose.Managed.PropertySet.Mutable",{isa:Joose.Managed.PropertySet,ID:null,derivatives:null,opened:null,composedFrom:null,initialize:function(props){Joose.Managed.PropertySet.Mutable.superClass.initialize.call(this,props),this.opened=1,this.derivatives={},this.ID=__ID__++,this.composedFrom=[]},addComposeInfo:function(){this.ensureOpen(),Joose.A.each(arguments,function(arg){this.composedFrom.push(arg),(arg instanceof Joose.Managed.PropertySet?arg:arg.propertySet).derivatives[this.ID]=this},this)},removeComposeInfo:function(){this.ensureOpen(),Joose.A.each(arguments,function(arg){for(var i=0;i<this.composedFrom.length;){var propSet=this.composedFrom[i];arg==(propSet=propSet instanceof Joose.Managed.PropertySet?propSet:propSet.propertySet)?(delete propSet.derivatives[this.ID],this.composedFrom.splice(i,1)):i++}},this)},ensureOpen:function(){if(!this.opened)throw"Mutation of closed property set: ["+this.name+"]"},addProperty:function(name,props){return this.ensureOpen(),Joose.Managed.PropertySet.Mutable.superClass.addProperty.call(this,name,props)},addPropertyObject:function(object){return this.ensureOpen(),Joose.Managed.PropertySet.Mutable.superClass.addPropertyObject.call(this,object)},removeProperty:function(name){return this.ensureOpen(),Joose.Managed.PropertySet.Mutable.superClass.removeProperty.call(this,name)},composeFrom:function(){return this.ensureOpen(),Joose.Managed.PropertySet.Mutable.superClass.composeFrom.apply(this,this.composedFrom)},open:function(){this.opened++,1==this.opened&&(Joose.O.each(this.derivatives,function(propSet){propSet.open()}),this.deCompose())},close:function(){if(!this.opened)throw"Unmatched 'close' operation on property set: ["+this.name+"]";1==this.opened&&(this.reCompose(),Joose.O.each(this.derivatives,function(propSet){propSet.close()})),this.opened--},reCompose:function(){this.composeFrom()},deCompose:function(){this.eachOwn(function(property,name){property.definedIn!=this&&this.removeProperty(name)},this)}}).c,Joose.Managed.StemElement=function(){throw"Modules may not be instantiated."},Joose.Managed.StemElement.Attributes=new Joose.Proto.Class("Joose.Managed.StemElement.Attributes",{isa:Joose.Managed.PropertySet.Mutable,propertyMetaClass:Joose.Managed.Property.Attribute}).c,Joose.Managed.StemElement.Methods=new Joose.Proto.Class("Joose.Managed.StemElement.Methods",{isa:Joose.Managed.PropertySet.Mutable,propertyMetaClass:Joose.Managed.Property.MethodModifier.Put,preApply:function(){},postUnApply:function(){}}).c,Joose.Managed.StemElement.Requirements=new Joose.Proto.Class("Joose.Managed.StemElement.Requirements",{isa:Joose.Managed.PropertySet.Mutable,propertyMetaClass:Joose.Managed.Property.Requirement,alias:function(){},exclude:function(){},flattenTo:function(target){this.each(function(property,name){target.haveProperty(name)||target.addPropertyObject(property)})},composeTo:function(target){this.flattenTo(target)},preApply:function(){},postUnApply:function(){}}).c,Joose.Managed.StemElement.MethodModifiers=new Joose.Proto.Class("Joose.Managed.StemElement.MethodModifiers",{isa:Joose.Managed.PropertySet.Mutable,propertyMetaClass:null,addProperty:function(name,props){var metaClass=props.meta;delete props.meta,props.definedIn=this,props.name=name;var modifier=new metaClass(props),properties=this.properties;return properties[name]||(properties[name]=[]),properties[name].push(modifier),modifier},addPropertyObject:function(object){var name=object.name,properties=this.properties;return properties[name]||(properties[name]=[]),properties[name].push(object),object},removeProperty:function(name){if(this.haveProperty(name)){var properties=this.properties,modifier=properties[name].pop();return properties[name].length||Joose.Managed.StemElement.MethodModifiers.superClass.removeProperty.call(this,name),modifier}},alias:function(){},exclude:function(){},flattenTo:function(target){var targetProps=target.properties;this.each(function(modifiersArr,name){var targetModifiersArr=targetProps[name];null==targetModifiersArr&&(targetModifiersArr=targetProps[name]=[]),Joose.A.each(modifiersArr,function(modifier){Joose.A.exists(targetModifiersArr,modifier)||targetModifiersArr.push(modifier)})})},composeTo:function(target){this.flattenTo(target)},deCompose:function(){this.each(function(modifiersArr,name){for(var i=0;i<modifiersArr.length;)modifiersArr[i].definedIn!=this?modifiersArr.splice(i,1):i++})},preApply:function(target){},postUnApply:function(target){},apply:function(target){this.each(function(modifiersArr,name){Joose.A.each(modifiersArr,function(modifier){modifier.apply(target)})})},unapply:function(from){this.each(function(modifiersArr,name){for(var i=modifiersArr.length-1;0<=i;i--)modifiersArr[i].unapply(from)})}}).c,Joose.Managed.PropertySet.Composition=new Joose.Proto.Class("Joose.Managed.PropertySet.Composition",{isa:Joose.Managed.PropertySet.Mutable,propertyMetaClass:Joose.Managed.PropertySet.Mutable,processOrder:null,each:function(func,scope){var props=this.properties;scope=scope||this;Joose.A.each(this.processOrder,function(name){func.call(scope,props[name],name)})},eachR:function(func,scope){var props=this.properties;scope=scope||this;Joose.A.eachR(this.processOrder,function(name){func.call(scope,props[name],name)})},clone:function(name){var clone=this.cleanClone(name);return this.each(function(property){clone.addPropertyObject(property.clone())}),clone},alias:function(what){this.each(function(property){property.alias(what)})},exclude:function(what){this.each(function(property){property.exclude(what)})},flattenTo:function(target){var targetProps=target.properties;this.each(function(property,name){var subTarget=targetProps[name]||target.addProperty(name,{meta:property.constructor});property.flattenTo(subTarget)})},composeTo:function(target){var targetProps=target.properties;this.each(function(property,name){var subTarget=targetProps[name]||target.addProperty(name,{meta:property.constructor});property.composeTo(subTarget)})},deCompose:function(){this.eachR(function(property){property.open()}),Joose.Managed.PropertySet.Composition.superClass.deCompose.call(this)},reCompose:function(){Joose.Managed.PropertySet.Composition.superClass.reCompose.call(this),this.each(function(property){property.close()})},unapply:function(from){this.eachR(function(property){property.unapply(from)})}}).c,Joose.Managed.Stem=new Joose.Proto.Class("Joose.Managed.Stem",{isa:Joose.Managed.PropertySet.Composition,targetMeta:null,attributesMC:Joose.Managed.StemElement.Attributes,methodsMC:Joose.Managed.StemElement.Methods,requirementsMC:Joose.Managed.StemElement.Requirements,methodsModifiersMC:Joose.Managed.StemElement.MethodModifiers,processOrder:["attributes","methods","requirements","methodsModifiers"],initialize:function(props){Joose.Managed.Stem.superClass.initialize.call(this,props);var targetMeta=this.targetMeta;this.addProperty("attributes",{meta:this.attributesMC,properties:targetMeta?targetMeta.attributes:{}}),this.addProperty("methods",{meta:this.methodsMC,properties:targetMeta?targetMeta.methods:{}}),this.addProperty("requirements",{meta:this.requirementsMC}),this.addProperty("methodsModifiers",{meta:this.methodsModifiersMC})},reCompose:function(){var c=this.targetMeta.c;this.preApply(c),Joose.Managed.Stem.superClass.reCompose.call(this),this.apply(c)},deCompose:function(){var c=this.targetMeta.c;this.unapply(c),Joose.Managed.Stem.superClass.deCompose.call(this),this.postUnApply(c)}}).c,Joose.Managed.Builder=new Joose.Proto.Class("Joose.Managed.Builder",{targetMeta:null,_buildStart:function(targetMeta,props){targetMeta.stem.open(),Joose.A.each(["trait","traits","removeTrait","removeTraits","does","doesnot","doesnt"],function(builder){props[builder]&&(this[builder](targetMeta,props[builder]),delete props[builder])},this)},_extend:function(props){if(!Joose.O.isEmpty(props)){var targetMeta=this.targetMeta;this._buildStart(targetMeta,props),Joose.O.eachOwn(props,function(value,name){var handler=this[name];if(!handler)throw new Error("Unknown builder ["+name+"] was used during extending of ["+targetMeta.c+"]");handler.call(this,targetMeta,value)},this),this._buildComplete(targetMeta,props)}},_buildComplete:function(targetMeta,props){targetMeta.stem.close()},methods:function(targetMeta,info){Joose.O.eachOwn(info,function(value,name){targetMeta.addMethod(name,value)})},removeMethods:function(targetMeta,info){Joose.A.each(info,function(name){targetMeta.removeMethod(name)})},have:function(targetMeta,info){Joose.O.eachOwn(info,function(value,name){targetMeta.addAttribute(name,value)})},havenot:function(targetMeta,info){Joose.A.each(info,function(name){targetMeta.removeAttribute(name)})},havent:function(targetMeta,info){this.havenot(targetMeta,info)},after:function(targetMeta,info){Joose.O.each(info,function(value,name){targetMeta.addMethodModifier(name,value,Joose.Managed.Property.MethodModifier.After)})},before:function(targetMeta,info){Joose.O.each(info,function(value,name){targetMeta.addMethodModifier(name,value,Joose.Managed.Property.MethodModifier.Before)})},override:function(targetMeta,info){Joose.O.each(info,function(value,name){targetMeta.addMethodModifier(name,value,Joose.Managed.Property.MethodModifier.Override)})},around:function(targetMeta,info){Joose.O.each(info,function(value,name){targetMeta.addMethodModifier(name,value,Joose.Managed.Property.MethodModifier.Around)})},augment:function(targetMeta,info){Joose.O.each(info,function(value,name){targetMeta.addMethodModifier(name,value,Joose.Managed.Property.MethodModifier.Augment)})},removeModifier:function(targetMeta,info){Joose.A.each(info,function(name){targetMeta.removeMethodModifier(name)})},does:function(targetMeta,info){Joose.A.each(Joose.O.wantArray(info),function(desc){targetMeta.addRole(desc)})},doesnot:function(targetMeta,info){Joose.A.each(Joose.O.wantArray(info),function(desc){targetMeta.removeRole(desc)})},doesnt:function(targetMeta,info){this.doesnot(targetMeta,info)},trait:function(){this.traits.apply(this,arguments)},traits:function(targetMeta,info){if(!targetMeta.firstPass){if(!targetMeta.meta.isDetached)throw"Can't apply trait to not detached class";targetMeta.meta.extend({does:info})}},removeTrait:function(){this.removeTraits.apply(this,arguments)},removeTraits:function(targetMeta,info){if(!targetMeta.meta.isDetached)throw"Can't remove trait from not detached class";targetMeta.meta.extend({doesnot:info})},name:function(targetMeta,name){targetMeta.name=name}}).c,Joose.Managed.Class=new Joose.Proto.Class("Joose.Managed.Class",{isa:Joose.Proto.Class,stem:null,stemClass:Joose.Managed.Stem,stemClassCreated:!1,builder:null,builderClass:Joose.Managed.Builder,builderClassCreated:!1,isDetached:!1,firstPass:!0,skipTraitsAnchor:{},BUILD:function(){var sup=Joose.Managed.Class.superClass.BUILD.apply(this,arguments),props=sup.__extend__,traits=Joose.O.wantArray(props.trait||props.traits||[]);return delete props.trait,delete props.traits,Joose.A.each(Joose.O.wantArray(props.does||[]),function(arg){var role=arg.meta instanceof Joose.Managed.Class?arg:arg.role;role.meta.meta.isDetached&&traits.push(role.meta.constructor)}),traits.length&&(props.traits=traits),sup},initInstance:function(instance,props){Joose.O.each(this.attributes,function(attribute,name){attribute instanceof Joose.Managed.Attribute?attribute.initFromConfig(instance,props):props.hasOwnProperty(name)&&(instance[name]=props[name])})},defaultConstructor:function(){return function(skipTraitsAnchor,params){var thisMeta=this.meta,skipTraits=skipTraitsAnchor==thisMeta.skipTraitsAnchor,BUILD=this.BUILD,props=BUILD&&BUILD.apply(this,skipTraits?params:arguments)||(skipTraits?params[0]:skipTraitsAnchor)||{},extend=props.__extend__||props,traits=extend.trait||extend.traits;if(!traits&&!extend.detached||(delete extend.trait,delete extend.traits,delete extend.detached,skipTraits))return thisMeta.initInstance(this,props),thisMeta.hasMethod("initialize")&&this.initialize(props)||this;var meta=thisMeta.subClass({does:traits||[]},thisMeta.name).meta;return meta.isDetached=!0,meta.instantiate(thisMeta.skipTraitsAnchor,arguments)}},finalize:function(extend){Joose.Managed.Class.superClass.finalize.call(this,extend),this.stem.close(),this.afterMutate()},processStem:function(){Joose.Managed.Class.superClass.processStem.call(this),this.builder=new this.builderClass({targetMeta:this}),this.stem=new this.stemClass({name:this.name,targetMeta:this});var builderClass=this.getClassInAttribute("builderClass");builderClass&&(this.builderClassCreated=!0,this.addAttribute("builderClass",this.subClassOf(builderClass)));var stemClass=this.getClassInAttribute("stemClass");stemClass&&(this.stemClassCreated=!0,this.addAttribute("stemClass",this.subClassOf(stemClass)))},extend:function(props){props.builder&&(this.getBuilderTarget().meta.extend(props.builder),delete props.builder),props.stem&&(this.getStemTarget().meta.extend(props.stem),delete props.stem),this.builder._extend(props),this.firstPass=!1,this.stem.opened||this.afterMutate()},getBuilderTarget:function(){var builderClass=this.getClassInAttribute("builderClass");if(!builderClass)throw"Attempt to extend a builder on non-meta class";return builderClass},getStemTarget:function(){var stemClass=this.getClassInAttribute("stemClass");if(!stemClass)throw"Attempt to extend a stem on non-meta class";return stemClass},getClassInAttribute:function(attributeName){var attrClass=this.getAttribute(attributeName);return attrClass instanceof Joose.Managed.Property.Attribute&&(attrClass=attrClass.value),attrClass},addMethodModifier:function(name,func,type){var props={};return props.init=func,props.meta=type,this.stem.properties.methodsModifiers.addProperty(name,props)},removeMethodModifier:function(name){return this.stem.properties.methodsModifiers.removeProperty(name)},addMethod:function(name,func,props){return(props=props||{}).init=func,this.stem.properties.methods.addProperty(name,props)},addAttribute:function(name,init,props){return(props=props||{}).init=init,this.stem.properties.attributes.addProperty(name,props)},removeMethod:function(name){return this.stem.properties.methods.removeProperty(name)},removeAttribute:function(name){return this.stem.properties.attributes.removeProperty(name)},hasMethod:function(name){return this.stem.properties.methods.haveProperty(name)},hasAttribute:function(name){return this.stem.properties.attributes.haveProperty(name)},hasMethodModifiersFor:function(name){return this.stem.properties.methodsModifiers.haveProperty(name)},hasOwnMethod:function(name){return this.stem.properties.methods.haveOwnProperty(name)},hasOwnAttribute:function(name){return this.stem.properties.attributes.haveOwnProperty(name)},getMethod:function(name){return this.stem.properties.methods.getProperty(name)},getAttribute:function(name){return this.stem.properties.attributes.getProperty(name)},eachRole:function(roles,func,scope){Joose.A.each(roles,function(arg,index){var role=arg.meta instanceof Joose.Managed.Class?arg:arg.role;func.call(scope||this,arg,role,index)},this)},addRole:function(){this.eachRole(arguments,function(arg,role){this.beforeRoleAdd(role);var desc=arg;role!=arg?(desc.propertySet=role.meta.stem,delete desc.role):desc=desc.meta.stem,this.stem.addComposeInfo(desc)},this)},beforeRoleAdd:function(role){var roleMeta=role.meta;roleMeta.builderClassCreated&&this.getBuilderTarget().meta.extend({does:[roleMeta.getBuilderTarget()]}),roleMeta.stemClassCreated&&this.getStemTarget().meta.extend({does:[roleMeta.getStemTarget()]}),roleMeta.meta.isDetached&&!this.firstPass&&this.builder.traits(this,roleMeta.constructor)},beforeRoleRemove:function(role){var roleMeta=role.meta;roleMeta.builderClassCreated&&this.getBuilderTarget().meta.extend({doesnt:[roleMeta.getBuilderTarget()]}),roleMeta.stemClassCreated&&this.getStemTarget().meta.extend({doesnt:[roleMeta.getStemTarget()]}),roleMeta.meta.isDetached&&!this.firstPass&&this.builder.removeTraits(this,roleMeta.constructor)},removeRole:function(){this.eachRole(arguments,function(arg,role){this.beforeRoleRemove(role),this.stem.removeComposeInfo(role.meta.stem)},this)},getRoles:function(){return Joose.A.map(this.stem.composedFrom,function(composeDesc){return composeDesc instanceof Joose.Managed.PropertySet?composeDesc.targetMeta.c:composeDesc.propertySet})},does:function(role){for(var myRoles=this.getRoles(),i=0;i<myRoles.length;i++)if(role==myRoles[i])return!0;for(i=0;i<myRoles.length;i++)if(myRoles[i].meta.does(role))return!0;var superMeta=this.superClass.meta;return!!(this.superClass!=Joose.Proto.Empty&&superMeta&&superMeta.meta&&superMeta.meta.hasMethod("does"))&&superMeta.does(role)},getMethods:function(){return this.stem.properties.methods},getAttributes:function(){return this.stem.properties.attributes},afterMutate:function(){},getCurrentMethod:function(){for(var wrapper=arguments.callee.caller,count=0;wrapper&&count<5;wrapper=wrapper.caller,count++)if(wrapper.__METHOD__)return wrapper.__METHOD__;return null}}).c,Joose.Managed.Role=new Joose.Managed.Class("Joose.Managed.Role",{isa:Joose.Managed.Class,have:{defaultSuperClass:Joose.Proto.Empty,builderRole:null,stemRole:null},methods:{defaultConstructor:function(){return function(){throw new Error("Roles cant be instantiated")}},processSuperClass:function(){if(this.superClass!=this.defaultSuperClass)throw new Error("Roles can't inherit from anything")},getBuilderTarget:function(){return this.builderRole||(this.builderRole=(new this.constructor).c,this.builderClassCreated=!0),this.builderRole},getStemTarget:function(){return this.stemRole||(this.stemRole=(new this.constructor).c,this.stemClassCreated=!0),this.stemRole},addRequirement:function(methodName){this.stem.properties.requirements.addProperty(methodName,{})}},stem:{methods:{apply:function(){},unapply:function(){}}},builder:{methods:{requires:function(targetClassMeta,info){Joose.A.each(Joose.O.wantArray(info),function(methodName){targetClassMeta.addRequirement(methodName)},this)}}}}).c,Joose.Managed.Attribute=new Joose.Managed.Class("Joose.Managed.Attribute",{isa:Joose.Managed.Property.Attribute,have:{is:null,builder:null,isPrivate:!1,role:null,publicName:null,setterName:null,getterName:null,readable:!1,writeable:!1,hasGetter:!1,hasSetter:!1,required:!1,canInlineSetRaw:!0,canInlineGetRaw:!0},after:{initialize:function(){var name=this.name;this.publicName=name.replace(/^_+/,""),this.slot=this.isPrivate?"$"+name:name,this.setterName=this.setterName||this.getSetterName(),this.getterName=this.getterName||this.getGetterName(),this.readable=this.hasGetter=/^r/i.test(this.is),this.writeable=this.hasSetter=/^.w/i.test(this.is)}},override:{computeValue:function(){var init=this.init;!Joose.O.isClass(init)&&Joose.O.isFunction(init)||this.SUPER()},preApply:function(targetClass){targetClass.meta.extend({methods:this.getAccessorsFor(targetClass)})},postUnApply:function(from){from.meta.extend({removeMethods:this.getAccessorsFrom(from)})}},methods:{getAccessorsFor:function(targetClass){var targetMeta=targetClass.meta,setterName=this.setterName,getterName=this.getterName,methods={};return this.hasSetter&&!targetMeta.hasMethod(setterName)&&(methods[setterName]=this.getSetter(),methods[setterName].ACCESSOR_FROM=this),this.hasGetter&&!targetMeta.hasMethod(getterName)&&(methods[getterName]=this.getGetter(),methods[getterName].ACCESSOR_FROM=this),methods},getAccessorsFrom:function(from){var targetMeta=from.meta,setterName=this.setterName,getterName=this.getterName,setter=this.hasSetter&&targetMeta.getMethod(setterName),getter=this.hasGetter&&targetMeta.getMethod(getterName),removeMethods=[];return setter&&setter.value.ACCESSOR_FROM==this&&removeMethods.push(setterName),getter&&getter.value.ACCESSOR_FROM==this&&removeMethods.push(getterName),removeMethods},getGetterName:function(){return"get"+Joose.S.uppercaseFirst(this.publicName)},getSetterName:function(){return"set"+Joose.S.uppercaseFirst(this.publicName)},getSetter:function(){var me=this,slot=me.slot;return me.canInlineSetRaw?function(value){return this[slot]=value,this}:function(){return me.setRawValueTo.apply(this,arguments)}},getGetter:function(){var me=this,slot=me.slot;return me.canInlineGetRaw?function(value){return this[slot]}:function(){return me.getRawValueFrom.apply(this,arguments)}},getValueFrom:function(instance){var getterName=this.getterName;return this.readable&&instance.meta.hasMethod(getterName)?instance[getterName]():this.getRawValueFrom(instance)},setValueTo:function(instance,value){var setterName=this.setterName;this.writeable&&instance.meta.hasMethod(setterName)?instance[setterName](value):this.setRawValueTo(instance,value)},initFromConfig:function(instance,config){var value,name=this.name,isSet=!1;if(config.hasOwnProperty(name))value=config[name],isSet=!0;else{var init=this.init;Joose.O.isFunction(init)&&!Joose.O.isClass(init)?(value=init.call(instance,config,name),isSet=!0):this.builder&&(value=instance[this.builder.replace(/^this\./,"")](config,name),isSet=!0)}if(isSet)this.setRawValueTo(instance,value);else if(this.required)throw new Error("Required attribute ["+name+"] is missed during initialization of "+instance)}}}).c,Joose.Managed.Attribute.Builder=new Joose.Managed.Role("Joose.Managed.Attribute.Builder",{have:{defaultAttributeClass:Joose.Managed.Attribute},builder:{methods:{has:function(targetClassMeta,info){Joose.O.eachOwn(info,function(props,name){"object"==typeof props&&null!=props&&props.constructor!=/ /.constructor||(props={init:props}),props.meta=props.meta||targetClassMeta.defaultAttributeClass,/^__/.test(name)&&(name=name.replace(/^_+/,""),props.isPrivate=!0),targetClassMeta.addAttribute(name,props.init,props)},this)},hasnot:function(targetClassMeta,info){this.havenot(targetClassMeta,info)},hasnt:function(targetClassMeta,info){this.hasnot(targetClassMeta,info)}}}}).c,Joose.Managed.My=new Joose.Managed.Role("Joose.Managed.My",{have:{myClass:null,needToReAlias:!1},methods:{createMy:function(extend){this.meta;var isRole=this instanceof Joose.Managed.Role,myExtend=extend.my||{};delete extend.my;var superClassMy=this.superClass.meta.myClass;isRole||myExtend.isa||!superClassMy||(myExtend.isa=superClassMy),myExtend.meta||myExtend.isa||(myExtend.meta=this.constructor),myExtend.name=this.name+".my";var createdClass=this.myClass=Class(myExtend),c=this.c;c.prototype.my=c.my=isRole?createdClass:new createdClass({HOST:c}),this.needToReAlias=!0},aliasStaticMethods:function(){this.needToReAlias=!1;var c=this.c,myProto=this.myClass.prototype;Joose.O.eachOwn(c,function(property,name){property.IS_ALIAS&&delete c[name]}),this.myClass.meta.stem.properties.methods.each(function(method,name){c[name]||((c[name]=function(){return myProto[name].apply(c.my,arguments)}).IS_ALIAS=!0)})}},override:{extend:function(props){var myClass=this.myClass;!myClass&&this.superClass.meta.myClass&&this.createMy(props),props.my&&(myClass?(this.needToReAlias=!0,myClass.meta.extend(props.my),delete props.my):this.createMy(props)),this.SUPER(props),!this.needToReAlias||this instanceof Joose.Managed.Role||this.aliasStaticMethods()}},before:{addRole:function(){var myStem;Joose.A.each(arguments,function(arg){if(!arg)throw new Error("Attempt to consume an undefined Role into ["+this.name+"]");var role=arg.meta instanceof Joose.Managed.Class?arg:arg.role;if(role.meta.meta.hasAttribute("myClass")&&role.meta.myClass){if(!this.myClass)return void this.createMy({my:{does:role.meta.myClass}});(myStem=this.myClass.meta.stem).opened||myStem.open(),myStem.addComposeInfo(role.my.meta.stem)}},this),myStem&&(myStem.close(),this.needToReAlias=!0)},removeRole:function(){if(this.myClass){var myStem=this.myClass.meta.stem;myStem.open(),Joose.A.each(arguments,function(role){role.meta.meta.hasAttribute("myClass")&&role.meta.myClass&&(myStem.removeComposeInfo(role.my.meta.stem),this.needToReAlias=!0)},this),myStem.close()}}}}).c,Joose.Namespace=Joose.stub(),Joose.Namespace.Able=new Joose.Managed.Role("Joose.Namespace.Able",{have:{bodyFunc:null},before:{extend:function(extend){extend.body&&(this.bodyFunc=extend.body,delete extend.body)}},after:{afterMutate:function(){var bodyFunc=this.bodyFunc;delete this.bodyFunc,bodyFunc&&Joose.Namespace.Manager.my.executeIn(this.c,bodyFunc)}}}).c,Joose.Managed.Bootstrap=new Joose.Managed.Role("Joose.Managed.Bootstrap",{does:[Joose.Namespace.Able,Joose.Managed.My,Joose.Managed.Attribute.Builder]}).c,Joose.Meta=Joose.stub(),Joose.Meta.Object=new Joose.Proto.Class("Joose.Meta.Object",{isa:Joose.Proto.Object}).c,Joose.Meta.Class=new Joose.Managed.Class("Joose.Meta.Class",{isa:Joose.Managed.Class,does:Joose.Managed.Bootstrap,have:{defaultSuperClass:Joose.Meta.Object}}).c,Joose.Meta.Role=new Joose.Meta.Class("Joose.Meta.Role",{isa:Joose.Managed.Role,does:Joose.Managed.Bootstrap}).c,Joose.Namespace.Keeper=new Joose.Meta.Class("Joose.Namespace.Keeper",{isa:Joose.Meta.Class,have:{externalConstructor:null},methods:{defaultConstructor:function(){return function(){var thisMeta=arguments.callee.meta;if(thisMeta instanceof Joose.Namespace.Keeper)throw new Error("Module ["+thisMeta.c+"] may not be instantiated. Forgot to 'use' the class with the same name?");var externalConstructor=thisMeta.externalConstructor;if("function"==typeof externalConstructor)return externalConstructor.meta=thisMeta,externalConstructor.apply(this,arguments);throw"NamespaceKeeper of ["+thisMeta.name+"] was planted incorrectly."}},plant:function(withClass){var keeper=this.c;keeper.meta=withClass.meta,(keeper.meta.c=keeper).meta.externalConstructor=withClass}}}).c,Joose.Namespace.Manager=new Joose.Managed.Class("Joose.Namespace.Manager",{have:{current:null},methods:{initialize:function(){this.current=[Joose.top]},getCurrent:function(){return this.current[0]},executeIn:function(ns,func){var current=this.current;current.unshift(ns);var res=func.call(ns,ns);return current.shift(),res},earlyCreate:function(name,metaClass,props){return props.constructorOnly=!0,new metaClass(name,props).c},create:function(nsName,metaClass,extend){if(!nsName)return new metaClass(nsName,extend).c;var me=this;if(/^\./.test(nsName))return this.executeIn(Joose.top,function(){return me.create(nsName.replace(/^\./,""),metaClass,extend)});for(var props=extend||{},parts=Joose.S.saneSplit(nsName,"."),object=this.getCurrent(),soFar=object==Joose.top?[]:Joose.S.saneSplit(object.meta.name,"."),i=0;i<parts.length;i++){var part=parts[i],isLast=i==parts.length-1;if("meta"==part||"my"==part||!part)throw"Module name ["+nsName+"] may not include a part called 'meta' or 'my' or empty part.";var cur=object[part];soFar.push(part);var nsKeeper,soFarName=soFar.join("."),needFinalize=!1;if(void 0===cur)isLast?(nsKeeper=this.earlyCreate(soFarName,metaClass,props),needFinalize=!0):nsKeeper=new Joose.Namespace.Keeper(soFarName).c,cur=object[part]=nsKeeper;else if(isLast&&cur&&cur.meta){var currentMeta=cur.meta;if(metaClass==Joose.Namespace.Keeper)currentMeta.extend(props);else if(currentMeta instanceof Joose.Namespace.Keeper)currentMeta.plant(this.earlyCreate(soFarName,metaClass,props)),needFinalize=!0;else if(!Joose.C.ignoreRepeatedDeclarations)throw new Error("Double declaration of ["+soFarName+"]")}else if(isLast&&!(cur&&cur.meta&&cur.meta.meta))throw"Trying to setup module "+soFarName+" failed. There is already something: "+cur;isLast&&this.prepareMeta(cur.meta),needFinalize&&cur.meta.construct(props),object=cur}return object},prepareMeta:function(){},prepareProperties:function(name,props,defaultMeta,callback){var meta;return name&&"string"!=typeof name&&(props=name,name=null),props&&props.meta&&(meta=props.meta,delete props.meta),meta=meta||(props&&"function"==typeof props.isa&&props.isa.meta?props.isa.meta.constructor:defaultMeta),callback.call(this,name,meta,props)},getDefaultHelperFor:function(metaClass){var me=this;return function(name,props){return me.prepareProperties(name,props,metaClass,function(name,meta,props){return me.create(name,meta,props)})}},register:function(helperName,metaClass,func){var me=this;if(this.meta.hasMethod(helperName)){function helper(){return me[helperName].apply(me,arguments)}Joose.top[helperName]||(Joose.top[helperName]=helper),Joose[helperName]||(Joose[helperName]=helper),Joose.is_NodeJS&&"undefined"!=typeof exports&&(exports[helperName]=helper)}else{var methods={};methods[helperName]=func||this.getDefaultHelperFor(metaClass),this.meta.extend({methods:methods}),this.register(helperName)}},Module:function(name,props){return this.prepareProperties(name,props,Joose.Namespace.Keeper,function(name,meta,props){return"function"==typeof props&&(props={body:props}),this.create(name,meta,props)})}}}).c,Joose.Namespace.Manager.my=new Joose.Namespace.Manager,Joose.Namespace.Manager.my.register("Class",Joose.Meta.Class),Joose.Namespace.Manager.my.register("Role",Joose.Meta.Role),Joose.Namespace.Manager.my.register("Module");var Class=Joose.Class,Role=Joose.Role;Role("Joose.Attribute.Delegate",{have:{handles:null},override:{eachDelegate:function(handles,func,scope){return"string"==typeof handles?func.call(scope,handles,handles):handles instanceof Array?Joose.A.each(handles,function(delegateTo){func.call(scope,delegateTo,delegateTo)}):void(handles===Object(handles)&&Joose.O.eachOwn(handles,function(delegateTo,handleAs){func.call(scope,handleAs,delegateTo)}))},getAccessorsFor:function(targetClass){var targetMeta=targetClass.meta,methods=this.SUPER(targetClass),me=this;return this.eachDelegate(this.handles,function(handleAs,delegateTo){targetMeta.hasMethod(handleAs)||((methods[handleAs]=function(){var attrValue=me.getValueFrom(this);return attrValue[delegateTo].apply(attrValue,arguments)}).ACCESSOR_FROM=me)}),methods},getAccessorsFrom:function(from){var methods=this.SUPER(from),me=this,targetMeta=from.meta;return this.eachDelegate(this.handles,function(handleAs){var handler=targetMeta.getMethod(handleAs);handler&&handler.value.ACCESSOR_FROM==me&&methods.push(handleAs)}),methods}}}),Role("Joose.Attribute.Trigger",{have:{trigger:null},after:{initialize:function(){if(this.trigger){if(!this.writeable)throw new Error("Can't use `trigger` for read-only attributes");this.hasSetter=!0}}},override:{getSetter:function(){var original=this.SUPER(),trigger=this.trigger;if(!trigger)return original;var me=this,init=Joose.O.isFunction(me.init)?null:me.init;return function(){var oldValue=me.hasValue(this)?me.getValueFrom(this):init,res=original.apply(this,arguments);return trigger.call(this,me.getValueFrom(this),oldValue),res}}}}),Role("Joose.Attribute.Lazy",{have:{lazy:null},before:{computeValue:function(){"function"==typeof this.init&&this.lazy&&(this.lazy=this.init,delete this.init)}},after:{initialize:function(){this.lazy&&(this.readable=this.hasGetter=!0)}},override:{getGetter:function(){var original=this.SUPER(),lazy=this.lazy;if(!lazy)return original;var me=this;return function(){if(!me.hasValue(this)){var initializer="function"==typeof lazy?lazy:this[lazy.replace(/^this\./,"")];me.setValueTo(this,initializer.apply(this,arguments))}return original.call(this)}}}}),Role("Joose.Attribute.Accessor.Combined",{have:{isCombined:!1},after:{initialize:function(){this.isCombined=this.isCombined||/..c/i.test(this.is),this.isCombined&&(this.slot="$$"+this.name,this.hasGetter=!0,this.hasSetter=!1,this.setterName=this.getterName=this.publicName)}},override:{getGetter:function(){var getter=this.SUPER();if(!this.isCombined)return getter;var setter=this.getSetter(),me=this;return function(){if(!arguments.length){if(me.readable)return getter.call(this);throw new Error("Call to getter of unreadable attribute: ["+me.name+"]")}if(me.writeable)return setter.apply(this,arguments);throw new Error("Call to setter of read-only attribute: ["+me.name+"]")}}}}),Joose.Managed.Attribute.meta.extend({does:[Joose.Attribute.Delegate,Joose.Attribute.Trigger,Joose.Attribute.Lazy,Joose.Attribute.Accessor.Combined]}),Role("Joose.Meta.Singleton",{has:{forceInstance:Joose.I.Object,instance:null},override:{defaultConstructor:function(){var meta=this,previous=this.SUPER();return this.adaptConstructor(previous),function(forceInstance,params){if(forceInstance==meta.forceInstance)return previous.apply(this,params)||this;var instance=meta.instance;return instance=instance||(meta.instance=new meta.c(meta.forceInstance,arguments)),meta.hasMethod("configure")&&instance.configure.apply(instance,arguments),instance}}}}),Joose.Namespace.Manager.my.register("Singleton",Class({isa:Joose.Meta.Class,meta:Joose.Meta.Class,does:Joose.Meta.Singleton}))}(),Joose.C.ignoreRepeatedDeclarations=!0,Class("JooseX.Observable.Event",{has:{name:{required:!0},args:{required:!0},source:{required:!0},splat:null,current:null,bubbling:!0},methods:{stopPropagation:function(){this.bubbling=!1}}}),Class("JooseX.Observable.Listener",{has:{channel:{required:!0},eventName:{required:!0},func:{required:!0},scope:null,single:!1,buffer:null,bufferMax:null,bufferStartedAt:null,bufferTimeout:null,delayTimeout:null,delay:null},methods:{activate:function(event,args){var me=this;if(null!=me.buffer){if(null!=me.bufferMax)if(me.bufferStartedAt){if(new Date-me.bufferStartedAt>me.bufferMax)return}else me.bufferStartedAt=new Date;return me.bufferTimeout&&clearTimeout(me.bufferTimeout),void(me.bufferTimeout=setTimeout(function(){delete me.bufferStartedAt,delete me.bufferTimeout,me.doActivate(event,args)},me.buffer))}if(null==me.delay)return me.doActivate(event,args);me.delayTimeout=setTimeout(function(){delete me.delayTimeout,me.doActivate(event,args)},me.delay)},doActivate:function(event,args){return this.single&&this.remove(),!1!==this.func.apply(this.scope||event.source,[event].concat(args))},cancel:function(){this.buffer&&(clearTimeout(this.bufferTimeout),delete this.bufferTimeout,delete this.bufferStartedAt),this.delay&&clearTimeout(this.delayTimeout)},remove:function(){this.channel.removeListener(this)}}}),Class("JooseX.Observable.Channel",{has:{channels:Joose.I.Object,listeners:Joose.I.Object},methods:{destroy:function(){Joose.O.each(this.channels,function(channel,name){channel.purgeListeners()}),this.channels=null,Joose.O.each(this.listeners,function(value,name){this.listeners[name]=null},this),this.listeners=null},getListenersFor:function(segments,name,activators){var listeners=this.listeners;if(listeners["**"]){var splat=segments.concat(name);Joose.A.each(listeners["**"],function(listener){activators.push({listener:listener,splat:splat})})}if(segments.length){var next=this.getSingleChannel(segments.shift(),!0);next&&next.getListenersFor(segments,name,activators)}else listeners["*"]&&Joose.A.each(listeners["*"],function(listener){activators.push({listener:listener,splat:name})}),listeners[name]&&Joose.A.each(listeners[name],function(listener){activators.push({listener:listener})})},hasListenerFor:function(segments,name){var listeners=this.listeners;if(listeners["**"]&&listeners["**"].length)return!0;if(segments.length){var next=this.getSingleChannel(segments.shift(),!0);if(next)return next.hasListenerFor(segments,name)}else{if(listeners["*"]&&listeners["*"].length)return!0;if(listeners[name]&&listeners[name].length)return!0}return!1},addListener:function(listener){var eventName=listener.eventName,listeners=this.listeners;listeners[eventName]=listeners[eventName]||[],listeners[eventName].push(listener)},removeListener:function(listenerToRemove){if(this.listeners){var eventListeners=this.listeners[listenerToRemove.eventName];eventListeners&&Joose.A.each(eventListeners,function(listener,index){if(listener==listenerToRemove)return eventListeners.splice(index,1),!1})}},removeListenerByHandler:function(eventName,func,scope){var eventListeners=this.listeners[eventName];eventListeners&&Joose.A.each(eventListeners,function(listener,index){if(listener.func==func&&listener.scope==scope)return eventListeners.splice(index,1),!1})},getSingleChannel:function(name,doNotCreate){var channels=this.channels;return channels[name]?channels[name]:doNotCreate?null:channels[name]=new JooseX.Observable.Channel},getChannel:function(segments,doNotCreate){if(!segments.length)return this;var next=this.getSingleChannel(segments.shift(),doNotCreate);return doNotCreate&&!next?null:next.getChannel(segments,doNotCreate)}}}),Role("JooseX.Observable",{VERSION:.04,has:{rootChannel:{is:"rw",init:function(){return new JooseX.Observable.Channel}},suspendCounter:0},methods:{getBubbleTarget:function(){},parseEventPath:function(path){var channels=path.split("/"),eventName=channels.pop();return channels.length&&!channels[0]&&channels.shift(),{channels:channels,eventName:eventName}},on:function(path,func,scope,options){if(!func)throw"Not valid listener function provided when subsribing on event: "+path;var parsed=this.parseEventPath(path),channel=this.getRootChannel().getChannel(parsed.channels),listener=new JooseX.Observable.Listener(Joose.O.extend(options||{},{channel:channel,eventName:parsed.eventName,func:func,scope:scope}));return channel.addListener(listener),listener},un:function(path,func,scope){if(path instanceof JooseX.Observable.Listener)path.remove();else{var parsed=this.parseEventPath(path),channel=this.getRootChannel().getChannel(parsed.channels,!0);channel&&channel.removeListenerByHandler(parsed.eventName,func,scope)}},emit:function(){return this.fireEvent.apply(this,arguments)},fireEvent:function(path){if(!this.suspendCounter){var args=Array.prototype.slice.call(arguments,1),event=new JooseX.Observable.Event({name:path,args:args,source:this});return this.propagateEvent(event,path,args)}},propagateEvent:function(event,path,args){if(!this.suspendCounter){var parsed=this.parseEventPath(path),eventName=parsed.eventName;if("*"==!eventName||"**"==eventName)throw new Error("Can't fire an empty event or event with `*`, `**` names ");var activators=[];this.getRootChannel().getListenersFor(parsed.channels,eventName,activators);var res=!0;if(event.current=this,activators.length&&Joose.A.each(activators,function(activator){event.splat=activator.splat,res=!1!==activator.listener.activate(event,args)&&res}),event.bubbling){var further=this.getBubbleTarget();further&&(res=!1!==further.propagateEvent(event,path,args)&&res)}return res}},hasListenerFor:function(path){var parsed=this.parseEventPath(path);return this.getRootChannel().hasListenerFor(parsed.channels,parsed.eventName)},purgeListeners:function(){this.rootChannel.destroy(),this.rootChannel=new JooseX.Observable.Channel},suspendEvents:function(){this.suspendCounter++},resumeEvents:function(){this.suspendCounter--,this.suspendCounter<0&&(this.suspendCounter=0)}}}),Class("JooseX.Namespace.Depended.Manager",{my:{have:{INC:["lib","/jsan"],disableCaching:!0,resources:{},resourceTypes:{},ANONYMOUS_RESOURCE_COUNTER:0},methods:{getMyResource:function(type,token,me){var resource=this.getResource({type:type,token:token});if(resource.attachedTo&&resource.attachedTo!=me)throw resource+" is already attached to ["+resource.attachedTo+"]";return resource.attachedTo=me,resource.loaded=!0,resource.loading=!1,resource},getResource:function(descriptor){if("object"==typeof descriptor){var type=descriptor.type=descriptor.type||"javascript",token=descriptor.token,requiredVersion=descriptor.version;delete descriptor.version}else if("string"==typeof descriptor){var match=/^(\w+):\/\/(.+)/.exec(descriptor);match?(type=match[1],token=match[2],"http"!=type&&"https"!=type||(token=type+"://"+token,type="javascript")):type=/\//.test(token=descriptor)||/\.js$/.test(token)?"javascript":"joose"}token||(token="__ANONYMOUS_RESOURCE__"+this.ANONYMOUS_RESOURCE_COUNTER++,descriptor=void 0);var id=type+"://"+token,resource=this.resources[id];if(!resource){var resourceClass=this.resourceTypes[type];if(!resourceClass)throw new Error("Unknown resource type: ["+type+"]");resource=this.resources[id]=new resourceClass("object"==typeof descriptor?descriptor:{token:token,type:type})}return resource.setRequiredVersion(requiredVersion),resource},registerResourceClass:function(typeName,resourceClass){this.resourceTypes[typeName]=resourceClass},use:function(dependenciesInfo,callback,scope){Class({use:dependenciesInfo,body:function(){callback&&Joose.Namespace.Manager.my.executeIn(Joose.top,function(ns){callback.call(scope||this,ns)})}})},getINC:function(){var INC=this.INC,original=use.__ORIGINAL__,paths=use.paths;if(INC==original&&paths!=original)return paths;if(INC!=original&&paths==original)return INC;if(INC!=original&&paths!=original)throw"Both INC sources has been modified";return INC}}}}),use=function(dependenciesInfo,callback,scope){JooseX.Namespace.Depended.Manager.my.use(dependenciesInfo,callback,scope)},use.paths=use.__ORIGINAL__=JooseX.Namespace.Depended.Manager.my.INC,Joose.I.FutureClass=function(className){return function(){return eval(className)}},Class("JooseX.Namespace.Depended.Resource",{has:{attachedTo:null,type:null,token:null,id:null,loading:!1,loaded:!1,ready:!1,presence:null,readyness:null,loadedFromURL:null,readyListeners:Joose.I.Array,dependencies:Joose.I.Object,onBeforeReady:{is:"rw",init:null},readyDelegated:!1,version:{is:"rw",init:null},requiredVersion:{is:"rw",init:null},hasReadyCheckScheduled:!1},after:{initialize:function(){this.id||(this.id=this.type+"://"+this.token)}},methods:{setOnBeforeReady:function(func){if(this.onBeforeReady)throw"Can't redefine 'onBeforeReady' for "+this;this.onBeforeReady=func},setVersion:function(version){if(version){if(this.version&&this.version!=version)throw new Error("Cant redefine version of "+this);var requiredVersion=this.requiredVersion;if(requiredVersion&&version<requiredVersion)throw new Error("Versions conflict on "+this+" required ["+requiredVersion+"], got ["+version+"]");this.version=version}},setRequiredVersion:function(version){if(version){var requiredVersion=this.requiredVersion;if(!requiredVersion||requiredVersion<version){if(this.isLoaded()||this.loading)throw"Cant increase required version - "+this+" is already loaded";this.requiredVersion=version}}},toString:function(){return"Resource: id=["+this.id+"], type=["+this.meta.name+"]"},addDescriptor:function(descriptor){var resource=JooseX.Namespace.Depended.Manager.my.getResource(descriptor),dependencies=this.dependencies,resourceID=resource.id;if(!dependencies[resourceID]&&!resource.isReady()){var me=this;resource.readyListeners.push(function(){delete dependencies[resourceID],me.checkReady()}),dependencies[resourceID]=resource,this.ready=!1}},handleDependencies:function(){Joose.O.eachOwn(this.dependencies||{},function(resource){resource.handleLoad()}),this.checkReady()},checkReady:function(){if(Joose.O.isEmpty(this.dependencies)&&!this.hasReadyCheckScheduled)if(this.onBeforeReady){if(!this.readyDelegated){this.readyDelegated=!0;var me=this;this.onBeforeReady(function(){me.fireReady()},me)}}else this.fireReady()},fireReady:function(){this.ready=!0;var listeners=this.readyListeners;this.readyListeners=[],Joose.A.each(listeners,function(listener){listener()})},isReady:function(){if(!this.isLoaded())return!1;var isReady=!1;try{isReady=this.readyness()}catch(e){}return isReady||this.ready},isLoaded:function(){var isPresent=!1;try{isPresent=this.presence()}catch(e){}return isPresent||this.loaded},handleLoad:function(){if(this.isLoaded())this.checkReady();else if(!this.loading){this.loading=!0;var urls=Joose.O.wantArray(this.getUrls()),me=this;me.hasReadyCheckScheduled=!0;function onsuccess(resourceBlob,url){me.loaded=!0,me.loading=!1,me.loadedFromURL=url,Joose.Namespace.Manager.my.executeIn(Joose.top,function(){me.materialize(resourceBlob,url)}),me.hasReadyCheckScheduled=!1,me.handleDependencies()}var onerror=function(e){if(!urls.length)throw new Error(me+" not found");me.load(urls.shift(),onsuccess,onerror)};this.load(urls.shift(),onsuccess,onerror)}},getUrls:function(){throw"Abstract resource method 'getUrls' was called"},load:function(url,onsuccess,onerror){throw"Abstract resource method 'load' was called"},materialize:function(resourceBlob){throw"Abstract resource method 'materialize' was called"}}}),Role("JooseX.Namespace.Depended.Materialize.Eval",{requires:["handleLoad"],methods:{materialize:function(resourceBlob){(window.execScript||window.eval)(resourceBlob)}}}),Class("JooseX.Namespace.Depended.Resource.JavaScript",{isa:JooseX.Namespace.Depended.Resource,has:{hasDirectUrl:!1},after:{initialize:function(){var me=this;"nonjoose"==this.type&&(this.type="javascript");var presence=this.presence;"string"==typeof presence&&(this.presence=function(){return eval(presence)}),presence||(this.presence=function(){return eval(me.token)}),this.readyness||(this.readyness=this.presence)}},methods:{BUILD:function(config){var token=config.token,match=/^=(.*)/.exec(token);return match&&(this.hasDirectUrl=!0,token=match[1]),/^http/.test(token)&&(this.hasDirectUrl=!0,config.trait=JooseX.Namespace.Depended.Transport.ScriptTag),/^\//.test(token)&&(this.hasDirectUrl=!0),config},getUrls:function(){var url=this.token;if(this.hasDirectUrl)return[url];var manager=JooseX.Namespace.Depended.Manager.my;return Joose.A.map(manager.getINC(),function(libroot){return[libroot=libroot.replace(/\/$/,"")].concat(url).join("/")+(manager.disableCaching?"?disableCaching="+(new Date).getTime():"")})}}}),JooseX.Namespace.Depended.Manager.my.registerResourceClass("javascript",JooseX.Namespace.Depended.Resource.JavaScript),JooseX.Namespace.Depended.Manager.my.registerResourceClass("nonjoose",JooseX.Namespace.Depended.Resource.JavaScript),Class("JooseX.Namespace.Depended.Resource.JooseClass",{isa:JooseX.Namespace.Depended.Resource.JavaScript,after:{initialize:function(){var me=this;this.presence=function(){var c=Joose.S.strToClass(me.token);return c&&c.meta.resource},this.readyness=function(){var c=eval(me.token);return c&&c.meta.resource.ready}}},methods:{addDescriptor:function(descriptor){"object"!=typeof descriptor||descriptor.token?this.SUPER(descriptor):Joose.O.eachOwn(descriptor,function(version,name){this.addDescriptor({type:"joose",token:name,version:version})},this)},getUrls:function(){var className=this.token.split("."),manager=JooseX.Namespace.Depended.Manager.my;return Joose.A.map(manager.getINC(),function(libroot){return[libroot=libroot.replace(/\/$/,"")].concat(className).join("/")+".js"+(manager.disableCaching?"?disableCaching="+(new Date).getTime():"")})}}}),JooseX.Namespace.Depended.Manager.my.registerResourceClass("joose",JooseX.Namespace.Depended.Resource.JooseClass),"undefined"==typeof JooseX||JooseX.SimpleRequest||Class("JooseX.SimpleRequest",{have:{req:null},methods:{initialize:function(){window.XMLHttpRequest?this.req=new XMLHttpRequest:this.req=new ActiveXObject("Microsoft.XMLHTTP")},getText:function(urlOrOptions,async,callback,scope){var headers,url,req=this.req;"string"!=typeof urlOrOptions?(headers=urlOrOptions.headers,url=urlOrOptions.url,async=async||urlOrOptions.async,callback=callback||urlOrOptions.callback,scope=scope||urlOrOptions.scope):url=urlOrOptions,req.open("GET",url,async||!1),headers&&Joose.O.eachOwn(headers,function(value,name){req.setRequestHeader(name,value)});try{req.onreadystatechange=function(event){async&&4==req.readyState&&(200==req.status||0==req.status&&0<req.responseText.length?callback.call(scope||this,!0,req.responseText):callback.call(scope||this,!1,"File not found: "+url))},req.send(null)}catch(e){throw"File not found: "+url}if(async)return null;if(200==req.status||0==req.status&&0<req.responseText.length)return req.responseText;throw"File not found: "+url}}}),Role("JooseX.Namespace.Depended.Materialize.ScriptTag",{requires:["handleLoad"],methods:{materialize:function(resourceBlob){var loaderNode=document.createElement("script");loaderNode.text=resourceBlob,document.body.appendChild(loaderNode)}}}),Role("JooseX.Namespace.Depended.Transport.XHRAsync",{requires:["handleLoad"],override:{load:function(url,onsuccess,onerror){var req=new JooseX.SimpleRequest;try{req.getText(url,!0,function(success,text){success?onsuccess(text,url):onerror(this+" not found")})}catch(e){onerror(e)}}}}),Role("JooseX.Namespace.Depended.Transport.ScriptTag",{requires:["handleLoad"],methods:{getScriptTag:function(){}},override:{load:function(url,onsuccess,onerror){var scriptNode=document.createElement("script");if(scriptNode.type="text/javascript",scriptNode.src=url,scriptNode.async=!0,Joose.is_IE){var timeout=setTimeout(function(){onerror(url+" load failed.")},1e4);scriptNode.onreadystatechange=function(){var readyState=scriptNode.readyState;"complete"!=readyState&&"loaded"!=readyState||(clearTimeout(timeout),onsuccess(null,url))}}else scriptNode.onload=function(){onsuccess(scriptNode.text,url)},scriptNode.onerror=function(){onerror(url+" load failed.")};(document.getElementsByTagName("head")[0]||document.body).appendChild(scriptNode)},materialize:function(blob,url){}}}),Role("JooseX.Namespace.Depended.Transport.NodeJS",{requires:["handleLoad"],override:{load:function(url,onsuccess,onerror){var fs=require("fs");try{var content=fs.readFileSync(url,"utf8")}catch(e){return void onerror(e)}onsuccess(content,url)}}}),Role("JooseX.Namespace.Depended.Materialize.NodeJS",{requires:["handleLoad"],methods:{materialize:function(resourceBlob,url){}}}),Class("JooseX.Namespace.Depended.Resource.Require",{isa:JooseX.Namespace.Depended.Resource,methods:{getUrls:function(){return[this.token]},load:function(url,onsuccess,onerror){},materialize:function(){}}}),JooseX.Namespace.Depended.Manager.my.registerResourceClass("require",JooseX.Namespace.Depended.Resource.Require),Role("JooseX.Namespace.Depended",{meta:Joose.Managed.Role,requires:["prepareProperties"],have:{containResources:["use","meta","isa","does","trait","traits"]},override:{prepareProperties:function(name,extend,defaultMeta,callback){name&&"string"!=typeof name&&(extend=name,name=null),extend=extend||{};var summaredDeps=this.collectAllDeps(extend),currentModule=this.getCurrent(),resource=JooseX.Namespace.Depended.Manager.my.getResource({type:"joose",token:currentModule==Joose.top?name:currentModule.meta.name+"."+name});if(extend.VERSION&&resource.setVersion(extend.VERSION),extend.BEGIN&&(resource.setOnBeforeReady(extend.BEGIN),delete extend.BEGIN),Joose.A.each(summaredDeps,function(descriptor){resource.addDescriptor(descriptor)}),Joose.O.isEmpty(resource.dependencies)){this.inlineAllDeps(extend);var res=this.SUPER(name,extend,defaultMeta,callback);return resource.checkReady(),res}var me=this,SUPER=this.SUPER;return resource.readyListeners.unshift(function(){me.inlineAllDeps(extend),Joose.Namespace.Manager.my.executeIn(currentModule,function(){SUPER.call(me,name,extend,defaultMeta,callback)})}),resource.hasReadyCheckScheduled||(Joose.is_NodeJS?resource.handleDependencies():setTimeout(function(){resource.handleDependencies()},0)),this.create(name,Joose.Namespace.Keeper,{})},prepareMeta:function(meta){meta.resource=meta.resource||JooseX.Namespace.Depended.Manager.my.getMyResource("joose",meta.name,meta.c)}},methods:{alsoDependsFrom:function(extend,summaredDeps){},collectAllDeps:function(extend){var summaredDeps=[],me=this;this.collectClassDeps(extend,summaredDeps);var extendMy=extend.my;return this.collectClassDeps(extendMy,summaredDeps),extend.has&&Joose.O.each(extend.has,function(attr,name){Joose.O.isClass(attr)||me.collectClassDeps(attr,summaredDeps)}),extendMy&&extendMy.has&&Joose.O.each(extendMy.has,function(attr,name){Joose.O.isClass(attr)||me.collectClassDeps(attr,summaredDeps)}),this.alsoDependsFrom(extend,summaredDeps),summaredDeps},collectClassDeps:function(from,to){from&&Joose.A.each(this.containResources,function(propName){this.collectDependencies(from[propName],to,from,propName)},this)},collectDependencies:function(from,to,extend,propName){from&&Joose.A.each(Joose.O.wantArray(from),function(descriptor){descriptor&&"function"!=typeof descriptor&&to.push(descriptor)})},inlineAllDeps:function(extend){var me=this;this.inlineDeps(extend);var extendMy=extend.my;extendMy&&this.inlineDeps(extendMy),extend.has&&Joose.O.each(extend.has,function(attr,name){attr&&"object"==typeof attr&&me.inlineDeps(attr)}),extendMy&&extendMy.has&&Joose.O.each(extendMy.has,function(attr,name){attr&&"object"==typeof attr&&me.inlineDeps(attr)})},inlineDeps:function(extend){delete extend.use,Joose.A.each(this.containResources,function(propName){if(extend[propName]){var descriptors=[];if(Joose.A.each(Joose.O.wantArray(extend[propName]),function(descriptor,index){var descType=typeof descriptor;if("function"==descType)descriptors.push(descriptor.meta?descriptor:"isa"!=propName?descriptor():null);else if("object"==descType)descriptor.token?descriptors.push(eval(descriptor.token)):Joose.O.each(descriptor,function(version,name){descriptors.push(eval(name))});else{if("string"!=descType)throw new Error("Wrong dependency descriptor format: "+descriptor);descriptors.push(eval(descriptor))}}),"isa"!=propName&&"meta"!=propName)extend[propName]=descriptors;else{if(1<descriptors.length)throw"Cant specify several super- or meta- classes";descriptors[0]&&(extend[propName]=descriptors[0])}}})}}}),Joose.Namespace.Manager.meta.extend({does:JooseX.Namespace.Depended}),Joose.is_NodeJS?(JooseX.Namespace.Depended.Resource.JavaScript.meta.extend({does:[JooseX.Namespace.Depended.Transport.NodeJS,JooseX.Namespace.Depended.Materialize.NodeJS]}),JooseX.Namespace.Depended.Manager.my.disableCaching=!1,Joose.Namespace.Manager.my.containResources.unshift("require"),JooseX.Namespace.Depended.meta.extend({override:{collectDependencies:function(from,to,extend,propName){if("require"!=propName)return this.SUPERARG(arguments);from&&(Joose.A.each(Joose.O.wantArray(from),function(url){to.push({type:"require",token:url})}),delete extend.require)}}})):JooseX.Namespace.Depended.Resource.JavaScript.meta.extend({does:[JooseX.Namespace.Depended.Transport.XHRAsync,JooseX.Namespace.Depended.Materialize.Eval]}),Class("Scope.Provider",{has:{name:null,launchId:null,scope:null,seedingCode:null,seedingScript:null,seedingScriptIsEcmaModule:!1,preload:{is:"ro",init:Joose.I.Array},cleanupCallback:null,beforeCleanupCallback:null},methods:{isCSS:function(url){return/\.css(\?.*)?$/i.test(url)},isAlreadySetUp:function(){return Boolean(this.scope)},addPreload:function(preloadDesc){if(this.isAlreadySetUp())throw new Error("Can't use `addPreload` - scope is already setup. Use `runCode/runScript` instead");if("string"==typeof preloadDesc?preloadDesc=this.isCSS(preloadDesc)?{type:"css",url:preloadDesc}:{type:"js",url:preloadDesc}:preloadDesc.text&&(preloadDesc={type:"js",content:preloadDesc.text}),!preloadDesc.type)throw new Error("Preload descriptor must have the `type` property");this.preload.push(preloadDesc)},addOnErrorHandler:function(handler,callback){throw"Abstract method `addOnErrorHandler` of Scope.Provider called"},create:function(){throw"Abstract method `create` of Scope.Provider called"},setup:function(callback){throw"Abstract method `setup` of Scope.Provider called"},cleanup:function(callback){throw"Abstract method `cleanup` of Scope.Provider called"},runCode:function(text,callback){throw"Abstract method `runCode` of Scope.Provider called"},runScript:function(url,callback){throw"Abstract method `runScript` of Scope.Provider called"}}}),Scope.Provider.__ONLOAD__={},Scope.Provider.__ONERROR__={},Scope.Provider.__FAILED_PRELOAD__={},Role("Scope.Provider.Role.WithDOM",{requires:["getDocument","create","getPreload","isAlreadySetUp","setViewportSize"],has:{useStrictMode:!0,sourceURL:null,crossOriginFailed:!1,innerHtmlHead:null,innerHtmlBody:null,minViewportSize:null,parentWindow:function(){return window},scopeId:function(){return Math.round(1e10*Math.random())},failOnResourceLoadError:!1,failOnPromiseRejection:!0,attachToOnError:function(){return function(window,scopeId,handler,preventDefault,failOnResourceLoadError,failOnPromiseRejection){if(handler=(window.opener||window.parent).Scope.Provider.__ONERROR__[scopeId],failOnResourceLoadError&&"ErrorEvent"in window)window.addEventListener("error",handler,!0);else{var prevHandler=window.onerror;if(prevHandler&&prevHandler.__SP_MANAGED__)return;window.onerror=function(message,url,lineNumber){if(!handler.__CALLING__)return handler.__CALLING__=!0,prevHandler&&prevHandler.apply(this,arguments),handler.apply(this,arguments),(handler.__CALLING__=!1)!==preventDefault?!window.WebKitPoint:void 0},window.onerror.__SP_MANAGED__=!0}failOnPromiseRejection&&window.Promise&&"onunhandledrejection"in window&&window.addEventListener("unhandledrejection",function(e){handler.apply(this,[null,null,null,null,null,e])},!0)}},cachedOnError:null},override:{cleanup:function(){var onErrorHandler=this.cachedOnError;this.cachedOnError=null;try{var scope=this.scope;scope.ErrorEvent&&scope.removeEventListener("error",onErrorHandler),scope.onerror=null}catch(e){}this.SUPERARG(arguments),this.scope=null}},methods:{cleanupHandlers:function(){var scopeProvider=this.parentWindow.Scope.Provider,scopeId=this.scopeId;delete scopeProvider.__ONLOAD__[scopeId],delete scopeProvider.__ONERROR__[scopeId],delete scopeProvider.__FAILED_PRELOAD__[scopeId]},getHead:function(){return this.getDocument().getElementsByTagName("head")[0]},installOnErrorHandler:function(handler){if(!this.crossOriginFailed){if(!this.isAlreadySetUp())throw"Scope should be already set up";this.attachToOnError(this.scope,this.scopeId,handler,!1,this.failOnResourceLoadError,this.failOnPromiseRejection)}},addOnErrorHandler:function(handler,preventDefault){if(!this.crossOriginFailed){handler.__SP_MANAGED__=!0,this.cachedOnError=handler;var scopeId=this.scopeId;this.parentWindow.Scope.Provider.__ONERROR__[scopeId]=handler;var attachToOnError=";("+this.attachToOnError.toString()+")(window, "+scopeId+", (window.opener || window.parent).Scope.Provider.__ONERROR__[ "+scopeId+" ], "+preventDefault+", "+this.failOnResourceLoadError+", "+this.failOnPromiseRejection+");";this.isAlreadySetUp()?this.runCode(attachToOnError):this.getPreload().unshift({type:"js",content:attachToOnError,unordered:!0})}},addSeedingToPreload:function(){var preload=this.getPreload();this.seedingCode&&preload.unshift({type:"js",content:this.seedingCode}),this.seedingScript&&preload.push({type:"js",url:this.seedingScript,isEcmaModule:this.seedingScriptIsEcmaModule})},setup:function(callback){var isIE=Boolean(this.parentWindow.msWriteProfilerMark),hasInlineScript=!1;Joose.A.each(this.getPreload(),function(preloadDesc){if("js"==preloadDesc.type&&preloadDesc.content&&!preloadDesc.unordered)return!(hasInlineScript=!0)});function cont(e){callback&&callback(me,me.parentWindow.Scope.Provider.__FAILED_PRELOAD__[me.scopeId],e)}var me=this;this.parentWindow.Scope.Provider.__FAILED_PRELOAD__[this.scopeId]={},this.sourceURL||isIE&&hasInlineScript?(this.addSeedingToPreload(),this.setupIncrementally(cont)):(isIE||this.addSeedingToPreload(),this.setupWithDocWrite(cont,isIE))},setupWithDocWrite:function(callback,needToSeed){var html=[],me=this;Joose.A.each(this.getPreload(),function(preloadDesc){if("js"==preloadDesc.type)html.push(me.getScriptTagString(preloadDesc.url,preloadDesc.content,preloadDesc.isEcmaModule));else{if("css"!=preloadDesc.type)throw"Incorrect preload descriptor "+preloadDesc;html.push(me.getLinkTagString(preloadDesc.url,preloadDesc.content))}}),this.create();var scopeId=this.scopeId;this.parentWindow.Scope.Provider.__ONLOAD__[scopeId]=function(){function cont(){callback&&callback()}needToSeed?(me.seedingCode&&me.runCode(me.seedingCode,null),me.seedingScript?me.runScript(me.seedingScript,cont,me.seedingScriptIsEcmaModule):cont()):cont()};var doc=this.getDocument();doc.open(),doc.write([this.useStrictMode?"<!DOCTYPE html>":"",'<html style="width: 100%; height: 100%; margin : 0; padding : 0;">',"<head>",this.innerHtmlHead||"",html.join(""),"</head>",'<body style="margin : 0; padding : 0; width: 100%; height: 100%" onload="setTimeout(function () { (window.opener || window.parent).Scope.Provider.__ONLOAD__['+scopeId+']() }, 0)">',this.innerHtmlBody||"","</body>","</html>"].join("")),doc.close(),me.cachedOnError&&me.installOnErrorHandler(me.cachedOnError)},setupIncrementally:function(callback){this.create(function(me,e){if(e)callback&&callback(e);else{if(!me.sourceURL){var doc=me.getDocument();if(me.innerHtmlHead){var head=me.getHead();try{head.innerHTML=me.innerHtmlHead}catch(e){var div=doc.createElement("div");div.innerHTML=me.innerHtmlHead;for(var i=0;i<div.children.length;i++)head.appendChild(div.children[i])}}me.innerHtmlBody&&(doc.body.innerHTML=me.innerHtmlBody)}var loadScripts=function(preloads,callback){function cont(){me.scope&&loadScripts(preloads,callback)}if(preloads.length){var preloadDesc=preloads.shift();preloadDesc.url?me.runScript(preloadDesc.url,cont,preloadDesc.isEcmaModule):"js"==preloadDesc.type?me.runCode(preloadDesc.content,cont,preloadDesc.isEcmaModule):(me.addStyleTag(preloadDesc.content),cont())}else callback&&callback()};me.scope&&loadScripts(me.getPreload().slice(),callback)}})},getScriptTagString:function(url,text,isEcmaModule){var res='<script type="'+(isEcmaModule?"module":"text/javascript")+'"'+(isEcmaModule?' crossorigin="anonymous"':""),onerror="(window.opener || window.parent).Scope.Provider.__FAILED_PRELOAD__[ scopeId ][ url ] = true";return onerror=onerror.replace(/scopeId/,"'"+this.scopeId+"'").replace(/url/,"'"+url+"'"),res+=url?' src="'+url+'" onerror="'+onerror+'"><\/script>':">"+text.replace(/<\/script>/gi,"\\x3C/script>")+"<\/script>"},getLinkTagString:function(url,text){return url?'<link href="'+url+'" rel="stylesheet" type="text/css" />':text?"<style>"+text+"</style>":void 0},loadCSS:function(url,callback){var doc=this.getDocument(),link=doc.createElement("link");link.type="text/css",link.rel="stylesheet",link.href=url;var hasOnLoad=!1;if("onload"in link&&(hasOnLoad=!0,link.onload=function(){link.onload=null,callback&&callback(),link=callback=null}),this.getHead().appendChild(link),!hasOnLoad){function cont(){hasContinued||(hasContinued=!0,clearTimeout(forcedTimeout),callback&&callback(),doc.body.removeChild(img))}var hasContinued=!1,forcedTimeout=setTimeout(cont,3e4),img=doc.createElement("img");img.onerror=cont,doc.body.appendChild(img),img.src=url}},runCode:function(text,callback,isEcmaModule){this.crossOriginFailed||this.getHead().appendChild(this.createScriptTag(text,null,null,null,isEcmaModule)),callback&&callback()},runScript:function(url,callback,isEcmaModule){if(this.crossOriginFailed)callback&&callback();else{var scopeId=this.scopeId;if(this.isCSS(url))this.loadCSS(url,callback);else{this.getHead().appendChild(this.createScriptTag(null,url,callback,function(){this.onerror=null;var doc=this.ownerDocument,win=doc.defaultView||doc.parentWindow;(win.opener||win.parent).Scope.Provider.__FAILED_PRELOAD__[scopeId][url]=!0,callback()},isEcmaModule))}}},createScriptTag:function(text,url,callback,errback,isEcmaModule){var node=this.getDocument().createElement("script");return node.setAttribute("type",isEcmaModule?"module":"text/javascript"),isEcmaModule&&node.setAttribute("crossorigin","anonymous"),url&&node.setAttribute("src",url),text&&(node.text=text),callback&&(node.onload=node.onreadystatechange=function(){node.readyState&&"loaded"!=node.readyState&&"complete"!=node.readyState&&(4!=node.readyState||200!=node.status)||(node.onload=node.onreadystatechange=null,callback())}),errback&&(node.onerror=errback),node},addStyleTag:function(text){var document=this.getDocument(),node=document.createElement("style");node.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(node),node.styleSheet?node.styleSheet.cssText=text:node.appendChild(document.createTextNode(text))}}}),Class("Scope.Provider.IFrame",{isa:Scope.Provider,does:Scope.Provider.Role.WithDOM,have:{iframe:null,cls:null,performWrap:!1,wrapCls:null,wrapper:null,iframeParentEl:null,parentEl:null,cleanupDelay:1e3},methods:{getDocument:function(){return this.iframe.contentWindow.document},setViewportSize:function(width,height){var iframe=this.iframe;iframe&&(iframe.style.width=width+"px",iframe.style.height=height+"px")},create:function(onLoadCallback){var me=this,doc=this.parentWindow.document,iframe=this.iframe=doc.createElement("iframe"),minViewportSize=this.minViewportSize;iframe.className=this.cls||"",iframe.style.width=(minViewportSize&&minViewportSize.width||1024)+"px",iframe.style.height=(minViewportSize&&minViewportSize.height||768)+"px",iframe.setAttribute("frameborder",0),this.name&&iframe.setAttribute("name",this.name);var ignoreOnLoad=!1,callback=function(){if(!ignoreOnLoad){iframe.detachEvent?iframe.detachEvent("onload",callback):iframe.onload=null;try{me.getHead().innerHTML;onLoadCallback&&onLoadCallback(me)}catch(e){me.crossOriginFailed=!0,onLoadCallback&&onLoadCallback(me,e)}}};if(iframe.attachEvent?iframe.attachEvent("onload",callback):iframe.onload=callback,iframe.src=this.sourceURL||"about:blank",this.performWrap){var wrapper=this.wrapper;wrapper||((wrapper=this.wrapper=doc.createElement("div")).className=this.wrapCls||""),(this.iframeParentEl||wrapper).appendChild(iframe),this.iframeParentEl=null}(this.parentEl||doc.body).appendChild(wrapper||iframe);var scope=this.scope=iframe.contentWindow;if(Boolean(this.parentWindow.msWriteProfilerMark)){try{var scopeDoc=this.getDocument();this.sourceURL&&(ignoreOnLoad=!0),scopeDoc.open(),scopeDoc.write([this.useStrictMode?"<!DOCTYPE html>":"",'<html style="width: 100%; height: 100%; margin : 0; padding : 0;">',"<head>","</head>",'<body style="margin : 0; padding : 0; width: 100%; height: 100%">',"</body>","</html>"].join("")),scopeDoc.close(),ignoreOnLoad=!1}catch(e){me.crossOriginFailed=!0}iframe.onreadystatechange=function(){"complete"==iframe.readyState&&(iframe.onreadystatechange=null),me.cachedOnError&&!me.crossOriginFailed&&me.attachToOnError(scope,me.scopeId,me.cachedOnError)},this.sourceURL&&(iframe.src=this.sourceURL)}me.cachedOnError&&me.installOnErrorHandler(me.cachedOnError)},cleanup:function(){var wrapper=this.wrapper||this.iframe,iframe=this.iframe,me=this;iframe.onreadystatechange=null,wrapper.style.display="none";this.runCode(";("+function(){window.onunload||(window.onunload=function(){return"something"})}.toString()+")();"),this.iframe=null,this.scope=null,this.wrapper=null,me.beforeCleanupCallback&&me.beforeCleanupCallback(),me.beforeCleanupCallback=null,me.crossOriginFailed||(iframe.src="javascript:false"),setTimeout(function(){(me.parentEl||me.parentWindow.document.body).removeChild(wrapper),iframe=wrapper=null,me.parentEl=null,me.cleanupHandlers(),me.cleanupCallback&&me.cleanupCallback(),me.cleanupCallback=null},me.cleanupDelay)}}}),Class("Scope.Provider.Window",{isa:Scope.Provider,does:Scope.Provider.Role.WithDOM,has:{popupWindow:null},methods:{setViewportSize:function(width,height){var popupWindow=this.popupWindow;popupWindow&&popupWindow.resizeTo(width,height)},create:function(onLoadCallback){var minViewportSize=this.minViewportSize,width=minViewportSize&&minViewportSize.width||1024,height=minViewportSize&&minViewportSize.height||768,popup=this.scope=this.popupWindow=this.parentWindow.open(this.sourceURL||"about:blank","_blank","left=10,top=10,width="+width+",height="+height);if(!popup)throw alert("Please enable popups for the host with this test suite running: "+this.parentWindow.location.host),"Please enable popups for the host with this test suite running: "+this.parentWindow.location.host;if(Boolean(this.parentWindow.msWriteProfilerMark)&&!this.sourceURL){var doc=this.getDocument();doc.open(),doc.write(""),doc.close()}this.cachedOnError&&this.installOnErrorHandler(this.cachedOnError);function contentLoaded(win,fn){var done=!1,top=!0,doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",init=function(e){"readystatechange"==e.type&&"complete"!=doc.readyState||(("load"==e.type?win:doc)[rem](pre+e.type,init,!1),!done&&(done=!0)&&fn.call(win,me))},poll=function(){try{root.doScroll("left")}catch(e){return void setTimeout(poll,50)}init("poll")};if("complete"==doc.readyState)fn.call(win,me);else{if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(e){}top&&poll()}doc[add](pre+"DOMContentLoaded",init,!1),doc[add](pre+"readystatechange",init,!1),win[add](pre+"load",init,!1)}}var me=this;this.sourceURL?setTimeout(function(){contentLoaded(popup,onLoadCallback||function(){})},10):contentLoaded(popup,onLoadCallback||function(){})},getDocument:function(){return this.popupWindow.document},cleanup:function(){this.beforeCleanupCallback&&this.beforeCleanupCallback(),this.beforeCleanupCallback=null,this.popupWindow.close(),this.popupWindow=null,this.cleanupHandlers(),this.cleanupCallback&&this.cleanupCallback(),this.cleanupCallback=null}}}),Class("Scope.Provider.NodeJS",{isa:Scope.Provider,has:{sourceURL:null,requireFunc:null,errorHandlerBorrowed:null,onErrorHandler:null},methods:{runInContext:function(code,scope,options){return require("vm").runInContext(code,scope,options)},addOnErrorHandler:function(handler,preventDefault){var me=this;if(me.eventHandlerBorrowed)throw new Error("Exclusive resource borrowing failed");return me.onErrorHandler=handler,process.on("uncaughtException",exceptionHandler=function(e){handler(e.message,null,null,null,e)}),process.on("unhandledRejection",rejectHandler=function(reason){handler(null,null,null,null,null,{reason:reason})}),me.eventHandlerBorrowed=function(){process.removeListener("uncaughtException",exceptionHandler),process.removeListener("unhandledRejection",rejectHandler),me.eventHandlerBorrowed=null,me.onErrorHandler=null}},create:function(callback){var vm=require("vm"),sandbox={};Joose.O.extend(sandbox,{process:process,console:console,global:sandbox,setImmediate:setImmediate,clearImmediate:clearImmediate,setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval});this.scope=vm.createContext(sandbox);callback&&callback()},setup:function(callback){this.create();var me=this;this.seedingCode&&this.runCode(this.seedingCode),Joose.A.each(this.getPreload(),function(preloadDesc){"js"==preloadDesc.type&&(preloadDesc.url?me.runScript(preloadDesc.url):me.runCode(preloadDesc.content))}),this.seedingScript&&this.runScript(this.seedingScript),callback&&callback(me)},stripBom:function(content){return 65279===content.charCodeAt(0)&&(content=content.slice(1)),content},fileNameToModuleId:function(url){var path=require("path");return path.isAbsolute(url)?url:path.resolve("./",url)},runCode:function(text,callback){var res=require("vm").runInContext(this.stripBom(text),this.scope);return callback&&callback(res),res},runScript:function(url,callback){return/mjs(\?.*)?$/.test(url)?this.importEcmaModule(url,callback):this.requireCjsModule(url,callback)},requireCjsModule:function(url,callback){var vm=require("vm"),old=vm.runInThisContext,scope=this.scope;vm.runInThisContext=function(code,options){return vm.runInContext(code,scope,options)};try{var res=this.requireFunc(this.fileNameToModuleId(url))}catch(e){this.onErrorHandler&&this.onErrorHandler(e.message,null,null,null,e)}return vm.runInThisContext=old,callback&&callback(res),res},importEcmaModule:function(url,callback){throw new Error("Ecma module for different context - implement me?")},cleanup:function(){this.beforeCleanupCallback&&this.beforeCleanupCallback(),this.cleanupCallback&&this.cleanupCallback()}}}),Class("Scope.Provider.NodeJsEmbed",{isa:Scope.Provider.NodeJS,methods:{runCode:function(text,callback){var res=require("vm").runInThisContext(this.stripBom(text),{filename:"/"});return callback&&callback(res),res},requireCjsModule:function(url,callback){try{var res=this.requireFunc(this.fileNameToModuleId(url))}catch(e){this.onErrorHandler&&this.onErrorHandler(e.message,null,null,null,e)}return callback&&callback(res),res},importEcmaModule:function(url,callback){this.runCode("import('"+this.fileNameToModuleId(url)+"')").then(function(res){callback&&callback(res)},function(){})},create:function(callback){this.scope=SCOPE,callback&&callback()}}}),JSON=JSON||{},function(){"use strict";function f(n){return n<10?"0"+n:n}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;i<length;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;i<length;i+=1)"string"==typeof rep[i]&&(v=str(k=rep[i],value))&&partial.push(quote(k)+(gap?": ":":")+v);else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value))&&partial.push(quote(k)+(gap?": ":":")+v);return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(value,replacer,space){var i;if(indent=gap="","number"==typeof space)for(i=0;i<space;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if((rep=replacer)&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(void 0!==(v=walk(value,k))?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){var REF=1;Class("Data.Visitor2",{has:{seenPlaceholder:{init:{}},outOfDepthPlaceholder:{init:{}},seen:Joose.I.Object,maxDepth:null},methods:{getClassNameFor:function(object){return Joose.O.isInstance(object)?object.meta.name:Object.prototype.toString.call(object).replace(/^\[object /,"").replace(/\]$/,"")},getRefAdr:function(){return REF++},assignRefAdrTo:function(object){return object.__REFADR__||(Object.defineProperty?Object.defineProperty(object,"__REFADR__",{value:REF++}):object.__REFADR__=REF++),object.__REFADR__},isSeen:function(object){return object.__REFADR__&&this.seen.hasOwnProperty(object.__REFADR__)},markSeenAs:function(object,result){return this.seen[object.__REFADR__]=result},hasSeenResultFor:function(object){var ref=object.__REFADR__;return this.seen.hasOwnProperty(ref)&&this.seen[ref]!=this.seenPlaceholder},visit:function(value,depth){return depth>this.maxDepth?this.visitOutOfDepthValue(value,depth+1):Object(value)===value?this.isSeen(value)?this.visitSeen(value,depth+1):this.visitNotSeen(value,depth+1):this.visitValue(value,depth+1)},visitOutOfDepthValue:function(value,depth){return this.outOfDepthPlaceholder},visitValue:function(value,depth){return value},visitSeen:function(value,depth){return this.seen[value.__REFADR__]},getInitialSeenMarker:function(object,depth){return this.seenPlaceholder},visitNotSeen:function(object,depth){if(this.assignRefAdrTo(object),this.markSeenAs(object,this.getInitialSeenMarker(object,depth)),Joose.O.isInstance(object))return this.markSeenAs(object,this.visitJooseInstance(object,depth));var methodName="visit"+this.getClassNameFor(object);return this.meta.hasMethod(methodName)||(methodName="visitObject"),this.markSeenAs(object,this[methodName](object,depth))},visitArray:function(array,depth){return Joose.A.each(array,function(value,index){this.visitArrayEntry(value,index,array,depth)},this),array},visitArrayEntry:function(entry,index,array,depth){return this.visit(entry,depth)},visitObject:function(object,depth){return Joose.O.eachOwn(object,function(value,key){"__REFADR__"!=key&&(this.visitObjectKey(key,value,object,depth),this.visitObjectValue(value,key,object,depth))},this),object},visitJooseInstance:function(value,depth){return this.visitObject(value,depth)},visitObjectKey:function(key,value,object,depth){return this.visitValue(key,depth)},visitObjectValue:function(value,key,object,depth){return this.visit(value,depth)}},my:{has:{HOST:null},methods:{visit:function(value,maxDepth){return new this.HOST({maxDepth:maxDepth||1/0}).visit(value,0)}}}})}(),Class("Siesta.Util.Serializer",{isa:Data.Visitor2,has:{result:Joose.I.Array,manualEnum:function(){for(var i in{toString:1})return!1;return!0}},methods:{assignRefAdrTo:function(object){try{return this.SUPER(object)}catch(e){object.__REFADR__||(object.__REFADR__=this.getRefAdr())}return object.__REFADR__},write:function(str){this.result.push(str)},visitOutOfDepthValue:function(value,depth){this.write("...")},visitSymbol:function(value){this.write(value.toString())},visitValue:function(value){null==value?this.write(value+""):"symbol"==typeof value?this.write(value.toString()):this.write("string"==typeof value?'"'+value.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':value+"")},visitObjectKey:function(key,value,object){this.write('"'+key+'": ')},getClassNameFor:function(object){return null!=object.nodeType&&null!=object.nodeName&&object.tagName?"DOMElement":null!=object.document&&null!=object.location&&null!=object.location.href?"Window":this.SUPER(object)},visitSeen:function(value,depth){this.write("[Circular]")},visitRegExp:function(value,depth){this.write(value+"")},visitFunction:function(value,depth){this.write("function "+(value.name||"")+"() { ... }")},visitDate:function(value,depth){this.write('"'+value+'"')},visitObject:function(object,depth){for(var key in object)if("__REFADR__"!=key&&(!object.hasOwnProperty||object.hasOwnProperty(key))){var value=object[key];this.visitObjectKey(key,value,object,depth),this.visitObjectValue(value,key,object,depth)}var me=this;return this.manualEnum&&Joose.A.each(["hasOwnProperty","valueOf","toString","constructor"],function(key){if(object.hasOwnProperty&&object.hasOwnProperty(key)){var value=object[key];me.visitObjectKey(key,value,object,depth),me.visitObjectValue(value,key,object,depth)}}),object},visitJooseInstance:function(value,depth){return value.meta.hasMethod("toString")?(this.write(value.toString()),value):this.SUPERARG(arguments)},visitDOMElement:function(object,depth){var output="&lt;"+object.tagName;object.id&&(output+=' id="'+object.id+'"'),object.className&&(output+=' class="'+object.className+'"'),this.write(output+"&gt;")},visitDOMStringMap:function(){this.write("[DOMStringMap]")},visitWindow:function(){this.write("[window]")},visitLocation:function(){this.write("[window.location]")},visitMap:function(map){this.write("Map("+map.size+"){");for(var iterator=map.entries(),entry=iterator.next();!entry.done;entry=iterator.next())this.visit(entry.value[0]),this.write("=>"),this.visit(entry.value[1]),this.write(", ");0<map.size&&this.result.pop(),this.write("}")}},before:{visitObject:function(){this.write("{")},visitArray:function(){this.write("[")}},after:{visitObject:function(){var result=this.result;", "==result[result.length-1]&&result.pop(),this.write("}")},visitArray:function(){var result=this.result;", "==result[result.length-1]&&result.pop(),this.write("]")},visitObjectValue:function(){this.write(", ")},visitArrayEntry:function(){this.write(", ")}},my:{has:{HOST:null},methods:{stringify:function(value,maxDepth){try{null!=value&&value.foobar&&(visitor=null)}catch(e){if(value)return"Value from cross-domain context"}var visitor=new this.HOST({maxDepth:maxDepth||4});return visitor.visit(value,0),visitor.result.join("")}}}}),Role("Siesta.Util.Role.CanFormatStrings",{has:{serializeFormatingPlaceholders:!0},methods:{formatString:function(string,data){if(!data)return string;for(var match,variables=[],isRaw=[],regexp=/\{(\!)?((?:\w|-|_)+?)\}/g;match=regexp.exec(string);)isRaw.push(match[1]),variables.push(match[2]);var result=string;return Joose.A.each(variables,function(variable,index){var varIsRaw=isRaw[index];result=result.replace(new RegExp("\\{"+(varIsRaw?"!":"")+variable+"\\}","g"),data.hasOwnProperty(variable)?varIsRaw||!this.serializeFormatingPlaceholders?data[variable]+"":Siesta.Util.Serializer.stringify(data[variable]):"")},this),result},extractKeysAndSpecialKeys:function(string){var KeyCodes=Siesta.Test.UserAgent.KeyCodes().keys,me=this,res=[],tokens=string.match(/(\[\[(?:\w|-){1,11}\]\])|(\[(?:\w|-){1,11}\])|([\s\S])/g)||[];return Joose.A.each(tokens,function(token,index){if(1<token.length){var isDouble=/\[\[/.test(token),specialKey=token.substring(isDouble?2:1,token.length-(isDouble?2:1)),normalText=void 0===KeyCodes[specialKey.toUpperCase()];normalText||isDouble?(res.push("["),normalText&&isDouble&&res.push("["),res.push.apply(res,me.extractKeysAndSpecialKeys(specialKey)),res.push("]"),normalText&&isDouble&&res.push("]")):res.push(token)}else res.push(token)}),res}}}),Role("Siesta.Util.Role.CanGetType",{methods:{typeOf:function(object){return Object.prototype.toString.call(object).slice(8,-1)}}}),Role("Siesta.Util.Role.CanCompareObjects",{does:[Siesta.Util.Role.CanGetType],methods:{countKeys:function(object){var counter=0;return Joose.O.eachOwn(object,function(){counter++}),counter},compareObjects:function(obj1,obj2,strict,onlyPrimitives,asObjects){var obj1IsPlaceholder=Joose.O.isInstance(obj1)&&obj1.meta.does(Siesta.Test.Role.Placeholder),obj2IsPlaceholder=Joose.O.isInstance(obj2)&&obj2.meta.does(Siesta.Test.Role.Placeholder);if(strict){if(obj1===obj2)return!0}else if(obj1==obj2)return!0;if(obj1IsPlaceholder&&obj2IsPlaceholder)return obj1.equalsTo(obj2);if(obj2IsPlaceholder)return obj2.equalsTo(obj1);if(obj1IsPlaceholder)return obj1.equalsTo(obj2);if(onlyPrimitives)return!1;var type1=this.typeOf(obj1);if(type1!=this.typeOf(obj2))return!1;var me=this;if("Set"==type1){if(obj1.size!=obj2.size)return!1;for(var entry=(iterator=obj1.entries()).next();!entry.done;entry=iterator.next()){var key=entry.value[0];if(!obj2.has(key))return!1}for(entry=(iterator=obj2.entries()).next();!entry.done;entry=iterator.next()){key=entry.value[0];if(!obj1.has(key))return!1}return!0}if("Map"==type1){if(obj1.size!=obj2.size)return!1;for(entry=(iterator=obj1.entries()).next();!entry.done;entry=iterator.next()){key=entry.value[0];var value=entry.value[1];if(!obj2.has(key)||!me.compareObjects(value,obj2.get(key),strict))return!1}var iterator;for(entry=(iterator=obj2.entries()).next();!entry.done;entry=iterator.next()){key=entry.value[0],value=entry.value[1];if(!obj1.has(key)||!me.compareObjects(value,obj1.get(key),strict))return!1}return!0}if("Object"==type1||asObjects)return this.countKeys(obj1)==this.countKeys(obj2)&&!1!==Joose.O.eachOwn(obj1,function(value,name){if(!me.compareObjects(value,obj2[name],strict))return!1});if("Array"!=type1)return"Function"==type1?obj1.toString()==obj2.toString()&&(!strict||this.compareObjects(obj1,obj2,strict,!1,!0)):"RegExp"==type1?obj1.source==obj2.source&&obj1.global==obj2.global&&obj1.ignoreCase==obj2.ignoreCase&&obj1.multiline==obj2.multiline&&(!strict||this.compareObjects(obj1,obj2,strict,!1,!0)):"Date"==type1&&(!Boolean(obj1-obj2)&&(!strict||this.compareObjects(obj1,obj2,strict,!1,!0)));if(obj1.length!=obj2.length)return!1;for(var i=0;i<obj1.length;i++)if(!this.compareObjects(obj1[i],obj2[i],strict))return!1;return!0}}}),Role("Siesta.Util.Role.CanEscapeRegExp",{methods:{escapeRegExp:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}}),function(){var id=1;Role("Siesta.Util.Role.HasUniqueGeneratedId",{has:{id:{is:"ro",init:function(){return id++}}}})}(),Class("Siesta.Util.Queue",{has:{steps:Joose.I.Array,interval:100,callbackDelay:0,deferer:{required:!0},deferClearer:null,processor:null,processorScope:null,currentTimeout:null,callback:null,scope:null,isAborted:!1,observeTest:null,currentDelayStepId:null,isDestroyed:!1},methods:{addStep:function(stepData){this.addSyncStep(stepData)},addSyncStep:function(stepData){this.steps.push(stepData)},addAsyncStep:function(stepData){stepData.isAsync=!0,this.steps.push(stepData)},addDelayStep:function(delayMs){var origSetTimeout=this.deferer,me=this;this.addAsyncStep({processor:function(data){me.currentDelayStepId=origSetTimeout(data.next,delayMs||500)}})},run:function(callback,scope){this.callback=callback,this.scope=scope,this.observeTest&&this.observeTest.on("teststop",function(){this.abort(!0)},this,{single:!0}),this.doSteps(this.steps.slice(),callback,scope)},abort:function(ignoreCallback){if(!this.isDestroyed){this.isAborted=!0;var deferClearer=this.deferClearer;if(!deferClearer)throw"Need `deferClearer` to be able to `abort` the queue";deferClearer(this.currentDelayStepId),deferClearer(this.currentTimeout),ignoreCallback||this.callback.call(this.scope||this),this.destroy()}},doSteps:function(steps,callback,scope){this.currentTimeout=null;var me=this,deferer=this.deferer,step=steps.shift();if(!this.isAborted)if(step)for(;this.doOneStep(step,steps,callback,scope)&&!this.isAborted;){if(!steps.length){this.doSteps(steps,callback,scope);break}step=steps.shift()}else callback&&(this.callbackDelay?deferer(function(){me.isAborted||(callback.call(scope||this),me.destroy())},this.callbackDelay):(callback.call(scope||this),me.destroy()))},doOneStep:function(step,steps,callback,scope){var me=this,deferer=this.deferer,processor=step.processor||this.processor,processorScope=step.processorScope||this.processorScope,index=this.steps.length-steps.length-1;if(!processor)throw new Error("No process function found for step: "+index);if(step.isAsync){var stepHasCompletedSynchronously=!1,processorHasCompleted=!1,next=step.next=function(){processorHasCompleted?me.doSteps(steps,callback,scope):stepHasCompletedSynchronously=!0};if(processor.call(processorScope||me,step,index,this,next),processorHasCompleted=!0,stepHasCompletedSynchronously)return!0}else{if(processor.call(processorScope||me,step,index,this),this.isAborted)return;var interval=step.hasOwnProperty("interval")?step.interval:me.interval;interval?this.currentTimeout=deferer(function(){me.doSteps(steps,callback,scope)},interval):me.doSteps(steps,callback,scope)}},destroy:function(){if(!this.isDestroyed){this.callback=this.observeTest=this.deferer=this.deferClearer=null,this.processor=this.processorScope=null;for(var i=0;i<this.steps.length;i++)this.steps[i].next=null;this.steps=null,this.isDestroyed=!0}}}}),Class("Siesta.Util.XMLNode",{has:{children:Joose.I.Array,tag:{required:!0},attributes:Joose.I.Object,textContent:null,escapeTable:{init:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"}}},methods:{escapeXml:function(s){var me=this;return"string"!=typeof s?s:s.replace(/[&<>"]/g,function(match){return me.escapeTable[match]})},toString:function(){var me=this,childrenContent=[];Joose.A.each(this.children,function(child){childrenContent.push(child.toString())});var attributesContent=[];return Joose.O.each(this.attributes,function(value,name){attributesContent.push(name+'="'+me.escapeXml(value)+'"')}),attributesContent.sort(),attributesContent.unshift(this.tag),"<"+attributesContent.join(" ")+">"+(null!=this.textContent?this.escapeXml(this.textContent):"")+childrenContent.join("")+"</"+this.tag+">"},appendChild:function(child){return child instanceof Siesta.Util.XMLNode?child.parent=this:child=new Siesta.Util.XMLNode(Joose.O.extend(child,{parent:this})),this.children.push(child),child},setAttribute:function(name,value){this.attributes[name]=value}}}),Class("Siesta.Util.Rect",{has:{left:null,top:null,width:null,height:null,right:null,bottom:null},methods:{initialize:function(){var left=this.left,width=this.width,right=this.right;null==right&&null!=left&&null!=width&&(this.right=left+width-1),null==width&&null!=left&&null!=right&&(this.width=right-left+1);var top=this.top,height=this.height,bottom=this.bottom;null==bottom&&null!=top&&null!=height&&(this.bottom=top+height-1),null==height&&null!=top&&null!=bottom&&(this.height=bottom-top+1)},isEmpty:function(){return null==this.left},intersect:function(rect){return rect.isEmpty()||this.isEmpty()||rect.left>this.right||rect.right<this.left||rect.top>this.bottom||rect.bottom<this.top?this.my.getEmpty():new this.constructor({left:Math.max(this.left,rect.left),right:Math.min(this.right,rect.right),top:Math.max(this.top,rect.top),bottom:Math.min(this.bottom,rect.bottom)})},contains:function(left,top){return this.left<=left&&left<=this.right&&this.top<=top&&top<=this.bottom},cropLeftRight:function(rect){return this.intersect(new this.constructor({left:rect.left,right:rect.right,top:this.top,bottom:this.bottom}))},cropTopBottom:function(rect){return this.intersect(new this.constructor({left:this.left,right:this.right,top:rect.top,bottom:rect.bottom}))},equalsTo:function(rect){return this.left==rect.left&&this.right==rect.right&&this.top==rect.top&&this.bottom==rect.bottom}},my:{has:{HOST:null},methods:{getEmpty:function(){return new this.HOST}}}}),Class("Siesta.Content.Resource",{has:{url:null,content:null},methods:{asHTML:function(){throw"Abstract method called"},asDescriptor:function(){throw"Abstract method called"},canCache:function(){}}}),Class("Siesta.Content.Resource.CSS",{isa:Siesta.Content.Resource,has:{},methods:{asHTML:function(){},asDescriptor:function(){var res={type:"css"};return this.url&&(res.url=this.url),this.content&&(res.content=this.content),res}}}),Class("Siesta.Content.Resource.JavaScript",{isa:Siesta.Content.Resource,has:{instrument:!1,isEcmaModule:!1},methods:{asHTML:function(){},asDescriptor:function(){var res={type:"js"};return this.url&&(res.url=this.url),this.content&&(res.content=this.content),this.isEcmaModule&&(res.isEcmaModule=this.isEcmaModule),res}}}),Class("Siesta.Content.Preset",{has:{preload:Joose.I.Array,resources:Joose.I.Array},methods:{initialize:function(){var me=this;Joose.A.each(this.preload,function(preloadDesc){me.addResource(preloadDesc)})},isCSS:function(url){return/\.css(\?.*)?$/i.test(url)},getResourceFromDescriptor:function(desc){var constructor,config;if("string"==typeof desc)constructor=this.isCSS(desc)?Siesta.Content.Resource.CSS:Siesta.Content.Resource.JavaScript,config={url:desc};else if(desc.text)constructor=Siesta.Content.Resource.JavaScript,config={content:desc.text};else{if(!desc.url&&!desc.content)throw"Incorrect preload descriptor:"+desc;constructor=desc.type&&"css"==desc.type||this.isCSS(desc.url)?Siesta.Content.Resource.CSS:Siesta.Content.Resource.JavaScript,config={},desc.url&&(config.url=desc.url),desc.content&&(config.content=desc.content),desc.instrument&&(config.instrument=desc.instrument),desc.isEcmaModule&&(config.isEcmaModule=desc.isEcmaModule)}return new constructor(config)},addResource:function(desc){var resource=desc instanceof Siesta.Content.Resource&&desc||this.getResourceFromDescriptor(desc);return this.resources.push(resource),resource},eachResource:function(func,scope){return Joose.A.each(this.resources,func,scope||this)},prepareScope:function(scopeProvider,contentManager){this.eachResource(function(resource){contentManager.hasContentOf(resource)?scopeProvider.addPreload({type:resource instanceof Siesta.Content.Resource.CSS?"css":"js",content:contentManager.getContentOf(resource)}):scopeProvider.addPreload(resource.asDescriptor())})}}}),Class("Siesta.Content.Manager",{has:{disabled:!1,presets:{required:!0},urls:Joose.I.Object,maxLoads:5,project:null},methods:{cache:function(callback,errback,ignoreErrors){if(this.disabled)callback&&callback();else{var urls=this.urls,me=this;Joose.A.each(this.presets,function(preset){preset.eachResource(function(resource){resource.url&&(urls[resource.url]=null)})});var loadCount=0,errorCount=0,urlsArray=[];Joose.O.each(urls,function(value,url){me.hasContentOf(url)||urlsArray.push(url)});var total=urlsArray.length;if(total)for(var loadSingle=function(){if(urlsArray.length){var url=urlsArray.shift();me.load(url,function(content){errorCount||(urls[url]=content,++loadCount==total?callback&&callback():loadSingle())},ignoreErrors?function(){++loadCount==total?callback&&callback():loadSingle()}:function(){errorCount++,errback&&errback(url)})}},i=0;i<this.maxLoads;i++)loadSingle();else callback&&callback()}},load:function(url,callback,errback){throw"abstract method `load` called"},addContent:function(url,content){this.urls[url]=content},hasContentOf:function(url){return url instanceof Siesta.Content.Resource&&(url=url.url),"string"==typeof this.urls[url]},getContentOf:function(url){return url instanceof Siesta.Content.Resource&&(url=url.url),this.urls[url]}}}),Class("Siesta",{VERSION:"5.3.2",my:{has:{config:null,activeHarness:null,license:"%LICENSE%"},methods:{getConfigForTestScript:function(text){try{return eval(text),this.config}catch(e){return null}},StartTest:function(arg1,arg2){this.config="object"==typeof arg1?arg1:"object"==typeof arg2?arg2:null}}}}),"undefined"==typeof StartTest&&(StartTest=Siesta.StartTest),"undefined"==typeof startTest&&(startTest=Siesta.StartTest),"undefined"==typeof describe&&(describe=Siesta.StartTest),Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function fNOP(){}function fBound(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))}var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this;return fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound}),Siesta.CurrentLocale=Siesta.CurrentLocale||{"Siesta.Project":{preloadHasFailed:"Preload of {url} has failed",preloadHasFailedForTest:"Preload of {url} has failed for test {test}",staticDeprecationWarning:"You are calling static method `{methodName}` of the project class {projectClass}. Such usage is deprecated now, please switch to creation of the project class instance: `var project = new {projectClass}()`",resourceFailedToLoad:"Loading of a {nodeName} resource failed",crossOriginFailed:"Failed to access cross-origin page: {url}. \nIn general tests should reside on the same domain as the app itself,\nbut you can try to disable web security:\nhttps://www.bryntum.com/blog/testing-x-domain-websites-with-siesta-in-chrome/"},"Siesta.Project.Browser.UI.AboutWindow":{upgradeText:"Upgrade to Siesta Standard",closeText:"Close",titleText:"ABOUT SIESTA (v{VERSION})",bodyText:'<img height="35" src="https://www.bryntum.com/bryntum-logo.png"/><p>Siesta is a JavaScript unit and functional test tool made by <a target="_blank" href="https://www.bryntum.com">Bryntum</a>. You can test any web page or JavaScript code, including Ext JS, jQuery or NodeJS. Siesta comes in two versions: <strong>Lite</strong> and <strong>Standard</strong>. With Lite, you can launch your tests in the browser UI. With the Standard version, you can also automate your tests and use the automation scripts together with tools like Puppeteer or Selenium WebDriver. </p>Siesta would not be possible without these awesome products & libraries: <br><ul style="padding:0 0 0 30px"><li><a href="http://sencha.com/extjs">Ext JS</a></li><li><a href="http://jquery.com">jQuery</a></li><li><a href="http://http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter</a></li><li><a href="http://joose.it/">Joose</a></li><li><a href="https://github.com/gotwarlost/istanbul">Istanbul</a></li></ul>'},"Siesta.Project.Browser.UI.AssertionGrid":{initializingText:"Initializing test..."},"Siesta.Project.Browser.UI.CoverageReport":{closeText:"Close",showText:"Show: ",lowText:"Low",mediumText:"Med",highText:"High",statementsText:"Statements",branchesText:"Branches",functionsText:"Functions",linesText:"Lines",loadingText:"Loading coverage data...",loadingErrorText:"Loading error",loadingErrorMessageText:"Could not load the report data from this url: ",globalNamespaceText:"[Global namespace]"},"Siesta.Project.Browser.UI.DomContainer":{title:"DOM Panel",viewDocsText:"View documentation for ",docsUrlText:"http://docs.sencha.com/{0}/apidocs/#!/api/{1}"},"Siesta.Project.Browser.UI.ResultPanel":{rerunText:"Run test",toggleDomVisibleText:"Toggle DOM visible",viewSourceText:"View source",showFailedOnlyText:"Show failed only",componentInspectorText:"Toggle Ext Component Inspector",eventRecorderText:"Event Recorder",closeText:"Close"},"Siesta.Project.Browser.UI.TestGrid":{mouseSimulation:"Mouse simulation",title:"Test list",nameText:"Name",filterTestsText:"Filter tests",expandCollapseAllText:"Expand / Collapse all",runCheckedText:"Run checked",runFailedText:"Run failed",runAllText:"Run all",observerModeText:"Observer mode",observerModeTooltip:"Sets the `forceDOMVisible` and `runCore=sequential` globally",passText:"Pass",failText:"Fail",optionsText:"Options...",todoPassedText:"todo assertion(s) passed",todoFailedText:"todo assertion(s) failed",viewDomText:"View DOM",transparentExText:"Transparent exceptions",transparentExTooltip:"Disable internal try/catch for any exceptions from tests. Useful for debugging.",cachePreloadsText:"Cache preloads",autoLaunchText:"Auto launch",autoLaunchTooltip:"Launch the test suite immediately after project page load.",speedRunText:"Fast (still accurate)",speedRunTooltip:"Reduce mouse cursor visualization quality to run tests faster",turboMode:"Very fast, but inaccurate",turboModeTooltip:"Sets the `mouseMovePrecision` option to `Infinity`. Read the docs before using.",breakOnFailText:"Break on fail",breakOnFailTooltip:"Stop the test suite on first failed assertion",debuggerOnFailText:"Debugger on fail",debuggerOnFailTooltip:"Issue a `debugger` statement on any failed assertion. Useful for debugging",aboutText:"About Siesta",documentationText:"Siesta Documentation",siestaDocsUrl:"https://bryntum.com/docs/siesta",filterFieldTooltip:["Supported patterns for tests filtering:\n","WORD - any word, will match with the test file name (no directory part)\n","WORD | WORD - any of the alternative patterns\n","GROUP > TEST - first match GROUP with the group name, then TEST with tests inside that group\n","GROUP1 | GROUP2 > TEST1 | TEST2 - alternation support for groups too\n"].join(""),landscape:"Landscape"},"Siesta.Project.Browser.UI.VersionUpdateButton":{newUpdateText:"New Update Available...",updateWindowTitleText:"New version available for download! Current version: ",cancelText:"Cancel",changelogLoadFailedText:"Bummer! Failed to fetch changelog.",downloadText:"Download ",liteText:" (Lite)",standardText:" (Standard)",loadingChangelogText:"Loading changelog..."},"Siesta.Project.Browser.UI.Viewport":{apiLinkText:"API Documentation",apiLinkUrl:"https://bryntum.com/docs/siesta",uncheckOthersText:"Uncheck others (and check this)",uncheckAllText:"Uncheck all",checkAllText:"Check all",runThisText:"Run this",expandAll:"Expand all",collapseAll:"Collapse all",filterToCurrentGroup:"Filter to current group",filterToFailed:"Filter to failed",httpWarningTitle:"You must use a web server",httpWarningDesc:"You must run Siesta in a web server context, and not using the file:/// protocol",viewSource:"View source"},"Siesta.Project.Browser":{codeCoverageWarningText:"Can not enable code coverage - did you forget to include the `siesta-coverage-all.js` on the project page?",noJasmine:"No `jasmine` object found on spec runner page",noJasmineSiestaReporter:"Can't find SiestaReporter in Jasmine. \nDid you add the `siesta/bin/jasmine-siesta-reporter.js` file to your spec runner page?"},"Siesta.Result.Assertion":{todoText:"TODO: ",passText:"ok",failText:"fail"},"Siesta.Role.ConsoleReporter":{passText:"PASS",failText:"FAIL",warnText:"WARN",errorText:"ERROR",missingFileText:"Test file [{URL}] not found.",allTestsPassedText:"All tests passed",failuresFoundText:"There are failures"},"Siesta.Test.Action.Drag":{byOrToMissingText:'Either "to" or "by" configuration option is required for "drag" step',byAndToDefinedText:'Exactly one of "to" or "by" configuration options is required for "drag" step, not both'},"Siesta.Test.Action.Eval":{invalidMethodNameText:"Invalid method name: ",wrongFormatText:"Wrong format of the action string: ",parseErrorText:"Can't parse arguments: "},"Siesta.Test.Action.Wait":{missingMethodText:"Could not find a waitFor method named "},"Siesta.Test.BDD.Expectation":{expectText:"Expect",needNotText:"Need not",needText:"Need",needMatchingText:"Need matching",needNotMatchingText:"Need not matching",needStringNotContainingText:"Need string not containing",needStringContainingText:"Need string containing",needArrayNotContainingText:"Need array not containing",needArrayContainingText:"Need array containing",needGreaterEqualThanText:"Need value greater or equal than",needGreaterThanText:"Need value greater than",needLessThanText:"Need value less than",needLessEqualThanText:"Need value less or equal than",needValueNotCloseToText:"Need value not close to",needValueCloseToText:"Need value close to",toBeText:"to be",toBeDefinedText:"to be defined",toBeUndefinedText:"to be undefined",toBeEqualToText:"to be equal to",toBeTruthyText:"to be truthy",toBeFalsyText:"to be falsy",toMatchText:"to match",toContainText:"to contain",toBeLessThanText:"to be less than",toBeGreaterThanText:"to be greater than",toBeCloseToText:"to be close to",toThrowText:"to throw exception",thresholdIsText:"Threshold is ",exactMatchText:"Exact match text",thrownExceptionText:"Thrown exception",noExceptionThrownText:"No exception thrown",wrongSpy:"Incorrect spy instance",toHaveBeenCalledDescTpl:"Expect method {methodName} to have been called {!need} times",actualNbrOfCalls:"Actual number of calls",expectedNbrOfCalls:"Expected number of calls",toHaveBeenCalledWithDescTpl:"Expect method {methodName} to have been called at least once with the specified arguments"},"Siesta.Test.ExtJS.Ajax":{ajaxIsLoading:"An Ajax call is currently loading",allAjaxRequestsToComplete:"all ajax requests to complete",ajaxRequest:"ajax request",toComplete:"to complete"},"Siesta.Test.ExtJS.Component":{badInputText:"Expected an Ext.Component, got",toBeVisible:"to be visible",toNotBeVisible:"to not be visible",component:"component",Component:"Component",componentQuery:"componentQuery",compositeQuery:"composite query",toReturnEmptyArray:"to return an empty array",toReturnEmpty:"to return empty",toReturnAVisibleComponent:"to return a visible component",toReturnHiddenCmp:"to return a hidden/missing component",invalidDestroysOkInput:"No components provided, or component query returned empty result",exception:"Exception",exceptionAnnotation:'Exception thrown while calling "destroy" method of',destroyFailed:"was not destroyed (probably destroy was canceled in the `beforedestroy` listener)",destroyPassed:"All passed components were destroyed ok"},"Siesta.Test.ExtJS.DataView":{view:"view",toRender:"to render"},"Siesta.Test.ExtJS.Element":{top:"top",left:"left",bottom:"bottom",right:"right"},"Siesta.Test.ExtJS.Grid":{waitForRowsVisible:"rows to show for panel with id",waitForCellEmpty:"cell to be empty"},"Siesta.Test.ExtJS.Observable":{hasListenerInvalid:"1st argument for `t.hasListener` should be an observable instance",hasListenerPass:"Observable has listener for {eventName}",hasListenerFail:"Provided observable has no listeners for event",isFiredWithSignatureNotFired:"event was not fired during the test",observableFired:"Observable fired",correctSignature:"with correct signature",incorrectSignature:"with incorrect signature"},"Siesta.Test.ExtJS.Store":{storesToLoad:"stores to load",failedToLoadStore:"Failed to load the store",URL:"URL"},"Siesta.Test.Action":{missingTestAction:"Action [{0}] requires `{1}` method in your test class"},"Siesta.Test.BDD":{codeBodyMissing:"Code body is not provided for",codeBodyOf:"Code body of",missingFirstArg:"does not declare a test instance as 1st argument",iitFound:"t.iit should only be used during debugging",noObject:"No object to spy on"},"Siesta.Test.BDD.Spy":{spyingNotOnFunction:"Trying to create a spy over a non-function property"},"Siesta.Test.Browser":{popupsDisabled:"Failed to open the popup for url: {url}. Enable the popups in the browser settings.",noDomElementFound:"No DOM element found for CSS selector",noActionTargetFound:"No action target found for",waitForEvent:"observable to fire its",event:"event",wrongFormat:"Wrong format for expected number of events",unrecognizedSignature:"Unrecognized signature for `firesOk`",observableFired:"Observable fired",observableFiredOk:"Observable fired expected number of",actualNbrEvents:"Actual number of events",expectedNbrEvents:"Expected number of events",events:"events",noElementFound:"Could not find any element at",targetElementOfAction:"Target element of action",targetElementOfSomeAction:"Target element of some action",isNotVisible:"is not visible or not reachable",text:"text",toBePresent:"to be present",toNotBePresent:"to not be present",target:"target",toAppear:"to appear",targetMoved:"Moving target detected, retargeting initiated",alertMethodNotCalled:"Expected a call to alert()",focusLostWarning:"Focus has left the test window {url}",focusLostWarningLauncher:"Focus has left the test window {url}, it will be restarted. This behavior is controled with the --restart-on-blur option."},"Siesta.Test.Date":{isEqualTo:"is equal to",Got:"Got"},"Siesta.Test.Element":{elementContent:"element content",toAppear:"to appear",toDisappear:"to disappear",toAppearAt:"to appear at",monkeyException:"Monkey testing action did not complete properly - probably an exception was thrown",monkeyNoExceptions:"No exceptions thrown during monkey test",monkeyActionLog:"Monkey action log",elementHasClass:"Element has the CSS class",elementHasNoClass:"Element has no CSS class",elementClasses:"Classes of element",needClass:"Need CSS class",hasStyleDescTpl:"Element has correct {value} for CSS style {property}",elementStyles:"Styles of element",needStyle:"Need style",hasNotStyleDescTpl:"Element does not have: {value} for CSS style {property}",hasTheStyle:"Element has the style",element:"element",toBeTopEl:"to be the top element at its position",toNotBeTopEl:"to not be the top element at its position",selector:"selector",selectors:"selectors",noCssSelector:"A CSS selector must be supplied",waitForSelectorsBadInput:"An array of CSS selectors must be supplied",Position:"Position",noElementAtPosition:"No element found at the specified position",elementIsAtDescTpl:"DOM element or its child is at [ {x}, {y} ] coordinates",topElement:"Top element",elementIsAtPassTpl:"DOM element is at [ {x}, {y} ] coordinates",allowChildrenDesc:"Need exactly this or its child",allowChildrenAnnotation:"Passed element is not the top-most one and not the child of one",shouldBe:"Should be",noChildrenFailAnnotation:"Passed element is not the top-most one",topLeft:"(t-l)",bottomLeft:"(b-l)",topRight:"(t-r)",bottomRight:"(b-r)",elementIsNotTopElementPassTpl:"Element is not the top element on the screen",selectorIsAtPassTpl:"Found element matching CSS selector {selector} at [ {xy} ]",elementMatching:"Element matching",selectorIsAtFailAnnotation:"Passed selector does not match any selector at",selectorExistsFailTpl:"No element matching the passed selector found",selectorExistsPassTpl:"Found DOM element(s) matching CSS selector {selector}",selectorNotExistsFailTpl:"Elements found matching the passed selector",selectorNotExistsPassTpl:"Did not find any DOM element(s) matching CSS selector {selector}",toChangeForElement:"to change for element",selectorCountIsPassTpl:"Found exactly {count} elements matching {selector}",selectorCountIsFailTpl:"Found {got} elements matching the selector {selector}, expected {need}",isInViewPassTpl:"Passed element is within the visible viewport",toAppearInTheViewport:"to appear in the viewport",elementIsEmptyPassTpl:"Passed element is empty",elementIsNotEmptyPassTpl:"Passed element is not empty",elementToBeEmpty:"element to be empty",elementToNotBeEmpty:"element to not be empty"},"Siesta.Test.ExtJS":{bundleUrlNotFound:"Cannot find Ext JS bundle url",assertNoGlobalExtOverridesInvalid:"Was not able to find the Ext JS bundle URL in the `assertNoGlobalExtOverrides` assertion",assertNoGlobalExtOverridesPassTpl:"No global Ext overrides found",assertNoGlobalExtOverridesGotDesc:"Number of overrides found",foundOverridesFor:"Found overrides for",animationsToFinalize:"animations to finalize",extOverridesInvalid:"Was not able to find the ExtJS bundle URL in the `assertMaxNumberOfGlobalExtOverrides` assertion)",foundLessOrEqualThan:"Found less or equal than",nbrOverridesFound:"Number of overrides found",globalOverrides:"Ext JS global overrides"},"Siesta.Test.ExtJSCore":{waitedForRequires:"Waiting for required classes took too long - \nCheck the `Net` tab in Firebug and the `loaderPath` config",waitedForExt:"Waiting for Ext.onReady took too long - probably some dependency could not be loaded. \nCheck the `Net` tab in Firebug and the `loaderPath` config",waitedForApp:"Waiting for MVC application launch took too long - no MVC application on test page? \nYou may need to disable the `waitForAppReady` config option",noComponentMatch:'Your component query: "{component}" returned no components',multipleComponentMatch:'Your component query: "{component}" returned more than 1 component',noComponentFound:"No component found for CQ",knownBugIn:"Known bug in",Class:"Class",wasLoaded:"was loaded",wasNotLoaded:"was not loaded",invalidCompositeQuery:"Invalid composite query selector",ComponentQuery:"ComponentQuery",CompositeQuery:"CompositeQuery",matchedNoCmp:"matched no Ext.Component",messageBoxVisible:"Message box is visible",messageBoxHidden:"Message box is hidden",waitedForComponentQuery:"Waiting too long for Ext.ComponentQuery"},"Siesta.Test.Function":{Need:"need",atLeast:"at least",exactly:"exactly",methodCalledExactly:"method was called exactly {n} times",exceptionEvalutingClass:"Exception [{e}] caught while evaluating the class name"},"Siesta.Test.More":{isGreaterPassTpl:"`{value1}` is greater than `{value2}`",isLessPassTpl:"`{value1}` is less than `{value2}`",isGreaterEqualPassTpl:"`{value1}` is greater or equal to`{value2}`",isLessEqualPassTpl:"`{value1}` is less or equal to`{value2}`",isApproxToPassTpl:"`{value1}` is approximately equal to `{value2}`",needGreaterThan:"Need greater than",needGreaterEqualTo:"Need greater or equal to",needLessThan:"Need less than",needLessEqualTo:"Need less or equal to",exactMatch:"Exact match",withinThreshold:"Match within treshhold",needApprox:"Need approx",thresholdIs:"Threshold is",stringMatchesRe:"`{string}` matches regexp {regex}",stringNotMatchesRe:"`{string}` does not match regexp {regex}",needStringMatching:"Need string matching",needStringNotMatching:"Need string not matching",needStringContaining:"Need string containing",needStringNotContaining:"Need string not containing",stringHasSubstring:"`{string}` has a substring: `{regex}`",stringHasNoSubstring:"`{string}` does not have a substring: `{regex}`",throwsOkInvalid:"throws_ok accepts a function as 1st argument",didntThrow:"Function did not throw an exception",exMatchesRe:"Function throws exception matching to {expected}",exceptionStringifiesTo:"Exception stringifies to",exContainsSubstring:"Function throws exception containing a substring: {expected}",fnDoesntThrow:"Function does not throw any exceptions",fnThrew:"Function threw an exception",isInstanceOfPass:"Object is an instance of the specified class",needInstanceOf:"Need instance of",isAString:"{value} is a string",aStringValue:"AStringValue",isAnObject:"{value} is an object",anObject:"An object value",isAnArray:"{value} is an array",anArrayValue:"An array value",isANumber:"{value} is a number",aNumberValue:"a number value",isABoolean:"{value} is a boolean",aBooleanValue:"a number value",isADate:"{value} is a date",aDateValue:"a date value",isARe:"{value} is a regular expression",aReValue:"a regular expression",isAFunction:"{value} is a function",aFunctionValue:"a function",isDeeplyPassTpl:"{obj1} is deeply equal to {obj2}",isDeeplyStrictPassTpl:"{obj1} is strictly deeply equal to {obj2}",globalCheckNotSupported:"Testing leakage of global variables is not supported on this platform",globalVariables:"Global Variables",noGlobalsFound:"No unexpected global variables found",globalFound:"Unexpected global found",globalName:"Global name",value:"value",conditionToBeFulfilled:"condition to be fulfilled",pageToLoad:"page to load",ms:"ms",waitingFor:"Waiting for",waitedTooLong:"Waited too long for",conditionNotFulfilled:"Condition was not fullfilled during",waitingAborted:"Waiting aborted",Waited:"Waited",checkerException:"checker threw an exception",Exception:"Exception",msFor:"ms for",forcedWaitFinalization:"Forced finalization of waiting for",chainStepNotCompleted:"The step in `t.chain()` call did not complete within required timeframe, chain can not proceed",stepNumber:"Step number",oneBased:"(1-based)",atLine:"At line",chainStepEx:"Chain step threw an exception",stepFn:"Step function",notUsingNext:'does not use the provided "next" function anywhere',calledMoreThanOnce:"The `next` callback of {num} step (1-based) of `t.chain()` call at line {line} is called more than once.",tooManyDifferences:"Showing {num} of {total} differences"},"Siesta.Test.SenchaTouch":{STSetupFailed:"Waiting for Ext.setup took too long - some dependency could not be loaded? Check the `Net` tab in Firebug",invalidSwipeDir:"Invalid swipe direction",moveFingerByInvalidInput:"Trying to call moveFingerBy without relative distances",scrollUntilFailed:"scrollUntil failed to achieve its mission",scrollUntilElementVisibleInvalid:"scrollUntilElementVisible: target or scrollable not provided",scrollerReachPos:"scroller to reach position"},"Siesta.Test":{noCodeProvidedToTest:"No code provided to test",addingAssertionsAfterDone:"Adding assertions after the test has finished",testFailedAndAborted:"Assertion failed, test execution aborted",atLine:"at line",of:"of",character:"character",isTruthy:'`{value}` is a "truthy" value',needTruthy:'Need "truthy" value',isFalsy:'`{value}` is a "falsy" value',needFalsy:'Need "falsy" value',isEqualTo:"`{got}` is equal to `{expected}`",isNotEqualTo:"`{got}` is not equal to `{expected}`",needNot:"Need not",isStrictlyEqual:"`{got}` is strictly equal to `{expected}`",needStrictly:"Need strictly",isStrictlyNotEqual:"`{got}` is strictly not equal to `{expected}`",needStrictlyNot:"Need strictly not",alreadyWaiting:"Already waiting with title",noOngoingWait:"There is no ongoing `wait` action with title",noMatchingEndAsync:"No matching `endAsync` call within {time}ms",endAsyncMisuse:"Calls to endAsync without argument should only be performed if you have single beginAsync statement",codeBodyMissingForSubTest:"Code body is not provided for sub test [{name}]",codeBodyMissingTestArg:"Code body of sub test [{name}] does not declare a test instance as 1st argument",Subtest:"Subtest",Test:"Test",failedToFinishWithin:"Subtest {name} failed to finish within {timeout}ms",threwException:"threw an exception",testAlreadyStarted:"Test has already been started",setupTookTooLong:"`setup` method took too long to complete",errorBeforeTestStarted:"Error happened before the test started",testStillRunning:"Your test is still considered to be running, if this is unexpected please see console for more information",testNotFinalized:'Your test [{url}] has not finalized, most likely since a timer (setTimeout) is still active. If this is the expected behavior, try setting "overrideSetTimeout : false" on your Harness configuration.',missingDoneCall:"Test has completed, but there was no `t.done()` call. Add it at the bottom, or use `t.beginAsync()` for asynchronous code",allTestsPassed:"All tests passed","Snoozed until":"Snoozed until",testTearDownTimeout:"Test's tear down process has timeout out"},"Siesta.Recorder.UI.Editor.Code":{invalidSyntax:"Invalid syntax"},"Siesta.Recorder.UI.Editor.DragTarget":{targetLabel:"Target",toLabel:"To",byLabel:"By",cancelButtonText:"Cancel",saveButtonText:"Save",dragVariantTitle:"Edit `drag` action",moveCursorVariantTitle:"Edit `moveCursor` action"},"Siesta.Recorder.UI.RecorderPanel":{actionColumnHeader:"Action",offsetColumnHeader:"Offset",queryMatchesNothing:"Query matches no DOM elements or components",queryMatchesMultiple:"Query matches multiple components",noVisibleElsFound:"No visible elements found for target",noTestDetected:"No test detected",noTestStarted:"You need to run a test first, or provide a Page URL",recordTooltip:"Record",stopTooltip:"Stop",playTooltip:"Play",clearTooltip:"Clear all",codeWindowTitle:"Code",addNewTooltip:"Add a new step",removeAllPromptTitle:"Remove all?",removeAllPromptMessage:"Do you want to clear the recorded events?",Error:"Error",showSource:"Show source",showSourceInNewWindow:"Show source in new window",newRecording:"New recording...",pageUrl:"Page URL"},"Siesta.Recorder.UI.TargetColumn":{headerText:"Target / Value",by:"by",to:"to",coordinateTargetWarning:"Siesta was unable to find a stable selector for this target. Using coordinates as locator is not recommended."}},Siesta.Resource=function(){var cacheByNamespace={},Resource=Class({does:Siesta.Util.Role.CanFormatStrings,has:{dict:null},methods:{get:function(key,data){var text=this.dict[key];return text?this.formatString(text,data):(window.console&&console.error&&window.top.console.error("TEXT_NOT_DEFINED: "+key),"TEXT_NOT_DEFINED: "+key)}}});return function(namespace,key,data){var dictionary=Siesta.CurrentLocale[namespace];if(!dictionary)throw"Missing dictionary for namespace: "+namespace;var resource=cacheByNamespace[namespace];return resource=resource||(cacheByNamespace[namespace]=new Resource({dict:dictionary,serializeFormatingPlaceholders:!1})),key?resource.get(key,data):resource}}(),function(){var ID=0;Class("Siesta.Result",{has:{description:null,children:Joose.I.Array,length:0,id:function(){return++ID},parent:null},methods:{itemAt:function(i){return this.children[i]},push:function(result){this.children.push(result),(result.parent=this).length=this.children.length},each:function(func,scope){var children=this.children;if(!1===func.call(scope||this,this))return!1;for(var i=0;i<children.length;i++)if(!1===children[i].each(func,scope))return!1},eachChild:function(func,scope){for(var children=this.children,i=0;i<children.length;i++)if(!1===func.call(scope,children[i]))return!1},toString:function(){return this.description},toJSON:function(){return{type:this.meta.name,description:this.description}},findChildById:function(id){var child;return this.each(function(node){if(node.id==id)return child=node,!1}),child}},my:{methods:{seedID:function(value){ID=value}}}})}(),Class("Siesta.Result.Diagnostic",{isa:Siesta.Result,has:{isWarning:!1},methods:{toString:function(){return"# "+this.description},toJSON:function(){var info={parentId:this.parent.id,type:this.meta.name,description:this.description};return this.isWarning&&(info.isWarning=!0),info}}}),Class("Siesta.Result.Summary",{isa:Siesta.Result,has:{isFailed:!1},methods:{getTest:function(){return this.parent.test},toString:function(){}}}),Class("Siesta.Result.Assertion",{isa:Siesta.Result,has:{name:null,passed:null,annotation:null,index:null,sourceLine:null,isTodo:!1,isException:!1,exceptionType:null,isWaitFor:!1,completed:!1},methods:{isPassed:function(raw){return raw?this.passed:!!this.isTodo||(!(!this.isWaitFor||this.completed)||this.passed)},toString:function(){var R=Siesta.Resource("Siesta.Result.Assertion"),text=(this.isTodo?R.get("todoText"):"")+(this.passed?R.get("passText"):R.get("failText"))+" "+this.index+" - "+this.description;return this.annotation&&(text+="\n"+this.annotation),text},toJSON:function(){var me=this,info={parentId:this.parent.id,type:this.meta.name,passed:this.passed,index:this.index,description:String(this.description)||"No description"};return this.annotation&&(info.annotation=String(this.annotation)),Joose.A.each(["isTodo","isWaitFor","isException","sourceLine","name"],function(name){me[name]&&(info[name]=me[name])}),this.isException&&(info.exceptionType=this.exceptionType),info}}}),Class("Siesta.Result.SubTest",{isa:Siesta.Result,has:{test:null},methods:{isWorking:function(){return!this.test.isFinished()},toJSON:function(){var test=this.test,isCrossContext=!(test instanceof Object),report={id:this.id,parentId:test.parent?test.parent.getResults().id:null,type:this.meta.name,name:test.name,startDate:test.startDate,endDate:test.endDate||+new Date,passed:isCrossContext?null:test.isPassed()};test.parent||(report.automationElementId=test.automationElementId,report.url=test.url,report.jUnitClass=test.getJUnitClass(),report.groups=test.groups),test.specType&&(report.bddSpecType=test.specType),test.isTodo&&(report.isTodo=!0);var isFailed=!1,assertions=[];return Joose.A.each(this.children,function(result){if(result instanceof Siesta.Result.Assertion||result instanceof Siesta.Result.Diagnostic||result instanceof Siesta.Result.SubTest){var assertion=result.toJSON();assertion.passed||assertion.isTodo||(isFailed=!0),assertions.push(assertion)}}),report.assertions=assertions,isCrossContext&&(report.passed=!(isFailed||test.failed||!test.endDate)),report}}}),Role("Siesta.Test.Function",{methods:{isCalled:function(fn,obj,desc){this.isCalledNTimes(fn,obj,1,desc,!0)},isCalledOnce:function(fn,obj,desc){this.isCalledNTimes(fn,obj,1,desc,!1)},isCalledNTimes:function(fn,obj,n,desc,isGreaterEqual){var me=this,prop="string"==typeof fn?fn:me.getPropertyName(obj,fn),counter=0,original=obj[prop];obj[prop]=function(){return counter++,original.apply(this,arguments)},desc=desc?desc+" ":"",this.on("beforetestfinalizeearly",function(){var R=Siesta.Resource("Siesta.Test.Function");counter===n||isGreaterEqual&&n<counter?me.pass(desc||prop+" "+R.get("methodCalledExactly").replace("{n}",n)):me.fail(desc||prop,{assertionName:"isCalledNTimes "+prop,got:counter,need:n,needDesc:R.get("Need")+" "+(isGreaterEqual?R.get("atLeast"):R.get("exactly"))+" "}),obj[prop]=original})},isntCalled:function(fn,obj,desc){this.isCalledNTimes(fn,obj,0,desc)},getPropertyName:function(host,obj){for(var o in host)if(host[o]===obj)return o},methodIsCalledNTimes:function(fn,className,n,desc,isGreaterEqual){var me=this,counter=0,R=Siesta.Resource("Siesta.Test.Function");desc=desc?desc+" ":"";try{"String"==me.typeOf(className)&&(className=me.global.eval(className))}catch(e){return void me.fail(desc,{assertionName:"isMethodCalled",annotation:R.get("exceptionEvalutingClass").replace("{e}",e)+"["+className+"]"})}var prototype=className.prototype,prop="string"==typeof fn?fn:me.getPropertyName(prototype,fn);me.on("beforetestfinalizeearly",function(){counter===n||isGreaterEqual&&n<counter?me.pass(desc||prop+" "+R.get("methodCalledExactly").replace("{n}",n)):me.fail(desc||prop,{assertionName:"methodIsCalledNTimes "+prop,got:counter,need:n,needDesc:R.get("Need")+" "+(isGreaterEqual?R.get("atLeast"):R.get("exactly"))+" "})}),fn=prototype[prop],prototype[prop]=function(){return counter++,fn.apply(this,arguments)}},methodIsCalled:function(fn,className,desc){this.methodIsCalledNTimes(fn,className,1,desc,!0)},methodIsntCalled:function(fn,className,desc){this.methodIsCalledNTimes(fn,className,0,desc)}}}),Role("Siesta.Test.Date",{methods:{isDateEq:function(got,expectedDate,description){this.isDateEqual.apply(this,arguments)},isDateEqual:function(got,expectedDate,description){var R=Siesta.Resource("Siesta.Test.Date");got-expectedDate==0?this.pass(description,{descTpl:"{got} "+R.get("isEqualTo")+" {expectedDate}",got:got,expectedDate:expectedDate}):this.fail(description,{assertionName:"isDateEqual",got:got?got.toString():"",gotDesc:R.get("Got"),need:expectedDate.toString()})}}}),Role("Siesta.Test.More",{requires:["isFailed","typeOf","on"],has:{autoCheckGlobals:!1,expectedGlobals:Joose.I.Array,disableGlobalsCheck:!1,browserGlobals:{init:["console","getInterface","ExtBox1","__IE_DEVTOOLBAR_CONSOLE_COMMAND_LINE",/__BROWSERTOOLS/,"seleniumAlert","onload","onerror","StartTest","startTest","__loaderInstrumentationHookInstalled__","describe","setTimeout","clearTimeout","requestAnimationFrame","cancelAnimationFrame","__coverage__",/cov_\w+/]},waitForTimeout:1e4,waitForPollInterval:100,suppressPassedWaitForAssertion:!1},methods:{isGreater:function(value1,value2,desc){var R=Siesta.Resource("Siesta.Test.More");value2<value1?this.pass(desc,{descTpl:R.get("isGreaterPassTpl"),value1:value1,value2:value2}):this.fail(desc,{assertionName:"isGreater",got:value1,need:value2,needDesc:R.get("needGreaterThan")})},isLess:function(value1,value2,desc){var R=Siesta.Resource("Siesta.Test.More");value1<value2?this.pass(desc,{descTpl:R.get("isLessPassTpl"),value1:value1,value2:value2}):this.fail(desc,{assertionName:"isLess",got:value1,need:value2,needDesc:R.get("needLessThan")})},isGE:function(){this.isGreaterOrEqual.apply(this,arguments)},isGreaterOrEqual:function(value1,value2,desc){var R=Siesta.Resource("Siesta.Test.More");value2<=value1?this.pass(desc,{descTpl:R.get("isGreaterEqualPassTpl"),value1:value1,value2:value2}):this.fail(desc,{assertionName:"isGreaterOrEqual",got:value1,need:value2,needDesc:R.get("needGreaterEqualTo")})},isLE:function(){this.isLessOrEqual.apply(this,arguments)},isLessOrEqual:function(value1,value2,desc){var R=Siesta.Resource("Siesta.Test.More");value1<=value2?this.pass(desc,{descTpl:R.get("isLessEqualPassTpl"),value1:value1,value2:value2}):this.fail(desc,{assertionName:"isLessOrEqual",got:value1,need:value2,needDesc:R.get("needLessEqualTo")})},isApprox:function(value1,value2,threshold,desc){var R=Siesta.Resource("Siesta.Test.More");2==arguments.length&&(threshold=Math.abs(.05*value1)),3==arguments.length&&"String"==this.typeOf(threshold)&&(desc=threshold,threshold=Math.abs(.05*value1));Math.abs(function(value1,value2){function fractionalLength(v){var afterPointPart=(v+"").split(".")[1];return afterPointPart&&afterPointPart.length||0}var maxLength=Math.max(fractionalLength(value1),fractionalLength(value2)),k=Math.pow(10,maxLength);return(value1*k-value2*k)/k}(value2,value1))<=threshold?this.pass(desc,{descTpl:R.get("isApproxToPassTpl"),value1:value1,value2:value2,annotation:value2==value1?R.get("exactMatch"):R.get("withinThreshold")+": "+threshold}):this.fail(desc,{assertionName:"isApprox",got:value1,need:value2,needDesc:R.get("needApprox"),annotation:R.get("thresholdIs")+": "+threshold})},like:function(string,regex,desc){var R=Siesta.Resource("Siesta.Test.More");"RegExp"==this.typeOf(regex)?string.match(regex)?this.pass(desc,{descTpl:R.get("stringMatchesRe"),string:string,regex:regex}):this.fail(desc,{assertionName:"like",got:string,need:regex,needDesc:R.get("needStringMatching")}):-1!=string.indexOf(regex)?this.pass(desc,{descTpl:R.get("stringHasSubstring"),string:string,regex:regex}):this.fail(desc,{assertionName:"like",got:string,need:regex,needDesc:R.get("needStringContaining")})},unlike:function(string,regex,desc){var R=Siesta.Resource("Siesta.Test.More");"RegExp"==this.typeOf(regex)?string.match(regex)?this.fail(desc,{assertionName:"unlike",got:string,need:regex,needDesc:R.get("needStringNotMatching")}):this.pass(desc,{descTpl:R.get("stringNotMatchesRe"),string:string,regex:regex}):-1==string.indexOf(regex)?this.pass(desc,{descTpl:R.get("stringHasNoSubstring"),string:string,regex:regex}):this.fail(desc,{assertionName:"unlike",got:string,need:regex,needDesc:R.get("needStringNotContaining")})},throws:function(){this.throwsOk.apply(this,arguments)},throws_ok:function(){this.throwsOk.apply(this,arguments)},throwsOk:function(func,expected,desc){var R=Siesta.Resource("Siesta.Test.More");if("Function"!=this.typeOf(func))throw new Error(R.get("throwsOkInvalid"));var e=this.getExceptionCatcher()(func);void 0!==e?(e instanceof this.getTestErrorClass()&&(e=e.message||e.description),e=""+e,"RegExp"==this.typeOf(expected)?e.match(expected)?this.pass(desc,{descTpl:R.get("exMatchesRe"),expected:expected}):this.fail(desc,{assertionName:"throws_ok",got:e,gotDesc:R.get("exceptionStringifiesTo"),need:expected,needDesc:R.get("needStringMatching")}):-1!=e.indexOf(expected)?this.pass(desc,{descTpl:R.get("exContainsSubstring"),expected:expected}):this.fail(desc,{assertionName:"throws_ok",got:e,gotDesc:R.get("exceptionStringifiesTo"),need:expected,needDesc:R.get("needStringContaining")})):this.fail(desc,{assertionName:"throws_ok",annotation:R.get("didntThrow")})},lives_ok:function(){this.livesOk.apply(this,arguments)},lives:function(){this.livesOk.apply(this,arguments)},livesOk:function(func,desc){"Function"!=this.typeOf(func)&&(func=[desc,desc=func][0]);var R=Siesta.Resource("Siesta.Test.More"),e=this.getExceptionCatcher()(func);void 0===e?this.pass(desc,{descTpl:R.get("fnDoesntThrow")}):this.fail(desc,{assertionName:"lives_ok",annotation:R.get("fnThrew")+": "+e})},isa_ok:function(value,className,desc){this.isInstanceOf(value,className,desc)},isaOk:function(value,className,desc){this.isInstanceOf(value,className,desc)},isInstanceOf:function(value,className,desc){var R=Siesta.Resource("Siesta.Test.More");try{"String"==this.typeOf(className)&&(className=this.global.eval(className))}catch(e){return void this.fail(desc,{assertionName:"isa_ok",annotation:Siesta.Resource("Siesta.Test.Function","exceptionEvalutingClass")})}value instanceof className?this.pass(desc,{descTpl:R.get("isInstanceOfPass")}):this.fail(desc,{assertionName:"isa_ok",got:value,need:String(className),needDesc:R.get("needInstanceOf")})},isString:function(value,desc){var R=Siesta.Resource("Siesta.Test.More");"String"==this.typeOf(value)?this.pass(desc,{descTpl:R.get("isAString"),value:value}):this.fail(desc,{got:value,need:R.get("aStringValue")})},isObject:function(value,desc){var R=Siesta.Resource("Siesta.Test.More");"Object"==this.typeOf(value)?this.pass(desc,{descTpl:R.get("isAnObject"),value:value}):this.fail(desc,{got:value,need:R.get("anObject")})},isArray:function(value,desc){var R=Siesta.Resource("Siesta.Test.More");"Array"==this.typeOf(value)?this.pass(desc,{descTpl:R.get("isAnArray"),value:value}):this.fail(desc,{got:value,need:R.get("anArrayValue")})},isNumber:function(value,desc){var R=Siesta.Resource("Siesta.Test.More");"Number"==this.typeOf(value)?this.pass(desc,{descTpl:R.get("isANumber"),value:value}):this.fail(desc,{got:value,need:R.get("aNumberValue")})},isBoolean:function(value,desc){var R=Siesta.Resource("Siesta.Test.More");"Boolean"==this.typeOf(value)?this.pass(desc,{descTpl:R.get("isABoolean"),value:value}):this.fail(desc,{got:value,need:R.get("aBooleanValue")})},isDate:function(value,desc){var R=Siesta.Resource("Siesta.Test.More");"Date"==this.typeOf(value)?this.pass(desc,{descTpl:R.get("isADate"),value:value}):this.fail(desc,{got:value,need:R.get("aDateValue")})},isRegExp:function(value,desc){var R=Siesta.Resource("Siesta.Test.More");"RegExp"==this.typeOf(value)?this.pass(desc,{descTpl:R.get("isARe"),value:value}):this.fail(desc,{got:value,need:R.get("aReValue")})},isFunction:function(value,desc){var R=Siesta.Resource("Siesta.Test.More");"Function"==this.typeOf(value)||"AsyncFunction"==this.typeOf(value)?this.pass(desc,{descTpl:R.get("isAFunction"),value:value}):this.fail(desc,{got:value,need:R.get("aFunctionValue")})},is_deeply:function(obj1,obj2,desc){this.isDeeply.apply(this,arguments)},isDeeply:function(obj1,obj2,desc){var diff,R=Siesta.Resource("Siesta.Test.More");if(this.typeOf(obj1)===this.typeOf(obj2)&&this.compareObjects(obj1,obj2))this.pass(desc,{descTpl:R.get("isDeeplyPassTpl"),obj1:obj1,obj2:obj2});else if("undefined"!=typeof DeepDiff&&(diff=DeepDiff(obj1,obj2))){5<diff.length&&this.diag(R.get("tooManyDifferences",{num:5,total:diff.length}));for(var i=0;i<Math.min(diff.length,5);i++){var diffItem=diff[i],path=(diffItem.path||[]).join("."),saw=path?path+": "+diffItem.lhs:obj1,expected=path?path+": "+diffItem.rhs:obj2;this.fail(desc,{assertionName:"isDeeply",got:saw,need:expected}),window.console&&console.log("DIFF RESULT:",diffItem)}}else this.fail(desc,{assertionName:"isDeeply",got:obj1,need:obj2})},isDeeplyStrict:function(obj1,obj2,desc){if(this.typeOf(obj1)===this.typeOf(obj2)&&this.compareObjects(obj1,obj2,!0)){var R=Siesta.Resource("Siesta.Test.More");this.pass(desc,{descTpl:R.get("isDeeplyStrictPassTpl"),obj1:obj1,obj2:obj2})}else this.fail(desc,{assertionName:"isDeeplyStrict",got:obj1,need:obj2})},expectGlobal:function(){this.expectGlobals.apply(this,arguments)},expectGlobals:function(){this.expectedGlobals.push.apply(this.expectedGlobals,arguments)},isGlobalExpected:function(name,index){var me=this;if(index&&(!index||index.expectedStrings)||(index=index||{},Joose.O.extend(index,{expectedStrings:{},expectedRegExps:[]}),Joose.A.each(this.expectedGlobals.concat(this.browserGlobals),function(value){"RegExp"==me.typeOf(value)?index.expectedRegExps.push(value):index.expectedStrings[value]=!0})),index.expectedStrings[name])return!0;if(Siesta.Project.Browser.FeatureSupport().supports.imageWithIdCreatesGlobalEnumerable){var domEl=this.global.document.getElementById(name);if(domEl&&"img"==domEl.tagName.toLowerCase())return!0}for(var i=0;i<index.expectedRegExps.length;i++)if(index.expectedRegExps[i].test(name))return!0;return!1},forEachUnexpectedGlobal:function(func,scope){scope=scope||this;var index={};for(var name in this.global)if(!this.isGlobalExpected(name,index)&&!1===func.call(scope,name))break},verifyGlobals:function(){var R=Siesta.Resource("Siesta.Test.More");if(this.disableGlobalsCheck)this.diag(R.get("globalCheckNotSupported"));else{this.expectGlobals.apply(this,arguments),this.diag(R.get("globalVariables"));var failed=!1,i=0;this.forEachUnexpectedGlobal(function(name){return this.fail(R.get("globalFound"),R.get("globalName")+": "+name+", "+R.get("value")+": "+Siesta.Util.Serializer.stringify(this.global[name])),failed=!0,i++<50}),failed||this.pass(R.get("noGlobalsFound"))}},startWaiting:function(description,sourceLine){var result=new Siesta.Result.Assertion({description:description,isWaitFor:!0,sourceLine:sourceLine});return this.fireEvent("testupdate",this,result,this.getResults()),result},finalizeWaiting:function(result,passed,desc,annotation,errback,suppressPassedWaitForAssertion){result.completed=!0,passed?this.suppressPassedWaitForAssertion||suppressPassedWaitForAssertion?this.fireEvent("assertiondiscard",this,result):this.pass(desc,annotation,result):(this.fail(desc,annotation,result),errback&&errback())},waitFor:function(method,callback,scope,timeout,interval){var errback,suppressAssertion,R=Siesta.Resource("Siesta.Test.More"),description=" "+R.get("conditionToBeFulfilled"),assertionName="waitFor",me=this,sourceLine=me.getSourceLine(),originalSetTimeout=me.originalSetTimeout,originalClearTimeout=me.originalClearTimeout;if(1===arguments.length&&"Object"==this.typeOf(method)){var options=method;method=options.method,callback=options.callback,scope=options.scope,timeout=options.timeout,interval=options.interval,description=options.description||description,assertionName=options.assertionName||assertionName,suppressAssertion=options.suppressAssertion,errback=options.errback}else options={};var pollTimeout,isWaitingForTime="Number"==this.typeOf(method);callback=callback||function(){},description=isWaitingForTime?method+" "+R.get("ms"):description;var resolve,waitAssertion=me.startWaiting(R.get("waitingFor")+" "+description,sourceLine);interval=interval||this.waitForPollInterval,timeout=timeout||this.waitForTimeout;var res=new Promise(function(resolution){resolve=resolution}),async=this.beginAsync((isWaitingForTime?method:timeout)+3*interval,function(){return isDone=!0,originalClearTimeout(pollTimeout),me.finalizeWaiting(waitAssertion,!1,R.get("waitedTooLong")+": "+description,{assertionName:assertionName,annotation:"Function"===me.typeOf(options.annotation)?options.annotation():R.get("conditionNotFulfilled")+" "+timeout+R.get("ms")+". \n\n [code]"+method.toString()+"[/code]"},errback,suppressAssertion),resolve(),!0}),isDone=!1;if(this.on("beforetestfinalize",function(){isDone||(isDone=!0,me.finalizeWaiting(waitAssertion,!1,R.get("waitingAborted"),null,null,suppressAssertion),me.endAsync(async),originalClearTimeout(pollTimeout))},null,{single:!0}),isWaitingForTime){if(method<0)throw new Error("Cannot wait for a negative amount of time");pollTimeout=originalSetTimeout(function(){isDone=!0,me.finalizeWaiting(waitAssertion,!0,R.get("Waited")+" "+method+" "+R.get("ms"),null,null,suppressAssertion||0===method),me.endAsync(async),me.processCallbackFromTest(callback,[],scope||me),resolve()},method)}else{var result,startDate=new Date,pollFunc=function(){var time=new Date-startDate;if(timeout<time)return me.endAsync(async),me.finalizeWaiting(waitAssertion,!1,R.get("waitedTooLong")+": "+description,{assertionName:assertionName,annotation:"Function"===me.typeOf(options.annotation)?options.annotation():R.get("conditionNotFulfilled")+" "+timeout+R.get("ms")+". \n\n [code]"+method.toString()+"[/code]"},errback,suppressAssertion),isDone=!0,void resolve();try{result=method.call(scope||me)}catch(e){return me.endAsync(async),me.finalizeWaiting(waitAssertion,!1,assertionName+" "+R.get("checkerException"),{assertionName:assertionName,got:e.toString(),gotDesc:R.get("Exception")},errback,suppressAssertion),isDone=!0,void resolve()}null!=result&&!1!==result?(me.endAsync(async),isDone=!0,me.finalizeWaiting(waitAssertion,!0,R.get("Waited")+" "+time+" "+R.get("msFor")+" "+description,"Function"===me.typeOf(options.annotation)?options.annotation():null,null,(suppressAssertion||0==time)&&!options.description),me.processCallbackFromTest(callback,[result],scope||me),resolve(result)):pollTimeout=originalSetTimeout(pollFunc,interval)};pollFunc()}return res.force=function(){isDone||(isDone=!0,originalClearTimeout(pollTimeout),me.endAsync(async),me.finalizeWaiting(waitAssertion,!0,R.get("forcedWaitFinalization")+" "+description,null,null,suppressAssertion),me.processCallbackFromTest(callback,[],scope||me),resolve())},res},waitForMs:function(){return this.waitFor.apply(this,arguments)},waitForFn:function(){return this.waitFor.apply(this,arguments)},analyzeChainStep:function(func){var firstArg,sources=func.toString(),isArrow=!sources.match(/^function/);return!!(firstArg=isArrow?sources.match(/^\(/)?sources.match(/\(\s*(.*?)\s*(?:,|\))/)[1]:sources.match(/(.*?)\s*=>/)[1]:sources.match(/function\s*[^(]*\(\s*(.*?)\s*(?:,|\))/)[1])&&-1!=(isArrow?sources.match(/=>\s*([\s\S]*)/)[1]:sources.match(/\{([\s\S]*)\}/)[1]).indexOf(firstArg)},stringifyChainStep:function(step){return this.typeOf(step).match(/^(Async)?Function$/)?step.toString():Siesta.Util.Serializer.stringify(step)},chain:function(){var steps=this.flattenArray(arguments),R=Siesta.Resource("Siesta.Test.More"),nonEmpty=[];Joose.A.each(steps,function(step){step&&nonEmpty.push(step)});var len=(steps=nonEmpty).length;if(len){var me=this,self=arguments.callee,queue=new Siesta.Util.Queue({deferer:this.originalSetTimeout,deferClearer:this.originalClearTimeout,interval:self.hasOwnProperty("actionDelay")?self.actionDelay:this.simulator?this.simulator.actionDelay:1,observeTest:this});delete self.actionDelay;var sourceLine=me.getSourceLine(),args=[];Joose.A.each(steps,function(step,index){var isLast=index==len-1;queue.addAsyncStep({processor:function(data){function initStep(stepHasOwnAsyncFrame){if(!stepHasOwnAsyncFrame)var timeout=step.timeout||me.defaultTimeout,async=me.beginAsync(timeout+100,function(){return me.fail(R.get("chainStepNotCompleted"),{sourceLine:sourceLine,annotation:R.get("stepNumber")+": "+(index+1)+" "+R.get("oneBased")+(sourceLine?"\n"+R.get("atLine")+": "+sourceLine:"")+"\nStep source: "+me.stringifyChainStep(step),ownTextOnly:!0}),!0});return{next:function(){var self=arguments.callee;self.__CALLED__&&me.fail(R.get("calledMoreThanOnce",{num:index+1,line:sourceLine})),self.__CALLED__=!0,stepHasOwnAsyncFrame||me.endAsync(async),args=Array.prototype.slice.call(arguments),step.desc&&me.pass(step.desc),data.next()},async:async}}if(step instanceof Siesta.Test)me.launchSubTest(step,initStep(!0).next);else if(me.typeOf(step).match(/^(Async)?Function$/)||me.typeOf(step.action).match(/^(Async)?Function$/)){var result,func=me.typeOf(step).match(/^(Async)?Function$/)?step:step.action,stepInitData=initStep(!1),next=isLast?function(){}:stepInitData.next;if(args.unshift(next),me.transparentEx)result=func.apply(me,args);else{var e=me.getExceptionCatcher()(function(){result=func.apply(me,args)});void 0!==e&&(isLast||me.endAsync(stepInitData.async),me.failWithException(e,R.get("chainStepEx")))}result||isLast||me.analyzeChainStep(func)||me.fail(R.get("stepFn")+" ["+func.toString()+"] "+R.get("notUsingNext")),result&&me.handleReturnedPromise(result,next,me.formatString("The promise returned from the chain step ["+me.stringifyChainStep(step)+"] did not resolve within {time}ms",{time:me.defaultTimeout})),isLast&&(me.endAsync(stepInitData.async),step.desc&&me.pass(step.desc))}else if("String"==me.typeOf(step)){new Siesta.Test.Action.Eval({actionString:step,next:initStep(!1).next,test:me}).process()}else{Siesta.Test.ActionRegistry().create(step,me,args,initStep).process()}}})}),queue.run()}},chainForArray:function(array,generator,callback,reverse){var me=this,steps=[];Joose.A[reverse?"eachR":"each"](array,function(el,index){var res=generator.call(me,el,index);"Array"==me.typeOf(res)?steps.push.apply(steps,res):res&&steps.push(res)}),callback&&steps.push(function(){me.processCallbackFromTest(callback)}),this.chain(steps)},verifyExpectedNumber:function(actual,expected){var operator="==";if("String"==this.typeOf(expected)){var match=/([<>=]=?)\s*(\d+)/.exec(expected),R=Siesta.Resource("Siesta.Test.Browser");if(!match)throw new Error(R.get("wrongFormat")+": "+expected);operator=match[1],expected=Number(match[2])}switch(operator){case"==":return actual==expected;case"<=":return actual<=expected;case">=":return expected<=actual;case"<":return actual<expected;case">":return expected<actual}},getMaximalTimeout:function(){return Math.max(this.waitForTimeout,this.defaultTimeout,this.subTestTimeout,this.timeout||0,this.isReadyTimeout)}},after:{onBeforeTestFinalize:function(){!this.autoCheckGlobals||this.isFailed()||this.parent||this.verifyGlobals()}}}),Role("Siesta.Test.Role.Placeholder",{requires:["equalsTo"]}),Class("Siesta.Test.BDD.Spy",{does:[Siesta.Util.Role.CanGetType],has:{name:null,processor:{lazy:"this.buildProcessor"},hostObject:null,propertyName:null,hasOwnOriginalValue:!1,originalValue:null,strategy:"callThrough",returnValueObj:void 0,fakeFunc:null,throwErrorObj:null,callsLog:Joose.I.Array,calls:null,t:null,and:function(){return this}},methods:{initialize:function(){var me=this;this.calls={any:function(){return 0<me.callsLog.length},count:function(){return me.callsLog.length},argsFor:function(i){return me.callsLog[i].args},allArgs:function(i){return Joose.A.map(me.callsLog,function(call){return call.args})},all:function(){return me.callsLog},mostRecent:function(){return me.callsLog[me.callsLog.length-1]},first:function(){return me.callsLog[0]},reset:function(){me.reset()}};var R=Siesta.Resource("Siesta.Test.BDD.Spy"),hostObject=this.hostObject,propertyName=this.propertyName;if(hostObject){var originalValue=hostObject[propertyName];if(!/Function/.test(this.typeOf(originalValue)))throw R.get("spyingNotOnFunction");originalValue.__SIESTA_SPY__&&originalValue.__SIESTA_SPY__.remove(),this.originalValue=hostObject[propertyName],this.hasOwnOriginalValue=hostObject.hasOwnProperty(propertyName),hostObject[propertyName]=this.getProcessor()}this.t&&this.t.spies.push(this)},buildProcessor:function(){function processor(){var args=Array.prototype.slice.call(arguments),log={object:this,args:args};return me.callsLog.push(log),log.returnValue=me[me.strategy+"Strategy"](this,args)}var me=this;return processor.__SIESTA_SPY__=processor.and=me,processor.calls=me.calls,processor},returnValueStrategy:function(obj,args){return this.returnValueObj},callThroughStrategy:function(obj,args){return this.originalValue.apply(obj,args)},callFakeStrategy:function(obj,args){return this.fakeFunc.apply(obj,args)},throwErrorStrategy:function(obj,args){var error=this.throwErrorObj,ERROR=this.t&&this.t.global?this.t.global.Error:Error;throw error instanceof ERROR||(error=new ERROR(error)),error},callThrough:function(){if(!this.hostObject)throw"Need the host object to call through to original method";return this.strategy="callThrough",this},stub:function(){return this.returnValue(),this},returnValue:function(value){return this.strategy="returnValue",this.returnValueObj=value,this},callFake:function(func){return this.strategy="callFake",this.fakeFunc=func,this},throwError:function(error){return this.strategy="throwError",this.throwErrorObj=error,this},remove:function(){var hostObject=this.hostObject;hostObject&&(this.hasOwnOriginalValue?hostObject[this.propertyName]=this.originalValue:delete hostObject[this.propertyName]),this.originalValue=this.hostObject=hostObject=null,this.callsLog=[],this.returnValueObj=this.fakeFunc=this.throwErrorObj=null;var processor=this.getProcessor();processor&&(processor.and=processor.calls=processor.__SIESTA_SPY__=null),this.processor=null},reset:function(){this.callsLog=[]}}}),Class("Siesta.Test.BDD.Placeholder",{does:Siesta.Test.Role.Placeholder,has:{clsConstructor:{required:!0},t:null,context:null,globals:{init:["String","Boolean","Number","Date","RegExp","Function","Array","Object"]}},methods:{getClassName:function(onlyGlobals){var clsName,clsConstructor=this.getClassConstructor(),context=this.context;return Joose.A.each(this.globals,function(property){if(clsConstructor==context[property])return clsName=property,!1}),onlyGlobals?clsName:clsName||(clsConstructor?clsConstructor+"":"")},getClassConstructor:function(){return this.clsConstructor},equalsTo:function(value){var clsConstructor=this.getClassConstructor();if(!clsConstructor)return!0;if(value instanceof Siesta.Test.BDD.Placeholder){var ownClassName=this.getClassName(!0);return"Object"!=value.getClassName(!0)||"Date"!=ownClassName&&"RegExp"!=ownClassName&&"Function"!=ownClassName&&"Array"!=ownClassName?clsConstructor==value.getClassConstructor():!0}var isEqual=!1,globalCls=this.getClassName(!0);return globalCls&&(isEqual=this.t.typeOf(value)==globalCls||value instanceof this.context[globalCls]),isEqual||value instanceof clsConstructor},toString:function(){return"any "+(this.getClassName()||"value")}}}),Class("Siesta.Test.BDD.NumberPlaceholder",{does:Siesta.Test.Role.Placeholder,has:{value:{required:!0},threshold:null},methods:{initialize:function(){null==this.threshold&&(this.threshold=.05*this.value)},equalsTo:function(value){return Math.abs(value-this.value)<=this.threshold},toString:function(){return"any number approximately equal to "+this.value}}}),Class("Siesta.Test.BDD.StringPlaceholder",{does:[Siesta.Util.Role.CanGetType,Siesta.Test.Role.Placeholder],has:{value:{required:!0}},methods:{equalsTo:function(string){return"RegExp"==this.typeOf(this.value)?this.value.test(string):-1<String(string).indexOf(this.value)},toString:function(){return"RegExp"==this.typeOf(this.value)?"any string matching: "+this.value:"any string containing: "+this.value}}}),Class("Siesta.Test.BDD.Expectation",{does:[Siesta.Util.Role.CanGetType],has:{value:null,isNot:!1,not:null,t:null},methods:{initialize:function(){this.isNot||(this.not=new this.constructor({isNot:!0,t:this.t,value:this.value}))},process:function(passed,config){var isNot=this.isNot;(config=config||{}).not=config.not||isNot?"not ":"",config.got=config.hasOwnProperty("got")?config.got:this.value,config.noGot&&delete config.got;var assertionName=config.assertionName;assertionName&&isNot&&(config.assertionName=assertionName.replace(/^(expect\(.+?\)\.)/,"$1not.")),passed=isNot?!passed:passed,this.t[passed?"pass":"fail"](null,config)},toBe:function(expectedValue){var R=Siesta.Resource("Siesta.Test.BDD.Expectation");this.process(this.t.compareObjects(this.value,expectedValue,!0,!0),{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toBeText")+" {need}",assertionName:"expect(got).toBe(need)",need:expectedValue,needDesc:this.isNot?R.get("needNotText"):R.get("needText")})},toEqual:function(expectedValue){var R=Siesta.Resource("Siesta.Test.BDD.Expectation");this.process(this.t.compareObjects(this.value,expectedValue,!0),{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toBeEqualToText")+" {need}",assertionName:"expect(got).toEqual(need)",need:expectedValue,needDesc:this.isNot?R.get("needNotText"):R.get("needText")})},toBeNull:function(){var R=Siesta.Resource("Siesta.Test.BDD.Expectation");this.process(this.t.compareObjects(this.value,null,!0,!0),{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toBeText")+" null",assertionName:"expect(got).toBeNull()",need:null,needDesc:this.isNot?R.get("needNotText"):R.get("needText")})},toBeNaN:function(){var value=this.value,R=Siesta.Resource("Siesta.Test.BDD.Expectation");this.process("Number"==this.t.typeOf(value)&&value!=value,{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toBeText")+" NaN",assertionName:"expect(got).toBeNaN()",need:NaN,needDesc:this.isNot?R.get("needNotText"):R.get("needText")})},toBeDefined:function(){var R=Siesta.Resource("Siesta.Test.BDD.Expectation");this.process(void 0!==this.value,{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toBeDefinedText"),assertionName:"expect(got).toBeDefined()"})},toBeUndefined:function(value){var R=Siesta.Resource("Siesta.Test.BDD.Expectation");this.process(void 0===this.value,{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toBeUndefinedText"),assertionName:"expect(got).toBeUndefined()"})},toBeTruthy:function(){var R=Siesta.Resource("Siesta.Test.BDD.Expectation");this.process(this.value,{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toBeTruthyText"),assertionName:"expect(got).toBeTruthy()"})},toBeFalsy:function(){var R=Siesta.Resource("Siesta.Test.BDD.Expectation");this.process(!this.value,{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toBeFalsyText"),assertionName:"expect(got).toBeFalsy()"})},toMatch:function(regexp){var R=Siesta.Resource("Siesta.Test.BDD.Expectation");if("RegExp"!=this.t.typeOf(regexp))throw new Error("`expect().toMatch()` matcher expects a regular expression");this.process(new RegExp(regexp).test(this.value),{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toMatchText")+" {need}",assertionName:"expect(got).toMatch(need)",need:regexp,needDesc:this.isNot?R.get("needNotMatchingText"):R.get("needMatchingText")})},toContain:function(element){var value=this.value,t=this.t,R=Siesta.Resource("Siesta.Test.BDD.Expectation"),passed=!1;if("String"==t.typeOf(value))this.process(0<=value.indexOf(element),{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toContainText")+" {need}",assertionName:"expect(got).toContain(need)",need:element,needDesc:this.isNot?R.get("needStringNotContainingText"):R.get("needStringContainingText")});else{value=Array.prototype.slice.call(value);for(var i=0;i<value.length;i++)if(t.compareObjects(element,value[i],!0)){passed=!0;break}this.process(passed,{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toContainText")+" {need}",assertionName:"expect(got).toContain(need)",need:element,needDesc:this.isNot?R.get("needArrayNotContainingText"):R.get("needArrayContainingText")})}},toBeLessThan:function(expectedValue){var R=Siesta.Resource("Siesta.Test.BDD.Expectation");this.process(this.value<expectedValue,{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toBeLessThanText")+" {need}",assertionName:"expect(got).toBeLessThan(need)",need:expectedValue,needDesc:this.isNot?R.get("needGreaterEqualThanText"):R.get("needLessThanText")})},toBeGreaterThan:function(expectedValue){var R=Siesta.Resource("Siesta.Test.BDD.Expectation");this.process(this.value>expectedValue,{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toBeGreaterThanText")+" {need}",assertionName:"expect(got).toBeGreaterThan(need)",need:expectedValue,needDesc:this.isNot?R.get("needLessEqualThanText"):R.get("needGreaterThanText")})},toBeCloseTo:function(expectedValue,precision){precision=null!=precision?precision:2;var threshold=Math.pow(10,-precision)/2,delta=Math.abs(this.value-expectedValue),R=Siesta.Resource("Siesta.Test.BDD.Expectation");this.process(delta<threshold,{descTpl:R.get("expectText")+" {got} {!not}"+R.get("toBeCloseToText")+" {need}",assertionName:"expect(got).toBeCloseTo(need)",need:expectedValue,needDesc:this.isNot?R.get("needValueNotCloseToText"):R.get("needValueCloseToText"),annotation:delta?R.get("thresholdIsText")+threshold:R.get("exactMatchText")})},toThrow:function(){var func=this.value,t=this.t,R=Siesta.Resource("Siesta.Test.BDD.Expectation");if("Function"!=t.typeOf(func))throw new Error("`expect().toMatch()` matcher expects a function");var e=t.getExceptionCatcher()(func);e instanceof t.getTestErrorClass()&&(e=e.message||e.description),this.process(void 0!==e,{descTpl:R.get("expectText")+" function {!not}"+R.get("toThrowText"),assertionName:"expect(func).toThrow()",annotation:e?R.get("thrownExceptionText")+": "+Siesta.Util.Serializer.stringify(e):R.get("noExceptionThrownText"),noGot:!0})},toHaveBeenCalled:function(expectedNumber){expectedNumber=null!=expectedNumber?expectedNumber:">=1";var spy=this.value,t=this.t,R=Siesta.Resource("Siesta.Test.BDD.Expectation");if("Function"==this.typeOf(spy)){if(!spy.__SIESTA_SPY__)throw new Error(R.get("wrongSpy"));spy=spy.__SIESTA_SPY__}if(!(spy instanceof Siesta.Test.BDD.Spy))throw new Error(R.get("wrongSpy"));this.process(t.verifyExpectedNumber(spy.callsLog.length,expectedNumber),{descTpl:R.get("toHaveBeenCalledDescTpl"),assertionName:"expect(func).toHaveBeenCalled()",methodName:spy.propertyName||"[function]",got:spy.callsLog.length,gotDesc:R.get("actualNbrOfCalls"),need:(this.isNot?"not ":"")+expectedNumber,needDesc:R.get("expectedNbrOfCalls")})},toHaveBeenCalledWith:function(){var spy=this.value,t=this.t,R=Siesta.Resource("Siesta.Test.BDD.Expectation");if("Function"==this.typeOf(spy)){if(!spy.__SIESTA_SPY__)throw new Error(R.get("wrongSpy"));spy=spy.__SIESTA_SPY__}if(!(spy instanceof Siesta.Test.BDD.Spy))throw new Error(R.get("wrongSpy"));var args=Array.prototype.slice.call(arguments),foundCallWithMatchingArgs=!1;Joose.A.each(spy.callsLog,function(call){if(t.compareObjects(call.args,args))return!(foundCallWithMatchingArgs=!0)}),this.process(foundCallWithMatchingArgs,{descTpl:R.get("toHaveBeenCalledWithDescTpl"),assertionName:"expect(func).toHaveBeenCalledWith()",methodName:spy.propertyName,noGot:!0})}}}),Role("Siesta.Test.BDD",{requires:["getSubTest","chain"],has:{specType:null,beforeEachHooks:Joose.I.Array,afterEachHooks:Joose.I.Array,sequentialSubTests:Joose.I.Array,codeProcessed:!1,launchTimeout:null,expectationClass:Siesta.Test.BDD.Expectation,failOnExclusiveSpecsWhenAutomated:!1,spies:Joose.I.Array},methods:{checkSpecFunction:function(func,type,name){if(!func)throw new Error(Siesta.Resource("Siesta.Test.BDD","codeBodyMissing")+" "+("describe"==type?"suite":"spec")+" ["+name+"]");if(!func.length)throw new Error(Siesta.Resource("Siesta.Test.BDD","codeBodyOf")+" "+("describe"==type?"suite":"spec")+" ["+name+"] "+Siesta.Resource("Siesta.Test.BDD","missingFirstArg"))},ddescribe:function(name,code,timeout){this.describe(name,code,timeout,!0)},xdescribe:function(){},describe:function(name,code,timeout,isExclusive){this.checkSpecFunction(code,"describe",name);var subTest=this.getSubTest({name:name,run:code,isExclusive:isExclusive,specType:"describe",timeout:timeout});this.codeProcessed&&this.scheduleSpecsLaunch(),this.sequentialSubTests.push(subTest)},iit:function(name,code,timeout){this.project.isAutomated&&this.failOnExclusiveSpecsWhenAutomated&&this.fail(Siesta.Resource("Siesta.Test.BDD","iitFound")),this.it(name,code,timeout,!0)},xit:function(){},it:function(name,code,timeout,isExclusive,isTodo){this.checkSpecFunction(code,"it",name);var subTest=this.getSubTest({name:name,run:code,isExclusive:isExclusive,isTodo:Boolean(isTodo)||this.isTodo,specType:"it",timeout:timeout});this.codeProcessed&&this.scheduleSpecsLaunch(),this.sequentialSubTests.push(subTest)},expect:function(value){return new this.expectationClass({t:this,value:value})},any:function(clsConstructor){return new Siesta.Test.BDD.Placeholder({clsConstructor:clsConstructor,t:this,context:this.global})},anyNumberApprox:function(value,threshold){return new Siesta.Test.BDD.NumberPlaceholder({value:value,threshold:threshold})},anyStringLike:function(value){return new Siesta.Test.BDD.StringPlaceholder({value:value})},scheduleSpecsLaunch:function(){if(!this.launchTimeout){var async=this.beginAsync(),originalSetTimeout=this.originalSetTimeout,me=this;this.launchTimeout=originalSetTimeout(function(){me.endAsync(async),me.launchTimeout=null,me.launchSpecs()},0)}},runBeforeSpecHooks:function(sourceTest,done){function runOwnHooks(done){me.chainForArray(me.beforeEachHooks,function(hook){return function(next){var code=hook.code;if("AsyncFunction"===me.typeOf(code))return code(sourceTest,function(){});hook.isAsync?code(sourceTest,next):(code(sourceTest),next())}},done)}var me=this;this.parent?this.parent.runBeforeSpecHooks(sourceTest,function(){runOwnHooks(done)}):runOwnHooks(done)},runAfterSpecHooks:function(sourceTest,done){var me=this;me.chainForArray(this.afterEachHooks,function(hook){return function(next){var code=hook.code;if("AsyncFunction"===me.typeOf(code))return code(sourceTest,function(){});hook.isAsync?code(sourceTest,next):(code(sourceTest),next())}},function(){me.parent?me.parent.runAfterSpecHooks(sourceTest,done):done()},!0)},launchSpecs:function(){var me=this,sequentialSubTests=this.sequentialSubTests;this.sequentialSubTests=[],this.chain.actionDelay=0;var exclusiveSubTests=[];Joose.A.each(sequentialSubTests,function(subTest){subTest.isExclusive&&exclusiveSubTests.push(subTest)}),this.chainForArray(exclusiveSubTests.length?exclusiveSubTests:sequentialSubTests,function(subTest){return["it"==subTest.specType?function(next){me.runBeforeSpecHooks(subTest,next)}:null,subTest,"it"==subTest.specType?function(next){me.runAfterSpecHooks(subTest,next)}:null]})},beforeEach:function(code,isAsync){this.beforeEachHooks.push({code:code,isAsync:isAsync||2==code.length})},afterEach:function(code,isAsync){this.afterEachHooks.push({code:code,isAsync:isAsync||2==code.length})},spyOn:function(object,propertyName){var R=Siesta.Resource("Siesta.Test.BDD");if(object)return new Siesta.Test.BDD.Spy({name:propertyName,t:this,hostObject:object,propertyName:propertyName});this.warn(R.get("noObject"))},createSpy:function(spyName){return new Siesta.Test.BDD.Spy({name:spyName||"James Bond",t:this}).stub().getProcessor()},createSpyObj:function(spyName,properties){1==arguments.length&&(properties=spyName,spyName=null),spyName=spyName||"spyObject";var me=this,obj={};return Joose.A.each(properties,function(propertyName){obj[propertyName]=me.createSpy(spyName)}),obj}},override:{cleanup:function(){this.beforeEachHooks=this.afterEachHooks=null,this.SUPER()},onTestFinalize:function(){Joose.A.each(this.spies,function(spy){spy.remove()}),this.spies=null,this.SUPER()},afterLaunch:function(){this.codeProcessed=!0,this.launchSpecs(),this.SUPERARG(arguments)}}}),Role("Siesta.Test.Sub",{has:{isExclusive:!1,parent:{required:!0}},methods:{getExceptionCatcher:function(){return this.parent.getExceptionCatcher()},getTestErrorClass:function(){return this.parent.getTestErrorClass()},getStartTestAnchor:function(){return this.parent.getStartTestAnchor()},expectGlobals:function(){return this.parent.expectGlobals.apply(this.parent,arguments)}}}),Class("Siesta.Test",{does:[Siesta.Util.Role.CanFormatStrings,Siesta.Util.Role.CanGetType,Siesta.Util.Role.CanCompareObjects,Siesta.Util.Role.CanEscapeRegExp,Siesta.Test.More,Siesta.Test.Date,Siesta.Test.Function,Siesta.Test.BDD,JooseX.Observable,Siesta.Util.Role.HasUniqueGeneratedId],has:{name:null,uniqueId:function(){var holder=Siesta.Test;return holder.__UNIQUE_ID_GEN__=holder.__UNIQUE_ID_GEN__||0,++holder.__UNIQUE_ID_GEN__},url:{required:!0},urlExtractRegex:{is:"rwc",lazy:function(){return new RegExp(this.url.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")+":(\\d+)")}},referenceUrl:null,assertPlanned:null,assertCount:0,isTodo:!1,results:{lazy:function(){return new Siesta.Result.SubTest({description:this.name||"Root",test:this})}},run:null,startTestAnchor:null,exceptionCatcher:null,testErrorClass:null,generation:function(){return Math.random()},launchId:null,parent:null,project:null,harness:null,isReadyTimeout:1e4,failed:!1,failedException:null,failedExceptionType:null,startDate:null,endDate:null,lastActivityDate:null,contentManager:null,scopeProvider:null,global:null,reusingSandbox:!1,sandboxCleanup:!0,sharedSandboxState:null,scriptScopeProvider:null,transparentEx:!1,needDone:!1,isDone:!1,defaultTimeout:15e3,subTestTimeout:null,timeout:null,timeoutsCount:function(){return{counter:1}},timeoutIds:Joose.I.Object,idsToIndex:Joose.I.Object,waitTitles:Joose.I.Object,processed:!1,finalizationStarted:!1,callback:null,nbrExceptions:0,testEndReported:!1,needToCleanup:!0,overrideSetTimeout:!1,overrideForSetTimeout:null,overrideForClearTimeout:null,originalSetTimeout:null,originalClearTimeout:null,sourceLineForAllAssertions:!1,$passCount:null,$failCount:null,actionableMethods:{lazy:"buildActionableMethods"},jUnitClass:null,groups:null,automationElementId:null,snoozeUntil:null,config:null},methods:{initialize:function(){this.harness=this.project=this.project||this.harness,this.on("teststart",function(event){this.parent&&event.stopPropagation()}),this.on("testfinalize",function(event){this.parent&&event.stopPropagation()}),this.on("teststop",function(event){this.parent&&event.stopPropagation()}),this.on("beforetestfinalize",function(event){this.parent&&event.stopPropagation()}),this.on("beforetestfinalizeearly",function(event){this.parent&&event.stopPropagation()}),this.subTestTimeout=this.subTestTimeout||2*this.defaultTimeout,this.snoozeUntil&&(this.snoozeUntil=new Date(this.snoozeUntil),isNaN(+this.snoozeUntil)&&(this.snoozeUntil=null)),this.snoozeUntil&&new Date<this.snoozeUntil&&(this.isTodo=!0),this.config&&Joose.O.extend(this,this.config)},isReady:function(){var R=Siesta.Resource("Siesta.Test");return this.run=this.run||this.getStartTestAnchor().args&&this.getStartTestAnchor().args[0],{ready:"Function"==this.typeOf(this.run)||"AsyncFunction"==this.typeOf(this.run),reason:R.get("noCodeProvidedToTest")}},isFromTheSameGeneration:function(test2){return this.generation==test2.generation},toString:function(){return this.url},plan:function(value){if(null!=this.assertPlanned)throw new Error("Test plan can't be changed");this.assertPlanned=value},addResult:function(result){var isAssertion=result instanceof Siesta.Result.Assertion;if(isAssertion&&(result.isTodo=this.isTodo),isAssertion&&(this.isDone||this.isFinished())&&!result.isTodo&&!this.testEndReported){this.testEndReported=!0;var R=Siesta.Resource("Siesta.Test");this.fail(R.get("addingAssertionsAfterDone"))}return isAssertion&&!result.index&&(result.index=++this.assertCount),this.getResults().push(result),this.$passCount=this.$failCount=null,this.fireEvent("testupdate",this,result,this.getResults()),this.lastActivityDate=new Date,result},diag:function(desc,callback){this.addResult(new Siesta.Result.Diagnostic({description:String(desc||"")})),callback&&callback()},pass:function(desc,annotation,result){annotation&&"String"!=this.typeOf(annotation)&&(!desc&&annotation.descTpl&&(desc=this.formatString(annotation.descTpl,annotation)),annotation=annotation.annotation),result&&(result.passed=!0,result.description=String(desc||""),result.annotation=annotation),this.addResult(result||new Siesta.Result.Assertion({passed:!0,annotation:String(annotation||""),description:String(desc||""),sourceLine:result&&result.sourceLine||annotation&&annotation.sourceLine||this.sourceLineForAllAssertions&&this.getSourceLine()||null}))},fail:function(desc,annotation,result){var sourceLine=result&&result.sourceLine||annotation&&annotation.sourceLine||this.getSourceLine(),assertionName="";if(annotation&&"String"!=this.typeOf(annotation)){!desc&&annotation.descTpl&&(desc=this.formatString(annotation.descTpl,annotation));var strings=[],params=annotation,hasGot=params.hasOwnProperty("got"),hasNeed=params.hasOwnProperty("need"),gotDesc=params.gotDesc||"Got",needDesc=params.needDesc||"Need";if(assertionName=params.assertionName,annotation=params.annotation,params.ownTextOnly||!assertionName&&!sourceLine||strings.push("Failed assertion "+(assertionName?"`"+assertionName+"` ":"")+this.formatSourceLine(sourceLine)),hasGot&&hasNeed){var max=Math.max(gotDesc.length,needDesc.length);gotDesc=this.appendSpaces(gotDesc,max-gotDesc.length+1),needDesc=this.appendSpaces(needDesc,max-needDesc.length+1)}hasGot&&strings.push(gotDesc+": "+Siesta.Util.Serializer.stringify(params.got)),hasNeed&&strings.push(needDesc+": "+Siesta.Util.Serializer.stringify(params.need)),annotation&&strings.push(annotation),annotation=strings.join("\n")}result&&(result.name=assertionName,result.passed=!1,result.annotation=annotation,result.description=desc),this.addResult(result||new Siesta.Result.Assertion({name:assertionName,passed:!1,sourceLine:sourceLine,annotation:String(annotation||""),description:String(desc||"")})),this.onFailedAssertion()},onFailedAssertion:function(noNeedToExit){this.isTodo||(this.project.debuggerOnFail&&eval("debugger"),this.project.breakOnFail&&!this.__STOPPED__&&(this.__STOPPED__=!0,this.project.stopCurrentLaunch(this),noNeedToExit||this.exit()))},exit:function(desc,annotation){throw 0<arguments.length&&this.fail(desc,annotation),this.finalize(!0),"__SIESTA_TEST_EXIT_EXCEPTION__"},getSource:function(){return this.contentManager.getContentOf(this.url)},getSourceLine:function(){var stack=(new Error).stack;if(!stack)try{throw new Error}catch(e){stack=e.stack}if(stack){var match=stack.match(this.urlExtractRegex());if(match)return match[1]}return null},getStartTestAnchor:function(){return this.startTestAnchor},getExceptionCatcher:function(){return this.exceptionCatcher},getTestErrorClass:function(){return this.testErrorClass},processCallbackFromTest:function(callback,args,scope){var me=this;if(!callback)return!0;if(this.transparentEx)callback.apply(scope||this.global,args||[]);else{var e=this.getExceptionCatcher()(function(){callback.apply(scope||me.global,args||[])});if(e)return this.failWithException(e),!1}return!0},getStackTrace:function(e){if(Object(e)!==e)return null;if(!e.stack)return null;for(var stackLines=(e.stack+"").split("\n"),message=e+"",result=(Siesta.Resource("Siesta.Test"),[]),i=0;i<stackLines.length;i++){var line=stackLines[i];if(line){if(!i){if(line==message){result.push(line);continue}result.push(message)}result.push(line)}}return result.length?result:null},formatSourceLine:function(sourceLine){var R=Siesta.Resource("Siesta.Test");return sourceLine?R.get("atLine")+" "+sourceLine+" "+R.get("of")+" "+this.url:""},appendSpaces:function(str,num){for(var spaces="";num--;)spaces+=" ";return str+spaces},eachAssertion:function(func,scope){scope=scope||this,this.getResults().each(function(result){result instanceof Siesta.Result.Assertion&&func.call(scope,result)})},eachSubTest:function(func,scope){scope=scope||this,this.getResults().each(function(result){if(result instanceof Siesta.Result.SubTest&&!1===func.call(scope,result.test))return!1})},eachChildTest:function(func,scope){scope=scope||this,this.getResults().eachChild(function(result){if(result instanceof Siesta.Result.SubTest&&!1===func.call(scope,result.test))return!1})},ok:function(value,desc){var R=Siesta.Resource("Siesta.Test");value?this.pass(desc,{descTpl:R.get("isTruthy"),value:value}):this.fail(desc,{assertionName:"ok",got:value,annotation:R.get("needTruthy")})},notok:function(){this.notOk.apply(this,arguments)},notOk:function(value,desc){var R=Siesta.Resource("Siesta.Test");value?this.fail(desc,{assertionName:"notOk",got:value,annotation:R.get("needFalsy")}):this.pass(desc,{descTpl:R.get("isFalsy"),value:value})},is:function(got,expected,desc){var R=Siesta.Resource("Siesta.Test");expected&&got instanceof this.global.Date?this.isDateEqual(got,expected,desc):this.compareObjects(got,expected,!1,!0)?this.pass(desc,{descTpl:R.get("isEqualTo"),got:got,expected:expected}):this.fail(desc,{assertionName:"is",got:got,need:expected})},isnot:function(){this.isNot.apply(this,arguments)},isnt:function(){this.isNot.apply(this,arguments)},isNot:function(got,expected,desc){var R=Siesta.Resource("Siesta.Test");this.compareObjects(got,expected,!1,!0)?this.fail(desc,{assertionName:"isnt",got:got,need:expected,needDesc:R.get("needNot")}):this.pass(desc,{descTpl:R.get("isNotEqualTo"),got:got,expected:expected})},exact:function(got,expected,desc){var R=Siesta.Resource("Siesta.Test");this.compareObjects(got,expected,!0,!0)?this.pass(desc,{descTpl:R.get("isStrictlyEqual"),got:got,expected:expected}):this.fail(desc,{assertionName:"isStrict",got:got,need:expected,needDesc:R.get("needStrictly")})},isStrict:function(got,expected,desc){var R=Siesta.Resource("Siesta.Test");this.compareObjects(got,expected,!0,!0)?this.pass(desc,{descTpl:R.get("isStrictlyEqual"),got:got,expected:expected}):this.fail(desc,{assertionName:"isStrict",got:got,need:expected,needDesc:R.get("needStrictly")})},isntStrict:function(){this.isNotStrict.apply(this,arguments)},isNotStrict:function(got,expected,desc){var R=Siesta.Resource("Siesta.Test");this.compareObjects(got,expected,!0,!0)?this.fail(desc,{assertionName:"isntStrict",got:got,need:expected,needDesc:R.get("needStrictlyNot")}):this.pass(desc,{descTpl:R.get("isStrictlyNotEqual"),got:got,expected:expected})},wait:function(title,howLong){var R=Siesta.Resource("Siesta.Test");if(this.waitTitles.hasOwnProperty(title))throw new Error(R.get("alreadyWaiting")+" ["+title+"]");return this.waitTitles[title]=this.beginAsync(howLong)},endWait:function(title){var R=Siesta.Resource("Siesta.Test");if(!this.waitTitles.hasOwnProperty(title))throw new Error(R.get("noOngoingWait")+" ["+title+"]");this.endAsync(this.waitTitles[title]),delete this.waitTitles[title]},beginAsync:function(time,errback){(time=time||this.defaultTimeout)>this.getMaximalTimeout()&&this.fireEvent("maxtimeoutchanged",time);var R=Siesta.Resource("Siesta.Test"),me=this,originalSetTimeout=this.originalSetTimeout,index=this.timeoutsCount.counter++,timeoutId=originalSetTimeout(function(){me.hasAsyncFrame(index)&&(errback&&errback.call(me,me)||me.fail(R.get("noMatchingEndAsync",{time:time})),me.endAsync(index))},time);return this.timeoutIds[index]=timeoutId,index},timeoutIdToIndex:function(id){return"object"==typeof id?id.__index:this.idsToIndex[id]},hasAsyncFrame:function(index){return this.timeoutIds.hasOwnProperty(index)},hasAsyncFrameByTimeoutId:function(id){return this.timeoutIds.hasOwnProperty(this.timeoutIdToIndex(id))},endAsync:function(index){var originalSetTimeout=this.originalSetTimeout,originalClearTimeout=this.originalClearTimeout||this.global.clearTimeout,counter=0,R=Siesta.Resource("Siesta.Test");null==index&&Joose.O.each(this.timeoutIds,function(timeoutId,indx){if(index=indx,counter++)throw new Error(R.get("endAsyncMisuse"))}),originalClearTimeout(this.timeoutIds[index]),delete this.timeoutIds[index];var me=this;this.processed&&!this.isFinished()&&originalSetTimeout(function(){me.finalize()},1)},clearTimeouts:function(){var originalClearTimeout=this.originalClearTimeout;Joose.O.each(this.timeoutIds,function(value,id){originalClearTimeout(value)}),this.timeoutIds={}},processSubTestConfig:function(config){return Joose.O.extend({parent:this,isTodo:this.isTodo,transparentEx:this.transparentEx,waitForTimeout:this.waitForTimeout,waitForPollInterval:this.waitForPollInterval,defaultTimeout:this.defaultTimeout,timeout:this.subTestTimeout,subTestTimeout:this.subTestTimeout,global:this.global,url:this.url,scopeProvider:this.scopeProvider,project:this.project,generation:this.generation,launchId:this.launchId,overrideSetTimeout:this.overrideSetTimeout,originalSetTimeout:this.originalSetTimeout,originalClearTimeout:this.originalClearTimeout,timeoutsCount:this.timeoutsCount,autoCheckGlobals:!1,needToCleanup:!1},config)},getSubTest:function(arg1,arg2,arg3){var config,R=Siesta.Resource("Siesta.Test");2==arguments.length||3==arguments.length?config={name:arg1,run:arg2,timeout:arg3}:1==arguments.length&&"Function"==this.typeOf(arg1)&&(config={name:"Sub test",run:arg1}),null==(config=config||arg1||{}).timeout&&delete config.timeout;var name=config.name;if(!config.run)throw this.failWithException(R.get("codeBodyMissingForSubTest",{name:name})),new Error(R.get("codeBodyMissingForSubTest",{name:name}));if(!config.run.length)throw this.failWithException(R.get("codeBodyMissingTestArg",{name:name})),new Error(R.get("codeBodyMissingTestArg",{name:name}));var constructor=config.meta||this.meta.c,cls=constructor,cfg=this.processSubTestConfig(config);constructor.__WITHSUB__?cls=constructor.__WITHSUB__:this.parent||(cfg.trait=Siesta.Test.Sub);var subTest=new cls(cfg);return this.parent||constructor.__WITHSUB__||(constructor.__WITHSUB__=subTest.meta.c),subTest},launchSubTest:function(subTest,callback){var me=this,R=Siesta.Resource("Siesta.Test"),timeout=subTest.timeout||this.subTestTimeout,async=this.beginAsync(timeout,function(){return me.fail(R.get("failedToFinishWithin",{name:subTest.name?"["+subTest.name+"]":"",timeout:timeout})),me.restoreTimeoutOverrides(),testEndListener.remove(),subTest.finalize(!0),callback&&callback(subTest),!0}),testEndListener=subTest.on("testfinalize",function(){me.endAsync(async),me.restoreTimeoutOverrides(),callback&&callback(subTest)});this.addResult(subTest.getResults()),subTest.start()},todo:function(why,code,callback){"Function"==this.typeOf(why)&&(why=[code,code=why][0]);var todo=this.getSubTest({name:why,run:code,isTodo:!0,transparentEx:!1});this.launchSubTest(todo,callback)},snooze:function(snoozeUntilDate,fn,reason){var R=Siesta.Resource("Siesta.Test"),snoozeDate=new Date(snoozeUntilDate);new Date>snoozeDate?this.it("Unsnoozed",fn,null,!1,!1):this.it(R.get("Snoozed until")+" "+snoozeDate+": "+(reason||""),fn,null,!1,!0)},subTest:function(desc,code,callback,timeout){var subTest=this.getSubTest({name:desc||Siesta.Resource("Siesta.Test","Subtest"),timeout:timeout,run:code});return this.launchSubTest(subTest,callback),subTest},stringifyException:function(e,stackTrace){var stringified=e+"",annotation="string"==typeof stackTrace?stackTrace:(stackTrace||this.getStackTrace(e)||[]).join("\n");return-1==annotation.indexOf(stringified)&&(annotation=stringified+"\n"+annotation),annotation},failWithException:function(e,description,useDoFinalize){var R=Siesta.Resource("Siesta.Test");this.failed=!0,this.failedException=e+"",this.failedExceptionType=this.typeOf(e);var stackTrace=this.getStackTrace(e);this.addResult(new Siesta.Result.Assertion({isException:!0,exceptionType:this.failedExceptionType,passed:!1,description:description||(this.parent?R.get("Subtest")+" `"+this.name+"`":R.get("Test")+" ")+" "+R.get("threwException"),annotation:this.stringifyException(e,stackTrace)})),this.fireEvent("testfailedwithexception",this,e,stackTrace),this.onFailedAssertion(!0),useDoFinalize?this.doFinalize():this.finalize(!0)},restoreTimeoutOverrides:function(){this.overrideSetTimeout&&(this.global.setTimeout=this.overrideForSetTimeout,this.global.clearTimeout=this.overrideForClearTimeout)},start:function(preloadErrors){var me=this,R=Siesta.Resource("Siesta.Test");if(this.startDate)throw R.get("testAlreadyStarted");if(this.startDate=+new Date,this.fireEvent("teststart",this),preloadErrors&&preloadErrors.length)return Joose.A.each(preloadErrors,function(error){if(error.isException)return me.failWithException(error.message,"",!0),!1;me.fail(error.message)}),me.doFinalize(),!0;this.doStart()},doStart:function(){var me=this,R=Siesta.Resource("Siesta.Test");if(me.onTestStart(),me.parent||me.reusingSandbox)me.launch();else{function cont(isReadyError){var hasTimedOut=!1,setupTimeout=setTimeout(function(){hasTimedOut=!0,me.launch(R.get("setupTookTooLong"))},me.isReadyTimeout);me.setup(function(){hasTimedOut||(clearTimeout(setupTimeout),me.launch(isReadyError))},function(setupError){hasTimedOut||(clearTimeout(setupTimeout),me.launch(isReadyError||setupError))})}var errorMessage,readyRes=me.isReady();if(readyRes.ready)cont();else var timeout=setTimeout(function(){clearInterval(interval),cont(errorMessage)},me.isReadyTimeout),interval=setInterval(function(){(readyRes=me.isReady()).ready?(clearInterval(interval),clearTimeout(timeout),cont()):errorMessage=readyRes.reason||errorMessage},100)}},setup:function(callback,errback){callback.call(this)},tearDown:function(callback,errback){callback.call(this)},earlySetup:function(callback,errback){callback.call(this)},cleanupContextBeforeStart:function(){var global=this.global;this.forEachUnexpectedGlobal(function(name){try{delete global[name]}catch(e){}})},clearAsyncFrameGlobally:function(id){for(var topTest=this;topTest.parent;)topTest=topTest.parent;topTest.eachSubTest(function(subTest){if(subTest.hasAsyncFrameByTimeoutId(id))return subTest.overrideForClearTimeout(id),!1})},launch:function(errorMessage){if(errorMessage){var R=Siesta.Resource("Siesta.Test");this.fail(R.get("errorBeforeTestStarted"),{annotation:errorMessage})}var me=this,global=this.global,scopeProvider=this.scopeProvider,originalSetTimeout=this.originalSetTimeout,originalClearTimeout=this.originalClearTimeout,result;this.overrideSetTimeout&&(this.reusingSandbox||this.parent||scopeProvider.runCode("var setTimeout, clearTimeout;"),global.setTimeout=this.overrideForSetTimeout=function(func,delay){var index=me.timeoutsCount.counter++,timeoutId=originalSetTimeout(function(){originalClearTimeout(timeoutId),delete me.timeoutIds[index],me.processed&&!me.isFinished()&&originalSetTimeout(function(){me.finalize()},1),func()},delay);return"object"==typeof timeoutId?timeoutId.__index=index:me.idsToIndex[timeoutId]=index,me.timeoutIds[index]=timeoutId},global.clearTimeout=this.overrideForClearTimeout=function(id){if(null!=id)if(me.hasAsyncFrameByTimeoutId(id)){originalClearTimeout(id);var index=me.timeoutIdToIndex(id);null!=index&&delete me.timeoutIds[index],me.processed&&!me.isFinished()&&originalSetTimeout(function(){me.finalize()},1)}else me.clearAsyncFrameGlobally(id)}),this.needToCleanup&&(scopeProvider.beforeCleanupCallback=function(){me.isFinished()||me.finalize(!0),me.overrideSetTimeout&&(global.setTimeout=originalSetTimeout,global.clearTimeout=originalClearTimeout),originalSetTimeout=originalClearTimeout=null,global=null,me.eachSubTest(function(subTest){subTest.cleanup()})}),this.reusingSandbox&&this.sandboxCleanup&&!this.parent&&this.cleanupContextBeforeStart();var run=this.run,e;this.transparentEx?(me.project.debuggerOnStart&&!me.parent&&eval("debugger"),result=run(me)):e=this.getExceptionCatcher()(function(){me.project.debuggerOnStart&&!me.parent&&eval("debugger"),result=run(me)}),result&&this.handleReturnedPromise(result,null,this.formatString("The promise returned from the sub-test ["+me.name+"] did not resolve within {time}ms",{time:me.defaultTimeout})),this.afterLaunch(e)},handleReturnedPromise:function(promise,callback,message){var global=this.global,Promise=global.Promise||global.Ext&&global.Ext.Promise;if(Promise&&promise instanceof Promise){var me=this,async=this.beginAsync(this.defaultTimeout,function(){return me.fail(message),!0});promise.then(function(value){me.endAsync(async),callback&&callback(value)},function(e){me.endAsync(async),e&&(me.failWithException(e,"Unhandled promise rejection during the test: ["+me.name+"]"),me.transparentEx&&"undefined"!=typeof console&&console.error(e))})}},cleanup:function(){this.overrideForSetTimeout=this.overrideForClearTimeout=null,this.originalSetTimeout=this.originalClearTimeout=null,this.global=this._global=this.run=null,this.exceptionCatcher=this.testErrorClass=null,this.startTestAnchor=null,this.scopeProvider=null,this.purgeListeners()},afterLaunch:function(e){e?this.failWithException(e):this.finalize()},finalize:function(force){var me=this,R=Siesta.Resource("Siesta.Test");if(!me.finalizationStarted&&!me.isFinished())if(me.processed=!0,force&&(me.clearTimeouts(),me.eachChildTest(function(childTest){childTest.finalize(!0)})),Joose.O.isEmpty(me.timeoutIds)){try{if(!me.isDone&&!1===me.doDone(force))return}catch(e){me.fail("Exception during test finalization"+e.stack),"undefined"!=typeof console&&console.log("Exception during test finalization",e.stack)}me.finalizationStarted=!0,me.fireEvent("teststop",me);function finalizationCode(tearDownError){finalizationCodeStarted||(finalizationCodeStarted=!0,tearDownError&&me.fail(tearDownError),me.doFinalize())}var finalizationCodeStarted=!1;if(me.parent||me.reusingSandbox)finalizationCode();else{var originalSetTimeout=me.originalSetTimeout,originalClearTimeout=me.originalClearTimeout,timeout=originalSetTimeout(function(){finalizationCode(R.get("testTearDownTimeout"))},me.isReadyTimeout);try{me.tearDown(function(){originalClearTimeout(timeout),finalizationCode()},function(error){originalClearTimeout(timeout),finalizationCode(error)})}catch(e){finalizationCode(e+"")}}}else!me.__timeoutWarning&&me.overrideSetTimeout&&me.lastActivityDate&&new Date-me.lastActivityDate>2*me.defaultTimeout&&(me.diag(R.get("testStillRunning")),me.warn(R.get("testNotFinalized",{url:me.url})),me.__timeoutWarning=!0)},doFinalize:function(){var me=this;if(!me.endDate){me.endDate=+new Date,me.parent||me.addResult(new Siesta.Result.Summary({isFailed:me.isFailed(),description:me.getSummaryMessage()}));try{me.onTestFinalize()}catch(e){"undefined"!=typeof console&&console.log(e)}me.fireEvent("testfinalize",me),me.fireEvent("testendbubbling",me),me.callback&&me.callback(),me.callback=null}},onBeforeTestFinalize:function(){},onTestFinalize:function(){},onTestStart:function(){},getSummaryMessage:function(lineBreaks){var res=[],passCount=this.getPassCount(),failCount=this.getFailCount(),assertPlanned=this.assertPlanned,total=failCount+passCount;if(res.push("Passed: "+passCount),res.push("Failed: "+failCount),!this.failed)if(null!=assertPlanned)total<assertPlanned&&res.push("Looks like you planned "+assertPlanned+" tests, but ran only "+total),assertPlanned<total&&res.push("Looks like you planned "+assertPlanned+" tests, but ran "+(total-assertPlanned)+" extra tests, "+total+" total."),total!=assertPlanned||failCount||res.push("All tests passed");else{var R=Siesta.Resource("Siesta.Test");this.isDoneCorrectly()||res.push(R.get("missingDoneCall")),this.isDoneCorrectly()&&!failCount&&res.push(R.get("allTestsPassed"))}return lineBreaks?res.join(lineBreaks):res},done:function(delay){var me=this;if(delay){var async=this.beginAsync();(0,this.originalSetTimeout)(function(){me.endAsync(async),me.done()},delay)}else this.doDone(!1),this.processed&&this.finalize()},doDone:function(force){var me=this;if(me.fireEvent("beforetestfinalizeearly",me),!Joose.O.isEmpty(me.timeoutIds)){if(!force)return!1;me.clearTimeouts()}me.onBeforeTestFinalize(),me.fireEvent("beforetestfinalize",me),this.isDone=!0},isDoneCorrectly:function(){return!this.needDone||this.isDone},getAssertionCount:function(excludeTodo){var count=0;return this.eachAssertion(function(assertion){excludeTodo&&assertion.isTodo||count++}),count},getPassCount:function(includeTodo){if(null!=this.$passCount&&!includeTodo)return this.$passCount;var passCount=0;return this.eachAssertion(function(assertion){!assertion.passed||!includeTodo&&assertion.isTodo||passCount++}),includeTodo?passCount:this.$passCount=passCount},getTodoPassCount:function(){var todoCount=0;return this.eachAssertion(function(assertion){assertion.isTodo&&assertion.passed&&todoCount++}),todoCount},getTodoFailCount:function(){var todoCount=0;return this.eachAssertion(function(assertion){assertion.isTodo&&!assertion.passed&&todoCount++}),todoCount},getFailCount:function(includeTodo){if(null!=this.$failCount&&!includeTodo)return this.$failCount;var failCount=0;return this.eachAssertion(function(assertion){assertion.passed||!includeTodo&&assertion.isTodo||failCount++}),includeTodo?failCount:this.$failCount=failCount},getFailedAssertions:function(){var failed=[];return this.eachAssertion(function(assertion){assertion.isPassed()||failed.push(assertion)}),failed},isPassed:function(){var passCount=this.getPassCount(),failCount=this.getFailCount(),assertPlanned=this.assertPlanned;return this.isFinished()&&(!this.failed||this.isTodo)&&!failCount&&(null!=assertPlanned&&passCount==assertPlanned||null==assertPlanned&&this.isDoneCorrectly())},isFailed:function(){var passCount=this.getPassCount(),failCount=this.getFailCount(),assertPlanned=this.assertPlanned;return this.failed||failCount||this.isFinished()&&(null!=assertPlanned&&passCount!=assertPlanned||null==assertPlanned&&!this.isDoneCorrectly())},isFailedWithException:function(){return this.failed},isStarted:function(){return null!=this.startDate},isFinished:function(){return null!=this.endDate},getDuration:function(){return this.endDate-this.startDate},getBubbleTarget:function(){return this.parent||this.project},warn:function(message){this.addResult(new Siesta.Result.Diagnostic({description:message,isWarning:!0}))},flattenArray:function(array,stripEmpty){var me=this,result=[];return Joose.A.each(array,function(el){"Array"==me.typeOf(el)?result.push.apply(result,me.flattenArray(el,stripEmpty)):stripEmpty&&!el||result.push(el)}),result},trimString:function(string){return String(string).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},buildActionableMethods:function(){var methods={};return this.meta.getMethods().each(function(method,name){methods[name.toLowerCase()]=name}),methods},getJUnitClass:function(){return this.jUnitClass||this.meta.name||"Siesta.Test"},resource:function(){return Siesta.Resource.apply(Siesta.Resource,arguments)},getRootTest:function(){for(var root=this;root.parent;)root=root.parent;return root},onException:function(){}}}),Singleton("Siesta.Test.ActionRegistry",{has:{actionClasses:Joose.I.Object},methods:{registerAction:function(name,constructor){this.actionClasses[name.toLowerCase()]=constructor},getActionClass:function(name){return this.actionClasses[name.toLowerCase()]},create:function(obj,test,defaultArgs,initStep){if(obj!==Object(obj))throw"Action configuration should be an Object instance";if(!(obj=Joose.O.copy(obj)).action){var actionClasses=this.actionClasses,methods={};test&&(methods=test.getActionableMethods()),Joose.O.eachOwn(obj,function(value,key){var shortcut=key.toLowerCase();if(actionClasses[shortcut]){switch(obj.action=shortcut){case"setvalue":case"waitfor":break;case"type":obj.text=value;break;default:obj.target=value}return!1}if(methods[shortcut])return shortcut.match(/^waitFor/i)?(obj.action="wait",obj.waitFor=methods[shortcut]):(obj.action="methodCall",obj.methodName=methods[shortcut]),obj.args=value||[],!1})}if(!obj.action)throw"Need to include `action` property or shortcut property in the step config: "+Siesta.Util.Serializer.stringify(obj,2);"wait"!=obj.action&&"waitfor"!=obj.action&&"delay"!=obj.action&&"methodCall"!=obj.action&&!obj.args&&defaultArgs&&(obj.args=defaultArgs);var actionClass=this.getActionClass(obj.action);return obj.next&&!initStep||(obj.next=initStep(actionClass.prototype.hasOwnAsyncFrame).next),obj.test&&!test||(obj.test=test),new actionClass(obj)}}}),Class("Siesta.Test.Action",{has:{args:null,desc:null,test:{required:!0},next:{required:!0},requiredTestMethod:null},methods:{initialize:function(){var requiredTestMethod=this.requiredTestMethod;if(requiredTestMethod&&!this.test[requiredTestMethod])throw new Error(Siesta.Resource("Siesta.Test.Action","missingTestAction").replace("{0}",this.meta.name).replace("{1}",requiredTestMethod))},process:function(){this.next()}}}),Class("Siesta.Test.Action.Done",{isa:Siesta.Test.Action,has:{delay:null},methods:{process:function(){this.test.done(this.delay),this.next()}}}),Siesta.Test.ActionRegistry().registerAction("done",Siesta.Test.Action.Done),Class("Siesta.Test.Action.Wait",{isa:Siesta.Test.Action,has:{delay:1e3,timeout:null,interval:null,args:Joose.I.Array,waitFor:null,trigger:null,hasOwnAsyncFrame:!0,description:""},methods:{process:function(){var waitFor=this.waitFor,test=this.test;"Number"!==test.typeOf(waitFor)&&"Function"!==test.typeOf(waitFor)||(this.args=[waitFor],waitFor=""),null==waitFor&&(this.args=[this.delay],waitFor=""),"Function"===test.typeOf(this.args)&&"waitForFn"!=waitFor&&(this.args=this.args.call(test,this)),"Array"!==test.typeOf(this.args)&&(this.args=[this.args]),waitFor=waitFor.replace(/^waitFor/,"");var methodName="waitFor"+Joose.S.uppercaseFirst(waitFor);if(!test[methodName])throw Siesta.Resource("Siesta.Test.Action.Wait","missingMethodText")+methodName;"waitFor"==methodName?test.waitFor({method:this.args[0],callback:this.next,scope:test,timeout:this.timeout||test.waitForTimeout,interval:this.interval,description:this.description||this.desc||""}):test[methodName].apply(test,this.args.concat(this.next,test,this.timeout||test.waitForTimeout));var trigger=this.trigger;trigger&&("Function"==test.typeOf(trigger)?trigger.call(test,test):(trigger instanceof Siesta.Test.Action||(trigger.next=function(){},trigger.test=this.test,trigger=Siesta.Test.ActionRegistry().create(trigger,test)),trigger.process()))}}}),Joose.A.each(["wait","waitFor","delay"],function(name){Siesta.Test.ActionRegistry().registerAction(name,Siesta.Test.Action.Wait)}),Class("Siesta.Test.Action.Eval",{isa:Siesta.Test.Action,has:{actionString:null},methods:{process:function(){var test=this.test,parsed=this.parseActionString(this.actionString);if(parsed.error)return test.fail(parsed.error),void this.next();var methodName=parsed.methodName;if(!methodName||"Function"!=test.typeOf(test[methodName]))return test.fail(Siesta.Resource("Siesta.Test.Action.Eval","invalidMethodNameText")+methodName),void this.next();parsed.params.push(this.next),test[methodName].apply(test,parsed.params)},parseActionString:function(actionString){var match=/^\s*(.+?)\(\s*(.*)\s*\)\s*$/.exec(actionString);if(!match)return{error:Siesta.Resource("Siesta.Test.Action.Eval","wrongFormatText")+actionString};var methodName=match[1].replace(/^t\./,"");try{var params=JSON.parse("["+match[2]+"]")}catch(e){return{error:Siesta.Resource("Siesta.Test.Action.Eval","parseErrorText")+match[2]}}return{methodName:methodName,params:params}}}}),Class("Siesta.Test.Action.MethodCall",{isa:Siesta.Test.Action,has:{methodName:null,args:null,callbackIndex:null},methods:{process:function(){var test=this.test,methodName=this.methodName,args=this.args;"Function"==test.typeOf(args)&&(args=args.call(test,this)),args="Array"==test.typeOf(args)?args.slice():[args],null!=this.callbackIndex?args.splice(this.callbackIndex,0,this.next):args.push(this.next),test[methodName].apply(test,args)}}}),Siesta.Test.ActionRegistry().registerAction("methodCall",Siesta.Test.Action.MethodCall),Class("Siesta.Util.TreeStoreFilterer",{has:{idProp:{required:!0},childNodesProp:{required:!0},parentNodeProp:{required:!0},isLeaf:{required:!0}},does:[Siesta.Util.Role.CanEscapeRegExp],methods:{parseFilterValue:function(filterValue){var parts=filterValue.split(/\s*\>\s*/),groupFilter=1<parts.length?parts[0]:"",leafFilter=1<parts.length?parts[1]:parts[0];return{testFilterRegexps:this.splitTermByPipe(leafFilter),groupFilterRegexps:groupFilter?this.splitTermByPipe(groupFilter):null}},checkCommonFilter:function(node,getTitle,testFilterRegexps,groupFilterRegexps){if(groupFilterRegexps){for(var currentNode=node,isInGroup=!1;currentNode&&currentNode[this.parentNodeProp];){var parent=currentNode[this.parentNodeProp];if(this.matchAnyOfRegExps(getTitle(parent),groupFilterRegexps)){isInGroup=!0;break}currentNode=parent}if(!isInGroup)return!1}return!!this.matchAnyOfRegExps(getTitle(node),testFilterRegexps)||!testFilterRegexps.length},splitTermByPipe:function(term){for(var parts=term.split(/\s*\|\s*/),regexps=[],me=this,i=0;i<parts.length;i++)parts[i]&&regexps.push(Joose.A.map(parts[i].split(/\s+/),function(token){return new RegExp(me.escapeRegExp(token),"i")}));return regexps},matchAnyOfRegExps:function(string,regexps){for(var p=0;p<regexps.length;p++){for(var groupMatch=!0,len=regexps[p].length,i=0;i<len;i++)if(!regexps[p][i].test(string)){groupMatch=!1;break}if(groupMatch)return!0}return!1},collectNodes:function(root,params){var filter=params.filter,scope=params.scope||this,shallowScan=params.shallow,checkParents=params.checkParents||shallowScan,fullMatchingParents=params.fullMatchingParents,onlyParents=params.onlyParents||fullMatchingParents;if(onlyParents&&checkParents)throw new Error("Can't combine `onlyParents` and `checkParents` options");function includeNodeInResults(node){visibleNodes[node[idProp]]=!0;for(var parent=node[parentNodeProp];parent&&!visibleNodes[parent[idProp]];)visibleNodes[parent[idProp]]=!0,parent=parent[parentNodeProp]}var idProp=this.idProp,parentNodeProp=this.parentNodeProp,childNodesProp=this.childNodesProp,isLeaf=this.isLeaf,rootVisible=params.rootVisible,visibleNodes={},cascadeNode=function(node,func){func(node);for(var childNodes=node[childNodesProp],length=childNodes.length,k=0;k<length;k++)isLeaf(node)?func(node):cascadeNode(childNodes[k],func)};rootVisible&&(visibleNodes[root[idProp]]=!0);var collectNodes=function(node){var nodeMatches,childNodes,length,k;if(!node.hidden)if(isLeaf(node))filter.call(scope,node,visibleNodes)&&includeNodeInResults(node);else if(onlyParents){if((nodeMatches=filter.call(scope,node))&&(includeNodeInResults(node),fullMatchingParents))return void cascadeNode(node,function(currentNode){visibleNodes[currentNode[idProp]]=!0});for(length=(childNodes=node[childNodesProp]).length,k=0;k<length;k++)nodeMatches&&isLeaf(childNodes[k])?visibleNodes[childNodes[k][idProp]]=!0:isLeaf(childNodes[k])||collectNodes(childNodes[k])}else if(checkParents&&(nodeMatches=filter.call(scope,node,visibleNodes))&&includeNodeInResults(node),!checkParents||!shallowScan||shallowScan&&(nodeMatches||node==root&&!rootVisible))for(length=(childNodes=node[childNodesProp]).length,k=0;k<length;k++)collectNodes(childNodes[k])};return collectNodes(root),visibleNodes}}}),Role("Siesta.Util.Role.CanDetectES6",{has:{supportsArrowFunctions:function(){return this.canEvaluate("x => x")}},methods:{canEvaluate:function(str){try{return eval(str),!0}catch(e){return!1}}}}),Class("Siesta.Project",{does:[JooseX.Observable,Siesta.Util.Role.CanGetType,Siesta.Util.Role.CanDetectES6],has:{title:null,desc:null,testClass:Siesta.Test,contentManagerClass:Siesta.Content.Manager,descriptors:Joose.I.Array,descriptorsById:Joose.I.Object,launchCounter:0,launches:Joose.I.Object,scopesByURL:Joose.I.Object,testsByURL:Joose.I.Object,transparentEx:!1,scopeProviderConfig:null,scopeProvider:null,runCore:"parallel",maxThreads:4,autoCheckGlobals:!1,disableGlobalsCheck:!1,expectedGlobals:Joose.I.Array,cleanScopeGlobals:Joose.I.Array,preload:Joose.I.Array,cachePreload:!1,mainPreset:null,emptyPreset:null,keepNLastResults:2,lastResultsURLs:Joose.I.Array,lastResultsByURL:Joose.I.Object,breakOnFail:!1,overrideSetTimeout:!1,needDone:!1,increaseTimeoutThreshold:8,startDate:null,endDate:null,waitForTimeout:1e4,defaultTimeout:15e3,subTestTimeout:null,isReadyTimeout:1e4,pauseBetweenTests:10,failOnExclusiveSpecsWhenAutomated:!1,snooze:null,referenceUrl:null,suppressPassedWaitForAssertion:!1,isEcmaModule:null,setupDone:!1,sourceLineForAllAssertions:!1,currentLaunchId:null,isAutomated:!1,autoLaunchTests:!0,configSynonyms:function(){return this.processConfigSynonyms(this.buildConfigSynonyms())},uniqueCounter:0,valueToHashIndicies:Joose.I.Object,sandboxHashStructure:{lazy:"this.buildSandboxHashStructure"},sandbox:!0,sandboxBoundaryByGroup:!0,sandboxCleanup:!0,debuggerOnFail:!1,debuggerOnStart:!1},methods:{initialize:function(){var me=this;me.on("testupdate",function(event,test,result,parentResult){me.onTestUpdate(test,result,parentResult)}),me.on("testfailedwithexception",function(event,test,exception,stack){me.onTestFail(test,exception,stack)}),me.on("teststart",function(event,test){me.onTestStart(test)}),me.on("testfinalize",function(event,test){me.onTestEnd(test)})},buildConfigSynonyms:function(){return{}},processConfigSynonyms:function(synonyms){var result={};return Joose.O.each(synonyms,function(synonymsList,mainName){synonymsList instanceof Array?synonymsList.unshift(mainName):synonymsList=[mainName,synonymsList],Joose.A.each(synonymsList,function(synonym){result[synonym]=synonymsList})}),result},onTestUpdate:function(test,result,parentResult){},onTestFail:function(test,exception,stack){},onTestStart:function(test){},onTestEnd:function(test){},onTestSuiteStart:function(descriptors,contentManager,launchState){this.startDate=new Date,this.fireEvent("testsuitestart",this,launchState)},onTestSuiteEnd:function(descriptors,contentManager,launchState){this.endDate=new Date,this.fireEvent("testsuiteend",this,launchState)},onBeforeScopePreload:function(scopeProvider,url){this.fireEvent("beforescopepreload",scopeProvider,url)},onAfterScopePreload:function(scopeProvider,url){this.fireEvent("afterscopepreload",scopeProvider,url)},onCachingError:function(descriptors,contentManager){},configure:function(config){Joose.O.copy(config,this);var me=this;config.listeners&&Joose.O.each(config.listeners,function(value,name){"scope"!=name&&me.on(name,value,config.scope||me)})},processPreloadArray:function(preload){var me=this;return preload=this.flattenArray(preload,!0),Joose.A.each(preload,function(obj,index){Object(obj)===obj?obj.url&&(obj.url=me.normalizeURL(obj.url)):preload[index]=me.normalizeURL(obj)}),preload},populateCleanScopeGlobals:function(scopeProvider,callback){var scopeProviderClass=eval(scopeProvider),cleanScope=new scopeProviderClass,cleanScopeGlobals=this.cleanScopeGlobals;cleanScope.setup(function(){for(var name in cleanScope.scope)cleanScopeGlobals.push(name);callback(),setTimeout(function(){cleanScope.cleanup()},0)})},startSingle:function(desc,callback){var me=this;this.__counter__=this.__counter__||0;function startSingle(){me.launch([me.normalizeDescriptor(desc,me,me.__counter__++)],callback)}me.setupDone?startSingle():this.setup(startSingle)},setup:function(callback){this.mainPreset=new Siesta.Content.Preset({preload:this.processPreloadArray(this.preload)}),this.emptyPreset=new Siesta.Content.Preset,this.descriptors.push({isSystemDescriptor:!0,url:"/"}),this.normalizeDescriptors(this.descriptors),this.populateCleanScopeGlobals(this.scopeProvider,callback)},plan:function(){var descriptors=this.flattenArray(arguments);this.descriptors.push.apply(this.descriptors,descriptors)},start:function(){var me=Siesta.my.activeHarness=this;me.plan(this.flattenArray(arguments)),this.setup(function(){me.setupDone=!0,me.fireEvent("setupdone"),me.autoLaunchTests&&me.launch(me.descriptors)})},startFromUrl:function(url){var contentManager=new this.contentManagerClass({project:this,presets:[new Siesta.Content.Preset({preload:[url]})]}),me=this;contentManager.cache(function(){var content=contentManager.getContentOf(url);try{var descriptors=JSON.parse(content)}catch(e){return void alert("The content of: "+url+" is not a valid JSON")}"Array"==me.typeOf(descriptors)?me.start(descriptors):alert("The content of: "+url+" is not an array")},function(){alert("Can not load the content of: "+url)})},normalizeDescriptors:function(descArray){var me=this,descriptors=[];Joose.A.each(descArray,function(desc,index){desc&&descriptors.push(me.normalizeDescriptor(desc,me,index))}),me.descriptors=descriptors},launch:function(descriptors,callback,errback){var launchId=this.currentLaunchId=++this.launchCounter,me=this,flattenDescriptors=this.flattenDescriptors(descriptors),testScriptsPreset=new Siesta.Content.Preset,presets=[testScriptsPreset,this.mainPreset],notLaunchedByAutomationId={};Joose.A.each(flattenDescriptors,function(desc){desc.preset!=me.mainPreset&&desc.preset!=me.emptyPreset&&presets.push(desc.preset),desc.testCode||testScriptsPreset.addResource(desc.url),me.deleteTestByURL(desc.url),notLaunchedByAutomationId[desc.automationElementId]=1});var contentManager=new this.contentManagerClass({project:this,presets:[testScriptsPreset].concat(this.cachePreload?presets:[])}),launchState=this.launches[launchId]={launchId:launchId,increaseTimeout:"parallel"==this.runCore&&flattenDescriptors.length>this.increaseTimeoutThreshold,descriptors:flattenDescriptors,contentManager:contentManager,needToStop:!1,notLaunchedByAutomationId:notLaunchedByAutomationId};me.onTestSuiteStart(descriptors,contentManager,launchState),contentManager.cache(function(){Joose.A.each(flattenDescriptors,function(desc){var url=desc.url;if(contentManager.hasContentOf(url)){var testConfig=desc.testConfig=Siesta.getConfigForTestScript(contentManager.getContentOf(url));testConfig&&(testConfig.preload||testConfig.alsoPreload)&&(desc.preset=me.getDescriptorPreset(desc))}else desc.testCode||me.markMissingFile(desc);me.normalizeScopeProvider(desc)}),me.fireEvent("testsuitelaunch",descriptors,contentManager,launchState),me.runCoreGeneral(flattenDescriptors,contentManager,launchState,launchState.callback=function(){me.onTestSuiteEnd(descriptors,contentManager,launchState),callback&&callback(descriptors),launchState.needToStop=!0,delete me.launches[launchId]})},function(){},!0)},markMissingFile:function(desc){desc.isMissing=!0},flattenDescriptors:function(descriptors,includeFolders){var flatten=[],me=this;return Joose.A.each(descriptors,function(descriptor){descriptor.group?(includeFolders&&flatten.push(descriptor),flatten.push.apply(flatten,me.flattenDescriptors(descriptor.items,includeFolders))):descriptor.isSystemDescriptor||flatten.push(descriptor)}),flatten},forEachDescriptor:function(descriptors,includeFolders,func,scope){var me=this;return Joose.A.each(descriptors,function(descriptor){return descriptor.group?(!includeFolders||!1!==func.call(scope||me,descriptor))&&me.forEachDescriptor(descriptor.items,includeFolders,func,scope):!(!descriptor.isSystemDescriptor&&!1===func.call(scope||me,descriptor))&&void 0})},lookUpValueInDescriptorTree:function(descriptor,configName,doNotLookAtRoot){if(this.descriptorHasOwnValueFor(descriptor,configName))return this.getConfigValueFromDescriptor(descriptor,configName);var parent=descriptor.parent;return parent?parent==this?doNotLookAtRoot?void 0:this.getConfigValueFromDescriptor(this,configName):this.lookUpValueInDescriptorTree(parent,configName,doNotLookAtRoot):void 0},descriptorHasOwnValueFor:function(descriptor,configName){var testConfig=descriptor.testConfig;if(testConfig&&testConfig.hasOwnProperty(configName)||descriptor.hasOwnProperty(configName))return!0;var synonymList=this.configSynonyms[configName],result=!1;return synonymList&&Joose.A.each(synonymList,function(synonym){if(synonym!=configName&&(testConfig&&testConfig.hasOwnProperty(synonym)||descriptor.hasOwnProperty(synonym)))return!(result=!0)}),result},getConfigValueFromDescriptor:function(descriptor,configName,allowInherited){if(descriptor==this){var foundOwnValue,synonymList=this.configSynonyms[configName]||[configName];return Joose.A.each(synonymList,function(synonym){if(descriptor.hasOwnProperty(synonym))return result=descriptor[synonym],!(foundOwnValue=!0)}),foundOwnValue?result:this[configName]}var result,testConfig=descriptor.testConfig;return testConfig&&testConfig.hasOwnProperty(configName)?testConfig[configName]:descriptor.hasOwnProperty(configName)?descriptor[configName]:((synonymList=this.configSynonyms[configName])&&Joose.A.each(synonymList,function(synonym){if(synonym!=configName&&(testConfig&&testConfig.hasOwnProperty(synonym)||descriptor.hasOwnProperty(synonym)))return result=testConfig&&testConfig.hasOwnProperty(synonym)?testConfig[synonym]:descriptor[synonym],!1}),result)},getDescriptorConfig:function(descriptor,configName,doNotLookAtRoot){return this.lookUpValueInDescriptorTree(descriptor,configName,doNotLookAtRoot)},getDescriptorPreset:function(desc){var preload=this.getDescriptorConfig(desc,"preload",!0),alsoPreload=this.getDescriptorConfig(desc,"alsoPreload",!0);if(preload||alsoPreload){var totalPreload=(preload||this.preload||[]).concat(alsoPreload||[]);return totalPreload.length?new Siesta.Content.Preset({preload:this.processPreloadArray(totalPreload)}):this.emptyPreset}return this.mainPreset},normalizeScopeProvider:function(desc){var match,scopeProvider=this.getDescriptorConfig(desc,"scopeProvider");scopeProvider=scopeProvider&&((match=/^=(.+)/.exec(scopeProvider))?match[1]:scopeProvider.replace(/^(Scope\.Provider\.)?/,"Scope.Provider."));desc.scopeProvider=scopeProvider,desc.scopeProviderConfig=this.getDescriptorConfig(desc,"scopeProviderConfig")},normalizeDescriptor:function(desc,parent,index,level){if(desc.normalized)return desc;"string"==typeof desc&&(desc={url:desc}),level=level||0;var me=this;if(desc.parent=parent,desc.group){desc.id=parent==this?"testFolder-"+level+"-"+index:parent.id+"/"+level+"-"+index;var items=[];Joose.A.each(desc.items||[],function(subDesc,index){subDesc&&items.push(me.normalizeDescriptor(subDesc,desc,index,level+1))}),desc.items=items}else desc.id=desc.url,desc.preset=this.getDescriptorPreset(desc),desc.name=desc.name||desc.url.replace(/(?:.*\/)?([^/]+)$/,"$1");return(this.descriptorsById[desc.id]=desc).normalized=!0,desc},runCoreGeneral:function(descriptors,contentManager,launchState,callback){var runCoreMethod="runCore"+Joose.S.uppercaseFirst(this.runCore);if("function"!=typeof this[runCoreMethod])throw new Error("Invalid `runCore` specified: ["+this.runCore+"]");this[runCoreMethod](descriptors,contentManager,launchState,callback)},runCoreParallel:function(descriptors,contentManager,launchState,callback){var me=this,processedNum=0,count=descriptors.length;count||callback();function doProcessURL(desc){me.processURL(desc,desc.index,contentManager,launchState,function(){processedNum++,launchState.needToStop?hasExited||(hasExited=!0,callback()):processedNum==count?callback():launchThread(descriptors)})}for(var hasExited=!1,hasLaunchedAllThreads=!1,launchThread=function(descriptors){var desc=descriptors.shift();desc&&(hasLaunchedAllThreads?setTimeout(function(){doProcessURL(desc)},me.pauseBetweenTests):doProcessURL(desc))},i=1;i<=this.maxThreads;i++)launchThread(descriptors);hasLaunchedAllThreads=!0},runCoreSequential:function(descriptors,contentManager,launchState,callback){if(descriptors.length&&!launchState.needToStop){var desc=descriptors.shift(),me=this;this.processURL(desc,desc.index,contentManager,launchState,function(){descriptors.length&&!launchState.needToStop?setTimeout(function(){me.runCoreSequential(descriptors,contentManager,launchState,callback)},me.pauseBetweenTests):callback()})}else callback()},stopCurrentLaunch:function(sourceTest){var launchState=this.launches[sourceTest?sourceTest.launchId:this.currentLaunchId];if(launchState&&!launchState.needToStop){launchState.needToStop=!0;var me=this;return Joose.A.each(launchState.descriptors,function(desc){var test=me.testsByURL[desc.url];if(test)try{test.finalize(!0)}catch(e){}}),!0}},getSeedingCode:function(desc,launchId){return";("+function(descId,launchId){StartTest=startTest=function(){arguments.callee.args=arguments},describe=function(){if(describe.called)throw new Error("`describe()` used as global function instead of test method `t.describe()`");describe.called=!0,StartTest.apply(this,arguments)},StartTest.launchId=launchId,StartTest.id=descId,StartTest.exceptionCatcher=function(func){var ex;try{func()}catch(e){ex=e}return"__SIESTA_TEST_EXIT_EXCEPTION__"==ex?void 0:ex},StartTest.testErrorClass=Error}.toString()+")("+JSON.stringify(desc.id)+", "+launchId+")"},getScopeProviderConfigFor:function(desc,launchId){var config=Joose.O.copy(desc.scopeProviderConfig||{});return config.seedingCode=this.getSeedingCode(desc,launchId),config.launchId=launchId,config},keepTestResult:function(url){if(this.lastResultsByURL[url]){var indexOf=-1;return Joose.A.each(this.lastResultsURLs,function(resultUrl,i){if(resultUrl==url)return indexOf=i,!1}),this.lastResultsURLs.splice(indexOf,1),void this.lastResultsURLs.push(url)}this.lastResultsURLs.push(url),this.lastResultsByURL[url]=!0,this.lastResultsURLs.length>this.keepNLastResults&&this.releaseTestResult()},releaseTestResult:function(){if(!(this.lastResultsURLs.length<=this.keepNLastResults)){var url=this.lastResultsURLs.shift();delete this.lastResultsByURL[url];var test=this.getTestByURL(url);test&&test.isFinished()&&this.cleanupScopeForURL(url)}},isKeepingResultForURL:function(url){return this.lastResultsByURL[url]},setupScope:function(desc,launchId){var url=desc.url,alreadyExisting=this.scopesByURL[url],isOutdatedRequest=alreadyExisting&&alreadyExisting.launchId>launchId,scopeProviderClass=eval(desc.scopeProvider),newProvider=new scopeProviderClass(this.getScopeProviderConfigFor(desc,launchId));return isOutdatedRequest?newProvider:(this.cleanupScopeForURL(url),this.keepTestResult(url),this.scopesByURL[url]=newProvider)},cleanupScopeForURL:function(url){var scopeProvider=this.scopesByURL[url];scopeProvider&&(delete this.scopesByURL[url],scopeProvider.cleanup())},prepareScopeSeeding:function(scopeProvider,desc,contentManager){var isEcmaModule=this.getDescriptorConfig(desc,"isEcmaModule");desc.testCode||this.cachePreload&&contentManager.hasContentOf(desc.url)?scopeProvider.addPreload({type:"js",content:desc.testCode||contentManager.getContentOf(desc.url)+"\n//# sourceURL="+desc.url,isEcmaModule:isEcmaModule}):(scopeProvider.seedingScript=this.resolveURL(desc.url,scopeProvider,desc),scopeProvider.seedingScriptIsEcmaModule=isEcmaModule)},normalizeURL:function(url){return url},resolveURL:function(url,scopeProvider,desc){return url},canUseCachedContent:function(resource,desc){return this.cachePreload&&resource instanceof Siesta.Content.Resource.JavaScript},addCachedResourceToPreloads:function(scopeProvider,contentManager,resource,desc){scopeProvider.addPreload({type:"js",content:contentManager.getContentOf(resource)})},getOnErrorHandler:function(testHolder,preloadErrors){var R=Siesta.Resource("Siesta.Project");return function(msg,url,lineNumber,col,error,promiseRejectionEvent){var test=testHolder.test;if(promiseRejectionEvent&&(msg=promiseRejectionEvent.reason||"",url=lineNumber=col="",error=test.global&&promiseRejectionEvent.reason instanceof test.global.Error?promiseRejectionEvent.reason:null),1===arguments.length){var event=msg;if(error=event.error,event.target&&event.target.tagName&&!error)return msg=R.get("resourceFailedToLoad",{nodeName:event.target?event.target.nodeName.toUpperCase():""}),url=event.srcElement?event.srcElement.href||event.srcElement.src:"",lineNumber="",void test.fail(msg+" "+(event.target?event.target.outerHTML:url));msg=event.message,url="",lineNumber=0}/__SIESTA_TEST_EXIT_EXCEPTION__|ResizeObserver loop limit exceeded/.test(msg)||test&&!0===test.onException(msg,url,lineNumber,col,error)||(test&&test.isStarted()?(test.nbrExceptions++,test.failWithException(error||msg+" "+url+" "+lineNumber,promiseRejectionEvent?"Unhandled promise rejection in test "+(test.name||test.url):null)):preloadErrors&&preloadErrors.push({isException:!0,message:error&&error.stack?test.stringifyException(error,error.stack):msg+" "+url+" "+lineNumber}))}},processURL:function(desc,index,contentManager,launchState,callback,noCleanup,sharedSandboxState){var me=this,url=desc.url;if(desc.isMissing)callback();else{delete launchState.notLaunchedByAutomationId[desc.automationElementId];var testHolder={},preloadErrors=[],onErrorHandler=this.getOnErrorHandler(testHolder,preloadErrors),scopeProvider=this.setupScope(desc,launchState.launchId),transparentEx=this.getDescriptorConfig(desc,"transparentEx"),onErrorHandlerBorrowing=scopeProvider.addOnErrorHandler(onErrorHandler,!transparentEx);desc.preset.eachResource(function(resource){if(contentManager.hasContentOf(resource)&&me.canUseCachedContent(resource,desc))me.addCachedResourceToPreloads(scopeProvider,contentManager,resource,desc);else{var resourceDesc=resource.asDescriptor();resourceDesc.url&&(resourceDesc.url=me.resolveURL(resourceDesc.url,scopeProvider,desc)),scopeProvider.addPreload(resourceDesc)}}),me.prepareScopeSeeding(scopeProvider,desc,contentManager);var testClass=me.getDescriptorConfig(desc,"testClass");"String"==me.typeOf(testClass)&&(testClass=Joose.S.strToClass(testClass));var testConfig=me.getNewTestConfiguration(desc,scopeProvider,contentManager,launchState,sharedSandboxState),test=testHolder.test=new testClass(testConfig);this.onBeforeScopePreload(scopeProvider,url,test),test.earlySetup(function(){cont()},function(errorMessage){preloadErrors.push({isException:!1,message:errorMessage}),cont()})}function cont(){var R=Siesta.Resource("Siesta.Project");scopeProvider.setup(function(scopeProvider,failedPreloads,crossOriginFailed){me.onAfterScopePreload(scopeProvider,url,test,failedPreloads),failedPreloads&&Joose.O.each(failedPreloads,function(value,url){preloadErrors.unshift({isException:!1,message:R.get("preloadHasFailed",{url:url})})}),crossOriginFailed&&preloadErrors.push({isException:!0,message:R.get("crossOriginFailed",{url:scopeProvider.sourceURL})}),scopeProvider.scope?me.launchTest({testHolder:testHolder,desc:desc,scopeProvider:scopeProvider,contentManager:contentManager,launchState:launchState,preloadErrors:preloadErrors,onErrorHandler:onErrorHandler,onErrorHandlerBorrowing:onErrorHandlerBorrowing,startTestAnchor:crossOriginFailed?null:scopeProvider.scope.StartTest,noCleanup:noCleanup,reusingSandbox:!1},callback):callback()})}},launchTest:function(options,callback){var scopeProvider=options.scopeProvider,desc=options.desc,me=this,url=desc.url,testHolder=options.testHolder,noCleanup=options.noCleanup,cleanupUrl=options.cleanupUrl,test=testHolder.test;if(test.callback=function(){noCleanup||me.isKeepingResultForURL(url)||me.cleanupScopeForURL(cleanupUrl||url),callback&&callback(testHolder),testHolder=null},scopeProvider.crossOriginFailed)return test.isFinished()||test.start(options.preloadErrors),void(test=options=null);var startTestAnchor=options.startTestAnchor,args=startTestAnchor&&startTestAnchor.args,global=scopeProvider.scope;Joose.O.extend(test,{startTestAnchor:startTestAnchor,exceptionCatcher:startTestAnchor.exceptionCatcher,testErrorClass:startTestAnchor.testErrorClass,global:global,originalSetTimeout:options.originalSetTimeout||global.setTimeout,originalClearTimeout:options.originalClearTimeout||global.clearTimeout,run:args&&("function"==typeof args[0]?args[0]:args[1]),reusingSandbox:options.reusingSandbox}),options.onErrorHandler&&(options.onErrorHandlerBorrowing&&options.onErrorHandlerBorrowing(),options.onErrorHandlerBorrowing=scopeProvider.addOnErrorHandler(options.onErrorHandler,!this.getDescriptorConfig(desc,"transparentEx"))),this.saveTestWithURL(url,test);function doLaunch(){scopeProvider.scope?(me.fireEvent("beforeteststart",test),test.isFinished()||test.start(options.preloadErrors),test=options=null):callback()}options.reusingSandbox?doLaunch():scopeProvider instanceof Scope.Provider.IFrame?global.setTimeout(doLaunch,10):setTimeout(doLaunch,50)},getNewTestConfiguration:function(desc,scopeProvider,contentManager,launchState,sharedSandboxState){for(var groups=[],currentDesc=desc.parent;currentDesc;)currentDesc.parent&&groups.unshift(String(currentDesc.group)),currentDesc=currentDesc.parent;return{url:desc.url,name:desc.name,referenceUrl:this.getDescriptorConfig(desc,"referenceUrl"),launchId:launchState.launchId,automationElementId:desc.automationElementId,groups:groups,jUnitClass:this.getDescriptorConfig(desc,"jUnitClass"),project:this,expectedGlobals:this.cleanScopeGlobals.concat(this.getDescriptorConfig(desc,"expectedGlobals")),autoCheckGlobals:this.getDescriptorConfig(desc,"autoCheckGlobals"),disableGlobalsCheck:this.disableGlobalsCheck,scopeProvider:scopeProvider,contentManager:contentManager,transparentEx:this.getDescriptorConfig(desc,"transparentEx"),needDone:this.getDescriptorConfig(desc,"needDone"),overrideSetTimeout:this.getDescriptorConfig(desc,"overrideSetTimeout"),defaultTimeout:this.getDescriptorConfig(desc,"defaultTimeout")*(launchState.increaseTimeout?2:1),subTestTimeout:this.getDescriptorConfig(desc,"subTestTimeout")*(launchState.increaseTimeout?2:1),waitForTimeout:this.getDescriptorConfig(desc,"waitForTimeout")*(launchState.increaseTimeout?3:1),isReadyTimeout:this.getDescriptorConfig(desc,"isReadyTimeout"),sourceLineForAllAssertions:this.sourceLineForAllAssertions,sandboxCleanup:this.getDescriptorConfig(desc,"sandboxCleanup"),sharedSandboxState:sharedSandboxState,config:this.getDescriptorConfig(desc,"config"),failOnExclusiveSpecsWhenAutomated:this.getDescriptorConfig(desc,"failOnExclusiveSpecsWhenAutomated"),snoozeUntil:this.getDescriptorConfig(desc,"snooze"),suppressPassedWaitForAssertion:this.getDescriptorConfig(desc,"suppressPassedWaitForAssertion")}},getScriptDescriptor:function(id){return this.descriptorsById[id]},getDescById:function(id){return this.descriptorsById[id]},getTestByURL:function(url){return this.testsByURL[url]},saveTestWithURL:function(url,test){this.testsByURL[url]=test},deleteTestByURL:function(url){var test=this.testsByURL[url];if(test){try{test.finalize(!0)}catch(e){}this.cleanupScopeForURL(url)}delete this.testsByURL[url]},allPassed:function(){var allPassed=!0,me=this;return Joose.A.each(this.flattenDescriptors(this.descriptors),function(descriptor){if(descriptor.isMissing)return allPassed=!1;var test=me.getTestByURL(descriptor.url);return(!test||!!(allPassed=allPassed&&test.isPassed()))&&void 0}),allPassed},flattenArray:function(array,stripEmpty){var me=this,result=[];return Joose.A.each(array,function(el){"Array"==me.typeOf(el)?result.push.apply(result,me.flattenArray(el,stripEmpty)):stripEmpty&&!el||result.push(el)}),result},buildSandboxHashStructure:function(){return["preload","alsoPreload","hostPageUrl","pageUrl","useStrictMode","overrideSetTimeout"]},assignUniqueTag:function(value,configName){if(null==value)return"";if(value===Object(value))return value.__UNIQUE__?value.__UNIQUE__:value.__UNIQUE__=(this.uniqueCounter++).toString(36);value+="";var configIndex=this.valueToHashIndicies[configName];return(configIndex=configIndex||(this.valueToHashIndicies[configName]={}))[value]?configIndex[value]:configIndex[value]=(this.uniqueCounter++).toString(36)},calculateSharedContextGroupHash:function(desc){var me=this,structure=this.getSandboxHashStructure(),hash="";return Joose.A.each(structure,function(configName){hash+=me.assignUniqueTag(me.getDescriptorConfig(desc,configName),configName)}),this.sandboxBoundaryByGroup&&(hash+=this.assignUniqueTag(desc.parent)),hash},sortDescriptors:function(descriptors,forcedRunCore,idsOnly){var me=this,canRunParallel=[],mustRunSequential=[],sharedContextGroups=[],groupsByHash={};return Joose.A.each(descriptors,function(desc){if(me.getDescriptorConfig(desc,"sandbox")){"sequential"==(forcedRunCore||me.getDescriptorConfig(desc,"runCore"))||me.testMustRunSequential(desc)?mustRunSequential.push(idsOnly?desc.id:desc):canRunParallel.push(idsOnly?desc.id:desc)}else{var hash=me.calculateSharedContextGroupHash(desc),group=groupsByHash[hash];group||(group=groupsByHash[hash]={groupHash:hash,items:[]},sharedContextGroups.push(group)),group.items.push(idsOnly?desc.id:desc)}}),{sharedContextGroups:sharedContextGroups,mustRunSequential:mustRunSequential,canRunParallel:canRunParallel}},hasDescriptorWithNativeEventsSimulation:function(descriptors){return!1}},my:{has:{HOST:null,instance:null},methods:{staticDeprecationWarning:function(methodName){var message=Siesta.Resource("Siesta.Project","staticDeprecationWarning",{methodName:methodName,projectClass:this.HOST+""});"undefined"!=typeof console&&console.warn(message)},configure:function(config){return this.staticDeprecationWarning("configure"),(this.instance=new this.HOST).configure(config)},start:function(){return this.staticDeprecationWarning("start"),this.instance.start.apply(this.instance,arguments)},on:function(){return this.staticDeprecationWarning("on"),this.instance.on.apply(this.instance,arguments)}}}}),Siesta.Harness=Siesta.Project,Role("Siesta.Util.Role.CanStyleOutput",{has:{disableColoring:!1,style:{is:"rwc",lazy:"this.buildStyle"},styles:{init:{bold:[1,22],italic:[3,23],underline:[4,24],"black ":[30,39],yellow:[33,39],cyan:[36,39],white:[37,39],green:[32,39],red:[31,39],grey:[90,39],blue:[34,39],magenta:[35,39],"bgblack ":[40,49],bgyellow:[43,49],bgcyan:[46,49],bgwhite:[47,49],bggreen:[42,49],bgred:[41,49],bggrey:[100,49],bgblue:[44,49],bgmagenta:[45,49],inverse:[7,27]}}},methods:{buildStyle:function(){var me=this,style={};return Joose.O.each(this.styles,function(value,name){style[name]=function(text){return me.styled(text,name)}}),style},styled:function(text,style){if(this.disableColoring)return text;var styles=this.styles;return"["+styles[style][0]+"m"+text+"["+styles[style][1]+"m"}}}),Role("Siesta.Util.Role.CanParseBrowser",{methods:{parseBrowser:function(uaString){var match,browser="unknown",version="";return(match=/Firefox\/((?:\d+\.?)+)/.exec(uaString))&&(browser="Firefox",version=match[1]),(match=/Chrome\/((?:\d+\.?)+)/.exec(uaString))&&(browser="Chrome",version=match[1]),(match=/MSIE\s*((?:\d+\.?)+)/.exec(uaString))&&(browser="IE",version=match[1]),uaString.match(/trident/i)&&(match=/rv.(\d\d\.?\d?)/.exec(uaString))&&(browser="IE",version=match[1]),(match=/chrome.+? edge\/(\d+(\.\d+)?)/i.exec(uaString))&&(browser="Edge",version=match[1]),(match=/Apple.*Version\/((?:\d+\.?)+)\s*(?=Safari\/((?:\d+\.?)+))/.exec(uaString))&&(browser="Safari",version=match[1]+" ("+match[2]+")"),(match=/PhantomJS\/(\d+\.\d+\.\d+)/.exec(uaString))&&(browser="PhantomJS",version=match[1]),(match=/SlimerJS\/(\d+\.\d+\.\d+)/.exec(uaString))&&(browser="SlimerJS",version=match[1]),(match=/NodeJS\/(.+)/.exec(uaString))&&(browser="NodeJS",version=match[1]),{name:browser,version:version}}}}),"undefined"==typeof Promise&&function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.ES6Promise=factory()}(this,function(){"use strict";function isFunction(x){return"function"==typeof x}var isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)},len=0,vertxNext=void 0,customSchedulerFn=void 0,asap=function(callback,arg){queue[len]=callback,queue[len+1]=arg,2===(len+=2)&&(customSchedulerFn?customSchedulerFn(flush):scheduleFlush())};var browserWindow="undefined"!=typeof window?window:void 0,browserGlobal=browserWindow||{},BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver,isNode="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){(0,queue[i])(queue[i+1]),queue[i]=void 0,queue[i+1]=void 0}len=0}var channel,iterations,observer,node,scheduleFlush=void 0;function then(onFulfillment,onRejection){var parent=this,child=new this.constructor(noop);void 0===child[PROMISE_ID]&&makePromise(child);var _state=parent._state;if(_state){var callback=arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})}else subscribe(parent,child,onFulfillment,onRejection);return child}function resolve$1(object){if(object&&"object"==typeof object&&object.constructor===this)return object;var promise=new this(noop);return resolve(promise,object),promise}scheduleFlush=isNode?function(){return process.nextTick(flush)}:BrowserMutationObserver?(iterations=0,observer=new BrowserMutationObserver(flush),node=document.createTextNode(""),observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}):isWorker?((channel=new MessageChannel).port1.onmessage=flush,function(){return channel.port2.postMessage(0)}):(void 0===browserWindow&&"function"==typeof require?function(){try{var vertx=Function("return this")().require("vertx");return void 0!==(vertxNext=vertx.runOnLoop||vertx.runOnContext)?function(){vertxNext(flush)}:useSetTimeout()}catch(e){return useSetTimeout()}}:useSetTimeout)();var PROMISE_ID=Math.random().toString(36).substring(2);function noop(){}var PENDING=void 0,FULFILLED=1,REJECTED=2,TRY_CATCH_ERROR={error:null};function getThen(promise){try{return promise.then}catch(error){return TRY_CATCH_ERROR.error=error,TRY_CATCH_ERROR}}function handleForeignThenable(promise,thenable,then$$1){asap(function(promise){var sealed=!1,error=function(then$$1,value,fulfillmentHandler,rejectionHandler){try{then$$1.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}(then$$1,thenable,function(value){sealed||(sealed=!0,(thenable!==value?resolve:fulfill)(promise,value))},function(reason){sealed||(sealed=!0,reject(promise,reason))},promise._label);!sealed&&error&&(sealed=!0,reject(promise,error))},promise)}function handleMaybeThenable(promise,maybeThenable,then$$1){maybeThenable.constructor===promise.constructor&&then$$1===then&&maybeThenable.constructor.resolve===resolve$1?function(promise,thenable){thenable._state===FULFILLED?fulfill(promise,thenable._result):thenable._state===REJECTED?reject(promise,thenable._result):subscribe(thenable,void 0,function(value){return resolve(promise,value)},function(reason){return reject(promise,reason)})}(promise,maybeThenable):then$$1===TRY_CATCH_ERROR?(reject(promise,TRY_CATCH_ERROR.error),TRY_CATCH_ERROR.error=null):void 0!==then$$1&&isFunction(then$$1)?handleForeignThenable(promise,maybeThenable,then$$1):fulfill(promise,maybeThenable)}function resolve(promise,value){var x,type;promise===value?reject(promise,new TypeError("You cannot resolve a promise with itself")):(type=typeof(x=value),null===x||"object"!=type&&"function"!=type?fulfill(promise,value):handleMaybeThenable(promise,value,getThen(value)))}function publishRejection(promise){promise._onerror&&promise._onerror(promise._result),publish(promise)}function fulfill(promise,value){promise._state===PENDING&&(promise._result=value,promise._state=FULFILLED,0!==promise._subscribers.length&&asap(publish,promise))}function reject(promise,reason){promise._state===PENDING&&(promise._state=REJECTED,promise._result=reason,asap(publishRejection,promise))}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers,length=_subscribers.length;parent._onerror=null,_subscribers[length]=child,_subscribers[length+FULFILLED]=onFulfillment,_subscribers[length+REJECTED]=onRejection,0===length&&parent._state&&asap(publish,parent)}function publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child=void 0,callback=void 0,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=void 0,error=void 0,succeeded=void 0,failed=void 0;if(hasCallback){if((value=function(callback,detail){try{return callback(detail)}catch(e){return TRY_CATCH_ERROR.error=e,TRY_CATCH_ERROR}}(callback,detail))===TRY_CATCH_ERROR?(failed=!0,error=value.error,value.error=null):succeeded=!0,promise===value)return void reject(promise,new TypeError("A promises callback cannot return that same promise."))}else value=detail,succeeded=!0;promise._state!==PENDING||(hasCallback&&succeeded?resolve(promise,value):failed?reject(promise,error):settled===FULFILLED?fulfill(promise,value):settled===REJECTED&&reject(promise,value))}var id=0;function makePromise(promise){promise[PROMISE_ID]=id++,promise._state=void 0,promise._result=void 0,promise._subscribers=[]}var Enumerator=function(){function Enumerator(Constructor,input){this._instanceConstructor=Constructor,this.promise=new Constructor(noop),this.promise[PROMISE_ID]||makePromise(this.promise),isArray(input)?(this.length=input.length,this._remaining=input.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(input),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,new Error("Array Methods must be provided an Array"))}return Enumerator.prototype._enumerate=function(input){for(var i=0;this._state===PENDING&&i<input.length;i++)this._eachEntry(input[i],i)},Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor,resolve$$1=c.resolve;if(resolve$$1===resolve$1){var _then=getThen(entry);if(_then===then&&entry._state!==PENDING)this._settledAt(entry._state,i,entry._result);else if("function"!=typeof _then)this._remaining--,this._result[i]=entry;else if(c===Promise$2){var promise=new c(noop);handleMaybeThenable(promise,entry,_then),this._willSettleAt(promise,i)}else this._willSettleAt(new c(function(resolve$$1){return resolve$$1(entry)}),i)}else this._willSettleAt(resolve$$1(entry),i)},Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;promise._state===PENDING&&(this._remaining--,state===REJECTED?reject(promise,value):this._result[i]=value),0===this._remaining&&fulfill(promise,this._result)},Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,void 0,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})},Enumerator}();var Promise$2=(Promise.prototype.catch=function(onRejection){return this.then(null,onRejection)},Promise.prototype.finally=function(callback){var constructor=this.constructor;return this.then(function(value){return constructor.resolve(callback()).then(function(){return value})},function(reason){return constructor.resolve(callback()).then(function(){throw reason})})},Promise);function Promise(resolver){this[PROMISE_ID]=id++,this._result=this._state=void 0,this._subscribers=[],noop!==resolver&&("function"!=typeof resolver&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Promise?function(promise,resolver){try{resolver(function(value){resolve(promise,value)},function(reason){reject(promise,reason)})}catch(e){reject(promise,e)}}(this,resolver):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Promise$2.prototype.then=then,Promise$2.all=function(entries){return new Enumerator(this,entries).promise},Promise$2.race=function(entries){var Constructor=this;return isArray(entries)?new Constructor(function(resolve,reject){for(var length=entries.length,i=0;i<length;i++)Constructor.resolve(entries[i]).then(resolve,reject)}):new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))})},Promise$2.resolve=resolve$1,Promise$2.reject=function(reason){var promise=new this(noop);return reject(promise,reason),promise},Promise$2._setScheduler=function(scheduleFn){customSchedulerFn=scheduleFn},Promise$2._setAsap=function(asapFn){asap=asapFn},Promise$2._asap=asap,Promise$2.polyfill=function(){var local=void 0;if("undefined"!=typeof global)local=global;else if("undefined"!=typeof self)local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if("[object Promise]"===promiseToString&&!P.cast)return}local.Promise=Promise$2},(Promise$2.Promise=Promise$2).polyfill(),Promise$2}),function(root){var t,bowser;function detect(ua){function getFirstMatch(regex){var match=ua.match(regex);return match&&1<match.length&&match[1]||""}var result,regex,match,iosdevice=getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase(),android=!/like android/i.test(ua)&&/android/i.test(ua),nexusMobile=/nexus\s*[0-6]\s*/i.test(ua),nexusTablet=!nexusMobile&&/nexus\s*[0-9]+/i.test(ua),chromeos=/CrOS/.test(ua),silk=/silk/i.test(ua),sailfish=/sailfish/i.test(ua),tizen=/tizen/i.test(ua),webos=/(web|hpw)os/i.test(ua),windowsphone=/windows phone/i.test(ua),windows=(/SamsungBrowser/i.test(ua),!windowsphone&&/windows/i.test(ua)),mac=!iosdevice&&!silk&&/macintosh/i.test(ua),linux=!android&&!sailfish&&!tizen&&!webos&&/linux/i.test(ua),edgeVersion=getFirstMatch(/edge\/(\d+(\.\d+)?)/i),versionIdentifier=getFirstMatch(/version\/(\d+(\.\d+)?)/i),tablet=/tablet/i.test(ua),mobile=!tablet&&/[^-]mobi/i.test(ua),xbox=/xbox/i.test(ua);/opera/i.test(ua)?result={name:"Opera",opera:t,version:versionIdentifier||getFirstMatch(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(ua)?result={name:"Opera",opera:t,version:getFirstMatch(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||versionIdentifier}:/SamsungBrowser/i.test(ua)?result={name:"Samsung Internet for Android",samsungBrowser:t,version:versionIdentifier||getFirstMatch(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(ua)?result={name:"Opera Coast",coast:t,version:versionIdentifier||getFirstMatch(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(ua)?result={name:"Yandex Browser",yandexbrowser:t,version:versionIdentifier||getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(ua)?result={name:"UC Browser",ucbrowser:t,version:getFirstMatch(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(ua)?result={name:"Maxthon",maxthon:t,version:getFirstMatch(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(ua)?result={name:"Epiphany",epiphany:t,version:getFirstMatch(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(ua)?result={name:"Puffin",puffin:t,version:getFirstMatch(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(ua)?result={name:"Sleipnir",sleipnir:t,version:getFirstMatch(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(ua)?result={name:"K-Meleon",kMeleon:t,version:getFirstMatch(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:windowsphone?(result={name:"Windows Phone",windowsphone:t},edgeVersion?(result.msedge=t,result.version=edgeVersion):(result.msie=t,result.version=getFirstMatch(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(ua)?result={name:"Internet Explorer",msie:t,version:getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:chromeos?result={name:"Chrome",chromeos:t,chromeBook:t,chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(ua)?result={name:"Microsoft Edge",msedge:t,version:edgeVersion}:/vivaldi/i.test(ua)?result={name:"Vivaldi",vivaldi:t,version:getFirstMatch(/vivaldi\/(\d+(\.\d+)?)/i)||versionIdentifier}:sailfish?result={name:"Sailfish",sailfish:t,version:getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(ua)?result={name:"SeaMonkey",seamonkey:t,version:getFirstMatch(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(ua)?(result={name:"Firefox",firefox:t,version:getFirstMatch(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(ua)&&(result.firefoxos=t)):silk?result={name:"Amazon Silk",silk:t,version:getFirstMatch(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(ua)?result={name:"PhantomJS",phantom:t,version:getFirstMatch(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(ua)?result={name:"SlimerJS",slimer:t,version:getFirstMatch(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(ua)||/rim\stablet/i.test(ua)?result={name:"BlackBerry",blackberry:t,version:versionIdentifier||getFirstMatch(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:webos?(result={name:"WebOS",webos:t,version:versionIdentifier||getFirstMatch(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(ua)&&(result.touchpad=t)):/bada/i.test(ua)?result={name:"Bada",bada:t,version:getFirstMatch(/dolfin\/(\d+(\.\d+)?)/i)}:tizen?result={name:"Tizen",tizen:t,version:getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||versionIdentifier}:/qupzilla/i.test(ua)?result={name:"QupZilla",qupzilla:t,version:getFirstMatch(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||versionIdentifier}:/chromium/i.test(ua)?result={name:"Chromium",chromium:t,version:getFirstMatch(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||versionIdentifier}:/chrome|crios|crmo/i.test(ua)?result={name:"Chrome",chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:android?result={name:"Android",version:versionIdentifier}:/safari|applewebkit/i.test(ua)?(result={name:"Safari",safari:t},versionIdentifier&&(result.version=versionIdentifier)):iosdevice?(result={name:"iphone"==iosdevice?"iPhone":"ipad"==iosdevice?"iPad":"iPod"},versionIdentifier&&(result.version=versionIdentifier)):result=/googlebot/i.test(ua)?{name:"Googlebot",googlebot:t,version:getFirstMatch(/googlebot\/(\d+(\.\d+))/i)||versionIdentifier}:{name:getFirstMatch(/^(.*)\/(.*) /),version:(regex=/^(.*)\/(.*) /,(match=ua.match(regex))&&1<match.length&&match[2]||"")},!result.msedge&&/(apple)?webkit/i.test(ua)?(/(apple)?webkit\/537\.36/i.test(ua)?(result.name=result.name||"Blink",result.blink=t):(result.name=result.name||"Webkit",result.webkit=t),!result.version&&versionIdentifier&&(result.version=versionIdentifier)):!result.opera&&/gecko\//i.test(ua)&&(result.name=result.name||"Gecko",result.gecko=t,result.version=result.version||getFirstMatch(/gecko\/(\d+(\.\d+)?)/i)),result.windowsphone||result.msedge||!android&&!result.silk?result.windowsphone||result.msedge||!iosdevice?mac?result.mac=t:xbox?result.xbox=t:windows?result.windows=t:linux&&(result.linux=t):(result[iosdevice]=t,result.ios=t):result.android=t;var osVersion="";result.windowsphone?osVersion=getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):iosdevice?osVersion=(osVersion=getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):android?osVersion=getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i):result.webos?osVersion=getFirstMatch(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):result.blackberry?osVersion=getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i):result.bada?osVersion=getFirstMatch(/bada\/(\d+(\.\d+)*)/i):result.tizen&&(osVersion=getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i)),osVersion&&(result.osversion=osVersion);var osMajorVersion=osVersion.split(".")[0];return tablet||nexusTablet||"ipad"==iosdevice||android&&(3==osMajorVersion||4<=osMajorVersion&&!mobile)||result.silk?result.tablet=t:(mobile||"iphone"==iosdevice||"ipod"==iosdevice||android||nexusMobile||result.blackberry||result.webos||result.bada)&&(result.mobile=t),result.msedge||result.msie&&10<=result.version||result.yandexbrowser&&15<=result.version||result.vivaldi&&1<=result.version||result.chrome&&20<=result.version||result.samsungBrowser&&4<=result.version||result.firefox&&20<=result.version||result.safari&&6<=result.version||result.opera&&10<=result.version||result.ios&&result.osversion&&6<=result.osversion.split(".")[0]||result.blackberry&&10.1<=result.version||result.chromium&&20<=result.version?result.a=t:result.msie&&result.version<10||result.chrome&&result.version<20||result.firefox&&result.version<20||result.safari&&result.version<6||result.opera&&result.version<10||result.ios&&result.osversion&&result.osversion.split(".")[0]<6||result.chromium&&result.version<20?result.c=t:result.x=t,result}function getVersionPrecision(version){return version.split(".").length}function map(arr,iterator){var i,result=[];if(Array.prototype.map)return Array.prototype.map.call(arr,iterator);for(i=0;i<arr.length;i++)result.push(iterator(arr[i]));return result}function compareVersions(versions){for(var precision=Math.max(getVersionPrecision(versions[0]),getVersionPrecision(versions[1])),chunks=map(versions,function(version){var delta=precision-getVersionPrecision(version);return map((version+=new Array(1+delta).join(".0")).split("."),function(chunk){return new Array(20-chunk.length).join("0")+chunk}).reverse()});0<=--precision;){if(chunks[0][precision]>chunks[1][precision])return 1;if(chunks[0][precision]!==chunks[1][precision])return-1;if(0===precision)return 0}}function isUnsupportedBrowser(minVersions,strictMode,ua){var _bowser=bowser;"string"==typeof strictMode&&(ua=strictMode,strictMode=void 0),void 0===strictMode&&(strictMode=!1),ua&&(_bowser=detect(ua));var version=""+_bowser.version;for(var browser in minVersions)if(minVersions.hasOwnProperty(browser)&&_bowser[browser]){if("string"!=typeof minVersions[browser])throw new Error("Browser version in the minVersion map should be a string: "+browser+": "+String(minVersions));return compareVersions([version,minVersions[browser]])<0}return strictMode}("undefined"!=typeof window?window:root).bowser=(t=!0,(bowser=detect("undefined"!=typeof navigator&&navigator.userAgent||"")).test=function(browserList){for(var i=0;i<browserList.length;++i){var browserItem=browserList[i];if("string"==typeof browserItem&&browserItem in bowser)return!0}return!1},bowser.isUnsupportedBrowser=isUnsupportedBrowser,bowser.compareVersions=compareVersions,bowser.check=function(minVersions,strictMode,ua){return!isUnsupportedBrowser(minVersions,strictMode,ua)},bowser._detect=detect,bowser)}(this),function(window,undefined){var document=window.document,navigator=window.navigator,location=window.location,jQuery=function(){function fcamelCase(all,letter){return letter.toUpperCase()}var rootjQuery,browserMatch,readyList,DOMContentLoaded,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},_jQuery=window.jQuery,_$=window.$,quickExpr=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rnotwhite=/\S/,trimLeft=/^\s+/,trimRight=/\s+$/,rdigit=/\d/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,rdashAlpha=/-([a-z])/gi,userAgent=navigator.userAgent,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};function doScrollCheck(){if(!jQuery.isReady){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(doScrollCheck,1)}jQuery.ready()}}return jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector)return this;if(selector.nodeType)return this.context=this[0]=selector,this.length=1,this;if("body"===selector&&!context&&document.body)return this.context=document,this[0]=document.body,this.selector=selector,this.length=1,this;if("string"!=typeof selector)return jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this));if(!(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&3<=selector.length?[null,selector,null]:quickExpr.exec(selector))||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1])return doc=(context=context instanceof jQuery?context[0]:context)?context.ownerDocument||context:document,(ret=rsingleTag.exec(selector))?jQuery.isPlainObject(context)?(selector=[document.createElement(ret[1])],jQuery.fn.attr.call(selector,context,!0)):selector=[doc.createElement(ret[1])]:selector=((ret=jQuery.buildFragment([match[1]],[doc])).cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes,jQuery.merge(this,selector);if((elem=document.getElementById(match[2]))&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},toArray:function(){return slice.call(this,0)},get:function(num){return null==num?this.toArray():num<0?this[this.length+num]:this[num]},pushStack:function(elems,name,selector){var ret=this.constructor();return jQuery.isArray(elems)?push.apply(ret,elems):jQuery.merge(ret,elems),ret.prevObject=this,ret.context=this.context,"find"===name?ret.selector=this.selector+(this.selector?" ":"")+selector:name&&(ret.selector=this.selector+"."+name+"("+selector+")"),ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.bindReady(),readyList.done(fn),this},eq:function(i){return-1===i?this.slice(i):this.slice(i,+i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(clone=copyIsArray?(copyIsArray=!1,src&&jQuery.isArray(src)?src:[]):src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target},jQuery.extend({noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(!0===wait&&!--jQuery.readyWait||!0!==wait&&!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready,1);if((jQuery.isReady=!0)!==wait&&0<--jQuery.readyWait)return;readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").unbind("ready")}},bindReady:function(){if(!readyList){if(readyList=jQuery._Deferred(),"complete"===document.readyState)return setTimeout(jQuery.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),window.addEventListener("load",jQuery.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded),window.attachEvent("onload",jQuery.ready);var toplevel=!1;try{toplevel=null==window.frameElement}catch(e){}document.documentElement.doScroll&&toplevel&&doScrollCheck()}}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return obj&&"object"==typeof obj&&"setInterval"in obj},isNaN:function(obj){return null==obj||!rdigit.test(obj)||isNaN(obj)},type:function(obj){return null==obj?String(obj):class2type[toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1;var key;for(key in obj);return key===undefined||hasOwn.call(obj,key)},isEmptyObject:function(obj){for(var name in obj)return!1;return!0},error:function(msg){throw msg},parseJSON:function(data){return"string"==typeof data&&data?(data=jQuery.trim(data),window.JSON&&window.JSON.parse?window.JSON.parse(data):rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+data)():void jQuery.error("Invalid JSON: "+data)):null},parseXML:function(data,xml,tmp){return window.DOMParser?xml=(tmp=new DOMParser).parseFromString(data,"text/xml"):((xml=new ActiveXObject("Microsoft.XMLDOM")).async="false",xml.loadXML(data)),(tmp=xml.documentElement)&&tmp.nodeName&&"parsererror"!==tmp.nodeName||jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(data){data&&rnotwhite.test(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args)if(isObj){for(name in object)if(!1===callback.apply(object[name],args))break}else for(;i<length&&!1!==callback.apply(object[i++],args););else if(isObj){for(name in object)if(!1===callback.call(object[name],name,object[name]))break}else for(;i<length&&!1!==callback.call(object[i],i,object[i++]););return object},trim:trim?function(text){return null==text?"":trim.call(text)}:function(text){return null==text?"":text.toString().replace(trimLeft,"").replace(trimRight,"")},makeArray:function(array,results){var ret=results||[];if(null!=array){var type=jQuery.type(array);null==array.length||"string"===type||"function"===type||"regexp"===type||jQuery.isWindow(array)?push.call(ret,array):jQuery.merge(ret,array)}return ret},inArray:function(elem,array){if(indexOf)return indexOf.call(array,elem);for(var i=0,length=array.length;i<length;i++)if(array[i]===elem)return i;return-1},merge:function(first,second){var i=first.length,j=0;if("number"==typeof second.length)for(var l=second.length;j<l;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var ret=[];inv=!!inv;for(var i=0,length=elems.length;i<length;i++)inv!==!!callback(elems[i],i)&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length;if(elems instanceof jQuery||length!==undefined&&"number"==typeof length&&(0<length&&elems[0]&&elems[length-1]||0===length||jQuery.isArray(elems)))for(;i<length;i++)null!=(value=callback(elems[i],i,arg))&&(ret[ret.length]=value);else for(key in elems)null!=(value=callback(elems[key],key,arg))&&(ret[ret.length]=value);return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){if("string"==typeof context){var tmp=fn[context];context=fn,fn=tmp}if(!jQuery.isFunction(fn))return undefined;function proxy(){return fn.apply(context,args.concat(slice.call(arguments)))}var args=slice.call(arguments,2);return proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++,proxy},access:function(elems,key,value,exec,fn,pass){var length=elems.length;if("object"==typeof key){for(var k in key)jQuery.access(elems,k,key[k],exec,fn,value);return elems}if(value===undefined)return length?fn(elems[0],key):undefined;exec=!pass&&exec&&jQuery.isFunction(value);for(var i=0;i<length;i++)fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);return elems},now:function(){return(new Date).getTime()},uaMatch:function(ua){if((ua=ua.toLowerCase()).match(/trident/i)&&ua.match(/rv.\d\d/))return{browser:"msie",version:"11.0"};var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,this),jQuerySub.superclass=this,((jQuerySub.fn=jQuerySub.prototype=this()).constructor=jQuerySub).sub=this.sub,jQuerySub.fn.init=function(selector,context){return context&&context instanceof jQuery&&!(context instanceof jQuerySub)&&(context=jQuerySub(context)),jQuery.fn.init.call(this,selector,context,rootjQuerySub)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub},browser:{}}),jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),(browserMatch=jQuery.uaMatch(userAgent)).browser&&(jQuery.browser[browserMatch.browser]=!0,jQuery.browser.version=browserMatch.version),jQuery.browser.webkit&&(jQuery.browser.safari=/safari/i.test(userAgent)&&!/chrome/i.test(userAgent)),rnotwhite.test(" ")&&(trimLeft=/^[\s\xA0]+/,trimRight=/[\s\xA0]+$/),rootjQuery=jQuery(document),document.addEventListener?DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,!1),jQuery.ready()}:document.attachEvent&&(DOMContentLoaded=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",DOMContentLoaded),jQuery.ready())}),jQuery}(),promiseMethods="done fail isResolved isRejected promise then always pipe".split(" "),sliceDeferred=[].slice;jQuery.extend({_Deferred:function(){var fired,firing,cancelled,callbacks=[],deferred={done:function(){if(!cancelled){var i,length,elem,type,_fired,args=arguments;for(fired&&(_fired=fired,fired=0),i=0,length=args.length;i<length;i++)elem=args[i],"array"===(type=jQuery.type(elem))?deferred.done.apply(deferred,elem):"function"===type&&callbacks.push(elem);_fired&&deferred.resolveWith(_fired[0],_fired[1])}return this},resolveWith:function(context,args){if(!cancelled&&!fired&&!firing){args=args||[],firing=1;try{for(;callbacks[0];)callbacks.shift().apply(context,args)}finally{fired=[context,args],firing=0}}return this},resolve:function(){return deferred.resolveWith(this,arguments),this},isResolved:function(){return!(!firing&&!fired)},cancel:function(){return cancelled=1,callbacks=[],this}};return deferred},Deferred:function(func){var promise,deferred=jQuery._Deferred(),failDeferred=jQuery._Deferred();return jQuery.extend(deferred,{then:function(doneCallbacks,failCallbacks){return deferred.done(doneCallbacks).fail(failCallbacks),this},always:function(){return deferred.done.apply(deferred,arguments).fail.apply(this,arguments)},fail:failDeferred.done,rejectWith:failDeferred.resolveWith,reject:failDeferred.resolve,isRejected:failDeferred.isResolved,pipe:function(fnDone,fnFail){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,"resolve"],fail:[fnFail,"reject"]},function(handler,data){var returned,fn=data[0],action=data[1];jQuery.isFunction(fn)?deferred[handler](function(){(returned=fn.apply(this,arguments))&&jQuery.isFunction(returned.promise)?returned.promise().then(newDefer.resolve,newDefer.reject):newDefer[action](returned)}):deferred[handler](newDefer[action])})}).promise()},promise:function(obj){if(null==obj){if(promise)return promise;promise=obj={}}for(var i=promiseMethods.length;i--;)obj[promiseMethods[i]]=deferred[promiseMethods[i]];return obj}}),deferred.done(failDeferred.cancel).fail(deferred.cancel),delete deferred.cancel,func&&func.call(deferred,deferred),deferred},when:function(firstParam){var args=arguments,i=0,length=args.length,count=length,deferred=length<=1&&firstParam&&jQuery.isFunction(firstParam.promise)?firstParam:jQuery.Deferred();function resolveFunc(i){return function(value){args[i]=1<arguments.length?sliceDeferred.call(arguments,0):value,--count||deferred.resolveWith(deferred,sliceDeferred.call(args,0))}}if(1<length){for(;i<length;i++)args[i]&&jQuery.isFunction(args[i].promise)?args[i].promise().then(resolveFunc(i),deferred.reject):--count;count||deferred.resolveWith(deferred,args)}else deferred!==firstParam&&deferred.resolveWith(deferred,length?[firstParam]:[]);return deferred.promise()}}),jQuery.support=function(){var all,a,select,opt,input,marginDiv,support,fragment,body,testElementParent,testElement,testElementStyle,tds,eventName,i,isSupported,div=document.createElement("div"),documentElement=document.documentElement;if(div.setAttribute("className","t"),div.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0],!all||!all.length||!a)return{};opt=(select=document.createElement("select")).appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],support={leadingWhitespace:3===div.firstChild.nodeType,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.55$/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:"on"===input.value,optSelected:opt.selected,getSetAttribute:"t"!==div.className,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}for(i in!div.addEventListener&&div.attachEvent&&div.fireEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).fireEvent("onclick")),(input=document.createElement("input")).value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value,input.setAttribute("checked","checked"),div.appendChild(input),(fragment=document.createDocumentFragment()).appendChild(div.firstChild),support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,div.innerHTML="",div.style.width=div.style.paddingLeft="1px",body=document.getElementsByTagName("body")[0],testElement=document.createElement(body?"div":"body"),testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0},body&&jQuery.extend(testElementStyle,{position:"absolute",left:-1e3,top:-1e3}),testElementStyle)testElement.style[i]=testElementStyle[i];if(testElement.appendChild(div),(testElementParent=body||documentElement).insertBefore(testElement,testElementParent.firstChild),support.appendChecked=input.checked,support.boxModel=2===div.offsetWidth,"zoom"in div.style&&(div.style.display="inline",div.style.zoom=1,support.inlineBlockNeedsLayout=2===div.offsetWidth,div.style.display="",div.innerHTML="<div style='width:4px;'></div>",support.shrinkWrapBlocks=2!==div.offsetWidth),div.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",isSupported=0===(tds=div.getElementsByTagName("td"))[0].offsetHeight,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight,div.innerHTML="",document.defaultView&&document.defaultView.getComputedStyle&&((marginDiv=document.createElement("div")).style.width="0",marginDiv.style.marginRight="0",div.appendChild(marginDiv),support.reliableMarginRight=0===(parseInt((document.defaultView.getComputedStyle(marginDiv,null)||{marginRight:0}).marginRight,10)||0)),testElement.innerHTML="",testElementParent.removeChild(testElement),div.attachEvent)for(i in{submit:1,change:1,focusin:1})(isSupported=(eventName="on"+i)in div)||(div.setAttribute(eventName,"return;"),isSupported="function"==typeof div[eventName]),support[i+"Bubbles"]=isSupported;return testElement=fragment=select=opt=body=marginDiv=div=input=null,support}(),jQuery.boxModel=jQuery.support.boxModel;var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([a-z])([A-Z])/g;function dataAttr(elem,key,data){if(data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"$1-$2").toLowerCase();if("string"==typeof(data=elem.getAttribute(name))){try{data="true"===data||"false"!==data&&("null"===data?null:jQuery.isNaN(data)?rbrace.test(data)?jQuery.parseJSON(data):data:parseFloat(data))}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){for(var name in obj)if("toJSON"!==name)return;return 1}function handleQueueMarkDefer(elem,type,src){var deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",defer=jQuery.data(elem,deferDataKey,undefined,!0);!defer||"queue"!==src&&jQuery.data(elem,queueDataKey,undefined,!0)||"mark"!==src&&jQuery.data(elem,markDataKey,undefined,!0)||setTimeout(function(){jQuery.data(elem,queueDataKey,undefined,!0)||jQuery.data(elem,markDataKey,undefined,!0)||(jQuery.removeData(elem,deferDataKey,!0),defer.resolve())},0)}jQuery.extend({cache:{},uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(elem){return!!(elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando])&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(jQuery.acceptData(elem)){var thisCache,internalKey=jQuery.expando,getByName="string"==typeof name,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:elem[jQuery.expando]&&jQuery.expando;if(id&&(!pvt||!id||cache[id][internalKey])||!getByName||data!==undefined)return id||(isNode?elem[jQuery.expando]=id=++jQuery.uuid:id=jQuery.expando),cache[id]||(cache[id]={},isNode||(cache[id].toJSON=jQuery.noop)),"object"!=typeof name&&"function"!=typeof name||(pvt?cache[id][internalKey]=jQuery.extend(cache[id][internalKey],name):cache[id]=jQuery.extend(cache[id],name)),thisCache=cache[id],pvt&&(thisCache[internalKey]||(thisCache[internalKey]={}),thisCache=thisCache[internalKey]),data!==undefined&&(thisCache[jQuery.camelCase(name)]=data),"events"!==name||thisCache[name]?getByName?thisCache[jQuery.camelCase(name)]||thisCache[name]:thisCache:thisCache[internalKey]&&thisCache[internalKey].events}},removeData:function(elem,name,pvt){if(jQuery.acceptData(elem)){var internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name){var thisCache=pvt?cache[id][internalKey]:cache[id];if(thisCache&&(delete thisCache[name],!isEmptyDataObject(thisCache)))return}if(!pvt||(delete cache[id][internalKey],isEmptyDataObject(cache[id]))){var internalCache=cache[id][internalKey];jQuery.support.deleteExpando||cache!=window?delete cache[id]:cache[id]=null,internalCache?(cache[id]={},isNode||(cache[id].toJSON=jQuery.noop),cache[id][internalKey]=internalCache):isNode&&(jQuery.support.deleteExpando?delete elem[jQuery.expando]:elem.removeAttribute?elem.removeAttribute(jQuery.expando):elem[jQuery.expando]=null)}}}},_data:function(elem,name,data){return jQuery.data(elem,name,data,!0)},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match)return!(!0===match||elem.getAttribute("classid")!==match)}return!0}}),jQuery.fn.extend({data:function(key,value){var data=null;if(void 0===key){if(this.length&&(data=jQuery.data(this[0]),1===this[0].nodeType))for(var name,attr=this[0].attributes,i=0,l=attr.length;i<l;i++)0===(name=attr[i].name).indexOf("data-")&&(name=jQuery.camelCase(name.substring(5)),dataAttr(this[0],name,data[name]));return data}if("object"==typeof key)return this.each(function(){jQuery.data(this,key)});var parts=key.split(".");return parts[1]=parts[1]?"."+parts[1]:"",value===undefined?((data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]))===undefined&&this.length&&(data=jQuery.data(this[0],key),data=dataAttr(this[0],key,data)),data===undefined&&parts[1]?this.data(parts[0]):data):this.each(function(){var $this=jQuery(this),args=[parts[0],value];$this.triggerHandler("setData"+parts[1]+"!",args),jQuery.data(this,key,value),$this.triggerHandler("changeData"+parts[1]+"!",args)})},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({_mark:function(elem,type){elem&&(type=(type||"fx")+"mark",jQuery.data(elem,type,(jQuery.data(elem,type,undefined,!0)||0)+1,!0))},_unmark:function(force,elem,type){if(!0!==force&&(type=elem,elem=force,force=!1),elem){var key=(type=type||"fx")+"mark",count=force?0:(jQuery.data(elem,key,undefined,!0)||1)-1;count?jQuery.data(elem,key,count,!0):(jQuery.removeData(elem,key,!0),handleQueueMarkDefer(elem,type,"mark"))}},queue:function(elem,type,data){if(elem){type=(type||"fx")+"queue";var q=jQuery.data(elem,type,undefined,!0);return data&&(!q||jQuery.isArray(data)?q=jQuery.data(elem,type,jQuery.makeArray(data),!0):q.push(data)),q||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift();"inprogress"===fn&&(fn=queue.shift()),fn&&("fx"===type&&queue.unshift("inprogress"),fn.call(elem,function(){jQuery.dequeue(elem,type)})),queue.length||(jQuery.removeData(elem,type+"queue",!0),handleQueueMarkDefer(elem,type,"queue"))}}),jQuery.fn.extend({queue:function(type,data){return"string"!=typeof type&&(data=type,type="fx"),data===undefined?jQuery.queue(this[0],type):this.each(function(){var queue=jQuery.queue(this,type,data);"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx&&jQuery.fx.speeds[time]||time,type=type||"fx",this.queue(type,function(){var elem=this;setTimeout(function(){jQuery.dequeue(elem,type)},time)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,object){"string"!=typeof type&&(type=undefined),type=type||"fx";var tmp,defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark";function resolve(){--count||defer.resolveWith(elements,[elements])}for(;i--;)(tmp=jQuery.data(elements[i],deferDataKey,undefined,!0)||(jQuery.data(elements[i],queueDataKey,undefined,!0)||jQuery.data(elements[i],markDataKey,undefined,!0))&&jQuery.data(elements[i],deferDataKey,jQuery._Deferred(),!0))&&(count++,tmp.done(resolve));return resolve(),defer.promise()}});var formHook,boolHook,rclass=/[\n\t\r]/g,rspace=/\s+/,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,rinvalidChar=/\:|^on/;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,name,value,!0,jQuery.attr)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,name,value,!0,jQuery.prop)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(value&&"string"==typeof value)for(classNames=value.split(rspace),i=0,l=this.length;i<l;i++)if(1===(elem=this[i]).nodeType)if(elem.className||1!==classNames.length){for(setClass=" "+elem.className+" ",c=0,cl=classNames.length;c<cl;c++)~setClass.indexOf(" "+classNames[c]+" ")||(setClass+=classNames[c]+" ");elem.className=jQuery.trim(setClass)}else elem.className=value;return this},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(value&&"string"==typeof value||value===undefined)for(classNames=(value||"").split(rspace),i=0,l=this.length;i<l;i++)if(1===(elem=this[i]).nodeType&&elem.className)if(value){for(className=(" "+elem.className+" ").replace(rclass," "),c=0,cl=classNames.length;c<cl;c++)className=className.replace(" "+classNames[c]+" "," ");elem.className=jQuery.trim(className)}else elem.className="";return this},toggleClass:function(value,stateVal){var type=typeof value,isBool="boolean"==typeof stateVal;return jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"==type)for(var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);className=classNames[i++];)state=isBool?state:!self.hasClass(className),self[state?"addClass":"removeClass"](className);else"undefined"!=type&&"boolean"!=type||(this.className&&jQuery._data(this,"__className__",this.className),this.className=!this.className&&!1!==value&&jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;i<l;i++)if(-1<(" "+this[i].className+" ").replace(rclass," ").indexOf(className))return!0;return!1},val:function(value){var hooks,ret,elem=this[0];if(!arguments.length)return elem?(hooks=jQuery.valHooks[elem.nodeName.toLowerCase()]||jQuery.valHooks[elem.type])&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:"string"==typeof(ret=elem.value)?ret.replace(rreturn,""):null==ret?"":ret:undefined;var isFunction=jQuery.isFunction(value);return this.each(function(i){var val,self=jQuery(this);1===this.nodeType&&(null==(val=isFunction?value.call(this,i,self.val()):value)?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),(hooks=jQuery.valHooks[this.nodeName.toLowerCase()]||jQuery.valHooks[this.type])&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val))})}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,index=elem.selectedIndex,values=[],options=elem.options,one="select-one"===elem.type;if(index<0)return null;for(var i=one?index:0,max=one?index+1:options.length;i<max;i++){var option=options[i];if(option.selected&&(jQuery.support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}}return one&&!values.length&&options.length?jQuery(options[index]).val():values},set:function(elem,value){var values=jQuery.makeArray(value);return jQuery(elem).find("option").each(function(){this.selected=0<=jQuery.inArray(jQuery(this).val(),values)}),values.length||(elem.selectedIndex=-1),values}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(elem,name,value,pass){var nType=elem.nodeType;if(!elem||3===nType||8===nType||2===nType)return undefined;if(pass&&name in jQuery.attrFn)return jQuery(elem)[name](value);if(!("getAttribute"in elem))return jQuery.prop(elem,name,value);var ret,hooks,notxml=1!==nType||!jQuery.isXMLDoc(elem);return notxml&&(name=jQuery.attrFix[name]||name,(hooks=jQuery.attrHooks[name])||(rboolean.test(name)?hooks=boolHook:formHook&&"className"!==name&&(jQuery.nodeName(elem,"form")||rinvalidChar.test(name))&&(hooks=formHook))),value!==undefined?null===value?(jQuery.removeAttr(elem,name),undefined):hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,""+value),value):!(hooks&&"get"in hooks&&notxml&&null!==(ret=hooks.get(elem,name)))&&null===(ret=elem.getAttribute(name))?undefined:ret},removeAttr:function(elem,name){var propName;1===elem.nodeType&&(name=jQuery.attrFix[name]||name,jQuery.support.getSetAttribute?elem.removeAttribute(name):(jQuery.attr(elem,name,""),elem.removeAttributeNode(elem.getAttributeNode(name))),rboolean.test(name)&&(propName=jQuery.propFix[name]||name)in elem&&(elem[propName]=!1))},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode)jQuery.error("type property can't be changed");else if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}},tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabIndex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}},value:{get:function(elem,name){return formHook&&jQuery.nodeName(elem,"button")?formHook.get(elem,name):name in elem?elem.value:null},set:function(elem,value,name){if(formHook&&jQuery.nodeName(elem,"button"))return formHook.set(elem,value,name);elem.value=value}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;return elem&&3!==nType&&8!==nType&&2!==nType?((1!==nType||!jQuery.isXMLDoc(elem))&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==undefined?ret:elem[name]):undefined},propHooks:{}}),boolHook={get:function(elem,name){return jQuery.prop(elem,name)?name.toLowerCase():undefined},set:function(elem,value,name){var propName;return!1===value?jQuery.removeAttr(elem,name):((propName=jQuery.propFix[name]||name)in elem&&(elem[propName]=!0),elem.setAttribute(name,name.toLowerCase())),name}},jQuery.support.getSetAttribute||(jQuery.attrFix=jQuery.propFix,formHook=jQuery.attrHooks.name=jQuery.attrHooks.title=jQuery.valHooks.button={get:function(elem,name){var ret;return(ret=elem.getAttributeNode(name))&&""!==ret.nodeValue?ret.nodeValue:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(ret)return ret.nodeValue=value}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(""===value)return elem.setAttribute(name,"auto"),value}})})),jQuery.support.hrefNormalized||jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return null===ret?undefined:ret}})}),jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return elem.style.cssText=""+value}}),jQuery.support.optSelected||(jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex)}})),jQuery.support.checkOn||jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return null===elem.getAttribute("value")?"on":elem.value}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value))return elem.checked=0<=jQuery.inArray(jQuery(elem).val(),value)}})});function fcleanup(nm){return nm.replace(rescape,"\\$&")}var rnamespaces=/\.(.*)$/,rformElems=/^(?:textarea|input|select)$/i,rperiod=/\./g,rspaces=/ /g,rescape=/[^\w\s.|`]/g;function returnFalse(){return!1}function returnTrue(){return!0}jQuery.event={add:function(elem,types,handler,data){if(3!==elem.nodeType&&8!==elem.nodeType){if(!1===handler)handler=returnFalse;else if(!handler)return;var handleObjIn,handleObj;handler.handler&&(handler=(handleObjIn=handler).handler),handler.guid||(handler.guid=jQuery.guid++);var elemData=jQuery._data(elem);if(elemData){var events=elemData.events,eventHandle=elemData.handle;events||(elemData.events=events={}),eventHandle||(elemData.handle=eventHandle=function(e){return void 0===jQuery||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.handle.apply(eventHandle.elem,arguments)}),eventHandle.elem=elem,types=types.split(" ");for(var type,namespaces,i=0;type=types[i++];){handleObj=handleObjIn?jQuery.extend({},handleObjIn):{handler:handler,data:data},-1<type.indexOf(".")?(type=(namespaces=type.split(".")).shift(),handleObj.namespace=namespaces.slice(0).sort().join(".")):(namespaces=[],handleObj.namespace=""),handleObj.type=type,handleObj.guid||(handleObj.guid=handler.guid);var handlers=events[type],special=jQuery.event.special[type]||{};handlers||(handlers=events[type]=[],special.setup&&!1!==special.setup.call(elem,data,namespaces,eventHandle)||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),handlers.push(handleObj),jQuery.event.global[type]=!0}elem=null}}},global:{},remove:function(elem,types,handler,pos){if(3!==elem.nodeType&&8!==elem.nodeType){!1===handler&&(handler=returnFalse);var type,j,all,namespaces,namespace,special,eventType,handleObj,origType,i=0,elemData=jQuery.hasData(elem)&&jQuery._data(elem),events=elemData&&elemData.events;if(elemData&&events)if(types&&types.type&&(handler=types.handler,types=types.type),!types||"string"==typeof types&&"."===types.charAt(0))for(type in types=types||"",events)jQuery.event.remove(elem,type+types);else{for(types=types.split(" ");type=types[i++];)if(handleObj=null,namespaces=[],(all=(origType=type).indexOf(".")<0)||(type=(namespaces=type.split(".")).shift(),namespace=new RegExp("(^|\\.)"+jQuery.map(namespaces.slice(0).sort(),fcleanup).join("\\.(?:.*\\.)?")+"(\\.|$)")),eventType=events[type])if(handler){for(special=jQuery.event.special[type]||{},j=pos||0;j<eventType.length&&(handleObj=eventType[j],handler.guid!==handleObj.guid||((all||namespace.test(handleObj.namespace))&&(null==pos&&eventType.splice(j--,1),special.remove&&special.remove.call(elem,handleObj)),null==pos));j++);(0===eventType.length||null!=pos&&1===eventType.length)&&(special.teardown&&!1!==special.teardown.call(elem,namespaces)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(j=0;j<eventType.length;j++)handleObj=eventType[j],(all||namespace.test(handleObj.namespace))&&(jQuery.event.remove(elem,origType,handleObj.handler,j),eventType.splice(j--,1));if(jQuery.isEmptyObject(events)){var handle=elemData.handle;handle&&(handle.elem=null),delete elemData.events,delete elemData.handle,jQuery.isEmptyObject(elemData)&&jQuery.removeData(elem,undefined,!0)}}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(event,data,elem,onlyHandlers){var exclusive,type=event.type||event,namespaces=[];if(0<=type.indexOf("!")&&(type=type.slice(0,-1),exclusive=!0),0<=type.indexOf(".")&&(type=(namespaces=type.split(".")).shift(),namespaces.sort()),elem&&!jQuery.event.customEvent[type]||jQuery.event.global[type])if((event="object"==typeof event?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type)).type=type,event.exclusive=exclusive,event.namespace=namespaces.join("."),event.namespace_re=new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.)?")+"(\\.|$)"),!onlyHandlers&&elem||(event.preventDefault(),event.stopPropagation()),elem){if(3!==elem.nodeType&&8!==elem.nodeType){event.result=undefined,event.target=elem,(data=null!=data?jQuery.makeArray(data):[]).unshift(event);var cur=elem,ontype=type.indexOf(":")<0?"on"+type:"";do{var handle=jQuery._data(cur,"handle");event.currentTarget=cur,handle&&handle.apply(cur,data),ontype&&jQuery.acceptData(cur)&&cur[ontype]&&!1===cur[ontype].apply(cur,data)&&(event.result=!1,event.preventDefault()),cur=cur.parentNode||cur.ownerDocument||cur===event.target.ownerDocument&&window}while(cur&&!event.isPropagationStopped());if(!event.isDefaultPrevented()){var old,special=jQuery.event.special[type]||{};if((!special._default||!1===special._default.call(elem.ownerDocument,event))&&("click"!==type||!jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)){try{ontype&&elem[type]&&((old=elem[ontype])&&(elem[ontype]=null),elem[jQuery.event.triggered=type]())}catch(ieError){}old&&(elem[ontype]=old),jQuery.event.triggered=undefined}}return event.result}}else jQuery.each(jQuery.cache,function(){var internalCache=this[jQuery.expando];internalCache&&internalCache.events&&internalCache.events[type]&&jQuery.event.trigger(event,data,internalCache.handle.elem)})},handle:function(event){event=jQuery.event.fix(event||window.event);var handlers=((jQuery._data(this,"events")||{})[event.type]||[]).slice(0),run_all=!event.exclusive&&!event.namespace,args=Array.prototype.slice.call(arguments,0);(args[0]=event).currentTarget=this;for(var j=0,l=handlers.length;j<l;j++){var handleObj=handlers[j];if(run_all||event.namespace_re.test(handleObj.namespace)){event.handler=handleObj.handler,event.data=handleObj.data;var ret=(event.handleObj=handleObj).handler.apply(this,args);if(ret!==undefined&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation()),event.isImmediatePropagationStopped())break}}return event.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(event){if(event[jQuery.expando])return event;var originalEvent=event;event=jQuery.Event(originalEvent);for(var prop,i=this.props.length;i;)event[prop=this.props[--i]]=originalEvent[prop];if(event.target||(event.target=event.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),!event.relatedTarget&&event.fromElement&&(event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement),null==event.pageX&&null!=event.clientX){var eventDocument=event.target.ownerDocument||document,doc=eventDocument.documentElement,body=eventDocument.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}return null!=event.which||null==event.charCode&&null==event.keyCode||(event.which=null!=event.charCode?event.charCode:event.keyCode),!event.metaKey&&event.ctrlKey&&(event.metaKey=event.ctrlKey),event.which||event.button===undefined||(event.which=1&event.button?1:2&event.button?3:4&event.button?2:0),event},guid:1e8,proxy:jQuery.proxy,special:{ready:{setup:jQuery.bindReady,teardown:jQuery.noop},live:{add:function(handleObj){jQuery.event.add(this,liveConvert(handleObj.origType,handleObj.selector),jQuery.extend({},handleObj,{handler:liveHandler,guid:handleObj.handler.guid}))},remove:function(handleObj){jQuery.event.remove(this,liveConvert(handleObj.origType,handleObj.selector),handleObj)}},beforeunload:{setup:function(data,namespaces,eventHandle){jQuery.isWindow(this)&&(this.onbeforeunload=eventHandle)},teardown:function(namespaces,eventHandle){this.onbeforeunload===eventHandle&&(this.onbeforeunload=null)}}}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){elem.detachEvent&&elem.detachEvent("on"+type,handle)},jQuery.Event=function(src,props){if(!this.preventDefault)return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||!1===src.returnValue||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};function withinElement(event){var related=event.relatedTarget,inside=!1,eventType=event.type;event.type=event.data,related!==this&&(related&&(inside=jQuery.contains(this,related)),inside||(jQuery.event.handle.apply(this,arguments),event.type=eventType))}function delegate(event){event.type=event.data,jQuery.event.handle.apply(this,arguments)}if(jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={setup:function(data){jQuery.event.add(this,fix,data&&data.selector?delegate:withinElement,orig)},teardown:function(data){jQuery.event.remove(this,fix,data&&data.selector?delegate:withinElement)}}}),jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(data,namespaces){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click.specialSubmit",function(e){var elem=e.target,type=elem.type;"submit"!==type&&"image"!==type||!jQuery(elem).closest("form").length||trigger("submit",this,arguments)}),jQuery.event.add(this,"keypress.specialSubmit",function(e){var elem=e.target,type=elem.type;"text"!==type&&"password"!==type||!jQuery(elem).closest("form").length||13!==e.keyCode||trigger("submit",this,arguments)})},teardown:function(namespaces){jQuery.event.remove(this,".specialSubmit")}}),!jQuery.support.changeBubbles){function getVal(elem){var type=elem.type,val=elem.value;return"radio"===type||"checkbox"===type?val=elem.checked:"select-multiple"===type?val=-1<elem.selectedIndex?jQuery.map(elem.options,function(elem){return elem.selected}).join("-"):"":jQuery.nodeName(elem,"select")&&(val=elem.selectedIndex),val}var changeFilters,testChange=function(e,argument_1){var data,val,elem=e.target;rformElems.test(elem.nodeName)&&!elem.readOnly&&(data=jQuery._data(elem,"_change_data"),val=getVal(elem),"focusout"===e.type&&"radio"===elem.type||jQuery._data(elem,"_change_data",val),data!==undefined&&val!==data&&(null==data&&!val||(e.type="change",e.liveFired=undefined,jQuery.event.trigger(e,argument_1,elem))))};jQuery.event.special.change={filters:{focusout:testChange,beforedeactivate:testChange,click:function(e){var elem=e.target,type=jQuery.nodeName(elem,"input")?elem.type:"";"radio"!==type&&"checkbox"!==type&&!jQuery.nodeName(elem,"select")||testChange.call(this,e)},keydown:function(e){var elem=e.target,type=jQuery.nodeName(elem,"input")?elem.type:"";(13!==e.keyCode||jQuery.nodeName(elem,"textarea"))&&(32!==e.keyCode||"checkbox"!==type&&"radio"!==type)&&"select-multiple"!==type||testChange.call(this,e)},beforeactivate:function(e){var elem=e.target;jQuery._data(elem,"_change_data",getVal(elem))}},setup:function(data,namespaces){if("file"===this.type)return!1;for(var type in changeFilters)jQuery.event.add(this,type+".specialChange",changeFilters[type]);return rformElems.test(this.nodeName)},teardown:function(namespaces){return jQuery.event.remove(this,".specialChange"),rformElems.test(this.nodeName)}},(changeFilters=jQuery.event.special.change.filters).focus=changeFilters.beforeactivate}function trigger(type,elem,args){var event=jQuery.extend({},args[0]);event.type=type,event.originalEvent={},event.liveFired=undefined,jQuery.event.handle.call(elem,event),event.isDefaultPrevented()&&args[0].preventDefault()}jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0;function handler(donor){var e=jQuery.event.fix(donor);e.type=fix,e.originalEvent={},jQuery.event.trigger(e,null,e.target),e.isDefaultPrevented()&&donor.preventDefault()}jQuery.event.special[fix]={setup:function(){0==attaches++&&document.addEventListener(orig,handler,!0)},teardown:function(){0==--attaches&&document.removeEventListener(orig,handler,!0)}}}),jQuery.each(["bind","one"],function(i,name){jQuery.fn[name]=function(type,data,fn){var handler;if("object"==typeof type){for(var key in type)this[name](key,data,type[key],fn);return this}if(2!==arguments.length&&!1!==data||(fn=data,data=undefined),"one"===name?(handler=function(event){return jQuery(this).unbind(event,handler),fn.apply(this,arguments)}).guid=fn.guid||jQuery.guid++:handler=fn,"unload"===type&&"one"!==name)this.one(type,data,fn);else for(var i=0,l=this.length;i<l;i++)jQuery.event.add(this[i],type,handler,data);return this}}),jQuery.fn.extend({unbind:function(type,fn){if("object"!=typeof type||type.preventDefault)for(var i=0,l=this.length;i<l;i++)jQuery.event.remove(this[i],type,fn);else for(var key in type)this.unbind(key,type[key]);return this},delegate:function(selector,types,data,fn){return this.live(types,data,fn,selector)},undelegate:function(selector,types,fn){return 0===arguments.length?this.unbind("live"):this.die(types,null,fn,selector)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){if(this[0])return jQuery.event.trigger(type,data,this[0],!0)},toggle:function(fn){function toggler(event){var lastToggle=(jQuery.data(this,"lastToggle"+fn.guid)||0)%i;return jQuery.data(this,"lastToggle"+fn.guid,1+lastToggle),event.preventDefault(),args[lastToggle].apply(this,arguments)||!1}var args=arguments,guid=fn.guid||jQuery.guid++,i=0;for(toggler.guid=guid;i<args.length;)args[i++].guid=guid;return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});var liveMap={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};function liveHandler(event){var stop,maxLevel,related,match,handleObj,elem,j,i,l,close,namespace,ret,elems=[],selectors=[],events=jQuery._data(this,"events");if(event.liveFired!==this&&events&&events.live&&!event.target.disabled&&(!event.button||"click"!==event.type)){event.namespace&&(namespace=new RegExp("(^|\\.)"+event.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),event.liveFired=this;var live=events.live.slice(0);for(j=0;j<live.length;j++)(handleObj=live[j]).origType.replace(rnamespaces,"")===event.type?selectors.push(handleObj.selector):live.splice(j--,1);for(i=0,l=(match=jQuery(event.target).closest(selectors,event.currentTarget)).length;i<l;i++)for(close=match[i],j=0;j<live.length;j++)handleObj=live[j],close.selector!==handleObj.selector||namespace&&!namespace.test(handleObj.namespace)||close.elem.disabled||(elem=close.elem,related=null,"mouseenter"!==handleObj.preType&&"mouseleave"!==handleObj.preType||(event.type=handleObj.preType,(related=jQuery(event.relatedTarget).closest(handleObj.selector)[0])&&jQuery.contains(elem,related)&&(related=elem)),related&&related===elem||elems.push({elem:elem,handleObj:handleObj,level:close.level}));for(i=0,l=elems.length;i<l&&(match=elems[i],!(maxLevel&&match.level>maxLevel))&&(event.currentTarget=match.elem,event.data=match.handleObj.data,event.handleObj=match.handleObj,!1!==(ret=match.handleObj.origHandler.apply(match.elem,arguments))&&!event.isPropagationStopped()||(maxLevel=match.level,!1===ret&&(stop=!1),!event.isImmediatePropagationStopped()));i++);return stop}}function liveConvert(type,selector){return(type&&"*"!==type?type+".":"")+selector.replace(rperiod,"`").replace(rspaces,"&")}jQuery.each(["live","die"],function(i,name){jQuery.fn[name]=function(types,data,fn,origSelector){var type,match,namespaces,preType,i=0,selector=origSelector||this.selector,context=origSelector?this:jQuery(this.context);if("object"==typeof types&&!types.preventDefault){for(var key in types)context[name](key,data,types[key],selector);return this}if("die"===name&&!types&&origSelector&&"."===origSelector.charAt(0))return context.unbind(origSelector),this;for(!1!==data&&!jQuery.isFunction(data)||(fn=data||returnFalse,data=undefined),types=(types||"").split(" ");null!=(type=types[i++]);)if(namespaces="",(match=rnamespaces.exec(type))&&(namespaces=match[0],type=type.replace(rnamespaces,"")),"hover"!==type)if(liveMap[preType=type]?(types.push(liveMap[type]+namespaces),type+=namespaces):type=(liveMap[type]||type)+namespaces,"live"===name)for(var j=0,l=context.length;j<l;j++)jQuery.event.add(context[j],"live."+liveConvert(type,selector),{data:data,selector:selector,handler:fn,origType:type,origHandler:fn,preType:preType});else context.unbind("live."+liveConvert(type,selector),fn);else types.push("mouseenter"+namespaces,"mouseleave"+namespaces);return this}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return null==fn&&(fn=data,data=null),0<arguments.length?this.bind(name,data,fn):this.trigger(name)},jQuery.attrFn&&(jQuery.attrFn[name]=!0)}),function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=!1,baseHasDuplicate=!0,rBackslash=/\\/g,rNonWord=/\W/;[0,0].sort(function(){return baseHasDuplicate=!1,0});var Sizzle=function(selector,context,results,seed){results=results||[];var origContext=context=context||document;if(1!==context.nodeType&&9!==context.nodeType)return[];if(!selector||"string"!=typeof selector)return results;var m,set,checkSet,extra,ret,cur,pop,i,prune=!0,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do{if(chunker.exec(""),(m=chunker.exec(soFar))&&(soFar=m[3],parts.push(m[1]),m[2])){extra=m[3];break}}while(m);if(1<parts.length&&origPOS.exec(selector))if(2===parts.length&&Expr.relative[parts[0]])set=posProcess(parts[0]+parts[1],context);else for(set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);parts.length;)selector=parts.shift(),Expr.relative[selector]&&(selector+=parts.shift()),set=posProcess(selector,set);else if(!seed&&1<parts.length&&9===context.nodeType&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])&&(context=(ret=Sizzle.find(parts.shift(),context,contextXML)).expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]),context)for(set=(ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),1!==parts.length||"~"!==parts[0]&&"+"!==parts[0]||!context.parentNode?context:context.parentNode,contextXML)).expr?Sizzle.filter(ret.expr,ret.set):ret.set,0<parts.length?checkSet=makeArray(set):prune=!1;parts.length;)pop=cur=parts.pop(),Expr.relative[cur]?pop=parts.pop():cur="",null==pop&&(pop=context),Expr.relative[cur](checkSet,pop,contextXML);else checkSet=parts=[];if((checkSet=checkSet||set)||Sizzle.error(cur||selector),"[object Array]"===toString.call(checkSet))if(prune)if(context&&1===context.nodeType)for(i=0;null!=checkSet[i];i++)checkSet[i]&&(!0===checkSet[i]||1===checkSet[i].nodeType&&Sizzle.contains(context,checkSet[i]))&&results.push(set[i]);else for(i=0;null!=checkSet[i];i++)checkSet[i]&&1===checkSet[i].nodeType&&results.push(set[i]);else results.push.apply(results,checkSet);else makeArray(checkSet,results);return extra&&(Sizzle(extra,origContext,results,seed),Sizzle.uniqueSort(results)),results};Sizzle.uniqueSort=function(results){if(sortOrder&&(hasDuplicate=baseHasDuplicate,results.sort(sortOrder),hasDuplicate))for(var i=1;i<results.length;i++)results[i]===results[i-1]&&results.splice(i--,1);return results},Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)},Sizzle.matchesSelector=function(node,expr){return 0<Sizzle(expr,null,null,[node]).length},Sizzle.find=function(expr,context,isXML){var set;if(!expr)return[];for(var i=0,l=Expr.order.length;i<l;i++){var match,type=Expr.order[i];if(match=Expr.leftMatch[type].exec(expr)){var left=match[1];if(match.splice(1,1),"\\"!==left.substr(left.length-1)&&(match[1]=(match[1]||"").replace(rBackslash,""),null!=(set=Expr.find[type](match,context,isXML)))){expr=expr.replace(Expr.match[type],"");break}}}return{set:set=set||(void 0!==context.getElementsByTagName?context.getElementsByTagName("*"):[]),expr:expr}},Sizzle.filter=function(expr,set,inplace,not){for(var match,anyFound,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);expr&&set.length;){for(var type in Expr.filter)if(null!=(match=Expr.leftMatch[type].exec(expr))&&match[2]){var found,item,filter=Expr.filter[type],left=match[1];if(anyFound=!1,match.splice(1,1),"\\"===left.substr(left.length-1))continue;if(curLoop===result&&(result=[]),Expr.preFilter[type])if(match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter)){if(!0===match)continue}else anyFound=found=!0;if(match)for(var i=0;null!=(item=curLoop[i]);i++)if(item){var pass=not^!!(found=filter(item,match,i,curLoop));inplace&&null!=found?pass?anyFound=!0:curLoop[i]=!1:pass&&(result.push(item),anyFound=!0)}if(found!==undefined){if(inplace||(curLoop=result),expr=expr.replace(Expr.match[type],""),!anyFound)return[];break}}if(expr===old){if(null!=anyFound)break;Sizzle.error(expr)}old=expr}return curLoop},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};function fescape(all,num){return"\\"+(+num+1)}var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")},type:function(elem){return elem.getAttribute("type")}},relative:{"+":function(checkSet,part){var isPartStr="string"==typeof part,isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;isTag&&(part=part.toLowerCase());for(var elem,i=0,l=checkSet.length;i<l;i++)if(elem=checkSet[i]){for(;(elem=elem.previousSibling)&&1!==elem.nodeType;);checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||!1:elem===part}isPartStrNotTag&&Sizzle.filter(part,checkSet,!0)},">":function(checkSet,part){var elem,isPartStr="string"==typeof part,i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){for(part=part.toLowerCase();i<l;i++)if(elem=checkSet[i]){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part&&parent}}else{for(;i<l;i++)(elem=checkSet[i])&&(checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part);isPartStr&&Sizzle.filter(part,checkSet,!0)}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;"string"!=typeof part||rNonWord.test(part)||(nodeCheck=part=part.toLowerCase(),checkFn=dirNodeCheck),checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;"string"!=typeof part||rNonWord.test(part)||(nodeCheck=part=part.toLowerCase(),checkFn=dirNodeCheck),checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(void 0!==context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[]}},NAME:function(match,context){if(void 0!==context.getElementsByName){for(var ret=[],results=context.getElementsByName(match[1]),i=0,l=results.length;i<l;i++)results[i].getAttribute("name")===match[1]&&ret.push(results[i]);return 0===ret.length?null:ret}},TAG:function(match,context){if(void 0!==context.getElementsByTagName)return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){if(match=" "+match[1].replace(rBackslash,"")+" ",isXML)return match;for(var elem,i=0;null!=(elem=curLoop[i]);i++)elem&&(not^(elem.className&&0<=(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match))?inplace||result.push(elem):inplace&&(curLoop[i]=!1));return!1},ID:function(match){return match[1].replace(rBackslash,"")},TAG:function(match,curLoop){return match[1].replace(rBackslash,"").toLowerCase()},CHILD:function(match){if("nth"===match[1]){match[2]||Sizzle.error(match[0]),match[2]=match[2].replace(/^\+|\s*/g,"");var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(("even"===match[2]?"2n":"odd"===match[2]&&"2n+1")||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=+(test[1]+(test[2]||1)),match[3]=+test[3]}else match[2]&&Sizzle.error(match[0]);return match[0]=done++,match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");return!isXML&&Expr.attrMap[name]&&(match[1]=Expr.attrMap[name]),match[4]=(match[4]||match[5]||"").replace(rBackslash,""),"~="===match[2]&&(match[4]=" "+match[4]+" "),match},PSEUDO:function(match,curLoop,inplace,result,not){if("not"===match[1]){if(!(1<(chunker.exec(match[3])||"").length||/^\w/.test(match[3]))){var ret=Sizzle.filter(match[3],curLoop,inplace,!0^not);return inplace||result.push.apply(result,ret),!1}match[3]=Sizzle(match[3],null,null,curLoop)}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0]))return!0;return match},POS:function(match){return match.unshift(!0),match}},filters:{enabled:function(elem){return!1===elem.disabled&&"hidden"!==elem.type},disabled:function(elem){return!0===elem.disabled},checked:function(elem){return!0===elem.checked},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},parent:function(elem){return!!elem.firstChild},empty:function(elem){return!elem.firstChild},has:function(elem,i,match){return!!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){var attr=elem.getAttribute("type"),type=elem.type;return"input"===elem.nodeName.toLowerCase()&&"text"===type&&(attr===type||null===attr)},radio:function(elem){return"input"===elem.nodeName.toLowerCase()&&"radio"===elem.type},checkbox:function(elem){return"input"===elem.nodeName.toLowerCase()&&"checkbox"===elem.type},file:function(elem){return"input"===elem.nodeName.toLowerCase()&&"file"===elem.type},password:function(elem){return"input"===elem.nodeName.toLowerCase()&&"password"===elem.type},submit:function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&"submit"===elem.type},image:function(elem){return"input"===elem.nodeName.toLowerCase()&&"image"===elem.type},reset:function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&"reset"===elem.type},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)},focus:function(elem){return elem===elem.ownerDocument.activeElement}},setFilters:{first:function(elem,i){return 0===i},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2==0},odd:function(elem,i){return i%2==1},lt:function(elem,i,match){return i<+match[3]},gt:function(elem,i,match){return i>+match[3]},nth:function(elem,i,match){return+match[3]===i},eq:function(elem,i,match){return+match[3]===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter)return filter(elem,i,match,array);if("contains"===name)return 0<=(elem.textContent||elem.innerText||Sizzle.getText([elem])||"").indexOf(match[3]);if("not"===name){for(var not=match[3],j=0,l=not.length;j<l;j++)if(not[j]===elem)return!1;return!0}Sizzle.error(name)},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case"only":case"first":for(;node=node.previousSibling;)if(1===node.nodeType)return!1;if("first"===type)return!0;node=elem;case"last":for(;node=node.nextSibling;)if(1===node.nodeType)return!1;return!0;case"nth":var first=match[2],last=match[3];if(1===first&&0===last)return!0;var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling)1===node.nodeType&&(node.nodeIndex=++count);parent.sizcache=doneName}var diff=elem.nodeIndex-last;return 0===first?0==diff:diff%first==0&&0<=diff/first}},ID:function(elem,match){return 1===elem.nodeType&&elem.getAttribute("id")===match},TAG:function(elem,match){return"*"===match&&1===elem.nodeType||elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return-1<(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):null!=elem[name]?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return null==result?"!="===type:"="===type?value===check:"*="===type?0<=value.indexOf(check):"~="===type?0<=(" "+value+" ").indexOf(check):check?"!="===type?value!==check:"^="===type?0===value.indexOf(check):"$="===type?value.substr(value.length-check.length)===check:"|="===type&&(value===check||value.substr(0,check.length+1)===check+"-"):value&&!1!==result},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter)return filter(elem,i,match,array)}}},origPOS=Expr.match.POS;for(var type in Expr.match)Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source),Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape));var sortOrder,siblingCheck,form,id,root,div,makeArray=function(array,results){return array=Array.prototype.slice.call(array,0),results?(results.push.apply(results,array),results):array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if("[object Array]"===toString.call(array))Array.prototype.push.apply(ret,array);else if("number"==typeof array.length)for(var l=array.length;i<l;i++)ret.push(array[i]);else for(;array[i];i++)ret.push(array[i]);return ret}}function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=!1;for(elem=elem[dir];elem;){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(1!==elem.nodeType||isXML||(elem.sizcache=doneName,elem.sizset=i),elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=!1;for(elem=elem[dir];elem;){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(1===elem.nodeType)if(isXML||(elem.sizcache=doneName,elem.sizset=i),"string"!=typeof cur){if(elem===cur){match=!0;break}}else if(0<Sizzle.filter(cur,[elem]).length){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}document.documentElement.compareDocumentPosition?sortOrder=function(a,b){return a===b?(hasDuplicate=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:1:a.compareDocumentPosition?-1:1}:(sortOrder=function(a,b){if(a===b)return hasDuplicate=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup)return siblingCheck(a,b);if(!aup)return-1;if(!bup)return 1;for(;cur;)ap.unshift(cur),cur=cur.parentNode;for(cur=bup;cur;)bp.unshift(cur),cur=cur.parentNode;al=ap.length,bl=bp.length;for(var i=0;i<al&&i<bl;i++)if(ap[i]!==bp[i])return siblingCheck(ap[i],bp[i]);return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)},siblingCheck=function(a,b,ret){if(a===b)return ret;for(var cur=a.nextSibling;cur;){if(cur===b)return-1;cur=cur.nextSibling}return 1}),Sizzle.getText=function(elems){for(var elem,ret="",i=0;elems[i];i++)3===(elem=elems[i]).nodeType||4===elem.nodeType?ret+=elem.nodeValue:8!==elem.nodeType&&(ret+=Sizzle.getText(elem.childNodes));return ret},form=document.createElement("div"),id="script"+(new Date).getTime(),root=document.documentElement,form.innerHTML="<a name='"+id+"'/>",root.insertBefore(form,root.firstChild),document.getElementById(id)&&(Expr.find.ID=function(match,context,isXML){if(void 0!==context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||void 0!==m.getAttributeNode&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}},Expr.filter.ID=function(elem,match){var node=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return 1===elem.nodeType&&node&&node.nodeValue===match}),root.removeChild(form),root=form=null,(div=document.createElement("div")).appendChild(document.createComment("")),0<div.getElementsByTagName("*").length&&(Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if("*"===match[1]){for(var tmp=[],i=0;results[i];i++)1===results[i].nodeType&&tmp.push(results[i]);results=tmp}return results}),div.innerHTML="<a href='#'></a>",div.firstChild&&void 0!==div.firstChild.getAttribute&&"#"!==div.firstChild.getAttribute("href")&&(Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}),div=null,document.querySelectorAll&&function(){var oldSizzle=Sizzle,div=document.createElement("div");if(div.innerHTML="<p class='TEST'></p>",!div.querySelectorAll||0!==div.querySelectorAll(".TEST").length){for(var prop in Sizzle=function(query,context,extra,seed){if(context=context||document,!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);if(match&&(1===context.nodeType||9===context.nodeType)){if(match[1])return makeArray(context.getElementsByTagName(query),extra);if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName)return makeArray(context.getElementsByClassName(match[2]),extra)}if(9===context.nodeType){if("body"===query&&context.body)return makeArray([context.body],extra);if(match&&match[3]){var elem=context.getElementById(match[3]);if(!elem||!elem.parentNode)return makeArray([],extra);if(elem.id===match[3])return makeArray([elem],extra)}try{return makeArray(context.querySelectorAll(query),extra)}catch(qsaError){}}else if(1===context.nodeType&&"object"!==context.nodeName.toLowerCase()){var oldContext=context,old=context.getAttribute("id"),nid=old||"__sizzle__",hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);old?nid=nid.replace(/'/g,"\\$&"):context.setAttribute("id",nid),relativeHierarchySelector&&hasParent&&(context=context.parentNode);try{if(!relativeHierarchySelector||hasParent)return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra)}catch(pseudoError){}finally{old||oldContext.removeAttribute("id")}}}return oldSizzle(query,context,extra,seed)},oldSizzle)Sizzle[prop]=oldSizzle[prop];div=null}}(),function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement("div"),"div"),pseudoWorks=!1;try{matches.call(document.documentElement,"[test!='']:sizzle")}catch(pseudoError){pseudoWorks=!0}Sizzle.matchesSelector=function(node,expr){if(expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!Sizzle.isXML(node))try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&11!==node.document.nodeType)return ret}}catch(e){}return 0<Sizzle(expr,null,null,[node]).length}}}(),function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>",div.getElementsByClassName&&0!==div.getElementsByClassName("e").length&&(div.lastChild.className="e",1!==div.getElementsByClassName("e").length&&(Expr.order.splice(1,0,"CLASS"),Expr.find.CLASS=function(match,context,isXML){if(void 0!==context.getElementsByClassName&&!isXML)return context.getElementsByClassName(match[1])},div=null))}(),document.documentElement.contains?Sizzle.contains=function(a,b){return a!==b&&(!a.contains||a.contains(b))}:document.documentElement.compareDocumentPosition?Sizzle.contains=function(a,b){return!!(16&a.compareDocumentPosition(b))}:Sizzle.contains=function(){return!1},Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName};var posProcess=function(selector,context){for(var match,tmpSet=[],later="",root=context.nodeType?[context]:context;match=Expr.match.PSEUDO.exec(selector);)later+=match[0],selector=selector.replace(Expr.match.PSEUDO,"");selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++)Sizzle(selector,root[i],tmpSet);return Sizzle.filter(later,tmpSet)};jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.filters,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.POS,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};function isDisconnected(node){return!node||!node.parentNode||11===node.parentNode.nodeType}function winnow(elements,qualifier,keep){if(qualifier=qualifier||0,jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)===keep});if(qualifier.nodeType)return jQuery.grep(elements,function(elem,i){return elem===qualifier===keep});if("string"==typeof qualifier){var filtered=jQuery.grep(elements,function(elem){return 1===elem.nodeType});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem,i){return 0<=jQuery.inArray(elem,qualifier)===keep})}jQuery.fn.extend({find:function(selector){var i,l,self=this;if("string"!=typeof selector)return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++)if(jQuery.contains(self[i],this))return!0});var length,n,r,ret=this.pushStack("","find",selector);for(i=0,l=this.length;i<l;i++)if(length=ret.length,jQuery.find(selector,this[i],ret),0<i)for(n=length;n<ret.length;n++)for(r=0;r<length;r++)if(ret[r]===ret[n]){ret.splice(n--,1);break}return ret},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector,!1),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,!0),"filter",selector)},is:function(selector){return!!selector&&("string"==typeof selector?0<jQuery.filter(selector,this).length:0<this.filter(selector).length)},closest:function(selectors,context){var i,l,ret=[],cur=this[0];if(jQuery.isArray(selectors)){var match,selector,matches={},level=1;if(cur&&selectors.length){for(i=0,l=selectors.length;i<l;i++)matches[selector=selectors[i]]||(matches[selector]=POS.test(selector)?jQuery(selector,context||this.context):selector);for(;cur&&cur.ownerDocument&&cur!==context;){for(selector in matches)((match=matches[selector]).jquery?-1<match.index(cur):jQuery(cur).is(match))&&ret.push({selector:selector,elem:cur,level:level});cur=cur.parentNode,level++}}return ret}var pos=POS.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;i<l;i++)for(cur=this[i];cur;){if(pos?-1<pos.index(cur):jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}if(!(cur=cur.parentNode)||!cur.ownerDocument||cur===context||11===cur.nodeType)break}return ret=1<ret.length?jQuery.unique(ret):ret,this.pushStack(ret,"closest",selectors)},index:function(elem){return elem&&"string"!=typeof elem?jQuery.inArray(elem.jquery?elem[0]:elem,this):jQuery.inArray(this[0],elem?jQuery(elem):this.parent().children())},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},andSelf:function(){return this.add(this.prevObject)}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return jQuery.nth(elem,2,"nextSibling")},prev:function(elem){return jQuery.nth(elem,2,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until),args=slice.call(arguments);return runtil.test(name)||(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),ret=1<this.length&&!guaranteedUnique[name]?jQuery.unique(ret):ret,(1<this.length||rmultiselector.test(selector))&&rparentsprev.test(name)&&(ret=ret.reverse()),this.pushStack(ret,name,args.join(","))}}),jQuery.extend({filter:function(expr,elems,not){return not&&(expr=":not("+expr+")"),1===elems.length?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},nth:function(cur,result,dir,elem){result=result||1;for(var num=0;cur&&(1!==cur.nodeType||++num!==result);cur=cur[dir]);return cur},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}});var rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnocache=/<(?:script|object|embed|option|style)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var internalKey=jQuery.expando,oldData=jQuery.data(src),curData=jQuery.data(dest,oldData);if(oldData=oldData[internalKey]){var events=oldData.events;if(curData=curData[internalKey]=jQuery.extend({},oldData),events)for(var type in delete curData.handle,curData.events={},events)for(var i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type+(events[type][i].namespace?".":"")+events[type][i].namespace,events[type][i],events[type][i].data)}}}function cloneFixAttributes(src,dest){var nodeName;1===dest.nodeType&&(dest.clearAttributes&&dest.clearAttributes(),dest.mergeAttributes&&dest.mergeAttributes(src),"object"===(nodeName=dest.nodeName.toLowerCase())?dest.outerHTML=src.outerHTML:"input"!==nodeName||"checkbox"!==src.type&&"radio"!==src.type?"option"===nodeName?dest.selected=src.defaultSelected:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue):(src.checked&&(dest.defaultChecked=dest.checked=src.checked),dest.value!==src.value&&(dest.value=src.value)),dest.removeAttribute(jQuery.expando))}function getAll(elem){return"getElementsByTagName"in elem?elem.getElementsByTagName("*"):"querySelectorAll"in elem?elem.querySelectorAll("*"):[]}function fixDefaultChecked(elem){"checkbox"!==elem.type&&"radio"!==elem.type||(elem.defaultChecked=elem.checked)}function findInputs(elem){jQuery.nodeName(elem,"input")?fixDefaultChecked(elem):"getElementsByTagName"in elem&&jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked)}function evalScript(i,elem){elem.src?jQuery.ajax({url:elem.src,async:!1,dataType:"script"}):jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"/*$0*/")),elem.parentNode&&elem.parentNode.removeChild(elem)}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.support.htmlSerialize||(wrapMap._default=[1,"div<div>","</div>"]),jQuery.fn.extend({text:function(text){return jQuery.isFunction(text)?this.each(function(i){var self=jQuery(this);self.text(text.call(this,i,self.text()))}):"object"!=typeof text&&text!==undefined?this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text)):jQuery.text(this)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(elem){1===this.nodeType&&this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,!0,function(elem){1===this.nodeType&&this.insertBefore(elem,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this)});if(arguments.length){var set=jQuery(arguments[0]);return set.push.apply(set,this.toArray()),this.pushStack(set,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)});if(arguments.length){var set=this.pushStack(this,"after",arguments);return set.push.apply(set,jQuery(arguments[0]).toArray()),set}},remove:function(selector,keepData){for(var elem,i=0;null!=(elem=this[i]);i++)selector&&!jQuery.filter(selector,[elem]).length||(keepData||1!==elem.nodeType||(jQuery.cleanData(elem.getElementsByTagName("*")),jQuery.cleanData([elem])),elem.parentNode&&elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++)for(1===elem.nodeType&&jQuery.cleanData(elem.getElementsByTagName("*"));elem.firstChild;)elem.removeChild(elem.firstChild);return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){if(value===undefined)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(rinlinejQuery,""):null;if("string"!=typeof value||rnocache.test(value)||!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(value)||wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()])jQuery.isFunction(value)?this.each(function(i){var self=jQuery(this);self.html(value.call(this,i,self.html()))}):this.empty().append(value);else{value=value.replace(rxhtmlTag,"<$1></$2>");try{for(var i=0,l=this.length;i<l;i++)1===this[i].nodeType&&(jQuery.cleanData(this[i].getElementsByTagName("*")),this[i].innerHTML=value)}catch(e){this.empty().append(value)}}return this},replaceWith:function(value){return this[0]&&this[0].parentNode?jQuery.isFunction(value)?this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))}):("string"!=typeof value&&(value=jQuery(value).detach()),this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove(),next?jQuery(next).before(value):jQuery(parent).append(value)})):this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,table,callback){var results,first,fragment,parent,elem,value=args[0],scripts=[];if(!jQuery.support.checkClone&&3===arguments.length&&"string"==typeof value&&rchecked.test(value))return this.each(function(){jQuery(this).domManip(args,table,callback,!0)});if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined),self.domManip(args,table,callback)});if(this[0]){if(parent=value&&value.parentNode,first=1===(fragment=(results=jQuery.support.parentNode&&parent&&11===parent.nodeType&&parent.childNodes.length===this.length?{fragment:parent}:jQuery.buildFragment(args,this,scripts)).fragment).childNodes.length?fragment=fragment.firstChild:fragment.firstChild){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length,lastIndex=l-1;i<l;i++)callback.call(table?(elem=this[i],jQuery.nodeName(elem,"table")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem):this[i],results.cacheable||1<l&&i<lastIndex?jQuery.clone(fragment,!0,!0):fragment)}scripts.length&&jQuery.each(scripts,evalScript)}return this}}),jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc;return nodes&&nodes[0]&&(doc=nodes[0].ownerDocument||nodes[0]),doc.createDocumentFragment||(doc=document),1===args.length&&"string"==typeof args[0]&&args[0].length<512&&doc===document&&"<"===args[0].charAt(0)&&!rnocache.test(args[0])&&(jQuery.support.checkClone||!rchecked.test(args[0]))&&(cacheable=!0,(cacheresults=jQuery.fragments[args[0]])&&1!==cacheresults&&(fragment=cacheresults)),fragment||(fragment=doc.createDocumentFragment(),jQuery.clean(args,doc,fragment,scripts)),cacheable&&(jQuery.fragments[args[0]]=cacheresults?fragment:1),{fragment:fragment,cacheable:cacheable}},jQuery.fragments={},jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=1===this.length&&this[0].parentNode;if(parent&&11===parent.nodeType&&1===parent.childNodes.length&&1===insert.length)return insert[original](this[0]),this;for(var i=0,l=insert.length;i<l;i++){var elems=(0<i?this.clone(!0):this).get();jQuery(insert[i])[original](elems),ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone=elem.cloneNode(!0);if(!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(cloneFixAttributes(elem,clone),srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)cloneFixAttributes(srcElements[i],destElements[i]);if(dataAndEvents&&(cloneCopyEvent(elem,clone),deepDataAndEvents))for(srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)cloneCopyEvent(srcElements[i],destElements[i]);return srcElements=destElements=null,clone},clean:function(elems,context,fragment,scripts){var checkScriptType;void 0===(context=context||document).createElement&&(context=context.ownerDocument||context[0]&&context[0].ownerDocument||document);for(var j,elem,ret=[],i=0;null!=(elem=elems[i]);i++)if("number"==typeof elem&&(elem+=""),elem){if("string"==typeof elem)if(rhtml.test(elem)){elem=elem.replace(rxhtmlTag,"<$1></$2>");var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div");for(div.innerHTML=wrap[1]+elem+wrap[2];depth--;)div=div.lastChild;if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody="table"!==tag||hasBody?"<table>"!==wrap[1]||hasBody?[]:div.childNodes:div.firstChild&&div.firstChild.childNodes;for(j=tbody.length-1;0<=j;--j)jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length&&tbody[j].parentNode.removeChild(tbody[j])}!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild),elem=div.childNodes}else elem=context.createTextNode(elem);var len;if(!jQuery.support.appendChecked)if(elem[0]&&"number"==typeof(len=elem.length))for(j=0;j<len;j++)findInputs(elem[j]);else findInputs(elem);elem.nodeType?ret.push(elem):ret=jQuery.merge(ret,elem)}if(fragment)for(checkScriptType=function(elem){return!elem.type||rscriptType.test(elem.type)},i=0;ret[i];i++)if(!scripts||!jQuery.nodeName(ret[i],"script")||ret[i].type&&"text/javascript"!==ret[i].type.toLowerCase()){if(1===ret[i].nodeType){var jsTags=jQuery.grep(ret[i].getElementsByTagName("script"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags))}fragment.appendChild(ret[i])}else scripts.push(ret[i].parentNode?ret[i].parentNode.removeChild(ret[i]):ret[i]);return ret},cleanData:function(elems){for(var data,id,elem,cache=jQuery.cache,internalKey=jQuery.expando,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando,i=0;null!=(elem=elems[i]);i++)if((!elem.nodeName||!jQuery.noData[elem.nodeName.toLowerCase()])&&(id=elem[jQuery.expando])){if((data=cache[id]&&cache[id][internalKey])&&data.events){for(var type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);data.handle&&(data.handle.elem=null)}deleteExpando?delete elem[jQuery.expando]:elem.removeAttribute&&elem.removeAttribute(jQuery.expando),delete cache[id]}}});var curCSS,getComputedStyle,currentStyle,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnumpx=/^-?\d+(?:px)?$/i,rnum=/^-?\d/,rrelNum=/^[+\-]=/,rrelNumFilter=/[^+\-\.\de]+/g,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssWidth=["Left","Right"],cssHeight=["Top","Bottom"];function getWH(elem,name,extra){var val="width"===name?elem.offsetWidth:elem.offsetHeight,which="width"===name?cssWidth:cssHeight;return 0<val?"border"!==extra&&jQuery.each(which,function(){extra||(val-=parseFloat(jQuery.css(elem,"padding"+this))||0),"margin"===extra?val+=parseFloat(jQuery.css(elem,extra+this))||0:val-=parseFloat(jQuery.css(elem,"border"+this+"Width"))||0}):(((val=curCSS(elem,name,name))<0||null==val)&&(val=elem.style[name]||0),val=parseFloat(val)||0,extra&&jQuery.each(which,function(){val+=parseFloat(jQuery.css(elem,"padding"+this))||0,"padding"!==extra&&(val+=parseFloat(jQuery.css(elem,"border"+this+"Width"))||0),"margin"===extra&&(val+=parseFloat(jQuery.css(elem,extra+this))||0)})),val+"px"}jQuery.fn.css=function(name,value){return 2===arguments.length&&value===undefined?this:jQuery.access(this,name,value,!0,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)})},jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity","opacity");return""===ret?"1":ret}return elem.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];if(name=jQuery.cssProps[origName]||origName,value===undefined)return hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];if(!("number"===(type=typeof value)&&isNaN(value)||null==value||("string"===type&&rrelNum.test(value)&&(value=+value.replace(rrelNumFilter,"")+parseFloat(jQuery.css(elem,name)),type="number"),"number"!==type||jQuery.cssNumber[origName]||(value+="px"),hooks&&"set"in hooks&&(value=hooks.set(elem,value))===undefined)))try{style[name]=value}catch(e){}}},css:function(elem,name,extra){var ret,hooks;return name=jQuery.camelCase(name),hooks=jQuery.cssHooks[name],"cssFloat"===(name=jQuery.cssProps[name]||name)&&(name="float"),hooks&&"get"in hooks&&(ret=hooks.get(elem,!0,extra))!==undefined?ret:curCSS?curCSS(elem,name):void 0},swap:function(elem,options,callback){var old={};for(var name in options)old[name]=elem.style[name],elem.style[name]=options[name];for(name in callback.call(elem),options)elem.style[name]=old[name]}}),jQuery.curCSS=jQuery.css,jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){var val;if(computed)return 0!==elem.offsetWidth?getWH(elem,name,extra):(jQuery.swap(elem,cssShow,function(){val=getWH(elem,name,extra)}),val)},set:function(elem,value){return rnumpx.test(value)?0<=(value=parseFloat(value))?value+"px":void 0:value}}}),jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?parseFloat(RegExp.$1)/100+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle;style.zoom=1;var opacity=jQuery.isNaN(value)?"":"alpha(opacity="+100*value+")",filter=currentStyle&&currentStyle.filter||style.filter||"";style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){var ret;return jQuery.swap(elem,{display:"inline-block"},function(){ret=computed?curCSS(elem,"margin-right","marginRight"):elem.style.marginRight}),ret}})}),document.defaultView&&document.defaultView.getComputedStyle&&(getComputedStyle=function(elem,name){var ret,defaultView,computedStyle;return name=name.replace(rupper,"-$1").toLowerCase(),(defaultView=elem.ownerDocument.defaultView)?((computedStyle=defaultView.getComputedStyle(elem,null))&&(""!==(ret=computedStyle.getPropertyValue(name))||jQuery.contains(elem.ownerDocument.documentElement,elem)||(ret=jQuery.style(elem,name))),ret):undefined}),document.documentElement.currentStyle&&(currentStyle=function(elem,name){var left,ret=elem.currentStyle&&elem.currentStyle[name],rsLeft=elem.runtimeStyle&&elem.runtimeStyle[name],style=elem.style;return!rnumpx.test(ret)&&rnum.test(ret)&&(left=style.left,rsLeft&&(elem.runtimeStyle.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret||0,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(elem.runtimeStyle.left=rsLeft)),""===ret?"auto":ret}),curCSS=getComputedStyle||currentStyle,jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return 0===width&&0===height||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)});var ajaxLocation,ajaxLocParts,r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rinput=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rspacesAjax=/\s+/,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,_load=jQuery.fn.load,prefilters={},transports={};try{ajaxLocation=location.href}catch(e){(ajaxLocation=document.createElement("a")).href="",ajaxLocation=ajaxLocation.href}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if("string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*"),jQuery.isFunction(func))for(var dataType,placeBefore,dataTypes=dataTypeExpression.toLowerCase().split(rspacesAjax),i=0,length=dataTypes.length;i<length;i++)dataType=dataTypes[i],(placeBefore=/^\+/.test(dataType))&&(dataType=dataType.substr(1)||"*"),(structure[dataType]=structure[dataType]||[])[placeBefore?"unshift":"push"](func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){(inspected=inspected||{})[dataType=dataType||options.dataTypes[0]]=!0;for(var selection,list=structure[dataType],i=0,length=list?list.length:0,executeOnly=structure===prefilters;i<length&&(executeOnly||!selection);i++)"string"==typeof(selection=list[i](options,originalOptions,jqXHR))&&(selection=!executeOnly||inspected[selection]?undefined:(options.dataTypes.unshift(selection),inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected)));return!executeOnly&&selection||inspected["*"]||(selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected)),selection}function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v||jQuery.isArray(v)?i:"")+"]",v,traditional,add)});else if(traditional||null==obj||"object"!=typeof obj)add(prefix,obj);else for(var name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.extend({load:function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);if(!this.length)return this;var off=url.indexOf(" ");if(0<=off){var selector=url.slice(off,url.length);url=url.slice(0,off)}var type="GET";params&&(jQuery.isFunction(params)?(callback=params,params=undefined):"object"==typeof params&&(params=jQuery.param(params,jQuery.ajaxSettings.traditional),type="POST"));var self=this;return jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status,responseText){responseText=jqXHR.responseText,jqXHR.isResolved()&&(jqXHR.done(function(r){responseText=r}),self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText)),callback&&self.each(callback,[responseText,status,jqXHR])}}),this},serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.bind(o,f)}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type})}}),jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},ajaxSetup:function(target,settings){for(var field in settings?jQuery.extend(!0,target,jQuery.ajaxSettings,settings):(settings=target,target=jQuery.extend(!0,jQuery.ajaxSettings,settings)),{context:1,url:1})field in settings?target[field]=settings[field]:field in jQuery.ajaxSettings&&(target[field]=jQuery.ajaxSettings[field]);return target},ajaxSettings:{url:ajaxLocation,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(ajaxLocParts[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){"object"==typeof url&&(options=url,url=undefined),options=options||{};var ifModifiedKey,responseHeadersString,responseHeaders,transport,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery._Deferred(),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){return state||(s.mimeType=type),this},abort:function(statusText){return statusText=statusText||"abort",transport&&transport.abort(statusText),done(0,statusText),this}};function done(status,statusText,responses,headers){if(2!==state){state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status?4:0;var isSuccess,success,error,lastModified,etag,response=responses?function(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields)type in responses&&(jqXHR[responseFields[type]]=responses[type]);for(;"*"===dataTypes[0];)dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("content-type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType=firstDataType||type}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}(s,jqXHR,responses):undefined;if(200<=status&&status<300||304===status)if(s.ifModified&&((lastModified=jqXHR.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[ifModifiedKey]=lastModified),(etag=jqXHR.getResponseHeader("Etag"))&&(jQuery.etag[ifModifiedKey]=etag)),304===status)statusText="notmodified",isSuccess=!0;else try{success=function(s,response){s.dataFilter&&(response=s.dataFilter(response,s.dataType));var i,key,tmp,prev,conversion,conv,conv1,conv2,dataTypes=s.dataTypes,converters={},length=dataTypes.length,current=dataTypes[0];for(i=1;i<length;i++){if(1===i)for(key in s.converters)"string"==typeof key&&(converters[key.toLowerCase()]=s.converters[key]);if(prev=current,"*"===(current=dataTypes[i]))current=prev;else if("*"!==prev&&prev!==current){if(!(conv=converters[conversion=prev+" "+current]||converters["* "+current]))for(conv1 in conv2=undefined,converters)if(((tmp=conv1.split(" "))[0]===prev||"*"===tmp[0])&&(conv2=converters[tmp[1]+" "+current])){!0===(conv1=converters[conv1])?conv=conv2:!0===conv2&&(conv=conv1);break}conv||conv2||jQuery.error("No conversion from "+conversion.replace(" "," to ")),!0!==conv&&(response=conv?conv(response):conv2(conv1(response)))}}return response}(s,response),statusText="success",isSuccess=!0}catch(e){statusText="parsererror",error=e}else(error=statusText)&&!status||(statusText="error",status<0&&(status=0));jqXHR.status=status,jqXHR.statusText=statusText,isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]),completeDeferred.resolveWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}}if(deferred.promise(jqXHR),jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,jqXHR.complete=completeDeferred.done,jqXHR.statusCode=function(map){var tmp;if(map)if(state<2)for(tmp in map)statusCode[tmp]=[statusCode[tmp],map[tmp]];else tmp=map[jqXHR.status],jqXHR.then(tmp,tmp);return this},s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(rspacesAjax),null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]==ajaxLocParts[1]&&parts[2]==ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?80:443))==(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?80:443)))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return!1;if(fireGlobals=s.global,s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),fireGlobals&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),!s.hasContent&&(s.data&&(s.url+=(rquery.test(s.url)?"&":"?")+s.data),ifModifiedKey=s.url,!1===s.cache)){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+(ret===s.url?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}for(i in(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),s.ifModified&&(ifModifiedKey=ifModifiedKey||s.url,jQuery.lastModified[ifModifiedKey]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]),jQuery.etag[ifModifiedKey]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey])),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", */*; q=0.01":""):s.accepts["*"]),s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||2===state))return jqXHR.abort(),!1;for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&0<s.timeout&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){status<2?done(-1,e):jQuery.error(e)}}else done(-1,"No Transport");return jqXHR},param:function(a,traditional){function add(key,value){value=jQuery.isFunction(value)?value():value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)}var s=[];if(traditional===undefined&&(traditional=jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(var prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")}}),jQuery.extend({active:0,lastModified:{},etag:{}});var jsc=jQuery.now(),jsre=/(\=)\?(&|$)|\?\?/i;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return jQuery.expando+"_"+jsc++}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var inspectData="application/x-www-form-urlencoded"===s.contentType&&"string"==typeof s.data;if("jsonp"===s.dataTypes[0]||!1!==s.jsonp&&(jsre.test(s.url)||inspectData&&jsre.test(s.data))){var responseContainer,jsonpCallback=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,previous=window[jsonpCallback],url=s.url,data=s.data,replace="$1"+jsonpCallback+"$2";return!1!==s.jsonp&&(url=url.replace(jsre,replace),s.url===url&&(inspectData&&(data=data.replace(jsre,replace)),s.data===data&&(url+=(/\?/.test(url)?"&":"?")+s.jsonp+"="+jsonpCallback))),s.url=url,s.data=data,window[jsonpCallback]=function(response){responseContainer=[response]},jqXHR.always(function(){window[jsonpCallback]=previous,responseContainer&&jQuery.isFunction(previous)&&window[jsonpCallback](responseContainer[0])}),s.converters["script json"]=function(){return responseContainer||jQuery.error(jsonpCallback+" was not called"),responseContainer[0]},s.dataTypes[0]="json","script"}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){(script=document.createElement("script")).async="async",s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){!isAbort&&script.readyState&&!/loaded|complete/.test(script.readyState)||(script.onload=script.onreadystatechange=null,head&&script.parentNode&&head.removeChild(script),script=undefined,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(0,1)}}}});var xhrCallbacks,xhr,xhrOnUnloadAbort=!!window.ActiveXObject&&function(){for(var key in xhrCallbacks)xhrCallbacks[key](0,1)},xhrId=0;function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:createStandardXHR,xhr=jQuery.ajaxSettings.xhr(),jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&"withCredentials"in xhr}),jQuery.support.ajax&&jQuery.ajaxTransport(function(s){var callback;if(!s.crossDomain||jQuery.support.cors)return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username?xhr.open(s.type,s.url,s.async,s.username,s.password):xhr.open(s.type,s.url,s.async),s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType),s.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(_){}xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||4===xhr.readyState))if(callback=undefined,handle&&(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort&&delete xhrCallbacks[handle]),isAbort)4!==xhr.readyState&&xhr.abort();else{status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),responses={},(xml=xhr.responseXML)&&xml.documentElement&&(responses.xml=xml),responses.text=xhr.responseText;try{statusText=xhr.statusText}catch(e){statusText=""}status||!s.isLocal||s.crossDomain?1223===status&&(status=204):status=responses.text?200:404}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)},s.async&&4!==xhr.readyState?(handle=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort)),xhrCallbacks[handle]=callback),xhr.onreadystatechange=callback):callback()},abort:function(){callback&&callback(0,1)}}});var iframe,iframeDoc,timerId,fxNow,elemdisplay={},rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame;function createFxNow(){return setTimeout(clearFxNow,0),fxNow=jQuery.now()}function clearFxNow(){fxNow=undefined}function genFx(type,num){var obj={};return jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type}),obj}function defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var body=document.body,elem=jQuery("<"+nodeName+">").appendTo(body),display=elem.css("display");elem.remove(),"none"!==display&&""!==display||(iframe||((iframe=document.createElement("iframe")).frameBorder=iframe.width=iframe.height=0),body.appendChild(iframe),iframeDoc&&iframe.createElement||((iframeDoc=(iframe.contentWindow||iframe.contentDocument).document).write(("CSS1Compat"===document.compatMode?"<!doctype html>":"")+"<html><body>"),iframeDoc.close()),elem=iframeDoc.createElement(nodeName),iframeDoc.body.appendChild(elem),display=jQuery.css(elem,"display"),body.removeChild(iframe)),elemdisplay[nodeName]=display}return elemdisplay[nodeName]}jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||0===speed)return this.animate(genFx("show",3),speed,easing,callback);for(var i=0,j=this.length;i<j;i++)(elem=this[i]).style&&(display=elem.style.display,jQuery._data(elem,"olddisplay")||"none"!==display||(display=elem.style.display=""),""===display&&"none"===jQuery.css(elem,"display")&&jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName)));for(i=0;i<j;i++)(elem=this[i]).style&&(""!==(display=elem.style.display)&&"none"!==display||(elem.style.display=jQuery._data(elem,"olddisplay")||""));return this},hide:function(speed,easing,callback){if(speed||0===speed)return this.animate(genFx("hide",3),speed,easing,callback);for(var i=0,j=this.length;i<j;i++)if(this[i].style){var display=jQuery.css(this[i],"display");"none"===display||jQuery._data(this[i],"olddisplay")||jQuery._data(this[i],"olddisplay",display)}for(i=0;i<j;i++)this[i].style&&(this[i].style.display="none");return this},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool="boolean"==typeof fn;return jQuery.isFunction(fn)&&jQuery.isFunction(fn2)?this._toggle.apply(this,arguments):null==fn||bool?this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]()}):this.animate(genFx("toggle",3),fn,fn2,callback),this},fadeTo:function(speed,to,easing,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);return jQuery.isEmptyObject(prop)?this.each(optall.complete,[!1]):(prop=jQuery.extend({},prop),this[!1===optall.queue?"each":"queue"](function(){!1===optall.queue&&jQuery._mark(this);var name,val,p,e,parts,start,end,unit,opt=jQuery.extend({},optall),isElement=1===this.nodeType,hidden=isElement&&jQuery(this).is(":hidden");for(p in opt.animatedProperties={},prop){if(p!==(name=jQuery.camelCase(p))&&(prop[name]=prop[p],delete prop[p]),val=prop[name],jQuery.isArray(val)?(opt.animatedProperties[name]=val[1],val=prop[name]=val[0]):opt.animatedProperties[name]=opt.specialEasing&&opt.specialEasing[name]||opt.easing||"swing","hide"===val&&hidden||"show"===val&&!hidden)return opt.complete.call(this);!isElement||"height"!==name&&"width"!==name||(opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===jQuery.css(this,"display")&&"none"===jQuery.css(this,"float")&&(!jQuery.support.inlineBlockNeedsLayout||"inline"===defaultDisplay(this.nodeName)?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)))}for(p in null!=opt.overflow&&(this.style.overflow="hidden"),prop)e=new jQuery.fx(this,opt,p),val=prop[p],rfxtypes.test(val)?e["toggle"===val?hidden?"show":"hide":val]():(parts=rfxnum.exec(val),start=e.cur(),parts?(end=parseFloat(parts[2]),"px"!==(unit=parts[3]||(jQuery.cssNumber[p]?"":"px"))&&(jQuery.style(this,p,(end||1)+unit),start=(end||1)/e.cur()*start,jQuery.style(this,p,start+unit)),parts[1]&&(end=("-="===parts[1]?-1:1)*end+start),e.custom(start,end,unit)):e.custom(start,val,""));return!0}))},stop:function(clearQueue,gotoEnd){return clearQueue&&this.queue([]),this.each(function(){var timers=jQuery.timers,i=timers.length;for(gotoEnd||jQuery._unmark(!0,this);i--;)timers[i].elem===this&&(gotoEnd&&timers[i](!0),timers.splice(i,1))}),gotoEnd||this.dequeue(),this}}),jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,opt.old=opt.complete,opt.complete=function(noUnmark){jQuery.isFunction(opt.old)&&opt.old.call(this),!1!==opt.queue?jQuery.dequeue(this):!1!==noUnmark&&jQuery._unmark(this)},opt},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p},swing:function(p,n,firstNum,diff){return(-Math.cos(p*Math.PI)/2+.5)*diff+firstNum}},timers:[],fx:function(elem,options,prop){this.options=options,this.elem=elem,this.prop=prop,options.orig=options.orig||{}}}),jQuery.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var parsed,r=jQuery.css(this.elem,this.prop);return isNaN(parsed=parseFloat(r))?r&&"auto"!==r?r:0:parsed},custom:function(from,to,unit){var raf,self=this,fx=jQuery.fx;function t(gotoEnd){return self.step(gotoEnd)}this.startTime=fxNow||createFxNow(),this.start=from,this.end=to,this.unit=unit||this.unit||(jQuery.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,t.elem=this.elem,t()&&jQuery.timers.push(t)&&!timerId&&(requestAnimationFrame?(timerId=!0,raf=function(){timerId&&(requestAnimationFrame(raf),fx.tick())},requestAnimationFrame(raf)):timerId=setInterval(fx.tick,fx.interval))},show:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop),this.options.show=!0,this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(gotoEnd){var i,n,t=fxNow||createFxNow(),done=!0,elem=this.elem,options=this.options;if(gotoEnd||t>=options.duration+this.startTime){for(i in this.now=this.end,this.pos=this.state=1,this.update(),options.animatedProperties[this.prop]=!0,options.animatedProperties)!0!==options.animatedProperties[i]&&(done=!1);if(done){if(null==options.overflow||jQuery.support.shrinkWrapBlocks||jQuery.each(["","X","Y"],function(index,value){elem.style["overflow"+value]=options.overflow[index]}),options.hide&&jQuery(elem).hide(),options.hide||options.show)for(var p in options.animatedProperties)jQuery.style(elem,p,options.orig[p]);options.complete.call(elem)}return!1}return options.duration==1/0?this.now=t:(n=t-this.startTime,this.state=n/options.duration,this.pos=jQuery.easing[options.animatedProperties[this.prop]](this.state,n,0,1,options.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},jQuery.extend(jQuery.fx,{tick:function(){for(var timers=jQuery.timers,i=0;i<timers.length;++i)timers[i]()||timers.splice(i--,1);timers.length||jQuery.fx.stop()},interval:13,stop:function(){clearInterval(timerId),timerId=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now)},_default:function(fx){fx.elem.style&&null!=fx.elem.style[fx.prop]?fx.elem.style[fx.prop]=("width"===fx.prop||"height"===fx.prop?Math.max(0,fx.now):fx.now)+fx.unit:fx.elem[fx.prop]=fx.now}}}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length});var rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&(elem.defaultView||elem.parentWindow)}"getBoundingClientRect"in document.documentElement?jQuery.fn.offset=function(options){var box,elem=this[0];if(options)return this.each(function(i){jQuery.offset.setOffset(this,options,i)});if(!elem||!elem.ownerDocument)return null;if(elem===elem.ownerDocument.body)return jQuery.offset.bodyOffset(elem);try{box=Siesta.Util.Role.Dom.meta.methods.getBoundingClientRect.value(elem)}catch(e){}var doc=elem.ownerDocument,docElem=doc.documentElement;if(!box||!jQuery.contains(docElem,elem))return box?{top:box.top,left:box.left}:{top:0,left:0};var body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop,scrollLeft=win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft;return{top:Math.floor(box.top)+scrollTop-clientTop,left:Math.floor(box.left)+scrollLeft-clientLeft}}:jQuery.fn.offset=function(options){var elem=this[0];if(options)return this.each(function(i){jQuery.offset.setOffset(this,options,i)});if(!elem||!elem.ownerDocument)return null;if(elem===elem.ownerDocument.body)return jQuery.offset.bodyOffset(elem);jQuery.offset.initialize();for(var computedStyle,offsetParent=elem.offsetParent,doc=elem.ownerDocument,docElem=doc.documentElement,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;(elem=elem.parentNode)&&elem!==body&&elem!==docElem&&(!jQuery.offset.supportsFixedPosition||"fixed"!==prevComputedStyle.position);)computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top-=elem.scrollTop,left-=elem.scrollLeft,elem===offsetParent&&(top+=elem.offsetTop,left+=elem.offsetLeft,!jQuery.offset.doesNotAddBorder||jQuery.offset.doesAddBorderForTableAndCells&&rtable.test(elem.nodeName)||(top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0),offsetParent=elem.offsetParent),jQuery.offset.subtractsBorderForOverflowNotVisible&&"visible"!==computedStyle.overflow&&(top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0),prevComputedStyle=computedStyle;return"relative"!==prevComputedStyle.position&&"static"!==prevComputedStyle.position||(top+=body.offsetTop,left+=body.offsetLeft),jQuery.offset.supportsFixedPosition&&"fixed"===prevComputedStyle.position&&(top+=Math.max(docElem.scrollTop,body.scrollTop),left+=Math.max(docElem.scrollLeft,body.scrollLeft)),{top:top,left:left}},jQuery.offset={initialize:function(){var innerDiv,checkDiv,td,body=document.body,container=document.createElement("div"),bodyMarginTop=parseFloat(jQuery.css(body,"marginTop"))||0;jQuery.extend(container.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),container.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",body.insertBefore(container,body.firstChild),checkDiv=(innerDiv=container.firstChild).firstChild,td=innerDiv.nextSibling.firstChild.firstChild,this.doesNotAddBorder=5!==checkDiv.offsetTop,this.doesAddBorderForTableAndCells=5===td.offsetTop,checkDiv.style.position="fixed",checkDiv.style.top="20px",this.supportsFixedPosition=20===checkDiv.offsetTop||15===checkDiv.offsetTop,checkDiv.style.position=checkDiv.style.top="",innerDiv.style.overflow="hidden",innerDiv.style.position="relative",this.subtractsBorderForOverflowNotVisible=-5===checkDiv.offsetTop,this.doesNotIncludeMarginInBodyOffset=body.offsetTop!==bodyMarginTop,body.removeChild(container),jQuery.offset.initialize=jQuery.noop},bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;return jQuery.offset.initialize(),jQuery.offset.doesNotIncludeMarginInBodyOffset&&(top+=parseFloat(jQuery.css(body,"marginTop"))||0,left+=parseFloat(jQuery.css(body,"marginLeft"))||0),{top:top,left:left}},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");"static"===position&&(elem.style.position="relative");var curTop,curLeft,curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),props={},curPosition={};curLeft=("absolute"===position||"fixed"===position)&&-1<jQuery.inArray("auto",[curCSSTop,curCSSLeft])?(curTop=(curPosition=curElem.position()).top,curPosition.left):(curTop=parseFloat(curCSSTop)||0,parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(!this[0])return null;var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();return offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0,offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0,parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0,parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0,{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||document.body;offsetParent&&!rroot.test(offsetParent.nodeName)&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent})}}),jQuery.each(["Left","Top"],function(i,name){var method="scroll"+name;jQuery.fn[method]=function(val){var elem,win;return val===undefined?(elem=this[0])?(win=getWindow(elem))?win[i?"pageYOffset":"pageXOffset"]||jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method]:null:this.each(function(){(win=getWindow(this))?win.scrollTo(i?jQuery(win).scrollLeft():val,i?val:jQuery(win).scrollTop()):this[method]=val})}}),jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn["inner"+name]=function(){var elem=this[0];return elem&&elem.style?parseFloat(jQuery.css(elem,type,"padding")):null},jQuery.fn["outer"+name]=function(margin){var elem=this[0];return elem&&elem.style?parseFloat(jQuery.css(elem,type,margin?"margin":"border")):null},jQuery.fn[type]=function(size){var elem=this[0];if(!elem)return null==size?null:this;if(jQuery.isFunction(size))return this.each(function(i){var self=jQuery(this);self[type](size.call(this,i,self[type]()))});if(jQuery.isWindow(elem)){var docElemProp=elem.document.documentElement["client"+name];return"CSS1Compat"===elem.document.compatMode&&docElemProp||elem.document.body["client"+name]||docElemProp}if(9===elem.nodeType)return Math.max(elem.documentElement["client"+name],elem.body["scroll"+name],elem.documentElement["scroll"+name],elem.body["offset"+name],elem.documentElement["offset"+name]);if(size!==undefined)return this.css(type,"string"==typeof size?size:size+"px");var orig=jQuery.css(elem,type),ret=parseFloat(orig);return jQuery.isNaN(ret)?orig:ret}}),window.jQuery=window.$=jQuery,window.jQuery.siesta=!0,window.$.rebindWindowContext=function(win){return document=(window=win).document,rootjQuery=$(document),function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)}}}(window),jQuery.fn.center=function(){return this.css("position","absolute"),this.css("top",Math.max(0,($(window).height()-this.outerHeight())/2+$(window).scrollTop())+"px"),this.css("left",Math.max(0,($(window).width()-this.outerWidth())/2+$(window).scrollLeft())+"px"),this},function(window){function funescape(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!=high||escapedWhitespace?escaped:high<0?String.fromCharCode(65536+high):String.fromCharCode(high>>10|55296,1023&high|56320)}function unloadHandler(){setDocument()}var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+ +new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;i<len;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fcssescape=function(ch,asCodePoint){return asCodePoint?"\0"===ch?"�":ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" ":"\\"+ch},inDisabledFieldset=addCombinator(function(elem){return!0===elem.disabled&&"fieldset"===elem.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}function Sizzle(selector,context,results,seed){var m,i,elem,nid,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;if(results=results||[],"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType)return results;if(!seed&&((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,documentIsHTML)){if(11!==nodeType&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m)))return results;if(elem.id===m)return results.push(elem),results}else if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(1!==nodeType)newContext=context,newSelector=selector;else if("object"!==context.nodeName.toLowerCase()){for((nid=context.getAttribute("id"))?nid=nid.replace(rcssescape,fcssescape):context.setAttribute("id",nid=expando),i=(groups=tokenize(selector)).length;i--;)groups[i]="#"+nid+" "+toSelector(groups[i]);newSelector=groups.join(","),newContext=rsibling.test(selector)&&testContext(context.parentNode)||context}if(newSelector)try{if(!bowser.msie&&!bowser.msedge||!/:nth-of-type\(\d/i.test(newSelector))return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{nid===expando&&context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];return function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var el=document.createElement("fieldset");try{return!!fn(el)}catch(e){return!1}finally{el.parentNode&&el.parentNode.removeChild(el),el=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=arr.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createDisabledPseudo(disabled){return function(elem){return"form"in elem?elem.parentNode&&!1===elem.disabled?"label"in elem?"label"in elem.parentNode?elem.parentNode.disabled===disabled:elem.disabled===disabled:elem.isDisabled===disabled||elem.isDisabled!==!disabled&&inDisabledFieldset(elem)===disabled:elem.disabled===disabled:"label"in elem&&elem.disabled===disabled}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&void 0!==context.getElementsByTagName&&context}for(i in support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,subWindow,doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement&&(docElem=(document=doc).documentElement,documentIsHTML=!isXML(document),preferredDoc!==document&&(subWindow=document.defaultView)&&subWindow.top!==subWindow&&(subWindow.addEventListener?subWindow.addEventListener("unload",unloadHandler,!1):subWindow.attachEvent&&subWindow.attachEvent("onunload",unloadHandler)),support.attributes=assert(function(el){return el.className="i",!el.getAttribute("className")}),support.getElementsByTagName=assert(function(el){return el.appendChild(document.createComment("")),!el.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(document.getElementsByClassName),support.getById=assert(function(el){return docElem.appendChild(el).id=expando,!document.getElementsByName||!document.getElementsByName(expando).length}),support.getById?(Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}},Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var elem=context.getElementById(id);return elem?[elem]:[]}}):(Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}},Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var node,i,elems,elem=context.getElementById(id);if(elem){if((node=elem.getAttributeNode("id"))&&node.value===id)return[elem];for(elems=context.getElementsByName(id),i=0;elem=elems[i++];)if((node=elem.getAttributeNode("id"))&&node.value===id)return[elem]}return[]}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return void 0!==context.getElementsByTagName?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"!==tag)return results;for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(void 0!==context.getElementsByClassName&&documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(document.querySelectorAll))&&(assert(function(el){docElem.appendChild(el).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\r\\' msallowcapture=''><option selected=''></option></select>",el.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),el.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),el.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),el.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),el.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")}),assert(function(el){el.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var input=document.createElement("input");input.setAttribute("type","hidden"),el.appendChild(input).setAttribute("name","D"),el.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),2!==el.querySelectorAll(":enabled").length&&rbuggyQSA.push(":enabled",":disabled"),docElem.appendChild(el).disabled=!0,2!==el.querySelectorAll(":disabled").length&&rbuggyQSA.push(":enabled",":disabled"),el.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(el){support.disconnectedMatch=matches.call(el,"*"),matches.call(el,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(1&(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0}),document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return 0<Sizzle(expr,document,null,[elem]).length},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.escape=function(sel){return(sel+"").replace(rcssescape,fcssescape)},Sizzle.unescape=function(sel){return(sel+"").replace(runescape,funescape)},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},(Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||void 0!==elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&-1<result.indexOf(check):"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?-1<(" "+result.replace(rwhitespace," ")+" ").indexOf(check):"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!=forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=!1;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(diff=(nodeIndex=(cache=(uniqueCache=(outerCache=(node=parent)[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]||[])[0]===dirruns&&cache[1])&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(diff=nodeIndex=(cache=(uniqueCache=(outerCache=(node=elem)[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]||[])[0]===dirruns&&cache[1]),!1===diff)for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((uniqueCache=(outerCache=node[expando]||(node[expando]={}))[node.uniqueID]||(outerCache[node.uniqueID]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&0<=diff/first}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):1<fn.length?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)seed[idx=indexOf(seed,matched[i])]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}}),has:markFunction(function(selector){return function(elem){return 0<Sizzle(selector,elem).length}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return-1<(elem.textContent||elem.innerText||getText(elem)).indexOf(text)}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:createDisabledPseudo(!1),disabled:createDisabledPseudo(!0),checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;0<=--i;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}}).pseudos.nth=Expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,skip=combinator.next,key=skip||dir,checkNonElements=base&&"parentNode"===key,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml);return!1}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if(uniqueCache=(outerCache=elem[expando]||(elem[expando]={}))[elem.uniqueID]||(outerCache[elem.uniqueID]={}),skip&&skip===elem.nodeName.toLowerCase())elem=elem[dir]||elem;else{if((oldCache=uniqueCache[key])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if((uniqueCache[key]=newCache)[2]=matcher(elem,context,xml))return!0}return!1}}function elementMatcher(matchers){return 1<matchers.length?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||function(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&-1<(temp=postFinder?indexOf(seed,elem):preMap[i])&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return-1<indexOf(checkContext,elem)},implicitRelative,!0),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext:matchAnyContext)(elem,context,xml);return checkContext=null,ret}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(1<i&&elementMatcher(matchers),1<i&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){function superMatcher(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context===document||context||outermost);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0,context||elem.ownerDocument===document||(setDocument(elem),xml=!documentIsHTML);matcher=elementMatchers[j++];)if(matcher(elem,context||document,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(0<matchedCount)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&0<setMatched.length&&1<matchedCount+setMatchers.length&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched}var bySet=0<setMatchers.length,byElement=0<elementMatchers.length;return bySet?markFunction(superMatcher):superMatcher}setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(i=(match=match||tokenize(selector)).length;i--;)(cached=matcherFromTokens(match[i]))[expando]?setMatchers.push(cached):elementMatchers.push(cached);(cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))).selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(2<(tokens=match[0]=match[0].slice(0)).length&&"ID"===(token=tokens[0]).type&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(el){return 1&el.compareDocumentPosition(document.createElement("fieldset"))}),assert(function(el){return el.innerHTML="<a href='#'></a>","#"===el.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(el){return el.innerHTML="<input/>",el.firstChild.setAttribute("value",""),""===el.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue}),assert(function(el){return null==el.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return!0===elem[name]?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null});var _sizzle=window.Sizzle;if(Sizzle.noConflict=function(){return window.Sizzle===Sizzle&&(window.Sizzle=_sizzle),Sizzle},"function"==typeof define&&define.amd?define(function(){return Sizzle}):"undefined"!=typeof module&&module.exports?module.exports=Sizzle:window.Sizzle=Sizzle,(window.Sizzle=Sizzle).siesta=!0,Sizzle.selectors.pseudos.textEquals=function(el,i,m){var searchText=Sizzle.unescape(m[3]);return Sizzle.getText([el]).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")===searchText},window.jQuery&&window.jQuery.siesta){var oldExpr=jQuery.expr;jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.filters,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains,jQuery.expr.filters.hidden=oldExpr.filters.hidden,jQuery.expr.filters.visible=oldExpr.filters.visible}}(window),Siesta.Sizzle=Sizzle,Sizzle.noConflict(),Object.create&&function(root,factory){"use strict";"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?module.exports=factory():root.DeepDiff=factory()}(this,function(undefined){"use strict";var $scope,conflict,conflictResolution=[];function inherits(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}function Diff(kind,path){Object.defineProperty(this,"kind",{value:kind,enumerable:!0}),path&&path.length&&Object.defineProperty(this,"path",{value:path,enumerable:!0})}function DiffEdit(path,origin,value){DiffEdit.super_.call(this,"E",path),Object.defineProperty(this,"lhs",{value:origin,enumerable:!0}),Object.defineProperty(this,"rhs",{value:value,enumerable:!0})}function DiffNew(path,value){DiffNew.super_.call(this,"N",path),Object.defineProperty(this,"rhs",{value:value,enumerable:!0})}function DiffDeleted(path,value){DiffDeleted.super_.call(this,"D",path),Object.defineProperty(this,"lhs",{value:value,enumerable:!0})}function DiffArray(path,index,item){DiffArray.super_.call(this,"A",path),Object.defineProperty(this,"index",{value:index,enumerable:!0}),Object.defineProperty(this,"item",{value:item,enumerable:!0})}function arrayRemove(arr,from,to){var rest=arr.slice((to||from)+1||arr.length);return arr.length=from<0?arr.length+from:from,arr.push.apply(arr,rest),arr}function realTypeOf(subject){var type=typeof subject;return"object"!=type?type:subject===Math?"math":null===subject?"null":Array.isArray(subject)?"array":"[object Date]"===Object.prototype.toString.call(subject)?"date":/^\/.*\//.test(subject.toString())?"regexp":"object"}function deepDiff(lhs,rhs,changes,prefilter,path,key,stack){var currentPath=(path=path||[]).slice(0);if(void 0!==key){if(prefilter&&prefilter(currentPath,key,{lhs:lhs,rhs:rhs}))return;currentPath.push(key)}"regexp"===realTypeOf(lhs)&&"regexp"===realTypeOf(rhs)&&(lhs=lhs.toString(),rhs=rhs.toString());var ltype=typeof lhs,rtype=typeof rhs;if("undefined"==ltype)"undefined"!=rtype&&changes(new DiffNew(currentPath,rhs));else if("undefined"==rtype)changes(new DiffDeleted(currentPath,lhs));else if(realTypeOf(lhs)!==realTypeOf(rhs))changes(new DiffEdit(currentPath,lhs,rhs));else if("[object Date]"===Object.prototype.toString.call(lhs)&&"[object Date]"===Object.prototype.toString.call(rhs)&&lhs-rhs!=0)changes(new DiffEdit(currentPath,lhs,rhs));else if("object"==ltype&&null!==lhs&&null!==rhs&&lhs!==rhs){if((stack=stack||[]).indexOf(lhs)<0){if(stack.push(lhs),Array.isArray(lhs)){var i;lhs.length;for(i=0;i<lhs.length;i++)i>=rhs.length?changes(new DiffArray(currentPath,i,new DiffDeleted(undefined,lhs[i]))):deepDiff(lhs[i],rhs[i],changes,prefilter,currentPath,i,stack);for(;i<rhs.length;)changes(new DiffArray(currentPath,i,new DiffNew(undefined,rhs[i++])))}else{var akeys=Object.keys(lhs),pkeys=Object.keys(rhs);akeys.forEach(function(k,i){var other=pkeys.indexOf(k);0<=other?(deepDiff(lhs[k],rhs[k],changes,prefilter,currentPath,k,stack),pkeys=arrayRemove(pkeys,other)):changes(new DiffDeleted(currentPath,k))}),pkeys.forEach(function(k){changes(new DiffNew(currentPath,rhs[k]))})}stack.length=stack.length-1}}else lhs!==rhs&&("number"==ltype&&isNaN(lhs)&&isNaN(rhs)||changes(new DiffEdit(currentPath,lhs,rhs)))}function accumulateDiff(lhs,rhs,prefilter,accum){return accum=accum||[],deepDiff(lhs,rhs,function(diff){diff&&accum.push(diff)},prefilter),accum.length?accum:undefined}function applyChange(target,source,change){if(target&&source&&change&&change.kind){for(var it=target,i=-1,last=change.path?change.path.length-1:0;++i<last;)void 0===it[change.path[i]]&&(it[change.path[i]]="number"==typeof change.path[i]?[]:{}),it=it[change.path[i]];switch(change.kind){case"A":!function applyArrayChange(arr,index,change){if(change.path&&change.path.length){var i,it=arr[index],u=change.path.length-1;for(i=0;i<u;i++)it=it[change.path[i]];switch(change.kind){case"A":applyArrayChange(it[change.path[i]],change.index,change.item);break;case"D":delete it[change.path[i]];break;case"E":case"N":it[change.path[i]]=change.rhs}}else switch(change.kind){case"A":applyArrayChange(arr[index],change.index,change.item);break;case"D":arr=arrayRemove(arr,index);break;case"E":case"N":arr[index]=change.rhs}return arr}(change.path?it[change.path[i]]:it,change.index,change.item);break;case"D":delete it[change.path[i]];break;case"E":case"N":it[change.path[i]]=change.rhs}}}return $scope="object"==typeof global&&global?global:"undefined"!=typeof window?window:{},(conflict=$scope.DeepDiff)&&conflictResolution.push(function(){void 0!==conflict&&$scope.DeepDiff===accumulateDiff&&($scope.DeepDiff=conflict,conflict=undefined)}),inherits(DiffEdit,Diff),inherits(DiffNew,Diff),inherits(DiffDeleted,Diff),inherits(DiffArray,Diff),Object.defineProperties(accumulateDiff,{diff:{value:accumulateDiff,enumerable:!0},observableDiff:{value:deepDiff,enumerable:!0},applyDiff:{value:function(target,source,filter){if(target&&source){deepDiff(target,source,function(change){filter&&!filter(target,source,change)||applyChange(target,source,change)})}},enumerable:!0},applyChange:{value:applyChange,enumerable:!0},revertChange:{value:function(target,source,change){if(target&&source&&change&&change.kind){var i,u,it=target;for(u=change.path.length-1,i=0;i<u;i++)void 0===it[change.path[i]]&&(it[change.path[i]]={}),it=it[change.path[i]];switch(change.kind){case"A":!function revertArrayChange(arr,index,change){if(change.path&&change.path.length){var i,it=arr[index],u=change.path.length-1;for(i=0;i<u;i++)it=it[change.path[i]];switch(change.kind){case"A":revertArrayChange(it[change.path[i]],change.index,change.item);break;case"D":case"E":it[change.path[i]]=change.lhs;break;case"N":delete it[change.path[i]]}}else switch(change.kind){case"A":revertArrayChange(arr[index],change.index,change.item);break;case"D":case"E":arr[index]=change.lhs;break;case"N":arr=arrayRemove(arr,index)}return arr}(it[change.path[i]],change.index,change.item);break;case"D":case"E":it[change.path[i]]=change.lhs;break;case"N":delete it[change.path[i]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==conflict},enumerable:!0},noConflict:{value:function(){return conflictResolution&&(conflictResolution.forEach(function(it){it()}),conflictResolution=null),accumulateDiff},enumerable:!0}}),accumulateDiff}),function(f){function d(h){var k,j=f(window),i=e.test(h[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:function(k,j){j=j||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(k,null):k.currentStyle);var i=!(!document.defaultView||!document.defaultView.getComputedStyle),h={top:parseFloat(i?j.borderTopWidth:f.css(k,"borderTopWidth"))||0,left:parseFloat(i?j.borderLeftWidth:f.css(k,"borderLeftWidth"))||0,bottom:parseFloat(i?j.borderBottomWidth:f.css(k,"borderBottomWidth"))||0,right:parseFloat(i?j.borderRightWidth:f.css(k,"borderRightWidth"))||0};return{top:h.top,left:h.left,bottom:h.bottom,right:h.right,vertical:h.top+h.bottom,horizontal:h.left+h.right}}(h[0]),scroll:{top:(i?j:h).scrollTop(),left:(i?j:h).scrollLeft()},scrollbar:{right:i?0:h.innerWidth()-h[0].clientWidth,bottom:i?0:h.innerHeight()-h[0].clientHeight},rect:(k=h[0].getBoundingClientRect(),{top:i?0:k.top,left:i?0:k.left,bottom:i?h[0].clientHeight:k.bottom,right:i?h[0].clientWidth:k.right})}}var c={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},b={duration:"fast",direction:"both"},e=/^(?:html)$/i;f.fn.extend({scrollintoview:function(j){(j=f.extend({},b,j)).direction=c["string"==typeof j.direction&&j.direction.toLowerCase()]||c.both;var n="";!0===j.direction.x&&(n="horizontal"),!0===j.direction.y&&(n=n?"both":"vertical");var l=this.eq(0),i=l.closest(":scrollable("+n+")");if(0<i.length){i=i.eq(0);var m_e=d(l),m_s=d(i),h={top:m_e.rect.top-(m_s.rect.top+m_s.border.top),bottom:m_s.rect.bottom-m_s.border.bottom-m_s.scrollbar.bottom-m_e.rect.bottom,left:m_e.rect.left-(m_s.rect.left+m_s.border.left),right:m_s.rect.right-m_s.border.right-m_s.scrollbar.right-m_e.rect.right},k={};!0===j.direction.y&&(h.top<0?k.scrollTop=m_s.scroll.top+h.top:0<h.top&&h.bottom<0&&(k.scrollTop=m_s.scroll.top+Math.min(h.top,-h.bottom))),!0===j.direction.x&&(h.left<0?k.scrollLeft=m_s.scroll.left+h.left:0<h.left&&h.right<0&&(k.scrollLeft=m_s.scroll.left+Math.min(h.left,-h.right))),f.isEmptyObject(k)?f.isFunction(j.complete)&&j.complete.call(i[0]):(e.test(i[0].nodeName)&&(i=f("html,body")),i.animate(k,j.duration).eq(0).queue(function(o){f.isFunction(j.complete)&&j.complete.call(i[0]),o()}))}return this}});var a={auto:!0,scroll:!0,visible:!1,hidden:!1};f.extend(f.expr[":"],{scrollable:function(k,i,n,h){var m=c["string"==typeof n[3]&&n[3].toLowerCase()]||c.both,l=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(k,null):k.currentStyle,o={x:a[l.overflowX.toLowerCase()]||!1,y:a[l.overflowY.toLowerCase()]||!1,isRoot:e.test(k.nodeName)};if(!o.x&&!o.y&&!o.isRoot)return!1;var j={height:{scroll:k.scrollHeight,client:k.clientHeight},width:{scroll:k.scrollWidth,client:k.clientWidth},scrollableX:function(){return(o.x||o.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(o.y||o.isRoot)&&this.height.scroll>this.height.client}};return m.y&&j.scrollableY()||m.x&&j.scrollableX()}})}(jQuery),"undefined"==typeof JooseX||JooseX.SimpleRequest||Class("JooseX.SimpleRequest",{have:{req:null},methods:{initialize:function(){window.XMLHttpRequest?this.req=new XMLHttpRequest:this.req=new ActiveXObject("Microsoft.XMLHTTP")},getText:function(urlOrOptions,async,callback,scope){var headers,url,req=this.req;"string"!=typeof urlOrOptions?(headers=urlOrOptions.headers,url=urlOrOptions.url,async=async||urlOrOptions.async,callback=callback||urlOrOptions.callback,scope=scope||urlOrOptions.scope):url=urlOrOptions,req.open("GET",url,async||!1),headers&&Joose.O.eachOwn(headers,function(value,name){req.setRequestHeader(name,value)});try{req.onreadystatechange=function(event){async&&4==req.readyState&&(200==req.status||0==req.status&&0<req.responseText.length?callback.call(scope||this,!0,req.responseText):callback.call(scope||this,!1,"File not found: "+url))},req.send(null)}catch(e){throw"File not found: "+url}if(async)return null;if(200==req.status||0==req.status&&0<req.responseText.length)return req.responseText;throw"File not found: "+url}}}),Role("Siesta.Util.Role.CanCalculatePageScroll",{methods:{getElForPageScroll:function(win){var doc=(win=win||this.global).document;return doc.scrollingElement||(bowser.webkit||bowser.blink||bowser.msedge?doc.body:doc.documentElement)},getPageScrollX:function(win){(win=win||this.global).document;if(null!=window.pageXOffset)return win.pageXOffset;var scrollEl=this.getElForPageScroll();return scrollEl?scrollEl.scrollLeft:0},getPageScrollY:function(win){(win=win||this.global).document;if(null!=window.pageYOffset)return win.pageYOffset;var scrollEl=this.getElForPageScroll();return scrollEl?scrollEl.scrollTop:0},viewportXtoPageX:function(x,win){var docEl=(win=win||this.global).document.documentElement;return x+this.getPageScrollX(win)-docEl.clientLeft},viewportYtoPageY:function(y,win){var docEl=(win=win||this.global).document.documentElement;return y+this.getPageScrollY(win)-docEl.clientTop},pageXtoViewportX:function(x,win){var docEl=(win=win||this.global).document.documentElement;return x-this.getPageScrollX(win)+docEl.clientLeft},pageYtoViewportY:function(y,win){var docEl=(win=win||this.global).document.documentElement;return y-this.getPageScrollY(win)+docEl.clientTop},maintainScrollPositionDuring:function(func,scope){var parent=window.parent,isEmbedded=Boolean(parent),scrollLeftBefore=isEmbedded&&this.getPageScrollX(parent),scrollTopBefore=isEmbedded&&this.getPageScrollY(parent);if(func.call(scope||this),isEmbedded){var scrollEl=this.getElForPageScroll(parent);scrollLeftBefore!==this.getPageScrollX(parent)&&(scrollEl.scrollLeft=scrollLeftBefore),scrollTopBefore!==this.getPageScrollY(parent)&&(scrollEl.scrollTop=scrollTopBefore)}}}}),Role("Siesta.Util.Role.CanInstallCQRootPseudo",{methods:{installRootPseudoCQ:function(Ext){if(Ext){var CQ=Ext.ComponentQuery;if(CQ){var pseudos=CQ.pseudos;if(!pseudos.root||!pseudos.root.__IS_ROOT_PSEUDO_OVERRIDE__){function rootPseudo(items,value){var c,i=0,l=items.length,result=[],findAllRoots=void 0===value;for(findAllRoots||(value=Number(value)-1);i<l;i++){(c=items[i].up())&&c.contains&&c.contains(items[i])||result.push(items[i])}return findAllRoots||(result=result[value]?[result[value]]:[]),result}rootPseudo.__IS_ROOT_PSEUDO_OVERRIDE__=!0,pseudos.root=rootPseudo}pseudos["ariadne-nth-child"]||(pseudos["ariadne-nth-child"]=function(items,selector){for(var result=[],pos=Number(selector)-1,len=items.length,i=0;i<len;i++){var cmp=items[i],parentCt=cmp.getRefOwner&&cmp.getRefOwner()||cmp.ownerCt,parentCtItems=parentCt&&parentCt.items;if(parentCtItems&&parentCtItems.getCount)if(pos<parentCtItems.getCount())parentCtItems.getAt(pos)===cmp&&result.push(cmp);else parentCt.getRefItems()[pos]===cmp&&result.push(cmp)}return result});var version=Ext.getVersion&&Ext.getVersion("ext");if(version&&4==version.major&&!CQ.__CQ4_PATCHED__){Ext.dom.Query.operators["="]=function(a,b){return a==Siesta.Sizzle.unescape(b)};var prevQuery=CQ.query;CQ.query=function(query,root){return/\\,/.test(query)?prevQuery.call(this,{split:function(){return[query]}},root):prevQuery.call(this,query,root)},CQ.__CQ4_PATCHED__=!0}}}}}}),Role("Siesta.Test.Browser.Role.CanGetElementFromPoint",{requires:["$"],does:[Siesta.Util.Role.CanCalculatePageScroll],has:{},methods:{elementFromPoint:function(viewportX,viewportY,shallow,fallbackEl,fullInfo){var document=this.global.document,el=document.elementFromPoint(viewportX,viewportY),localX=viewportX,localY=viewportY;if((el=(el=el||document.elementFromPoint(viewportX,viewportY))||fallbackEl||document.body)&&"IFRAME"==el.nodeName.toUpperCase()&&!shallow)try{var iframeDoc=el.contentWindow.document,offsetsToTop=this.$(el).offset();localX=viewportX-this.pageXtoViewportX(offsetsToTop.left),localY=viewportY-this.pageYtoViewportY(offsetsToTop.top);var resolvedEl=iframeDoc.elementFromPoint(localX,localY);"HTML"===(resolvedEl=(resolvedEl=resolvedEl||iframeDoc.elementFromPoint(localX,localY))||iframeDoc.body).nodeName.toUpperCase()&&(resolvedEl=iframeDoc.body),el=resolvedEl}catch(e){localX=viewportX,localY=viewportY}return fullInfo?{el:el,localXY:[localX,localY],globalXY:[viewportX,viewportY]}:el}}}),Role("Siesta.Test.Browser.Role.CanWorkWithKeyboard",{has:{},methods:{isTextInput:function(node){var name=node.nodeName&&node.nodeName.toLowerCase();if("textarea"===name)return!0;if("input"!==name)return!1;var type=String(node.type).toLowerCase();return"password"===type||"number"===type||"search"===type||"text"===type||"url"===type||"tel"===type||"month"===type||"time"===type||"date"===type||"datetime"===type||"week"===type||"email"===type},isEditableNode:function(node){return"on"===node.ownerDocument.designMode.toLowerCase()||node.isContentEditable},isReadableKey:function(keyCode){var KC=Siesta.Test.UserAgent.KeyCodes();return!KC.isNav(keyCode)&&!KC.isSpecial(keyCode)},activeElement:function(notAllowBody,fallbackEl,elOrDoc){var doc=elOrDoc?elOrDoc.ownerDocument||elOrDoc:this.global.document,focusedEl=doc.activeElement;if(focusedEl&&focusedEl.nodeName&&focusedEl.tagName&&(focusedEl!==doc.body||!notAllowBody)||(focusedEl=fallbackEl),focusedEl&&"iframe"==String(focusedEl.tagName).toLowerCase())try{focusedEl.contentDocument&&focusedEl.contentDocument.body&&(focusedEl=this.activeElement(notAllowBody,fallbackEl,focusedEl.contentDocument))}catch(e){}return focusedEl||doc.body}}}),Role("Siesta.Test.Browser.Role.CanRebindJQueryContext",{methods:{$:function(){return $.rebindWindowContext(this.global).apply(this.global,arguments)}}}),Role("Siesta.Util.Role.Dom",{does:[Siesta.Util.Role.CanCalculatePageScroll],has:{doesNotIncludeMarginInBodyOffset:!1},methods:{isCrossOriginWindow:function(win){try{var doc=win.document}catch(e){return!0}return!doc},closest:function(elem,selector,maxLevels){maxLevels=maxLevels||Number.MAX_VALUE;for(var docEl=elem.ownerDocument.documentElement,i=0;i<maxLevels&&elem&&elem!==docEl;elem=elem.parentNode){if(Siesta.Sizzle.matchesSelector(elem,selector))return elem;i++}return!1},contains:function(parentEl,childEl){if(!parentEl)return!1;if(parentEl.contains)return parentEl.contains(childEl);if(parentEl.compareDocumentPosition)return parentEl===childEl||Boolean(16&parentEl.compareDocumentPosition(childEl));throw new Error("Can't determine `contains` status")},matches:function(node,selector){return Siesta.Sizzle.matchesSelector(node,selector)},offset:function(elem){if(!elem)return null;var doc=elem.ownerDocument;if(!doc)return null;if(elem===doc.body)return this.bodyOffset(elem);var box=this.getBoundingClientRect(elem),win=doc.defaultView||doc.parentWindow;return box?{left:this.viewportXtoPageX(Math.floor(box.left),win),top:this.viewportYtoPageY(Math.floor(box.top),win)}:{left:0,top:0}},bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(this.initializeOffset(),this.doesNotIncludeMarginInBodyOffset){var style=getComputedStyle(body);top+=parseFloat(style.marginTop)||0,left+=parseFloat(style.marginLeft)||0}return{top:top,left:left}},initializeOffset:function(){var body=document.body,container=document.createElement("div"),bodyMarginTop=parseFloat(getComputedStyle(body).marginTop)||0,styles={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(var o in styles)container.style[o]=styles[o];container.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",body.insertBefore(container,body.firstChild);var innerDiv=container.firstChild,checkDiv=innerDiv.firstChild;innerDiv.nextSibling.firstChild.firstChild;checkDiv.style.position="fixed",checkDiv.style.top="20px",checkDiv.style.position=checkDiv.style.top="",innerDiv.style.overflow="hidden",innerDiv.style.position="relative",this.doesNotIncludeMarginInBodyOffset=body.offsetTop!==bodyMarginTop,body.removeChild(container),this.initializeOffset=function(){}},getElementWidth:function(el){return this.getBoundingClientRect(el).width},getElementHeight:function(el){return this.getBoundingClientRect(el).height},getWindowSize:function(win){var doc=win.document;return{width:win.innerWidth||doc.documentElement.clientWidth||doc.body.clientWidth,height:win.innerHeight||doc.documentElement.clientHeight||doc.body.clientHeight}},isPointWithinElement:function(x,y,el){var rect=this.getBoundingClientRect(el);return x>=rect.left&&x<=rect.right&&y>=rect.top&&y<=rect.bottom},isElementReachableAt:function(el,pageX,pageY,allowChild){allowChild=!1!==allowChild;var doc=el.ownerDocument,win=doc.defaultView||doc.parentWindow,foundEl=doc.elementFromPoint(this.pageXtoViewportX(pageX,win),this.pageYtoViewportY(pageY,win));return foundEl&&(foundEl===el||allowChild&&this.contains(el,foundEl))},isElementReachableAtCenter:function(el,allowChild){allowChild=!1!==allowChild;var offsets=this.offset(el);return this.isElementReachableAt(el,offsets.left+this.getElementWidth(el)/2,offsets.top+this.getElementHeight(el)/2,allowChild)},getBoundingClientRect:function(el){var svgEl=el.ownerSVGElement;if(svgEl&&(bowser.msie||bowser.msedge||bowser.gecko)){var elBox=el.getBBox(),svgRect=svgEl.getBoundingClientRect(),left=svgRect.left+elBox.x,top=svgRect.top+elBox.y;elBox.width;return{x:left,y:top,left:left,top:top,bottom:top+elBox.height,height:elBox.height,width:elBox.width}}return el.getBoundingClientRect()},nodeIsUnloaded:function(el){try{el&&el.tagName;var doc=el.ownerDocument,win=doc&&(doc.defaultView||doc.parentWindow);return!Boolean(win)}catch(e){return!(el=null)}},nodeIsOrphan:function(el){var doc=el.ownerDocument;return!(doc&&doc.body&&el.parentNode&&(el===doc.body||$.contains(doc.body,el)))},getNodeParents:function(node){node.ownerDocument;for(var nodes=[];node&&node.parentNode;node=node.parentNode)nodes.unshift(node);return nodes},getCommonAncestor:function(node1,node2){var parents1=this.getNodeParents(node1),parents2=this.getNodeParents(node2);if(parents1[0]!=parents2[0])return null;for(var i=0;i<parents1.length;i++)if(parents1[i]!==parents2[i])return parents1[i-1]}}}),Role("Siesta.Test.Action.Role.HasTarget",{has:{target:{required:!1},normalizedTarget:null,cachedTarget:null,passTargetToNext:!0,options:null,offset:null,waitForTarget:!0},after:{initialize:function(){if(this.passTargetToNext){var me=this,prevNext=this.next;this.next=function(){prevNext.call(this,me.normalizedTarget)}}}},methods:{BUILD:function(config){return config.el&&!config.target&&(config.target=config.el),config},getTarget:function(){if(this.cachedTarget)return this.cachedTarget;var test=this.test,target=this.target||test.getCursorPagePosition();return"Function"===test.typeOf(target)&&(target=target.call(test,this)),this.normalizedTarget=test.normalizeActionTarget(target,!0),this.cachedTarget=target}}}),Class("Siesta.Test.Action.Swipe",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"swipe",direction:"left"},methods:{process:function(){this.test.swipe(this.getTarget(),this.direction,this.next)}}}),Siesta.Test.ActionRegistry().registerAction("swipe",Siesta.Test.Action.Swipe),Class("Siesta.Test.Action.Pinch",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"pinch",scale:2,target2:null,offset2:null,cachedTarget2:null},methods:{process:function(){this.test.pinch(this.getTarget(),this.getTarget2(),this.scale,this.next,null,this.options,this.offset,this.offset2)},getTarget2:function(){if(this.cachedTarget2)return this.cachedTarget2;var test=this.test,target2=this.target2;return"Function"===test.typeOf(target2)&&(target2=target2.call(test,this)),this.cachedTarget2=target2}}}),Siesta.Test.ActionRegistry().registerAction("pinch",Siesta.Test.Action.Pinch),Class("Siesta.Test.Action.LongPress",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"longPress"},methods:{process:function(){this.test.longpress(this.getTarget(),this.next,null,this.options,this.offset)}}}),Siesta.Test.ActionRegistry().registerAction("longpress",Siesta.Test.Action.LongPress),Class("Siesta.Test.Action.Tap",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"tap"},methods:{process:function(){this.test.tap(this.getTarget(),this.next,null,this.options,this.offset)}}}),Siesta.Test.ActionRegistry().registerAction("tap",Siesta.Test.Action.Tap),Class("Siesta.Test.Action.DoubleTap",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"doubleTap"},methods:{process:function(){this.test.doubleTap(this.getTarget(),this.next,null,this.options,this.offset,this.waitForTarget)}}}),Siesta.Test.ActionRegistry().registerAction("doubletap",Siesta.Test.Action.DoubleTap),Class("Siesta.Test.Action.TouchDrag",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"touchDragTo",to:null,fromOffset:null,toOffset:null,by:null,dragOnly:!1,byOrToMissingText:'Either "to" or "by" configuration option is required for "drag" step',byAndToDefinedText:'Exactly one of "to" or "by" configuration options is required for "drag" step, not both'},override:{BUILD:function(config){return config.source&&!config.target&&(config.target=config.source),this.SUPER(config)}},methods:{initialize:function(){if(this.SUPER(),!this.to&&!this.by)throw this.byOrToMissingText;if(this.to&&this.by)throw this.byAndToDefinedText},getTo:function(){return"Function"==this.test.typeOf(this.to)?this.to.call(this.test,this):this.to},getBy:function(){return"Function"==this.test.typeOf(this.by)?this.by.call(this.test,this):this.by},process:function(){var next=this.next,test=this.test,target=this.getTarget(),normalizedTarget=test.normalizeActionTarget(target,!0);this.to?test.touchDragTo(target,this.getTo(),function(){next(normalizedTarget||test.normalizeActionTarget(target))},null,this.options,this.dragOnly,this.fromOffset||this.offset,this.toOffset):test.touchDragBy(target,this.getBy(),function(){next(normalizedTarget||test.normalizeActionTarget(target))},null,this.options,this.dragOnly,this.fromOffset||this.offset)}}}),Siesta.Test.ActionRegistry().registerAction("touchdrag",Siesta.Test.Action.TouchDrag),Class("Siesta.Test.Action.MouseDown",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"mouseDown"},methods:{process:function(){this.test.mouseDown(this.getTarget(),this.options,this.offset,this.next,this,this.waitForTarget)}}}),Siesta.Test.ActionRegistry().registerAction("mouseDown",Siesta.Test.Action.MouseDown),Siesta.Test.ActionRegistry().registerAction("fingerDown",Siesta.Test.Action.MouseDown),Class("Siesta.Test.Action.MouseUp",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"mouseUp"},methods:{process:function(){this.test.mouseUp(this.getTarget(),this.options,this.offset,this.next)}}}),Siesta.Test.ActionRegistry().registerAction("mouseUp",Siesta.Test.Action.MouseUp),Siesta.Test.ActionRegistry().registerAction("fingerUp",Siesta.Test.Action.MouseUp),Class("Siesta.Test.Action.Click",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"click"},methods:{process:function(){this.test.click(this.getTarget(),this.next,null,this.options,this.offset,this.waitForTarget)}}}),Siesta.Test.ActionRegistry().registerAction("click",Siesta.Test.Action.Click),Class("Siesta.Test.Action.DoubleClick",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"doubleClick"},methods:{process:function(){this.test.doubleClick(this.getTarget(),this.next,null,this.options,this.offset,this.waitForTarget)}}}),Siesta.Test.ActionRegistry().registerAction("doubleclick",Siesta.Test.Action.DoubleClick),Siesta.Test.ActionRegistry().registerAction("dblclick",Siesta.Test.Action.DoubleClick),Class("Siesta.Test.Action.RightClick",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"rightClick"},methods:{process:function(){this.test.rightClick(this.getTarget(),this.next,null,this.options,this.offset,this.waitForTarget)}}}),Siesta.Test.ActionRegistry().registerAction("rightclick",Siesta.Test.Action.RightClick),Siesta.Test.ActionRegistry().registerAction("contextmenu",Siesta.Test.Action.RightClick),Class("Siesta.Test.Action.Wheel",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"wheel"},methods:{process:function(){this.test.wheel(this.getTarget(),this.next,null,this.options,this.offset,this.waitForTarget)}}}),Siesta.Test.ActionRegistry().registerAction("wheel",Siesta.Test.Action.Wheel),Class("Siesta.Test.Action.Type",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"type",text:"",options:null,clearExisting:!1},methods:{process:function(){var waitForTarget=this.waitForTarget||!!this.target;this.target=this.target||this.test.activeElement(),this.test.type(this.getTarget(),this.text,this.next,null,this.options,this.clearExisting,waitForTarget)}}}),Siesta.Test.ActionRegistry().registerAction("type",Siesta.Test.Action.Type),Class("Siesta.Test.Action.Drag",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"dragTo",to:null,fromOffset:null,toOffset:null,by:null,dragOnly:!1,byOrToMissingText:'Either "to" or "by" configuration option is required for "drag" step',byAndToDefinedText:'Exactly one of "to" or "by" configuration options is required for "drag" step, not both'},override:{BUILD:function(config){return config.source&&!config.target&&(config.target=config.source),this.SUPER(config)}},methods:{initialize:function(){if(this.SUPER(),!this.to&&!this.by)throw this.byOrToMissingText;if(this.to&&this.by)throw this.byAndToDefinedText},getTo:function(){return"Function"===this.test.typeOf(this.to)?this.to.call(this.test,this):this.to},getBy:function(){return"Function"===this.test.typeOf(this.by)?this.by.call(this.test,this):this.by},process:function(){var next=this.next,test=this.test,target=this.getTarget(),normalizedTarget=test.normalizeActionTarget(target,!0);this.to?test.dragTo(target,this.getTo(),function(){next(normalizedTarget||test.normalizeActionTarget(target,!0))},null,this.options,this.dragOnly,this.fromOffset||this.offset,this.toOffset,this.waitForTarget):test.dragBy(target,this.getBy(),function(){next(normalizedTarget||test.normalizeActionTarget(target,!0))},null,this.options,this.dragOnly,this.fromOffset||this.offset,this.waitForTarget)}}}),Siesta.Test.ActionRegistry().registerAction("drag",Siesta.Test.Action.Drag),Class("Siesta.Test.Action.MonkeyTest",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"monkeyTest",nbrInteractions:10,skipTargets:null,hasOwnAsyncFrame:!0},methods:{process:function(){this.test.monkeyTest({target:this.getTarget(),nbrInteractions:this.nbrInteractions,skipTargets:this.skipTargets,callback:this.next})}}}),Siesta.Test.ActionRegistry().registerAction("monkeyTest",Siesta.Test.Action.MonkeyTest),Siesta.Test.ActionRegistry().registerAction("monkey",Siesta.Test.Action.MonkeyTest),Class("Siesta.Test.Action.MoveCursor",{isa:Siesta.Test.Action,has:{requiredTestMethod:"moveMouseTo",to:null,by:null,offset:null},methods:{getTo:function(){return"Function"==this.test.typeOf(this.to)?this.to.call(this.test,this):this.to},getBy:function(){return"Function"==this.test.typeOf(this.by)?this.by.call(this.test,this):this.by},process:function(){var test=this.test,next=this.next;if(this.to){var to=this.getTo(),normalizedTarget=test.normalizeActionTarget(to,!1);test.moveMouseTo(to,function(){next(normalizedTarget)},null,this.offset)}else{var by=this.getBy(),currentXY=test.getCursorPagePosition();normalizedTarget=test.normalizeActionTarget([currentXY[0]+by[0],currentXY[1]+by[1]]);test.moveMouseBy(by,function(){next(normalizedTarget)})}}}}),Siesta.Test.ActionRegistry().registerAction("moveCursor",Siesta.Test.Action.MoveCursor),Siesta.Test.ActionRegistry().registerAction("moveMouse",Siesta.Test.Action.MoveCursor),Siesta.Test.ActionRegistry().registerAction("moveFinger",Siesta.Test.Action.MoveCursor),Class("Siesta.Test.Action.MoveCursorTo",{isa:Siesta.Test.Action,does:Siesta.Test.Action.Role.HasTarget,has:{requiredTestMethod:"moveMouseTo",target:{required:!0}},methods:{process:function(){this.test.moveMouseTo(this.getTarget(),this.next,null,this.offset,this.waitForTarget,this.options)}}}),Siesta.Test.ActionRegistry().registerAction("moveCursorTo",Siesta.Test.Action.MoveCursorTo),Siesta.Test.ActionRegistry().registerAction("moveMouseTo",Siesta.Test.Action.MoveCursorTo),Siesta.Test.ActionRegistry().registerAction("moveFingerTo",Siesta.Test.Action.MoveCursorTo),Class("Siesta.Test.Action.MoveCursorBy",{isa:Siesta.Test.Action,does:[Siesta.Test.Action.Role.HasTarget,Siesta.Util.Role.CanGetType],has:{requiredTestMethod:"moveMouseBy"},methods:{process:function(){var test=this.test;this.next;this.target&&"Array"===this.typeOf(this.target)&&"Array"===this.typeOf(this.target[0])&&(this.target=this.target[0]),test.moveMouseBy(this.getTarget(),this.next,this,this.options)}}}),Siesta.Test.ActionRegistry().registerAction("moveMouseBy",Siesta.Test.Action.MoveCursorBy),Siesta.Test.ActionRegistry().registerAction("moveCursorBy",Siesta.Test.Action.MoveCursorBy),Siesta.Test.ActionRegistry().registerAction("moveFingerBy",Siesta.Test.Action.MoveCursorBy),Class("Siesta.Test.Action.SetUrl",{isa:Siesta.Test.Action,has:{value:null,setUrl:null,requiredTestMethod:"setUrl"},methods:{process:function(){var value=this.setUrl||this.value;this.test.setUrl(value,this.next)}}}),Siesta.Test.ActionRegistry().registerAction("setUrl",Siesta.Test.Action.SetUrl),Class("Siesta.Test.Action.SetValue",{isa:Siesta.Test.Action,has:{target:null,setValue:null,requiredTestMethod:"setValue"},methods:{process:function(){var target=this.target,test=this.test;"Function"===test.typeOf(target)&&(target=target.call(test,this)),test.setValue(target,this.setValue,this.next,null)}}}),Siesta.Test.ActionRegistry().registerAction("setValue",Siesta.Test.Action.SetValue),Role("Siesta.Test.Simulate.Mouse",{requires:["simulateEvent","getSimulateEventsWith","$"],does:[Siesta.Util.Role.Dom,Siesta.Util.Role.CanCalculatePageScroll,Siesta.Test.Browser.Role.CanGetElementFromPoint],has:{currentPosition:{init:function(){return[0,0]}},dragDelay:25,pathBatchSize:bowser.msie?10:5,mouseMovePrecision:1,mouseDragPrecision:1,enableUnreachableClickWarning:!0,overEls:Joose.I.Array,lastMouseOverEl:null,mouseState:"up",lastMouseDownEl:null,pointerEventNamesMap:{lazy:function(){return window.PointerEvent?{pointerdown:"pointerdown",pointerup:"pointerup",pointerover:"pointerover",pointerout:"pointerout",pointerenter:"pointerenter",pointerleave:"pointerleave",pointermove:"pointermove"}:window.MSPointerEvent?{pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointerover:"MSPointerOver",pointerout:"MSPointerOut",pointerenter:"MSPointerEnter",pointerleave:"MSPointerLeave",pointermove:"MSPointerMove"}:{}}}},after:{cleanup:function(){this.overEls=null,this.lastMouseDownEl=null,this.lastMouseOverEl=null}},override:{normalizeEventName:function(eventName){return this.getPointerEventNamesMap()[eventName]||this.SUPERARG(arguments)},simulateEvent:function(el,eventName){var supportsPointerEvents=Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric;(supportsPointerEvents?/pointerdown$/i.test(eventName):"mousedown"==eventName)&&(this.mouseState="down",this.lastMouseDownEl=el),(supportsPointerEvents?/pointerup$/i.test(eventName):"mouseup"==eventName)&&(this.mouseState="up",this.lastMouseUpEl=el);var event=this.SUPERARG(arguments);return/pointerdown$/i.test(eventName)&&(this.lastPointerDownPrevented=this.isEventPrevented(event)),this.test&&this.test.mouseVisualizer&&event&&this.test.mouseVisualizer.onEventSimulated(event,this.currentPosition),event}},methods:{createMouseEvent:function(type,options,el){var event,global=this.global,doc=el.ownerDocument,isPointer=type.match(/^(ms)?pointer/i);if(options=this.prepareMouseEventOptions(type,options,el),!bowser.msie&&global.MouseEvent)event="wheel"===type?new global.WheelEvent(type,options):isPointer?("pointermove"===type&&(options.button=-1),new global.PointerEvent(type,options)):new global.MouseEvent(type,options);else if(doc.createEvent&&"dispatchEvent"==this.getSimulateEventsWith())if("wheel"===type){var modifiersArg="";options.ctrlKey&&(modifiersArg="Control"),options.altKey&&(modifiersArg+=" Alt"),options.shiftKey&&(modifiersArg+=" Shift"),(event=doc.createEvent("WheelEvent")).initWheelEvent(type,options.bubbles,options.cancelable,options.view,options.detail,options.screenX,options.screenY,options.clientX,options.clientY,options.button,options.relatedTarget||doc.documentElement,modifiersArg,options.deltaX||0,options.deltaY||0,options.deltaZ||0,options.deltaMode||0)}else(event=doc.createEvent(isPointer?(isPointer[1]?"MS":"")+"PointerEvent":"MouseEvents"))[isPointer?"initPointerEvent":"initMouseEvent"](type,options.bubbles,options.cancelable,options.view,options.detail,options.screenX,options.screenY,options.clientX,options.clientY,options.ctrlKey,options.altKey,options.shiftKey,options.metaKey,options.button,options.relatedTarget||doc.documentElement,null,null,null,null,null,null,null,null,options.pointerId,options.pointerType,null,null);else doc.createEventObject&&(event=doc.createEventObject(),$.extend(event,options),event.button={0:1,1:4,2:2}[event.button]||event.button);if(this.bowser.msedge&&(global.Object.defineProperty(event,"pageX",{value:options.pageX}),global.Object.defineProperty(event,"pageY",{value:options.pageY})),!/(mouse|pointer)over$/.test(type)&&!/(mouse|pointer)out$/.test(type)){var elWindow=doc.defaultView||doc.parentWindow,cursorX=options.clientX,cursorY=options.clientY;if(elWindow!==global){var offsets=this.$(elWindow.frameElement).offset();cursorX+=offsets.left,cursorY+=offsets.top}options.doNotUpdateCurrentPosition||(this.currentPosition[0]=cursorX,this.currentPosition[1]=cursorY)}return event},prepareMouseEventOptions:function(type,options,el){var global=this.global;if(!("clientX"in(options=$.extend({bubbles:!/(ms)?(mouse|pointer)enter/i.test(type)&&!/(ms)?(mouse|pointer)leave/i.test(type),cancelable:!/(ms)?(mouse|pointer)move/i.test(type),view:global,detail:0,screenX:0,screenY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,buttons:0,relatedTarget:void 0,pointerType:bowser.msie?4:"mouse"},options))&&"clientY"in options)){var center=this.test.findCenter(el);options.clientX=center[0],options.clientY=center[1]}return options.clientX=Math.round(options.clientX),options.clientY=Math.round(options.clientY),!this.bowser.msedge||"pageX"in options&&"pageY"in options||(options.pageX=this.viewportXtoPageX(options.clientX),options.pageY=this.viewportYtoPageY(options.clientY)),"screenX"in window&&(options.screenX=Math.round(global.screenX+options.clientX),options.screenY=Math.round(global.screenY+options.clientY)),options},simulateMouseMove:function(x,y,options,params){var me=this,pathBatchSize=(params=params||{}).pathBatchSize,async=params.async,mouseMovePrecision=params.mouseMovePrecision;return"instant"==params.moveKind&&(mouseMovePrecision=pathBatchSize=1e4),this.movePointerTemplate({xy:this.currentPosition,xy2:[x,y],options:options,overEls:this.overEls,interval:!1!==async?this.dragDelay:0,callbackDelay:!1!==async?50:0,pathBatchSize:pathBatchSize||me.pathBatchSize,mouseMovePrecision:mouseMovePrecision||me.mouseMovePrecision,onVoidOverEls:function(){return me.overEls=[]},onPointerEnter:function(el,options){me.onPointerEnter(el,options)},onPointerLeave:function(el,options){me.onPointerLeave(el,options)},onPointerOver:function(el,options){me.onPointerOver(el,options)},onPointerOut:function(el,options){me.onPointerOut(el,options)},onPointerMove:function(el,options){me.onPointerMove(el,options)}})},movePointerTemplate:function(args){this.global.document;var me=this,overEls=args.overEls,lastOverEl=overEls[overEls.length-1];lastOverEl&&this.nodeIsUnloaded(lastOverEl)&&(lastOverEl=null,overEls=args.onVoidOverEls());var mouseMovePrecision="down"==me.mouseState?me.mouseDragPrecision:args.mouseMovePrecision||me.mouseMovePrecision,pathBatchSize=Math.max(args.pathBatchSize,mouseMovePrecision),options=args.options||{},path=(Siesta.Project.Browser.FeatureSupport().supports,this.getPathBetweenPoints(args.xy,args.xy2)),queue=new Siesta.Util.Queue({deferer:this.test.originalSetTimeout,deferClearer:this.test.originalClearTimeout,interval:args.interval,callbackDelay:args.callbackDelay,observeTest:this.test,processor:function(data,index){function visitPoint(point){var targetEl=(info=me.elementFromPoint(point[0],point[1],!1,null,!0)).el;targetEl&&(x=info.localXY[0],y=info.localXY[1],targetEl!==lastOverEl&&(me.onElementAtCursorChanged(targetEl,lastOverEl,x,y,options),lastOverEl=targetEl),args.onPointerMove(targetEl,$.extend({clientX:x,clientY:y},options),j<toIndex))}for(var info,x,y,fromIndex=data.sourceIndex,toIndex=data.targetIndex,delta=Math.min(toIndex-fromIndex,mouseMovePrecision)||1,j=fromIndex;j<=toIndex;j+=delta){var point=path[j];visitPoint(point)}j>=path.length&&point!==path[path.length-1]&&(point=visitPoint(path[path.length-1])),point&&(info=me.elementFromPoint(point[0],point[1],!1,null,!0)).el&&info.el!==lastOverEl&&me.onElementAtCursorChanged(info.el,lastOverEl,x,y,options)}}),pathLength=path.length;if(pathLength<=pathBatchSize&&pathBatchSize<=mouseMovePrecision)queue.addStep({sourceIndex:0,targetIndex:Math.min(1,pathLength-1)}),3<=pathLength&&queue.addStep({sourceIndex:pathLength-2,targetIndex:pathLength-1});else for(var i=0,l=pathLength;i<l;i+=pathBatchSize)queue.addStep({sourceIndex:i,targetIndex:Math.min(i+pathBatchSize-1,pathLength-1)});return queue.addStep({processor:function(){me.afterMouseInteraction()}}),new Promise(function(resolve,reject){queue.run(resolve)})},onPointerEnter:function(el,options){Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric&&this.simulateEvent(el,"pointerenter",options),this.simulateEvent(el,"mouseenter",options)},onPointerLeave:function(el,options){Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric&&this.simulateEvent(el,"pointerleave",options),this.simulateEvent(el,"mouseleave",options)},onPointerOver:function(el,options){Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric&&this.simulateEvent(el,"pointerover",options),this.simulateEvent(el,"mouseover",options)},onPointerOut:function(el,options){Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric&&this.simulateEvent(el,"pointerout",options),this.simulateEvent(el,"mouseout",options)},onPointerMove:function(el,options){var supportsPointerEvents=Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric;options.buttons="up"==this.mouseState?0:1,supportsPointerEvents&&this.simulateEvent(el,"pointermove",options),this.simulateEvent(el,"mousemove",options)},onElementAtCursorChanged:function(targetEl,lastOverEl,clientX,clientY,options){var me=this,supports=Siesta.Project.Browser.FeatureSupport().supports,overEls=me.overEls;!lastOverEl||me.nodeIsOrphan(lastOverEl)||me.nodeIsUnloaded(lastOverEl)||me.onPointerOut(lastOverEl,$.extend({clientX:clientX,clientY:clientY,relatedTarget:targetEl},options));for(var i=overEls.length-1;0<=i;i--){var el=overEls[i];me.nodeIsUnloaded(el)||me.nodeIsOrphan(el)?overEls.splice(i,1):el!==targetEl&&0===me.$(el).has(targetEl).length&&(supports.mouseEnterLeave&&me.onPointerLeave(el,$.extend({clientX:clientX,clientY:clientY,relatedTarget:targetEl},options)),overEls.splice(i,1))}if(me.onPointerOver(targetEl,$.extend({clientX:clientX,clientY:clientY,relatedTarget:lastOverEl},options)),supports.mouseEnterLeave&&-1==jQuery.inArray(targetEl,overEls)){for(var els=[],docEl=targetEl.ownerDocument.documentElement,mouseEnterEl=targetEl;mouseEnterEl&&mouseEnterEl!=docEl;)els.unshift(mouseEnterEl),mouseEnterEl=mouseEnterEl.parentNode;for(i=0;i<els.length;i++)-1==jQuery.inArray(els[i],overEls)&&(me.onPointerEnter(els[i],$.extend({clientX:clientX,clientY:clientY,relatedTarget:lastOverEl},options)),overEls.push(els[i]))}},afterMouseInteraction:function(){},simulateMouseDown:function(clickInfo,options){var supportsPointerEvents=Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric;return this.processMouseActionSteps(clickInfo,options,[supportsPointerEvents?{event:"pointerdown",interval:0}:null,{event:"mousedown",focus:!0}])},simulateMouseUp:function(clickInfo,options){var el=clickInfo.el,shouldFireClick=!(this.lastMouseDownEl&&el!==this.lastMouseDownEl&&!($.contains(el,this.lastMouseDownEl)||$.contains(this.lastMouseDownEl,el)))||!(this.bowser.safari||this.bowser.gecko),supportsPointerEvents=Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric;return this.processMouseActionSteps(clickInfo,options,[supportsPointerEvents?{event:"pointerup",interval:0}:null,{event:"mouseup"}].concat(shouldFireClick?[{event:"click"}]:[]))},mouseOver:function(el,options){var info=this.test.getNormalizedTopElementInfo(el,!0);info&&((options=options||{}).clientX=null!=options.clientX?options.clientX:info.localXY[0],options.clientY=null!=options.clientY?options.clientY:info.localXY[1],Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric&&this.simulateEvent(el,"pointerover",options),this.simulateEvent(el,"mouseover",options))},mouseOut:function(el,options){var info=this.test.getNormalizedTopElementInfo(el,!0);info&&((options=options||{}).clientX=null!=options.clientX?options.clientX:info.localXY[0],options.clientY=null!=options.clientY?options.clientY:info.localXY[1],Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric&&this.simulateEvent(el,"pointerout",options),this.simulateEvent(el,"mouseout",options))},processMouseActionSteps:function(clickInfo,options,steps){clickInfo.originalEl&&this.enableUnreachableClickWarning&&this.test.getNormalizedTopElementInfo(clickInfo.originalEl,!1,clickInfo.method,clickInfo.offset);var me=this,x=clickInfo.globalXY[0],y=clickInfo.globalXY[1],isOption="option"===clickInfo.el.nodeName.toLowerCase(),doc=me.global.document,prevScrollTop=this.getPageScrollY(),target=isOption?clickInfo.el:me.elementFromPoint(x,y,!1,clickInfo.el),targetParent=target.parentNode,targetHasChanged=!1,queue=new Siesta.Util.Queue({deferer:this.test.originalSetTimeout,deferClearer:this.test.originalClearTimeout,interval:10,callbackDelay:me.afterActionDelay,observeTest:this.test,processor:function(data){if(!me.lastPointerDownPrevented||!/mouse/i.test(data.event)){var delta=doc.body?me.getPageScrollY()-prevScrollTop:0,elAtCursor=isOption?target:me.elementFromPoint(x,y-delta,!1,target),fireEl=elAtCursor;if(!isOption&&data.recaptureTarget&&(target=elAtCursor,targetHasChanged=!1),isOption||elAtCursor===target||$.contains(elAtCursor,target)||$.contains(target,elAtCursor)||(targetHasChanged=!0),!isOption&&"click"===data.event){var mouseDownUpTargetsChanged;if(elAtCursor===target&&elAtCursor.parentNode!==targetParent||me.nodeIsOrphan(target)||me.lastMouseDownEl&&me.nodeIsOrphan(me.lastMouseDownEl))return;if(!me.lastMouseDownEl||elAtCursor===me.lastMouseDownEl||$.contains(elAtCursor,me.lastMouseDownEl)||$.contains(me.lastMouseDownEl,elAtCursor)?me.lastMouseUpEl&&me.lastMouseUpEl!==elAtCursor&&!$.contains(elAtCursor,me.lastMouseUpEl)&&(mouseDownUpTargetsChanged=!0,fireEl=me.getCommonAncestor(elAtCursor,me.lastMouseUpEl)):(mouseDownUpTargetsChanged=!0,fireEl=me.getCommonAncestor(elAtCursor,me.lastMouseDownEl)),mouseDownUpTargetsChanged){if(me.bowser.gecko||me.bowser.safari)return;if(!fireEl)return}}if(!targetHasChanged||!data.cancelIfTargetChanged){var event=me.simulateEvent(fireEl,data.event,options);if(!me.lastPointerDownPrevented&&data.focus&&me.mimicFocusOnMouseDown(elAtCursor,event),!isOption){var elementAtPoint=me.elementFromPoint(x,y-delta,!1,target);elementAtPoint!==elAtCursor&&me.onElementAtCursorChanged(elementAtPoint,elAtCursor,x,y-delta,options)}}}}});return Joose.A.each(steps,function(step){step&&queue.addStep(step)}),new Promise(function(resolve,reject){queue.run(function(){me.afterMouseInteraction(),resolve()})})},simulateMouseClick:function(clickInfo,options){var supportsPointerEvents=Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric;return this.processMouseActionSteps(clickInfo,options,[supportsPointerEvents?{event:"pointerdown",interval:0}:null,{event:"mousedown",focus:!0},supportsPointerEvents?{event:"pointerup",interval:0}:null,{event:"mouseup",interval:0},{event:"click",cancelIfTargetChanged:!0}])},simulateRightClick:function(clickInfo,options){var isMac=-1<navigator.platform.indexOf("Mac"),supportsPointerEvents=Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric;return(options=options||{}).button=options.buttons=2,this.processMouseActionSteps(clickInfo,options,[supportsPointerEvents?{event:"pointerdown",interval:0}:null,{event:"mousedown",focus:!0}].concat(isMac?[]:[supportsPointerEvents?{event:"pointerup",interval:0}:null,{event:"mouseup",interval:0}]).concat([{event:"contextmenu"}]))},simulateDoubleClick:function(clickInfo,options){var supportsPointerEvents=Siesta.Project.Browser.FeatureSupport().supports.PointerEventsGeneric;return this.processMouseActionSteps(clickInfo,options,[supportsPointerEvents?{event:"pointerdown",interval:0}:null,{event:"mousedown",focus:!0},supportsPointerEvents?{event:"pointerup",interval:0}:null,{event:"mouseup",interval:0},{event:"click",cancelIfTargetChanged:!0},supportsPointerEvents?{event:"pointerdown",interval:0}:null,{event:"mousedown",recaptureTarget:!0,focus:!0},supportsPointerEvents?{event:"pointerup",interval:0}:null,{event:"mouseup",interval:0},{event:"click",cancelIfTargetChanged:!0,interval:0},{event:"dblclick",cancelIfTargetChanged:!0}])},mimicFocusOnMouseDown:function(el,mouseDownEvent){if(!this.isEventPrevented(mouseDownEvent)){var test=this.test;if(test.isElementFocusable(el))test.focus(el,!0);else{var doc=el.ownerDocument,body=(doc.defaultView||doc.parentWindow,doc.body);if(body){for(;el&&el!=body&&el!=doc;){if(bowser.msie&&"on"==el.getAttribute("unselectable"))return;if(test.isElementFocusable(el))return void test.focus(el,!0);el=el.parentNode}test.focus(body||doc.documentElement,!0)}}}},simulateMouseWheel:function(targetInfo,options){var eventName="wheel";return targetInfo.el.ownerDocument.createEvent&&"dispatchEvent"===this.getSimulateEventsWith()||(eventName="mousewheel"),this.processMouseActionSteps(targetInfo,options,[{event:eventName}])},getPathBetweenPoints:function(from,to){if("number"!=typeof from[0]||"number"!=typeof from[1]||"number"!=typeof to[0]||"number"!=typeof to[1]||isNaN(from[0])||isNaN(from[1])||isNaN(to[0])||isNaN(to[1]))throw new Error("Incorrect arguments passed to getPathBetweenPoints: "+from+", "+to);var sx,sy,err,e2,stops=[],x0=Math.floor(from[0]),x1=Math.floor(to[0]),y0=Math.floor(from[1]),y1=Math.floor(to[1]),dx=Math.abs(x1-x0),dy=Math.abs(y1-y0);for(sx=x0<x1?1:-1,sy=y0<y1?1:-1,err=dx-dy;x0!==x1||y0!==y1;)-dy<(e2=2*err)&&(err-=dy,x0+=sx),e2<dx&&(err+=dx,y0+=sy),stops.push([x0,y0]);var last=stops[stops.length-1];return 0<stops.length&&(last[0]!==to[0]||last[1]!==to[1])&&stops.push(to.slice()),stops}}}),Singleton("Siesta.Test.UserAgent.KeyCodes",{methods:{isNav:function(k){var keys=this.keys;return 33<=k&&k<=40||k==keys.RETURN||k==keys.TAB||k==keys.ESCAPE},isSpecial:function(k){return k===this.keys.BACKSPACE||16<=k&&k<=20||44<=k&&k<=46||112<=k&&k<=123||91===k},isModifier:function(k){return k===this.keys.SHIFT||k===this.keys.CTRL||k===this.keys.ALT||k===this.keys.CMD},fromCharCode:function(code,readableForm){var keys=this.keys;for(var key in keys)if(keys[key]===code&&(!readableForm||1<key.length))return key}},has:{keys:{init:{"\b":8,BACKSPACE:8,"\t":9,TAB:9,"\r":13,RETURN:13,ENTER:13,SPACE:32,SHIFT:16,CTRL:17,ALT:18,CMD:91,"PAUSE-BREAK":19,CAPS:20,ESCAPE:27,ESC:27,"NUM-LOCK":144,"SCROLL-LOCK":145,PRINT:44,"PAGE-UP":33,PAGEUP:33,"PAGE-DOWN":34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,ARROWLEFT:37,UP:38,ARROWUP:38,RIGHT:39,ARROWRIGHT:39,DOWN:40,ARROWDOWN:40,INSERT:45,DELETE:46," ":32,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUM0:96,NUM1:97,NUM2:98,NUM3:99,NUM4:100,NUM5:101,NUM6:102,NUM7:103,NUM8:104,NUM9:105,"*":106,"+":107,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123}},keyNameMap:{init:{8:"Backspace",9:"Tab",13:"Enter",32:"Space",16:"Shift",17:"Control",18:"Alt",91:"Meta",20:"CapsLock",27:"Escape",144:"NumLock",145:"ScrollLock",44:"Print",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",106:"Multiply",107:"Add",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12"}}}}),Role("Siesta.Test.Simulate.Keyboard",{requires:["$","simulateEvent","isEventPrevented"],does:[Siesta.Util.Role.CanFormatStrings,Siesta.Test.Browser.Role.CanWorkWithKeyboard],has:{keyboardEventName:"KeyboardEvent"in window&&bowser.gecko?"KeyboardEvent":"KeyEvent"in window?"KeyEvents":null},methods:{createKeyboardEvent:function(type,options,el){var event,doc=el.ownerDocument;this.global;if(options=$.extend({bubbles:!0,cancelable:!0,view:this.global,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:0,key:options.key||""},options),doc.createEvent&&"dispatchEvent"==this.getSimulateEventsWith()){try{"KeyboardEvent"===this.keyboardEventName&&(event=new KeyboardEvent(type,options))}catch(err){event=null}event||((event=doc.createEvent("Events")).initEvent(type,options.bubbles,options.cancelable),$.extend(event,{view:options.view,ctrlKey:options.ctrlKey,altKey:options.altKey,shiftKey:options.shiftKey,metaKey:options.metaKey,keyCode:options.keyCode,charCode:options.charCode,key:options.key||"",code:options.code}))}else doc.createEventObject&&(event=doc.createEventObject(),$.extend(event,options));return(bowser.msie||bowser.opera)&&(event.keyCode=0<options.charCode?options.charCode:options.keyCode,event.charCode=void 0),event},createTextEvent:function(type,options,el){var doc=el.ownerDocument,event=null;if(doc.createEvent)try{if((event=doc.createEvent("TextEvent"))&&event.initTextEvent)return event.initTextEvent(type,!0,!0,this.global,options.text,0,window.navigator.userLanguage||window.navigator.language),event}catch(e){}return null},findNextFocusable:function(el,offset){var selector,$el=this.$(el),$focusable=this.$(":focus, :input, a[href], [tabindex], body",el.ownerDocument).not(":disabled").not(":hidden").not("a[href]:empty"),isRadio=!1;"INPUT"===el.tagName&&"radio"===el.type&&""!==el.name&&(isRadio=!0,selector="input[type=radio][name="+el.name.replace(/(!"#$%&'\(\)\*\+,\.\/:;<=>\?@\[\]^`\{\|\}~)/g,"\\\\$1")+"]");for(var processed=[],i=0;i<$focusable.length;i++){var currEl=$focusable[i];currEl!=el&&-1==currEl.getAttribute("tabIndex")||isRadio&&$(currEl).is(selector)||processed.push(currEl)}function getTabIndex(dom){return(dom!=el||-1!=currentTabIndex)&&dom!=body&&dom.getAttribute("tabIndex")||0}var body=el.ownerDocument.body,currentTabIndex=el.getAttribute("tabIndex");processed.sort(function(a,b){var aIndex=getTabIndex(a),bIndex=getTabIndex(b);return aIndex<bIndex?-1:bIndex<aIndex||a==body?1:b==body?-1:0});var currentIndex=$(processed).index($el);return-1==currentIndex?null:processed[(currentIndex+offset)%processed.length]},emulateTab:function(el,offset){var next=this.findNextFocusable(el,offset||1);return next?this.test.focus(next):el.blur(),next},simulateType:function(text,options,params){if(null==text)throw"Must supply a string to type";var me=this,el=params.el;if(el.disabled)return Promise.resolve();"value"in el&&el.setAttribute("__lastValue",el.value);var keys=this.extractKeysAndSpecialKeys(text+""),queue=new Siesta.Util.Queue({deferer:this.test.originalSetTimeout,deferClearer:this.test.originalClearTimeout,interval:this.actionDelay,callbackDelay:0,observeTest:this.test,processor:function(data,index){var focusedEl=me.activeElement(!0,el,el);me.simulateKeyPress(focusedEl,data.key,options)}});if(params.focus&&(queue.addStep({processor:function(){me.nodeIsOrphan(el)||me.focus(el)}}),bowser.msie&&queue.addStep({processor:function(){me.nodeIsOrphan(el)||me.focus(el)}})),Joose.A.each(keys,function(key,index){key=1==key.length?key:key.substring(1,key.length-1),keys[index]=key,queue.addStep({key:key})}),!el.readOnly&&keys.length){var firstKeyCode=Siesta.Test.UserAgent.KeyCodes().keys[keys[0].toUpperCase()];if(this.isReadableKey(firstKeyCode)){var selText=this.test.getSelectedText(el);if(selText&&"value"in el&&"selectionStart"in el){var caretPos;try{caretPos=el.selectionStart}catch(e){}null!=caretPos&&(this.silentSetValue(el,el.value.substr(0,caretPos)+el.value.substr(caretPos+selText.length),"value"),this.test.setCaretPosition(el,caretPos))}}}return new Promise(function(resolve,reject){queue.run(resolve)})},simulateKeyPress:function(el,key,options){var isMac=bowser.mac,KeyCodes=Siesta.Test.UserAgent.KeyCodes().keys,keyNameMap=Siesta.Test.UserAgent.KeyCodes().keyNameMap,keyCode=KeyCodes[key.toUpperCase()]||0,keyDownEl=el=this.test.normalizeElement(el);(options=options||{}).readableKey=key;var suppressKeyPress=isMac&&options.metaKey||!isMac&&options.ctrlKey,isReadableKey=this.isReadableKey(keyCode),charCode=isReadableKey&&!suppressKeyPress?key.charCodeAt(0):0;options.key=isReadableKey?key:keyNameMap[keyCode]||"",options.code=keyNameMap[keyCode];var me=this,isTextInput=me.isTextInput(el),isEditableNode=me.isEditableNode(el),acceptsTextInput=isTextInput||isEditableNode,textValueProp="value"in el?"value":"innerHTML",originalLength=el[textValueProp].length,keyDownEvent=me.simulateEvent(el,"keydown",Joose.O.extend({charCode:0,keyCode:keyCode},options)),keyDownPrevented=this.isEventPrevented(keyDownEvent);if(!(acceptsTextInput&&this.mimicTextSelection(keyDownEvent,el))){var keyPressPrevented=!1,supports=Siesta.Project.Browser.FeatureSupport().supports;if(el=me.activeElement(!0,el,el),!suppressKeyPress&&!keyDownPrevented){var event=me.simulateEvent(el,"keypress",Joose.O.extend({charCode:charCode,keyCode:isReadableKey?0:keyCode},options));(keyPressPrevented=this.isEventPrevented(event))||keyCode!==KeyCodes.TAB||(el=this.emulateTab(el,options.shiftKey?-1:1)||el)}if(!keyDownPrevented&&acceptsTextInput&&keyCode!=KeyCodes.TAB){var innerHTML;if(!isReadableKey||suppressKeyPress||keyPressPrevented)me.mimicCaretMovement(el,keyCode);else isEditableNode&&bowser.msie&&(0===(innerHTML=el.innerHTML).indexOf("&nbsp;")?(el.innerHTML=innerHTML.substring(6),originalLength=el.innerHTML.length):0===innerHTML.indexOf("<br>")&&(el.innerHTML=innerHTML.substring(4),originalLength=el.innerHTML.length)),isEditableNode&&!bowser.msie?(8203===(innerHTML=el.innerHTML).charCodeAt(innerHTML.length-1)&&(el.innerHTML=innerHTML.substring(0,innerHTML.length-1)),el.ownerDocument.execCommand("insertText",!1,options.readableKey)):me.simulateEvent(el,bowser.msie?"textinput":"textInput",{text:options.readableKey}),me.mimicCharacterInsertion(el,key,options,originalLength);(keyCode===KeyCodes.BACKSPACE||keyCode===KeyCodes.DELETE)&&!supports.canSimulateBackspace&&0<el[textValueProp].length&&this.mimicCharacterDeletion(el,keyCode,options),"value"!=textValueProp||keyCode!==KeyCodes.ENTER||keyPressPrevented||(isTextInput&&this.maybeMimicChangeEvent(keyDownEl),supports.enterSubmitsForm||this.mimicFormSubmit(el))}}return this.mimicClickOnEnter(el,keyCode),me.simulateEvent(el,"keyup",$.extend({charCode:0,keyCode:keyCode},options)),Promise.resolve()},mimicCharacterInsertion:function(el,readableKey,options,originalLength){var textValueProp="value"in el?"value":"innerHTML",maxLength=el.getAttribute("maxlength")||1/0,isTextInput=this.isTextInput(el),supports=Siesta.Project.Browser.FeatureSupport().supports;if(null!=maxLength&&(maxLength=Number(maxLength)),!el.readOnly&&(isTextInput||bowser.msie)&&!supports.canSimulateKeyCharacters&&originalLength===el[textValueProp].length&&originalLength<maxLength){var val=el[textValueProp],caretPos=this.test.getCaretPosition(el);null==caretPos&&(caretPos=val.length),this.silentSetValue(el,val.substr(0,caretPos)+readableKey+val.substr(caretPos),textValueProp),this.test.setCaretPosition(el,caretPos+1),this.simulateEvent(el,"input",options)}},silentSetValue:function(el,newValue,propetyName){var Object=this.global.Object;Object.getOwnPropertyDescriptor&&"value"==propetyName?Object.getOwnPropertyDescriptor(el.constructor.prototype,propetyName).set.call(el,newValue):el[propetyName]=newValue},mimicTextSelection:function(keyDownEvent,el){var isMac=bowser.mac,KC=Siesta.Test.UserAgent.KeyCodes().keys,retVal=!1,ctrlKey=!isMac&&keyDownEvent.ctrlKey||keyDownEvent.metaKey&&isMac;switch(keyDownEvent.keyCode){case KC.A:ctrlKey&&(this.test.selectText(el),retVal=!0);break;case KC.LEFT:case KC.HOME:keyDownEvent.shiftKey&&(this.test.selectText(el,0,this.test.getCaretPosition(el)),retVal=!0);break;case KC.RIGHT:case KC.END:keyDownEvent.shiftKey&&(this.test.selectText(el,this.test.getCaretPosition(el)),retVal=!0)}return retVal},mimicClickOnEnter:function(el,keyCode){var nodeName=el.nodeName&&el.nodeName.toLowerCase(),supports=Siesta.Project.Browser.FeatureSupport().supports,KeyCodes=Siesta.Test.UserAgent.KeyCodes().keys;"a"!=nodeName&&"button"!=nodeName||keyCode!==KeyCodes.ENTER||supports.enterOnAnchorTriggersClick||this.simulateEvent(el,"click",{doNotUpdateCurrentPosition:!0})},mimicCaretMovement:function(el,keyCode){var nodeName=el.nodeName&&el.nodeName.toLowerCase();if("input"==nodeName||"textarea"==nodeName){var KeyCodes=Siesta.Test.UserAgent.KeyCodes().keys;switch(keyCode){case KeyCodes.HOME:this.test.setCaretPosition(el,0);break;case KeyCodes.LEFT:if(selText=this.test.getSelectedText(el)){var caretPos=this.test.getCaretPosition(el);this.test.selectText(el,caretPos,caretPos)}else this.test.moveCaretPosition(el,-1);break;case KeyCodes.RIGHT:var selText;if(selText=this.test.getSelectedText(el)){caretPos=this.test.getCaretPosition(el);this.test.selectText(el,caretPos+selText.length,caretPos+selText.length)}else this.test.moveCaretPosition(el,1);break;case KeyCodes.END:this.test.setCaretPosition(el,el.value.length)}}},mimicFormSubmit:function(el){var form=this.$(el).closest("form");if(form.length){var submitButton=form.find(":submit")[0],hasOneInput=1===form.find("input").length;if(submitButton)submitButton.click();else if(hasOneInput){this.isEventPrevented(this.simulateEvent(form[0],"submit",{}))||form[0].submit()}}},mimicCharacterDeletion:function(el,keyCode,options){var isTextInput=this.isTextInput(el);if(!el.readOnly)if(isTextInput||bowser.msie){var textValueProp="value"in el?"value":"innerHTML",text=el[textValueProp],selText=this.test.getSelectedText(el)||"",caretPosition=this.test.getCaretPosition(el),inputChanged=!1;if(null!=caretPosition&&selText)this.silentSetValue(el,text.substring(0,caretPosition)+text.substring(caretPosition+selText.length),textValueProp),inputChanged=!0;else{var KeyCodes=Siesta.Test.UserAgent.KeyCodes().keys;caretPosition=null==caretPosition?text.length:caretPosition,keyCode===KeyCodes.BACKSPACE?0<caretPosition&&(inputChanged=!0,this.silentSetValue(el,text.substring(0,caretPosition-1)+text.substring(caretPosition),textValueProp),--caretPosition):(caretPosition<text.length&&(inputChanged=!0),this.silentSetValue(el,(0<caretPosition?text.substring(0,caretPosition+1):"")+text.substring(caretPosition+1),textValueProp))}this.test.setCaretPosition(el,caretPosition),inputChanged&&this.simulateEvent(el,"input",options)}else el.ownerDocument.execCommand("delete")},maybeMimicChangeEvent:function(el){el.getAttribute("__lastValue")!==el.value&&(this.simulateEvent(el,"change"),el.setAttribute("__lastValue",el.value))}}}),Role("Siesta.Test.Simulate.Event",{does:[JooseX.Observable],requires:["$","typeOf","createTextEvent","createMouseEvent","createKeyboardEvent"],has:{bowser:function(){return bowser},browser:function(){return bowser},actionDelay:100,afterActionDelay:100,simulateEventsWith:{is:"rw",lazy:function(){return"dispatchEvent"}}},methods:{normalizeEventName:function(eventName){return eventName},simulateEvent:function(el,type,options){this.global;options=options||{},"Array"==this.typeOf(el)&&(0==el.length&&(el=this.currentPosition.slice()),"clientX"in options||(options.clientX=el[0]),"clientY"in options||(options.clientY=el[1])),el=this.test.normalizeElement(el),type=this.normalizeEventName(type);var evt=this.createEvent(type,options,el);return evt&&this.maintainScrollPositionDuring(function(){evt.synthetic=!0,this.mimicBrowserBehaviorBefore(evt,type,el),this.dispatchEvent(el,type,evt),this.isEventPrevented(evt)||this.mimicBrowserBehaviorAfter(evt,type,el)}),this.fireEvent("eventsimulated",evt,el,type,options),evt},createEvent:function(type,options,el){var event;if((event=/^textinput$/i.test(type)?this.createTextEvent(type,options,el):/^mouse(over|out|down|up|move|enter|leave)|contextmenu|wheel|(dbl)?click$/.test(type)||/^(ms)?pointer/i.test(type)?this.createMouseEvent(type,options,el):/^key(up|down|press)$/.test(type)?this.createKeyboardEvent(type,options,el):/^change$|^input$|^submit/.test(type)?this.createGenericEvent(type,options,el):this.createHtmlEvent(type,options,el))&&bowser.msie&&9<=bowser.version){var prev=event.preventDefault;event.preventDefault=function(){return arguments.callee.$prevented=!0,this.returnValue=!1,prev&&prev.apply(this,arguments)}}return event},isEventPrevented:function(event){return event.preventDefault&&"Boolean"==this.typeOf(event.preventDefault.$prevented)?event.preventDefault.$prevented:"Boolean"==this.typeOf(event.defaultPrevented)?event.defaultPrevented:!1===event.returnValue},createGenericEvent:function(type,options,el){var doc=el.ownerDocument;if(doc.createEvent&&"dispatchEvent"==this.getSimulateEventsWith()){var evt=doc.createEvent("Events");return evt.initEvent(type,!0,!0),evt}if(doc.createEventObject){var event=doc.createEventObject();return event.srcElement=el,event.bubbles=options.bubbles,event.cancelBubble=!options.bubbles,event.type=type,event}},createHtmlEvent:function(type,options,el){var doc=el.ownerDocument;if(doc.createEvent&&"dispatchEvent"==this.getSimulateEventsWith()){var evt=doc.createEvent("HTMLEvents");return evt.initEvent(type,!1,!1),evt}if(doc.createEventObject)return doc.createEventObject()},dispatchEvent:function(el,type,evt){if(el.dispatchEvent&&"dispatchEvent"==this.getSimulateEventsWith())el.dispatchEvent(evt);else{if(!el.fireEvent)throw"Can't dispatch event: "+type;try{var doc=this.global.document.documentElement,body=this.global.document.body;doc&&doc.scrollLeft||body&&body.scrollLeft;el.fireEvent("on"+type.toLowerCase(),evt)}catch(e){}}return evt},mimicBrowserBehaviorBefore:function(event,type,target){},mimicBrowserBehaviorAfter:function(event,type,target){var tagName=target.tagName.toLowerCase();switch(type){case"mousedown":this.isTextInput(target)&&this.mimicClearTextSelection(target);break;case"click":bowser.msie&&bowser.version<11&&"a"===tagName&&target.getAttribute("href")?this.mimicHashUpdate(target):"option"!==tagName||target.getAttribute("disabled")||this.mimicOptionSelect(target);break;case"dblclick":this.isTextInput(target)&&this.mimicDblClickTextSelection(target);break;case"keydown":var KeyCodes=Siesta.Test.UserAgent.KeyCodes().keys;event.keyCode===KeyCodes.BACKSPACE&&this.mimicHistoryChangeAfterBackspace(event,target)}},mimicClearTextSelection:function(target){var extVersion=this.global.Ext&&this.global.Ext.versions,isExtJS51=extVersion&&extVersion.extjs&&extVersion.extjs.equals("5.1.0.107");bowser.msie&&isExtJS51&&!(9<bowser.version)||(this.test.selectText(target,target.value.length-1,target.value.length),this.test.setCaretPosition(target,target.value.length))},mimicDblClickTextSelection:function(target){this.test.selectText(target)},mimicHashUpdate:function(el){var href=el.getAttribute("href").match(/#(.*)/);href&&(this.global.location.hash=href[1])},mimicHistoryChangeAfterBackspace:function(event,target){if(!bowser.webkit&&!bowser.blink){var doc=target.ownerDocument;if(!target.isContentEditable&&"on"!==doc.designMode.toLowerCase()&&!this.isTextInput(target)){var elWindow=target.ownerDocument.defaultView||target.ownerDocument.parentWindow;event.shiftKey?this.mimicNextHistory(elWindow):this.mimicPreviousHistory(elWindow)}}},mimicPreviousHistory:function(global){global.history.back()},mimicNextHistory:function(global){global.history.forward()},mimicOptionSelect:function(optionNode){var select=this.$(optionNode).closest("select")[0],oldValue=select.value;select.value=optionNode.value,oldValue!==optionNode.value&&this.simulateEvent(select,"change")}}}),Role("Siesta.Test.Simulate.Touch",{requires:[],has:{touchEventNamesMap:{lazy:"this.buildTouchEventNamesMap"},currentTouchId:1,activeTouches:Joose.I.Object,longPressDelay:{init:1500,is:"rw"},forceTouchEvents:bowser.chrome},methods:{simulateTap:function(context,options){var id,queue=new Siesta.Util.Queue({deferer:this.test.originalSetTimeout,deferClearer:this.test.originalClearTimeout,interval:30,observeTest:this.test}),me=this;return queue.addStep({processor:function(){id=me.touchStart(null,null,options,context)}}),queue.addStep({processor:function(){me.touchEnd(id,options)}}),new Promise(function(resolve,reject){queue.run(resolve)})},simulateDoubleTap:function(context,options){var id,queue=new Siesta.Util.Queue({deferer:this.test.originalSetTimeout,deferClearer:this.test.originalClearTimeout,interval:30,observeTest:this.test}),me=this;return queue.addStep({processor:function(){id=me.touchStart(null,null,options,context)}}),queue.addStep({processor:function(){me.touchEnd(id,options)}}),queue.addStep({processor:function(){id=me.touchStart(null,null,options,context)}}),queue.addStep({processor:function(){me.touchEnd(id,options)}}),new Promise(function(resolve,reject){queue.run(resolve)})},simulateLongPress:function(context,options){var id,queue=new Siesta.Util.Queue({deferer:this.test.originalSetTimeout,deferClearer:this.test.originalClearTimeout,interval:30,observeTest:this.test}),me=this;return queue.addStep({processor:function(){id=me.touchStart(null,null,options,context)}}),queue.addDelayStep(this.getLongPressDelay()),queue.addStep({processor:function(){me.touchEnd(id,options)}}),new Promise(function(resolve,reject){queue.run(resolve)})},simulatePinch:function(context1,context2,options){var id1,id2,queue=new Siesta.Util.Queue({deferer:this.test.originalSetTimeout,deferClearer:this.test.originalClearTimeout,interval:30,observeTest:this.test}),dx=context1.localXY[0]-context2.localXY[0],dy=context1.localXY[1]-context2.localXY[1],distance=Math.sqrt(dx*dx+dy*dy);distance<1&&(distance=1);var delta=(distance*scale-distance)/2,angle=Math.atan(dy/dx),x1=Math.round(context1.localXY[0]-delta*Math.cos(angle)),y1=Math.round(context1.localXY[1]-delta*Math.sin(angle)),x2=Math.round(context2.localXY[0]+delta*Math.cos(angle)),y2=Math.round(context2.localXY[1]+delta*Math.sin(angle)),options2=Joose.O.extend({},options);return queue.addStep({processor:function(){id1=me.touchStart(null,null,options,context1),id2=me.touchStart(null,null,options2,context2)}}),queue.addAsyncStep({processor:function(data){var move1Done=!1,move2Done=!1;me.touchMove(id1,x1,y1,function(){(move1Done=!0)&&move2Done&&data.next()},null,options),me.touchMove(id2,x2,y2,function(){move2Done=!0,move1Done&&move2Done&&data.next()},null,options2)}}),queue.addStep({processor:function(){me.touchEnd(id1,options),me.touchEnd(id2,options2)}}),new Promise(function(resolve,reject){queue.run(resolve)})},simulateTouchDrag:function(sourceXY,targetXY,options,dragOnly){var me=this;options=options||{};me.elementFromPoint(sourceXY[0],sourceXY[1],!0),me.elementFromPoint(targetXY[0],targetXY[1],!0);var id,queue=new Siesta.Util.Queue({deferer:this.test.originalSetTimeout,deferClearer:this.test.originalClearTimeout,interval:me.dragDelay,callbackDelay:me.afterActionDelay,observeTest:this.test});return queue.addStep({processor:function(){id=me.touchStart(sourceXY,null,options)}}),queue.addAsyncStep({processor:function(data){me.touchMove(id,targetXY[0],targetXY[1],options).then(data.next)}}),queue.addStep({processor:function(){dragOnly||me.touchEnd(id,options)}}),new Promise(function(resolve,reject){queue.run(function(){dragOnly?resolve(id):resolve()})})},touchStart:function(target,offset,options,context){context=context||this.test.getNormalizedTopElementInfo(target,!0,"touchStart",offset),options=Joose.O.extend({clientX:context.localXY[0],clientY:context.localXY[1]},options||{});var event=this.simulateTouchEventGeneric(context.el,"start",options);return event.pointerId||event.changedTouches[0].identifier},touchEnd:function(touchId,options){var touch=this.activeTouches[touchId];if(!touch)throw"Can't find active touch: "+touchId;options=Joose.O.extend({clientX:touch.clientX,clientY:touch.clientY},options||{});var target=touch.target;this.test.isInDom(target)||(touch.target=this.global.document.body),this.simulateTouchEventGeneric(touch.currentEl||touch.target,"end",options,{touchId:touchId})},touchMove:function(touchId,toX,toY,options){var touch=this.activeTouches[touchId];if(!touch)throw"Can't find active touch: "+touchId;var me=this,overEls=[];return this.movePointerTemplate({xy:[touch.clientX,touch.clientY],xy2:[toX,toY],options:options||{},overEls:overEls,interval:me.dragDelay,callbackDelay:me.afterActionDelay,pathBatchSize:me.pathBatchSize,onVoidOverEls:function(){return overEls=[]},onPointerEnter:function(el,options){},onPointerLeave:function(el,options){},onPointerOver:function(el,options){},onPointerOut:function(el,options){},onPointerMove:function(el,options){touch.clientX=options.clientX,touch.clientY=options.clientY,touch.pageX=me.viewportXtoPageX(options.clientX),touch.pageY=me.viewportYtoPageY(options.clientY),touch.currentEl=el,me.simulateTouchEventGeneric(el,"move",options,{touchId:touchId})}})},touchCancel:function(touchId,options){var touch=this.activeTouches[touchId];if(!touch)throw"Can't find active touch: "+touchId;this.simulateTouchEventGeneric(touch.currentEl||touch.target,"cancel",options,{touchId:touchId})},simulatePointerEventModern:function(target,type,options,simOptions){if(!(target=this.test.normalizeElement(target)))return!1;Siesta.Project.Browser.FeatureSupport().supports;if(options=options||{},/pointerdown$/i.test(type)&&(!("clientX"in options)||!("clientY"in options))){var center=this.test.findCenter(target);options=Joose.O.extend({clientX:center[0],clientY:center[1]},options)}var doc=this.global.document,event=new PointerEvent(type,{bubbles:!0,cancelable:!0,view:this.global,detail:options.detail,screenX:options.screenX,screenY:options.screenY,clientX:options.clientX,clientY:options.clientY,ctrlKey:options.ctrlKey||!1,altKey:options.altKey||!1,shiftKey:options.shiftKey||!1,metaKey:options.metaKey||!1,button:options.button,relatedTarget:options.relatedTarget||doc.documentElement,pointerId:simOptions.touchId||this.currentTouchId++,pointerType:4});return target.dispatchEvent(event),event},simulatePointerEvent:function(target,type,options,simOptions){var supports=Siesta.Project.Browser.FeatureSupport().supports;if(supports.PointerEvents&&this.bowser.chrome)return this.simulatePointerEventModern(target,type,options,simOptions);if(!(target=this.test.normalizeElement(target)))return!1;options=options||{};var doc=this.global.document,event=doc.createEvent(supports.PointerEvents?"PointerEvent":supports.MSPointerEvents?"MSPointerEvent":"MouseEvents");if(/pointerdown$/i.test(type)&&(!("clientX"in options)||!("clientY"in options))){var center=this.test.findCenter(target);options=Joose.O.extend({clientX:center[0],clientY:center[1]},options)}return event[supports.MSPointerEvents||supports.PointerEvents?"initPointerEvent":"initMouseEvent"](type,!0,!0,this.global,options.detail,options.screenX,options.screenY,options.clientX,options.clientY,options.ctrlKey||!1,options.altKey||!1,options.shiftKey||!1,options.metaKey||!1,options.button,options.relatedTarget||doc.documentElement,null,null,null,null,null,null,null,null,simOptions.touchId||this.currentTouchId++,4,null,null),supports.MSPointerEvents||supports.PointerEvents||(event.pointerId=simOptions.touchId||this.currentTouchId++),target.dispatchEvent(event),event},simulateTouchEvent:function(target,type,options,simOptions){options=options||{};var global=this.global,event=(global.document,new global.CustomEvent(type,{bubbles:!0,cancelable:!0}));target=this.test.normalizeElement(target);if("clientX"in options&&"clientY"in options)options.clientX,options.clientY;else{var center=this.test.findCenter(target);center[0],center[1]}var activeTouches=this.activeTouches,touch=simOptions.touch,touches=[],targetTouches=[];for(var id in activeTouches){var currentTouch=activeTouches[id];touches.push(currentTouch),currentTouch.target==target&&targetTouches.push(currentTouch)}return Joose.O.extend(event,{target:target,changedTouches:this.createTouchList([touch]),touches:this.createTouchList(touches),targetTouches:this.createTouchList(targetTouches),altKey:options.altKey,metaKey:options.metaKey,ctrlKey:options.ctrlKey,shiftKey:options.shiftKey}),target.dispatchEvent(event),event},createTouchList:function(touchList){var doc=this.global.document;if(doc.createTouch){for(var touches=[],i=0;i<touchList.length;i++){var touchCfg=touchList[i];touches.push(doc.createTouch(doc.defaultView||doc.parentWindow,touchCfg.target,touchCfg.identifier||this.currentTouchId++,touchCfg.pageX,touchCfg.pageY,touchCfg.screenX||touchCfg.pageX,touchCfg.screenY||touchCfg.pageY,touchCfg.clientX,touchCfg.clientY))}return doc.createTouchList.apply(doc,touches)}return touchList},createTouch:function(target,clientX,clientY){return{identifier:this.currentTouchId++,target:target,clientX:clientX,clientY:clientY,screenX:0,screenY:0,pageX:clientX,pageY:clientY}},buildTouchEventNamesMap:function(){var supports=Siesta.Project.Browser.FeatureSupport().supports;return supports.PointerEvents&&!this.forceTouchEvents?{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}:supports.MSPointerEvents?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp",cancel:"MSPointerCancel"}:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}},simulateTouchEventGeneric:function(target,type,options,simOptions){simOptions=simOptions||{};var clientX,clientY;target=this.test.normalizeElement(target);if("clientX"in options&&"clientY"in options)clientX=options.clientX,clientY=options.clientY;else{var center=this.test.findCenter(target);clientX=center[0],clientY=center[1]}var touch,activeTouches=this.activeTouches;if("end"===type||"cancel"===type?(target=(touch=activeTouches[simOptions.touchId]).currentEl||touch.target,delete activeTouches[simOptions.touchId]):"start"==type?activeTouches[(touch=this.createTouch(target,clientX,clientY)).identifier]=touch:"move"==type&&((touch=activeTouches[simOptions.touchId]).clientX=options.clientX,touch.clientY=options.clientY),!touch)throw"Can't find active touch"+(simOptions.touchId?": "+simOptions.touchId:"");simOptions.touchId||(simOptions.touchId=touch.identifier),simOptions.touch=touch;var eventType=this.getTouchEventNamesMap()[type],supports=Siesta.Project.Browser.FeatureSupport().supports;return!supports.PointerEvents&&!supports.MSPointerEvents||this.forceTouchEvents?this.simulateTouchEvent(target,eventType,options,simOptions):this.simulatePointerEvent(target,eventType,options,simOptions)}}}),Class("Siesta.Test.Simulator",{does:[Siesta.Util.Role.CanGetType,Siesta.Test.Browser.Role.CanRebindJQueryContext,Siesta.Test.Simulate.Event,Siesta.Test.Simulate.Mouse,Siesta.Test.Simulate.Keyboard,Siesta.Test.Simulate.Touch],has:{type:"synthetic",test:null,global:null},methods:{initialize:function(){this.SUPER(),this.onBlur=this.onBlur.bind(this)},onTestLaunch:function(test){var me=this;me.test=test,me.global=test.global,"synthetic"===me.type&&(Siesta.Project.Browser.FeatureSupport().supports.inputFiresChangeAfterLosingFocus||me.global.document.documentElement.addEventListener("blur",me.onBlur,!0))},onBlur:function(e){e.target&&this.test.isTextInput(e.target)&&this.maybeMimicChangeEvent(e.target)},cleanup:function(){this.global&&this.global.document.documentElement.removeEventListener("blur",this.onBlur,!0),this.test=null,this.global=null},setSpeed:function(name){Joose.O.extend(this,Siesta.Test.Simulator.speedPresets[name])}}}),Siesta.Test.Simulator.speedPresets={slow:{actionDelay:100,afterActionDelay:100,dragDelay:25,pathBatchSize:5,mouseMovePrecision:1,mouseDragPrecision:1},speedRun:{actionDelay:1,afterActionDelay:100,dragDelay:10,pathBatchSize:30,mouseMovePrecision:1,mouseDragPrecision:1},turboMode:{actionDelay:1,afterActionDelay:1,dragDelay:0,pathBatchSize:100,mouseMovePrecision:1/0,mouseDragPrecision:1/0}},Class("Siesta.Test.SimulatorExtJS",{isa:Siesta.Test.Simulator,has:{simulateEventsWith:{is:"rw",lazy:function(){var isIE9=navigator.userAgent.match(/MSIE 9.0;/),Ext=this.global.Ext;if(!Ext||!Ext.getVersion)return"dispatchEvent";var extVersion=Ext.getVersion("extjs"),isBelowExt421=Boolean(extVersion&&extVersion.isLessThan&&extVersion.isLessThan("4.2.1.883"));return document.createElement("div").attachEvent&&(isIE9||isBelowExt421)?"fireEvent":"dispatchEvent"}}},methods:{simulateMouseClick:function(clickInfo,options){var me=this,el=clickInfo.el,Ext=this.global.Ext,isExt5=Ext&&Ext.getVersion&&Ext.getVersion("extjs")&&5==Ext.getVersion("extjs").major;if("fireEvent"!==this.getSimulateEventsWith()&&!isExt5||"checkbox"!==el.type&&"radio"!==el.type||el.disabled||el.readOnly)return this.SUPERARG(arguments);var oldState=el.checked;return this.SUPER(clickInfo,options).then(function(){if(el.checked===oldState){el.checked=!oldState;var optionsWithBubble=Joose.O.copy(options);optionsWithBubble.bubbles=!0,me.simulateEvent(el,"change",optionsWithBubble)}})}}}),Role("Siesta.Test.UserAgent.Mouse",{requires:[],has:{currentPosition:null,moveCursorBetweenPoints:!0,enableUnreachableClickWarning:!0,autoScrollElementsIntoView:!0,delayAfterScrollIntoView:200},methods:{setCursorPosition:function(x,y,callback){this.doMouseMove(this.simulator.currentPosition,[x,y],callback,null,null,{moveKind:"instant"})},moveMouseAlongPath:function(){return this.moveCursorAlongPath.apply(this,arguments)},moveCursorAlongPath:function(pathArray,callback){var me=this,queue=new Siesta.Util.Queue({deferer:this.originalSetTimeout,deferClearer:this.originalClearTimeout,interval:0,processor:function(data){var target,offset,isDelta,pathPoint=data.pathPoint;"Array"==me.typeOf(pathPoint)?"Array"==me.typeOf(pathPoint[0])?target=pathPoint[0]:"String"==me.typeOf(pathPoint[0])?(target=pathPoint[0],offset=3==pathPoint.length?[pathPoint[1],pathPoint[2]]:null):(isDelta=!0,target=pathPoint):pathPoint.by?(isDelta=!0,target=pathPoint.by):(target=pathPoint.t||pathPoint.target,offset=pathPoint.o||pathPoint.offset),isDelta?me.moveMouseBy(target,data.next,me):me.moveMouseTo(target,data.next,me,offset)}});return Joose.A.each(pathArray,function(pathPoint){queue.addStep({isAsync:!0,pathPoint:pathPoint})}),new Promise(function(resolve,_reject){queue.run(function(){me.processCallbackFromTest(callback,null,me),resolve()})})},moveMouseTo:function(target,callback,scope,offset,waitForTarget,options){if(!target)throw new Error("Trying to call `moveMouseTo` without a target");if(!1!==waitForTarget)return this.waitForTargetAndSyncMousePosition(target,offset,function(){callback.call(scope||this)},[],!1,void 0,options);var me=this;return new Promise(function(resolve,_reject){var data=me.getNormalizedTopElementInfo(target,!0,"moveMouseTo",offset);data?me.syncCursor(data.globalXY,function(){callback&&callback.call(scope||me),resolve()},options):(callback&&callback.call(scope||me),resolve())})},moveCursorTo:function(target,callback,scope,offset){this.moveMouseTo.apply(this,arguments)},moveMouseBy:function(delta,callback,scope,options){this.moveCursorBy.apply(this,arguments)},moveCursorBy:function(delta,callback,scope,options){if(!delta)throw"Trying to call moveCursorBy without relative distances";var target=[this.simulator.currentPosition[0]+delta[0],this.simulator.currentPosition[1]+delta[1]];return this.doMouseMove(this.simulator.currentPosition,target,callback,scope,void 0,options)},doMouseMove:function(xy,xy2,callback,scope,params,options){var promise=this.simulator.simulateMouseMove(xy2[0],xy2[1],options,params);return this.runPromiseAsync(promise,"mousemove",callback,scope)},syncCursor:function(toXY,callback,options){var fromXY=this.simulator.currentPosition;toXY[0]!==fromXY[0]||toXY[1]!==fromXY[1]?this.doMouseMove(fromXY,toXY,callback,this,void 0,options):callback&&callback()},runPromiseAsync:function(promise,actionDesc,callback,callbackScope,errback){var me=this,async=this.beginAsync(null,function(){return me.fail(me.formatString("Action `{actionDesc}` failed to complete within {time}ms",{actionDesc:actionDesc,time:this.defaultTimeout})),!0});return promise.then(function(result){me.endAsync(async),me.processCallbackFromTest(callback,void 0!==result?[result]:[],callbackScope||me)},function(exception){me.endAsync(async),errback?errback(exception):me.isFinished()||(me.fail("Command failed: "+exception),me.processCallbackFromTest(callback,[],callbackScope||me))})},waitForTargetAndSyncMousePosition:function(target,offset,method,args,waitForTargetTop,syncMousePosition,options){var originalXY,targetIsNotAPoint="Array"!=this.typeOf(target),oldSuppressPassedWaitForAssertion=this.suppressPassedWaitForAssertion;this.suppressPassedWaitForAssertion=!0;var me=this;return new Promise(function(resolve,reject){me.chain({waitForAnimations:[]},targetIsNotAPoint&&{waitForElementVisible:target},me.autoScrollElementsIntoView?function(next){!0===me.scrollTargetIntoView(target,offset)?me.waitFor(me.delayAfterScrollIntoView,next):next()}:null,function(next){var data=me.getNormalizedTopElementInfo(target,!0,method.toString(),offset);data?(originalXY=data.globalXY,me.moveCursorBetweenPoints&&!1!==syncMousePosition?me.syncCursor(originalXY,next,options):next()):me.waitForTarget(target,function(){var data=me.getNormalizedTopElementInfo(target,!0,method.toString(),offset);originalXY=data.globalXY,me.moveCursorBetweenPoints&&!1!==syncMousePosition?me.syncCursor(originalXY,next,options):next()})},!1!==waitForTargetTop&&targetIsNotAPoint&&function(next){me.waitForTarget(target,next,me,null,offset)},function(_next){var data=me.getNormalizedTopElementInfo(target,!0,method.toString(),offset),newXY=data&&data.globalXY;!targetIsNotAPoint||data&&originalXY[0]===newXY[0]&&originalXY[1]===newXY[1]?(me.suppressPassedWaitForAssertion=oldSuppressPassedWaitForAssertion,method&&method.apply&&method.apply(me,args),resolve()):(me.diag(Siesta.Resource("Siesta.Test.Browser","targetMoved")),me.waitFor(100,function(){me.waitForTargetAndSyncMousePosition(target,offset,method,args,waitForTargetTop,syncMousePosition).then(resolve,reject)}))})})},getCursorPagePosition:function(){return[this.viewportXtoPageX(this.simulator.currentPosition[0]),this.viewportYtoPageY(this.simulator.currentPosition[1])]},genericMouseAction:function(el,callback,scope,options,actionName,offset,waitForTargetAndSyncMousePosition){var me=this;"Function"==this.typeOf(el)&&(scope=callback,callback=el,el=null),waitForTargetAndSyncMousePosition=waitForTargetAndSyncMousePosition&&Boolean(el),el=el||this.getCursorPagePosition();var targetCheckPromise=!1!==waitForTargetAndSyncMousePosition?this.waitForTargetAndSyncMousePosition(el,offset,actionName,void 0,void 0,void 0,options):Promise.resolve();return me.runPromiseAsync(targetCheckPromise.then(function(){options=options?Joose.O.copy(options):{};var data=me.getNormalizedTopElementInfo(el,!0,actionName,offset);if(data)return data.originalEl=el,data.method=actionName,data.offset=offset,options.clientX=null!=options.clientX?options.clientX:data.localXY[0],options.clientY=null!=options.clientY?options.clientY:data.localXY[1],options.testUniqueId=me.uniqueId,me.simulator[actionName](data,options)}),"generic click",callback,scope)},click:function(el,callback,scope,options,offset,waitForTarget){return this.genericMouseAction(el,callback,scope,options,"simulateMouseClick",offset,waitForTarget)},rightClick:function(el,callback,scope,options,offset,waitForTarget){return this.genericMouseAction(el,callback,scope,options,"simulateRightClick",offset,waitForTarget)},doubleClick:function(el,callback,scope,options,offset,waitForTarget){return this.genericMouseAction(el,callback,scope,options,"simulateDoubleClick",offset,waitForTarget)},mouseDown:function(el,options,offset,callback,scope,performTargetCheck){return this.genericMouseAction(el,callback,scope,options,"simulateMouseDown",offset,performTargetCheck)},mouseUp:function(el,options,offset,callback,scope){return this.genericMouseAction(el,callback,scope,options,"simulateMouseUp",offset,!0)},dragTo:function(source,target,callback,scope,options,dragOnly,sourceOffset,targetOffset){var me=this;if(!target)throw new Error("No drag target defined");return source=source||me.getCursorPagePosition(),new Promise(function(resolve,reject){me.chain({mouseDown:source,offset:sourceOffset,options:options},function(next){var data=me.getNormalizedTopElementInfo(target,!0,"dragTo",targetOffset);target=data.globalXY,next()},{moveCursorTo:function(){return target},options:options},dragOnly?null:{mouseUp:null,options:options},function(){me.processCallbackFromTest(callback,null,scope||me),resolve()})})},dragBy:function(source,delta,callback,scope,options,dragOnly,offset){var me=this;if(!delta)throw new Error("No drag delta defined");return source=source||this.getCursorPagePosition(),new Promise(function(resolve,reject){me.chain({mouseDown:source,offset:offset,options:options},{moveCursorBy:delta,options:options},dragOnly?null:{mouseUp:null,options:options},function(){me.processCallbackFromTest(callback,null,scope||me),resolve()})})},wheel:function(el,callback,scope,options,offset,waitForTarget){return this.genericMouseAction(el,callback,scope,options,"simulateMouseWheel",offset,waitForTarget)}}}),Role("Siesta.Test.UserAgent.Keyboard",{requires:["normalizeElement","runPromiseAsync","activeElement"],does:[Siesta.Util.Role.CanFormatStrings,Siesta.Test.Browser.Role.CanWorkWithKeyboard],has:{},methods:{type:function(el,text,callback,scope,options,clearExisting,performTargetCheck){if(null==text)throw"Must supply a string to type";el||(performTargetCheck=!1),el=el||this.activeElement();var targetCheckPromise=!1!==performTargetCheck?this.waitForTargetAndSyncMousePosition(el,null,"Type: "+text,[],!1,!1):Promise.resolve(),me=this;return me.runPromiseAsync(targetCheckPromise.then(function(){if((el=me.normalizeElement(el))&&!el.disabled){clearExisting&&(el.value="");var queue=new Siesta.Util.Queue({deferer:me.originalSetTimeout,deferClearer:me.originalClearTimeout,interval:me.simulator.actionDelay,callbackDelay:me.simulator.afterActionDelay,observeTest:me});return queue.addStep({processor:function(){me.focus(el)}}),bowser.msie&&queue.addStep({processor:function(){me.focus(el)}}),queue.addStep({isAsync:!0,processor:function(stepData){var promise=me.simulator.simulateType(text,options,{el:el});me.runPromiseAsync(promise,"",stepData.next)}}),new Promise(function(resolve,reject){queue.run(function(){resolve()})})}}),"type : `"+text+"`",callback,scope)},keyPress:function(el,key,options,callback,scope){return"function"==typeof options&&(callback=options,options=void 0),this.type(el,key,callback,scope,options)}}}),Role("Siesta.Test.UserAgent.Touch",{requires:["normalizeElement"],has:{notSupportedWarned:!1},methods:{checkTouchEventsSupport:function(){var supports=Siesta.Project.Browser.FeatureSupport().supports,root=this.getRootTest();supports.TouchEvents||supports.PointerEvents||supports.MSPointerEvents||root.notSupportedWarned||(root.notSupportedWarned=!0,this.warn("Touch events are not supported by browser. For Chrome, you can enable them, by launching it with: --args --touch-events"))},tap:function(target,callback,scope,options,offset,performTargetCheck){if(this.checkTouchEventsSupport(),target=target||this.getCursorPagePosition(),!1!==performTargetCheck&&callback)this.waitForTargetAndSyncMousePosition(target,offset,this.tap,[target,callback,scope,options,offset,!1]);else{var context=this.getNormalizedTopElementInfo(target,!0,"tap",offset);context?this.runPromiseAsync(this.simulator.simulateTap(context,options),"tap",callback,scope):callback&&callback.call(scope||this)}},doubleTap:function(target,callback,scope,options,offset,performTargetCheck){if(this.checkTouchEventsSupport(),target=target||this.getCursorPagePosition(),!1!==performTargetCheck&&callback)this.waitForTargetAndSyncMousePosition(target,offset,this.doubleTap,[target,callback,scope,options,offset,!1]);else{var context=this.getNormalizedTopElementInfo(target,!0,"doubleTap",offset);context?this.runPromiseAsync(this.simulator.simulateDoubleTap(context,options),"doubleTap",callback,scope):callback&&callback.call(scope||this)}},longpress:function(){return this.longPress.apply(this,arguments)},longPress:function(target,callback,scope,options,offset,performTargetCheck){if(this.checkTouchEventsSupport(),target=target||this.getCursorPagePosition(),!1!==performTargetCheck&&callback)this.waitForTargetAndSyncMousePosition(target,offset,this.longPress,[target,callback,scope,options,offset,!1]);else{var context=this.getNormalizedTopElementInfo(target,!0,"longPress",offset);context?this.runPromiseAsync(this.simulator.simulateLongPress(context,options),"longPress",callback,scope):callback&&callback.call(scope||this)}},pinch:function(target1,target2,scale,callback,scope,options,offset1,offset2){this.checkTouchEventsSupport();var me=this;"Number"==this.typeOf(target2)&&(offset2=offset1,offset1=options,options=scope,scope=callback,callback=scale,scale=target2,target2=target1),null==target2&&(target2=target1),target1!=target2||offset1||offset2||(offset1=["25%","50%"],offset2=["75%","50%"]);var context1=this.getNormalizedTopElementInfo(target1,!0,"pinch: target1",offset1),context2=this.getNormalizedTopElementInfo(target2,!0,"pinch: target2",offset2);if(context1&&context2)this.runPromiseAsync(this.simulator.simulatePinch(context1,context2,options),"pinch",callback,scope);else{var R=Siesta.Resource("Siesta.Test.Browser");this.waitFor({method:function(){var el1=me.normalizeElement(target1,!0),el2=me.normalizeElement(target2,!0);return el1&&me.elementIsTop(el1,!0,offset)&&el2&&me.elementIsTop(el2,!0,offset)},callback:function(){me.pinch(target1,target2,scope,callback,scope,options,offset1,offset2)},assertionName:"waitForTarget",description:" "+R.get("target")+' "'+target1+'" and "'+target2+'" '+R.get("toAppear")})}},touchDragTo:function(source,target,callback,scope,options,dragOnly,sourceOffset,targetOffset){var me=this,context1=this.getNormalizedTopElementInfo(source,!0,"touchDragTo: source",sourceOffset),context2=this.getNormalizedTopElementInfo(target,!0,"touchDragTo: target",targetOffset);if(context1&&context2)this.runPromiseAsync(this.simulator.simulateTouchDrag(context1.localXY,context2.localXY,options,dragOnly),"touchDragTo",callback,scope);else{var R=Siesta.Resource("Siesta.Test.Browser");this.waitFor({method:function(){var el1=me.normalizeElement(source,!0),el2=me.normalizeElement(target,!0);return el1&&me.elementIsTop(el1,!0,sourceOffset)&&el2&&me.elementIsTop(el2,!0,targetOffset)},callback:function(){me.touchDragTo(source,target,callback,scope,options,dragOnly,sourceOffset,targetOffset)},assertionName:"waitForTarget",description:" "+R.get("target")+' "'+source+'" and "'+target+'" '+R.get("toAppear")})}},touchDragBy:function(source,delta,callback,scope,options,dragOnly,offset){var context=this.getNormalizedTopElementInfo(source,!0,"touchDragBy",offset);if(context){var sourceXY=context.globalXY,targetXY=[sourceXY[0]+delta[0],sourceXY[1]+delta[1]];this.runPromiseAsync(this.simulator.simulateTouchDrag(sourceXY,targetXY,options,dragOnly),"touchDragBy",callback,scope)}else this.waitForTarget(source,function(){this.touchDragBy(source,delta,callback,scope,options,dragOnly,offset)},this,null,offset)},swipe:function(target,direction,callback,scope,options,performTargetCheck){if(this.checkTouchEventsSupport(),target=target||this.getCursorPagePosition(),!1!==performTargetCheck&&callback)this.waitForTargetAndSyncMousePosition(target,null,this.swipe,[target,direction,callback,scope,options,!1]);else{var context=this.getNormalizedTopElementInfo(target,!0,"swipe");if(context){var start,end,Ext=this.Ext(),R=Siesta.Resource("Siesta.Test.SenchaTouch"),box=Ext.fly(context.el).getBox(),x=box.x,y=box.y,width=box.width,height=box.height,centerX=x+width/2,centerY=y+height/2;switch(direction){case"u":case"up":start=[centerX,y+.9*height],(end=[centerX,y+.1*height])[1]=Math.min(start[1]-100,end[1]);break;case"d":case"down":start=[centerX,y+.1*height],(end=[centerX,y+.9*height])[1]=Math.max(start[1]+100,end[1]);break;case"r":case"right":start=[x+.1*width,centerY],(end=[x+.9*width,centerY])[0]=Math.max(start[0]+100,end[0]);break;case"l":case"left":start=[x+.9*width,centerY],(end=[x+.1*width,centerY])[0]=Math.min(start[0]-100,end[0]);break;default:throw R.get("invalidSwipeDir")+": "+direction}this.touchDragTo(start,end,callback,scope,options)}else callback&&callback.call(scope||this)}}}}),Role("Siesta.Test.TextSelection",{methods:{getSelectedText:function(el){if("selectionStart"in(el=this.normalizeElement(el)))try{return el.value.substring(el.selectionStart,el.selectionEnd)}catch(e){}var win=this.global,doc=win.document;return win.getSelection?win.getSelection().toString():doc.getSelection?doc.getSelection():doc.selection?doc.selection.createRange().text:void 0},selectText:function(el,start,end,callback){if((el=this.normalizeElement(el,!0))&&this.elementSupportsSelection(el)){var v=el.value||el.innerHTML,doFocus=!0;if(0<v.length){if(start=void 0===start?0:start,end=void 0===end?v.length:end,el.setSelectionRange)try{el.setSelectionRange(start,end)}catch(e){}else if(el.createTextRange){var R=el.createTextRange();R.moveStart("character",start),R.moveEnd("character",end-v.length),R.select()}doFocus=bowser.gecko||bowser.opera}doFocus&&this.focus(el)}callback&&callback.call(this)},getCaretPosition:function(el){var pos,win=this.global,document=win.document;if("selectionStart"in el)try{pos=el.selectionStart}catch(e){pos=null}else if(win.getSelection&&this.isEditableNode(el)){var sel=win.getSelection();if(sel.rangeCount){var range=sel.getRangeAt(0);range.commonAncestorContainer.parentNode==el&&(pos=range.endOffset)}}else if(document.selection){this.focus(el);var oSel=document.selection.createRange();oSel.moveStart("character",-el.value.length),pos=oSel.text.length}return pos},setCaretPosition:function(el,caretPos){if(el.createTextRange)try{var range=el.createTextRange();range.move("character",caretPos),range.select()}catch(e){}else if(el.setSelectionRange){this.focus(el);try{el.setSelectionRange(caretPos,caretPos)}catch(e){}}else this.focus(el)},moveCaretPosition:function(el,distance){var pos=Math.min(Math.max(0,this.getCaretPosition(el)+distance),el.value.length);this.setCaretPosition(el,pos)},elementSupportsSelection:function(el){var tagName=el.tagName.toLowerCase();return"textarea"===tagName||"input"===tagName&&/^text|password|tel|url|search$/i.test(el.getAttribute("type"))}}}),Role("Siesta.Test.Element",{does:[Siesta.Util.Role.CanCalculatePageScroll,Siesta.Util.Role.Dom],requires:["typeOf","chain","normalizeElement"],has:{allowMonkeyToClickOnAnchors:!1,allowedCharacters:function(){return{special:"ENTER/ESCAPE/PAGE-UP/PAGE-DOWN/END/HOME/UP/RIGHT/DOWN/LEFT/INSERT/DELETE",punctuation:".,/()[]{}\\\"'`~!?@#$%^&_=+-",normal:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"}}},methods:{findCenter:function(target,local){return this.getTargetCoordinate(target,local)},isInDom:function(el){var doc=el.ownerDocument;if(!doc)return!1;for(;el&&el!=doc.body;)el=el.parentNode;return Boolean(el)},normalizeOffset:function(offset,$el){var parts;"Function"==this.typeOf(offset)&&(offset=offset.call(this)),offset=offset&&offset.slice()||["50%","50%"];var rect=this.getBoundingClientRect($el[0]),width=Math.floor(rect.width);width--;var height=Math.floor(rect.height);return height--,"string"==typeof offset[0]&&(parts=offset[0].split("%"),offset[0]=parseInt(offset[0].match(/\d+/)[0],10)*width/100,parts[1]&&(offset[0]+=parseInt(parts[1]))),offset[0]=Math.round(offset[0]),"string"==typeof offset[1]&&(parts=offset[1].split("%"),offset[1]=parseInt(offset[1].match(/\d+/)[0],10)*height/100,parts[1]&&(offset[1]+=parseInt(parts[1]))),offset[1]=Math.round(offset[1]),offset},getTargetCoordinate:function(target,local,offset){var el=this.normalizeElement(target),$el=this.$(el),elOffset=$el.offset(),elDoc=el.ownerDocument,elWin=elDoc.defaultView||elDoc.parentWindow,xy=[this.pageXtoViewportX(elOffset.left,elWin),this.pageYtoViewportY(elOffset.top,elWin)];if(offset=this.normalizeOffset(offset,$el),xy[0]+=offset[0],xy[1]+=offset[1],!1===local&&elWin!==this.global){var offsetsToTop=this.$(elWin.frameElement).offset();xy[0]+=this.pageXtoViewportX(offsetsToTop.left),xy[1]+=this.pageYtoViewportY(offsetsToTop.top)}return xy},isElementVisible:function(el){if((el=this.normalizeElement(el))&&"option"===el.nodeName.toLowerCase()&&(el=this.$(el).closest("select")[0]),el){try{if(window.SVGElement&&el instanceof this.global.SVGElement)return"none"!==el.style.display&&"hidden"!==el.style.visibility}catch(e){}return this.$(el).is(":visible")&&"hidden"!==this.$(el).css("visibility")}return!1},assertTextPresent:function(text,description){this.like(this.global.document.body.innerText,text,description)},contentLike:function(el,text,description){el=this.normalizeElement(el),this.like(el.innerHTML,text,description)},contentNotLike:function(el,text,description){el=this.normalizeElement(el),this.unlike(el.innerHTML,text,description)},waitForContentLike:function(el,text,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.Element");return el=this.normalizeElement(el),this.waitFor({method:function(){return el.innerHTML.match(text)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForContentLike",description:" "+R.get("elementContent")+' "'+text+'" '+R.get("toAppear")})},waitForContentNotLike:function(el,text,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.Element");return el=this.normalizeElement(el),this.waitFor({method:function(){return!el.innerHTML.match(text)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForContentNotLike",description:" "+R.get("elementContent")+' "'+text+'" '+R.get("toDisappear")})},getRandomTypeString:function(length){for(var allowedCharacters=this.allowedCharacters,special=allowedCharacters.special.split("/"),punctuation=allowedCharacters.punctuation,normal=allowedCharacters.normal,total=special.length+punctuation.length+normal.length,str="",i=0;i<length;i++){var index=this.randomBetween(0,total-1);index<normal.length?str+=normal.substr(index,1):(index-=normal.length)<punctuation.length?str+=punctuation.substr(index,1):str+="["+special[index-=punctuation.length]+"]"}return str},monkeyTest:function(el,nbrInteractions,description,callback,scope,stepCallback){var skipTargets;1===arguments.length?(nbrInteractions=el.nbrInteractions,description=el.description,callback=el.callback,scope=el.scope,stepCallback=el.stepCallback,skipTargets=el.skipTargets,el=el.target):"function"==typeof nbrInteractions?(callback=nbrInteractions,scope=description,description=""):"function"==typeof description&&(callback=description,description=""),(skipTargets=skipTargets||[]).push("a"),nbrInteractions="number"==typeof nbrInteractions?nbrInteractions:30,el=this.normalizeElement(el,!1,!0),this.suppressPassedWaitForAssertion=!0;var global=this.global,isBody=el==global.document.body,me=this,offset=me.$(el).offset(),right=offset.left+me.$(isBody?global:el).width(),bottom=offset.top+me.$(isBody?global:el).height(),actionLog=[],R=Siesta.Resource("Siesta.Test.Element"),queue=new Siesta.Util.Queue({deferer:me.originalSetTimeout,deferClearer:me.originalClearTimeout,interval:me.actionDelay,observeTest:this,processor:function(data){if(me.nbrExceptions||me.failed)assertionChecker(),queue.abort();else{var async=me.beginAsync(null,function(test){return test.fail(description||R.get("monkeyNoExceptions"),R.get("monkeyActionLog")+":"+JSON.stringify(actionLog)),!0}),next=data.next;data.next=function(){stepCallback&&stepCallback(data),me.endAsync(async),next()},data.action(data)}}}),dummy=[];dummy.length=nbrInteractions;function ignoreAction(data,i){var target=me.normalizeElement(data.dragFrom||data.xy),dragToTarget=data.dragTo&&me.normalizeElement(data.dragTo);for(i=0;i<skipTargets.length;i++)for(var toSkip=me.$(skipTargets[i],el),j=0;j<toSkip.length;j++){var skip=toSkip[j];if(target&&(target==skip||me.contains(skip,target))||dragToTarget&&(dragToTarget==skip||me.contains(skip,dragToTarget)))return data.next(),1}}Joose.A.each(dummy,function(value,i){queue.addAsyncStep({action:function(data){me.waitForSelector("body",data.next)}});var xy=[me.randomBetween(offset.left,right),me.randomBetween(offset.top,bottom)];switch(me.randomBetween(0,4)){case 0:queue.addAsyncStep({action:function(data){ignoreAction(data)||(actionLog.push({click:xy}),me.click(data.xy,data.next))},xy:xy});break;case 1:queue.addAsyncStep({action:function(data){ignoreAction(data)||(actionLog.push({doubleclick:xy}),me.doubleClick(data.xy,data.next))},xy:xy});break;case 2:queue.addAsyncStep({action:function(data){ignoreAction(data)||("native"!=me.simulator.type&&"oncontextmenu"in window?(actionLog.push({rightclick:xy}),me.rightClick(data.xy,data.next)):(actionLog.push({click:xy}),me.click(data.xy,data.next)))},xy:xy});break;case 3:var dragTo=[me.randomBetween(offset.left,right),me.randomBetween(offset.top,bottom)];queue.addAsyncStep({action:function(data){ignoreAction(data)||(actionLog.push({action:"drag",target:xy,to:dragTo}),me.dragTo(data.dragFrom,data.dragTo,data.next))},dragFrom:xy,dragTo:dragTo});break;case 4:var text=me.getRandomTypeString(15);queue.addAsyncStep({action:function(data){ignoreAction(data)||(actionLog.push({click:xy}),me.click(data.xy,function(){me.waitForSelector("body",function(){actionLog.push({type:text.replace("'","\\'")}),me.type(null,text,data.next)})}))},xy:xy})}});var checkerActivated=!1,assertionChecker=function(){checkerActivated=!0,me.nbrExceptions||me.failed?me.fail(description||R.get("monkeyNoExceptions"),R.get("monkeyActionLog")+":"+JSON.stringify(actionLog)):me.pass(description||R.get("monkeyNoExceptions"))};this.on("beforetestfinalizeearly",assertionChecker),queue.run(function(){checkerActivated||(me.un("beforetestfinalizeearly",assertionChecker),assertionChecker()),me.suppressPassedWaitForAssertion=!1,me.processCallbackFromTest(callback,[actionLog],scope||me)})},hasCls:function(el,cls,description){var R=Siesta.Resource("Siesta.Test.Element");el=this.normalizeElement(el),this.$(el).hasClass(cls)?this.pass(description,{descTpl:R.get("elementHasClass")+" {cls}",cls:cls}):this.fail(description,{assertionName:"hasCls",got:el.className,gotDesc:R.get("elementClasses"),need:cls,needDesc:R.get("needClass")})},hasNotCls:function(el,cls,description){var R=Siesta.Resource("Siesta.Test.Element");el=this.normalizeElement(el),this.$(el).hasClass(cls)?this.fail(description,{assertionName:"hasNotCls",got:el.className,gotDesc:R.get("elementClasses"),annotation:R.get("elementHasClass")+" ["+cls+"]"}):this.pass(description,{descTpl:R.get("elementHasNoClass")+" {cls}",cls:cls})},hasStyle:function(el,property,value,description){var R=Siesta.Resource("Siesta.Test.Element");el=this.normalizeElement(el),this.$(el).css(property)===value?this.pass(description,{descTpl:R.get("hasStyleDescTpl"),value:value,property:property}):this.fail(description,{assertionName:"hasStyle",got:this.$(el).css(property),gotDesc:R.get("elementStyles"),need:value,needDesc:R.get("needStyle")})},hasNotStyle:function(el,property,value,description){var R=Siesta.Resource("Siesta.Test.Element");el=this.normalizeElement(el),this.$(el).css(property)!==value?this.pass(description,{descTpl:R.get("hasNotStyleDescTpl"),value:value,property:property}):this.fail(description,{assertionName:"hasNotStyle",got:el.style.toString(),gotDesc:R.get("elementStyles"),annotation:R.get("hasTheStyle")+" ["+property+"]"})},waitForSelectorAt:function(xy,selector,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.Element");if(!selector)throw R.get("noCssSelector");var me=this;return this.waitFor({method:function(){var el=me.elementFromPoint(xy[0],xy[1],!0);if(el&&me.$(el).is(selector))return el},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForSelectorAt",description:" "+R.get("selector")+' "'+selector+'" '+R.get("toAppearAt")+": ["+xy.toString()+"]"})},waitForSelectorAtCursor:function(selector,callback,scope,timeout){return this.waitForSelectorAt(this.simulator.currentPosition,selector,callback,scope,timeout)},waitForSelector:function(selector,root,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.Element"),me=this;if(!selector)throw R.get("noCssSelector");return"Function"==this.typeOf(root)&&(timeout=scope,scope=callback,callback=root,root=null),root=root&&this.normalizeElement(root),this.waitFor({method:function(){var result=me.$(selector,root);if(0<result.length)return result},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForSelector",description:" "+R.get("selector")+' "'+selector+'" '+R.get("toAppear")})},waitForSelectors:function(selectors,root,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.Element");if(selectors.length<1)throw R.get("waitForSelectorsBadInput");"Function"==this.typeOf(root)&&(timeout=scope,scope=callback,callback=root,root=null),root=root&&this.normalizeElement(root);var me=this;return this.waitFor({method:function(){var allPresent=!0;return Joose.A.each(selectors,function(selector){if(0===me.$(selector,root).length)return allPresent=!1}),allPresent},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForSelectors",description:" "+R.get("selectors")+' "'+selectors+'" '+R.get("toAppear")})},waitForSelectorNotFound:function(selector,root,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.Element"),me=this;if(!selector)throw"A CSS selector must be supplied";return"Function"==this.typeOf(root)&&(timeout=scope,scope=callback,callback=root,root=null),root=root&&this.normalizeElement(root),this.waitFor({method:function(){return 0===me.$(selector,root).length},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForSelectorNotFound",description:" "+R.get("selector")+' "'+selector+'" '+R.get("toDisappear")})},waitForElementVisible:function(el,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.Element");return this.waitFor({method:function(){var normalized=this.normalizeElement(el,!0);if(normalized&&this.isElementVisible(normalized))return normalized},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForElementVisible",description:" "+R.get("element")+' "'+el.toString()+'" '+R.get("toAppear")})},waitForElementNotVisible:function(el,callback,scope,timeout){el=this.normalizeElement(el);var R=Siesta.Resource("Siesta.Test.Element"),me=this;return this.waitFor({method:function(){return!me.isElementVisible(el)&&el},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForElementNotVisible",description:" "+R.get("element")+' "'+el.toString()+'" '+R.get("toDisappear")})},waitForElementTop:function(el,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.Element");return this.waitFor({method:function(){var normalized=this.normalizeElement(el,!0);if(normalized&&this.elementIsTop(normalized,!0))return normalized},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForElementTop",description:" "+R.get("element")+' "'+el.toString()+'" '+R.get("toBeTopEl")})},waitForElementNotTop:function(el,callback,scope,timeout){el=this.normalizeElement(el);var R=Siesta.Resource("Siesta.Test.Element"),me=this;return this.waitFor({method:function(){if(!me.elementIsTop(el,!0)){var center=me.findCenter(el);return me.elementFromPoint(center[0],center[1],!0)}},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForElementNotTop",description:" "+R.get("element")+' "'+el.toString()+'" '+R.get("toNotBeTopEl")})},elementIsVisible:function(el,description){el=this.normalizeElement(el,!0,!1,!1,{ignoreNonVisible:!1}),this.ok(el&&this.isElementVisible(el),description)},elementIsNotVisible:function(el,description){el=this.normalizeElement(el,!1,!1,!1,{ignoreNonVisible:!1}),this.notOk(this.isElementVisible(el),description)},elementIsTop:function(el,allowChildren,offset){(el=this.normalizeElement(el))&&"option"===el.nodeName.toLowerCase()&&(el=this.$(el).closest("select")[0]);var elDoc=el.ownerDocument,localPoint=this.getTargetCoordinate(el,!0,offset),foundEl=elDoc.elementFromPoint(localPoint[0],localPoint[1]);return foundEl&&(foundEl===el||allowChildren&&0<this.$(foundEl).closest(el).length)},isOffsetInsideElementBox:function(el,offset){if(!offset)return!0;var $el=this.$(this.normalizeElement(el)),w=$el.outerWidth(),h=$el.outerHeight();return 0<=(offset=this.normalizeOffset(offset,$el))[0]&&offset[0]<w&&0<=offset[1]&&offset[1]<h},elementIsAt:function(el,xy,allowChildren,description){el=this.normalizeElement(el);var foundEl=this.elementFromPoint(xy[0],xy[1],!0),R=Siesta.Resource("Siesta.Test.Element");foundEl?allowChildren?foundEl===el||0<this.$(foundEl).closest(el).length?this.pass(description,{descTpl:R.get("elementIsAtDescTpl"),x:xy[0],y:xy[1]}):this.fail(description,{assertionName:"elementIsAt",got:foundEl,gotDesc:R.get("topElement"),need:el,needDesc:R.get("allowChildrenDesc"),annotation:R.get("allowChildrenAnnotation")}):foundEl===el?this.pass(description,{descTpl:R.get("elementIsAtPassTpl"),x:xy[0],y:xy[1]}):this.fail(description,{assertionName:"elementIsAt",got:foundEl,gotDesc:R.get("topElement"),need:el,needDesc:"Should be",annotation:R.get("noChildrenFailAnnotation")}):this.fail(description,{assertionName:"elementIsAt",got:{x:xy[0],y:xy[1]},gotDesc:R.get("Position"),annotation:R.get("noElementAtPosition")})},elementIsTopElement:function(el,allowChildren,description,strict){if(el=this.normalizeElement(el),strict){var o=this.$(el).offset(),R=Siesta.Resource("Siesta.Test.Element"),region_top=o.top,region_right=o.left+this.$(el).outerWidth(),region_bottom=o.top+this.$(el).outerHeight(),region_left=o.left;this.elementIsAt(el,[region_left+1,region_top+1],allowChildren,description+" "+R.get("topLeft")),this.elementIsAt(el,[region_left+1,region_bottom-1],allowChildren,description+" "+R.get("bottomLeft")),this.elementIsAt(el,[region_right-1,region_top+1],allowChildren,description+" "+R.get("topRight")),this.elementIsAt(el,[region_right-1,region_bottom-1],allowChildren,description+" "+R.get("bottomRight"))}else this.elementIsAt(el,this.findCenter(el),allowChildren,description)},elementIsNotTopElement:function(el,allowChildren,description){el=this.normalizeElement(el);var center=this.findCenter(el),foundEl=this.elementFromPoint(center[0],center[1],!0);if(foundEl)allowChildren?this.ok(foundEl!==el&&0===this.$(foundEl).closest(el).length,description):this.isnt(foundEl,el,description);else{var R=Siesta.Resource("Siesta.Test.Element");this.pass(description,{descTpl:R.get("elementIsNotTopElementPassTpl")})}},selectorIsAt:function(selector,xy,description){var R=Siesta.Resource("Siesta.Test.Element");if(!selector)throw R.get("noCssSelector");var foundEl=this.$(this.elementFromPoint(xy[0],xy[1],!0));0<foundEl.has(selector).length||0<foundEl.closest(selector).length?this.pass(description,{descTpl:R.get("selectorIsAtPassTpl"),selector:selector,xy:xy}):this.fail(description,{got:foundEl[0].outerHTML?foundEl[0].outerHTML:foundEl[0].innerHTML,need:R.get("elementMatching")+" "+selector,assertionName:"selectorIsAt",annotation:R.get("selectorIsAtFailAnnotation")+" ["+xy+"]"})},selectorExists:function(selector,description){var R=Siesta.Resource("Siesta.Test.Element");if(!selector)throw R.get("noCssSelector");this.$(selector).length<=0?this.fail(description,R.get("selectorExistsFailTpl")+" : "+selector):this.pass(description,{descTpl:R.get("selectorExistsPassTpl"),selector:selector})},selectorNotExists:function(selector,description){var R=Siesta.Resource("Siesta.Test.Element"),els=this.$(selector);0<els.length?this.fail(description,{descTpl:R.get("selectorNotExistsFailTpl")+": "+selector,annotation:$.map(els,function(el,i){return i+1+". "+el.cloneNode().outerHTML}).join("\r\n")}):this.pass(description,{descTpl:R.get("selectorNotExistsPassTpl"),selector:selector})},waitForScrollChange:function(el,side,callback,scope,timeout){el=this.normalizeElement(el);var scrollProp="scroll"+Joose.S.uppercaseFirst(side),original=el[scrollProp],R=Siesta.Resource("Siesta.Test.Element");return this.waitFor({method:function(){if(el[scrollProp]!==original)return el[scrollProp]},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForScrollChange",description:" "+scrollProp+" "+R.get("toChangeForElement")+" "+el.toString()})},waitForScrollLeftChange:function(el,callback,scope,timeout){return this.waitForScrollChange(this.normalizeElement(el),"left",callback,scope,timeout)},waitForScrollTopChange:function(el,callback,scope,timeout){return this.waitForScrollChange(this.normalizeElement(el),"top",callback,scope,timeout)},scrollTo:function(el,scrollLeft,scrollTop,callback,delay,allowEmpty){if(el=this.normalizeElement(el,allowEmpty)){var me=this,originalSetTimeout=this.originalSetTimeout,doc=el.ownerDocument,waiter=this.waitForEvent(el==this.getElForPageScroll()?doc:el,"scroll",function(){if(0<delay){var async=me.beginAsync(delay+100);originalSetTimeout(function(){me.endAsync(async),me.processCallbackFromTest(callback)},delay)}else me.processCallbackFromTest(callback)}),prevScrollTop=el.scrollTop,prevScrollLeft=el.scrollLeft;return el.scrollLeft=scrollLeft,el.scrollTop=scrollTop,el.scrollTop==prevScrollTop&&el.scrollLeft==prevScrollLeft&&waiter.force(),{scrollLeft:el.scrollLeft,scrollTop:el.scrollTop}}this.processCallbackFromTest(callback)},scrollVerticallyTo:function(el,newTop,delay,callback){el=this.normalizeElement(el),"Number"!=this.typeOf(delay)&&(callback=delay,delay=null);var me=this,originalSetTimeout=this.originalSetTimeout,doc=el.ownerDocument,waiter=this.waitForEvent(el==this.getElForPageScroll()?doc:el,"scroll",function(){if(0<delay){var async=me.beginAsync(delay+100);originalSetTimeout(function(){me.endAsync(async),me.processCallbackFromTest(callback)},delay)}else me.processCallbackFromTest(callback)}),prevScrollTop=el.scrollTop;return el.scrollTop=newTop,el.scrollTop==prevScrollTop&&waiter.force(),el.scrollTop},scrollHorizontallyTo:function(el,newLeft,delay,callback){el=this.normalizeElement(el),"Number"!=this.typeOf(delay)&&(callback=delay,delay=null);var me=this,originalSetTimeout=this.originalSetTimeout,doc=el.ownerDocument,waiter=this.waitForEvent(el==this.getElForPageScroll()?doc:el,"scroll",function(){if(0<delay){var async=me.beginAsync(delay+100);originalSetTimeout(function(){me.endAsync(async),me.processCallbackFromTest(callback)},delay)}else me.processCallbackFromTest(callback)}),prevScrollLeft=el.scrollLeft;return el.scrollLeft=newLeft,el.scrollLeft==prevScrollLeft&&waiter.force(),el.scrollLeft},clickAll:function(){var callback,args=Array.prototype.concat.apply([],arguments);"Function"==this.typeOf(args[args.length-1])&&(callback=args.pop()),args=Array.prototype.concat.apply([],args);var steps=[];Joose.A.each(args,function(arg){steps.push({action:"click",target:arg})});var me=this;callback&&steps.push(function(){me.processCallbackFromTest(callback)}),this.chain.apply(this,steps)},chainClick:function(){return this.clickAll.apply(this,arguments)},clickSelector:function(selector,root,callback,scope){1<arguments.length&&"Function"==this.typeOf(root)&&(scope=callback,callback=root,root=null),root=root&&this.normalizeElement(root);var result=Joose.A.map(this.sizzle(selector,root),function(el){return el});this.clickAll(result,function(){callback&&callback.call(scope||this,result)})},selectorCountIs:function(selector,root,count,description){var R=Siesta.Resource("Siesta.Test.Element");if(!selector)throw R.get("noCssSelector");root="Number"==this.typeOf(root)?(description=count,count=root,null):this.normalizeElement(root);var inDOMCount=this.$(selector,root).length;inDOMCount!=count?this.fail(description,{assertionName:"selectorCountIs",descTpl:R.get("selectorCountIsFailTpl"),selector:selector,got:inDOMCount,need:count}):this.pass(description,{descTpl:R.get("selectorCountIsPassTpl"),count:count,selector:selector})},isInView:function(el,description){if(this.elementIsInView(el)){var R=Siesta.Resource("Siesta.Test.Element");this.pass(description,{descTpl:R.get("isInViewPassTpl")})}else this.fail(description,{assertionName:"isInView"})},elementIsInView:function(el){el=this.normalizeElement(el);var inView=!1,offset=this.$(el).offset();if(offset){var docViewTop=$(this.global).scrollTop(),docViewBottom=docViewTop+$(this.global).height(),elemTop=offset.top;inView=docViewTop<=elemTop+$(el).height()&&elemTop<=docViewBottom}return inView},waitUntilInView:function(el,callback,scope,timeout){var me=this,R=Siesta.Resource("Siesta.Test.Element");this.waitFor({method:function(){var normalized=this.normalizeElement(el,!0);if(normalized&&me.elementIsInView(normalized))return normalized},callback:callback,scope:scope,timeout:timeout,assertionName:"waitUntilInView",description:el.toString+" "+R.get("toAppearInTheViewport")})},findScrolledParent:function(el){for(var body=el.ownerDocument.body,parent=this.$(el);(parent=parent.parent()).length&&parent[0]!=body;)if(0<parent[0].scrollTop||0<parent[0].scrollLeft)return parent[0]},focus:function(el,tryPreventScrollChange){var scrolledParent,prevIndex=el.getAttribute("tabIndex");if(this.activeElement()!==el)try{var oldScrollLeft,oldScrollTop,pageScrollX,pageScrollY;if(null==prevIndex&&el.setAttribute("tabIndex",-1),tryPreventScrollChange)(scrolledParent=this.findScrolledParent(el))&&(oldScrollLeft=scrolledParent.scrollLeft,oldScrollTop=scrolledParent.scrollTop),pageScrollX=this.getPageScrollX(),pageScrollY=this.getPageScrollY();this.maintainScrollPositionDuring(function(){el.focus({preventScroll:tryPreventScrollChange}),tryPreventScrollChange&&(scrolledParent&&(oldScrollLeft!==scrolledParent.scrollLeft&&(scrolledParent.scrollLeft=oldScrollLeft),oldScrollTop!==scrolledParent.scrollTop&&(scrolledParent.scrollTop=oldScrollTop)),pageScrollX==this.getPageScrollX()&&pageScrollY==this.getPageScrollY()||this.global.scrollTo(pageScrollX,pageScrollY))})}catch(e){}finally{null==prevIndex?el.removeAttribute("tabIndex"):el.setAttribute("tabIndex",prevIndex)}},elementIsEmpty:function(el,description){if((el=this.normalizeElement(el))&&this.isElementEmpty(el)){var R=Siesta.Resource("Siesta.Test.Element");this.pass(description,{descTpl:R.get("elementIsEmptyPassTpl")})}else this.fail(description,{got:el.innerHTML,need:"",assertionName:"elementIsEmpty"})},elementIsNotEmpty:function(el,description){if((el=this.normalizeElement(el))&&!this.isElementEmpty(el)){var R=Siesta.Resource("Siesta.Test.Element");this.pass(description,{descTpl:R.get("elementIsNotEmptyPassTpl")})}else this.fail(description,{assertionName:"elementIsNotEmpty"})},waitForElementEmpty:function(el,callback,scope,timeout){var me=this,R=Siesta.Resource("Siesta.Test.Element");return el=this.normalizeElement(el),this.waitFor({method:function(){return me.isElementEmpty(el)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForElementEmpty",description:" "+R.get("elementToBeEmpty")})},waitForElementNotEmpty:function(el,callback,scope,timeout){var me=this,R=Siesta.Resource("Siesta.Test.Element");return el=this.normalizeElement(el),this.waitFor({method:function(){return!me.isElementEmpty(el)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForElementNotEmpty",description:" "+R.get("elementToNotBeEmpty")})},isElementEmpty:function(el){return!el.innerHTML.replace(/^\s+|\s+$/g,"")},hasAttributeValue:function(el,attribute,value,description){var foundValue=(el=this.normalizeElement(el)).getAttribute(attribute);this.is(foundValue,value,description)},hasValue:function(el,value,description){var foundValue=(el=this.normalizeElement(el)).value;this.is(foundValue,value,description)},hasSameWidth:function(el,referenceEl,description){el=this.normalizeElement(el),referenceEl=this.normalizeElement(referenceEl),this.is(el.offsetWidth,referenceEl.offsetWidth,description)},hasSameHeight:function(el,referenceEl,description){el=this.normalizeElement(el),referenceEl=this.normalizeElement(referenceEl),this.is(el.offsetHeight,referenceEl.offsetHeight,description)},isElementFocusable:function(el){var disabled="true"===el.getAttribute("disabled"),nodeName=el.nodeName.toLowerCase();return!disabled&&(this.isTextInput(el)||el.isContentEditable||"input"===el.nodeName.toLowerCase()&&"file"===el.type||nodeName in{a:1,area:1,button:1,object:1,select:1}||null!=el.getAttribute("tabIndex")&&(!bowser.msie||"on"!=String(el.getAttribute("unselectable")).toLowerCase()))}}}),Role("Siesta.Test.Observable",{does:[Siesta.Util.Role.CanGetType],requires:["addListenerToObservable","removeListenerFromObservable","getSourceLine","pass","fail","processCallbackFromTest"],has:{},methods:{waitForEvent:function(observable,event,callback,scope,timeout){var eventFired=!1,R=Siesta.Resource("Siesta.Test.Browser");return this.addListenerToObservable(observable,event,function(){eventFired=!0}),this.waitFor({method:function(){return eventFired},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForEvent",description:" "+R.get("waitForEvent")+' "'+event+'" '+R.get("event")})},firesOk:function(options,events,n,timeOut,func,desc,callback){var observable,during,me=this,sourceLine=me.getSourceLine(),R=Siesta.Resource("Siesta.Test.Browser"),nbrArgs=arguments.length;if(1==nbrArgs)observable=options.observable,events=options.events,during=options.during,desc=options.desc||options.description,callback=options.callback,timeOut="Number"==this.typeOf(during)?during:null,func=/Function/.test(this.typeOf(during))?during:null;else if(5<=nbrArgs){if(observable=options,"String"==this.typeOf(events))(obj={})[events]=n,events=obj}else if(nbrArgs<=3&&"Object"==this.typeOf(events))observable=options,desc=n;else{if(!(nbrArgs<=4&&"String"==this.typeOf(events)))throw new Error(R.get("unrecognizedSignature"));var obj;observable=options,(obj={})[events]=n,events=obj,desc=timeOut,timeOut=null}var counters={},countFuncs={};Joose.O.each(events,function(expected,eventName){counters[eventName]=0;var countFunc=countFuncs[eventName]=function(){counters[eventName]++};me.addListenerToObservable(observable,eventName,countFunc)});function stopRecording(){Joose.O.each(events,function(expected,eventName){me.removeListenerFromObservable(observable,eventName,countFuncs[eventName]);var actualNumber=counters[eventName];me.verifyExpectedNumber(actualNumber,expected)?me.pass(desc,{descTpl:R.get("observableFired")+" "+actualNumber+" `"+eventName+"` "+R.get("events")}):me.fail(desc,{assertionName:"firesOk",sourceLine:sourceLine,descTpl:R.get("observableFiredOk")+" `"+eventName+"` "+R.get("events"),got:actualNumber,gotDesc:R.get("actualNbrEvents"),need:expected,needDesc:R.get("expectedNbrEvents")})})}if(timeOut){var async=this.beginAsync(timeOut+100);(0,this.originalSetTimeout)(function(){me.endAsync(async),stopRecording(),me.processCallbackFromTest(callback)},timeOut)}else if(func){function cont(){stopRecording(),me.processCallbackFromTest(callback)}var typeOf=this.typeOf(func);if("Function"===typeOf)func(),cont();else if("AsyncFunction"===typeOf)return func().then(cont,cont)}else this.on("beforetestfinalizeearly",stopRecording)},willFireNTimes:function(observable,event,n,desc,isGreaterEqual){this.firesOk(observable,event,isGreaterEqual?">="+n:n,desc)},getObjectWithExpectedEvents:function(event,expected){var events={};return"Array"==this.typeOf(event)?Joose.A.each(event,function(eventName){events[eventName]=expected}):events[event]=expected,events},wontFire:function(observable,event,desc){this.firesOk({observable:observable,events:this.getObjectWithExpectedEvents(event,0),desc:desc})},firesOnce:function(observable,event,desc){this.firesOk({observable:observable,events:this.getObjectWithExpectedEvents(event,1),desc:desc})},isntFired:function(){this.wontFire.apply(this,arguments)},firesAtLeastNTimes:function(observable,event,n,desc){this.firesOk(observable,event,">="+n,desc)},isFiredWithSignature:function(observable,event,checkerFn,description){function verifyFiredFn(){me.removeListenerFromObservable(observable,event,listener),eventFired||me.fail("The ["+event+"] "+R.get("isFiredWithSignatureNotFired"))}var eventFired,me=this,sourceLine=me.getSourceLine(),R=Siesta.Resource("Siesta.Test.ExtJS.Observable");me.on("beforetestfinalizeearly",verifyFiredFn);var listener=function(){me.un("beforetestfinalizeearly",verifyFiredFn);var result=checkerFn.apply(me,arguments);!eventFired&&result&&me.pass(description||R.get("observableFired")+" "+event+" "+R.get("correctSignature"),{sourceLine:sourceLine}),result||(me.fail(description||R.get("observableFired")+" "+event+" "+R.get("incorrectSignature"),{sourceLine:sourceLine}),me.removeListenerFromObservable(observable,event,listener)),eventFired=!0};me.addListenerToObservable(observable,event,listener)}}}),Role("Siesta.Test.ExtJSCore",{does:Siesta.Util.Role.CanInstallCQRootPseudo,has:{waitForExtReady:!0,waitForAppReady:!1,waitForExtComponentQueryReady:!0,loaderPath:null,requires:null,isExtOnReadyDone:!1,onReadyWaitingStarted:!1,isAppReadyDone:!1,loaderWaitingStarted:!1,requiringWaitingStarted:!1,isRequiringDone:!1,modelsDefinedInPreload:Joose.I.Object},override:{onTestStart:function(){var sharedSandboxState=this.sharedSandboxState;!this.reusingSandbox&&sharedSandboxState&&(sharedSandboxState.modelsDefinedInPreload||(sharedSandboxState.modelsDefinedInPreload={}),this.forEachModelInAllSchemas(function(entity,entityName,className,schema){sharedSandboxState.modelsDefinedInPreload[className]=!0}))},cleanupContextBeforeStartDom:function(){var Ext=this.getExt();if(!Ext)return this.SUPER();var me=this;if(Ext.ComponentQuery){var keep={},msgBox=Ext.MessageBox;msgBox&&(keep[msgBox.id]=!0);var comps=Ext.ComponentQuery.query("{ownerCt == null}");comps.sort(function(a,b){return(a=a instanceof Ext.Container?0:1)-(b=b instanceof Ext.Container?0:1)}),Joose.A.each(comps,function(comp){keep[comp.id]||comp.isDestroyed||comp.destroy()})}if(Ext.ClassManager&&Ext.undefine){var index={};Joose.O.each(Ext.ClassManager.classes,function(cls,name){var global=name.split(".")[0];me.isGlobalExpected(global,index)||Ext.undefine(name)})}if(Ext.data&&Ext.data.StoreManager){var toRemove=[];Ext.data.StoreManager.each(function(store){"ext-empty-store"!==store.storeId&&toRemove.push(store)}),Ext.data.StoreManager.unregister.apply(Ext.data.StoreManager,toRemove)}var sharedSandboxState=this.sharedSandboxState,modelsDefinedInPreload=sharedSandboxState&&sharedSandboxState.modelsDefinedInPreload;modelsDefinedInPreload&&me.forEachModelInAllSchemas(function(entity,entityName,className,schema){modelsDefinedInPreload[className]||(Ext.undefine(className),delete schema.entityClasses[className],delete schema.entities[entityName])}),Ext.resumeLayouts&&Ext.resumeLayouts()},processSubTestConfig:function(config){var res=this.SUPER(config);return res.waitForAppReady=!1,res.waitForExtReady=!1,res},isReady:function(){var result=this.SUPERARG(arguments);if(!result.ready)return result;var me=this,Ext=this.getExt(),R=Siesta.Resource("Siesta.Test.ExtJSCore"),loaderPath=this.loaderPath,StartTest=this.global.StartTest;loaderPath&&Ext&&Ext.Loader&&!StartTest.loaderPathHookInstalled&&this.project.generateLoaderPathHook()(StartTest,Ext,loaderPath);var requires=this.requires;if(requires&&!this.requiringWaitingStarted&&Ext&&Ext.require&&(this.requiringWaitingStarted=!0,Ext.require(requires,function(){me.isRequiringDone=!0})),this.waitForExtReady&&!this.onReadyWaitingStarted&&Ext&&Ext.onReady&&(this.onReadyWaitingStarted=!0,Ext.onReady(function(){me.isExtOnReadyDone=!0})),this.waitForExtComponentQueryReady&&Ext&&(Ext.getVersion||Ext.blink||Ext.manifest||Ext.microloaded)&&!Ext.ComponentQuery)return{ready:!1,reason:R.get("waitedForComponentQuery")};if(requires&&!this.isRequiringDone)return{ready:!1,reason:R.get("waitedForRequires")};if(this.waitForExtReady&&this.onReadyWaitingStarted&&!this.isExtOnReadyDone)return{ready:!1,reason:R.get("waitedForExt")};if(this.waitForAppReady&&!this.isAppReadyDone&&Ext){var name=Ext.manifest.name,isAppReadyDone=!1;try{isAppReadyDone=me.global[name].getApplication().launched}catch(e){}if(!isAppReadyDone)return{ready:!1,reason:R.get("waitedForApp")};this.isAppReadyDone=isAppReadyDone}return Ext&&Ext.ComponentQuery&&this.installRootPseudoCQ(Ext),{ready:!0}}},methods:{initialize:function(){this.expectGlobals("Ext","id"),this.SUPER()},getSimulatorClass:function(){return Siesta.Test.SimulatorExtJS},forEachModelInAllSchemas:function(func){var Ext=this.getExt();Ext&&Ext.data&&Ext.data.schema&&Ext.data.schema.Schema&&Ext.undefine&&Joose.O.each(Ext.data.schema.Schema.instances,function(schema,name){schema.eachEntity(function(entityName){var entity=schema.getEntity(entityName);func(entity,entityName,entity.$className,schema)})})},doStart:function(){var Ext=this.getExt();if(!Ext)return this.waitForAppReady=!1,this.waitForExtReady=!1,this.requires=null,void this.SUPERARG(arguments);Ext.isReady=!0,Ext.manifest&&Ext.manifest.name||(this.waitForAppReady=!1),this.SUPERARG(arguments)},getExt:function(){return this.global.Ext},Ext:function(){return this.global.Ext},isExtJSComponentQueryTarget:function(obj){var Ext=this.getExt();return Boolean(obj&&Ext&&(Ext.Component&&obj instanceof Ext.Component||obj.isWidget))},componentQuery:function(selector,root,options){options=options||{};var Ext=this.Ext();if(!selector||!Ext||!Ext.ComponentQuery)return[];selector=this.trimString(selector.replace(/^(\s*>>)?/,""));var result=Ext.ComponentQuery.query(selector,root);if(options.ignoreNonVisible){var me=this,onlyVisible=[];Joose.A.each(result,function(cmp){me.componentIsHidden(cmp)||onlyVisible.push(cmp)}),result=onlyVisible}return result},normalizeComponent:function(component,allowEmpty,options){options=options||{};this.Ext();var matchingMultiple=!1;if("String"===this.typeOf(component)){var result=this.componentQuery(component,null,{ignoreNonVisible:options.ignoreNonVisible}),R=Siesta.Resource("Siesta.Test.ExtJSCore");if(!allowEmpty&&result.length<1&&this.warn(R.get("noComponentMatch").replace("{component}",component)),1<result.length){matchingMultiple=!0;var text=R.get("multipleComponentMatch").replace("{component}",component);this.project.failOnMultipleComponentMatches?this.fail(text):this.warn(text)}component=result[0]}return options.detailed?{comp:component,matchingMultiple:matchingMultiple}:component},compToEl:function(comp,locateInputEl){if(!comp)return null;var Ext=this.Ext();if(locateInputEl=!1!==locateInputEl,Ext.Editor&&comp instanceof Ext.Editor&&comp.field&&(comp=comp.field),Ext&&Ext.form&&Ext.form.Field&&locateInputEl){if((Ext.form.Checkbox&&comp instanceof Ext.form.Checkbox||Ext.form.Radio&&comp instanceof Ext.form.Radio)&&comp.el){var displayEl=comp.displayEl;if(displayEl&&comp.boxLabel)return displayEl;var inputComponent=Ext.ComponentQuery.query("checkboxinput",comp)[0];return inputComponent?this.compToEl(inputComponent):comp.el.down(".x-form-field")||comp.el.down(".x-field-input")||comp.el.down(".x-input-el")||comp.inputEl||comp.el}if(comp instanceof Ext.form.Field&&comp.inputEl){var field=comp.el.down(".x-form-field");return field&&field.dom?field:comp.inputEl}if(Ext.form.HtmlEditor&&comp instanceof Ext.form.HtmlEditor)return comp.iframe||comp.inputEl}if(Ext&&Ext.field&&Ext.field.Slider&&comp instanceof Ext.field.Slider)return this.compToEl(Ext.ComponentQuery.query("slider",comp)[0]);if(Ext&&Ext.field&&Ext.field.Field&&comp instanceof Ext.field.Field&&locateInputEl&&comp.getComponent){if((comp=comp.getComponent()).getUseMask&&!0===comp.getUseMask()&&comp.mask)return comp.mask;if(locateInputEl&&comp.input)return comp.input;if(comp.bodyElement)return comp.bodyElement}return comp.getEl&&!comp.element?comp.getEl():locateInputEl&&comp.input||comp.el||comp.element},normalizeElement:function(el,allowMissing,shallow,detailed,options){if(!el)return null;if(el.nodeName)return el;var query,scopeAdjusted,matchingMultiple=!1,origEl=(this.getExt(),el),stopAtComponentLevel=options&&options.stopAtComponentLevel,ignoreNonVisible=!options||!options.hasOwnProperty("ignoreNonVisible")||options.ignoreNonVisible;if("string"==typeof el){var mainParts=el.split("->");if(2===mainParts.length&&(scopeAdjusted=this.adjustScope(el),el=this.trimString(mainParts[1]),!scopeAdjusted||(el.match(/^\s*>>/)||el.match(/=>/))&&!this.Ext()))return this.resetScope(),null;if(el.match(/=>/))el=(query=this.compositeQuery(el,null,allowMissing,ignoreNonVisible))[0],matchingMultiple=1<query.length;else{if(!el.match(/^\s*>>/)){var retVal=this.SUPER(el,allowMissing,shallow,detailed);return scopeAdjusted&&this.resetScope(),retVal}var compRes=this.normalizeComponent(el,allowMissing,{ignoreNonVisible:ignoreNonVisible,detailed:!0});el=compRes.comp,matchingMultiple=compRes.matchingMultiple}if(!allowMissing&&!el){var warning=Siesta.Resource("Siesta.Test.ExtJSCore").get("noComponentFound")+": "+origEl;throw this.warn(warning),scopeAdjusted&&this.resetScope(),warning}}var rawResult=!1;this.isExtJSComponentQueryTarget(el)&&(stopAtComponentLevel?rawResult=!0:el=this.compToEl(el)),el&&el.dom&&(stopAtComponentLevel?rawResult=!0:el=el.dom);var res=rawResult?el:this.SUPER(el,allowMissing,shallow);return scopeAdjusted&&this.resetScope(),detailed?{el:res,matchingMultiple:matchingMultiple}:res},normalizeActionTarget:function(el,allowMissing,ignoreNonVisible){return this.normalizeElement(el,allowMissing,!1,!1,{ignoreNonVisible:!1!==ignoreNonVisible,stopAtComponentLevel:!0})},knownBugIn:function(frameworkVersion,fn,reason){var Ext=this.getExt(),version=Ext.versions.extjs||Ext.versions.touch,R=Siesta.Resource("Siesta.Test.ExtJSCore");this.project.failKnownBugIn||version.isGreaterThan(frameworkVersion)?fn.call(this.global,this):this.todo(R.get("knownBugIn")+" "+frameworkVersion+": "+(reason||""),fn)},requireOk:function(){var callback,me=this,Ext=(this.global,this.getExt()),args=Array.prototype.concat.apply([],arguments),R=Siesta.Resource("Siesta.Test.ExtJSCore");"Function"==this.typeOf(args[args.length-1])&&(callback=args.pop());function continuation(){me.endAsync(async),Joose.A.each(args,function(className){var clsManager=Ext.ClassManager,cls=clsManager.get(className);clsManager.overrideMap&&clsManager.overrideMap[className]||cls&&("Function"==me.typeOf(cls)||"Function"==me.typeOf(cls.self))?me.pass(R.get("Class")+": "+className+" "+R.get("wasLoaded")):me.fail(R.get("Class")+": "+className+" "+R.get("wasNotLoaded"))}),me.processCallbackFromTest(callback)}var timeout=this.defaultTimeout,async=this.beginAsync(timeout+100),hasTimedOut=!1,originalSetTimeout=this.originalSetTimeout,originalClearTimeout=this.originalClearTimeout,timeoutId=originalSetTimeout(function(){hasTimedOut=!0,continuation()},timeout);Ext.Loader.setConfig({enabled:!0}),Ext.require(args,function(){originalClearTimeout(timeoutId),hasTimedOut||continuation()})},clickComponentQuery:function(selector,root,callback){2==arguments.length&&"Function"==this.typeOf(root)&&(callback=root,root=this.Ext().ComponentQuery),1==arguments.length&&(root=this.Ext().ComponentQuery);var result=root.query(selector);this.chainClick(result,function(){callback&&callback.call(this,result)})},clickCQ:function(){this.clickComponentQuery.apply(this,arguments)},compositeQuery:function(selector,root,allowEmpty,onlyVisibleComponents){allowEmpty=!1!==allowEmpty;var i,Ext=this.Ext(),R=Siesta.Resource("Siesta.Test.ExtJSCore"),mainParts=selector.split("=>");if(!(root=root||Ext&&Ext.ComponentQuery))return[];if(mainParts.length<2)throw R.get("invalidCompositeQuery")+": "+selector;var components,compQuery=mainParts[0],domQuery=mainParts[1];if(compQuery.match(/\.\w+\(/)){for(var match,re=/(.+?)\.(\w+)\(\)/g;root&&null!=(match=re.exec(compQuery));)(root=root.query(match[1])[0])&&match[2]&&(root=root[match[2]]());if(!root&&!allowEmpty)throw R.get("invalidCompositeQuery")+": "+selector;components=[root]}else components=root.query(compQuery);if(!components.length){if(allowEmpty)return[];throw R.get("ComponentQuery")+" "+compQuery+" "+R.get("matchedNoCmp")}for(i=0;i<components.length;i++){var cmp=components[i];if(cmp.rendered&&(!onlyVisibleComponents||cmp.isWidget||(cmp.isVisible?cmp.isVisible():!cmp.isHidden()))){var result=this.compToEl(cmp,!1);if(0<(result=this.sizzle(domQuery,result.dom)).length)return result}}if(allowEmpty)return[];throw R.get("CompositeQuery")+" "+selector+" matched no DOM elements"},cq:function(selector){return this.Ext().ComponentQuery.query(selector.replace(/^(\s*>>)?/,""))},cq1:function(selector){return this.Ext().ComponentQuery.query(selector.replace(/^(\s*>>)?/,""))[0]},waitForTarget:function(target,callback,scope,timeout,offset){var SUPER=this.SUPER;this.waitForAnimations(function(){SUPER.call(this,target,callback,scope,timeout,offset)},this,timeout)},messageBoxIsVisible:function(desc){return this.notOk(this.Ext().Msg.isHidden(),desc||Siesta.Resource("Siesta.Test.ExtJSCore","messageBoxVisible"))},messageBoxIsHidden:function(desc){return this.ok(this.Ext().Msg.isHidden(),desc||Siesta.Resource("Siesta.Test.ExtJSCore","messageBoxHidden"))},cqExists:function(query,description){this.ok(this.cq1(query),description)},cqNotExists:function(query,description){this.notOk(this.cq1(query),description)},componentQueryExists:function(){this.cqExists.apply(this,arguments)},setValue:function(component,value,callback,scope){((component=this.normalizeComponent(component)).setChecked||component.setRawValue||component.setValue).call(component,value),callback&&this.processCallbackFromTest(callback,null,scope)},waitForAnimations:function(callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.ExtJS"),me=this;return this.waitFor({method:function(){return!me.areAnimationsRunning()},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForAnimations",description:" "+R.get("animationsToFinalize")})},query:function(selector){var result,me=this;return result=selector.match(/=>/)?this.compositeQuery(selector,null,!0,!1):selector.match(/^\s*>>/)?(result=this.componentQuery(selector,null,{ignoreNonVisible:!1}),Joose.A.map(result,function(cmp){return me.compToEl(cmp).dom})):this.sizzle(selector)}}}),Role("Siesta.Test.ExtJS.Ajax",{has:{responses:Joose.I.Array,urlMatchers:Joose.I.Array},methods:{isAjaxLoading:function(obj,description){var Ext=this.Ext();this.ok(Ext.Ajax.isLoading(obj),description||Siesta.Resource("Siesta.Test.ExtJS.Ajax","ajaxIsLoading"))},ajaxRequestAndThen:function(url,callback,scope){var options=url;"string"==typeof url&&(options={url:url,callback:callback,scope:scope}),this.Ext().Ajax.request(options)},waitForAjaxRequest:function(obj,callback,scope,timeout){var msg,Ext=this.Ext();return"function"==typeof obj?(msg=" "+Siesta.Resource("Siesta.Test.ExtJS.Ajax","allAjaxRequestsToComplete"),timeout=scope,scope=callback,callback=obj,obj=void 0):msg=" "+Siesta.Resource("Siesta.Test.ExtJS.Ajax","ajaxRequest")+' "'+obj.options.url+'" '+Siesta.Resource("Siesta.Test.ExtJS.Ajax","toComplete"),this.waitFor({method:function(){return obj?!Ext.Ajax.isLoading(obj)&&obj:!Ext.Ajax.isLoading()},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForAjaxRequest",description:msg})}}}),Role("Siesta.Test.ExtJS.Store",{methods:{waitForStoresToLoad:function(){var callback,storesNum,Ext=this.getExt(),args=Array.prototype.concat.apply([],arguments),me=this,R=Siesta.Resource("Siesta.Test.ExtJS.Store"),baseStoreCls=Ext.data.AbstractStore||Ext.data.Store;Joose.A.each(args,function(arg,index){if("Function"==me.typeOf(arg))return callback=arg,storesNum=index,!1});var loaded=0,result=me.waitFor({method:function(){return loaded==storesNum},callback:callback,name:"waitForStoresToLoad",description:storesNum+" "+R.get("storesToLoad")});return Joose.A.each(args,function(store){var proxy=store.proxy||store.getProxy&&store.getProxy();if(!(store instanceof baseStoreCls))return!1;if(proxy){store.on("load",function(){loaded++,proxy.un("exception",exceptionFailure)},null,{single:!0});var exceptionFailure=function(proxy,response,operation){var url=proxy.api&&proxy.api.read||proxy.url;me.fail(R.get("failedToLoadStore"),R.get("URL")+": "+url)};proxy.on("exception",exceptionFailure)}else storesNum--}),result},loadStoresAndThen:function(){this.getExt();this.waitForStoresToLoad.apply(this,arguments);var args=Array.prototype.concat.apply([],arguments);"Function"==this.typeOf(args[args.length-1])&&args.pop(),Joose.A.each(args,function(store){(store.proxy||store.getProxy&&store.getProxy())&&store.load&&store.load()})},isStoreEmpty:function(store,description){this.is(store.getCount(),0,description)}}}),Role("Siesta.Test.ExtJS.Observable",{methods:{addListenerToObservable:function(observable,event,listener,isSingle){if(this.Ext()){if((observable=this.normalizeActionTarget(observable,!1,!1)).nodeName&&observable.tagName){var targetWin=observable.ownerDocument.parentWindow||observable.ownerDocument.defaultView;targetWin.Ext&&(observable=targetWin.Ext.get(observable))}observable.on&&observable.un?observable.on(event,listener,null,{single:isSingle}):this.SUPERARG(arguments)}else this.SUPERARG(arguments)},removeListenerFromObservable:function(observable,event,listener){if(this.Ext()){if(!(observable=this.normalizeActionTarget(observable,!0,!1)))return;if(observable&&observable.nodeName&&observable.tagName){var targetWin=observable.ownerDocument.parentWindow||observable.ownerDocument.defaultView;targetWin.Ext&&(observable=targetWin.Ext.get(observable))}observable.on&&observable.un?observable.un(event,listener):this.SUPERARG(arguments)}else this.SUPERARG(arguments)},hasListener:function(observable,eventName,description){var R=Siesta.Resource("Siesta.Test.ExtJS.Observable");(observable=this.normalizeActionTarget(observable,!0,!1))&&observable.hasListener?observable.hasListener(eventName)?this.pass(description,{descTpl:R.get("hasListenerPass"),eventName:eventName}):this.fail(description,{assertionName:"hasListener",annotation:R.get("hasListenerFail")+": "+eventName}):this.fail(description,{assertionName:"hasListener",annotation:R.get("hasListenerInvalid")})}}}),Role("Siesta.Test.ExtJS.Component",{requires:["waitFor"],methods:{componentIsHidden:function(comp){var el=this.compToEl(comp);return!el||(comp.isHidden&&comp.isHidden()||comp.isVisible&&!comp.isVisible()||!this.isElementVisible(el))},waitForComponentVisible:function(component,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.ExtJS.Component"),me=this;if("String"!=this.typeOf(component)&&!this.isExtJSComponentQueryTarget(component))throw R.get("badInputText")+": "+component;return this.waitFor({method:function(){var comp=me.normalizeComponent(component,!0);if(!comp)return!1;var el=me.compToEl(comp);return el&&me.elementIsTop(el,!0)&&comp},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForComponentVisible",description:" "+R.get("component")+' "'+("String"==me.typeOf(component)?component:component.id)+'" '+R.get("toBeVisible")})},waitForComponentNotVisible:function(component,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.ExtJS.Component"),me=this;if("String"!=this.typeOf(component)&&!this.isExtJSComponentQueryTarget(component))throw R.get("badInputText")+": "+component;return this.waitFor({method:function(){var comp=me.normalizeComponent(component,!0);return!!comp&&(me.componentIsHidden(comp)&&comp)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForComponentNotVisible",description:" "+R.get("component")+' "'+("String"==me.typeOf(component)?component:component.id)+'" '+R.get("toNotBeVisible")})},waitForComponentQuery:function(selector,root,callback,scope,timeout){return"Function"==this.typeOf(root)&&(timeout=scope,scope=callback,callback=root,root=this.getExt()&&this.getExt().ComponentQuery),this.waitFor({method:function(){var result=root&&root.query(selector)||this.getExt()&&this.getExt().ComponentQuery.query(selector);return!!(result&&0<result.length)&&result},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForComponentQuery",description:" "+Siesta.Resource("Siesta.Test.ExtJS.Component","componentQuery")+' "'+selector+'"'})},waitForCompositeQuery:function(query,root,callback,scope,timeout){"Function"==this.typeOf(root)&&(timeout=scope,scope=callback,callback=root,root=this.getExt().ComponentQuery);var me=this;return me.waitFor({method:function(){var result=me.compositeQuery(query,root,!0);return 0<result.length&&result},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForCompositeQuery",description:" "+Siesta.Resource("Siesta.Test.ExtJS.Component","compositeQuery")+' "'+query+'"'})},waitForCompositeQueryNotFound:function(query,root,callback,scope,timeout){"Function"==this.typeOf(root)&&(timeout=scope,scope=callback,callback=root,root=this.getExt().ComponentQuery);var me=this;return me.waitFor({method:function(){return!(0<me.compositeQuery(query,root,!0).length)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForCompositeQueryNotFound",description:" "+Siesta.Resource("Siesta.Test.ExtJS.Component","compositeQuery")+' "'+query+'" '+Siesta.Resource("Siesta.Test.ExtJS.Component","toReturnEmptyArray")})},waitForCQ:function(){return this.waitForComponentQuery.apply(this,arguments)},waitForCQNotFound:function(){return this.waitForComponentQueryNotFound.apply(this,arguments)},waitForComponentQueryNotFound:function(query,root,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.ExtJS.Component");return"Function"==this.typeOf(root)&&(timeout=scope,scope=callback,callback=root,root=this.getExt().ComponentQuery),this.waitFor({method:function(){var result=root.query(query);return 0===result.length&&result},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForComponentQueryNotFound",description:R.get("componentQuery")+": "+query+" "+R.get("toReturnEmpty")})},waitForCQVisible:function(){return this.waitForComponentQueryVisible.apply(this,arguments)},waitForCQNotVisible:function(){return this.waitForComponentQueryNotVisible.apply(this,arguments)},waitForComponentQueryVisible:function(query,root,callback,scope,timeout){var firstNonVisibleId,resultsLen,me=this,R=Siesta.Resource("Siesta.Test.ExtJS.Component"),Ext=me.getExt();return"Function"==this.typeOf(root)&&(timeout=scope,scope=callback,callback=root,root=Ext.ComponentQuery),this.waitFor({method:function(){firstNonVisibleId=null;var result=root.query(query),allVisible=!0;return 0<(resultsLen=result.length)&&(Joose.A.each(result,function(c){if(!c.rendered||!me.isElementVisible(c))return allVisible=!1,firstNonVisibleId=c.id,!1}),allVisible&&result)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForComponentQueryVisible",description:" "+R.get("componentQuery")+": "+query+" to return a non-empty set of visible components",annotation:function(){return 0===resultsLen?"No matching components":0<resultsLen&&null==firstNonVisibleId?"":0<resultsLen&&null!=firstNonVisibleId?"The matching component [id="+firstNonVisibleId+"] is not visible":void 0}})},waitForComponentQueryNotVisible:function(query,root,callback,scope,timeout){var firstVisibleId,resultsLen,me=this,R=Siesta.Resource("Siesta.Test.ExtJS.Component"),Ext=me.getExt();return"Function"==this.typeOf(root)&&(timeout=scope,scope=callback,callback=root,root=Ext.ComponentQuery),this.waitFor({method:function(){firstVisibleId=null;var result=root.query(query),allHidden=!0;return!(0<(resultsLen=result.length))||(Joose.A.each(result,function(comp){if(!me.componentIsHidden(comp))return firstVisibleId=comp.id,allHidden=!1}),allHidden&&result)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForComponentQueryVisible",description:" "+R.get("componentQuery")+": "+query+" "+R.get("toReturnHiddenCmp"),annotation:function(){return 0===resultsLen||null==firstVisibleId?"":null!=firstVisibleId?"The matching component [id="+firstVisibleId+"] is visible":void 0}})},waitForXType:function(xtype,root,callback,scope,timeout){return this.waitForComponentQuery(xtype,root,callback,scope,timeout)},waitForComponent:function(component,rendered,callback,scope,timeout){var xtype,Ext=this.getExt();return xtype=Ext.isString(component)?Ext.ClassManager.get(component).xtype:component.xtype,rendered&&(xtype+="[rendered]"),this.waitForXType(xtype,callback,scope,timeout)},hasSize:function(component,width,height,description){component=this.normalizeComponent(component),this.isDeeply(component.getSize(),{width:width,height:height},description)},hasPosition:function(component,x,y,description){component=this.normalizeComponent(component),this.isDeeply(component.getPosition(),[x,y],description)},destroysOk:function(components,description){var Ext=this.Ext(),R=Siesta.Resource("Siesta.Test.ExtJS.Component");if("Array"!=this.typeOf(components)&&(components="String"==this.typeOf(components)?this.Ext().ComponentQuery.query(components):[components]),components.length){var currentComp,e=this.getExceptionCatcher()(function(){Joose.A.each(components,function(component){(currentComp=component).destroy()})});if(void 0===e){var me=this;!1!==Joose.A.each(components,function(component){if(!component.isDestroyed&&component.destroy!=Ext.emptyFn)return me.fail(description,{assertionName:"destroysOk",annotation:R.get("Component")+" ["+component.id+"] "+R.get("destroyFailed")}),!1})&&this.pass(description,{descTpl:R.get("destroyPassed")})}else this.fail(description,{assertionName:"destroysOk",got:e,gotDesc:R.get("exception"),annotation:R.get("exceptionAnnotation")+" "+currentComp.id})}else this.fail(description,{assertionName:"destroysOk",annotation:R.get("invalidDestroysOkInput")})}}}),Role("Siesta.Test.ExtJS.Grid",{requires:["waitFor","pass","fail","typeOf"],methods:{waitForRowsVisible:function(view,callback,scope,timeout){"function"==typeof view&&(timeout=scope,scope=callback,callback=view,view=this.Ext()&&this.cq1("tableview")||"tableview");var cmp=this.Ext()&&this.normalizeComponent(view,!0),me=this;if(cmp||"string"!=typeof view){var checkerFn;if(cmp.normalGrid){var selector=cmp.normalGrid.getView().itemSelector;checkerFn=function(){if(cmp.rendered&&cmp.normalGrid.rendered&&cmp.lockedGrid.rendered){var lockedResult=this.$(selector,cmp.lockedGrid.getView().getEl().dom),normalResult=this.$(selector,cmp.normalGrid.getView().getEl().dom);return 0<lockedResult.length&&0<normalResult.length?{lockedRows:lockedResult,normalRows:normalResult}:void 0}}}else{selector=(view=cmp.getView&&cmp.getView()||cmp).itemSelector||view.rowSelector;checkerFn=function(){if(cmp.rendered){var result=this.$(selector,view.el.dom);return 0<result.length?result:void 0}}}return this.waitFor({method:checkerFn,callback:function(){var as=me.beginAsync();me.global.setTimeout(function(){me.endAsync(as),callback.call(scope||me)},100)},timeout:timeout,assertionName:"waitForRowsVisible",description:" "+Siesta.Resource("Siesta.Test.ExtJS.Grid").get("waitForRowsVisible")+' "'+cmp.id+'"'})}return this.waitForCQ(view,function(result){this.waitForRowsVisible(result[0],callback,scope,timeout)},this)},getFirstRow:function(grid){return grid=this.normalizeComponent(grid),this.getRow(grid,0)},getFirstCell:function(panel){return panel=this.normalizeComponent(panel),this.getCell(panel,0,0)},getRow:function(grid,index){var domNode,Ext=this.Ext();if(grid=this.normalizeComponent(grid),Ext.grid.Grid&&grid instanceof Ext.grid.Grid){var rowCmp=grid.getViewItems()[index];domNode=rowCmp&&rowCmp.element}else if((grid=grid.lockedGrid||grid).getView().bufferedRenderer){var record=grid.getStore().getRange(index,index+1)[0];record&&(domNode=grid.getView().getNode(record))}else domNode=grid&&this.$(grid.getView().itemSelector,grid.getView().getEl().dom)[index];return domNode&&Ext.get(domNode)},getCell:function(grid,row,col){var rowEl=(grid=this.normalizeComponent(grid))&&this.getRow(grid,row),cellNode=rowEl&&this.$(grid.view.cellSelector,rowEl.dom)[col];return cellNode&&this.Ext().get(cellNode)},getLastCellInRow:function(grid,row){return grid=this.normalizeComponent(grid),this.getCell(grid,row,grid.headerCt.getColumnCount()-1)},matchGridCellContent:function(grid,rowIndex,colIndex,string,description){(grid=this.normalizeComponent(grid)).getView();var Ext=this.Ext(),cell=this.getCell(grid,rowIndex,colIndex).child("."+Ext.baseCSSPrefix+"grid-cell-inner"),isRegExp="RegExp"==this.typeOf(string),content=cell.dom.innerHTML;(isRegExp?string.test(content):-1!=content.indexOf(string))?this.pass(description,{descTpl:isRegExp?"Cell content {content} matches regexp {string}":"Cell content {content} has a string {string}",content:content,string:string}):this.fail(description,{assertionName:"matchGridCellContent",got:cell.dom.innerHTML,gotDesc:"Cell content",need:string,needDesc:"String matching",annotation:"Row index: "+rowIndex+", column index: "+colIndex})},clickToEditCell:function(grid,rowIndex,colIndex,callback,selector){var Ext=this.getExt(),editingPlugin=(grid=this.normalizeComponent(grid))&&grid.editingPlugin;if(!(editingPlugin&&editingPlugin instanceof Ext.grid.plugin.CellEditing))return this.fail("No grid, or grid has no editing plugin, or its not a Ext.grid.plugin.CellEditing plugin"),void(callback&&callback(null));var me=this;this[2==editingPlugin.clicksToEdit?"doubleClick":"click"](this.getCell(grid,rowIndex,colIndex),function(){editingPlugin.getActiveEditor()||editingPlugin.startEditByPosition({row:rowIndex,column:colIndex}),me.waitForSelectorAtCursor(selector||".x-editor,input",callback)})},getTrimmedCellContent:function(grid,row,column){var cell=this.getCell(grid,row,column);return $.trim(this.$(cell.dom).text())},assertCellIsEmpty:function(grid,row,column,message){this.is(this.getTrimmedCellContent(grid,row,column),"",message)},waitForCellEmpty:function(grid,row,column,scope,timeout,callback){"function"==typeof scope?callback=scope:"function"==typeof timeout&&(callback=timeout),this.waitFor({method:function(){return 0===this.getTrimmedCellContent(grid,row,column).length},callback:function(){callback.call(scope||this)},timeout:timeout,assertionName:"waitForCellEmpty",description:" "+Siesta.Resource("Siesta.Test.ExtJS.Grid").get("waitForCellEmpty")})}}}),Role("Siesta.Test.ExtJS.DataView",{requires:["waitFor","getExt"],methods:{waitForViewRendered:function(view,callback,scope,timeout){var hasItems=(view=this.normalizeComponent(view))&&view.store&&0<view.store.getCount(),R=Siesta.Resource("Siesta.Test.ExtJS.DataView");return this.waitFor({method:function(){return hasItems?!!view.getNode(0):view.rendered},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForViewRendered",description:" "+R.get("view")+" "+view.id+" "+R.get("toRender")})},getFirstItem:function(view){var Ext=this.getExt();return view=this.normalizeComponent(view),Ext.get(view.getNode(0))}}}),Role("Siesta.Test.ExtJS.Element",{methods:{hasRegion:function(el,region,description){var elRegion=el.getRegion(),R=Siesta.Resource("Siesta.Test.ExtJS.Element");this.is(elRegion.top,region.top,description+" "+R.get("top")+")"),this.is(elRegion.right,region.right,description+" "+R.get("right")+")"),this.is(elRegion.bottom,region.bottom,description+" "+R.get("bottom")+")"),this.is(elRegion.left,region.left,description+" "+R.get("left")+")")}}}),Role("Siesta.Test.ExtJS.FormField",{methods:{fieldHasValue:function(field,value,description){field=this.normalizeComponent(field),this.is(field.getValue(),value,description)},isFieldEmpty:function(field,description){var val=(field=this.normalizeComponent(field)).getValue();this.ok(null===val||""===val,description)}}}),Class("Siesta.Test.Browser",{isa:Siesta.Test,does:[Siesta.Util.Role.CanParseBrowser,Siesta.Util.Role.CanCalculatePageScroll,Siesta.Util.Role.Dom,Siesta.Test.Browser.Role.CanGetElementFromPoint,Siesta.Test.Browser.Role.CanWorkWithKeyboard,Siesta.Test.Browser.Role.CanRebindJQueryContext,Siesta.Test.UserAgent.Mouse,Siesta.Test.UserAgent.Keyboard,Siesta.Test.UserAgent.Touch,Siesta.Test.Element,Siesta.Test.TextSelection,Siesta.Test.Observable],has:{bowser:null,browser:null,forceDOMVisible:!1,isDOMForced:!1,browserInfo:{lazy:function(){return this.parseBrowser(window.navigator.userAgent)}},nextConfirmValue:null,nextPromptReturnValue:null,realAlert:null,realConfirm:null,realPrompt:null,realPrint:null,realOpen:null,previousConfirm:null,previousPrompt:null,blurListener:null,restartOnBlur:!1,blurWindow:null,mouseVisualizer:null,popups:Joose.I.Array,simulator:null,simulatorConfig:null,isHandlingThrowAsync:!1,initialCursorPosition:null},override:{cleanup:function(){this.mouseVisualizer&&(this.mouseVisualizer.destroy(),this.mouseVisualizer=null),this.SUPERARG(arguments),this.bowser=this.browser=null,this._global=null,this.realAlert=this.realConfirm=this.realPrompt=this.realPrint=this.realOpen=null,this.previousPrompt=this.previousConfirm=null,this.blurListener=null,this.blurWindow&&this.blurWindow.close(),this.blurWindow=null,Joose.A.each(this.popups,function(handle){handle.popup.closed||handle.popup.close()}),this.popups.length=0,this.popups=null,this.simulator.cleanup()},attachSimulator:function(){var me=this,simulator=this.simulator,isRoot=!this.parent;if(isRoot&&simulator.onTestLaunch(this),"synthetic"!=simulator.type)return Promise.resolve().then(function(){if(isRoot){var x=me.initialCursorPosition?me.initialCursorPosition[0]:0,y=me.initialCursorPosition?me.initialCursorPosition[1]:0;return simulator.simulateMouseMove(x,y,null,{moveKind:"instant"})}}).then(function(){if(!me.project.browserWindowHasFocus()){var currentPosition=simulator.currentPosition.slice();return simulator.simulateMouseMove(-1,-1,null,{moveKind:"instant"}).then(function(){return simulator.simulateMouseClick({globalXY:[]})}).then(function(){return simulator.simulateMouseMove(currentPosition[0],currentPosition[1],null,{moveKind:"instant"})})}});isRoot&&me.initialCursorPosition&&(simulator.currentPosition[0]=me.initialCursorPosition[0],simulator.currentPosition[1]=me.initialCursorPosition[1])},launch:function(errorMessage){var me=this,SUPER=this.SUPER,cont=this.attachSimulator();cont?cont.then(function(){SUPER.call(me,errorMessage)},function(reason){SUPER.call(me,reason)}):this.SUPER(errorMessage)}},methods:{initialize:function(){this.simulator||(this.simulator=new(this.getSimulatorClass())(this.simulatorConfig||{})),this.currentPosition=this.simulator.currentPosition,this.SUPERARG(arguments)},onBeforeTestFinalize:function(){this.global.alert.__EXPECTED_ALERT__&&this.fail(Siesta.Resource("Siesta.Test.Browser","alertMethodNotCalled")),this.SUPERARG(arguments)},getSimulatorClass:function(){return Siesta.Test.Simulator},earlySetup:function(callback,errback){var simulator=this.simulator;"synthetic"==simulator.type?callback():simulator.doFullSimulationReset().then(callback,errback)},launch:function(errorMessage){var me=this,win=this.global;me.parent||(me.realAlert=win.alert,me.realConfirm=win.confirm,me.realPrompt=win.prompt,me.realPrint=win.print,me.realOpen=win.open,this.maintainScrollPositionDuring(function(){me.project.browserWindowHasFocus()||bowser.safari||me.onWindowBlur(),win.focus&&win.focus()}),bowser.msie||!me.project.showCursor||win.opener||(me.mouseVisualizer=new Siesta.Project.Browser.UI.MouseVisualizer({currentContainer:me.global.frameElement.parentElement}))),me.previousConfirm=win.confirm,me.previousPrompt=win.prompt;win.alert=win.print=function(){},win.confirm=function(){var retVal="boolean"!=typeof me.nextConfirmValue||me.nextConfirmValue;return me.nextConfirmValue=null,retVal},win.prompt=function(){var retVal=me.nextPromptReturnValue||"";return me.nextPromptReturnValue=null,retVal},win.open=function(url){var popup=me.realOpen.apply(win,arguments);return popup?me.popups.push({url:url,popup:popup}):me.fail(Siesta.Resource("Siesta.Test.Browser","popupsDisabled",{url:url})),popup},this.SUPERARG(arguments)},onTestFinalize:function(){var win=this.global;win&&(this.parent?(win.confirm=this.realConfirm,win.prompt=this.realPrompt,win.alert=win.print=function(){}):(win.confirm=this.previousConfirm,win.prompt=this.previousPrompt,win.print=this.realPrint,win.alert=this.realAlert,win.open=this.realOpen)),this.SUPERARG(arguments)},onWindowBlur:function(arg1,arg2){this.restartOnBlur?this.fireEvent("focuslost"):this.warn(Siesta.Resource("Siesta.Test.Browser").get("focusLostWarning",{url:this.url}))},sizzle:function(selector,root){return Siesta.Sizzle(selector,root||this.global.document)},isEventPrevented:function(event){return event.preventDefault&&"Boolean"==this.typeOf(event.preventDefault.$prevented)?event.preventDefault.$prevented:"Boolean"==this.typeOf(event.defaultPrevented)?event.defaultPrevented:!1===event.returnValue},cleanupContextBeforeStart:function(){this.cleanupContextBeforeStartDom(),this.SUPER()},cleanupContextBeforeStartDom:function(){this.global.document.body.innerHTML=""},getElementPageRect:function(el,$el){var offset=($el=$el||this.$(el)).offset();return new Siesta.Util.Rect({left:offset.left,top:offset.top,width:$el.outerWidth(),height:$el.outerHeight()})},hasForcedIframe:function(){return Boolean((this.isDOMForced||this.forceDOMVisible)&&this.scopeProvider instanceof Scope.Provider.IFrame&&this.scopeProvider.iframe)},getDivBox:function(doc,left,top,width,height){var div=doc.createElement("div");return div.style.cssText="position: absolute !important; left: "+left+"px !important; top: "+top+"px !important;border-width: 0 !important; padding: 0 !important; margin: 0 !important;width: "+width+"px !important; height: "+height+"px !important;",div},elementIsScrolledOut:function(el,offset){for(var doc=el.ownerDocument,win=doc.defaultView||doc.parentWindow,body=doc.body,parents=[],parent=el;parent&&parent!=body;parent=parent.parentNode)parents.push(parent);for(var currentRect=new Siesta.Util.Rect({left:this.getPageScrollX(win),top:this.getPageScrollY(win),width:this.$(win).width(),height:this.$(win).height()}),i=parents.length-1;0<=i;i--){parent=parents[i];var overflowX=this.$(parent).css("overflow-x"),overflowY=this.$(parent).css("overflow-y");if("visible"!=overflowX||"visible"!=overflowY){var parentRect=this.getElementPageRect(parent);if("visible"!=overflowX&&(currentRect=currentRect.cropLeftRight(parentRect)).isEmpty())return!0;if("visible"!=overflowY&&(currentRect=currentRect.cropTopBottom(parentRect)).isEmpty())return!0}}var $el=this.$(el),elPageRect=this.getElementPageRect($el[0],$el);return offset=this.normalizeOffset(offset,$el),!currentRect.contains(elPageRect.left+offset[0],elPageRect.top+offset[1])},scrollTargetIntoView:function(target,offset){var win=this.global,doc=win.document;if("Array"==this.typeOf(target)){var leftVisible=this.getPageScrollX(),rightVisible=leftVisible+this.$(win).width(),topVisible=this.getPageScrollY(),bottomVisible=topVisible+this.$(win).height();if(leftVisible<=target[0]&&target[0]<=rightVisible&&topVisible<=target[1]&&target[1]<=bottomVisible)return!1;var div=this.getDivBox(doc,target[0],target[1],1,1);return doc.body.appendChild(div),this.maintainScrollPositionDuring(function(){div.scrollIntoView()}),doc.body.removeChild(div),!0}target=this.normalizeElement(target,!0,null,!1),offset=this.normalizeOffset(offset,this.$(target));var isInside=this.isOffsetInsideElementBox(target,offset);if(target&&this.isElementVisible(target)&&isInside&&this.elementIsScrolledOut(target,offset)){if(this.maintainScrollPositionDuring(function(){target.scrollIntoView()}),this.elementIsScrolledOut(target,offset)){var scrollableParent=this.$(target).closest(":scrollable")[0];if(scrollableParent){var parentBox=this.getBoundingClientRect(scrollableParent),targetBox=this.getBoundingClientRect(target);scrollableParent.scrollLeft=Math.max(0,scrollableParent.scrollLeft+targetBox.left-parentBox.left+offset[0]-1),scrollableParent.scrollTop=Math.max(0,scrollableParent.scrollTop+targetBox.top-parentBox.top+offset[1]-1)}}return!0}},processSubTestConfig:function(config){var res=this.SUPER(config),me=this;return Joose.A.each(["currentPosition","mouseVisualizer","simulator","simulatorConfig","bowser","browser","moveCursorBetweenPoints","realAlert","realConfirm","realPrompt","realPrint","realOpen","popups"],function(name){res[name]=me[name]}),res},normalizeElement:function(el,allowMissing,shallow,detailed){if(el&&el.nodeName)return el;var x,y,matchingMultiple=!1;if("String"===this.typeOf(el)){var origEl=el,wasAdjusted=this.adjustScope(el),query=this.$(0<=el.indexOf("->")?el.split("->")[1]:el);if(wasAdjusted&&this.resetScope(),el=query[0],matchingMultiple=1<query.length,!allowMissing&&!el){var warning=Siesta.Resource("Siesta.Test.Browser","noDomElementFound")+": "+origEl;throw this.warn(warning),new Error(warning)}}"Array"==this.typeOf(el)&&(y=el.length<2?(x=this.simulator.currentPosition[0],this.simulator.currentPosition[1]):(x=this.pageXtoViewportX(Math.round(el[0])),this.pageYtoViewportY(Math.round(el[1]))),el=this.elementFromPoint(x,y));return detailed?{el:el,matchingMultiple:matchingMultiple}:el},normalizeActionTarget:function(el,allowMissing){return this.normalizeElement(el,allowMissing)},randomBetween:function(min,max){return Math.floor(min+Math.random()*(max-min+1))},getElementAtCursor:function(){var xy=this.simulator.currentPosition;return this.elementFromPoint(xy[0],xy[1])},addListenerToObservable:function(observable,event,listener,isSingle){this.$(observable).bind(event,listener)},removeListenerFromObservable:function(observable,event,listener){this.$(observable).unbind(event,listener)},getNormalizedTopElementInfo:function(actionTarget,skipWarning,actionName,offset){var localXY,globalXY,el;"Array"==this.typeOf(actionTarget)&&0==actionTarget.length&&(actionTarget=null);var targetIsPoint=!actionTarget||"Array"==this.typeOf(actionTarget);if(targetIsPoint){var x,y;y=actionTarget?(x=this.pageXtoViewportX(Math.round(actionTarget[0])),this.pageYtoViewportY(Math.round(actionTarget[1]))):(x=this.simulator.currentPosition[0],this.simulator.currentPosition[1]),globalXY=[x,y];var info=this.elementFromPoint(x,y,!1,null,!0);el=info.el,localXY=info.localXY}else el=this.normalizeElement(actionTarget,skipWarning);if(el||!skipWarning){if(!targetIsPoint){var R=Siesta.Resource("Siesta.Test.Browser"),message="getNormalizedTopElementInfo: "+(actionName?R.get("targetElementOfAction")+" ["+actionName+"]":R.get("targetElementOfSomeAction"))+" "+R.get("isNotVisible")+": "+(el.id?"#"+el.id:el);if(!this.isElementVisible(el))return void this.fail(message);skipWarning||!this.isOffsetInsideElementBox(el,offset)||this.elementIsTop(el,!0,offset)||this.warn(message)}var isOption=el&&"option"===el.nodeName.toLowerCase();if(isOption)localXY=this.simulator.currentPosition.slice(),globalXY=this.simulator.currentPosition.slice();else if(!targetIsPoint){var doc=el.ownerDocument;R=Siesta.Resource("Siesta.Test.Browser");if(localXY=this.getTargetCoordinate(el,!0,offset),globalXY=this.getTargetCoordinate(el,!1,offset),!(el=doc.elementFromPoint(localXY[0],localXY[1])||doc.elementFromPoint(localXY[0],localXY[1])||doc.body))return void this.fail("getNormalizedTopElementInfo: "+R.get("noElementFound")+" ["+localXY+"]")}return{el:el,localXY:localXY,globalXY:globalXY,offset:isOption?[0,0]:this.getOffsetRelativeToEl(el,localXY)}}},getOffsetRelativeToEl:function(el,point){var box=this.getElementPageRect(el);return[point[0]-box.left,point[1]-box.top]},waitForTextPresent:function(text,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.Browser");return this.waitFor({method:function(){var body=this.global.document.body,selector=":contains("+text+")";return 0<this.$(selector,body).length||this.$(body).is(selector)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForTextPresent",description:" "+R.get("text")+' "'+text+'" '+R.get("toBePresent")})},waitForTextNotPresent:function(text,callback,scope,timeout){var R=Siesta.Resource("Siesta.Test.Browser");return this.waitFor({method:function(){var body=this.global.document.body,selector=":contains("+text+")";return 0===this.$(selector,body).length&&!this.$(body).is(selector)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForTextNotPresent",description:" "+R.get("text")+' "'+text+'" '+R.get("toNotBePresent")})},waitForTarget:function(target,callback,scope,timeout,offset){var me=this,R=Siesta.Resource("Siesta.Test.Browser");return this.waitFor({method:function(){var el=me.normalizeElement(target,!0,!0,!1,{offset:offset});return!(!(el&&offset&&me.isElementVisible(el))||me.isOffsetInsideElementBox(el,offset))||el&&me.elementIsTop(el,!0,offset)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForTarget",description:" "+R.get("target")+' "'+target+'" '+R.get("toAppear")})},setWindowSize:function(width,height,callback){this.scopeProvider.setViewportSize(width,height),callback&&callback.call(this)},getJUnitClass:function(){var browserInfo=this.getBrowserInfo();return(browserInfo=browserInfo.name+browserInfo.version)+":"+this.SUPER()},adjustScope:function(target){if("String"==this.typeOf(target)){var mainParts=target.split("->");if(2===mainParts.length){var frameEl=this.$(this.trimString(mainParts[0]))[0];return frameEl&&frameEl.contentWindow?(this._global=this.global,this.setGlobal(frameEl.contentWindow),!0):!1}}return!1},resetScope:function(){this.setGlobal(this._global||this.global),this._global=null},screenshot:function(options,callback){this.diag("Command: `screenshot` skipped - not running in Standard Package"),this.processCallbackFromTest(callback,["skipped"],this)},screenshotElement:function(target,fileName,callback){this.diag("Command: `screenshot` skipped - not running in Standard Package"),this.processCallbackFromTest(callback,["skipped"],this)},setUrl:function(url,callback,scope){if(!url)throw new Error("Must provide a valid URL");if(this.global.location.href!==url){var baseUrl=this.scopeProvider.sourceURL||this.project.baseUrl,absURl=this.project.absolutizeURL(url,baseUrl);this.waitForPageLoad(callback,scope),this.global.location.href=absURl}else callback.call(scope||this)},setHash:function(hash,callback,scope){this.global.location.hash=hash,callback&&callback(scope||this)},expectAlertMessage:function(message,callback){var me=this,global=this.global,prevAlert=global.alert;global.alert=function(msg){("RegExp"==me.typeOf(message)?message.test(msg):message==msg)?me.pass("Expected alert message has been shown"):me.fail("Wrong alert message has been shown",{assertionName:"expectAlertMessage",got:msg,gotDesc:"Message shown",need:message,needDesc:"Expected message"}),global.alert=prevAlert},global.alert.__EXPECTED_ALERT__=!0,this.processCallbackFromTest(callback,null,this)},setNextConfirmReturnValue:function(value,callback){this.nextConfirmValue=value,this.processCallbackFromTest(callback,null,this)},setNextPromptReturnValue:function(value,callback){this.nextPromptReturnValue=value,this.processCallbackFromTest(callback,null,this)},waitForAnimations:function(callback){callback.call(this)},popupHasStartedLoading:function(popup,initialUrl){return"about:blank"==String(initialUrl).toLowerCase()||"about:blank"!=popup.location.href},switchTo:function(win,callback){var me=this;return this.waitFor({method:function(){for(var i=0;i<me.popups.length;i++)if(!me.popupHasStartedLoading(me.popups[i].popup,me.popups[i].url))return!1;return!0},suppressAssertion:!0,callback:function(){var found;if(win||(Joose.A.each(this.popups,function(handle){if(!handle.popup.closed)return found=handle.popup,!1}),win=found),"String"==this.typeOf(win)&&(win={title:win}),"Object"==this.typeOf(win)){found=null;var regexp=win.title||win.url;"String"==this.typeOf(regexp)&&(regexp=new RegExp("^"+this.escapeRegExp(regexp)+"$")),Joose.A.each(this.popups,function(handle){var popup=handle.popup;if(!popup.closed&&(win.url&&regexp.test(popup.location.href)||win.title&&regexp.test(popup.document&&popup.document.title||"")))return found=popup,!1}),win=found}if(!win||win.self!=win)return this.fail("Can't resolve target win: "+win),void this.processCallbackFromTest(callback,null,this);this.setGlobal(win),this.waitFor({suppressAssertion:!0,method:function(){return win.document&&"complete"==win.document.readyState},callback:callback})}}),this.global},setGlobal:function(newGlobal){this.global=newGlobal,this.simulator.global=newGlobal},switchToMain:function(callback){this.switchTo(this.scopeProvider.scope,callback)},waitForPageLoad:function(callback,scope){var me=this,global=this.global,unloaded=!1,description=Siesta.Resource("Siesta.Test.More").get("pageToLoad"),onUnloadHandler=function(){global.removeEventListener("unload",onUnloadHandler),unloaded=!0};global.addEventListener("unload",onUnloadHandler),this.chain({description:description,waitFor:function(){return unloaded||"complete"!=me.global.document.readyState}},function(next){global.removeEventListener("unload",onUnloadHandler),onUnloadHandler=global=null,next()},{description:description,waitFor:function(){return"complete"==me.global.document.readyState}},{waitFor:50},function(){me.processCallbackFromTest(callback,[me.global],scope||me)})},setTimeout:function(func,delay){(0,this.global.setTimeout)(func,delay)},clearTimeout:function(id){(0,this.global.clearTimeout)(id)},simulateDeactivateWindow:function(callback){this.blurWindow=this.global.open("about:blank"),callback&&callback.call(this)},simulateActivateWindow:function(callback){this.blurWindow&&this.blurWindow.close(),this.global.focus(),this.blurWindow=null,callback&&callback.call(this)},query:function(selector){return this.sizzle(selector)},throwsOkAsync:function(expected,desc,timeout){function done(){if(!doneCalled)return doneCalled=!0,me.endAsync(async),exceptionThrown||me.fail(desc,{assertionName:"throwsOkAsync",annotation:R.get("didntThrow")}),me.isHandlingThrowAsync=!1,me.global.onerror=prevOnError,!0}var R=Siesta.Resource("Siesta.Test.More"),me=this,exceptionThrown=!1,doneCalled=!1,prevOnError=this.global.onerror;this.on("beforetestfinalize",function(){doneCalled||done()},null,{single:!0});var async=this.beginAsync(timeout,done);return this.isHandlingThrowAsync=!0,this.global.onerror=function(msg,url,lineNumber,col,error){exceptionThrown=!0;var errorText=String(error||msg);return"RegExp"==me.typeOf(expected)?errorText.match(expected)?me.pass(desc,{descTpl:R.get("exMatchesRe"),expected:expected}):me.fail(desc,{assertionName:"throwsOkAsync",got:errorText,gotDesc:R.get("exceptionStringifiesTo"),need:expected,needDesc:R.get("needStringMatching")}):-1!=errorText.indexOf(expected)?me.pass(desc,{descTpl:R.get("exContainsSubstring"),expected:expected}):me.fail(desc,{assertionName:"throwsOkAsync",got:errorText,gotDesc:R.get("exceptionStringifiesTo"),need:expected,needDesc:R.get("needStringContaining")}),!0},done},livesOkAsync:function(desc,timeout){function done(){if(!doneCalled)return doneCalled=!0,me.endAsync(async),exceptionThrown||me.pass(desc,{descTpl:R.get("fnDoesntThrow")}),me.isHandlingThrowAsync=!1,me.global.onerror=prevOnError,!0}var R=Siesta.Resource("Siesta.Test.More"),me=this,exceptionThrown=!1,doneCalled=!1,prevOnError=this.global.onerror;this.on("beforetestfinalize",function(){doneCalled||done()},null,{single:!0});var async=this.beginAsync(timeout,done);return this.isHandlingThrowAsync=!0,this.global.onerror=function(msg,url,lineNumber,col,error){exceptionThrown=!0;var errorText=String(error||msg);return me.fail(desc,{assertionName:"livesOk",annotation:R.get("fnThrew")+": "+errorText}),!0},done},onException:function(){if(this.isHandlingThrowAsync)return!0}}}),Class("Siesta.Test.ExtJS",{isa:Siesta.Test.Browser,does:[Siesta.Test.ExtJSCore,Siesta.Test.ExtJS.Component,Siesta.Test.ExtJS.Element,Siesta.Test.ExtJS.FormField,Siesta.Test.ExtJS.Observable,Siesta.Test.ExtJS.Store,Siesta.Test.ExtJS.Grid,Siesta.Test.ExtJS.DataView,Siesta.Test.ExtJS.Ajax],has:{globalExtOverrides:null,extPathRegex1:/(.*ext(?:js)?(?:-\d\.\d+\.\d+)?.*?)\/(?:build\/)?ext(?:-all)?(?:-debug|-dev)?\.js/,extPathRegex2:/(.*ext(?:js)?-\d\.\d+(?:\.\d+)?.*?)\/ext-all(?:-debug|-dev)?\.js/,extPathRegex3:/(.*ext(?:js)?\/gpl\/\d\.\d+(?:\.\d+)?.*?)\/ext-all(?:-debug|-dev)?\.js/},methods:{getExtBundlePath:function(){for(var path,testDescriptor=this.project.getScriptDescriptor(this.url),me=this;testDescriptor&&!path;)testDescriptor.preload&&Joose.A.each(testDescriptor.preload,function(url){if(url.match&&(url.match(me.extPathRegex1)||url.match(me.extPathRegex2)||me.extPathRegex3.exec(url)))return path=url,!1}),testDescriptor=testDescriptor.parent;return path},getExtBundleFolder:function(){for(var folder,testDescriptor=this.project.getScriptDescriptor(this.url),me=this;testDescriptor&&!folder;)testDescriptor.preload&&Joose.A.each(testDescriptor.preload,function(url){var match=me.extPathRegex1.exec(url)||me.extPathRegex2.exec(url)||me.extPathRegex3.exec(url);return match&&(folder=match[1]),!1}),testDescriptor=testDescriptor.parent;return folder},getNumberOfGlobalExtOverrides:function(callback){var globalExtOverrides=this.globalExtOverrides;if(null!=globalExtOverrides)callback&&callback.call(this,globalExtOverrides.length,globalExtOverrides);else{var me=this,Ext=this.getExt(),extjsBundleURL=me.getExtBundlePath();if(!extjsBundleURL)return me.fail(Siesta.Resource("Siesta.Test.ExtJS","bundleUrlNotFound")),void(callback&&callback.call(me,null,null));this.expectGlobal("0");var frame=Ext.core.DomHelper.append(Ext.getBody(),{tag:"iframe",style:"width:1024px;height:768px;position:absolute;left:-10000px;top:-10000px",src:"about:blank"},!1),freshWin=frame.contentWindow;freshWin.document.open(),freshWin.document.write('<!DOCTYPE html><html><head><script type="text/javascript" src="'+extjsBundleURL+'"><\/script></head><body></body></html>'),freshWin.document.close();function resolveObject(hostObj,nameSpace){for(var parts=nameSpace.split("."),p=hostObj,i=0;i<parts.length;i++)p=p[parts[i]];return p}function ignore(name){for(var i=0;i<ignoreRegexp.length;i++)if(ignoreRegexp[i].test(name))return!0;return!1}function getObjectDifferences(cleanObj,dirtyObj,ns){var diff=[];for(var p in dirtyObj)try{if(dirtyObj.hasOwnProperty(p)){var dirtyValue=dirtyObj[p],cleanValue=cleanObj[p];(!cleanObj.hasOwnProperty(p)&&void 0===cleanValue||String(cleanValue)!=String(dirtyValue)&&("function"==typeof dirtyValue||Ext.isPrimitive(dirtyValue)))&&(ignore(ns+"."+p)||diff.push(ns+"."+p))}}catch(e){}return diff}var ignoreRegexp=[/Ext\.data\.Store\.ImplicitModel|collectorThreadId|Ext\.dom\.GarbageCollector\.lastTime/,/Ext.globalEvents.cur/i,/Ext\.dd\.(DragDropManager|DragDropMgr|DDM)\.(currentPoint|offsetX|offsetY)/];me.waitFor(function(){return freshWin.Ext&&freshWin.Ext.isReady},function(){var dirtyWin=me.global,overrides=[];Ext.iterate(Ext.ClassManager.classes,function(item){if(item.match(/^Ext\./)){var freshItem=resolveObject(freshWin,item),dirtyItem=resolveObject(dirtyWin,item);if(freshItem&&void 0!==dirtyItem){var staticDiff=getObjectDifferences(freshItem,dirtyItem,item);if(overrides.push.apply(overrides,staticDiff),dirtyItem.prototype){var prototypeDiff=getObjectDifferences(freshItem.prototype,dirtyItem.prototype,item+".prototype");overrides.push.apply(overrides,prototypeDiff)}}}}),me.globalExtOverrides=overrides,Ext.destroy(frame),callback&&callback.call(me,overrides.length,overrides)})}},assertNoGlobalExtOverrides:function(description,cb){this.getNumberOfGlobalExtOverrides(function(length,overrides){var R=Siesta.Resource("Siesta.Test.ExtJS");null==length?this.fail(R.get("assertNoGlobalExtOverridesInvalid")):(length?this.fail(description,{assertionName:"assertNoGlobalExtOverrides",descTpl:R.get("assertNoGlobalExtOverridesPassTpl"),got:length,gotDesc:R.get("assertNoGlobalExtOverridesGotDesc"),annotation:R.get("foundOverridesFor")+": `"+overrides.join("`, `")+"`"}):this.pass(description,{descTpl:R.get("assertNoGlobalExtOverridesPassTpl")}),cb&&cb.call(this))})},assertMaxNumberOfGlobalExtOverrides:function(maxNumber,description,cb){var R=Siesta.Resource("Siesta.Test.ExtJS");this.getNumberOfGlobalExtOverrides(function(length,overrides){null==length?this.fail(R.get("extOverridesInvalid")):(maxNumber<length?this.fail(description,{assertionName:"assertNoGlobalExtOverrides",descTpl:R.get("foundLessOrEqualThan")+" "+maxNumber+" "+R.get("globalOverrides"),got:length,gotDesc:R.get("nbrOverridesFound"),annotation:R.get("foundOverridesFor")+": `"+overrides.join("`, `")+"`"}):this.pass(description,{descTpl:R.get("foundLessOrEqualThan")+" "+maxNumber+" "+R.get("globalOverrides"),annotation:R.get("nbrOverridesFound")+": "+length}),cb&&cb.call(this))})},getTotalLayoutCounter:function(){var count=0;return this.Ext().each(this.cq("container"),function(c){count+=c.layoutCounter}),count},assertNoLayoutTriggered:function(fn,scope,description){var countBefore=this.getTotalLayoutCounter();fn.call(scope||this),this.is(this.getTotalLayoutCounter(),countBefore,description)},areAnimationsRunning:function(){var Ext=this.Ext();return Ext&&Ext.fx&&Ext.fx.Manager&&Ext.fx.Manager.items&&0<Ext.fx.Manager.items.getCount()}}}),Class("Siesta.Test.SenchaTouch",{isa:Siesta.Test.Browser,does:[Siesta.Test.ExtJSCore,Siesta.Test.ExtJS.Component,Siesta.Test.ExtJS.Element,Siesta.Test.ExtJS.Observable,Siesta.Test.ExtJS.Store,Siesta.Test.ExtJS.Ajax,Siesta.Test.ExtJS.FormField],has:{performSetup:!0,isSTSetupDone:!1,moveCursorBetweenPoints:!1},override:{isReady:function(){var result=this.SUPERARG(arguments),R=Siesta.Resource("Siesta.Test.SenchaTouch");return result.ready?this.parent||!this.performSetup||this.isSTSetupDone?{ready:!0}:{ready:!1,reason:R.get("STSetupFailed")}:result},doStart:function(){var me=this,Ext=this.getExt();Ext&&this.performSetup&&!this.parent&&Ext.setup({onReady:function(){me.isSTSetupDone=!0}}),this.SUPERARG(arguments)}},methods:{initialize:function(){this.parent||(this.simulator=null),this.SUPERARG(arguments)},getTouchBundlePath:function(){for(var path,testDescriptor=this.project.getScriptDescriptor(this.url);testDescriptor&&!path;)testDescriptor.preload&&Joose.A.each(testDescriptor.preload,function(url){if(url.match&&url.match(/(.*sencha-touch-\d\.\d+\.\d+.*?)\/sencha-touch(.*)\.js/))return path=url,!1}),testDescriptor=testDescriptor.parent;return path},getTouchBundleFolder:function(){for(var folder,testDescriptor=this.project.getScriptDescriptor(this.url);testDescriptor&&!folder;)testDescriptor.preload&&Joose.A.each(testDescriptor.preload,function(url){var match=/(.*sencha-touch-\d\.\d+\.\d+.*?)\/sencha-touch(.*)\.js/.exec(url);match&&(folder=match[1])}),testDescriptor=testDescriptor.parent;return folder},getExtBundleFolder:function(){var folder;return this.project.mainPreset.eachResource(function(resource){var desc=resource.asDescriptor(),match=/(.*sencha-touch-\d\.\d+\.\d+.*?)\/sencha-touch-all(?:-debug)?\.js/.exec(desc.url);match&&(folder=match[1])}),folder},moveFingerTo:function(target,callback,scope,offset){this.moveCursorTo.apply(this,arguments)},moveFingerBy:function(delta,callback,scope){if(!delta)throw Siesta.Resource("Siesta.Test.SenchaTouch").get("moveFingerByInvalidInput");this.moveCursorBy.apply(this,arguments)},scrollUntil:function(target,direction,checkerFn,callback,scope){var me=this,startDate=new Date,dir=direction,R=Siesta.Resource("Siesta.Test.SenchaTouch");switch(dir){case"u":case"up":direction="down";break;case"d":case"down":direction="up";break;case"l":case"left":direction="right";break;case"r":case"right":direction="left";break;default:throw R.get("invalidSwipeDir")+": "+direction}var inner=function(){checkerFn.call(scope||me,target)?me.processCallbackFromTest(callback,null,scope||me):me.swipe(target,direction,function(){if(new Date-startDate<this.waitForTimeout){var as=me.beginAsync();setTimeout(function(){me.endAsync(as),inner()},1e3)}else me.fail(R.get("scrollUntilFailed"))})};inner()},scrollUntilElementVisible:function(scrollable,direction,actionTarget,callback,scope){var me=this;if(actionTarget&&scrollable)this.scrollUntil(scrollable,direction,function(){var element=me.normalizeElement(actionTarget,!0);return me.elementIsInView(element)},callback,scope);else{var R=Siesta.Resource("Siesta.Test.SenchaTouch");this.fail(R.get("scrollUntilElementVisibleInvalid"))}},waitForScrollerPosition:function(scroller,pos,callback,scope,timeout){return this.waitFor({method:function(){return!("x"in pos&&pos.x!==scroller.position.x||"y"in pos&&pos.y!==scroller.position.y)},callback:callback,scope:scope,timeout:timeout,assertionName:"waitForScrollerPosition",description:" "+Siesta.Resource("Siesta.Test.SenchaTouch","scrollerReachPos")+" "+Siesta.Util.Serializer.stringify(pos)})},areAnimationsRunning:function(){var Ext=this.Ext();return Ext&&Ext.Anim&&!Joose.O.isEmpty(Ext.Anim.running)}}}),Class("Siesta.Test.jQuery",{isa:Siesta.Test.Browser,methods:{initialize:function(){this.expectGlobals("$","jQuery"),this.SUPER()},get$:function(){return this.global.$},normalizeElement:function(el){return el.jquery?el.get(0):this.SUPERARG(arguments)}}}),Class("Siesta.Content.Manager.Browser",{isa:Siesta.Content.Manager,has:{baseHost:function(){return window.location.host},baseProtocol:function(){return window.location.protocol}},methods:{load:function(url,onsuccess,onerror){var match=/^((?:https?|file):)?\/\/([^/]*)/i.exec(url);if(match&&(match[1]&&match[1]!=this.baseProtocol||match[2]!=this.baseHost))onerror("cross-domain access");else{var req=new JooseX.SimpleRequest;try{req.getText(url,!0,function(success,text){success?onsuccess(text):onerror(this+" not found")})}catch(e){onerror(e)}}}}}),Class("Siesta.Content.Manager.Browser.ExtJSCore",{isa:Siesta.Content.Manager.Browser}),Class("Siesta.Project.Browser",{isa:Siesta.Project,has:{id:null,testClass:Siesta.Test.Browser,viewportClass:"Siesta.Project.Browser.UI.Viewport",viewport:null,autoRun:!1,viewDOM:!1,scaleToFit:!0,scaleToFitMode:"full",domContainerRegion:"east",showCursor:!0,showTestDurationColumn:!1,speedRun:!0,turboMode:!1,mouseMovePrecision:1,failOnResourceLoadError:!1,failOnPromiseRejection:!0,contentManagerClass:Siesta.Content.Manager.Browser,scopeProvider:"Scope.Provider.IFrame",disableCaching:!1,baseUrl:window.location.href.replace(/(\?|#).*$/,"").replace(/\/[^/]*$/,"/"),baseHost:window.location.host,baseProtocol:window.location.protocol,forceDOMVisible:bowser.msie||bowser.msedge,observerMode:!1,runInPopup:!1,pageUrl:null,useStrictMode:!0,innerHtmlHead:null,innerHtmlBody:null,runCore:"parallel",forcedRunCore:null,simulateEventsWith:{is:"rw",init:"dispatchEvent"},testOfForcedIFrame:null,autoScrollElementsIntoView:!0,enableUnreachableClickWarning:!0,maintainViewportSize:!0,viewportWidth:1024,viewportHeight:768,recorderClass:function(){return Siesta.Recorder&&Siesta.Recorder.Recorder},recorderConfig:null,needUI:!0,stateful:!0,uiMask:null,uiMaskActive:!1,hostPageUrlStopsInheriting:function(){return this.buildHostPageUrlStopsInheriting()},rerunHotKey:"E",observerModeHotKey:"O",restartOnBlur:!1,focusChecker:{lazy:function(){var el=document.createElement("input");return el.setAttribute("style","position : absolute; left : -1000px; top : -1000px"),el.type="text",document.body.appendChild(el),el}},supportEcmaModules:function(){return"noModule"in document.createElement("script")}},after:{onBeforeScopePreload:function(scopeProvider,url){this.viewport&&this.viewport.onBeforeScopePreload(scopeProvider,url)},onTestSuiteStart:function(descriptors,contentManager,launchState){this.viewport&&this.viewport.onTestSuiteStart(descriptors,contentManager)},onTestSuiteEnd:function(descriptors,contentManager){this.viewport&&this.viewport.onTestSuiteEnd(descriptors,contentManager),delete this.testOfForcedIFrame,this.uiMaskActive&&this.hideUiMask()},onTestStart:function(test){this.viewport&&this.viewport.onTestStart(test),test.hasForcedIframe()?(this.testOfForcedIFrame&&this.hideForcedIFrame(this.testOfForcedIFrame),this.showForcedIFrame(test),this.testOfForcedIFrame=test):this.uiMaskActive&&this.hideUiMask()},onTestUpdate:function(test,result,parentResult){this.viewport&&this.viewport.onTestUpdate(test,result,parentResult),result instanceof Siesta.Result.Diagnostic&&result.isWarning&&this.needUI&&"undefined"!=typeof console&&console.warn&&console.warn(result+"")},onTestEnd:function(test){test.hasForcedIframe()&&this.hideForcedIFrame(test),test==this.testOfForcedIFrame&&(this.testOfForcedIFrame=null),this.viewport&&this.viewport.onTestEnd(test);var wrapper=test.scopeProvider&&test.scopeProvider.wrapper;wrapper&&(wrapper.scrollLeft=wrapper.scrollTop=0),document.body.scrollLeft=document.body.scrollTop=0},onTestFail:function(test,exception,stack){this.viewport&&this.viewport.onTestFail(test,exception,stack)}},methods:{setObserverMode:function(value){this.forcedRunCore=value?"sequential":null,this.observerMode=value},buildHostPageUrlStopsInheriting:function(){return{preload:[],innerHtmlHead:null,innerHtmlBody:null}},buildConfigSynonyms:function(){return Joose.O.extend(this.SUPER(),{pageUrl:"hostPageUrl",enablePageRedirect:"separateContext"})},createViewport:function(config){return Ext.create(this.viewportClass,config)},configure:function(){this.SUPERARG(arguments),this.id=this.title||window.location.href},start:function(){bowser.opera&&(this.autoCheckGlobals=!1),bowser.msie&&(this.hasOwnProperty("runCore")||(this.runCore="sequential")),this.SUPERARG(arguments)},populateCleanScopeGlobals:function(scopeProvider,callback){if(this.disableGlobalsCheck||bowser.msie&&bowser.version<9)return this.disableGlobalsCheck=!0,void callback();this.SUPER("Scope.Provider.IFrame",callback)},onUnload:function(){Joose.O.each(this.scopesByURL,function(scopeProvider,url){scopeProvider.cleanup()})},launch:function(){Siesta.Project.Browser.FeatureSupport(),this.SUPERARG(arguments)},setup:function(callback){var me=this,SUPER=this.SUPER;window.onunload=function(){me.onUnload()},window.parent||window.focus(),this.title&&(document.title=this.title),$(function(){var needUI=!(!me.hasOwnProperty("needUI")&&me.isAutomated)&&me.needUI;void 0!==Ext&&needUI?(me.autoLaunchTests=!1,Ext.onReady(function(){SUPER.call(me,function(){var filter=me.getQueryParam("filter");me.viewport=me.createViewport({filter:filter?decodeURIComponent(filter):null,autoLaunch:me.getQueryParam("autolaunch"),title:me.title,project:me}),callback&&callback()})})):SUPER.call(me,callback)})},getDescriptorConfig:function(descriptor,configName,doNotLookAtRoot){if(!(configName in this.hostPageUrlStopsInheriting))return this.SUPERARG(arguments);var defaultValue=this.hostPageUrlStopsInheriting[configName],pageUrlConfigFound=!1,isInheriting=!1;do{if(pageUrlConfigFound=pageUrlConfigFound||this.descriptorHasOwnValueFor(descriptor,"pageUrl"),this.descriptorHasOwnValueFor(descriptor,configName)){var value=this.getConfigValueFromDescriptor(descriptor,configName);if("inherit"!=value)return value;isInheriting=!0}if(pageUrlConfigFound&&!isInheriting)return defaultValue;descriptor=descriptor.parent}while(descriptor&&descriptor!=this);return doNotLookAtRoot?void 0:this.getConfigValueFromDescriptor(this,configName)},normalizeScopeProvider:function(desc){this.SUPERARG(arguments),this.getDescriptorConfig(desc,"runInPopup")&&(desc.scopeProvider="Scope.Provider.Window")},getScopeProviderConfigFor:function(desc,launchId){var me=this,config=this.SUPERARG(arguments);config.cleanupDelay=0,config.name=desc.title||desc.url.replace(/(.*\/)?(.*)/,"$2"),config.cls="tr-iframe",config.performWrap=!0;var wrapper=document.createElement("div");return wrapper.className="tr-iframe-wrapper",wrapper.innerHTML="<div class='tr-close fa fa-close'>&nbsp;</div><div class='tr-iframe-wrapper-scroll-canvas'><div class='tr-iframe-wrapper-inner'></div></div>",wrapper.childNodes[0].onclick=function(){var test=me.getTestByURL(desc.url);test?(me.hideForcedIFrame(test),me.viewport&&me.viewport.onManualCloseOfForcedIframe(test)):(this.parentElement.style.left="-10000px",this.parentElement.style.top="-10000px")},config.wrapper=wrapper,config.iframeParentEl=wrapper.childNodes[1].childNodes[0],config.sourceURL=config.sourceURL||this.getDescriptorConfig(desc,"pageUrl"),config.minViewportSize=config.minViewportSize||{width:this.getDescriptorConfig(desc,"viewportWidth"),height:this.getDescriptorConfig(desc,"viewportHeight")},config.innerHtmlHead=this.getDescriptorConfig(desc,"innerHtmlHead"),config.innerHtmlBody=this.getDescriptorConfig(desc,"innerHtmlBody"),config.failOnResourceLoadError=this.getDescriptorConfig(desc,"failOnResourceLoadError"),config.failOnPromiseRejection=this.getDescriptorConfig(desc,"failOnPromiseRejection"),config.hasOwnProperty("useStrictMode")||(config.useStrictMode=this.getDescriptorConfig(desc,"useStrictMode")),config},getNewTestConfiguration:function(desc,scopeProvider,contentManager,launchState){var me=this,config=this.SUPERARG(arguments);return config.simulatorConfig=this.getSimulatorConfigForNewTest(desc),Joose.A.each(["forceDOMVisible","autoScrollElementsIntoView","restartOnBlur"],function(name){config[name]=me.getDescriptorConfig(desc,name)}),this.observerMode&&(config.forceDOMVisible=!0),config.browser=config.bowser=bowser,config},getSimulatorConfigForNewTest:function(desc){var me=this,config={};return this.hasOwnProperty("simulateEventsWith")&&(config.simulateEventsWith=this.simulateEventsWith),Joose.A.each(["actionDelay","afterActionDelay","dragDelay","pathBatchSize","mouseDragPrecision","mouseMovePrecision","enableUnreachableClickWarning"],function(name){null!=me.getDescriptorConfig(desc,name)&&(config[name]=me.getDescriptorConfig(desc,name))}),this.getDescriptorConfig(desc,"turboMode")?(config.speedRun=!1,Joose.O.extend(config,Siesta.Test.Simulator.speedPresets.turboMode)):this.getDescriptorConfig(desc,"speedRun")&&Joose.O.extend(config,Siesta.Test.Simulator.speedPresets.speedRun),config},testMustRunSequential:function(descriptor){return this.getDescriptorConfig(descriptor,"forceDOMVisible")},runCoreGeneral:function(descriptors,contentManager,launchState,callback){var me=this,sorted=this.sortDescriptors(descriptors,this.forcedRunCore,!1);me.runCoreSharedContext(sorted.sharedContextGroups,contentManager,launchState,function(){me.runCoreParallel(sorted.canRunParallel,contentManager,launchState,function(){me.runCoreSequential(sorted.mustRunSequential,contentManager,launchState,callback)})})},runCoreSharedContext:function(sharedContextGroups,contentManager,launchState,callback){var me=this,processDescriptor=function(group,isFirst,scopeProvider,firstDesc,testHolder){var descriptors=group.items;if(descriptors.length&&!launchState.needToStop){var desc=descriptors.shift(),noCleanup=0<descriptors.length;isFirst?me.processURL(desc,desc.index,contentManager,launchState,function(testHolder){processDescriptor(group,!1,me.scopesByURL[desc.url],desc,testHolder),testHolder=null},noCleanup,group):me.processUrlShared(desc,desc.index,contentManager,launchState,function(){processDescriptor(group,!1,scopeProvider,firstDesc,testHolder)},noCleanup,group,scopeProvider,firstDesc,testHolder)}else processGroup(sharedContextGroups)},processGroup=function(sharedContextGroups){if(sharedContextGroups.length&&!launchState.needToStop){var group=sharedContextGroups.shift();processDescriptor(group,!0)}else callback()};processGroup(sharedContextGroups)},processUrlShared:function(desc,index,contentManager,launchState,callback,noCleanup,sharedSandboxState,scopeProvider,firstDesc,testHolder){var me=this;desc.url;if(desc.isMissing)callback();else{var preloadErrors=[];this.getDescriptorConfig(desc,"transparentEx");delete scopeProvider.scope.describe.called,desc.testCode||this.cachePreload&&contentManager.hasContentOf(desc.url)?scopeProvider.runCode(desc.testCode||contentManager.getContentOf(desc.url),cont):scopeProvider.runScript(this.resolveURL(desc.url,scopeProvider,desc),cont)}function cont(){if(scopeProvider.scope){var testClass=me.getDescriptorConfig(desc,"testClass");"String"==me.typeOf(testClass)&&(testClass=Joose.S.strToClass(testClass));var testConfig=me.getNewTestConfiguration(desc,scopeProvider,contentManager,launchState,sharedSandboxState);(testHolder.test=new testClass(testConfig)).earlySetup(function(){cont2()},function(errorMessage){preloadErrors.push({isException:!1,message:errorMessage}),cont2()})}else callback();function cont2(){me.launchTest({testHolder:testHolder,desc:desc,scopeProvider:scopeProvider,contentManager:contentManager,launchState:launchState,preloadErrors:preloadErrors,startTestAnchor:scopeProvider.scope.StartTest,noCleanup:noCleanup,cleanupUrl:firstDesc.url,reusingSandbox:!0},callback)}}},normalizeURL:function(url){return/^jsan:/.test(url)&&(url="/jsan/"+url.replace(/^jsan:/,"").replace(/\./g,"/")+".js"),/\.js$/.test(url)||/\//.test(url)||/\.css(\?.*)?$/i.test(url)||(url="../lib/"+url.replace(/\./g,"/")+".js"),url},normalizeDescriptor:function(desc,parent,index,level){return!(desc=this.SUPERARG(arguments)).group&&desc.jasmine&&(desc.pageUrl=desc.url,desc.testCode=this.getJasmineTestCode(),desc.preload=[],desc.sandbox=!0),desc},resolveURL:function(url,scopeProvider,desc){return scopeProvider&&scopeProvider.sourceURL&&(url=this.absolutizeURL(url)),this.disableCaching&&(/\?./.test(url)?url+="&disableCaching="+(new Date).getTime():/\?$/.test(url)||(url+="?disableCaching="+(new Date).getTime())),url},absolutizeURL:function(url,baseUrl){if(/^((https?|file):)?\/\//.test(url))return url;if(/^\//.test(url))return this.baseProtocol+"//"+this.baseHost+url;baseUrl=(baseUrl=baseUrl||this.baseUrl).replace(/\?.*$/,"").replace(/\/[^/]*$/,"/");var absBaseUrl=this.absolutizeURL(baseUrl,this.baseUrl);return(absBaseUrl=absBaseUrl.replace(/\/?$/,"/"))+url},getUiMask:function(){if(this.uiMask)return this.uiMask;var uiMask=this.uiMask=document.createElement("div");return uiMask.className="tr-ui-mask",uiMask.style.display="none",document.body.appendChild(uiMask),uiMask},showUiMask:function(){this.getUiMask().style.display="block",this.uiMaskActive=!0},hideUiMask:function(){this.getUiMask().style.display="none",this.uiMaskActive=!1},showForcedIFrame:function(test){$.rebindWindowContext(window),test.isDOMForced=!0;var wrapper=test.scopeProvider.wrapper;$(wrapper).addClass("tr-iframe-forced"),$(wrapper).removeClass("tr-iframe-hidden"),$(wrapper).center(),wrapper.style.top=this.roundNumericStyleValue(wrapper.style.top),wrapper.style.left=this.roundNumericStyleValue(wrapper.style.left),test.fireEvent("testframeshow");var rect=wrapper.getBoundingClientRect();document.elementFromPoint(rect.left,rect.top)},roundNumericStyleValue:function(styleStr){var match=/(.*?)([^\d\.-]*)$/.exec(styleStr),rounded=Math.round(Number(match[1]));return String(rounded)+match[2]},hideForcedIFrame:function(test){$.rebindWindowContext(window),test.isDOMForced=!1,test.forceDOMVisible=!1;var wrapper=test.scopeProvider.wrapper;$(wrapper).removeClass("tr-iframe-forced"),$(wrapper).addClass("tr-iframe-hidden"),test.fireEvent("testframehide")},showForcedIFrameScreenshot:function(test){this.showUiMask(),$.rebindWindowContext(window);var wrapper=test.scopeProvider.wrapper;$(wrapper).addClass("tr-iframe-forced-screenshot"),$(wrapper).removeClass("tr-iframe-forced"),$(wrapper).removeClass("tr-iframe-hidden")},hideForcedIFrameScreenshot:function(test){this.hideUiMask(),$.rebindWindowContext(window);var wrapper=test.scopeProvider.wrapper;$(wrapper).removeClass("tr-iframe-forced-screenshot"),test.isDOMForced&&($(wrapper).addClass("tr-iframe-forced"),$(wrapper).center())},stopCurrentLaunch:function(sourceTest){if(!0===this.SUPER(sourceTest))return this.viewport&&this.viewport.onTestSuiteStop(sourceTest),!0},getQueryParam:function(paramName){return this.my.getQueryParam(paramName,!0)},getJasmineTestCode:function(){return";("+function(){StartTest(function(t){t.expectGlobals("getJasmineRequireObj","jasmineRequire","jasmine","xdescribe","describe","xdescribe","fdescribe","it","xit","fit","spyOn","fail","jsApiReporter","beforeEach","afterEach","beforeAll","afterAll","expect","pending"),window.jasmine?jasmine.SiestaReporter?jasmine.SiestaReporter.importResults(t):t.fail(t.resource("Siesta.Project.Browser","noJasmineSiestaReporter")):t.fail(t.resource("Siesta.Project.Browser","noJasmine"))})}.toString()+")();"},isStandardPackage:function(){return this.my.isStandardPackage(!0)},browserWindowHasFocus:function(){window.focus();var el=this.getFocusChecker();return el.focus({preventScroll:!0}),$.rebindWindowContext(window),$(el).is(":focus")},getSelectedTest:function(){var selected=this.viewport.slots.filesTree.getSelectionModel().getSelection()[0];if(selected)return this.getTestByURL(selected.get("url"))}},my:{methods:{isStandardPackage:function(calledFromInstance){return calledFromInstance||this.staticDeprecationWarning("isStandardPackage"),Boolean(Siesta.Project.Browser.Automation)},getQueryParam:function(paramName,calledFromInstance){calledFromInstance||this.staticDeprecationWarning("getQueryParam");var match=new RegExp("(?:\\?|&)"+paramName+"=(.*?)(?:\\?|&|$)","i").exec(window.location.search);return match?match[1]:null}}}}),Class("Siesta.Harness.Browser",{isa:Siesta.Project.Browser}),Singleton("Siesta.Project.Browser.FeatureSupport",{does:[Siesta.Util.Role.CanCalculatePageScroll],has:{isConfigured:!1,supports:Joose.I.Object,simulator:{lazy:"this.buildWebSimulator"},tests:{init:[{id:"TouchEvents",fn:function(){return this.isEventSupported("touchend",window)}},{id:"PointerEvents",fn:function(){return Boolean(window.PointerEvent)}},{id:"MSPointerEvents",fn:function(){return Boolean(window.MSPointerEvent)}},{id:"PointerEventsGeneric",fn:function(){return Boolean(window.PointerEvent||window.MSPointerEvent)}},{id:"mouseEnterLeave",fn:function(){var el=document.createElement("div");return"onmouseenter"in el&&"onmouseleave"in el}},{id:"enterOnAnchorTriggersClick",fn:function(){var sim=this.getSimulator(),E=Siesta.Test.UserAgent.KeyCodes().keys.ENTER,result=!1,anchor=$('<a href="foo" style="display:none">test me</a>');return $("body").append(anchor),anchor.focus({preventScroll:!0}),anchor.click(function(e){return!(result=!0)}),sim.simulateEvent(anchor,"keypress",{keyCode:E,charCode:0}),anchor.remove(),result}},{id:"canSimulateKeyCharacters",fn:function(){var sim=this.getSimulator(),input=$('<input class="siesta-hidden" type="text" />'),A=Siesta.Test.UserAgent.KeyCodes().keys.A;$("body").append(input),input.focus({preventScroll:!0}),sim.simulateEvent(input,"keypress",{keyCode:A,charCode:A}),sim.simulateEvent(input,"textInput",{text:"A"});var result="A"===input.val();return input.remove(),result}},{id:"canSimulateBackspace",fn:function(){var sim=this.getSimulator(),input=$('<input class="siesta-hidden" type="text" />'),BS=Siesta.Test.UserAgent.KeyCodes().keys.BACKSPACE,A=Siesta.Test.UserAgent.KeyCodes().keys.A;$("body").append(input),input.focus({preventScroll:!0}),sim.simulateEvent(input,"keypress",{keyCode:A,charCode:A}),sim.simulateEvent(input,"keypress",{keyCode:A,charCode:A}),sim.simulateEvent(input,"keypress",{keyCode:BS,charCode:BS});var result="A"===input.val();return input.remove(),result}},{id:"enterSubmitsForm",fn:function(){var sim=this.getSimulator(),E=Siesta.Test.UserAgent.KeyCodes().keys.ENTER,result=!1,form=$('<form method="post"><input type="text"/></form>'),input=$(form).find("input");return $("body").append(form),form[0].onsubmit=function(e){return!(result=!0)},input.focus({preventScroll:!0}),sim.simulateEvent(input,"keypress",{keyCode:E,charCode:0}),form.remove(),result}},{id:"imageWithIdCreatesGlobalEnumerable",fn:function(){var img=$('<img id="test_img_id"/>');$("body").append(img);var hasImgId=!1;for(var i in window)"test_img_id"==i&&(hasImgId=!0);return img.remove(),hasImgId}},{id:"inputFiresChangeAfterLosingFocus",fn:function(){var sim=this.getSimulator(),input=document.createElement("input"),result=!1,A=Siesta.Test.UserAgent.KeyCodes().keys.A;return input.className="siesta-hidden",document.body.appendChild(input),input.addEventListener("change",function(ev){result=ev.isTrusted}),input.focus({preventScroll:!0}),sim.simulateEvent(input,"keydown",{keyCode:A,charCode:A}),sim.simulateEvent(input,"keypress",{keyCode:A,charCode:A}),sim.simulateEvent(input,"keyup",{keyCode:A,charCode:A}),sim.simulateEvent(input,"textInput",{text:"A"}),input.blur(),document.body.removeChild(input),result}}]}},methods:{buildWebSimulator:function(){return new Siesta.Test.Simulator({global:window,test:{normalizeElement:function(a){return a[0]||a}}})},configure:function(){this.isConfigured||(this.isConfigured=!0,this.maintainScrollPositionDuring(function(){for(var i=0;i<this.tests.length;i++){var test=this.tests[i],testId=test.id,detectorFn=test.fn;try{this.supports[testId]=detectorFn.call(this)}catch(e){this.supports[testId]=!1}}}))},isEventSupported:function(eventName,element){var isSupported;return!!eventName&&(element&&"string"!=typeof element||(element=document.createElement(element||"div")),(isSupported=(eventName="on"+eventName)in element)||(element.setAttribute||(element=document.createElement("div")),element.setAttribute(eventName,""),isSupported="function"==typeof element[eventName],void 0!==element[eventName]&&(element[eventName]=void 0),element.removeAttribute(eventName)),isSupported)}}}),Role("Siesta.Project.Browser.ExtJSCore",{has:{loaderPath:null,requires:null,waitForExtComponentQueryReady:!0,failKnownBugIn:!1,recorderClass:function(){return Siesta.Recorder.ExtJS}},override:{getNewTestConfiguration:function(desc,scopeProvider,contentManager,launchState){var config=this.SUPERARG(arguments);return config.loaderPath=this.getDescriptorConfig(desc,"loaderPath"),config.requires=this.getDescriptorConfig(desc,"requires"),config.waitForExtComponentQueryReady=this.getDescriptorConfig(desc,"waitForExtComponentQueryReady"),config},buildSandboxHashStructure:function(){var structure=this.SUPERARG(arguments);return structure.push("loaderPath","requires"),structure},buildHostPageUrlStopsInheriting:function(){var res=this.SUPER();return res.loaderPath=!0,res}},methods:{createViewport:function(config){return Ext.create("Siesta.Project.Browser.UI.Viewport",config)},generateLoaderPathHook:function(){return function(StartTest,Ext,loaderPath){loaderPath&&!StartTest.loaderPathHookInstalled&&Ext&&Ext.Loader&&Ext.Loader.setPath&&(StartTest.loaderPathHookInstalled=!0,Ext.Loader.setPath(loaderPath))}},getLoaderPathHook:function(){var hook=function(installationHook){var parentWindow=window.opener||window.parent,project=parentWindow.Siesta.my.activeHarness;eval("("+installationHook+")")(StartTest,Ext,project.getDescriptorConfig(project.getScriptDescriptor(StartTest.id),"loaderPath"))};return";("+hook.toString()+")("+JSON.stringify(this.generateLoaderPathHook().toString())+")"}}}),Class("Siesta.Project.Browser.ExtJS",{isa:Siesta.Project.Browser,does:[Siesta.Project.Browser.ExtJSCore],has:{testClass:Siesta.Test.ExtJS,waitForExtReady:!0,waitForAppReady:!1,extVersion:null,failOnMultipleComponentMatches:!1,extVersionRegExp:/ext(?:js)?-(\d\.\d+\.\d+.*?)\//,contentManagerClass:Siesta.Content.Manager.Browser.ExtJSCore,innerHtmlHead:'<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">'},methods:{setup:function(callback){Function.prototype.$extIsFunction=!0,this.SUPER(function(){callback()})},getNewTestConfiguration:function(desc,scopeProvider,contentManager,launchState){var config=this.SUPERARG(arguments);return config.waitForExtReady=this.getDescriptorConfig(desc,"waitForExtReady"),config.waitForAppReady=this.getDescriptorConfig(desc,"waitForAppReady"),config},findExtVersion:function(){var found,me=this;return this.mainPreset.eachResource(function(resource){var match=me.extVersionRegExp.exec(resource.url);if(match)return found=match[1],!1}),found}}}),Class("Siesta.Harness.Browser.ExtJS",{isa:Siesta.Project.Browser.ExtJS}),Class("Siesta.Project.Browser.SenchaTouch",{isa:Siesta.Project.Browser,does:[Siesta.Project.Browser.ExtJSCore],has:{testClass:Siesta.Test.SenchaTouch,transparentEx:!0,keepNLastResults:0,performSetup:!0,forcedRunCore:"sequential",isRunningOnMobile:!0,contentManagerClass:Siesta.Content.Manager.Browser.ExtJSCore},methods:{setup:function(){this.isRunningOnMobile=void 0!==Ext&&Ext.getVersion&&Ext.getVersion("touch"),this.isRunningOnMobile||(this.keepNLastResults=2),this.SUPERARG(arguments)},getNewTestConfiguration:function(desc,scopeProvider,contentManager,launchState){var config=this.SUPERARG(arguments),pageUrl=this.getDescriptorConfig(desc,"pageUrl");return!desc.hasOwnProperty("performSetup")&&pageUrl?config.performSetup=!1:config.performSetup=this.getDescriptorConfig(desc,"performSetup"),config}}}),Class("Siesta.Harness.Browser.SenchaTouch",{isa:Siesta.Project.Browser.SenchaTouch}),Class("Siesta.Project.Browser.UI.MouseVisualizer",{has:{cursorEl:null,currentContainer:{required:!0},clickEvents:function(){return{click:null,touchend:null,contextmenu:null}},mouseDownEvents:function(){return{touchstart:null,mousedown:null}},mouseUpEvents:function(){return{touchend:null,mouseup:null}}},methods:{initialize:function(config){this.onEventSimulated=this.onEventSimulated.bind(this)},getCursorEl:function(){if(this.cursorEl)return this.cursorEl;var currentContainer=this.currentContainer;if(!currentContainer)throw"Need container for cursor";var el=document.createElement("div");return el.className="ghost-cursor fa fa-mouse-pointer",this.cursorEl=currentContainer.appendChild(el)},destroy:function(){var cursorEl=this.cursorEl;cursorEl&&(cursorEl.parentElement.removeChild(cursorEl),this.cursorEl=null),this.currentContainer=null},onEventSimulated:function(event,point){"number"==typeof event.clientX&&this.updatePointer(event.type,point)},updatePointer:function(eventType,point){var x=point[0],y=point[1];this.updateGhostCursor(x,y),eventType in this.clickEvents?this.showClickIndicator(eventType,x,y):eventType in this.mouseDownEvents&&this.getCursorEl().classList.add("ghost-cursor-press"),(eventType in this.mouseUpEvents||eventType in this.clickEvents)&&this.getCursorEl().classList.remove("ghost-cursor-press")},showClickIndicator:function(type,x,y){var clickEl=document.createElement("div");clickEl.className="ghost-cursor-click-indicator ",clickEl.style.setProperty("left",x+"px"),clickEl.style.setProperty("top",y+"px"),clickEl.addEventListener("animationend",this.afterAnimation),clickEl.addEventListener("webkitAnimationEnd",this.afterAnimation),this.currentContainer.appendChild(clickEl)},afterAnimation:function(){this.parentElement&&this.parentElement.removeChild(this)},updateGhostCursor:function(x,y){var cursorEl=this.getCursorEl(),translateStyle=bowser.opera?"translate("+x+"px,"+y+"px)":"translate3d("+x+"px, "+y+"px, 0)";cursorEl.style.setProperty("-webkit-transform",translateStyle),cursorEl.style.setProperty("transform",translateStyle)}}}),"undefined"!=typeof module&&(module.exports=Siesta),eval(function(p,c,k,e,d){if(e=function(c){return(c<62?"":e(parseInt(c/62)))+(35<(c%=62)?String.fromCharCode(c+29):c.toString(36))},!"".replace(/^/,String)){for(;c--;)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}],e=function(){return"\\w+"},c=1}for(;c--;)k[c]&&(p=p.replace(new RegExp("\\b"+e(c)+"\\b","g"),k[c]));return p}('K M;I(M)1S 2U("2a\'t 4k M 4K 2g 3l 4G 4H");(6(){6 r(f,e){I(!M.1R(f))1S 3m("3s 15 4R");K a=f.1w;f=M(f.1m,t(f)+(e||""));I(a)f.1w={1m:a.1m,19:a.19?a.19.1a(0):N};H f}6 t(f){H(f.1J?"g":"")+(f.4s?"i":"")+(f.4p?"m":"")+(f.4v?"x":"")+(f.3n?"y":"")}6 B(f,e,a,b){K c=u.L,d,h,g;v=R;5K{O(;c--;){g=u[c];I(a&g.3r&&(!g.2p||g.2p.W(b))){g.2q.12=e;I((h=g.2q.X(f))&&h.P===e){d={3k:g.2b.W(b,h,a),1C:h};1N}}}}5v(i){1S i}5q{v=11}H d}6 p(f,e,a){I(3b.Z.1i)H f.1i(e,a);O(a=a||0;a<f.L;a++)I(f[a]===e)H a;H-1}M=6(f,e){K a=[],b=M.1B,c=0,d,h;I(M.1R(f)){I(e!==1d)1S 3m("2a\'t 5r 5I 5F 5B 5C 15 5E 5p");H r(f)}I(v)1S 2U("2a\'t W 3l M 59 5m 5g 5x 5i");e=e||"";O(d={2N:11,19:[],2K:6(g){H e.1i(g)>-1},3d:6(g){e+=g}};c<f.L;)I(h=B(f,c,b,d)){a.U(h.3k);c+=h.1C[0].L||1}Y I(h=n.X.W(z[b],f.1a(c))){a.U(h[0]);c+=h[0].L}Y{h=f.3a(c);I(h==="[")b=M.2I;Y I(h==="]")b=M.1B;a.U(h);c++}a=15(a.1K(""),n.Q.W(e,w,""));a.1w={1m:f,19:d.2N?d.19:N};H a};M.3v="1.5.0";M.2I=1;M.1B=2;K C=/\\$(?:(\\d\\d?|[$&`\'])|{([$\\w]+)})/g,w=/[^5h]+|([\\s\\S])(?=[\\s\\S]*\\1)/g,A=/^(?:[?*+]|{\\d+(?:,\\d*)?})\\??/,v=11,u=[],n={X:15.Z.X,1A:15.Z.1A,1C:1r.Z.1C,Q:1r.Z.Q,1e:1r.Z.1e},x=n.X.W(/()??/,"")[1]===1d,D=6(){K f=/^/g;n.1A.W(f,"");H!f.12}(),y=6(){K f=/x/g;n.Q.W("x",f,"");H!f.12}(),E=15.Z.3n!==1d,z={};z[M.2I]=/^(?:\\\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\\29-26-f]{2}|u[\\29-26-f]{4}|c[A-3o-z]|[\\s\\S]))/;z[M.1B]=/^(?:\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\\d*|x[\\29-26-f]{2}|u[\\29-26-f]{4}|c[A-3o-z]|[\\s\\S])|\\(\\?[:=!]|[?*+]\\?|{\\d+(?:,\\d*)?}\\??)/;M.1h=6(f,e,a,b){u.U({2q:r(f,"g"+(E?"y":"")),2b:e,3r:a||M.1B,2p:b||N})};M.2n=6(f,e){K a=f+"/"+(e||"");H M.2n[a]||(M.2n[a]=M(f,e))};M.3c=6(f){H r(f,"g")};M.5l=6(f){H f.Q(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g,"\\\\$&")};M.5e=6(f,e,a,b){e=r(e,"g"+(b&&E?"y":""));e.12=a=a||0;f=e.X(f);H b?f&&f.P===a?f:N:f};M.3q=6(){M.1h=6(){1S 2U("2a\'t 55 1h 54 3q")}};M.1R=6(f){H 53.Z.1q.W(f)==="[2m 15]"};M.3p=6(f,e,a,b){O(K c=r(e,"g"),d=-1,h;h=c.X(f);){a.W(b,h,++d,f,c);c.12===h.P&&c.12++}I(e.1J)e.12=0};M.57=6(f,e){H 6 a(b,c){K d=e[c].1I?e[c]:{1I:e[c]},h=r(d.1I,"g"),g=[],i;O(i=0;i<b.L;i++)M.3p(b[i],h,6(k){g.U(d.3j?k[d.3j]||"":k[0])});H c===e.L-1||!g.L?g:a(g,c+1)}([f],0)};15.Z.1p=6(f,e){H J.X(e[0])};15.Z.W=6(f,e){H J.X(e)};15.Z.X=6(f){K e=n.X.1p(J,14),a;I(e){I(!x&&e.L>1&&p(e,"")>-1){a=15(J.1m,n.Q.W(t(J),"g",""));n.Q.W(f.1a(e.P),a,6(){O(K c=1;c<14.L-2;c++)I(14[c]===1d)e[c]=1d})}I(J.1w&&J.1w.19)O(K b=1;b<e.L;b++)I(a=J.1w.19[b-1])e[a]=e[b];!D&&J.1J&&!e[0].L&&J.12>e.P&&J.12--}H e};I(!D)15.Z.1A=6(f){(f=n.X.W(J,f))&&J.1J&&!f[0].L&&J.12>f.P&&J.12--;H!!f};1r.Z.1C=6(f){M.1R(f)||(f=15(f));I(f.1J){K e=n.1C.1p(J,14);f.12=0;H e}H f.X(J)};1r.Z.Q=6(f,e){K a=M.1R(f),b,c;I(a&&1j e.58()==="3f"&&e.1i("${")===-1&&y)H n.Q.1p(J,14);I(a){I(f.1w)b=f.1w.19}Y f+="";I(1j e==="6")c=n.Q.W(J,f,6(){I(b){14[0]=1f 1r(14[0]);O(K d=0;d<b.L;d++)I(b[d])14[0][b[d]]=14[d+1]}I(a&&f.1J)f.12=14[14.L-2]+14[0].L;H e.1p(N,14)});Y{c=J+"";c=n.Q.W(c,f,6(){K d=14;H n.Q.W(e,C,6(h,g,i){I(g)5b(g){24"$":H"$";24"&":H d[0];24"`":H d[d.L-1].1a(0,d[d.L-2]);24"\'":H d[d.L-1].1a(d[d.L-2]+d[0].L);5a:i="";g=+g;I(!g)H h;O(;g>d.L-3;){i=1r.Z.1a.W(g,-1)+i;g=1Q.3i(g/10)}H(g?d[g]||"":"$")+i}Y{g=+i;I(g<=d.L-3)H d[g];g=b?p(b,i):-1;H g>-1?d[g+1]:h}})})}I(a&&f.1J)f.12=0;H c};1r.Z.1e=6(f,e){I(!M.1R(f))H n.1e.1p(J,14);K a=J+"",b=[],c=0,d,h;I(e===1d||+e<0)e=5D;Y{e=1Q.3i(+e);I(!e)H[]}O(f=M.3c(f);d=f.X(a);){I(f.12>c){b.U(a.1a(c,d.P));d.L>1&&d.P<a.L&&3b.Z.U.1p(b,d.1a(1));h=d[0].L;c=f.12;I(b.L>=e)1N}f.12===d.P&&f.12++}I(c===a.L){I(!n.1A.W(f,"")||h)b.U("")}Y b.U(a.1a(c));H b.L>e?b.1a(0,e):b};M.1h(/\\(\\?#[^)]*\\)/,6(f){H n.1A.W(A,f.2S.1a(f.P+f[0].L))?"":"(?:)"});M.1h(/\\((?!\\?)/,6(){J.19.U(N);H"("});M.1h(/\\(\\?<([$\\w]+)>/,6(f){J.19.U(f[1]);J.2N=R;H"("});M.1h(/\\\\k<([\\w$]+)>/,6(f){K e=p(J.19,f[1]);H e>-1?"\\\\"+(e+1)+(3R(f.2S.3a(f.P+f[0].L))?"":"(?:)"):f[0]});M.1h(/\\[\\^?]/,6(f){H f[0]==="[]"?"\\\\b\\\\B":"[\\\\s\\\\S]"});M.1h(/^\\(\\?([5A]+)\\)/,6(f){J.3d(f[1]);H""});M.1h(/(?:\\s+|#.*)+/,6(f){H n.1A.W(A,f.2S.1a(f.P+f[0].L))?"":"(?:)"},M.1B,6(){H J.2K("x")});M.1h(/\\./,6(){H"[\\\\s\\\\S]"},M.1B,6(){H J.2K("s")})})();1j 2e!="1d"&&(2e.M=M);K 1v=6(){6 r(a,b){a.1l.1i(b)!=-1||(a.1l+=" "+b)}6 t(a){H a.1i("3e")==0?a:"3e"+a}6 B(a){H e.1Y.2A[t(a)]}6 p(a,b,c){I(a==N)H N;K d=c!=R?a.3G:[a.2G],h={"#":"1c",".":"1l"}[b.1o(0,1)]||"3h",g,i;g=h!="3h"?b.1o(1):b.5u();I((a[h]||"").1i(g)!=-1)H a;O(a=0;d&&a<d.L&&i==N;a++)i=p(d[a],b,c);H i}6 C(a,b){K c={},d;O(d 2g a)c[d]=a[d];O(d 2g b)c[d]=b[d];H c}6 w(a,b,c,d){6 h(g){g=g||1P.5y;I(!g.1F){g.1F=g.52;g.3N=6(){J.5w=11}}c.W(d||1P,g)}a.3g?a.3g("4U"+b,h):a.4y(b,h,11)}6 A(a,b){K c=e.1Y.2j,d=N;I(c==N){c={};O(K h 2g e.1U){K g=e.1U[h];d=g.4x;I(d!=N){g.1V=h.4w();O(g=0;g<d.L;g++)c[d[g]]=h}}e.1Y.2j=c}d=e.1U[c[a]];d==N&&b!=11&&1P.1X(e.13.1x.1X+(e.13.1x.3E+a));H d}6 v(a,b){O(K c=a.1e("\\n"),d=0;d<c.L;d++)c[d]=b(c[d],d);H c.1K("\\n")}6 u(a,b){I(a==N||a.L==0||a=="\\n")H a;a=a.Q(/</g,"&1y;");a=a.Q(/ {2,}/g,6(c){O(K d="",h=0;h<c.L-1;h++)d+=e.13.1W;H d+" "});I(b!=N)a=v(a,6(c){I(c.L==0)H"";K d="";c=c.Q(/^(&2s;| )+/,6(h){d=h;H""});I(c.L==0)H d;H d+\'<17 1g="\'+b+\'">\'+c+"</17>"});H a}6 n(a,b){a.1e("\\n");O(K c="",d=0;d<50;d++)c+="                    ";H a=v(a,6(h){I(h.1i("\\t")==-1)H h;O(K g=0;(g=h.1i("\\t"))!=-1;)h=h.1o(0,g)+c.1o(0,b-g%b)+h.1o(g+1,h.L);H h})}6 x(a){H a.Q(/^\\s+|\\s+$/g,"")}6 D(a,b){I(a.P<b.P)H-1;Y I(a.P>b.P)H 1;Y I(a.L<b.L)H-1;Y I(a.L>b.L)H 1;H 0}6 y(a,b){6 c(k){H k[0]}O(K d=N,h=[],g=b.2D?b.2D:c;(d=b.1I.X(a))!=N;){K i=g(d,b);I(1j i=="3f")i=[1f e.2L(i,d.P,b.23)];h=h.1O(i)}H h}6 E(a){K b=/(.*)((&1G;|&1y;).*)/;H a.Q(e.3A.3M,6(c){K d="",h=N;I(h=b.X(c)){c=h[1];d=h[2]}H\'<a 2h="\'+c+\'">\'+c+"</a>"+d})}6 z(){O(K a=1E.36("1k"),b=[],c=0;c<a.L;c++)a[c].3s=="20"&&b.U(a[c]);H b}6 f(a){a=a.1F;K b=p(a,".20",R);a=p(a,".3O",R);K c=1E.4i("3t");I(!(!a||!b||p(a,"3t"))){B(b.1c);r(b,"1m");O(K d=a.3G,h=[],g=0;g<d.L;g++)h.U(d[g].4z||d[g].4A);h=h.1K("\\r");c.39(1E.4D(h));a.39(c);c.2C();c.4C();w(c,"4u",6(){c.2G.4E(c);b.1l=b.1l.Q("1m","")})}}I(1j 3F!="1d"&&1j M=="1d")M=3F("M").M;K e={2v:{"1g-27":"","2i-1s":1,"2z-1s-2t":11,1M:N,1t:N,"42-45":R,"43-22":4,1u:R,16:R,"3V-17":R,2l:11,"41-40":R,2k:11,"1z-1k":11},13:{1W:"&2s;",2M:R,46:11,44:11,34:"4n",1x:{21:"4o 1m",2P:"?",1X:"1v\\n\\n",3E:"4r\'t 4t 1D O: ",4g:"4m 4B\'t 51 O 1z-1k 4F: ",37:\'<!4T 1z 4S "-//4V//3H 4W 1.0 4Z//4Y" "1Z://2y.3L.3K/4X/3I/3H/3I-4P.4J"><1z 4I="1Z://2y.3L.3K/4L/5L"><3J><4N 1Z-4M="5G-5M" 6K="2O/1z; 6J=6I-8" /><1t>6L 1v</1t></3J><3B 1L="25-6M:6Q,6P,6O,6N-6F;6y-2f:#6x;2f:#6w;25-22:6v;2O-3D:3C;"><T 1L="2O-3D:3C;3w-32:1.6z;"><T 1L="25-22:6A-6E;">1v</T><T 1L="25-22:.6C;3w-6B:6R;"><T>3v 3.0.76 (72 73 3x)</T><T><a 2h="1Z://3u.2w/1v" 1F="38" 1L="2f:#3y">1Z://3u.2w/1v</a></T><T>70 17 6U 71.</T><T>6T 6X-3x 6Y 6D.</T></T><T>6t 61 60 J 1k, 5Z <a 2h="6u://2y.62.2w/63-66/65?64=5X-5W&5P=5O" 1L="2f:#3y">5R</a> 5V <2R/>5U 5T 5S!</T></T></3B></1z>\'}},1Y:{2j:N,2A:{}},1U:{},3A:{6n:/\\/\\*[\\s\\S]*?\\*\\//2c,6m:/\\/\\/.*$/2c,6l:/#.*$/2c,6k:/"([^\\\\"\\n]|\\\\.)*"/g,6o:/\'([^\\\\\'\\n]|\\\\.)*\'/g,6p:1f M(\'"([^\\\\\\\\"]|\\\\\\\\.)*"\',"3z"),6s:1f M("\'([^\\\\\\\\\']|\\\\\\\\.)*\'","3z"),6q:/(&1y;|<)!--[\\s\\S]*?--(&1G;|>)/2c,3M:/\\w+:\\/\\/[\\w-.\\/?%&=:@;]*/g,6a:{18:/(&1y;|<)\\?=?/g,1b:/\\?(&1G;|>)/g},69:{18:/(&1y;|<)%=?/g,1b:/%(&1G;|>)/g},6d:{18:/(&1y;|<)\\s*1k.*?(&1G;|>)/2T,1b:/(&1y;|<)\\/\\s*1k\\s*(&1G;|>)/2T}},16:{1H:6(a){6 b(i,k){H e.16.2o(i,k,e.13.1x[k])}O(K c=\'<T 1g="16">\',d=e.16.2x,h=d.2X,g=0;g<h.L;g++)c+=(d[h[g]].1H||b)(a,h[g]);c+="</T>";H c},2o:6(a,b,c){H\'<2W><a 2h="#" 1g="6e 6h\'+b+" "+b+\'">\'+c+"</a></2W>"},2b:6(a){K b=a.1F,c=b.1l||"";b=B(p(b,".20",R).1c);K d=6(h){H(h=15(h+"6f(\\\\w+)").X(c))?h[1]:N}("6g");b&&d&&e.16.2x[d].2B(b);a.3N()},2x:{2X:["21","2P"],21:{1H:6(a){I(a.V("2l")!=R)H"";K b=a.V("1t");H e.16.2o(a,"21",b?b:e.13.1x.21)},2B:6(a){a=1E.6j(t(a.1c));a.1l=a.1l.Q("47","")}},2P:{2B:6(){K a="68=0";a+=", 18="+(31.30-33)/2+", 32="+(31.2Z-2Y)/2+", 30=33, 2Z=2Y";a=a.Q(/^,/,"");a=1P.6Z("","38",a);a.2C();K b=a.1E;b.6W(e.13.1x.37);b.6V();a.2C()}}}},35:6(a,b){K c;I(b)c=[b];Y{c=1E.36(e.13.34);O(K d=[],h=0;h<c.L;h++)d.U(c[h]);c=d}c=c;d=[];I(e.13.2M)c=c.1O(z());I(c.L===0)H d;O(h=0;h<c.L;h++){O(K g=c[h],i=a,k=c[h].1l,j=3W 0,l={},m=1f M("^\\\\[(?<2V>(.*?))\\\\]$"),s=1f M("(?<27>[\\\\w-]+)\\\\s*:\\\\s*(?<1T>[\\\\w-%#]+|\\\\[.*?\\\\]|\\".*?\\"|\'.*?\')\\\\s*;?","g");(j=s.X(k))!=N;){K o=j.1T.Q(/^[\'"]|[\'"]$/g,"");I(o!=N&&m.1A(o)){o=m.X(o);o=o.2V.L>0?o.2V.1e(/\\s*,\\s*/):[]}l[j.27]=o}g={1F:g,1n:C(i,l)};g.1n.1D!=N&&d.U(g)}H d},1M:6(a,b){K c=J.35(a,b),d=N,h=e.13;I(c.L!==0)O(K g=0;g<c.L;g++){b=c[g];K i=b.1F,k=b.1n,j=k.1D,l;I(j!=N){I(k["1z-1k"]=="R"||e.2v["1z-1k"]==R){d=1f e.4l(j);j="4O"}Y I(d=A(j))d=1f d;Y 6H;l=i.3X;I(h.2M){l=l;K m=x(l),s=11;I(m.1i("<![6G[")==0){m=m.4h(9);s=R}K o=m.L;I(m.1i("]]\\>")==o-3){m=m.4h(0,o-3);s=R}l=s?m:l}I((i.1t||"")!="")k.1t=i.1t;k.1D=j;d.2Q(k);b=d.2F(l);I((i.1c||"")!="")b.1c=i.1c;i.2G.74(b,i)}}},2E:6(a){w(1P,"4k",6(){e.1M(a)})}};e.2E=e.2E;e.1M=e.1M;e.2L=6(a,b,c){J.1T=a;J.P=b;J.L=a.L;J.23=c;J.1V=N};e.2L.Z.1q=6(){H J.1T};e.4l=6(a){6 b(j,l){O(K m=0;m<j.L;m++)j[m].P+=l}K c=A(a),d,h=1f e.1U.5Y,g=J,i="2F 1H 2Q".1e(" ");I(c!=N){d=1f c;O(K k=0;k<i.L;k++)(6(){K j=i[k];g[j]=6(){H h[j].1p(h,14)}})();d.28==N?1P.1X(e.13.1x.1X+(e.13.1x.4g+a)):h.2J.U({1I:d.28.17,2D:6(j){O(K l=j.17,m=[],s=d.2J,o=j.P+j.18.L,F=d.28,q,G=0;G<s.L;G++){q=y(l,s[G]);b(q,o);m=m.1O(q)}I(F.18!=N&&j.18!=N){q=y(j.18,F.18);b(q,j.P);m=m.1O(q)}I(F.1b!=N&&j.1b!=N){q=y(j.1b,F.1b);b(q,j.P+j[0].5Q(j.1b));m=m.1O(q)}O(j=0;j<m.L;j++)m[j].1V=c.1V;H m}})}};e.4j=6(){};e.4j.Z={V:6(a,b){K c=J.1n[a];c=c==N?b:c;K d={"R":R,"11":11}[c];H d==N?c:d},3Y:6(a){H 1E.4i(a)},4c:6(a,b){K c=[];I(a!=N)O(K d=0;d<a.L;d++)I(1j a[d]=="2m")c=c.1O(y(b,a[d]));H J.4e(c.6b(D))},4e:6(a){O(K b=0;b<a.L;b++)I(a[b]!==N)O(K c=a[b],d=c.P+c.L,h=b+1;h<a.L&&a[b]!==N;h++){K g=a[h];I(g!==N)I(g.P>d)1N;Y I(g.P==c.P&&g.L>c.L)a[b]=N;Y I(g.P>=c.P&&g.P<d)a[h]=N}H a},4d:6(a){K b=[],c=2u(J.V("2i-1s"));v(a,6(d,h){b.U(h+c)});H b},3U:6(a){K b=J.V("1M",[]);I(1j b!="2m"&&b.U==N)b=[b];a:{a=a.1q();K c=3W 0;O(c=c=1Q.6c(c||0,0);c<b.L;c++)I(b[c]==a){b=c;1N a}b=-1}H b!=-1},2r:6(a,b,c){a=["1s","6i"+b,"P"+a,"6r"+(b%2==0?1:2).1q()];J.3U(b)&&a.U("67");b==0&&a.U("1N");H\'<T 1g="\'+a.1K(" ")+\'">\'+c+"</T>"},3Q:6(a,b){K c="",d=a.1e("\\n").L,h=2u(J.V("2i-1s")),g=J.V("2z-1s-2t");I(g==R)g=(h+d-1).1q().L;Y I(3R(g)==R)g=0;O(K i=0;i<d;i++){K k=b?b[i]:h+i,j;I(k==0)j=e.13.1W;Y{j=g;O(K l=k.1q();l.L<j;)l="0"+l;j=l}a=j;c+=J.2r(i,k,a)}H c},49:6(a,b){a=x(a);K c=a.1e("\\n");J.V("2z-1s-2t");K d=2u(J.V("2i-1s"));a="";O(K h=J.V("1D"),g=0;g<c.L;g++){K i=c[g],k=/^(&2s;|\\s)+/.X(i),j=N,l=b?b[g]:d+g;I(k!=N){j=k[0].1q();i=i.1o(j.L);j=j.Q(" ",e.13.1W)}i=x(i);I(i.L==0)i=e.13.1W;a+=J.2r(g,l,(j!=N?\'<17 1g="\'+h+\' 5N">\'+j+"</17>":"")+i)}H a},4f:6(a){H a?"<4a>"+a+"</4a>":""},4b:6(a,b){6 c(l){H(l=l?l.1V||g:g)?l+" ":""}O(K d=0,h="",g=J.V("1D",""),i=0;i<b.L;i++){K k=b[i],j;I(!(k===N||k.L===0)){j=c(k);h+=u(a.1o(d,k.P-d),j+"48")+u(k.1T,j+k.23);d=k.P+k.L+(k.75||0)}}h+=u(a.1o(d),c()+"48");H h},1H:6(a){K b="",c=["20"],d;I(J.V("2k")==R)J.1n.16=J.1n.1u=11;1l="20";J.V("2l")==R&&c.U("47");I((1u=J.V("1u"))==11)c.U("6S");c.U(J.V("1g-27"));c.U(J.V("1D"));a=a.Q(/^[ ]*[\\n]+|[\\n]*[ ]*$/g,"").Q(/\\r/g," ");b=J.V("43-22");I(J.V("42-45")==R)a=n(a,b);Y{O(K h="",g=0;g<b;g++)h+=" ";a=a.Q(/\\t/g,h)}a=a;a:{b=a=a;h=/<2R\\s*\\/?>|&1y;2R\\s*\\/?&1G;/2T;I(e.13.46==R)b=b.Q(h,"\\n");I(e.13.44==R)b=b.Q(h,"");b=b.1e("\\n");h=/^\\s*/;g=4Q;O(K i=0;i<b.L&&g>0;i++){K k=b[i];I(x(k).L!=0){k=h.X(k);I(k==N){a=a;1N a}g=1Q.4q(k[0].L,g)}}I(g>0)O(i=0;i<b.L;i++)b[i]=b[i].1o(g);a=b.1K("\\n")}I(1u)d=J.4d(a);b=J.4c(J.2J,a);b=J.4b(a,b);b=J.49(b,d);I(J.V("41-40"))b=E(b);1j 2H!="1d"&&2H.3S&&2H.3S.1C(/5s/)&&c.U("5t");H b=\'<T 1c="\'+t(J.1c)+\'" 1g="\'+c.1K(" ")+\'">\'+(J.V("16")?e.16.1H(J):"")+\'<3Z 5z="0" 5H="0" 5J="0">\'+J.4f(J.V("1t"))+"<3T><3P>"+(1u?\'<2d 1g="1u">\'+J.3Q(a)+"</2d>":"")+\'<2d 1g="17"><T 1g="3O">\'+b+"</T></2d></3P></3T></3Z></T>"},2F:6(a){I(a===N)a="";J.17=a;K b=J.3Y("T");b.3X=J.1H(a);J.V("16")&&w(p(b,".16"),"5c",e.16.2b);J.V("3V-17")&&w(p(b,".17"),"56",f);H b},2Q:6(a){J.1c=""+1Q.5d(1Q.5n()*5k).1q();e.1Y.2A[t(J.1c)]=J;J.1n=C(e.2v,a||{});I(J.V("2k")==R)J.1n.16=J.1n.1u=11},5j:6(a){a=a.Q(/^\\s+|\\s+$/g,"").Q(/\\s+/g,"|");H"\\\\b(?:"+a+")\\\\b"},5f:6(a){J.28={18:{1I:a.18,23:"1k"},1b:{1I:a.1b,23:"1k"},17:1f M("(?<18>"+a.18.1m+")(?<17>.*?)(?<1b>"+a.1b.1m+")","5o")}}};H e}();1j 2e!="1d"&&(2e.1v=1v);',441,"||||||function|||||||||||||||||||||||||||||||||||||return|if|this|var|length|XRegExp|null|for|index|replace|true||div|push|getParam|call|exec|else|prototype||false|lastIndex|config|arguments|RegExp|toolbar|code|left|captureNames|slice|right|id|undefined|split|new|class|addToken|indexOf|typeof|script|className|source|params|substr|apply|toString|String|line|title|gutter|SyntaxHighlighter|_xregexp|strings|lt|html|test|OUTSIDE_CLASS|match|brush|document|target|gt|getHtml|regex|global|join|style|highlight|break|concat|window|Math|isRegExp|throw|value|brushes|brushName|space|alert|vars|http|syntaxhighlighter|expandSource|size|css|case|font|Fa|name|htmlScript|dA|can|handler|gm|td|exports|color|in|href|first|discoveredBrushes|light|collapse|object|cache|getButtonHtml|trigger|pattern|getLineHtml|nbsp|numbers|parseInt|defaults|com|items|www|pad|highlighters|execute|focus|func|all|getDiv|parentNode|navigator|INSIDE_CLASS|regexList|hasFlag|Match|useScriptTags|hasNamedCapture|text|help|init|br|input|gi|Error|values|span|list|250|height|width|screen|top|500|tagName|findElements|getElementsByTagName|aboutDialog|_blank|appendChild|charAt|Array|copyAsGlobal|setFlag|highlighter_|string|attachEvent|nodeName|floor|backref|output|the|TypeError|sticky|Za|iterate|freezeTokens|scope|type|textarea|alexgorbatchev|version|margin|2010|005896|gs|regexLib|body|center|align|noBrush|require|childNodes|DTD|xhtml1|head|org|w3|url|preventDefault|container|tr|getLineNumbersHtml|isNaN|userAgent|tbody|isLineHighlighted|quick|void|innerHTML|create|table|links|auto|smart|tab|stripBrs|tabs|bloggerMode|collapsed|plain|getCodeLinesHtml|caption|getMatchesHtml|findMatches|figureOutLineNumbers|removeNestedMatches|getTitleHtml|brushNotHtmlScript|substring|createElement|Highlighter|load|HtmlScript|Brush|pre|expand|multiline|min|Can|ignoreCase|find|blur|extended|toLowerCase|aliases|addEventListener|innerText|textContent|wasn|select|createTextNode|removeChild|option|same|frame|xmlns|dtd|twice|1999|equiv|meta|htmlscript|transitional|1E3|expected|PUBLIC|DOCTYPE|on|W3C|XHTML|TR|EN|Transitional||configured|srcElement|Object|after|run|dblclick|matchChain|valueOf|constructor|default|switch|click|round|execAt|forHtmlScript|token|gimy|functions|getKeywords|1E6|escape|within|random|sgi|another|finally|supply|MSIE|ie|toUpperCase|catch|returnValue|definition|event|border|imsx|constructing|one|Infinity|from|when|Content|cellpadding|flags|cellspacing|try|xhtml|Type|spaces|2930402|hosted_button_id|lastIndexOf|donate|active|development|keep|to|xclick|_s|Xml|please|like|you|paypal|cgi|cmd|webscr|bin|highlighted|scrollbars|aspScriptTags|phpScriptTags|sort|max|scriptScriptTags|toolbar_item|_|command|command_|number|getElementById|doubleQuotedString|singleLinePerlComments|singleLineCComments|multiLineCComments|singleQuotedString|multiLineDoubleQuotedString|xmlComments|alt|multiLineSingleQuotedString|If|https|1em|000|fff|background|5em|xx|bottom|75em|Gorbatchev|large|serif|CDATA|continue|utf|charset|content|About|family|sans|Helvetica|Arial|Geneva|3em|nogutter|Copyright|syntax|close|write|2004|Alex|open|JavaScript|highlighter|July|02|replaceChild|offset|83".split("|"),0,{})),eval(function(p,c,k,e,d){if(e=function(c){return(c<56?"":e(parseInt(c/56)))+(35<(c%=56)?String.fromCharCode(c+29):c.toString(36))},!"".replace(/^/,String)){for(;c--;)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}],e=function(){return"\\w+"},c=1}for(;c--;)k[c]&&(p=p.replace(new RegExp("\\b"+e(c)+"\\b","g"),k[c]));return p}('(2(){1 h=5;h.I=2(){2 n(c,a){4(1 d=0;d<c.9;d++)i[c[d]]=a}2 o(c){1 a=r.H("J"),d=3;a.K=c;a.M="L/t";a.G="t";a.u=a.v=2(){6(!d&&(!8.7||8.7=="F"||8.7=="z")){d=q;e[c]=q;a:{4(1 p y e)6(e[p]==3)B a;j&&5.C(k)}a.u=a.v=x;a.D.O(a)}};r.N.R(a)}1 f=Q,l=h.P(),i={},e={},j=3,k=x,b;5.T=2(c){k=c;j=q};4(b=0;b<f.9;b++){1 m=f[b].w?f[b]:f[b].S(/\\s+/),g=m.w();n(m,g)}4(b=0;b<l.9;b++)6(g=i[l[b].E.A]){e[g]=3;o(g)}}})();',56,"|var|function|false|for|SyntaxHighlighter|if|readyState|this|length|||||||||||||||||true|document||javascript|onload|onreadystatechange|pop|null|in|complete|brush|break|highlight|parentNode|params|loaded|language|createElement|autoloader|script|src|text|type|body|removeChild|findElements|arguments|appendChild|split|all".split("|"),0,{})),function(){function Brush(){var r=SyntaxHighlighter.regexLib;this.regexList=[{regex:r.multiLineDoubleQuotedString,css:"string"},{regex:r.multiLineSingleQuotedString,css:"string"},{regex:r.singleLineCComments,css:"comments"},{regex:r.multiLineCComments,css:"comments"},{regex:/\s*#.*/gm,css:"preprocessor"},{regex:new RegExp(this.getKeywords("break case catch continue default delete do else false  for function if in instanceof new null return super switch this throw true try typeof var while with"),"gm"),css:"keyword"}],this.forHtmlScript(r.scriptScriptTags)}Brush.prototype=new SyntaxHighlighter.Highlighter,Brush.aliases=["js","jscript","javascript"],SyntaxHighlighter.brushes.JScript=Brush,"undefined"!=typeof exports&&(exports.Brush=Brush)}();var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,a){if((a=a).get||a.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=a.value)},$jscomp.getGlobal=function(a){return("undefined"==typeof window||window!==a)&&"undefined"!=typeof global&&null!=global?global:a},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(i,f,j,k){if(f){for(var a=$jscomp.global,b=i.split("."),e=0;e<b.length-1;e++){var d=b[e];d in a||(a[d]={}),a=a[d]}var g=b[b.length-1],h=a[g],c=f(h);c!=h&&null!=c&&$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})}},$jscomp.polyfill("Array.prototype.copyWithin",function(a){if(a)return a;return function(c,b,a){var d=this.length;if(c=Number(c),b=Number(b),a=Number(null!=a?a:d),c<b)for(a=Math.min(a,d);b<a;)b in this?this[c++]=this[b++]:(delete this[c++],b++);else for(c+=(a=Math.min(a,d+b-c))-b;b<a;)--a in this?this[--c]=this[a]:delete this[c];return this}},"es6-impl","es3"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a=a||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};return a[$jscomp.global.Symbol.iterator]=function(){return this},a},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator(),a instanceof String&&(a+="");var c=0,b={next:function(){if(c<a.length){var e=c++;return{value:d(e,a[e]),done:!1}}return b.next=function(){return{done:!0,value:void 0}},b.next()}};return b[Symbol.iterator]=function(){return b},b},$jscomp.polyfill("Array.prototype.entries",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(a,b){return[a,b]})}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.fill",function(a){if(a)return a;return function(e,b,a){var c=this.length||0;b<0&&(b=Math.max(0,c+b)),(null==a||c<a)&&(a=c),(a=Number(a))<0&&(a=Math.max(0,c+a));for(var d=Number(b||0);d<a;d++)this[d]=e;return this}},"es6-impl","es3"),$jscomp.findInternal=function(a,d,e){a instanceof String&&(a=String(a));for(var f=a.length,b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a))return{i:b,v:c}}return{i:-1,v:void 0}},$jscomp.polyfill("Array.prototype.find",function(a){if(a)return a;return function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.findIndex",function(a){if(a)return a;return function(b,a){return $jscomp.findInternal(this,b,a).i}},"es6-impl","es3"),$jscomp.polyfill("Array.from",function(a){if(a)return a;return function(a,b,f){$jscomp.initSymbolIterator(),b=null!=b?b:function(a){return a};var g,c=[],e=a[Symbol.iterator];if("function"==typeof e)for(a=e.call(a);!(g=a.next()).done;)c.push(b.call(f,g.value));else for(var h=a.length,d=0;d<h;d++)c.push(b.call(f,a[d]));return c}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.keys",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3"),$jscomp.polyfill("Array.of",function(a){if(a)return a;return function(a){return Array.from(arguments)}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.values",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})}},"es6","es3"),$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a.throw(b)}return new Promise(function(b,c){!function handleGeneratorRecord(a){a.done?b(a.value):Promise.resolve(a.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}(a.next())})},$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)},$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)},$jscomp.polyfill("WeakMap",function(c){if(function(){if(c&&Object.seal)try{var b=Object.seal({}),d=Object.seal({}),a=new c([[b,2],[d,3]]);return 2!=a.get(b)||3!=a.get(d)?void 0:(a.delete(b),a.set(d,4),!a.has(b)&&4==a.get(d))}catch(e){return}}())return c;var a="$jscomp_hidden_"+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){$jscomp.defineProperty(b,a,{value:{}})}}function patch(a){var b=Object[a];b&&(Object[a]=function(a){return insert(a),b(a)})}patch("freeze"),patch("preventExtensions"),patch("seal");var d=0,b=function(a){if(this.id_=(d+=Math.random()+1).toString(),a){$jscomp.initSymbol(),$jscomp.initSymbolIterator();for(var b,e=$jscomp.makeIterator(a);!(b=e.next()).done;){var c=b.value;this.set(c[0],c[1])}}};return b.prototype.set=function(b,c){if(insert(b),!$jscomp.owns(b,a))throw new Error("WeakMap key fail: "+b);return b[a][this.id_]=c,this},b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:void 0},b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)},b.prototype.delete=function(b){return!(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_))&&delete b[a][this.id_]},b},"es6-impl","es3"),$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.polyfill("Map",function(b){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{b=b;var e=Object.seal({x:4}),c=new b($jscomp.makeIterator([[e,"s"]]));if("s"!=c.get(e)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),a=d.next();return a.done||a.value[0]!=e||"s"!=a.value[1]?!1:!((a=d.next()).done||4!=a.value[0].x||"t"!=a.value[1]||!d.next().done)}catch(k){return!1}}())return b;$jscomp.initSymbol(),$jscomp.initSymbolIterator();var f=new WeakMap,a=function(a){if(this.data_={},this.head_=g(),this.size=0,a)for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.set(c[0],c[1])}};a.prototype.set=function(c,b){var a=d(this,c);return a.list||(a.list=this.data_[a.id]=[]),a.entry?a.entry.value=b:(a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:b},a.list.push(a.entry),this.head_.previous.next=a.entry,this.head_.previous=a.entry,this.size++),this},a.prototype.delete=function(b){var a=d(this,b);return!(!a.entry||!a.list)&&(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0)},a.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=g(),this.size=0},a.prototype.has=function(a){return!!d(this,a).entry},a.prototype.get=function(b){var a=d(this,b).entry;return a&&a.value},a.prototype.entries=function(){return e(this,function(a){return[a.key,a.value]})},a.prototype.keys=function(){return e(this,function(a){return a.key})},a.prototype.values=function(){return e(this,function(a){return a.value})},a.prototype.forEach=function(d,c){for(var b,e=this.entries();!(b=e.next()).done;){var a=b.value;d.call(c,a[1],a[0],this)}},a.prototype[Symbol.iterator]=a.prototype.entries;var d=function(f,d){var e=j(d),a=f.data_[e];if(a&&$jscomp.owns(f.data_,e))for(var c=0;c<a.length;c++){var b=a[c];if(d!=d&&b.key!=b.key||d===b.key)return{id:e,list:a,index:c,entry:b}}return{id:e,list:a,index:-1,entry:void 0}},e=function(b,c){var a=b.head_;return $jscomp.iteratorPrototype(function(){if(a){for(;a.head!=b.head_;)a=a.previous;if(a.next!=a.head)return a=a.next,{done:!1,value:c(a)};a=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=a.next=a.head=a,a},i=0,j=function(a){var b=a&&typeof a;if("object"!=b&&"function"!=b)return"p_"+a;if(a=a,f.has(a))return f.get(a);var c=""+ ++i;return f.set(a,c),c};return a},"es6-impl","es3"),$jscomp.polyfill("Math.acosh",function(a){if(a)return a;return function(a){return a=Number(a),Math.log(a+Math.sqrt(a*a-1))}},"es6-impl","es3"),$jscomp.polyfill("Math.asinh",function(a){if(a)return a;return function(a){if(0===(a=Number(a)))return a;var b=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Math.log1p",function(a){if(a)return a;return function(a){if((a=Number(a))<.25&&-.25<a){for(var e=a,f=1,b=a,c=0,d=1;c!=b;)b=(c=b)+(d*=-1)*(e*=a)/++f;return b}return Math.log(1+a)}},"es6-impl","es3"),$jscomp.polyfill("Math.atanh",function(b){if(b)return b;var a=Math.log1p;return function(b){return b=Number(b),(a(b)-a(-b))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.cbrt",function(a){if(a)return a;return function(a){if(0===a)return a;a=Number(a);var b=Math.pow(Math.abs(a),1/3);return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Math.clz32",function(a){if(a)return a;return function(a){if(0===(a=Number(a)>>>0))return 32;var b=0;return 0==(4294901760&a)&&(a<<=16,b+=16),0==(4278190080&a)&&(a<<=8,b+=8),0==(4026531840&a)&&(a<<=4,b+=4),0==(3221225472&a)&&(a<<=2,b+=2),0==(2147483648&a)&&b++,b}},"es6-impl","es3"),$jscomp.polyfill("Math.cosh",function(a){if(a)return a;var b=Math.exp;return function(a){return a=Number(a),(b(a)+b(-a))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.expm1",function(a){if(a)return a;return function(a){if((a=Number(a))<.25&&-.25<a){for(var d=a,e=1,b=a,c=0;c!=b;)b=(c=b)+(d*=a/++e);return b}return Math.exp(a)-1}},"es6-impl","es3"),$jscomp.polyfill("Math.hypot",function(a){if(a)return a;return function(b,c,g){var a,f,e;b=Number(b),c=Number(c);var d=Math.max(Math.abs(b),Math.abs(c));for(a=2;a<arguments.length;a++)d=Math.max(d,Math.abs(arguments[a]));if(1e100<d||d<1e-100){for(e=(b/=d)*b+(c/=d)*c,a=2;a<arguments.length;a++)e+=(f=Number(arguments[a])/d)*f;return Math.sqrt(e)*d}for(e=b*b+c*c,a=2;a<arguments.length;a++)e+=(f=Number(arguments[a]))*f;return Math.sqrt(e)}},"es6-impl","es3"),$jscomp.polyfill("Math.imul",function(a){if(a)return a;return function(a,b){var c=65535&(a=Number(a)),d=65535&(b=Number(b));return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0}},"es6-impl","es3"),$jscomp.polyfill("Math.log10",function(a){if(a)return a;return function(a){return Math.log(a)/Math.LN10}},"es6-impl","es3"),$jscomp.polyfill("Math.log2",function(a){if(a)return a;return function(a){return Math.log(a)/Math.LN2}},"es6-impl","es3"),$jscomp.polyfill("Math.sign",function(a){if(a)return a;return function(a){return 0===(a=Number(a))||isNaN(a)?a:0<a?1:-1}},"es6-impl","es3"),$jscomp.polyfill("Math.sinh",function(a){if(a)return a;var b=Math.exp;return function(a){return 0===(a=Number(a))?a:(b(a)-b(-a))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.tanh",function(a){if(a)return a;return function(a){if(0===(a=Number(a)))return a;var b=Math.exp(-2*Math.abs(a)),c=(1-b)/(1+b);return a<0?-c:c}},"es6-impl","es3"),$jscomp.polyfill("Math.trunc",function(a){if(a)return a;return function(a){if(a=Number(a),isNaN(a)||a===1/0||a===-1/0||0===a)return a;var b=Math.floor(Math.abs(a));return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Number.EPSILON",function(a){return Math.pow(2,-52)},"es6-impl","es3"),$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6-impl","es3"),$jscomp.polyfill("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991},"es6-impl","es3"),$jscomp.polyfill("Number.isFinite",function(a){if(a)return a;return function(a){return"number"==typeof a&&(!isNaN(a)&&a!==1/0&&a!==-1/0)}},"es6-impl","es3"),$jscomp.polyfill("Number.isInteger",function(a){if(a)return a;return function(a){return!!Number.isFinite(a)&&a===Math.floor(a)}},"es6-impl","es3"),$jscomp.polyfill("Number.isNaN",function(a){if(a)return a;return function(a){return"number"==typeof a&&isNaN(a)}},"es6-impl","es3"),$jscomp.polyfill("Number.isSafeInteger",function(a){if(a)return a;return function(a){return Number.isInteger(a)&&Math.abs(a)<=Number.MAX_SAFE_INTEGER}},"es6-impl","es3"),$jscomp.polyfill("Object.assign",function(a){if(a)return a;return function(d,e){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(a)for(var b in a)$jscomp.owns(a,b)&&(d[b]=a[b])}return d}},"es6-impl","es3"),$jscomp.polyfill("Object.getOwnPropertySymbols",function(a){return a||function(){return[]}},"es6-impl","es5"),$jscomp.polyfill("Object.is",function(a){if(a)return a;return function(a,b){return a===b?0!==a||1/a==1/b:a!=a&&b!=b}},"es6-impl","es3"),$jscomp.polyfill("Object.setPrototypeOf",function(a){if(a)return a;if("object"!=typeof"".__proto__)return null;return function(a,b){if(a.__proto__=b,a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}},"es6","es5"),$jscomp.EXPOSE_ASYNC_EXECUTOR=!0,$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.polyfill("Promise",function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){return null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_()),this.batch_.push(a),this},AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global.setTimeout;AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)},AsyncExecutor.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var c=b[a];delete b[a];try{c()}catch(f){this.asyncThrow_(f)}}}this.batch_=null},AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b_PENDING=0,b_FULFILLED=1,b_REJECTED=2,a=function(c){this.state_=b_PENDING,this.result_=void 0,this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{c(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this,a=!1;function firstCallWins(c){return function(d){a||(a=!0,c.call(b,d))}}return{resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}},a.prototype.resolveTo_=function(b){b===this?this.reject_(new TypeError("A Promise cannot resolve to itself")):b instanceof a?this.settleSameAsPromise_(b):!function(a){switch(typeof a){case"object":return null!=a;case"function":return 1;default:return}}(b)?this.fulfill_(b):this.resolveToNonPromiseObj_(b)},a.prototype.resolveToNonPromiseObj_=function(b){var a=void 0;try{a=b.then}catch(f){return void this.reject_(f)}"function"==typeof a?this.settleSameAsThenable_(a,b):this.fulfill_(b)},a.prototype.reject_=function(a){this.settle_(b_REJECTED,a)},a.prototype.fulfill_=function(a){this.settle_(b_FULFILLED,a)},a.prototype.settle_=function(c,a){if(this.state_!=b_PENDING)throw new Error("Cannot settle("+c+", "+a|"): Promise already settled in state"+this.state_);this.state_=c,this.result_=a,this.executeOnSettledCallbacks_()},a.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=this.onSettledCallbacks_,a=0;a<b.length;++a)b[a].call(),b[a]=null;this.onSettledCallbacks_=null}};var d=new AsyncExecutor;return a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)},a.prototype.settleSameAsThenable_=function(b,c){var a=this.createResolveAndReject_();try{b.call(c,a.resolve,a.reject)}catch(f){a.reject(f)}},a.prototype.then=function(e,f){var b,c,d=new a(function(a,d){b=a,c=d});function createCallback(a,d){return"function"==typeof a?function(d){try{b(a(d))}catch(g){c(g)}}:d}return this.callWhenSettled_(createCallback(e,b),createCallback(f,c)),d},a.prototype.catch=function(a){return this.then(void 0,a)},a.prototype.callWhenSettled_=function(c,e){var a=this;function callback(){switch(a.state_){case b_FULFILLED:c(a.result_);break;case b_REJECTED:e(a.result_);break;default:throw new Error("Unexpected state: "+a.state_)}}null==this.onSettledCallbacks_?d.asyncExecute(callback):this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})},a.resolve=function(b){return b instanceof a?b:new a(function(a,c){a(b)})},a.reject=function(b){return new a(function(c,a){a(b)})},a.race=function(b){return new a(function(e,f){for(var d=$jscomp.makeIterator(b),c=d.next();!c.done;c=d.next())a.resolve(c.value).callWhenSettled_(e,f)})},a.all=function(d){var c=$jscomp.makeIterator(d),b=c.next();return b.done?a.resolve([]):new a(function(f,g){var d=[],e=0;function onFulfilled(a){return function(b){d[a]=b,0==--e&&f(d)}}for(;d.push(void 0),e++,a.resolve(b.value).callWhenSettled_(onFulfilled(d.length-1),g),!(b=c.next()).done;);})},$jscomp.EXPOSE_ASYNC_EXECUTOR&&(a.$jscomp$new$AsyncExecutor=function(){return new AsyncExecutor}),a},"es6-impl","es3"),$jscomp.polyfill("Reflect.apply",function(a){if(a)return a;var c=Function.prototype.apply;return function(d,b,a){return c.call(d,b,a)}},"es6","es3"),$jscomp.polyfill("Reflect.construct",function(a){if(a)return a;return function(b,d,a){void 0===a&&(a=b);var e=a.prototype||Object.prototype,c=Object.create(e);return Reflect.apply(b,c,d)||c}},"es6","es5"),$jscomp.polyfill("Reflect.defineProperty",function(a){if(a)return a;return function(d,c,b){try{Object.defineProperty(d,c,b);var a=Object.getOwnPropertyDescriptor(d,c);return a?a.configurable===(b.configurable||!1)&&a.enumerable===(b.enumerable||!1)&&("value"in a?a.value===b.value&&a.writable===(b.writable||!1):a.get===b.get&&a.set===b.set):!1}catch(e){return!1}}},"es6","es5"),$jscomp.polyfill("Reflect.deleteProperty",function(a){if(a)return a;return function(b,a){if(!$jscomp.owns(b,a))return!0;try{return delete b[a]}catch(c){return!1}}},"es6","es3"),$jscomp.polyfill("Reflect.getOwnPropertyDescriptor",function(a){return a||Object.getOwnPropertyDescriptor},"es6","es5"),$jscomp.polyfill("Reflect.getPrototypeOf",function(a){return a||Object.getPrototypeOf},"es6","es5"),$jscomp.findDescriptor=function(d,c){for(var a=d;a;){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b)return b;a=Reflect.getPrototypeOf(a)}},$jscomp.polyfill("Reflect.get",function(a){if(a)return a;return function(c,b,d){if(arguments.length<=2)return c[b];var a=$jscomp.findDescriptor(c,b);return a?a.get?a.get.call(d):a.value:void 0}},"es6","es5"),$jscomp.polyfill("Reflect.has",function(a){if(a)return a;return function(b,a){return a in b}},"es6","es3"),$jscomp.polyfill("Reflect.isExtensible",function(a){return a||("function"==typeof Object.isExtensible?Object.isExtensible:function(){return!0})},"es6","es3"),$jscomp.polyfill("Reflect.ownKeys",function(b){if(b)return b;var a="jscomp_symbol_";function isSymbol(b){return b.substring(0,a.length)==a}return function(d){for(var e=[],b=Object.getOwnPropertyNames(d),c=Object.getOwnPropertySymbols(d),a=0;a<b.length;a++)(isSymbol(b[a])?c:e).push(b[a]);return e.concat(c)}},"es6","es5"),$jscomp.polyfill("Reflect.preventExtensions",function(a){if(a)return a;if("function"!=typeof Object.preventExtensions)return function(){return!1};return function(a){return Object.preventExtensions(a),!Object.isExtensible(a)}},"es6","es3"),$jscomp.polyfill("Reflect.set",function(a){if(a)return a;return function(a,c,d,e){var b=$jscomp.findDescriptor(a,c);return b?b.set?(b.set.call(3<arguments.length?e:a,d),!0):!(!b.writable||Object.isFrozen(a))&&(a[c]=d,!0):!!Reflect.isExtensible(a)&&(a[c]=d,!0)}},"es6","es5"),$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if("object"!=typeof"".__proto__)return null;return function(a,b){try{return a.__proto__=b,a.__proto__===b}catch(c){return!1}}},"es6","es5"),$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.polyfill("Set",function(b){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{b=b;var d=Object.seal({x:4}),c=new b($jscomp.makeIterator([d]));if(!c.has(d)||1!=c.size||c.add(d)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var e=c.entries(),a=e.next();return a.done||a.value[0]!=d||a.value[1]!=d?!1:!(a=e.next()).done&&a.value[0]!=d&&4==a.value[0].x&&a.value[1]==a.value[0]&&e.next().done}catch(f){return!1}}())return b;$jscomp.initSymbol(),$jscomp.initSymbolIterator();var a=function(a){if(this.map_=new Map,a)for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.add(c)}this.size=this.map_.size};return a.prototype.add=function(a){return this.map_.set(a,a),this.size=this.map_.size,this},a.prototype.delete=function(b){var a=this.map_.delete(b);return this.size=this.map_.size,a},a.prototype.clear=function(){this.map_.clear(),this.size=0},a.prototype.has=function(a){return this.map_.has(a)},a.prototype.entries=function(){return this.map_.entries()},a.prototype.values=function(){return this.map_.values()},a.prototype[Symbol.iterator]=a.prototype.values,a.prototype.forEach=function(b,a){var c=this;this.map_.forEach(function(d){return b.call(a,d,d,c)})},a},"es6-impl","es3"),$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""},$jscomp.polyfill("String.prototype.codePointAt",function(a){if(a)return a;return function(a){var d=$jscomp.checkStringArgs(this,null,"codePointAt"),e=d.length;if(0<=(a=Number(a)||0)&&a<e){a|=0;var b=d.charCodeAt(a);if(b<55296||56319<b||a+1===e)return b;var c=d.charCodeAt(a+1);return c<56320||57343<c?b:1024*(b-55296)+c+9216}}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.endsWith",function(a){if(a)return a;return function(a,b){var c=$jscomp.checkStringArgs(this,a,"endsWith");a+="",void 0===b&&(b=c.length);for(var e=Math.max(0,Math.min(0|b,c.length)),d=a.length;0<d&&0<e;)if(c[--e]!=a[--d])return!1;return d<=0}},"es6-impl","es3"),$jscomp.polyfill("String.fromCodePoint",function(a){if(a)return a;return function(d){for(var b="",c=0;c<arguments.length;c++){var a=Number(arguments[c]);if(a<0||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);a<=65535?b+=String.fromCharCode(a):(a-=65536,b+=String.fromCharCode(a>>>10&1023|55296),b+=String.fromCharCode(1023&a|56320))}return b}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.includes",function(a){if(a)return a;return function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.repeat",function(a){if(a)return a;return function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(a<0||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var c="";a;)1&a&&(c+=b),(a>>>=1)&&(b+=b);return c}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.startsWith",function(a){if(a)return a;return function(a,f){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var g=b.length,d=a.length,e=Math.max(0,Math.min(0|f,b.length)),c=0;c<d&&e<g;)if(b[e++]!=a[c++])return!1;return d<=c}},"es6-impl","es3"),$jscomp.arrayFromIterator=function(c){for(var b,a=[];!(b=c.next()).done;)a.push(b.value);return a},$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))},$jscomp.inherits=function(a,b){function tempCtor(){}for(var c in tempCtor.prototype=b.prototype,a.prototype=new tempCtor,a.prototype.constructor=a,b)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]},$jscomp.polyfill("WeakSet",function(b){if(function(){if(b&&Object.seal)try{var c=Object.seal({}),d=Object.seal({}),a=new b([c]);return!a.has(c)||a.has(d)?void 0:(a.delete(c),a.add(d),!a.has(c)&&a.has(d))}catch(e){return}}())return b;var a=function(a){if(this.map_=new WeakMap,a){$jscomp.initSymbol(),$jscomp.initSymbolIterator();for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.add(c)}}};return a.prototype.add=function(a){return this.map_.set(a,!0),this},a.prototype.has=function(a){return this.map_.has(a)},a.prototype.delete=function(a){return this.map_.delete(a)},a},"es6-impl","es3");try{-1==Array.prototype.values.toString().indexOf("[native code]")&&delete Array.prototype.values}catch(a){}var Ext=Ext||{};Ext.Boot=Ext.Boot||function(m){function k(){var a,c,e,b,d=!1,f=Array.prototype.shift.call(arguments);for("boolean"==typeof arguments[arguments.length-1]&&(d=Array.prototype.pop.call(arguments)),e=arguments.length,a=0;a<e;a++)if("object"==typeof(b=arguments[a]))for(c in b)f[d?c.toLowerCase():c]=b[c];return f}var c=document,f=[],j={disableCaching:!(/[?&](?:cache|disableCacheBuster)\b/i.test(location.search)||!/http[s]?\:/i.test(location.href)||/(^|[ ;])ext-cache=1/.test(c.cookie)),disableCachingParam:"_dc",loadDelay:!1,preserveScripts:!0,charset:"UTF-8"},n=/\.css(?:\?|$)/i,h=c.createElement("a"),i="undefined"!=typeof window,e={browser:i,node:!i&&"function"==typeof require,phantom:window&&(window._phantom||window.callPhantom)||/PhantomJS/.test(window.navigator.userAgent)},b=Ext.platformTags={},d=function(b,a,c){if(c&&d(b,c),b&&a&&"object"==typeof a)for(var e in a)b[e]=a[e];return b},g="function"==typeof Object.keys?function(a){return a?Object.keys(a):[]}:function(b){var a,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(a);return c},a={loading:0,loaded:0,apply:d,env:e,config:j,assetConfig:{},scripts:{},currentFile:null,suspendedQueue:[],currentRequest:null,syncMode:!1,useElements:!0,listeners:[],Request:Request,Entry:Entry,allowMultipleBrowsers:!1,browserNames:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",dolfin:"Dolfin",edge:"Edge",webosbrowser:"webOSBrowser",chromeMobile:"ChromeMobile",chromeiOS:"ChromeiOS",silk:"Silk",other:"Other"},osNames:{ios:"iOS",android:"Android",windowsPhone:"WindowsPhone",webos:"webOS",blackberry:"BlackBerry",rimTablet:"RIMTablet",mac:"MacOS",win:"Windows",tizen:"Tizen",linux:"Linux",bada:"Bada",chromeOS:"ChromeOS",other:"Other"},browserPrefixes:{ie:"MSIE ",edge:"Edge/",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"OPR/",dolfin:"Dolfin/",webosbrowser:"wOSBrowser/",chromeMobile:"CrMo/",chromeiOS:"CriOS/",silk:"Silk/"},browserPriority:["edge","opera","dolfin","webosbrowser","silk","chromeiOS","chromeMobile","ie","firefox","safari","chrome"],osPrefixes:{tizen:"(Tizen )",ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",windowsPhone:"Windows Phone ",blackberry:"(?:BlackBerry|BB)(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/",chromeOS:"CrOS "},fallbackOSPrefixes:{windows:"win",mac:"mac",linux:"linux"},devicePrefixes:{iPhone:"iPhone",iPod:"iPod",iPad:"iPad"},maxIEVersion:12,detectPlatformTags:function(){var c=this,e=navigator.userAgent,h=/Mobile(\/|\s)/.test(e),d=document.createElement("div"),n=function(){var i,f,k,h,b,m,g,a,j,d={};for(m=c.browserPriority.length,b=0;b<m;b++)h=c.browserPriority[b],j?a=0:(k=c.browserPrefixes[h],(a=(g=e.match(new RegExp("("+k+")([\\w\\._]+)")))&&1<g.length?parseInt(g[2]):0)&&(j=!0)),d[h]=a;if(d.ie){var l=document.documentMode;8<=l&&(d.ie=l)}for(a=d.ie||!1,i=Math.max(a,c.maxIEVersion),b=8;b<=i;++b)d[(f="ie"+b)+"m"]=a?a<=b:0,d[f]=a?a===b:0,d[f+"p"]=a?b<=a:0;return d}(),p=function(){var k,d,f,b,l,a,h,j,m,i={};for(l=(f=g(c.osPrefixes)).length,m=b=0;b<l;b++)d=f[b],k=c.osPrefixes[d],(j=!(h=(a=e.match(new RegExp("("+k+")([^\\s;]+)")))?a[1]:null)||"HTC_"!==h&&"Silk/"!==h?a&&1<a.length?parseFloat(a[a.length-1]):0:2.3)&&m++,i[d]=j;for(l=(f=g(c.fallbackOSPrefixes)).length,b=0;b<l;b++)d=f[b],0===m?(k=c.fallbackOSPrefixes[d],a=e.toLowerCase().match(new RegExp(k)),i[d]=!!a||0):i[d]=0;return i}(),o=function(){var i,d,b,a,j,h,f={};for(j=(b=g(c.devicePrefixes)).length,a=0;a<j;a++)d=b[a],i=c.devicePrefixes[d],h=e.match(new RegExp(i)),f[d]=!!h||0;return f}(),f=a.loadPlatformsParam();k(b,n,p,o,f,!0),b.phone=b.iphone||b.ipod||!b.silk&&b.android&&(b.android<3||h)||b.blackberry&&h||b.windowsphone,b.tablet=!b.phone&&(b.ipad||b.android||b.silk||b.rimtablet||b.ie10&&/; Touch/.test(e)),b.touch=function(e,c){void 0===c&&(c=window);var a="on"+e.toLowerCase(),b=a in d;return b||d.setAttribute&&d.removeAttribute&&(d.setAttribute(a,""),b="function"==typeof d[a],void 0!==d[a]&&(d[a]=void 0),d.removeAttribute(a)),b}("touchend")||navigator.maxTouchPoints||navigator.msMaxTouchPoints,b.desktop=!b.phone&&!b.tablet,b.cordova=b.phonegap=!!(window.PhoneGap||window.Cordova||window.cordova),b.webview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(e),b.androidstock=b.android<=4.3&&(b.safari||b.silk),k(b,f,!0)},loadPlatformsParam:function(){var a,b,h,d,i,c,f=window.location.search.substr(1).split("&"),e={},g={};for(a=0;a<f.length;a++)e[(b=f[a].split("="))[0]]=b[1];if(e.platformTags)for(h=(b=e.platformTags.split(",")).length,a=0;a<h;a++)i=(d=b[a].split(":"))[0],c=!0,1<d.length&&("false"!==(c=d[1])&&"0"!==c||(c=!1)),g[i]=c;return g},filterPlatform:function(e,d){e=f.concat(e||f),d=f.concat(d||f);var a,g,i=e.length,h=d.length,c=!i&&h;for(a=0;a<i&&!c;a++)g=e[a],c=!!b[g];for(a=0;a<h&&c;a++)g=d[a],c=!b[g];return c},init:function(){var b,e,g,d,j,h,i,f=c.getElementsByTagName("script"),l=f.length,m=/\/ext(\-[a-z\-]+)?\.js$/;for(h=0;h<l;h++)(e=(b=f[h]).src)&&(g=b.readyState||null,d||m.test(e)&&(a.hasReadyState="readyState"in b,a.hasAsync="async"in b||!a.hasReadyState,d=e),a.scripts[j=a.canonicalUrl(e)]||new Entry({key:j,url:e,done:null===g||"loaded"===g||"complete"===g,el:b,prop:"src"}));d||(d=(b=f[f.length-1]).src,a.hasReadyState="readyState"in b,a.hasAsync="async"in b||!a.hasReadyState),a.baseUrl=d.substring(0,d.lastIndexOf("/")+1),i=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),a.origin=i,a.detectPlatformTags(),Ext.filterPlatform=a.filterPlatform},canonicalUrl:function(f){h.href=f;var d,a,b=h.href,e=j.disableCachingParam,c=e?b.indexOf(e+"="):-1;return 0<c&&("?"===(d=b.charAt(c-1))||"&"===d)&&((a=(a=b.indexOf("&",c))<0?"":b.substring(a))&&"?"===d&&(++c,a=a.substring(1)),b=b.substring(0,c-1)+a),b},getConfig:function(b){return b?a.config[b]:a.config},setConfig:function(b,d){if("string"==typeof b)a.config[b]=d;else for(var c in b)a.setConfig(c,b[c]);return a},getHead:function(){return a.docHead||(a.docHead=c.head||c.getElementsByTagName("head")[0])},create:function(e,c,d){var b=d||{};return b.url=e,b.key=c,a.scripts[c]=new Entry(b)},getEntry:function(d,e){var c=a.canonicalUrl(d),b=a.scripts[c];return b=b||a.create(d,c,e)},registerContent:function(e,c,b){var d={content:b,loaded:!0,css:"css"===c};return a.getEntry(e,d)},processRequest:function(a,b){a.loadEntries(b)},load:function(b){return(b=new Request(b)).sync||a.syncMode?a.loadSync(b):(a.currentRequest?(b.getEntries(),a.suspendedQueue.push(b)):(a.currentRequest=b,a.processRequest(b,!1)),a)},loadSync:function(b){b=new Request(b);return a.syncMode++,a.processRequest(b,!0),a.syncMode--,a},loadBasePrefix:function(b){return(b=new Request(b)).prependBaseUrl=!0,a.load(b)},loadSyncBasePrefix:function(b){return(b=new Request(b)).prependBaseUrl=!0,a.loadSync(b)},requestComplete:function(c){var b;if(a.currentRequest===c)for(a.currentRequest=null;0<a.suspendedQueue.length;)if(!(b=a.suspendedQueue.shift()).done){a.load(b);break}a.currentRequest||0!=a.suspendedQueue.length||a.fireListeners()},isLoading:function(){return!a.currentRequest&&0==a.suspendedQueue.length},fireListeners:function(){for(var b;a.isLoading()&&(b=a.listeners.shift());)b()},onBootReady:function(b){a.isLoading()?a.listeners.push(b):b()},getPathsFromIndexes:function(b,a){return Request.prototype.getPathsFromIndexes(b,a)},createLoadOrderMap:function(a){return Request.prototype.createLoadOrderMap(a)},fetch:function(j,e,i,b){b=void 0===b?!!e:b;function d(){a&&4==a.readyState&&(h=1223===a.status?204:0!==a.status||"file:"!==(self.location||{}).protocol&&"ionp:"!==(self.location||{}).protocol?a.status:200,g=a.responseText,c={content:g,status:h,exception:f},e&&e.call(i,c),a=null)}var c,h,g,a=new XMLHttpRequest,f=!1;b&&(a.onreadystatechange=d);try{a.open("GET",j,b),a.send(null)}catch(o){return f=o,d(),c}return b||d(),c},notifyAll:function(a){a.notifyRequests()}};function Request(b){if(b.$isRequest)return b;var c=(b=b.url?b:{url:b}).url,f=c.charAt?[c]:c,e=b.charset||a.config.charset;d(b,{urls:f,charset:e}),d(this,b)}function Entry(b){if(b.$isEntry)return b;var c,i=b.charset||a.config.charset,h=Ext.manifest,f=h&&h.loader,e=void 0!==b.cache?b.cache:f&&f.cache;a.config.disableCaching&&(void 0===e&&(e=!a.config.disableCaching),!1===e?c=+new Date:!0!==e&&(c=e),c=c&&(f&&f.cacheParam||a.config.disableCachingParam)+"="+c),d(b,{charset:i,buster:c,requests:[]}),d(this,b)}return Entry.prototype={$isEntry:!0,done:!(Request.prototype={$isRequest:!0,createLoadOrderMap:function(d){var a,b,e=d.length,c={};for(a=0;a<e;a++)c[(b=d[a]).path]=b;return c},getLoadIndexes:function(h,b,l,o,p){var m,e,d,g,j,f,k,i,n,c=l[h];if(b[h])return b;for(j=!(b[h]=!0);!j;){for(k in f=!1,b)if(b.hasOwnProperty(k)){if(!(c=l[k]))continue;if(n=this.prepareUrl(c.path),g=a.getEntry(n),!p||!g||!g.done)for(d=c.requires,o&&c.uses&&(d=d.concat(c.uses)),m=d.length,e=0;e<m;e++)b[i=d[e]]||(f=b[i]=!0)}f||(j=!0)}return b},getPathsFromIndexes:function(d,g){var b,f,c,a=[],e=[];for(b in d)d.hasOwnProperty(b)&&d[b]&&a.push(b);for(a.sort(function(a,b){return a-b}),f=a.length,c=0;c<f;c++)e.push(g[a[c]].path);return e},expandUrl:function(a,f,i,j){"string"==typeof a&&(a=[a]);var b=this,e=b.loadOrder,d=b.loadOrderMap;if(e){d=d||b.createLoadOrderMap(e),b.loadOrderMap=d,f=f||{};var c,g,k=a.length,h=[];for(c=0;c<k;c++)(g=d[a[c]])?b.getLoadIndexes(g.idx,f,e,i,j):h.push(a[c]);return b.getPathsFromIndexes(f,e).concat(h)}return a},expandUrls:function(a,i){"string"==typeof a&&(a=[a]);var f,d,e,h,c,b=[],g={},j=a.length;for(d=0;d<j;d++)for(e=0,h=(f=this.expandUrl(a[d],{},i,!0)).length;e<h;e++)g[c=f[e]]||(g[c]=!0,b.push(c));return 0==b.length&&(b=a),b},expandLoadOrder:function(){var b,a=this,c=a.urls;return a.expanded?b=c:(b=this.expandUrls(c,!0),a.expanded=!0),a.urls=b,c.length!=b.length&&(a.sequential=!0),a},getUrls:function(){return this.expandLoadOrder(),this.urls},prepareUrl:function(b){return this.prependBaseUrl?a.baseUrl+b:b},getEntries:function(){var d,e,f,g,b=this,c=b.entries;if(!c){for(c=[],f=b.getUrls(),d=0;d<f.length;d++)g=b.prepareUrl(f[d]),(e=a.getEntry(g,{buster:b.buster,charset:b.charset})).requests.push(b),c.push(e);b.entries=c}return c},loadEntries:function(f){var e,b,a=this,d=a.getEntries(),g=d.length,h=a.loadStart||0;for(void 0!==f&&(a.sync=f),a.loaded=a.loaded||0,a.loading=a.loading||g,b=h;b<g;b++)if(!(!!(e=d[b]).loaded||d[b].load(a.sync))){a.loadStart=b,e.onDone(function(){a.loadEntries(f)});break}a.processLoadedEntries()},processLoadedEntries:function(){var c,b,a=this,d=a.getEntries(),f=d.length,e=a.startIndex||0;if(!a.done){for(c=e;c<f;c++){if(!(b=d[c]).loaded)return void(a.startIndex=c);b.evaluated||b.evaluate(),b.error&&(a.error=!0)}a.notify()}},notify:function(){var b=this;if(!b.done){var e=b.error,d=b[e?"failure":"success"],c="delay"in b?b.delay:e?1:a.config.chainDelay,f=b.scope||b;b.done=!0,d&&(0===c||0<c?setTimeout(function(){d.call(f,b)},c):d.call(f,b)),b.fireListeners(),a.requestComplete(b)}},onDone:function(b){var a=this,c=a.listeners||(a.listeners=[]);a.done?b(a):c.push(b)},fireListeners:function(){var b,a=this.listeners;if(a)for(;b=a.shift();)b(this)}}),evaluated:!1,loaded:!1,isCrossDomain:function(){var b=this;return void 0===b.crossDomain&&(b.crossDomain=0!==b.getLoadUrl().indexOf(a.origin)),b.crossDomain},isCss:function(){var b=this;if(void 0===b.css)if(b.url){var c=a.assetConfig[b.url];b.css=c?"css"===c.type:n.test(b.url)}else b.css=!1;return this.css},getElement:function(e){var d=this,b=d.el;return b||(d.isCss()?(e=e||"link",b=c.createElement(e),"link"==e?(b.rel="stylesheet",d.prop="href"):d.prop="textContent",b.type="text/css"):(e=e||"script",(b=c.createElement(e)).type="text/javascript",d.prop="src",d.charset&&(b.charset=d.charset),a.hasAsync&&(b.async=!1)),d.el=b),b},getLoadUrl:function(){var b=this,c=a.canonicalUrl(b.url);return b.loadUrl||(b.loadUrl=b.buster?c+(-1===c.indexOf("?")?"?":"&")+b.buster:c),b.loadUrl},fetch:function(b){var e=this.getLoadUrl(),d=!!b.async,c=b.complete;a.fetch(e,c,this,d)},onContentLoaded:function(c){var a=this,b=c.status,d=c.content,f=c.exception;this.getLoadUrl();a.loaded=!0,(!f&&0!==b||e.phantom)&&(200<=b&&b<300||304===b||e.phantom||0===b&&0<d.length)?a.content=d:(a.error=!0,a.evaluated=!0)},createLoadElement:function(b){var c=this,d=c.getElement();c.preserve=!0,d.onerror=function(){c.error=!0,b&&b()},a.hasReadyState?d.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||b&&b()}:d.onload=b,d[c.prop]=c.getLoadUrl()},onLoadElementReady:function(){a.getHead().appendChild(this.getElement()),this.evaluated=!0},inject:function(g,l){var b,e,j,i,f=this,d=a.getHead(),k=f.url,h=f.key;return f.isCss()?(f.preserve=!0,i=h.substring(0,h.lastIndexOf("/")+1),(b=c.createElement("base")).href=i,d.firstChild?d.insertBefore(b,d.firstChild):d.appendChild(b),b.href=b.href,k&&(g+="\n/*# sourceURL="+h+" */"),j="styleSheet"in(e=f.getElement("style")),d.appendChild(b),j?(d.appendChild(e),e.styleSheet.cssText=g):(e.textContent=g,d.appendChild(e)),d.removeChild(b)):(k&&(g+="\n//# sourceURL="+h),Ext.globalEval(g)),f},loadCrossDomain:function(){var a=this;return a.createLoadElement(function(){a.loaded=a.evaluated=a.done=!0,a.notifyRequests()}),a.evaluateLoadElement(),!1},loadElement:function(){var a=this;return a.createLoadElement(function(){a.loaded=a.evaluated=a.done=!0,a.notifyRequests()}),a.evaluateLoadElement(),!0},loadSync:function(){var a=this;a.fetch({async:!1,complete:function(b){a.onContentLoaded(b)}}),a.evaluate(),a.notifyRequests()},load:function(c){var b=this;if(!b.loaded){if(b.loading)return!1;if(b.loading=!0,c)b.loadSync();else{if(b.isCrossDomain())return b.loadCrossDomain();if(!b.isCss()&&a.hasReadyState)b.createLoadElement(function(){b.loaded=!0,b.notifyRequests()});else{if(!(!a.useElements||b.isCss()&&e.phantom))return b.loadElement();b.fetch({async:!c,complete:function(a){b.onContentLoaded(a),b.notifyRequests()}})}}}return!0},evaluateContent:function(){this.inject(this.content),this.content=null},evaluateLoadElement:function(){a.getHead().appendChild(this.getElement())},evaluate:function(){var a=this;if(!a.evaluated){if(a.evaluating)return;a.evaluating=!0,void 0!==a.content?a.evaluateContent():a.error||a.evaluateLoadElement(),a.evaluated=a.done=!0,a.cleanup()}},cleanup:function(){var b,c=this,a=c.el;if(a){if(!c.preserve)for(b in c.el=null,a.parentNode.removeChild(a),a)try{b!==c.prop&&(a[b]=null),delete a[b]}catch(o){}a.onload=a.onerror=a.onreadystatechange=m}},notifyRequests:function(){var a,b=this.requests,d=b.length;for(a=0;a<d;a++)b[a].processLoadedEntries();this.done&&this.fireListeners()},onDone:function(b){var a=this,c=a.listeners||(a.listeners=[]);a.done?b(a):c.push(b)},fireListeners:function(){var b,a=this.listeners;if(a&&0<a.length)for(;b=a.shift();)b(this)}},Ext.disableCacheBuster=function(b,d){var a=new Date;a.setTime(a.getTime()+24*(b?3650:-1)*60*60*1e3),a=a.toGMTString(),c.cookie="ext-cache=1; expires="+a+"; path="+(d||"/")},a.init(),a}(function(){}),Ext.globalEval=Ext.globalEval||(this.execScript?function(a){execScript(a)}:function(a){eval.call(window,a)}),Function.prototype.bind||function(){var a=Array.prototype.slice,b=function(d){var b=a.call(arguments,1),c=this;return b.length?function(){var e=arguments;return c.apply(d,e.length?b.concat(a.call(e)):b)}:(b=null,function(){return c.apply(d,arguments)})};(Function.prototype.bind=b).$extjs=!0}(),Ext.setResourcePath=function(b,d){var a=Ext.manifest||(Ext.manifest={}),c=a.resources||(a.resources={});a&&("string"!=typeof b?Ext.apply(c,b):c[b]=d,a.resources=c)},Ext.getResourcePath=function(b,f,d){"string"!=typeof b&&(f=b.pool,d=b.packageName,b=b.path);var e=Ext.manifest,g=e&&e.resources,a=g[f],c=[];return null==a&&null==(a=g.path)&&(a="resources"),a&&c.push(a),d&&c.push(d),c.push(b),c.join("/")};var Ext=Ext||{};!function(){function a(){}function f(){}function e(a){return a}var l,d=this,c=Object.prototype.toString,b=["valueOf","toLocaleString","toString","constructor"],g=function(){var a=g.caller.caller;return a.$owner.prototype[a.$name].apply(this,arguments)},k=Ext.manifest||{},i=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,j=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;for(l in Ext.global=d,Ext.now=Date.now||(Date.now=function(){return+new Date}),Ext.ticks=d.performance&&d.performance.now?function(){return performance.now()}:Ext.now,Ext._startTime=Ext.ticks(),a.$nullFn=e.$nullFn=a.$emptyFn=e.$identityFn=f.$nullFn=!0,f.$privacy="framework",Ext.suspendLayouts=Ext.resumeLayouts=a,{toString:1})b=null;function addInstanceOverrides(d,e,c){var a,b;for(a in c)c.hasOwnProperty(a)&&("function"==typeof(b=c[a])&&(b.$name=a,b.$owner=e,b.$previous=d.hasOwnProperty(a)?d[a]:g),d[a]=b)}Ext.enumerables=b,Ext.apply=function(c,a,g){if(g&&Ext.apply(c,g),c&&a&&"object"==typeof a){var e,f,d;for(e in a)c[e]=a[e];if(b)for(f=b.length;f--;)d=b[f],a.hasOwnProperty(d)&&(c[d]=a[d])}return c},Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{}),Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:!1,enableListenerCollection:!0,name:Ext.sandboxName||"Ext",privateFn:f,emptyFn:a,identityFn:e,frameStartTime:Ext.now(),manifest:k,enableAria:!0,enableAriaButtons:!0,enableAriaPanels:!0,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",makeIdSelector:function(a){return"#"+a},id:function(a,c){if(a&&a.id)return a.id;var b=(c||Ext.idPrefix)+ ++Ext.idSeed;return a&&(a.id=b),b},returnId:function(a){return a.getId()},returnTrue:function(){return!0},emptyString:new String,baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(Moz.+|MS.+|webkit.+)/,canonicalEventName:function(a){return Ext.$eventNameMap[a]||(Ext.$eventNameMap[a]=Ext.$vendorEventRe.test(a)?a:a.toLowerCase())},applyIf:function(b,c){var a;if(b)for(a in c)void 0===b[a]&&(b[a]=c[a]);return b},destroy:function(){var b,a,c=arguments.length;for(b=0;b<c;b++)(a=arguments[b])&&(Ext.isArray(a)?this.destroy.apply(this,a):Ext.isFunction(a.destroy)&&a.destroy());return null},destroyMembers:function(c){for(var a,d,b=1,e=arguments,f=e.length;b<f;b++)null!=(a=c[d=e[b]])&&(c[d]=Ext.destroy(a))},override:function(a,b){if(a.$isClass)a.override(b);else if("function"==typeof a)Ext.apply(a.prototype,b);else{var d,c=a.self;c&&c.$isClass?((d=b.privates)&&(delete(b=Ext.apply({},b)).privates,addInstanceOverrides(a,c,d)),addInstanceOverrides(a,c,b)):Ext.apply(a,b)}return a},valueFrom:function(a,b,c){return Ext.isEmpty(a,c)?b:a},isEmpty:function(a,b){return null==a||!b&&""===a||Ext.isArray(a)&&0===a.length},isArray:"isArray"in Array?Array.isArray:function(a){return"[object Array]"===c.call(a)},isDate:function(a){return"[object Date]"===c.call(a)},isMSDate:function(a){return!!Ext.isString(a)&&j.test(a)},isObject:"[object Object]"===c.call(null)?function(a){return null!=a&&"[object Object]"===c.call(a)&&void 0===a.ownerDocument}:function(a){return"[object Object]"===c.call(a)},isSimpleObject:function(a){return a instanceof Object&&a.constructor===Object},isPrimitive:function(b){var a=typeof b;return"string"==a||"number"==a||"boolean"==a},isFunction:"undefined"!=typeof document&&"function"==typeof document.getElementsByTagName("body")?function(a){return!!a&&"[object Function]"===c.call(a)}:function(a){return!!a&&"function"==typeof a},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isString:function(a){return"string"==typeof a},isBoolean:function(a){return"boolean"==typeof a},isElement:function(a){return!!a&&1===a.nodeType},isTextNode:function(a){return!!a&&"#text"===a.nodeName},isDefined:function(a){return void 0!==a},isIterable:function(a){return!(!a||"number"!=typeof a.length||"string"==typeof a||Ext.isFunction(a))&&(a.propertyIsEnumerable?!(!a.hasOwnProperty("length")||a.propertyIsEnumerable("length"))||i.test(c.call(a)):!!a.item)},isDebugEnabled:a,clone:function(a){if(null==a)return a;if(a.nodeType&&a.cloneNode)return a.cloneNode(!0);var e,i,f,d,h,g=c.call(a);if("[object Date]"===g)return new Date(a.getTime());if("[object Array]"===g)for(e=a.length,d=[];e--;)d[e]=Ext.clone(a[e]);else if("[object Object]"===g&&a.constructor===Object){for(h in d={},a)d[h]=Ext.clone(a[h]);if(b)for(i=b.length;i--;)f=b[i],a.hasOwnProperty(f)&&(d[f]=a[f])}return d||a},getUniqueGlobalNamespace:function(){var b,a=this.uniqueGlobalNamespace;if(void 0===a){for(b=0;a="ExtBox"+ ++b,void 0!==d[a];);d[a]=Ext,this.uniqueGlobalNamespace=a}return a},functionFactoryCache:{},cacheableFunctionFactory:function(){var d,b,c,a=Array.prototype.slice.call(arguments),e=this.functionFactoryCache;return Ext.isSandboxed&&0<(c=a.length)&&(a[--c]="var Ext=window."+Ext.name+";"+a[c]),(b=e[d=a.join("")])||(b=Function.prototype.constructor.apply(Function.prototype,a),e[d]=b),b},functionFactory:function(){var a,b=Array.prototype.slice.call(arguments);return Ext.isSandboxed&&0<(a=b.length)&&(b[--a]="var Ext=window."+Ext.name+";"+b[a]),Function.prototype.constructor.apply(Function.prototype,b)},Logger:{log:function(b,a){b&&d.console&&(a&&a in d.console||(a="log"),b="["+a.toUpperCase()+"] "+b,d.console[a](b))},verbose:function(a){this.log(a,"verbose")},info:function(a){this.log(a,"info")},warn:function(a){this.log(a,"warn")},error:function(a){throw new Error(a)},deprecate:function(a){this.log(a,"warn")}},getElementById:function(a){return document.getElementById(a)},splitAndUnescape:function(){var a={};return function(e,c){if(!e)return[];if(!c)return[e];var d,b,g=a[c]||(a[c]=new RegExp("\\\\"+c,"g")),f=[];for(d=e.split(c);void 0!==(b=d.shift());){for(;"\\"===b.charAt(b.length-1)&&0<d.length;)b=b+c+d.shift();b=b.replace(g,c),f.push(b)}return f}}()}),Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=!0}(),function(){function toString(){var d=this,b=d.sourceClass,a=d.sourceMethod,c=d.msg;return a&&(c?(a+="(): ",a+=c):a+="()"),b&&(a=a?b+"."+a:b),a||c||""}Ext.Error=function(b){Ext.isString(b)&&(b={msg:b});var a=new Error;return Ext.apply(a,b),a.message=a.message||a.msg,a.toString=toString,a},Ext.apply(Ext.Error,{ignore:!1,raise:function(a){a=a||{},Ext.isString(a)&&(a={msg:a});var c,b=this.raise.caller;if(b===Ext.raise&&(b=b.caller),b&&(!a.sourceMethod&&(c=b.$name)&&(a.sourceMethod=c),!a.sourceClass&&(c=b.$owner)&&(c=c.$className)&&(a.sourceClass=c)),!0!==this.handle(a))throw toString.call(a),new Ext.Error(a)},handle:function(){return this.ignore}})}(),Ext.deprecated=function(a){return Ext.emptyFn},Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)},Ext.Array=function(){var c=Array.prototype,b=c.slice,f=function(){var b,a=[],c=20;if(!a.splice)return!1;for(;c--;)a.push("A");return a.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F"),b=a.length,a.splice(13,0,"XXX"),b+1===a.length}(),i="indexOf"in c,h=!0;try{"undefined"!=typeof document&&b.call(document.getElementsByTagName("body"))}catch(q){h=!1}function g(b,a){return a<0?Math.max(0,b.length+a):Math.min(b.length,a)}var e=function(a,n,m,d){var e=d?d.length:0,i=a.length,f=g(a,n);if(f===i)e&&a.push.apply(a,d);else{var b,k=Math.min(m,i-f),c=f+k,h=c+e-k,l=i-c,j=i-k;if(h<c)for(b=0;b<l;++b)a[h+b]=a[c+b];else if(c<h)for(b=l;b--;)a[h+b]=a[c+b];if(e&&f===j)a.length=j,a.push.apply(a,d);else for(a.length=j+e,b=0;b<e;++b)a[f+b]=d[b]}return a},d=f?function(a,c,b){return a.splice(c,b),a}:function(b,c,a){return e(b,c,a)},j=f?function(a,c,d,b){return b&&b.length?0!==c||d?c<a.length?a.splice.apply(a,[c,d].concat(b)):a.push.apply(a,b):a.unshift.apply(a,b):a.splice(c,d),a}:e,p=f?function(a){return a.splice.apply(a,b.call(arguments,1))}:function(a,f,c){var d=g(a,f),h=a.slice(f,g(a,d+c));return arguments.length<4?e(a,d,c):e(a,d,c,b.call(arguments,3)),h},a={binarySearch:function(h,i,c,b,d){var e,f,g=h.length;for(c instanceof Function?(d=c,c=0,b=g):b instanceof Function?(d=b,b=g):(void 0===c&&(c=0),void 0===b&&(b=g),d=d||a.lexicalCompare),--b;c<=b;)0<=(f=d(i,h[e=c+b>>1]))?c=1+e:f<0&&(b=e-1);return c},defaultCompare:function(a,b){return a<b?-1:b<a?1:0},lexicalCompare:function(a,b){return(a=String(a))<(b=String(b))?-1:b<a?1:0},each:function(c,e,d,g){var b,f=(c=a.from(c)).length;if(!0!==g){for(b=0;b<f;b++)if(!1===e.call(d||c[b],c[b],b,c))return b}else for(b=f-1;-1<b;b--)if(!1===e.call(d||c[b],c[b],b,c))return b;return!0},forEach:"forEach"in c?function(a,c,b){return a.forEach(c,b)}:function(b,d,c){for(var a=0,e=b.length;a<e;a++)d.call(c,b[a],a,b)},indexOf:i?function(a,d,b){return c.indexOf.call(a,d,b)}:function(d,e,b){var a,c=d.length;for(a=b<0?Math.max(0,c+b):b||0;a<c;a++)if(d[a]===e)return a;return-1},contains:i?function(a,b){return-1!==c.indexOf.call(a,b)}:function(b,d){var a,c;for(a=0,c=b.length;a<c;a++)if(b[a]===d)return!0;return!1},toArray:function(a,d,c){if(!a||!a.length)return[];if("string"==typeof a&&(a=a.split("")),h)return b.call(a,d||0,c||a.length);var e,f=[];for(d=d||0,c=c?c<0?a.length+c:c:a.length,e=d;e<c;e++)f.push(a[e]);return f},pluck:function(b,f){var a,e,c,d=[];for(a=0,e=b.length;a<e;a++)c=b[a],d.push(c[f]);return d},map:"map"in c?function(a,c,b){return a.map(c,b)}:function(b,f,d){var a,c=[],e=b.length;for(a=0;a<e;a++)c[a]=f.call(d,b[a],a,b);return c},every:"every"in c?function(a,c,b){return a.every(c,b)}:function(b,d,c){for(var a=0,e=b.length;a<e;++a)if(!d.call(c,b[a],a,b))return!1;return!0},some:"some"in c?function(a,c,b){return a.some(c,b)}:function(b,d,c){for(var a=0,e=b.length;a<e;++a)if(d.call(c,b[a],a,b))return!0;return!1},equals:function(b,c){var a,d=b.length,e=c.length;if(b===c)return!0;if(d!==e)return!1;for(a=0;a<d;++a)if(b[a]!==c[a])return!1;return!0},clean:function(d){for(var a,c=[],b=0,e=d.length;b<e;b++)a=d[b],Ext.isEmpty(a)||c.push(a);return c},unique:function(e){for(var c,b=[],d=0,f=e.length;d<f;d++)c=e[d],-1===a.indexOf(b,c)&&b.push(c);return b},filter:"filter"in c?function(a,c,b){return a.filter(c,b)}:function(b,e,d){for(var c=[],a=0,f=b.length;a<f;a++)e.call(d,b[a],a,b)&&c.push(b[a]);return c},findBy:function(b,e,c){for(var a=0,d=b.length;a<d;a++)if(e.call(c||b,b[a],a))return b[a];return null},from:function(c,e){if(null==c)return[];if(Ext.isArray(c))return e?b.call(c):c;var d=typeof c;return!c||void 0===c.length||"string"==d||"function"==d&&c.apply?[c]:a.toArray(c)},remove:function(b,e){var c=a.indexOf(b,e);return-1!==c&&d(b,c,1),b},removeAt:function(c,b,a){var e=c.length;return 0<=b&&b<e&&(a=a||1,a=Math.min(a,e-b),d(c,b,a)),c},include:function(b,c){a.contains(b,c)||b.push(c)},clone:function(a){return b.call(a)},merge:function(){var c,f,e=b.call(arguments),d=[];for(c=0,f=e.length;c<f;c++)d=d.concat(e[c]);return a.unique(d)},intersect:function(){var g,o,r,e,k,j,q,n,l,c,h,i,m=[],f=b.call(arguments);if(!f.length)return m;for(g=f.length,c=k=0;c<g;c++)j=f[c],(!e||j.length<e.length)&&(e=j,k=c);for(e=a.unique(e),d(f,k,1),q=e.length,g=f.length,c=0;c<q;c++){for(n=e[c],h=l=0;h<g;h++)for(r=(o=f[h]).length,i=0;i<r;i++)if(n===o[i]){l++;break}l===g&&m.push(n)}return m},difference:function(i,f){var e,a,g,c=b.call(i),h=c.length;for(e=0,g=f.length;e<g;e++)for(a=0;a<h;a++)c[a]===f[e]&&(d(c,a,1),a--,h--);return c},reduce:Array.prototype.reduce?function(b,a,c){return 3===arguments.length?Array.prototype.reduce.call(b,a,c):Array.prototype.reduce.call(b,a)}:function(a,f,e){var b=0,d=(a=Object(a)).length>>>0,c=e;if(arguments.length<3)for(;;){if(b in a){c=a[b++];break}if(++b>=d)throw new TypeError("Reduce of empty array with no initial value")}for(;b<d;++b)b in a&&(c=f(c,a[b],b,a));return c},slice:[1,2].slice(1,void 0).length?function(a,c,d){return b.call(a,c,d)}:function(a,c,d){return void 0===c?b.call(a):void 0===d?b.call(a,c):b.call(a,c,d)},sort:function(c,b){return function(b,e){var a,d=b.length,c=new Array(d);for(a=0;a<d;a++)c[a]=a;for(c.sort(function(a,c){return e(b[a],b[c])||a-c}),a=0;a<d;a++)c[a]=b[c[a]];for(a=0;a<d;a++)b[a]=c[a];return b}(c,b||a.lexicalCompare)},flatten:function(b){var a=[];return function rFlatten(e){var b,d,c;for(b=0,d=e.length;b<d;b++)c=e[b],Ext.isArray(c)?rFlatten(c):a.push(c);return a}(b)},min:function(d,e){var c,f,a,b=d[0];for(c=0,f=d.length;c<f;c++)a=d[c],e?1===e(b,a)&&(b=a):a<b&&(b=a);return b},max:function(d,e){var c,f,a,b=d[0];for(c=0,f=d.length;c<f;c++)a=d[c],e?-1===e(b,a)&&(b=a):b<a&&(b=a);return b},mean:function(b){return 0<b.length?a.sum(b)/b.length:void 0},sum:function(b){var a,e,d=0;for(a=0,e=b.length;a<e;a++)d+=b[a];return d},toMap:function(c,b,e){var d={},a=c.length;if(b)if("string"==typeof b)for(;a--;)d[c[a][b]]=a+1;else for(;a--;)d[b.call(e,c[a])]=a+1;else for(;a--;)d[c[a]]=a+1;return d},toValueMap:function(g,d,k,f){var j,i,h,l,c,a,b={},e=g.length;if(d)for((l="string"!=typeof d)||(f=k),i=1===f,j=2===f;e--;)a=g[e],c=l?d.call(k,a):a[d],i?c in b?b[c].push(a):b[c]=[a]:j&&c in b?(h=b[c])instanceof Array?h.push(a):b[c]=[h,a]:b[c]=a;else for(;e--;)b[a=g[e]]=a;return b},erase:d,insert:function(a,b,c){return j(a,b,0,c)},move:function(c,b,d){if(d!==b){var a,f=c[b],e=b<d?1:-1;for(a=b;a!=d;a+=e)c[a]=c[a+e];c[d]=f}},replace:j,splice:p,push:function(a){var b,d=arguments.length,c=1;for(void 0===a?a=[]:Ext.isArray(a)||(a=[a]);c<d;c++)b=arguments[c],Array.prototype.push[Ext.isIterable(b)?"apply":"call"](a,b);return a},numericSortFn:function(a,b){return a-b}};return Ext.each=a.each,a.union=a.merge,Ext.min=a.min,Ext.max=a.max,Ext.sum=a.sum,Ext.mean=a.mean,Ext.flatten=a.flatten,Ext.clean=a.clean,Ext.unique=a.unique,Ext.pluck=a.pluck,Ext.toArray=function(){return a.toArray.apply(a,arguments)},a}(),Ext.String=function(){function h(b,a){return c[a]}function g(c,b){return b in a?a[b]:String.fromCharCode(parseInt(b.substr(2),10))}function e(b,a){return null!=b&&null!=a&&a.length<=b.length}var c,a,b,d,f,m=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,n=/('|\\)/g,i=/([-.*+?\^${}()|\[\]\/\\])/g,k=/^\s+|\s+$/g,j=/\s+/,l=/(^[^a-z]*|[^\w])/gi;return f={insert:function(b,c,a){if(!b)return c;if(!c)return b;var d=b.length;return a||0===a||(a=d),a<0&&(a=d<=(a*=-1)?0:d-a),0===a?b=c+b:a>=b.length?b+=c:b=b.substr(0,a)+c+b.substr(a),b},startsWith:function(b,a,d){var c=e(b,a);return c&&(d&&(b=b.toLowerCase(),a=a.toLowerCase()),c=0===b.lastIndexOf(a,0)),c},endsWith:function(b,a,d){var c=e(b,a);return c&&(d&&(b=b.toLowerCase(),a=a.toLowerCase()),c=-1!==b.indexOf(a,b.length-a.length)),c},createVarName:function(a){return a.replace(l,"")},htmlEncode:function(a){return a?String(a).replace(b,h):a},htmlDecode:function(a){return a?String(a).replace(d,g):a},hasHtmlCharacters:function(a){return b.test(a)},addCharacterEntities:function(g){var e,f,i=[],h=[];for(e in g)f=g[e],a[e]=f,c[f]=e,i.push(f),h.push(e);b=new RegExp("("+i.join("|")+")","g"),d=new RegExp("("+h.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){c={},a={},this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(a,b){return Ext.isEmpty(b)?a:a+(-1===a.indexOf("?")?"?":"&")+b},trim:function(a){return(a=a&&a.replace(m,""))||""},capitalize:function(a){return(a=a&&a.charAt(0).toUpperCase()+a.substr(1))||""},uncapitalize:function(a){return(a=a&&a.charAt(0).toLowerCase()+a.substr(1))||""},ellipsis:function(a,c,e){if(a&&a.length>c){if(e){var b=a.substr(0,c-2),d=Math.max(b.lastIndexOf(" "),b.lastIndexOf("."),b.lastIndexOf("!"),b.lastIndexOf("?"));if(-1!==d&&c-15<=d)return b.substr(0,d)+"..."}return a.substr(0,c-3)+"..."}return a},escapeRegex:function(a){return a.replace(i,"\\$1")},createRegex:function(b,d,e,c){var a=b;return null==b||b.exec||(a=f.escapeRegex(String(b)),!1!==d&&(a="^"+a),!1!==e&&(a+="$"),a=new RegExp(a,!1!==c?"i":"")),a},escape:function(a){return a.replace(n,"\\$1")},toggle:function(b,a,c){return b===a?c:a},leftPad:function(c,d,b){var a=String(c);for(b=b||" ";a.length<d;)a=b+a;return a},repeat:function(c,a,d){a<1&&(a=0);for(var b=[],e=a;e--;)b.push(c);return b.join(d||"")},splitWords:function(a){return a&&"string"==typeof a?a.replace(k,"").split(j):a||[]}}}(),Ext.String.resetCharacterEntities(),Ext.htmlEncode=Ext.String.htmlEncode,Ext.htmlDecode=Ext.String.htmlDecode,Ext.urlAppend=Ext.String.urlAppend,Ext.Date=function(){var a,b=Date,d=/(\\.)/g,h=/([gGhHisucUOPZ]|MS)/,g=/([djzmnYycU]|MS)/,i=/\\/gi,e=/\{(\d+)\}/g,f=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),c=Ext.String.leftPad,j=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return (v != null) ? v : null;"].join("\n");function xf(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(e,function(c,a){return b[a]})}return Date.prototype.toISOString||(Date.prototype.toISOString=function(){var a=this;return c(a.getUTCFullYear(),4,"0")+"-"+c(a.getUTCMonth()+1,2,"0")+"-"+c(a.getUTCDate(),2,"0")+"T"+c(a.getUTCHours(),2,"0")+":"+c(a.getUTCMinutes(),2,"0")+":"+c(a.getUTCSeconds(),2,"0")+"."+c(a.getUTCMilliseconds(),3,"0")+"Z"}),a={now:b.now,toString:function(a){return(a=a||new b).getFullYear()+"-"+c(a.getMonth()+1,2,"0")+"-"+c(a.getDate(),2,"0")+"T"+c(a.getHours(),2,"0")+":"+c(a.getMinutes(),2,"0")+":"+c(a.getSeconds(),2,"0")},getElapsed:function(b,c){return Math.abs(b-(c||a.now()))},useStrict:!1,formatCodeToRegex:function(c,d){var b=a.parseCodes[c];return b&&(b="function"==typeof b?b():b,a.parseCodes[c]=b),b?Ext.applyIf({c:b.c?xf(b.c,d||"{0}"):b.c},b):{g:0,c:null,s:Ext.String.escapeRegex(c)}},parseFunctions:{MS:function(c,d){var a=(c||"").match(f);return a?new b(+((a[1]||"")+a[2])):null},time:function(c,d){var a=parseInt(c,10);return a||0===a?new b(a):null},timestamp:function(c,d){var a=parseInt(c,10);return a||0===a?new b(1e3*a):null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return a.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(b){return a.monthNames[b].substring(0,3)},getShortDayName:function(b){return a.dayNames[b].substring(0,3)},getMonthNumber:function(b){return a.monthNumbers[b.substring(0,1).toUpperCase()+b.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(a){return h.test(a.replace(d,""))},formatContainsDateInfo:function(a){return g.test(a.replace(d,""))},unescapeFormat:function(a){return a.replace(i,"")},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(m.getDay())",j:"m.getDate()",l:"Ext.Date.dayNames[m.getDay()]",N:"(m.getDay() ? m.getDay() : 7)",S:"Ext.Date.getSuffix(m)",w:"m.getDay()",z:"Ext.Date.getDayOfYear(m)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:"Ext.Date.monthNames[m.getMonth()]",m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(m.getMonth())",n:"(m.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(m)",L:"(Ext.Date.isLeapYear(m) ? 1 : 0)",o:"(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:"((m.getHours() % 12) ? m.getHours() % 12 : 12)",G:"m.getHours()",h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(m)",P:"Ext.Date.getGMTOffset(m, true)",T:"Ext.Date.getTimezone(m)",Z:"(m.getTimezoneOffset() * -60)",c:function(){var b,c,e="Y-m-dTH:i:sP",d=[],f=e.length;for(b=0;b<f;++b)c=e.charAt(b),d.push("T"===c?"'T'":a.getFormatCode(c));return d.join(" + ")},C:function(){return"m.toISOString()"},U:"Math.round(m.getTime() / 1000)"},isValid:function(d,j,i,f,g,h,e){f=f||0,g=g||0,h=h||0,e=e||0;var c=a.add(new b(d<100?100:d,j-1,i,f,g,h,e),a.YEAR,d<100?d-100:0);return d===c.getFullYear()&&j===c.getMonth()+1&&i===c.getDate()&&f===c.getHours()&&g===c.getMinutes()&&h===c.getSeconds()&&e===c.getMilliseconds()},parse:function(e,b,c){var d=a.parseFunctions;return null==d[b]&&a.createParser(b),d[b].call(a,e,Ext.isDefined(c)?c:a.useStrict)},parseDate:function(d,b,c){return a.parse(d,b,c)},getFormatCode:function(c){var b=a.formatCodes[c];return b&&(b="function"==typeof b?b():b,a.formatCodes[c]=b),b||"'"+Ext.String.escape(c)+"'"},createFormat:function(f){var e,d=[],c=!1,b="";for(e=0;e<f.length;++e)b=f.charAt(e),c||"\\"!==b?c?(c=!1,d.push("'"+Ext.String.escape(b)+"'")):"\n"===b?d.push("'\\n'"):d.push(a.getFormatCode(b)):c=!0;a.formatFunctions[f]=Ext.functionFactory("var m=this;return "+d.join("+"))},createParser:function(f){for(var b,k=a.parseRegexes.length,i=1,d=[],g=[],c=!1,e="",h=0,m=f.length,l=[];h<m;++h)e=f.charAt(h),c||"\\"!==e?c?(c=!1,g.push(Ext.String.escape(e))):(i+=(b=a.formatCodeToRegex(e,i)).g,g.push(b.s),b.g&&b.c&&(b.calcAtEnd?l.push(b.c):d.push(b.c))):c=!0;d=d.concat(l),a.parseRegexes[k]=new RegExp("^"+g.join("")+"$","i"),a.parseFunctions[f]=Ext.functionFactory("input","strict",xf(j,k,d.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var c=[],b=0;b<7;c.push(a.getShortDayName(b)),++b);return{g:0,c:null,s:"(?:"+c.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+a.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+a.monthNames.join("|")+")"}},M:function(){for(var c=[],b=0;b<12;c.push(a.getShortMonthName(b)),++b);return Ext.applyIf({s:"("+c.join("|")+")"},a.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:!0},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:!0},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var c,e,d=[],b=[a.formatCodeToRegex("Y",1),a.formatCodeToRegex("m",2),a.formatCodeToRegex("d",3),a.formatCodeToRegex("H",4),a.formatCodeToRegex("i",5),a.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",a.formatCodeToRegex("P",8).c,"}else{",a.formatCodeToRegex("O",8).c,"}","}"].join("\n")}];for(c=0,e=b.length;c<e;++c)d.push(b[c].c);return{g:1,c:d.join(""),s:[b[0].s,"(?:","-",b[1].s,"(?:","-",b[2].s,"(?:","(?:T| )?",b[3].s,":",b[4].s,"(?::",b[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(c,b){return a.format(c,b)},isEqual:function(a,b){return a&&b?a.getTime()===b.getTime():!(a||b)},format:function(d,b){var c=a.formatFunctions;return Ext.isDate(d)?(null==c[b]&&a.createFormat(b),c[b].call(d)+""):""},getTimezone:function(a){return a.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(c,b){var a=c.getTimezoneOffset();return(0<a?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(a)/60),2,"0")+(b?":":"")+Ext.String.leftPad(Math.abs(a%60),2,"0")},getDayOfYear:function(c){var d,e=0,b=a.clone(c),f=c.getMonth();for(d=0,b.setDate(1),b.setMonth(0);d<f;b.setMonth(++d))e+=a.getDaysInMonth(b);return e+c.getDate()-1},getWeekOfYear:function(){var c=6048e5;return function(d){var f=b.UTC(d.getFullYear(),d.getMonth(),d.getDate()+3)/864e5,e=Math.floor(f/7),g=new b(e*c).getUTCFullYear();return e-Math.floor(b.UTC(g,0,7)/c)+1}}(),isLeapYear:function(b){var a=b.getFullYear();return!(0!=(3&a)||!(a%100||a%400==0&&a))},getFirstDayOfMonth:function(b){var a=(b.getDay()-(b.getDate()-1))%7;return a<0?7+a:a},getLastDayOfMonth:function(b){return a.getLastDateOfMonth(b).getDay()},getFirstDateOfMonth:function(a){return new b(a.getFullYear(),a.getMonth(),1)},getLastDateOfMonth:function(c){return new b(c.getFullYear(),c.getMonth(),a.getDaysInMonth(c))},getDaysInMonth:function(){var b=[31,28,31,30,31,30,31,31,30,31,30,31];return function(c){var d=c.getMonth();return 1===d&&a.isLeapYear(c)?29:b[d]}}(),getSuffix:function(a){switch(a.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(a){return new b(a.getTime())},isDST:function(a){return new b(a.getFullYear(),0,1).getTimezoneOffset()!==a.getTimezoneOffset()},clearTime:function(b,f){if(isNaN(b.getTime()))return b;if(f)return a.clearTime(a.clone(b));var c,d,e=b.getDate();if(b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0),b.getDate()!==e){for(c=1,d=a.add(b,a.HOUR,c);d.getDate()!==e;c++,d=a.add(b,a.HOUR,c));b.setDate(e),b.setHours(d.getHours())}return b},add:function(f,h,c){var d,g,b=a.clone(f),e=0;if(!h||0===c)return b;if(g=c-parseInt(c,10),c=parseInt(c,10))switch(h.toLowerCase()){case a.MILLI:b.setTime(b.getTime()+c);break;case a.SECOND:b.setTime(b.getTime()+1e3*c);break;case a.MINUTE:b.setTime(b.getTime()+60*c*1e3);break;case a.HOUR:b.setTime(b.getTime()+60*c*60*1e3);break;case a.DAY:b.setDate(b.getDate()+c);break;case a.MONTH:28<(d=f.getDate())&&(d=Math.min(d,a.getLastDateOfMonth(a.add(a.getFirstDateOfMonth(f),a.MONTH,c)).getDate())),b.setDate(d),b.setMonth(f.getMonth()+c);break;case a.YEAR:28<(d=f.getDate())&&(d=Math.min(d,a.getLastDateOfMonth(a.add(a.getFirstDateOfMonth(f),a.YEAR,c)).getDate())),b.setDate(d),b.setFullYear(f.getFullYear()+c)}if(g){switch(h.toLowerCase()){case a.MILLI:e=1;break;case a.SECOND:e=1e3;break;case a.MINUTE:e=6e4;break;case a.HOUR:e=36e5;break;case a.DAY:e=864e5;break;case a.MONTH:e=864e5*(d=a.getDaysInMonth(b));break;case a.YEAR:e=864e5*(d=a.isLeapYear(b)?366:365)}e&&b.setTime(b.getTime()+e*g)}return b},subtract:function(d,b,c){return a.add(d,b,-c)},between:function(c,b,d){var a=c.getTime();return b.getTime()<=a&&a<=d.getTime()},compat:function(){var c,f,e,d,g=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],h=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],j=g.length,i=h.length;for(d=0;d<j;d++)b[f=g[d]]=a[f];for(c=0;c<i;c++)e=h[c],b.prototype[e]=function(){var b=Array.prototype.slice.call(arguments);return b.unshift(this),a[e].apply(a,b)}},diff:function(e,d,f){var b,c=d-e;switch(f){case a.MILLI:return c;case a.SECOND:return Math.floor(c/1e3);case a.MINUTE:return Math.floor(c/6e4);case a.HOUR:return Math.floor(c/36e5);case a.DAY:return Math.floor(c/864e5);case"w":return Math.floor(c/6048e5);case a.MONTH:return b=12*d.getFullYear()+d.getMonth()-(12*e.getFullYear()+e.getMonth()),a.add(e,f,b)>d?b-1:b;case a.YEAR:return b=d.getFullYear()-e.getFullYear(),a.add(e,f,b)>d?b-1:b}},align:function(e,f,d){var c=new b(+e);switch(f.toLowerCase()){case a.MILLI:return c;case a.SECOND:return c.setUTCSeconds(c.getUTCSeconds()-c.getUTCSeconds()%d),c.setUTCMilliseconds(0),c;case a.MINUTE:return c.setUTCMinutes(c.getUTCMinutes()-c.getUTCMinutes()%d),c.setUTCSeconds(0),c.setUTCMilliseconds(0),c;case a.HOUR:return c.setUTCHours(c.getUTCHours()-c.getUTCHours()%d),c.setUTCMinutes(0),c.setUTCSeconds(0),c.setUTCMilliseconds(0),c;case a.DAY:return 7!==d&&14!==d||c.setUTCDate(c.getUTCDate()-c.getUTCDay()+1),c.setUTCHours(0),c.setUTCMinutes(0),c.setUTCSeconds(0),c.setUTCMilliseconds(0),c;case a.MONTH:return c.setUTCMonth(c.getUTCMonth()-(c.getUTCMonth()-1)%d,1),c.setUTCHours(0),c.setUTCMinutes(0),c.setUTCSeconds(0),c.setUTCMilliseconds(0),c;case a.YEAR:return c.setUTCFullYear(c.getUTCFullYear()-c.getUTCFullYear()%d,1,1),c.setUTCHours(0),c.setUTCMinutes(0),c.setUTCSeconds(0),c.setUTCMilliseconds(0),e}}}}(),function(){function b(){}var d=/^\?/,f=/(\[):?([^\]]*)\]/g,e=/^([^\[]+)/,c=/\+/g,a=Ext.Object={chain:Object.create||function(a){b.prototype=a;var c=new b;return b.prototype=null,c},clear:function(a){for(var b in a)delete a[b];return a},freeze:Object.freeze?function(b,c){if(b&&"object"==typeof b&&!Object.isFrozen(b)&&(Object.freeze(b),c))for(var d in b)a.freeze(b[d],c);return b}:Ext.identityFn,toQueryObjects:function(e,c,f){var b,h,g=a.toQueryObjects,d=[];if(Ext.isArray(c))for(b=0,h=c.length;b<h;b++)f?d=d.concat(g(e+"["+b+"]",c[b],!0)):d.push({name:e,value:c[b]});else if(Ext.isObject(c))for(b in c)c.hasOwnProperty(b)&&(f?d=d.concat(g(e+"["+b+"]",c[b],!0)):d.push({name:e,value:c[b]}));else d.push({name:e,value:c});return d},toQueryString:function(g,j){var d,e,i,f,b,c=[],h=[];for(d in g)g.hasOwnProperty(d)&&(c=c.concat(a.toQueryObjects(d,g[d],j)));for(e=0,i=c.length;e<i;e++)b=(f=c[e]).value,Ext.isEmpty(b)?b="":Ext.isDate(b)&&(b=Ext.Date.toString(b)),h.push(encodeURIComponent(f.name)+"="+encodeURIComponent(String(b)));return h.join("&")},fromQueryString:function(u,v){var j,o,a,g,n,t,q,h,l,m,k,b,p,s=u.replace(d,"").split("&"),i={};for(n=0,t=s.length;n<t;n++)if(0<(q=s[n]).length)if(a=(a=(o=q.split("="))[0]).replace(c,"%20"),a=decodeURIComponent(a),g=void 0!==(g=o[1])?(g=g.replace(c,"%20"),decodeURIComponent(g)):"",v){if(m=a.match(f),a=a.match(e)[0],k=[],null===m){i[a]=g;continue}for(h=0,l=m.length;h<l;h++)b=2===(b=m[h]).length?"":b.substring(1,b.length-1),k.push(b);for(k.unshift(a),j=i,h=0,l=k.length;h<l;h++)b=k[h],h===l-1?Ext.isArray(j)&&""===b?j.push(g):j[b]=g:(void 0!==j[b]&&"string"!=typeof j[b]||(p=k[h+1],j[b]=Ext.isNumeric(p)||""===p?[]:{}),j=j[b])}else i.hasOwnProperty(a)?(Ext.isArray(i[a])||(i[a]=[i[a]]),i[a].push(g)):i[a]=g;return i},each:function(a,f,c){var e,b,d=Ext.enumerables;if(a){for(b in c=c||a,a)if(a.hasOwnProperty(b)&&!1===f.call(c,b,a[b],a))return;if(d)for(e=d.length;e--;)if(a.hasOwnProperty(b=d[e])&&!1===f.call(c,b,a[b],a))return}},eachValue:function(a,f,c){var e,b,d=Ext.enumerables;for(b in c=c||a,a)if(a.hasOwnProperty(b)&&!1===f.call(c,a[b]))return;if(d)for(e=d.length;e--;)if(a.hasOwnProperty(b=d[e])&&!1===f.call(c,a[b]))return},merge:function(d){for(var f,c,b,e,g=1,j=arguments.length,i=a.merge,h=Ext.clone;g<j;g++)for(c in f=arguments[g])(b=f[c])&&b.constructor===Object?(e=d[c])&&e.constructor===Object?i(e,b):d[c]=h(b):d[c]=b;return d},mergeIf:function(c){for(var d,b,a,e=1,g=arguments.length,f=Ext.clone;e<g;e++)for(b in d=arguments[e])b in c||((a=d[b])&&a.constructor===Object?c[b]=f(a):c[b]=a);return c},getAllKeys:function(c){var a,b=[];for(a in c)b.push(a);return b},getKey:function(b,c){for(var a in b)if(b.hasOwnProperty(a)&&b[a]===c)return a;return null},getValues:function(b){var a,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(b[a]);return c},getKeys:"function"==typeof Object.keys?function(a){return a?Object.keys(a):[]}:function(b){var a,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(a);return c},getSize:function(b){var a,c=0;for(a in b)b.hasOwnProperty(a)&&c++;return c},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},equals:function(){var a=function(b,c){var a;for(a in b)if(b.hasOwnProperty(a)&&b[a]!==c[a])return!1;return!0};return function(b,c){return b===c||(b&&c?a(b,c)&&a(c,b):!b&&!c&&b===c)}}(),fork:function(c){var d,e,b;if(c&&c.constructor===Object)for(e in d=a.chain(c),c)(b=c[e])&&(b.constructor===Object?d[e]=a.fork(b):b instanceof Array&&(d[e]=Ext.Array.clone(b)));else d=c;return d},defineProperty:"defineProperty"in Object?Object.defineProperty:function(b,c,a){Object.prototype.__defineGetter__&&(a.get&&b.__defineGetter__(c,a.get),a.set&&b.__defineSetter__(c,a.set))},classify:function(c){function g(){for(var a,b=0,c=e.length;b<c;b++)this[a=e[b]]=new f[a]}var b,d,h=c,e=[],f={};for(b in c)c.hasOwnProperty(b)&&(d=c[b])&&d.constructor===Object&&(e.push(b),f[b]=a.classify(d));return g.prototype=h,g}};Ext.merge=Ext.Object.merge,Ext.mergeIf=Ext.Object.mergeIf}(),function(){var a,b=[""],c=/([^\d\.])/,f=/[^\d]/g,g=/[\-+]/g,h=/\s/g,e=/_/g,d={classic:1,modern:1};Ext.Version=a=function(k,p){var o,m,d,h,j,l,i,b=this,n=b.padModes;k.isVersion&&(k=k.version),b.version=i=String(k).toLowerCase().replace(e,".").replace(g,""),d=(o=i.charAt(0))in n?(i=i.substring(1),n[o]):p?n[p]:0,b.pad=d,l=i.search(c),b.shortVersion=i,-1!==l&&(b.release=j=i.substr(l,k.length),b.shortVersion=i.substr(0,l),j=a.releaseValueMap[j]||j),b.releaseValue=j||d,b.shortVersion=b.shortVersion.replace(f,""),b.parts=h=i.split(".");for(m=h.length;m--;)h[m]=parseInt(h[m],10);return d===1/0&&h.push(d),b.major=h[0]||d,b.minor=h[1]||d,b.patch=h[2]||d,b.build=h[3]||d,b},a.prototype={isVersion:!0,padModes:{"~":NaN,"^":1/0},release:"",compareTo:function(f){var b,c,d,g=this,m=g.pad,j=g.parts,h=j.length,e=f.isVersion?f:new a(f),n=e.pad,k=e.parts,i=k.length,l=Math.max(h,i);for(b=0;b<l;b++){if((c=b<h?j[b]:m)<(d=b<i?k[b]:n))return-1;if(d<c)return 1}return(c=g.releaseValue)<(d=e.releaseValue)?-1:d<c?1:0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(a){return 0<this.compareTo(a)},isGreaterThanOrEqual:function(a){return 0<=this.compareTo(a)},isLessThan:function(a){return this.compareTo(a)<0},isLessThanOrEqual:function(a){return this.compareTo(a)<=0},equals:function(a){return 0===this.compareTo(a)},match:function(a){return a=String(a),this.version.substr(0,a.length)===a},toArray:function(){var a=this;return[a.getMajor(),a.getMinor(),a.getPatch(),a.getBuild(),a.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(a){return 0<this.compareTo(a)},lt:function(a){return this.compareTo(a)<0},gtEq:function(a){return 0<=this.compareTo(a)},ltEq:function(a){return this.compareTo(a)<=0}},Ext.apply(a,{aliases:{from:{extjs:"ext",core:"core",touch:"modern"},to:{ext:["extjs"],core:["core"],modern:["touch"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(a){return a?isNaN(a)?this.releaseValueMap[a]||a:parseInt(a,10):0},compare:function(b,c){return(b.isVersion?b:new a(b)).compareTo(c)},set:function(g,f,c){var e,b=a.aliases.to[f],d=c.isVersion?c:new a(c);if(g[f]=d,b)for(e=b.length;0<e--;)g[b[e]]=d;return d}}),Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(b){var c=Ext.compatVersions;return(b?c[a.aliases.from[b]||b]:c.ext||c.touch||c.core)||Ext.getVersion(b)},setCompatVersion:function(b,c){a.set(Ext.compatVersions,b,c)},setVersion:function(b,c){return b in d&&(Ext.toolkit=b),Ext.lastRegisteredVersion=a.set(Ext.versions,b,c),this},getVersion:function(c){var b=Ext.versions;return c?b[a.aliases.from[c]||c]:b.ext||b.touch||b.core},checkVersion:function(o,j){var l,c,f,i,g,m,d,e,k,p=Ext.isArray(o),s=a.aliases.from,q=p?o:b,t=q.length,n=Ext.versions,r=n.ext||n.touch;for(p||(b[0]=o),l=0;l<t;++l){if(Ext.isString(d=q[l])){if(0<=d.indexOf(" ")&&(d=d.replace(h,"")),(c=d.indexOf("@"))<0)e=d,k=r;else{if(!(k=n[s[m=d.substring(0,c)]||m])){if(j)return!1;continue}e=d.substring(c+1)}(c=e.indexOf("-"))<0?"+"===e.charAt(c=e.length-1)?(i=e.substring(0,c),g=null):i=g=e:g=(i=0<c?e.substring(0,c):null,e.substring(c+1)),f=!0,i&&(f=(i=new a(i,"~")).ltEq(k)),f&&g&&(f=(g=new a(g,"~")).gtEq(k))}else f=Ext.checkVersion(d.and||d.or,!d.or),d.not&&(f=!f);if(f){if(!j)return!0}else if(j)return!1}return!!j},deprecate:function(b,e,c,d){a.compare(Ext.getVersion(b),e)<1&&c.call(d)}})}(),function(c){var a,e,d=c&&c.packages||{},b=c&&c.compatibility;for(a in d)e=d[a],Ext.setVersion(a,e.version);if(b)if(Ext.isString(b))Ext.setCompatVersion("core",b);else for(a in b)Ext.setCompatVersion(a,b[a]);d.ext||d.touch||(Ext.setVersion("ext","6.0.1.250"),Ext.setVersion("core","6.0.1.250"))}(Ext.manifest),(Ext.env||(Ext.env={})).Browser=function(e,r){var d,o,b,h,u,n=this,s=Ext.Boot.browserPrefixes,j=Ext.Boot.browserNames,t=n.enginePrefixes,k=n.engineNames,i=e.match(new RegExp("((?:"+Ext.Object.getValues(s).join(")|(?:")+"))([\\w\\._]+)")),p=e.match(new RegExp("((?:"+Ext.Object.getValues(t).join(")|(?:")+"))([\\w\\._]+)")),c=j.other,g=k.other,f="",l="",a="",q=!1;if(n.userAgent=e,/Edge\//.test(e)&&(i=e.match(/(Edge\/)([\w.]+)/)),i&&("Safari"===(c=j[Ext.Object.getKey(s,i[1])])&&/^Opera/.test(e)&&(c="Opera"),f=new Ext.Version(i[2])),p&&(g=k[Ext.Object.getKey(t,p[1])],l=new Ext.Version(p[2])),"Trident"===g&&"IE"!==c){c="IE";var m=e.match(/.*rv:(\d+.\d+)/);m&&m.length&&(m=m[1],f=new Ext.Version(m))}if(c&&f&&Ext.setVersion(c,f),e.match(/FB/)&&"Other"===c&&(c=j.safari,g=k.webkit),e.match(/Android.*Chrome/g)&&(c="ChromeMobile"),e.match(/OPR/)&&(c="Opera",i=e.match(/OPR\/(\d+.\d+)/),f=new Ext.Version(i[1])),Ext.apply(this,{engineName:g,engineVersion:l,name:c,version:f}),this.setFlag(c,!0,r),f){if(a=f.getMajor()||"",n.is.IE)for(a=parseInt(a,10),7===(b=document.documentMode)||7===a&&8!==b&&9!==b&&10!==b?a=7:8===b||8===a&&8!==b&&9!==b&&10!==b?a=8:9===b||9===a&&7!==b&&8!==b&&10!==b?a=9:10===b||10===a&&7!==b&&8!==b&&9!==b?a=10:(11===b||11===a&&7!==b&&8!==b&&9!==b&&10!==b)&&(a=11),u=Math.max(a,Ext.Boot.maxIEVersion),d=7;d<=u;++d)o="isIE"+d,a<=d&&(Ext[o+"m"]=!0),a===d&&(Ext[o]=!0),d<=a&&(Ext[o+"p"]=!0);n.is.Opera&&parseInt(a,10)<=12&&(Ext.isOpera12m=!0),Ext.chromeVersion=Ext.isChrome?a:0,Ext.firefoxVersion=Ext.isFirefox?a:0,Ext.ieVersion=Ext.isIE?a:0,Ext.operaVersion=Ext.isOpera?a:0,Ext.safariVersion=Ext.isSafari?a:0,Ext.webKitVersion=Ext.isWebKit?a:0,this.setFlag(c+a,!0,r),this.setFlag(c+f.getShortVersion())}for(d in j)j.hasOwnProperty(d)&&(h=j[d],this.setFlag(h,c===h));for(d in this.setFlag(h),l&&(this.setFlag(g+(l.getMajor()||"")),this.setFlag(g+l.getShortVersion())),k)k.hasOwnProperty(d)&&(h=k[d],this.setFlag(h,g===h,r));this.setFlag("Standalone",!!navigator.standalone),this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(window.top.ripple)),this.setFlag("WebWorks",!!window.blackberry),void 0===window.PhoneGap&&void 0===window.Cordova&&void 0===window.cordova||(q=!0,this.setFlag("PhoneGap"),this.setFlag("Cordova")),/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(e)&&(q=!0),this.setFlag("WebView",q),this.isStrict=Ext.isStrict="CSS1Compat"===document.compatMode,this.isSecure=Ext.isSecure,this.identity=c+a+(this.isStrict?"Strict":"Quirks")},Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},is:function(a){return!!this.is[a]},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(b,a,c){return void 0===a&&(a=!0),this.is[b]=a,this.is[b.toLowerCase()]=a,c&&(Ext["is"+b]=a),this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(b){var a=this.propertyPrefixes[this.engineName];return 0<a.length?a+Ext.String.capitalize(b):b},getPreferredTranslationMethod:function(a){return"object"==typeof a&&"translationMethod"in a&&"auto"!==a.translationMethod?a.translationMethod:"csstransform"}},function(a){Ext.browser=new Ext.env.Browser(a,!0),Ext.userAgent=a.toLowerCase(),Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank"}(Ext.global.navigator.userAgent),Ext.env.OS=function(j,k,b){var a,d,l,f,i,e,g=Ext.Boot.osNames,h=Ext.Boot.osPrefixes,c="",m=this.is;for(d in b=b||Ext.browser,h)if(h.hasOwnProperty(d)&&(l=h[d],f=j.match(new RegExp("(?:"+l+")([^\\s;]+)")))){a=g[d],c=(e=f[1])&&"HTC_"===e||e&&"Silk/"===e?new Ext.Version("2.3"):new Ext.Version(f[f.length-1]);break}for(d in a||(a=g[(j.toLowerCase().match(/mac|win|linux/)||["other"])[0]],c=new Ext.Version("")),this.name=a,this.version=c,k&&this.setFlag(k.replace(/ simulator$/i,"")),this.setFlag(a),c&&(this.setFlag(a+(c.getMajor()||"")),this.setFlag(a+c.getShortVersion())),g)g.hasOwnProperty(d)&&(i=g[d],m.hasOwnProperty(a)||this.setFlag(i,a===i));"iOS"===this.name&&568===window.screen.height&&this.setFlag("iPhone5"),(b.is.Safari||b.is.Silk)&&((this.is.Android2||this.is.Android3||501===b.version.shortVersion)&&b.setFlag("AndroidStock"),this.is.Android4&&(b.setFlag("AndroidStock"),b.setFlag("AndroidStock4")))},Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(a){return!!this[a]},name:null,version:null,setFlag:function(b,a){return void 0===a&&(a=!0),this.flags&&(this.flags[b]=a),this.is[b]=a,this.is[b.toLowerCase()]=a,this}},function(){var a,c,b,h=Ext.global.navigator,i=h.userAgent,e=Ext.env.OS,f=Ext.is||(Ext.is={});e.prototype.flags=f,Ext.os=a=new e(i,h.platform),c=a.name,Ext["is"+c]=!0,Ext.isMac=f.Mac=f.MacOS;var d=window.location.search.match(/deviceType=(Tablet|Phone)/),g=window.deviceType;d&&d[1]?b=d[1]:"iPhone"===g?b="Phone":"iPad"===g?b="Tablet":a.is.Android||a.is.iOS||a.is.WindowsPhone||!/Windows|Linux|MacOS/.test(c)?b=a.is.iPad||a.is.RIMTablet||a.is.Android3||Ext.browser.is.Silk||a.is.Android&&-1===i.search(/mobile/i)?"Tablet":"Phone":(b="Desktop",Ext.browser.is.WebView=!!Ext.browser.is.Ripple),a.setFlag(b,!0),a.deviceType=b,delete e.prototype.flags}(),Ext.feature={has:function(a){return!!this.has[a]},testElements:{},getTestElement:function(a,b){if(void 0===a)a="div";else if("string"!=typeof a)return a;return b?document.createElement(a):(this.testElements[a]||(this.testElements[a]=document.createElement(a)),this.testElements[a])},isStyleSupported:function(a,d){var b=this.getTestElement(d).style,c=Ext.String.capitalize(a);return void 0!==b[a]||void 0!==b[Ext.browser.getStylePrefix(a)+c]},isStyleSupportedWithoutPrefix:function(b,c){return void 0!==this.getTestElement(c).style[b]},isEventSupported:function(e,d){void 0===d&&(d=window);var a=this.getTestElement(d),b="on"+e.toLowerCase(),c=b in a;return c||a.setAttribute&&a.removeAttribute&&(a.setAttribute(b,""),c="function"==typeof a[b],void 0!==a[b]&&(a[b]=void 0),a.removeAttribute(b)),c},getStyle:function(a,c){var b=a.ownerDocument.defaultView;return((b?b.getComputedStyle(a,null):a.currentStyle)||a.style)[c]},getSupportedPropertyName:function(c,a){var b=Ext.browser.getVendorProperyName(a);return b in c?b:a in c?a:null},detect:function(h){var a,e,b,l,d,c=this,g=document,m=c.toRun||c.tests,i=m.length,f=g.createElement("div"),k=[],j=Ext.supports,n=c.has;for(f.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>',h&&g.body.appendChild(f),l=c.preDetected[Ext.browser.identity]||[];i--;){if(b=m[i],d=l[i],a=b.name,e=b.names,void 0===d){if(!h&&b.ready){k.push(b);continue}d=b.fn.call(c,g,f)}if(a)j[a]=n[a]=d;else if(e)for(;e.length;)j[a=e.pop()]=n[a]=d}h&&g.body.removeChild(f),c.toRun=k},report:function(){var a,b=[],c=this.tests.length;for(a=0;a<c;++a)b.push(this.has[this.tests[a].name]?1:0);Ext.log(Ext.browser.identity+": ["+b.join(",")+"]")},preDetected:{},tests:[{name:"CloneNodeCopiesExpando",fn:function(){var a=document.createElement("div");return a.expandoProp={},a.cloneNode().expandoProp===a.expandoProp}},{name:"CSSPointerEvents",fn:function(a){return"pointerEvents"in a.documentElement.style}},{name:"CSS3BoxShadow",fn:function(a){return"boxShadow"in a.documentElement.style||"WebkitBoxShadow"in a.documentElement.style||"MozBoxShadow"in a.documentElement.style}},{name:"CSS3NegationSelector",fn:function(a){try{a.querySelectorAll("foo:not(bar)")}catch(b){return!1}return!0}},{name:"ClassList",fn:function(a){return!!a.documentElement.classList}},{name:"Canvas",fn:function(){var a=this.getTestElement("canvas");return!!(a&&a.getContext&&a.getContext("2d"))}},{name:"Svg",fn:function(a){return!(!a.createElementNS||!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var b,a=this.getTestElement();return a.innerHTML="\x3c!--[if vml]><br><![endif]--\x3e",b=1===a.childNodes.length,a.innerHTML="",b}},{name:"touchScroll",fn:function(){var a=0;return Ext.os.is.Desktop&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)?a=1:Ext.supports.Touch&&(a=2),a}},{name:"Touch",fn:function(){var a=navigator.msMaxTouchPoints||navigator.maxTouchPoints;return Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)?Ext.supports.TouchEvents&&1!==a||1<a:Ext.supports.TouchEvents||0<a}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"PointerEvents",fn:function(){return navigator.pointerEnabled}},{name:"MSPointerEvents",fn:function(){return navigator.msPointerEnabled}},{name:"Orientation",fn:function(){return"orientation"in window&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation"in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase"in window}},{name:"WebSockets",fn:function(){return"WebSocket"in window}},{name:"Range",fn:function(){return!!document.createRange}},{name:"CreateContextualFragment",fn:function(){var a=!!document.createRange&&document.createRange();return a&&!!a.createContextualFragment}},{name:"History",fn:function(){return"history"in window&&"pushState"in window.history}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return!!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return!!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage"in window&&null!==window.localStorage)return localStorage.setItem("sencha-localstorage-test","test success"),localStorage.removeItem("sencha-localstorage-test"),!0}catch(b){}return!1}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}},{name:"XHRUploadProgress",fn:function(){if(!window.XMLHttpRequest||Ext.browser.is.AndroidStock)return!1;var a=new XMLHttpRequest;return a&&"upload"in a&&"onprogress"in a.upload}},{name:"NumericInputPlaceHolder",fn:function(){return!(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"matchesSelector",fn:function(){var a=document.documentElement,d="matches",e="webkitMatchesSelector",b="msMatchesSelector",c="mozMatchesSelector";return a[d]?d:a[e]?e:a[b]?b:a[c]?c:null}},{name:"RightMargin",ready:!0,fn:function(c,b){var a=c.defaultView;return!(a&&"0px"!==a.getComputedStyle(b.firstChild.firstChild,null).marginRight)}},{name:"DisplayChangeInputSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{name:"TransparentColor",ready:!0,fn:function(c,b,a){return!((a=c.defaultView)&&"transparent"!==a.getComputedStyle(b.lastChild,null).backgroundColor)}},{name:"ComputedStyle",ready:!0,fn:function(b,c,a){return(a=b.defaultView)&&a.getComputedStyle}},{name:"Float",fn:function(a){return"cssFloat"in a.documentElement.style}},{name:"CSS3BorderRadius",ready:!0,fn:function(d){var a,b=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],c=!1;for(a=0;a<b.length;a++)void 0!==d.documentElement.style[b[a]]&&(c=!0);return c&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(i,c){var a="background-image:",b="linear-gradient(left top, black, white)",d=[a+"-webkit-gradient(linear, left top, right bottom, from(black), to(white))",a+b,a+"-moz-linear-gradient(left top, black, white)",a+"-ms-linear-gradient(left top, black, white)",a+"-o-linear-gradient(left top, black, white)"];return c.style.cssText=d.join(";"),-1!==(""+c.style.backgroundImage).indexOf("gradient")&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(a){return"onmouseenter"in a.documentElement&&"onmouseleave"in a.documentElement}},{name:"MouseWheel",fn:function(a){return"onmousewheel"in a.documentElement}},{name:"Opacity",fn:function(b,a){return!Ext.isIE8&&(a.firstChild.style.cssText="opacity:0.73","0.73"==a.firstChild.style.opacity)}},{name:"Placeholder",fn:function(a){return"placeholder"in a.createElement("input")}},{name:"Direct2DBug",fn:function(a){return Ext.isString(a.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(a){return"getBoundingClientRect"in a.documentElement}},{name:"RotatedBoundingClientRect",ready:!0,fn:function(e){var d=e.body,c=!1,b=e.createElement("div"),a=b.style;return b.getBoundingClientRect&&(a.position="absolute",a.top="0",a.WebkitTransform=a.MozTransform=a.msTransform=a.OTransform=a.transform="rotate(90deg)",a.width="100px",a.height="30px",d.appendChild(b),c=100!==b.getBoundingClientRect().height,d.removeChild(b)),c}},{name:"ChildContentClearedWhenSettingInnerHTML",ready:!0,fn:function(){var b,a=this.getTestElement();return a.innerHTML="<div>a</div>",b=a.firstChild,a.innerHTML="<div>b</div>","a"!==b.innerHTML}},{name:"IncludePaddingInWidthCalculation",ready:!0,fn:function(b,a){return 210===a.childNodes[1].firstChild.offsetWidth}},{name:"IncludePaddingInHeightCalculation",ready:!0,fn:function(b,a){return 210===a.childNodes[1].firstChild.offsetHeight}},{name:"TextAreaMaxLength",fn:function(a){return"maxlength"in a.createElement("textarea")}},{name:"GetPositionPercentage",ready:!0,fn:function(b,a){return"10%"===Ext.feature.getStyle(a.childNodes[2],"left")}},{name:"PercentageHeightOverflowBug",ready:!0,fn:function(d){var b,a,c=!1;return Ext.getScrollbarSize().height&&((b=(a=this.getTestElement()).style).height="50px",b.width="50px",b.overflow="auto",b.position="absolute",a.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join(""),d.body.appendChild(a),50===a.firstChild.offsetHeight&&(c=!0),d.body.removeChild(a)),c}},{name:"xOriginBug",ready:!0,fn:function(e,b){b.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var a=document.getElementById("b1").getBoundingClientRect(),c=document.getElementById("b2").getBoundingClientRect(),d=document.getElementById("b3").getBoundingClientRect();return c.left!==a.left&&d.right!==a.right}},{name:"ScrollWidthInlinePaddingBug",ready:!0,fn:function(c){var a,b,d=!1;return(a=(b=c.createElement("div")).style).height="50px",a.width="50px",a.padding="10px",a.overflow="hidden",a.position="absolute",b.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>',c.body.appendChild(b),70===b.scrollWidth&&(d=!0),c.body.removeChild(b),d}},{name:"rtlVertScrollbarOnRight",ready:!0,fn:function(d,c){c.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var a=c.firstChild,b=a.firstChild;return b.offsetLeft+b.offsetWidth!==a.offsetLeft+a.offsetWidth}},{name:"rtlVertScrollbarOverflowBug",ready:!0,fn:function(c,b){b.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var a=b.firstChild;return a.clientHeight===a.offsetHeight}},{identity:"defineProperty",fn:function(){return!Ext.isIE8m||(Ext.Object.defineProperty=Ext.emptyFn,!1)}},{identify:"nativeXhr",fn:function(){return"undefined"!=typeof XMLHttpRequest||!(XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){return null}})}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?525<=parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10):!(Ext.isGecko&&!Ext.isWindows||Ext.isOpera&&Ext.operaVersion<12)}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var a=document.documentMode;return"onhashchange"in window&&(void 0===a||7<a)}},{name:"FixedTableWidthBug",ready:!0,fn:function(){if(Ext.isIE8)return!1;var c,a=document.createElement("div"),b=document.createElement("div");return a.setAttribute("style","display:table;table-layout:fixed;"),b.setAttribute("style","display:table-cell;min-width:50px;"),a.appendChild(b),document.body.appendChild(a),a.offsetWidth,a.style.width="25px",c=a.offsetWidth,document.body.removeChild(a),50===c}},{name:"FocusinFocusoutEvents",fn:function(){return!Ext.isGecko}},{name:"AsyncFocusEvents",fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:"accessibility",ready:!0,fn:function(f){var b,c,a,e,d,g=f.body;function getColor(a){var f,b,c=[],e=0;-1!==a.indexOf("rgb(")?c=a.replace("rgb(","").replace(")","").split(", "):-1!==a.indexOf("#")&&(f=7===a.length?/^#(\S\S)(\S\S)(\S\S)$/:/^#(\S)(\S)(\S)$/,(b=a.match(f))&&(c=["0x"+b[1],"0x"+b[2],"0x"+b[3]]));for(var d=0;d<c.length;d++)e+=parseInt(c[d]);return e}return b=f.createElement("div"),c=f.createElement("img"),a=b.style,Ext.apply(a,{width:"2px",position:"absolute",clip:"rect(1px,1px,1px,1px)",borderWidth:"1px",borderStyle:"solid",borderTopTolor:"#f00",borderRightColor:"#ff0",backgroundColor:"#fff",backgroundImage:"url("+Ext.BLANK_IMAGE_URL+")"}),c.alt="",c.src=Ext.BLANK_IMAGE_URL,b.appendChild(c),g.appendChild(b),d=(a=b.currentStyle||b.style).backgroundImage,e={Images:1===c.offsetWidth&&"uninitialized"!==c.readyState,BackgroundImages:!(null!==d&&("none"===d||"url(invalid-url:)"===d)),BorderColors:a.borderTopColor!==a.borderRightColor,LightOnDark:0<getColor(a.color)-getColor(a.backgroundColor)},Ext.supports.HighContrastMode=!e.BackgroundImages,g.removeChild(b),b=c=null,e}},0]},Ext.feature.tests.pop(),Ext.supports={},Ext.feature.detect(),Ext.Function=function(){function j(){Ext.elevateFunction(g)}var f,i=0,c=[],l=[],m=0,e={},d=window,b=Ext.global,h=!(!b.setImmediate||!b.clearImmediate),k=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||function(c){var b=Ext.now(),a=Math.max(0,16-(b-i)),e=d.setTimeout(function(){c(b+a)},a);return i=b+a,e},g=function(){var g,d,a,h=c.length;for(f=null,d=0;d<h;d++)g=(a=c[d])[3],e[g]&&(a[0].apply(a[1]||b,a[2]||l),delete e[g]);c=c.slice(h)},a={flexSetter:function(a){return function(b,e){var c,d;if(null!==b)if("string"!=typeof b){for(c in b)b.hasOwnProperty(c)&&a.call(this,c,b[c]);if(Ext.enumerables)for(d=Ext.enumerables.length;d--;)c=Ext.enumerables[d],b.hasOwnProperty(c)&&a.call(this,c,b[c])}else a.call(this,b,e);return this}},bind:function(f,d,c,a){if(2===arguments.length)return function(){return f.apply(d,arguments)};var g=f,e=Array.prototype.slice;return function(){var f=c||arguments;return!0===a?f=(f=e.call(arguments,0)).concat(c):"number"==typeof a&&(f=e.call(arguments,0),Ext.Array.insert(f,a,c)),g.apply(d||b,f)}},bindCallback:function(b,e,a,d,c){return function(){var f=Ext.Array.slice(arguments);return Ext.callback(b,e,a?a.concat(f):f,d,c)}},pass:function(c,a,b){return Ext.isArray(a)||(a=Ext.isIterable(a)?Ext.Array.clone(a):void 0!==a?[a]:[]),function(){var d=a.slice();return d.push.apply(d,arguments),c.apply(b||this,d)}},alias:function(a,b){return function(){return a[b].apply(a,arguments)}},clone:function(a){return function(){return a.apply(this,arguments)}},createInterceptor:function(c,d,e,a){return Ext.isFunction(d)?(a=Ext.isDefined(a)?a:null,function(){var f=arguments;return!1!==d.apply(e||this||b,f)?c.apply(this||b,f):a}):c},createDelayed:function(a,e,b,c,d){return(b||c)&&(a=Ext.Function.bind(a,b,c,d)),function(){var c=this,b=Array.prototype.slice.call(arguments);setTimeout(function(){Ext.elevateFunction?Ext.elevateFunction(a,c,b):a.apply(c,b)},e)}},defer:function(a,b,d,e,c){return a=Ext.Function.bind(a,d,e,c),0<b?setTimeout(function(){Ext.elevateFunction?Ext.elevateFunction(a):a()},b):(a(),0)},interval:function(a,c,d,e,b){return a=Ext.Function.bind(a,d,e,b),setInterval(function(){Ext.elevateFunction?Ext.elevateFunction(a):a()},c)},createSequence:function(a,b,c){return b?function(){var d=a.apply(this,arguments);return b.apply(c||this,arguments),d}:a},createBuffered:function(b,c,d,e){var a;return function(){var f=e||Array.prototype.slice.call(arguments,0),g=d||this;a&&clearTimeout(a),a=setTimeout(function(){Ext.elevateFunction?Ext.elevateFunction(b,g,f):b.apply(g,f)},c)}},createAnimationFrame:function(f,d,e,c){var b;return c=c||3,function(){var g=e||Array.prototype.slice.call(arguments,0);d=d||this,3===c&&b&&a.cancelAnimationFrame(b),(1&c||!b)&&(b=a.requestAnimationFrame(function(){b=null,f.apply(d,g)}))}},requestAnimationFrame:function(i,d,h){var a=++m,b=Array.prototype.slice.call(arguments,0);return b[3]=a,e[a]=1,c.push(b),f=f||k(Ext.elevateFunction?j:g),a},cancelAnimationFrame:function(a){delete e[a]},createThrottled:function(h,f,a){function g(){Ext.elevateFunction?Ext.elevateFunction(h,a,c):h.apply(a,c),e=Ext.now(),b=null}var d,c,b,e=0;return function(){a=a||this,d=Ext.now()-e,c=arguments,f<=d?(clearTimeout(b),g()):b=b||Ext.defer(g,f-d)}},createBarrier:function(a,c,b){return function(){--a||c.apply(b,arguments)}},interceptBefore:function(b,a,e,d){var c=b[a]||Ext.emptyFn;return b[a]=function(){var a=e.apply(d||this,arguments);return c.apply(this,arguments),a}},interceptAfter:function(b,a,e,d){var c=b[a]||Ext.emptyFn;return b[a]=function(){return c.apply(this,arguments),e.apply(d||this,arguments)}},makeCallback:function(b,a){return function(){return a[b].apply(a,arguments)}},memoize:function(e,c,a){var b={},d=a&&Ext.isFunction(a);return function(g){var f=d?a.apply(c,arguments):g;return f in b||(b[f]=e.apply(c,arguments)),b[f]}}};return Ext.asap=h?function(b,d,c){return null==d&&null==c||(b=a.bind(b,d,c)),setImmediate(function(){Ext.elevateFunction?Ext.elevateFunction(b):b()})}:function(b,d,c){return null==d&&null==c||(b=a.bind(b,d,c)),setTimeout(function(){Ext.elevateFunction?Ext.elevateFunction(b):b()},0,!0)},Ext.asapCancel=h?function(a){clearImmediate(a)}:function(a){clearTimeout(a)},Ext.defer=a.defer,Ext.interval=a.interval,Ext.pass=a.pass,Ext.bind=a.bind,Ext.deferCallback=a.requestAnimationFrame,a}(),Ext.Number=new function(){var b=this,d="1"!==.9.toFixed(),c=Math,a={count:!1,inclusive:!1,wrap:!0};Ext.apply(b,{Clip:{DEFAULT:a,COUNT:Ext.applyIf({count:!0},a),INCLUSIVE:Ext.applyIf({inclusive:!0},a),NOWRAP:Ext.applyIf({wrap:!1},a)},clipIndices:function(d,c,f){var g,b,e,h=0,i=(f=f||a).wrap;for(c=c||[],e=0;e<2;++e)g=b,b=null==(b=c[e])?h:e&&f.count?d<(b+=g)?d:b:(i&&(b=b<0?d+b:b),e&&f.inclusive&&++b,b<0?0:d<b?d:b),h=d;return c[0]=g,c[1]=b<g?g:b,c},constrain:function(c,b,a){var d=parseFloat(c);return null===b&&(b=c),null===a&&(a=c),d<b?b:a<d?a:d},snap:function(a,c,e,f){var d;return void 0===a||a<e?e||0:(c&&0!=(d=a%c)&&(a-=d,c<=2*d?a+=c:2*d<-c&&(a-=c)),b.constrain(a,e,f))},snapInRange:function(a,d,c,e){var f;return c=c||0,void 0===a||a<c?c:(d&&(f=(a-c)%d)&&(a-=f,d<=(f*=2)&&(a+=d)),void 0!==e&&a>(e=b.snapInRange(e,d,c))&&(a=e),a)},sign:function(a){return 0===(a=+a)||isNaN(a)?a:0<a?1:-1},toFixed:d?function(d,a){a=a||0;var b=c.pow(10,a);return(c.round(d*b)/b).toFixed(a)}:function(b,a){return b.toFixed(a)},from:function(a,b){return isFinite(a)&&(a=parseFloat(a)),isNaN(a)?b:a},randomInt:function(a,b){return c.floor(c.random()*(b-a+1)+a)},correctFloat:function(a){return parseFloat(a.toPrecision(14))}}),Ext.num=function(){return b.from.apply(this,arguments)}},Ext.apply(Ext,{_namedScopes:{this:{isThis:1},controller:{isController:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},escapeId:function(){function d(b,a){return"\\"+a}var c=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,e=/([\W]{1})/g,a=/^(\d)/g,b=function(b,a){return"\\00"+a.charCodeAt(0).toString(16)+" "};return function(f){return c.test(f)?f:f.replace(e,d).replace(a,b)}}(),callback:function(b,a,d,h,c,g){if(b){var e,f=a in Ext._namedScopes;return b.charAt?(a&&!f||!c||(a=c.resolveListenerScope(f?a:g)),b=a[b]):a=f?g||c:a||c,b&&Ext.isFunction(b)&&(a=a||Ext.global,h?Ext.defer(b,h,a,d):e=Ext.elevateFunction?Ext.elevateFunction(b,a,d):d?b.apply(a,d):b.call(a)),e}},coerce:function(a,e){var d=Ext.typeOf(a),c=Ext.typeOf(e),b="string"==typeof a;if(d!==c)switch(c){case"string":return String(a);case"number":return Number(a);case"boolean":return!(b&&(!a||"false"===a))&&Boolean(a);case"null":return!b||a&&"null"!==a?a:null;case"undefined":return!b||a&&"undefined"!==a?a:void 0;case"date":return b&&isNaN(a)?Ext.Date.parse(a,Ext.Date.defaultFormat):Date(Number(a))}return a},copyTo:function(e,d,a,f){"string"==typeof a&&(a=a.split(Ext.propertyNameSplitRe));for(var b,c=0,g=a?a.length:0;c<g;c++)b=a[c],(f||d.hasOwnProperty(b))&&(e[b]=d[b]);return e},copy:function(e,c,a,f){"string"==typeof a&&(a=a.split(Ext.propertyNameSplitRe));for(var b,d=0,g=a?a.length:0;d<g;d++)b=a[d],(c.hasOwnProperty(b)||f&&b in c)&&(e[b]=c[b]);return e},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(c,e,a){"string"==typeof a&&(a=a.split(Ext.propertyNameSplitRe));for(var b,d=0,f=a?a.length:0;d<f;d++)void 0===c[b=a[d]]&&(c[b]=e[b]);return c},copyIf:function(c,e,a){"string"==typeof a&&(a=a.split(Ext.propertyNameSplitRe));for(var b,d=0,f=a?a.length:0;d<f;d++)!((b=a[d])in c)&&b in e&&(c[b]=e[b]);return c},extend:function(){var a=Object.prototype.constructor,b=function(b){for(var a in b)b.hasOwnProperty(a)&&(this[a]=b[a])};return function(c,d,g){Ext.isObject(d)&&(g=d,d=c,c=g.constructor!==a?g.constructor:function(){d.apply(this,arguments)});function h(){}var e,f=d.prototype;return h.prototype=f,(((e=c.prototype=new h).constructor=c).superclass=f).constructor===a&&(f.constructor=d),c.override=function(a){Ext.override(c,a)},e.override=b,e.proto=e,c.override(g),c.extend=function(a){return Ext.extend(c,a)},c}}(),iterate:function(a,c,b){Ext.isEmpty(a)||(void 0===b&&(b=a),Ext.isIterable(a)?Ext.Array.each.call(Ext.Array,a,c,b):Ext.Object.each.call(Ext.Object,a,c,b))},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(b){var a,c=b;return b&&"<"===b.charAt(0)&&(a=Ext._resourcePoolRe.exec(b))&&(c=Ext.getResourcePath(a[3],a[1],a[2])),c},urlEncode:function(){var a=Ext.Array.from(arguments),b="";return Ext.isString(a[1])&&(b=a[1]+"&",a[1]=!1),b+Ext.Object.toQueryString.apply(Ext.Object,a)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(d){var b=Ext._scrollbarSize;if(d||!b){var c=document.body,a=document.createElement("div");a.style.width=a.style.height="100px",a.style.overflow="scroll",a.style.position="absolute",c.appendChild(a),Ext._scrollbarSize=b={width:a.offsetWidth-a.clientWidth,height:a.offsetHeight-a.clientHeight},c.removeChild(a)}return b},typeOf:function(){var a=/\S/,d=Object.prototype.toString,c={number:1,string:1,boolean:1,undefined:1},b={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(e){if(null===e)return"null";var h,f=typeof e;return c[f]?f:b[h=d.call(e)]||("function"==f?"function":"object"==f?void 0!==e.nodeType?3===e.nodeType?a.test(e.nodeValue)?"textnode":"whitespace":"element":"object":h)}}(),factory:function(a,f,b,d){var c,e=Ext.ClassManager;if(!a||a.isInstance)return b&&b!==a&&b.destroy(),a;if(d){if("string"==typeof a)return e.instantiateByAlias(d+"."+a);if(Ext.isObject(a)&&"type"in a)return e.instantiateByAlias(d+"."+a.type,a)}return!0===a?b||Ext.create(f):("xtype"in a?c=e.instantiateByAlias("widget."+a.xtype,a):"xclass"in a&&(c=Ext.create(a.xclass,a)),c?(b&&b.destroy(),c):b?b.setConfig(a):Ext.create(f,a))},log:function(){function a(){}return a.info=a.warn=a.error=Ext.emptyFn,a}()}),Ext.Config=function(b){var c=this,a=b.charAt(0).toUpperCase()+b.substr(1);c.name=b,c.names={internal:"_"+b,initializing:"is"+a+"Initializing",apply:"apply"+a,update:"update"+a,get:"get"+a,set:"set"+a,initGet:"initGet"+a,changeEvent:b.toLowerCase()+"change"},c.root=c},Ext.Config.map={},Ext.Config.get=function(a){var b=Ext.Config.map;return b[a]||(b[a]=new Ext.Config(a))},Ext.Config.prototype={self:Ext.Config,isConfig:!0,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(a){return a.$configPrefixed?this.names.internal:this.name},mergeNew:function(b,d,f,e){var a,c;if(d)if(b)for(c in a=Ext.Object.chain(d),b)e&&c in a||(a[c]=b[c]);else a=d;else a=b;return a},mergeSets:function(a,f,e){var c,d,b=f?Ext.Object.chain(f):{};if(a instanceof Array)for(c=a.length;c--;)d=a[c],e&&d in b||(b[d]=!0);else if(a)if(a.constructor===Object)for(c in a)d=a[c],e&&c in b||(b[c]=d);else e&&a in b||(b[a]=!0);return b},makeGetter:function(){var b=this.name,a=this.names.internal;return function(){return this[this.$configPrefixed?a:b]}},makeInitGetter:function(){var e=this.name,a=this.names,d=a.set,c=a.get,b=a.initializing;return function(){var a=this;return a[b]=!0,delete a[c],a[d](a.config[e]),delete a[b],a[c].apply(a,arguments)}},makeSetter:function(){var b,g=this.name,a=this.names,e=a.internal,f=a.get,d=a.apply,c=a.update;return(b=function(b){var a=this,h=a.$configPrefixed?e:g,i=a[h];return delete a[f],a[d]&&void 0===(b=a[d](b,i))||b!==(i=a[h])&&(a[h]=b,a[c]&&a[c](b,i)),a}).$isDefault=!0,b},makeEventedSetter:function(){function g(a,c,e,d){a[d]=c,a[b]&&a[b](c,e)}var c,i=this.name,a=this.names,f=a.internal,h=a.get,d=a.apply,b=a.update,e=a.changeEvent;return(c=function(c){var a=this,k=a.$configPrefixed?f:i,j=a[k];return delete a[h],a[d]&&void 0===(c=a[d](c,j))||c!==(j=a[k])&&(a.isConfiguring?(a[k]=c,a[b]&&a[b](c,j)):a.fireEventedAction(e,[a,c,j],g,a,[a,c,j,k])),a}).$isDefault=!0,c}},function(){var c=Ext.Config,b=c.map,a=Ext.Object;Ext.Configurator=function(d){var b=this,e=d.prototype,c=d.superclass?d.superclass.self.$config:null;b.cls=d,(b.superCfg=c)?(b.configs=a.chain(c.configs),b.cachedConfigs=a.chain(c.cachedConfigs),b.initMap=a.chain(c.initMap),b.values=a.chain(c.values),b.needsFork=c.needsFork):(b.configs={},b.cachedConfigs={},b.initMap={},b.values={}),e.config=e.defaultConfig=b.values,d.$config=b},Ext.Configurator.prototype={self:Ext.Configurator,needsFork:!1,initList:null,add:function(t,l){var m,f,s,h,b,j,e,q,o,d,i=this,n=i.cls,k=i.configs,v=i.cachedConfigs,p=i.initMap,g=n.prototype,r=l&&l.$config.configs,u=i.values;for(e in t){if((f=(m=(d=t[e])&&d.constructor===Object)&&"$value"in d?d:null)&&(s=!!f.cached,m=(d=f.$value)&&d.constructor===Object),h=f&&f.merge,b=k[e]){if(l){if(!(h=b.merge))continue;f=null}else h=h||b.merge;j=u[e],h?d=h.call(b,d,j,n,l):m&&j&&j.constructor===Object&&(d=a.merge({},j,d))}else r?(b=r[e],f=null):b=c.get(e),((k[e]=b).cached||s)&&(v[e]=!0),g[o=(q=b.names).get]||(g[o]=b.getter||b.getGetter()),g[o=q.set]||(g[o]=f&&f.evented?b.eventedSetter||b.getEventedSetter():b.setter||b.getSetter());f&&(b.owner!==n&&(k[e]=b=Ext.Object.chain(b),b.owner=n),Ext.apply(b,f),delete b.$value),!i.needsFork&&d&&(d.constructor===Object||d instanceof Array)&&(i.needsFork=!0),null!==d?p[e]=!0:(g.$configPrefixed?g[k[e].names.internal]=null:g[k[e].name]=null,e in p&&(p[e]=!1)),u[e]=d}},configure:function(c,h){var n,b,m,w,d,p,l,f,e,g,t,s,k=this,u=k.configs,x=k.initMap,q=k.initListMap,o=k.initList,j=k.cls.prototype,i=k.values,r=0,v=!o;if(i=k.needsFork?a.fork(i):a.chain(i),c.isConfiguring=!0,v)for(e in k.initList=o=[],k.initListMap=q={},c.isFirstInstance=!0,x)w=x[e],t=(b=u[e]).cached,w?(f=b.names,g=i[e],!j[f.set].$isDefault||j[f.apply]||j[f.update]||"object"==typeof g?(t?(n=n||[]).push(b):(o.push(b),q[e]=!0),c[f.get]=b.initGetter||b.getInitGetter()):j[b.getInternalName(j)]=g):t&&(j[b.getInternalName(j)]=void 0);if(l=n&&n.length){for(d=0;d<l;++d)c[p=n[d].getInternalName(j)]=null;for(d=0;d<l;++d)m=(f=(b=n[d]).names).get,c.hasOwnProperty(m)&&(c[f.set](i[b.name]),delete c[m]);for(d=0;d<l;++d)j[p=n[d].getInternalName(j)]=c[p],delete c[p]}for(h&&h.platformConfig&&(h=k.resolvePlatformConfig(c,h)),v&&c.afterCachedConfig&&!c.afterCachedConfig.$nullFn&&c.afterCachedConfig(h),c.config=i,d=0,l=o.length;d<l;++d)c[(b=o[d]).names.get]=b.initGetter||b.getInitGetter();if(c.transformInstanceConfig&&(h=c.transformInstanceConfig(h)),h)for(e in h)g=h[e],(b=u[e])?(b.lazy||++r,q[e]||(c[b.names.get]=b.initGetter||b.getInitGetter()),b.merge?g=b.merge(g,i[e],c):g&&g.constructor===Object&&(g=(s=i[e])&&s.constructor===Object?a.merge(i[e],g):Ext.clone(g))):c[e]=g,i[e]=g;if(!c.beforeInitConfig||c.beforeInitConfig.$nullFn||!1!==c.beforeInitConfig(h)){if(h)for(e in h){if(!r)break;(b=u[e])&&!b.lazy&&(--r,m=(f=b.names).get,c.hasOwnProperty(m)&&(c[f.set](i[e]),delete c[f.get]))}for(d=0,l=o.length;d<l;++d)m=(f=(b=o[d]).names).get,!b.lazy&&c.hasOwnProperty(m)&&(c[f.set](i[b.name]),delete c[m]);delete c.isConfiguring}},getCurrentConfig:function(c){var a,e=c.defaultConfig,d={};for(a in e)d[a]=c[b[a].names.get]();return d},merge:function(g,c,f){var b,a,d,e,h=this.configs;for(b in f)a=f[b],(e=h[b])&&(e.merge?a=e.merge(a,c[b],g):a&&a.constructor===Object&&(a=(d=c[b])&&d.constructor===Object?Ext.Object.merge(d,a):Ext.clone(a))),c[b]=a;return c},reconfigure:function(c,f,g){var d,j,h,m,a,e,k,n=c.config,i=[],p=c.$configStrict&&!(g&&!1===g.strict),l=this.configs,o=g&&g.defaults;for(a in f)if(!o||!c.hasOwnProperty(a)){if(n[a]=f[a],d=l[a])c[d.names.get]=d.initGetter||d.getInitGetter();else if(k=c.self.prototype[a],p&&"function"==typeof k&&!k.$nullFn)continue;i.push(a)}for(h=0,m=i.length;h<m;h++)(d=l[a=i[h]])?(j=(e=d.names).get,c.hasOwnProperty(j)&&(c[e.set](f[a]),delete c[j])):c[(e=(d=b[a]||Ext.Config.get(a)).names).set]?c[e.set](f[a]):c[a]=f[a]},resolvePlatformConfig:function(g,e){var c,a,d,f=e&&e.platformConfig,b=e;if(f&&(d=(a=Ext.getPlatformConfigKeys(f)).length))for(b=Ext.merge({},b),c=0,d=a.length;c<d;++c)this.merge(g,b,f[a[c]]);return b}}}(),Ext.Base=function(j){function i(a){return function(){return this[a].apply(this,arguments)}}function a(){}var d,c=[],g=[],l=Ext.Version,h=/^\d/,f={},e={},b=a.prototype;for(d in Ext.apply(a,{$className:"Ext.Base",$isClass:!0,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(n){var c,g,q,e,j,o,f,k,b,a,p,d,r=this,m=[],s=Ext.getCompatVersion(n.name);for(g in n)h.test(g)&&((d=new Ext.Version(g)).deprecations=n[g],m.push(d));for(m.sort(l.compare),q=m.length;q--&&(c=(d=m[q]).deprecations,e=r.prototype,p=c.statics,j=s&&s.lt(d));)for(;c;){if(k=c.methods)for(b in k)f=null,(a=k[b])&&(Ext.isString(a)?j&&(f=i(a)):((a.message||a.fn)&&(a=a.fn),o=e.hasOwnProperty(b)&&e[b],j&&a&&(a.$owner=r,a.$name=b,o&&(a.$previous=o),f=a))),f&&(e[b]=f);c=p,p=null,e=r}},extend:function(e){var d,a,i,g,f,c=this,h=e.prototype;if(((d=c.prototype=Ext.Object.chain(h)).self=c).superclass=d.superclass=h,!e.$isClass)for(a in b)a in d&&(d[a]=b[a]);if(f=h.$inheritableStatics)for(a=0,i=f.length;a<i;a++)g=f[a],c.hasOwnProperty(g)||(c[g]=e[g]);e.$onExtended&&(c.$onExtended=e.$onExtended.slice()),c.getConfigurator()},$onExtended:[],triggerExtended:function(){var a,b,c=this.$onExtended,d=c.length;if(0<d)for(a=0;a<d;a++)(b=c[a]).fn.apply(b.scope||this,arguments)},onExtended:function(b,a){return this.$onExtended.push({fn:b,scope:a}),this},addStatics:function(a){return this.addMembers(a,!0),this},addInheritableStatics:function(e){var c,b,a,f,d=this.prototype;for(a in c=d.$inheritableStatics,b=d.$hasInheritableStatics,c||(c=d.$inheritableStatics=[],b=d.$hasInheritableStatics={}),e)e.hasOwnProperty(a)&&(f=e[a],this[a]=f,b[a]||(b[a]=!0,c.push(a)));return this},addMembers:function(d,f,p){var h,i,o,a,b,n,j,e=this,l=Ext.Function.clone,c=f?e:e.prototype,m=!f&&c.defaultConfig,k=Ext.enumerables,g=d.privates;for(b in g&&(delete d.privates,f||(j=g.statics,delete g.statics),e.addMembers(g,f,n),j&&e.addMembers(j,!0,n)),d)if(d.hasOwnProperty(b)){if("function"!=typeof(a=d[b])||a.$isClass||a.$nullFn){if(m&&b in m&&!c.config.hasOwnProperty(b)){(h=h||{})[b]=a;continue}}else a.$owner&&(a=l(a)),c.hasOwnProperty(b)&&(a.$previous=c[b]),a.$owner=e,a.$name=b;c[b]=a}if(h&&e.addConfig(h),k)for(i=0,o=k.length;i<o;++i)d.hasOwnProperty(b=k[i])&&((a=d[b])&&!a.$nullFn&&(a.$owner&&(a=l(a)),a.$owner=e,a.$name=b,c.hasOwnProperty(b)&&(a.$previous=c[b])),c[b]=a);return this},addMember:function(a,b){return f[a]=b,this.addMembers(f),delete f[a],this},borrow:function(f,a){var b,e,c,g=f.prototype,d={};for(b=0,e=(a=Ext.Array.from(a)).length;b<e;b++)d[c=a[b]]=g[c];return this.addMembers(d)},override:function(a){var b=this,d=a.statics,c=a.inheritableStatics,e=a.config,g=a.mixins,f=a.cachedConfig;return(d||c||e)&&(a=Ext.apply({},a)),d&&(b.addMembers(d,!0),delete a.statics),c&&(b.addInheritableStatics(c),delete a.inheritableStatics),e&&(b.addConfig(e),delete a.config),f&&(b.addCachedConfig(f),delete a.cachedConfig),delete a.mixins,b.addMembers(a),g&&b.mixin(g),b},callParent:function(b){var a;return(a=this.callParent.caller)&&(a.$previous||(a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,b||c)},callSuper:function(b){var a;return(a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,b||c)},mixin:function(l,g){var a,b,e,i,d,j,h,k,f,c=this;if("string"==typeof l){for(e in a=g.prototype,b=c.prototype,a.onClassMixedIn&&a.onClassMixedIn.call(g,c),b.hasOwnProperty("mixins")||(b.mixins="mixins"in b?Ext.Object.chain(b.mixins):{}),a)k=a[e],"mixins"===e?Ext.applyIf(b.mixins,k):"mixinId"!==e&&"config"!==e&&void 0===b[e]&&(b[e]=k);if(i=a.$inheritableStatics)for(d=0,j=i.length;d<j;d++)h=i[d],c.hasOwnProperty(h)||(c[h]=g[h]);return"config"in a&&c.addConfig(a.config,g),(b.mixins[l]=a).afterClassMixedIn&&a.afterClassMixedIn.call(g,c),c}if((f=l)instanceof Array)for(d=0,j=f.length;d<j;d++)a=f[d],c.mixin(a.prototype.mixinId||a.$className,a);else for(var m in f)c.mixin(m,f[m])},addConfig:function(b,a){(this.$config||this.getConfigurator()).add(b,a)},addCachedConfig:function(c,d){var a,b={};for(a in c)b[a]={cached:!0,$value:c[a]};this.addConfig(b,d)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:j(function(a,b){e[a]=function(){return this[b].apply(this,arguments)},this.override(e),delete e[a]})}),a)a.hasOwnProperty(d)&&g.push(d);return a.$staticMembers=g,a.getConfigurator(),a.addMembers({$className:"Ext.Base",isInstance:!0,$configPrefixed:!0,$configStrict:!0,isConfiguring:!1,isFirstInstance:!1,destroyed:!1,statics:function(){var a=this.statics.caller,b=this.self;return a?a.$owner:b},callParent:function(d){var a;return((a=this.callParent.caller)&&(a.$previous||(a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name])).apply(this,d||c)},callSuper:function(d){var a;return((a=this.callSuper.caller)&&(a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]).apply(this,d||c)},self:a,constructor:function(){return this},getConfigurator:function(){return this.$config||this.self.getConfigurator()},initConfig:function(b){var a=this,c=a.getConfigurator();return a.initConfig=Ext.emptyFn,a.initialConfig=b||{},c.configure(a,b),a},beforeInitConfig:Ext.emptyFn,getConfig:function(d,f){var c,b=this;return d?(c=Ext.Config.map[d].names.get,f&&b.hasOwnProperty(c)?b.config[d]:b[c]()):b.getCurrentConfig()},setConfig:function(b,e,d){var a,c=this;return b&&("string"==typeof b?(a={})[b]=e:a=b,c.getConfigurator().reconfigure(c,a,d)),c},getCurrentConfig:function(){return this.getConfigurator().getCurrentConfig(this)},hasConfig:function(a){return a in this.defaultConfig},getInitialConfig:function(b){var a=this.config;return b?a[b]:a},$links:null,link:function(c,b){var a=this;return(a.$links||(a.$links={}))[c]=!0,a[c]=b},unlink:function(e){var b,f,c,a,d=this;for(b=0,f=e.length;b<f;b++)(a=d[c=e[b]])&&(a.isInstance&&!a.destroyed?a.destroy():a.parentNode&&"nodeType"in a&&a.parentNode.removeChild(a)),d[c]=null;return d},destroy:function(){var a=this,b=a.$links;a.initialConfig=a.config=null,a.destroy=Ext.emptyFn,a.isDestroyed=a.destroyed=!0,b&&(a.$links=null,a.unlink(Ext.Object.getKeys(b)))}}),b.callOverridden=b.callParent,a}(Ext.Function.flexSetter),function(b,a){(Ext.util||(Ext.util={})).Cache=b=function(c){var a,b=this;c&&Ext.apply(b,c),b.head=a={key:null,value:null},b.map={},a.next=a.prev=a},b.prototype=a={maxSize:100,count:0,clear:function(){var c=this,b=c.head,a=b.next;if(b.next=b.prev=b,!c.evict.$nullFn)for(;a!==b;a=a.next)c.evict(a.key,a.value);c.count=0},each:function(d,b){b=b||this;for(var c=this.head,a=c.next;a!==c&&!d.call(b,a.key,a.value);a=a.next);},get:function(c){var a=this,d=a.head,e=a.map,b=e[c];if(b)b.prev!==d&&(a.unlinkEntry(b),a.linkEntry(b));else for(e[c]=b={key:c,value:a.miss.apply(a,arguments)},a.linkEntry(b),++a.count;a.count>a.maxSize;)a.unlinkEntry(d.prev,!0),--a.count;return b.value},evict:Ext.emptyFn,linkEntry:function(a){var b=this.head,c=b.next;a.next=c,(a.prev=b).next=a,c.prev=a},unlinkEntry:function(a,d){var b=a.next,c=a.prev;(c.next=b).prev=c,d&&this.evict(a.key,a.value)}},a.destroy=a.clear}(),function(){function c(a,b){return a.length-b.length||(a<b?-1:b<a?1:0)}var a,d=Ext.Base,b=d.$staticMembers;function makeCtor(a){return function(){return this.constructor.apply(this,arguments)||null}}Ext.Class=a=function(b,c,d){return"function"!=typeof b&&(d=c,c=b,b=null),c=c||{},b=a.create(b,c),a.process(b,c,d),b},Ext.apply(a,{makeCtor:makeCtor,onBeforeCreated:function(a,c,b){a.addMembers(c),b.onCreated.call(a,a)},create:function(a,f){var c,e=b.length;for(a=a||makeCtor();e--;)a[c=b[e]]=d[c];return a},process:function(l,f,k){var b,c,g,n,h,m,i,j=f.preprocessors||a.defaultPreprocessors,o=this.preprocessors,e={onBeforeCreated:this.onBeforeCreated},d=[];for(delete f.preprocessors,l._classHooks=e,g=0,n=j.length;g<n;g++)if("string"==typeof(b=j[g])){if(!0===(c=(b=o[b]).properties))d.push(b.fn);else if(c)for(h=0,m=c.length;h<m;h++)if(i=c[h],f.hasOwnProperty(i)){d.push(b.fn);break}}else d.push(b);e.onCreated=k||Ext.emptyFn,e.preprocessors=d,this.doProcess(l,f,e)},doProcess:function(f,g,b){for(var c=this,d=b.preprocessors,a=d.shift(),e=c.doProcess;a;a=d.shift())if(!1===a.call(c,f,g,b,e))return;b.onBeforeCreated.apply(c,arguments)},preprocessors:{},registerPreprocessor:function(a,e,b,c,d){return c=c||"last",b=b||[a],this.preprocessors[a]={name:a,properties:b||!1,fn:e},this.setDefaultPreprocessorPosition(a,c,d),this},getPreprocessor:function(a){return this.preprocessors[a]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(a){return this.defaultPreprocessors=Ext.Array.from(a),this},setDefaultPreprocessorPosition:function(d,a,e){var c,b=this.defaultPreprocessors;if("string"==typeof a){if("first"===a)return b.unshift(d),this;if("last"===a)return b.push(d),this;a="after"===a?1:-1}return-1!==(c=Ext.Array.indexOf(b,e))&&Ext.Array.splice(b,Math.max(0,c+a),0,d),this}}),a.registerPreprocessor("extend",function(b,c,i){var a,e,d,h=Ext.Base,g=h.prototype,f=c.extend;if(delete c.extend,e=(a=f&&f!==Object?f:h).prototype,!a.$isClass)for(d in g)e[d]||(e[d]=g[d]);b.extend(a),b.triggerExtended.apply(b,arguments),c.onClassExtended&&(b.onExtended(c.onClassExtended,b),delete c.onClassExtended)},!0),a.registerPreprocessor("privates",function(d,e){var a=e.privates,c=a.statics,b=a.privacy||!0;delete e.privates,delete a.statics,d.addMembers(a,!1,b),c&&d.addMembers(c,!0,b)}),a.registerPreprocessor("statics",function(b,a){b.addStatics(a.statics),delete a.statics}),a.registerPreprocessor("inheritableStatics",function(b,a){b.addInheritableStatics(a.inheritableStatics),delete a.inheritableStatics}),Ext.createRuleFn=function(a){return new Function("$c","with($c) { return ("+a+"); }")},Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn}),Ext.ruleKeySortFn=c,Ext.getPlatformConfigKeys=function(e){var a,b=[];for(a in e)Ext.expressionCache.get(a)(Ext.platformTags)&&b.push(a);return b.sort(c),b},a.registerPreprocessor("platformConfig",function(n,g,o){var b,l,i,d,c,j,a,f,h,m,k=g.platformConfig,e=g.config;for(delete g.platformConfig,l=(d=n.getConfigurator()).configs,h=0,m=(j=Ext.getPlatformConfigKeys(k)).length;h<m;++h){for(a in c=b=null,i=k[j[h]])f=i[a],e&&a in e?((b=b||{})[a]=f,(c=c||{})[a]=e[a],delete e[a]):a in l?(b=b||{})[a]=f:g[a]=f;c&&d.add(c),b&&d.add(b)}}),a.registerPreprocessor("config",function(b,a){a.hasOwnProperty("$configPrefixed")&&(b.prototype.$configPrefixed=a.$configPrefixed),b.addConfig(a.config),delete a.config}),a.registerPreprocessor("cachedConfig",function(b,a){a.hasOwnProperty("$configPrefixed")&&(b.prototype.$configPrefixed=a.$configPrefixed),b.addCachedConfig(a.cachedConfig),delete a.cachedConfig}),a.registerPreprocessor("mixins",function(e,b,a){var d=b.mixins,c=a.onCreated;delete b.mixins,a.onCreated=function(){return a.onCreated=c,e.mixin(d),a.onCreated.apply(this,arguments)}}),Ext.extend=function(d,c,b){var e;if(2===arguments.length&&Ext.isObject(c)&&(b=c,c=d,d=null),!c)throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.");return b.extend=c,b.preprocessors=["extend","statics","inheritableStatics","mixins","platformConfig","config"],d?(e=new a(d,b)).prototype.constructor=d:e=new a(b),e.prototype.override=function(b){for(var a in b)b.hasOwnProperty(a)&&(this[a]=b[a])},e}}(),Ext.Inventory=function(){var a=this;a.names=[],a.paths={},a.alternateToName={},a.aliasToName={},a.nameToAliases={},a.nameToAlternates={}},Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(a,c,b){return this.addMapping(a,c,this.aliasToName,this.nameToAliases,b)},addAlternate:function(b,a){return this.addMapping(b,a,this.alternateToName,this.nameToAlternates)},addMapping:function(h,m,k,j,n){var d,a,b,e,i,g,f=h.$className||h,c=f,l=this._array1;for(b in Ext.isString(f)&&((c={})[f]=m),c)for(a=c[b],Ext.isString(a)&&(l[0]=a,a=l),i=a.length,g=j[b]||(j[b]=[]),e=0;e<i;++e)(d=a[e])&&k[d]!==b&&(k[d]=b,g.push(d))},getAliasesByName:function(a){return this.nameToAliases[a]||null},getAlternatesByName:function(a){return this.nameToAlternates[a]||null},getNameByAlias:function(a){return this.aliasToName[a]||""},getNameByAlternate:function(a){return this.alternateToName[a]||""},getNamesByExpression:function(k,e,r){var f,j,c,b,d,a,h,g=this,q=g.aliasToName,p=g.alternateToName,m=g.nameToAliases,o=g.nameToAlternates,i=r?e:{},l=[],n=Ext.isString(k)?[k]:k,t=n.length,s=g.wildcardRe;for(j=0;j<t;++j)if((f=n[j]).indexOf("*")<0)(a=q[f])||(a=p[f])||(a=f),a in i||e&&a in e||(i[a]=1,l.push(a));else for(a in h=new RegExp("^"+f.replace(s,"(.*?)")+"$"),m)if(!(a in i||e&&a in e)){if(!(b=h.test(a))){for(d=(c=m[a]).length;!b&&0<d--;)b=h.test(c[d]);if((c=o[a])&&!b)for(d=c.length;!b&&0<d--;)b=h.test(c[d])}b&&(i[a]=1,l.push(a))}return l},getPath:function(a){var c,e=this,d=e.paths,b="";return a in d?b=d[a]:((c=e.getPrefix(a))&&(a=a.substring(c.length+1),(b=d[c])&&(b+="/")),b+=a.replace(e.dotRe,"/")+".js"),b},getPrefix:function(a){if(a in this.paths)return a;for(var b,c,d=this.getPrefixes(),e=d.length;0<e--;)if((b=(c=d[e]).length)<a.length&&"."===a.charAt(b)&&c===a.substring(0,b))return c;return""},getPrefixes:function(){var b=this,a=b.prefixes;return a||(b.prefixes=a=b.names.slice(0),a.sort(b._compareNames)),a},removeName:function(a){var b,d,c=this,j=c.aliasToName,i=c.alternateToName,h=c.nameToAliases,g=c.nameToAlternates,f=h[a],e=g[a];if(delete h[a],delete g[a],f)for(b=f.length;b--;)a===(d=f[b])&&delete j[d];if(e)for(b=e.length;b--;)a===(d=e[b])&&delete i[d]},resolveName:function(a){var b,c=this;return a in c.nameToAliases||(b=c.aliasToName[a])||(b=c.alternateToName[a]),b||a},select:function(b,f){var c,e=this,a={},d={excludes:a,exclude:function(){return e.getNamesByExpression(arguments,a,!0),this}};for(c in b)d[c]=e.selectMethod(a,b[c],f||b);return d},selectMethod:function(a,c,b){var d=this;return function(f){var e=Ext.Array.slice(arguments,1);return e.unshift(d.getNamesByExpression(f,a)),c.apply(b,e)}},setPath:Ext.Function.flexSetter(function(b,c){var a=this;return a.paths[b]=c,a.names.push(b),a.prefixes=null,a}),_compareNames:function(b,c){var a=b.length-c.length;return a=a||(b<c?-1:1)}},Ext.ClassManager=function(n,e,o,g,r){var q=Ext.Class.makeCtor,i=[],b={Ext:{name:"Ext",value:Ext}},a=Ext.apply(new Ext.Inventory,{classes:{},classState:{},existCache:{},instantiators:[],isCreated:function(b){return!(!a.classes[b]&&!a.existCache[b])||!!a.lookupName(b,!1)&&(a.triggerCreated(b),!0)},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(b,c){a.existCache[b]=c||1,a.classState[b]+=40,a.notify(b,a.createdListeners,a.nameCreatedListeners)},onCreated:function(d,c,b){a.addListener(d,c,b,a.createdListeners,a.nameCreatedListeners)},notify:function(i,c,k){var b,g,h,l,d,f,j=a.getAlternatesByName(i),e=[i];for(b=0,g=c.length;b<g;b++)(d=c[b]).fn.call(d.scope,i);for(;e;){for(b=0,g=e.length;b<g;b++)if(c=k[f=e[b]]){for(h=0,l=c.length;h<l;h++)(d=c[h]).fn.call(d.scope,f);delete k[f]}e=j,j=null}},addListener:function(b,e,a,f,c){if(Ext.isArray(a))for(b=Ext.Function.createBarrier(a.length,b,e),d=0;d<a.length;d++)this.addListener(b,null,a[d],f,c);else{var d,g={fn:b,scope:e};if(a){if(this.isCreated(a))return void b.call(e,a);c[a]||(c[a]=[]),c[a].push(g)}else f.push(g)}},$namespaceCache:b,addRootNamespaces:function(c){for(var a in c)b[a]={name:a,value:c[a]}},clearNamespaceCache:function(){for(var a in i.length=0,b)b[a].value||delete b[a]},getNamespaceEntry:function(c){if("string"!=typeof c)return c;var e,d=b[c];return d||(d=(e=c.lastIndexOf("."))<0?{name:c}:{name:c.substring(e+1),parent:a.getNamespaceEntry(c.substring(0,e))},b[c]=d),d},lookupName:function(g,f){var b,e,h=a.getNamespaceEntry(g),c=Ext.global,d=0;for(b=h;b;b=b.parent)i[d++]=b;for(;c&&0<d--;)e=c,!(c=(b=i[d]).value||c[b.name])&&f&&(e[b.name]=c={});return c},setNamespace:function(e,d){var b=a.getNamespaceEntry(e),c=Ext.global;return b.parent&&(c=a.lookupName(b.parent,!0)),c[b.name]=d},setXType:function(g,d){var e=g.$className,b=(e?g:a.get(e=g)).prototype,h=b.xtypes,c=b.xtypesChain,f=b.xtypesMap;b.hasOwnProperty("xtypes")||(b.xtypes=h=[],b.xtypesChain=c=c?c.slice(0):[],b.xtypesMap=f=Ext.apply({},f)),a.addAlias(e,"widget."+d,!0),h.push(d),c.push(d),f[d]=!0},set:function(b,d){var c=a.getName(d);return a.classes[b]=a.setNamespace(b,d),c&&c!==b&&a.addAlternate(c,b),a},get:function(b){return a.classes[b]||a.lookupName(b,!1)},addNameAliasMappings:function(b){a.addAlias(b)},addNameAlternateMappings:function(b){a.addAlternate(b)},getByAlias:function(b){return a.get(a.getNameByAlias(b))},getByConfig:function(c,d){var b,e=c.xclass;return b=e||((b=c.xtype)?d="widget.":b=c.type,a.getNameByAlias(d+b)),a.get(b)},getName:function(a){return a&&a.$className||""},getClass:function(a){return a&&a.self||null},create:function(c,b,e){var d=q(c);return"function"==typeof b&&(b=b(d)),b.$className=c,new n(d,b,function(){var d,h,m,i,l,f,j,k=b.postprocessors||a.defaultPostprocessors,n=a.postprocessors,g=[];for(delete b.postprocessors,h=0,m=k.length;h<m;h++)if("string"==typeof(d=k[h])){if(!0===(f=(d=n[d]).properties))g.push(d.fn);else if(f)for(i=0,l=f.length;i<l;i++)if(j=f[i],b.hasOwnProperty(j)){g.push(d.fn);break}}else g.push(d);b.postprocessors=g,b.createdFn=e,a.processCreate(c,this,b)})},processCreate:function(a,b,d){var c=this,e=d.postprocessors.shift(),f=d.createdFn;if(!e)return a&&c.set(a,b),delete b._classHooks,f&&f.call(b,b),void(a&&c.triggerCreated(a));!1!==e.call(c,a,b,d,c.processCreate)&&c.processCreate(a,b,d)},createOverride:function(f,c,k){var i,h,d=this,g=c.override,l=c.requires,m=c.uses,b=c.mixins,e=1,j=function(){var a,n,e,o,p;if(!h){if(n=l?l.slice(0):[],b)if(i=b instanceof Array)for(e=0,p=b.length;e<p;++e)Ext.isString(a=b[e])&&n.push(a);else for(o in b)Ext.isString(a=b[o])&&n.push(a);if(h=!0,n.length)return void Ext.require(n,j)}if(i)for(e=0,p=b.length;e<p;++e)Ext.isString(a=b[e])&&(b[e]=Ext.ClassManager.get(a));else if(b)for(o in b)Ext.isString(a=b[o])&&(b[o]=Ext.ClassManager.get(a));a=d.get(g),delete c.override,delete c.compatibility,delete c.requires,delete c.uses,Ext.override(a,c),Ext.Loader.history.push(f),m&&Ext.Loader.addUsedClasses(m),k&&k.call(a,a)};return a.overrideMap[f]=!0,"compatibility"in c&&Ext.isString(e=c.compatibility)&&(e=Ext.checkVersion(e)),e&&d.onCreated(j,d,g),d.triggerCreated(f,2),d},instantiateByAlias:function(){var c=arguments[0],a=o.call(arguments),b=this.getNameByAlias(c);return a[0]=b,Ext.create.apply(Ext,a)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(b,a){return(a=g(a,!0)).unshift(b),Ext.create.apply(Ext,a)},getInstantiator:function(c){var b,a,d,e=this.instantiators;if(!(b=e[c])){for(a=c,d=[],a=0;a<c;a++)d.push("a["+a+"]");b=e[c]=new Function("c","a","return new c("+d.join(",")+")")}return b},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(a,e,b,c,d){return c=c||"last",b=b||[a],this.postprocessors[a]={name:a,properties:b||!1,fn:e},this.setDefaultPostprocessorPosition(a,c,d),this},setDefaultPostprocessors:function(a){return this.defaultPostprocessors=g(a),this},setDefaultPostprocessorPosition:function(d,a,e){var c,b=this.defaultPostprocessors;if("string"==typeof a){if("first"===a)return b.unshift(d),this;if("last"===a)return b.push(d),this;a="after"===a?1:-1}return-1!==(c=Ext.Array.indexOf(b,e))&&Ext.Array.splice(b,Math.max(0,c+a),0,d),this}});if(a.registerPostprocessor("alias",function(g,f,d){var a,c,b=Ext.Array.from(d.alias);for(a=0,c=b.length;a<c;a++)e=b[a],this.addAlias(f,e)},["xtype","alias"]),a.registerPostprocessor("singleton",function(b,c,a,d){return!a.singleton||(d.call(this,b,new c,a),!1)}),a.registerPostprocessor("alternateClassName",function(g,f,e){var b,d,c,a=e.alternateClassName;for(a instanceof Array||(a=[a]),b=0,d=a.length;b<d;b++)c=a[b],this.set(c,f)}),a.registerPostprocessor("debugHooks",function(d,a,c){delete(a.isInstance?a.self:a).prototype.debugHooks}),a.registerPostprocessor("deprecated",function(d,a,c){var b=a.isInstance?a.self:a;b.addDeprecations(c.deprecated),delete b.prototype.deprecated}),Ext.apply(Ext,{create:function(){var d,b=arguments[0],e=typeof b,c=o.call(arguments,1);return(d="function"==e?b:("string"!=e&&0===c.length&&(c=[b],(b=b.xclass)||(b=(b=c[0].xtype)&&"widget."+b)),b=a.resolveName(b),a.get(b)))||(Ext.syncRequire(b),d=a.get(b)),a.getInstantiator(c.length)(d,c)},widget:function(g,b){var d,c,f,e=g;return"string"!=typeof e?(e=(b=g).xtype,c=b.xclass):b=b||{},b.isComponent?b:(c||(d="widget."+e,c=a.getNameByAlias(d)),c&&(f=a.get(c)),f?new f(b):Ext.create(c||d,b))},createByAlias:e(a,"instantiateByAlias"),define:function(b,c,d){return c.override?(a.classState[b]=20,a.createOverride.apply(a,arguments)):(a.classState[b]=10,a.create.apply(a,arguments))},undefine:function(b){delete a.classes[b],delete a.existCache[b],delete a.classState[b],a.removeName(b);var c=a.getNamespaceEntry(b),d=c.parent?a.lookupName(c.parent,!1):Ext.global;if(d)try{delete d[c.name]}catch(t){d[c.name]=void 0}},getClassName:e(a,"getName"),getDisplayName:function(a){if(a){if(a.displayName)return a.displayName;if(a.$name&&a.$class)return Ext.getClassName(a.$class)+"#"+a.$name;if(a.$className)return a.$className}return"Anonymous"},getClass:e(a,"getClass"),namespace:function(){var b,c=r;for(b=arguments.length;0<b--;)c=a.lookupName(arguments[b],!0);return c}}),Ext.addRootNamespaces=a.addRootNamespaces,Ext.createWidget=Ext.widget,Ext.ns=Ext.namespace,n.registerPreprocessor("className",function(b,a){"$className"in a&&(b.$className=a.$className)},!0,"first"),n.registerPreprocessor("alias",function(n,d){var a,e,l,b,k=n.prototype,c=g(d.xtype),h=g(d.alias),i="widget.",m=i.length,j=Array.prototype.slice.call(k.xtypesChain||[]),f=Ext.merge({},k.xtypesMap||{});for(a=0,e=h.length;a<e;a++)(l=h[a]).substring(0,m)===i&&(b=l.substring(m),Ext.Array.include(c,b));for(n.xtype=d.xtype=c[0],d.xtypes=c,a=0,e=c.length;a<e;a++)b=c[a],f[b]||(f[b]=!0,j.push(b));for(d.xtypesChain=j,d.xtypesMap=f,Ext.Function.interceptAfter(d,"onClassCreated",function(){var g,h,d=k.mixins;for(g in d)if(d.hasOwnProperty(g)&&(h=d[g],c=h.xtypes))for(a=0,e=c.length;a<e;a++)b=c[a],f[b]||(f[b]=!0,j.push(b))}),a=0,e=c.length;a<e;a++)b=c[a],Ext.Array.include(h,i+b);d.alias=h},["xtype","alias"]),Ext.manifest){var c,f,h,p,k=Ext.manifest,m=k.classes,d=k.paths,l={},j={};if(d){if(k.bootRelative)for(h in p=Ext.Boot.baseUrl,d)d.hasOwnProperty(h)&&(d[h]=p+d[h]);a.setPath(d)}if(m)for(c in m)j[c]=[],l[c]=[],(f=m[c]).alias&&(l[c]=f.alias),f.alternates&&(j[c]=f.alternates);a.addAlias(l),a.addAlternate(j)}return a}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global),Ext.env.Ready={blocks:0<(location.search||"").indexOf("ext-pauseReadyFire")?1:0,bound:0,delay:1,firing:!1,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var a=Ext.env.Ready,b=document;a.bound||("complete"===b.readyState?a.onReadyEvent({type:b.readyState||"body"}):(a.bound=1,Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop&&(a.bound=2,b.addEventListener("deviceready",a.onReadyEvent,!1)),b.addEventListener("DOMContentLoaded",a.onReadyEvent,!1),window.addEventListener("load",a.onReadyEvent,!1)))},block:function(){++this.blocks,Ext.isReady=!1},fireReady:function(){var a=Ext.env.Ready;a.state||(Ext._readyTime=Ext.ticks(),Ext.isDomReady=!0,a.state=1,Ext.feature.detect(!0),a.delay?navigator.standalone?a.timer=Ext.defer(function(){a.timer=null,a.handleReadySoon()},1):a.handleReadySoon():a.handleReady())},handleReady:function(){var a=this;1===a.state&&(a.state=2,Ext._beforeReadyTime=Ext.ticks(),a.invokeAll(),Ext._afterReadyTime=Ext.ticks())},handleReadySoon:function(b){var a=this;a.timer||(a.timer=Ext.defer(function(){a.timer=null,a.handleReady()},b||a.delay))},invoke:function(a){var b=a.delay;b?Ext.defer(a.fn,b,a.scope):Ext.elevateFunction?Ext.elevateFunction(a.fn,a.scope):a.fn.call(a.scope)},invokeAll:function(){Ext.elevateFunction?Ext.elevateFunction(this.doInvokeAll,this):this.doInvokeAll()},doInvokeAll:function(){var c,a=this,b=a.listeners;for(a.blocks||(Ext.isReady=!0),a.firing=!0;b.length;){if(a.sortGeneration!==a.generation&&(a.sortGeneration=a.generation,b.sort(a.sortFn)),c=b.pop(),a.blocks&&!c.dom){b.push(c);break}a.invoke(c)}a.firing=!1},makeListener:function(d,c,b){var a={fn:d,id:++this.nextId,scope:c,dom:!1,priority:0};return b&&Ext.apply(a,b),a.phase=a.dom?0:1,a},on:function(e,d,c){var a=Ext.env.Ready,b=a.makeListener(e,d,c);2!==a.state||a.firing||!b.dom&&a.blocks?(a.listeners.push(b),++a.generation,a.bound||a.bind()):a.invoke(b)},onReadyEvent:function(b){var a=Ext.env.Ready;Ext.elevateFunction?Ext.elevateFunction(a.doReadyEvent,a,arguments):a.doReadyEvent(b)},doReadyEvent:function(b){var a=this;0<a.bound&&(a.unbind(),a.bound=-1),a.state||a.fireReady()},sortFn:function(a,b){return-(a.phase-b.phase||b.priority-a.priority||a.id-b.id)},unblock:function(){var a=this;a.blocks&&(--a.blocks||2!==a.state||a.firing||a.invokeAll())},unbind:function(){var a=this,b=document;1<a.bound&&b.removeEventListener("deviceready",a.onReadyEvent,!1),b.removeEventListener("DOMContentLoaded",a.onReadyEvent,!1),window.removeEventListener("load",a.onReadyEvent,!1)}},function(){var a=Ext.env.Ready;Ext.isIE9m&&Ext.apply(a,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var b=!0;try{document.documentElement.doScroll("left")}catch(c){b=!1}return b&&document.body?a.onReadyEvent({type:"doScroll"}):a.scrollTimer=Ext.defer(a.pollScroll,20),b},bind:function(){if(!a.bound){var c,b=document;try{c=void 0===window.frameElement}catch(d){}if(c&&b.documentElement.doScroll){if(a.pollScroll())return}else a.pollScroll=Ext.emptyFn;"complete"===b.readyState?a.onReadyEvent({type:"already "+(b.readyState||"body")}):(b.attachEvent("onreadystatechange",a.onReadyStateChange),window.attachEvent("onload",a.onReadyEvent),a.bound=1)}},unbind:function(){document.detachEvent("onreadystatechange",a.onReadyStateChange),window.detachEvent("onload",a.onReadyEvent),Ext.isNumber(a.scrollTimer)&&(clearTimeout(a.scrollTimer),a.scrollTimer=null)},onReadyStateChange:function(){var b=document.readyState;a.readyStatesRe.test(b)&&a.onReadyEvent({type:b})}}),Ext.onDocumentReady=function(e,d,b){var c={dom:!0};b&&Ext.apply(c,b),a.on(e,d,c)},Ext.onReady=function(d,c,b){a.on(d,c,b)},Ext.onInternalReady=function(d,c,b){a.on(d,c,Ext.apply({priority:1e3},b))},a.bind()}(),Ext.Loader=new function(){var a=this,b=Ext.ClassManager,i=Ext.Boot,o=Ext.Class,c=Ext.env.Ready,k=Ext.Function.alias,h=["extend","mixins","requires"],j={},m=[],f=[],g=[],l={},d={},e={enabled:!0,scriptChainDelay:!1,disableCaching:!0,disableCachingParam:"_dc",paths:b.paths,preserveScripts:!0,scriptCharset:void 0},n={disableCaching:!0,disableCachingParam:!0,preserveScripts:!0,scriptChainDelay:"loadDelay"};Ext.apply(a,{isInHistory:j,isLoading:!1,history:m,config:e,readyListeners:f,optionalRequires:g,requiresMap:l,hasFileLoadError:!1,scriptsLoading:0,syncModeEnabled:!1,missingQueue:d,init:function(){var d,i,j,e,f,k=document.getElementsByTagName("script"),m=k[k.length-1].src,n=m.substring(0,m.lastIndexOf("/")+1),l=Ext._classPathMetadata,h=Ext.Microloader,g=Ext.manifest;if(b.getPath("Ext")||b.setPath("Ext",n+"src"),l&&(Ext._classPathMetadata=null,a.addClassPathMappings(l)),g&&(d=g.loadOrder,i=Ext.Boot.baseUrl,d&&g.bootRelative))for(j=d.length,e=0;e<j;e++)(f=d[e]).path=i+f.path;h&&(c.block(),h.onMicroloaderReady(function(){c.unblock()}))},setConfig:Ext.Function.flexSetter(function(b,d){if("paths"===b)a.setPath(d);else{e[b]=d;var c=n[b];c&&i.setConfig(!0===c?b:c,d)}return a}),getConfig:function(a){return a?e[a]:e},setPath:function(){return b.setPath.apply(b,arguments),a},addClassPathMappings:function(c){return b.setPath(c),a},addBaseUrlClassPathMappings:function(a){for(var b in a)a[b]=i.baseUrl+a[b];Ext.Loader.addClassPathMappings(a)},getPath:function(a){return b.getPath(a)},require:function(c,f,e,d){if(d)return a.exclude(d).require(c,f,e);var g=b.getNamesByExpression(c);return a.load(g,f,e)},syncRequire:function(){var b=a.syncModeEnabled;a.syncModeEnabled=!0;var c=a.require.apply(a,arguments);return a.syncModeEnabled=b,c},exclude:function(d){var c=b.select({require:function(b,d,c){return a.load(b,d,c)},syncRequire:function(b,f,d){var c=a.syncModeEnabled;a.syncModeEnabled=!0;var e=a.load(b,f,d);return a.syncModeEnabled=c,e}});return c.exclude(d),c},load:function(h,c,k){c&&(c.length&&(c=a.makeLoadCallback(h,c)),c=c.bind(k||Ext.global));var f,i,j,g=[],m=h.length,l=[],n=b.classState;for(i=0;i<m;++i)f=b.resolveName(h[i]),b.isCreated(f)||(g.push(f),d[f]=a.getPath(f),n[f]||l.push(d[f]));return(j=g.length)?(a.missingCount+=j,b.onCreated(function(){c&&Ext.callback(c,k,arguments),a.checkReady()},a,g),e.enabled||Ext.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+(1<g.length?"es":"")+": "+g.join(", ")),l.length?a.loadScripts({url:l,_classNames:g}):a.checkReady()):(c&&c.call(k),a.checkReady()),a.syncModeEnabled&&1===m?b.get(h[0]):a},makeLoadCallback:function(a,c){return function(){for(var e=[],d=a.length;0<d--;)e[d]=b.get(a[d]);return c.apply(this,e)}},onLoadFailure:function(){var b=this,c=b.onError;a.hasFileLoadError=!0,--a.scriptsLoading,c&&c.call(b.userScope,b),a.checkReady()},onLoadSuccess:function(){var b=this,c=b.onLoad;--a.scriptsLoading,c&&c.call(b.userScope,b),a.checkReady()},onReady:function(g,e,h,d){if(h)c.on(g,e,d);else{var b=c.makeListener(g,e,d);a.isLoading?f.push(b):c.invoke(b)}},addUsedClasses:function(b){var c,d,e;if(b)for(d=0,e=(b="string"==typeof b?[b]:b).length;d<e;d++)"string"!=typeof(c=b[d])||Ext.Array.contains(g,c)||g.push(c);return a},triggerReady:function(){var d,b=g;if(a.isLoading&&b.length)g=[],a.require(b);else{for(a.isLoading=!1,f.sort(c.sortFn);f.length&&!a.isLoading;)d=f.pop(),c.invoke(d);c.unblock()}},historyPush:function(c){return!c||j[c]||b.overrideMap[c]||(j[c]=!0,m.push(c)),a},loadScripts:function(g){var b,c=Ext.manifest,f=c&&c.loadOrder,d=c&&c.loadOrderMap;++a.scriptsLoading,f&&!d&&(c.loadOrderMap=d=i.createLoadOrderMap(f)),a.checkReady(),(b=Ext.apply({loadOrder:f,loadOrderMap:d,charset:e.scriptCharset,success:a.onLoadSuccess,failure:a.onLoadFailure,sync:a.syncModeEnabled,_classNames:[]},g)).userScope=b.scope,b.scope=b,i.load(b)},loadScriptsSync:function(c){var b=a.syncModeEnabled;a.syncModeEnabled=!0,a.loadScripts({url:c}),a.syncModeEnabled=b},loadScriptsSyncBasePrefix:function(c){var b=a.syncModeEnabled;a.syncModeEnabled=!0,a.loadScripts({url:c,prependBaseUrl:!0}),a.syncModeEnabled=b},loadScript:function(b){var c=!(b instanceof Array)&&!("string"==typeof b),j=c?b.url:b,f=c&&b.onError,h=c&&b.onLoad,g={url:j,scope:c&&b.scope,onLoad:h,onError:f,_classNames:[]};a.loadScripts(g)},flushMissingQueue:function(){var a,c=0;for(a in d)d[a],b.isCreated(a)||2===b.existCache[a]?delete d[a]:++c;this.missingCount=c},checkReady:function(){var b,d=a.isLoading;a.flushMissingQueue(),(b=a.missingCount+a.scriptsLoading)&&!d?(c.block(),a.isLoading=!!b):!b&&d&&a.triggerReady()}}),Ext.require=k(a,"require"),Ext.syncRequire=k(a,"syncRequire"),Ext.exclude=k(a,"exclude"),o.registerPreprocessor("loader",function(o,g,q,p){var i,e,n,m,d,f,c,r=this,j=[],k=b.getName(o);for(i=0,n=h.length;i<n;i++)if(f=h[i],g.hasOwnProperty(f))if("string"==typeof(c=g[f]))j.push(c);else if(c instanceof Array)for(e=0,m=c.length;e<m;e++)"string"==typeof(d=c[e])&&j.push(d);else if("function"!=typeof c)for(e in c)c.hasOwnProperty(e)&&"string"==typeof(d=c[e])&&j.push(d);if(0!==j.length)return k&&(l[k]=j),(k?a.exclude(k):a).require(j,function(){for(i=0,n=h.length;i<n;i++)if(f=h[i],g.hasOwnProperty(f))if("string"==typeof(c=g[f]))g[f]=b.get(c);else if(c instanceof Array)for(e=0,m=c.length;e<m;e++)"string"==typeof(d=c[e])&&(g[f][e]=b.get(d));else if("function"!=typeof c)for(var a in c)c.hasOwnProperty(a)&&"string"==typeof(d=c[a])&&(g[f][a]=b.get(d));p.call(r,o,g,q)}),!1},!0,"after","className"),b.registerPostprocessor("uses",function(l,m,h){var b,g,j,c,f,d=Ext.manifest,e=d&&d.loadOrder,k=d&&d.classes;if(e&&(g=k[l])&&!isNaN(c=g.idx)){for(f={},j=(b=e[c].uses).length,c=0;c<j;c++)f[b[c]]=!0;0<(b=Ext.Boot.getPathsFromIndexes(f,e,!0)).length&&a.loadScripts({url:b,sequential:!0})}h.uses&&(b=h.uses,a.addUsedClasses(b))}),b.onCreated(a.historyPush),a.init()},Ext._endTime=Ext.ticks(),Ext._beforereadyhandler&&Ext._beforereadyhandler();var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,a){if((a=a).get||a.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=a.value)},$jscomp.getGlobal=function(a){return("undefined"==typeof window||window!==a)&&"undefined"!=typeof global&&null!=global?global:a},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(i,f,j,k){if(f){for(var a=$jscomp.global,b=i.split("."),e=0;e<b.length-1;e++){var d=b[e];d in a||(a[d]={}),a=a[d]}var g=b[b.length-1],h=a[g],c=f(h);c!=h&&null!=c&&$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})}},$jscomp.polyfill("Array.prototype.copyWithin",function(a){if(a)return a;return function(c,b,a){var d=this.length;if(c=Number(c),b=Number(b),a=Number(null!=a?a:d),c<b)for(a=Math.min(a,d);b<a;)b in this?this[c++]=this[b++]:(delete this[c++],b++);else for(c+=(a=Math.min(a,d+b-c))-b;b<a;)--a in this?this[--c]=this[a]:delete this[c];return this}},"es6-impl","es3"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a=a||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};return a[$jscomp.global.Symbol.iterator]=function(){return this},a},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator(),a instanceof String&&(a+="");var c=0,b={next:function(){if(c<a.length){var e=c++;return{value:d(e,a[e]),done:!1}}return b.next=function(){return{done:!0,value:void 0}},b.next()}};return b[Symbol.iterator]=function(){return b},b},$jscomp.polyfill("Array.prototype.entries",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(a,b){return[a,b]})}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.fill",function(a){if(a)return a;return function(e,b,a){var c=this.length||0;b<0&&(b=Math.max(0,c+b)),(null==a||c<a)&&(a=c),(a=Number(a))<0&&(a=Math.max(0,c+a));for(var d=Number(b||0);d<a;d++)this[d]=e;return this}},"es6-impl","es3"),$jscomp.findInternal=function(a,d,e){a instanceof String&&(a=String(a));for(var f=a.length,b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a))return{i:b,v:c}}return{i:-1,v:void 0}},$jscomp.polyfill("Array.prototype.find",function(a){if(a)return a;return function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.findIndex",function(a){if(a)return a;return function(b,a){return $jscomp.findInternal(this,b,a).i}},"es6-impl","es3"),$jscomp.polyfill("Array.from",function(a){if(a)return a;return function(a,b,f){$jscomp.initSymbolIterator(),b=null!=b?b:function(a){return a};var g,c=[],e=a[Symbol.iterator];if("function"==typeof e)for(a=e.call(a);!(g=a.next()).done;)c.push(b.call(f,g.value));else for(var h=a.length,d=0;d<h;d++)c.push(b.call(f,a[d]));return c}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.keys",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3"),$jscomp.polyfill("Array.of",function(a){if(a)return a;return function(a){return Array.from(arguments)}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.values",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})}},"es6","es3"),$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a.throw(b)}return new Promise(function(b,c){!function handleGeneratorRecord(a){a.done?b(a.value):Promise.resolve(a.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}(a.next())})},$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)},$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)},$jscomp.polyfill("WeakMap",function(c){if(function(){if(c&&Object.seal)try{var b=Object.seal({}),d=Object.seal({}),a=new c([[b,2],[d,3]]);return 2!=a.get(b)||3!=a.get(d)?void 0:(a.delete(b),a.set(d,4),!a.has(b)&&4==a.get(d))}catch(e){return}}())return c;var a="$jscomp_hidden_"+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){$jscomp.defineProperty(b,a,{value:{}})}}function patch(a){var b=Object[a];b&&(Object[a]=function(a){return insert(a),b(a)})}patch("freeze"),patch("preventExtensions"),patch("seal");var d=0,b=function(a){if(this.id_=(d+=Math.random()+1).toString(),a){$jscomp.initSymbol(),$jscomp.initSymbolIterator();for(var b,e=$jscomp.makeIterator(a);!(b=e.next()).done;){var c=b.value;this.set(c[0],c[1])}}};return b.prototype.set=function(b,c){if(insert(b),!$jscomp.owns(b,a))throw new Error("WeakMap key fail: "+b);return b[a][this.id_]=c,this},b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:void 0},b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)},b.prototype.delete=function(b){return!(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_))&&delete b[a][this.id_]},b},"es6-impl","es3"),$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.polyfill("Map",function(b){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{b=b;var e=Object.seal({x:4}),c=new b($jscomp.makeIterator([[e,"s"]]));if("s"!=c.get(e)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),a=d.next();return a.done||a.value[0]!=e||"s"!=a.value[1]?!1:!((a=d.next()).done||4!=a.value[0].x||"t"!=a.value[1]||!d.next().done)}catch(k){return!1}}())return b;$jscomp.initSymbol(),$jscomp.initSymbolIterator();var f=new WeakMap,a=function(a){if(this.data_={},this.head_=g(),this.size=0,a)for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.set(c[0],c[1])}};a.prototype.set=function(c,b){var a=d(this,c);return a.list||(a.list=this.data_[a.id]=[]),a.entry?a.entry.value=b:(a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:b},a.list.push(a.entry),this.head_.previous.next=a.entry,this.head_.previous=a.entry,this.size++),this},a.prototype.delete=function(b){var a=d(this,b);return!(!a.entry||!a.list)&&(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0)},a.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=g(),this.size=0},a.prototype.has=function(a){return!!d(this,a).entry},a.prototype.get=function(b){var a=d(this,b).entry;return a&&a.value},a.prototype.entries=function(){return e(this,function(a){return[a.key,a.value]})},a.prototype.keys=function(){return e(this,function(a){return a.key})},a.prototype.values=function(){return e(this,function(a){return a.value})},a.prototype.forEach=function(d,c){for(var b,e=this.entries();!(b=e.next()).done;){var a=b.value;d.call(c,a[1],a[0],this)}},a.prototype[Symbol.iterator]=a.prototype.entries;var d=function(f,d){var e=j(d),a=f.data_[e];if(a&&$jscomp.owns(f.data_,e))for(var c=0;c<a.length;c++){var b=a[c];if(d!=d&&b.key!=b.key||d===b.key)return{id:e,list:a,index:c,entry:b}}return{id:e,list:a,index:-1,entry:void 0}},e=function(b,c){var a=b.head_;return $jscomp.iteratorPrototype(function(){if(a){for(;a.head!=b.head_;)a=a.previous;if(a.next!=a.head)return a=a.next,{done:!1,value:c(a)};a=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=a.next=a.head=a,a},i=0,j=function(a){var b=a&&typeof a;if("object"!=b&&"function"!=b)return"p_"+a;if(a=a,f.has(a))return f.get(a);var c=""+ ++i;return f.set(a,c),c};return a},"es6-impl","es3"),$jscomp.polyfill("Math.acosh",function(a){if(a)return a;return function(a){return a=Number(a),Math.log(a+Math.sqrt(a*a-1))}},"es6-impl","es3"),$jscomp.polyfill("Math.asinh",function(a){if(a)return a;return function(a){if(0===(a=Number(a)))return a;var b=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Math.log1p",function(a){if(a)return a;return function(a){if((a=Number(a))<.25&&-.25<a){for(var e=a,f=1,b=a,c=0,d=1;c!=b;)b=(c=b)+(d*=-1)*(e*=a)/++f;return b}return Math.log(1+a)}},"es6-impl","es3"),$jscomp.polyfill("Math.atanh",function(b){if(b)return b;var a=Math.log1p;return function(b){return b=Number(b),(a(b)-a(-b))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.cbrt",function(a){if(a)return a;return function(a){if(0===a)return a;a=Number(a);var b=Math.pow(Math.abs(a),1/3);return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Math.clz32",function(a){if(a)return a;return function(a){if(0===(a=Number(a)>>>0))return 32;var b=0;return 0==(4294901760&a)&&(a<<=16,b+=16),0==(4278190080&a)&&(a<<=8,b+=8),0==(4026531840&a)&&(a<<=4,b+=4),0==(3221225472&a)&&(a<<=2,b+=2),0==(2147483648&a)&&b++,b}},"es6-impl","es3"),$jscomp.polyfill("Math.cosh",function(a){if(a)return a;var b=Math.exp;return function(a){return a=Number(a),(b(a)+b(-a))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.expm1",function(a){if(a)return a;return function(a){if((a=Number(a))<.25&&-.25<a){for(var d=a,e=1,b=a,c=0;c!=b;)b=(c=b)+(d*=a/++e);return b}return Math.exp(a)-1}},"es6-impl","es3"),$jscomp.polyfill("Math.hypot",function(a){if(a)return a;return function(b,c,g){var a,f,e;b=Number(b),c=Number(c);var d=Math.max(Math.abs(b),Math.abs(c));for(a=2;a<arguments.length;a++)d=Math.max(d,Math.abs(arguments[a]));if(1e100<d||d<1e-100){for(e=(b/=d)*b+(c/=d)*c,a=2;a<arguments.length;a++)e+=(f=Number(arguments[a])/d)*f;return Math.sqrt(e)*d}for(e=b*b+c*c,a=2;a<arguments.length;a++)e+=(f=Number(arguments[a]))*f;return Math.sqrt(e)}},"es6-impl","es3"),$jscomp.polyfill("Math.imul",function(a){if(a)return a;return function(a,b){var c=65535&(a=Number(a)),d=65535&(b=Number(b));return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0}},"es6-impl","es3"),$jscomp.polyfill("Math.log10",function(a){if(a)return a;return function(a){return Math.log(a)/Math.LN10}},"es6-impl","es3"),$jscomp.polyfill("Math.log2",function(a){if(a)return a;return function(a){return Math.log(a)/Math.LN2}},"es6-impl","es3"),$jscomp.polyfill("Math.sign",function(a){if(a)return a;return function(a){return 0===(a=Number(a))||isNaN(a)?a:0<a?1:-1}},"es6-impl","es3"),$jscomp.polyfill("Math.sinh",function(a){if(a)return a;var b=Math.exp;return function(a){return 0===(a=Number(a))?a:(b(a)-b(-a))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.tanh",function(a){if(a)return a;return function(a){if(0===(a=Number(a)))return a;var b=Math.exp(-2*Math.abs(a)),c=(1-b)/(1+b);return a<0?-c:c}},"es6-impl","es3"),$jscomp.polyfill("Math.trunc",function(a){if(a)return a;return function(a){if(a=Number(a),isNaN(a)||a===1/0||a===-1/0||0===a)return a;var b=Math.floor(Math.abs(a));return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Number.EPSILON",function(a){return Math.pow(2,-52)},"es6-impl","es3"),$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6-impl","es3"),$jscomp.polyfill("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991},"es6-impl","es3"),$jscomp.polyfill("Number.isFinite",function(a){if(a)return a;return function(a){return"number"==typeof a&&(!isNaN(a)&&a!==1/0&&a!==-1/0)}},"es6-impl","es3"),$jscomp.polyfill("Number.isInteger",function(a){if(a)return a;return function(a){return!!Number.isFinite(a)&&a===Math.floor(a)}},"es6-impl","es3"),$jscomp.polyfill("Number.isNaN",function(a){if(a)return a;return function(a){return"number"==typeof a&&isNaN(a)}},"es6-impl","es3"),$jscomp.polyfill("Number.isSafeInteger",function(a){if(a)return a;return function(a){return Number.isInteger(a)&&Math.abs(a)<=Number.MAX_SAFE_INTEGER}},"es6-impl","es3"),$jscomp.polyfill("Object.assign",function(a){if(a)return a;return function(d,e){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(a)for(var b in a)$jscomp.owns(a,b)&&(d[b]=a[b])}return d}},"es6-impl","es3"),$jscomp.polyfill("Object.getOwnPropertySymbols",function(a){return a||function(){return[]}},"es6-impl","es5"),$jscomp.polyfill("Object.is",function(a){if(a)return a;return function(a,b){return a===b?0!==a||1/a==1/b:a!=a&&b!=b}},"es6-impl","es3"),$jscomp.polyfill("Object.setPrototypeOf",function(a){if(a)return a;if("object"!=typeof"".__proto__)return null;return function(a,b){if(a.__proto__=b,a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}},"es6","es5"),$jscomp.EXPOSE_ASYNC_EXECUTOR=!0,$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.polyfill("Promise",function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){return null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_()),this.batch_.push(a),this},AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global.setTimeout;AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)},AsyncExecutor.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var c=b[a];delete b[a];try{c()}catch(f){this.asyncThrow_(f)}}}this.batch_=null},AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b_PENDING=0,b_FULFILLED=1,b_REJECTED=2,a=function(c){this.state_=b_PENDING,this.result_=void 0,this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{c(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this,a=!1;function firstCallWins(c){return function(d){a||(a=!0,c.call(b,d))}}return{resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}},a.prototype.resolveTo_=function(b){b===this?this.reject_(new TypeError("A Promise cannot resolve to itself")):b instanceof a?this.settleSameAsPromise_(b):!function(a){switch(typeof a){case"object":return null!=a;case"function":return 1;default:return}}(b)?this.fulfill_(b):this.resolveToNonPromiseObj_(b)},a.prototype.resolveToNonPromiseObj_=function(b){var a=void 0;try{a=b.then}catch(f){return void this.reject_(f)}"function"==typeof a?this.settleSameAsThenable_(a,b):this.fulfill_(b)},a.prototype.reject_=function(a){this.settle_(b_REJECTED,a)},a.prototype.fulfill_=function(a){this.settle_(b_FULFILLED,a)},a.prototype.settle_=function(c,a){if(this.state_!=b_PENDING)throw new Error("Cannot settle("+c+", "+a|"): Promise already settled in state"+this.state_);this.state_=c,this.result_=a,this.executeOnSettledCallbacks_()},a.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=this.onSettledCallbacks_,a=0;a<b.length;++a)b[a].call(),b[a]=null;this.onSettledCallbacks_=null}};var d=new AsyncExecutor;return a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)},a.prototype.settleSameAsThenable_=function(b,c){var a=this.createResolveAndReject_();try{b.call(c,a.resolve,a.reject)}catch(f){a.reject(f)}},a.prototype.then=function(e,f){var b,c,d=new a(function(a,d){b=a,c=d});function createCallback(a,d){return"function"==typeof a?function(d){try{b(a(d))}catch(g){c(g)}}:d}return this.callWhenSettled_(createCallback(e,b),createCallback(f,c)),d},a.prototype.catch=function(a){return this.then(void 0,a)},a.prototype.callWhenSettled_=function(c,e){var a=this;function callback(){switch(a.state_){case b_FULFILLED:c(a.result_);break;case b_REJECTED:e(a.result_);break;default:throw new Error("Unexpected state: "+a.state_)}}null==this.onSettledCallbacks_?d.asyncExecute(callback):this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})},a.resolve=function(b){return b instanceof a?b:new a(function(a,c){a(b)})},a.reject=function(b){return new a(function(c,a){a(b)})},a.race=function(b){return new a(function(e,f){for(var d=$jscomp.makeIterator(b),c=d.next();!c.done;c=d.next())a.resolve(c.value).callWhenSettled_(e,f)})},a.all=function(d){var c=$jscomp.makeIterator(d),b=c.next();return b.done?a.resolve([]):new a(function(f,g){var d=[],e=0;function onFulfilled(a){return function(b){d[a]=b,0==--e&&f(d)}}for(;d.push(void 0),e++,a.resolve(b.value).callWhenSettled_(onFulfilled(d.length-1),g),!(b=c.next()).done;);})},$jscomp.EXPOSE_ASYNC_EXECUTOR&&(a.$jscomp$new$AsyncExecutor=function(){return new AsyncExecutor}),a},"es6-impl","es3"),$jscomp.polyfill("Reflect.apply",function(a){if(a)return a;var c=Function.prototype.apply;return function(d,b,a){return c.call(d,b,a)}},"es6","es3"),$jscomp.polyfill("Reflect.construct",function(a){if(a)return a;return function(b,d,a){void 0===a&&(a=b);var e=a.prototype||Object.prototype,c=Object.create(e);return Reflect.apply(b,c,d)||c}},"es6","es5"),$jscomp.polyfill("Reflect.defineProperty",function(a){if(a)return a;return function(d,c,b){try{Object.defineProperty(d,c,b);var a=Object.getOwnPropertyDescriptor(d,c);return a?a.configurable===(b.configurable||!1)&&a.enumerable===(b.enumerable||!1)&&("value"in a?a.value===b.value&&a.writable===(b.writable||!1):a.get===b.get&&a.set===b.set):!1}catch(e){return!1}}},"es6","es5"),$jscomp.polyfill("Reflect.deleteProperty",function(a){if(a)return a;return function(b,a){if(!$jscomp.owns(b,a))return!0;try{return delete b[a]}catch(c){return!1}}},"es6","es3"),$jscomp.polyfill("Reflect.getOwnPropertyDescriptor",function(a){return a||Object.getOwnPropertyDescriptor},"es6","es5"),$jscomp.polyfill("Reflect.getPrototypeOf",function(a){return a||Object.getPrototypeOf},"es6","es5"),$jscomp.findDescriptor=function(d,c){for(var a=d;a;){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b)return b;a=Reflect.getPrototypeOf(a)}},$jscomp.polyfill("Reflect.get",function(a){if(a)return a;return function(c,b,d){if(arguments.length<=2)return c[b];var a=$jscomp.findDescriptor(c,b);return a?a.get?a.get.call(d):a.value:void 0}},"es6","es5"),$jscomp.polyfill("Reflect.has",function(a){if(a)return a;return function(b,a){return a in b}},"es6","es3"),$jscomp.polyfill("Reflect.isExtensible",function(a){return a||("function"==typeof Object.isExtensible?Object.isExtensible:function(){return!0})},"es6","es3"),$jscomp.polyfill("Reflect.ownKeys",function(b){if(b)return b;var a="jscomp_symbol_";function isSymbol(b){return b.substring(0,a.length)==a}return function(d){for(var e=[],b=Object.getOwnPropertyNames(d),c=Object.getOwnPropertySymbols(d),a=0;a<b.length;a++)(isSymbol(b[a])?c:e).push(b[a]);return e.concat(c)}},"es6","es5"),$jscomp.polyfill("Reflect.preventExtensions",function(a){if(a)return a;if("function"!=typeof Object.preventExtensions)return function(){return!1};return function(a){return Object.preventExtensions(a),!Object.isExtensible(a)}},"es6","es3"),$jscomp.polyfill("Reflect.set",function(a){if(a)return a;return function(a,c,d,e){var b=$jscomp.findDescriptor(a,c);return b?b.set?(b.set.call(3<arguments.length?e:a,d),!0):!(!b.writable||Object.isFrozen(a))&&(a[c]=d,!0):!!Reflect.isExtensible(a)&&(a[c]=d,!0)}},"es6","es5"),$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if("object"!=typeof"".__proto__)return null;return function(a,b){try{return a.__proto__=b,a.__proto__===b}catch(c){return!1}}},"es6","es5"),$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.polyfill("Set",function(b){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{b=b;var d=Object.seal({x:4}),c=new b($jscomp.makeIterator([d]));if(!c.has(d)||1!=c.size||c.add(d)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var e=c.entries(),a=e.next();return a.done||a.value[0]!=d||a.value[1]!=d?!1:!(a=e.next()).done&&a.value[0]!=d&&4==a.value[0].x&&a.value[1]==a.value[0]&&e.next().done}catch(f){return!1}}())return b;$jscomp.initSymbol(),$jscomp.initSymbolIterator();var a=function(a){if(this.map_=new Map,a)for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.add(c)}this.size=this.map_.size};return a.prototype.add=function(a){return this.map_.set(a,a),this.size=this.map_.size,this},a.prototype.delete=function(b){var a=this.map_.delete(b);return this.size=this.map_.size,a},a.prototype.clear=function(){this.map_.clear(),this.size=0},a.prototype.has=function(a){return this.map_.has(a)},a.prototype.entries=function(){return this.map_.entries()},a.prototype.values=function(){return this.map_.values()},a.prototype[Symbol.iterator]=a.prototype.values,a.prototype.forEach=function(b,a){var c=this;this.map_.forEach(function(d){return b.call(a,d,d,c)})},a},"es6-impl","es3"),$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""},$jscomp.polyfill("String.prototype.codePointAt",function(a){if(a)return a;return function(a){var d=$jscomp.checkStringArgs(this,null,"codePointAt"),e=d.length;if(0<=(a=Number(a)||0)&&a<e){a|=0;var b=d.charCodeAt(a);if(b<55296||56319<b||a+1===e)return b;var c=d.charCodeAt(a+1);return c<56320||57343<c?b:1024*(b-55296)+c+9216}}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.endsWith",function(a){if(a)return a;return function(a,b){var c=$jscomp.checkStringArgs(this,a,"endsWith");a+="",void 0===b&&(b=c.length);for(var e=Math.max(0,Math.min(0|b,c.length)),d=a.length;0<d&&0<e;)if(c[--e]!=a[--d])return!1;return d<=0}},"es6-impl","es3"),$jscomp.polyfill("String.fromCodePoint",function(a){if(a)return a;return function(d){for(var b="",c=0;c<arguments.length;c++){var a=Number(arguments[c]);if(a<0||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);a<=65535?b+=String.fromCharCode(a):(a-=65536,b+=String.fromCharCode(a>>>10&1023|55296),b+=String.fromCharCode(1023&a|56320))}return b}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.includes",function(a){if(a)return a;return function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.repeat",function(a){if(a)return a;return function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(a<0||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var c="";a;)1&a&&(c+=b),(a>>>=1)&&(b+=b);return c}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.startsWith",function(a){if(a)return a;return function(a,f){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var g=b.length,d=a.length,e=Math.max(0,Math.min(0|f,b.length)),c=0;c<d&&e<g;)if(b[e++]!=a[c++])return!1;return d<=c}},"es6-impl","es3"),$jscomp.arrayFromIterator=function(c){for(var b,a=[];!(b=c.next()).done;)a.push(b.value);return a},$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))},$jscomp.inherits=function(a,b){function tempCtor(){}for(var c in tempCtor.prototype=b.prototype,a.prototype=new tempCtor,a.prototype.constructor=a,b)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]},$jscomp.polyfill("WeakSet",function(b){if(function(){if(b&&Object.seal)try{var c=Object.seal({}),d=Object.seal({}),a=new b([c]);return!a.has(c)||a.has(d)?void 0:(a.delete(c),a.add(d),!a.has(c)&&a.has(d))}catch(e){return}}())return b;var a=function(a){if(this.map_=new WeakMap,a){$jscomp.initSymbol(),$jscomp.initSymbolIterator();for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.add(c)}}};return a.prototype.add=function(a){return this.map_.set(a,!0),this},a.prototype.has=function(a){return this.map_.has(a)},a.prototype.delete=function(a){return this.map_.delete(a)},a},"es6-impl","es3");try{-1==Array.prototype.values.toString().indexOf("[native code]")&&delete Array.prototype.values}catch(a){}if(Ext.define("Ext.Mixin",function(a){return{statics:{addHook:function(d,b,c,g){var f=Ext.isFunction(d),a=function(){var a=arguments,c=f?d:g[d],b=this.callParent(a);return c.apply(this,a),b},e=b.hasOwnProperty(c)&&b[c];f&&(d.$previous=Ext.emptyFn),a.$name=c,a.$owner=b.self,e?(a.$previous=e.$previous,e.$previous=a):b[c]=a}},onClassExtended:function(k,c){var h,f,g,e,b=c.mixinConfig,d=c.xhooks,j=k.superclass,i=c.onClassMixedIn;d&&(delete c.xhooks,(b||(c.mixinConfig=b={})).on=d),b&&((h=j.mixinConfig)&&(c.mixinConfig=b=Ext.merge({},h,b)),c.mixinId=b.id,f=b.before,g=b.after,d=b.on,e=b.extended),(f||g||d||e)&&(c.onClassMixedIn=function(b){var h,c=this.prototype,j=b.prototype;if(f&&Ext.Object.each(f,function(d,a){b.addMember(d,function(){if(!1!==c[a].apply(this,arguments))return this.callParent(arguments)})}),g&&Ext.Object.each(g,function(d,a){b.addMember(d,function(){var b=this.callParent(arguments);return c[a].apply(this,arguments),b})}),d)for(h in d)a.addHook(d[h],j,h,c);e&&b.onExtended(function(){var a=Ext.Array.slice(arguments,0);return a.unshift(b),e.apply(this,a)},this),i&&i.apply(this,arguments)})}}}),Ext.util=Ext.util||{},Ext.util.DelayedTask=function(e,c,d,b,g){function h(){var b=Ext.GlobalEvents;clearInterval(a.id),a.id=null,e.apply(c,d||[]),!1!==g&&b.hasListeners.idle&&b.fireEvent("idle")}var f,a=this;b="boolean"!=typeof b||b,a.id=null,a.delay=function(g,k,i,j){b&&a.cancel(),"number"==typeof g&&(f=g),e=k||e,c=i||c,d=j||d,a.id||(a.id=Ext.interval(h,f))},a.cancel=function(){a.id&&(clearInterval(a.id),a.id=null)}},Ext.define("Ext.util.Event",function(){var d=Array.prototype.slice,c=Ext.Array.insert,b=Ext.Array.toArray,a={};return{isEvent:!0,suspended:0,noOptions:{},constructor:function(a,b){this.name=b,this.observable=a,this.listeners=[]},addListener:function(r,q,g,t,s){var d,m,i,h,f,k,j,b,e,a=this,p=!1,l=a.observable,o=a.name;if(-1===a.findListener(r,q)){if(m=a.createListener(r,q,g,t,s),a.firing&&(a.listeners=a.listeners.slice(0)),b=j=(d=a.listeners).length,i=g&&g.priority,k=void 0!==(f=a._highestNegativePriorityIndex),i)if(!(h=i<0)||k){for(e=h?f:0;e<j;e++)if((d[e].o&&d[e].o.priority||0)<i){b=e;break}}else a._highestNegativePriorityIndex=b;else k&&(b=f);!h&&b<=f&&a._highestNegativePriorityIndex++,b===j?d[j]=m:c(d,b,[m]),l.isElement&&l._getPublisher(o).subscribe(l,o,!1!==g.delegated,g.capture),p=!0}return p},createListener:function(h,e,a,k,j){var g,f=this,i=Ext._namedScopes[e],b={fn:h,scope:e,ev:f,caller:k,manager:j,namedScope:i,defaultScope:i?e||f.observable:void 0,lateBound:"string"==typeof h},c=h,d=!1;return a&&((b.o=a).single&&(c=f.createSingle(c,b,a,e),d=!0),a.target&&(c=f.createTargeted(c,b,a,e,d),d=!0),a.delay&&(c=f.createDelayed(c,b,a,e,d),d=!0),a.buffer&&(c=f.createBuffered(c,b,a,e,d),d=!0),f.observable.isElement&&(g=a.type)&&(b.type=g)),b.fireFn=c,b.wrapped=d,b},findListener:function(e,d){for(var a,c=this.listeners,b=c.length;b--;)if((a=c[b])&&a.fn===e&&a.scope==d)return b;return-1},removeListener:function(o,n,c){var b,f,l,h,k,d,e,g,a=this,m=!1,i=a.observable,j=a.name;if(-1!=(c=c||a.findListener(o,n))){if(l=(b=a.listeners[c]).o,f=a._highestNegativePriorityIndex,a.firing&&(a.listeners=a.listeners.slice(0)),b.task&&(b.task.cancel(),delete b.task),h=b.tasks&&b.tasks.length){for(;h--;)b.tasks[h].cancel();delete b.tasks}if(a.listeners.splice(c,1),(k=b.manager)&&(d=k.managedListeners))for(g=d.length;g--;)(e=d[g]).item===a.observable&&e.ename===j&&e.fn===o&&e.scope===n&&d.splice(g,1);f&&(c<f?a._highestNegativePriorityIndex--:c===f&&c===a.listeners.length&&delete a._highestNegativePriorityIndex),i.isElement&&i._getPublisher(j).unsubscribe(i,j,!1!==l.delegated,l.capture),m=!0}return m},clearListeners:function(){for(var a,b=this.listeners,c=b.length;c--;)a=b[c],this.removeListener(a.fn,a.scope)},suspend:function(){++this.suspended},resume:function(){this.suspended&&--this.suspended},isSuspended:function(){return 0<this.suspended},fireDelegated:function(a,b){return this.firingObservable=a,this.fire.apply(this,b)},fire:function(){var b,o,f,k,c,j,u,h,l,p,g,m,a,s,q,e=this,r=e.listeners,t=r.length,n=e.observable,i=n.isElement,w=n.isComponent,v=e.firingObservable;if(!e.suspended&&0<t)for(e.firing=!0,u=(c=arguments.length?d.call(arguments,0):[]).length,i&&(a=c[0]),k=0;k<t;k++){if(b=(j=r[k]).o,i&&(l&&a.setCurrentTarget(l),(p=j.type)&&(g=a,a=c[0]=g.chain({type:p})),Ext.EventObject=a),m=c,b){if(o=b.delegate)if(i){if(!(h=a.getTarget("#"+a.currentTarget.id+" "+o)))continue;c[1]=h,l=a.currentTarget,a.setCurrentTarget(h)}else if(w&&!v.is("#"+n.id+" "+b.delegate))continue;i&&(b.preventDefault&&a.preventDefault(),b.stopPropagation&&a.stopPropagation(),b.stopEvent&&a.stopEvent()),(c[u]=b).args&&(m=b.args.concat(c))}if(s=(f=e.getFireInfo(j)).fn,q=f.scope,f.fn=f.scope=null,!1===s.apply(q,m))return Ext.EventObject=null,e.firing=!1;g&&(a=c[0]=g,g=null),Ext.EventObject=null}return!(e.firing=!1)},getFireInfo:function(b,g){var e,f=this.observable,h=b.fireFn,c=b.scope,d=b.namedScope;return!g&&b.wrapped?a.fn=h:(e=g?b.fn:h,b.lateBound?(c&&!d||(c=(b.caller||f).resolveListenerScope(b.defaultScope)),e=c[e]):d&&d.isController?c=(b.caller||f).resolveListenerScope(b.defaultScope):c&&!d||(c=f),a.fn=e,a.scope=c),a},createTargeted:function(b,a,e,c,d){return function(){var f;if(e.target===arguments[0])return d||(f=a.ev.getFireInfo(a,!0),b=f.fn,c=f.scope,f.fn=f.scope=null),b.apply(c,arguments)}},createBuffered:function(c,a,f,d,e){return a.task=new Ext.util.DelayedTask,function(){var g;e||(g=a.ev.getFireInfo(a,!0),c=g.fn,d=g.scope,g.fn=g.scope=null),a.task.delay(f.buffer,c,d,b(arguments))}},createDelayed:function(c,a,f,d,e){return function(){var g,h=new Ext.util.DelayedTask;e||(g=a.ev.getFireInfo(a,!0),c=g.fn,d=g.scope,g.fn=g.scope=null),a.tasks||(a.tasks=[]),a.tasks.push(h),h.delay(f.delay||10,c,d,b(arguments))}},createSingle:function(c,a,e,b,d){return function(){var e,f=a.ev;return f.removeListener(a.fn,b)&&f.observable&&f.observable.hasListeners[f.name]--,d||(e=f.getFireInfo(a,!0),c=e.fn,b=e.scope,e.fn=e.scope=null),c.apply(b,arguments)}}}}),Ext.define("Ext.mixin.Identifiable",{statics:{uniqueIds:{}},isIdentifiable:!0,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:function(){var c,b,f,d,a,e=this.id;return e||0===e||(c=this.self.prototype,b=this.defaultIdSeparator,d=Ext.mixin.Identifiable.uniqueIds,c.hasOwnProperty("identifiablePrefix")||(a=(f=this.xtype)?this.defaultIdPrefix+f.replace(this.idCleanRegex,b)+b:(a=c.$className)?a.replace(this.idCleanRegex,b).toLowerCase()+b:this.defaultIdPrefix+"anonymous"+b,c.identifiablePrefix=a),a=this.identifiablePrefix,d.hasOwnProperty(a)||(d[a]=0),e=this.id=this.id=a+ ++d[a]),this.getUniqueId=this.getOptimizedId,e},setId:function(a){this.id=this.id=a},getId:function(){var a=this.id;return a=a||this.getUniqueId(),this.getId=this.getOptimizedId,a}}),Ext.define("Ext.mixin.Observable",function(c){var d=Ext.emptyFn,f=[],b=Array.prototype.slice,a=function(c){if(c instanceof a)return c;this.observable=c,arguments[1].isObservable&&(this.managedListeners=!0),this.args=b.call(arguments,1)};return a.prototype.destroy=function(){this.destroy=Ext.emptyFn;var a=this.observable;a[this.managedListeners?"mun":"un"].apply(a,this.args)},{extend:Ext.Mixin,mixinConfig:{id:"observable",after:{destroy:"clearListeners"}},mixins:[Ext.mixin.Identifiable],statics:{releaseCapture:function(a){a.fireEventArgs=this.prototype.fireEventArgs},capture:function(d,c,a){this.captureArgs(d,function(b,d){return c.apply(a,[b].concat(d))},a)},captureArgs:function(a,c,b){a.fireEventArgs=Ext.Function.createInterceptor(a.fireEventArgs,c,b)},observe:function(a,b){return a&&(a.isObservable||(Ext.applyIf(a,new this),this.captureArgs(a.prototype,a.fireEventArgs,a)),Ext.isObject(b)&&a.on(b)),a},prepareClass:function(a,d,l){var f,e,i=a.listeners=[],j=l||a.prototype,b=j.listeners,g=d?d.listeners:a.superclass.self.listeners;if(g&&i.push(g),b&&((f=b.scope)?(e=Ext._namedScopes[f])&&e.isController&&(b.scope="self.controller"):b.scope="self",i.push(b),j.listeners=null),!a.HasListeners){function h(){}var k=a.superclass.HasListeners||d&&d.HasListeners||c.HasListeners;a.prototype.HasListeners=a.HasListeners=h,h.prototype=a.hasListeners=new k}}},isObservable:!0,eventsSuspended:0,constructor:function(c){var e,b,f,h,d,a=this,g=a.self;if(!a.$observableInitialized){if(a.$observableInitialized=!0,a.hasListeners=new a.HasListeners,a.eventedBeforeEventNames={},a.events=a.events||{},(e=g.listeners)&&!a._addDeclaredListeners(e)&&(g.listeners=null),b=c&&c.listeners||a.listeners)if(b instanceof Array)for(d=0,h=b.length;d<h;++d)a.addListener(b[d]);else a.addListener(b);(f=c&&c.bubbleEvents||a.bubbleEvents)&&a.enableBubble(f),a.$applyConfigs?c&&Ext.apply(a,c):a.initConfig(c),b&&(a.listeners=null)}},onClassExtended:function(a,b){a.HasListeners||c.prepareClass(a,a.prototype.$observableMixedIn?void 0:b)},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(b){var a=this;return b instanceof Array?Ext.each(b,a._addDeclaredListeners,a):(a._addedDeclaredListeners=!0,a.addListener(b)),a._addedDeclaredListeners},addManagedListener:function(g,c,i,h,b,k){var f,j,e=this;e.managedListeners=e.managedListeners||[];if("string"!=typeof c){for(c in j=4<arguments.length?b:c,b=c)b.hasOwnProperty(c)&&(f=b[c],g.$eventOptions[c]||e.addManagedListener(g,c,f.fn||f,f.scope||b.scope||h,f.fn?f:j,!0));if(b&&b.destroyable)return new a(e,g,b)}else if(i!==d&&(g.doAddListener(c,i,h,b,null,e,e),!k&&b&&b.destroyable))return new a(e,g,c,i,h)},removeManagedListener:function(g,a,j,i){var b,c,f,h,e,d=this;if("string"!=typeof a)for(a in b=a)b.hasOwnProperty(a)&&(c=b[a],g.$eventOptions[a]||d.removeManagedListener(g,a,c.fn||c,c.scope||b.scope||i));else for(f=d.managedListeners?d.managedListeners.slice():[],a=Ext.canonicalEventName(a),e=0,h=f.length;e<h;e++)d.removeManagedListenerItem(!1,f[e],g,a,j,i)},fireEvent:function(a){return this.fireEventArgs(a,b.call(arguments,1))},resolveListenerScope:function(a){var b=Ext._namedScopes[a];return b&&(b.isSelf||b.isThis)&&(a=null),a||this},fireEventArgs:function(a,g){a=Ext.canonicalEventName(a);var b=this,c=b.events,d=c&&c[a],e=!0;return b.hasListeners[a]&&(e=b.doFireEvent(a,g||f,!!d&&d.bubble)),e},fireAction:function(c,f,b,d,a,e){"string"!=typeof b||d||(b=this[b]),(a=a?Ext.Object.chain(a):{}).single=!0,a.priority="after"===e?-99.5:99.5,this.doAddListener(c,b,d,a),this.fireEventArgs(c,f)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var d,e,a=this,b=a.fn,c=a.scope,f=a.fnArgs;a.owner;if(!--a._paused){if(b&&(d=Ext.Array.slice(f||a.args),!1===f&&d.shift(),a.fn=null,d.push(a),Ext.isFunction(b)?e=b.apply(c,d):c&&Ext.isString(b)&&Ext.isFunction(c[b])&&(e=c[b].apply(c,d)),!1===e))return!1;if(!a._paused)return a.owner.fireEventArgs(a.eventName,a.args)}}},fireEventedAction:function(a,b,j,i,h){var f,c=this,d=c.eventedBeforeEventNames,g=d[a]||(d[a]="before"+a),e=Ext.apply({owner:c,eventName:a,fn:j,scope:i,fnArgs:h,args:b},c.$eventedController);return b.push(e),f=c.fireEventArgs(g,b),b.pop(),!1!==f&&e.resume()},doFireEvent:function(d,f,g){var e,b,a=this,c=!0;do{if(a.eventsSuspended)return(e=a.eventQueue)&&e.push([d,f]),c;if((b=a.events&&a.events[d])&&!0!==b&&!1===(c=b.fire.apply(b,f)))break}while(g&&(a=a.getBubbleParent()));return c},getBubbleParent:function(){var a=this.getBubbleTarget&&this.getBubbleTarget();return a&&a.isObservable?a:null},addListener:function(d,n,g,b,m,l){var f,e,i,h,j,c=this,k=Ext._namedScopes;if("string"!=typeof d){for(d in i=(e=(g=(b=d).scope)&&k[g])&&e.isSelf,j=(c.isComponent||c.isWidget)&&b.element?c.$elementEventOptions:c.$eventOptions,b)f=b[d],j[d]||((h=f.scope)&&i&&(e=k[h])&&e.isController&&(h="self.controller"),c.doAddListener(d,f.fn||f,h||g,f.fn?f:b,m,l));if(b&&b.destroyable)return new a(c,b)}else if(c.doAddListener(d,n,g,b,m,l),b&&b.destroyable)return new a(c,d,n,g,b);return c},removeListener:function(a,g,f,e){var d,b,c=this;if("string"!=typeof a)for(a in b=a,e=e||c.$eventOptions,b)b.hasOwnProperty(a)&&(d=b[a],c.$eventOptions[a]||c.doRemoveListener(a,d.fn||d,d.scope||b.scope));else c.doRemoveListener(a,g,f);return c},onBefore:function(a,d,c,b){return this.addListener(a,d,c,b,"before")},onAfter:function(a,d,c,b){return this.addListener(a,d,c,b,"after")},unBefore:function(a,d,c,b){return this.removeListener(a,d,c,b,"before")},unAfter:function(a,d,c,b){return this.removeListener(a,d,c,b,"after")},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var d,b,c=this,a=c.events,e=c.hasListeners;if(a){for(b in a)a.hasOwnProperty(b)&&(d=a[b]).isEvent&&(delete e[b],d.clearListeners());c.events=null}c.clearManagedListeners()},clearManagedListeners:function(){for(var a=this,c=a.managedListeners?a.managedListeners.slice():[],b=0,d=c.length;b<d;b++)a.removeManagedListenerItem(!0,c[b]);a.managedListeners=[]},removeManagedListenerItem:function(b,a,f,e,d,c){!b&&(a.item!==f||a.ename!==e||d&&a.fn!==d||c&&a.scope!==c)||(a.item.doRemoveListener(a.ename,a.fn,a.scope,a.options),b||Ext.Array.remove(this.managedListeners,a))},hasListener:function(a){return a=Ext.canonicalEventName(a),!!this.hasListeners[a]},isSuspended:function(a){var b=0<this.eventsSuspended,c=this.events;return!b&&a&&c&&(a=c[a])&&a.isEvent?a.isSuspended():b},suspendEvents:function(a){++this.eventsSuspended,a&&!this.eventQueue&&(this.eventQueue=[])},suspendEvent:function(){var c,b,a,e=this.events,f=arguments.length;for(c=0;c<f;c++)a=arguments[c],(b=e[a=Ext.canonicalEventName(a)])&&b.isEvent||(b=this._initEvent(a)),b.suspend()},resumeEvent:function(){var b,a,c=this.events||0,d=c&&arguments.length;for(b=0;b<d;b++)(a=c[arguments[b]])&&a.resume&&a.resume()},resumeEvents:function(e){var d,b,a=this,c=a.eventQueue;if(a.eventsSuspended&&!--a.eventsSuspended&&(delete a.eventQueue,!e&&c))for(d=c.length,b=0;b<d;b++)a.fireEventArgs.apply(a,c[b])},relayEvents:function(h,c,i){var e,g,f=this,j=c.length,b=0,d={};if(Ext.isObject(c))for(b in c)g=c[b],d[b]=f.createRelayer(g);else for(;b<j;b++)d[e=c[b]]=f.createRelayer(i?i+e:e);return f.mon(h,d,null,null,void 0),new a(f,h,d)},createRelayer:function(d,a){var c=this;return function(){return c.fireEventArgs.call(c,d,a?b.apply(arguments,a):arguments)}},enableBubble:function(d){if(d){var a,b,c,e=this,g="string"==typeof d?arguments:d,f=e.events,h=f&&g.length;for(c=0;c<h;++c)a=g[c],(b=f[a=Ext.canonicalEventName(a)])&&b.isEvent||(b=e._initEvent(a)),e.hasListeners._incr_(a),b.bubble=!0}},destroy:function(){this.clearListeners(),this.callParent()},privates:{doAddListener:function(e,i,f,a,h,l,c){var g,b=this;(h=h||a&&a.order)&&(a&&a.priority||((a=a?Ext.Object.chain(a):{}).priority=b.$orderToPriority[h])),e=Ext.canonicalEventName(e),!c&&f&&f.isObservable&&f!==b&&(c=f),c&&(c.managedListeners=c.managedListeners||[]).push({item:b,ename:e,fn:i,scope:f,options:a}),(g=(b.events||(b.events={}))[e])&&g.isEvent||(g=b._initEvent(e)),i!==d&&g.addListener(i,f,a,l,c)&&b.hasListeners._incr_(e)},doRemoveListener:function(a,f,e){var b,c=this.events;a=Ext.canonicalEventName(a),(b=c&&c[a])&&b.isEvent&&b.removeListener(f,e)&&this.hasListeners._decr_(a)},_initEvent:function(a){return this.events[a]=new Ext.util.Event(this,a)}},deprecated:{"5.0":{methods:{addEvents:null}}}}},function(){function d(){}var a=this,c=a.prototype,b=function(c){if(!c.HasListeners){var d=c.prototype;d.$observableMixedIn=1,a.prepareClass(c,this),c.onExtended(function(c,b){a.prepareClass(c,null,b)}),d.onClassMixedIn?Ext.override(c,{onClassMixedIn:function(a){b.call(this,a),this.callParent(arguments)}}):d.onClassMixedIn=function(a){b.call(this,a)}}e.call(this,c)},e=c.onClassMixedIn;function getMethodEvent(e){var c,b,d,f,a=(this.methodEvents=this.methodEvents||{})[e],g=this;return a||(this.methodEvents[e]=a={},a.originalFn=this[e],a.methodName=e,a.before=[],a.after=[],f=function(f,a,e){void 0!==(b=f.apply(a||g,e))&&("object"==typeof b?(c=void 0!==b.returnValue?b.returnValue:b,d=!!b.cancel):!1===b?d=!0:c=b)},this[e]=function(){var h,e,i,j=Array.prototype.slice.call(arguments,0);for(c=b=void 0,d=!1,e=0,i=a.before.length;e<i;e++)if(h=a.before[e],f(h.fn,h.scope,j),d)return c;for(void 0!==(b=a.originalFn.apply(g,j))&&(c=b),e=0,i=a.after.length;e<i;e++)if(h=a.after[e],f(h.fn,h.scope,j),d)return c;return c}),a}d.prototype={_decr_:function(b,a){null==a&&(a=1),(this[b]-=a)||delete this[b]},_incr_:function(a){this.hasOwnProperty(a)?++this[a]:this[a]=1}},c.HasListeners=a.HasListeners=d,a.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener",setListeners:"addListener"}),a.observeClass=a.observe,Ext.apply(c,{onClassMixedIn:b,beforeMethod:function(a,c,b){getMethodEvent.call(this,a).before.push({fn:c,scope:b})},afterMethod:function(a,c,b){getMethodEvent.call(this,a).after.push({fn:c,scope:b})},removeMethodListener:function(f,e,d){var a,c,b=this.getMethodEvent(f);for(a=0,c=b.before.length;a<c;a++)if(b.before[a].fn==e&&b.before[a].scope==d)return void Ext.Array.erase(b.before,a,1);for(a=0,c=b.after.length;a<c;a++)if(b.after[a].fn==e&&b.after[a].scope==d)return void Ext.Array.erase(b.after,a,1)},toggleEventLogging:function(a){Ext.util.Observable[a?"capture":"releaseCapture"](this,function(a){Ext.isDefined(Ext.global.console)&&Ext.global.console.log(a,arguments)})}})}),Ext.define("Ext.util.HashMap",{mixins:[Ext.mixin.Observable],generation:0,config:{keyFn:null},constructor:function(c){var b,a=this;a.mixins.observable.constructor.call(a,c),a.clear(!0),(b=a.getKeyFn())&&(a.getKey=b)},getCount:function(){return this.length},getData:function(b,a){return void 0===a&&(a=b,b=this.getKey(a)),[b,a]},getKey:function(a){return a.id},add:function(c,b){var a=this;return 1===arguments.length&&(b=c,c=a.getKey(b)),a.containsKey(c)?a.replace(c,b):(a.map[c]=b,++a.length,a.generation++,a.hasListeners.add&&a.fireEvent("add",a,c,b),b)},replace:function(b,c){var e,a=this,d=a.map;return 1===arguments.length&&(c=b,b=a.getKey(c)),a.containsKey(b)||a.add(b,c),e=d[b],d[b]=c,a.generation++,a.hasListeners.replace&&a.fireEvent("replace",a,b,c,e),c},remove:function(b){var a=this.findKey(b);return void 0!==a&&this.removeAtKey(a)},removeAtKey:function(b){var c,a=this;return!!a.containsKey(b)&&(c=a.map[b],delete a.map[b],--a.length,a.generation++,a.hasListeners.remove&&a.fireEvent("remove",a,b,c),!0)},get:function(a){var b=this.map;return b.hasOwnProperty(a)?b[a]:void 0},clear:function(b){var a=this;return(b||a.generation)&&(a.map={},a.length=0,a.generation=b?0:a.generation+1),!0!==b&&a.hasListeners.clear&&a.fireEvent("clear",a),a},containsKey:function(a){var b=this.map;return b.hasOwnProperty(a)&&void 0!==b[a]},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(!0)},getValues:function(){return this.getArray(!1)},getArray:function(d){var a,c=[],b=this.map;for(a in b)b.hasOwnProperty(a)&&c.push(d?a:b[a]);return c},each:function(e,c){var a,b=Ext.apply({},this.map),d=this.length;for(a in c=c||this,b)if(b.hasOwnProperty(a)&&!1===e.call(c,a,b[a],d))break;return this},clone:function(){var b,a=new this.self(this.initialConfig),c=this.map;for(b in a.suspendEvents(),c)c.hasOwnProperty(b)&&a.add(b,c[b]);return a.resumeEvents(),a},findKey:function(c){var a,b=this.map;for(a in b)if(b.hasOwnProperty(a)&&b[a]===c)return a},destroy:function(){this.callParent(),this.map=null}},function(b){var a=b.prototype;a.removeByKey=a.removeAtKey}),Ext.define("Ext.promise.Consequence",function(a){return{promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(b,d,c){var a=this;a.onFulfilled=b,a.onRejected=d,a.onProgress=c,a.deferred=new Ext.promise.Deferred,a.promise=a.deferred.promise},trigger:function(d,c){var a=this,b=a.deferred;switch(d){case"fulfill":a.propagate(c,a.onFulfilled,b,b.resolve);break;case"reject":a.propagate(c,a.onRejected,b,b.reject)}},update:function(a){Ext.isFunction(this.onProgress)&&(a=this.onProgress(a)),this.deferred.update(a)},propagate:function(c,a,b,d){Ext.isFunction(a)?this.schedule(function(){try{b.resolve(a(c))}catch(e){b.reject(e)}}):d.call(this.deferred,c)},schedule:function(c){var b=a.queueSize++;a.queue[b]=c,b||Ext.asap(a.dispatch)},statics:{queue:new Array(1e4),queueSize:0,dispatch:function(){var d,b,c=a.queue;for(b=0;b<a.queueSize;++b)d=c[b],c[b]=null,d();a.queueSize=0}}}}),Ext.define("Ext.promise.Deferred",{promise:null,consequences:[],completed:!1,completionAction:null,completionValue:null,constructor:function(){var a=this;a.promise=new Ext.promise.Promise(a),a.consequences=[],a.completed=!1,a.completionAction=null,a.completionValue=null},then:function(c,e,d){var a=this,b=new Ext.promise.Consequence(c,e,d);return a.completed?b.trigger(a.completionAction,a.completionValue):a.consequences.push(b),b.promise},resolve:function(c){var b,d,a=this;if(!a.completed)try{if(c===a.promise)throw new TypeError("A Promise cannot be resolved with itself.");if((Ext.isObject(c)||Ext.isFunction(c))&&Ext.isFunction(d=c.then)){b=!1;try{d.call(c,function(c){b||(b=!0,a.resolve(c))},function(c){b||(b=!0,a.reject(c))})}catch(e){b||a.reject(e)}}else a.complete("fulfill",c)}catch(f){a.reject(f)}},reject:function(a){this.completed||this.complete("reject",a)},update:function(e){var a,d,b=this.consequences;if(!this.completed)for(a=0,d=b.length;a<d;a++)b[a].update(e)},complete:function(f,g){var b,e,a=this,c=a.consequences;for(a.completionAction=f,a.completionValue=g,a.completed=!0,b=0,e=c.length;b<e;b++)c[b].trigger(a.completionAction,a.completionValue);a.consequences=null}}),Ext.define("Ext.promise.Promise",function(a){var b;return{statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){b=Ext.promise.Deferred},all:function(c){return a.when(c).then(function(e){var c,i,j,h,k,f=new b,d=e.length,g=new Array(d);if(d)for(j=function(c,b){return a.when(c).then(function(a){return g[b]=a,--d||f.resolve(g),a},function(a){return f.reject(a)})},c=h=0,k=e.length;h<k;c=++h)i=e[c],c in e?j(i,c):d--;else f.resolve(g);return f.promise})},is:function(a){return(Ext.isObject(a)||Ext.isFunction(a))&&Ext.isFunction(a.then)},rethrowError:function(a){Ext.asap(function(){throw a})},when:function(b){var a=new Ext.promise.Deferred;return a.resolve(b),a.promise}},owner:null,constructor:function(a){this.owner=a},then:function(a,c,b,d){var e;return 1===arguments.length&&Ext.isObject(a)&&(a=(e=a).success,c=e.failure,b=e.progress,d=e.scope),d&&(a=a&&Ext.Function.bind(a,d),c=c&&Ext.Function.bind(c,d),b=b&&Ext.Function.bind(b,d)),this.owner.then(a,c,b)},otherwise:function(a,b){var c;return 1===arguments.length&&Ext.isObject(a)&&(a=(c=a).fn,b=c.scope),null!=b&&(a=Ext.Function.bind(a,b)),this.owner.then(null,a)},always:function(b,c){var d;return 1===arguments.length&&Ext.isObject(b)&&(b=(d=b).fn,c=d.scope),null!=c&&(b=Ext.Function.bind(b,c)),this.owner.then(function(c){try{b()}catch(e){a.rethrowError(e)}return c},function(c){try{b()}catch(e){a.rethrowError(e)}throw c})},done:function(){this.owner.then(null,a.rethrowError)},cancel:function(a){null==a&&(a=null),this.owner.reject(new this.self.CancellationError(a))},log:function(a){return null==a&&(a=""),this._owner.then(function(b){return Ext.log((a||"Promise")+" resolved with value: "+b),b},function(b){throw Ext.log((a||"Promise")+" rejected with reason: "+b),b})}}},function(a){a._ready()}),Ext.define("Ext.Promise",function(){var a;return{statics:{_ready:function(){a=Ext.promise.Promise},all:function(){return a.all.apply(a,arguments)},race:function(){},reject:function(b){var a=new Ext.promise.Deferred;return a.reject(b),a.promise},resolve:function(b){var a=new Ext.promise.Deferred;return a.resolve(b),a.promise}},constructor:function(b){var a=new Ext.promise.Deferred;return b(a.resolve.bind(a),a.reject.bind(a)),a.promise}}},function(b){var a=Ext.global.Promise;a&&a.resolve?Ext.Promise=a:b._ready()}),Ext.define("Ext.Deferred",function(a){var b;return{extend:Ext.promise.Deferred,statics:{_ready:function(){b=Ext.promise.Promise,Ext.Promise.resolve},all:function(){return b.all.apply(b,arguments)},any:function(b){return a.some(b,1).then(function(a){return a[0]},function(a){if(!(a instanceof Error&&"Too few Promises were resolved."===a.message))throw a;Ext.raise("No Promises were resolved.")})},delay:function(c,b){var d;return 1===arguments.length&&(b=c,c=void 0),b=Math.max(b,0),d=new a,setTimeout(function(){d.resolve(c)},b),d.promise},map:function(b,c){return a.resolved(b).then(function(b){var d,f,i,g,j,e,h,k;if(g=b.length,e=new Array(b.length),d=new a,g)for(j=function(f,b){return a.resolved(f).then(function(a){return c(a,b,e)}).then(function(a){return e[b]=a,--g||d.resolve(e),a},function(a){return d.reject(a)})},f=h=0,k=b.length;h<k;f=++h)i=b[f],f in b?j(i,f):g--;else d.resolve(e);return d.promise})},memoize:function(e,b,d){var c=Ext.Function.memoize(e,b,d);return function(){return a.all(Ext.Array.slice(arguments)).then(function(a){return c.apply(b,a)})}},parallel:function(d,b){null==b&&(b=null);var c=Ext.Array.slice(arguments,2);return a.map(d,function(a){if(!Ext.isFunction(a))throw new Error("Invalid parameter: expected a function.");return a.apply(b,c)})},pipeline:function(d,c,b){return null==b&&(b=null),a.reduce(d,function(c,a){if(!Ext.isFunction(a))throw new Error("Invalid parameter: expected a function.");return a.call(b,c)},c)},reduce:function(e,d,c){var b=3===arguments.length;return a.resolved(e).then(function(e){var f=[e,function(b,c,f){return a.resolved(b).then(function(b){return a.resolved(c).then(function(a){return d(b,a,f,e)})})}];return b&&f.push(c),Ext.Array.reduce.apply(Ext.Array,f)})},rejected:function(b){var a=new Ext.Deferred;return a.reject(b),a.promise},resolved:function(b){var a=new Ext.Deferred;return a.resolve(b),a.promise},sequence:function(d,b){null==b&&(b=null);var c=Ext.Array.slice(arguments,2);return a.reduce(d,function(d,e){if(!Ext.isFunction(e))throw new Error("Invalid parameter: expected a function.");return a.resolved(e.apply(b,c)).then(function(a){return d.push(a),d})},[])},some:function(c,b){return a.resolved(c).then(function(d){var e,f,l,k,j,g,c,h,i,m;if(h=[],c=b,g=d.length-c+1,e=new a,d.length<b)e.reject(new Error("Too few Promises were resolved."));else for(k=function(a){return 0<c&&h.push(a),0===--c&&e.resolve(h),a},l=function(a){return 0===--g&&e.reject(new Error("Too few Promises were resolved.")),a},f=i=0,m=d.length;i<m;f=++i)j=d[f],f in d&&a.resolved(j).then(k,l);return e.promise})},timeout:function(d,e){var b,c=new a;return b=setTimeout(function(){b&&c.reject(new Error("Promise timed out."))},e),a.resolved(d).then(function(a){clearTimeout(b),b=null,c.resolve(a)},function(a){clearTimeout(b),b=null,c.reject(a)}),c.promise}}}},function(a){a._ready()}),Ext.Factory=function(b){var a=this;a.aliasPrefix=b+".",a.cache={},a.name=b.replace(a.fixNameRe,a.fixNameFn),a.type=b},Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",create:function(a,i){var g,d,b,c,e=this,f=Ext.ClassManager,h=e.cache;if(a){if(a[e.instanceProp])return a;"string"==typeof a&&(c=a,(a={})[e.defaultProperty]=c),d=a.xclass,c=a.type}if(d){if(!(b=f.get(d)))return f.instantiate(d,a)}else if((c=c||i||e.defaultType)||(b=e.defaultClass),!b&&!(b=h[c])){if(g=e.aliasPrefix+c,!(b=(d=f.getNameByAlias(g))&&f.get(d)))return f.instantiateByAlias(g,a);h[c]=b}return b.isInstance?b:new b(a)},fixNameRe:/\.[a-z]/gi,fixNameFn:function(a){return a.substring(1).toUpperCase()},clearCache:function(){this.cache={}}},Ext.Factory.define=function(d,b){var f,a,e,c=Ext.Factory;return d.constructor===Object?Ext.Object.each(d,c.define,c):(a=new Ext.Factory(d),b&&(b.constructor===Object?(Ext.apply(a,b),"string"==typeof(f=a.xclass)&&(a.defaultClass=Ext.ClassManager.get(f))):a.defaultType=b),c[a.name]=e=a.create.bind(a),e.instance=a),e},Ext.define("Ext.mixin.Factoryable",{mixinId:"factoryable",onClassMixedIn:function(c){var e,g,d=c.prototype,f=d.factoryConfig,a=d.alias,b={};(a=a&&a.length&&a[0])&&0<(e=a.lastIndexOf("."))&&(b.type=a.substring(0,e),b.defaultType=a.substring(e+1)),f&&(delete d.factoryConfig,Ext.apply(b,f)),g=Ext.Factory.define(b.type,b),c.create===Ext.Base.create&&(c.create=g)}}),Ext.define("Ext.data.request.Base",{mixins:[Ext.mixin.Factoryable],factoryConfig:{type:"request",defaultType:"ajax"},result:null,success:null,timer:null,constructor:function(a){var b=this;Ext.apply(b,a.options||{},a.ownerConfig),b.id=++Ext.data.Connection.requestId,b.owner=a.owner,b.options=a.options,b.requestOptions=a.requestOptions},start:function(){var a=this,b=a.getTimeout();b&&a.async&&(a.timer=Ext.defer(a.onTimeout,b,a))},abort:function(){var a=this;a.clearTimer(),a.timedout||(a.aborted=!0),a.abort=Ext.emptyFn},createDeferred:function(){return this.deferred=new Ext.Deferred},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var a=this.getPromise();return a.then.apply(a,arguments)},onComplete:function(){var a=this,b=a.deferred,c=a.result;a.clearTimer(),b&&(a.success?b.resolve(c):b.reject(c))},onTimeout:function(){var a=this;a.timedout=!0,a.timer=null,a.abort(!0)},getTimeout:function(){return this.timeout},clearTimer:function(){var a=this.timer;a&&(clearTimeout(a),this.timer=null)},destroy:function(){var a=this;a.abort(),a.owner=a.options=a.requestOptions=a.result=null,a.callParent()},privates:{createException:function(){var b,a=this;return b={request:a,requestId:a.id,status:a.aborted?-1:0,statusText:a.aborted?"transaction aborted":"communication failure",getResponseHeader:a._getHeader,getAllResponseHeaders:a._getHeaders},a.aborted&&(b.aborted=!0),a.timedout&&(b.timedout=!0),b},_getHeader:function(b){var a=this.headers;return a&&a[b.toLowerCase()]},_getHeaders:function(){return this.headers}}}),Ext.define("Ext.data.request.Ajax",{extend:Ext.data.request.Base,alias:"request.ajax",statics:{parseStatus:function(a){var c=200<=(a=1223==a?204:a)&&a<300||304==a,b=!1;if(!c)switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:b=!0}return{success:c,isException:b}}},start:function(f){var b,a=this,e=a.options,c=a.requestOptions,d=a.isXdr;return b=a.xhr=a.openRequest(e,c,a.async,a.username,a.password),d||a.setupHeaders(b,e,c.data,c.params),a.async&&(d||(b.onreadystatechange=Ext.Function.bind(a.onStateChange,a))),d&&a.processXdrRequest(a,b),a.callParent([f]),b.send(f),a.async?a:a.onComplete()},abort:function(c){var a=this,b=a.xhr;if(c||a.isLoading()){try{b.onreadystatechange=null}catch(d){b.onreadystatechange=Ext.emptyFn}b.abort(),a.callParent([c]),a.onComplete(),a.cleanup()}},cleanup:function(){this.xhr=null,delete this.xhr},isLoading:function(){var c=this,a=c.xhr,b=a&&a.readyState,d=Ext.data.flash&&Ext.data.flash.BinaryXhr;return!(!a||c.aborted||c.timedout)&&((d&&a instanceof d||0!==b)&&4!==b)},openRequest:function(d,b,f,e,g){var c=this,a=c.newRequest(d);return e?a.open(b.method,b.url,f,e,g):c.isXdr?a.open(b.method,b.url):a.open(b.method,b.url,f),(d.binary||c.binary)&&(window.Uint8Array?a.responseType="arraybuffer":a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined")),(d.withCredentials||c.withCredentials)&&(a.withCredentials=!0),a},newRequest:function(c){var b,a=this;return c.binaryData?b=window.Uint8Array?a.getXhrInstance():new Ext.data.flash.BinaryXhr:a.cors&&Ext.isIE9m?(b=a.getXdrInstance(),a.isXdr=!0):(b=a.getXhrInstance(),a.isXdr=!1),b},setupHeaders:function(m,f,j,l){var c,g,d=this,a=Ext.apply({},f.headers||{},d.defaultHeaders),e=d.defaultPostHeader,h=f.jsonData,i=f.xmlData,b="Content-Type",k=d.useDefaultXhrHeader;a.hasOwnProperty(b)||!j&&!l||(j&&(f.rawData?e="text/plain":i&&Ext.isDefined(i)?e="text/xml":h&&Ext.isDefined(h)&&(e="application/json")),a[b]=e),k&&!a["X-Requested-With"]&&(a["X-Requested-With"]=d.defaultXhrHeader),void 0!==a[b]&&null!==a[b]||delete a[b];try{for(c in a)a.hasOwnProperty(c)&&(g=a[c],m.setRequestHeader(c,g))}catch(n){d.owner.fireEvent("exception",c,g)}return a},getXdrInstance:function(){var a;return 8<=Ext.ieVersion?a=new XDomainRequest:Ext.raise({msg:"Your browser does not support CORS"}),a},getXhrInstance:function(){for(var a,c=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=0,d=c.length;b<d;++b)try{(a=c[b])();break}catch(e){}return a}(),processXdrRequest:function(b,c){var a=this;delete b.headers,b.contentType=b.options.contentType||a.defaultXdrContentType,c.onload=Ext.Function.bind(a.onStateChange,a,[!0]),c.onerror=c.ontimeout=Ext.Function.bind(a.onStateChange,a,[!1])},processXdrResponse:function(a,b){a.getAllResponseHeaders=function(){return[]},a.getResponseHeader=function(){return""},a.contentType=b.contentType||this.defaultXdrContentType},onStateChange:function(d){var a=this,c=a.xhr,b=Ext.GlobalEvents;(c&&4==c.readyState||a.isXdr)&&(a.clearTimer(),a.onComplete(d),a.cleanup(),b.hasListeners.idle&&b.fireEvent("idle"))},onComplete:function(h){var d,g,c,a=this,f=a.owner,b=a.options,e=a.xhr,i={success:!1,isException:!1};if(!e||a.destroyed)return a.result=i;try{(d=Ext.data.request.Ajax.parseStatus(e.status)).success&&(d.success=4===e.readyState)}catch(j){d=i}return(g=a.success=a.isXdr?h:d.success)?(c=a.createResponse(e),f.fireEvent("requestcomplete",f,c,b),Ext.callback(b.success,b.scope,[c,b])):(c=d.isException||a.aborted||a.timedout?a.createException(e):a.createResponse(e),f.fireEvent("requestexception",f,c,b),Ext.callback(b.failure,b.scope,[c,b])),a.result=c,Ext.callback(b.callback,b.scope,[b,g,c]),f.onRequestComplete(a),a.callParent([h]),c},createResponse:function(a){for(var e,c,j,b,d=this,h=d.isXdr,f={},i=h?[]:a.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),g=i.length;g--;)0<=(c=(e=i[g]).indexOf(":"))&&(j=e.substr(0,c).toLowerCase()," "==e.charAt(c+1)&&++c,f[j]=e.substr(c+1));return b={request:d,requestId:d.id,status:a.status,statusText:a.statusText,getResponseHeader:function(a){return f[a.toLowerCase()]},getAllResponseHeaders:function(){return f}},h&&d.processXdrResponse(b,a),d.binary?b.responseBytes=d.getByteArray(a):(b.responseText=a.responseText,b.responseXML=a.responseXML),b},destroy:function(){this.xhr=null,this.callParent()},privates:{getByteArray:function(b){var a,d,f,c,e=b.response,g=b.responseBody;if(b instanceof(Ext.data.flash&&Ext.data.flash.BinaryXhr))a=b.responseBytes;else if(window.Uint8Array)a=e?new Uint8Array(e):[];else if(Ext.isIE9p)try{a=new VBArray(g).toArray()}catch(i){a=[]}else if(Ext.isIE)this.self.vbScriptInjected||this.injectVBScript(),getIEByteArray(b.responseBody,a=[]);else for(a=[],f=(d=b.responseText).length,c=0;c<f;c++)a.push(255&d.charCodeAt(c));return a},injectVBScript:function(){var a=document.createElement("script");a.type="text/vbscript",a.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n"),Ext.getHead().dom.appendChild(a),this.self.vbScriptInjected=!0}}}),Ext.define("Ext.data.request.Form",{extend:Ext.data.request.Base,alias:"request.form",start:function(d){var a=this,c=a.options,b=a.requestOptions;return a.callParent([d]),a.form=a.upload(c.form,b.url,b.data,c),a},abort:function(c){var b,a=this;if(a.isLoading())try{(b=a.frame.dom).stop?b.stop():b.document.execCommand("Stop")}catch(d){}a.callParent([c]),a.onComplete(),a.cleanup()},cleanup:function(){var a=this,b=a.frame;b&&(b.un("load",a.onComplete,a),Ext.removeNode(b)),a.frame=a.form=null},isLoading:function(){return!!this.frame},upload:function(a,s,o,n){a=Ext.getDom(a);function k(c,b){d=document.createElement("input"),Ext.fly(d).set({type:"hidden",value:b,name:c}),a.appendChild(d),j.push(d)}var d,f,b,c,q,i,p,h,m=document.createElement("iframe"),e=Ext.get(m),g=e.id,j=[],l="multipart/form-data",r={target:a.target,method:a.method,encoding:a.encoding,enctype:a.enctype,action:a.action};if(e.set({name:g,cls:Ext.baseCSSPrefix+"hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1}),document.body.appendChild(m),document.frames&&(document.frames[g].name=g),Ext.fly(a).set({target:g,method:"POST",enctype:l,encoding:l,action:s||r.action}),o)for(c in f=Ext.Object.fromQueryString(o)||{})if(f.hasOwnProperty(c))if(b=f[c],Ext.isArray(b))for(q=b.length,i=0;i<q;i++)k(c,b[i]);else k(c,b);for((this.frame=e).on({load:this.onComplete,scope:this,single:!Ext.isOpera}),a.submit(),Ext.fly(a).set(r),p=j.length,h=0;h<p;h++)Ext.removeNode(j[h]);return a},getDoc:function(){var a=this.frame.dom;return a&&(a.contentWindow.document||a.contentDocument)||(window.frames[a.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var g,c,f,e,a,b=this,h=b.frame,i=b.owner,d=b.options;if(h){if(b.aborted||b.timedout)b.result=a=b.createException(),a.responseXML=null,a.responseText='{success:false,message:"'+Ext.String.trim(a.statusText)+'"}',g=d.failure,f=!1;else try{if(c=b.getDoc(),b.result=a={responseText:"",responseXML:null},c){if(Ext.isOpera&&c.location==Ext.SSL_SECURE_URL)return;c.body&&((e=c.body.firstChild)&&/pre/i.test(e.tagName)?a.responseText=e.textContent||e.innerText:(e=c.getElementsByTagName("textarea")[0])?a.responseText=e.value:a.responseText=c.body.textContent||c.body.innerText),a.responseXML=c.XMLDocument||c,g=d.success,f=!0,a.status=200}else Ext.raise("Could not acquire a suitable connection for the file upload service.")}catch(j){b.result=a=b.createException(),a.status=400,a.statusText=(j.message||j.description)+"",a.responseText='{success:false,message:"'+Ext.String.trim(a.statusText)+'"}',a.responseXML=null,g=d.failure,f=!1}b.frame=null,b.success=f,i.fireEvent(f?"requestcomplete":"requestexception",i,a,d),Ext.callback(g,d.scope,[a,d]),Ext.callback(d.callback,d.scope,[d,f,a]),i.onRequestComplete(b),Ext.asap(h.destroy,h),b.callParent()}},destroy:function(){this.cleanup(),this.callParent()}}),Ext.define("Ext.data.Connection",{mixins:{observable:Ext.mixin.Observable},statics:{requestId:0},enctypeRe:/multipart\/form-data/i,config:{url:null,async:!0,username:"",password:"",disableCaching:!0,withCredentials:!1,binary:!1,cors:!1,isXdr:!1,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:3e4,extraParams:null,autoAbort:!1,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest"},constructor:function(a){this.mixins.observable.constructor.call(this,a),this.requests={}},request:function(a){a=a||{};var c,b=this;return!1!==b.fireEvent("beforerequest",b,a)?(c=b.setOptions(a,a.scope||Ext.global),b.createRequest(a,c).start(c.data)):(Ext.callback(a.callback,a.scope,[a,void 0,void 0]),Ext.Deferred.rejected([a,void 0,void 0]))},createRequest:function(c,e){var b,a=this,d=c.type||e.type;return d=d||(a.isFormUpload(c)?"form":"ajax"),(c.autoAbort||a.getAutoAbort())&&a.abort(),b=Ext.Factory.request({type:d,owner:a,options:c,requestOptions:e,ownerConfig:a.getConfig()}),a.requests[b.id]=b,a.latestId=b.id,b},isFormUpload:function(a){var b=this.getForm(a);return!!b&&(a.isUpload||this.enctypeRe.test(b.getAttribute("enctype")))},getForm:function(a){return Ext.getDom(a.form)},setOptions:function(a,k){var h,j,d,e=this,b=a.params||{},g=e.getExtraParams(),f=a.urlParams,c=a.url||e.getUrl(),l=a.cors,i=a.jsonData;return void 0!==l&&e.setCors(l),Ext.isFunction(b)&&(b=b.call(k,a)),Ext.isFunction(c)&&(c=c.call(k,a)),c=this.setupUrl(a,c),d=a.rawData||a.binaryData||a.xmlData||i||null,i&&!Ext.isPrimitive(i)&&(d=Ext.encode(d)),a.binaryData&&e.nativeBinaryPostSupport()&&(d=new Uint8Array(a.binaryData),(Ext.isChrome&&Ext.chromeVersion<22||Ext.isSafari||Ext.isGecko)&&(d=d.buffer)),Ext.isObject(b)&&(b=Ext.Object.toQueryString(b)),Ext.isObject(g)&&(g=Ext.Object.toQueryString(g)),b+=g?(b?"&":"")+g:"",f=Ext.isObject(f)?Ext.Object.toQueryString(f):f,b=this.setupParams(a,b),h=(a.method||e.getMethod()||(b||d?"POST":"GET")).toUpperCase(),this.setupMethod(a,h),j=!1!==a.disableCaching&&(a.disableCaching||e.getDisableCaching()),"GET"===h&&j&&(c=Ext.urlAppend(c,(a.disableCachingParam||e.getDisableCachingParam())+"="+(new Date).getTime())),("GET"==h||d)&&b&&(c=Ext.urlAppend(c,b),b=null),f&&(c=Ext.urlAppend(c,f)),{url:c,method:h,data:d||b||null}},setupUrl:function(c,a){var b=this.getForm(c);return b&&(a=a||b.action),a},setupParams:function(c,a){var b,d=this.getForm(c);return d&&!this.isFormUpload(c)&&(b=Ext.Element.serializeForm(d),a=a?a+"&"+b:b),a},setupMethod:function(a,b){return this.isFormUpload(a)?"POST":b},isLoading:function(a){return!!(a=a||this.getLatest())&&a.isLoading()},abort:function(a){(a=a||this.getLatest())&&a.isLoading()&&a.abort()},abortAll:function(){var b,a=this.requests;for(b in a)this.abort(a[b])},getLatest:function(){var a,b=this.latestId;return b&&(a=this.requests[b]),a||null},clearTimeout:function(a){(a=a||this.getLatest())&&a.clearTimer()},onRequestComplete:function(a){delete this.requests[a.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||Ext.isSafari&&Ext.isDefined(window.Uint8Array)||Ext.isGecko&&Ext.isDefined(window.Uint8Array)}}),Ext.define("Ext.Ajax",{extend:Ext.data.Connection,singleton:!0,autoAbort:!1}),Ext.define("Ext.AnimationQueue",{singleton:!0,constructor:function(){var a=this;a.queue=[],a.taskQueue=[],a.runningQueue=[],a.idleQueue=[],a.isRunning=!1,a.isIdle=!0,a.run=Ext.Function.bind(a.run,a),Ext.os.is.iOS&&Ext.interval(a.watch,500,a)},start:function(d,b,c){var a=this;a.queue.push(arguments),a.isRunning||(a.hasOwnProperty("idleTimer")&&(clearTimeout(a.idleTimer),delete a.idleTimer),a.hasOwnProperty("idleQueueTimer")&&(clearTimeout(a.idleQueueTimer),delete a.idleQueueTimer),a.isIdle=!1,a.isRunning=!0,a.doStart())},watch:function(){this.isRunning&&500<=Ext.now()-this.lastRunTime&&this.run()},run:function(){var a=this;if(a.isRunning){var c,e,b=a.runningQueue,d=Ext.now();for(a.lastRunTime=d,a.frameStartTime=d,b.push.apply(b,a.queue),c=0,e=b.length;c<e;c++)a.invoke(b[c]);b.length=0,a.doIterate()}},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run),this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(h,f,g){var a=this;if(a.isRunning){var b,c,d=a.queue,e=d.length;for(b=0;b<e;b++)(c=d[b])[0]===h&&c[1]===f&&c[2]===g&&(d.splice(b,1),b--,e--);0===e&&(a.doStop(),a.isRunning=!1,a.idleTimer=Ext.defer(a.whenIdle,100,a))}},onIdle:function(g,e,f){var b,d,a,c=this.idleQueue;for(b=0,d=c.length;b<d;b++)if(g===(a=c[b])[0]&&e===a[1]&&f===a[2])return;c.push(arguments),this.isIdle&&this.processIdleQueue()},unIdle:function(g,e,f){var a,d,b,c=this.idleQueue;for(a=0,d=c.length;a<d;a++)if(g===(b=c[a])[0]&&e===b[1]&&f===b[2])return c.splice(a,1),!0;return!1},queueTask:function(c,a,b){this.taskQueue.push(arguments),this.processTaskQueue()},dequeueTask:function(g,e,f){var a,d,b,c=this.taskQueue;for(a=0,d=c.length;a<d;a++)g===(b=c[a])[0]&&e===b[1]&&f===b[2]&&(c.splice(a,1),a--,d--)},invoke:function(b){var a=b[0],c=b[1],d=b[2];a="string"==typeof a?c[a]:a,Ext.isArray(d)?a.apply(c,d):a.call(c,d)},whenIdle:function(){this.isIdle=!0,this.processIdleQueue()},processIdleQueue:function(){this.hasOwnProperty("idleQueueTimer")||(this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this))},processIdleQueueItem:function(){if(delete this.idleQueueTimer,this.isIdle){var b,a=this.idleQueue;0<a.length&&(b=a.shift(),this.invoke(b),this.processIdleQueue())}},processTaskQueue:function(){this.hasOwnProperty("taskQueueTimer")||(this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this))},processTaskQueueItem:function(){delete this.taskQueueTimer;var b,a=this.taskQueue;0<a.length&&(b=a.shift(),this.invoke(b),this.processTaskQueue())}}),Ext.define("Ext.ComponentManager",{alternateClassName:"Ext.ComponentMgr",singleton:!0,count:0,typeName:"xtype",constructor:function(b){var a=this;Ext.apply(a,b||{}),a.all={},a.references={},a.onAvailableCallbacks={}},create:function(a,b){return"string"==typeof a?Ext.widget(a):a.isComponent?a:"xclass"in a?Ext.create(a.xclass,a):Ext.widget(a.xtype||b,a)},get:function(a){return this.all[a]},register:function(b){var a=this,e=a.all,d=b.getId(),c=a.onAvailableCallbacks;(e[d]=b).getReference&&b.getReference()&&(a.references[d]=b),++a.count,a.hasFocusListener||(Ext.on("focus",a.onGlobalFocus,a),a.hasFocusListener=!0),(c=c&&c[d])&&c.length&&a.notifyAvailable(b)},unregister:function(b){var a=b.getId();b.getReference&&b.getReference()&&(this.references[a]=null,delete this.references[a]),this.all[a]=null,delete this.all[a],this.count--},markReferencesDirty:function(){this.referencesDirty=!0},fixReferences:function(){var b,c=this,a=c.references;if(c.referencesDirty){for(b in a)a.hasOwnProperty(b)&&a[b].fixReference();c.referencesDirty=!1}},onAvailable:function(a,f,d){var c,b=this.onAvailableCallbacks,e=this.all;a in e?(c=e[a],f.call(d||c,c)):a&&(Ext.isArray(b[a])||(b[a]=[]),b[a].push(function(a){f.call(d||a,a)}))},notifyAvailable:function(a){for(var b=this.onAvailableCallbacks[a&&a.getId()]||[];b.length;)b.shift()(a)},each:function(b,a){return Ext.Object.each(this.all,b,a)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.fromElement(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(d){var e,a,g=d.toElement,f=d.fromElement,c=Ext.Component.fromElement(g),b=Ext.Component.fromElement(f);if(c!==b){if(e=this.getCommonAncestor(b,c),b&&!b.destroyed&&!b.destroying)for(b.handleBlurEvent&&b.handleBlurEvent(d),a=b;a&&a!==e;a=a.getRefOwner())a.destroyed||a.destroying||a.onFocusLeave({event:d.event,type:"focusleave",target:f,relatedTarget:g,fromComponent:b,toComponent:c});if(c&&!c.destroyed)for(c.handleFocusEvent&&c.handleFocusEvent(d),a=c;a&&a!==e;a=a.getRefOwner())a.onFocusEnter({event:d.event,type:"focusenter",relatedTarget:f,target:g,fromComponent:b,toComponent:c})}},getCommonAncestor:function(a,b){if(a===b)return a;for(;a&&!a.isAncestor(b)&&a!==b;)a=a.getRefOwner();return a},privates:{clearAll:function(){this.all={},this.references={},this.onAvailableCallbacks={}},fromElement:function(i,b,e){var f,d,c,a=Ext.getDom(i),h=this.all,g=0;for("number"!=typeof b&&(f=Ext.getDom(b),b=Number.MAX_VALUE);a&&1===a.nodeType&&g<b&&a!==f;){if(d=a.getAttribute("data-componentid")||a.id){if((c=h[d])&&(!e||Ext.ComponentQuery.is(c,e)))return c;g++}a=a.parentNode}return null}},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},function(){Ext.getCmp=function(a){return Ext.ComponentManager.get(a)}}),Ext.ns("Ext.util").Operators={"=":function(a,b){return a==b},"!=":function(a,b){return a!=b},"^=":function(a,b){return a&&a.substr(0,b.length)==b},"$=":function(a,b){return a&&a.substr(a.length-b.length)==b},"*=":function(a,b){return a&&-1!==a.indexOf(b)},"%=":function(a,b){return a%b==0},"|=":function(a,b){return a&&(a==b||a.substr(0,b.length+1)==b+"-")},"~=":function(a,b){return a&&-1!=(" "+a+" ").indexOf(" "+b+" ")}},Ext.define("Ext.util.LruCache",{extend:Ext.util.HashMap,config:{maxSize:null},add:function(d,e){var b,c,a=this;return a.removeAtKey(d),b={prev:c=a.last,next:null,key:d,value:e},c?c.next=b:a.first=b,a.last=b,a.callParent([d,b]),a.prune(),e},insertBefore:function(f,d,a){var e,b,c=this;return(a=this.map[this.findKey(a)])?((e=c.findKey(d))?c.unlinkEntry(b=c.map[e]):b={prev:a.prev,next:a,key:f,value:d},a.prev?b.prev.next=b:c.first=b,(b.next=a).prev=b,c.prune(),d):c.add(f,d)},get:function(b){var a=this.map[b];if(a)return a.next&&this.moveToEnd(a),a.value},removeAtKey:function(a){return this.unlinkEntry(this.map[a]),this.callParent(arguments)},clear:function(a){return this.first=this.last=null,this.callParent([a])},unlinkEntry:function(a){a&&(a.next?a.next.prev=a.prev:this.last=a.prev,a.prev?a.prev.next=a.next:this.first=a.next,a.prev=a.next=null)},moveToEnd:function(a){this.unlinkEntry(a),(a.prev=this.last)?this.last.next=a:this.first=a,this.last=a},getArray:function(c){for(var b=[],a=this.first;a;)b.push(c?a.key:a.value),a=a.next;return b},each:function(f,c,d){var b=this,a=d?b.last:b.first,e=b.length;for(c=c||b;a&&!1!==f.call(c,a.key,a.value,e);)a=d?a.prev:a.next;return b},findKey:function(c){var a,b=this.map;for(a in b)if(b.hasOwnProperty(a)&&b[a].value===c)return a},clone:function(){var b,a=new this.self(this.initialConfig),c=this.map;for(b in a.suspendEvents(),c)c.hasOwnProperty(b)&&a.add(b,c[b].value);return a.resumeEvents(),a},prune:function(){var a=this,c=a.getMaxSize(),b=c?a.length-c:0;if(0<b)for(;a.first&&b;b--)a.removeAtKey(a.first.key)},destroy:function(){this.first=this.last=null,this.callParent()}}),Ext.define("Ext.ComponentQuery",{singleton:!0},function(){function d(b,a){return a.method.apply(this,[b].concat(a.args))}function h(d){for(var a,c=[],b=0,e=d.length;b<e;b++)for(a=d[b];a=a.getRefOwner();)c.push(a);return c}function i(d,f){for(var a,c=[],b=0,e=d.length;b<e;b++)(a=d[b]).getItemId()===f&&c.push(a);return c}var a=this,f=Ext.util.Operators,r=/(\d*)n\+?(\d*)/,q=/\D/,c=/^(\s)+/,b=/\\(.)/g,j=new Ext.util.LruCache({maxSize:100}),m=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),e=function(d,g){for(var a,b=[],c=0,e=d.length,f=">"!==g;c<e;c++)(a=d[c]).getRefItems&&(b=b.concat(a.getRefItems(f)));return b},g=function(b,e,f){if("*"===e)return b.slice();for(var a,d=[],c=0,g=b.length;c<g;c++)(a=b[c]).isXType(e,f)&&d.push(a);return d},p=/^(\s?([>\^])\s?|\s|$)/,o=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,k=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:g,argTransform:function(a){return void 0!==a[1]&&(a[1]=a[1].replace(b,"$1")),a.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:function(n,c,g,d){var i,l,a,b,h,m,j,e=[],k=0,o=n.length;for("@"===c.charAt(0)&&(i=!0,c=c.substr(1)),"?"===c.charAt(0)&&(l=i=!0,c=c.substr(1));k<o;k++){if(j=(a=n[k]).getConfigurator&&a.self.$config.configs[c])b=a[j.names.get]();else{if(i&&!a.hasOwnProperty(c))continue;b=a[c]}if(l)e.push(a);else if("~="===g){if(b)for(Ext.isArray(b)||(b=b.split(" ")),h=0,m=b.length;h<m;h++)if(f[g](Ext.coerce(b[h],d),d)){e.push(a);break}}else"/="===g?null!=b&&d.test(b)&&e.push(a):(d?f[g](Ext.coerce(b,d),d):a[c])&&e.push(a)}return e},argTransform:function(c){c[0];var f=c[1],e=c[2],a=c[4];return void 0!==a&&(a=a.replace(b,"$1")),"/="===e&&(a=j.get(a)||j.add(a,new RegExp(a))),[f,e,a]}},{re:/^#((?:\\\.|[\w\-])+)/,method:i},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:function(b,d,c){return a.pseudos[d](b,c)},argTransform:function(a){return void 0!==a[2]&&(a[2]=a[2].replace(b,"$1")),a.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:m}];a.Query=Ext.extend(Object,{constructor:function(a){a=a||{},Ext.apply(this,a)},execute:function(f){var e,a,d,c=this.operations,b=[];for(a=0,d=c.length;a<d;a++)e=c[a],b=b.concat(this._execute(f,e));return b},_execute:function(b,g){var c,a,f=0,i=g.length;for(b?Ext.isIterable(b)?a=b:b.isMixedCollection&&(a=b.items):a=Ext.ComponentManager.getAll();f<i;f++)if(a="^"===(c=g[f]).mode?h(a||[b]):c.mode?e(a||[b],c.mode):d(a||e([b]),c),f===i-1)return a;return[]},is:function(f){var e,a,c=this.operations,b=!1,d=c.length;if(0===d)return!0;for(a=0;a<d;a++)if(e=c[a],b=this._is(f,e))return b;return!1},_is:function(m,l){var g,c,f,b,i,j,k=l.length,a=[m];for(c=k-1;0<=c;--c)if(b=(g=l[c]).mode){if("^"===b)a=e(a," ");else if(">"===b){for(i=[],f=0,k=a.length;f<k;++f)(j=a[f].getRefOwner())&&i.push(j);a=i}else a=h(a);if(0===a.length)return!1}else if(0===(a=d(a,g)).length)return!1;return!0},getMatches:function(a,c){var b,e=c.length;for(b=0;b<e&&0!==(a=d(a,c[b])).length;++b);return a},isMultiMatch:function(){return 1<this.operations.length}}),Ext.apply(a,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(d,f){for(var b,c=0,g=d.length,e=[],h=-1;c<g;++c)b=d[c],a.is(b,f)||(e[++h]=b);return e},first:function(a){var b=[];return 0<a.length&&b.push(a[0]),b},last:function(a){var b=a.length,c=[];return 0<b&&c.push(a[b-1]),c},focusable:function(d){for(var a,e=d.length,c=[],b=0;b<e;b++)(a=d[b]).isFocusable&&a.isFocusable()&&c.push(a);return c},"nth-child":function(i,a){var b,f,c,d=[],h=r.exec(("even"===a?"2n":"odd"===a&&"2n+1")||!q.test(a)&&"n+"+a||a),g=+(h[1]||1),e=+h[2];for(b=0;f=i[b];b++)c=b+1,1==g?0!=e&&c!==e||d.push(f):(c+e)%g==0&&d.push(f);return d},scrollable:function(d){for(var a,e=d.length,c=[],b=0;b<e;b++)((a=d[b]).scrollable||a._scrollable)&&c.push(a);return c}},query:function(c,j){if(!c)return Ext.ComponentManager.all.getArray();var i,e,f,b=[],g=[],h={},d=a.cache.get(c);if(b=(d=d||a.cache.add(c,a.parse(c))).execute(j),d.isMultiMatch()){for(i=b.length,f=0;f<i;f++)h[(e=b[f]).id]||(g.push(e),h[e.id]=!0);b=g}return b},visitPreOrder:function(c,e,f,d,b){a._visit(!0,c,e,f,d,b)},visitPostOrder:function(c,e,f,d,b){a._visit(!1,c,e,f,d,b)},_visit:function(i,c,b,l,k,e){var h,d,f,j=a.cache.get(c),g=[b],m=0;if(f=(j=j||a.cache.add(c,a.parse(c))).is(b),b.getRefItems&&(m=(h=b.getRefItems()).length),e&&Ext.Array.push(g,e),i&&f&&!1===l.apply(k||b,g))return!1;for(d=0;d<m;d++)if(!1===a._visit.call(a,i,c,h[d],l,k,e))return!1;return!(!i&&f&&!1===l.apply(k||b,g))&&void 0},is:function(d,b){if(!b)return!0;var c=a.cache.get(b);return(c=c||a.cache.add(b,a.parse(b))).is(d)},parse:function(g){var c,f,b,e,d=[];for(b=0,e=(c=Ext.splitAndUnescape(g,",")).length;b<e;b++)f=Ext.String.trim(c[b]),d.push(a._parse(f));return new a.Query({operations:d})},_parse:function(a){for(var r,e,n,s,j,d,m,l,f,u,q,h=[],v=Ext.String.trim,t=k.length;a&&r!==a;){for((e=(r=a).match(o))&&(s=e[1],n=v(e[2]).replace(b,"$1"),"#"===s?h.push({method:i,args:[n]}):h.push({method:g,args:[n,Boolean(e[3])]}),a=a.replace(e[0],"").replace(c,"$1"));!(j=a.match(p));)for(l=0;a&&l<t;l++){if(f=k[l],d=a.match(f.re),u=f.method,m=f.argTransform,d){q=m?m(d):d.slice(1),h.push({method:Ext.isString(f.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[u].concat(d.slice(1)))):f.method,args:q}),a=a.replace(d[0],"").replace(c,"$1");break}l===t-1&&Ext.raise('Invalid ComponentQuery selector: "'+a+'"')}j[1]&&(h.push({mode:j[2]||j[1]}),a=a.replace(j[0],"").replace(c,""))}return h}}),Ext.all=function(){return a.query.apply(a,arguments)},Ext.first=function(){var b=a.query.apply(a,arguments);return b&&b[0]||null}}),Ext.define("Ext.Evented",{alternateClassName:"Ext.EventedBase",mixins:[Ext.mixin.Observable],initialized:!1,constructor:function(a){this.mixins.observable.constructor.call(this,a),this.initialized=!0},onClassExtended:function(f,b){if(b.hasOwnProperty("eventedConfig")){var d,c,e=b.config,a=b.eventedConfig;for(d in e?Ext.applyIf(e,a):f.addConfig(a),a)a.hasOwnProperty(d)&&(b[(c=Ext.Config.get(d)).names.set]=c.eventedSetter||c.getEventedSetter())}}}),Ext.define("Ext.util.Positionable",{mixinId:"positionable",_positionTopLeft:["position","top","left"],_alignRe:/^([a-z]+)-([a-z]+)([?!])?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(a,c){var b=this.getConstrainVector(c,a);return b&&(a[0]+=b[0],a[1]+=b[1]),a},alignTo:function(e,d,f,b){var a=this,c=a.el;return a.setXY(a.getAlignToXY(e,d,f),!(!c.anim||!b)&&c.anim(b))},calculateAnchorXY:function(f,k,l,e){var a,b,c,g=this,j=g.el,i=document,h=j.dom===i.body||j.dom===i,d=Math.round;switch(f=(f||"tl").toLowerCase(),b=(e=e||{}).width||(h?Ext.Element.getViewportWidth():g.getWidth()),c=e.height||(h?Ext.Element.getViewportHeight():g.getHeight()),f){case"tl":a=[0,0];break;case"bl":a=[0,c];break;case"tr":a=[b,0];break;case"c":a=[d(.5*b),d(.5*c)];break;case"t":a=[d(.5*b),0];break;case"l":a=[0,d(.5*c)];break;case"r":a=[b,d(.5*c)];break;case"b":a=[d(.5*b),c];break;case"tc":a=[d(.5*b),0];break;case"bc":a=[d(.5*b),c];break;case"br":a=[b,c]}return[a[0]+k,a[1]+l]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(g,b,n){var h,a,i,r,q,k,j,c,p,o,w,l,m,t,s,v,u,e,f,d=this;return(g=Ext.get(g.el||g))&&g.dom,n=n||[0,0],b=(b&&"?"!==b?/-/.test(b)||""===b?b||"tl-bl":"tl-"+b:"tl-bl?").toLowerCase(),l=(i=(b=d.convertPositionSpec(b)).match(d._alignRe))[1],m=i[2],w=!!i[3],r=d.getAnchorXY(l,!0),e=(q=d.getAnchorToXY(g,m,!1))[0]-r[0]+n[0],f=q[1]-r[1]+n[1],w&&(h="!"===i[3]?g:d.constrainTo||d.container||d.el.parent(),(a=(h=Ext.get(h.el||h)).getConstrainRegion()).right=a.left+h.el.dom.clientWidth,k=d.getWidth(),j=d.getHeight(),c=g.getRegion(),t=l.charAt(0),s=l.charAt(l.length-1),v=m.charAt(0),u=m.charAt(m.length-1),p=e<c.right&&e+k>=c.left&&("t"==t&&"b"==v||"b"==t&&"t"==v),o=f<c.bottom&&f+j>=c.top&&("r"==s&&"l"==u||"l"==s&&"r"==u),e+k>a.right&&(o?(e=c.left-k,o=!1):e=a.right-k),e<a.left&&(e=o?c.right:a.left),f+j>a.bottom&&(p?(f=c.top-j,p=!1):f=a.bottom-j),f<a.top&&(f=p?c.bottom:a.top)),[e,f]},getAnchorXY:function(h,e,k){var b=this,f=b.getXY(),a=b.el,g=document,c=a.dom==g.body||a.dom==g,d=a.getScroll(),i=c?d.left:e?0:f[0],j=c?d.top:e?0:f[1];return b.calculateAnchorXY(h,i,j,k)},getBox:function(j,k){var a,e,f,b=this,i=k?b.getLocalXY():b.getXY(),c=i[0],d=i[1],h=b.getWidth(),g=b.getHeight();return j&&(c+=e=(a=b.getBorderPadding()).beforeX,d+=f=a.beforeY,h-=e+a.afterX,g-=f+a.afterY),{x:c,left:c,0:c,y:d,top:d,1:d,width:h,height:g,right:c+h,bottom:d+g}},calculateConstrainedPosition:function(h,c,j,l){var e,d,g,b,a=this,k=a.floatParent,i=k?k.getTargetEl():null,f=!1;return j&&k?(d=i.getXY(),g=i.getBorderPadding(),d[0]+=g.beforeX,d[1]+=g.beforeY,c&&(b=[c[0]+d[0],c[1]+d[1]])):b=c,h=h||a.constrainTo||i||a.container||a.el.parent(),j&&b&&(b=a.reverseTranslateXY(b)),(e=(a.constrainHeader&&a.header.rendered?a.header:a).getConstrainVector(h,b,l))&&((f=c||a.getPosition(j))[0]+=e[0],f[1]+=e[1]),f},getConstrainRegion:function(){var c,d,b,a=this.el,j="BODY"===a.dom.nodeName,h=a.dom,g=a.getBorders(),i=a.getXY(),e=i[0]+g.beforeX,f=i[1]+g.beforeY;return b=j?(e=(c=a.getScroll()).left,f=c.top,d=Ext.Element.getViewportWidth(),Ext.Element.getViewportHeight()):(d=h.clientWidth,h.clientHeight),new Ext.util.Region(f,e+d,f+b,e)},getConstrainVector:function(a,g,i){var h,b=this.getRegion(),d=[0,0],f=this.shadow&&this.constrainShadow&&!this.shadowDisabled?this.shadow.getShadowSize():void 0,e=!1,c=this.constraintInsets;return a instanceof Ext.util.Region||(h=(a=Ext.get(a.el||a)).getViewSize(),(a=a.getConstrainRegion()).right=a.left+h.width,a.bottom=a.top+h.height),c&&(c=Ext.isObject(c)?c:Ext.Element.parseBox(c),a.adjust(c.top,c.right,c.bottom,c.left)),g&&b.translateBy(g[0]-b.x,g[1]-b.y),i&&(b.right=b.left+i[0],b.bottom=b.top+i[1]),f&&a.adjust(f[0],-f[1],-f[2],f[3]),b.right>a.right&&(e=!0,d[0]=a.right-b.right),b.left+d[0]<a.left&&(e=!0,d[0]=a.left-b.left),b.bottom>a.bottom&&(e=!0,d[1]=a.bottom-b.bottom),b.top+d[1]<a.top&&(e=!0,d[1]=a.top-b.top),!!e&&d},getOffsetsTo:function(a){var c=this.getXY(),b=Ext.fly(a.el||a).getXY();return[c[0]-b[0],c[1]-b[1]]},getRegion:function(){var a=this.getBox();return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getClientRegion:function(){var b,d=this,a=d.getBox(),c=d.dom;return(b=c.offsetWidth-c.clientWidth)&&("rtl"===d.getStyle("direction")?a.left+=b:a.right-=b),(b=c.offsetHeight-c.clientHeight)&&(a.bottom-=b),new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getViewRegion:function(){var d,f,h,c,b,g,e,a=this,i=a.el;return e="BODY"===i.dom.nodeName?(b=(f=i.getScroll()).left,c=f.top,g=Ext.Element.getViewportWidth(),Ext.Element.getViewportHeight()):(d=a.getBorderPadding(),b=(h=a.getXY())[0]+d.beforeX,c=h[1]+d.beforeY,g=a.getWidth(!0),a.getHeight(!0)),new Ext.util.Region(c,b+g,c+e,b)},move:function(a,b,l){var k=this.getXY(),c=k[0],d=k[1],i=[c-b,d],g=[c+b,d],f=[c,d-b],e=[c,d+b],h={l:i,left:i,r:g,right:g,t:f,top:f,up:f,b:e,bottom:e,down:e};a=a.toLowerCase(),this.setXY([h[a][0],h[a][1]],l)},setBox:function(a){var c,d,b=this;return a.isRegion&&(a={x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top}),b.constrainBox(a),c=a.x,d=a.y,b.setXY([c,d]),b.setSize(a.width,a.height),b.afterSetPosition(c,d),b},constrainBox:function(a){var b,d,e,c=this;(c.constrain||c.constrainHeader)&&(d="x"in a?a.x:a.left,e="y"in a?a.y:a.top,(b=c.calculateConstrainedPosition(null,[d,e],!1,[a.width,a.height]))&&(a.x=b[0],a.y=b[1]))},translatePoints:function(b,c){var a=this.translateXY(b,c);return{left:a.x,top:a.y}},translateXY:function(a,g){var f=this,e=f.el,d=e.getStyle(f._positionTopLeft),h="relative"===d.position,b=parseFloat(d.left),c=parseFloat(d.top),i=f.getXY();return Ext.isArray(a)&&(g=a[1],a=a[0]),isNaN(b)&&(b=h?0:e.dom.offsetLeft),isNaN(c)&&(c=h?0:e.dom.offsetTop),{x:b="number"==typeof a?a-i[0]+b:void 0,y:c="number"==typeof g?g-i[1]+c:void 0}},reverseTranslateXY:function(d){var g,c,e,f,h=d,b=this.el,a=b.dom.offsetParent;return a&&(g=b.isStyle("position","relative"),c=Ext.fly(a).getXY(),e=d[0]+c[0]+a.clientLeft,f=d[1]+c[1]+a.clientTop,g&&(e+=b.getPadding("l"),f+=b.getPadding("t")),h=[e,f]),h}}),Ext.define("Ext.overrides.util.Positionable",{override:"Ext.util.Positionable",anchorTo:function(e,f,i,h,c,g){function b(){a.alignTo(e,f,i,h),Ext.callback(g,a)}var a=this,d=!Ext.isEmpty(c),j=a.getAnchor();return a.removeAnchor(),Ext.apply(j,{fn:b,scroll:d}),Ext.on("resize",b,null),d&&Ext.getWin().on("scroll",b,null,{buffer:isNaN(c)?50:c}),b(),a},getAnchor:function(){var b,c=this.el;if(c.dom)return(b=c.getData())._anchor||(b._anchor={})},removeAnchor:function(){var a=this.getAnchor();return a&&a.fn&&(Ext.un("resize",a.fn),a.scroll&&Ext.getWin().on("scroll",a.fn),delete a.fn),this},setBox:function(a,c){var b=this;return a.isRegion&&(a={x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top}),c?(b.constrainBox(a),b.animate(Ext.applyIf({to:a,listeners:{afteranimate:Ext.Function.bind(b.afterSetPosition,b,[a.x,a.y])}},c))):b.callParent([a]),b}}),Ext.define("Ext.dom.UnderlayPool",{constructor:function(a){this.elementConfig=a,this.cache=[]},checkOut:function(){var a=this.cache.shift();return a||(a=Ext.Element.create(this.elementConfig)).setVisibilityMode(2),a},checkIn:function(a){this.cache.push(a)},reset:function(){for(var a=this.cache,b=a.length;b--;)a[b].destroy();this.cache=[]}}),Ext.define("Ext.dom.Underlay",{constructor:function(a){Ext.apply(this,a)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var a=this,b=a.el;b&&(b.hide(),a.getPool().checkIn(b),a.el=null,a.hidden=!0)},realign:function(d,e,c,b){var h=this,g=h.el,f=h.target,a=h.offsets,i=Math.max;g&&(null==d&&(d=f.getX()),null==e&&(e=f.getY()),null==c&&(c=f.getWidth()),null==b&&(b=f.getHeight()),a&&(d+=a.x,e+=a.y,c=i(c+a.w,0),b=i(b+a.h,0)),g.setXY([d,e]),g.setSize(c,b))},setZIndex:function(a){this.zIndex=a,this.el&&this.el.setStyle("z-index",a)},show:function(){var d,a=this,f=a.target,c=a.zIndex,b=a.el,e=a.getInsertionTarget().dom;b=b||(a.el=a.getPool().checkOut()),a.beforeShow(),null==c&&(c=parseInt(f.getStyle("z-index"),10)),c&&b.setStyle("z-index",c),b.setStyle("position",a.fixed?"fixed":""),(d=b.dom).nextSibling!==e&&f.dom.parentNode.insertBefore(d,e),b.show(),a.realign(),a.hidden=!1}}),Ext.define("Ext.dom.Shadow",{extend:Ext.dom.Underlay,alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:Ext.baseCSSPrefix+(Ext.supports.CSS3BoxShadow?"css":"ie")+"-shadow",constructor:function(f){var e,c,a,b,d=this;switch(d.callParent([f]),d.elementConfig={cls:d.cls,role:"presentation"},a=d.offset,b=Math.floor(a/2),d.opacity=50,d.mode.toLowerCase()){case"drop":e={x:0,y:0,w:a,h:a},c=Ext.supports.CSS3BoxShadow?{x:a,y:a,h:-a,w:-a}:{x:-b,y:-b,h:-b,w:-b};break;case"sides":e={x:-a,y:0,w:2*a,h:a},c=Ext.supports.CSS3BoxShadow?{x:0,y:a,h:-a,w:0}:{x:1+b-2*a,y:-(1+b),h:-1,w:b-1};break;case"frame":e={x:-a,y:-a,w:2*a,h:2*a},c=Ext.supports.CSS3BoxShadow?{x:0,y:0,h:0,w:0}:{x:1+b-2*a,y:1+b-2*a,h:a-b-1,w:a-b-1};break;case"bottom":e={x:-a,y:0,w:2*a,h:a},c=Ext.supports.CSS3BoxShadow?{x:0,y:a,h:-a,w:0}:{x:0,y:a,h:0,w:0}}d.offsets=c,d.outerOffsets=e},getShadowSize:function(){var b=this,a=b.el?b.offset:0,c=[a,a,a,a],d=b.mode.toLowerCase();return b.el&&"frame"!==d&&(c[0]=0,"drop"==d&&(c[3]=0)),c},boxShadowProperty:function(){var a="boxShadow",b=document.documentElement.style;return"boxShadow"in b||("WebkitBoxShadow"in b?a="WebkitBoxShadow":"MozBoxShadow"in b&&(a="MozBoxShadow")),a}(),beforeShow:function(){var a=this,b=a.el.dom.style,c=a.shim;Ext.supports.CSS3BoxShadow?b[a.boxShadowProperty]="0 0 "+(a.offset+2)+"px #888":b.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+a.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+a.offset+")",c&&c.realign()},setOpacity:function(a){var b=this.el;b&&(Ext.isIE&&!Ext.supports.CSS3BoxShadow&&(a=Math.floor(100*a/2)/100),this.opacity=a,b.setOpacity(a))}}),Ext.define("Ext.dom.Shim",{extend:Ext.dom.Underlay,cls:Ext.baseCSSPrefix+"shim",constructor:function(a){this.callParent([a]),this.elementConfig={tag:"iframe",cls:this.cls,role:"presentation",frameBorder:"0",src:Ext.SSL_SECURE_URL,tabindex:"-1"}},getInsertionTarget:function(){var a=this.shadow;return a&&a.el||this.target}}),Ext.define("Ext.dom.ElementEvent",{extend:Ext.util.Event,addListener:function(h,f,b,e,d){var a=this,g=a.name;return!1===(b=b||{}).delegated||Ext.event.publisher.Dom.instance.directEvents[g]?b.capture?(a.directCaptures||(a.directCaptures=new Ext.util.Event(a.observable,g))).addListener(h,f,b,e,d):(a.directs||(a.directs=new Ext.util.Event(a.observable,g))).addListener(h,f,b,e,d):b.capture?(a.captures||(a.captures=new Ext.util.Event(a.observable,g))).addListener(h,f,b,e,d):a.callParent([h,f,b,e,d])},removeListener:function(c,b){var e=this,g=e.captures,h=e.directs,f=e.directCaptures,d=!1,a=e.findListener(c,b);return-1!==a?d=e.callParent([c,b,a]):(h&&(a=h.findListener(c,b)),-1!==a?d=h.removeListener(c,b,a):(g&&(a=g.findListener(c,b)),-1!==a?d=g.removeListener(c,b,a):f&&-1!==(a=f.findListener(c,b))&&(d=f.removeListener(c,b,a)))),d},clearListeners:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;b&&b.clearListeners(),d&&d.clearListeners(),c&&c.clearListeners(),a.callParent()},suspend:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;b&&b.suspend(),d&&d.suspend(),c&&c.suspend(),a.callParent()},resume:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;b&&b.resume(),d&&d.resume(),c&&c.resume(),a.callParent()}}),Ext.define("Ext.event.publisher.Publisher",{handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var a=this,b=a.type;a.handles={},a.registerEvents(),Ext.event.publisher.Publisher.publishers[b]=a},registerEvents:function(f){var b,a,c=this,e=Ext.event.publisher.Publisher.publishersByEvent,d=f||c.handledEvents,g=d.length;for(a=0;a<g;a++)b=d[a],c.handles[b]=1,e[b]=c},fire:function(c,b,d){var a;c.hasListeners[b]&&(a=c.events[b])&&a.fire.apply(a,d)}}),Ext.define("Ext.util.Offset",{statics:{fromObject:function(a){return new this(a.x,a.y)}},constructor:function(a,b){return this.x=null==a||isNaN(a)?0:a,this.y=null==b||isNaN(b)?0:b,this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x,this.y=a.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(a){return this.x==a.x&&this.y==a.y},round:function(b){if(isNaN(b))this.x=Math.round(this.x),this.y=Math.round(this.y);else{var a=Math.pow(10,b);this.x=Math.round(this.x*a)/a,this.y=Math.round(this.y*a)/a}},isZero:function(){return 0==this.x&&0==this.y}}),Ext.define("Ext.util.Region",{isRegion:!0,statics:{getRegion:function(a){return Ext.fly(a).getRegion()},from:function(a){return new this(a.top,a.right,a.bottom,a.left)}},constructor:function(e,c,b,d){var a=this;a.y=a.top=a[1]=e,a.right=c,a.bottom=b,a.x=a.left=a[0]=d},contains:function(a){var b=this;return a.x>=b.x&&a.right<=b.right&&a.y>=b.y&&a.bottom<=b.bottom},intersect:function(a){var b=this,f=Math.max(b.y,a.y),e=Math.min(b.right,a.right),c=Math.min(b.bottom,a.bottom),d=Math.max(b.x,a.x);return f<c&&d<e&&new this.self(f,e,c,d)},union:function(a){var b=this,f=Math.min(b.y,a.y),e=Math.max(b.right,a.right),c=Math.max(b.bottom,a.bottom),d=Math.min(b.x,a.x);return new this.self(f,e,c,d)},constrainTo:function(b){var a=this,c=Ext.Number.constrain;return a.top=a.y=c(a.top,b.y,b.bottom),a.bottom=c(a.bottom,b.y,b.bottom),a.left=a.x=c(a.left,b.x,b.right),a.right=c(a.right,b.x,b.right),a},adjust:function(e,c,b,d){var a=this;return a.top=a.y+=e,a.left=a.x+=d,a.right+=c,a.bottom+=b,a},getOutOfBoundOffset:function(b,a){if(Ext.isObject(b)){a=b;var c=new Ext.util.Offset;return c.x=this.getOutOfBoundOffsetX(a.x),c.y=this.getOutOfBoundOffsetY(a.y),c}return"x"==b?this.getOutOfBoundOffsetX(a):this.getOutOfBoundOffsetY(a)},getOutOfBoundOffsetX:function(a){return a<=this.x?this.x-a:a>=this.right?this.right-a:0},getOutOfBoundOffsetY:function(a){return a<=this.y?this.y-a:a>=this.bottom?this.bottom-a:0},isOutOfBound:function(b,a){return Ext.isObject(b)?(a=b,this.isOutOfBoundX(a.x)||this.isOutOfBoundY(a.y)):"x"==b?this.isOutOfBoundX(a):this.isOutOfBoundY(a)},isOutOfBoundX:function(a){return a<this.x||a>this.right},isOutOfBoundY:function(a){return a<this.y||a>this.bottom},restrict:function(d,a,b){var c;return Ext.isObject(d)?(b=a,(c=(a=d).copy?a.copy():{x:a.x,y:a.y}).x=this.restrictX(a.x,b),c.y=this.restrictY(a.y,b),c):"x"==d?this.restrictX(a,b):this.restrictY(a,b)},restrictX:function(a,b){return b=b||1,a<=this.x?a-=(a-this.x)*b:a>=this.right&&(a-=(a-this.right)*b),a},restrictY:function(a,b){return b=b||1,a<=this.y?a-=(a-this.y)*b:a>=this.bottom&&(a-=(a-this.bottom)*b),a},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(b){var a=this;return a.top=a.y=a[1]=b.y,a.right=b.right,a.bottom=b.bottom,a.left=a.x=a[0]=b.x,this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(b,c){1==arguments.length&&(c=b.y,b=b.x);var a=this;return a.top=a.y+=c,a.right+=b,a.bottom+=c,a.left=a.x+=b,a},round:function(){var a=this;return a.top=a.y=Math.round(a.y),a.right=Math.round(a.right),a.bottom=Math.round(a.bottom),a.left=a.x=Math.round(a.x),a},equals:function(a){return this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left}}),Ext.define("Ext.util.Point",{extend:Ext.util.Region,radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(b){var a=b.changedTouches,c=a&&0<a.length?a[0]:b;return this.fromTouch(c)},fromTouch:function(a){return new this(a.pageX,a.pageY)},from:function(a){return a?a instanceof this?a:new this(a.x,a.y):new this(0,0)}},constructor:function(a,b){null==a&&(a=0),null==b&&(b=0),this.callParent([b,a,b,a])},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(a){return this.x=a.x,this.y=a.y,this},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(a){return this.x===a.x&&this.y===a.y},isCloseTo:function(b,a){if("number"==typeof a)return this.getDistanceTo(b)<=a;var e=b.x,f=b.y,c=a.x,d=a.y;return this.x<=e+c&&this.x>=e-c&&this.y<=f+d&&this.y>=f-d},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(a){return a instanceof Ext.util.Region||(a=Ext.get(a.el||a).getRegion()),a.contains(this)},roundedEquals:function(a){return a&&"object"==typeof a||(a=this.origin),Math.round(this.x)===Math.round(a.x)&&Math.round(this.y)===Math.round(a.y)},getDistanceTo:function(a){a&&"object"==typeof a||(a=this.origin);var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)},getAngleTo:function(a){a&&"object"==typeof a||(a=this.origin);var b=this.x-a.x,c=this.y-a.y;return Math.atan2(c,b)*this.radianToDegreeConstant}},function(){this.prototype.translate=this.prototype.translateBy}),Ext.define("Ext.event.Event",{alternateClassName:"Ext.EventObjectImpl",isStopped:!1,defaultPrevented:!1,isEvent:!0,statics:{resolveTextNode:function(a){return a&&3===a.nodeType?a.parentNode:a},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypes:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"}},constructor:function(b){var e,f,a=this,c=a.self,h=a.self.resolveTextNode,i=b.changedTouches,g=i?i[0]:b,d=b.type;a.pageX=g.pageX,a.pageY=g.pageY,a.target=a.delegatedTarget=h(b.target),(f=b.relatedTarget)&&(a.relatedTarget=h(f)),a.browserEvent=a.event=b,a.type=d,a.button=b.button||0,a.shiftKey=b.shiftKey,a.ctrlKey=b.ctrlKey||b.metaKey||!1,a.altKey=b.altKey,a.charCode=b.charCode,a.keyCode=b.keyCode,a.buttons=b.buttons,0===a.button&&0===a.buttons&&(a.buttons=1),void 0!==c.forwardTab&&c.focusEvents[d]&&(a.forwardTab=c.forwardTab),c.mouseEvents[d]||c.clickEvents[d]?e="mouse":c.pointerEvents[d]?e=c.pointerTypes[b.pointerType]:c.touchEvents[d]&&(e="touch"),e&&(a.pointerType=e),a.timeStamp=a.time=+(b.timeStamp||new Date)},chain:function(b){var a=Ext.Object.chain(this);return a.parentEvent=this,Ext.apply(a,b)},correctWheelDelta:function(a){var c=this.WHEEL_SCALE,b=Math.round(a/c);return!b&&a&&(b=a<0?-1:1),b},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return this.keyCodes[this.keyCode]},getPoint:function(){var a=this.getXY();return new Ext.util.Point(a[0],a[1])},getRelatedTarget:function(d,e,c){var a=this.relatedTarget,b=null;return a&&(b=d?Ext.fly(a).findParent(d,e,c):c?Ext.get(a):a),b},getTarget:function(b,c,a){return b?Ext.fly(this.target).findParent(b,c,a):a?Ext.get(this.target):this.target},getTime:function(){return this.time},getWheelDelta:function(){return this.getWheelDeltas().y},getWheelDeltas:function(){var d=this,a=d.browserEvent,c=0,b=0;return Ext.isDefined(a.wheelDeltaX)?(c=a.wheelDeltaX,b=a.wheelDeltaY):a.wheelDelta?b=a.wheelDelta:a.detail&&(100<(b=-a.detail)?b=3:b<-100&&(b=-3),Ext.isDefined(a.axis)&&a.axis===a.HORIZONTAL_AXIS&&(c=b,b=0)),{x:d.correctWheelDelta(c),y:d.correctWheelDelta(b)}},getX:function(){return this.getXY()[0]},getXY:function(){var d=this,c=d.xy;if(!c){var e,f,a,b,g=(c=d.xy=[d.pageX,d.pageY])[0];g||0===g||(e=d.browserEvent,a=(f=document).documentElement,b=f.body,c[0]=e.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-(a&&a.clientLeft||b&&b.clientLeft||0),c[1]=e.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a&&a.clientTop||b&&b.clientTop||0))}return c},getY:function(){return this.getXY()[1]},hasModifier:function(){var a=this;return!!(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)},isNavKeyPress:function(c){var a=this,b=a.keyCode;return(!("keypress"===a.type)||Ext.isGecko)&&33<=b&&b<=40||!c&&(b===a.RETURN||b===a.TAB||b===a.ESC)},isSpecialKey:function(){var b=this,a=b.keyCode,d=Ext.isGecko,c="keypress"===b.type;return d&&c&&0===b.charCode||this.isNavKeyPress()||a===b.BACKSPACE||a===b.ENTER||16<=a&&a<=20||(!c||d)&&44<=a&&a<=46},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var a=this,b=a.parentEvent;return a.defaultPrevented=!0,b&&(b.defaultPrevented=!0),a.browserEvent.preventDefault(),a},setCurrentTarget:function(a){this.currentTarget=this.delegatedTarget=a},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var a=this,b=a.browserEvent,c=a.parentEvent;return a.isStopped=!0,c&&(c.isStopped=!0),b.stopPropagation?b.stopPropagation():b.cancelBubble=!0,a},within:function(b,d,c){var a;return b&&(a=d?this.getRelatedTarget():this.getTarget()),!!a&&(Ext.fly(b).contains(a)||!(!c||a!==Ext.getDom(b)))},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},function(f){var c,b=f.prototype,a={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:function(){var a;return Ext.isGecko?a=3:Ext.isMac?(a=Ext.isSafari&&532<=Ext.webKitVersion?120:12,a*=3):a=120,a}()},d={};for(c in Ext.apply(f,a),Ext.apply(b,a),delete a.WHEEL_SCALE,delete a.RETURN,a)d[a[c]]=c;b.keyCodes=d,b.getTrueXY=b.getXY}),Ext.define("Ext.overrides.event.Event",{override:"Ext.event.Event",mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},injectEvent:function(){var a,c,b={};function createMouseEventDispatcher(b,d){var c="mousemove"!==b;return function(f,e){var g=e.getXY(),h=a.createMouseEvent(f.ownerDocument,b,!0,c,d,g[0],g[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget);a.fireEvent(f,b,h)}}function cannotInject(b,a){}return!Ext.isIE9m&&document.createEvent?a={createHtmlEvent:function(e,d,c,b){var a=e.createEvent("HTMLEvents");return a.initEvent(d,c,b),a},createMouseEvent:function(d,n,h,f,m,b,c,i,k,g,j,l,e){var a=d.createEvent("MouseEvents"),o=d.defaultView||window;return a.initMouseEvent?a.initMouseEvent(n,h,f,o,m,b,c,b,c,i,k,g,j,l,e):((a=d.createEvent("UIEvents")).initEvent(n,h,f),a.view=o,a.detail=m,a.screenX=b,a.screenY=c,a.clientX=b,a.clientY=c,a.ctrlKey=i,a.altKey=k,a.metaKey=j,a.shiftKey=g,a.button=l,a.relatedTarget=e),a},createUIEvent:function(b,f,d,c,e){var a=b.createEvent("UIEvents"),g=b.defaultView||window;return a.initUIEvent(f,d,c,g,e),a},fireEvent:function(a,c,b){a.dispatchEvent(b)}}:document.createEventObject&&(c={0:1,1:4,2:2},a={createHtmlEvent:function(d,e,c,b){var a=d.createEventObject();return a.bubbles=c,a.cancelable=b,a},createMouseEvent:function(n,o,i,g,m,b,d,j,l,h,k,e,f){var a=n.createEventObject();return a.bubbles=i,a.cancelable=g,a.detail=m,a.screenX=b,a.screenY=d,a.clientX=b,a.clientY=d,a.ctrlKey=j,a.altKey=l,a.shiftKey=h,a.metaKey=k,a.button=c[e]||e,a.relatedTarget=f,a},createUIEvent:function(d,f,c,b,e){var a=d.createEventObject();return a.bubbles=c,a.cancelable=b,a},fireEvent:function(a,c,b){a.fireEvent("on"+c,b)}}),Ext.Object.each({load:[!1,!1],unload:[!1,!1],select:[!0,!1],change:[!0,!1],submit:[!0,!0],reset:[!0,!1],resize:[!0,!1],scroll:[!0,!1]},function(c,d){var f=d[0],e=d[1];b[c]=function(b,g){var d=a.createHtmlEvent(c,f,e);a.fireEvent(b,c,d)}}),Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(a){b[a]=createMouseEventDispatcher(a,1)}),Ext.Object.each({focusin:[!0,!1],focusout:[!0,!1],activate:[!0,!0],focus:[!1,!1],blur:[!1,!1]},function(c,d){var f=d[0],e=d[1];b[c]=function(b,g){var d=a.createUIEvent(b.ownerDocument,c,f,e,1);a.fireEvent(b,c,d)}}),a||(b={},a={}),function(a){var c=this;(b[c.type]||cannotInject)(a?a.dom||a:c.getTarget(),c)}}(),preventDefault:function(){var d,b,c=this,a=c.browserEvent,e=c.parentEvent;return"unknown"!=typeof a.type&&(c.defaultPrevented=!0,e&&(e.defaultPrevented=!0),a.preventDefault?a.preventDefault():("mousedown"===a.type&&(b=a.target,"on"!==(d=b.getAttribute("unselectable"))&&(b.setAttribute("unselectable","on"),Ext.defer(function(){b.setAttribute("unselectable",d)},1))),a.returnValue=!1,(a.ctrlKey||111<a.keyCode&&a.keyCode<124)&&(a.keyCode=-1))),c},stopPropagation:function(){var a=this;return"unknown"!=typeof a.browserEvent.type&&(a.mousedownEvents[a.type]&&Ext.GlobalEvents.fireMouseDown(a),a.callParent()),a},deprecated:{"5.0":{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){function b(a){9===a.keyCode&&delete c.forwardTab}var d,c=this,a=function(a){9===a.keyCode&&(c.forwardTab=!a.shiftKey)};Ext.isIE9m?(d={0:0,1:0,4:1,2:2},c.override({statics:{enableIEAsync:function(b){var a,c={};for(a in b)c[a]=b[a];return c}},constructor:function(a,f,e,c){var b=this;b.callParent([a,f,e,c]),b.button=d[a.button],"contextmenu"===a.type&&(b.button=2),b.toElement=a.toElement,b.fromElement=a.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(a){this.browserEvent=this.self.enableIEAsync(a)},getRelatedTarget:function(f,d,e){var c,b,a=this;return a.relatedTarget||(c=a.type,a.mouseLeaveRe.test(c)?b=a.toElement:a.mouseEnterRe.test(c)&&(b=a.fromElement),b&&(a.relatedTarget=a.self.resolveTextNode(b))),a.callParent([f,d,e])}}),document.attachEvent("onkeydown",a),document.attachEvent("onkeyup",b),window.attachEvent("onunload",function(){document.detachEvent("onkeydown",a),document.detachEvent("onkeyup",b)})):document.addEventListener&&(document.addEventListener("keydown",a,!0),document.addEventListener("keyup",b,!0))}),Ext.define("Ext.event.publisher.Dom",{extend:Ext.event.publisher.Publisher,type:"dom",handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1,scroll:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var a=this;a.bubbleSubscribers={},a.captureSubscribers={},a.directSubscribers={},a.directCaptureSubscribers={},a.delegatedListeners={},a.initHandlers(),Ext.onInternalReady(a.onReady,a),a.callParent()},registerEvents:function(){for(var a,b=this,e=Ext.event.publisher.Publisher.publishersByEvent,d=b.handledDomEvents,f=d.length,c=0;c<f;c++)a=d[c],b.handles[a]=1,e[a]=b;this.callParent()},onReady:function(){var d,b,a=this,c=a.handledDomEvents;if(c)for(b=0,d=c.length;b<d;b++)a.addDelegatedListener(c[b]);Ext.getWin().on("unload",a.destroy,a)},initHandlers:function(){var a=this;a.onDelegatedEvent=Ext.bind(a.onDelegatedEvent,a),a.onDirectEvent=Ext.bind(a.onDirectEvent,a),a.onDirectCaptureEvent=Ext.bind(a.onDirectCaptureEvent,a)},addDelegatedListener:function(a){this.delegatedListeners[a]=1,this.target.addEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},removeDelegatedListener:function(a){delete this.delegatedListeners[a],this.target.removeEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},addDirectListener:function(b,c,a){c.dom.addEventListener(b,a?this.onDirectCaptureEvent:this.onDirectEvent,a)},removeDirectListener:function(b,c,a){c.dom.removeEventListener(b,a?this.onDirectCaptureEvent:this.onDirectEvent,a)},subscribe:function(f,b,g,e){var a,d,c=this;g&&!c.directEvents[b]?(a=e?c.captureSubscribers:c.bubbleSubscribers,c.handles[b]||c.delegatedListeners[b]||c.addDelegatedListener(b),a[b]?++a[b]:a[b]=1):(a=e?c.directCaptureSubscribers:c.directSubscribers,d=f.id,(a=a[b]||(a[b]={}))[d]?++a[d]:(a[d]=1,c.addDirectListener(b,f,e)))},unsubscribe:function(h,b,i,g){var e,f,a,d,c=this;i&&!c.directEvents[b]?(e=c.captureSubscribers,f=c.bubbleSubscribers,(a=g?e:f)[b]&&--a[b],c.handles[b]||f[b]||e[b]||this.removeDelegatedListener(b)):(a=g?c.directCaptureSubscribers:c.directSubscribers,d=h.id,(a=a[b])[d]&&--a[d],a[d]||(delete a[d],c.removeDirectListener(b,h,g)))},getPropagatingTargets:function(d){for(var a=d,c=[];a;)c.push(a),a=a.parentNode||a.defaultView;return c},publish:function(e,g,f){var c,a,b,h,d=this;if(h=(c=Ext.isArray(g)?g:d.captureEvents[e]?(a=Ext.cache[g.id])?[a]:[]:d.getPropagatingTargets(g)).length,d.captureSubscribers[e])for(b=h;b--&&(!(a=Ext.cache[c[b].id])||(d.fire(a,e,f,!1,!0),!f.isStopped)););if(!f.isStopped&&d.bubbleSubscribers[e])for(b=0;b<h&&(!(a=Ext.cache[c[b].id])||(d.fire(a,e,f,!1,!1),!f.isStopped));b++);},fire:function(b,d,c,f,e){var a;b.hasListeners[d]&&(a=b.events[d])&&(e&&f?a=a.directCaptures:e?a=a.captures:f&&(a=a.directs),a&&(c.setCurrentTarget(b.dom),a.fire(c,c.target)))},onDelegatedEvent:function(a){Ext.elevateFunction?Ext.elevateFunction(this.doDelegatedEvent,this,[a]):this.doDelegatedEvent(a)},doDelegatedEvent:function(a,c){var b=this,d=a.timeStamp;return a=new Ext.event.Event(a),!b.isEventBlocked(a)&&(b.beforeEvent(a),Ext.frameStartTime=d,b.reEnterCount++,b.publish(a.type,a.target,a),b.reEnterCount--,!1!==c&&b.afterEvent(a),a)},onDirectEvent:function(a){Ext.elevateFunction?Ext.elevateFunction(this.doDirectEvent,this,[a,!1]):this.doDirectEvent(a,!1)},onDirectCaptureEvent:function(a){Ext.elevateFunction?Ext.elevateFunction(this.doDirectEvent,this,[a,!0]):this.doDirectEvent(a,!0)},doDirectEvent:function(a,f){var c,b=this,d=a.currentTarget,e=a.timeStamp;a=new Ext.event.Event(a),b.isEventBlocked(a)||(b.beforeEvent(a),Ext.frameStartTime=e,(c=Ext.cache[d.id])&&(b.reEnterCount++,b.fire(c,a.type,a,!0,f),b.reEnterCount--),b.afterEvent(a))},beforeEvent:function(e){var a,b,c=e.browserEvent,d=Ext.event.publisher.Dom;"touchstart"===c.type&&1===(a=c.touches).length&&(b=a[0],d.lastTouchStartX=b.pageX,d.lastTouchStartY=b.pageY)},afterEvent:function(c){var b=c.browserEvent.type,d=Ext.event.publisher.Dom,a=Ext.GlobalEvents;c.self.pointerEvents[b]&&"mouse"!==c.pointerType&&(d.lastScreenPointerEventTime=Ext.now()),"touchend"===b&&(d.lastTouchEndTime=Ext.now()),this.reEnterCount||!a.hasListeners.idle||a.idleEventMask[b]||a.fireEvent("idle")},isEventBlocked:function(a){var c=a.type,b=Ext.event.publisher.Dom,e=Ext.now();return!(!Ext.isGecko||"click"!==a.type||2!==a.button)||(this.blockedPointerEvents[c]&&"mouse"!==a.pointerType||this.blockedCompatibilityMouseEvents[c]&&e-b.lastScreenPointerEventTime<1e3||Ext.supports.TouchEvents&&a.self.mouseEvents[a.type]&&Math.abs(a.pageX-b.lastTouchStartX)<15&&Math.abs(a.pageY-b.lastTouchStartY)<15&&Ext.now()-b.lastTouchEndTime<1e3)},destroy:function(){var a;for(a in this.delegatedListeners)this.removeDelegatedListener(a);this.callParent()},reset:function(){var a=Ext.event.publisher.Dom;a.lastScreenPointerEventTime=a.lastTouchEndTime=a.lastTouchStartX=a.lastTouchStartY=void 0}},function(b){var d=document,a=d.defaultView,c=b.prototype;Ext.os.is.iOS&&Ext.os.version.getMajor()<5||Ext.browser.is.AndroidStock||!a||!a.addEventListener?c.target=d:c.target=a,b.instance=new b}),Ext.define("Ext.overrides.event.publisher.Dom",{override:"Ext.event.publisher.Dom"},function(c){if(Ext.isIE9m){var b,d=document.documentElement,e=document.body,a=c.prototype;a.target=document,a.directBoundListeners={},b=function(a,b,c){a.target=a.srcElement||window,a.currentTarget=this,c?b.onDirectCaptureEvent(a):b.onDirectEvent(a)},c.override({addDelegatedListener:function(a){this.delegatedListeners[a]=1,this.target.attachEvent("on"+a,this.onDelegatedEvent)},removeDelegatedListener:function(a){delete this.delegatedListeners[a],this.target.detachEvent("on"+a,this.onDelegatedEvent)},addDirectListener:function(c,i,h){var d=this,a=i.dom,f=Ext.Function.bind(b,a,[d,h],!0),e=d.directBoundListeners;(e[c]||(e[c]={}))[a.id]=f,a.attachEvent?a.attachEvent("on"+c,f):d.callParent(arguments)},removeDirectListener:function(b,c){var a=c.dom;a.detachEvent?a.detachEvent("on"+b,this.directBoundListeners[b][a.id]):this.callParent(arguments)},doDelegatedEvent:function(a,b){return a.target=a.srcElement||window,"focusin"===a.type?a.relatedTarget=a.fromElement===e||a.fromElement===d?null:a.fromElement:"focusout"===a.type&&(a.relatedTarget=a.toElement===e||a.toElement===d?null:a.toElement),this.callParent([a,b])}}),Ext.apply(a.directEvents,a.captureEvents),Ext.apply(a.directEvents,{change:1,input:1,paste:1}),a.captureEvents={}}}),Ext.define("Ext.event.publisher.Gesture",{extend:Ext.event.publisher.Dom,type:"gesture",config:{async:!0},isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},handledEvents:[],handledDomEvents:[],constructor:function(l){var a=this,d=a.handledDomEvents,j=Ext.supports,i=j.TouchEvents,k=Ext.Function,g=a.onTouchStart,h=a.onTouchMove,c=a.onTouchEnd,e=k.createAnimationFrame(a.onTouchStart,a,null,1),f=k.createAnimationFrame(a.onTouchMove,a),b=k.createAnimationFrame(a.onTouchEnd,a,null,1);return a._handlers={touchstart:g,touchmove:h,touchend:c,touchcancel:c,pointerdown:g,pointermove:h,pointerup:c,pointercancel:c,MSPointerDown:g,MSPointerMove:h,MSPointerUp:c,MSPointerCancel:c,mousedown:g,mousemove:h,mouseup:c},a._asyncHandlers={touchstart:e,touchmove:f,touchend:b,touchcancel:b,pointerdown:e,pointermove:f,pointerup:b,pointercancel:b,MSPointerDown:e,MSPointerMove:f,MSPointerUp:b,MSPointerCancel:b,mousedown:e,mousemove:f,mouseup:b},a.activeTouchesMap={},a.activeTouches=[],a.changedTouches=[],a.recognizers=[],i&&(a.onTargetTouchMove=a.onTargetTouchMove.bind(a),a.onTargetTouchEnd=a.onTargetTouchEnd.bind(a)),j.PointerEvents?(d.push("pointerdown","pointermove","pointerup","pointercancel"),a.mousePointerType="mouse"):j.MSPointerEvents?(d.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"),a.mousePointerType=4):i&&d.push("touchstart","touchmove","touchend","touchcancel"),(!d.length||i&&Ext.isWebKit&&Ext.os.is.Desktop)&&d.push("mousedown","mousemove","mouseup"),a.initConfig(l),a.callParent()},onReady:function(){this.callParent(),Ext.Array.sort(this.recognizers,function(c,d){var a=c.priority,b=d.priority;return b<a?1:a<b?-1:0})},registerRecognizer:function(b){var c,a=this,d=b.handledEvents,e=d.length;for(b.setOnRecognized(a.onRecognized),b.setCallbackScope(a),c=0;c<e;c++)a.handledEvents.push(d[c]);a.registerEvents(d),a.recognizers.push(b)},onRecognized:function(g,c,a){var e,f,d,h,b=c.changedTouches,i=b.length;if((a=a||{}).type=g,a.target=b[0].target,a.isStopped=!1,c=c.chain(a),1<i){for(e=[],d=0;d<i;d++)h=b[d],e.push(h.targets);f=this.getCommonTargets(e)}else f=b[0].targets;this.publish(g,f,c)},getCommonTargets:function(e){var d=e[0],h=e.length;if(1===h)return d;for(var b,f,c,a=[],g=1;;){if(!(b=d[d.length-g]))return a;for(c=1;c<h;c++)if((f=e[c])[f.length-g]!==b)return a;a.unshift(b),g++}return a},invokeRecognizers:function(d,f){var a,b,c=this.recognizers,e=c.length;if("onStart"===d)for(a=0;a<e;a++)c[a].isActive=!0;for(a=0;a<e;a++)(b=c[a]).isActive&&!1===b[d].call(b,f)&&(b.isActive=!1)},updateTouches:function(i,p){var b,c,a,g,d,o,j,k,h=this,m=i.browserEvent,n=m.changedTouches||[m],f=h.activeTouches,e=h.activeTouchesMap,l=[];for(d=0,o=n.length;d<o;d++)(a=e[c="identifier"in(b=n[d])?b.identifier:"pointerId"in b?b.pointerId:1])||(g=Ext.event.Event.resolveTextNode(b.target),a=e[c]={identifier:c,target:g,targets:h.getPropagatingTargets(g)},f.push(a)),p&&(delete e[c],Ext.Array.remove(f,a)),j=b.pageX,k=b.pageY,a.pageX=j,a.pageY=k,a.point=new Ext.util.Point(j,k),l.push(a);i.touches=Ext.Array.clone(f),i.changedTouches=l},doDelegatedEvent:function(a){var b=this;(a=b.callParent([a,!1]))&&((!a.button||a.button<1)&&b.handlers[a.type].call(b,a),b.afterEvent(a))},onTouchStart:function(b){var a=this,d=b.target,c=b.browserEvent.touches;"touchstart"===b.browserEvent.type&&(d.addEventListener("touchmove",a.onTargetTouchMove),d.addEventListener("touchend",a.onTargetTouchEnd),d.addEventListener("touchcancel",a.onTargetTouchEnd)),c&&c.length<=a.activeTouches.length&&a.removeGhostTouches(c),a.updateTouches(b),a.isStarted||(a.isStarted=!0,a.invokeRecognizers("onStart",b),Ext.enableGarbageCollector&&Ext.dom.GarbageCollector.pause()),a.invokeRecognizers("onTouchStart",b)},onTouchMove:function(a){var b=this,c=b.mousePointerType;if(b.isStarted){if(c&&a.browserEvent.pointerType===c&&0===a.buttons)return a.type=Ext.dom.Element.prototype.eventMap.touchend,a.button=0,void b.onTouchEnd(a);b.updateTouches(a),0<a.changedTouches.length&&b.invokeRecognizers("onTouchMove",a)}},onTouchEnd:function(b){var a=this;a.isStarted&&(a.updateTouches(b,!0),a.invokeRecognizers(a.isCancelEvent[b.type]?"onTouchCancel":"onTouchEnd",b),a.activeTouches.length||(a.isStarted=!1,a.invokeRecognizers("onEnd",b),Ext.enableGarbageCollector&&Ext.dom.GarbageCollector.resume()))},onTargetTouchMove:function(a){Ext.elevateFunction?Ext.elevateFunction(this.doTargetTouchMove,this,[a]):this.doTargetTouchMove(a)},doTargetTouchMove:function(a){Ext.getBody().contains(a.target)||this.onTouchMove(new Ext.event.Event(a))},onTargetTouchEnd:function(a){Ext.elevateFunction?Ext.elevateFunction(this.doTargetTouchEnd,this,[a]):this.doTargetTouchEnd(a)},doTargetTouchEnd:function(c){var b=this,a=c.target;a.removeEventListener("touchmove",b.onTargetTouchMove),a.removeEventListener("touchend",b.onTargetTouchEnd),a.removeEventListener("touchcancel",b.onTargetTouchEnd),Ext.getBody().contains(a)||b.onTouchEnd(new Ext.event.Event(c))},updateAsync:function(a){this.handlers=a?this._asyncHandlers:this._handlers},reset:function(){var b,c,a=this,d=a.recognizers,e=d.length;for(a.activeTouchesMap={},a.activeTouches=[],a.changedTouches=[],a.isStarted=!1,b=0;b<e;b++)(c=d[b]).reset(),c.isActive=!1;this.callParent()},privates:{removeGhostTouches:function(c){var a,e,d,f={},g=c.length,b=this.activeTouches,h=this.activeTouchesMap;for(a=0;a<g;++a)f[c[a].identifier]=!0;for(a=b.length;a--;)c[e=(d=b[a]).identifier]||(Ext.Array.remove(b,d),delete h[e])}}},function(a){a.instance=new a}),Ext.define("Ext.overrides.event.publisher.Gesture",{override:"Ext.event.publisher.Gesture"},function(){Ext.isIE9m&&this.override({updateTouches:function(a,d){var b=a.browserEvent,c=a.getXY();b.pageX=c[0],b.pageY=c[1],this.callParent([a,d])},doDelegatedEvent:function(a){this.callParent([Ext.event.Event.enableIEAsync(a)])}})}),Ext.define("Ext.mixin.Templatable",{extend:Ext.Mixin,mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:function(){return{reference:"element"}},getElementTemplate:function(){var a=document.createDocumentFragment();return a.appendChild(Ext.Element.create(this.getElementConfig(),!0)),a},initElement:function(){var a=this.self.prototype;a.elementTemplate=this.getElementTemplate(),a.initElement=a.doInitElement,this.initElement.apply(this,arguments)},linkElement:function(a,b){this.link(a,b)},doInitElement:function(){var c,b,g,a,f,d=this.referenceAttributeName;for(b=0,g=(c=this.elementTemplate.cloneNode(!0).querySelectorAll(this.referenceSelector)).length;b<g;b++)f=(a=c[b]).getAttribute(d),a.removeAttribute(d),this.linkElement(f,a)}}),Ext.define("Ext.TaskQueue",{singleton:!0,pending:!1,mode:!0,constructor:function(){this.readQueue=[],this.writeQueue=[],this.run=Ext.Function.bind(this.run,this),Ext.os.is.iOS&&Ext.interval(this.watch,500,this)},requestRead:function(c,a,b){this.request(!0),this.readQueue.push(arguments)},requestWrite:function(c,a,b){this.request(!1),this.writeQueue.push(arguments)},request:function(a){this.pending||(this.pendingTime=Date.now(),this.pending=!0,(this.mode=a)?Ext.defer(this.run,1,this):Ext.Function.requestAnimationFrame(this.run))},watch:function(){this.pending&&500<=Date.now()-this.pendingTime&&this.run()},run:function(){this.pending=!1;var d,i=this.readQueue,h=this.writeQueue,c=null;this.mode?(d=i,0<h.length&&(c=!1)):(d=h,0<i.length&&(c=!0));var f,j,b,a,e,g=d.slice();for(f=d.length=0,j=g.length;f<j;f++)a=(b=g[f])[0],e=b[1],"string"==typeof a&&(a=e[a]),2<b.length?a.apply(e,b[2]):a.call(e);g.length=0,null!==c&&this.request(c)}}),Ext.define("Ext.util.sizemonitor.Abstract",{mixins:[Ext.mixin.Templatable],config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:0,height:0,contentWidth:0,contentHeight:0,constructor:function(a){this.refresh=Ext.Function.bind(this.refresh,this),this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0},this.initElement(),this.initConfig(a),this.bindListeners(!0)},bindListeners:Ext.emptyFn,applyElement:function(a){if(a)return Ext.get(a)},updateElement:function(a){a.append(this.detectorsContainer),a.addCls(Ext.baseCSSPrefix+"size-monitored")},applyArgs:function(a){return a.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.offsetWidth},getContentHeight:function(){return this.detectorsContainer.offsetHeight},refreshSize:function(){var b=this.getElement();if(!b||b.destroyed)return!1;var e,h=b.getWidth(),g=b.getHeight(),d=this.getContentWidth(),c=this.getContentHeight(),j=this.contentWidth,i=this.contentHeight,a=this.info,f=!1;return this.width=h,this.height=g,0<(e=(j!==(this.contentWidth=d)?1:0)+(i!==(this.contentHeight=c)?2:0))&&(a.width=h,a.height=g,a.contentWidth=d,a.contentHeight=c,a.flag=e,f=!0,this.getCallback().apply(this.getScope(),this.getArgs())),f},refresh:function(a){(this.refreshSize()||a)&&Ext.TaskQueue.requestWrite("refreshMonitors",this)},destroy:function(){var a=this,b=a.getElement();a.bindListeners(!1),b&&!b.destroyed&&b.removeCls(Ext.baseCSSPrefix+"size-monitored"),delete a._element,a.callParent()}}),Ext.define("Ext.util.sizemonitor.Scroll",{extend:Ext.util.sizemonitor.Abstract,getElementConfig:function(){return{reference:"detectorsContainer",classList:[Ext.baseCSSPrefix+"size-monitors","scroll"],children:[{reference:"expandMonitor",className:"expand"},{reference:"shrinkMonitor",className:"shrink"}]}},constructor:function(a){this.onScroll=Ext.Function.bind(this.onScroll,this),this.callParent(arguments)},bindListeners:function(b){var a=b?"addEventListener":"removeEventListener";this.expandMonitor[a]("scroll",this.onScroll,!0),this.shrinkMonitor[a]("scroll",this.onScroll,!0)},forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this,[!0])},onScroll:function(){Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var a=this.expandMonitor,b=this.shrinkMonitor,c=1e6;a&&!a.destroyed&&(a.scrollLeft=c,a.scrollTop=c),b&&!b.destroyed&&(b.scrollLeft=c,b.scrollTop=c)}}),Ext.define("Ext.util.sizemonitor.OverflowChange",{extend:Ext.util.sizemonitor.Abstract,constructor:function(a){this.onExpand=Ext.Function.bind(this.onExpand,this),this.onShrink=Ext.Function.bind(this.onShrink,this),this.callParent(arguments)},getElementConfig:function(){return{reference:"detectorsContainer",classList:[Ext.baseCSSPrefix+"size-monitors","overflowchanged"],children:[{reference:"expandMonitor",className:"expand",children:[{reference:"expandHelper"}]},{reference:"shrinkMonitor",className:"shrink",children:[{reference:"shrinkHelper"}]}]}},bindListeners:function(b){var a=b?"addEventListener":"removeEventListener";this.expandMonitor[a](Ext.browser.is.Firefox?"underflow":"overflowchanged",this.onExpand,!0),this.shrinkMonitor[a](Ext.browser.is.Firefox?"overflow":"overflowchanged",this.onShrink,!0)},onExpand:function(a){Ext.browser.is.Webkit&&a.horizontalOverflow&&a.verticalOverflow||Ext.TaskQueue.requestRead("refresh",this)},onShrink:function(a){Ext.browser.is.Webkit&&!a.horizontalOverflow&&!a.verticalOverflow||Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){if(!this.destroyed){var a,b=this.expandHelper,c=this.shrinkHelper,d=this.getContentBounds(),f=d.width,e=d.height;b&&!b.destroyed&&((a=b.style).width=f+1+"px",a.height=e+1+"px"),c&&!c.destroyed&&((a=c.style).width=f+"px",a.height=e+"px"),Ext.TaskQueue.requestRead("refresh",this)}}}),Ext.define("Ext.util.SizeMonitor",{constructor:function(b){var a=Ext.util.sizemonitor;return Ext.browser.is.Firefox?new a.OverflowChange(b):new a.Scroll(b)}}),Ext.define("Ext.event.publisher.ElementSize",{extend:Ext.event.publisher.Publisher,type:"size",handledEvents:["resize"],constructor:function(){this.monitors={},this.subscribers={},this.callParent(arguments)},subscribe:function(b){var a=b.id,c=this.subscribers,d=this.monitors;return c[a]?++c[a]:(c[a]=1,d[a]=new Ext.util.SizeMonitor({element:b,callback:this.onElementResize,scope:this,args:[b]})),b.on("painted","forceRefresh",d[a]),!0},unsubscribe:function(e){var b,a=e.id,c=this.subscribers,d=this.monitors;c[a]&&!--c[a]&&(delete c[a],b=d[a],e.un("painted","forceRefresh",b),b.destroy(),delete d[a])},onElementResize:function(a,b){Ext.TaskQueue.requestRead("fire",this,[a,"resize",[a,b]])}},function(a){a.instance=new a}),Ext.define("Ext.util.paintmonitor.Abstract",{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:function(a){this.onElementPainted=Ext.Function.bind(this.onElementPainted,this),this.initConfig(a)},bindListeners:function(a){this.monitorElement[a?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,!0)},applyElement:function(a){if(a)return Ext.get(a)},updateElement:function(a){this.monitorElement=Ext.Element.create({classList:[Ext.baseCSSPrefix+"paint-monitor",this.monitorClass]},!0),a.appendChild(this.monitorElement),a.addCls(Ext.baseCSSPrefix+"paint-monitored"),this.bindListeners(!0)},onElementPainted:function(){},destroy:function(){var a=this,c=a.monitorElement,d=c.parentNode,b=a.getElement();a.bindListeners(!1),delete a.monitorElement,b&&!b.destroyed&&(b.removeCls(Ext.baseCSSPrefix+"paint-monitored"),delete a._element),d&&d.removeChild(c),a.callParent()}}),Ext.define("Ext.util.paintmonitor.CssAnimation",{extend:Ext.util.paintmonitor.Abstract,eventName:Ext.browser.is.WebKit?"webkitAnimationEnd":"animationend",monitorClass:"cssanimation",onElementPainted:function(a){a.animationName===Ext.baseCSSPrefix+"paint-monitor-helper"&&this.getCallback().apply(this.getScope(),this.getArgs())}}),Ext.define("Ext.util.PaintMonitor",{constructor:function(a){return new Ext.util.paintmonitor.CssAnimation(a)}}),Ext.define("Ext.event.publisher.ElementPaint",{extend:Ext.event.publisher.Publisher,type:"paint",handledEvents:["painted"],constructor:function(){this.monitors={},this.subscribers={},this.callParent(arguments)},subscribe:function(d){var b=this,a=d.id,c=b.subscribers;c[a]?++c[a]:(c[a]=1,b.monitors[a]=new Ext.util.PaintMonitor({element:d,callback:b.onElementPainted,scope:b,args:[d]}))},unsubscribe:function(d){var a=d.id,b=this.subscribers,c=this.monitors;b[a]&&!--b[a]&&(delete b[a],c[a].destroy(),delete c[a])},onElementPainted:function(a){Ext.TaskQueue.requestRead("fire",this,[a,"painted",[a]])}},function(a){a.instance=new a}),Ext.define("Ext.dom.Element",function(a){function P(b,a){return a.charAt(1).toUpperCase()}var s,c,e,h=window,b=document,H="ext-window",F="ext-document",w="width",J="height",I="display",x="none",u="position",i="-",$=/\w/g,k=/\s+/,N=/[\s]+/,Q=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,M=/table-row|table-.*-group/,ae=/top/i,d={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},f={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},v={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},R=[f.l,f.r,f.t,f.b],D=[d.l,d.r,d.t,d.b],Y=/\d+$/,K=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,Z=/(-[a-z])/gi,L=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,t=/^\d+(?:\.\d*)?px$/i,C={},A="originalDisplay",G=function(c,d){var b,a,e;if(1===c.nodeType&&(c._extData=null,d))for(a=0,e=(b=c.childNodes).length;a<e;++a)G(b[a],d)},m=Ext.baseCSSPrefix+"hidden-visibility",j=Ext.baseCSSPrefix+"hidden-display",o=Ext.baseCSSPrefix+"hidden-offsets",r=Ext.baseCSSPrefix+"hidden-clip",q=Ext.baseCSSPrefix+"sized",p=Ext.baseCSSPrefix+"unsized",n=Ext.baseCSSPrefix+"stretched",O=Ext.baseCSSPrefix+"no-touch-scroll",g_style="style",g_className="className",g_cls="cls",g_classList="classList",g_text="text",g_hidden="hidden",g_html="html",g_children="children",B=0,y=0,z=!1,l=!1;return{alternateClassName:["Ext.Element"],mixins:[Ext.util.Positionable,Ext.mixin.Observable],observableType:"element",isElement:!0,skipGarbageCollection:!0,$applyConfigs:!0,identifiablePrefix:"ext-element-",styleHooks:{},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(c){var d,a=this;if("string"==typeof c&&(c=b.getElementById(c)),!c)return null;(d=(a.dom=c).id)?a.id=d:d=c.id=a.getUniqueId(),a.el=a,(Ext.cache[d]=a).mixins.observable.constructor.call(a)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,minKeyboardHeight:100,unitRe:K,useDelegatedEvents:!0,validNodeTypes:{1:1,9:1},addUnits:function(a,b){return"number"==typeof a?a+(b||"px"):""===a||"auto"===a||null==a?a||"":Y.test(a)?a+(b||"px"):K.test(a)?a:a||""},create:function(a,k){var d,l,i,c,f,e,n,h,m=g_hidden;if((a=a||{}).isElement)return k?a.dom:a;if("nodeType"in a)return k?a:Ext.get(a);if("string"==typeof a)return b.createTextNode(a);for(f in i=(i=a.tag)||"div",l=(d=a.namespace?b.createElementNS(a.namespace,i):b.createElement(i)).style,a[m]&&(h=null==(h=a.className)?"":h+" ",a.className=h+j,delete a[m]),a)if("tag"!==f)switch(c=a[f],f){case g_style:if("string"==typeof c)d.setAttribute(f,c);else for(e in c)c.hasOwnProperty(e)&&(l[e]=c[e]);break;case g_className:case g_cls:d.className=c;break;case g_classList:d.className=c.join(" ");break;case g_text:d.textContent=c;break;case g_html:d.innerHTML=c;break;case g_children:for(e=0,n=c.length;e<n;e++)d.appendChild(this.create(c[e],!0));break;default:null!=c&&d.setAttribute(f,c)}return k?d:this.get(d)},detach:function(){var a=this.dom;return a&&a.parentNode&&"BODY"!==a.tagName&&a.parentNode.removeChild(a),this},fly:function(b,a){return Ext.fly(b,a)},fromPoint:function(a,c){return Ext.get(b.elementFromPoint(a,c))},get:function(c){var f,j,e,d,l,i,k,g=Ext.cache;if(!c)return null;if(c.isFly&&(c=c.dom),"string"==typeof c){if(e=c,g.hasOwnProperty(e)){if((d=g[e]).skipGarbageCollection||!Ext.isGarbage(d.dom))return d;d.destroy()}if(e===H)return a.get(h);if(e===F)return a.get(b);if(j=Ext.getElementById?Ext.getElementById(e):b.getElementById(e))return new a(j)}if((f=c.nodeType)?(l=9===f,k=this.validNodeTypes[f]):i=c.window==c,k||i){if(e=c.id,g.hasOwnProperty(e)){if((d=g[e]).skipGarbageCollection||c===d.dom||!Ext.isGarbage(d.dom))return d;d.destroy()}return c===b&&(c.id=F),c==h&&(c.id=H),c=new a(c),(i||l)&&(c.skipGarbageCollection=!0),c}return c.isElement||c.isComposite?c:Ext.isIterable(c)?this.select(c):null},getActiveElement:function(c){var a=b.activeElement;return a&&a.focus||(a=b.body),c?Ext.get(a):a},getDocumentHeight:function(){return Math.max(Ext.isStrict?b.documentElement.scrollHeight:b.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(Ext.isStrict?b.documentElement.scrollWidth:b.body.scrollWidth,this.getViewportWidth())},getOrientation:function(){return Ext.supports.OrientationChange?0==h.orientation?"portrait":"landscape":h.innerHeight>h.innerWidth?"portrait":"landscape"},getViewportHeight:function(){var c=a._viewportHeight;return Ext.isIE9m?b.documentElement.clientHeight:null!=c?c:h.innerHeight},getViewportWidth:function(){var c=a._viewportWidth;return Ext.isIE9m?b.documentElement.clientWidth:null!=c?c:h.innerWidth},getViewSize:function(){return{width:a.getViewportWidth(),height:a.getViewportHeight()}},normalize:function(a){return C[a]||(C[a]=a.replace(Z,P))},_onWindowFocusChange:function(b){Ext.fly(b.target).is(a.editableSelector)&&(B=new Date,z="focusin"===b.type||"pointerup"===b.type)},_onWindowResize:function(){var d,e,c=window.innerWidth,b=window.innerHeight,g=new Date;d=c-a._windowWidth,e=b-a._windowHeight,a._windowWidth=c,a._windowHeight=b,(g-B<1e3||g-y<1e3)&&0==d&&z&&e<=-a.minKeyboardHeight?l=!0:(l&&0==d&&e>=a.minKeyboardHeight&&(l=!1,y=new Date),l||(a._viewportWidth=c,a._viewportHeight=b))},parseBox:function(b){var a,c,d=typeof(b=b||0);return"number"==d?{top:b,right:b,bottom:b,left:b}:"string"!=d?b:(1===(c=(a=b.split(" ")).length)?a[1]=a[2]=a[3]=a[0]:2===c?(a[2]=a[0],a[3]=a[1]):3===c&&(a[3]=a[1]),{top:parseFloat(a[0])||0,right:parseFloat(a[1])||0,bottom:parseFloat(a[2])||0,left:parseFloat(a[3])||0})},parseStyles:function(b){var a,c={};if(b)for(L.lastIndex=0;a=L.exec(b);)c[a[1]]=a[2]||"";return c},select:function(c,a,d){return Ext.fly(d||b).select(c,a)},query:function(a,c,d){return Ext.fly(d||b).query(a,c)},unitizeBox:function(a,c){var b=this;return a=b.parseBox(a),b.addUnits(a.top,c)+" "+b.addUnits(a.right,c)+" "+b.addUnits(a.bottom,c)+" "+b.addUnits(a.left,c)},serializeForm:function(k){var a,g,c,j,n,h,i,o,d,l=k.elements||(b.forms[k]||Ext.getDom(k)).elements,m=!1,e=encodeURIComponent,f="",p=l.length;for(h=0;h<p;h++)if(g=(a=l[h]).name,c=a.type,j=a.options,!a.disabled&&g)if(/select-(one|multiple)/i.test(c))for(o=j.length,i=0;i<o;i++)(d=j[i]).selected&&(n=d.hasAttribute("value"),f+=Ext.String.format("{0}={1}&",e(g),e(n?d.value:d.text)));else/file|undefined|reset|button/i.test(c)||/radio|checkbox/i.test(c)&&!a.checked||"submit"==c&&m||(f+=e(g)+"="+e(a.value)+"&",m=/submit/i.test(c));return f.substr(0,f.length-1)},getCommonAncestor:function(b,c,a){for((e=e||new Ext.dom.Fly).attach(Ext.getDom(b));!e.isAncestor(c);){if(!e.dom.parentNode){e.attach(document.body);break}e.attach(e.dom.parentNode)}return a?e.dom:Ext.get(e)}},addCls:function(b,d,e){var l,m,j,h,f,n,a,c=this,g=c.getData();if(!b)return c;for(g.isSynchronized||c.synchronize(),m=c.dom,j=g.classMap,h=g.classList,d=d?d+i:"",e=e?i+e:"","string"==typeof b&&(b=b.split(k)),f=0,n=b.length;f<n;f++)(a=b[f])&&(j[a=d+a+e]||(j[a]=!0,h.push(a),l=!0));return l&&(m.className=h.join(" ")),c},addStyles:function(h,g){var a,d,f=0,c=(h||"").match($),e=c.length,b=[];if(1===e)f=Math.abs(parseFloat(this.getStyle(g[c[0]]))||0);else if(e){for(a=0;a<e;a++)d=c[a],b.push(g[d]);for(b=this.getStyle(b),a=0;a<e;a++)d=c[a],f+=parseFloat(b[g[d]])||0}return f},addUnits:function(c,b){return a.addUnits(c,b)},adjustDirect2DDimension:function(d){var e,a=this.dom,b=this.getStyle("display"),h=a.style.display,g=a.style.position,i=d===w?0:1,c=a.currentStyle;return"inline"===b&&(a.style.display="inline-block"),a.style.position=b.match(M)?"absolute":"static",e=(parseFloat(c[d])||2*parseFloat(c.msTransformOrigin.split(" ")[i]))%1,a.style.position=g,"inline"===b&&(a.style.display=h),e},animate:function(a){return(a=new Ext.fx.Animation(a)).setElement(this),(this._activeAnimation=a).on({animationend:this._onAnimationEnd}),Ext.Animator.run(a),a},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(a,c){var b,f,d,e=this;if(a.nodeType||a.dom||"string"==typeof a)return a=Ext.getDom(a),e.dom.appendChild(a),c?a:Ext.get(a);if(a.length){for(b=Ext.fly(document.createDocumentFragment()),f=a.length,d=0;d<f;d++)b.appendChild(a[d],c);return e.dom.appendChild(b.dom),c?b.dom:b}return e.createChild(a,null,c)},appendTo:function(a){return Ext.getDom(a).appendChild(this.dom),this},applyStyles:function(b){return b&&("function"==typeof b&&(b=b.call()),"string"==typeof b&&(b=a.parseStyles(b)),"object"==typeof b&&this.setStyle(b)),this},blur:function(){var c=this,a=c.dom;if(a===b.body)return c.focus(void 0,a);try{a.blur()}catch(ah){}return c},cacheScrollValues:function(){var e,a,b,g,f=[],d=[];for(c=c||new Ext.dom.Fly,b=0,g=(e=this.query("*")).length;b<g;b++)(0<(a=e[b]).scrollTop||0!==a.scrollLeft)&&(d.push(a),f.push(c.attach(a).getScroll()));return function(){var b,a,e;for(a=0,e=d.length;a<e;a++)b=f[a],c.attach(d[a]),c.setScrollLeft(b.left),c.setScrollTop(b.top)}},center:function(a){return this.alignTo(a||b,"c-c")},child:function(c,b){var d=Ext.get(this).id;return this.selectNode(Ext.makeIdSelector(d)+" > "+c,!!b)},clone:function(b,c){var a=this.dom.cloneNode(b);return Ext.supports.CloneNodeCopiesExpando&&G(a,b),c?a:Ext.get(a)},constrainScrollLeft:function(b){var a=this.dom;return Math.max(Math.min(b,a.scrollWidth-a.clientWidth),0)},constrainScrollTop:function(b){var a=this.dom;return Math.max(Math.min(b,a.scrollHeight-a.clientHeight),0)},createChild:function(a,b,c){return a=a||{tag:"div"},b?Ext.DomHelper.insertBefore(b,a,!0!==c):Ext.DomHelper.append(this.dom,a,!0!==c)},contains:function(a){if(!a)return!1;var b=Ext.getDom(a);return b===this.dom||this.isAncestor(b)},destroy:function(){var b=this,a=b.dom;a&&a.parentNode&&a.parentNode.removeChild(a),b.collect(),b.isFly||b.callParent()},detach:function(){var a=this.dom;return a&&a.parentNode&&"BODY"!==a.tagName&&a.parentNode.removeChild(a),this},disableShadow:function(){var a=this.shadow;a&&(a.hide(),a.disabled=!0)},disableShim:function(){var a=this.shim;a&&(a.hide(),a.disabled=!0)},disableTouchContextMenu:function(){this._contextMenuListenerRemover=this.on({MSHoldVisual:function(a){a.preventDefault()},destroyable:!0,delegated:!1})},disableTouchScroll:function(){this.addCls(O),this.on({touchmove:function(a){a.preventDefault()},translate:!1})},doReplaceWith:function(b){var a=this.dom;a.parentNode.replaceChild(Ext.getDom(b),a)},doScrollIntoView:function(a,n,b,l,k,m){c=c||new Ext.dom.Fly;var d=this,j=d.dom,h=c.attach(a)[k](),i=a.scrollTop,g=d.getScrollIntoViewXY(a,h,i),e=g.x,f=g.y;return l&&(b?b=Ext.apply({listeners:{afteranimate:function(){c.attach(j).highlight()}}},b):c.attach(j).highlight()),f!==i&&c.attach(a).scrollTo("top",f,b),!1!==n&&e!==h&&c.attach(a)[m]("left",e,b),d},down:function(b,a){return this.selectNode(b,!!a)},enableShadow:function(e,d){var b=this,a=b.shadow||(b.shadow=new Ext.dom.Shadow(Ext.apply({target:b},e))),c=b.shim;c&&(c.offsets=a.outerOffsets,(c.shadow=a).shim=c),!0===d||!1!==d&&b.isVisible()?a.show():a.hide(),a.disabled=!1},enableShim:function(e,d){var b=this,a=b.shim||(b.shim=new Ext.dom.Shim(Ext.apply({target:b},e))),c=b.shadow;c&&(a.offsets=c.outerOffsets,(a.shadow=c).shim=a),!0===d||!1!==d&&b.isVisible()?a.show():a.hide(),a.disabled=!1},findParent:function(f,c,g){var a=this.dom,d=b.documentElement,e=0;for(c||0===c?"number"!=typeof c&&(d=Ext.getDom(c),c=Number.MAX_VALUE):c=50;a&&1===a.nodeType&&e<c&&a!==d;){if(Ext.fly(a).is(f))return g?Ext.get(a):a;e++,a=a.parentNode}return null},findParentNode:function(b,d,c){var a=Ext.fly(this.dom.parentNode);return a?a.findParent(b,d,c):null},first:function(b,a){return this.matchNode("nextSibling","firstChild",b,a)},focus:function(c,a){var b=this;return a=a||b.dom,Number(c)?Ext.defer(b.focus,c,b,[null,a]):(Ext.GlobalEvents.fireEvent("beforefocus",a),a.focus()),b},collect:function(){var a=this,d=a.dom,b=a.shadow,c=a.shim;a.isFly||(a.mixins.observable.destroy.call(a),delete Ext.cache[a.id],a.destroyed=!0,a.el=null),d&&(d._extData=a.dom=null),b&&(b.hide(),a.shadow=null),c&&(c.hide(),a.shim=null)},getAnchorToXY:function(d,a,c,b){return d.getAnchorXY(a,c,b)},getAttribute:function(a,c){var b=this.dom;return c?b.getAttributeNS(c,a)||b.getAttribute(c+":"+a):b.getAttribute(a)||b[a]||null},getAttributes:function(){var b,a,e,c=this.dom.attributes,d={};for(a=0,e=c.length;a<e;a++)d[(b=c[a]).name]=b.value;return d},getBottom:function(a){return(a?this.getLocalY():this.getY())+this.getHeight()},getById:function(c,d){var a=b.getElementById(c)||this.dom.querySelector(Ext.makeIdSelector(c));return d?a:a?Ext.get(a):null},getBorderPadding:function(){var b=this.getStyle(R),a=this.getStyle(D);return{beforeX:(parseFloat(a[d.l])||0)+(parseFloat(b[f.l])||0),afterX:(parseFloat(a[d.r])||0)+(parseFloat(b[f.r])||0),beforeY:(parseFloat(a[d.t])||0)+(parseFloat(b[f.t])||0),afterY:(parseFloat(a[d.b])||0)+(parseFloat(b[f.b])||0)}},getBorders:function(){var a=this.getStyle(D);return{beforeX:parseFloat(a[d.l])||0,afterX:parseFloat(a[d.r])||0,beforeY:parseFloat(a[d.t])||0,afterY:parseFloat(a[d.b])||0}},getBorderWidth:function(a){return this.addStyles(a,d)},getData:function(c){var a,b=this.dom;return b&&((a=b._extData)||c||(b._extData=a={})),a},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(d,e){var a,c,b=this;return b.isStyle("display","none")?0:(a=b.dom.offsetHeight,Ext.supports.Direct2DBug&&(c=b.adjustDirect2DDimension(J),e?a+=c:0<c&&c<.5&&a++),d&&(a-=b.getBorderWidth("tb")+b.getPadding("tb")),a<0?0:a)},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(a){return a?this.getLocalX():this.getX()},getLocalX:function(){var b,c=this,a=c.getStyle("left");return a&&"auto"!==a?t.test(a)?a=parseFloat(a):(a=c.getX(),(b=c.dom.offsetParent)&&(a-=Ext.fly(b).getX())):a=0,a},getLocalXY:function(){var c,d=this,e=d.getStyle(["left","top"]),a=e.left,b=e.top;return a&&"auto"!==a?t.test(a)?a=parseFloat(a):(a=d.getX(),(c=d.dom.offsetParent)&&(a-=Ext.fly(c).getX())):a=0,b&&"auto"!==b?t.test(b)?b=parseFloat(b):(b=d.getY(),(c=d.dom.offsetParent)&&(b-=Ext.fly(c).getY())):b=0,[a,b]},getLocalY:function(){var b,c=this,a=c.getStyle("top");return a&&"auto"!==a?t.test(a)?a=parseFloat(a):(a=c.getY(),(b=c.dom.offsetParent)&&(a-=Ext.fly(b).getY())):a=0,a},getMargin:function(){var b={t:"top",l:"left",r:"right",b:"bottom"},a=["margin-top","margin-left","margin-right","margin-bottom"];return function(f){var d,e,c;if(f)c=this.addStyles(f,v);else if(c={},(d=this.getStyle(a))&&"object"==typeof d)for(e in c={},v)c[e]=c[b[e]]=parseFloat(d[v[e]])||0;return c}}(),getPadding:function(a){return this.addStyles(a,f)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(a){return(a?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var d,e,c=this.dom,f=b.documentElement,a=document.body;return e=c===b||c===a?(d=f.scrollLeft||(a?a.scrollLeft:0),f.scrollTop||(a?a.scrollTop:0)):(d=c.scrollLeft,c.scrollTop),{left:d,top:e}},getScrollIntoViewXY:function(q,a,b){var o=this.dom,g=Ext.getDom(q),i=this.getOffsetsTo(g),n=o.offsetWidth,l=o.offsetHeight,e=i[0]+a,f=i[1]+b,k=f+l,m=e+n,c=g.clientHeight,d=g.clientWidth,h=a,j=b;return c<l||f<j?b=f:j+c<k&&(b=k-c),d<n||e<h?a=e:h+d<m&&(a=m-d),{x:a,y:b}},getScrollLeft:function(){var a=this.dom;return a===b||a===document.body?this.getScroll().left:a.scrollLeft},getScrollTop:function(){var a=this.dom;return a===b||a===document.body?this.getScroll().top:a.scrollTop},getSize:function(a){return{width:this.getWidth(a),height:this.getHeight(a)}},getStyle:function(n,i){var h,f,d,g,c,l,k=this,e=k.dom,m="string"!=typeof n,p=k.styleHooks,b=n,j=b,q=1;if(m&&(f={},b=j[0],l=0,!(q=j.length)))return f;if(!e||e.documentElement)return f||"";h=e.style,i?c=h:(c=e.ownerDocument.defaultView.getComputedStyle(e,null))||(i=!0,c=h);do{if((d=p[b])||(p[b]=d={name:a.normalize(b)}),g=d.get?d.get(e,k,i,c):c[d.name],!m)return g;f[b]=g,b=j[++l]}while(l<q);return f},getStyleValue:function(a){return this.dom.style.getPropertyValue(a)},getTop:function(a){return a?this.getLocalY():this.getY()},getValue:function(b){var a=this.dom.value;return b?parseInt(a,10):a},getViewSize:function(){var c=this.dom;return c===b||c===b.body?{width:a.getViewportWidth(),height:a.getViewportHeight()}:{width:c.clientWidth,height:c.clientHeight}},getVisibilityMode:function(){var c=this.getData(),b=c.visibilityMode;return void 0===b&&(c.visibilityMode=b=a.DISPLAY),b},getWidth:function(g,e){var c,a,d,b=this,f=b.dom;return b.isStyle("display","none")?0:(a=Ext.supports.BoundingClientRect?(c=f.getBoundingClientRect(),a=b.vertical&&!Ext.supports.RotatedBoundingClientRect?c.bottom-c.top:c.right-c.left,e?a:Math.ceil(a)):f.offsetWidth,Ext.supports.Direct2DBug&&!b.vertical&&(d=b.adjustDirect2DDimension(w),e?a+=d:0<d&&d<.5&&a++),g&&(a-=b.getBorderWidth("lr")+b.getPadding("lr")),a<0?0:a)},getX:function(){return this.getXY()[0]},getXY:function(){var a,c,g=Math.round,d=this.dom,e=0,f=0;if(d!==b&&d!==b.body){try{a=d.getBoundingClientRect()}catch(ah){a={left:0,top:0}}e=g(a.left),f=g(a.top),e+=(c=Ext.getDoc().getScroll()).left,f+=c.top}return[e,f]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},hasCls:function(b){var a=this.getData();return a.isSynchronized||this.synchronize(),a.classMap.hasOwnProperty(b)},hide:function(){return this.setVisible(!1),this},insertAfter:function(a){return(a=Ext.getDom(a)).parentNode.insertBefore(this.dom,a.nextSibling),this},insertBefore:function(a){return(a=Ext.getDom(a)).parentNode.insertBefore(this.dom,a),this},insertFirst:function(a,b){return(a=a||{}).nodeType||a.dom||"string"==typeof a?(a=Ext.getDom(a),this.dom.insertBefore(a,this.dom.firstChild),b?a:Ext.get(a)):this.createChild(a,this.dom.firstChild,b)},insertHtml:function(c,d,b){var a=Ext.DomHelper.insertHtml(c,this.dom,d);return b?Ext.get(a):a},insertSibling:function(a,j,e){var b,f,h,d,c=this,i=Ext.DomHelper,g="after"===(j||"before").toLowerCase();if(Ext.isIterable(a)){if(h=a.length,f=Ext.fly(document.createDocumentFragment()),Ext.isArray(a))for(d=0;d<h;d++)b=f.appendChild(a[d],e);else{for(d=0;d<h;d++)f.dom.appendChild(b=a[0]);!1===e&&(b=Ext.get(b))}return c.dom.parentNode.insertBefore(f.dom,g?c.dom.nextSibling:c.dom),b}return(a=a||{}).nodeType||a.dom?(b=c.dom.parentNode.insertBefore(Ext.getDom(a),g?c.dom.nextSibling:c.dom),e||(b=Ext.get(b))):b=g&&!c.dom.nextSibling?i.append(c.dom.parentNode,a,!e):i[g?"insertAfter":"insertBefore"](c.dom,a,!e),b},is:function(b){var c=this.dom;return!b||!!c.tagName&&(Ext.isFunction(b)?b(c):c[Ext.supports.matchesSelector](b))},isAncestor:function(d){var c=!1,b=this.dom,a=Ext.getDom(d);if(b&&a){if(b.contains)return b.contains(a);if(b.compareDocumentPosition)return!!(16&b.compareDocumentPosition(a));for(;a=a.parentNode;)c=a===b||c}return c},isPainted:Ext.browser.is.IE?function(){var a=this.dom;return Boolean(a&&0!==a.offsetHeight&&0!==a.offsetWidth)}:function(){var a=this.dom;return Boolean(a&&a.offsetParent)},isScrollable:function(){var a=this.dom;return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth},isStyle:function(a,b){return this.getStyle(a)===b},isVisible:function(c){var b,a=this.dom;if(!a)return!1;for(s=s||new Ext.dom.Fly,b=a.ownerDocument.documentElement;a!==b;a=a.parentNode){if(!a||11===a.nodeType||s.attach(a).isStyle("visibility","hidden")||s.isStyle(I,x))return!1;if(!c)break}return!0},last:function(b,a){return this.matchNode("previousSibling","lastChild",b,a)},maskIframes:function(){var a=document.getElementsByTagName("iframe");Ext.each(a,function(b){Ext.fly(b.parentNode).mask().setStyle("background-color","transparent")})},matchNode:function(f,e,b,d){var a,c=this.dom;if(!c)return null;for(a=c[e];a;){if(1===a.nodeType&&(!b||Ext.fly(a,"_matchNode").is(b)))return d?a:Ext.get(a);a=a[f]}return null},next:function(b,a){return this.matchNode("nextSibling","nextSibling",b,a)},parent:function(b,a){return this.matchNode("parentNode","parentNode",b,a)},position:function(b,c,d,e){var a=this;"BODY"!==a.dom.tagName&&(!b&&a.isStyle(u,"static")?a.setStyle(u,"relative"):b&&a.setStyle(u,b),c&&a.setStyle("z-index",c),(d||e)&&a.setXY([d||!1,e||!1]))},prev:function(b,a){return this.matchNode("previousSibling","previousSibling",b,a)},query:function(a,d,i){var f,k,j,g,e,b,c,h=this.dom;if(!h)return null;for(d=!1!==d,i||(f=[]),b=0,k=(a=a.split(",")).length;b<k;b++)if("string"==typeof a[b]){if(i)return g=h.querySelector(a[b]),d?g:Ext.get(g);for(c=0,j=(e=h.querySelectorAll(a[b])).length;c<j;c++)f.push(d?e[c]:Ext.get(e[c]))}return f},radioCls:function(a){var b,d=this.dom.parentNode.childNodes;a=Ext.isArray(a)?a:[a];for(var c=0,e=d.length;c<e;c++)(b=d[c])&&1===b.nodeType&&Ext.fly(b).removeCls(a);return this.addCls(a)},redraw:function(){var b=this.dom,a=b.style;a.display="none",b.offsetHeight,a.display=""},remove:function(){this.destroy()},removeChild:function(a){return this.dom.removeChild(Ext.getDom(a)),this},removeCls:function(b,d,e){var l,m,j,h,f,n,a,c=this,g=c.getData();if(!b)return c;for(g.isSynchronized||c.synchronize(),m=c.dom,j=g.classMap,h=g.classList,d=d?d+i:"",e=e?i+e:"","string"==typeof b&&(b=b.split(k)),f=0,n=b.length;f<n;f++)(a=b[f])&&j[a=d+a+e]&&(delete j[a],Ext.Array.remove(h,a),l=!0);return l&&(m.className=h.join(" ")),c},repaint:function(){var a=this;return a.addCls(Ext.baseCSSPrefix+"repaint"),Ext.defer(function(){a.dom&&Ext.fly(a.dom).removeCls(Ext.baseCSSPrefix+"repaint")},1),a},replace:function(a,e){var b=(a=Ext.getDom(a)).parentNode,d=a.id,c=this.dom;return!1!==e&&d&&Ext.cache[d]?(b.insertBefore(c,a),Ext.get(a).destroy()):b.replaceChild(c,a),this},replaceCls:function(b,a,g,d){var o,f,m,c,l,e,n,h=this,j=h.getData();if(!b&&!a)return h;for(b=b||[],a=a||[],j.isSynchronized||h.synchronize(),d=d||"",o=h.dom,f=j.classMap,m=j.classList,g=g?g+i:"",d=d?i+d:"","string"==typeof b&&(b=b.split(k)),"string"==typeof a&&(a=a.split(k)),c=0,l=b.length;c<l;c++)f[e=g+b[c]+d]&&(delete f[e],n=!0);for(c=0,l=a.length;c<l;c++)f[e=g+a[c]+d]||(n=f[e]=!0);return n&&(j.classList=m=Ext.Object.getKeys(f),o.className=m.join(" ")),h},replaceWith:function(b){var c,a=this,d=a.dom,e=d.parentNode,f=Ext.cache;return a.clearListeners(),c=b.nodeType||b.dom||"string"==typeof b?(b=Ext.get(b),e.insertBefore(b.dom,d)):Ext.DomHelper.insertBefore(d,b),e.removeChild(d),a.dom=c,a.isFly||(delete f[a.id],f[a.id=Ext.id(c)]=a),a},resolveListenerScope:function(b){var a=this.component;return a?a.resolveListenerScope(b):this},scroll:function(a,d,i){if(!this.isScrollable())return!1;a=a.charAt(0);var b,c,e=this,h=e.dom,g="r"===a||"l"===a?"left":"top",f=!1;return"l"!==a&&"t"!==a&&"u"!==a||(d=-d),(c="left"==g?(b=h.scrollLeft,e.constrainScrollLeft(b+d)):(b=h.scrollTop,e.constrainScrollTop(b+d)))!==b&&(this.scrollTo(g,c,i),f=!0),f},scrollBy:function(a,b,d){var c=this,e=c.dom;return a.length?(d=b,b=a[1],a=a[0]):"number"!=typeof a&&(d=b,b=a.y,a=a.x),a&&c.scrollTo("left",c.constrainScrollLeft(e.scrollLeft+a),d),b&&c.scrollTo("top",c.constrainScrollTop(e.scrollTop+b),d),c},scrollChildIntoView:function(b,a){Ext.fly(b).scrollIntoView(this,a)},scrollIntoView:function(a,d,c,b){return a=Ext.getDom(a)||Ext.getBody().dom,this.doScrollIntoView(a,d,c,b,"getScrollLeft","scrollTo")},scrollTo:function(g,d,c){var a,b=this,e=ae.test(g)?"scrollTop":"scrollLeft",f=b.dom;return c&&b.anim?((a={to:{}}).to[e]=d,Ext.isObject(c)&&Ext.applyIf(a,c),b.animate(a)):(f[e]=d,f[e]=d),b},select:function(b,d){var c,a;return"string"==typeof b?a=this.query(b,!d):(a=b,c=!0),d?new Ext.CompositeElement(a,!c):new Ext.CompositeElementLite(a,!0)},selectNode:function(a,b){return this.query(a,b,!0)},set:function(d,f){var a,b,e=this,c=e.dom;for(a in d)d.hasOwnProperty(a)&&(b=d[a],"style"===a?e.applyStyles(b):"cls"===a?c.className=b:!1!==f?void 0===b?c.removeAttribute(a):c.setAttribute(a,b):c[a]=b);return e},setBottom:function(b){return this.dom.style.bottom=a.addUnits(b),this},setCls:function(b){var c,g,f,a,e=this,d=e.getData();for(d.isSynchronized||e.synchronize(),"string"==typeof b&&(b=b.split(k)),d.classList=a=b.slice(),d.classMap=f={},c=0,g=a.length;c<g;c++)f[a[c]]=!0;e.dom.className=a.join(" ")},setDisplayed:function(b){var a=this;return"boolean"==typeof b&&(b=b?a._getDisplay():x),a.setStyle(I,b),(a.shadow||a.shim)&&a.setUnderlaysVisible(b!==x),a},setHeight:function(c){var b=this;return b.dom.style[J]=a.addUnits(c),(b.shadow||b.shim)&&b.syncUnderlays(),b},setHtml:function(a){return this.dom&&(this.dom.innerHTML=a),this},setId:function(b){var a=this,c=a.id,d=Ext.cache;return c&&delete d[c],a.dom.id=b,d[a.id=b]=a},setLeft:function(c){var b=this;return b.dom.style.left=a.addUnits(c),(b.shadow||b.shim)&&b.syncUnderlays(),b},setLocalX:function(c){var a=this,b=a.dom.style;return b.right="auto",b.left=null===c?"auto":c+"px",(a.shadow||a.shim)&&a.syncUnderlays(),a},setLocalXY:function(a,d){var c=this,b=c.dom.style;return b.right="auto",a&&a.length&&(d=a[1],a=a[0]),null===a?b.left="auto":void 0!==a&&(b.left=a+"px"),null===d?b.top="auto":void 0!==d&&(b.top=d+"px"),(c.shadow||c.shim)&&c.syncUnderlays(),c},setLocalY:function(b){var a=this;return a.dom.style.top=null===b?"auto":b+"px",(a.shadow||a.shim)&&a.syncUnderlays(),a},setMargin:function(a){var b=this.dom.style;a||0===a?(a=this.self.unitizeBox(!0===a?5:a),b.setProperty("margin",a,"important")):(b.removeProperty("margin-top"),b.removeProperty("margin-right"),b.removeProperty("margin-bottom"),b.removeProperty("margin-left"))},setMaxHeight:function(b){return this.dom.style["max-height"]=a.addUnits(b),this},setMaxWidth:function(b){return this.dom.style["max-width"]=a.addUnits(b),this},setMinHeight:function(b){return this.dom.style["min-height"]=a.addUnits(b),this},setMinWidth:function(b){return this.dom.style["min-width"]=a.addUnits(b),this},setOpacity:function(b){var a=this;return a.dom&&a.setStyle("opacity",b),a},setPadding:function(a){var b=this.dom.style;a||0===a?(a=this.self.unitizeBox(!0===a?5:a),b.setProperty("padding",a,"important")):(b.removeProperty("padding-top"),b.removeProperty("padding-right"),b.removeProperty("padding-bottom"),b.removeProperty("padding-left"))},setRight:function(b){return this.dom.style.right=a.addUnits(b),this},setScrollLeft:function(a){return this.dom.scrollLeft=a,this},setScrollTop:function(a){return this.dom.scrollTop=a,this},setSize:function(b,d){var c=this,e=c.dom.style;return Ext.isObject(b)&&(d=b.height,b=b.width),e.width=a.addUnits(b),e.height=a.addUnits(d),(c.shadow||c.shim)&&c.syncUnderlays(),c},setSizeState:function(c){var b,a,d=this;return a=!0===c?(b=q,[p,n]):!1===c?(b=p,[q,n]):null===c?(b=n,[q,p]):[q,p,n],b&&d.addCls(b),d.removeCls(a),d},setStyle:function(h,c){var b,e=this,f=e.dom,g=e.styleHooks,i=f.style,d=h;if("string"==typeof d)(b=g[d])||(g[d]=b={name:a.normalize(d)}),c=null==c?"":c,b.set?b.set(f,c,e):i[b.name]=c,b.afterSet&&b.afterSet(f,c,e);else for(d in h)h.hasOwnProperty(d)&&((b=g[d])||(g[d]=b={name:a.normalize(d)}),c=null==(c=h[d])?"":c,b.set?b.set(f,c,e):i[b.name]=c,b.afterSet&&b.afterSet(f,c,e));return e},setText:function(a){this.dom.textContent=a},setTop:function(c){var b=this;return b.dom.style.top=a.addUnits(c),(b.shadow||b.shim)&&b.syncUnderlays(),b},setUnderlaysVisible:function(c){var a=this.shadow,b=this.shim;a&&!a.disabled&&(c?a.show():a.hide()),b&&!b.disabled&&(c?b.show():b.hide())},setVisibility:function(b){var a=this.dom.style;b?a.removeProperty("visibility"):a.setProperty("visibility","hidden","important")},setVisibilityMode:function(a){return this.getData().visibilityMode=a,this},setVisible:function(d){var b=this,c=d?"removeCls":"addCls";switch(b.getVisibilityMode()){case a.DISPLAY:b.removeCls([m,o,r]),b[c](j);break;case a.VISIBILITY:b.removeCls([j,o,r]),b[c](m);break;case a.OFFSETS:b.removeCls([m,j,r]),b[c](o);break;case a.CLIP:b.removeCls([m,j,o]),b[c](r)}return(b.shadow||b.shim)&&b.setUnderlaysVisible(d),b},setWidth:function(c){var b=this;return b.dom.style[w]=a.addUnits(c),(b.shadow||b.shim)&&b.syncUnderlays(),b},setX:function(a){return this.setXY([a,!1])},setXY:function(e){var b,a=this,c=a.translatePoints(e),d=a.dom.style;for(b in a.position(),d.right="auto",c)isNaN(c[b])||(d[b]=c[b]+"px");return(a.shadow||a.shim)&&a.syncUnderlays(),a},setY:function(a){return this.setXY([!1,a])},setZIndex:function(b){var a=this;return a.shadow&&a.shadow.setZIndex(b),a.shim&&a.shim.setZIndex(b),a.setStyle("z-index",b)},show:function(){return this.setVisible(!0),this},swapCls:function(g,f,b,a){void 0===b&&(b=!0);var e=this,d=b?g:f,c=b?f:g;return c&&e.removeCls(a?a+"-"+c:c),d&&e.addCls(a?a+"-"+d:d),e},synchronize:function(){var a,b,i,d=this,h=d.dom,e={},f=h.className,c=d.getData();if(f&&0<f.length)for(b=0,i=(a=h.className.split(N)).length;b<i;b++)e[a[b]]=!0;else a=[];return c.classList=a,c.classMap=e,c.isSynchronized=!0,d},syncUnderlays:function(){var d,g,h,f,e,a=this,b=a.shadow,c=a.shim,i=a.dom;a.isVisible()&&(g=(d=a.getXY())[0],h=d[1],f=i.offsetWidth,e=i.offsetHeight,b&&!b.hidden&&b.realign(g,h,f,e),c&&!c.hidden&&c.realign(g,h,f,e))},toggleCls:function(a,b){return"boolean"!=typeof b&&(b=!this.hasCls(a)),b?this.addCls(a):this.removeCls(a)},toggle:function(){return this.setVisible(!this.isVisible()),this},translate:function(){var a="webkitTransform"in b.createElement("div").style?"webkitTransform":"transform";return function(b,c,d){this.dom.style[a]="translate3d("+(b||0)+"px, "+(c||0)+"px, "+(d||0)+"px)"}}(),unmaskIframes:function(){var a=document.getElementsByTagName("iframe");Ext.each(a,function(b){Ext.fly(b.parentNode).unmask()})},unwrap:function(){var b,a,f,c,h,g=this.dom,e=g.parentNode,d=Ext.fly(Ext.Element.getActiveElement());return(a=Ext.cache[d.id])&&(d=a),this.contains(d)&&(a&&a.suspendFocusEvents(),f=!0),e?(b=e.parentNode,f&&(h=b.getAttribute("tabIndex"),(c=Ext.fly(b)).set({tabIndex:-1}),c.suspendFocusEvents(),c.focus()),b.insertBefore(g,e),b.removeChild(e)):(b=document.createDocumentFragment()).appendChild(g),f&&(a?(a.focus(),a.resumeFocusEvents()):Ext.fly(d).focus(),c&&(c.resumeFocusEvents(),c.set({tabIndex:h}))),this},up:function(a,c,b){return this.findParentNode(a,c,!b)},update:function(a){return this.setHtml(a)},wrap:function(k,e,f){var b,d,g,i=this.dom,a=Ext.DomHelper.insertBefore(i,k||{tag:"div"},!e),h=a,c=Ext.Element.getActiveElement();return(b=Ext.cache[c.id])&&(c=b),f&&(h=a.selectNode(f,e)),this.contains(c)&&(b&&b.suspendFocusEvents(),g=a.dom.getAttribute("tabIndex"),a.set({tabIndex:-1}),a.suspendFocusEvents(),a.focus(),d=!0),h.appendChild(i),d&&(b?(b.focus(),b.resumeFocusEvents()):Ext.fly(c).focus(),a.resumeFocusEvents(),a.set({tabIndex:g})),a},privates:{doAddListener:function(b,l,k,c,j,i,h){var e,g,f,d=this;b=Ext.canonicalEventName(b),d.blockedEvents[b]||(e=d.mixins.observable.doAddListener,c=c||{},d.longpressEvents[b]&&d.disableTouchContextMenu(),!1===a.useDelegatedEvents&&(c.delegated=c.delegated||!1),!1!==c.translate&&((g=d.additiveEvents[b])&&(c.type=b,b=g,e.call(d,b,l,k,c,j,i,h)),(f=d.eventMap[b])&&(c.type=c.type||b,b=f)),e.call(d,b,l,k,c,j,i,h),delete c.type)},doRemoveListener:function(b,h,g){var c,e,f,d,a=this;a.blockedEvents[b]||(c=a.mixins.observable.doRemoveListener,a.longpressEvents[b]&&(d=this._contextMenuListenerRemover)&&d.destroy(),(f=a.additiveEvents[b])&&(b=f,c.call(a,b,h,g)),(e=a.eventMap[b])&&c.call(a,e,h,g),c.call(a,b,h,g))},_initEvent:function(a){return this.events[a]=new Ext.dom.ElementEvent(this,a)},_getDisplay:function(){var b=this.getData(),a=b[A];return void 0===a&&(b[A]=a=""),a},_getPublisher:function(c){var b=Ext.event.publisher.Publisher,a=b.publishersByEvent[c];return a&&(this.dom!==window||"resize"!==c)||(a=b.publishers.dom),a},isFocusSuspended:function(){return!!this.getData().suspendFocusEvents},suspendFocusEvents:function(){this.isFly||this.suspendEvent("focus","blur"),this.getData().suspendFocusEvents=!0},resumeFocusEvents:function(){function resumeFn(){var a;this.destroyed||((a=this.getData())&&(a.suspendFocusEvents=!1),this.isFly||this.resumeEvent("focus","blur"))}!this.destroyed&&this.getData().suspendFocusEvents&&(Ext.isIE?Ext.asap(resumeFn,this):resumeFn.call(this))}},deprecated:{"5.0":{methods:{cssTranslate:null,getHTML:"getHtml",getOuterHeight:null,getOuterWidth:null,getPageBox:function(l){var c=this.dom,d="BODY"===c.nodeName,k=d?a.getViewportWidth():c.offsetWidth,g=d?a.getViewportHeight():c.offsetHeight,b=this.getXY(),j=b[1],i=b[0]+k,f=b[1]+g,h=b[0];return l?new Ext.util.Region(j,i,f,h):{left:h,top:j,width:k,height:g,right:i,bottom:f}},getScrollParent:null,isDescendent:null,isTransparent:function(b){var a=this.getStyle(b);return!!a&&Q.test(a)},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml",setTopLeft:null}}}}},function(d){var e,k=document,m=d.prototype,w=Ext.supports,n="pointerdown",o="pointermove",p="pointerup",q="pointercancel",r="MSPointerDown",s="MSPointerMove",t="MSPointerUp",z="MSPointerCancel",f="mousedown",g="mousemove",b="mouseup",A="mouseover",B="mouseout",h="touchstart",i="touchmove",j="touchend",l="touchcancel",x="click",v="dblclick",y="tap",u="doubletap",a=m.eventMap={},c=m.additiveEvents={},C=Ext.id;Ext.id=function(f,e){var a,b=Ext.getDom(f,!0);return b?(a=b.id)||(a=C(null,e||d.prototype.identifiablePrefix),Ext.isSandboxed&&(a=(Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-"))+a),b.id=a):a=C(f,e),a},w.PointerEvents?(a[f]=n,a[g]=o,a[b]=p,a[h]=n,a[i]=o,a[j]=p,a[l]=q,a[x]=y,a[v]=u,a[A]="pointerover",a[B]="pointerout",a.mouseenter="pointerenter",a.mouseleave="pointerleave"):w.MSPointerEvents?(a[n]=r,a[o]=s,a[p]=t,a[q]=z,a[f]=r,a[g]=s,a[b]=t,a[h]=r,a[i]=s,a[j]=t,a[l]=z,a[x]=y,a[v]=u,a[A]="MSPointerOver",a[B]="MSPointerOut"):w.TouchEvents?(a[n]=h,a[o]=i,a[p]=j,a[q]=l,a[f]=h,a[g]=i,a[b]=j,a[x]=y,a[v]=u,Ext.isWebKit&&Ext.os.is.Desktop&&(a[h]=f,a[i]=g,a[j]=b,a[l]=b,c[f]=f,c[g]=g,c[b]=b,c[h]=h,c[i]=i,c[j]=j,c[l]=l,c[n]=f,c[o]=g,c[p]=b,c[q]=b)):(a[n]=f,a[o]=g,a[p]=b,a[q]=b,a[h]=f,a[i]=g,a[j]=b,a[l]=b),Ext.isWebKit&&(a.transitionend=Ext.browser.getVendorProperyName("transitionEnd"),a.animationstart=Ext.browser.getVendorProperyName("animationStart"),a.animationend=Ext.browser.getVendorProperyName("animationEnd")),Ext.supports.MouseWheel||Ext.isOpera||(a.mousewheel="DOMMouseScroll"),(e=m.$eventOptions=Ext.Object.chain(m.$eventOptions)).translate=e.capture=e.delegate=e.delegated=e.stopEvent=e.preventDefault=e.stopPropagation=e.element=1,m.styleHooks.opacity={name:"opacity",afterSet:function(d,b,c){var a=c.shadow;a&&a.setOpacity(b)}},m.getTrueXY=m.getXY,Ext.select=d.select,Ext.query=d.query,Ext.apply(Ext,{get:function(a){return d.get(a)},getDom:function(a){return a&&k?"string"==typeof a?Ext.getElementById(a):"dom"in a?a.dom:a:null},getBody:function(){if(!Ext._bodyEl){if(!k.body)throw new Error("[Ext.getBody] document.body does not yet exist");Ext._bodyEl=Ext.get(k.body)}return Ext._bodyEl},getHead:function(){return Ext._headEl||(Ext._headEl=Ext.get(k.head||k.getElementsByTagName("head")[0])),Ext._headEl},getDoc:function(){return Ext._docEl||(Ext._docEl=Ext.get(k)),Ext._docEl},getWin:function(){return Ext._winEl||(Ext._winEl=Ext.get(window)),Ext._winEl},removeNode:function(a){var b,d=(a=a.dom||a)&&a.id,c=Ext.cache[d];c?c.destroy():!a||3!==a.nodeType&&"BODY"===a.tagName.toUpperCase()||(b=a.parentNode)&&b.removeChild(a)}}),Ext.isGarbage=function(a){return a&&1===a.nodeType&&"BODY"!==a.tagName&&"HTML"!==a.tagName&&(!a.parentNode||!a.offsetParent&&(Ext.isIE8?k.all[a.id]:k.getElementById(a.id))!==a&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(a)))},(Ext.os.is.Android||Ext.os.is.Windows&&Ext.supports.Touch)&&Ext.onReady(function(){var a=Ext.getWin();d._windowWidth=d._viewportWidth=window.innerWidth,d._windowHeight=d._viewportHeight=window.innerHeight,a.on({focusin:"_onWindowFocusChange",focusout:"_onWindowFocusChange",pointerup:"_onWindowFocusChange",capture:!0,delegated:!1,delay:1,scope:d}),a.on({resize:"_onWindowResize",priority:2e3,scope:d})})}),Ext.define("Ext.dom.Fly",{extend:Ext.dom.Element,alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:!0,constructor:function(a){this.dom=a,this.el=this},attach:function(b){var a=this;return b?(a.dom=b,Ext.cache[b.id]||(a.getData().isSynchronized=!1),a):a.detach()},detach:function(){this.dom=null},addListener:null,removeListener:null},function(b){var a={};b.cache=a,Ext.fly=function(c,e){var f,g,d=null,h=Ext.fly;return e=e||h.caller&&h.caller.$name||"_global",(c=Ext.getDom(c))&&(f=c.nodeType,(b.prototype.validNodeTypes[f]||!f&&c.window==c)&&((d=Ext.cache[c.id])&&d.dom===c||((d=a[e]||(a[e]=new b)).dom=c,(g=d.getData(!0))&&(g.isSynchronized=!1)))),d}}),Ext.define("Ext.dom.CompositeElementLite",{alternateClassName:["Ext.CompositeElementLite"],isComposite:!0,isLite:!0,statics:{importElementMethods:function(){var b=Ext.dom.Element,a=this.prototype;Ext.Object.each(b.prototype,function(b,c){"function"!=typeof c||a[b]||(a[b]=function(){return this.invoke(b,arguments)})})}},constructor:function(a,b){b?this.elements=a||[]:(this.elements=[],this.add(a))},getElement:function(b){return(this._fly||(this._fly=new Ext.dom.Fly)).attach(b)},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(a,e){var b,c,d=this.elements;if(!a)return this;for("string"==typeof a?a=Ext.fly(e||document).query(a):a.isComposite?a=a.elements:Ext.isIterable(a)||(a=[a]),b=0,c=a.length;b<c;++b)d.push(this.transformElement(a[b]));return this},invoke:function(g,f){var d,c,a,b=this,e=b.elements,h=e.length;if(0!==a)for(d=(b.isLite?Ext.dom.Fly:Ext.dom.Element).prototype,a=0;a<h;a++)(c=e[a])&&d[g].apply(b.getElement(c),f);return b},item:function(c){var b=this.elements[c],a=null;return b&&(a=this.getElement(b)),a},slice:function(a,b){return Ext.Array.slice(this.elements,a,b)},each:function(g,e){var b,a,c=this,d=c.elements,f=d.length;for(b=0;b<f&&(!(a=d[b])||(a=this.getElement(a),!1!==g.call(e||a,a,c,b)));b++);return c},fill:function(b){var a=this;return a.elements=[],a.add(b),a},insert:function(a,b){Ext.Array.insert(this.elements,a,b)},filter:function(e){for(var a,b=this,f=b.elements,i=f.length,g=[],d=0,h="function"==typeof e;d<i;d++)(a=f[d])&&(a=b.getElement(a),(h?!1!==e.call(a,a,b,d):a.is(e))&&g.push(b.transformElement(a)));return b.elements=g,b},indexOf:function(a){return Ext.Array.indexOf(this.elements,this.transformElement(a))},replaceElement:function(d,a,e){var b,c=isNaN(d)?this.indexOf(d):d;return-1<c&&(a=Ext.getDom(a),e&&((b=this.elements[c]).parentNode.insertBefore(a,b),Ext.removeNode(b)),Ext.Array.splice(this.elements,c,1,a)),this},clear:function(c){var b=this.elements,a=b.length-1;if(c)for(;0<=a;a--)Ext.removeNode(b[a]);this.elements=[]},addElements:function(a,d){if(!a)return this;"string"==typeof a&&(a=Ext.dom.Element.selectorFunction(a,d));var b,e=this.elements,c=a.length;for(b=0;b<c;b++)e.push(Ext.get(a[b]));return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return-1!=this.indexOf(a)},removeElement:function(b,g){b=[].concat(b);var a,c,d,f=this,e=f.elements,h=b.length;for(d=0;d<h;d++)(c=e[a=b[d]]||e[a=f.indexOf(a)])&&(g&&(c.dom?c.destroy():Ext.removeNode(c)),Ext.Array.erase(e,a,1));return f},destroy:function(){return this.invoke("destroy",arguments)}},function(a){var b=a.prototype;a.importElementMethods(),b.on=b.addListener}),Ext.define("Ext.util.Filter",{isFilter:!0,config:{property:null,value:null,filterFn:null,id:null,anyMatch:!1,exactMatch:!1,caseSensitive:!1,disabled:!1,disableOnEmpty:!1,operator:null,root:null,serializer:null,convert:null},scope:null,$configStrict:!1,statics:{createFilterFn:function(a){return a?function(f){var b,c,e=a.isCollection?a.items:a,g=e.length,d=!0;for(b=0;d&&b<g;b++)(c=e[b]).getDisabled()||(d=c.filter(f));return d}:Ext.returnTrue},isInvalid:function(a){if(!a.filterFn){if(!a.property)return"A Filter requires either a property or a filterFn to be set";if(!a.hasOwnProperty("value")&&!a.operator)return"A Filter requires either a property and value, or a filterFn to be set"}return!1}},constructor:function(a){this.initConfig(a)},preventConvert:{in:1,notin:1},filter:function(e){var a=this,d=a._filterFn||a.getFilterFn(),c=a.getConvert(),b=a._value;return a._filterValue=b,a.isDateValue=Ext.isDate(b),a.isDateValue&&(a.dateValue=b.getTime()),c&&!a.preventConvert[a.getOperator()]&&(a._filterValue=c.call(a.scope||a,b)),d.call(a.scope||a,e)},getId:function(){var a=this._id;return a||(a=(a=this.getProperty())||Ext.id(null,"ext-filter-"),this._id=a),a},getFilterFn:function(){var c,b=this,a=b._filterFn;return a||(a=(c=b.getOperator())?b.operatorFns[c]:b.createRegexFilter(),b._filterFn=a),a},createRegexFilter:function(){var a=this,b=!!a.getAnyMatch(),d=!!a.getExactMatch(),e=a.getValue(),c=Ext.String.createRegex(e,!b,!b&&d,!a.getCaseSensitive());return function(d){var b=a.getPropertyValue(d);return c?c.test(b):null==b}},getPropertyValue:function(a){var b=this._root;return(null==b?a:a[b])[this._property]},getState:function(){var b,c=this.getInitialConfig(),a={};for(b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return delete a.root,a.value=this.getValue(),a},getScope:function(){return this.scope},serialize:function(){var a=this.getState(),b=this.getSerializer();return delete a.id,delete a.serializer,b&&b.call(this,a),a},updateOperator:function(){this._filterFn=null},updateValue:function(a){this._filterFn=null,this.getDisableOnEmpty()&&this.setDisabled(Ext.isEmpty(a))},updateDisableOnEmpty:function(b){var a=!1;b&&(a=Ext.isEmpty(this.getValue())),this.setDisabled(a)},privates:{getCandidateValue:function(e,f,d){var b=this,c=b._convert,a=b.getPropertyValue(e);return c?a=c.call(b.scope||b,a):d||(a=Ext.coerce(a,f)),a}}},function(){var a=this.prototype.operatorFns={"<":function(b){var a=this._filterValue;return this.getCandidateValue(b,a)<a},"<=":function(b){var a=this._filterValue;return this.getCandidateValue(b,a)<=a},"=":function(a){var b=this,c=b._filterValue;return a=b.getCandidateValue(a,c),b.isDateValue&&a instanceof Date&&(a=a.getTime(),c=b.dateValue),a==c},"===":function(a){var b=this,c=b._filterValue;return a=b.getCandidateValue(a,c,!0),b.isDateValue&&a instanceof Date&&(a=a.getTime(),c=b.dateValue),a===c},">=":function(b){var a=this._filterValue;return this.getCandidateValue(b,a)>=a},">":function(b){var a=this._filterValue;return this.getCandidateValue(b,a)>a},"!=":function(a){var b=this,c=b._filterValue;return a=b.getCandidateValue(a,c),b.isDateValue&&a instanceof Date&&(a=a.getTime(),c=b.dateValue),a!=c},"!==":function(a){var b=this,c=b._filterValue;return a=b.getCandidateValue(a,c,!0),b.isDateValue&&a instanceof Date&&(a=a.getTime(),c=b.dateValue),a!==c},in:function(b){var a=this._filterValue;return Ext.Array.contains(a,this.getCandidateValue(b,a))},notin:function(b){var a=this._filterValue;return!Ext.Array.contains(a,this.getCandidateValue(b,a))},like:function(b){var a=this._filterValue;return a&&-1<this.getCandidateValue(b,a).toLowerCase().indexOf(a.toLowerCase())}};a["=="]=a["="],a.gt=a[">"],a.ge=a[">="],a.lt=a["<"],a.le=a["<="],a.eq=a["="],a.ne=a["!="]}),Ext.define("Ext.util.Observable",{extend:Ext.mixin.Observable,$applyConfigs:!0},function(a){var b=Ext.mixin.Observable;a.releaseCapture=b.releaseCapture,a.capture=b.capture,a.captureArgs=b.captureArgs,a.observe=a.observeClass=b.observe}),Ext.define("Ext.util.AbstractMixedCollection",{mixins:{observable:Ext.util.Observable},isMixedCollection:!0,generation:0,indexGeneration:0,constructor:function(b,c){var a=this;1===arguments.length&&Ext.isObject(b)?(a.initialConfig=b,Ext.apply(a,b)):(a.allowFunctions=!0===b,c&&(a.getKey=c),a.initialConfig={allowFunctions:a.allowFunctions,getKey:a.getKey}),a.items=[],a.map={},a.keys=[],a.indexMap={},a.length=0,a.mixins.observable.constructor.call(a)},destroy:function(){var a=this;a.items=a.map=a.keys=a.indexMap=null,a.callParent()},allowFunctions:!1,add:function(b,d){var c=this.length;return 1===arguments.length?this.insert(c,b):this.insert(c,b,d)},getKey:function(a){return a.id},replace:function(b,c){var d,e,a=this;return 1==arguments.length&&(c=b,b=a.getKey(c)),d=a.map[b],null==b||void 0===d?a.add(b,c):(a.generation++,e=a.indexOfKey(b),a.items[e]=c,a.map[b]=c,a.hasListeners.replace&&a.fireEvent("replace",b,d,c),c)},reorder:function(e){var d,b=this,f=b.items,a=0,h=f.length,c=[],g=[];for(d in b.suspendEvents(),e)c[e[d]]=f[d];for(a=0;a<h;a++)null==e[a]&&g.push(f[a]);for(a=0;a<h;a++)null==c[a]&&(c[a]=g.shift());b.clear(),b.addAll(c),b.resumeEvents()},updateKey:function(b,c){var g,a=this,e=a.map,d=a.indexOfKey(b),f=a.indexMap;-1<d&&(g=e[b],delete e[b],delete f[b],e[c]=g,f[c]=d,a.keys[d]=c,a.indexGeneration=++a.generation)},addAll:function(a){var b,c=this;if(1<arguments.length||Ext.isArray(a))c.insert(c.length,1<arguments.length?arguments:a);else for(b in a)a.hasOwnProperty(b)&&(!c.allowFunctions&&"function"==typeof a[b]||c.add(b,a[b]))},each:function(f,e){for(var b,c=Ext.Array.push([],this.items),a=0,d=c.length;a<d&&(b=c[a],!1!==f.call(e||b,b,a,d));a++);},eachKey:function(f,e){for(var b=this.keys,d=this.items,a=0,c=b.length;a<c;a++)f.call(e||window,b[a],d[a],a,c)},findBy:function(f,c){for(var d=this.keys,b=this.items,a=0,e=b.length;a<e;a++)if(f.call(c||window,b[a],d[a]))return b[a];return null},find:function(){return Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.util.MixedCollection: find has been deprecated. Use findBy instead."),this.findBy.apply(this,arguments)},insert:function(c,b,d){return Ext.isIterable(b)?this.doInsert(c,b,d):(2<arguments.length?this.doInsert(c,[b],[d]):this.doInsert(c,[b]))[0]},doInsert:function(f,e,d){var c,i,a,k,l,n,m,b=this,g=e.length,j=g,o=b.hasListeners.add,h={};if(null!=d)b.useLinearSearch=!0;else for(d=e,e=new Array(g),a=0;a<g;a++)e[a]=this.getKey(d[a]);for(b.suspendEvents(),a=0;a<g;a++)c=e[a],-1!==(i=b.indexOfKey(c))&&(i<f&&f--,b.removeAt(i)),null!=c&&(null!=h[c]&&(l=!0,j--),h[c]=a);if(b.resumeEvents(),l){for(c in n=e,m=d,e=new Array(j),d=new Array(j),a=0,h)e[a]=n[h[c]],d[a]=m[h[c]],a++;g=j}for(k=f===b.length&&b.indexGeneration===b.generation,Ext.Array.insert(b.items,f,d),Ext.Array.insert(b.keys,f,e),b.length+=g,b.generation++,k&&(b.indexGeneration=b.generation),a=0;a<g;a++,f++)null!=(c=e[a])&&(b.map[c]=d[a],k&&(b.indexMap[c]=f)),o&&b.fireEvent("add",f,d[a],c);return d},remove:function(d){var c,b,a=this;return-1!==(b=!a.useLinearSearch&&(c=a.getKey(d))?a.indexOfKey(c):Ext.Array.indexOf(a.items,d))&&a.removeAt(b)},removeAll:function(b){var c,a=this;if(b||a.hasListeners.remove)if(b)for(c=b.length-1;0<=c;--c)a.remove(b[c]);else for(;a.length;)a.removeAt(0);else a.length=a.items.length=a.keys.length=0,a.map={},a.indexMap={},a.generation++,a.indexGeneration=a.generation},removeAt:function(b){var d,c,a=this;return b<a.length&&0<=b&&(a.length--,d=a.items[b],Ext.Array.erase(a.items,b,1),void 0!==(c=a.keys[b])&&delete a.map[c],Ext.Array.erase(a.keys,b,1),a.hasListeners.remove&&a.fireEvent("remove",d,c),a.generation++,d)},removeRange:function(c,b){var i,f,d,e,g,h,a=this;if(c<a.length&&0<=c){for(b=b||1,b=(e=Math.min(c+b,a.length))-c,g=(h=e===a.length)&&a.indexGeneration===a.generation,d=c;d<e;d++)null!=(f=a.keys[d])&&(delete a.map[f],g&&delete a.indexMap[f]);return i=a.items[d-1],a.length-=b,a.generation++,g&&(a.indexGeneration=a.generation),h?a.items.length=a.keys.length=a.length:(a.items.splice(c,b),a.keys.splice(c,b)),i}return!1},removeAtKey:function(d){var a,b=this,c=b.keys;if(null!=d)return b.removeAt(b.indexOfKey(d));for(a=c.length-1;0<=a;a--)null==c[a]&&b.removeAt(a)},getCount:function(){return this.length},indexOf:function(b){var c,a=this;return null!=b?!a.useLinearSearch&&(c=a.getKey(b))?this.indexOfKey(c):Ext.Array.indexOf(a.items,b):-1},indexOfKey:function(a){return this.map.hasOwnProperty(a)?(this.indexGeneration!==this.generation&&this.rebuildIndexMap(),this.indexMap[a]):-1},rebuildIndexMap:function(){var a,b=this,d=b.indexMap={},c=b.keys,e=c.length;for(a=0;a<e;a++)d[c[a]]=a;b.indexGeneration=b.generation},get:function(a){var b=this,d=b.map[a],c=void 0!==d?d:"number"==typeof a?b.items[a]:void 0;return"function"!=typeof c||b.allowFunctions?c:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(a){var b;return null!=a&&(!this.useLinearSearch&&(b=this.getKey(a))?null!=this.map[b]:-1!==Ext.Array.indexOf(this.items,a))},containsKey:function(a){return this.map.hasOwnProperty(a)},clear:function(){var a=this;a.generation&&(a.length=0,a.items=[],a.keys=[],a.map={},a.indexMap={},a.generation++,a.indexGeneration=a.generation),a.hasListeners.clear&&a.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(f,h,c,a){var b,d=this.extractValues(f,h),g=d.length,e=0;for(a=a||0===a?a:g-1,b=c=c||0;b<=a;b++)e+=d[b];return e},collect:function(h,j,g){var a,c,b,e=this.extractValues(h,j),i=e.length,f={},d=[];for(b=0;b<i;b++)a=e[b],c=String(a),!g&&Ext.isEmpty(a)||f[c]||(f[c]=!0,d.push(a));return d},extractValues:function(c,b){var a=this.items;return b&&(a=Ext.Array.pluck(a,b)),Ext.Array.pluck(a,c)},hasRange:function(b,a){return a<this.length},getRange:function(b,a){var g,e,f=this.items,c=[],d=f.length;return d<1||(a<b&&(e=!0,g=b,b=a,a=g),b<0&&(b=0),(null==a||d<=a)&&(a=d-1),c=f.slice(b,a+1),e&&c.length&&c.reverse()),c},filter:function(a,e,d,c){var b=[];return Ext.isString(a)?b.push(new Ext.util.Filter({property:a,value:e,anyMatch:d,caseSensitive:c})):(Ext.isArray(a)||a instanceof Ext.util.Filter)&&(b=b.concat(a)),this.filterBy(Ext.util.Filter.createFilterFn(b))},filterBy:function(h,g){var b,a=this,c=new a.self(a.initialConfig),e=a.keys,d=a.items,f=d.length;for(c.getKey=a.getKey,b=0;b<f;b++)h.call(g||a,d[b],e[b])&&c.add(e[b],d[b]);return c.useLinearSearch=a.useLinearSearch,c},findIndex:function(d,a,e,c,b){return Ext.isEmpty(a,!1)?-1:(a=this.createValueMatcher(a,c,b),this.findIndexBy(function(b){return b&&a.test(b[d])},null,e))},findIndexBy:function(h,d,e){for(var b=this,f=b.keys,c=b.items,a=e||0,g=c.length;a<g;a++)if(h.call(d||b,c[a],f[a]))return a;return-1},createValueMatcher:function(a,e,c,d){if(!a.exec){var b=Ext.String.escapeRegex;a=String(a),!0===e?a=b(a):(a="^"+b(a),!0===d&&(a+="$")),a=new RegExp(a,c?"":"i")}return a},clone:function(){var a=this,b=new a.self(a.initialConfig);return b.add(a.keys,a.items),b.useLinearSearch=a.useLinearSearch,b}}),Ext.define("Ext.util.Sorter",{isSorter:!0,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:void 0},statics:{createComparator:function(b,a){return a=a||0,function(f,g){var d,c,e=b.isCollection?b.items:b,h=e.length;for(c=0;c<h;++c)if(d=e[c].sort(f,g))return d;return a&&a(f,g)}}},multiplier:1,constructor:function(a){this.initConfig(a)},getId:function(){var a=this._id;return a||(a=(a=this.getProperty())||Ext.id(null,"ext-sorter-"),this._id=a),a},sort:function(a,b){return this.multiplier*this.sortFn(a,b)},sortFn:function(d,e){var a,b,g=this,c=g._transform,f=g._root,h=g._property;return f&&(d=d[f],e=e[f]),a=d[h],b=e[h],c&&(a=c(a),b=c(b)),b<a?1:a<b?-1:0},applyDirection:function(a){return a||"ASC"},updateDirection:function(a){this.multiplier="DESC"===a.toUpperCase()?-1:1},updateProperty:function(a){a&&delete this.sortFn},updateSorterFn:function(a){this.sortFn=a},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){var a=this,b={root:a.getRoot(),property:a.getProperty(),direction:a.getDirection()};return a._id&&(b.id=a._id),b},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}}),Ext.define("Ext.util.Sortable",{isSortable:!0,$configPrefixed:!1,$configStrict:!1,config:{sorters:null},defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(a){return a&&a.length?function(d,e){for(var c=a[0].sort(d,e),f=a.length,b=1;!c&&b<f;b++)c=a[b].sort.call(a[b],d,e);return c}:function(){return 0}}},applySorters:function(b){var a=this.getSorters()||new Ext.util.MixedCollection(!1,Ext.returnId);return b&&a.addAll(this.decodeSorters(b)),a},sort:function(a,f,e,h){var d,g,b=this,c=b.getSorters();if(c||(b.setSorters(null),c=b.getSorters()),Ext.isArray(a)?(h=e,e=f):Ext.isObject(a)?(a=[a],h=e,e=f):Ext.isString(a)&&((d=c.get(a))?null==f?d.toggle():d.setDirection(f):d={property:a,direction:f},a=[d]),a&&a.length)switch(a=b.decodeSorters(a),e){case"multi":c.insert(0,a[0]),0<(g=c.getCount()-b.multiSortLimit)&&c.removeRange(b.multiSortLimit,g);break;case"prepend":c.insert(0,a);break;case"append":c.addAll(a);break;case void 0:case null:case"replace":c.clear(),c.addAll(a)}return!1!==h&&(b.fireEvent("beforesort",b,a),b.onBeforeSort(a),b.getSorterCount()&&b.doSort(b.generateComparator())),a},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var a=this.getSorters().getRange();return a.length?this.createComparator(a):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(b){Ext.isArray(b)||(b=void 0===b?[]:[b]);var d,a,c,g=b.length,f=Ext.util.Sorter,e=this.getModel?this.getModel():this.model;for(c=0;c<g;c++)(a=b[c])instanceof f||(Ext.isString(a)&&(a={property:a}),Ext.applyIf(a,{root:this.sortRoot,direction:"ASC"}),a.fn&&(a.sorterFn=a.fn),"function"==typeof a&&(a={sorterFn:a}),e&&!a.transform&&(d=e.getField(a.property),a.transform=d&&d.sortType!==Ext.identityFn?d.sortType:void 0),b[c]=new Ext.util.Sorter(a));return b},getFirstSorter:function(){for(var a,c=this.getSorters().items,d=c.length,b=0;b<d;++b)if(!(a=c[b]).isGrouper)return a;return null}},function(){this.prototype.createComparator=this.createComparator}),Ext.define("Ext.util.MixedCollection",{extend:Ext.util.AbstractMixedCollection,mixins:{sortable:Ext.util.Sortable},constructor:function(){this.initConfig(),this.callParent(arguments)},doSort:function(a){this.sortBy(a)},_sort:function(h,j,g){var a,d,e,b=this,k="DESC"==String(j).toUpperCase()?-1:1,c=[],i=b.keys,f=b.items;for(g=g||function(a,b){return a-b},a=0,d=f.length;a<d;a++)c[c.length]={key:i[a],value:f[a],index:a};for(Ext.Array.sort(c,function(a,b){return g(a[h],b[h])*k||(a.index<b.index?-1:1)}),a=0,d=c.length;a<d;a++)e=c[a],f[a]=e.value,i[a]=e.key,b.indexMap[e.key]=a;b.generation++,b.indexGeneration=b.generation,b.fireEvent("sort",b)},sortBy:function(h){var f,d,a,b=this,c=b.items,g=b.keys,e=c.length;for(a=0;a<e;a++)c[a].$extCollectionIndex=a;for(Ext.Array.sort(c,function(a,b){return h(a,b)||(a.$extCollectionIndex<b.$extCollectionIndex?-1:1)}),a=0;a<e;a++)f=c[a],d=b.getKey(f),g[a]=d,b.indexMap[d]=a,delete c.$extCollectionIndex;b.generation++,b.indexGeneration=b.generation,b.fireEvent("sort",b,c,g)},findInsertionIndex:function(h,d){var a,c,f=this.items,b=0,e=f.length-1;for(d=d||this.generateComparator();b<=e;)0<=(c=d(h,f[a=b+e>>1]))?b=1+a:c<0&&(e=a-1);return b},reorder:function(a){this.callParent([a]),this.fireEvent("sort",this)},sortByKey:function(a,b){this._sort("key",a,b||function(c,d){var a=String(c).toUpperCase(),b=String(d).toUpperCase();return b<a?1:a<b?-1:0})}}),Ext.define("Ext.util.TaskRunner",{interval:10,timerId:null,constructor:function(b){var a=this;"number"==typeof b?a.interval=b:b&&Ext.apply(a,b),a.tasks=[],a.timerFn=Ext.Function.bind(a.onTick,a)},newTask:function(b){var a=new Ext.util.TaskRunner.Task(b);return a.manager=this,a},start:function(a){var b=this,c=Ext.Date.now();return a.pending||(b.tasks.push(a),a.pending=!0),a.stopped=!1,a.taskStartTime=c,a.taskRunTime=!1!==a.fireOnStart?0:a.taskStartTime,a.taskRunCount=0,b.firing||(!1!==a.fireOnStart?b.startTimer(0,c):b.startTimer(a.interval,c)),a},stop:function(a){return a.stopped||(a.stopped=!0,a.onStop&&a.onStop.call(a.scope||a,a)),a},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:!1,nextExpires:1e99,onTick:function(){var f,c,e,a,i,d,j,b=this,h=b.tasks,g=Ext.Date.now(),k=1e99,m=h.length,l=Ext.GlobalEvents;for(b.timerId=null,b.firing=!0,e=0;e<m||e<(m=h.length);++e){if(!(d=(a=h[e]).stopped)){if((f=a.taskRunTime+a.interval)<=g){i=1,j=a.hasOwnProperty("fireIdleEvent")?a.fireIdleEvent:b.fireIdleEvent;try{i=a.run.apply(a.scope||a,a.args||[++a.taskRunCount])}catch(n){try{a.onError&&(i=a.onError.call(a.scope||a,a,n))}catch(o){}}a.taskRunTime=g,!1===i||a.taskRunCount===a.repeat?(b.stop(a),d=!0):(d=a.stopped,f=g+a.interval)}!d&&a.duration&&a.duration<=g-a.taskStartTime&&(b.stop(a),d=!0)}d?(a.pending=!1,c=c||h.slice(0,e)):(c&&c.push(a),f<k&&(k=f))}c&&(b.tasks=c),b.firing=!1,b.tasks.length&&b.startTimer(k-g,Ext.Date.now()),!1!==j&&l.hasListeners.idle&&l.fireEvent("idle")},startTimer:function(b,e){var a=this,d=e+b,c=a.timerId;c&&a.nextExpires-d>a.interval&&(clearTimeout(c),c=null),c||(b<a.interval&&(b=a.interval),a.timerId=Ext.defer(a.timerFn,b),a.nextExpires=d)}},function(){var b=this,a=b.prototype;a.destroy=a.stopAll,b.Task=new Ext.Class({isTask:!0,stopped:!0,fireOnStart:!1,constructor:function(a){Ext.apply(this,a)},restart:function(a){void 0!==a&&(this.interval=a),this.manager.start(this)},start:function(a){this.stopped&&this.restart(a)},stop:function(){this.manager.stop(this)}}),(a=b.Task.prototype).destroy=a.stop}),Ext.define("Ext.fx.target.Target",{isAnimTarget:!0,constructor:function(a){this.target=a,this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}}),Ext.define("Ext.fx.target.Element",{extend:Ext.fx.target.Target,type:"element",getElVal:function(c,b,a){return void 0===a&&(a="x"===b?c.getX():"y"===b?c.getY():"scrollTop"===b?c.getScroll().top:"scrollLeft"===b?c.getScroll().left:"height"===b?c.getHeight():"width"===b?c.getWidth():c.getStyle(b)),a},getAttr:function(b,c){var a=this.target;return[[a,this.getElVal(a,b,c)]]},setAttr:function(f){var a,b,e,c,d,g,h=f.length;for(c=0;c<h;c++)for(b in a=f[c].attrs)if(a.hasOwnProperty(b))for(g=a[b].length,d=0;d<g;d++)e=a[b][d],this.setElVal(e[0],b,e[1])},setElVal:function(a,c,b){"x"===c?a.setX(b):"y"===c?a.setY(b):"scrollTop"===c?a.scrollTo("top",b):"scrollLeft"===c?a.scrollTo("left",b):"width"===c?a.setWidth(b):"height"===c?a.setHeight(b):a.setStyle(c,b)}}),Ext.define("Ext.fx.target.ElementCSS",{extend:Ext.fx.target.Element,setAttr:function(j,f){function n(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)}var k,a,e,h,g,b,c,i,l,d={attrs:[],duration:[],easing:[]},m=j.length,o={single:!0};for(c=0;c<m;c++)for(e in g=(a=j[c]).duration,h=a.easing,a=a.attrs)-1==Ext.Array.indexOf(d.attrs,e)&&(d.attrs.push(e.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})),d.duration.push(g+"ms"),d.easing.push(h));for(k=d.attrs.join(","),g=d.duration.join(","),h=d.easing.join(", "),c=0;c<m;c++)for(e in a=j[c].attrs)for(l=a[e].length,i=0;i<l;i++)(b=a[e][i])[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",f?"":k),b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",f?"":g),b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",f?"":h),b[0].setStyle(e,b[1]),f?b=b[0].dom.offsetWidth:b[0].on(Ext.supports.CSS3TransitionEnd,n,b[0],o)}}),Ext.define("Ext.fx.target.CompositeElement",{extend:Ext.fx.target.Element,isComposite:!0,constructor:function(a){a.id=a.id||Ext.id(null,"ext-composite-"),this.callParent([a])},getAttr:function(g,h){var b,a,e=[],d=this.target,c=d.elements,f=c.length;for(b=0;b<f;b++)(a=c[b])&&(a=d.getElement(a),e.push([a,this.getElVal(a,g,h)]));return e},setAttr:function(g){var j,f,a,b,c,d,e,k,i=this.target,m=g.length,h=i.elements,l=h.length;for(d=0;d<m;d++)for(b in a=g[d].attrs)if(a.hasOwnProperty(b))for(k=a[b].length,e=0;e<k;e++)for(j=a[b][e][1],f=0;f<l;++f)(c=h[f])&&(c=i.getElement(c),this.setElVal(c,b,j))},remove:function(){this.target.destroy()}}),Ext.define("Ext.fx.target.CompositeElementCSS",{extend:Ext.fx.target.CompositeElement,setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}}),Ext.define("Ext.fx.target.Sprite",{extend:Ext.fx.target.Target,type:"draw",getFromPrim:function(b,c){var a;switch(c){case"rotate":case"rotation":return{x:(a=b.attr.rotation).x||0,y:a.y||0,degrees:a.degrees||0};case"scale":case"scaling":return{x:(a=b.attr.scaling).x||1,y:a.y||1,cx:a.cx||0,cy:a.cy||0};case"translate":case"translation":return{x:(a=b.attr.translation).x||0,y:a.y||0};default:return b.attr[c]}},getAttr:function(b,a){return[[this.target,void 0!==a?a:this.getFromPrim(this.target,b)]]},setAttr:function(n){var k,a,i,b,l,j,g,c,h,d,e,o,m=n.length,f=[];for(c=0;c<m;c++)for(a in k=n[c].attrs)for(o=(i=k[a]).length,h=0;h<o;h++)l=i[h][0],b=i[h][1],g="translate"===a||"translation"===a?{x:b.x,y:b.y}:"rotate"===a||"rotation"===a?(d=b.x,isNaN(d)&&(d=null),e=b.y,isNaN(e)&&(e=null),{degrees:b.degrees,x:d,y:e}):"scale"===a||"scaling"===a?(d=b.x,isNaN(d)&&(d=null),e=b.y,isNaN(e)&&(e=null),{x:d,y:e,cx:b.cx,cy:b.cy}):"width"===a||"height"===a||"x"===a||"y"===a?parseFloat(b):b,-1===(j=Ext.Array.indexOf(f,l))&&(f.push([l,{}]),j=f.length-1),f[j][1][a]=g;for(m=f.length,c=0;c<m;c++)f[c][0].setAttributes(f[c][1]);this.target.redraw()}}),Ext.define("Ext.fx.target.CompositeSprite",{extend:Ext.fx.target.Sprite,getAttr:function(g,e){var a,b,d=[],c=[].concat(this.target.items),f=c.length;for(a=0;a<f;a++)b=c[a],d.push([b,void 0!==e?e:this.getFromPrim(b,g)]);return d}}),Ext.define("Ext.fx.target.Component",{extend:Ext.fx.target.Target,type:"component",getPropMethod:{top:function(){return this.getPosition(!0)[1]},left:function(){return this.getPosition(!0)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(b,a){return[[this.target,void 0!==a?a:this.getPropMethod[b].call(this.target)]]},setAttr:function(k,q,o){var d,c,a,e,f,l,m,n,j,i,g,h=this,p=k.length,b={};for(e=0;e<p;e++){for(c in d=k[e].attrs)for(l=d[c].length,f=0;f<l;f++)a=d[c][f],(g=b[h.setMethods[c]]||(b[h.setMethods[c]]={})).target=a[0],g[c]=a[1];b.setPosition&&(m=void 0===(a=b.setPosition).left?void 0:parseFloat(a.left),n=void 0===a.top?void 0:parseFloat(a.top),a.target.setPosition(m,n)),b.setPagePosition&&(a=b.setPagePosition).target.setPagePosition(a.x,a.y),b.setSize&&(j=void 0===(a=b.setSize).width?a.target.getWidth():parseFloat(a.width),i=void 0===a.height?a.target.getHeight():parseFloat(a.height),a.target.el.setSize(j,i),(o||h.dynamic)&&Ext.GlobalEvents.on({idle:Ext.Function.bind(a.target.setSize,a.target,[j,i]),single:!0})),b.setOpacity&&(a=b.setOpacity).target.el.setStyle("opacity",a.opacity)}}}),Ext.define("Ext.fx.Queue",{constructor:function(){this.targets=new Ext.util.HashMap,this.fxQueue={}},getFxDefaults:function(b){var a=this.targets.get(b);return a?a.fxDefaults:{}},setFxDefaults:function(b,c){var a=this.targets.get(b);a&&(a.fxDefaults=Ext.apply(a.fxDefaults||{},c))},stopAnimation:function(d){for(var a,c=this.getFxQueue(d),b=c.length;b;)(a=c[b-1])&&a.end(),b--},getActiveAnimation:function(b){var a=this.getFxQueue(b);return!(!a||!a.length)&&a[0]},hasFxBlock:function(b){var a=this.getFxQueue(b);return a&&a[0]&&a[0].block},getFxQueue:function(a){if(!a)return!1;var b=this,d=b.fxQueue[a],c=b.targets.get(a);return!!c&&(d||(b.fxQueue[a]=[],"element"!==c.type&&c.target.on("destroy",function(){b.fxQueue[a]=[]})),b.fxQueue[a])},queueFx:function(a){var b,d,e=this,c=a.target;c&&(!(d=(b=e.getFxQueue(c.getId())).length)||a.concurrent?a.paused=!1:b[d-1].on("afteranimate",function(){a.paused=!1}),a.on("afteranimate",function(){if(Ext.Array.remove(b,a),0===b.length&&e.targets.remove(a.target),a.remove&&"element"===c.type){var d=Ext.get(c.id);d&&d.destroy()}},e,{single:!0}),b.push(a))}}),Ext.define("Ext.fx.Manager",{singleton:!0,mixins:{queue:Ext.fx.Queue},constructor:function(){var a=this;a.items=new Ext.util.MixedCollection,a.targetArr={},a.mixins.queue.constructor.call(a),a.taskRunner=new Ext.util.TaskRunner},interval:16,forceJS:!0,createTarget:function(a){var b,d=this,c=!d.forceJS&&Ext.supports.Transitions;if(d.useCSS3=c,a){if(a.tagName||Ext.isString(a)||a.isFly)a=Ext.get(a),b=new Ext.fx.target["Element"+(c?"CSS":"")](a);else if(a.dom)b=new Ext.fx.target["Element"+(c?"CSS":"")](a);else if(a.isComposite)b=new Ext.fx.target["CompositeElement"+(c?"CSS":"")](a);else if(a.isSprite)b=new Ext.fx.target.Sprite(a);else if(a.isCompositeSprite)b=new Ext.fx.target.CompositeSprite(a);else{if(!a.isComponent)return a.isAnimTarget?a:null;b=new Ext.fx.target.Component(a)}return d.targets.add(b),b}return null},addAnim:function(d){var a=this,c=a.items,b=a.task;c.add(d.id,d),!b&&c.length&&(b=a.task={run:a.runner,interval:a.interval,scope:a},a.taskRunner.start(b))},removeAnim:function(d){var a=this,b=a.items,c=a.task;b.removeAtKey(d.id),c&&!b.length&&(a.taskRunner.stop(c),delete a.task)},runner:function(){var c,a=this,d=a.items.getRange(),b=0,e=d.length;for(a.targetArr={},a.timestamp=new Date;b<e;b++)(c=d[b]).isReady()&&a.startAnim(c);for(b=0;b<e;b++)(c=d[b]).isRunning()&&a.runAnim(c);a.applyPendingAttrs(),a.targetArr=null},startAnim:function(a){a.start(this.timestamp)},runAnim:function(a,h){if(a){var b,c,g=this,f=g.useCSS3&&"element"===a.target.type,d=g.timestamp-a.startTime,e=d>=a.duration;return h&&(d=a.duration,e=!0),b=this.collectTargetData(a,d,f,e),f&&(a.target.setAttr(b.anims[a.id].attributes,!0),g.collectTargetData(a,a.duration,f,e),a.paused=!0,b=a.target.target,a.target.isComposite&&(b=a.target.target.last()),(c={})[Ext.supports.CSS3TransitionEnd]=a.lastFrame,c.scope=a,c.single=!0,b.on(c)),b}},jumpToEnd:function(d){var b,c,a=this;a.targetArr||(a.targetArr={},c=!0),b=a.runAnim(d,!0),a.applyAnimAttrs(b,b.anims[d.id]),c&&(a.targetArr=null)},collectTargetData:function(a,d,f,e){var c=a.target.getId(),b=this.targetArr[c];return(b=b||(this.targetArr[c]={id:c,el:a.target,anims:{}})).anims[a.id]={id:a.id,anim:a,elapsed:d,isLastFrame:e,attributes:[{duration:a.duration,easing:f&&a.reverse?a.easingFn.reverse().toCSS3():a.easing,attrs:a.runAnim(d)}]},b},applyAnimAttrs:function(c,a){var b=a.anim;a.attributes&&b.isRunning()&&(c.el.setAttr(a.attributes,!1,a.isLastFrame),a.isLastFrame&&b.lastFrame())},applyPendingAttrs:function(){var b,d,a,f,e,c=this.targetArr;for(d in c)if(c.hasOwnProperty(d))for(e in(b=c[d]).anims)b.anims.hasOwnProperty(e)&&(f=(a=b.anims[e]).anim,a.attributes&&f.isRunning()&&(b.el.setAttr(a.attributes,!1,a.isLastFrame),a.isLastFrame&&f.lastFrame()))}}),Ext.define("Ext.fx.Animator",{mixins:{observable:Ext.util.Observable},isAnimator:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",running:!1,paused:!1,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(b){var a=this;b=Ext.apply(a,b||{}),a.config=b,a.id=Ext.id(null,"ext-animator-"),a.mixins.observable.constructor.call(a,b),a.timeline=[],a.createTimeline(a.keyframes),a.target&&(a.applyAnimator(a.target),Ext.fx.Manager.addAnim(a))},sorter:function(a,b){return a.pct-b.pct},createTimeline:function(e){var h,j,c,i,a,f,d=this,b=[],k=d.to||{},g=d.duration;for(a in e)e.hasOwnProperty(a)&&d.animKeyFramesRE.test(a)&&(f={attrs:Ext.apply(e[a],k)},"from"===a?a=0:"to"===a&&(a=100),f.pct=parseInt(a,10),b.push(f));for(Ext.Array.sort(b,d.sorter),i=b.length,c=0;c<i;c++)h=b[c-1]?g*(b[c-1].pct/100):0,j=g*(b[c].pct/100),d.timeline.push({duration:j-h,attrs:b[c].attrs})},applyAnimator:function(j){var a,i,h,d,c,b=this,e=[],g=b.timeline,f=g.length;if(!1!==b.fireEvent("beforeanimate",b)){for(c=0;c<f;c++)i=(d=(a=g[c]).attrs).easing||b.easing,h=d.damper||b.damper,delete d.easing,delete d.damper,a=new Ext.fx.Anim({target:j,easing:i,damper:h,duration:a.duration,paused:!0,to:d}),e.push(a);for(b.animations=e,b.target=a.target,c=0;c<f-1;c++)(a=e[c]).nextAnim=e[c+1],a.on("afteranimate",function(){this.nextAnim.paused=!1}),a.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},b);e[f-1].on("afteranimate",function(){this.lastFrame()},b)}},start:function(b){var a=this,d=a.delay,c=a.delayStart;if(d){if(!c)return void(a.delayStart=b);if(b-c<d)return;b=new Date(c.getTime()+d)}!1!==a.fireEvent("beforeanimate",a)&&(a.startTime=b,a.running=!0,a.animations[a.keyframeStep].paused=!1)},lastFrame:function(){var a=this,c=a.iterations,b=a.currentIteration;++b<c?(a.startTime=new Date,a.currentIteration=b,a.keyframeStep=0,a.applyAnimator(a.target),a.animations[a.keyframeStep].paused=!1):(a.currentIteration=0,a.end())},end:function(){var a=this;a.fireEvent("afteranimate",a,a.startTime,new Date-a.startTime)},isReady:function(){return!1===this.paused&&!1===this.running&&0<this.iterations},isRunning:function(){return!1}}),Ext.define("Ext.fx.CubicBezier",{singleton:!0,cubicBezierAtTime:function(l,d,e,i,j,h){var a=3*d,b=3*(i-d)-a,f=1-a-b,c=3*e,g=3*(j-e)-c,k=1-c-g;function sampleCurveX(c){return((f*c+b)*c+a)*c}function solveCurveX(h,k){var d,e,c,g,i,j;for(c=h,j=0;j<8;j++){if(g=sampleCurveX(c)-h,Math.abs(g)<k)return c;if(i=(3*f*c+2*b)*c+a,Math.abs(i)<1e-6)break;c-=g/i}if((c=h)<(d=0))return d;if((e=1)<c)return e;for(;d<e;){if(g=sampleCurveX(c),Math.abs(g-h)<k)return c;g<h?d=c:e=c,c=(e-d)/2+d}return c}return function(d,b){var a=solveCurveX(d,b);return((k*a+g)*a+c)*a}(l,1/(200*h))},cubicBezier:function(b,d,c,e){var a=function(a){return Ext.fx.CubicBezier.cubicBezierAtTime(a,b,d,c,e,1)};return a.toCSS3=function(){return"cubic-bezier("+[b,d,c,e].join(",")+")"},a.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-c,1-e,1-b,1-d)},a}}),Ext.define("Ext.fx.Easing",function(){var b=Math,g=b.PI,a=b.pow,f=b.sin,e=b.sqrt,d=b.abs,c=1.70158;return{singleton:!0,linear:Ext.identityFn,ease:function(k){var c=.07813-k/2,f=e(.0066+c*c),g=f-c,h=-f-c,b=a(d(g),1/3)*(g<0?-1:1)+a(d(h),1/3)*(h<0?-1:1)+.25;return 3*a(1-b,2)*b*.1+3*(1-b)*b*b+b*b*b},easeIn:function(b){return a(b,1.7)},easeOut:function(b){return a(b,.48)},easeInOut:function(k){var c=.48-k/1.04,f=e(.1734+c*c),g=f-c,h=-f-c,b=a(d(g),1/3)*(g<0?-1:1)+a(d(h),1/3)*(h<0?-1:1)+.5;return 3*(1-b)*b*b+b*b*b},backIn:function(a){return a*a*((1+c)*a-c)},backOut:function(a){return--a*a*((1+c)*a+c)+1},elasticIn:function(b){if(0===b||1===b)return b;return a(2,-10*b)*f(2*g*(b-.075)/.3)+1},elasticOut:function(a){return 1-Ext.fx.Easing.elasticIn(1-a)},bounceIn:function(a){return 1-Ext.fx.Easing.bounceOut(1-a)},bounceOut:function(a){var d=7.5625,b=2.75;return a<1/b?d*a*a:a<2/b?d*(a-=1.5/b)*a+.75:a<2.5/b?d*(a-=2.25/b)*a+.9375:d*(a-=2.625/b)*a+.984375}}},function(c){var b=c.self,a=b.prototype;b.addMembers({"back-in":a.backIn,"back-out":a.backOut,"ease-in":a.easeIn,"ease-out":a.easeOut,"elastic-in":a.elasticIn,"elastic-out":a.elasticOut,"bounce-in":a.bounceIn,"bounce-out":a.bounceOut,"ease-in-out":a.easeInOut})}),Ext.define("Ext.fx.DrawPath",{singleton:!0,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(b,a){return"object"==(a=String(a).toLowerCase())&&b===Object(b)||"undefined"==a&&typeof b==a||"null"==a&&null===b||"array"==a&&Array.isArray&&Array.isArray(b)||Object.prototype.toString.call(b).toLowerCase().slice(8,-1)==a},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(a){return a.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(c){if(!c)return null;var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},a=[],b=this;return b.is(c,"array")&&b.is(c[0],"array")&&(a=b.pathClone(c)),a.length||String(c).replace(b.pathCommandRE,function(h,f,g){var c=[],e=f.toLowerCase();for(g.replace(b.pathValuesRE,function(b,a){a&&c.push(+a)}),"m"==e&&2<c.length&&(a.push([f].concat(Ext.Array.splice(c,0,2))),e="l",f="m"==f?"l":"L");c.length>=d[e]&&(a.push([f].concat(Ext.Array.splice(c,0,d[e]))),d[e]););}),a.toString=b.path2string,a},pathClone:function(a){var c,f,b,e,d=[];for(this.is(a,"array")&&this.is(a&&a[0],"array")||(a=this.parsePathString(a)),b=0,e=a.length;b<e;b++)for(d[b]=[],c=0,f=a[b].length;c<f;c++)d[b][c]=a[b][c];return d.toString=this.path2string,d},pathToAbsolute:function(d){this.is(d,"array")&&this.is(d&&d[0],"array")||(d=this.parsePathString(d));var b,a,c,e,i=[],f=0,g=0,j=0,k=0,h=0,l=d.length;for(l&&"M"==d[0][0]&&(j=f=+d[0][1],k=g=+d[0][2],h++,i[0]=["M",f,g]);h<l;h++){if(b=i[h]=[],(a=d[h])[0]!=a[0].toUpperCase())switch(b[0]=a[0].toUpperCase(),b[0]){case"A":b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=+(a[6]+f),b[7]=+(a[7]+g);break;case"V":b[1]=+a[1]+g;break;case"H":b[1]=+a[1]+f;break;case"M":j=+a[1]+f,k=+a[2]+g;default:for(c=1,e=a.length;c<e;c++)b[c]=+a[c]+(c%2?f:g)}else for(c=0,e=a.length;c<e;c++)i[h][c]=a[c];switch(b[0]){case"Z":f=j,g=k;break;case"H":f=b[1];break;case"V":g=b[1];break;case"M":j=(a=i[h])[(e=a.length)-2],k=a[e-1];default:f=(a=i[h])[(e=a.length)-2],g=a[e-1]}}return i.toString=this.path2string,i},interpolatePaths:function(o,n){function l(a,d){if(7<a[d].length){a[d].shift();for(var e=a[d];e.length;)Ext.Array.splice(a,d++,0,["C"].concat(Ext.Array.splice(e,0,6)));Ext.Array.erase(a,d,1),j=Math.max(c.length,b.length||0)}}function m(d,f,e,g,a){d&&f&&"M"==d[a][0]&&"M"!=f[a][0]&&(Ext.Array.splice(f,a,0,["M",g.x,g.y]),e.bx=0,e.by=0,e.x=d[a][1],e.y=d[a][2],j=Math.max(c.length,b.length||0))}var a,j,g,f,i,h,k=this,c=k.pathToAbsolute(o),b=k.pathToAbsolute(n),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};for(a=0,j=Math.max(c.length,b.length||0);a<j;a++)c[a]=k.command2curve(c[a],e),l(c,a),b[a]=k.command2curve(b[a],d),l(b,a),m(c,b,e,d,a),m(b,c,d,e,a),g=c[a],f=b[a],i=g.length,h=f.length,e.x=g[i-2],e.y=g[i-1],e.bx=parseFloat(g[i-4])||e.x,e.by=parseFloat(g[i-3])||e.y,d.bx=parseFloat(f[h-4])||d.x,d.by=parseFloat(f[h-3])||d.y,d.x=f[h-2],d.y=f[h-1];return[c,b]},command2curve:function(b,a){var c=this;if(!b)return["C",a.x,a.y,a.x,a.y,a.x,a.y];switch("T"!=b[0]&&"Q"!=b[0]&&(a.qx=a.qy=null),b[0]){case"M":a.X=b[1],a.Y=b[2];break;case"A":b=["C"].concat(c.arc2curve.apply(c,[a.x,a.y].concat(b.slice(1))));break;case"S":b=["C",a.x+(a.x-(a.bx||a.x)),a.y+(a.y-(a.by||a.y))].concat(b.slice(1));break;case"T":a.qx=a.x+(a.x-(a.qx||a.x)),a.qy=a.y+(a.y-(a.qy||a.y)),b=["C"].concat(c.quadratic2curve(a.x,a.y,a.qx,a.qy,b[1],b[2]));break;case"Q":a.qx=b[1],a.qy=b[2],b=["C"].concat(c.quadratic2curve(a.x,a.y,b[1],b[2],b[3],b[4]));break;case"L":b=["C"].concat(a.x,a.y,b[1],b[2],b[1],b[2]);break;case"H":b=["C"].concat(a.x,a.y,b[1],a.y,b[1],a.y);break;case"V":b=["C"].concat(a.x,a.y,a.x,b[1],a.x,b[1]);break;case"Z":b=["C"].concat(a.x,a.y,a.X,a.Y,a.X,a.Y)}return b},quadratic2curve:function(g,h,c,d,e,f){var a=1/3,b=2/3;return[a*g+b*c,a*h+b*d,a*e+b*c,a*f+b*d,e,f]},rotate:function(d,e,b){var a=Math.cos(b),c=Math.sin(b);return{x:d*a-e*c,y:d*c+e*a}},arc2curve:function(m,n,d,c,K,X,v,e,f,o){var t,i,j,u,x,y,I,q,r,b,a,z,S,V,T,W,J,D,E,F,l,G,H,A,h,U,L,O,P,s=this,k=Math.PI,Q=120*k/180,w=s.radian*(+K||0),g=[],p=Math,B=p.cos,C=p.sin,N=p.sqrt,R=p.abs,M=p.asin;if(o?(b=o[0],a=o[1],q=o[2],r=o[3]):(m=(t=s.rotate(m,n,-w)).x,n=t.y,1<(u=(i=(m-(e=(t=s.rotate(e,f,-w)).x))/2)*i/(d*d)+(j=(n-(f=t.y))/2)*j/(c*c))&&(d*=u=N(u),c*=u),q=(I=(X==v?-1:1)*N(R(((x=d*d)*(y=c*c)-x*j*j-y*i*i)/(x*j*j+y*i*i))))*d*j/c+(m+e)/2,b=M(((n-(r=I*-c*i/d+(n+f)/2))/c).toFixed(7)),a=M(((f-r)/c).toFixed(7)),(b=m<q?k-b:b)<0&&(b=2*k+b),(a=e<q?k-a:a)<0&&(a=2*k+a),v&&a<b&&(b-=2*k),!v&&b<a&&(a-=2*k)),R(z=a-b)>Q&&(L=a,O=e,P=f,e=q+d*B(a=b+Q*(v&&b<a?1:-1)),f=r+c*C(a),g=s.arc2curve(e,f,d,c,K,0,v,O,P,[a,L,q,r])),z=a-b,S=B(b),V=C(b),T=B(a),W=C(a),G=[e+(D=4/3*d*(J=p.tan(z/4)))*W,f-(E=4/3*c*J)*T],H=[e,f],(l=[m+D*V,n-E*S])[0]=2*(F=[m,n])[0]-l[0],l[1]=2*F[1]-l[1],o)return[l,G,H].concat(g);for(A=[],U=(g=[l,G,H].concat(g).join().split(",")).length,h=0;h<U;h++)A[h]=h%2?s.rotate(g[h-1],g[h],w).y:s.rotate(g[h],g[h+1],w).x;return A}}),Ext.define("Ext.fx.PropertyHandler",{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(c,d,e,f,i){e="number"==typeof e?e:1;var b,g=this.unitRE,a=g.exec(c);return a&&(c=a[1],b=a[2],this.scrollRE.test(i)||b||!this.pixelDefaultsRE.test(i)||(b="px")),c=+c||0,(a=g.exec(d))&&(d=a[1],b=a[2]||b),{from:c,delta:((d=+d||0)-(null!=f?f:c))*e,units:b}},get:function(b,e,i,h,j){var a,d,g,c,k,l=b.length,f=[];for(a=0;a<l;a++)if(h&&(d=h[a][1].from),Ext.isArray(b[a][1])&&Ext.isArray(e)){for(g=[],c=0,k=b[a][1].length;c<k;c++)g.push(this.computeDelta(b[a][1][c],e[c],i,d,j));f.push([b[a][0],g])}else f.push([b[a][0],this.computeDelta(b[a][1],e,i,d,j)]);return f},set:function(d,g){var b,a,f,h,c,i=d.length,e=[];for(b=0;b<i;b++)if(a=d[b][1],Ext.isArray(a)){for(f=[],c=0,h=a.length;c<h;c++)f.push(a[c].from+a[c].delta*g+(a[c].units||0));e.push([d[b][0],f])}else e.push([d[b][0],a.from+a.delta*g+(a.units||0)]);return e}},stringHandler:{computeDelta:function(a,b,d,c,e){return{from:a,delta:b}},get:function(b,g,e,i,f){var a,h=b.length,c=[];for(a=0;a<h;a++)c.push([b[a][0],this.computeDelta(b[a][1],g,e,void 0,f)]);return c},set:function(b,f){var a,d,e=b.length,c=[];for(a=0;a<e;a++)d=b[a][1],c.push([b[a][0],d.delta]);return c}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(f,d){var a,c,b,g=!1,e=[this.hexRE,this.rgbRE,this.hex3RE],i=e.length;for(b=0;b<i;b++)if(c=b%2==0?16:10,(a=e[b].exec(f))&&4===a.length){2===b&&(a[1]+=a[1],a[2]+=a[2],a[3]+=a[3]),g={red:parseInt(a[1],c),green:parseInt(a[2],c),blue:parseInt(a[3],c)};break}return g||f},computeDelta:function(d,a,c,e){d=this.parseColor(d);var b=e||d,f=typeof b,g=typeof(a=this.parseColor(a,c));return"string"==f||"undefined"==f||"string"==g||"undefined"==g?a||b:{from:d,delta:{red:Math.round((a.red-b.red)*c),green:Math.round((a.green-b.green)*c),blue:Math.round((a.blue-b.blue)*c)}}},get:function(b,g,f,c){var a,d,h=b.length,e=[];for(a=0;a<h;a++)c&&(d=c[a][1].from),e.push([b[a][0],this.computeDelta(b[a][1],g,f,d)]);return e},set:function(f,e){var b,a,g,d,c,i=f.length,h=[];for(b=0;b<i;b++)if(a=f[b][1]){if(d=a.from,c=a.delta,void 0===(a="object"==typeof(a="object"==typeof a&&"red"in a?"rgb("+a.red+", "+a.green+", "+a.blue+")":a)&&a.length?a[0]:a))return[];g="string"==typeof a?a:"rgb("+[(d.red+Math.round(c.red*e))%256,(d.green+Math.round(c.green*e))%256,(d.blue+Math.round(c.blue*e))%256].join(",")+")",h.push([f[b][0],g])}return h}},object:{interpolate:function(c,a){a="number"==typeof a?a:1;var b,d={};for(b in c)d[b]=parseFloat(c[b])*a;return d},computeDelta:function(a,b,f,d){a=this.interpolate(a),b=this.interpolate(b,f);var c,g=d||a,e={};for(c in b)e[c]=b[c]-g[c];return{from:a,delta:e}},get:function(b,g,f,c){var a,d,h=b.length,e=[];for(a=0;a<h;a++)c&&(d=c[a][1].from),e.push([b[a][0],this.computeDelta(b[a][1],g,f,d)]);return e},set:function(c,i){var a,d,g,e,b,j=c.length,h=[],f={};for(a=0;a<j;a++){for(b in d=(e=c[a][1]).from,g=e.delta,d)f[b]=d[b]+g[b]*i;h.push([c[a][0],f])}return h}},path:{computeDelta:function(b,c,a,d){return{from:b=+b||0,delta:((c=+c||0)-(null!=d?d:b))*(a="number"==typeof a?a:1)}},forcePath:function(a){return Ext.isArray(a)||Ext.isArray(a[0])||(a=Ext.fx.DrawPath.parsePathString(a)),a},get:function(g,p,o,i){var j,k,e,c,l,a,d,h,b,f=this.forcePath(p),m=[],n=g.length;for(e=0;e<n;e++){for(b=this.forcePath(g[e][1]),b=(c=Ext.fx.DrawPath.interpolatePaths(b,f))[0],f=c[1],j=b.length,h=[],a=0;a<j;a++){for(c=[b[a][0]],k=b[a].length,d=1;d<k;d++)l=i&&i[0][1][a][d].from,c.push(this.computeDelta(b[a][d],f[a][d],o,l));h.push(c)}m.push([g[e][0],h])}return m},set:function(g,k){var c,a,d,f,e,b,h,i,l=g.length,j=[];for(c=0;c<l;c++){for(f=[],h=(b=g[c][1]).length,a=0;a<h;a++){for(e=[b[a][0]],i=b[a].length,d=1;d<i;d++)e.push(b[a][d].from+b[a][d].delta*k);f.push(e.join(","))}j.push([g[c][0],f.join(",")])}return j}}}},function(){for(var b=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],d=b.length,a=0;a<d;a++)this[b[a]]=this.color;for(d=(b=["cursor"]).length,a=0;a<d;a++)this[b[a]]=this.stringHandler}),Ext.define("Ext.fx.Anim",{mixins:{observable:Ext.util.Observable},isAnimation:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:!1,running:!1,paused:!1,iterations:1,autoEnd:!1,alternate:!1,currentIteration:0,startTime:0,frameCount:0,constructor:function(b){var c,a=this;if((b=b||{}).keyframes)return new Ext.fx.Animator(b);Ext.apply(a,b),void 0===a.from&&(a.from={}),a.propHandlers={},a.config=b,a.target=Ext.fx.Manager.createTarget(a.target),a.easingFn=Ext.fx.Easing[a.easing],a.target.dynamic=a.dynamic,a.easingFn||(a.easingFn=String(a.easing).match(a.bezierRE),a.easingFn&&5===a.easingFn.length&&(c=a.easingFn,a.easingFn=Ext.fx.CubicBezier.cubicBezier(+c[1],+c[2],+c[3],+c[4]))),a.id=Ext.id(null,"ext-anim-"),a.mixins.observable.constructor.call(a),Ext.fx.Manager.addAnim(a),b.autoEnd&&(a.running=!0,a.jumpToEnd())},setAttr:function(b,a){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,b,a)},initAttrs:function(){var f,d,c,a,b=this,i=b.from,e=b.to,h=b.initialFrom||{},g={};for(a in e)e.hasOwnProperty(a)&&(f=b.target.getAttr(a,i[a]),d=e[a],c=Ext.fx.PropertyHandler[a]?b.propHandlers[a]=Ext.fx.PropertyHandler[a]:Ext.isObject(d)?b.propHandlers[a]=Ext.fx.PropertyHandler.object:b.propHandlers[a]=Ext.fx.PropertyHandler.defaultHandler,g[a]=c.get(f,d,b.damper,h[a],a));b.currentAttrs=g},start:function(b){var a=this,d=a.delay,c=a.delayStart;if(d){if(!c)return void(a.delayStart=b);if(b-c<d)return;b=new Date(c.getTime()+d)}!1!==a.fireEvent("beforeanimate",a)&&(a.startTime=b,a.paused||a.currentAttrs||a.initAttrs(),a.running=!0,a.frameCount=0)},jumpToEnd:function(){var a=this;a.endWasCalled||(a.currentAttrs||a.initAttrs(),Ext.fx.Manager.jumpToEnd(a),a.end())},runAnim:function(b){var g,h,c,f,a=this,e=a.currentAttrs,d=a.duration,k=a.easingFn,j=a.propHandlers,i={};for(c in d<=b&&(b=d,f=!0),a.reverse&&(b=d-b),e)e.hasOwnProperty(c)&&(h=e[c],g=f?1:k(b/d),i[c]=j[c].set(h,g));return a.frameCount++,i},lastFrame:function(){var a=this,c=a.iterations,b=a.currentIteration;++b<c?(a.alternate&&(a.reverse=!a.reverse),a.startTime=new Date,a.currentIteration=b,a.paused=!1):(a.currentIteration=0,a.end(),a.fireEvent("lastframe",a,a.startTime))},endWasCalled:0,end:function(){var a=this;a.endWasCalled++||(a.startTime=0,a.paused=!1,a.running=!1,Ext.fx.Manager.removeAnim(a),a.fireEvent("afteranimate",a,a.startTime),Ext.callback(a.callback,a.scope,[a,a.startTime]),a.remove&&a.target.destroy())},isReady:function(){return!1===this.paused&&!1===this.running&&0<this.iterations},isRunning:function(){return!1===this.paused&&!0===this.running&&!0!==this.isAnimator}}),Ext.enableFx=!0,Ext.define("Ext.util.Animate",{mixinId:"animate",isAnimate:!0,animate:function(b){var a=this;return Ext.fx.Manager.hasFxBlock(a.id)?a:(Ext.fx.Manager.queueFx(new Ext.fx.Anim(a.anim(b))),this)},anim:function(a){if(!Ext.isObject(a))return!!a&&{};var b=this;return a.stopAnimation&&b.stopAnimation(),Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id)),Ext.apply({target:b,paused:!0},a)},getAnimationProps:function(){var a=this.layout;return a&&a.animate?a.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){return Ext.fx.Manager.stopAnimation(this.id),this},syncFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!0}),this},sequenceFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!1}),this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}}),Ext.define("Ext.overrides.dom.Element",function(){function w(b,a){return a.charAt(1).toUpperCase()}var a,t=window,b=document,e="hidden",g="isClipped",j="overflow",h="overflow-x",i="overflow-y",n="originalClip",o="visibility",d="display",s="none",q="visibilityMode",y=Ext.baseCSSPrefix+"hidden-offsets",C=Ext.baseCSSPrefix+"hidden-clip",E=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join(""),z=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/gi,u=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,M=/\ssrc=([\'\"])(.*?)\1/i,B=/\S/,K=/\stype=([\'\"])(.*?)\1/i,O=/^-ms-/,H=/(-[a-z])/gi,r=Ext.baseCSSPrefix+"masked",k=Ext.baseCSSPrefix+"masked-relative",m=Ext.baseCSSPrefix+"mask-msg",J=/^body/i,l={},f=b.createRange?b.createRange():null,F={INPUT:!0,TEXTAREA:!0};if(Ext.isIE8)var p=b.createElement("div"),c=[],x=Ext.Function.createBuffered(function(){var a,b=c.length;for(a=0;a<b;a++)p.appendChild(c[a]);p.innerHTML="",c.length=0},10);return{override:"Ext.dom.Element",mixins:[Ext.util.Animate],skipGarbageCollection:!1,_init:function(b){(a=b).tabbableSelector+=",["+b.tabbableSavedCounterAttribute+"]"},statics:{selectableCls:Ext.baseCSSPrefix+"selectable",unselectableCls:Ext.baseCSSPrefix+"unselectable",tabbableSelector:Ext.supports.CSS3NegationSelector?'a[href],button,iframe,input,select,textarea,[tabindex]:not([tabindex="-1"]),[contenteditable="true"]':'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:!0,IFRAME:!0,EMBED:!0,INPUT:!0,OBJECT:!0,SELECT:!0,TEXTAREA:!0,HTML:!!Ext.isIE},naturallyTabbableTags:{BUTTON:!0,IFRAME:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,OBJECT:!!Ext.isIE8m},tabbableSavedCounterAttribute:"data-tabindex-counter",tabbableSavedValueAttribute:"data-tabindex-value",normalize:function(a){return"float"===a&&(a=Ext.supports.Float?"cssFloat":"styleFloat"),l[a]||(l[a]=a.replace(O,"ms-").replace(H,w))}},addClsOnClick:function(b,c,f){var a=this,d=a.dom,e=Ext.isFunction(c);return a.on("mousedown",function(){if(e&&!1===c.call(f||a,a))return!1;Ext.fly(d).addCls(b);var h=Ext.getDoc(),g=function(){Ext.fly(d).removeCls(b),h.removeListener("mouseup",g)};h.on("mouseup",g)}),a},addClsOnFocus:function(b,c,f){var a=this,d=a.dom,e=Ext.isFunction(c);return a.on("focus",function(){if(e&&!1===c.call(f||a,a))return!1;Ext.fly(d).addCls(b)}),a.on("blur",function(){Ext.fly(d).removeCls(b)}),a},addClsOnOver:function(b,c,f){var a=this,d=a.dom,e=Ext.isFunction(c);return a.hover(function(){e&&!1===c.call(f||a,a)||Ext.fly(d).addCls(b)},function(){Ext.fly(d).removeCls(b)}),a},addKeyListener:function(a,d,c){var b;return b="object"!=typeof a||Ext.isArray(a)?{target:this,key:a,fn:d,scope:c}:{target:this,key:a.key,shift:a.shift,ctrl:a.ctrl,alt:a.alt,fn:d,scope:c},new Ext.util.KeyMap(b)},addKeyMap:function(a){return new Ext.util.KeyMap(Ext.apply({target:this},a))},afterAnimate:function(){var a=this.shadow;!a||a.disabled||a.animate||a.show()},anchorAnimX:function(a){var b="l"===a?"right":"left";this.dom.style[b]="0px"},anim:function(b){if(!Ext.isObject(b))return!!b&&{};var a,c=this,d=b.duration||Ext.fx.Anim.prototype.duration,e=b.easing||"ease";return b.stopAnimation&&c.stopAnimation(),Ext.applyIf(b,Ext.fx.Manager.getFxDefaults(c.id)),Ext.fx.Manager.setFxDefaults(c.id,{delay:0}),a={target:c.dom,remove:b.remove,alternate:b.alternate||!1,duration:d,easing:e,callback:b.callback,listeners:b.listeners,iterations:b.iterations||1,scope:b.scope,block:b.block,concurrent:b.concurrent,delay:b.delay||0,paused:!0,keyframes:b.keyframes,from:b.from||{},to:Ext.apply({},b),userConfig:b},Ext.apply(a.to,b.to),delete a.to.to,delete a.to.from,delete a.to.remove,delete a.to.alternate,delete a.to.keyframes,delete a.to.iterations,delete a.to.listeners,delete a.to.target,delete a.to.paused,delete a.to.callback,delete a.to.scope,delete a.to.duration,delete a.to.easing,delete a.to.concurrent,delete a.to.block,delete a.to.stopAnimation,delete a.to.delay,a},animate:function(a){return this.addAnimation(a),this},addAnimation:function(a){var d,b,e,c=this,f=c.dom.id||Ext.id(c.dom);return Ext.fx.Manager.hasFxBlock(f)||(a.listeners&&(d=a.listeners,delete a.listeners),a.internalListeners&&(a.listeners=a.internalListeners,delete a.internalListeners),e=a.autoEnd,delete a.autoEnd,(b=new Ext.fx.Anim(c.anim(a))).on({afteranimate:"afterAnimate",beforeanimate:"beforeAnimate",scope:c,single:!0}),d&&b.on(d),Ext.fx.Manager.queueFx(b),e&&b.jumpToEnd()),b},beforeAnimate:function(){var a=this.shadow;!a||a.disabled||a.animate||a.hide()},boxWrap:function(a){a=a||Ext.baseCSSPrefix+"box";var b=Ext.get(this.insertHtml("beforeBegin","<div class='"+a+"' role='presentation'>"+Ext.String.format(E,a)+"</div>"));return b.selectNode("."+a+"-mc").appendChild(this.dom),b},clean:function(g){var b,c=this,d=c.dom,e=c.getData(),a=d.firstChild,f=-1;if(e.isCleaned&&!0!==g)return c;for(;a;)b=a.nextSibling,3===a.nodeType?B.test(a.nodeValue)?b&&3===b.nodeType&&(a.appendData(Ext.String.trim(b.data)),d.removeChild(b),b=a.nextSibling,a.nodeIndex=++f):d.removeChild(a):(Ext.fly(a,"_clean").clean(),a.nodeIndex=++f),a=b;return e.isCleaned=!0,c},empty:f?function(){var a=this.dom;a.firstChild&&(f.setStartBefore(a.firstChild),f.setEndAfter(a.lastChild),f.deleteContents())}:function(){for(var a=this.dom;a.lastChild;)a.removeChild(a.lastChild)},clearListeners:function(){this.removeAnchor(),this.callParent()},clearPositioning:function(a){return a=a||"",this.setStyle({left:a,right:a,top:a,bottom:a,"z-index":"",position:"static"})},createProxy:function(b,e,f){b="object"==typeof b?b:{tag:"div",role:"presentation",cls:b};var d=this,c=e?Ext.DomHelper.append(e,b,!0):Ext.DomHelper.insertBefore(d.dom,b,!0);return c.setVisibilityMode(a.DISPLAY),c.hide(),f&&d.setBox&&d.getBox&&c.setBox(d.getBox()),c},clearOpacity:function(){return this.setOpacity("")},clip:function(){var b,a=this,c=a.getData();return c[g]||(c[g]=!0,b=a.getStyle([j,h,i]),c[n]={o:b[j],x:b[h],y:b[i]},a.setStyle(j,e),a.setStyle(h,e),a.setStyle(i,e)),a},destroy:function(){var e,d,b=this,a=b.dom,f=b.getData();a&&b.isAnimate&&b.stopAnimation(),b.callParent(),a&&Ext.isIE8&&a.window!=a&&9!==a.nodeType&&"BODY"!==a.tagName&&"HTML"!==a.tagName&&(c[c.length]=a,x()),f&&(e=f.maskEl,d=f.maskMsg,e&&e.destroy(),d&&d.destroy())},enableDisplayMode:function(c){var b=this;return b.setVisibilityMode(a.DISPLAY),void 0!==c&&(b.getData().originalDisplay=c),b},fadeIn:function(c){var b=this.dom;return this.animate(Ext.apply({},c,{opacity:1,internalListeners:{beforeanimate:function(c){var a=Ext.fly(b,"_anim");a.isStyle("display","none")?a.setDisplayed(""):a.show()}}})),this},fadeOut:function(a){var b=this,c=b.dom;return a=Ext.apply({opacity:0,internalListeners:{afteranimate:function(d){if(c&&0===d.to.opacity){var b=Ext.fly(c,"_anim");a.useDisplay?b.setDisplayed(!1):b.hide()}}}},a),b.animate(a),b},fixDisplay:function(){var a=this;a.isStyle(d,s)&&(a.setStyle(o,e),a.setStyle(d,a._getDisplay()),a.isStyle(d,s)&&a.setStyle(d,"block"))},frame:function(b,c,a){var e,d=this,f=d.dom;return b=b||"#C3DAF9",c=c||1,a=a||{},e=function(){var d,e,g=Ext.fly(f,"_anim"),i=this;g.show(),d=g.getBox(),e=Ext.getBody().createChild({role:"presentation",id:g.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35e3,border:"0px solid "+b}}),new Ext.fx.Anim({target:e,duration:a.duration||1e3,iterations:c,from:{top:d.y,left:d.x,borderWidth:0,opacity:1,height:d.height,width:d.width},to:{top:d.y-20,left:d.x-20,borderWidth:10,opacity:0,height:d.height+40,width:d.width+40}}).on("afteranimate",function(){e.destroy(),i.end()})},d.animate({duration:2*Math.max(a.duration,500)||2e3,listeners:{beforeanimate:{fn:e}},callback:a.callback,scope:a.scope}),d},getColor:function(h,f,c){var d,g,a=this.getStyle(h),b=c||""===c?c:"#",e=0;if(!a||/transparent|inherit/.test(a))return f;if(/^r/.test(a))for(g=(a=a.slice(4,a.length-1).split(",")).length;e<g;e++)b+=((d=parseInt(a[e],10))<16?"0":"")+d.toString(16);else b+=3===(a=a.replace("#","")).length?a.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):a;return 5<b.length?b.toLowerCase():f},getLoader:function(){var b=this.getData(),a=b.loader;return a||(b.loader=a=new Ext.ElementLoader({target:this})),a},getPositioning:function(c){var a=this.getStyle(["left","top","position","z-index"]),b=this.dom;return c&&("auto"===a.left&&(a.left=b.offsetLeft+"px"),"auto"===a.top&&(a.top=b.offsetTop+"px")),a},ghost:function(a,e){var c,b=this,d=b.dom;return a=a||"b",c=function(){var g=Ext.fly(d,"_anim"),f=g.getWidth(),e=g.getHeight(),c=g.getXY(),h=g.getPositioning(),b={opacity:0};switch(a){case"t":b.y=c[1]-e;break;case"l":b.x=c[0]-f;break;case"r":b.x=c[0]+f;break;case"b":b.y=c[1]+e;break;case"tl":b.x=c[0]-f,b.y=c[1]-e;break;case"bl":b.x=c[0]-f,b.y=c[1]+e;break;case"br":b.x=c[0]+f,b.y=c[1]+e;break;case"tr":b.x=c[0]+f,b.y=c[1]-e}this.to=b,this.on("afteranimate",function(){var a=Ext.fly(d,"_anim");a&&(a.hide(),a.clearOpacity(),a.setPositioning(h))})},b.animate(Ext.applyIf(e||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:c}})),b},hide:function(a){return"string"==typeof a?this.setVisible(!1,a):this.setVisible(!1,this.anim(a)),this},highlight:function(k,b){var i,h,c,d,a,g=this,e=g.dom,j={};return d=(b=b||{}).listeners||{},j[c=b.attr||"backgroundColor"]=k||"ffff9c",b.to?h=b.to:(h={})[c]=b.endColor||g.getColor(c,"ffffff",""),b.listeners=Ext.apply(Ext.apply({},d),{beforeanimate:function(){i=e.style[c];var b=Ext.fly(e,"_anim");if(b.clearOpacity(),b.show(),a=d.beforeanimate)return(a.fn||a).apply(a.scope||d.scope||t,arguments)},afteranimate:function(){e&&(e.style[c]=i),(a=d.afteranimate)&&(a.fn||a).apply(a.scope||d.scope||t,arguments)}}),g.animate(Ext.apply({},b,{duration:1e3,easing:"ease-in",from:j,to:h})),g},hover:function(d,e,c,b){var a=this;return a.on("mouseenter",d,c||a.dom,b),a.on("mouseleave",e,c||a.dom,b),a},initDD:function(c,b,a){var d=new Ext.dd.DD(Ext.id(this.dom),c,b);return Ext.apply(d,a)},initDDProxy:function(c,b,a){var d=new Ext.dd.DDProxy(Ext.id(this.dom),c,b);return Ext.apply(d,a)},initDDTarget:function(c,b,a){var d=new Ext.dd.DDTarget(Ext.id(this.dom),c,b);return Ext.apply(d,a)},isFocusable:function(){var c,a=this.dom,b=!1;return a&&!a.disabled&&(c=a.nodeName,b=!!Ext.Element.naturallyFocusableTags[c]||("A"===c||"LINK"===c)&&!!a.href||null!=a.getAttribute("tabIndex")||"true"===a.contentEditable,Ext.isIE8&&"INPUT"===c&&"hidden"===a.type&&(b=!1),b=b&&this.isVisible(!0)),b},isInputField:function(){var a=this.dom,b=a.contentEditable;return!!(F[a.tagName]&&"button"!==a.type||""===b||"true"===b)},isTabbable:function(f){var e,d,b,c=this.dom,a=!1;return c&&!c.disabled&&(e=c.nodeName,d=null!=(b=c.getAttribute("tabIndex")),b-=0,"A"===e||"LINK"===e?a=c.href?!(d&&b<0):"true"===c.contentEditable&&!d||d&&0<=b:"true"===c.contentEditable||Ext.Element.naturallyTabbableTags[e]?a=!(d&&b<0):d&&0<=b&&(a=!0),Ext.isIE8&&"INPUT"===e&&"hidden"===c.type&&(a=!1),a=a&&(f||(!this.component||this.component.isVisible(!0))&&this.isVisible(!0))),a},isMasked:function(g){var a,b=this,f=b.getData(),e=f.maskEl,d=f.maskMsg,c=!1;if(e&&e.isVisible())d&&d.center(b),c=!0;else if(g&&(a=b.findParentNode()))return Ext.fly(a).isMasked(g);return c},load:function(a){return this.getLoader().load(a),this},mask:function(h,f,i){var e,c=this,d=c.dom,g=c.getData(),a=g.maskEl;return J.test(d.tagName)&&"static"===c.getStyle("position")||c.addCls(k),a&&a.destroy(),a=Ext.DomHelper.append(d,{role:"presentation",cls:Ext.baseCSSPrefix+"mask "+Ext.baseCSSPrefix+"border-box",children:{role:"presentation",cls:f?m+" "+f:m,cn:{tag:"div",role:"presentation",cls:Ext.baseCSSPrefix+"mask-msg-inner",cn:{tag:"div",role:"presentation",cls:Ext.baseCSSPrefix+"mask-msg-text",html:h||""}}}},!0),e=Ext.get(a.dom.firstChild),g.maskEl=a,c.addCls(r),a.setDisplayed(!0),"string"==typeof h?(e.setDisplayed(!0),e.center(c)):e.setDisplayed(!1),d===b.body&&a.addCls(Ext.baseCSSPrefix+"mask-fixed"),c.saveTabbableState({skipSelf:d===b.body}),Ext.isIE9m&&d!==b.body&&c.isStyle("height","auto")&&a.setSize(void 0,i||c.getHeight()),a},monitorMouseLeave:function(e,d,f){var b,c=this,a={mouseleave:function(a){Ext.isIE9m&&a.enableIEAsync(),b=Ext.defer(d,e,f||c,[a])},mouseenter:function(){clearTimeout(b)}};return c.on(a),a},puff:function(a){var d,c=this,e=c.dom,b=c.getBox(),f=c.getStyle(["width","height","left","right","top","bottom","position","z-index","font-size","opacity"],!0);return a=Ext.applyIf(a||{},{easing:"ease-out",duration:500,useDisplay:!1}),d=function(){var c=Ext.fly(e,"_anim");c.clearOpacity(),c.show(),this.to={width:2*b.width,height:2*b.height,x:b.x-b.width/2,y:b.y-b.height/2,opacity:0,fontSize:"200%"},this.on("afteranimate",function(){var b=Ext.fly(e,"_anim");b&&(a.useDisplay?b.setDisplayed(!1):b.hide(),b.setStyle(f),Ext.callback(a.callback,a.scope))})},c.animate({duration:a.duration,easing:a.easing,listeners:{beforeanimate:{fn:d}}}),c},selectable:function(){var b=this;return b.dom.unselectable="",b.removeCls(a.unselectableCls),b.addCls(a.selectableCls),b},setCapture:function(){var a=this.dom;Ext.isIE9m&&a.setCapture&&a.setCapture()},setHeight:function(c,a){var b=this;return a&&b.anim?(Ext.isObject(a)||(a={}),b.animate(Ext.applyIf({to:{height:c}},a))):b.callParent(arguments),b},setHorizontal:function(){var a=this,b=a.verticalCls;delete a.vertical,b&&(delete a.verticalCls,a.removeCls(b)),delete a.setWidth,delete a.setHeight,Ext.isIE8||(delete a.getWidth,delete a.getHeight),delete a.styleHooks},updateText:function(d){var c},setHtml:function(c,i,g,d){var f,e,h,a=this;return a.dom?(c=c||"",e=a.dom,!0!==i?(e.innerHTML=c,Ext.callback(g,a)):(f=Ext.id(),c+='<span id="'+f+'" role="presentation"></span>',h=Ext.interval(function(){var n,e,k,j,i,m,l;if(!(m=b.getElementById(f)))return!1;for(clearInterval(h),Ext.removeNode(m),n=Ext.getHead().dom;e=z.exec(c);)(j=!!(k=e[1])&&k.match(M))&&j[2]?((l=b.createElement("script")).src=j[2],(i=k.match(K))&&i[2]&&(l.type=i[2]),n.appendChild(l)):e[2]&&0<e[2].length&&(d?Ext.functionFactory(e[2]).call(d):Ext.globalEval(e[2]));Ext.callback(g,d||a)},20),e.innerHTML=c.replace(u,"")),a):a},setOpacity:function(c,b){var a=this;return a.dom&&(b&&a.anim?("object"!=typeof b&&(b={duration:350,easing:"ease-in"}),a.animate(Ext.applyIf({to:{opacity:c}},b))):a.setStyle("opacity",c)),a},setPositioning:function(a){return this.setStyle(a)},setVertical:function(e,d){var b=this,c=a.prototype;b.vertical=!0,d&&b.addCls(b.verticalCls=d),b.setWidth=c.setHeight,b.setHeight=c.setWidth,Ext.isIE8||(b.getWidth=c.getHeight,b.getHeight=c.getWidth),b.styleHooks=270===e?c.verticalStyleHooks270:c.verticalStyleHooks90},setSize:function(c,e,d){var b=this;return Ext.isObject(c)&&(d=e,e=c.height,c=c.width),d&&b.anim?(!0===d&&(d={}),b.animate(Ext.applyIf({to:{width:c,height:e}},d))):(b.dom.style.width=a.addUnits(c),b.dom.style.height=a.addUnits(e),(b.shadow||b.shim)&&b.syncUnderlays()),b},setVisible:function(f,g){var b=this,h=b.dom,c=function(d){var c=d.getData(),b=c[q];return void 0===b&&(c[q]=b=a.VISIBILITY),b}(b);if("string"==typeof g){switch(g){case d:c=a.DISPLAY;break;case o:c=a.VISIBILITY;break;case"offsets":c=a.OFFSETS;break;case"clip":c=a.CLIP}b.setVisibilityMode(c),g=!1}if(g&&b.anim)f&&(b.setOpacity(.01),b.setVisible(!0)),Ext.isObject(g)||(g={duration:350,easing:"ease-in"}),b.animate(Ext.applyIf({callback:function(){f||Ext.fly(h).setVisible(!1).setOpacity(1)},to:{opacity:f?1:0}},g));else{if(c===a.DISPLAY)return b.setDisplayed(f);c===a.OFFSETS?b[f?"removeCls":"addCls"](y):c===a.CLIP?b[f?"removeCls":"addCls"](C):c===a.VISIBILITY&&(b.fixDisplay(),h.style.visibility=f?"":e)}return b.getData().isVisible=f,(b.shadow||b.shim)&&b.setUnderlaysVisible(f),b},setWidth:function(c,a){var b=this;return a&&b.anim?(Ext.isObject(a)||(a={}),b.animate(Ext.applyIf({to:{width:c}},a))):b.callParent(arguments),b},setX:function(b,a){return this.setXY([b,this.getY()],a)},setXY:function(c,a){var b=this;return a&&b.anim?(Ext.isObject(a)||(a={}),b.animate(Ext.applyIf({to:{x:c[0],y:c[1]}},a))):b.callParent([c]),this},setY:function(b,a){return this.setXY([this.getX(),b],a)},show:function(a){return"string"==typeof a?this.setVisible(!0,a):this.setVisible(!0,this.anim(a)),this},slideIn:function(a,c,d){var j,e,f,i,b=this,g=b.dom,h=g.style;return a=a||"t",c=c||{},j=function(){var j,n,l,k,p=this,o=c.listeners,m=Ext.fly(g,"_anim");switch(d||m.fixDisplay(),j=m.getBox(),"t"!=a&&"b"!=a||0!==j.height?"l"!=a&&"r"!=a||0!==j.width||(j.width=g.scrollWidth):j.height=g.scrollHeight,n=m.getStyle(["width","height","left","right","top","bottom","position","z-index"],!0),m.setSize(j.width,j.height),c.preserveScroll&&(f=m.cacheScrollValues()),k=m.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+m.dom.id,style:{visibility:d?"visible":"hidden"}}),i=k.dom.parentNode,k.setPositioning(m.getPositioning()),k.isStyle("position","static")&&k.position("relative"),m.clearPositioning("auto"),k.clip(),f&&f(),m.setStyle({visibility:"",position:"absolute"}),d&&k.setSize(j.width,j.height),a){case"t":l={from:{width:j.width+"px",height:"0px"},to:{width:j.width+"px",height:j.height+"px"}},h.bottom="0px";break;case"l":l={from:{width:"0px",height:j.height+"px"},to:{width:j.width+"px",height:j.height+"px"}},b.anchorAnimX(a);break;case"r":l={from:{x:j.x+j.width,width:"0px",height:j.height+"px"},to:{x:j.x,width:j.width+"px",height:j.height+"px"}},b.anchorAnimX(a);break;case"b":l={from:{y:j.y+j.height,width:j.width+"px",height:"0px"},to:{y:j.y,width:j.width+"px",height:j.height+"px"}};break;case"tl":l={from:{x:j.x,y:j.y,width:"0px",height:"0px"},to:{width:j.width+"px",height:j.height+"px"}},h.bottom="0px",b.anchorAnimX("l");break;case"bl":l={from:{y:j.y+j.height,width:"0px",height:"0px"},to:{y:j.y,width:j.width+"px",height:j.height+"px"}},b.anchorAnimX("l");break;case"br":l={from:{x:j.x+j.width,y:j.y+j.height,width:"0px",height:"0px"},to:{x:j.x,y:j.y,width:j.width+"px",height:j.height+"px"}},b.anchorAnimX("r");break;case"tr":l={from:{x:j.x+j.width,width:"0px",height:"0px"},to:{x:j.x,width:j.width+"px",height:j.height+"px"}},h.bottom="0px",b.anchorAnimX("r")}k.show(),delete(e=Ext.apply({},c)).listeners,(e=new Ext.fx.Anim(Ext.applyIf(e,{target:k,duration:500,easing:"ease-out",from:d?l.to:l.from,to:d?l.from:l.to}))).on("afteranimate",function(){var a=Ext.fly(g,"_anim");a.setStyle(n),d&&(c.useDisplay?a.setDisplayed(!1):a.hide()),k.dom&&(k.dom.parentNode?k.dom.parentNode.insertBefore(a.dom,k.dom):i.appendChild(a.dom),k.destroy()),f&&f(),p.end()}),o&&e.on(o)},b.animate({duration:c.duration?2*Math.max(c.duration,500):1e3,listeners:{beforeanimate:j}}),b},slideOut:function(a,b){return this.slideIn(a,b,!0)},swallowEvent:function(a,f){function e(a){a.stopPropagation(),f&&a.preventDefault()}var c,d,b=this;if(Ext.isArray(a)){for(d=a.length,c=0;c<d;c++)b.on(a[c],e);return b}return b.on(a,e),b},switchOff:function(a){var d,c=this,b=c.dom;return a=Ext.applyIf(a||{},{easing:"ease-in",duration:500,remove:!1,useDisplay:!1}),d=function(){var f,c=Ext.fly(b,"_anim"),h=this,d=c.getSize(),g=c.getXY();c.clearOpacity(),c.clip(),f=c.getPositioning(),new Ext.fx.Animator({target:b,duration:a.duration,easing:a.easing,keyframes:{33:{opacity:.3},66:{height:1,y:g[1]+d.height/2},100:{width:1,x:g[0]+d.width/2}}}).on("afteranimate",function(){var c=Ext.fly(b,"_anim");a.useDisplay?c.setDisplayed(!1):c.hide(),c.clearOpacity(),c.setPositioning(f),c.setSize(d),h.end()})},c.animate({duration:2*Math.max(a.duration,500),listeners:{beforeanimate:{fn:d}},callback:a.callback,scope:a.scope}),c},syncContent:function(d){var b,c,a,g,f,l,h,i=(d=Ext.getDom(d)).childNodes,k=i.length,e=this.dom,j=e.childNodes,n=j.length,m=e._extData;if(Ext.isIE9m&&e.mergeAttributes)e.mergeAttributes(d,!0),e.src=d.src;else for(l=(f=d.attributes).length,b=0;b<l;b++)"id"!==(h=f[b].name)&&e.setAttribute(h,f[b].value);if(m&&(m.isSynchronized=!1),k===n)for(b=0;b<k;b++){if(a=i[b],c=j[b],(g=a.nodeType)!==c.nodeType||1===g&&a.tagName!==c.tagName)return void(e.innerHTML=d.innerHTML);3===g?c.data=a.data:(a.id&&c.id!==a.id&&(c.id=a.id),c.style.cssText=a.style.cssText,c.className=a.className,Ext.fly(c,"_syncContent").syncContent(a))}else e.innerHTML=d.innerHTML},toggle:function(b){var a=this;return a.setVisible(!a.isVisible(),a.anim(b)),a},unmask:function(){var c,d=this,e=d.getData(),a=e.maskEl;a&&((c=a.dom.style).clearExpression&&(c.clearExpression("width"),c.clearExpression("height")),a&&(a.destroy(),delete e.maskEl),d.removeCls([r,k])),d.restoreTabbableState(d.dom===b.body)},unclip:function(){var a,b=this,c=b.getData();return c[g]&&(c[g]=!1,(a=c[n]).o&&b.setStyle(j,a.o),a.x&&b.setStyle(h,a.x),a.y&&b.setStyle(i,a.y)),b},translate:function(a,b,c){Ext.supports.CssTransforms&&!Ext.isIE9m?this.callParent(arguments):(null!=a&&(this.dom.style.left=a+"px"),null!=b&&(this.dom.style.top=b+"px"))},unselectable:function(){var b=this;return Ext.isOpera&&(b.dom.unselectable="on"),b.removeCls(a.selectableCls),b.addCls(a.unselectableCls),b},privates:{findTabbableElements:function(d){var l,k,a,h,g,i,c,o,f,j,m,e=this.dom,n=Ext.Element.tabbableSavedCounterAttribute,b=[],p=0;if(!e)return b;if(d&&(l=d.skipSelf,k=d.skipChildren,a=d.excludeRoot,h=d.includeSaved,g=d.includeHidden),(a=a&&Ext.getDom(a))&&a.contains(e))return b;if(!l&&(h&&e.hasAttribute(n)||this.isTabbable(g))&&(b[p++]=e),k)return b;if(!(j=(i=e.querySelectorAll(Ext.Element.tabbableSelector)).length))return b;for(o=new Ext.dom.Fly,f=0;f<j;f++)m=+(c=i[f]).getAttribute("tabIndex"),!(h&&c.hasAttribute(n)||!(m<0)&&o.attach(c).isTabbable(g))||a&&(a===c||a.contains(c))||(b[p++]=c);return b},saveTabbableState:function(b){var f,c,a,d,h,e=Ext.Element.tabbableSavedCounterAttribute,g=Ext.Element.tabbableSavedValueAttribute;for(b&&null!=b.includeSaved||((b=Ext.Object.chain(b||null)).includeSaved=!0),d=0,h=(c=this.findTabbableElements(b)).length;d<h;d++)0<(f=+(a=c[d]).getAttribute(e))?a.setAttribute(e,++f):(a.hasAttribute("tabIndex")?a.setAttribute(g,a.getAttribute("tabIndex")):a.setAttribute(g,"none"),a.setAttribute("tabIndex","-1"),a.setAttribute(e,"1"));return c},restoreTabbableState:function(k,j){var h,f,a,d,i,g=this.dom,c=Ext.Element.tabbableSavedCounterAttribute,e=Ext.Element.tabbableSavedValueAttribute,b=[];if(!g)return this;for(j||(b=Ext.Array.from(g.querySelectorAll("["+c+"]"))),k||b.unshift(g),d=0,i=b.length;d<i;d++)(a=b[d]).hasAttribute(c)&&a.hasAttribute(e)&&(1<(f=+a.getAttribute(c))?a.setAttribute(c,--f):("none"===(h=a.getAttribute(e))?a.removeAttribute("tabIndex"):a.setAttribute("tabIndex",h),a.removeAttribute(e),a.removeAttribute(c)));return b}},deprecated:{"4.0":{methods:{pause:function(b){return Ext.fx.Manager.setFxDefaults(this.id,{delay:b}),this},scale:function(c,a,b){return this.animate(Ext.apply({},b,{width:c,height:a})),this},shift:function(a){return this.animate(a),this}}},4.2:{methods:{moveTo:function(b,c,a){return this.setXY([b,c],a)},setBounds:function(d,e,c,b,a){return this.setBox({x:d,y:e,width:c,height:b},a)},setLeftTop:function(d,e){var b=this,c=b.dom.style;return c.left=a.addUnits(d),c.top=a.addUnits(e),(b.shadow||b.shim)&&b.syncUnderlays(),b},setLocation:function(b,c,a){return this.setXY([b,c],a)}}},"5.0":{methods:{getAttributeNS:function(a,b){return this.getAttribute(b,a)},getCenterXY:function(){return this.getAlignToXY(b,"c-c")},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle("height"))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle("width"))||0},getStyleSize:function(){var c,g,f,d=this,e=this.dom;return e===b||e===b.body?{width:a.getViewportWidth(),height:a.getViewportHeight()}:((c=d.getStyle(["height","width"],!0)).width&&"auto"!==c.width&&(g=parseFloat(c.width)),c.height&&"auto"!==c.height&&(f=parseFloat(c.height)),{width:g||d.getWidth(!0),height:f||d.getHeight(!0)})},isBorderBox:function(){return!0},isDisplayed:function(){return!this.isStyle("display","none")},focusable:"isFocusable"}}}}}(),function(){var c,b,l,m,i,j,n,g=Ext.dom.Element,a=g.prototype,t=!Ext.isIE8,f=document,q=f.defaultView,p=/alpha\(opacity=(.*)\)/i,w=/^\s+|\s+$/g,d=a.styleHooks,e=Ext.supports;if(a._init(g),delete a._init,Ext.plainTableCls=Ext.baseCSSPrefix+"table-plain",Ext.plainListCls=Ext.baseCSSPrefix+"list-plain",Ext.CompositeElementLite&&Ext.CompositeElementLite.importElementMethods(),!e.Opacity&&Ext.isIE&&Ext.apply(d.opacity,{get:function(d){var b,a,c=d.style.filter;return c.match&&(b=c.match(p))&&(a=parseFloat(b[1]),!isNaN(a))?a?a/100:0:1},set:function(d,a){var b=d.style,c=b.filter.replace(p,"").replace(w,"");b.zoom=1,"number"==typeof a&&0<=a&&a<1?(a*=100,b.filter=c+(c.length?" ":"")+"alpha(opacity="+a+")"):b.filter=c}}),!e.matchesSelector){var h,r=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,v=/\-/g,k={};a.matcherCache=k,a.is=function(a){if(!a)return!0;var g,e,d,c,j,l,i,b=this.dom;if(1!==b.nodeType)return!1;if(!(d=Ext.isFunction(a)?a:k[a])){if(!(e=a.match(r)))return(c=b.parentNode)||(j=!0,c=h=h||f.createDocumentFragment(),h.appendChild(b)),l=-1!==Ext.Array.indexOf(Ext.fly(c,"_is").query(a),b),j&&h.removeChild(b),l;i=e[1],g=e[2],k[a]=d=g?function(a,c){var b=new RegExp("(?:^|\\s+)"+c.replace(v,"\\-")+"(?:\\s+|$)");return a&&"*"!==a?(a=a.toUpperCase(),function(c){return c.tagName===a&&b.test(c.className)}):function(a){return b.test(a.className)}}(i,g):function(a){return a=a.toUpperCase(),function(b){return b.tagName===a}}(i)}return d(b)}}if(q&&q.getComputedStyle||(a.getStyle=function(o,p){var h,d,c,f,b,k,j=this,e=j.dom,n="string"!=typeof o,a=o,i=a,r=1,m=p,l=j.styleHooks;if(n&&(d={},a=i[0],k=0,!(r=i.length)))return d;if(!e||e.documentElement)return d||"";h=e.style,p?b=h:(b=e.currentStyle)||(m=!0,b=h);do{if((c=l[a])||(l[a]=c={name:g.normalize(a)}),f=c.get?c.get(e,j,m,b):b[c.name],!n)return f;d[a]=f,a=i[++k]}while(k<r);return d}),Ext.isIE8){for(n=function(c,d,b,a){return"none"===a[this.styleName]?"0px":a[this.name]},m=(l=["Top","Right","Bottom","Left"]).length;m--;)j="border"+(i=l[m])+"Width",d["border-"+i.toLowerCase()+"-width"]=d[j]={name:j,styleName:"border"+i+"Style",get:n};var o=Ext.baseCSSPrefix+"sync-repaint";a.syncRepaint=function(){this.addCls(o),this.getWidth(),this.removeCls(o)}}Ext.isIE10m&&Ext.override(g,{focus:function(c,a){var d,b=this;if(a=a||b.dom,Number(c))Ext.defer(b.focus,c,b,[null,a]);else{Ext.GlobalEvents.fireEvent("beforefocus",a),!a||"INPUT"!==a.tagName&&"TEXTAREA"!==a.tagname||(Ext.synchronouslyFocusing=document.activeElement);try{a.focus()}catch(x){d=x}Ext.synchronouslyFocusing&&document.activeElement!==a&&!d&&a.focus(),Ext.synchronouslyFocusing=null}return b}}),Ext.apply(Ext,{enableGarbageCollector:!0,isBorderBox:!0,useShims:!1,getDetachedBody:function(){var a=Ext.detachedBodyEl;return a||(a=f.createElement("div"),Ext.detachedBodyEl=a=new Ext.dom.Fly(a),a.isDetachedBody=!0),a},getElementById:function(c){var b,a=f.getElementById(c);return!a&&(b=Ext.detachedBodyEl)&&(a=b.dom.querySelector(Ext.makeIdSelector(c))),a},addBehaviors:function(e){if(Ext.isReady){var c,d,a,b={};for(d in e)(c=d.split("@"))[1]&&(b[a=c[0]]||(b[a]=Ext.fly(document).select(a,!0)),b[a].on(c[1],e[d]));b=null}else Ext.onInternalReady(function(){Ext.addBehaviors(e)})}}),Ext.isIE9m?(Ext.getElementById=function(c){var b,a=f.getElementById(c);return!a&&(b=Ext.detachedBodyEl)&&(a=b.dom.all[c]),a},a.getById=function(d,g){var a,c,e=this.dom,b=null;return e&&(c=t&&f.getElementById(d)||e.all[d])&&(b=g?c:((a=Ext.cache[d])&&(a.skipGarbageCollection||!Ext.isGarbage(a.dom)?b=a:a.destroy()),b||new Ext.Element(c))),b}):f.querySelector||(Ext.getDetachedBody=Ext.getBody,Ext.getElementById=function(a){return f.getElementById(a)},a.getById=function(c,b){var a=f.getElementById(c);return b?a:a?Ext.get(a):null}),!Ext.isIE||Ext.isIE9p&&9<=f.documentMode||(a.getAttribute=function(a,c){var b,d=this.dom;return c?"undefined"!=(b=typeof d[c+":"+a])&&"unknown"!=b&&d[c+":"+a]||null:("for"===a&&(a="htmlFor"),d[a]||null)}),Ext.onInternalReady(function(){var i,l,k,j,o=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,h=[],p=a.setWidth,n=a.setHeight,m=a.setSize,q=/^\d+(?:\.\d*)?px$/i;function fixTransparent(d,e,c,b){var a=b[this.name]||"";return o.test(a)?"transparent":a}function getRightMarginFixCleaner(i){var a,d,b,c,h=e.DisplayChangeInputSelectionBug,f=e.DisplayChangeTextAreaSelectionBug;return(h||f)&&(d=(a=g.getActiveElement())&&a.tagName,(f&&"TEXTAREA"===d||h&&"INPUT"===d&&"text"===a.type)&&Ext.fly(i).isAncestor(a)&&(b=a.selectionStart,c=a.selectionEnd,Ext.isNumber(b)&&Ext.isNumber(c)))?function(a,b,c){return function(){a.selectionStart=b,a.selectionEnd=c}}(a,b,c):Ext.emptyFn}if(e.FixedTableWidthBug&&(d.width={name:"width",set:function(c,e,f){var a=c.style,b=f._needsTableWidthFix,d=a.display;b&&(a.display="none"),a.width=e,b&&(c.scrollWidth,a.display=d)}},a.setWidth=function(g,b){var a=this,e=a.dom,c=e.style,d=a._needsTableWidthFix,f=c.display;return d&&!b&&(c.display="none"),p.call(a,g,b),d&&!b&&(e.scrollWidth,c.display=f),a},a.setSize=function(h,g,b){var a=this,e=a.dom,c=e.style,d=a._needsTableWidthFix,f=c.display;return d&&!b&&(c.display="none"),m.call(a,h,g,b),d&&!b&&(e.scrollWidth,c.display=f),a}),Ext.isIE8&&(d.height={name:"height",set:function(f,b,e){var d,c,a=e.component;a&&a._syncFrameHeight&&e===a.el&&(c=a.frameBody.dom.style,q.test(b)?(d=a.getFrameInfo())&&(c.height=parseInt(b,10)-d.height+"px"):b&&"auto"!==b||(c.height="")),f.style.height=b}},a.setHeight=function(b,e){var d,c,a=this.component;return a&&a._syncFrameHeight&&this===a.el&&(c=a.frameBody.dom.style,b&&"auto"!==b?(d=a.getFrameInfo())&&(c.height=b-d.height+"px"):c.height=""),n.call(this,b,e)},a.setSize=function(f,b,e){var d,c,a=this.component;return a&&a._syncFrameHeight&&this===a.el&&(c=a.frameBody.dom.style,b&&"auto"!==b?(d=a.getFrameInfo())&&(c.height=b-d.height+"px"):c.height=""),m.call(this,f,b,e)}),Ext.getDoc().on("selectstart",function(h,a){var e=g.selectableCls,d=g.unselectableCls,b=a&&a.tagName;if("input"!==(b=b&&b.toLowerCase())&&"textarea"!==b)for(;a&&1===a.nodeType&&a!==f.documentElement;){var c=Ext.fly(a);if(c.hasCls(e))return;if(c.hasCls(d))return void h.stopEvent();a=a.parentNode}}),e.RightMargin||(d.marginRight=d["margin-right"]={name:"marginRight",get:e.DisplayChangeInputSelectionBug||e.DisplayChangeTextAreaSelectionBug?function(b,h,g,f){var a,d,e,c=f.marginRight;return"0px"!==c&&(a=b.style,d=getRightMarginFixCleaner(b),e=a.display,a.display="inline-block",c=(g?f:b.ownerDocument.defaultView.getComputedStyle(b,"")).marginRight,a.display=e,d()),c}:function(c,g,f,e){var a,d,b=e.marginRight;return"0px"!==b&&(d=(a=c.style).display,a.display="inline-block",b=(f?e:c.ownerDocument.defaultView.getComputedStyle(c,null)).marginRight,a.display=d),b}}),!e.TransparentColor)for(l=(i=["background-color","border-color","color","outline-color"]).length;l--;)k=i[l],j=g.normalize(k),d[k]=d[j]={name:j,get:fixTransparent};a.verticalStyleHooks90=c=Ext.Object.chain(d),a.verticalStyleHooks270=b=Ext.Object.chain(d),c.width=d.height||{name:"height"},c.height=d.width||{name:"width"},c["margin-top"]={name:"marginLeft"},c["margin-right"]={name:"marginTop"},c["margin-bottom"]={name:"marginRight"},c["margin-left"]={name:"marginBottom"},c["padding-top"]={name:"paddingLeft"},c["padding-right"]={name:"paddingTop"},c["padding-bottom"]={name:"paddingRight"},c["padding-left"]={name:"paddingBottom"},c["border-top"]={name:"borderLeft"},c["border-right"]={name:"borderTop"},c["border-bottom"]={name:"borderRight"},c["border-left"]={name:"borderBottom"},b.width=d.height||{name:"height"},b.height=d.width||{name:"width"},b["margin-top"]={name:"marginRight"},b["margin-right"]={name:"marginBottom"},b["margin-bottom"]={name:"marginLeft"},b["margin-left"]={name:"marginTop"},b["padding-top"]={name:"paddingRight"},b["padding-right"]={name:"paddingBottom"},b["padding-bottom"]={name:"paddingLeft"},b["padding-left"]={name:"paddingTop"},b["border-top"]={name:"borderRight"},b["border-right"]={name:"borderBottom"},b["border-bottom"]={name:"borderLeft"},b["border-left"]={name:"borderTop"},Ext.scopeCss||h.push(Ext.baseCSSPrefix+"body"),e.Touch&&h.push(Ext.baseCSSPrefix+"touch"),Ext.isIE&&Ext.isIE9m&&(h.push(Ext.baseCSSPrefix+"ie",Ext.baseCSSPrefix+"ie9m"),h.push(Ext.baseCSSPrefix+"ie8p"),Ext.isIE8?h.push(Ext.baseCSSPrefix+"ie8"):h.push(Ext.baseCSSPrefix+"ie9",Ext.baseCSSPrefix+"ie9p"),Ext.isIE8m&&h.push(Ext.baseCSSPrefix+"ie8m")),Ext.isIE10&&h.push(Ext.baseCSSPrefix+"ie10"),Ext.isIE10p&&h.push(Ext.baseCSSPrefix+"ie10p"),Ext.isIE11&&h.push(Ext.baseCSSPrefix+"ie11"),Ext.isGecko&&h.push(Ext.baseCSSPrefix+"gecko"),Ext.isOpera&&h.push(Ext.baseCSSPrefix+"opera"),Ext.isOpera12m&&h.push(Ext.baseCSSPrefix+"opera12m"),Ext.isWebKit&&h.push(Ext.baseCSSPrefix+"webkit"),Ext.isSafari&&h.push(Ext.baseCSSPrefix+"safari"),Ext.isChrome&&h.push(Ext.baseCSSPrefix+"chrome"),Ext.isMac&&h.push(Ext.baseCSSPrefix+"mac"),Ext.isLinux&&h.push(Ext.baseCSSPrefix+"linux"),e.CSS3BorderRadius||h.push(Ext.baseCSSPrefix+"nbr"),e.CSS3LinearGradient||h.push(Ext.baseCSSPrefix+"nlg"),e.Touch&&h.push(Ext.baseCSSPrefix+"touch"),Ext.getBody().addCls(h)},null,{priority:1500})}),Ext.define("Ext.GlobalEvents",{extend:Ext.mixin.Observable,alternateClassName:"Ext.globalEvents",observableType:"global",singleton:!0,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var a=this;a.callParent(),Ext.onInternalReady(function(){a.attachListeners()})},attachListeners:function(){Ext.get(window).on("resize",this.fireResize,this,{buffer:this.resizeBuffer}),Ext.getDoc().on("mousedown",this.fireMouseDown,this)},fireMouseDown:function(a){this.fireEvent("mousedown",a)},fireResize:function(){var a=this,d=Ext.Element,c=d.getViewportWidth(),b=d.getViewportHeight();a.curHeight===b&&a.curWidth===c||(a.curHeight=b,a.curWidth=c,a.fireEvent("resize",c,b))}},function(a){Ext.on=function(){return a.addListener.apply(a,arguments)},Ext.un=function(){return a.removeListener.apply(a,arguments)}}),Ext.define("Ext.overrides.GlobalEvents",{override:"Ext.GlobalEvents",deprecated:{5:{methods:{addListener:function(a,d,i,f,h,g,e){var c,b;if("ready"===a)b=d;else if("string"!=typeof a)for(c in a)"ready"===c&&(b=a[c]);b&&Ext.onReady(b),this.callParent([a,d,i,f,h,g,e])}}}}}),Ext.USE_NATIVE_JSON=!1,Ext.JSON=new function(){var me=this,hasNative=window.JSON&&"[object JSON]"===JSON.toString(),useHasOwn=!!{}.hasOwnProperty,pad=function(a){return a<10?"0"+a:a},doDecode=function(json){return eval("("+json+")")},doEncode=function(a,b){return null==a?"null":Ext.isDate(a)?me.encodeDate(a):Ext.isString(a)?Ext.isMSDate(a)?me.encodeMSDate(a):me.encodeString(a):"number"==typeof a?isFinite(a)?String(a):"null":Ext.isBoolean(a)?String(a):a.toJSON?a.toJSON():Ext.isArray(a)?encodeArray(a,b):Ext.isObject(a)?encodeObject(a,b):"function"==typeof a?"null":"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\v":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(a){return'"'+a.replace(charToReplace,function(a){var b=m[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(a){return'"'+a+'"'},encodeArrayPretty=function(e,d){var b,f=e.length,c=d+"   ",g=","+c,a=["[",c];for(b=0;b<f;b+=1)a.push(me.encodeValue(e[b],c),g);return a[a.length-1]=d+"]",a.join("")},encodeObjectPretty=function(e,f){var c,a,d=f+"   ",g=","+d,b=["{",d];for(c in e)if(a=e[c],!useHasOwn||e.hasOwnProperty(c)){if("function"==typeof a||void 0===a)continue;b.push(me.encodeValue(c)+": "+me.encodeValue(a,d),g)}return b[b.length-1]=f+"}",b.join("")},encodeArray=function(c,d){if(d)return encodeArrayPretty(c,d);var b,a=["[",""],e=c.length;for(b=0;b<e;b+=1)a.push(me.encodeValue(c[b]),",");return a[a.length-1]="]",a.join("")},encodeObject=function(d,e){if(e)return encodeObjectPretty(d,e);var c,a,b=["{",""];for(c in d)if(a=d[c],!useHasOwn||d.hasOwnProperty(c)){if("function"==typeof a||void 0===a)continue;b.push(me.encodeValue(c),":",me.encodeValue(a),",")}return b[b.length-1]="}",b.join("")};me.encodeString=encodeString,me.encodeValue=doEncode,me.encodeDate=function(a){return'"'+a.getFullYear()+"-"+pad(a.getMonth()+1)+"-"+pad(a.getDate())+"T"+pad(a.getHours())+":"+pad(a.getMinutes())+":"+pad(a.getSeconds())+'"'},me.encode=function(a){return hasNative&&Ext.USE_NATIVE_JSON?JSON.stringify(a):me.encodeValue(a)},me.decode=function(a,b){try{return hasNative&&Ext.USE_NATIVE_JSON?JSON.parse(a):doDecode(a)}catch(c){if(b)return null;Ext.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+a})}},me.encodeMSDate=encodeMSDate,Ext.util||(Ext.util={}),Ext.util.JSON=me,Ext.encode=me.encode,Ext.decode=me.decode},Ext.define("Ext.mixin.Inheritable",{extend:Ext.Mixin,mixinConfig:{id:"inheritable"},getInherited:function(i){var d,e,g,c,a=this,b=i&&a.inheritedStateInner||a.inheritedState,h=a.getRefOwner(),f=a.isContainer;return b&&!b.invalid||(d=a.getRefOwner(),c=a.ownerLayout,h&&(g=!c||c===h.layout),a.inheritedState=b=Ext.Object.chain(d?d.getInherited(g):Ext.rootInheritedState),f&&(a.inheritedStateInner=e=Ext.Object.chain(b)),a.initInheritedState(b,e),b=f&&i?a.inheritedStateInner:a.inheritedState),b},getInheritedConfig:function(b,e){var d,c,a=this.inheritedState;return a&&!a.invalid||(a=this.getInherited()),c=a[b],e&&a.hasOwnProperty(b)&&(d=c,delete a[b],c=a[b],a[b]=d),c},resolveListenerScope:function(f,d){var c,a=this,e="boolean"==typeof d,b=Ext._namedScopes[f];return b?b.isController?c=a.getInheritedConfig("controller",e?d:!b.isSelf):b.isSelf?c=a.getInheritedConfig("defaultListenerScope",e&&d)||a:b.isThis&&(c=a):c=a.getInheritedConfig("defaultListenerScope",!e||d)||f||a,c||null},resolveSatelliteListenerScope:function(e,d){var a,c=this,b=Ext._namedScopes[d];return b?b.isController?a=c.getInheritedConfig("controller"):b.isSelf?a=c.getInheritedConfig("defaultListenerScope")||e:b.isThis&&(a=e):a=c.getInheritedConfig("defaultListenerScope")||d||c,a||null},lookupReferenceHolder:function(a){return this.getInheritedConfig("referenceHolder",!1!==a)||null},getRefOwner:function(){var a=this;return a.ownerCt||a.parent||a.$initParent||a.ownerCmp||a.floatParent},invalidateInheritedState:function(){var a=this.inheritedState;a&&(a.invalid=!0,delete this.inheritedState)},privates:{fixReference:function(){var a,b=this;b.getReference()&&(a=b.lookupReferenceHolder())&&a.attachReference(b)},onInheritedAdd:function(c,b){var a=this;a.inheritedState&&b&&a.invalidateInheritedState(),a.getReference()&&Ext.ComponentManager.markReferencesDirty()},onInheritedRemove:function(c){var b,a=this;a.getReference()&&(b=a.lookupReferenceHolder())&&b.clearReference(a),a.inheritedState&&!c&&a.invalidateInheritedState()}}},function(){Ext.rootInheritedState={}}),Ext.define("Ext.mixin.Bindable",{mixinId:"bindable",config:{bind:{$value:null,lazy:!0},controller:null,defaultListenerScope:!1,publishes:{$value:null,lazy:!0,merge:function(a,b){return this.mergeSets(a,b)}},reference:null,session:{$value:null,lazy:!0},twoWayBindable:{$value:null,lazy:!0,merge:function(a,b){return this.mergeSets(a,b)}},viewModel:{$value:null,lazy:!0}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(b){var a=this,f=a.getReference(),c=a.getController(),d=a.getConfig("viewModel",!0),e=a.getConfig("session",!0),g=a.getDefaultListenerScope();c&&(b.controller=c),g?b.defaultListenerScope=a:c&&(b.defaultListenerScope=c),d&&(d.isViewModel||(d=a),b.viewModel=d),e&&(e.isSession||(e=a),b.session=e),f&&(a.referenceKey=(b.referencePath||"")+f,a.viewModelKey=(b.viewModelPath||"")+f)},lookupController:function(a){return this.getInheritedConfig("controller",a)||null},lookupSession:function(b){var a=b?null:this.getSession();return a||(a=this.getInheritedConfig("session",b))&&!a.isSession&&(a=a.getInherited().session=a.getSession()),a||null},lookupViewModel:function(b){var a=b?null:this.getViewModel();return a||(a=this.getInheritedConfig("viewModel",b))&&!a.isViewModel&&(a=a.getInherited().viewModel=a.getViewModel()),a||null},publishState:function(b,a){var f,h,k,g,c=this,d=c.publishedState,i=c.getBind(),e=i&&b&&i[b],j=0;if(!e||e.syncing||e.isReadOnly()||(0!==e.calls||null!=a&&a!==c.getInitialConfig()[b])&&e.setValue(a),(h=c.getPublishes())&&(k=c.lookupViewModel())&&(g=c.viewModelKey)){if(b&&d){if(!h[b])return;if(!(a&&a.constructor===Object||a instanceof Array)&&d[b]===a)return;g+=".",g+=b}else{for(f in d=d||(c.publishedState={}),h)++j,d[f]=f===b?a:c[f];if(!j)return;a=d}k.set(g,a)}},privates:{addBindableUpdater:function(d){var c,b=this,a=b.self.$config.configs[d];a&&!b.hasOwnProperty(c=a.names.update)&&(b[c]=a.bindableUpdater||(a.root.bindableUpdater=b.makeBindableUpdater(a)))},applyBind:function(b,e){if(!b)return b;var a,c,f,d=this,i=d.lookupViewModel(),g=d.getTwoWayBindable(),h=d._getBindTemplateScope;for(c in e&&"string"!=typeof e||(e={}),Ext.isString(b)&&(a=b,(b={})[d.defaultBindProperty]=a),b)f=b[c],(a=e[c])&&"string"!=typeof a&&(a.destroy(),a=null),f&&((a=i.bind(f,d.onBindNotify,d))._config=Ext.Config.get(c),a.getTemplateScope=h),e[c]=a,g&&g[c]&&!a.isReadOnly()&&d.addBindableUpdater(c);return e},applyController:function(a){return a&&(a=Ext.Factory.controller(a)).setView(this),a},applyPublishes:function(a){if(this.lookupViewModel())for(var b in a)this.addBindableUpdater(b);return a},applySession:function(a){if(!a)return null;if(!a.isSession){var b=this.lookupSession(!0),c=!0===a?{}:a;a=b?b.spawn(c):new Ext.data.Session(c)}return a},applyViewModel:function(a){var b,c=this;return a?(a.isViewModel||((b={parent:c.lookupViewModel(!0)}).session=c.getSession(),b.parent||(b.session=c.lookupSession()),a&&(a.constructor===Object?Ext.apply(b,a):"string"==typeof a&&(b.type=a)),a=Ext.Factory.viewModel(b)),a):null},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},destroyBindable:function(){var a=this,c=a.getConfig("viewModel",!0),b=a.getConfig("session",!0),d=a.getController();c&&c.isViewModel&&(c.destroy(),a.setViewModel(null)),b&&b.isSession&&(b.getAutoDestroy()&&b.destroy(),a.setSession(null)),d&&(a.setController(null),d.destroy())},initBindable:function(){this.initBindable=Ext.emptyFn,this.getBind(),this.getPublishes()},makeBindableUpdater:function(a){var b=a.names.update;return function(d,f){var c=this,e=c.self.prototype[b];e&&e.call(c,d,f),c.publishState(a.name,d)}},isSyncing:function(d){var a,b=this.getBind(),c=!1;return b&&(a=b[d])&&(c=0<a.syncing),c},onBindNotify:function(b,c,a){a.syncing=a.syncing+1||1,this[a._config.names.set](b),--a.syncing},removeBindings:function(){var a,d,b,c=this;if(!c.destroying&&(a=c.getBind())&&"string"!=typeof a)for(d in a)(b=a[d]).destroy(),b._config=b.getTemplateScope=null;c.setBind(null)},updateSession:function(a){var b=this.getInherited();a?b.session=a:delete b.session},updateViewModel:function(a){var c=this.getInherited(),b=this.getController();a?((c.viewModel=a).setView(this),b&&b.initViewModel(a)):delete c.viewModel}}}),Ext.define("Ext.mixin.ComponentDelegation",{extend:Ext.Mixin,mixinConfig:{id:"componentDelegation"},privates:{addDelegatedListener:function(c,k,j,a,d,i,h){var e,b=this;(d=d||a.order)&&(a&&a.priority||((a=a?Ext.Object.chain(a):{}).priority=b.$orderToPriority[d])),((e=b.$delegatedEvents||(b.$delegatedEvents={}))[c]||(e[c]=new Ext.util.Event(b,c))).addListener(k,j,a,i,h)&&b.$hasDelegatedListeners._incr_(c)},clearDelegatedListeners:function(){var b,c,d,a=this.$delegatedEvents;if(a)for(b in a)d=(c=a[b]).listeners.length,c.clearListeners(),this.$hasDelegatedListeners._decr_(b,d),delete a[b]},doFireDelegatedEvent:function(f,g){var a,b,c,e=this,d=!0;if(e.$hasDelegatedListeners[f])for(a=e.getRefOwner();a&&(!(b=a.$delegatedEvents)||!(c=b[f])||!1!==(d=c.fireDelegated(e,g)));)a=a.getRefOwner();return d},removeDelegatedListener:function(c,f,e){var a,b=this.$delegatedEvents;b&&(a=b[c])&&a.removeListener(f,e)&&(this.$hasDelegatedListeners._decr_(c),0===a.listeners.length&&delete b[c])}},onClassMixedIn:function(a){function HasListeners(){}a.prototype.HasListeners=a.HasListeners=HasListeners,HasListeners.prototype=a.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners}},function(a){function HasDelegatedListeners(){}(a.HasDelegatedListeners=HasDelegatedListeners).prototype=a.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners}),Ext.define("Ext.Widget",{extend:Ext.Evented,xtype:"widget",mixins:[Ext.mixin.Inheritable,Ext.mixin.Bindable,Ext.mixin.ComponentDelegation],isWidget:!0,element:{reference:"element"},observableType:"component",cachedConfig:{style:null},config:{userCls:null},eventedConfig:{width:null,height:null},template:[],constructor:function(c){var b,a=this;a.initId(c),a.initElement(),a.mixins.observable.constructor.call(a,c),Ext.ComponentManager.register(a),(b=a.getController())&&b.init(a)},afterCachedConfig:function(){var d,a,b,e,c=this,j=c.self.prototype,f=c.referenceList,i=c.renderElement;for(j.renderTemplate=d=document.createDocumentFragment(),d.appendChild(i.clone(!0,!0)),a=0,b=(e=d.querySelectorAll("[id]")).length;a<b;a++)e[a].removeAttribute("id");for(a=0,b=f.length;a<b;a++)c[f[a]].dom.removeAttribute("reference")},addCls:function(a){this.el.addCls(a)},applyWidth:function(a){return this.filterLengthValue(a)},applyHeight:function(a){return this.filterLengthValue(a)},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a),a.mixins.componentDelegation.clearDelegatedListeners.call(a)},destroy:function(){var c,e,b,a=this,d=a.referenceList;for(c=0,e=d.length;c<e;c++)b=d[c],a.hasOwnProperty(b)&&(a[b].destroy(),a[b]=null);a.destroyBindable(),a.callParent(),Ext.ComponentManager.unregister(a)},doFireEvent:function(c,d,e){var a=this,b=a.mixins.observable.doFireEvent.call(a,c,d,e);return!1!==b&&(b=a.mixins.componentDelegation.doFireDelegatedEvent.call(a,c,d)),b},getElementConfig:function(){var a=this.element;return"children"in a||(a=Ext.apply({children:this.getTemplate()},a)),a},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var c,d,f,h,g,l,b,e,a=this,j=a.self.prototype,k=a.getId(),m=a.referenceList=a.referenceList=[],i=!0;for(j.hasOwnProperty("renderTemplate")?d=(c=a.renderTemplate.cloneNode(!0)).firstChild:(i=!1,c=document.createDocumentFragment(),d=Ext.Element.create(a.processElementConfig.call(j),!0),c.appendChild(d)),g=0,l=(h=c.querySelectorAll("[reference]")).length;g<l;g++)e=(b=h[g]).getAttribute("reference"),i&&b.removeAttribute("reference"),"element"===e?(b.id=k,(f=a.el=a.addElementReference(e,b)).dom.setAttribute("data-componentid",k)):a.addElementReferenceOnDemand(e,b),m.push(e);d===f.dom?a.renderElement=f:a.addElementReferenceOnDemand("renderElement",d)},is:function(a){return Ext.ComponentQuery.is(this,a)},isXType:function(a,b){return b?-1!==Ext.Array.indexOf(this.xtypes,a):!!this.xtypesMap[a]},removeCls:function(a){this.el.removeCls(a)},toggleCls:function(b,a){this.element.toggleCls(b,a)},resolveListenerScope:function(a,b){return this.mixins.inheritable.resolveListenerScope.call(this,a,b)},setSize:function(b,a){void 0!==b&&this.setWidth(b),void 0!==a&&this.setHeight(a)},applyStyle:function(a,b){return b&&a===b&&Ext.isObject(b)&&(a=Ext.apply({},a)),a},updateStyle:function(a){this.element.applyStyles(a)},updateWidth:function(a){this.element.setWidth(a)},updateHeight:function(a){this.element.setHeight(a)},onFocusEnter:Ext.emptyFn,onFocusLeave:Ext.emptyFn,isAncestor:function(){return!1},privates:{addElementReferenceOnDemand:function(a,b){this._elementListeners[a]?this.addElementReference(a,b):Ext.Object.defineProperty(this,a,{get:function(){return delete this[a],this.addElementReference(a,b)},configurable:!0})},addElementReference:function(f,g){var e,d,b=this,c=b[f]=Ext.get(g),a=b._elementListeners[f];if(c.skipGarbageCollection=!0,c.component=b,a){for(e in a=Ext.clone(a))"object"==typeof(d=a[e])&&(d.scope=b);a.scope=b,c.on(a)}return c},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element),this.isDetached=!0},doAddListener:function(e,f,d,a,c,i,h){var b=this;a&&"element"in a&&b[a.element].doAddListener(e,f,d||b,a,c),a&&a.delegate?b.mixins.componentDelegation.addDelegatedListener.call(b,e,f,d,a,c,i,h):b.callParent([e,f,d,a,c,i,h])},doRemoveListener:function(b,d,c){var a=this;a.mixins.observable.doRemoveListener.call(a,b,d,c),a.mixins.componentDelegation.removeDelegatedListener.call(a,b,d,c)},filterLengthValue:function(a){return"auto"===a||!a&&0!==a?null:a},getFocusEl:function(){return this.element},initElementListeners:function(a){var f,b,g,j,e,c=this,d=c.self.superclass._elementListeners,h=a.reference,i=a.children;if(f=c.hasOwnProperty("_elementListeners")?c._elementListeners:c._elementListeners=d?Ext.Object.chain(d):{},h&&(b=a.listeners)&&(d&&(g=d[h])&&(b=Ext.Object.chain(g),Ext.apply(b,a.listeners)),f[h]=b,a.listeners=null),i)for(e=0,j=i.length;e<j;e++)c.initElementListeners(i[e])},initId:function(d){var a=this,c=a.config,b=d&&d.id||c&&c.id;b?(a.setId(b),a.id=b):a.getId()},processElementConfig:function(){var b,a=this,c=a.self.superclass;return a.hasOwnProperty("_elementConfig")?b=a._elementConfig:(b=a._elementConfig=a.getElementConfig(),c.isWidget&&a.processElementConfig.call(c),a.initElementListeners(b)),b},reattachToBody:function(){this.isDetached=!1},updateUserCls:function(a,b){this.element.replaceCls(b,a)}}},function(b){var a=b.prototype;(a.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1,(a.$eventOptions=Ext.Object.chain(a.$eventOptions)).delegate=1}),Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",$configStrict:!1,isComponent:!0,liquidLayout:!0,rendered:!0,rendering:!0,config:{renderTo:null},cachedConfig:{baseCls:Ext.baseCSSPrefix+"widget"},constructor:function(c){var b,a=this;a.callParent([c]),a.getComponentLayout(),(b=a.getRenderTo())&&a.render(b)},addClsWithUI:function(a){this.el.addCls(a)},afterComponentLayout:Ext.emptyFn,updateLayout:function(){var a=this.getRefOwner();a&&a.updateLayout()},destroy:function(){var b=this,a=b.ownerCt;a&&a.remove&&a.remove(b,!1),b.callParent()},finishRender:function(){this.rendering=!1,this.initBindable()},getAnimationProps:function(){return{}},getComponentLayout:function(){var b=this,a=b.componentLayout;return a||(a=b.componentLayout=new Ext.layout.component.Auto).setOwner(b),a},getEl:function(){return this.element},getTdCls:function(){return Ext.baseCSSPrefix+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(b,e,c){var a=this;a.inheritedState;a.ownerCt=b,a.onInheritedAdd(a,c)},onRemoved:function(b){var a=this;b||a.removeBindings(),a.onInheritedRemove(b),a.ownerCt=a.ownerLayout=null},parseBox:function(a){return Ext.Element.parseBox(a)},removeClsWithUI:function(a){this.el.removeCls(a)},render:function(c,e){var b,d=this,a=d.element,f=Ext.Component.prototype;d.ownerCt&&!d.floating||(Ext.scopeCss&&a.addCls(f.rootCls),a.addCls(f.borderBoxCls)),e&&(b=c.childNodes[e])?Ext.fly(c).insertBefore(a,b):Ext.fly(c).appendChild(a)},setPosition:function(a,b){this.el.setLocalXY(a,b)},up:function(){return Ext.Component.prototype.up.apply(this,arguments)},isAncestor:function(){return Ext.Component.prototype.isAncestor.apply(this,arguments)},onFocusEnter:function(){return Ext.Component.prototype.onFocusEnter.apply(this,arguments)},onFocusLeave:function(){return Ext.Component.prototype.onFocusLeave.apply(this,arguments)},isLayoutChild:function(b){var a=this.ownerCt;return!!a&&(a===b||a.isLayoutChild(b))}},function(b){var a=b.prototype;Ext.isIE9m&&(a.addElementReferenceOnDemand=a.addElementReference)}),Ext.define("Ext.ProgressBase",{mixinId:"progressbase",config:{value:0,textTpl:null},applyTextTpl:function(a){return a.isTemplate||(a=new Ext.XTemplate(a)),a},applyValue:function(a){return a||0}}),Ext.define("Ext.util.Format",function(){var a,b,c;return{singleton:!0,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",percentSign:"%",currencyAtEnd:!1,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){a=this},undef:function(a){return void 0!==a?a:""},defaultValue:function(a,b){return void 0!==a&&""!==a?a:b},substr:"b"!="ab".substr(-1)?function(d,a,c){var b=String(d);return a<0?b.substr(Math.max(b.length+a,0),c):b.substr(a,c)}:function(c,b,a){return String(c).substr(b,a)},lowercase:function(a){return String(a).toLowerCase()},uppercase:function(a){return String(a).toUpperCase()},usMoney:function(b){return a.currency(b,"$",2)},currency:function(b,f,c,h){var d="",e=",0",g=0;for((b=+b)<0&&(b=-b,d="-"),e+=0<(c=Ext.isDefined(c)?c:a.currencyPrecision)?".":"";g<c;g++)e+="0";return b=a.number(b,e),!0===(h||a.currencyAtEnd)?Ext.String.format("{0}{1}{2}",d,b,f||a.currencySign):Ext.String.format("{0}{1}{2}",d,f||a.currencySign,b)},date:function(a,b){return a?(Ext.isDate(a)||(a=new Date(Date.parse(a))),Ext.Date.dateFormat(a,b||Ext.Date.defaultFormat)):""},dateRenderer:function(b){return function(c){return a.date(c,b)}},hex:function(c,b){var a=parseInt(c||0,10).toString(16);if(b)for(b<0&&(b=-b,a.length>b&&(a=a.substring(a.length-b)));a.length<b;)a="0"+a;return a},or:function(b,a){return b||a},pick:function(a,d,c){if(Ext.isNumber(a)){var b=arguments[a+1];if(b)return b}return a?c:d},stripTags:function(b){return b?String(b).replace(a.stripTagsRe,""):b},stripScripts:function(b){return b?String(b).replace(a.stripScriptsRe,""):b},fileSize:(b=1048576,c=1073741824,function(d){return d<1024?1===d?"1 byte":d+" bytes":d<b?Math.round(10*d/1024)/10+" KB":d<c?Math.round(10*d/b)/10+" MB":Math.round(10*d/c)/10+" GB"}),math:function(){var a={};return function(c,b){return a[b]||(a[b]=Ext.functionFactory("v","return v "+b+";")),a[b](c)}}(),round:function(c,a){var b=Number(c);return"number"==typeof a?(a=Math.pow(10,a),b=Math.round(c*a)/a):void 0===a&&(b=Math.round(b)),b},number:function(k,c){if(!c)return k;if(isNaN(k))return"";var j=a.formatFns[c];if(!j){var h,e,i,f,b,n=c,o=a.thousandSeparator,g=a.decimalSeparator,d=0,l="";e="/i"===c.substr(c.length-2)?(a.I18NFormatCleanRe&&a.lastDecimalSeparator===g||(a.I18NFormatCleanRe=new RegExp("[^\\d\\"+g+"#]","g"),a.lastDecimalSeparator=g),h=-1!==(c=c.substr(0,c.length-2)).indexOf(o),c.replace(a.I18NFormatCleanRe,"").split(g)):(h=-1!==c.indexOf(","),c.replace(a.formatCleanRe,"").split(".")),i=c.replace(a.formatPattern,""),2<e.length||2===e.length&&(d=e[1].length,(f=e[1].match(a.hashRe))&&(l='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+f[0].length+'}$")')),b=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(h?",thousandSeparator,thousands=[],j,n,i":"")+(i?',formatString="'+c+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+d+");",l,";"],h?(d&&(b[b.length]='parts=fnum.split(".");',b[b.length]="fnum=parts[0];"),b[b.length]="if(absVal>=1000) {",b[b.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}",d&&(b[b.length]="fnum += utilFormat.decimalSeparator+parts[1];")):d&&(b[b.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'),b[b.length]='if(neg&&fnum!=="'+(d?"0."+Ext.String.repeat("0",d):"0")+'") { fnum="-"+fnum; }',f&&(b[b.length]='fnum=fnum.replace(trailingZeroes,"");'),b[b.length]="return ",b[b.length]=i?"formatString.replace(formatPattern, fnum);":"fnum;",b[b.length]="};",j=a.formatFns[n]=Ext.functionFactory("Ext",b.join(""))(Ext)}return j(k)},numberRenderer:function(b){return function(c){return a.number(c,b)}},percent:function(c,b){return a.number(100*c,b||"0")+a.percentSign},attributes:function(a){if("object"==typeof a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b,'="',"style"===b?Ext.DomHelper.generateStyles(a[b],null,!0):Ext.htmlEncode(a[b]),'" ');a=c.join("")}return a||""},plural:function(c,b,a){return c+" "+(1===c?b:a||b+"s")},nl2br:function(b){return Ext.isEmpty(b)?"":b.replace(a.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(b){if("number"==typeof(b=b||0))return{top:b,right:b,bottom:b,left:b};var a=b.split(" "),c=a.length;return 1===c?a[1]=a[2]=a[3]=a[0]:2===c?(a[2]=a[0],a[3]=a[1]):3===c&&(a[3]=a[1]),{top:parseInt(a[0],10)||0,right:parseInt(a[1],10)||0,bottom:parseInt(a[2],10)||0,left:parseInt(a[3],10)||0}}}}),Ext.define("Ext.Template",{inheritableStatics:{from:function(a,b){return new this((a=Ext.getDom(a)).value||a.innerHTML,b||"")}},useEval:!1,constructor:function(g){var e,a,d=this,c=arguments,f=[],b=c.length;if(d.initialConfig={},1===b&&Ext.isArray(g)&&(b=(c=g).length),1<b)for(e=0;e<b;e++)"object"==typeof(a=c[e])?(Ext.apply(d.initialConfig,a),Ext.apply(d,a)):f.push(a);else f.push(g);d.html=f.join("")},isTemplate:!0,disableFormats:!1,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(b){var a=this;return a.compiled?(a.fn||a.compile(),a.fn(b).join("")):a.evaluate(b)},evaluate:function(a){var b=this,e=!b.disableFormats,c=Ext.util.Format,d=b;return b.html.replace(b.tokenRe,function(i,h,b,g,f){return null!=b&&""!==b||(b=h),g&&e?(f=f?[a[b]].concat(Ext.functionFactory("return ["+f+"];")()):[a[b]],"this."===g.substr(0,5)?d[g.substr(5)].apply(d,f):c[g]?c[g].apply(c,f):i):void 0!==a[b]?a[b]:""})},applyOut:function(c,b){var a=this;return a.compiled?(a.fn||a.compile(),b.push.apply(b,a.fn(c))):b.push(a.apply(c)),b},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(c,b){var a=this;return a.html=c,a.compiled=!!b,a.fn=null,a},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var b,a=this;return b=a.html.replace(a.compileARe,"\\\\").replace(a.compileBRe,"\\n").replace(a.compileCRe,"\\'").replace(a.tokenRe,a.regexReplaceFn.bind(a)),b=(!0!==this.disableFormats?"var fm=Ext.util.Format;":"")+(a.useEval?"$=":"return")+" function(v){return ['"+b+"'];};",a.fn=a.useEval?a.evalCompiled(b):new Function("Ext",b)(Ext),a.compiled=!0,a},evalCompiled:function($){return eval($),$},regexReplaceFn:function(d,b,e,a,c){if(null==b||""===b?b='"'+e+'"':this.stringFormat&&(b=parseInt(b)+1),a&&!0!==this.disableFormats){if(c=c?","+c:"","this."===a.substr(0,5))a+="(";else{if(!Ext.util.Format[a])return d;a="fm."+a+"("}return"',"+a+"v["+b+"]"+c+"),'"}return"',v["+b+"] == undefined ? '' : v["+b+"],'"},insertFirst:function(c,b,a){return this.doInsert("afterBegin",c,b,a)},insertBefore:function(c,b,a){return this.doInsert("beforeBegin",c,b,a)},insertAfter:function(c,b,a){return this.doInsert("afterEnd",c,b,a)},append:function(c,b,a){return this.doInsert("beforeEnd",c,b,a)},doInsert:function(d,e,c,b){var a=Ext.DomHelper.insertHtml(d,Ext.getDom(e),this.apply(c));return b?Ext.get(a):a},overwrite:function(d,c,b){var a=Ext.DomHelper.overwrite(Ext.getDom(d),this.apply(c));return b?Ext.get(a):a}},function(d){function b(a){return e.test(a)?(a=new d(a,c),function(){return a.apply(arguments)}):function(){return a}}var e=/\{\d+\}/,c={useFormat:!1,compiled:!0,stringFormat:!0},a={};Ext.String.format=Ext.util.Format.format=function(c){return(a[c]||(a[c]=b(c))).apply(this,arguments)},Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}}),Ext.define("Ext.util.XTemplateParser",{constructor:function(a){Ext.apply(this,a)},doTpl:Ext.emptyFn,parse:function(g){var j,e,d,c,h,n,l,m,i,f,a,k,o,b=this,q=g.length,s={elseif:"elif"},p=b.topRe,r=b.actionsRe;for(b.level=0,b.stack=e=[],j=0;j<q;j=f){if(p.lastIndex=j,!(c=p.exec(g))){b.doText(g.substring(j,q));break}if(i=c.index,f=p.lastIndex,j<i&&(d=g.substring(j,i),o&&""===Ext.String.trim(d)||b.doText(d)),o=!1,c[1])f=g.indexOf("%}",i+2),b.doEval(g.substring(i+2,f)),f+=2;else if(c[2])f=g.indexOf("]}",i+2),b.doExpr(g.substring(i+2,f)),f+=2;else if(c[3])b.doTag(c[3]);else if(c[4]){for(a=null;null!==(m=r.exec(c[4]));)(d=m[2]||m[3])&&(d=Ext.String.htmlDecode(d),"string"==typeof(n=(a=a||{})[h=s[h=m[1]]||h])?a[h]=[n,d]:n?a[h].push(d):a[h]=d);a?a.if?(b.doIf(a.if,a),e.push({type:"if"})):a.switch?(b.doSwitch(a.switch,a),e.push({type:"switch"}),o=!0):a.case?b.doCase(a.case,a):a.elif?b.doElseIf(a.elif,a):a.for?(++b.level,(k=b.propRe.exec(c[4]))&&(a.propName=k[1]||k[2]),b.doFor(a.for,a),e.push({type:"for",actions:a})):a.foreach?(++b.level,(k=b.propRe.exec(c[4]))&&(a.propName=k[1]||k[2]),b.doForEach(a.foreach,a),e.push({type:"foreach",actions:a})):a.exec&&(b.doExec(a.exec,a),e.push({type:"exec",actions:a})):b.elseRe.test(c[4])?b.doElse():b.defaultRe.test(c[4])?b.doDefault():(b.doTpl(),e.push({type:"tpl"}))}else 5===c[0].length?e.push({type:"tpl"}):(l=e.pop(),b.doEnd(l.type,l.actions),"for"!=l.type&&"foreach"!=l.type||--b.level)}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/}),Ext.define("Ext.util.XTemplateCompiler",{extend:Ext.util.XTemplateParser,useEval:!1,useIndex:Ext.isIE8m,useFormat:!0,propNameRe:/^[\w\d\$]*$/,compile:function(c){var a=this,b=a.generate(c);return a.useEval?a.evalTpl(b):new Function("Ext",b)(Ext)},generate:function(d){var c,a=this,b="var fm=Ext.util.Format,ts=Object.prototype.toString;";return a.maxLevel=0,a.body=["var c0=values, a0="+a.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"],a.definitions?"string"==typeof a.definitions?a.definitions=[a.definitions,b]:a.definitions.push(b):a.definitions=[b],a.switches=[],a.parse(d),a.definitions.push((a.useEval?"$=":"return")+" function ("+a.fnArgs+") {",a.body.join(""),"}"),c=a.definitions.join("\n"),a.definitions.length=a.body.length=a.switches.length=0,delete a.definitions,delete a.body,delete a.switches,c},doText:function(a){var b=this,c=b.body;a=a.replace(b.aposRe,"\\'").replace(b.newLineRe,"\\n"),b.useIndex?c.push("out[out.length]='",a,"'\n"):c.push("out.push('",a,"')\n")},doExpr:function(b){var a=this.body;a.push("if ((v="+b+") != null) out"),this.useIndex?a.push("[out.length]=v+''\n"):a.push(".push(v+'')\n")},doTag:function(b){var a=this.parseTag(b);a?this.doExpr(a):this.doText("{"+b+"}")},doElse:function(){this.body.push("} else {\n")},doEval:function(a){this.body.push(a,"\n")},doIf:function(b,c){var a=this;"."===b?a.body.push("if (values) {\n"):a.propNameRe.test(b)?a.body.push("if (",a.parseTag(b),") {\n"):a.body.push("if (",a.addFn(b),a.callFn,") {\n"),c.exec&&a.doExec(c.exec)},doElseIf:function(b,c){var a=this;"."===b?a.body.push("else if (values) {\n"):a.propNameRe.test(b)?a.body.push("} else if (",a.parseTag(b),") {\n"):a.body.push("} else if (",a.addFn(b),a.callFn,") {\n"),c.exec&&a.doExec(c.exec)},doSwitch:function(b){var c,a=this;"."===b||"#"===b?(c="."===b?"values":"xindex",a.body.push("switch (",c,") {\n")):a.propNameRe.test(b)?a.body.push("switch (",a.parseTag(b),") {\n"):a.body.push("switch (",a.addFn(b),a.callFn,") {\n"),a.switches.push(0)},doCase:function(e){var f,b,a=this,c=Ext.isArray(e)?e:[e],d=a.switches.length-1;for(a.switches[d]?a.body.push("break;\n"):a.switches[d]++,b=0,d=c.length;b<d;++b)f=a.intRe.exec(c[b]),c[b]=f?f[1]:"'"+c[b].replace(a.aposRe,"\\'")+"'";a.body.push("case ",c.join(": case "),":\n")},doDefault:function(){var a=this,b=a.switches.length-1;a.switches[b]?a.body.push("break;\n"):a.switches[b]++,a.body.push("default:\n")},doEnd:function(c,d){var a=this,b=a.level-1;"for"==c||"foreach"==c?(d.exec&&a.doExec(d.exec),a.body.push("}\n"),a.body.push("parent=p",b,";values=r",1+b,";xcount=n"+b+";xindex=i",b,"+1;xkey=k",b,";\n")):"if"!=c&&"switch"!=c||a.body.push("}\n")},doFor:function(c,d){var f,g,b=this,a=b.level,e=a-1;f="."===c?"values":b.propNameRe.test(c)?b.parseTag(c):b.addFn(c)+b.callFn,b.maxLevel<a&&(b.maxLevel=a,b.body.push("var ")),g="."==c?"c"+a:"a"+e+"?c"+e+"[i"+e+"]:c"+e,b.body.push("i",a,"=0,n",a,"=0,c",a,"=",f,",a",a,"=",b.createArrayTest(a),",r",a,"=values,p",a,",k",a,";\n","p",a,"=parent=",g,"\n","if (c",a,"){if(a",a,"){n",a,"=c",a,".length;}else if (c",a,".isMixedCollection){c",a,"=c",a,".items;n",a,"=c",a,".length;}else if(c",a,".isStore){c",a,"=c",a,".data.items;n",a,"=c",a,".length;}else{c",a,"=[c",a,"];n",a,"=1;}}\n","for (xcount=n",a,";i",a,"<n"+a+";++i",a,"){\n","values=c",a,"[i",a,"]"),d.propName&&b.body.push(".",d.propName),b.body.push("\n","xindex=i",a,"+1\n"),d.between&&b.body.push('if(xindex>1){ out.push("',d.between,'"); } \n')},doForEach:function(c,d){var f,g,b=this,a=b.level,e=a-1;f="."===c?"values":b.propNameRe.test(c)?b.parseTag(c):b.addFn(c)+b.callFn,b.maxLevel<a&&(b.maxLevel=a,b.body.push("var ")),g="."==c?"c"+a:"a"+e+"?c"+e+"[i"+e+"]:c"+e,b.body.push("i",a,"=-1,n",a,"=0,c",a,"=",f,",a",a,"=",b.createArrayTest(a),",r",a,"=values,p",a,",k",a,";\n","p",a,"=parent=",g,"\n","for(k",a," in c",a,"){\n","xindex=++i",a,"+1;\n","xkey=k",a,";\n","values=c",a,"[k",a,"];"),d.propName&&b.body.push(".",d.propName),d.between&&b.body.push('if(xindex>1){ out.push("',d.between,'"); } \n')},createArrayTest:"isArray"in Array?function(a){return"Array.isArray(c"+a+")"}:function(a){return"ts.call(c"+a+')==="[object Array]"'},doExec:function(d,e){var a=this,c="f"+a.definitions.length,b=a.guards[a.strict?0:1];a.definitions.push("function "+c+"("+a.fnArgs+") {",b.doTry," var $v = values; with($v) {","  "+d," }",b.doCatch,"}"),a.body.push(c+a.callFn+"\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:" } catch(e) {\n}"}],addFn:function(c){var a=this,b="f"+a.definitions.length,d=a.guards[a.strict?0:1];return"."===c?a.definitions.push("function "+b+"("+a.fnArgs+") {"," return values","}"):".."===c?a.definitions.push("function "+b+"("+a.fnArgs+") {"," return parent","}"):a.definitions.push("function "+b+"("+a.fnArgs+") {",d.doTry," var $v = values; with($v) {","  return("+c+")"," }",d.doCatch,"}"),b},parseTag:function(h){var a,c,d,g,b,e=this,f=e.tagRe.exec(h);return f?(a=f[1],c=f[2],d=f[3],g=f[4],b="."==a?(e.validTypes||(e.definitions.push("var validTypes={string:1,number:1,boolean:1};"),e.validTypes=!0),'validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'):"#"==a?"xindex":"$"==a?"xkey":"parent."==a.substr(0,7)?a:isNaN(a)&&-1==a.indexOf("-")&&-1!=a.indexOf(".")?"values."+a:"values['"+a+"']",g&&(b="("+b+g+")"),c&&e.useFormat?(d=d?","+d:"","this."!=c.substr(0,5)?c="fm."+c+"(":c+="(",c+b+d+")"):b):null},evalTpl:function($){return eval($),$},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},function(){var a=this.prototype;a.fnArgs="out,values,parent,xindex,xcount,xkey",a.callFn=".call(this,"+a.fnArgs+")"}),Ext.define("Ext.XTemplate",{extend:Ext.Template,isXTemplate:!0,emptyObj:{},fn:null,strict:!1,apply:function(b,a,d,c){return this.applyOut(b,[],a,d,c).join("")},applyOut:function(g,d,f,c,b){var e,a=this;if(a.fn||(e=new Ext.util.XTemplateCompiler({useFormat:!0!==a.disableFormats,definitions:a.definitions,strict:a.strict}),a.fn=e.compile(a.html)),c=c||1,b=b||1,a.strict)a.fn(d,g,f||a.emptyObj,c,b);else try{a.fn(d,g,f||a.emptyObj,c,b)}catch(h){}return d},compile:function(){return this},statics:{getTpl:function(c,d){var a,b=c[d];if(b&&!b.isTemplate){if(b=Ext.ClassManager.dynInstantiate("Ext.XTemplate",b),c.hasOwnProperty(d))a=c;else for(a=c.self.prototype;a&&!a.hasOwnProperty(d);a=a.superclass);(a[d]=b).owner=a}return b||null}}}),Ext.define("Ext.app.EventDomain",{statics:{instances:{}},isEventDomain:!0,isInstance:!1,constructor:function(){var a=this;a.isInstance||(Ext.app.EventDomain.instances[a.type]=a),a.bus={},a.monitoredClasses=[]},dispatch:function(l,h,m){h=Ext.canonicalEventName(h);var c,a,i,g,e,k,d,f,j=this,b=j.bus[h];if(!b)return!0;for(c in b)if(b.hasOwnProperty(c)&&j.match(l,c,j.controller))for(i in a=b[c])if(a.hasOwnProperty(i)&&(g=a[i]).controller.isActive())for(k=(e=g.list).length,d=0;d<k;d++)if(!1===(f=e[d]).fire.apply(f,m))return!1;return!0},listen:function(p,e){var j,f,a,d,b,h,l,g,c,k,i=this,r=i.bus,t=i.idProperty,n=i.monitoredClasses,s=n.length,o=e.getId(),m="component"===i.type,u=m?e.getRefMap():null;for(a in p)if(g=p[a],m&&(a=u[a]||a),g)for(c in t&&(a="*"===a?a:a.substring(1)),g){for(d=null,b=g[c],h=e,c=Ext.canonicalEventName(c),l=new Ext.util.Event(e,c),Ext.isObject(b)&&(b=(d=b).fn,h=d.scope||e,delete d.fn,delete d.scope),"string"==typeof b&&(b=h[b]),l.addListener(b,h,d),j=0;j<s;++j)(k=n[j].hasListeners)&&k._incr_(c);((f=(f=r[c]||(r[c]={}))[a]||(f[a]={}))[o]||(f[o]={controller:e,list:[]})).list.push(l)}},match:function(c,b){var a=this.idProperty;return!!a&&("*"===b||c[a]===b)},monitor:function(a){var c=this,b=a.isInstance?a:a.prototype,d=b.doFireEvent;c.monitoredClasses.push(a),b.doFireEvent=function(b,e){var a=d.apply(this,arguments);return!1===a||this.isSuspended(b)||(a=c.dispatch(this,b,e)),a}},unlisten:function(f){var g,a,b,o,j,n,h,c,d,i,e,k=this.bus,l=f,m=this.monitoredClasses,p=m.length;for(a in f.isController&&(l=f.getId()),k)if(a=Ext.canonicalEventName(a),k.hasOwnProperty(a)&&(h=k[a]))for(n in h)if((i=(g=h[n])[l])&&(b=i.list)){for(c=0,o=b.length;c<o;++c)for((j=b[c]).clearListeners(),d=0;d<p;++d)(e=m[d].hasListeners)&&e._decr_(j.name);delete g[l]}},destroy:function(){this.monitoredClasses=this.bus=null,this.callParent()}}),Ext.define("Ext.app.domain.Component",{extend:Ext.app.EventDomain,singleton:!0,type:"component",constructor:function(){this.callParent(),this.monitor(Ext.Widget)},dispatch:function(d,f,e){for(var b,c,a=d.lookupController(!1);a;){if((b=a.compDomain)&&!1===b.dispatch(d,f,e))return!1;a=(c=a.getView())?c.lookupController(!0):null}return this.callParent(arguments)},match:function(b,a){return b.is(a)}}),Ext.define("Ext.util.ProtoElement",function(){var a=Ext.String.splitWords,b=Ext.Array.toMap;return{isProtoEl:!0,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:!1,constructor:function(f){var e,d,c=this;f&&(Ext.apply(c,f),e=c.cls,d=c.style,delete c.cls),c.classList=e?a(e):[],c.classMap=e?b(c.classList):{},d&&("string"==typeof d?c.style=Ext.Element.parseStyles(d):Ext.isFunction(d)?(c.styleFn=d,delete c.style):c.style=Ext.apply({},d))},flush:function(){this.flushClassList=[],this.removedClasses={},delete this.style,delete this.unselectableAttr},addCls:function(d){if(!d)return this;for(var b,c=this,g="string"==typeof d?a(d):d,i=g.length,j=c.classList,h=c.classMap,f=c.flushClassList,e=0;e<i;++e)h[b=g[e]]||(h[b]=!0,j.push(b),f&&(f.push(b),delete c.removedClasses[b]));return c},hasCls:function(a){return a in this.classMap},removeCls:function(l){var e,c,d=this,g=d.classList,i=d.classList=[],k=b(a(l)),j=g.length,h=d.classMap,f=d.removedClasses;for(e=0;e<j;++e)k[c=g[e]]?(f&&h[c]&&(f[c]=!0,Ext.Array.remove(d.flushClassList,c)),delete h[c]):i.push(c);return d},setStyle:function(a,d){var b=this,c=b.style||(b.style={});return"string"==typeof a?1===arguments.length?b.setStyle(Ext.Element.parseStyles(a)):c[a]=d:Ext.apply(c,a),b},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls),Ext.isOpera&&(this.unselectableAttr=!0)},writeTo:function(d){var b,a=this,e=a.flushClassList||a.classList,c=a.removedClasses;return a.styleFn?(b=Ext.apply({},a.styleFn()),Ext.apply(b,a.style)):b=a.style,d[a.clsProp]=e.join(" "),b&&(d[a.styleProp]=a.styleIsText?Ext.DomHelper.generateStyles(b,null,!0):b),c&&(c=Ext.Object.getKeys(c)).length&&(d[a.removedProp]=c.join(" ")),a.unselectableAttr&&(d.unselectable="on"),d}}}),Ext.define("Ext.dom.CompositeElement",{alternateClassName:"Ext.CompositeElement",extend:Ext.dom.CompositeElementLite,isLite:!1,getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}}),Ext.define("Ext.scroll.Scroller",{extend:Ext.Evented,alias:"scroller.scroller",mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:"dom"},isScroller:!0,_spacerCls:Ext.baseCSSPrefix+"domscroller-spacer",config:{direction:void 0,directionLock:!1,disabled:null,element:void 0,indicators:null,maxPosition:{x:0,y:0},maxUserPosition:{x:0,y:0},minPosition:{x:0,y:0},minUserPosition:{x:0,y:0},momentumEasing:null,size:null,slotSnapSize:{x:0,y:0},x:!0,y:!0,spacerXY:null},statics:{create:function(a){return Ext.Factory.scroller(a,Ext.supports.Touch?"touch":"dom")}},constructor:function(b){var a=this;a.position={x:0,y:0},a.callParent([b]),a.onDomScrollEnd=Ext.Function.createBuffered(a.onDomScrollEnd,100,a)},destroy:function(){var a=this;a.setX(Ext.emptyString),a.setY(Ext.emptyString),a.setElement(null),a.onDomScrollEnd=a._partners=a.component=null,a.callParent()},addPartner:function(a,c){var b=this,e=b._partners||(b._partners={}),d=a._partners||(a._partners={});e[a.getId()]={scroller:a,axis:c},d[b.getId()]={scroller:b,axis:c}},applyElement:function(b,e){var a,d,c=this;if(e&&c.scrollListener.destroy(),b)return d=(a=b.isElement?b:Ext.get(b)).dom===document.body?(a=Ext.get(document.scrollingElement||(Ext.isWebKit?document.body:document.documentElement)),Ext.get(Ext.isIE9m?window:document)):a,c.scrollListener=d.on({scroll:c.onDomScroll,scope:c,destroyable:!0}),a},getClientSize:function(){var a=this.getElement().dom;return{x:a.clientWidth,y:a.clientHeight}},getScrollbarSize:function(){var b,a,d,e,g,h,f,c=this,j=0,i=0;return!c.isDomScroller&&1!==Ext.supports.touchScroll||!(b=c.getElement())||b.destroyed||(d=c.getX(),e=c.getY(),a=b.dom,(d||e)&&(f=Ext.getScrollbarSize()),"scroll"===d?g=!0:d&&(g=a.scrollWidth>a.clientWidth),"scroll"===e?h=!0:e&&(h=a.scrollHeight>a.clientHeight),g&&(i=f.height),h&&(j=f.width)),{width:j,height:i}},getPosition:function(){return this.position},updateDirectionLock:Ext.emptyFn,updateDisabled:Ext.emptyFn,updateIndicators:Ext.emptyFn,updateMaxPosition:Ext.emptyFn,updateMaxUserPosition:Ext.emptyFn,updateMinPosition:Ext.emptyFn,updateMinUserPosition:Ext.emptyFn,updateMomenumEasing:Ext.emptyFn,updateX:Ext.emptyFn,updateY:Ext.emptyFn,onPartnerScrollStart:Ext.emptyFn,onPartnerScrollEnd:Ext.emptyFn,refresh:function(){return this.fireEvent("refresh",this),this},removePartner:function(c){var b=this._partners,a=c._partners;b&&delete b[c.getId()],a&&delete a[this.getId()]},scrollBy:function(a,b,c){var d=this.getPosition();return a&&(a.length?(c=b,b=a[1],a=a[0]):"number"!=typeof a&&(c=b,b=a.y,a=a.x)),a="number"==typeof a?a+d.x:null,b="number"==typeof b?b+d.y:null,this.doScrollTo(a,b,c)},scrollIntoView:function(d,i,h,e){var b,f,g,a=this,c=a.getPosition(),j=a.getElement();d&&(b=Ext.fly(d).getScrollIntoViewXY(j,c.x,c.y),f=!1===i?c.x:b.x,g=b.y,e&&a.on({scrollend:"doHighlight",scope:a,single:!0,args:[d,e]}),a.doScrollTo(f,g,h))},isInView:function(d){var b,a,c={x:!1,y:!1},e=this.getElement();return d&&e.contains(d)&&(a=e.getRegion(),b=Ext.fly(d).getRegion(),c.x=b.right>a.left&&b.left<a.right,c.y=b.bottom>a.top&&b.top<a.bottom),c},scrollTo:function(a,b,d){var c;a&&(a.length?(d=b,b=a[1],a=a[0]):"number"!=typeof a&&(d=b,b=a.y,a=a.x)),(a<0||b<0)&&(c=this.getMaxPosition(),a<0&&(a+=c.x),b<0&&(b+=c.y)),this.doScrollTo(a,b,d)},updateDirection:function(a){var b,c,d=this;a?("auto"===a?c=b=!0:"vertical"===a?c=!(b=!1):"horizontal"===a?c=!(b=!0):"both"===a&&(c=b="scroll"),d.setX(b),d.setY(c)):(b=d.getX(),c=d.getY(),b&&c?a="scroll"===c&&"scroll"===b?"both":"auto":c?a="vertical":b&&(a="horizontal"),d._direction=a)},updateSize:function(a){var d,b,c,e=this;e.getElement()&&(d=e.getSpacer(),null==a?d.hide():(c="number"==typeof a?b=a:(b=a.x||0,a.y||0),0<b&&--b,0<c&&--c,e.setSpacerXY({x:b,y:c}),d.show()))},deprecated:{5:{methods:{getScroller:function(){return this}}},"5.1.0":{methods:{scrollToTop:function(a){return this.scrollTo(0,0,a)},scrollToEnd:function(a){return this.scrollTo(1/0,1/0,a)}}}},privates:{getSpacer:function(){var c,b=this,a=b._spacer;return a||(c=b.getElement(),(a=b._spacer=c.createChild({cls:b._spacerCls,role:"presentation"})).setVisibilityMode(2),c.position()),a},applySpacerXY:function(a,b){return b&&a.x===b.x&&a.y===b.y&&(a=void 0),a},updateSpacerXY:function(a){this.getSpacer().setLocalXY(a.x,a.y)},convertX:function(a){return a},doHighlight:function(b,a){!0!==a?Ext.fly(b).highlight(a):Ext.fly(b).highlight()},fireScrollStart:function(b,c){var a=this,d=a.component;a.invokePartners("onPartnerScrollStart",b,c),a.hasListeners.scrollstart&&a.fireEvent("scrollstart",a,b,c),d&&d.onScrollStart&&d.onScrollStart(b,c),Ext.GlobalEvents.fireEvent("scrollstart",a,b,c)},fireScroll:function(b,c){var a=this,d=a.component;a.invokePartners("onPartnerScroll",b,c),a.hasListeners.scroll&&a.fireEvent("scroll",a,b,c),d&&d.onScrollMove&&d.onScrollMove(b,c),Ext.GlobalEvents.fireEvent("scroll",a,b,c)},fireScrollEnd:function(b,c){var a=this,d=a.component;a.invokePartners("onPartnerScrollEnd",b,c),a.hasListeners.scrollend&&a.fireEvent("scrollend",a,b,c),d&&d.onScrollEnd&&d.onScrollEnd(b,c),Ext.GlobalEvents.fireEvent("scrollend",a,b,c)},initXStyle:function(){var b=this.getElement(),a=this.getX();b&&b.dom&&(a?!0===a&&(a="auto"):a="hidden",b.setStyle("overflow-x",a))},initYStyle:function(){var b=this.getElement(),a=this.getY();b&&b.dom&&(a?!0===a&&(a="auto"):a="hidden",b.setStyle("overflow-y",a))},invokePartners:function(d,g,h){var a,e,b=this,c=b._partners,f="onPartnerScrollEnd"===d;if(!b.suspendSync&!b.isReflecting)for(e in c)(a=c[e].scroller).isReflecting=!0,a[d](b,g,h),f&&(a.isReflecting=!1)},clearReflecting:function(){this.isReflecting=!1},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(){this.suspendSync&&this.suspendSync--},updateDomScrollPosition:function(){var b,a=this,d=a.getElement(),c=a.position;return d&&!d.destroyed&&(b=a.getElementScroll(d),c.x=b.left,c.y=b.top),a.positionDirty=!1,c},getElementScroll:function(a){return a.getScroll()},onDomScroll:function(){var b,d,e,c,a=this;a.isTouchScroller&&2===Ext.supports.touchScroll?(c=a.getElement().dom).scrollTop=c.scrollLeft=0:(d=(b=a.updateDomScrollPosition()).x,e=b.y,a.isScrolling||(a.isScrolling=Ext.isScrolling=!0,a.fireScrollStart(d,e)),a.fireScroll(d,e),a.onDomScrollEnd())},onDomScrollEnd:function(){var a=this,b=a.getPosition(),c=b.x,d=b.y;a.isScrolling=Ext.isScrolling=!1,a.trackingScrollLeft=c,a.trackingScrollTop=d,a.fireScrollEnd(c,d)},onPartnerScroll:function(d,b,c){var a=d._partners[this.getId()].axis;a&&("x"===a?c=null:"y"===a&&(b=null)),this.doScrollTo(b,c,!1,!0)},restoreState:function(){var b,a=this,c=a.getElement();c&&(b=c.dom,void 0!==a.trackingScrollTop&&(b.scrollTop=a.trackingScrollTop,b.scrollLeft=a.trackingScrollLeft))}}}),Ext.define("Ext.fx.easing.Abstract",{config:{startTime:0,startValue:0},isEasing:!0,isEnded:!1,constructor:function(a){return this.initConfig(a),this},applyStartTime:function(a){return a=a||Ext.Date.now()},updateStartTime:function(a){this.reset()},reset:function(){this.isEnded=!1},getValue:Ext.emptyFn}),Ext.define("Ext.fx.easing.Momentum",{extend:Ext.fx.easing.Abstract,config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(b){var a=Math.log(1-b/10);this.theta=a,this.alpha=a/this.getAcceleration()},updateStartVelocity:function(a){this.velocity=a*this.getAcceleration()},updateAcceleration:function(a){this.velocity=this.getStartVelocity()*a,this.alpha=this.theta/a},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var a=Ext.Date.now()-this.getStartTime();return Math.exp(a*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}}),Ext.define("Ext.fx.easing.Bounce",{extend:Ext.fx.easing.Abstract,config:{springTension:.3,acceleration:30,startVelocity:0},getValue:function(){var a=(Ext.Date.now()-this.getStartTime())/this.getAcceleration(),c=a*Math.pow(Math.E,-this.getSpringTension()*a);return this.getStartValue()+this.getStartVelocity()*c}}),Ext.define("Ext.fx.easing.BoundMomentum",{extend:Ext.fx.easing.Abstract,config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:.01,startVelocity:0},applyMomentum:function(b,a){return Ext.factory(b,Ext.fx.easing.Momentum,a)},applyBounce:function(b,a){return Ext.factory(b,Ext.fx.easing.Bounce,a)},updateStartTime:function(a){this.getMomentum().setStartTime(a),this.callParent(arguments)},updateStartVelocity:function(a){this.getMomentum().setStartVelocity(a)},updateStartValue:function(a){this.getMomentum().setStartValue(a)},reset:function(){return this.lastValue=null,this.isBouncingBack=!1,this.isOutOfBound=!1,this.callParent(arguments)},getValue:function(){var a,e,d=this.getMomentum(),j=this.getBounce(),f=d.getStartVelocity(),b=0<f?1:-1,i=this.getMinMomentumValue(),h=this.getMaxMomentumValue(),g=1==b?h:i,c=this.lastValue;if(0===f)return this.getStartValue();if(!this.isOutOfBound){if(a=d.getValue(),e=d.getVelocity(),Math.abs(e)<this.getMinVelocity()&&(this.isEnded=!0),i<=a&&a<=h)return a;this.isOutOfBound=!0,j.setStartTime(Ext.Date.now()).setStartVelocity(e).setStartValue(g)}return a=j.getValue(),this.isEnded||(this.isBouncingBack?Math.round(a)==g&&(this.isEnded=!0):null!==c&&(1==b&&a<c||-1==b&&c<a)&&(this.isBouncingBack=!0)),this.lastValue=a}}),Ext.define("Ext.fx.easing.Linear",{extend:Ext.fx.easing.Abstract,alias:"easing.linear",config:{duration:0,endValue:0},updateStartValue:function(a){this.distance=this.getEndValue()-a},updateEndValue:function(a){this.distance=a-this.getStartValue()},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration();return b<a?(this.isEnded=!0,this.getEndValue()):this.getStartValue()+a/b*this.distance}}),Ext.define("Ext.fx.easing.EaseOut",{extend:Ext.fx.easing.Linear,alias:"easing.ease-out",config:{exponent:4,duration:1500},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration(),d=this.getStartValue(),f=this.getEndValue(),e=this.distance,h=1-a/b,c=d+(1-Math.pow(h,this.getExponent()))*e;return b<=a?(this.isEnded=!0,f):c}}),Ext.define("Ext.util.translatable.Abstract",{extend:Ext.Evented,config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:!1,isTranslatable:!0,constructor:function(a){this.mixins.observable.constructor.call(this,a),this.position={x:0,y:0}},factoryEasing:function(a){return Ext.factory(a,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(a){this.getEasingX()||this.setEasingX(this.factoryEasing(a)),this.getEasingY()||this.setEasingY(this.factoryEasing(a))},applyEasingX:function(a){return this.factoryEasing(a)},applyEasingY:function(a){return this.factoryEasing(a)},doTranslate:Ext.emptyFn,translate:function(a,b,c){if(c)return this.translateAnimated(a,b,c);this.isAnimating&&this.stopAnimation(),isNaN(a)||"number"!=typeof a||(this.x=a),isNaN(b)||"number"!=typeof b||(this.y=b),this.doTranslate(a,b)},translateAxis:function(e,a,d){var b,c;return"x"==e?b=a:c=a,this.translate(b,c,d)},getPosition:function(){var b=this,a=b.position;return a.x=-b.x,a.y=-b.y,a},animate:function(a,b){return this.activeEasingX=a,this.activeEasingY=b,this.isAnimating=!0,this.lastX=null,this.lastY=null,Ext.AnimationQueue.start(this.doAnimationFrame,this),this.fireEvent("animationstart",this,this.x,this.y),this},translateAnimated:function(g,h,a){var b=this;Ext.isObject(a)||(a={}),b.isAnimating&&b.stopAnimation(),b.callback=a.callback,b.callbackScope=a.scope;var f=Ext.Date.now(),e=a.easing,c="number"==typeof g?a.easingX||e||b.getEasingX()||!0:null,d="number"==typeof h?a.easingY||e||b.getEasingY()||!0:null;return c&&((c=b.factoryEasing(c)).setStartTime(f),c.setStartValue(b.x),c.setEndValue(g),"duration"in a&&c.setDuration(a.duration)),d&&((d=b.factoryEasing(d)).setStartTime(f),d.setStartValue(b.y),d.setEndValue(h),"duration"in a&&d.setDuration(a.duration)),b.animate(c,d)},doAnimationFrame:function(){var b,c,a=this,d=a.activeEasingX,e=a.activeEasingY,f=Date.now();a.isAnimating&&(a.lastRun=f,null!==d||null!==e?(null!==d?(a.x=b=Math.round(d.getValue()),d.isEnded&&(a.activeEasingX=null,a.fireEvent("axisanimationend",a,"x",b))):b=a.x,null!==e?(a.y=c=Math.round(e.getValue()),e.isEnded&&(a.activeEasingY=null,a.fireEvent("axisanimationend",a,"y",c))):c=a.y,a.lastX===b&&a.lastY===c||(a.doTranslate(b,c),a.lastX=b,a.lastY=c),a.fireEvent("animationframe",a,b,c)):a.stopAnimation())},stopAnimation:function(){var a=this;a.isAnimating&&(a.activeEasingX=null,a.activeEasingY=null,a.isAnimating=!1,Ext.AnimationQueue.stop(a.doAnimationFrame,a),a.fireEvent("animationend",a,a.x,a.y),a.callback&&(a.callback.call(a.callbackScope),a.callback=null))},refresh:function(){this.translate(this.x,this.y)},destroy:function(){this.isAnimating&&this.stopAnimation(),this.callParent()}}),Ext.define("Ext.util.translatable.Dom",{extend:Ext.util.translatable.Abstract,config:{element:null},applyElement:function(a){if(a)return Ext.get(a)},updateElement:function(){this.refresh()}}),Ext.define("Ext.util.translatable.CssTransform",{extend:Ext.util.translatable.Dom,doTranslate:function(b,c){var a=this.getElement();this.destroyed||a.destroyed||a.translate(b,c)},destroy:function(){var a=this.getElement();a&&!a.destroyed&&(a.dom.style.webkitTransform=null),this.callParent()}}),Ext.define("Ext.util.translatable.ScrollPosition",{extend:Ext.util.translatable.Dom,type:"scrollposition",config:{useWrapper:!0},getWrapper:function(){var b,a=this.wrapper,c=this.getElement();if(!a){if(!(b=c.getParent()))return null;b.hasCls(Ext.baseCSSPrefix+"translatable-hboxfix")&&(b=b.getParent()),a=this.getUseWrapper()?c.wrap():b,c.addCls(Ext.baseCSSPrefix+"translatable"),a.addCls(Ext.baseCSSPrefix+"translatable-container"),(this.wrapper=a).on("painted",function(){this.isAnimating||this.refresh()},this),this.refresh()}return a},doTranslate:function(c,d){var a,b=this.getWrapper();b&&(a=b.dom,"number"==typeof c&&(a.scrollLeft=5e5-c),"number"==typeof d&&(a.scrollTop=5e5-d))},destroy:function(){var a=this,c=a.getElement(),b=a.wrapper;b&&(c.destroyed||(a.getUseWrapper()&&b.doReplaceWith(c),c.removeCls(Ext.baseCSSPrefix+"translatable")),b.destroyed||(b.removeCls(Ext.baseCSSPrefix+"translatable-container"),b.un("painted","refresh",a)),delete a.wrapper,delete a._element),a.callParent()}}),Ext.define("Ext.util.translatable.ScrollParent",{extend:Ext.util.translatable.Dom,isScrollParent:!0,applyElement:function(b){var a=Ext.get(b);return a&&(this.parent=a.parent()),a},doTranslate:function(b,c){var a=this.parent;a.setScrollLeft(Math.round(-b)),a.setScrollTop(Math.round(-c))},getPosition:function(){var a=this.position,b=this.parent;return a.x=b.getScrollLeft(),a.y=b.getScrollTop(),a}}),Ext.define("Ext.util.translatable.CssPosition",{extend:Ext.util.translatable.Dom,doTranslate:function(b,c){var a=this.getElement().dom.style;"number"==typeof b&&(a.left=b+"px"),"number"==typeof c&&(a.top=c+"px")},destroy:function(){var a=this.getElement().dom.style;a.left=null,a.top=null,this.callParent()}}),Ext.define("Ext.util.Translatable",{constructor:function(a){var b=Ext.util.translatable;switch(Ext.browser.getPreferredTranslationMethod(a)){case"scrollposition":return new b.ScrollPosition(a);case"scrollparent":return new b.ScrollParent(a);case"csstransform":return new b.CssTransform(a);case"cssposition":return new b.CssPosition(a)}}}),Ext.define("Ext.scroll.Indicator",{extend:Ext.Widget,xtype:"scrollindicator",config:{axis:null,hideAnimation:!0,hideDelay:0,scroller:null,minLength:24},defaultHideAnimation:{to:{opacity:0},duration:300},names:{x:{side:"l",getSize:"getHeight",setLength:"setWidth",translate:"translateX"},y:{side:"t",getSize:"getWidth",setLength:"setHeight",translate:"translateY"}},oppositeAxis:{x:"y",y:"x"},cls:Ext.baseCSSPrefix+"scroll-indicator",applyHideAnimation:function(a){return a=a&&Ext.mergeIf({onEnd:this.onHideAnimationEnd,scope:this},this.defaultHideAnimation,a)},constructor:function(c){var b,a=this;a.callParent([c]),b=a.getAxis(),a.names=a.names[b],a.element.addCls(a.cls+" "+a.cls+"-"+b)},hide:function(){var a=this,b=a.getHideDelay();b?a._hideTimer=Ext.defer(a.doHide,b,a):a.doHide()},setValue:function(c){var d,a=this,o=a.element,l=a.names,m=a.getAxis(),k=a.getScroller(),f=k.getMaxUserPosition()[m],g=k.getElementSize()[m],b=a.length,j=a.getMinLength(),e=b,i=g-b-a.sizeAdjust,h=Math.round,n=Math.max;d=c<0?(e=h(n(b+b*c/g,j)),0):f<c?i+b-(e=h(n(b-b*(c-f)/g,j))):h(c/f*i),a[l.translate](d),o[l.setLength](e)},show:function(){var a=this,b=a.element,c=b.getActiveAnimation();c&&c.end(),a._inDom||(a.getScroller().getElement().appendChild(b),a._inDom=!0,a.size||a.cacheStyles()),a.refreshLength(),clearTimeout(a._hideTimer),b.setStyle("opacity","")},privates:{cacheStyles:function(){var a=this,c=a.element,b=a.names;a.size=c[b.getSize](),a.margin=c.getMargin(b.side)},doHide:function(){var a=this.getHideAnimation(),b=this.element;a?b.animate(a):b.setStyle("opacity",0)},hasOpposite:function(){return this.getScroller().isAxisEnabled(this.oppositeAxis[this.getAxis()])},onHideAnimationEnd:function(){this.element.setStyle("opacity","0")},refreshLength:function(){var a=this,i=a.names,g=a.getAxis(),e=a.getScroller(),h=e.getSize()[g],c=e.getElementSize()[g],j=c/h,b=2*a.margin,d=a.hasOpposite()?b+a.size:b,f=Math.max(Math.round((c-d)*j),a.getMinLength());a.sizeAdjust=d,a.length=f,a.element[i.setLength](f)},translateX:function(a){this.element.translate(a)},translateY:function(a){this.element.translate(0,a)}}}),Ext.define("Ext.scroll.TouchScroller",{extend:Ext.scroll.Scroller,alias:"scroller.touch",isTouchScroller:!0,config:{autoRefresh:!0,bounceEasing:{duration:400},elementSize:void 0,indicators:!0,fps:"auto",maxAbsoluteVelocity:6,momentumEasing:{momentum:{acceleration:30,friction:.5},bounce:{acceleration:30,springTension:.3},minVelocity:1},outOfBoundRestrictFactor:.5,innerElement:null,size:void 0,slotSnapEasing:{duration:150},slotSnapOffset:{x:0,y:0},startMomentumResetTime:300,translatable:{translationMethod:"auto",useWrapper:!1}},cls:Ext.baseCSSPrefix+"scroll-container",scrollerCls:Ext.baseCSSPrefix+"scroll-scroller",dragStartTime:0,dragEndTime:0,isDragging:!1,isAnimating:!1,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},listenerMap:{touchstart:"onTouchStart",touchmove:"onTouchMove",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"},refreshCounter:0,constructor:function(c){var a=this,b="onEvent";a.elementListeners={touchstart:b,touchmove:b,dragstart:b,drag:b,dragend:b,scope:a},a.minPosition={x:0,y:0},a.startPosition={x:0,y:0},a.velocity={x:0,y:0},a.isAxisEnabledFlags={x:!1,y:!1},a.flickStartPosition={x:0,y:0},a.flickStartTime={x:0,y:0},a.lastDragPosition={x:0,y:0},a.dragDirection={x:0,y:0},a.callParent([c]),a.refreshAxes(),a.scheduleRefresh={idle:a.doRefresh,scope:a,single:!0,destroyable:!0}},applyBounceEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyElementSize:function(b){var a,c,d,e=this.getElement();return e?(a=e.dom)?(d=null==b?(c=a.clientWidth,a.clientHeight):(c=b.x,b.y),{x:c,y:d}):void 0:null},applyIndicators:function(b,a){var c,d,e,f;return b?(!0===b?c=d={}:(e=b.x,f=b.y,e||f?(c=null==e||!0===e?{}:e,d=null==e||!0===f?{}:f):c=d=b),a?(c?a.x.setConfig(c):(a.x.destroy(),a.x=null),d?a.y.setConfig(d):(a.y.destroy(),a.y=null),b=a):(b={x:null,y:null},c&&(b.x=new Ext.scroll.Indicator(Ext.applyIf({axis:"x",scroller:this},c))),d&&(b.y=new Ext.scroll.Indicator(Ext.applyIf({axis:"y",scroller:this},d))))):a&&(a.x&&a.x.destroy(),a.y&&a.y.destroy(),a.x=a.y=null),b},applyMomentumEasing:function(b){var a=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyInnerElement:function(a){return a&&!a.isElement&&(a=Ext.get(a)),a},applyMaxPosition:function(a,c){if(!c||a.x!==c.x||a.y!==c.y){var b,d=this.getTranslatable();return d.isAnimating&&(b=d.activeEasingY)&&b.getStartVelocity&&b.getStartVelocity()<0&&a.y<c.y&&b.setMinMomentumValue(-a.y),a}},applyMaxUserPosition:function(b,a){if(!a||b.x!==a.x||b.y!==a.y)return b},applySize:function(a){var e,d,b,c,f=this.getElement();return"number"==typeof a?c=b=a:a&&(b=a.x,c=a.y),!f||null!=b&&null!=c||(e=f.dom,d=this.getInnerElement().dom,null==b&&(b=Math.max(d.scrollWidth,e.clientWidth)),null==c&&(c=Math.max(d.scrollHeight,e.clientHeight))),{x:b,y:c}},applySlotSnapOffset:function(a){return"number"==typeof a&&(a={x:a,y:a}),a},applySlotSnapSize:function(a){return"number"==typeof a&&(a={x:a,y:a}),a},applySlotSnapEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyTranslatable:function(b,a){return Ext.factory(b,Ext.util.Translatable,a)},destroy:function(){var a=this,c=a.getElement(),b=a.getInnerElement(),d=a.sizeMonitors;d&&(d.element.destroy(),d.container.destroy()),c&&!c.destroyed&&c.removeCls(a.cls),b&&!b.destroyed&&b.removeCls(a.scrollerCls),a._isWrapped&&(c.destroyed||a.unwrapContent(),b.destroy()),a.setElement(null),a.setInnerElement(null),a.setIndicators(null),Ext.destroy(a.getTranslatable()),a.callParent()},refresh:function(c,b){var a=this;++a.refreshCounter,c?a.doRefresh(b):a.refreshScheduled||(a.scheduleRefresh.args=[b],a.refreshScheduled=Ext.on(a.scheduleRefresh))},updateAutoRefresh:function(a){this.toggleResizeListeners(a)},updateBounceEasing:function(a){this.getTranslatable().setEasingX(a.x).setEasingY(a.y)},updateElementSize:function(){this.isConfiguring||this.refreshAxes()},updateDisabled:function(a){this.isConfiguring||(a?this.detachListeners():this.attachListeners())},updateElement:function(d,f){var e,c,a=this,b=a.getInnerElement();b||((b=d.dom.firstChild)&&1===b.nodeType&&Ext.fly(b).hasCls(a.scrollerCls)||(b=a.wrapContent(d)),a.setInnerElement(b)),d.addCls(a.cls),a.isConfiguring&&(a.getTranslatable().isScrollParent||(d.dom.style.overflowX=d.dom.style.overflowY="",(e=a.elementListeners).mousewheel="onMouseWheel",e.scroll={fn:"onElementScroll",delegated:!1,scope:a})),a.getDisabled()||a.attachListeners(),a.isConfiguring||!1!==(c=a.getAutoRefresh())&&(a.toggleResizeListeners(c),c?a.refresh():null===c&&a.setElementSize(null))},updateFps:function(a){"auto"!==a&&this.getTranslatable().setFps(a)},updateMaxUserPosition:function(){this.snapToBoundary()},updateMinUserPosition:function(){this.snapToBoundary()},updateInnerElement:function(a){a&&a.addCls(this.scrollerCls),this.getTranslatable().setElement(a)},updateSize:function(a){this.isConfiguring||(1===Ext.supports.touchScroll&&this.callParent([a]),this.refreshAxes())},updateTranslatable:function(a){a.setElement(this.getInnerElement()),a.isScrollParent||a.on({animationframe:"onAnimationFrame",animationend:"onAnimationEnd",scope:this})},updateX:function(){this.isConfiguring||this.refreshAxes()},updateY:function(){this.isConfiguring||this.refreshAxes()},privates:{attachListeners:function(){this.getElement().on(this.elementListeners)},constrainX:function(a){return Math.min(this.getMaxPosition().x,Math.max(a,0))},constrainY:function(a){return Math.min(this.getMaxPosition().y,Math.max(a,0))},convertEasingConfig:function(a){return a},detachListeners:function(){this.getElement().un(this.elementListeners)},doRefresh:function(b){var d,c,a=this;a.refreshScheduled&&(a.refreshScheduled=a.refreshScheduled.destroy()),a.refreshCounter&&a.getElement()&&(a.stopAnimation(),a.getTranslatable().refresh(),b&&(d=b.size,c=b.elementSize),a.setSize(d),a.setElementSize(c),a.fireEvent("refresh",a),a.refreshCounter=0)},doScrollTo:function(b,c,e,f){var a=this,m=a.isDragging,j=a.getTranslatable().isScrollParent,k=!a.isReflecting&&!j;if(a.destroyed||!a.getElement())return a;f=f||a.isDragging;var h,i,l=a.getTranslatable(),d=a.position,g=!1;return m&&!a.isAxisEnabled("x")||(isNaN(b)||"number"!=typeof b?b=d.x:(f||(b=a.constrainX(b)),d.x!==b&&(d.x=b,g=!0)),h=a.convertX(-b)),m&&!a.isAxisEnabled("y")||(isNaN(c)||"number"!=typeof c?c=d.y:(f||(c=a.constrainY(c)),d.y!==c&&(d.y=c,g=!0)),i=-c),g?(k&&a.onScrollStart(),e?l.translateAnimated(h,i,e):(j||a.onScroll(),l.translate(h,i),k&&a.onScrollEnd())):e&&e.callback&&e.callback(),a},getAnimationEasing:function(b,m){if(!this.isAxisEnabled(b))return null;var h,f,a=this,c=a.position[b],k=a.getMinUserPosition()[b],i=a.getMaxUserPosition()[b],g=a.getMaxAbsoluteVelocity(),d=null,j=a.dragEndTime,e=m.flick.velocity[b],l="x"===b;return c<k?d=k:i<c&&(d=i),l&&(c=a.convertX(c),d=a.convertX(d)),null!==d?((f=a.getBounceEasing()[b]).setConfig({startTime:j,startValue:-c,endValue:-d}),f):0===e?null:(e<-g?e=-g:g<e&&(e=g),f=a.getMomentumEasing()[b],h={startTime:j,startValue:-c,startVelocity:1.5*e,minMomentumValue:-i,maxMomentumValue:0},l&&a.convertEasingConfig(h),f.setConfig(h),f)},getSnapPosition:function(d){var b,h,g,a,e=this,c=e.getSlotSnapSize()[d],f=null;return 0!==c&&e.isAxisEnabled(d)&&(b=e.position[d],h=e.getSlotSnapOffset()[d],g=e.getMaxUserPosition()[d],0!==(a=Math.floor((b-h)%c))&&(f=b!==g&&Math.abs(a)>c/2?Math.min(g,b+(0<a?c-a:a-c)):b-a)),f},hideIndicators:function(){var b,c,d=this,a=d.getIndicators();a&&(d.isAxisEnabled("x")&&(b=a.x)&&b.hide(),d.isAxisEnabled("y")&&(c=a.y)&&c.hide())},isAxisEnabled:function(a){return this.getX(),this.getY(),this.isAxisEnabledFlags[a]},onAnimationEnd:function(){this.snapToBoundary(),this.onScrollEnd()},onAnimationFrame:function(d,b,c){var a=this.position;a.x=this.convertX(-b),a.y=-c,this.onScroll()},onAxisDrag:function(a,k){if(k&&this.isAxisEnabled(a)){var b=this,o=b.flickStartPosition,g=b.flickStartTime,f=b.lastDragPosition,d=b.dragDirection,r=b.position[a],q=b.getMinUserPosition()[a],e=b.getMaxUserPosition()[a],p=b.startPosition[a],l=f[a],c=p-k,i=d[a],h=b.getOutOfBoundRestrictFactor(),n=b.getStartMomentumResetTime(),m=Ext.Date.now();return c<q?c*=h:e<c&&(c=e+(c-e)*h),l<c?d[a]=1:c<l&&(d[a]=-1),(0!==i&&d[a]!==i||m-g[a]>n)&&(o[a]=r,g[a]=m),f[a]=c,!0}},onDomScroll:function(){var c,b,a=this;a.getTranslatable().isScrollParent&&(c=a.getElement().dom,(b=a.position).x=c.scrollLeft,b.y=c.scrollTop),a.callParent()},onDrag:function(c){var a=this,b=a.lastDragPosition;a.isDragging&&a.onAxisDrag("x",a.convertX(c.deltaX))|a.onAxisDrag("y",c.deltaY)&&a.doScrollTo(b.x,b.y)},onDragEnd:function(d){var b,c,a=this;a.isDragging&&(a.dragEndTime=Ext.Date.now(),a.onDrag(d),a.isDragging=!1,b=a.getAnimationEasing("x",d),c=a.getAnimationEasing("y",d),b||c?a.getTranslatable().animate(b,c):a.onScrollEnd())},onDragStart:function(d){var a=this,b=a.getDirection(),m=d.absDeltaX,n=d.absDeltaY,o=a.getDirectionLock(),l=a.startPosition,g=a.flickStartPosition,j=a.flickStartTime,h=a.lastDragPosition,i=a.position,k=a.dragDirection,e=i.x,f=i.y,c=Ext.Date.now();if(o&&"both"!==b){if(!("horizontal"===b&&n<m||"vertical"===b&&m<n))return;d.stopPropagation()}h.x=e,h.y=f,g.x=e,g.y=f,l.x=e,l.y=f,j.x=c,j.y=c,k.x=0,k.y=0,a.dragStartTime=c,a.isDragging=!0,a.isScrolling||a.onScrollStart()},onElementResize:function(b,a){this.refresh(!0,{elementSize:{x:a.contentWidth,y:a.contentHeight},size:this.getAutoRefresh()?null:this.getSize()})},onElementScroll:function(b,a){a.scrollTop=a.scrollLeft=0},onEvent:function(b){var a=this,c=b.browserEvent;a.self.isTouching&&!a.isTouching||a.getTranslatable().isScrollParent&&(a.isMouseEvent[c.type]||"mouse"===c.pointerType)||!a.getY()&&!a.getX()||a[a.listenerMap[b.type]](b)},onInnerElementResize:function(b,a){this.refresh(!0,{size:{x:a.width,y:a.height}})},onMouseWheel:function(j){var a=this,g=j.getWheelDeltas(),c=-g.x,d=-g.y,b=a.position,e=a.getMaxUserPosition(),f=a.getMinUserPosition(),h=Math.max,i=Math.min,k=h(i(b.x+c,e.x),f.x),l=h(i(b.y+d,e.y),f.y);c=k-b.x,d=l-b.y,(c||d)&&(j.stopEvent(),a.onScrollStart(),a.scrollBy(c,d),a.onScroll(),a.onScrollEnd())},onPartnerScrollEnd:function(b,c){var a=this;a.getTranslatable().isScrollParent||a.fireScrollEnd(b,c),a.callParent([b,c]),a.isScrolling=!1,a.hideIndicators()},onPartnerScrollStart:function(b,c){var a=this;a.isScrolling=!0,a.getTranslatable().isScrollParent||a.fireScrollStart(b,c),a.showIndicators()},onScroll:function(){var c,d,a=this,e=a.position,f=e.x,g=e.y,b=a.getIndicators();b&&(a.isAxisEnabled("x")&&(c=b.x)&&c.setValue(f),a.isAxisEnabled("y")&&(d=b.y)&&d.setValue(g)),a.fireScroll(f,g)},onScrollEnd:function(){var a=this,b=a.position;!a.isScrolling||a.isTouching||a.snapToSlot()||(a.hideIndicators(),a.isScrolling=Ext.isScrolling=!1,a.fireScrollEnd(b.x,b.y))},onScrollStart:function(){var a=this,b=a.position;a.isScrolling||(a.showIndicators(),a.isScrolling=Ext.isScrolling=!0,a.fireScrollStart(b.x,b.y))},onTouchEnd:function(){var a=this;a.isTouching=a.self.isTouching=!1,!a.isDragging&&a.snapToSlot()&&a.onScrollStart()},onTouchMove:function(a){a.preventDefault()},onTouchStart:function(){var a=this;a.isTouching=a.self.isTouching=!0,Ext.getDoc().on({touchend:"onTouchEnd",scope:a,single:!0}),a.stopAnimation()},refreshAxes:function(){var f,g,c,d,i,j,a=this,b=a.isAxisEnabledFlags,k=a.getSize(),h=a.getElementSize(),e=a.getIndicators();k&&h&&(f=Math.max(0,k.x-h.x),g=Math.max(0,k.y-h.y),c=a.getX(),d=a.getY(),a.setMaxPosition({x:f,y:g}),!0===c||"auto"===c?b.x=!!f:!1===c?(b.x=!1,(i=e&&e.x)&&i.hide()):"scroll"===c&&(b.x=!0),!0===d||"auto"===d?b.y=!!g:!1===d?(b.y=!1,(j=e&&e.y)&&j.hide()):"scroll"===d&&(b.y=!0),a.setMaxUserPosition({x:b.x?f:0,y:b.y?g:0}),1===Ext.supports.touchScroll&&(a.initXStyle(),a.initYStyle()))},showIndicators:function(){var b,c,d=this,a=d.getIndicators();a&&(d.isAxisEnabled("x")&&(b=a.x)&&b.show(),d.isAxisEnabled("y")&&(c=a.y)&&c.show())},snapToBoundary:function(){var a=this,d=a.getPosition();if(!a.isConfiguring&&(d.x||d.y)){var f=a.getMinUserPosition(),e=a.getMaxUserPosition(),i=f.x,j=f.y,g=e.x,h=e.y,b=Math.round(d.x),c=Math.round(d.y);b<i?b=i:g<b&&(b=g),c<j?c=j:h<c&&(c=h),a.doScrollTo(b,c)}},snapToSlot:function(){var a=this,c=a.getSnapPosition("x"),d=a.getSnapPosition("y"),b=a.getSlotSnapEasing();return(null!==c||null!==d)&&(a.doScrollTo(c,d,{easingX:b.x,easingY:b.y}),!0)},stopAnimation:function(){this.getTranslatable().stopAnimation()},toggleResizeListeners:function(e){var b,a,d,c=this,f=c.getElement();f&&(d=c.getInnerElement(),e?b=a="on":null===e?(b="on",a="un"):b=a="un",f[b]("resize","onElementResize",c),d[a]("resize","onInnerElementResize",c))},unwrapContent:function(){for(var b,a=this.getInnerElement().dom,c=this.getElement().dom;b=a.firstChild;)c.insertBefore(b,a)},wrapContent:function(d){for(var b,a=document.createElement("div"),c=d.dom;b=c.lastChild;)a.insertBefore(b,a.firstChild);return c.appendChild(a),this.setInnerElement(a),this._isWrapped=!0,this.getInnerElement()}}}),Ext.define("Ext.scroll.DomScroller",{extend:Ext.scroll.Scroller,alias:"scroller.dom",isDomScroller:!0,getMaxPosition:function(){var a,b=this.getElement(),c=0,d=0;return b&&!b.destroyed&&(c=(a=b.dom).scrollWidth-a.clientWidth,d=a.scrollHeight-a.clientHeight),{x:c,y:d}},getMaxUserPosition:function(){var a,c=this,b=c.getElement(),d=0,e=0;return b&&!b.destroyed&&(a=b.dom,c.getX()&&(d=a.scrollWidth-a.clientWidth),c.getY()&&(e=a.scrollHeight-a.clientHeight)),{x:d,y:e}},getPosition:function(){var a=this;return a.positionDirty&&a.updateDomScrollPosition(),a.position},getSize:function(){var c,a=this.getElement();return a&&!a.destroyed?{x:(c=a.dom).scrollWidth,y:c.scrollHeight}:{x:0,y:0}},updateElement:function(b,a){this.initXStyle(),this.initYStyle()},updateX:function(a){this.initXStyle()},updateY:function(a){this.initYStyle()},privates:{doScrollTo:function(a,b,j){var f,c,i,g,h,e=this,d=e.getElement();d&&!d.destroyed&&(c=d.dom,h=b===1/0,((g=a===1/0)||h)&&(f=e.getMaxPosition(),g&&(a=f.x),h&&(b=f.y)),a=e.convertX(a),j?(i={},null!=b&&(i.scrollTop=b),null!=a&&(i.scrollLeft=a),d.animate(Ext.mergeIf({to:{scrollTop:b,scrollLeft:a}},j))):(null!=b&&(c.scrollTop=b),null!=a&&(c.scrollLeft=a,Ext.isIE8&&(c.scrollLeft,c.scrollLeft=a))),e.positionDirty=!0)},getElementScroll:function(a){return a.getScroll()},stopAnimation:function(){var a=this.getElement().getActiveAnimation();a&&a.end()}}},function(a){Ext.onDocumentReady(function(){a.document=new a({x:!0,y:!0,element:document.body})})}),Ext.define("Ext.util.Floating",{mixinId:"floating",focusOnToFront:!0,shadow:"sides",animateShadow:!1,constrain:!1,config:{activeCounter:0,alwaysOnTop:!1},preventDefaultAlign:!1,_visModeMap:{visibility:1,display:2,offsets:3},constructor:function(){var c,b,a=this,e=a.el,d=a.shadow;d&&(b={mode:!0===d?"sides":d},(c=a.shadowOffset)&&(b.offset=c),b.animate=a.animateShadow,b.fixed=a.fixed,e.enableShadow(b,!1)),(a.shim||Ext.useShims)&&e.enableShim({fixed:a.fixed},!1),e.setVisibilityMode(a._visModeMap[a.hideMode]),a.el.on({mousedown:a.onMouseDown,scope:a,capture:!0}),a.registerWithOwnerCt(),a.initHierarchyEvents()},alignTo:function(b,d,f,e){var c,a=this;Ext.un("scroll",a.onAlignToScroll,a),(c=b.isComponent?b.el:b.nodeType?Ext.fly(b):b).contains(a.el)||Ext.on("scroll",a.onAlignToScroll,a),a._lastAlignTarget=b,a._lastAlignToPos=d,a.mixins.positionable.alignTo.call(a,c,d,f,e)},initFloatConstrain:function(){var a=this,b=a.floatParent;!a.constrain&&!a.constrainHeader||a.constrainTo||(a.constrainTo=b?b.getTargetEl():a.container)},initHierarchyEvents:function(){var b=this,a=this.syncHidden;b.hasHierarchyEventListeners||(b.mon(Ext.GlobalEvents,{hide:a,collapse:a,show:a,expand:a,added:a,scope:b}),b.hasHierarchyEventListeners=!0)},registerWithOwnerCt:function(){var a=this,c=a.ownerCt,b=a.zIndexParent;b&&b.unregisterFloatingItem(a),b=a.zIndexParent=a.up("[floating]"),a.floatParent=c||b,a.initFloatConstrain(),delete a.ownerCt,b?b.registerFloatingItem(a):Ext.WindowManager.register(a)},onMouseDown:function(g){var a,d,b=this,f=b.focusTask,c="touch"===g.pointerType;if(b.floating&&(!f||!f.id)){for(a=g.target,d=b.el.dom;!c&&a&&a!==d;)Ext.fly(a).isFocusable()&&(c=!0),a=a.parentNode;Ext.WindowManager.getActive()===b&&(a===d||c)||b.toFront(c)}},onBeforeFloatLayout:function(){this.el.preventSync=!0},onAfterFloatLayout:function(){var a=this.el;(a.shadow||a.shim)&&(a.setUnderlaysVisible(!0),a.syncUnderlays())},syncHidden:function(){var a=this,d=a.hidden||!a.rendered,c=a.hierarchicallyHidden=a.isHierarchicallyHidden(),b=a.pendingShow;d!==c&&(c?(a.hide(),a.pendingShow=!0):b&&(delete a.pendingShow,b.length?a.show.apply(a,b):a.show()))},setZIndex:function(a){var b=this;return b.el.setZIndex(a),a+=10,b.floatingDescendants&&(a=100*Math.floor(b.floatingDescendants.setBase(a)/100)+1e4),a},doConstrain:function(c){var b=this.calculateConstrainedPosition(c,null,!0);b&&this.setPosition(b)},updateActiveCounter:function(b){var a=this.zIndexParent;a&&!1!==this.bringParentToFront&&a.setActiveCounter(++Ext.ZIndexManager.activeCounter),(a=this.zIndexManager)&&a.onComponentUpdate(this)},updateAlwaysOnTop:function(b){var a=this.zIndexManager;a&&a.onComponentUpdate(this)},toFront:function(b){var a=this;return a.zIndexManager.bringToFront(a,b||!a.focusOnToFront)&&a.hasListeners.tofront&&a.fireEvent("tofront",a,a.el.getZIndex()),a},setActive:function(d,c){var b,a=this;d?(a.el.shadow&&!a.maximized&&a.el.enableShadow(null,!0),c&&((b=Ext.ComponentManager.getActiveComponent())&&b.up(a)||a.focus()),a.fireEvent("activate",a)):a.fireEvent("deactivate",a)},toBack:function(){return this.zIndexManager.sendToBack(this),this},center:function(){var b,a=this;return a.isVisible()?(b=a.getAlignToXY(a.container,"c-c"),a.setPagePosition(b)):a.needsCenter=!0,a},onFloatShow:function(){this.needsCenter&&this.center(),delete this.needsCenter,this.toFrontOnShow&&this.toFront()},fitContainer:function(f){var d=this,c=d.floatParent,a=c?c.getTargetEl():d.container,b=a.getViewSize(),e=c||a.dom!==document.body?[0,0]:a.getXY();b.x=e[0],b.y=e[1],d.setBox(b,f)},privates:{onFloatDestroy:function(){this.clearAlignEl()},clearAlignEl:function(){var a=this;a._lastAlignTarget&&(Ext.un("scroll",a.onAlignToScroll,a),a._lastAlignPos=a._lastAlignTarget=null)},onAlignToScroll:function(e){var c,d,b=this,a=b._lastAlignTarget,f=a.isFloating;a&&(a.isComponent?(c=a.destroyed,a=a.el):(a.nodeType&&(a=Ext.fly(a)),c=!(d=a.dom)||Ext.isGarbage(d)),c?b.clearAlignEl():!e.getElement().contains(a)&&!f||e.getElement().contains(b.el)||b.alignTo(a,b._lastAlignToPos))}}}),Ext.define("Ext.util.ElementContainer",{mixinId:"elementCt",config:{childEls:{$value:{},cached:!0,lazy:!0,merge:function(d,f,g,e){var b,a,c=f?Ext.Object.chain(f):{};if(d instanceof Array)for(b=d.length;b--;)a=d[b],e&&a in c||("string"==typeof a?c[a]={name:a,itemId:a}:c[a.name]=a);else if(d)if(d.constructor===Object)for(b in d)e&&b in c||(!0===(a=d[b])?c[b]={itemId:b}:"string"==typeof a?c[b]={itemId:a}:"itemId"in(c[b]=a)||(a.itemId=b),c[b].name=b);else e&&d in c||(c[d]={name:d,itemId:d});return c}}},destroy:function(){var a,b,c=this,d=c.getChildEls();for(b in d)(a=c[b])&&(a.destroy&&(a.component=null,a.destroy()),c[b]=null)},privates:{addChildEl:function(a){var c=this,b=c.getChildEls();c.hasOwnProperty("childEls")||(c.childEls=b=Ext.Object.chain(b)),"string"==typeof a&&(a={name:a,itemId:a}),b[a.name]=a},afterClassMixedIn:function(a){var c=a.prototype,b=c.childEls;b&&(delete c.childEls,a.getConfigurator().add({childEls:b}))},attachChildEls:function(h,n){var f,g,b,j,c,a,d,i=this,k=i.getChildEls(),e=n||i,m=e.id+"-",l=!e.frame;for(f in k)if(b=k[f],!l||!b.frame){if(a=(c=b.select)?h.select(c,!0):(c=b.selectNode)?h.selectNode(c,!1):(d=b.id)?Ext.cache[d]||h.getById(d):(d=m+b.itemId,Ext.cache[d]))if(a.isElement)a.component=e;else if(a.isComposite&&!a.isLite)for(j=(g=a.elements).length;j--;)g[j].component=e;i[f]=a||null}}}}),Ext.define("Ext.util.Renderable",{mixinId:"renderable",frameCls:Ext.baseCSSPrefix+"frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ',Ext.baseCSSPrefix+'table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],_renderState:0,ariaEl:"el",_layerCls:Ext.baseCSSPrefix+"layer",_fixedLayerCls:Ext.baseCSSPrefix+"fixed-layer",ariaStaticRoles:{presentation:!0,article:!0,definition:!0,directory:!0,document:!0,img:!0,heading:!0,math:!0,note:!0,banner:!0,complementary:!0,contentinfo:!0,navigation:!0,search:!0,undefined:!0,null:!0},statics:{makeRenderSetter:function(c,b){var a=c.name;return function(g){var d=this,f=d.renderConfigs||(d.renderConfigs={}),e=f[b];return d._renderState>=b?(c.setter||c.getSetter()).call(d,g):(e||(f[b]=e={}),a in e||(e[a]=d[a]),d[a]=g),d}},processRenderConfig:function(g,e,c){var b,a,i,f,h=this.prototype,j=this.getConfigurator(),l=Ext.util.Renderable.makeRenderSetter,d=g[e];for(i in d)h[f=(a=Ext.Config.get(i)).names.set]||(b=a.renderSetter||(a.renderSetter={}),h[f]=b[c]||(b[c]=l(a,c)));delete g[e],j.add(d)}},onClassMixedIn:function(a){function d(a){a.beforeRenderConfig&&this.processRenderConfig(a,"beforeRenderConfig",1),a.renderConfig&&this.processRenderConfig(a,"renderConfig",3),e.call(this,a)}var e=a.override,c=this.processRenderConfig,b=function(b,a){b.override=d,b.processRenderConfig=c,a.beforeRenderConfig&&b.processRenderConfig(a,"beforeRenderConfig",1),a.renderConfig&&b.processRenderConfig(a,"renderConfig",3)};b(a,a.prototype),a.onExtended(b)},afterRender:function(){var d,b,h,f,e,a=this,c={},i=a.protoEl,g=a.el;a.finishRenderChildren(),a._renderState=4,a.contentEl&&(f=(h=Ext.baseCSSPrefix)+"hidden-",(e=a.contentEl=Ext.get(a.contentEl)).component=a,e.removeCls([h+"hidden",f+"display",f+"offsets"]),a.getContentTarget().appendChild(e.dom)),i.writeTo(c),(b=c.removed)&&g.removeCls(b),(b=c.cls).length&&g.addCls(b),(b=c.style)&&g.setStyle(b),a.protoEl=null,a.ownerCt||a.skipLayout||a.updateLayout(),a.x&&a.y||!a.pageX&&!a.pageY||a.setPagePosition(a.pageX,a.pageY),a.disableOnRender&&a.onDisable(),(d=a.controller)&&d.afterRender&&d.afterRender(a)},afterFirstLayout:function(l,k){var f,d,e,b,c,a=this,g=a.x,h=a.y,j=a.defaultAlign,i=a.alignOffset;a.ownerLayout||(d=void 0!==g,e=void 0!==h),!a.floating||a.preventDefaultAlign||d&&e||(a.floatParent?(b=a.floatParent.getTargetEl().getViewRegion(),c=a.el.getAlignToXY(a.alignTarget||a.floatParent.getTargetEl(),j,i),b.x=c[0]-b.x,b.y=c[1]-b.y):(c=a.el.getAlignToXY(a.alignTarget||a.container,j,i),b=a.el.translateXY(c[0],c[1])),g=d?g:b.x,h=e?h:b.y,d=e=!0),(d||e)&&a.setPosition(g,h),a.onBoxReady(l,k),(f=a.controller)&&f.boxReady&&f.boxReady(a)},beforeRender:function(){var c,a=this,d=a.floating,e=a.getComponentLayout(),b=a.userCls;a._renderState=1,a.ariaUsesMainElement="el"===a.ariaEl,(c=a.controller)&&c.beforeRender&&c.beforeRender(a),a.initBindable(),a.renderConfigs&&a.flushRenderConfigs(),a.reference&&a.publishState(),b&&a.addCls(b),d&&(a.addCls(a.fixed?a._fixedLayerCls:a._layerCls),(b=d.cls)&&a.addCls(b)),a.frame=a.frame||a.alwaysFramed,e.initialized||e.initLayout(),a.initOverflow(),a.setUI(a.ui)},doApplyRenderTpl:function(d,a){var c=a.$comp;c.rendered||c.initRenderTpl().applyOut(a.renderData,d)},getElConfig:function(){var h,a=this,e=a.autoEl,c=a.getFrameInfo(),b={tag:"div",tpl:c?a.initFramingTpl(c.table):a.initRenderTpl()},g=a.layoutTargetCls,d=a.protoEl,f=a.ariaRole;return a.initStyles(d),g&&!c&&d.addCls(g),d.writeTo(b),d.flush(),e&&(Ext.isString(e)?b.tag=e:Ext.apply(b,e)),f&&a.ariaUsesMainElement&&(b.role=f,a.ariaStaticRoles[f]||(b["aria-hidden"]=!!a.hidden,b["aria-disabled"]=!!a.disabled,a.ariaLabel&&!a.ariaLabelledBy&&(b["aria-label"]=a.ariaLabel),a.collapsible&&(b["aria-expanded"]=!a.collapsed),a.ariaRenderAttributes&&Ext.apply(b,a.ariaRenderAttributes),a.config.ariaAttributes&&Ext.apply(b,a.getAriaAttributes()))),b.id=a.id,b.tpl&&(c?(b.tplData=h=a.getFrameRenderData(),h.renderData=a.initRenderData()):b.tplData=a.initRenderData()),a.ariaRenderAttributes=null,b},getInsertPosition:function(a){return void 0!==a&&(a=Ext.isNumber(a)?this.container.dom.childNodes[a]:Ext.getDom(a)),a},getRenderTree:function(){var a=this,b=null;return a.hasListeners.beforerender&&!1===a.fireEvent("beforerender",a)||(a._renderState=1,a.beforeRender(),a.rendering=!0,a._renderState=2,b=a.getElConfig(),a.el&&(b.id=a.$pid=Ext.id(null,a.el.identifiablePrefix))),b},initRenderData:function(){var d,b,a=this,c=a.ariaRole;return d=Ext.apply({$comp:a,id:a.id,ui:a.ui,uiCls:a.uiCls,baseCls:a.baseCls,componentCls:a.componentCls,frame:a.frame,renderScroller:a.touchScroll,scrollerCls:a.scrollerCls,childElCls:""},a.renderData),c&&!a.ariaUsesMainElement&&(b={role:c},a.ariaStaticRoles[c]||(b["aria-hidden"]=!!a.hidden,b["aria-disabled"]=!!a.disabled,a.ariaLabel&&!a.ariaLabelledBy&&(b["aria-label"]=a.ariaLabel),a.collapsible&&(b["aria-expanded"]=!a.collapsed),a.ariaRenderAttributes&&Ext.apply(b,a.ariaRenderAttributes),a.config.ariaAttributes&&Ext.apply(b,a.getAriaAttributes())),d.ariaAttributes=b),d},onRender:function(i,h){var d,c,a=this,e=a.x,f=a.y,b=null,g=a.el;a.applyRenderSelectors(),a.rendering=null,a.rendered=!0,a._renderState=3,a.renderConfigs&&a.flushRenderConfigs(),null!=e&&(b={x:e}),null!=f&&((b=b||{}).y=f),a.getFrameInfo()||(d=a.width,c=a.height,"number"==typeof d&&((b=b||{}).width=d),"number"==typeof c&&((b=b||{}).height=c)),1===a.touchScroll&&a.getOverflowEl().disableTouchScroll(),a.lastBox=g.lastBox=b},render:function(c,g){var h,d,e,a=this,b=a.el,f=a.ownerLayout;b&&!b.isElement&&(a.wrapPrimaryEl(b),b=a.el),a.skipLayout||Ext.suspendLayouts(),c=a.initContainer(c),e=a.getInsertPosition(g),b?a.hasListeners.beforerender&&!1===a.fireEvent("beforerender",a)?h=!0:(a.beforeRender(),a.needsRenderTpl=a.rendering=!0,a._renderState=2,a.initStyles(b),!1!==a.allowDomMove&&(e?c.dom.insertBefore(b.dom,e):c.dom.appendChild(b.dom))):(d=a.getRenderTree(),f&&f.transformItemRenderTree&&(d=f.transformItemRenderTree(d)),d&&(b=e?Ext.DomHelper.insertBefore(e,d):Ext.DomHelper.append(c,d),a.wrapPrimaryEl(b),a.cacheRefEls(b))),b&&!h&&a.finishRender(g),a.skipLayout||Ext.resumeLayouts(!a.hidden&&!c.isDetachedBody)},ensureAttachedToBody:function(c){for(var b,a=this;a.ownerCt;)a=a.ownerCt;a.container.isDetachedBody&&(a.container=b=Ext.getBody(),b.appendChild(a.el.dom),c&&a.updateLayout(),"number"!=typeof a.x&&"number"!=typeof a.y||a.setPosition(a.x,a.y))},privates:{applyRenderSelectors:function(){var d,c,a=this,b=a.renderSelectors,e=a.el;if(a.attachChildEls(e),a.ariaEl=a[a.ariaEl]||a.el,b)for(c in b)(d=b[c])&&(a[c]=e.selectNode(d,!1))},cacheRefEls:function(a){a=a||this.el;var c,b,e=Ext.cache,h=Ext.dom.Element,d=(a.isElement?a.dom:a).querySelectorAll("[data-ref]"),g=d.length;for(b=0;b<g;b++)e[(c=d[b]).id]||new h(c)},doAutoRender:function(){var a=this;a.rendered||(a.floating?a.render(a.renderTo||document.body):a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender))},doRenderContent:function(c,d){var a=d.$comp,b=a.data;a.html&&(Ext.DomHelper.generateMarkup(a.html,c),delete a.html),a.tpl&&(a.tpl.isTemplate||(a.tpl=new Ext.XTemplate(a.tpl)),b&&(a.data=b=b.isEntity?b.getData(!0):b,a.tpl.applyOut(b,c)))},doRenderFramingDockedItems:function(d,a,c){var b=a.$comp;!b.rendered&&b.doRenderDockedItems&&(a.renderData.$skipDockedItems=!0,b.doRenderDockedItems.call(this,d,a,c))},flushRenderConfigs:function(){var e,c,a,d,g,b=this,f=b.renderConfigs,h=b._renderState;if(f){for(c=0;c<=h;++c)if(e=f[c])for(a in f[c]=null,e)g=e[a],(d=d||{})[a]=b[a],b[a]=g;d&&b.setConfig(d)}},finishRender:function(j){var d,h,f,e,i,b,c,a=this,g=Ext.cache;if(!a.el||a.$pid)if(b=a.container?(c=g[a.id])?c.dom:a.container.getById(a.id,!0):(c=g[f=a.$pid||a.id])?c.dom:Ext.getDom(f),a.el){for(delete a.$pid,a.el.dom||a.wrapPrimaryEl(a.el),b.parentNode.insertBefore(a.el.dom,b),d=b,h=(b=a.el.dom).firstChild;d.firstChild;)b.insertBefore(d.firstChild,h);a.el.addCls(d.className),Ext.removeNode(d)}else a.wrapPrimaryEl(b);else a.needsRenderTpl&&((e=a.initRenderTpl())&&(i=a.initRenderData(),e.insertFirst(a.getTargetEl(),i)),a.cacheRefEls());(a.el.component=a).container||(a.container=Ext.get(a.el.dom.parentNode)),a.ctCls&&a.container.addCls(a.ctCls),a.onRender(a.container,j),a.overflowInited||a.initOverflow(),a.el.setVisibilityMode(Ext.Element[a.hideMode.toUpperCase()]),a.overCls&&a.el.hover(a.addOverCls,a.removeOverCls,a),a.hasListeners.render&&a.fireEvent("render",a),a.afterRender(),a.hasListeners.afterrender&&a.fireEvent("afterrender",a),a.initEvents(),a.hidden&&a.el.hide()},finishRenderChildren:function(){this.getComponentLayout().finishRender()},getFrameRenderData:function(){var a=this,b=a.frameSize,c="";return a._syncFrameHeight&&a.height&&(c="height:"+(a.height-b.height)+"px"),{$comp:a,id:a.id,fgid:a.id+"-frame",ui:a.ui,uiCls:a.uiCls,frameCls:a.frameCls,frameBodyCls:a.layoutTargetCls||"",baseCls:a.baseCls,top:!!b.top,left:!!b.left,right:!!b.right,bottom:!!b.bottom,mcStyle:c,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame)return!1;var a,o,l,j,n,g,e,d,f,m,i,h,k,c=this,q=c.frameInfoCache,p=c.getFramingInfoCls()+"-frameInfo",b=q[p];return null==b&&(b=!!(a=Ext.fly(c.getStyleProxy(p),"frame-style-el").getStyle("font-family"))&&(a=a.split("-"),o=parseInt(a[1],10),l=parseInt(a[2],10),j=parseInt(a[3],10),n=parseInt(a[4],10),g=parseInt(a[5],10),e=parseInt(a[6],10),d=parseInt(a[7],10),f=parseInt(a[8],10),m=parseInt(a[9],10),i=parseInt(a[10],10),h=parseInt(a[11],10),k=parseInt(a[12],10),{table:"t"===a[0].charAt(0),vertical:"v"===a[0].charAt(1),top:o,right:l,bottom:j,left:n,width:n+l,height:o+j,border:{top:g,right:e,bottom:d,left:f,width:f+e,height:g+d},padding:{top:m,right:i,bottom:h,left:k,width:k+i,height:m+h}}),q[p]=b),c.frame=!!b,c.frameSize=b},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(b){var a=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,!0));return a.className=b,a},getFrameTpl:function(a){return this.getTpl(a?"frameTableTpl":"frameTpl")},initContainer:function(a){var b=this;return!a&&b.el&&(a=b.el.dom.parentNode,b.allowDomMove=!1),b.container=a.dom?a:Ext.get(a),b.container},initOverflow:function(){var a=this,e=a.getOverflowStyle(),d=a.scrollFlags,b=a.getOverflowEl(),c=d.y||d.x,f=a.touchScroll=c&&Ext.supports.touchScroll;c&&b&&b.isElement&&(a.overflowInited=!0,2===f?b.setStyle("overflow","hidden"):b.setStyle(e))},doRenderPadding:function(c,b){var a=b.$comp;a.touchScroll&&c.push("padding:",a.unitizeBox(a.padding))},initFramingTpl:function(b){var a=this.getFrameTpl(b);return a&&!a.applyRenderTpl&&this.setupFramingTpl(a),a},initRenderTpl:function(){var a=this.getTpl("renderTpl");return a&&!a.renderContent&&this.setupRenderTpl(a),a},setupFramingTpl:function(a){a.applyRenderTpl=this.doApplyRenderTpl,a.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(a){a.renderBody=a.renderContent=this.doRenderContent,a.renderPadding=this.doRenderPadding},updateFrame:function(){if(!Ext.supports.CSS3BorderRadius&&this.frame){var j,b,c,f,d,m,n,k,e,i,a=this,p=a.el.dom,l=a.frameTable,h=a.frameBody,g=h.dom,q=a.getFrameInfo();for(c=document.createElement("div"),m=a.getFrameRenderData(),a.getFrameTpl(q.table).insertFirst(c,m),i=c.querySelectorAll("[data-ref]"),e=c.querySelector('[data-ref="frameBody"]'),d=g;d.parentNode!==p;)d=d.parentNode;for(;c.firstChild;)p.insertBefore(c.firstChild,d);for(b in e.parentNode.replaceChild(g,e),g.className=e.className,h.setSize(),j=a.getChildEls(),l&&(l.destroy(),a.frameTable=null),j)j[b].frame&&(f=a[b])&&f!==h&&(f.destroy(),a[b]=null);for(k=i.length;k--;)"frameBody"!==(b=(n=i[k]).getAttribute("data-ref"))&&(a[b]=new Ext.dom.Element(n))}},frameInfoCache:{}}}),Ext.define("Ext.state.Provider",{mixins:{observable:Ext.util.Observable},prefix:"ext-",constructor:function(b){var a=this;Ext.apply(a,b),a.state={},a.mixins.observable.constructor.call(a)},get:function(c,b){var a=this.state[c];return void 0===a?b:a},clear:function(b){var a=this;delete a.state[b],a.fireEvent("statechange",a,b,null)},set:function(c,b){var a=this;a.state[c]=b,a.fireEvent("statechange",a,c,b)},decodeValue:function(a){var d,h,g,c,f,b,e=/^(a|n|d|b|s|o|e)\:(.*)$/.exec(unescape(a));if(e&&e[1])switch(h=e[1],a=e[2],h){case"e":return null;case"n":return parseFloat(a);case"d":return new Date(Date.parse(a));case"b":return"1"===a;case"a":if(d=[],a)for(f=(c=a.split("^")).length,b=0;b<f;b++)a=c[b],d.push(this.decodeValue(a));return d;case"o":if(d={},a)for(f=(c=a.split("^")).length,b=0;b<f;b++)d[(g=(a=c[b]).split("="))[0]]=this.decodeValue(g[1]);return d;default:return a}},encodeValue:function(a){var b,f,d,c="",e=0;if(null==a)return"e:1";if("number"==typeof a)b="n:"+a;else if("boolean"==typeof a)b="b:"+(a?"1":"0");else if(Ext.isDate(a))b="d:"+a.toUTCString();else if(Ext.isArray(a)){for(f=a.length;e<f;e++)c+=this.encodeValue(a[e]),e!==f-1&&(c+="^");b="a:"+c}else if("object"==typeof a){for(d in a)"function"!=typeof a[d]&&void 0!==a[d]&&(c+=d+"="+this.encodeValue(a[d])+"^");b="o:"+c.substring(0,c.length-1)}else b="s:"+a;return escape(b)}}),Ext.define("Ext.state.Manager",{singleton:!0,constructor:function(){this.provider=new Ext.state.Provider},setProvider:function(a){this.provider=a},get:function(b,a){return this.provider.get(b,a)},set:function(b,a){this.provider.set(b,a)},clear:function(a){this.provider.clear(a)},getProvider:function(){return this.provider}}),Ext.define("Ext.state.Stateful",{mixinId:"state",stateful:!1,saveDelay:100,constructor:function(){var a=this;a.stateEvents||(a.stateEvents=[]),!1!==a.stateful&&(a.addStateEvents(a.stateEvents),a.initState())},addStateEvents:function(f){var e,b,c,d,a=this;if(a.stateful&&a.getStateId())for(d="string"==typeof f?arguments:f,c=a.stateEventsByName||(a.stateEventsByName={}),e=d.length;e--;)(b=d[e])&&!c[b]&&(c[b]=1,a.on(b,a.onStateChange,a))},onStateChange:function(){var b,c,a=this,d=a.saveDelay;a.stateful&&(d?(a.stateTask||(c=(b=Ext.state.Stateful).runner||(b.runner=new Ext.util.TaskRunner),a.stateTask=c.newTask({run:a.saveState,scope:a,interval:d,repeat:1,fireIdleEvent:!1})),a.stateTask.start()):a.saveState())},saveState:function(){var f,c,d,h,b,e,a=this,i=a.stateful&&a.getStateId(),g=a.hasListeners;if(i){for(b=a.getState()||{},d=0,h=(f=a.getPlugins()||[]).length;d<h;d++)(c=f[d])&&c.getState&&(e=c.getState(b))&&!b[c.ptype]&&(b[c.ptype]=e);g.beforestatesave&&!1===a.fireEvent("beforestatesave",a,b)||(Ext.state.Manager.set(i,b),g.statesave&&a.fireEvent("statesave",a,b))}},getState:function(){return null},applyState:function(a){a&&Ext.apply(this,a)},getStateId:function(){var a=this;return a.stateId||(a.autoGenId?null:a.id)},initState:function(){var d,b,e,i,g,c,f,a=this,j=a.stateful&&a.getStateId(),h=a.hasListeners;if(j&&(b=Ext.state.Manager.get(j))&&(d=Ext.apply({},b),!h.beforestaterestore||!1!==a.fireEvent("beforestaterestore",a,b))){for(e=0,i=(g=a.getPlugins()||[]).length;e<i;e++)(c=g[e])&&(f=c.ptype,c.applyState&&c.applyState(d[f],b),delete d[f]);a.applyState(d),h.staterestore&&a.fireEvent("staterestore",a,b)}},savePropToState:function(a,d,f){var b=this,e=b[a],c=b.initialConfig;return!(!b.hasOwnProperty(a)||c&&c[a]===e)&&(d&&(d[f||a]=e),!0)},savePropsToState:function(a,c){var b,e;if("string"==typeof a)this.savePropToState(a,c);else for(b=0,e=a.length;b<e;++b)this.savePropToState(a[b],c);return c},destroy:function(){var a=this,b=a.stateTask;b&&(b.destroy(),a.stateTask=null),a.clearListeners()}}),Ext.define("Ext.util.Focusable",{mixinId:"focusable",hasFocus:!1,focusable:!1,focusCls:"focus",initFocusable:Ext.emptyFn,initFocusableEvents:function(){this.initFocusableElement()},getFocusClsEl:function(){return this.getFocusEl()},getFocusEl:function(){return this.element||this.el},destroyFocusable:function(){var a=this;Ext.destroy(a.focusListeners),a.focusListeners=a.focusEnterEvent=a.focusTask=null,a.focusEl=a.ariaEl=null},enableFocusable:Ext.emptyFn,disableFocusable:function(){var b,c,a=this,d=a.focusCls;a.hasFocus&&(b=a.findFocusTarget())&&b.focus(),c=a.getFocusClsEl(),d&&c&&c.removeCls(a.removeClsWithUI(d,!0))},isFocusable:function(c){var b,a=this;return!!(a.focusable||a.isContainer&&c)&&(!(!(b=a.getFocusEl())||!a.canFocus())&&b.isFocusable(c))},canFocus:function(d,c){var a=this;return(a.isContainer||a.focusable)&&a.rendered&&!a.destroying&&!a.destroyed&&!a.disabled&&(d||a.isVisible(!0))||c&&!!a.findFocusTarget()},focus:function(c,d,f,g){var b,e,h,a=this;if((a.focusable||a.isContainer)&&!a.destroyed&&!a.destroying){if(d)return a.getFocusTask().delay(Ext.isNumber(d)?d:10,a.focus,a,[c,!1,f,g]),a;if(a.cancelFocus(),a.canFocus()){if(b=a.getFocusEl()){if(b.isComponent)return b.focus(c,d,f,g);(e=b.dom)&&(a.floating&&(h=a.container.dom.scrollTop),b.focus(),c&&(Ext.isArray(c)?a.selectText&&a.selectText.apply(a,c):e.select?e.select():a.selectText&&a.selectText()),Ext.callback(f,g)),a.floating&&void 0!==h&&(a.container.dom.scrollTop=h)}}else if(b=a.findFocusTarget())return b.focus(c,d,f,g);return a}},cancelFocus:function(){var a=this.getFocusTask();a&&a.cancel()},beforeBlur:Ext.emptyFn,onBlur:function(b){var d,a=this,c=a.focusableContainer,e=a.focusCls;a.focusable&&!a.destroying&&(a.beforeBlur(b),c&&c.beforeFocusableChildBlur(a,b),d=a.getFocusClsEl(),e&&d&&d.removeCls(a.removeClsWithUI(e,!0)),a.validateOnBlur&&a.validate(),a.hasFocus=!1,a.fireEvent("blur",a,b),a.postBlur(b),c&&c.afterFocusableChildBlur(a,b))},postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,onFocus:function(b){var d,a=this,c=a.focusableContainer,e=a.focusCls;a.focusable&&a.canFocus()&&(a.beforeFocus(b),c&&c.beforeFocusableChildFocus(a,b),d=a.getFocusClsEl(),e&&d&&d.addCls(a.addClsWithUI(e,!0)),a.hasFocus||(a.hasFocus=!0,a.fireEvent("focus",a,b)),a.postFocus(b),c&&c.afterFocusableChildFocus(a,b))},postFocus:Ext.emptyFn,getTabIndex:function(){var a,b,c=this;if(c.focusable){if(a=c.rendered&&c.getFocusEl()){if(a.isComponent)b=a.getTabIndex();else{if(!a.isElement)return;b=a.getAttribute("tabIndex")}c.tabIndex=b}else b=c.tabIndex;return+b}},setTabIndex:function(c,d){var a,b=this;b.focusable&&(b.tabIndex=c,b.rendered&&(a=d||b.getFocusEl())&&(a.isComponent?a.setTabIndex(c):a.isElement&&a.set({tabIndex:c})))},onFocusEnter:function(b){var a=this;a.floating&&a!==a.zIndexManager.getActive()&&a.toFront(!0),a.focusEnterEvent=b,a.containsFocus=!0,a.fireEvent("focusenter",a,b)},onFocusLeave:function(b){var a=this;a.focusEnterEvent=null,a.containsFocus=!1,a.fireEvent("focusleave",a,b)},privates:{revertFocus:function(){var a,b=this,d=b.previousFocus,c=b.focusEnterEvent;if(b.previousFocus=null,!b.preventRefocus&&b.el.contains(Ext.Element.getActiveElement())){if(a=d||c&&c.fromComponent){if(a.canFocus&&a.canFocus(!1,!0))return void a.focus();if(a.nodeType&&(a=Ext.fly(a)),a.isFocusable&&a.isFocusable())return void a.focus()}c&&(a=Ext.fly(c.relatedTarget),(Ext.isIE8||a.isFocusable&&a.isFocusable())&&a.focus())}},findFocusTarget:function(){var a,b;for(a=this.up(":not([disabled])");a;a=a.up(":not([disabled])")){if((b=Ext.ComponentQuery.query(":focusable:not([hasFocus])",a)).length)return b[0];if(a.isFocusable&&a.isFocusable())return a}},initFocusableElement:function(){var a=this,c=a.tabIndex,b=a.getFocusEl();b&&!b.isComponent&&(a.focusEl=b,null!=c&&a.canFocus(!0)&&a.setTabIndex(c,b),b.dom.setAttribute("data-componentid",a.id),a.config.keyHandlers&&a.initKeyHandlers(b))},getFocusTask:function(){return this.focusTask||(this.focusTask=Ext.focusTask),this.focusTask},handleFocusEvent:function(b){var a;this.isFocusing(b)&&((a=new Ext.event.Event(b.event)).type="focus",a.relatedTarget=b.fromElement,a.target=b.toElement,this.onFocus(a))},handleBlurEvent:function(b){var a;this.isBlurring(b)&&((a=new Ext.event.Event(b.event)).type="blur",a.target=b.fromElement,a.relatedTarget=b.toElement,this.onBlur(a))},isFocusing:function(d){var a,c=d.fromElement,b=d.toElement;return!(!this.focusable||!(a=this.getFocusEl()))&&(a.isComponent?a.isFocusing(c,b):b===a.dom&&c!==b)},isBlurring:function(d){var a,b=d.fromElement,c=d.toElement;return!(!this.focusable||!(a=this.getFocusEl()))&&(a.isComponent?a.isBlurring(b,c):b===a.dom&&b!==c)},blur:function(){var b,a=this;if(a.focusable&&a.canFocus())return(b=a.getFocusEl())&&(a.blurring=!0,b.blur(),delete a.blurring),a},disableTabbing:function(){var a,b=this.el;b&&b.saveTabbableState(),(a=this.getFocusEl())&&(a.isComponent?a.disableTabbing():a.isElement&&b&&!b.contains(a)&&a.saveTabbableState())},enableTabbing:function(){var a,b=this.el;(a=this.getFocusEl())&&(a.isComponent?a.enableTabbing():a.isElement&&b&&!b.contains(a)&&a.restoreTabbableState()),b&&b.restoreTabbableState()}}},function(){Ext.focusTask||(Ext.focusTask=new Ext.util.DelayedTask)}),Ext.define("Ext.mixin.Accessible",{extend:Ext.Mixin,mixinConfig:{id:"accessible"},config:{ariaAttributes:{$value:null,lazy:!0}},privates:{getAriaLabelEl:function(a){var c,b,f,d,e=[];if(a){if(Ext.isFunction(a))return a.call(this);if(Ext.isArray(a)||(a=[a]),c=this.lookupReferenceHolder())for(b=0,f=a.length;b<f;b++)(d=c.lookupReference(a[b]))&&e.push(d.ariaEl.id)}return e.length?e.join(" "):null}}}),Ext.define("Ext.util.KeyboardInteractive",{extend:Ext.Mixin,mixinConfig:{id:"keyboardinteractive"},config:{keyHandlers:{$value:null,lazy:!0}},initKeyHandlers:function(c){var d,a=this,b=a.getKeyHandlers();for(d in b){c.on("keydown",a.handleKeydown,a),a.keydownListenerAttached=!0;break}},applyKeyHandlers:function(f){var e,c,b,a=this,d={};if(f){for(c in f)b=f[c],d[c]="function"==typeof b?b:a[b];a.focusable&&a.rendered&&!a.destroyed&&!a.destroying&&(e=a.getFocusEl())&&!a.keydownListenerAttached&&(e.on("keydown",a.handleKeydown,a),a.keydownListenerAttached=!0)}return d},handleKeydown:function(d){var b,a;(b=d.getKeyName())&&(a=this.getKeyHandlers()[b])&&a.call(this,d)}}),Ext.define("Ext.Component",{alternateClassName:"Ext.AbstractComponent",xtype:["component","box"],mixins:[Ext.mixin.Inheritable,Ext.util.Floating,Ext.util.Positionable,Ext.util.Observable,Ext.mixin.ComponentDelegation,Ext.mixin.Bindable,Ext.util.Animate,Ext.util.ElementContainer,Ext.util.Renderable,Ext.state.Stateful,Ext.util.Focusable,Ext.mixin.Accessible,Ext.util.KeyboardInteractive],statics:{AUTO_ID:1e3,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g,ariaHighContrastModeCls:Ext.baseCSSPrefix+"aria-highcontrast",cancelLayout:function(c,b){var a=this.runningLayoutContext||this.pendingLayouts;a&&a.cancelComponent(c,!1,b)},fromElement:function(c,b,a){return Ext.ComponentManager.fromElement(c,b,a)},flushLayouts:function(){var b=this,a=b.pendingLayouts;a&&a.invalidQueue.length&&(b.pendingLayouts=null,b.runningLayoutContext=a,Ext.override(a,{runComplete:function(){b.runningLayoutContext=null;var a=this.callParent();return Ext.GlobalEvents.hasListeners.afterlayout&&Ext.GlobalEvents.fireEvent("afterlayout"),a}}),a.run())},resumeLayouts:function(a){this.layoutSuspendCount&&!--this.layoutSuspendCount&&(a&&this.flushLayouts(),Ext.GlobalEvents.hasListeners.resumelayouts&&Ext.GlobalEvents.fireEvent("resumelayouts"))},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(b,e){var a=this,d=a.runningLayoutContext;d?d.queueInvalidate(b):((a.pendingLayouts||(a.pendingLayouts=new Ext.layout.Context)).queueInvalidate(b),e||a.layoutSuspendCount||b.isLayoutSuspended()||a.flushLayouts())}},$configPrefixed:!1,$configStrict:!1,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,scrollable:null},defaultBindProperty:"html",alignTarget:null,autoRender:!1,autoShow:!1,baseCls:Ext.baseCSSPrefix+"component",childEls:{frameTable:{frame:!0},frameTL:{frame:"tl"},frameTC:{frame:"tc"},frameTR:{frame:"tr"},frameML:{frame:"ml"},frameBody:{frame:"mc"},frameMR:{frame:"mr"},frameBL:{frame:"bl"},frameBC:{frame:"bc"},frameBR:{frame:"br"}},componentLayout:"autocomponent",defaultAlign:"c-c",disabled:!1,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:function(){var a=["input","select","textarea","optgroup","option","table"];return!Ext.isIE9m||Ext.isIE9&&!Ext.isIEQuirks||a.push("p"),new RegExp("^(?:"+a.join("|")+")$","i")}(),disabledCls:Ext.baseCSSPrefix+"item-disabled",draggable:!1,floating:!1,hidden:!1,hideMode:"display",maskElement:null,renderTpl:['<tpl if="renderScroller">','<div class="{scrollerCls}" style="{%this.renderPadding(out, values)%}">',"</tpl>","{%this.renderContent(out,values)%}",'<tpl if="renderScroller"></div></tpl>'],resizeHandles:"all",shrinkWrap:2,toFrontOnShow:!0,synthetic:!1,tplWriteMode:"overwrite",ui:"default",uiCls:[],userCls:null,weight:null,allowDomMove:!0,autoGenId:!1,borderBoxCls:Ext.baseCSSPrefix+"border-box",componentLayoutCounter:0,contentPaddingProperty:"padding",deferLayouts:!1,frameSize:null,horizontalPosProp:"left",isComponent:!0,_isLayoutRoot:!1,layoutSuspendCount:0,liquidLayout:!1,maskOnDisable:!0,offsetsCls:Ext.baseCSSPrefix+"hidden-offsets",rendered:!1,rootCls:Ext.baseCSSPrefix+"body",scrollerCls:Ext.baseCSSPrefix+"scroll-scroller",scrollerSelector:"."+Ext.baseCSSPrefix+"scroll-scroller",_scrollFlags:{auto:{auto:{overflowX:"auto",overflowY:"auto",x:!0,y:!0,both:!0},false:{overflowX:"auto",overflowY:"hidden",x:!0,y:!1,both:!1},scroll:{overflowX:"auto",overflowY:"scroll",x:!0,y:!0,both:!0}},false:{auto:{overflowX:"hidden",overflowY:"auto",x:!1,y:!0,both:!1},false:{overflowX:"hidden",overflowY:"hidden",x:!1,y:!1,both:!1},scroll:{overflowX:"hidden",overflowY:"scroll",x:!1,y:!0,both:!1}},scroll:{auto:{overflowX:"scroll",overflowY:"auto",x:!0,y:!0,both:!0},false:{overflowX:"scroll",overflowY:"hidden",x:!0,y:!1,both:!1},scroll:{overflowX:"scroll",overflowY:"scroll",x:!0,y:!0,both:!0}},none:{overflowX:"",overflowY:"",x:!1,y:!1,both:!1}},_scrollableCfg:{x:{x:!0,y:!1},y:{x:!1,y:!0},horizontal:{x:!0,y:!1},vertical:{x:!1,y:!0},both:{x:!0,y:!0},true:{x:!0,y:!0}},validIdRe:Ext.validIdRe,constructor:function(b){var e,j,i,h,g,c,d,f,a=this;if((b=b||{}).initialConfig?(b.isAction&&(a.baseAction=b),b=b.initialConfig):(b.tagName||b.dom||Ext.isString(b))&&(b={applyTo:b,id:b.id||b}),a.initialConfig=b,a.getId(),a.protoEl=new Ext.util.ProtoElement,a.initConfig(b),null==a.scrollable&&((g=a.autoScroll)?f=!!g:(c=a.overflowX,d=a.overflowY,(c||d)&&(f={x:!(!c||"hidden"===c)&&c,y:!(!d||"hidden"===d)&&d})),f&&a.setScrollable(f)),(i=a.xhooks)&&(delete a.xhooks,Ext.override(a,i)),a.mixins.elementCt.constructor.call(a),a.setupProtoEl(),a.cls&&(a.initialCls=a.cls,a.protoEl.addCls(a.cls)),a.style&&(a.initialStyle=a.style,a.protoEl.setStyle(a.style)),a.renderData=a.renderData||{},a.initComponent(),a.preventRegister||Ext.ComponentManager.register(a),a.mixins.state.constructor.call(a),a.addStateEvents("resize"),(h=a.getController())&&h.init(a),a.plugins)for(e=0,j=a.plugins.length;e<j;e++)a.plugins[e]=a.initPlugin(a.plugins[e]);a.loader=a.getLoader(),a.disabled&&(a.disabled=!1,a.disable(!0)),a.renderTo&&a.render(a.renderTo),a.autoShow&&!a.$initParent&&a.show(),a.baseAction&&a.baseAction.addComponent(a)},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(c){var a=this,b=a.rendered?a.el:a.protoEl;return b.addCls.apply(b,arguments),a},addClsWithUI:function(a,i){var g,c,b=this,d=[],e=0,h=b.uiCls=Ext.Array.clone(b.uiCls),f=b.activeUI;for("string"==typeof a&&(a=a.indexOf(" ")<0?[a]:Ext.String.splitWords(a)),g=a.length;e<g;e++)(c=a[e])&&!b.hasUICls(c)&&(h.push(c),f&&(d=d.concat(b.addUIClsToElement(c))));return!0!==i&&f&&b.addCls(d),d},afterComponentLayout:function(d,c,f,e){var b,a=this;1==++a.componentLayoutCounter&&((b=a.scrollable)&&(a.touchScroll&&b.isTouchScroller&&b.setInnerElement(a.getScrollerEl()),b.setElement(a.getOverflowEl()),Ext.isIE&&Ext.on("show",a.onGlobalShow,a)),a.afterFirstLayout(d,c)),d===f&&c===e||a.onResize(d,c,f,e),a.floating&&a.onAfterFloatLayout()},addPlugin:function(a){var b=this;return a=b.constructPlugin(a),b.plugins?b.plugins.push(a):b.plugins=[a],b.pluginsInitialized&&b.initPlugin(a),a},addPropertyToState:function(b,a,c){var d=this,e=arguments.length;return 3!==e&&!d.hasOwnProperty(a)||(e<3&&(c=d[a]),c!==d.initialConfig[a]&&((b=b||{})[a]=c)),b},addUIClsToElement:function(f){var e,c,g,b,a=this,d=a.baseCls+"-"+a.ui+"-"+f,h=[Ext.baseCSSPrefix+f,a.baseCls+"-"+f,d];if(a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius)for(c in d+="-",e=a.getChildEls())(b=e[c].frame)&&!0!==b&&(g=a[c])&&g.addCls(d+b);return h},removeUIClsFromElement:function(f){var e,c,g,b,a=this,d=a.baseCls+"-"+a.ui+"-"+f,h=[Ext.baseCSSPrefix+f,a.baseCls+"-"+f,d];if(a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius)for(c in d+="-",e=a.getChildEls())(b=e[c].frame)&&!0!==b&&(g=a[c])&&g.removeCls(d+b);return h},adjustPosition:function(c,d){var a;return this.isContainedFloater()&&(c+=(a=this.floatParent.getTargetEl().getViewRegion()).left,d+=a.top),{x:c,y:d}},afterHide:function(d,c){var a=this,b=a.focusableContainer;a.hiddenByLayout=null,this.ownerLayout&&this.updateLayout({isRoot:!1}),Ext.callback(d,c||a),a.fireHierarchyEvent("hide"),a.fireEvent("hide",a),b&&b.onFocusableChildHide(a)},afterSetPosition:function(b,c){var a=this;a.onPosition(b,c),a.hasListeners.move&&a.fireEvent("move",a,b,c)},afterShow:function(b,h,g){var f,e,d,a=this,c=a.el;b=a.getAnimateTarget(b),a.ghost||(b=null),b?(e={x:c.getX(),y:c.getY(),width:c.dom.offsetWidth,height:c.dom.offsetHeight},f={x:b.getX(),y:b.getY(),width:b.dom.offsetWidth,height:b.dom.offsetHeight},c.addCls(a.offsetsCls),(d=a.ghost()).el.stopAnimation(),d.setX(-1e4),a.ghostBox=e,d.el.animate({from:f,to:e,listeners:{afteranimate:function(){delete d.componentLayout.lastComponentSize,a.unghost(),delete a.ghostBox,c.removeCls(a.offsetsCls),a.onShowComplete(h,g)}}})):a.onShowComplete(h,g),a.fireHierarchyEvent("show")},animate:function(b){var e,d,j,k,c,r,q,i,p,h,o,f,n,l,m,g,a=this;return c=(b=b||{}).to||{},Ext.fx.Manager.hasFxBlock(a.id)?a:((e=Ext.isDefined(c.width))&&(k=Ext.Number.constrain(c.width,a.minWidth,a.maxWidth)),(d=Ext.isDefined(c.height))&&(j=Ext.Number.constrain(c.height,a.minHeight,a.maxHeight)),b.dynamic||!e&&!d||(p=i=(b.from?b.from.width:void 0)||a.getWidth(),o=h=(b.from?b.from.height:void 0)||a.getHeight(),f=!1,d&&h<j&&(o=j,f=!0),e&&i<k&&(p=k,f=!0),(d||e)&&"hidden"!==(g=a.el.getStyle("overflow"))&&a.el.setStyle("overflow","hidden"),f&&(r=!Ext.isNumber(a.width),q=!Ext.isNumber(a.height),a.setSize(p,o),a.el.setSize(i,h),r&&delete a.width,q&&delete a.height),e&&(c.width=k),d&&(c.height=j)),n=a.constrain,l=a.constrainHeader,(n||l)&&(a.constrain=a.constrainHeader=!1,m=b.callback,b.callback=function(){a.constrain=n,a.constrainHeader=l,m&&m.call(b.scope||a,arguments),"hidden"!==g&&a.el.setStyle("overflow",g)}),a.mixins.animate.animate.apply(a,arguments))},applyScrollable:function(a,c){var d,b=this,f=b.rendered;return a?(!0!==a&&"string"!=typeof a||(a=b._scrollableCfg[a]),c?(c.setConfig(a),a=c):(a=Ext.Object.chain(a),f&&(a.element=b.getOverflowEl(),(d=b.getScrollerEl())&&(a.innerElement=d)),a.autoRefresh=!1,1===Ext.supports.touchScroll&&(a.translatable={translationMethod:"scrollparent"},a.indicators=!1),(a=Ext.scroll.Scroller.create(a)).component=b)):c&&(c.setConfig({x:!1,y:!1}),c.destroy(),a=null),!b.rendered||b.destroying||b.destroyed||(a?b.getOverflowStyle():b.scrollFlags=b._scrollFlags.none,b.updateLayout()),a},beforeComponentLayout:function(){return!0},beforeDestroy:Ext.emptyFn,beforeLayout:function(){this.floating&&this.onBeforeFloatLayout()},beforeSetPosition:function(a,b,f){var e,g,h,i,d=this,c=null;return a&&(Ext.isNumber(e=a[0])?(f=b,b=a[1],a=e):void 0!==(e=a.x)&&(f=b,b=a.y,a=e)),(d.constrain||d.constrainHeader)&&(c=d.calculateConstrainedPosition(null,[a,b],!0))&&(a=c[0],b=c[1]),h=void 0!==b,((g=void 0!==a)||h)&&(d.x=a,d.y=b,c={x:(i=d.adjustPosition(a,b)).x,y:i.y,anim:f,hasX:g,hasY:h}),c},beforeShow:Ext.emptyFn,bubble:function(d,b,c){for(var a=this;a&&!1!==d.apply(b||a,c||[a]);)a=a.getBubbleTarget();return this},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a),a.mixins.componentDelegation.clearDelegatedListeners.call(a)},cloneConfig:function(a){var d=(a=a||{}).id||Ext.id(),c=Ext.applyIf(a,this.initialConfig);return c.id=d,new(Ext.getClass(this))(c)},destroy:function(){var b,c,e,a=this,d=a.renderSelectors;a.getConfig("viewModel",!0),a.getConfig("session",!0);if(!a.hasListeners.beforedestroy||!1!==a.fireEvent("beforedestroy",a)){if(a.isDestroying=a.destroying=!0,c=a.floatParent||a.ownerCt,a.floating&&(delete a.floatParent,a.zIndexManager&&(a.zIndexManager.unregister(a),a.zIndexManager=null)),a.removeBindings(),a.beforeDestroy(),a.destroyBindable(),c&&c.remove&&c.remove(a,!1),a.stopAnimation(),a.onDestroy(),Ext.destroy(a.plugins),a.rendered&&Ext.Component.cancelLayout(a,!0),a.componentLayout=null,a.hasListeners.destroy&&a.fireEvent("destroy",a),a.preventRegister||Ext.ComponentManager.unregister(a),a.mixins.state.destroy.call(a),a.floating&&a.onFloatDestroy(),a.clearListeners(),a.rendered){if(a.preserveElOnDestroy||a.el.destroy(),a.el.component=null,a.mixins.elementCt.destroy.call(a),d)for(b in d)d.hasOwnProperty(b)&&(e=a[b])&&(delete a[b],e.destroy());a.data=a.el=a.frameBody=a.rendered=a.afterRenderEvents=null,a.tpl=a.renderTpl=a.renderData=null,a.focusableContainer=a.container=a.scrollable=null}a.isDestroying=a.destroying=!1,a.callParent()}},disable:function(e,d){var a=this,b=a.focusableContainer,c=a.getInherited();return d||(c.disabled=!0,a.savedDisabled=!0),a.maskOnDisable&&(c.disableMask=!0),a.disabled||(b&&b.beforeFocusableChildDisable(a),a.addCls(a.disabledCls),a.rendered?a.onDisable():a.disableOnRender=!0,(a.disabled=!0)!==e&&a.fireEvent("disable",a),b&&b.onFocusableChildDisable(a)),a},doFireEvent:function(c,d,e){var a=this,b=a.mixins.observable.doFireEvent.call(a,c,d,e);return!1!==b&&(b=a.mixins.componentDelegation.doFireDelegatedEvent.call(a,c,d)),b},enable:function(e,c){var a=this,b=a.focusableContainer,d=a.getInherited();return c||(delete a.getInherited().disabled,a.savedDisabled=!1),a.maskOnDisable&&delete d.disableMask,a.disabled&&(c&&d.hasOwnProperty("disabled")||(b&&b.beforeFocusableChildEnable(a),a.disableOnRender=!1,a.removeCls(a.disabledCls),a.rendered&&a.onEnable(),!(a.disabled=!1)!==e&&a.fireEvent("enable",a),b&&b.onFocusableChildEnable(a))),a},findParentBy:function(b){var a;for(a=this.getRefOwner();a&&!b(a,this);a=a.getRefOwner());return a||null},findParentByType:function(a){return Ext.isFunction(a)?this.findParentBy(function(b){return b.constructor===a}):this.up(a)},findPlugin:function(c){var a,b=this.plugins,d=b&&b.length;for(a=0;a<d;a++)if(b[a].ptype===c)return b[a]},getAnimateTarget:function(a){return(a=(a=a||this.animateTarget)&&(a.isComponent?a.getEl():Ext.get(a)))||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var a=this;return a.componentLayout&&a.componentLayout.isLayout||a.setComponentLayout(Ext.layout.Layout.create(a.componentLayout,"autocomponent")),a.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(b){var a=this,c=a.componentLayout;a.hidden&&(b.hidden=!0),a.collapseImmune&&(b.collapseImmune=!0),void 0!==a.modelValidation&&(b.modelValidation=a.modelValidation),a.savedDisabled&&(b.disabled=!0),a.mixins.bindable.initInheritedState.call(a,b),c&&c.initInheritedState&&c.initInheritedState(b)},getId:function(){var b,a=this;return a.id||(a.id=a.initialConfig.id)||(b=(b=a.getXType())?b.replace(Ext.Component.INVALID_ID_CHARS_Re,"-"):Ext.name.toLowerCase()+"-comp",a.id=b+"-"+a.getAutoId()),a.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var a=this,b=a.loader;return b?(b.isLoader?b.setTarget(a):a.loader=new Ext.ComponentLoader(Ext.apply({target:a},b)),a.loader):null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(c){var a,b=this.plugins,d=b&&b.length;for(a=0;a<d;a++)if(b[a].pluginId===c)return b[a];return null},getPosition:function(e){var b,c,a=this,d=a.isContainedFloater();return!0!==e||d?(b=a.getXY(),!0===e&&d&&(c=a.floatParent.getTargetEl().getViewRegion(),b[0]-=c.left,b[1]-=c.top),b):[a.getLocalX(),a.getLocalY()]},getScrollX:function(){var a=this.getScrollable();return a?a.getPosition().x:0},getScrollY:function(){var a=this.getScrollable();return a?a.getPosition().y:0},getSize:function(a){return this.el.getSize(a)},getSizeModel:function(g){var n,m,j,i,d,k,f,b,l,e,c=this,a=Ext.layout.SizeModel,h=c.componentLayout.ownerContext,q=c.width,p=c.height,o=c.floating||c.floated;return h&&(e=h.widthModel,d=h.heightModel),e&&d||(j="number"==(n=typeof q),i="number"==(m=typeof p),(l=o||!(k=c.ownerLayout))?(f=Ext.layout.Layout.prototype.autoSizePolicy,b=o?3:c.shrinkWrap,j&&(e=a.configured),i&&(d=a.configured)):(f=k.getItemSizePolicy(c,g),b=k.isItemShrinkWrap(c)),h&&(h.ownerSizePolicy=f),b=!0===b?3:b||0,l&&b&&(q&&"string"==n&&(b&=2),p&&"string"==m&&(b&=1)),3!==b&&(g=g||c.ownerCt&&c.ownerCt.getSizeModel())&&(b|=(g.width.shrinkWrap?1:0)|(g.height.shrinkWrap?2:0)),e=e||(f.setsWidth?f.readsWidth?j?a.calculatedFromConfigured:1&b?a.calculatedFromShrinkWrap:a.calculatedFromNatural:a.calculated:j?a.configured:1&b?a.shrinkWrap:a.natural),d=d||(f.setsHeight?f.readsHeight?i?a.calculatedFromConfigured:2&b?a.calculatedFromShrinkWrap:a.calculatedFromNatural:a.calculated:i?a.configured:2&b?a.shrinkWrap:a.natural)),e.pairsByHeightOrdinal[d.ordinal]},getState:function(){var b=this,a=null,c=b.getSizeModel();return c.width.configured&&(a=b.addPropertyToState(a,"width")),c.height.configured&&(a=b.addPropertyToState(a,"height")),a},getUserCls:function(){return this.userCls},setUserCls:function(b){var a=this,c=a.userCls;return b!==c&&(a.userCls=b,a.rendered&&a.el.replaceCls(c,b)),c},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var b,a,d,c=this.self;if(!c.xtypes){for(b=[],a=this;a;)void 0!==(d=a.xtypes)&&b.unshift.apply(b,d),a=a.superclass;c.xtypeChain=b,c.xtypes=b.join("/")}return c.xtypes},hasCls:function(b){var a=this.rendered?this.el:this.protoEl;return a.hasCls.apply(a,arguments)},hasUICls:function(b){var a=this.uiCls||[];return Ext.Array.contains(a,b)},hide:function(b,d,c){var a=this;return a.pendingShow&&(a.pendingShow=!1),a.rendered&&!a.isVisible()||a.hasListeners.beforehide&&!1===a.fireEvent("beforehide",a)&&!a.hierarchicallyHidden||(a.getInherited().hidden=a.hidden=!0,a.fireHierarchyEvent("beforehide"),a.rendered&&a.onHide.apply(a,arguments)),a},initComponent:function(){var a=this,c=a.width,b=a.height;a.plugins&&!a.plugins.processed&&(a.plugins=a.constructPlugins()),a.pluginsInitialized=!0,null==c&&null==b||a.setSize(c,b),a.listeners&&(a.on(a.listeners),a.listeners=null),a.focusable&&a.initFocusable()},initEvents:function(){var e,c,f,b,g,a=this,d=a.afterRenderEvents;if(d)for(f in d)if((c=a[f])&&c.on)for(b=0,g=(e=d[f]).length;b<g;++b)a.mon(c,e[b]);a.focusable&&a.initFocusableEvents()},is:function(a){return Ext.ComponentQuery.is(this,a)},isDescendantOf:function(b){var a;for(a=this.getRefOwner();a&&a!==b;a=a.getRefOwner());return a||null},isAncestor:function(a){for(;a;){if(a.getRefOwner()===this)return!0;a=a.getRefOwner()}},isDisabled:function(){return this.disabled},isDraggable:function(){return!!this.draggable},isDroppable:function(){return!!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},isHierarchicallyHidden:function(){for(var c,d,a=this,b=!1;c=a.ownerCt||a.floatParent;a=c){if((d=c.getInherited()).hidden){b=!0;break}if(!a.getInherited().collapseImmune){b=!!d.collapsed;break}if(c.collapsed&&!a.collapseImmune){b=!0;break}}return b},isLayoutChild:function(a){return!this.floating&&!!this.up(a)},isLayoutRoot:function(){var a=this,b=a.ownerLayout;return!(b&&!a._isLayoutRoot&&!a.floating)||b.isItemLayoutRoot(a)},isLayoutSuspended:function(){for(var b,a=this;a;){if(a.layoutSuspendCount||a.suspendLayout)return!0;if(!(b=a.ownerLayout))break;a=b.owner}return!1},isVisible:function(c){var b,a=this;return a.hidden||!a.rendered||a.destroyed?b=!0:c&&(b=a.isHierarchicallyHidden()),!b},isXType:function(a,b){return b?-1!==Ext.Array.indexOf(this.xtypes,a):!!this.xtypesMap[a]},isMasked:function(b){var a=this;return!!(a.masked||a.loadMask&&a.loadMask.isVisible()||b&&a.getInherited().masked)},setMasked:function(b){var a=this,c=a.focusableContainer;return b?(a.masked=!0,a.getInherited().masked=b):(a.masked=!1,delete a.getInherited().masked),c&&c.onFocusableChildMasked(a,b),a},mask:function(e,c,a){var b=this.lastBox,d=this.getMaskTarget()||this.el;b&&(a=b.height),d.mask(e,c,a),this.setMasked(!0)},nextNode:function(b,i){var g,d,h,e,a,c=this,f=c.ownerCt;if(i&&c.is(b))return c;if(f){for(d=f.items.items,e=Ext.Array.indexOf(d,c)+1,h=d.length;e<h;e++){if((a=d[e]).is(b))return a;if(a.down&&(g=a.down(b)))return g}return f.nextNode(b)}return null},nextSibling:function(c){var b,d,a,e,f=this.ownerCt;if(f&&(a=(b=f.items).indexOf(this)+1))if(c){for(d=b.getCount();a<d;a++)if((e=b.getAt(a)).is(c))return e}else if(a<b.getCount())return b.getAt(a);return null},onAdded:function(b,d,c){var a=this;a.ownerCt=b,a.onInheritedAdd(a,c),a.hasListeners&&a.hasListeners.added&&a.fireEvent("added",a,b,d),Ext.GlobalEvents.hasListeners.added&&a.fireHierarchyEvent("added")},onRemoved:function(b){var a=this;Ext.GlobalEvents.hasListeners.removed&&a.fireHierarchyEvent("removed"),a.hasListeners.removed&&a.fireEvent("removed",a,a.ownerCt),b||a.removeBindings(),a.onInheritedRemove(b),a.ownerCt=a.ownerLayout=null},onBoxReady:function(d,c){var b,a=this;(a.ariaLabelledBy||a.ariaDescribedBy)&&(a.ariaLabelledBy&&(b=a.getAriaLabelEl(a.ariaLabelledBy))&&a.ariaEl.dom.setAttribute("aria-labelledby",b),a.ariaDescribedBy&&(b=a.getAriaLabelEl(a.ariaDescribedBy))&&a.ariaEl.dom.setAttribute("aria-describedby",b)),a.resizable&&a.initResizable(a.resizable),a.draggable&&a.initDraggable(),a.hasListeners.boxready&&a.fireEvent("boxready",a,d,c)},onDestroy:function(){var a=this,b=a.focusableContainer;a.rendered&&Ext.destroy(a.dd,a.resizer,a.proxy,a.proxyWrap,a.resizerComponent,a.scrollable,a.contentEl),b&&b.onFocusableChildDestroy(a),a.focusable&&a.destroyFocusable(),Ext.destroy(a.componentLayout,a.loadMask,a.floatingDescendants)},onDisable:function(){var c,b,a=this;a.focusable&&a.disableFocusable(),a.ariaStaticRoles[a.ariaRole]||a.ariaEl.dom.setAttribute("aria-disabled",!0),a.maskOnDisable&&!a.getInheritedConfig("disableMask",!0)&&(b=(c=a.el.dom).nodeName,a.disabledRe.test(b)&&(c.disabled=!0),a.nonMaskableRe.test(b)||a.mask())},onEnable:function(){var c,b,a=this;a.focusable&&a.enableFocusable(),a.ariaStaticRoles[a.ariaRole]||a.ariaEl.dom.setAttribute("aria-disabled",!1),a.maskOnDisable&&a.getInherited().hasOwnProperty("masked")&&(b=(c=a.el.dom).nodeName,a.disabledRe.test(b)&&(c.disabled=!1),a.nonMaskableRe.test(b)||a.unmask())},onGlobalShow:function(a){this.up(a)&&this.getScrollable().restoreState()},onHide:function(b,g,e){var c,d,f,a=this;a.ariaStaticRoles[a.ariaRole]||a.ariaEl.dom.setAttribute("aria-hidden",!0),a.revertFocus(),b=a.getAnimateTarget(b),a.ghost||(b=null),b&&(f={x:b.getX(),y:b.getY(),width:b.dom.offsetWidth,height:b.dom.offsetHeight},(c=a.ghost()).el.stopAnimation(),d=a.getSize(),c.el.animate({to:f,listeners:{afteranimate:function(){delete c.componentLayout.lastComponentSize,c.el.hide(),c.setHiddenState(!0),c.el.setSize(d),a.afterHide(g,e)}}})),a.el.hide(),b||a.afterHide(g,e)},onPosition:Ext.emptyFn,onResize:function(e,d,c,b){var a=this;a.floating&&a.constrain&&a.doConstrain(),a.refreshScroll(),a.hasListeners.resize&&a.fireEvent("resize",a,e,d,c,b)},onShow:function(){var a=this;a.ariaStaticRoles[a.ariaRole]||a.ariaEl.dom.setAttribute("aria-hidden",!1),a.el.show(),a.updateLayout({isRoot:!1}),a.floating&&(a.maximized?a.fitContainer():a.constrain&&a.doConstrain())},onShowComplete:function(d,c){var a=this,b=a.focusableContainer;a.floating&&a.onFloatShow(),Ext.callback(d,c||a),a.fireEvent("show",a),b&&b.onFocusableChildShow(a),delete a.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(c,h){var a,g,e,b,d=this,f=d.ownerCt;if(h&&d.is(c))return d;if(f){for(g=f.items.items,e=Ext.Array.indexOf(g,d)-1;-1<e;e--){if((b=g[e]).query&&(a=(a=b.query(c))[a.length-1]))return a;if(b.is(c))return b}return f.previousNode(c,!0)}return null},previousSibling:function(c){var b,a,d,e=this.ownerCt;if(e&&-1!==(a=(b=e.items).indexOf(this)))if(c){for(--a;0<=a;a--)if((d=b.getAt(a)).is(c))return d}else if(a)return b.getAt(--a);return null},registerFloatingItem:function(b){var a=this;a.floatingDescendants||(a.floatingDescendants=new Ext.ZIndexManager(a)),a.floatingDescendants.register(b)},removeCls:function(c){var a=this,b=a.rendered?a.el:a.protoEl;return b.removeCls.apply(b,arguments),a},removeClsWithUI:function(a,k){var h,c,b=this,d=[],e=0,g=Ext.Array,i=g.remove,j=b.uiCls=g.clone(b.uiCls),f=b.activeUI;for("string"==typeof a&&(a=a.indexOf(" ")<0?[a]:Ext.String.splitWords(a)),h=a.length,e=0;e<h;e++)(c=a[e])&&b.hasUICls(c)&&(i(j,c),f&&(d=d.concat(b.removeUIClsFromElement(c))));return!0!==k&&f&&b.removeCls(d),d},resumeLayouts:function(b){var a=this;a.rendered&&a.layoutSuspendCount&&!--a.layoutSuspendCount&&(a.suspendLayout=!1,b&&!a.isLayoutSuspended()&&a.updateLayout(b))},scrollBy:function(c,d,b){var a=this.getScrollable();a&&a.scrollBy(c,d,b)},scrollTo:function(c,d,b){var a=this.getScrollable();a&&a.scrollTo(c,d,b)},setAutoScroll:function(a){return this.setScrollable(!!a),this},setBorder:function(a,c){var b=this,d=!!c;(b.rendered||d)&&(d||(c=b.el),a=a?!0===a?"1px":this.unitizeBox(a):0,c.setStyle("border-width",a),d||b.updateLayout()),b.border=a},setDock:function(c){var a=this,b=a.ownerCt;return c!==a.dock&&(b&&b.moveDocked?b.moveDocked(a,c):a.dock=c),a},setDisabled:function(a){return this[a?"disable":"enable"]()},setFlex:function(a){this.flex=a},setHeight:function(a){return this.setSize(void 0,a)},setLoading:function(c,d){var a=this,b={target:a};return a.rendered&&(!1!==c?(Ext.isString(c)?b.msg=c:Ext.apply(b,c),a.loadMask&&a.loadMask.isLoadMask?Ext.apply(a.loadMask,b):(d&&null==b.useTargetEl&&(b.useTargetEl=!0),a.loadMask=new Ext.LoadMask(b)),a.loadMask.isVisible()?a.loadMask.syncMaskState():a.loadMask.show()):a.loadMask&&a.loadMask.isLoadMask&&a.loadMask.hide()),a.loadMask},setMargin:function(a,c){var b=this;b.rendered?(a=a||0===a?(!0===a&&(a=5),this.unitizeBox(a)):"",b.margin=a,b.margin$=null,b.getEl().setStyle("margin",a),c||b.updateLayout(b._notAsLayoutRoot)):b.margin=a},setOverflowXY:function(a,b){return this.setScrollable({x:!(!a||"hidden"===a)&&a,y:!(!b||"hidden"===b)&&b}),this},setPagePosition:function(a,c,f){var d,e,b=this;return Ext.isArray(a)&&(c=a[1],a=a[0]),b.pageX=a,b.pageY=c,b.floating?(b.isContainedFloater()?(e=b.floatParent.getTargetEl().getViewRegion(),Ext.isNumber(a)&&Ext.isNumber(e.left)&&(a-=e.left),Ext.isNumber(c)&&Ext.isNumber(e.top)&&(c-=e.top)):(a=(d=b.el.translateXY(a,c)).x,c=d.y),b.setPosition(a,c,f)):(d=b.el.translateXY(a,c),b.setPosition(d.x,d.y,f)),b},setPosition:function(b,c,e){var a=this,d=a.beforeSetPosition.apply(a,arguments);return d&&a.rendered&&(b=d.x,c=d.y,e?b===a.getLocalX()&&c===a.getLocalY()||(a.stopAnimation(),a.animate(Ext.apply({duration:1e3,listeners:{afteranimate:Ext.Function.bind(a.afterSetPosition,a,[b,c])},to:{left:b,top:c}},e))):(a.setLocalXY(b,c),a.afterSetPosition(b,c))),a},setScrollX:function(c,b){var a=this.getScrollable();a&&a.scrollTo(c,null,b)},setScrollY:function(c,b){var a=this.getScrollable();a&&a.scrollTo(null,c,b)},setSize:function(b,c){var e,d,a=this,g=a.width,f=a.height;return b&&"object"==typeof b&&(c=b.height,b=b.width),"number"==typeof b?a.width=Ext.Number.constrain(b,a.minWidth,a.maxWidth):null===b?delete a.width:"string"==typeof b&&(e=!0,a.width=b),"number"==typeof c?a.height=Ext.Number.constrain(c,a.minHeight,a.maxHeight):null===c?delete a.height:"string"==typeof c&&(d=!0,a.height=c),a.rendered&&a.isVisible()&&(g===a.width&&f===a.height||((a.liquidLayout||e||d)&&a.el.setSize(a.width,a.height),a.updateLayout(a._notAsLayoutRoot))),a},setStyle:function(b,a){return(this.el||this.protoEl).setStyle(b,a),this},setUI:function(c){var b,a=this,e=a.uiCls,d=a.activeUI;c!==d&&(d?((b=a.removeClsWithUI(e,!0)).length&&a.removeCls(b),a.removeUIFromElement()):a.uiCls=[],a.ui=c,a.activeUI=c,a.addUIToElement(),(b=a.addClsWithUI(e,!0)).length&&a.addCls(b),a.rendered&&a.updateLayout())},setVisible:function(a){return this[a?"show":"hide"]()},setHidden:function(a){return this.setVisible(!a)},setWidth:function(a){return this.setSize(a)},show:function(c,e,d){var a=this,b=a.rendered;return a.hierarchicallyHidden||a.floating&&!b&&a.isHierarchicallyHidden()?(b||a.initHierarchyEvents(),1<arguments.length?(c=null,a.pendingShow=arguments):a.pendingShow=!0):b&&a.isVisible()?a.floating&&a.onFloatShow():!1!==a.fireEvent("beforeshow",a)?(a.hidden=!1,delete this.getInherited().hidden,Ext.suspendLayouts(),b||!a.autoRender&&!a.floating||(a.doAutoRender(),b=a.rendered),b?(a.beforeShow(),Ext.resumeLayouts(),a.onShow.apply(a,arguments),a.afterShow.apply(a,arguments)):Ext.resumeLayouts(!0)):a.onShowVeto(),a},showAt:function(b,c,d){var a=this;return a.rendered||!a.autoRender&&!a.floating?a.floating?a.setPosition(b,c,d):a.setPagePosition(b,c,d):(a.x=b,a.y=c),a.show()},showBy:function(b,d,c){var a=this;return a.floating&&b&&(a.alignTarget=b,d&&(a.defaultAlign=d),c&&(a.alignOffset=c),a.show(),a.hidden||a.alignTo(b,d||a.defaultAlign,c||a.alignOffset)),a},suspendLayouts:function(){var a=this;a.rendered&&1==++a.layoutSuspendCount&&(a.suspendLayout=!0)},unitizeBox:function(a){return Ext.Element.unitizeBox(a)},unmask:function(){(this.getMaskTarget()||this.el).unmask(),this.setMasked(!1)},unregisterFloatingItem:function(b){this.floatingDescendants&&this.floatingDescendants.unregister(b)},up:function(c,b){var a=this.getRefOwner(),f="string"==typeof b,g="number"==typeof b,e=b&&b.isComponent,d=0;if(c)for(;a;a=a.getRefOwner()){if(d++,c.isComponent){if(a===c)return a}else if(Ext.ComponentQuery.is(a,c))return a;if(f&&a.is(b))return;if(g&&d===b)return;if(e&&a===b)return}return a},update:function(b,i,k,j){var e,c,d,a=this,h=a.tpl&&!Ext.isString(b),g=a.getScrollable(),f=a.focusableContainer;h?a.data=b&&b.isEntity?b.getData(!0):b:a.html=Ext.isObject(b)?Ext.DomHelper.markup(b):b,a.rendered&&(c=(e=a.getSizeModel()).width.shrinkWrap||e.height.shrinkWrap,a.isContainer?(d=a.layout.getRenderTarget(),c=c||0<a.items.items.length):d=a.touchScroll?a.getScrollerEl():a.getTargetEl(),h?a.tpl[a.tplWriteMode](d,a.data||{}):d.setHtml(a.html,i,k,j||a),c&&a.updateLayout(),g&&g.refresh(!0),f&&f.onFocusableChildUpdate(a))},setHtml:function(c,a,b){this.update(c,a,null,b)},applyData:function(a){this.update(a)},updateBox:function(a){return this.setSize(a.width,a.height),this.setPagePosition(a.x,a.y),this},_asLayoutRoot:{isRoot:!0},_notAsLayoutRoot:{isRoot:!1},updateLayout:function(b){var e,a=this,d=a.lastBox,c=b&&b.isRoot;d&&(d.invalid=!0),!a.rendered||a.layoutSuspendCount||a.suspendLayout||(a.hidden?Ext.Component.cancelLayout(a):"boolean"!=typeof c&&(c=a.isLayoutRoot()),!c&&a.ownerLayout&&a.ownerLayout.onContentChange(a)||a.isLayoutSuspended()||(e=b&&b.hasOwnProperty("defer")?b.defer:a.deferLayouts,Ext.Component.updateLayout(a,e)))},updateMaxHeight:function(b,a){this.changeConstraint(b,a,"min","max-height","height")},updateMaxWidth:function(b,a){this.changeConstraint(b,a,"min","max-width","width")},updateMinHeight:function(b,a){this.changeConstraint(b,a,"max","min-height","height")},updateMinWidth:function(b,a){this.changeConstraint(b,a,"max","min-width","width")},getAnchorToXY:function(d,a,c,b){return d.getAnchorXY(a,c,b)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(a){this.el.setLocalX(a)},setLocalXY:function(a,b){this.el.setLocalXY(a,b)},setLocalY:function(a){this.el.setLocalY(a)},setX:function(b,a){this.el.setX(b,a)},setXY:function(b,a){this.el.setXY(b,a)},setY:function(b,a){this.el.setY(b,a)},privates:{addOverCls:function(){var a=this;a.disabled||a.el.addCls(a.overCls)},addUIToElement:function(){var e,c,f,b,a=this,d=a.baseCls+"-"+a.ui;if(a.addCls(d),a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius)for(c in d+="-",e=a.getChildEls())(b=e[c].frame)&&!0!==b&&(f=a[c])&&f.addCls(d+b)},changeConstraint:function(b,g,f,c,d){var a=this,e=a[d];null!=b&&"number"==typeof e&&(a[d]=Math[f](e,b)),a.liquidLayout&&(null!=b?a.setStyle(c,b+"px"):g&&a.setStyle(c,"")),a.rendered&&a.updateLayout()},constructPlugin:function(a){return a="string"==typeof a?Ext.PluginManager.create({},a,this):Ext.PluginManager.create(a,null,this)},constructPlugins:function(){var c,b,e,d=this,a=d.plugins;if(a)for((c=[]).processed=!0,Ext.isArray(a)||(a=[a]),b=0,e=a.length;b<e;b++)c[b]=d.constructPlugin(a[b]);return d.pluginsInitialized=!0,c},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.el),Ext.Component.cancelLayout(this),this.isDetached=!0},doAddListener:function(h,e,i,b,n,m,l){var c,g,j,d,f,a=this;if(Ext.isObject(e)||b&&b.element){if(b.element)for(g in d=b.element,(c={})[h]=e,i&&(c.scope=i),j=a.$elementEventOptions,b)j[g]&&(c[g]=b[g]);else c=e,d=h;(f=a[d])&&f.isObservable?a.mon(f,c):(a.afterRenderEvents=a.afterRenderEvents||{},a.afterRenderEvents[d]||(a.afterRenderEvents[d]=[]),a.afterRenderEvents[d].push(c))}else b&&b.delegate?a.mixins.componentDelegation.addDelegatedListener.call(a,h,e,i,b,n,m,l):a.mixins.observable.doAddListener.call(a,h,e,i,b,n,m,l)},doRemoveListener:function(b,d,c){var a=this;a.mixins.observable.doRemoveListener.call(a,b,d,c),a.mixins.componentDelegation.removeDelegatedListener.call(a,b,d,c)},fireHierarchyEvent:function(b){var a=Ext.GlobalEvents;a.hasListeners[b]&&a.fireEvent(b,this)},getActionEl:function(){return this.el},getAutoId:function(){return this.autoGenId=!0,++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var b,c,a,e=this,d=e.getScrollable(),f=e._scrollFlags;return a=d?(!0===(b=d.getX())&&(b="auto"),!0===(c=d.getY())&&(c="auto"),f[b][c]):f.none,{overflowX:(e.scrollFlags=a).overflowX,overflowY:a.overflowY}},getPlugins:function(){var a=this.plugins;return(a=a&&a.processed?a:this.constructPlugins())||null},getProxy:function(){var b,a=this;return a.proxy||(b=Ext.getBody(),a.proxy=a.el.createProxy(Ext.baseCSSPrefix+"proxy-el",b,!0)),a.proxy},getScrollerEl:function(){var a=this;return a.scrollerEl||(a.scrollerEl=a.componentLayout.getScrollerEl()||a.getOverflowEl().child(a.scrollerSelector))},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return Ext.baseCSSPrefix+this.getTdType()+"-"+this.ui+"-cell"},getTdType:function(){return this.xtype},getTpl:function(a){return Ext.XTemplate.getTpl(this,a)},initCls:function(){var a=this,b=[a.baseCls],c=a.getComponentLayout().targetCls;return c&&b.push(c),Ext.isDefined(a.cmpCls)&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.Component: cmpCls has been deprecated. Please use componentCls."),a.componentCls=a.cmpCls,delete a.cmpCls),a.componentCls?b.push(a.componentCls):a.componentCls=a.baseCls,b},initDraggable:function(){var a=this,c=a.resizer&&a.resizer.el!==a.el?a.resizerComponent=new Ext.Component({el:a.resizer.el,rendered:!0,container:a.container}):a,b=Ext.applyIf({el:c.getDragEl(),constrainTo:a.constrain||a.draggable.constrain?a.constrainTo||(a.floatParent?a.floatParent.getTargetEl():a.container):void 0},a.draggable);(a.constrain||a.constrainDelegate)&&(b.constrain=a.constrain,b.constrainDelegate=a.constrainDelegate),a.dd=new Ext.util.ComponentDragger(c,b)},initPadding:function(c){var a=this,b=a.padding;null!=b&&(a.touchScroll||a.layout&&a.layout.managePadding&&"padding"===a.contentPaddingProperty?c.setStyle("padding",0):c.setStyle("padding",this.unitizeBox(!0===b?5:b)))},initPlugin:function(a){return a.init(this),a},initResizable:function(b){var a=this;((b=Ext.apply({target:a,dynamic:!1,constrainTo:a.constrain||b&&b.constrain?a.constrainTo||(a.floatParent?a.floatParent.getTargetEl():a.container):void 0,handles:a.resizeHandles},b)).target=a).resizer=new Ext.resizer.Resizer(b)},initStyles:function(b){var d,c,a=this,g=a.margin,j=a.border,i=a.cls,h=a.style,e=a.x,f=a.y,k=a.liquidLayout;a.initPadding(b),null!=g&&b.setStyle("margin",this.unitizeBox(!0===g?5:g)),null!=j&&a.setBorder(j,b),i&&i!==a.initialCls&&(b.addCls(i),a.cls=a.initialCls=null),h&&h!==a.initialStyle&&(b.setStyle(h),a.style=a.initialStyle=null),null!=e&&b.setStyle(a.horizontalPosProp,"number"==typeof e?e+"px":e),null!=f&&b.setStyle("top","number"==typeof f?f+"px":f),a.ownerCt&&!a.floating||(Ext.scopeCss&&b.addCls(a.rootCls),b.addCls(a.borderBoxCls)),!k&&a.getFrameInfo()||(d=a.width,c=a.height,null!=d&&("number"==typeof d?b.setStyle("width",d+"px"):b.setStyle("width",d)),null!=c&&("number"==typeof c?b.setStyle("height",c+"px"):b.setStyle("height",c)))},isContainedFloater:function(){return this.floating&&this.floatParent},isDescendant:function(b){if(b.isContainer)for(var a=this.ownerCt;a;a=a.ownerCt)if(a===b)return!0;return!1},owns:function(a){var b,c=!1;return a.isEvent?a=a.target:a.isElement&&(a=a.dom),(b=Ext.Component.fromElement(a))&&(c=b===this||!!b.up(this)),c},parseBox:function(a){return Ext.Element.parseBox(a)},reattachToBody:function(){this.isDetached=!1},refreshScroll:function(){var a=this.getScrollable();a&&a.refresh()},removeManagedListenerItem:function(d,a,h,g,f,e){var c=this,b=a.options?a.options.element:null;if(!b)return c.mixins.observable.removeManagedListenerItem.apply(c,arguments);(b=c[b])&&b.un&&(!d&&(a.item!==h||a.ename!==g||f&&a.fn!==f||e&&a.scope!==e)||(b.un(a.ename,a.fn,a.scope),d||Ext.Array.remove(c.managedListeners,a)))},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(a){Ext.Array.remove(this.plugins,a),a.destroy()},removeUIFromElement:function(){var e,c,f,b,a=this,d=a.baseCls+"-"+a.ui;if(a.removeCls(d),a.rendered&&a.frame&&!Ext.supports.CSS3BorderRadius)for(c in d+="-",e=a.getChildEls())(b=e[c].frame)&&!0!==b&&(f=a[c])&&f.removeCls(d+b)},setComponentLayout:function(b){var a=this.componentLayout;a&&a.isLayout&&a!==b&&a.setOwner(null),(this.componentLayout=b).setOwner(this)},setHiddenState:function(d){var a=this,b=a.getInherited(),c=a.zIndexManager;(a.hidden=d)?b.hidden=!0:delete b.hidden,c&&c.onComponentShowHide(a)},setupProtoEl:function(){var a=this.initCls();this.protoEl.addCls(a)},wrapPrimaryEl:function(c){var a=this,b=a.el;b&&b.isElement||(a.el=Ext.get(c)),a.floating&&this.mixins.floating.constructor.call(this)}},deprecated:{5:{methods:{addClass:"addCls",doComponentLayout:function(){return this.updateLayout(),this},removeClass:"removeCls",forceComponentLayout:"updateLayout",setDocked:"setDock"}}}},function(a){var b=a.prototype;(b.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1,(b.$eventOptions=Ext.Object.chain(b.$eventOptions)).delegate=1,a.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"}),Ext.resumeLayouts=function(b){a.resumeLayouts(b)},Ext.suspendLayouts=function(){a.suspendLayouts()},Ext.batchLayouts=function(c,b){a.suspendLayouts(),c.call(b),a.resumeLayouts(!0)},Ext.setGlyphFontFamily=function(a){Ext._glyphFontFamily=a},a.hierarchyEventSource=b.hierarchyEventSource=Ext.GlobalEvents,Ext.onReady(function(){Ext.supports.HighContrastMode&&Ext.getBody().addCls(a.ariaHighContrastModeCls)})}),Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var a=this;a._borderRegionInited||(a._borderRegionInited=!0,a.addStateEvents(["changeregion","changeweight"]),Ext.override(a,{getState:function(){var b=a.callParent();return b=a.addPropertyToState(b,"region"),b=a.addPropertyToState(b,"weight")}}))},getOwningBorderContainer:function(){var a=this.getOwningBorderLayout();return a&&a.owner},getOwningBorderLayout:function(){var a=this.ownerLayout;return a&&a.isBorderLayout?a:null},setRegion:function(c){var f,a=this,g=a.region;if(c!==g)if(f=a.getOwningBorderLayout()){var h,e,d,k=f.regionFlags[c],j=a.placeholder,b=a.splitter,i=f.owner,m=f.regionMeta,l=a.collapsed||a.floated;if(!1===a.fireEventArgs("beforechangeregion",[a,c]))return g;Ext.suspendLayouts(),a.region=c,Ext.apply(a,k),a.updateCollapseTool&&a.updateCollapseTool(),b&&(Ext.apply(b,k),b.updateOrientation(),0<=(d=(e=i.items).indexOf(a))&&(h=m[c].splitterDelta,e.getAt(d+h)!==b&&(e.remove(b),d=e.indexOf(a),0<h&&++d,e.insert(d,b)))),j&&(l&&a.expand(!1),i.remove(j),a.placeholder=null,l&&a.collapse(null,!1)),i.updateLayout(),Ext.resumeLayouts(!0),a.fireEventArgs("changeregion",[a,g])}else a.region=c;return g},setWeight:function(b){var a=this,e=a.getOwningBorderContainer(),d=a.placeholder,c=a.weight;return b!==c&&!1!==a.fireEventArgs("beforechangeweight",[a,b])&&(a.weight=b,d&&(d.weight=b),e&&e.updateLayout(),a.fireEventArgs("changeweight",[a,c])),c}},function(b){var a=b.prototype;a.setBorderRegion=a.setRegion,a.setRegionWeight=a.setWeight}),Ext.define("Ext.theme.triton.Component",{override:"Ext.Component"},function(){Ext.namespace("Ext.theme.is").Triton=!0,Ext.theme.name="Triton"}),Ext.define("ExtX.Reference.Slot",{override:"Ext.Component",slot:null,__COLLECTOR__:null,onRemoved:function(){this.__COLLECTOR__&&(delete this.__COLLECTOR__.slots[this.slot],delete this.__COLLECTOR__),this.callOverridden(arguments)},beforeDestroy:function(){this.__COLLECTOR__&&(delete this.__COLLECTOR__.slots[this.slot],delete this.__COLLECTOR__),this.callOverridden(arguments)}}),Ext.define("ExtX.Reference.Slot2",{override:"Ext.Container",slots:null,onAdd:function(){this.cascade(function(a){if(a.slot&&!a.__COLLECTOR__){var b=a.__COLLECTOR__=a.up("{slots}");b&&(b.slots[a.slot]=a)}})},initComponent:function(){this.slots&&(this.slots={}),this.callOverridden()}}),Ext.define("Ext.overrides.app.domain.Component",{override:"Ext.app.domain.Component"},function(a){a.monitor(Ext.Component)}),Ext.define("Ext.app.EventBus",{singleton:!0,constructor:function(){var a=this,b=Ext.app.EventDomain.instances;a.callParent(),a.domains=b,a.bus=b.component.bus},control:function(b,a){return this.domains.component.listen(b,a)},listen:function(b,c){var a,d=this.domains;for(a in b)b.hasOwnProperty(a)&&d[a].listen(b[a],c)},unlisten:function(c){var b,a=Ext.app.EventDomain.instances;for(b in a)a[b].unlisten(c)}}),Ext.define("Ext.app.domain.Global",{extend:Ext.app.EventDomain,singleton:!0,type:"global",constructor:function(){this.callParent(),this.monitor(Ext.GlobalEvents)},listen:function(b,a){this.callParent([{global:b},a])},match:Ext.returnTrue}),Ext.define("Ext.app.BaseController",{mixins:[Ext.mixin.Observable],isController:!0,config:{id:null,control:null,listen:null,routes:null,before:null},constructor:function(b){var a=this;Ext.apply(a,b),delete a.control,delete a.listen,a.eventbus=Ext.app.EventBus,a.mixins.observable.constructor.call(a,b),a.ensureId()},applyListen:function(a){return Ext.isObject(a)&&(a=Ext.clone(a)),a},applyControl:function(a){return Ext.isObject(a)&&(a=Ext.clone(a)),a},updateControl:function(a){this.ensureId(),a&&this.control(a)},updateListen:function(a){this.ensureId(),a&&this.listen(a)},updateRoutes:function(b){if(b){var c,a,d,f=this.getBefore()||{},g=Ext.app.route.Router;for(c in b)a=b[c],Ext.isString(a)&&(a={action:a}),d=a.action,a.before||(a.before=f[d]),g.connect(c,a,this)}},isActive:function(){return!0},control:function(b,c,f){var a,d=f;Ext.isString(b)?(a={})[b]=c:(a=b,d=c),this.eventbus.control(a,d||this)},listen:function(b,a){this.eventbus.listen(b,a||this)},destroy:function(){var a=this,b=a.eventbus;Ext.app.route.Router.disconnectAll(a),b&&(b.unlisten(a),a.eventbus=null),a.callParent()},redirectTo:function(a,c){if(a.isModel&&(a=a.toUrl()),c)Ext.app.route.Router.onStateChange(a);else if(Ext.util.History.getToken()===a)return!1;return Ext.util.History.add(a),!0}}),Ext.define("Ext.app.Util",{},function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(a){var b,c,d=Ext.app.namespaces;for(Ext.isArray(a)||(a=[a]),b=0,c=a.length;b<c;b++)d[a[b]]=!0},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(d){var a,c=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),b="";for(a in c)c.hasOwnProperty(a)&&a.length>b.length&&a+"."===d.substring(0,a.length+1)&&(b=a);return""===b?void 0:b},setupPaths:function(e,b,c){var d,a=Ext.manifest;if(e&&null!==b&&((a=a&&a.paths)&&void 0===b||Ext.Loader.setPath(e,void 0===b?"app":b)),c)for(d in c)c.hasOwnProperty(d)&&Ext.Loader.setPath(d,c[d])}}),Ext.getNamespace=Ext.app.getNamespace}),Ext.define("Ext.util.CollectionKey",{mixins:[Ext.mixin.Identifiable],isCollectionKey:!0,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:!0},generation:0,map:null,mapRebuilds:0,constructor:function(a){this.initConfig(a)},get:function(a){return(this.map||this.getMap())[a]||null},clear:function(){this.map=null},getRootProperty:function(){var a=this.callParent();return null!==a?a:this.getCollection().getRootProperty()},indexOf:function(i,b){var d,a,f,g,c=(this.map||this.getMap())[i],e=this.getCollection(),h=e.length;if(!c)return-1;if(void 0===b&&(b=-1),c instanceof Array){for(a=h,g=(f=c).length;0<g--;)(d=e.indexOf(f[g]))<a&&b<d&&(a=d);if(a===h)return-1}else a=e.indexOf(c);return b<a?a:-1},updateKey:function(e,d){var a,b,c=this.map;c&&((a=c[d])instanceof Array?0<=(b=Ext.Array.indexOf(a,e))&&(2<a.length?a.splice(b,1):c[d]=a[1-b]):a&&delete c[d],this.add([e]))},onCollectionAdd:function(b,a){this.map&&this.add(a.items)},onCollectionItemChange:function(a,b){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(g,h){var b,a=this,f=a.map,d=h.items,c=d.length;if(f)if(a.getUnique()&&c<g.length/2)for(b=0;b<c;++b)delete f[a.getKey(d[b])];else a.map=null},add:function(i){var b,d,e,a,g,h,f=this,c=f.map;for(g=i.length,h=f.getUnique(),d=0;d<g;++d)a=f.getKey(e=i[d]),!h&&a in c?((b=c[a])instanceof Array||(c[a]=b=[b]),b.push(e)):c[a]=e},applyKeyFn:function(a){Ext.isString(a)?this.getKey=function(b){return b[a]()}:this.getKey=a},updateProperty:function(b){var a=this.getRootProperty();this.getKey=function(c){return(a?c[a]:c)[b]}},getMap:function(){var a=this,b=a.map;return b||(a.map=b={},a.keysByItemKey={},++a.mapRebuilds,a.add(a.getCollection().items)),b},updateCollection:function(a){a.addObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())}}),Ext.define("Ext.util.Grouper",{extend:Ext.util.Sorter,isGrouper:!0,config:{groupFn:null,sortProperty:null},constructor:function(a){this.callParent(arguments)},getGroupString:function(b){var a=this._groupFn(b);return null!=a?String(a):""},sortFn:function(d,e){var c=this,a=c._groupFn(d),b=c._groupFn(e),g=c._sortProperty,i=c._root,h=c._sorterFn,f=c._transform;if(a===b)return 0;if(g||h){if(h)return h.call(this,d,e);i&&(d=d[i],e=e[i]),a=d[g],b=e[g],f&&(a=f(a),b=f(b))}return b<a?1:a<b?-1:0},standardGroupFn:function(a){var b=this._root;return(b?a[b]:a)[this._property]},updateSorterFn:function(){},updateProperty:function(){this.getGroupFn()||this.setGroupFn(this.standardGroupFn)}}),Ext.define("Ext.util.Collection",{mixins:[Ext.mixin.Observable],isCollection:!0,config:{autoFilter:!0,autoSort:!0,autoGroup:!0,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null,trackGroups:!0},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:!1,sorted:!1,filtered:!1,$endUpdatePriority:1001,constructor:function(b){var a=this;a.items=[],a.map={},a.length=0,b&&b.keyFn&&(a.getKey=b.keyFn),a.mixins.observable.constructor.call(a,b)},destroy:function(){var a=this,b=a._filters,c=a._sorters,d=a._groups;b&&(b.destroy(),a._filters=null),c&&(c.destroy(),a._sorters=null),d&&(d.destroy(),a._groups=null),a.setSource(null),a.observers=a.items=a.map=null,a.callParent()},add:function(d){var b=this,a=b.decodeItems(arguments,0),c=a;return a.length&&(b.requestedIndex=b.length,b.splice(b.length,0,a),delete b.requestedIndex,c=1===a.length?a[0]:a),c},replaceAll:function(){var c,a,b=this;return(c=a=b.decodeItems(arguments,0)).length?(b.splice(0,b.length,a),c=1===a.length?a[0]:a):b.removeAll(),c},aggregate:function(d,c,e,g,f){var a=this,b=Ext.Array.slice(arguments);return b.unshift(a.items),a.aggregateItems.apply(a,b)},aggregateByGroup:function(b,a,d){var c=this.getGroups();return this.aggregateGroups(c,b,a,d)},aggregateItems:function(a,m,b,c,d,p){var f,g,n,j,i,h,l,e=this,o=Ext.Number.clipIndices(a.length,[c,d]),k=0!==c&&d!==a.length;if(c=o[0],d=o[1],!Ext.isFunction(b))return(b=e._aggregators[b]).call(e,a,c,d,m,e.getRootProperty());for(j=e.getRootProperty(),h=new Array(n),l=k?new Array(n):a,f=c,g=0;f<d;++f,g++)k&&(l[g]=i=a[f]),h[g]=(j?i[j]:i)[m];return b.call(p||e,a,h,0)},aggregateGroups:function(i,e,c,j){var b,a,d,f=i.items,k=f.length,h=!Ext.isFunction(c),g={};for(b=0;b<k;++b)a=f[b],d=h?a[c](e):this.aggregateItems(a.items,e,c,null,null,j),g[a.getGroupKey()]=d;return g},beginUpdate:function(){this.updating++||this.notify("beginupdate")},clear:function(){var b,d,a=this,c=a.generation,e=c?a.items:[];if(c&&(a.items=[],a.length=0,a.map={},a.indices={},a.generation++,b=a.getExtraKeys()))for(d in b)b[d].clear();return e},clone:function(){var a=this,b=new a.self(a.initialConfig);return b.add(a.items),b},collect:function(i,e,h){var b,c,a,d=this.items,j=d.length,f={},g=[];for(b=0;b<j;++b)a=d[b],a=(e?a[e]:a)[i],c=String(a),!h&&Ext.isEmpty(a)||f[c]||(f[c]=1,g.push(a));return g},contains:function(a){var b,c=!1;return null!=a&&(b=this.getKey(a),c=this.map[b]===a),c},containsKey:function(a){return a in this.map},createFiltered:function(a,j,n,l,m){var e,b,c,i,f,d=this,k=new d.self(d.initialConfig),h=d.getRootProperty(),g=d.items;if(Ext.isFunction(a))i=a,f=j;else{if(Ext.isString(a))c=[new Ext.util.Filter({property:a,value:j,root:h,anyMatch:n,caseSensitive:l,exactMatch:m})];else if(a instanceof Ext.util.Filter)c=[a],a.setRoot(h);else if(Ext.isArray(a))for(b=0,e=(c=a.slice(0)).length;b<e;++b)c[b].setRoot(h);i=Ext.util.Filter.createFilterFn(c)}for(f=f||d,b=0,e=g.length;b<e;b++)i.call(f,g[b])&&k.add(g[b]);return k},filterBy:function(b,a){return this.createFiltered(b,a)},each:function(f,c){var a,e,b=this.items,d=b.length;if(d)for(c=c||this,b=b.slice(0),a=0;a<d&&!1!==(e=f.call(c,b[a],a,d));a++);return e},eachKey:function(i,c){var a,g,h,e,f=this,b=f.items,d=b.length;if(d)for(c=c||f,b=b.slice(0),a=0;a<d&&(h=f.getKey(g=b[a]),!1!==(e=i.call(c,h,g,a,d)));a++);return e},endUpdate:function(){--this.updating||this.notify("endupdate")},find:function(f,a,h,d,e,c){if(Ext.isEmpty(a,!1))return null;var g=Ext.String.createRegex(a,d,e,c),b=this.getRootProperty();return this.findBy(function(a){return a&&g.test((b?a[b]:a)[f])},null,h)},findBy:function(i,c,g){var a,e,f,d=this,b=d.items,h=b.length;for(c=c||d,a=g||0;a<h;a++)if(f=d.getKey(e=b[a]),i.call(c,e,f))return b[a];return null},findIndex:function(e,g,f,c,d,b){var a=this.find(e,g,f,c,d,b);return a?this.indexOf(a):-1},findIndexBy:function(d,b,c){var a=this.findBy(d,b,c);return a?this.indexOf(a):-1},first:function(b){var a=b?this.getGroups():void 0;return a?this.aggregateGroups(a,null,"first"):this.items[0]},last:function(b){var a=b?this.getGroups():void 0;return a?this.aggregateGroups(a,null,"last"):this.items[this.length-1]},get:function(a){return this.map[a]},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},getCount:function(){return this.length},getKey:function(b){var a=b.id;return 0===a||a||0===(a=b._id)||a?a:b.getId()},getRange:function(d,e){var a,c=this.items,b=c.length;return a=b?(a=Ext.Number.clipIndices(b,[d,e]),c.slice(a[0],a[1])):[]},getValues:function(h,f,i,c){var b,a,d=this.items,e=Ext.Number.clipIndices(d.length,[i,c]),g=[];for(b=e[0],c=e[1];b<c;++b)a=d[b],a=(f?a[f]:a)[h],g.push(a);return g},indexOf:function(a){if(!a)return-1;var b=this.getKey(a);return this.indexOfKey(b)},indexOfKey:function(c){var b=this,a=b.indices;return c in b.map?(a=a||b.getIndices())[c]:-1},insert:function(c,e){var b=this,a=b.decodeItems(arguments,1),d=a;return a.length&&(b.requestedIndex=c,b.splice(c,0,a),delete b.requestedIndex,d=1===a.length?a[0]:a),d},itemChanged:function(c,p,f,u){var e,l,k,m,b,d,a=this,j=0===f||!!f,s=a.filtered&&a.getAutoFilter(),n=!1,h=0,i=a.items,t=a.length-1,v=a.sorted&&0<t&&a.getAutoSort(),r=a.getSource(),q=0,g=!1,o=!1;r&&!r.updating?r.itemChanged(c,p,f,u):(l=a.getKey(c),s&&(n=(o=(b=a.indexOfKey(j?f:l))<0)!==(g=a.isItemFiltered(c))),n?d=g?(q=[c],-1):(m=[c],a.length):v&&!g&&(s||(b=a.indexOfKey(j?f:l)),k=a.getSortFn(),-1!==b&&(b&&0<k(i[b-1],i[b])?(h=-1,d=Ext.Array.binarySearch(i,c,0,b,k)):b<t&&0<k(i[b],i[b+1])&&(h=1,d=Ext.Array.binarySearch(i,c,b+1,k)),h&&(m=[c]))),e={item:c,key:l,index:d,filterChanged:n,keyChanged:j,indexChanged:!!h,filtered:g,oldIndex:b,newIndex:d,wasFiltered:o,meta:u},j&&(e.oldKey=f),p&&(e.modified=p),a.beginUpdate(),a.notify("beforeitemchange",[e]),j&&a.updateKey(c,f),(m||q)&&a.splice(d,q,m),0<h?e.newIndex--:h<0&&e.oldIndex++,a.notify(g?"filtereditemchange":"itemchange",[e]),a.endUpdate())},remove:function(d){var a=this,c=a.decodeRemoveItems(arguments,0),b=a.length;return a.splice(0,c),b-a.length},removeAll:function(){var a=this,b=a.length;return a.generation&&b&&a.splice(0,b),a},removeAt:function(j,f){var b,a=this,e=a.length,i=Ext.Number,g=i.clipIndices(e,[j,void 0===f?1:f],i.Clip.COUNT),c=g[0],d=g[1]-c,h=1==d&&a.getAt(c);return a.splice(c,d),b=a.length-e,h&&b?h:b},removeByKey:function(b){var a=this.getByKey(b);return!(!a||!this.remove(a))&&a},replace:function(a){var b=this.indexOf(a);-1===b?this.add(a):this.insert(b,a)},splice:function(K,E,L){var c,A,C,j,B,z,a,u,g,w,f,s,q,y,H,v,b=this,D=b.sorted&&b.getAutoSort(),F=b.map,o=b.items,r=b.length,n=E instanceof Array?b.decodeRemoveItems(E):null,G=!n,J=Ext.Number,I=J.clipIndices(r,[K,G?E:0],J.Clip.COUNT),m=I[0],x=(v=I[1])-m,p=b.decodeItems(arguments,2),h=p?p.length:0,d=m,k=b.indices||(h||n?b.getIndices():null),e=null,i=x?[m]:null,l=null,t=b.getSource();if(t&&!t.updating){if(G)for(n=[],a=0;a<x;++a)n.push(o[m+a]);return a=m<r?t.indexOf(o[m]):t.length,t.splice(a,n,p),b}if(h){for(c=p,l=[],A={},D&&(H=b.getSorters(),1<h&&(c.$cloned||(p=c=c.slice(0)),b.sortData(c))),a=0;a<h;++a)void 0!==(w=A[f=b.getKey(u=p[a])])?(y=y||{})[w]=1:((g=k[f])<m||v<=g)&&(i=i||[]).push(g),A[f]=a,l.push(f);if(y){for(s=l,l=[],(c=[]).$cloned=!0,a=0;a<h;++a)y[a]||(u=p[a],c.push(u),l.push(s[a]));h=c.length}e={items:c,keys:l}}for(a=n?n.length:0;0<a--;)void 0!==(g=k[f=b.getKey(n[a])])&&(i=i||[]).push(g);if(!e&&!i)return b;if(b.beginUpdate(),i){for(j=null,z=[],C={},1<i.length&&i.sort(Ext.Array.numericSortFn),a=0,q=i.length;a<q;++a)(f=b.getKey(u=o[g=i[a]]))in F&&(delete F[f],(!j||g>j.at+B.length)&&(z.push(j={at:g,items:B=[],keys:s=[],map:C,next:j,replacement:e}),e&&(e.replaced=j)),B.push(C[f]=u),s.push(f),g<d&&--d,1<x&&g===m&&(--x,i[a--]=++m));for(e&&(e.at=d),w=z.length;0<w--;){if((a=(j=z[w]).at)+(q=j.items.length)<r&&(b.indices=k=null),b.length=r-=q,o.splice(a,q),k)for(s=j.keys,a=0;a<q;++a)delete k[s[a]];++b.generation,b.notify("remove",[j])}}if(e)if(D&&1<h&&r)b.spliceMerge(c,l);else{if(D&&(1<h?(d=0,b.indices=k=null):d=H.findInsertionIndex(e.items[0],o,b.getSortFn())),d===r){for(v=d,a=c.length-1;0<=a;--a)o[v+a]=c[a];if(k=b.indices)for(a=0;a<h;++a)k[l[a]]=d+a}else b.indices=null,Ext.Array.insert(o,d,c);for(a=0;a<h;++a)F[l[a]]=c[a];b.length+=h,e.at=d,e.atItem=0===d?null:o[d-1],++b.generation,b.notify("add",[e])}return b.endUpdate(),b},update:function(c,b){var a=this;a.beginUpdate();try{return c.call(b||a,a)}catch(d){throw d}finally{a.endUpdate()}},updateKey:function(d,b){var c,a=this,f=a.map,e=a.indices,g=a.getSource();g&&!g.updating?g.updateKey(d,b):(c=a.getKey(d))!==b&&(f[b]!==d||c in f||(delete f[b],a.updating++,a.generation++,f[c]=d,e&&(e[c]=e[b],delete e[b]),a.notify("updatekey",[{item:d,newKey:c,oldKey:b}]),a.updating--))},findInsertIndex:function(f){for(var c,a,d=this.getSource(),e=d.items,b=d.indexOf(f)-1;-1<b;){if(c=e[b],-1<(a=this.indexOf(c)))return a+1;--b}return 0},onCollectionAdd:function(l,i){var c,b,e,f,g,k,a=this,j=i.atItem,d=i.items,h=a.requestedIndex;if(a.sorted||(void 0!==h?b=h:j?-1===(b=a.indexOf(j))?b=a.findInsertIndex(d[0]):++b:b=0),a.getAutoFilter()&&a.filtered)for(f=0,k=d.length;f<k;++f)g=d[f],a.isItemFiltered(g)?(e=e||d.slice(0,f),(c=c||[]).push(g)):e&&e.push(g);a.splice(b<0?a.length:b,0,e||d),c&&a.notify("filteradd",[c])},onCollectionBeforeItemChange:function(b,a){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){delete this.onCollectionUpdateKey,this.itemChanged(a.item,a.modified,a.oldKey,a.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(i){var c,g,b,d,f,a=this,h={},e={};for(b=i.items,b=a.filtered&&a.getAutoFilter()?Ext.Array.filter(b,a.getFilterFn()):b.slice(0),a.sorted&&a.sortData(b),a.items=b,a.length=f=b.length,a.map=h,a.indices=e,c=0;c<f;++c)h[d=a.getKey(g=b[c])]=g,e[d]=c;a.notify("refresh")},onCollectionRemove:function(b,a){this.splice(0,a.items)},onCollectionUpdateKey:function(b,a){this.updateKey(a.item,a.oldKey)},_aggregators:{average:function(e,a,b,d,f){var c=b-a;return c&&this._aggregators.sum.call(this,e,a,b,d,f)/c},bounds:function(h,g,i,f,e){for(var a,b,c,d=g;d<i;++d)a=h[d],(a=(e?a[e]:a)[f])<b||(b=a),c<a||(c=a);return[c,b]},count:function(a){return a.length},extremes:function(k,j,l,i,f){var c,b,g,h,a,e=null,d=null;for(c=j;c<l;++c)b=k[c],(a=(f?b[f]:b)[i])<g||(g=a,e=b),h<a||(h=a,d=b);return[d,e]},max:function(c,b,e,a,d){return this._aggregators.bounds.call(this,c,b,e,a,d)[1]},maxItem:function(c,b,e,a,d){return this._aggregators.extremes.call(this,c,b,e,a,d)[1]},min:function(c,b,e,a,d){return this._aggregators.bounds.call(this,c,b,e,a,d)[0]},minItem:function(c,b,e,a,d){return this._aggregators.extremes.call(this,c,b,e,a,d)[0]},sum:function(g,f,h,e,c){for(var a,d=0,b=f;b<h;++b)a=g[b],d+=a=(c?a[c]:a)[e];return d}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(c){var b=this,a=b.observers;a||(b.observers=a=[]),a.push(c),1<a.length&&Ext.Array.sort(a,b.prioritySortFn)},prioritySortFn:function(a,b){return(a.observerPriority||0)-(b.observerPriority||0)},applyExtraKeys:function(e,g){var b,c,a,d=this,f=g||{};for(c in e)(a=e[c]).isCollectionKey?a.setCollection(d):(b={collection:d},Ext.isString(a)?b.property=a:b=Ext.apply(b,a),a=new Ext.util.CollectionKey(b)),f[c]=d[c]=a,a.name=c;return f},applyGrouper:function(a){return a=a&&this.getSorters().decodeSorter(a,"Ext.util.Grouper")},decodeItems:function(e,d){var b,f,c,a=void 0===d?e:e[d];if(!a||!a.$cloned){if((b=e.length>d+1||!Ext.isIterable(a))&&1===(a=Ext.Array.slice(e,d)).length&&void 0===a[0]&&(a.length=0),f=this.getDecoder())for(b||(a=a.slice(0),b=!0),c=a.length;0<c--;)!1===(a[c]=f.call(this,a[c]))&&a.splice(c,1);b&&(a.$cloned=!0)}return a},getIndices:function(){var b,a=this,c=a.indices,d=a.items,f=d.length;if(!c)for(a.indices=c={},++a.indexRebuilds,b=0;b<f;++b)c[a.getKey(d[b])]=b;return c},notify:function(d,b){var c,i,f,h,a=this,e=a.observers,g=a._eventToMethodMap[d],j=0;if(b=b||[],e&&g)for(c=0,i=e.length;c<i;++c)(f=(h=e[c])[g])&&(j++||b.unshift(a),f.apply(h,b));a.hasListeners&&a.hasListeners[d]&&(j||b.unshift(a),a.fireEventArgs(d,b))},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(b){var a=this._filters;return a||!1===b||(a=new Ext.util.FilterCollection,this.setFilters(a)),a},isItemFiltered:function(a){return!this.getFilters().filterFn(a)},onFilterChange:function(f){var c,d,e,a=this,b=a.getSource();if(b)(b.length||a.length)&&a.onCollectionRefresh(b);else{if(c=a.getExtraKeys())for(e in d={},c)d[e]=c[e].clone(a);b=new Ext.util.Collection({keyFn:a.getKey,extraKeys:d,rootProperty:a.getRootProperty()}),a.length&&b.add(a.items),a.setSource(b),a.autoSource=b}a.notify("filter")},applyFilters:function(a,b){return null==a||a&&a.isFilterCollection?a:(a&&(b=b||this.getFilters()).splice(0,b.length,a),b)},updateFilters:function(b,c){var a=this;c&&c.un("endupdate","onEndUpdateFilters",a),b&&(b.on({endupdate:"onEndUpdateFilters",scope:a,priority:a.$endUpdatePriority}),b.$filterable=a),a.onEndUpdateFilters(b)},onEndUpdateFilters:function(a){var b=this,d=b.filtered,c=!!a&&0<a.length;(d||c)&&(b.filtered=c,b.onFilterChange(a))},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(b){var a=this._sorters;return a||!1===b||(a=new Ext.util.SorterCollection,this.setSorters(a)),a},onSortChange:function(){this.sorted&&this.sortItems()},sort:function(c,b,d){var a=this.getSorters();return a.addSort.apply(a,arguments),this},sortData:function(a){return Ext.Array.sort(a,this.getSortFn()),a},sortItems:function(b){var a=this;a.sorted&&(b=a.getSortFn()),a.indices=null,a.notify("beforesort",[a.getSorters(!1)]),a.length&&Ext.Array.sort(a.items,b),a.notify("sort")},sortBy:function(a){return this.sortItems(a)},findInsertionIndex:function(c,b,a){return b=b||this.items,a=a||this.getSortFn(),Ext.Array.binarySearch(b,c,a)},applySorters:function(a,b){return null==a||a&&a.isSorterCollection?a:(a&&(b=b||this.getSorters()).splice(0,b.length,a),b)},createSortFn:function(){var b=this.getGrouper(),c=this.getSorters(!1),a=c?c.getSortFn():null;return b?function(d,e){var c=b.sort(d,e);return!c&&a&&(c=a(d,e)),c}:a},updateGrouper:function(c){var d,a=this,b=a.getGroups(),e=a.getSorters();a.onSorterChange(),a.grouped=!!c,c?a.getTrackGroups()&&(b||((b=new Ext.util.GroupCollection({itemRoot:a.getRootProperty()})).$groupable=a).setGroups(b),b.setGrouper(c),d=!0):(b&&(a.removeObserver(b),b.destroy()),a.setGroups(null)),e.updating||a.onEndUpdateSorters(e),d&&b.onCollectionRefresh(a)},updateSorters:function(b,c){var a=this;c&&c.un("endupdate","onEndUpdateSorters",a),b&&(b.on({endupdate:"onEndUpdateSorters",scope:a,priority:a.$endUpdatePriority}),b.$sortable=a),a.onSorterChange(),a.onEndUpdateSorters(b)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(b){var a=this,d=a.sorted,c=a.grouped&&a.getAutoGroup()||b&&0<b.length;(d||c)&&(a.sorted=!!c,a.onSortChange(b))},removeObserver:function(b){var a=this.observers;a&&Ext.Array.remove(a,b)},spliceMerge:function(i,q){var l,j,d,b,o,e,f=this,r=f.map,k=i.length,g=0,n=f.items,m=n.length,h=[],c=0,a=[],p=f.getSortFn();for(f.items=a,e=0;e<k;e=j){for(b=i[e];g<m&&!(p(b,o=n[g])<0);++g)a.push(o);if(g===m){for(h[c++]={at:a.length,itemAt:a[a.length-1],items:l=[]},1<c&&(h[c-2].next=h[c-1]);e<k;++e)l.push(b=i[e]),a.push(b);break}for(h[c++]={at:a.length,itemAt:a[a.length-1],items:l=[b]},1<c&&(h[c-2].next=h[c-1]),a.push(b),j=e+1;j<k&&!(0<=p(b=i[j],o));++j)a.push(b),l.push(b)}for(;g<m;++g)a.push(n[g]);for(d=0;d<k;++d)r[q[d]]=i[d];for(f.length=a.length,++f.generation,f.indices=null,d=0;d<c;++d)f.notify("add",[h[d]])},getGroups:function(){return this.callParent()||null},updateAutoGroup:function(b){var a=this.getGroups();a&&a.setAutoGroup(b),this.onEndUpdateSorters(this._sorters)},updateGroups:function(a,b){b&&this.removeObserver(b),a&&this.addObserver(a)},updateSource:function(a,b){var c=this.autoSource;b&&(b.removeObserver(this),b===c&&(c.destroy(),this.autoSource=null)),a&&(a.addObserver(this),(a.length||this.length)&&this.onCollectionRefresh(a))}},function(){var a=this.prototype;a.removeAtKey=a.removeByKey,a.decodeRemoveItems=a.decodeItems,Ext.Object.each(a._aggregators,function(b){a[b]=function(a,c,d){return this.aggregate(a,b,c,d)},a[b+"ByGroup"]=function(a){return this.aggregateByGroup(a,b)}})}),Ext.define("Ext.util.ObjectTemplate",{isObjectTemplate:!0,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(a,b){return a.isObjectTemplate?a:new Ext.util.ObjectTemplate(a,b)}},constructor:function(a,b){Ext.apply(this,b),this.template=a},apply:function(b){var a=this;return delete a.apply,a.apply=a.compile(a.template),a.apply(b)},privates:{compile:function(a){var d,b,f,c,e=this,g=e.excludeProperties;if(Ext.isString(a))c=a.indexOf("{")<0?function(){return a}:e.valueRe.test(a)?(a=a.substring(1,a.length-1).split("."),function(d){for(var b=d,c=0;b&&c<a.length;++c)b=b[a[c]];return b}):(a=new Ext.XTemplate(a),function(b){return a.apply(b)});else if(!a||Ext.isPrimitive(a)||Ext.isFunction(a))c=function(){return a};else if(a instanceof Array){for(d=[],b=0,f=a.length;b<f;++b)d[b]=e.compile(a[b]);c=function(c){var a,b=[];for(a=0;a<f;++a)b[a]=d[a](c);return b}}else{for(b in d={},a)g[b]||(d[b]=e.compile(a[b]));c=function(f){var b,c,e={};for(b in a)void 0!==(c=g[b]?a[b]:d[b](f))&&(e[b]=c);return e}}return c}}}),Ext.define("Ext.data.schema.Role",{isRole:!0,left:!0,owner:!1,side:"left",isMany:!1,defaultReaderType:"json",_internalReadOptions:{recordsOnly:!0,asRoot:!0},constructor:function(b,d){var a=this,c=d.extra;Ext.apply(a,d),c&&(delete c.type,Ext.apply(a,c),delete a.extra),(a.association=b).owner===a.side&&((b.owner=a).owner=!0)},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(d,b,a,c){return a},checkMembership:Ext.emptyFn,adoptAssociated:function(c,b){var a=this.getAssociatedItem(c);a&&b.adopt(a)},createAssociationStore:function(e,k,i,l){var b,a=this,g=a.association,d=g.getFieldName(),j=g.isManyToMany,h=a.storeConfig,f=k.getId(),c={asynchronousLoad:!1,model:a.cls,role:a,session:e,associatedEntity:k,disableMetaChangeEvent:!0,pageSize:null,remoteFilter:!0,trackRemoved:!e};return j?c.filters=[{property:a.inverse.field,value:f,exactMatch:!0}]:d&&(c.filters=[{property:d,value:f,exactMatch:!0}],c.foreignKeyName=d),h&&Ext.apply(c,h),b=Ext.Factory.store(c),a.onStoreCreate(b,e,f),(d||j&&e)&&b.on({scope:a,add:"onAddToMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany"}),i&&(b.loadData(i),b.complete=!!l),b},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(f,a,c,b,t){var r,d,k,s,o,p,q,l,j=this,m=j.getStoreName(),e=f[m],i=f.session,n=a&&a.reload,g=f.$source,h=!1;if(!e){if(i){if(!b&&g&&(g=g[m])&&!g.isLoading()){for(b=[],k=0,s=(o=(q=g).getData().items).length;k<s;++k)p=o[k],b.push(i.getRecord(p.self,p.id));h=!!g.complete,r=!0}r||(l=!!b,b=j.findRecords(i,f,b,t),l||b&&b.length||(b=null),h=l)}else h=!!(b&&0<b.length);(e=j.createAssociationStore(i,f,b,h)).$source=q,b||!j.autoLoad&&!a||(n=!0),f[m]=e}return a&&(n||e.isLoading()?e.on("load",function(g,h,b,e){d=[g,e],c=c||a.scope||f,b?Ext.callback(a.success,c,d):Ext.callback(a.failure,c,d),d.push(b),Ext.callback(a,c,d),Ext.callback(a.callback,c,d)},null,{single:!0}):(d=[e,null],c=c||a.scope||f,Ext.callback(a.success,c,d),d.push(!0),Ext.callback(a,c,d),Ext.callback(a.callback,c,d))),n&&!e.isLoading()&&e.load(),e},getAssociatedItem:function(b){return b[this.isMany?this.getStoreName():this.getInstanceName()]||null},onDrop:Ext.emptyFn,getReaderRoot:function(){var a=this;return a.associationKey||(a.associationKey=a.association.schema.getNamer().readerRoot(a.role))},getReader:function(){var b=this,a=b.reader,d=b.cls,c=!b.associationKey,e=this.getReaderRoot();return a&&!a.isReader&&(Ext.isString(a)&&(a={type:a}),Ext.applyIf(a,{model:d,rootProperty:e,useSimpleAccessors:c,type:b.defaultReaderType}),a=b.reader=Ext.createByAlias("reader."+a.type,a)),a},getInstanceName:function(){var a=this;return a.instanceName||(a.instanceName=a.association.schema.getNamer().instanceName(a.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName="$old"+this.getInstanceName())},getStoreName:function(){var a=this;return a.storeName||(a.storeName=a.association.schema.getNamer().storeName(a.role))},constructReader:function(h){var c,d,b=this,a=b.getReader(),e=b.cls,g=!b.associationKey,f=b.getReaderRoot();return a||((d=e.getProxy())?((a=new((c=d.getReader()).self)).copyFrom(c),a.setRootProperty(f)):a=new h.self({model:e,useSimpleAccessors:g,rootProperty:f}),b.reader=a),a},read:function(f,e,d,c){var a=this.constructReader(d),b=a.getRoot(e);if(b)return a.readRecords(b,c,this._internalReadOptions)},getCallbackOptions:function(a,c,b){return"function"==typeof a?a={callback:a,scope:c||b}:a&&((a=Ext.apply({},a)).scope=c||a.scope||b),a},doGetFK:function(d,b,f){var c,g,i=this,l=i.cls,j=i.association.getFieldName(),h=i.getInstanceName(),a=d[h],m=b&&b.reload,e=void 0!==a&&!m,k=d.session;return e?a&&(e=!a.isLoading()):k?(c=d.get(j))||0===c?(e=k.peekRecord(l,c,!0)&&!m,a=k.getRecord(l,c,!1)):(e=!0,d[h]=a=null):j?(c=d.get(j))||0===c?a=a||l.createWithId(c):(e=!0,d[h]=a=null):e=!0,e?b&&(g=[a,null],f=f||b.scope||d,Ext.callback(b.success,f,g),g.push(!0),Ext.callback(b,f,g),Ext.callback(b.callback,f,g)):(d[h]=a,b=i.getCallbackOptions(b,f,d),a.load(b)),a},doSetFK:function(a,c,e,l){var g,f=this,i=f.association.getFieldName(),h=f.getInstanceName(),b=a[h],d=f.inverse,j=d.setterName;a.session;if(c&&c.isEntity?b!==c&&(a[g=f.getOldInstanceName()]=b,a[h]=c,b&&b.isEntity&&(b[d.getInstanceName()]=void 0),i&&a.set(i,c.getId()),delete a[g],j&&c[j](a)):(a.changingKey&&!d.isMany||a.set(i,c))&&b&&b.isEntity&&!b.isEqual(b.getId(),c)&&(a[h]=void 0,d.isMany||(b[d.getInstanceName()]=void 0)),e)return Ext.isFunction(e)&&(e={callback:e,scope:l||a}),a.save(e)}}),Ext.define("Ext.data.schema.Association",{isOneToOne:!1,isManyToOne:!1,isManyToMany:!1,owner:null,field:null,constructor:function(d){var c,b,a=this;Ext.apply(a,d),a.left=c=new a.Left(a,a.left),a.right=b=new a.Right(a,a.right),(c.inverse=b).inverse=c},hasField:function(){return!!this.field},getFieldName:function(){var a=this.field;return a?a.name:""}}),Ext.define("Ext.util.Inflector",{singleton:!0,plurals:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat|potat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status|sex)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/^(p)erson$/i,"$1eople"],[/^(m)an$/i,"$1en"],[/(.*)(child)(ren)?$/i,"$1$2ren"],[/s$/i,"s"],[/$/,"s"]],singulars:[[/(address)$/i,"$1"],[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/(p)eople$/i,"$1erson"],[/s$/i,""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(b,a){this.singulars.unshift([b,a])},plural:function(b,a){this.plurals.unshift([b,a])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return-1!=Ext.Array.indexOf(this.uncountable,a)},pluralize:function(a){if(this.isTransnumeral(a))return a;var d,b,c,e=this.plurals,f=e.length;for(c=0;c<f;c++)if((b=(d=e[c])[0])==a||b.test&&b.test(a))return a.replace(b,d[1]);return a},singularize:function(a){if(this.isTransnumeral(a))return a;var d,b,c,e=this.singulars,f=e.length;for(c=0;c<f;c++)if((b=(d=e[c])[0])==a||b.test&&b.test(a))return a.replace(b,d[1]);return a},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(a){var c=parseInt(a,10),b=c%100;if(11<=b&&b<=13)return a+"th";switch(c%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd";default:return a+"th"}}},function(){var a,b={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"};for(a in b)b.hasOwnProperty(a)&&(this.plural(a,b[a]),this.singular(b[a],a))}),Ext.define("Ext.data.schema.Namer",{mixins:[Ext.mixin.Factoryable],alias:"namer.default",isNamer:!0,capitalize:function(a){return Ext.String.capitalize(a)},fieldRole:function(a){var b=a.match(this.endsWithIdRe,"");return b&&(a=a.substr(0,a.length-(b[1]||b[2]).length)),this.apply("uncapitalize",a)},idField:function(a){return this.apply("uncapitalize,singularize",a)+"Id"},instanceName:function(a){return this.apply("underscore",a)},multiRole:function(a){return this.apply("undotted,uncapitalize,pluralize",a)},pluralize:function(a){return Ext.util.Inflector.pluralize(a)},readerRoot:function(a){return this.apply("uncapitalize",a)},singularize:function(a){return Ext.util.Inflector.singularize(a)},storeName:function(a){return this.apply("underscore",a)},uncapitalize:function(a){return Ext.String.uncapitalize(a)},underscore:function(a){return"_"+a},uniRole:function(a){return this.apply("undotted,uncapitalize,singularize",a)},undotted:function(c){if(c.indexOf(".")<0)return c;for(var a=c.split("."),b=a.length;1<b--;)a[b]=this.apply("capitalize",a[b]);return a.join("")},getterName:function(a){var b=a.role;return a&&a.isMany?b:"get"+this.apply("capitalize",b)},inverseFieldRole:function(e,f,c,d){var a=this,b=a.apply(f?"uniRole":"multiRole",e),g=a.apply("pluralize",c),h=a.apply("undotted,pluralize",d);return g.toLowerCase()!==h.toLowerCase()&&(b=c+a.apply("capitalize",b)),b},manyToMany:function(c,e,d){var b=this,a=b.apply("undotted,capitalize,singularize",e)+b.apply("undotted,capitalize,pluralize",d);return c&&(a=b.apply("capitalize",c+a)),a},manyToOne:function(d,b,a,c){return this.apply("capitalize,singularize",a)+this.apply("capitalize",b)},matrixRole:function(a,c){var b=this.apply(a?"multiRole,capitalize":"multiRole",c);return a?a+b:b},oneToOne:function(d,b,a,c){return this.apply("undotted,capitalize,singularize",a)+this.apply("capitalize",b)},setterName:function(a){return"set"+this.apply("capitalize",a.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(b,c){var d,g,f,e=this,h=e.cache,i=h[c]||(h[c]={}),a=i[b];if(!a){if(b.indexOf(",")<0)a=e[b](c);else for(g=(f=b.split(",")).length,a=c,d=0;d<g;++d)a=e.apply(f[d],a);i[b]=a}return a}}),Ext.define("Ext.data.schema.Schema",{mixins:[Ext.mixin.Factoryable],alias:"schema.default",aliasPrefix:"schema.",isSchema:!0,type:"default",statics:{instances:{},get:function(a){var b,d,g=this.instances,c="default",e=a&&Ext.isString(a);if(a){if(a.isSchema)return a;c=e?a:a.id||c}return(b=g[c])?a&&!e&&(d=Ext.merge({},b.config),Ext.merge(d,a),b.setConfig(d),b.config=d):(g[c]=b=this.create(a),b.id=c),b},lookupEntity:function(b){var c,d,a=null,e=this.instances;if(b)if(b.isEntity)a=b.self;else if(Ext.isFunction(b))a=b;else if(Ext.isString(b)){if(!(a=Ext.ClassManager.get(b))||a.prototype&&a.prototype.isEntity||(a=null),!a)for(d in e)(c=e[d].getEntity(b))&&(a&&Ext.raise('Ambiguous entity name "'+b+'". Defined by schema "'+a.schema.type+'" and "'+d+'"'),a=c);a||Ext.raise('No such Entity "'+b+'".')}return a}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(c,b){var a=b.alias;a&&!b.type&&(Ext.isString(a)||(a=a[0]),c.prototype.type=a.substring(this.prototype.aliasPrefix.length))},constructor:function(a){this.initConfig(a),this.clear()},applyDefaultIdentifier:function(a){return a&&Ext.Factory.dataIdentifier(a)},applyNamer:function(b){var a=Ext.data.schema.Namer.create(b);return a.schema=this,a},applyNamespace:function(a){if(a){var b=a.length-1;"."!==a.charAt(b)&&(a+=".")}return a},applyProxy:function(a){return Ext.util.ObjectTemplate.create(a)},eachAssociation:function(d,c){var a,b=this.associations;for(a in b)if(b.hasOwnProperty(a)&&!1===d.call(c,a,b[a]))break},eachEntity:function(d,c){var a,b=this.entities;for(a in b)if(b.hasOwnProperty(a)&&!1===d.call(c,a,b[a].cls))break},getAssociation:function(b){return this.associations[b]||null},getEntity:function(b){var a=this.entityClasses[b]||this.entities[b];return a&&a.cls||null},getEntityName:function(c){var b,a,d=this.getNamespace();if(a="string"==typeof c?c:c.$className||null){if(d&&(b=d.length,a.substring(0,b)!==d))return a;b&&(a=a.substring(b))}return a},hasAssociations:function(a){return a=a.entityName||a,!!this.associationEntityMap[a]},hasEntity:function(b){var a=this.getEntityName(b);return!(!this.entities[a]&&!this.entityClasses[a])},addMatrix:function(n,k,l,j,i){var d,f,e,a=this,h=a.getNamer(),m=a.associations,g=a.entities,c=j.type,b=i.type,p=j.field||h.apply("idField",c),o=i.field||h.apply("idField",b),r=j.role||h.matrixRole(l,c),q=i.role||h.matrixRole(l,b);f=g[c]||(g[c]={cls:null,name:c,associations:{}}),e=g[b]||(g[b]={cls:null,name:b,associations:{}}),++a.assocCount,m[k]=d=new Ext.data.schema.ManyToMany({name:k,schema:a,definedBy:n,left:{cls:f.cls,type:c,role:r,field:p,associationKey:j.associationKey},right:{cls:e.cls,type:b,role:q,field:o,associationKey:i.associationKey}}),f.associations[d.right.role]=d.right,e.associations[d.left.role]=d.left,f.cls&&(a.associationEntityMap[f.cls.entityName]=!0),e.cls&&(a.associationEntityMap[e.cls.entityName]=!0),a.decorateModel(d)},addReference:function(g,f,b,m){var i,e=this,j=e.getNamer(),o=e.entities,s=e.associations,k=g.entityName,a=b.association,t=!!b.legacy,q=b.child,p=b.parent,c=b.role,d=b.type||p||q,l=b.inverse,n=Ext.isString(l)?{role:l}:l,h=n&&n.role;c=c||(t?j.apply("uncapitalize",d):j.apply("fieldRole",f.name)),h=h||j.inverseFieldRole(k,m,c,d),a=a||(m?j.oneToOne(g,h,d,c):j.manyToOne(g,h,d,c)),i=o[d]||(o[d]={cls:null,name:d,associations:{}}),a=new(m?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne)({name:a,owner:q?"left":p?"right":null,definedBy:g,schema:e,field:f,nullable:!f||!!f.allowBlank,legacy:b.legacy,left:{cls:g,type:k,role:h,extra:n},right:{cls:i.cls,type:d,role:c,extra:b}}),g.associations[c]=a.right,i.associations[h]=a.left,f&&(f.reference=a.right,g.references.push(f)),++e.assocCount,e.associationEntityMap[k]=!0,i.cls&&(e.associationEntityMap[i.cls.entityName]=!0),(s[a.name]=a).right.cls&&e.decorateModel(a)},privates:{addEntity:function(a){var d,g,f,k,h,c=this,i=c.entities,e=a.entityName,b=i[e],j=a.fields;if(b)for(h in d=b.associations)d[h].inverse.cls=a,c.associationEntityMap[e]=!0,c.decorateModel(d[h].association);else i[e]=b={name:e,associations:{}};for((b.cls=a).prototype.associations=a.associations=b.associations,c.entityClasses[a.$className]=b,++c.entityCount,f=0,k=j.length;f<k;++f)(g=j[f]).reference&&c.addReferenceDescr(a,g)},addMatrices:function(c,a){var b,f,d,e=this;if(Ext.isString(a))e.addMatrixDescr(c,null,a);else if(a[0])for(b=0,f=a.length;b<f;++b)e.addMatrixDescr(c,null,a[b]);else for(d in a)e.addMatrixDescr(c,d,a[d])},addMatrixDescr:function(i,f,a){var j,g,h=this,d=i.entityName,k=h.associations,e=h.getNamer(),c=a.left,b=a.right;Ext.isString(a)?b="#"===a.charAt(0)?(c={type:d},{type:a.substring(1)}):"#"===a.charAt(j=a.length-1)?(c={type:a.substring(0,j)},{type:d}):e.apply("multiRole",d)<e.apply("multiRole",a)?(c={type:d},{type:a}):(c={type:a},{type:d}):(g=a.relation,c||!b&&e.apply("multiRole",d)<e.apply("multiRole",a.type)?(c=c&&!0!==c?Ext.apply({type:d},c):{type:d},b=a):(b=b&&!0!==b?Ext.apply({type:d},b):{type:d},c=a)),(f=f||e.manyToMany(g,c.type,b.type))in k||h.addMatrix(i,f,g,c,b)},addReferenceDescr:function(c,b){var d=this,a=b.$reference;(a=Ext.isString(a)?{type:a}:Ext.apply({},a)).legacy?a.single?d.addLegacySingle(c,a):d.addLegacyHasMany(c,a):d.addReference(c,b,a,b.unique)},addPending:function(b,c,d,e){var a=this.pending;a[b]||(a[b]=[]),a[b].push([c,d,e])},addLegacyBelongsTo:function(a,b){this.addLegacySingle(a,b)},addLegacyHasOne:function(a,b){this.addLegacySingle(a,b)},addLegacySingle:function(c,a){var d,e,b;(a=this.constructLegacyAssociation(c,a)).single=!0,e=a.type,d=a.foreignKey||e.toLowerCase()+"_id",(b=c.getField(d))&&(b.$reference=a),this.addReference(c,b,a,!0)},addLegacyHasMany:function(g,a){var i,b,c,e,k,d,j=this,l=j.entities,h=j.pending,f=a.associationKey;(e=l[b=(a=this.constructLegacyAssociation(g,a)).type])&&e.cls?(a.type=g.entityName,k=a.foreignKey||a.type.toLowerCase()+"_id",c=(i=e.cls).getField(k),a.inverse=a||{},((d=a.name)||f)&&(d&&(a.inverse.role=d),f&&(a.inverse.associationKey=f)),c&&(c.$reference=a),j.addReference(i,c,a,!1)):(h[b]||(h[b]=[]),h[b].push([g,a]))},constructLegacyAssociation:function(c,a){Ext.isString(a)&&(a={model:a}),a.legacy=!0,a.type=this.getEntityName(a.model);var b=a.associatedName||a.name;return b&&(a.role=b),a},afterLegacyAssociations:function(f){var a,e,c=this.pending,d=f.entityName,b=c[d];if(b){for(a=0,e=b.length;a<e;++a)this.addLegacyHasMany.apply(this,b[a]);delete c[d]}},clear:function(c){var a=this,b=a.timer;delete a.setConfig,b&&(window.clearTimeout(b),a.timer=null),a.associations={},a.associationEntityMap={},a.entities={},a.entityClasses={},a.pending={},a.assocCount=a.entityCount=0,c&&a.setNamespace(null)},constructProxy:function(c){var b=this,a=Ext.Object.chain(c),d=b.getProxy();return a.schema=b,a.prefix=b.getUrlPrefix(),d.apply(a)},applyDecoration:function(a){var b,c,d,f=a.inverse.cls,e=this.getNamer();f&&!a.decorated&&(a.decorated=!0,d=f.prototype,(b=a.getterName)||(a.getterName=b=e.getterName(a)),d[b]=a.createGetter(),a.createSetter&&((c=a.setterName)||(a.setterName=c=e.setterName(a)),d[c]=a.createSetter()))},decorateModel:function(a){this.applyDecoration(a.left),this.applyDecoration(a.right)},processKeyChecks:function(g){var f,c,d,a=this,b=a.keyCheckQueue,e=a.timer;if(e&&(window.clearTimeout(e),a.timer=null),b)do{for(b=a.keyCheckQueue,a.keyCheckQueue=[],c=0,f=b.length;c<f;++c)(d=b[c]).role.checkKeyForDrop(d.record)}while(g&&a.keyCheckQueue.length)},queueKeyCheck:function(d,e){var a=this,b=a.keyCheckQueue,c=a.timer;b||(a.keyCheckQueue=b=[]),b.push({record:d,role:e}),c||(a.timer=c=Ext.Function.defer(a.processKeyChecks,a.getKeyCheckDelay(),a))},rankEntities:function(){var c,a,d=this,e=d.entities,b=Ext.Object.getKeys(e),f=b.length;for(d.nextRank=1,b.sort(),a=0;a<f;++a)(c=e[b[a]].cls).rank||d.rankEntity(c)},rankEntity:function(d){var b,a,e,c=d.associations;for(e in c)!(a=c[e]).left&&a.association.field&&((b=a.cls).rank||this.rankEntity(b));d.rank=this.nextRank++}}}),Ext.define("Ext.data.AbstractStore",{mixins:[Ext.mixin.Observable,Ext.mixin.Factoryable],factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:!1,$configStrict:!1,config:{filters:null,autoDestroy:void 0,storeId:null,statefulFilters:!1,sorters:null,remoteSort:{lazy:!0,$value:!1},remoteFilter:{lazy:!0,$value:!1},groupField:void 0,groupDir:"ASC",grouper:null,pageSize:25},currentPage:1,loading:!1,isStore:!0,updating:0,constructor:function(c){var b,a=this;a.isInitializing=!0,a.mixins.observable.constructor.call(a,c),a.isInitializing=!1,!(b=a.getStoreId())&&c&&c.id&&a.setStoreId(b=c.id),b&&Ext.data.StoreManager.register(a)},getCount:function(){return this.getData().getCount()},rangeCached:function(a,b){return this.getData().getCount()>=Math.max(a,b)},find:function(g,h,d,e,b,c){var a=!e,f=!(!a||!c);return this.getData().findIndex(g,h,d,a,f,!b)},findRecord:function(){var a=this,b=a.find.apply(a,arguments);return-1!==b?a.getAt(b):null},findExact:function(a,c,b){return this.getData().findIndexBy(function(b){return b.isEqual(b.get(a),c)},this,b)},findBy:function(c,a,b){return this.getData().findIndexBy(c,a,b)},getAt:function(a){return this.getData().getAt(a)||null},getRange:function(d,b,a){var c=this.getData().getRange(d,Ext.isNumber(b)?b+1:b);return a&&a.callback&&a.callback.call(a.scope||this,c,d,b,a),c},getFilters:function(b){var a=this.callParent();return a||!1===b||(this.setFilters([]),a=this.callParent()),a},applyFilters:function(c,a){var b;return a||(a=this.createFiltersCollection(),b=!0),a.add(c),b&&this.onRemoteFilterSet(a,this.getRemoteFilter()),a},getSorters:function(b){var a=this.callParent();return a||!1===b||(this.setSorters([]),a=this.callParent()),a},applySorters:function(c,a){var b;return a||(a=this.createSortersCollection(),b=!0),a.add(c),b&&this.onRemoteSortSet(a,this.getRemoteSort()),a},filter:function(a,c,b){Ext.isString(a)&&(a={property:a,value:c}),this.suppressNextFilter=!!b,this.getFilters().add(a),this.suppressNextFilter=!1},removeFilter:function(a,d){var b=this,c=b.getFilters();b.suppressNextFilter=!!d,a instanceof Ext.util.Filter?c.remove(a):c.removeByKey(a),b.suppressNextFilter=!1},updateRemoteSort:function(a){this.onRemoteSortSet(this.getSorters(!1),a)},updateRemoteFilter:function(a){this.onRemoteFilterSet(this.getFilters(!1),a)},addFilter:function(b,a){this.suppressNextFilter=!!a,this.getFilters().add(b),this.suppressNextFilter=!1},filterBy:function(b,a){this.getFilters().add({filterFn:b,scope:a||this})},clearFilter:function(c){var b=this,a=b.getFilters(!1);a&&0!==a.getCount()&&(b.suppressNextFilter=!!c,a.removeAll(),b.suppressNextFilter=!1)},isFiltered:function(){return 0<this.getFilters().getCount()},isSorted:function(){var a=this.getSorters(!1);return!!(a&&0<a.length)||this.isGrouped()},addFieldTransform:function(b){if(!b.getTransform()){var c,a,e=b.getProperty(),d=this.getModel();d&&(a=(c=d.getField(e))?c.getSortType():null),a&&a!==Ext.identityFn&&b.setTransform(a)}},beginUpdate:function(){this.updating++||this.fireEvent("beginupdate")},endUpdate:function(){this.updating&&!--this.updating&&(this.fireEvent("endupdate"),this.onEndUpdate())},getState:function(){var a,d,b,c=this,e=[],g=c.getFilters(),f=c.getGrouper();return c.getSorters().each(function(a){e[e.length]=a.getState(),d=!0}),c.statefulFilters&&c.saveStatefulFilters&&(d=!0,a=[],g.each(function(b){a[a.length]=b.getState()})),f&&(d=!0),d&&(b={},e.length&&(b.sorters=e),a&&(b.filters=a),f&&(b.grouper=f.getState())),b},applyState:function(b){var a=this,e=b.sorters,c=b.filters,d=b.grouper;e&&a.getSorters().replaceAll(e),c&&(a.saveStatefulFilters=!0,a.getFilters().replaceAll(c)),d&&a.setGrouper(d)},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var a=this;a.getStoreId()&&Ext.data.StoreManager.unregister(a),a.callParent(),a.onDestroy()},sort:function(c,b,d){var a=this;0===arguments.length?a.getRemoteSort()?a.load():a.forceLocalSort():a.getSorters().addSort(c,b,d)},onBeforeCollectionSort:function(b,a){a&&this.fireEvent("beforesort",this,a.getRange())},onSorterEndUpdate:function(){var b,a=this;b=a.getSorters(!1),!a.settingGroups&&b&&((b=b.getRange()).length?a.getRemoteSort()?a.load({callback:function(){a.fireEvent("sort",a,b)}}):(a.fireEvent("datachanged",a),a.fireEvent("refresh",a),a.fireEvent("sort",a,b)):a.fireEvent("sort",a,b))},onFilterEndUpdate:function(){var a=this,b=a.suppressNextFilter;a.getRemoteFilter()?(a.currentPage=1,b||a.load()):b||(a.fireEvent("datachanged",a),a.fireEvent("refresh",a)),a.trackStateChanges&&(a.saveStatefulFilters=!0),a.fireEvent("filterchange",a,a.getFilters().getRange())},updateGroupField:function(a){a?this.setGrouper({property:a,direction:this.getGroupDir()}):this.setGrouper(null)},getGrouper:function(){return this.getData().getGrouper()},group:function(b,d){var a=this,c=a.getSorters(!1),e=b||c&&c.length;b&&"string"==typeof b&&(b={property:b,direction:d||a.getGroupDir()}),a.settingGroups=!0,a.getData().setGrouper(b),delete a.settingGroups,e?a.getRemoteSort()?a.load({scope:a,callback:a.fireGroupChange}):(a.fireEvent("datachanged",a),a.fireEvent("refresh",a),a.fireGroupChange()):a.fireGroupChange()},fireGroupChange:function(){this.destroyed||this.fireEvent("groupchange",this,this.getGrouper())},clearGrouping:function(){this.group(null)},getGroupField:function(){var a=this.getGrouper(),b="";return a&&(b=a.getProperty()),b},isGrouped:function(){return!!this.getGrouper()},applyGrouper:function(a){return this.group(a),this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(a,b){a&&a[b?"on":"un"]("endupdate",this.onFilterEndUpdate,this)},onRemoteSortSet:function(c,b){var a=this;c&&(c[b?"on":"un"]("endupdate",a.onSorterEndUpdate,a),a.getData()[b?"un":"on"]("beforesort",a.onBeforeCollectionSort,a))}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}}),Ext.define("Ext.data.Error",{isError:!0,$configPrefixed:!1,config:{field:null,message:""},constructor:function(a){this.initConfig(a),this.msg=this.message}}),Ext.define("Ext.data.ErrorCollection",{extend:Ext.util.MixedCollection,alternateClassName:"Ext.data.Errors",init:function(d){var g,a,c,i,f,j,e,b=this,h=d.fields,k=d.data;for(c=0,i=h.length;c<i;++c)j=k[e=(a=h[c]).name],a.validate&&!a.validate.$nullFn&&(g=b.length,f=a.validate(j,null,b,d),g===b.length&&!0!==f&&b.add(e,f));return b},add:function(b,f){var c,d=this,e=Ext.data.field.Field.defaultInvalidMessage,a=b;if(Ext.isString(b)?a=new Ext.data.Error({field:b,message:f||e}):(a.isError||(a=new Ext.data.Error({field:a.field||a.name,message:a.error||a.message||a.msg||e})),b=a.field),c=d.get(b)){if(Ext.isArray(c))return c.push(a),c;d.removeAtKey(b),(a=[c,a]).field=b,a=[a]}return d.callParent([a])},getKey:function(a){return a.field},isValid:function(){return 0===this.length},getByField:function(b){var a=this.get(b);return a&&!Ext.isArray(a)&&(a=[a]),a||[]}}),Ext.define("Ext.data.operation.Operation",{alternateClassName:"Ext.data.Operation",isOperation:!0,config:{synchronous:!1,url:"",params:void 0,callback:void 0,scope:void 0,resultSet:null,response:null,request:null,records:null,id:void 0,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:!1,running:!1,complete:!1,success:void 0,exception:!1,error:void 0,idPrefix:"ext-operation-",constructor:function(a){var b=a&&a.scope;this.initConfig(a),a&&(a.scope=b),b&&(this.setScope(b),this.initialConfig.scope=b),this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var b,a=this;return delete a.error,delete a.success,a.complete=a.exception=!1,a.setStarted(),a.request=b=a.doExecute(),b&&b.setOperation(a),b},doExecute:Ext.emptyFn,abort:function(){var a=this,b=a.request;a.running&&b&&(a.getProxy().abort(b),a.request=null)},process:function(c,e,d,b){var a=this;b=!1!==b,a.setResponse(d),a.setResultSet(c),c.getSuccess()?(a.doProcess(c,e,d),a.setSuccessful(b)):b&&a.setException(c.getMessage())},_commitSetOptions:{convert:!0,commit:!0},doProcess:function(l,n,m){var d,c,b,a,i=this._commitSetOptions,e=this.getRecords(),k=e.length,g=e[0].clientIdProperty,f=l.getRecords(),h=f?f.length:0;if(h&&g){for(d=Ext.Array.toValueMap(e,"id"),a=0;a<h;++a)(b=d[(c=f[a])[g]])&&(delete d[b.id],delete c[g],b.set(c,i));for(a in d)d[a].commit()}else for(a=0;a<k;++a)b=e[a],0!==h&&(c=f[a])?b.set(c,i):b.commit()},setStarted:function(){this.started=this.running=!0},setCompleted:function(){var a=this,b=a.getProxy();a.complete=!0,a.running=!1,a.triggerCallbacks(),b&&b.completeOperation(a)},setSuccessful:function(a){this.success=!0,a&&this.setCompleted()},setException:function(b){var a=this;a.exception=!0,a.success=a.running=!1,a.error=b,a.setCompleted()},triggerCallbacks:function(){var a=this,b=a.getInternalCallback();b&&(b.call(a.getInternalScope()||a,a),a.setInternalCallback(null),a.setInternalScope(null)),(b=a.getCallback())&&(b.call(a.getScope()||a,a.getRecords(),a,a.wasSuccessful()),a.setCallback(null),a.setScope(null))},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var a;return this._records||((a=this.getResultSet())?a.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&!0===this.success},allowWrite:function(){return!0}}),Ext.define("Ext.data.operation.Create",{extend:Ext.data.operation.Operation,alias:"data.operation.create",action:"create",isCreateOperation:!0,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}}),Ext.define("Ext.data.operation.Destroy",{extend:Ext.data.operation.Operation,alias:"data.operation.destroy",action:"destroy",isDestroyOperation:!0,order:30,foreignKeyDirection:-1,doProcess:function(){var a,b=this.getRecords(),c=b.length;for(a=0;a<c;++a)b[a].setErased()},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(a,e){var b={};return b[a.idField[this.getNameProperty()||"name"]]=a.id,b}}),Ext.define("Ext.data.operation.Read",{extend:Ext.data.operation.Operation,alias:"data.operation.read",action:"read",isReadOperation:!0,config:{filters:void 0,sorters:void 0,grouper:void 0,start:void 0,limit:void 0,page:void 0,addRecords:!1},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return!1}}),Ext.define("Ext.data.operation.Update",{extend:Ext.data.operation.Operation,alias:"data.operation.update",action:"update",isUpdateOperation:!0,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}}),Ext.define("Ext.data.SortTypes",{singleton:!0,none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return null!=a?String(a).replace(this.stripTagsRe,""):"\0"},asUCText:function(a){return null!=a?String(a).toUpperCase().replace(this.stripTagsRe,""):"\0"},asUCString:function(a){return null!=a?String(a).toUpperCase():"\0"},asDate:function(a){return a?Ext.isDate(a)?a.getTime():Date.parse(String(a)):0},asFloat:function(b){var a=parseFloat(String(b).replace(this.stripCommasRe,""));return isNaN(a)?0:a},asInt:function(b){var a=parseInt(String(b).replace(this.stripCommasRe,""),10);return isNaN(a)?0:a}}),Ext.define("Ext.data.validator.Validator",{mixins:[Ext.mixin.Factoryable],alias:"data.validator.base",isValidator:!0,type:"base",statics:{all:{},register:function(a,c){var b=this.all;b[a.toUpperCase()]=b[a.toLowerCase()]=b[a]=c.prototype}},onClassExtended:function(b,a){a.type&&Ext.data.validator.Validator.register(a.type,b)},constructor:function(a){"function"==typeof a?(this.fnOnly=!0,this.validate=a):this.initConfig(a)},validate:function(){return!0},clone:function(){var a=this;return a.fnOnly?new Ext.data.validator.Validator(a.validate):new a.self(a.getCurrentConfig())}},function(){this.register(this.prototype.type,this)}),Ext.define("Ext.data.field.Field",{mixins:[Ext.mixin.Factoryable],alternateClassName:"Ext.data.Field",alias:"data.field.auto",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:!0,isField:!0,allowBlank:!0,allowNull:!1,critical:!1,defaultInvalidMessage:"This field is invalid",defaultValue:void 0,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:void 0,persist:null,reference:null,unique:!1,rank:null,stripRe:/[\$,%]/g,calculated:!1,evil:!1,identifier:!1,onClassExtended:function(f,d){var b=d.sortType,c=f.prototype,e=c.validators,a=d.validators;b&&Ext.isString(b)&&(c.sortType=Ext.data.SortTypes[b]),a&&(Ext.isArray(a)||(a=[a]),delete d.validators,e&&(a=e.concat(a)),c.validators=a)},argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(d){var c,l,f,h,b,j,e,m,k,i,g,a=this,n=a.calculateRe;if(d&&(Ext.isString(d)?a.name=d:((g=d.validators)&&(delete d.validators,a.instanceValidators=g),Ext.apply(a,d))),a.allowNull||(a.allowNull=!!a.reference),c=a.calculate,b=a.depends,c&&(a.convert=a.doCalculate,!b)){if(!(b=c.$depends))for(j={},k=c.toString(),c.$depends=b=[],m=(e=a.argumentNamesRe.exec(k))?e[1]:"data";e=n.exec(k);)m!==e[1]||j[i=e[2]]||(j[i]=1,b.push(i));a.depends=b}f=a.defaultValue,a.convert&&(a.calculated=l=1<a.convert.length,a.evil=l&&!b),null===a.persist&&(a.persist=!c),h=a.sortType,a.sortType?Ext.isString(h)&&(a.sortType=Ext.data.SortTypes[h]):a.sortType=Ext.data.SortTypes.none,b&&"string"==typeof b&&(a.depends=[b]),a.cloneDefaultValue=void 0!==f&&(Ext.isDate(f)||Ext.isArray(f)||Ext.isObject(f))},setModelValidators:function(a){this._validators=null,this.modelValidators=a},compileValidators:function(){var a=this;a._validators=[],a.constructValidators(a.validators),a.constructValidators(a.modelValidators),a.constructValidators(a.instanceValidators)},constructValidators:function(a){if(a){a instanceof Array||(a=[a]);var c,b,d=a.length,e=this._validators;for(c=0;c<d;++c)(b=a[c]).fn&&(b=b.fn),e.push(Ext.Factory.dataValidator(b))}},collate:function(d,e){var c=this,a=d,b=e;return c.sortType&&(a=c.sortType(a),b=c.sortType(b)),a===b?0:a<b?-1:1},compare:function(a,b){return a===b?0:a<b?-1:1},isEqual:function(a,b){return 0===this.compare(a,b)},convert:null,serialize:null,validate:function(k,f,h,j){var a,e,i,d,c=this,b="";for(c._validators||c.compileValidators(),d=0,i=(e=c._validators).length;d<i;++d)if(!0!==(a=e[d].validate(k,j)))if(a=a||c.defaultInvalidMessage,h)h.add(c.name,a),b=b||a;else{if(!f){b=a;break}b&&(b+=f),b+=a}return b||!0},doCalculate:function(b,a){return a?this.calculate(a.data):b},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var a=this.mapping;return!(!a&&0!==a)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getType:function(){return"auto"},deprecated:{5.1:{methods:{getSortDir:function(){return this.sortDir}}}}}),Ext.define("Ext.data.field.Boolean",{extend:Ext.data.field.Field,alias:["data.field.bool","data.field.boolean"],isBooleanField:!0,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(a){return"boolean"==typeof a?a:!this.allowNull||null!=a&&""!==a?this.trueRe.test(String(a)):null},getType:function(){return"bool"}}),Ext.define("Ext.data.field.Date",{extend:Ext.data.field.Field,alias:"data.field.date",sortType:"asDate",isDateField:!0,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(d,e){var a,b=d instanceof Date,c=e instanceof Date;return a=c&&b?0===(a=d.getTime()-e.getTime())?0:a<0?-1:1:b==c?0:b?1:-1},convert:function(a){if(!a)return null;if(a instanceof Date)return a;var b,c=this.dateReadFormat||this.dateFormat;return c?Ext.Date.parse(a,c):(b=Date.parse(a))?new Date(b):null},serialize:function(b){var a,c=null;return Ext.isDate(b)&&(c=(a=this.getDateWriteFormat())?Ext.Date.format(b,a):b),c},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var a=this;return a.hasOwnProperty("dateWriteFormat")?a.dateWriteFormat:a.hasOwnProperty("dateFormat")?a.dateFormat:a.dateWriteFormat||a.dateFormat||"timestamp"},getType:function(){return"date"}}),Ext.define("Ext.data.field.Integer",{extend:Ext.data.field.Field,alias:["data.field.int","data.field.integer"],isNumeric:!0,isIntegerField:!0,numericType:"int",convert:function(a){if("number"==typeof a)return this.getNumber(a);var b,d=null==a||""===a,c=this.allowNull;return d?b=c?null:0:(b=this.parse(a),c&&isNaN(b)&&(b=null)),b},getNumber:function(a){return parseInt(a,10)},getType:function(){return this.numericType},parse:function(a){return parseInt(String(a).replace(this.stripRe,""),10)},sortType:function(a){return null==a&&(a=1/0),a}}),Ext.define("Ext.data.field.Number",{extend:Ext.data.field.Integer,alias:["data.field.float","data.field.number"],isIntegerField:!1,isNumberField:!0,numericType:"float",getNumber:Ext.identityFn,parse:function(a){return parseFloat(String(a).replace(this.stripRe,""))}}),Ext.define("Ext.data.field.String",{extend:Ext.data.field.Field,alias:"data.field.string",sortType:"asUCString",isStringField:!0,convert:function(a){var b=this.allowNull?null:"";return null==a?b:String(a)},getType:function(){return"string"}}),Ext.define("Ext.data.identifier.Generator",{abstract:!0,mixins:[Ext.mixin.Factoryable],alias:"data.identifier.default",factoryConfig:{defaultType:"sequential"},isGenerator:!0,config:{id:null},constructor:function(a){var b,c=this;c.initConfig(a),(b=c.getId())&&((a&&a.cache||Ext.data.identifier.Generator.all)[b]=c)},privates:{clone:function(b){var a=this.getInitialConfig();return a=b?Ext.apply({},b,a):a,new this.self(a)},statics:{all:{}}}},function(){var b=this,a=Ext.Factory,c=a.dataIdentifier;a.dataIdentifier=function(a){var d=Ext.isString(a)?a:a&&a.id;return d&&(a&&a.cache||b.all)[d]||c(a)}}),Ext.define("Ext.data.identifier.Sequential",{extend:Ext.data.identifier.Generator,alias:"data.identifier.sequential",config:{increment:1,prefix:null,seed:1},generate:function(){var a=this,c=a._seed,b=a._prefix;return a._seed+=a._increment,null!==b?b+c:c}}),Ext.define("Ext.data.Model",{alternateClassName:"Ext.data.Record",isEntity:!0,isModel:!0,validIdRe:null,erasing:!1,observableType:"record",constructor:function(b,e){var j,d,h,m,o,f,i,a=this,c=a.self,g=c.identifier,n=Ext.data.Model,k=n.identifier,l=a.idField.name;if(a.data=a.data=b=b||{},a.session=e||null,a.internalId=m=k.generate(),(j=b)instanceof Array)for(a.data=b={},i=a.getFields(),o=Math.min(i.length,j.length),f=0;f<o;++f)b[i[f].name]=j[f];(h=c.initializeFn)||(c.initializeFn=h=n.makeInitializeFn(c)),h.$nullFn||c.initializeFn(a),(a.id=d=b[l])||0===d||(d=e?(g=e.getIdentifier(c)).generate():k===g?m:g.generate(),b[l]=a.id=d,a.phantom=!0),e&&e.add(a),a.init&&Ext.isFunction(a.init)&&a.init()},editing:!1,dirty:!1,session:null,dropped:!1,erased:!1,clientIdProperty:null,evented:!1,phantom:!1,idProperty:"id",manyToMany:null,identifier:null,previousValues:void 0,proxy:void 0,schema:"default",versionProperty:null,generation:1,validationSeparator:null,convertOnSet:!0,beginEdit:function(){var a=this,c=a.modified,b=a.previousValues;a.editing||(a.editing=!0,a.editMemento={dirty:a.dirty,data:Ext.apply({},a.data),generation:a.generation,modified:c&&Ext.apply({},c),previousValues:b&&Ext.apply({},b)})},cancelEdit:function(){var a=this,b=a.editMemento;b&&(a.editing=!1,Ext.apply(a,b),a.editMemento=null)},endEdit:function(d,b){var a=this,c=a.editMemento;c&&(a.editing=!1,a.editMemento=null,a.previousValues=c.previousValues,d||(b=b||a.getModifiedFieldNames(c.data),(a.dirty||b&&b.length)&&a.callJoined("afterEdit",[b])))},getField:function(a){return this.self.getField(a)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(b,a){this.set(this.idProperty,b,a)},getPrevious:function(b){var a=this.previousValues;return a&&a[b]},isModified:function(b){var a=this.modified;return!(!a||!a.hasOwnProperty(b))},getModified:function(a){var b;return this.isModified(a)&&(b=this.modified[a]),b},get:function(a){return this.data[a]},_singleProp:{},_rejectOptions:{convert:!1,silent:!0},set:function(i,y,I){var j,b,x,F,c,D,o,u,p,v,q,s,l,m,h,g,a=this,E=a.self,t=a.data,f=a.modified,z=a.previousValues,r=a.session,n=Ext.isString(i),e=n?I:y,w=e?!1!==e.convert:a.convertOnSet,H=a.fieldsMap,B=e&&e.silent,A=e&&e.commit,G=!(e&&!1===e.refs)&&r,C=!(e&&!1===e.dirty&&!A),k=null,d=0;for(n?(g=a._singleProp)[i]=y:g=i,(l=E.rankedFields)||(l=E.rankFields()),q=l.length;;){for(c in g)if(h=g[c],j=t[c],o=a,m=(b=H[c])?(w&&b.convert&&(h=b.convert(h,a)),(o=b).reference):null,!o.isEqual(j,h)){for(t[c]=h,(k=k||[]).push(c),(z||(a.previousValues=z={}))[c]=j,m&&m.cls&&(G&&r.updateReference(a,b,h,j),m.onValueChange(a,r,h,j)),v=(p=b&&b.dependents)&&p.length;0<v--;)(u=p[v]).dirty=!0,d=d?Math.min(d,u.rank):u.rank;b&&!b.persist||(f&&f.hasOwnProperty(c)?C&&!o.isEqual(f[c],h)||(delete f[c],a.dirty=-1):C&&(f||(a.modified=f={}),a.dirty=!0,f[c]=j)),c===a.idField.name&&(x=!0,D=j,s=h)}if(!d)break;for((b=l[d-1]).dirty=!1,n?delete g[i]:(g=a._singleProp,n=!0),g[i=b.name]=t[i],w=!0;d<q&&!l[d].dirty;++d);d<q?++d:d=0}if(a.dirty<0)for(F in a.dirty=!1,f)if(f.hasOwnProperty(F)){a.dirty=!0;break}return n&&delete g[i],++a.generation,x&&(a.id=s,a.callJoined("onIdChanged",[D,s])),A?a.commit(B,k):B||a.editing||!k||a.callJoined("afterEdit",[k]),k},reject:function(c){var a=this,b=a.modified;b&&a.set(b,a._rejectOptions),a.dropped=!1,a.clearState(),c||a.callJoined("afterReject")},commit:function(f,e){var c,a=this,b=a.versionProperty,d=a.data;a.clearState(),!b||a.phantom||isNaN(d[b])||++d[b],a.phantom=!1,a.dropped&&(a.erased=c=!0),f||(c?a.callJoined("afterErase"):a.callJoined("afterCommit",[e]))},clearState:function(){var a=this;a.dirty=a.editing=!1,a.editMemento=a.modified=null},drop:function(d){var c,a=this,b=a.associations,e=a.session;if(!a.erased&&!a.dropped){if(a.dropped=!0,b&&!1!==d)for(c in b)b[c].onDrop(a,e);a.callJoined("afterDrop"),a.phantom&&a.setErased()}},join:function(b){var c=this,a=c.joined;a?a.length?Ext.Array.include(a,b):a[0]=b:a=c.joined=[b],b.isStore&&!c.store&&(c.store=b)},unjoin:function(b){var e,f=this,a=f.joined,d=a&&a.length,c=f.store;if(1===d&&a[0]===b?a.length=0:d&&Ext.Array.remove(a,b),c===b){if(c=null,a)for(e=0,d=a.length;e<d;++e)if((b=a[e]).isStore){c=b;break}f.store=c}},clone:function(d){var a=this,c=a.modified,b=a.copy(a.id,d);return c&&(b.modified=Ext.apply({},c)),b.dirty=a.dirty,b.dropped=a.dropped,b.phantom=a.phantom,b},copy:function(a,e){var c=this,b=Ext.apply({},c.data),d=c.idProperty,f=c.self;return a||0===a?b[d]=a:null===a&&delete b[d],new f(b,e)},getProxy:function(){return this.self.getProxy()},getValidation:function(c){var b=this,a=b.validation;return a||(b.validation=a=new Ext.data.Validation,a.attach(b)),(!0===c||!1!==c&&a.syncGeneration!==b.generation)&&a.refresh(c),a},validate:function(){return(new Ext.data.ErrorCollection).init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var a=this.$className.split(".");return a[a.length-1].toLowerCase()+"/"+this.getId()},erase:function(b){var a=this;return a.erasing=!0,a.drop(),a.erasing=!1,a.save(b)},setErased:function(){this.erased=!0,this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var a=this.self,b=a.criticalFields;return b||(a.rankFields(),b=a.criticalFields),b},getAssociatedData:function(g,a){var i,j,b,m,f,o,e,l,d,h,k,c=this,n=c.associations;for(l in g=g||{},c.$gathering=1,a=a&&Ext.Object.chain(a),n)if((b=n[l].getAssociatedItem(c))&&!b.$gathering){if(b.isStore){for(b.$gathering=1,o=(m=b.getData().items).length,f=[],j=0;j<o;++j)i=!(e=m[j]).$gathering,e.$gathering=1,d=a?(void 0===(k=a.associated)?(a.associated=i,h=!0):i||(h=!(a.associated=!1)),a):i?c._getAssociatedOptions:c._getNotAssociatedOptions,f.push(e.getData(d)),h&&(a.associated=k,h=!1),delete e.$gathering;delete b.$gathering}else d=a||c._getAssociatedOptions,a&&void 0===a.associated&&(d.associated=!0),f=b.getData(d);g[l]=f}return delete c.$gathering,g},getData:function(m){var g,b,i,d,c,a=this,f={},e=!0===m?a._getAssociatedOptions:m||f,h=a.data,n=e.associated,k=e.changes,p=k&&e.critical,l=k?a.modified:h,o=a.fieldsMap,q=e.persist,j=e.serialize;if(l)for(d in l){if(c=h[d],b=o[d]){if(q&&!b.persist)continue;j&&b.serialize&&(c=b.serialize(c,a))}f[d]=c}if(p)for(i=(g=a.self.criticalFields||a.getCriticalFields()).length;0<i--;)(d=(b=g[i]).name)in f||(c=h[d],j&&b.serialize&&(c=b.serialize(c,a)),f[d]=c);return n&&a.getAssociatedData(f,e),f},getTransientFields:function(){var a=this.self,b=a.transientFields;return b||(a.rankFields(),b=a.transientFields),b},isLoading:function(){return!!this.loadOperation},abort:function(){var a=this.loadOperation;a&&a.abort()},load:function(a){a=Ext.apply({},a);var b=this,d=a.scope||b,g=b.getProxy(),f=a.callback,c=b.loadOperation,h=b.getId();return c?(c.extraCalls||(c.extraCalls=[])).push(a):(a.id=h,a.recordCreator=function(d,e,a){var c=b.session;return a&&(a.recordCreator=c?c.recordCreator:null),b.set(d,b._commitOptions),b},a.internalCallback=function(e){var g,k,h=e.wasSuccessful()&&0<e.getRecords().length,i=b.loadOperation.extraCalls,c=[b,e],j=[b,e,h];if(b.loadOperation=null,h?Ext.callback(a.success,d,c):Ext.callback(a.failure,d,c),Ext.callback(f,d,j),i)for(g=0,k=i.length;g<k;++g)a=i[g],h?Ext.callback(a.success,d,c):Ext.callback(a.failure,d,c),Ext.callback(a.callback,d,j);b.callJoined("afterLoad")},delete a.callback,b.loadOperation=c=g.createOperation("read",a),c.execute()),c},save:function(a){a=Ext.apply({},a);var c,b=this,f=b.phantom,e=b.dropped,h=e?"destroy":f?"create":"update",d=a.scope||b,g=a.callback,i=b.getProxy();return a.records=[b],a.internalCallback=function(e){var c=[b,e],f=e.wasSuccessful();f?Ext.callback(a.success,d,c):Ext.callback(a.failure,d,c),c.push(f),Ext.callback(g,d,c)},delete a.callback,c=i.createOperation(h,a),e&&f?(c.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet),b.setErased(),c.setSuccessful(!0)):c.execute(),c},inheritableStatics:{addFields:function(a){this.replaceFields(a)},replaceFields:function(k,i){var d,a,g,h,b,l,c=this,m=c.prototype,n=Ext.data.field.Field,f=c.fields,j=c.fieldsMap,e=c.fieldOrdinals;if(!0===i)f.length=0,c.fieldsMap=j={},c.fieldOrdinals=e={};else if(i){for(a=i.length;0<a--;)(b=i[a])in e&&(delete e[b],delete j[b]);for(a=0,h=f.length;a<h;++a)(b=(d=f[a]).name)in e?e[b]=a:(f.splice(a,1),--a,--h)}for(a=0,h=k?k.length:0;a<h;a++)(b=(d=k[a]).name)in e||(e[b]=l=f.length,f.push(d=n.create(d)),(j[b]=d).ordinal=l,d.definedBy=d.owner=this);c.idField=m.idField=g=j[m.idProperty],g.allowNull=g.critical=g.identifier=!0,g.defaultValue=null,c.initializeFn=c.rankedFields=c.transientFields=c.criticalFields=null},removeFields:function(a){this.replaceFields(null,a)},getIdFromData:function(b){var a=this.idField;return a.calculated?new this(b).id:b[a.name]},createWithId:function(c,b,e){var a=b;return!c&&0!==c||(a={},b&&Ext.apply(a,b),a[this.idField.name]=c),new this(a,e)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(a){return this.fieldsMap[a]||null},getProxy:function(){var c,b=this,a=b.proxy,d=b.defaultProxy;return a||(!(a=b.proxyConfig)&&d&&(a=d),a&&a.isProxy||("string"==typeof a&&(a={type:a}),c=b.schema.constructProxy(b),a=a?Ext.merge(c,a):c),a=b.setProxy(a)),a},setProxy:function(a){var c,b=this;return a&&(a.isProxy?(c=a.getModel())&&c!==b&&(a=a.clone()):a=Ext.Factory.proxy(a),a.setModel(b)),b.prototype.proxy=b.proxy=a},load:function(e,c,d){var a,b={};return b[this.prototype.idProperty]=e,(a=new this(b,d)).load(c),a}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(c,d){var a,b=this.stores,e=b.length;for(a=0;a<e;++a)c.call(d,b[a])},join:function(b){var a=this,d=a.stores,c=a.joined;c?c.push(b):c=a.joined=[b],b.isStore&&(a.store=a.store||b,(d=d||(a.stores=[])).push(b))},unjoin:function(b){var c=this,d=c.stores,a=c.joined;1===a.length?a.length=0:Ext.Array.remove(a,b),b.isStore&&(Ext.Array.remove(d,b),c.store=d[0]||null)}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:!0},_getChangesOptions:{changes:!0},_getAssociatedOptions:{associated:!0},_getNotAssociatedOptions:{associated:!1},copyFrom:function(c){var e,h,b,d,a=this,i=a.fields,k=i.length,g=[],f=0,l=a.idProperty;if(c){for(e=a.data,h=c.data;f<k;f++)(b=i[f].name)!==l&&(void 0===(d=h[b])||a.isEqual(e[b],d)||(e[b]=d,g.push(b)));a.phantom&&!c.phantom&&(a.beginEdit(),a.setId(c.getId()),a.endEdit(!0),a.commit(!0))}return g},callJoined:function(h,a){var g,i,b,e,f=this,d=f.joined,c=f.session;if(d||c){if(a?a.unshift(f):a=[f],d)for(g=0,i=d.length;g<i;++g)(e=d[g])&&(b=e[h])&&b.apply(e,a);(b=c&&c[h])&&b.apply(c,a)}},setSession:function(a){(this.session=a)&&a.add(this)},getModifiedFieldNames:function(f){var a,c=this,b=c.data,d=[],e=f||c.editMemento.data;for(a in b)b.hasOwnProperty(a)&&(c.isEqual(b[a],e[a],a)||d.push(a));return d},isEqual:function(b,c,a){var d;return a&&(d=a.isField?a:this.fieldsMap[a])?d.isEqual(b,c):b instanceof Date&&c instanceof Date?b.getTime()===c.getTime():b===c},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",defaultProxy:"memory",rankFields:function(){var e,a,b,d=this,g=d.prototype,h=d.fields,f=h.length,c=[],j=[],i=[];for(d.rankedFields=g.rankedFields=c,d.criticalFields=g.criticalFields=j,d.transientFields=g.transientFields=i,b=0;b<f;++b)(a=h[b]).critical&&j.push(a),a.persist||i.push(a),a.evil?(e=e||[]).push(a):a.depends||(c.push(a),a.rank=c.length);for(b=0;b<f;++b)(a=h[b]).rank||a.evil||d.topoAdd(a);if(e)for(b=0,f=e.length;b<f;++b)c.push(a=e[b]),a.rank=c.length;return c},topoAdd:function(b){var c,a,d=this,e=b.depends,g=e?e.length:0,f=d.rankedFields;for(c=0;c<g;++c)((a=d.fieldsMap[e[c]]).dependents||(a.dependents=[])).push(b),a.rank||d.topoAdd(a);f.push(b),b.rank=f.length},initFields:function(u,g,j){var d,a,b,n,k,c,m,i,o,s,t=Ext.data.field.Field,q=u.fields,e=[],h={},f={},r=j.fields,p=u.versionProperty||j.versionProperty,l=g.idProperty;if(g.fields=j.fields=e,g.fieldOrdinals=j.fieldOrdinals=h,g.fieldsMap=j.fieldsMap=f,g.references=j.references=[],r)for(b=0,n=r.length;b<n;++b)e[b]=a=Ext.Object.chain(r[b]),a.dependents=null,a.owner=g,h[k=a.name]=b,(f[k]=a).rank=null,a.generated&&(o=(i=a).name);if(q)for(delete u.fields,b=0,n=q.length;b<n;++b)(m=(a=q[b]).reference)&&"string"!=typeof m&&(m=Ext.merge({},m)),a.$reference=m,void 0===(c=h[k=(a=t.create(q[b])).name])&&(h[k]=c=e.length),f[k]=a,(e[c]=a).definedBy=a.owner=g,a.ordinal=c,k===l&&(s=a);if(d=f[l]){if(s&&i&&i.generated)for(Ext.Array.remove(e,i),delete f[o],delete h[o],f[l]=s,b=0,n=e.length;b<n;++b)a=e[b],e.ordinal=b,h[a.name]=b}else c=i&&i.generated?i.ordinal:e.length,delete f[o],delete h[o],d=new t(l),e[c]=d,h[l]=c,(f[l]=d).definedBy=g,d.ordinal=c,d.generated=!0;d.allowNull=d.critical=d.identifier=!0,d.defaultValue=null,g.idField=j.idField=d,p&&((a=f[p])||(c=e.length,a=new t({name:p,type:"int"}),e[c]=a,h[p]=c,(f[p]=a).definedBy=g,a.ordinal=c,a.generated=!0),a.defaultValue=1,a.critical=!0)},initValidators:function(j,n,m){var b,e,g,c,h,l,d,a,k,f,i=m.validators;if(i)for(e in b={},i)b[e]=Ext.Array.clone(i[e]);if(c=j.validators||j.validations){if(delete j.validators,b=b||{},Ext.isArray(c)){for(g={},h=0,l=c.length;h<l;++h)g[a=(f=c[h]).field]||(g[a]=[]),f=f.fn||f,g[a].push(f);c=g}for(a in c)d=c[a],Ext.isArray(d)||(d=[d]),k=b[a],b[a]?Ext.Array.push(k,d):b[a]=d}if(b)for(a in b)(e=n.getField(a))&&e.setModelValidators(b[a]);n.validators=m.validators=b},initAssociations:function(d,b,e){var a,c,j,f=b.associations,g=b.belongsTo,h=b.hasMany,i=b.hasOne,k=b.manyToMany;if(delete b.manyToMany,k&&d.addMatrices(e,k),delete b.associations,delete b.belongsTo,delete b.hasMany,delete b.hasOne,f)for(a=0,c=(f=Ext.isArray(f)?f:[f]).length;a<c;++a)switch((j=f[a]).type){case"belongsTo":d.addLegacyBelongsTo(e,j);break;case"hasMany":d.addLegacyHasMany(e,j);break;case"hasOne":d.addLegacyHasOne(e,j)}if(g)for(a=0,c=(g=Ext.isArray(g)?g:[g]).length;a<c;++a)d.addLegacyBelongsTo(e,g[a]);if(h)for(a=0,c=(h=Ext.isArray(h)?h:[h]).length;a<c;++a)d.addLegacyHasMany(e,h[a]);if(i)for(a=0,c=(i=Ext.isArray(i)?i:[i]).length;a<c;++a)d.addLegacyHasOne(e,i[a]);d.afterLegacyAssociations(e)},initIdentifier:function(d,e,f){var c,a=d.identifier||d.idgen,b=f.identifier||e.schema._defaultIdentifier;a?(delete d.identifier,delete d.idgen,a=Ext.Factory.dataIdentifier(a)):b&&(a=b.clone&&!b.getId()?b.clone():b.isGenerator?b:Ext.Factory.dataIdentifier(b)),e.identifier=f.identifier=a,a||(c=(c=e.entityName)||Ext.id(null,"extModel"),e.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:c+"-"}))},findValidator:function(f,g,d){var e,a,c,h=d.type||d,b=f[g];if(b)for(a=0,e=b.length;a<e;++a)if((c=b[a]).type===h)return c;return null},makeInitializeFn:function(o){var i,j,h,c,f,e,d,k,b,m,a=["var "],g=["\nreturn function (e) {\n    var data = e.data, v;\n"],p=[],n=0;for((e=o.rankedFields)||(e=o.rankFields()),b=0,m=e.length;b<m;++b)f=e[b],p[b]=d="f"+b,h=f.convert,b&&a.push(",  \n    "),a.push(d," = $fields["+b+"]"),((k=void 0!==f.defaultValue)||h)&&(c='data["'+f.name+'"]',++n,i=j="",f.cloneDefaultValue&&(i="Ext.clone(",j=")"),g.push("\n"),h&&k?g.push("    v = ",c,";\n    if (v !== undefined) {\n        v = ",d,".convert(v, e);\n    }\n    if (v === undefined) {\n        v = ",i,d,".defaultValue",j,";\n    }\n    ",c," = v;"):h?g.push("    v = ",d,".convert(",c,",e);\n    if (v !== undefined) {\n        ",c," = v;\n    }\n"):k&&g.push("    if (",c," === undefined) {\n        ",c," = ",i,d,".defaultValue",j,";\n    }\n"));return n?(a.push(";\n"),a.push.apply(a,g),a.push("}"),a=a.join(""),new Function("$fields","Ext",a)(e,Ext)):Ext.emptyFn}}}},function(){var d,a=this,b=a.prototype,c=Ext.data.schema.Schema;a.proxyConfig=b.proxy,delete b.proxy,a.fields=[],a.fieldsMap=b.fieldsMap={},a.schema=b.schema=c.get(b.schema),b.idField=new Ext.data.field.Field(b.idProperty),a.identifier=new Ext.data.identifier.Sequential,a.onExtended(function(b,e){var g,h,i,f=b.prototype,k=e.schema,j=f.superclass.self;b.idProperty=e.idProperty||f.idProperty,k?(delete e.schema,g=c.get(k)):(g=f.schema)||(g=d=d||c.get("default")),b.rankFields=a.rankFields,b.topoAdd=a.topoAdd,f.schema=b.schema=g,(h=e.entityName)||(f.entityName=h=g.getEntityName(b)),b.entityName=h,b.fieldExtractors={},a.initIdentifier(e,b,f),a.initFields(e,b,f),a.initValidators(e,b,f),b.fields.items=b.fields,h&&(g.addEntity(b),a.initAssociations(g,e,b)),(i=e.proxy)?delete e.proxy:j!==a&&(i=j.proxyConfig||j.proxy),b.proxyConfig=i})}),Ext.define("Ext.data.ResultSet",{isResultSet:!0,$configPrefixed:!1,config:{loaded:!0,count:null,total:null,success:!1,records:null,message:null},constructor:function(a){this.initConfig(a)},getCount:function(){var a,b=this.callParent();return b||(a=this.getRecords())&&(b=a.length),b}}),Ext.define("Ext.data.reader.Reader",{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],mixins:[Ext.mixin.Observable,Ext.mixin.Factoryable],alias:"reader.base",factoryConfig:{defaultType:null},config:{totalProperty:"total",successProperty:"success",rootProperty:"",messageProperty:"",typeProperty:"",implicitIncludes:!0,readRecordsOnFailure:!0,model:null,proxy:null,transform:null,keepRawData:null},isReader:!0,constructor:function(a){a&&a.hasOwnProperty("root")&&((a=Ext.apply({},a)).rootProperty=a.root,delete a.root);var b=this;b.duringInit=1,b.mixins.observable.constructor.call(b,a),--b.duringInit,b.buildExtractors()},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},applyTransform:function(a){return a?(Ext.isFunction(a)?a={fn:a}:a.charAt&&(a={fn:this[a]}),a.fn.bind(a.scope||this)):a},forceBuildExtractors:function(){this.duringInit||this.buildExtractors(!0)},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(b,d){var c,a;if(b)if(b.responseText){if((a=this.getResponseData(b))&&a.__$isError)return new Ext.data.ResultSet({total:0,count:0,records:[],success:!1,message:a.msg});c=this.readRecords(a,d)}else c=this.readRecords(b,d);return c||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(a){return{__$isError:!0,msg:a}},readRecords:function(b,l,f){var h,g,d,e,j,c,k,i,a=this,m=f&&f.recordsOnly,n=f&&f.asRoot;return(i=this.getTransform())&&(b=i(b)),a.buildExtractors(),a.getKeepRawData()&&(a.rawData=b),a.hasListeners.rawdata&&a.fireEventArgs("rawdata",[b]),b=a.getData(b),h=!0,g=0,d=[],a.getSuccessProperty()&&(!1!==(c=a.getSuccess(b))&&"false"!==c||(h=!1)),a.getMessageProperty()&&(k=a.getMessage(b)),(h||a.getReadRecordsOnFailure())&&((e=n||Ext.isArray(b)?b:a.getRoot(b))&&(j=e.length),a.getTotalProperty()&&(c=parseInt(a.getTotal(b),10),isNaN(c)||(j=c)),e&&(g=(d=a.extractData(e,l)).length)),m?d:new Ext.data.ResultSet({total:j||g,count:g,records:d,success:h,message:k})},extractData:function(f,c){var j,e,d,a,g,b=this,h=c&&c.model?Ext.data.schema.Schema.lookupEntity(c.model):b.getModel(),k=h.schema,o=k.hasAssociations(h)&&b.getImplicitIncludes(),n=b.getFieldExtractorInfo(h.fieldExtractors),i=f.length,m=new Array(i),l=b.getTypeProperty();for(!i&&Ext.isObject(f)&&(f=[f],i=1),g=0;g<i;g++)(a=f[g]).isModel||(e=a,(a=l&&(d=b.getChildType(k,e,l))?(j=d.getProxy().getReader()).extractRecord(e,c,d,k.hasAssociations(d)&&j.getImplicitIncludes(),j.getFieldExtractorInfo(d.fieldExtractors)):b.extractRecord(e,c,h,o,n)).isModel&&a.isNode&&(a.raw=e)),a.onLoad&&a.onLoad(),m[g]=a;return m},getChildType:function(d,c,a){var b;switch(typeof a){case"string":return d.getEntity(c[a]);case"object":return b=a.namespace,d.getEntity((b?b+".":"")+c[a.name]);case"function":return d.getEntity(a(c))}},extractRecordData:function(d,a){var b=a&&a.model?Ext.data.schema.Schema.lookupEntity(a.model):this.getModel(),c=this.getFieldExtractorInfo(b.fieldExtractors);return this.extractRecord(d,a,b,!1,c)},extractRecord:function(e,b,g,i,f){var d,c,a=this,h=b&&b.recordCreator||a.defaultRecordCreator;return d=a.extractModelData(e,f),c=h.call(a,d,g||a.getModel(),b),i&&c.isModel&&a.readAssociated(c,e,b),c},getFieldExtractorInfo:function(a){if(a){var c=this.$className,b=a[c];return void 0===b&&(a[c]=b=this.buildFieldExtractors()),b}},buildFieldExtractors:function(){var d,g,a,b,f=this.getFields(),j=f.length,c=[],e=[],i=null,h=0;for(a=0;a<j;++a)d=f[a],(b=this.createFieldAccessor(d))&&(g=d.name,c.push("val = extractors["+h+"](raw); if (val !== undefined) { data['"+g+"'] = val; }"),e.push(b),++h);return c.length&&(i={extractors:e,fn:new Function("raw","data","extractors","var val;"+c.join(""))}),i},defaultRecordCreator:function(c,b){var a=new b(c);return a.phantom=!1,a},getModelData:function(a){return{}},extractModelData:function(c,a){var b=this.getModelData(c);return a&&(0,a.fn)(c,b,a.extractors),b},readAssociated:function(d,f,e){var c,b,a=d.associations;for(c in a)a.hasOwnProperty(c)&&(b=a[c]).cls&&b.read(d,f,this,e)},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(a){},onMetaChange:function(a){var e,d,c,f,b=this,g=a.fields;(b.metaData=a).root&&b.setRootProperty(a.root),a.totalProperty&&b.setTotalProperty(a.totalProperty),a.successProperty&&b.setSuccessProperty(a.successProperty),a.messageProperty&&b.setMessageProperty(a.messageProperty),c=a.clientIdProperty,g?(d=Ext.define(null,{extend:"Ext.data.Model",fields:g,clientIdProperty:c}),b.setModel(d),(f=b.getProxy())&&f.setModel(d)):c&&(e=b.getModel())&&(e.self.prototype.clientIdProperty=c)},buildExtractors:function(e){var d,c,b,a=this;if(e||!a.hasExtractors)return d=a.getTotalProperty(),c=a.getSuccessProperty(),b=a.getMessageProperty(),d&&(a.getTotal=a.getAccessor(d)),c&&(a.getSuccess=a.getAccessor(c)),b&&(a.getMessage=a.getAccessor(b)),a.hasExtractors=!0},getAccessor:function(b){var a,d,c=this,e=c.extractorCache;return"string"==typeof b?(d=c.getAccessorKey(b),(a=e.get(d))||(a=c.createAccessor(b),e.add(d,a))):a=c.createAccessor(b),a},getAccessorKey:function(a){return this.$className+a},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var a=this;a.model=a.getTotal=a.getSuccess=a.getMessage=a.rawData=null,a.onMetaChange=null,a.transform=null,a.callParent()},privates:{copyFrom:function(b){var a=this;b.buildExtractors(),a.getTotal=b.getTotal,a.getSuccess=b.getSuccess,a.getMessage=b.getMessage,++a.duringInit,a.setConfig(b.getConfig()),--a.duringInit,a.hasExtractors=!0}}},function(b){var a=b.prototype;Ext.apply(a,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:!0,message:""})}),a.extractorCache=new Ext.util.LruCache}),Ext.define("Ext.data.writer.Writer",{mixins:[Ext.mixin.Factoryable],alias:"writer.base",factoryConfig:{defaultType:null},alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{clientIdProperty:null,allDataOptions:{persist:!0},partialDataOptions:{changes:!0,critical:!0},writeAllFields:!1,dateFormat:null,nameProperty:"name",writeRecordId:!0,transform:null},isWriter:!0,constructor:function(a){this.initConfig(a)},applyTransform:function(a){return a?(Ext.isFunction(a)&&(a={fn:a}),a.fn.bind(a.scope||this)):a},write:function(d){var a,b=d.getOperation(),c=b.getRecords()||[],f=c.length,e=[];for(a=0;a<f;a++)e.push(this.getRecordData(c[a],b));return this.writeRecords(d,e)},writeRecords:Ext.emptyFn,getRecordData:function(e,p){var c,k,n,m,i,o,f,g,d=this,j=d.getNameProperty(),l="name"!==j,h=e.self.idField,b=h[j]||h.name,a=e.id,q=d.getWriteAllFields();if(h.serialize&&(a=h.serialize(a)),!q&&p&&p.isDestroyOperation)(c={})[b]=a;else for(b in k=d.getDateFormat(),m=(n=e.phantom)||q?d.getAllDataOptions():d.getPartialDataOptions(),i=n&&d.getClientIdProperty(),o=e.getFieldsMap(),m.serialize=!1,f=e.getData(m),c=l?{}:f,i?(c[i]=a,delete f[b]):d.getWriteRecordId()||delete f[b],f)a=f[b],(g=o[b])?(g.isDateField&&k&&Ext.isDate(a)?a=Ext.Date.format(a,k):g.serialize&&(a=g.serialize(a,e)),l&&(b=g[j]||b),c[b]=a):l&&(c[b]=a);return c}}),Ext.define("Ext.data.proxy.Proxy",{mixins:[Ext.mixin.Factoryable,Ext.mixin.Observable],$configPrefixed:!1,alias:"proxy.proxy",alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:!0,model:void 0,reader:{type:"json"},writer:{type:"json"}},isProxy:!0,isSynchronous:!1,constructor:function(a){this.mixins.observable.constructor.call(this,a),this.pendingOperations={}},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},updateModel:function(b){if(b){var a=this.getReader();a&&!a.getModel()&&a.setModel(b)}},applyReader:function(a){return this.isSynchronous&&((a=a||{}).keepRawData=!0),Ext.Factory.reader(a)},updateReader:function(a){if(a){var c=this,b=c.getModel();b?a.setModel(b):(b=a.getModel())&&c.setModel(b),a.onMetaChange&&(a.onMetaChange=Ext.Function.createSequence(a.onMetaChange,c.onMetaChange,c))}},applyWriter:function(b){var a=this.getReader();return(b=Ext.Factory.writer(b)).getRecord&&!b.getRecord()&&a&&a.getRecord&&(a=a.getRecord())&&b.setRecord(a),b},abort:Ext.emptyFn,onMetaChange:function(a){this.fireEvent("metachange",this,a)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(a,l){var b,d,h,j,e,f,g,k,i,c=this,m=c.getBatchActions();for(void 0===a.operations&&(a={operations:a,listeners:l}),a.batch?Ext.isDefined(a.batch.runOperation)&&(b=Ext.applyIf(a.batch,{proxy:c,listeners:{}})):a.batch={proxy:c,listeners:a.listeners||{}},(b=b||new Ext.data.Batch(a.batch)).on("complete",Ext.bind(c.onBatchComplete,c,[a],0)),j=(h=c.getBatchOrder().split(",")).length,f=0;f<j;f++)if(e=h[f],d=a.operations[e])if(m)b.add(c.createOperation(e,{records:d,params:a.params}));else for(k=d.length,g=0;g<k;g++)i=d[g],b.add(c.createOperation(e,{records:[i],params:a.params}));return b.start(),b},onBatchComplete:function(a,b){var c=a.scope||this;b.hasException()?Ext.isFunction(a.failure)&&Ext.callback(a.failure,c,[b,a]):Ext.isFunction(a.success)&&Ext.callback(a.success,c,[b,a]),Ext.isFunction(a.callback)&&Ext.callback(a.callback,c,[b,a])},createOperation:function(b,c){var a=Ext.createByAlias("data.operation."+b,c);return a.setProxy(this),this.pendingOperations[a._internalId]=a},completeOperation:function(a){delete this.pendingOperations[a._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var b,a,c=this.pendingOperations;for(b in c)(a=c[b])&&a.isRunning()&&a.abort();this.pendingOperations=null}}),Ext.define("Ext.data.proxy.Client",{extend:Ext.data.proxy.Proxy,alternateClassName:"Ext.data.ClientProxy",isSynchronous:!0,clear:function(){}}),Ext.define("Ext.data.proxy.Memory",{extend:Ext.data.proxy.Client,alias:"proxy.memory",alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:!0,config:{enablePaging:!1,data:{$value:null,merge:function(a,b,d,c){return Ext.isArray(a)?Ext.Array.clone(a):Ext.clone(a)}}},finishOperation:function(b){for(var a=0,c=b.getRecords(),d=c.length;a<d;a++)c[a].commit();b.setSuccessful(!0)},create:function(a){this.finishOperation(a)},update:function(a){this.finishOperation(a)},erase:function(a){this.finishOperation(a)},read:function(b){var g=this,a=g.getReader().read(g.getData()),d=a.getRecords(),c=b.getSorters(),h=b.getGrouper(),f=b.getFilters(),e=b.getStart(),i=b.getLimit();!1!==b.process(a,null,null,!1)&&(f&&f.length&&(a.setRecords(d=Ext.Array.filter(d,Ext.util.Filter.createFilterFn(f))),a.setTotal(d.length)),h&&(c=c?c.concat(h):c),c&&c.length&&a.setRecords(d=Ext.Array.sort(d,Ext.util.Sortable.createComparator(c))),g.getEnablePaging()&&void 0!==e&&void 0!==i&&(e>=a.getTotal()?a.setConfig({success:!1,records:[],total:0}):a.setRecords(Ext.Array.slice(d,e,e+i))),b.setCompleted())},clear:Ext.emptyFn}),Ext.define("Ext.data.ProxyStore",{extend:Ext.data.AbstractStore,config:{model:void 0,fields:null,proxy:void 0,autoLoad:void 0,autoSync:!1,batchUpdateMode:"operation",sortOnLoad:!0,trackRemoved:!0,asynchronousLoad:void 0},onClassExtended:function(e,d,b){var a,c=d.model;"string"==typeof c&&(a=b.onBeforeCreated,b.onBeforeCreated=function(){var d=this,b=arguments;Ext.require(c,function(){a.apply(d,b)})})},implicitModel:"Ext.data.Model",autoSyncSuspended:0,constructor:function(b){var a=this;a.removed=[],a.callParent(arguments),!1===a.getAsynchronousLoad()&&a.flushLoad()},applyAsynchronousLoad:function(a){return null==a&&(a=!this.loadsSynchronously()),a},updateAutoLoad:function(a){this.getData(),a&&this.load(Ext.isObject(a)?a:void 0)},getTotalCount:function(){return this.totalCount||0},applyFields:function(a){a&&this.createImplicitModel(a)},applyModel:function(a){return a=a?Ext.data.schema.Schema.lookupEntity(a):(this.getFields(),this.getModel()||this.createImplicitModel())},applyProxy:function(a){var b=this.getModel();return null!==a&&(a?a.isProxy?a.setModel(b):(Ext.isString(a)?a={type:a,model:b}:a.model||(a=Ext.apply({model:b},a)),(a=Ext.createByAlias("proxy."+a.type,a)).autoCreated=!0):b&&(a=b.getProxy()),a||((a=Ext.createByAlias("proxy.memory")).autoCreated=!0)),a},applyState:function(b){var a=this;a.callParent([b]),(a.getAutoLoad()||a.isLoaded())&&a.load()},updateProxy:function(b,a){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(a){this.cleanRemoved(),this.removed=a?[]:null},onMetaChange:function(b,a){this.fireEvent("metachange",this,a)},create:function(f,a){var b=this,d=new(b.getModel())(f);return(a=Ext.apply({},a)).records||(a.records=[d]),a.internalScope=b,a.internalCallback=b.onProxyWrite,b.createOperation("create",a).execute()},read:function(){return this.load.apply(this,arguments)},update:function(a){var b=this;return(a=Ext.apply({},a)).records||(a.records=b.getUpdatedRecords()),a.internalScope=b,a.internalCallback=b.onProxyWrite,b.createOperation("update",a).execute()},onProxyWrite:function(a){var b=this,c=a.wasSuccessful(),d=a.getRecords();switch(a.getAction()){case"create":b.onCreateRecords(d,a,c);break;case"update":b.onUpdateRecords(d,a,c);break;case"destroy":b.onDestroyRecords(d,a,c)}c&&(b.fireEvent("write",b,a),b.fireEvent("datachanged",b))},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(c,b,a){a&&this.cleanRemoved()},erase:function(a){var b=this;return(a=Ext.apply({},a)).records||(a.records=b.getRemovedRecords()),a.internalScope=b,a.internalCallback=b.onProxyWrite,b.createOperation("destroy",a).execute()},onBatchOperationComplete:function(b,a){return this.onProxyWrite(a)},onBatchComplete:function(e,f){var b,a=this,c=e.operations,d=c.length;if("operation"!==a.batchUpdateMode){for(a.suspendEvents(),b=0;b<d;b++)a.onProxyWrite(c[b]);a.resumeEvents()}a.isSyncing=!1,a.fireEvent("datachanged",a)},onBatchException:function(b,a){},filterNew:function(a){return!0===a.phantom&&a.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(a){return!0===a.dirty&&!0!==a.phantom&&a.isValid()},getRemovedRecords:function(){var a=this.getRawRemovedRecords();return a?Ext.Array.clone(a):a},sync:function(d){var a=this,b={},f=a.getNewRecords(),g=a.getUpdatedRecords(),e=a.getRemovedRecords(),c=!1;return a.needsSync=!1,0<f.length&&(b.create=f,c=!0),0<g.length&&(b.update=g,c=!0),0<e.length&&(b.destroy=e,c=!0),c&&!1!==a.fireEvent("beforesync",b)&&(a.isSyncing=!0,d=d||{},a.proxy.batch(Ext.apply(d,{operations:b,listeners:a.getBatchListeners()}))),a},getBatchListeners:function(){var a=this,b={scope:a,exception:a.onBatchException,complete:a.onBatchComplete};return"operation"===a.batchUpdateMode&&(b.operationcomplete=a.onBatchOperationComplete),b},save:function(){return this.sync.apply(this,arguments)},load:function(b){var a=this;return b="function"==typeof b?{callback:b}:b?Ext.Object.chain(b):{},a.pendingLoadOptions=b,a.getAsynchronousLoad()?a.loadTimer||(a.loadTimer=Ext.asap(a.flushLoad,a)):a.flushLoad(),a},flushLoad:function(){var b,a=this,c=a.pendingLoadOptions;a.clearLoadTask(),c&&(a.setLoadOptions(c),a.getRemoteSort()&&c.sorters&&a.fireEvent("beforesort",a,c.sorters),b=Ext.apply({internalScope:a,internalCallback:a.onProxyLoad,scope:a},c),a.lastOptions=b,b=a.createOperation("read",b),!1!==a.fireEvent("beforeload",a,b)&&(a.onBeforeLoad(b),a.loading=!0,b.execute()))},reload:function(a){var b=Ext.apply({},a,this.lastOptions);return this.load(b)},onEndUpdate:function(){var a=this;a.needsSync&&a.autoSync&&!a.autoSyncSuspended&&a.sync()},afterReject:function(b){var a=this;a.contains(b)&&(a.onUpdate(b,Ext.data.Model.REJECT,null),a.fireEvent("update",a,b,Ext.data.Model.REJECT,null))},afterCommit:function(c,a){var b=this;a=a||null,b.contains(c)&&(b.onUpdate(c,Ext.data.Model.COMMIT,a),b.fireEvent("update",b,c,Ext.data.Model.COMMIT,a))},afterErase:function(a){this.onErase(a)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,onDestroy:function(){var a=this,b=a.getProxy();a.clearLoadTask(),a.getData().destroy(),a.data=null,a.setProxy(null),b.autoCreated&&b.destroy(),a.setModel(null)},hasPendingLoad:function(){return!!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return!!this.loading},isLoaded:function(){return 0<this.loadCount},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(b){var a=this;a.autoSyncSuspended&&!--a.autoSyncSuspended&&b&&a.sync()},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){Ext.asapCancel(this.loadTimer),this.pendingLoadOptions=this.loadTimer=null},cleanRemoved:function(){var c,b,a=this.getRawRemovedRecords();if(a){for(b=0,c=a.length;b<c;++b)a[b].unjoin(this);a.length=0}},createOperation:function(e,d){var b,a=this,c=a.getProxy();return a.proxyListeners||(b={scope:a,destroyable:!0,beginprocessresponse:a.beginUpdate,endprocessresponse:a.endUpdate},a.disableMetaChangeEvent||(b.metachange=a.onMetaChange),a.proxyListeners=c.on(b)),c.createOperation(e,d)},createImplicitModel:function(e){var c,a,b=this,d={extend:b.implicitModel,statics:{defaultProxy:"memory"}};e&&(d.fields=e),a=Ext.define(null,d),b.setModel(a),(c=b.getProxy())?a.setProxy(c):b.setProxy(a.getProxy())},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(b){var a=this.getRawRemovedRecords();a&&(Ext.Array.remove(a,b),b.unjoin(this))},setLoadOptions:function(d){var a,b,c=this;c.getRemoteFilter()&&(a=c.getFilters(!1))&&a.getCount()&&(d.filters=a.getRange()),c.getRemoteSort()&&(b=c.getSorters(!1))&&b.getCount()&&(d.sorters=b.getRange())}}}),Ext.define("Ext.data.LocalStore",{extend:Ext.Mixin,mixinConfig:{id:"localstore"},config:{extraKeys:null},applyExtraKeys:function(a){var b,c=this.getData();for(b in c.setExtraKeys(a),a=c.getExtraKeys())this[b]=a[b]},add:function(a){return this.insert(this.getCount(),1===arguments.length?a:arguments)},constructDataCollection:function(){return new Ext.util.Collection({rootProperty:"data"})},createModel:function(a){var c=this.getSession();return a.isModel||(a=new(this.getModel())(a,c)),a},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var a=this.getData().getSorters();return a.setSorterConfigure(this.addFieldTransform,this),a},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(a){return-1<this.indexOf(a)},each:function(f,e){var b,a,c=this.data.items,d=c.length;for(a=0;a<d&&(b=c[a],!1!==f.call(e||b,b,a,d));++a);},collect:function(d,c,b){var a=this.getData();return!0===b&&a.filtered&&(a=a.getSource()),a.collect(d,"data",c)},getById:function(b){var a=this.getData();return a.filtered&&(a=a.getSource()),a.get(b)||null},getByInternalId:function(c){var b,a=this.getData();return a.filtered&&(a.$hasExtraKeys||(b=this.makeInternalKeyCfg(),a.setExtraKeys(b),a.$hasExtraKeys=!0),a=a.getSource()),a.$hasExtraKeys||(a.setExtraKeys(b||this.makeInternalKeyCfg()),a.$hasExtraKeys=!0),a.byInternalId.get(c)||null},getDataSource:function(){var a=this.getData();return a.getSource()||a},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},insert:function(e,a){var c,b;if(a&&(c=(a=Ext.isIterable(a)?Ext.Array.clone(a):[a]).length),!c)return[];for(b=0;b<c;++b)a[b]=this.createModel(a[b]);return this.getData().insert(e,a),a},queryBy:function(c,b){var a=this.getData();return(a.getSource()||a).createFiltered(c,b)},query:function(e,f,d,b,c){var a=this.getData();return(a.getSource()||a).createFiltered(e,f,d,b,c)},first:function(a){return this.getData().first(a)||null},last:function(a){return this.getData().last(a)||null},sum:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.sumByGroup(a):b.sum(a)},count:function(b){var a=this.getData();return b&&this.isGrouped()?a.countByGroup():a.count()},min:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.minByGroup(a):b.min(a)},max:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.maxByGroup(a):b.max(a)},average:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.averageByGroup(a):b.average(a)},aggregate:function(i,g,j,f){var c,h,e,d,b,a=this;if(j&&a.isGrouped()){for(h=(c=a.getGroups().items).length,e={},b=0;b<h;++b)e[(d=c[b]).getGroupKey()]=a.getAggregate(i,g||a,d.items,f);return e}return a.getAggregate(i,g,a.getData().items,f)},getAggregate:function(g,e,b,d){var a,c=[],f=b.length;for(a=0;a<f;++a)c[a]=b[a].get(d);return g.call(e||this,b,c)},addObserver:function(b){var a=this.observers;a||(this.observers=a=new Ext.util.Collection),a.add(b)},removeObserver:function(b){var a=this.observers;a&&a.remove(b)},callObservers:function(h,a){var g,e,c,d,b,f=this.observers;if(f)for(e=f.items,a?a.unshift(this):a=[this],c=0,g=e.length;c<g;++c)(b=e[c])[d="onSource"+h]&&b[d].apply(b,a)},queryRecordsBy:function(g,d){var f,b,c,a=this.getData(),e=[];for(d=d||this,b=0,f=(a=(a.getSource()||a).items).length;b<f;++b)c=a[b],!0===g.call(d,c)&&e.push(c);return e},queryRecords:function(f,g){var e,b,c,a=this.getData(),d=[];for(b=0,e=(a=(a.getSource()||a).items).length;b<e;++b)(c=a[b]).get(f)===g&&d.push(c);return d},privates:{isLast:function(a){return a===this.last()},makeInternalKeyCfg:function(){return{byInternalId:{property:"internalId",rootProperty:""}}}}}),Ext.define("Ext.data.proxy.Server",{extend:Ext.data.proxy.Proxy,alias:"proxy.server",alternateClassName:"Ext.data.ServerProxy",isRemote:!0,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:!1,simpleGroupMode:!1,noCache:!0,cacheString:"_dc",timeout:3e4,api:{create:void 0,read:void 0,update:void 0,destroy:void 0},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(c,b){var a=this.getExtraParams();a[c]=b,this.fireEvent("extraparamschanged",a)},updateExtraParams:function(a,b){this.fireEvent("extraparamschanged",a)},buildRequest:function(a){var b,e,f,c=this,g=Ext.apply({},a.getParams()),d=Ext.applyIf(g,c.getExtraParams()||{});return Ext.applyIf(d,c.getParams(a)),e=a.getId(),f=c.getIdParam(),void 0!==e&&void 0===d[f]&&(d[f]=e),(b=new Ext.data.Request({params:d,action:a.getAction(),records:a.getRecords(),url:a.getUrl(),operation:a,proxy:c})).setUrl(c.buildUrl(b)),a.setRequest(b),b},processResponse:function(h,b,g,c){var f,e,a=this;a.fireEvent("beginprocessresponse",a,c,b),(!0===h?(f=a.getReader(),e=204===c.status?f.getNullResultSet():f.read(a.extractResponseData(c),{recordCreator:b.getRecordCreator()}),b.process(e,g,c),b.wasSuccessful()):(a.setException(b,c),0))||a.fireEvent("exception",a,c,b),a.afterRequest(g,h),a.fireEvent("endprocessresponse",a,c,b)},setException:function(b,a){b.setException({status:a.status,statusText:a.statusText,response:a})},extractResponseData:Ext.identityFn,applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(c,d){var a,b=[],e=c.length;for(a=0;a<e;a++)b[a]=c[a].serialize();return this.applyEncoding(d?b[0]:b)},encodeFilters:function(b){var a,c=[],d=b.length;for(a=0;a<d;a++)c[a]=b[a].serialize();return this.applyEncoding(c)},getParams:function(c){if(!c.isReadOperation)return{};var h,f,a=this,b={},e=c.getGrouper(),d=c.getSorters(),j=c.getFilters(),q=c.getPage(),k=c.getStart(),p=c.getLimit(),u=a.getSimpleSortMode(),s=a.getSimpleGroupMode(),o=a.getPageParam(),n=a.getStartParam(),m=a.getLimitParam(),g=a.getGroupParam(),r=a.getGroupDirectionParam(),i=a.getSortParam(),l=a.getFilterParam(),t=a.getDirectionParam();return o&&q&&(b[o]=q),n&&(k||0===k)&&(b[n]=k),m&&p&&(b[m]=p),(h=g&&e)&&(s?(b[g]=e.getProperty(),b[r]=e.getDirection()):b[g]=a.encodeSorters([e],!0)),i&&d&&0<d.length&&(u?(f=0,1<d.length&&h&&(f=1),b[i]=d[f].getProperty(),b[t]=d[f].getDirection()):b[i]=a.encodeSorters(d)),l&&j&&0<j.length&&(b[l]=a.encodeFilters(j)),b},buildUrl:function(c){var b=this,a=b.getUrl(c);return b.getNoCache()&&(a=Ext.urlAppend(a,Ext.String.format("{0}={1}",b.getCacheString(),Ext.Date.now()))),a},getUrl:function(a){var b;return a&&(b=a.getUrl()||this.getApi()[a.getAction()]),b||this.callParent()},doRequest:function(a){},afterRequest:Ext.emptyFn,destroy:function(){this.callParent(),Ext.destroy(this.getReader(),this.getWriter()),this.reader=this.writer=null}}),Ext.define("Ext.data.proxy.Ajax",{extend:Ext.data.proxy.Server,alias:"proxy.ajax",alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],isAjaxProxy:!0,defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:!1,headers:void 0,paramsAsJson:!1,withCredentials:!1,useDefaultXhrHeader:!0,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(e){var c,d,a=this,g=a.getWriter(),b=a.buildRequest(e),f=a.getMethod(b);return g&&e.allowWrite()&&(b=g.write(b)),b.setConfig({binary:a.getBinary(),headers:a.getHeaders(),timeout:a.getTimeout(),scope:a,callback:a.createRequestCallback(b,e),method:f,useDefaultXhrHeader:a.getUseDefaultXhrHeader(),disableCaching:!1}),"GET"!==f.toUpperCase()&&a.getParamsAsJson()&&(d=b.getParams())&&(c=(c=b.getJsonData())?Ext.Object.merge({},c,d):d,b.setJsonData(c),b.setParams(void 0)),a.getWithCredentials()&&(b.setWithCredentials(!0),b.setUsername(a.getUsername()),b.setPassword(a.getPassword())),a.sendRequest(b)},sendRequest:function(a){return a.setRawRequest(Ext.Ajax.request(a.getCurrentConfig())),this.lastRequest=a},abort:function(a){(a=a||this.lastRequest)&&Ext.Ajax.abort(a.getRawRequest())},getMethod:function(d){var c,a=this.getActionMethods(),b=d.getAction();return a&&(c=a[b]),c||this.defaultActionMethods[b]},createRequestCallback:function(b,c){var a=this;return function(f,e,d){b===a.lastRequest&&(a.lastRequest=null),a.processResponse(e,c,b,d)}},destroy:function(){this.lastRequest=null,this.callParent()}}),Ext.define("Ext.data.reader.Json",{extend:Ext.data.reader.Reader,alternateClassName:"Ext.data.JsonReader",alias:"reader.json",config:{record:null,metaProperty:"metaData",useSimpleAccessors:!1,preserveRawData:!1},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},readRecords:function(b,e,d){var c,a=this;return a.getMeta?(c=a.getMeta(b))&&a.onMetaChange(c):b.metaData&&a.onMetaChange(b.metaData),a.callParent([b,e,d])},getResponseData:function(b){var a;try{return Ext.decode(b.responseText)}catch(c){return a=this.createReadError(c.message),Ext.Logger.warn("Unable to parse the JSON returned by the server"),this.fireEvent("exception",this,b,a),a}},buildExtractors:function(){var b,c,a=this;a.callParent(arguments)&&(b=a.getMetaProperty(),c=a.getRootProperty(),a.getRoot=c?a.getAccessor(c):Ext.identityFn,b&&(a.getMeta=a.getAccessor(b)))},extractData:function(a,f){var c,b,e=this.getRecord(),d=[];if(e)for(!(c=a.length)&&Ext.isObject(a)&&(c=1,a=[a]),b=0;b<c;b++)d[b]=a[b][e];else d=a;return this.callParent([d,f])},getModelData:function(a){return this.getPreserveRawData()?Ext.apply({},a):a},createAccessor:function(){var a=/[\[\.]/;return function(c){var n,f,j,m,b,e,l,g,k,d,h,i,q,o=this.getUseSimpleAccessors();if(c||0===c){if("function"==typeof c)return c;if(o||(n=String(c).search(a)),!0===o||n<0)f=function(a){return a[c]};else{for(j="raw",m=[],b="",e=0,q=c.length,h=0;h<=q;++h)l="["===(d=c[h]),g="]"===d,!(k="."===d||l||g||!d)||1<e||e&&!g?b+=d:k&&(i=!1,l?++e:g&&(--e,i=!0),b&&(j+=b=i?"["+b+"]":"."+b,m.push(""+j),b=""));f=m.join(" && "),f=Ext.functionFactory("raw","return "+f)}return f}}}(),createFieldAccessor:function(b){var e=this,a=b.mapping,c=a||0===a,d=c?a:b.name;if(c)return"function"==typeof d?function(a){return b.mapping(a,e)}:e.createAccessor(d)},getAccessorKey:function(b){var a=this.getUseSimpleAccessors()?"simple":"";return this.$className+a+b},privates:{copyFrom:function(a){this.callParent([a]),this.getRoot=a.getRoot}}}),Ext.define("Ext.data.writer.Json",{extend:Ext.data.writer.Writer,alternateClassName:"Ext.data.JsonWriter",alias:"writer.json",config:{rootProperty:void 0,encode:!1,allowSingle:!0,expandData:!1},getExpandedData:function(f){function i(c,b){var a={};return a[c]=b,a}for(var a,c,b,d,e,h=f.length,g=0;g<h;g++)for(c in a=f[g])if(a.hasOwnProperty(c)&&0<(d=(b=c.split(".")).length-1)){for(e=a[c];0<d;d--)e=i(b[d],e);a[b[0]]=a[b[0]]||{},Ext.Object.merge(a[b[0]],e),delete a[c]}return f},writeRecords:function(b,a){var d,g,f,c=this,e=c.getRootProperty();return c.getExpandData()&&(a=c.getExpandedData(a)),c.getAllowSingle()&&1===a.length&&(a=a[0],g=!0),(f=this.getTransform())&&(a=f(a,b)),c.getEncode()?e&&b.setParam(e,Ext.encode(a)):(g||a&&a.length)&&(d=b.getJsonData()||{},e?d[e]=a:d=a,b.setJsonData(d)),b}}),Ext.define("Ext.util.Group",{extend:Ext.util.Collection,config:{groupKey:null},$endUpdatePriority:2001}),Ext.define("Ext.util.SorterCollection",{extend:Ext.util.Collection,isSorterCollection:!0,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(b){var a=this;a.sortFn=Ext.util.Sorter.createComparator(a),a.callParent([b]),a.setDecoder(a.decodeSorter)},addSort:function(b,c,d){var f,j,k,g,h,i,e,a=this;b?(g=a.getOptions(),b instanceof Array?(e=b,d=c,c=null):Ext.isString(b)?e=(i=a.get(b))?[i]:[{property:b,direction:c||g.getDefaultSortDirection()}]:Ext.isFunction(b)?e=[{sorterFn:b,direction:c||g.getDefaultSortDirection()}]:(e=[b],d=c,c=null),d=a._sortModes[d||"replace"],h=a.getAt(0),f=a.length,j=d.append?f:0,a.beginUpdate(),a.splice(j,d.replace?f:0,e),d.multi&&(f=a.length,(k=g.getMultiSortLimit())<f&&a.removeAt(k,f)),i&&c?i.setDirection(c):0===j&&h&&h===a.getAt(0)&&h.toggle()):a.beginUpdate(),a.endUpdate()},clear:function(){this.beginUpdate(),this.callParent(),this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(d){var a,b,c=this.items,e=c.length;for(a=0;a<e;++a)if((b=c[a]).getProperty()===d)return b;return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(a,i){var d,b,e,c=this,g=c.getOptions(),h=g.getRootProperty(),f=c.getSorterOptionsFn();if(a.isSorter)a.getRoot()||a.setRoot(h);else{if(b={direction:g.getDefaultSortDirection(),root:h},"string"==(e=typeof a)){if(d=c.get(a))return d;b.property=a}else"function"==e?b.sorterFn=a:(b=Ext.apply(b,a)).fn&&(b.sorterFn=b.fn,delete b.fn);a=Ext.create(i||"Ext.util.Sorter",b)}return f&&f.call(c.getSorterOptionsScope()||c,a),a},setSorterConfigure:function(b,a){this.setSorterOptionsFn(b),this.setSorterOptionsScope(a)},decodeRemoveItems:function(e,d){var b=void 0===d?e:e[d];if(!b||!b.$cloned){(e.length>d+1||!Ext.isIterable(b))&&(b=Ext.Array.slice(e,d));var f,g,i,a,h,j=this.items,l=b.length,c=[];for(f=0;f<l;f++)if((a=b[f])&&a.isSorter)c.push(a);else if("string"==(h=typeof a))(a=this.get(a))&&c.push(a);else if("function"==h)for(i=j.length;0<i--;)(g=j[i]).getSorterFn()===a&&c.push(g);(b=c).$cloned=!0}return b},getOptions:function(){return this.$sortable||this}}),Ext.define("Ext.util.FilterCollection",{extend:Ext.util.Collection,isFilterCollection:!0,$filterable:null,filterFn:null,constructor:function(b){var a=this;a.filterFn=Ext.util.Filter.createFilterFn(a),a.callParent([b]),a.setDecoder(a.decodeFilter)},filterData:function(a){return this.filtered?Ext.Array.filter(a,this.filterFn):a},getFilterFn:function(){return this.filterFn},isItemFiltered:function(a){return!this.filterFn(a)},decodeFilter:function(b){var a,c=this.getOptions().getRootProperty();if(b.isFilter)b.getRoot()||b.setRoot(c);else{if(a={root:c},Ext.isFunction(b))a.filterFn=b;else if((a=Ext.apply(a,b)).fn&&(a.filterFn=a.fn,delete a.fn),Ext.util.Filter.isInvalid(a))return!1;b=new Ext.util.Filter(a)}return b},decodeRemoveItems:function(f,e){var b=void 0===e?f:f[e];if(!b.$cloned){(f.length>e+1||!Ext.isIterable(b))&&(b=Ext.Array.slice(f,e));var a,g,l,n,m,c,d,j,i,k=this.items,o=b.length,h=[];for(g=0;g<o;g++)if((a=b[g])&&a.isFilter)h.push(a);else for(l="function"==(i=typeof a),n=void 0!==a.property&&void 0!==a.value,m="string"==i,j=k.length;0<j--;)c=k[j],d=!1,m?d=c.getProperty()===a:l?d=c.getFilterFn()===a:n&&(d=c.getProperty()===a.property&&c.getValue()===a.value),d&&h.push(c);(b=h).$cloned=!0}return b},getOptions:function(){return this.$filterable||this}}),Ext.define("Ext.util.GroupCollection",{extend:Ext.util.Collection,isGroupCollection:!0,config:{grouper:null,itemRoot:null},observerPriority:-100,onCollectionAdd:function(b,a){this.addItemsToGroups(b,a.items)},onCollectionBeforeItemChange:function(b,a){this.changeDetails=a},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){var c=a.item;a.indexChanged||this.syncItemGrouping(b,c,b.getKey(c),a.oldKey,a.oldIndex),this.changeDetails=null},onCollectionRefresh:function(a){this.removeAll(),this.addItemsToGroups(a,a.items)},onCollectionRemove:function(k,j){var b,h,a,e,i,c,f,d=this,g=d.changeDetails;for(g?(f=g.item,b=[],(a=d.findGroupForItem(f))&&b.push({group:a,items:[f]})):b=d.groupItems(k,j.items,!1),e=0,i=b.length;e<i;++e)(a=(h=b[e]).group)&&(a.remove(h.items),a.length||(c=c||[]).push(a));c&&d.remove(c)},onCollectionSort:function(g){var e,d,a,c,b=g.getSorters(!1);if(b)for(e=this.items,d=this.length,a=0;a<d;++a)(c=e[a]).getSorters()!==b&&c.setSorters(b)},onCollectionUpdateKey:function(b,a){var c=a.index,d=a.item;a.indexChanged||(c=b.indexOf(d),this.syncItemGrouping(b,d,a.newKey,a.oldKey,c))},addItemsToGroups:function(a,b){this.groupItems(a,b,!0)},groupItems:function(j,o,n){var c,k,b,a,l,i,h,f,d=this,m={},g=[],p=j.getGrouper(),e=d.itemGroupKeys;for(a=0,h=o.length;a<h;++a)b=p.getGroupString(l=o[a]),i=j.getKey(l),n?(e||(d.itemGroupKeys=e={}))[i]=b:e&&delete e[i],(c=m[b])||(!(k=d.getByKey(b))&&n&&(f=f||[]).push(k=d.createGroup(j,b)),g.push(m[b]=c={group:k,items:[]})),c.items.push(l);for(a=0,h=g.length;a<h;++a)(c=g[a]).group.add(c.items);return f&&d.add(f),g},syncItemGrouping:function(i,d,m,n,o){var l,a,e,c,k,b=this,f=b.itemGroupKeys||(b.itemGroupKeys={}),h=i.getGrouper().getGroupString(d),g=0,j=-1;n?(c=f[n],delete f[n]):c=f[m],f[m]=h,(a=b.get(h))||(l=[a=b.createGroup(i,h)]),a.get(m)!==d?(0<a.getCount()&&0===i.getSorters().getCount()&&(j=o<(k=i.indexOf(a.items[0]))?0:o-k),-1===j?a.add(d):a.insert(j,d)):a.itemChanged(d),h===c||0!==c&&!c||(e=b.get(c))&&(e.remove(d),e.length||(g=[e])),l?b.splice(0,g,l):g&&b.splice(0,g)},createGroup:function(a,c){return new Ext.util.Group({groupKey:c,rootProperty:this.getItemRoot(),sorters:a.getSorters()})},getKey:function(a){return a.getGroupKey()},createSortFn:function(){var b=this.getGrouper(),a=this.getSorters().getSortFn();return b?function(c,d){return b.sort(c.items[0],d.items[0])||a(c,d)}:a},updateGrouper:function(b){var a=this;a.grouped=!(!b||!a.$groupable.getAutoGroup()),a.onSorterChange(),a.onEndUpdateSorters(a.getSorters())},destroy:function(){this.$groupable=null,this.callParent()},privates:{findGroupForItem:function(d){var a,b,c=this.items,e=c.length;for(a=0;a<e;++a)if((b=c[a]).contains(d))return b}}}),Ext.define("Ext.data.Store",{extend:Ext.data.ProxyStore,alias:"store.store",mixins:[Ext.data.LocalStore],config:{data:0,clearRemovedOnLoad:!0,clearOnPageLoad:!0,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:!0},loadCount:0,complete:!1,moveMapCount:0,constructor:function(b){var c,a=this;if(b&&b.buffered)return new Ext.data.BufferedStore(b);a.callParent([b]),a.getData().addObserver(a),(c=a.inlineData)&&(delete a.inlineData,a.loadInlineData(c))},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},applyData:function(a,c){var b=this;return b.getFields(),b.getModel(),a&&a.isCollection?c=a:(c=c||b.constructDataCollection(),a&&(b.isInitializing?b.inlineData=a:b.loadData(a))),c},loadInlineData:function(c){var a=this,b=a.getProxy();b&&b.isMemoryProxy?(b.setData(c),a.suspendEvents(),a.read()):(a.removeAll(!0),a.suspendEvents(),a.loadData(c)),a.resumeEvents()},onCollectionAdd:function(b,a){this.onCollectionAddItems(b,a.items,a)},onCollectionFilterAdd:function(a,b){this.onCollectionAddItems(a,b)},onCollectionAddItems:function(n,g,b){var f,i,c,d,a=this,m=g.length,k=!!b&&!b.next,h=a.removed,j=a.ignoreCollectionAdd,l=a.getSession(),e=b&&b.replaced;for(f=0;f<m;++f)c=g[f],l&&l.adopt(c),j||(c.join(a),h&&h.length&&Ext.Array.remove(h,c),i=i||c.phantom||c.dirty);if(!j){if(e){for(d=[];Ext.Array.push(d,e.items),e=e.next;);a.setMoving(d,!0)}b&&(b.replaced?k&&a.fireEvent("refresh",a):(a.fireEvent("add",a,g,b.at),k&&a.fireEvent("datachanged",a))),d&&a.setMoving(d,!1),a.needsSync=a.needsSync||i}},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(f,a){var b=this,c=a.item,d=a.modified||null,e=a.meta;b.fireChangeEvent(c)&&(b.onUpdate(c,e,d,a),b.fireEvent("update",b,c,e,d,a))},fireChangeEvent:function(a){return this.getDataSource().contains(a)},afterChange:function(b,a,c){this.getData().itemChanged(b,a||null,void 0,c)},afterCommit:function(b,a){this.afterChange(b,a,Ext.data.Model.COMMIT)},afterEdit:function(a,b){this.needsSync=this.needsSync||a.dirty,this.afterChange(a,b,Ext.data.Model.EDIT)},afterReject:function(a){this.afterChange(a,null,Ext.data.Model.REJECT)},afterDrop:function(a){this.getData().remove(a)},afterErase:function(a){this.removeFromRemoved(a)},addSorted:function(c){var e,a=this,d=a.getRemoteSort(),b=a.getData();return d&&b.setSorters(a.getSorters()),e=b.findInsertionIndex(c),d&&b.setSorters(null),a.insert(e,c)},remove:function(c,h,i){var d,g,b,a,f=this,e=f.getDataSource();if(c)if(c.isModel)d=-1<e.indexOf(c)?(b=[c],1):0;else{for(b=[],g=0,d=c.length;g<d;++g){if((a=c[g])&&a.isEntity){if(!e.contains(a))continue}else if(!(a=e.getAt(a)))continue;b.push(a)}d=b.length}return d?(f.removeIsMove=!0===h,f.removeIsSilent=i,e.remove(b),f.removeIsSilent=!1,b):[]},onCollectionRemove:function(n,f){var d,c,a=this,g=a.removed,e=f.items,m=e.length,i=f.at,b=f.replacement,h=a.removeIsMove||b&&Ext.Array.equals(e,b.items),k=a.removeIsSilent,j=!f.next,l=a.getDataSource();if(!a.ignoreCollectionRemove){for(b&&a.setMoving(b.items,!0),d=0;d<m;++d)c=e[d],l.contains(c)||(!g||h||c.phantom||c.erasing?c.unjoin(a):(c.removedFrom=i+d,g.push(c),a.needsSync=!0));k||b&&b.items.length||(a.fireEvent("remove",a,e,i,h),j&&a.fireEvent("datachanged",a)),b&&a.setMoving(b.items,!1)}},onFilterEndUpdate:function(){this.callParent(arguments),this.callObservers("Filter")},removeAt:function(a,b){var c=this.getData();if((a=Math.max(a,0))<c.length){if(1===arguments.length)b=1;else if(!b)return;c.removeAt(a,b)}},removeAll:function(d){var a=this,b=a.getData(),c=(a.hasListeners.clear,b.getRange());return b.length&&(a.removeIsSilent=!0,a.callObservers("BeforeRemoveAll"),b.removeAll(),a.removeIsSilent=!1,d||(a.fireEvent("clear",a,c),a.fireEvent("datachanged",a)),a.callObservers("AfterRemoveAll",[!!d])),c},setRecords:function(a){var b=this.getCount();++this.loadCount,b?this.getData().splice(0,b,a):this.add(a)},splice:function(b,a,c){return this.getData().splice(b,a,c)},onProxyLoad:function(b){var a=this,e=b.getResultSet(),c=b.getRecords(),d=b.wasSuccessful();a.destroyed||(e&&(a.totalCount=e.getTotal()),d?(c=a.processAssociation(c),a.loadRecords(c,b.getAddRecords()?{addRecords:!0}:void 0)):a.loading=!1,a.hasListeners.load&&a.fireEvent("load",a,c,d,b),a.callObservers("AfterLoad",[c,d,b]))},filterDataSource:function(f){var a,c=this.getDataSource(),b=c.items,e=b.length,d=[];for(a=0;a<e;a++)f.call(c,b[a])&&d.push(b[a]);return d},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(d,e){var c,b=this,f=d.length,a=[];for(c=0;c<f;c++)a.push(b.createModel(d[c]));a=b.processAssociation(a),b.loadRecords(a,e?b.addRecordsOptions:void 0)},loadRawData:function(g,f){var a=this,c=a.getSession(),b=a.getProxy().getReader().read(g,c?{recordCreator:c.recordCreator}:void 0),e=b.getRecords(),d=b.getSuccess();return d&&(a.totalCount=b.getTotal(),a.loadRecords(e,f?a.addRecordsOptions:void 0)),d},loadRecords:function(c,g){var e,b,f,a=this,h=c.length,d=a.getData();for(g&&(e=g.addRecords),a.getRemoteSort()||a.getSortOnLoad()||(f=!0,d.setAutoSort(!1)),e||a.clearData(!0),a.loading=!1,a.ignoreCollectionAdd=!0,a.callObservers("BeforePopulate"),d.add(c),a.ignoreCollectionAdd=!1,f&&d.setAutoSort(!0),b=0;b<h;b++)c[b].join(a);++a.loadCount,a.complete=!0,a.fireEvent("datachanged",a),a.fireEvent("refresh",a),a.callObservers("AfterPopulate")},loadPage:function(c,b){var a=this,d=a.getPageSize();a.currentPage=c,b=Ext.apply({page:c,start:(c-1)*d,limit:d,addRecords:!a.getClearOnPageLoad()},b),a.read(b)},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(h){var d,e,c,i,a=this,b=a.removed,f=a.getDataSource(),g=a.getClearRemovedOnLoad(),j=b&&h&&!g;if(f){for(c=0,i=(d=f.items).length;c<i;++c)e=d[c],j&&Ext.Array.contains(b,e)||e.unjoin(a);a.ignoreCollectionRemove=!0,a.callObservers("BeforeClear"),f.removeAll(),a.ignoreCollectionRemove=!1,a.callObservers("AfterClear")}!b||h&&!g||(b.length=0)},onIdChanged:function(b,a,c){this.getData().updateKey(b,a),this.fireEvent("idchanged",this,b,a,c)},commitChanges:function(){var a=this,c=a.getModifiedRecords(),d=c.length,b=0;for(Ext.suspendLayouts(),a.beginUpdate();b<d;b++)c[b].commit();a.cleanRemoved(),a.endUpdate(),Ext.resumeLayouts(!0)},filterNewOnly:function(a){return!0===a.phantom},filterRejects:function(a){return a.phantom||a.dirty},rejectChanges:function(){var a,d,e,g,h,i,b=this,c=b.getRejectRecords(),f=c.length;for(Ext.suspendLayouts(),b.beginUpdate(),a=0;a<f;a++)(d=c[a]).phantom?(e=e||[]).push(d):d.reject();if(e)for(b.remove(e),a=0,f=e.length;a<f;++a)e[a].reject();if(c=b.getRawRemovedRecords()){for(f=c.length,(g=!b.getRemoteSort()&&b.isSorted())&&(i=(h=b.getData()).getAutoSort(),h.setAutoSort(!1)),a=f-1;0<=a;a--)(d=c[a]).reject(),g||b.insert(d.removedFrom||0,d);g&&(h.setAutoSort(i),b.add(c)),c.length=0}b.endUpdate(),Ext.resumeLayouts(!0)},onDestroy:function(){var a=this,c=a.loadTask,b=a.getData().getSource();a.clearData(),a.callParent(),a.setSession(null),a.observers=null,c&&(c.cancel(),a.loadTask=null),b&&b.destroy()},privates:{fetch:function(a){a=Ext.apply({},a),this.setLoadOptions(a),this.createOperation("read",a).execute()},onBeforeLoad:function(a){this.callObservers("BeforeLoad",[a])},onRemoteFilterSet:function(a,b){a&&this.getData().setFilters(b?null:a),this.callParent([a,b])},onRemoteSortSet:function(b,a){var c=this.getData();b&&c.setSorters(a?null:b),c.setAutoGroup(!a),this.callParent([b,a])},isMoving:function(a,f){var e,d,c=this.moveMap,b=0;if(c)if(a)if(Ext.isArray(a))for(d=0,e=a.length;d<e;++d)b+=c[a[d].id]?1:0;else c[a.id]&&++b;else b=f?c:this.moveMapCount;return b},setLoadOptions:function(a){var e,d,b=this,c=b.getPageSize();b.getRemoteSort()&&!a.grouper&&(d=b.getGrouper())&&(a.grouper=d),(c||"start"in a||"limit"in a||"page"in a)&&(a.page=null!=a.page?a.page:b.currentPage,a.start=void 0!==a.start?a.start:(a.page-1)*c,a.limit=null!=a.limit?a.limit:c,b.currentPage=a.page),a.addRecords=a.addRecords||!1,a.recordCreator||(e=b.getSession())&&(a.recordCreator=e.recordCreator),b.callParent([a])},setMoving:function(e,f){var d,a,b=this,c=b.moveMap||(b.moveMap={}),g=e.length;for(d=0;d<g;++d)a=e[d].id,f?c[a]?++c[a]:(c[a]=1,++b.moveMapCount):0==--c[a]&&(delete c[a],--b.moveMapCount);0===b.moveMapCount&&(b.moveMap=null)},processAssociation:function(b){var a=this,c=a.getAssociatedEntity();return c&&(b=a.getRole().processLoad(a,c,b,a.getSession())),b}}}),Ext.define("Ext.data.reader.Array",{extend:Ext.data.reader.Json,alternateClassName:"Ext.data.ArrayReader",alias:"reader.array",config:{totalProperty:void 0,successProperty:void 0},createFieldAccessor:function(a){var c,b=a.mapping,d=a.hasMapping()?b:a.ordinal;return a.mapping=d,c=this.callParent(arguments),a.mapping=b,c},getModelData:function(a){return{}}}),Ext.define("Ext.data.ArrayStore",{extend:Ext.data.Store,alias:"store.array",alternateClassName:["Ext.data.SimpleStore"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(a,d){if(this.expandData){for(var c=[],b=0,e=a.length;b<e;b++)c[c.length]=[a[b]];a=c}this.callParent([a,d])}}),Ext.define("Ext.data.StoreManager",{extend:Ext.util.MixedCollection,alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:!0,register:function(){for(var b,a=0;b=arguments[a];a++)this.add(b)},unregister:function(){for(var b,a=0;b=arguments[a];a++)this.remove(this.lookup(b))},lookup:function(a,g){if(Ext.isArray(a)){var b,c,f=["field1"],e=!Ext.isArray(a[0]),d=a;if(e)for(d=[],b=0,c=a.length;b<c;++b)d.push([a[b]]);else for(b=2,c=a[0].length;b<=c;++b)f.push("field"+b);return new Ext.data.ArrayStore({data:d,fields:f,autoDestroy:!0,autoCreated:!0,expanded:e})}return Ext.isString(a)?this.get(a):Ext.Factory.store(a,g)},getKey:function(a){return a.storeId}},function(){Ext.regStore=function(b,a){var c;if(Ext.isObject(b))a=b;else{if(Ext.data.StoreManager.containsKey(b))return Ext.data.StoreManager.lookup(b);a.storeId=b}return c=a instanceof Ext.data.Store?a:new Ext.data.Store(a),Ext.data.StoreManager.register(c),c},Ext.getStore=function(a){return Ext.data.StoreManager.lookup(a)},Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:!1}).isEmptyStore=!0}),Ext.define("Ext.app.domain.Store",{extend:Ext.app.EventDomain,singleton:!0,type:"store",prefix:"store.",idMatchRe:/^\#/,constructor:function(){this.callParent(),this.monitor(Ext.data.AbstractStore)},match:function(c,a){var b=!1,d=c.alias;return"*"===a?b=!0:this.idMatchRe.test(a)?b=c.getStoreId()===a.substring(1):d&&(b=-1<Ext.Array.indexOf(d,this.prefix+a)),b}}),Ext.define("Ext.app.route.Queue",{queue:null,token:null,constructor:function(a){Ext.apply(this,a),this.queue=new Ext.util.MixedCollection},queueAction:function(a,b){this.queue.add({route:a,args:b})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var a=this.queue.removeAt(0);a&&(a&&a.route).execute(this.token,a.args,this.onActionExecute,this)},onActionExecute:function(a){a?this.clearQueue():this.runQueue()}}),Ext.define("Ext.app.route.Route",{action:null,conditions:null,controller:null,allowInactive:!1,url:null,before:null,caseInsensitive:!1,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(c){var b,a=this;Ext.apply(a,c,{conditions:{}}),b=a.url,a.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g),a.paramsInMatchString=b.match(a.paramMatchingRegex)||[],a.matcherRegex=a.createMatcherRegex(b)},recognize:function(b){var e,c,a=this,d=a.controller;return!(!a.allowInactive&&!d.isActive()||!a.recognizes(b))&&(e=a.matchesFor(b),(c=b.match(a.matcherRegex)).shift(),Ext.applyIf(e,{controller:d,action:a.action,historyUrl:b,args:c}))},recognizes:function(a){return this.matcherRegex.test(a)},execute:function(h,d,f,g){var e=d.args||[],a=this.before,c=this.controller,b=this.createCallback(d,f,g);a?(e.push(b),Ext.isString(a)&&(a=this.before=c[a]),a&&a.apply(c,e)):b.resume()},matchesFor:function(f){var b={},d=this.paramsInMatchString,c=f.match(this.matcherRegex),a=0,e=d.length;for(c.shift();a<e;a++)b[d[a].replace(":","")]=c[a];return b},createMatcherRegex:function(b){for(var a,e,d=this.paramsInMatchString,g=this.conditions,c=0,j=d.length,i=Ext.util.Format.format,h=this.caseInsensitive?"i":"";c<j;c++)e=i("{0}",g[a=d[c]]||"([%a-zA-Z0-9\\-\\_\\s,]+)"),b=b.replace(new RegExp(a),e);return new RegExp("^"+b+"$",h)},createCallback:function(a,b,c){var d=this;return c=c||d,{resume:function(){var f,g=d.controller,e=d.action;Ext.isString(e)&&(e=g[e]),(f=(a=a&&a.args?a.args:[]).pop())&&!Ext.isObject(f)&&a.push(f),e&&(d.action=e).apply(g,a),b&&b.call(c)},stop:function(a){b&&b.call(c,a)}}}}),Ext.define("Ext.util.History",{singleton:!0,alternateClassName:"Ext.History",mixins:{observable:Ext.util.Observable},useTopWindow:!1,constructor:function(){var a=this;a.hiddenField=null,a.ready=!1,a.currentToken=null,a.mixins.observable.constructor.call(a)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(a){try{this.win.location.hash=a,this.currentToken=a}catch(b){}},handleStateChange:function(a){this.currentToken=a,this.fireEvent("change",a)},startUp:function(){var a=this;a.currentToken=a.getHash(),Ext.supports.Hashchange?Ext.get(a.win).on("hashchange",a.onHashChange,a):Ext.TaskManager.start({fireIdleEvent:!1,run:a.onHashChange,interval:50,scope:a}),a.ready=!0,a.fireEvent("ready",a)},onHashChange:function(){var a=this,b=a.getHash();b!==a.hash&&(a.hash=b,a.handleStateChange(b))},init:function(b,c){var a=this;a.ready?Ext.callback(b,c,[a]):Ext.isReady?(a.win=a.useTopWindow?window.top:window,a.hash=a.getHash(),b&&a.on("ready",b,c,{single:!0}),a.startUp()):Ext.onInternalReady(function(){a.init(b,c)})},add:function(a,d){var b=!1;return!1!==d&&this.getToken()===a||(this.setHash(a),b=!0),b},back:function(){(this.useTopWindow?window.top:window).history.go(-1)},forward:function(){(this.useTopWindow?window.top:window).history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}}),Ext.define("Ext.app.route.Router",{singleton:!0,multipleToken:"|",queueRoutes:!0,constructor:function(){var a=Ext.util.History;a.ready||a.init(),a.on("change",this.onStateChange,this),this.clear()},onStateChange:function(a){for(var e,h,b,c,g,d=this,l=d.application,j=d.routes,n=j.length,f=d.queueRoutes,k=a.split(d.multipleToken),i=0,m=k.length;i<m;i++){for(a=k[i],g=!1,f&&(h=new Ext.app.route.Queue({token:a})),e=0;e<n;e++)(c=(b=j[e]).recognize(a))&&(g=!0,f?h.queueAction(b,c):b.execute(a,c));f&&h.runQueue(),!g&&l&&l.fireEvent("unmatchedroute",a)}},connect:function(d,a,c){var b={url:d,action:a,controller:c};Ext.isObject(a)&&Ext.merge(b,a),this.routes.push(new Ext.app.route.Route(b))},disconnectAll:function(e){var a,b,d=this.routes,f=d.length,c=[];for(a=0;a<f;++a)(b=d[a]).controller!==e&&c.push(b);this.routes=c},recognize:function(f){for(var a,b,d=this.routes||[],c=0,e=d.length;c<e;c++)if(b=(a=d[c]).recognize(f))return{route:a,args:b};return!1},draw:function(a){a.call(this,this)},clear:function(){this.routes=[]}}),Ext.define("Ext.app.Controller",{extend:Ext.app.BaseController,statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"},profile:{getter:"getProfile",upper:"Profiles"}},controllerRegex:/^(.*)\.controller\./,profileRegex:/^(.*)\.profile\./,createGetter:function(a,b){return function(){return this[a](b)}},getGetterName:function(f,d){var a,b="get",c=f.split("."),e=c.length;for(a=0;a<e;a++)b+=Ext.String.capitalize(c[a]);return b+=d},resolveNamespace:function(f,e){var a,d,b=Ext.app.Controller,g=f.prototype.isProfile?b.profileRegex:b.controllerRegex;return a=Ext.getClassName(f),e.$namespace||e.namespace||Ext.app.getNamespace(a)||(d=g.exec(a))&&d[1]},processDependencies:function(m,p,o,f,a,n){if(a&&a.length){var h,i,j,g,b,l,d,e,c=this,k=c.strings[f];for(Ext.isArray(a)||(a=[a]),b=0,l=a.length;b<l;b++)g=a[b],h=c.getFullName(g,f,o,n),a[b]=i=h.absoluteName,j=h.shortName,p.push(i),m[d=c.getGetterName(j,k.upper)]||(m[d]=e=c.createGetter(k.getter,g)),e&&"controller"!==f&&(e["Ext.app.getter"]=!0)}},getFullName:function(a,g,f,e){var d,b,c=a;return 0<(d=a.indexOf("@"))?(c=a.substring(0,d),b=a.substring(d+1)+"."+c):!(0<a.indexOf(".")&&(Ext.ClassManager.isCreated(a)||this.hasRegisteredPrefix(a)))&&f?(b=f+"."+g+"."+(e?e+"."+a:a),c=a):b=a,{absoluteName:b,shortName:c}},hasRegisteredPrefix:function(a){var b=Ext.ClassManager.getPrefix(a);return b&&b!==a}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:!0,moduleClassName:null},onClassExtended:function(d,c,a){var b=a.onBeforeCreated;a.onBeforeCreated=function(g,f){var a,c,d=Ext.app.Controller,e=[];c=g.prototype,(a=d.resolveNamespace(g,f))&&(c.$namespace=a),d.processDependencies(c,e,a,"model",f.models),d.processDependencies(c,e,a,"view",f.views),d.processDependencies(c,e,a,"store",f.stores),d.processDependencies(c,e,a,"controller",f.controllers),Ext.require(e,Ext.Function.pass(b,arguments,this))}},constructor:function(a){this.initAutoGetters(),this.callParent(arguments)},normalizeRefs:function(a){var c=this,b=[];return a&&(Ext.isObject(a)?Ext.Object.each(a,function(c,a){Ext.isString(a)&&(a={selector:a}),a.ref=c,b.push(a)}):Ext.isArray(a)&&(b=Ext.Array.merge(b,a))),(a=c.refs)&&(c.refs=null,(a=c.normalizeRefs(a))&&(b=Ext.Array.merge(b,a))),b},getRefMap:function(){var b,d,f,c,e=this,a=e._refMap;if(!a&&(b=e.getRefs(),a=e._refMap={},b))for(c=0,f=b.length;c<f;c++)a[(d=b[c]).ref]=d.selector;return a},applyRefs:function(a){return this.normalizeRefs(Ext.clone(a))},updateRefs:function(a){a&&this.ref(a)},initAutoGetters:function(){var c,a,b=this.self.prototype;for(c in b)(a=b[c])&&a["Ext.app.getter"]&&a.call(this)},doInit:function(b){var a=this;a._initialized||(a.init(b),a._initialized=!0)},finishInit:function(f){var b,e,c=this,a=c.controllers;if(c._initialized&&a&&a.length)for(b=0,e=a.length;b<e;b++)c.getController(a[b]).finishInit(f)},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(!0)},deactivate:function(){this.setActive(!1)},isActive:function(){return this.getActive()},ref:function(b){var d,c,e,a=this,f=0,g=b.length;for(b=Ext.Array.from(b),a.references=a.references||[];f<g;f++)c=(d=b[f]).ref,a[e="get"+Ext.String.capitalize(c)]||(a[e]=Ext.Function.pass(a.getRef,[c,d],a)),a.references.push(c.toLowerCase())},addRef:function(a){this.ref(a)},getRef:function(d,a,e){var c=this.refCache||(this.refCache={}),b=c[d];return a=a||{},e=e||{},Ext.apply(a,e),a.forceCreate?Ext.ComponentManager.create(a,"component"):(b||(a.selector&&(c[d]=b=Ext.ComponentQuery.query(a.selector)[0]),!b&&a.autoCreate&&(c[d]=b=Ext.ComponentManager.create(a,"component")),b&&b.on("beforedestroy",function(){c[d]=null})),b)},hasRef:function(b){var a=this.references;return a&&-1!==Ext.Array.indexOf(a,b.toLowerCase())},getController:function(b){var a=this.getApplication();return b===this.getId()?this:a&&a.getController(b)},getStore:function(a){var c,b;return c=-1===a.indexOf("@")?a:a.split("@")[0],(b=Ext.StoreManager.get(c))||(a=Ext.app.Controller.getFullName(a,"store",this.$namespace))&&(b=Ext.create(a.absoluteName,{id:c})),b},getModel:function(b){var c=Ext.app.Controller.getFullName(b,"model",this.$namespace),a=Ext.ClassManager.get(c.absoluteName);return a=a||Ext.data.schema.Schema.lookupEntity(b)},getProfile:function(a){return a=Ext.app.Controller.getFullName(a,"profile",this.$namespace)},getView:function(b){var a=Ext.app.Controller.getFullName(b,"view",this.$namespace);return a&&Ext.ClassManager.get(a.absoluteName)},ensureId:function(){this.getId()||this.setId(this.getModuleClassName(this.$className,"controller"))},destroy:function(e,f){var b,c,a=this,d=a.application;if(!f&&d&&d.unregister(a),a.application=null,e)for(c in b=a.refCache)b.hasOwnProperty(c)&&Ext.destroy(b[c]);a.callParent()}}),Ext.define("Ext.app.domain.View",{extend:Ext.app.EventDomain,isInstance:!0,constructor:function(a){this.callParent(arguments),this.controller=a,this.monitoredClasses=[Ext.Component]},match:function(c,b,d){return"#"===b?d===c.getController():c.is(b)},destroy:function(){this.controller=null,this.callParent()}}),Ext.define("Ext.app.ViewController",{extend:Ext.app.BaseController,mixins:[Ext.mixin.Factoryable],isViewController:!0,factoryConfig:{type:"controller"},config:{closeViewAction:"destroy"},view:null,constructor:function(){this.compDomain=new Ext.app.domain.View(this),this.callParent(arguments)},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var a=this,b=a.compDomain;b&&(b.unlisten(a),b.destroy()),a.compDomain=a.view=null,a.callParent()},closeView:function(){var b=this.getView();b&&b[this.getCloseViewAction()]()},control:function(a,c){var b=a;Ext.isString(a)&&((b={})[a]=c),this.compDomain.listen(b,this)},listen:function(a,c){var b=a.component;b&&(delete(a=Ext.apply({},a)).component,this.control(b)),this.callParent([a,c])},getReferences:function(){var a=this.view;return a&&a.getReferences()},getView:function(){return this.view},lookup:function(b){var a=this.view;return a&&a.lookup(b)},lookupReference:function(a){return this.lookup(a)},getSession:function(){var a=this.view;return a&&a.lookupSession()},getViewModel:function(){var a=this.view;return a&&a.lookupViewModel()},getStore:function(b){var a=this.getViewModel();return a?a.getStore(b):null},fireViewEvent:function(e,d){var a=this.view,c=!1,b=arguments;return a&&(a!==d&&(b=Ext.Array.slice(b)).splice(1,0,a),c=a.fireEvent.apply(a,b)),c},privates:{view:null,ensureId:function(){this.getId()||this.setId(Ext.id(null,"controller-"))},attachReference:function(b){var a=this.view;a&&a.attachReference(b)},clearReference:function(b){var a=this.view;a&&a.clearReference(b)},clearReferences:function(){var a=this.view;a&&a.clearReferences()},setView:function(a){this.view=a,this.beforeInit.$nullFn||this.beforeInit(a)}}}),Ext.define("Ext.data.Batch",{mixins:{observable:Ext.mixin.Observable},config:{pauseOnException:!1},current:-1,total:0,running:!1,complete:!1,exception:!1,constructor:function(b){var a=this;a.mixins.observable.constructor.call(a,b),a.operations=[],a.exceptions=[]},add:function(a){var c,d,b=this;if(Ext.isArray(a))for(c=0,d=a.length;c<d;++c)b.add(a[c]);else b.total++,a.setBatch(b),b.operations.push(a);return b},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(b,e){var f=b.order-e.order;if(f)return f;var c,a=b.entityType,d=e.entityType;return a&&d?((c=a.rank)||(a.schema.rankEntities(),c=a.rank),(c-d.rank)*b.foreignKeyDirection):0},start:function(b){var a=this;return!a.operations.length||a.running?a:(a.exceptions.length=0,a.exception=!1,a.running=!0,a.runOperation(Ext.isDefined(b)?b:a.current+1))},retry:function(){return this.start(this.current)},runNextOperation:function(){var a=this;return a.running&&a.runOperation(a.current+1),a},pause:function(){return this.running=!1,this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var b=null,a=this.current;return-1===a||this.complete||(b=this.operations[a]),b},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(d){var a=this,c=a.operations,b=c[d];return void 0===b?(a.running=!1,a.complete=!0,a.fireEvent("complete",a,c[c.length-1])):(a.current=d,b.setInternalCallback(a.onOperationComplete),b.setInternalScope(a),b.execute()),a},onOperationComplete:function(b){var a=this,c=b.hasException();c&&(a.exception=!0,a.exceptions.push(b),a.fireEvent("exception",a,b)),c&&a.getPauseOnException()?a.pause():(a.fireEvent("operationcomplete",a,b),a.runNextOperation())}}),Ext.define("Ext.app.bind.Template",{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(d){var a,b=this,c=b._initters;for(a in b.text=d,c)b[a]=c[a]},_initters:{apply:function(a,b){return this.parse().apply(a,b)},getTokens:function(){return this.parse().getTokens()}},apply:function(h,i){var c,b,a,e=this.slots,d=this.buffer,g=e.length;for(c=0;c<g;++c)(b=e[c])&&(null==(a=h[b.pos])&&(a=""),b.not&&(a=!a),b.format&&(a=b.format(a,i)),d[c]=a);return d.join("")},getTokens:function(){return this.tokens},parse:function(){var h,n,f,c,o,a,e,b=this,g=b.text,j=[],m=[],k=[],i={},d=0,p=b.tokenRe,l=0;for(n in b._initters)delete b[n];for(b.buffer=j,b.slots=m,b.tokens=k;c=p.exec(g);)(f=c.index-d)&&(j[l++]=g.substring(d,d+f),d+=f),d+=(o=c[0]).length,(e=(a={fmt:h=c[3]||null,index:c[1]?parseInt(c[1],10):null,not:"!"===o.charAt(1),token:c[2]||null}).token||String(a.index))in i?a.pos=i[e]:(i[e]=a.pos=k.length,k.push(e)),h&&("this."===h.substring(0,5)?a.fmt=h.substring(5):a.scope=Ext.util.Format,b.parseArgs(c[4],a)),m[l++]=a;return d<g.length&&(j[l++]=g.substring(d)),b},parseArgs:function(e,d){var b,a,c,g,f=this,h=f.numberRe,i=f.stringRe;for(d=d||{},g=(a=e?e.indexOf(",")<0?[e]:e.split(","):[]).length,d.args=a,c=0;c<g;++c)if("true"===(b=a[c]))a[c]=!0;else if("false"===b)a[c]=!1;else if("null"===b)a[c]=null;else if(h.test(b))a[c]=parseFloat(b);else{if(!i.test(b)){d.fn=Ext.functionFactory("return ["+e+"];"),d.format=f._formatEval;break}a[c]=b.substring(1,b.length-1)}return d.format||(a.unshift(0),d.format=f._formatArgs),d},parseFormat:function(e){var b,c=this,d=c.formatRe.exec(e),a={fmt:e,scope:Ext.util.Format};return(b=d[2])?(a.fmt=d[1],c.parseArgs(b,a)):(a.args=[0],a.format=c._formatArgs),a},_formatArgs:function(b,a){return a=this.scope||a,this.args[0]=b,a[this.fmt].apply(a,this.args)},_formatEval:function(c,a){var b=this.fn();return b.unshift(c),(a=this.scope||a)[this.fmt].apply(a,b)}}),Ext.define("Ext.app.domain.Controller",{extend:Ext.app.EventDomain,singleton:!0,type:"controller",prefix:"controller.",idMatchRe:/^\#/,constructor:function(){this.callParent(),this.monitor(Ext.app.BaseController)},match:function(c,a){var b=!1,d=c.alias;return"*"===a?b=!0:"#"===a?b=!!c.isApplication:this.idMatchRe.test(a)?b=c.getId()===a.substring(1):d&&(b=-1<Ext.Array.indexOf(d,this.prefix+a)),b}}),Ext.define("Ext.data.PageMap",{extend:Ext.util.LruCache,config:{store:null,pageSize:0,rootProperty:""},clear:function(b){var a=this;a.pageMapGeneration=(a.pageMapGeneration||0)+1,a.indexMap={},a.callParent([b])},forEach:function(k,f){var a,c,e,g,i,d=this,b=Ext.Object.getKeys(d.map),h=b.length,j=d.getPageSize();for(a=0;a<h;a++)b[a]=+b[a];for(Ext.Array.sort(b,Ext.Array.numericSortFn),f=f||d,a=0;a<h;a++)for(e=b[a],i=(g=d.getPage(e)).length,c=0;c<i;c++)if(!1===k.call(f,g[c],(e-1)*j+c))return},findBy:function(d,a){var b=null;return a=a||this,this.forEach(function(c,e){if(d.call(a,c,e))return b=c,!1}),b},findIndexBy:function(d,a){var b=-1;return a=a||this,this.forEach(function(e,c){if(d.call(a,e))return b=c,!1}),b},find:function(f,a,h,d,e,c){if(Ext.isEmpty(a,!1))return null;var g=Ext.String.createRegex(a,d,e,c),b=this.getRootProperty();return this.findBy(function(a){return a&&g.test((b?a[b]:a)[f])},null,h)},findIndex:function(f,a,h,d,e,c){if(Ext.isEmpty(a,!1))return null;var g=Ext.String.createRegex(a,d,e,c),b=this.getRootProperty();return this.findIndexBy(function(a){return a&&g.test((b?a[b]:a)[f])},null,h)},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},addAll:function(a){this.addPage(1,a)},addPage:function(a,g){var b,f,h,e,c=this,d=c.getPageSize(),k=a+Math.floor((g.length-1)/d),i=(a-1)*d,j=c.indexMap;for(e=0;a<=k;a++,e+=d){for(f=0,h=(b=Ext.Array.slice(g,e,e+d)).length;f<h;f++)j[b[f].internalId]=i++;c.add(a,b),c.fireEvent("pageadd",c,a,b)}},getCount:function(){var a=this.callParent();return a=a&&(a-1)*this.getPageSize()+this.last.value.length},getByInternalId:function(b){var a=this.indexMap[b];if(null!=a)return this.getAt(a)},indexOf:function(b){var a=-1;return b&&null==(a=this.indexMap[b.internalId])&&(a=-1),a},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(d){var f,c,e,a=this,b=a.getPage(d);if(b&&!1!==a.fireEvent("beforepageremove",a,d,b)){for(f=b.length,c=0;c<f;c++)delete a.indexMap[b[c].internalId];e=a.callParent(arguments),a.fireEvent("pageremove",a,d,b),b.length=0}return e},getPage:function(a){return this.get(a)},hasRange:function(e,d){for(var a=this,c=a.getPageFromRecordIndex(e),b=a.getPageFromRecordIndex(d);c<=b;c++)if(!a.hasPage(c))return!1;return(b-1)*a._pageSize+a.getPage(b).length>d},hasPage:function(a){return!!this.get(a)},peekPage:function(a){return this.map[a]},getAt:function(a){return this.getRange(a,a+1)[0]},getRange:function(l,f){f--,this.hasRange(l,f)||Ext.raise("PageMap asked for range which it does not have");for(var d,i,b,c=this,k=Ext.Array,e=c.getPageSize(),g=c.getPageFromRecordIndex(l),h=c.getPageFromRecordIndex(f),m=(g-1)*e,n=h*e-1,a=g,j=[];a<=h;a++)b=a===g?0<(d=l-m):(d=0,!1),a===h&&(i=e-(n-f),b=b||i<e),b?k.push(j,k.slice(c.getPage(a),d,i)):k.push(j,c.getPage(a));return j},destroy:function(){this.callParent(),this.indexMap={}}}),Ext.define("Ext.data.BufferedStore",{extend:Ext.data.ProxyStore,alias:"store.buffered",isBufferedStore:!0,buffered:!0,config:{data:0,pageSize:25,remoteSort:!0,remoteFilter:!0,sortOnLoad:!1,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0,trackRemoved:!1},applyData:function(b){return this.data||(this.data=this.createDataCollection())},applyProxy:function(a){return(a=this.callParent([a]))&&a.setEnablePaging&&a.setEnablePaging(!0),a},createFiltersCollection:function(){return new Ext.util.FilterCollection},createSortersCollection:function(){return new Ext.util.SorterCollection},updateGroupField:function(a){this.group(a)},getGrouper:function(){return this.grouper},isGrouped:function(){return!!this.grouper},createDataCollection:function(){var a=this,b=new Ext.data.PageMap({store:a,rootProperty:"data",pageSize:a.getPageSize(),maxSize:a.getPurgePageCount(),listeners:{clear:a.onPageMapClear,scope:a}});return a.relayEvents(b,["beforepageremove","pageadd","pageremove"]),a.pageRequests={},b},removeAll:function(b){var a=this,c=a.getData();c&&(b&&a.suspendEvent("clear"),c.clear(),b&&a.resumeEvent("clear"))},flushLoad:function(){var b=this,a=b.pendingLoadOptions;if(b.clearLoadTask(),a)return b.getData().clear(),a.page=1,a.start=0,a.limit=b.getViewSize()||b.getDefaultViewSize(),a.loadCallback=a.callback,a.callback=null,b.loadToPrefetch(a)},reload:function(d){var c,b,j,k,g,e,h,l,a=this,f=a.getData(),i=Number.MAX_VALUE;if(d=d||{},!a.loading&&!1!==a.fireEvent("beforeload",a,d))for(e=function(){var d=a.totalCount,g=b-c;d<=b&&(b=d-1,c=Math.max(b-g,0)),a.rangeCached(c,Math.min(b,a.totalCount))&&(a.loading=!1,f.un("pageadd",e),l=f.getRange(c,b+1),a.fireEvent("load",a,l,!0),a.fireEvent("refresh",a))},h=Math.ceil((a.getLeadingBufferZone()+a.getTrailingBufferZone())/2),a.lastRequestStart&&a.preserveScrollOnReload?(c=a.lastRequestStart,b=a.lastRequestEnd,i=a.getTotalCount()):(c=d.start||0,b=c+(d.count||a.getPageSize())-1),f.clear(!0),delete a.totalCount,c=Math.max(c-h,0),b=Math.min(b+h,i),j=a.getPageFromRecordIndex(c),k=a.getPageFromRecordIndex(b),a.loading=!0,d.waitForReload=e,f.on("pageadd",e),g=j;g<=k;g++)a.prefetchPage(g,d)},filter:function(){this.callParent(arguments)},filterBy:function(b,a){},loadData:function(b,a){},loadPage:function(c,a){var b=this;return(a=a||{}).page=b.currentPage=c,a.start=(c-1)*b.getPageSize(),a.limit=b.getViewSize()||b.getDefaultViewSize(),a.loadCallback=a.callback,a.callback=null,b.loadToPrefetch(a)},clearData:function(c){var a=this.getData();a&&a.clear()},getCount:function(){return this.totalCount||0},getRange:function(c,b,f){var g,d,e,i,j,a=this,k=a.totalCount-1,m=a.lastRequestStart,l=[],h=a.getData();return f=Ext.apply({prefetchStart:c,prefetchEnd:b},f),b=b>=a.totalCount?k:b,d=0===c?0:c-1,e=b===k?b:b+1,a.lastRequestStart=c,a.lastRequestEnd=b,a.rangeCached(d,e)?(a.onRangeAvailable(f),l=h.getRange(c,b+1)):(a.fireEvent("cachemiss",a,c,b),i=a.getPageFromRecordIndex(d),j=a.getPageFromRecordIndex(e),g=function(l,k,m){i<=k&&k<=j&&a.rangeCached(d,e)&&(a.fireEvent("cachefilled",a,c,b),h.un("pageadd",g),a.onRangeAvailable(f))},h.on("pageadd",g),a.prefetchRange(c,b)),a.primeCache(c,b,c<m?-1:1),l},getById:function(b){return this.data.findBy(function(a){return a.getId()===b})},getAt:function(a){var b=this.getData();if(b.hasRange(a,a))return b.getAt(a)},getByInternalId:function(a){return this.data.getByInternalId(a)},contains:function(a){return-1<this.indexOf(a)},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},group:function(b,d){var c,a=this;b&&"string"==typeof b?(c=a.grouper)?void 0===d?c.toggle():c.setDirection(d):a.grouper=new Ext.util.Grouper({property:b,direction:d||"ASC",root:"data"}):a.grouper=b?a.getSorters().decodeSorter(b,"Ext.util.Grouper"):null,a.getData().clear(),a.loadPage(1,{callback:function(){a.fireEvent("groupchange",a,a.getGrouper())}})},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},calculatePageCacheSize:function(c){var a=this,b=a.getPurgePageCount();return b?Math.max(a.getData().getMaxSize()||0,2*Math.ceil((c+a.getTrailingBufferZone()+a.getLeadingBufferZone())/a.getPageSize())+b):0},loadToPrefetch:function(b){function j(){d=d||[],b.loadCallback&&b.loadCallback.call(b.scope||a,d,o,!0),b.callback&&b.callback.call(b.scope||a,d,e||0,k||0,b)}function n(){a.fireEvent("datachanged",a),a.fireEvent("refresh",a),a.fireEvent("load",a,d,!0)}var h,d,i,o,a=this,f=b,e=b.start,k=b.start+b.limit-1,m=a.getViewSize()||b.limit,c=Math.min(k,b.start+m-1),p=a.getPageFromRecordIndex(Math.max(e-a.getTrailingBufferZone(),0)),q=a.getPageFromRecordIndex(k+a.getLeadingBufferZone()),g=a.getData(),l=function(){a.rangeCached(e,c)&&(a.loading=!1,d=g.getRange(e,c+1),g.un("pageadd",l),a.hasListeners.guaranteedrange&&a.guaranteeRange(e,c,b.callback,b.scope),j(),n())};g.setMaxSize(a.calculatePageCacheSize(m)),!1!==a.fireEvent("beforeload",a,b)&&(delete a.totalCount,a.loading=!0,b.callback&&delete(f=Ext.apply({},b)).callback,a.on("prefetch",function(k,d,b,e){if(o=e,b)if(i=a.getTotalCount())for(g.on("pageadd",l),c=Math.min(c,i-1),q=a.getPageFromRecordIndex(Math.min(c+a.getLeadingBufferZone(),i-1)),h=p+1;h<=q;++h)a.prefetchPage(h,f);else j(),n();else a.loading=!1,j(),a.fireEvent("load",a,d,!1)},null,{single:!0}),a.prefetchPage(p,f))},prefetch:function(b){var e,f,a=this,c=a.getPageSize(),d=a.getData();return c?(a.lastPageSize&&c!=a.lastPageSize&&Ext.raise("pageSize cannot be dynamically altered"),d.getPageSize()||d.setPageSize(c)):a.pageSize=d.setPageSize(c=b.limit),a.lastPageSize=c,b.page||(b.page=a.getPageFromRecordIndex(b.start),b.start=(b.page-1)*c,b.limit=Math.ceil(b.limit/c)*c),(f=a.pageRequests[b.page])&&f.getOperation().pageMapGeneration===d.pageMapGeneration||(b=Ext.apply({action:"read",filters:a.getFilters().items,sorters:a.getSorters().items,grouper:a.getGrouper(),internalCallback:a.onProxyPrefetch,internalScope:a},b),(e=a.createOperation("read",b)).pageMapGeneration=d.pageMapGeneration,!1!==a.fireEvent("beforeprefetch",a,e)&&(a.pageRequests[b.page]=e.execute(),a.getProxy().isSynchronous&&delete a.pageRequests[b.page])),a},onPageMapClear:function(){var c,a=this,e=a.wasLoading,d=a.pageRequests,b=a.getData();for(c in b.clearListeners(),b.on("clear",a.onPageMapClear,a),a.relayEvents(b,["beforepageremove","pageadd","pageremove"]),a.loading=!0,a.totalCount=0,d)d.hasOwnProperty(c)&&d[c].getOperation().abort();a.fireEvent("clear",a),a.loading=e},prefetchPage:function(d,e){var a=this,b=a.getPageSize(),f=(d-1)*b,c=a.totalCount;void 0!==c&&a.data.getCount()===c||a.prefetch(Ext.applyIf({page:d,start:f,limit:b},e))},onProxyPrefetch:function(b){if(!this.destroyed){var j,f,a=this,g=b.getResultSet(),e=b.getRecords(),d=b.wasSuccessful(),i=b.getPage(),c=b.waitForReload,k=a.totalCount,h=a.pageRequests;if(b.pageMapGeneration===a.getData().pageMapGeneration){if(g&&(a.totalCount=g.getTotal(),a.totalCount!==k&&a.fireEvent("totalcountchange",a.totalCount)),void 0!==i&&delete a.pageRequests[i],a.loading=!1,a.fireEvent("prefetch",a,e,d,b),d)if(0===a.totalCount){if(c){for(j in h)(f=h[j].getOperation()).waitForReload===c&&delete f.waitForReload;a.getData().un("pageadd",c),a.fireEvent("load",a,[],!0),a.fireEvent("refresh",a)}}else a.cachePage(e,b.getPage());Ext.callback(b.getCallback(),b.getScope()||a,[e,b,d])}}},cachePage:function(b,d){var c,a=this,e=b.length;for(Ext.isDefined(a.totalCount)||(a.totalCount=b.length,a.fireEvent("totalcountchange",a.totalCount)),c=0;c<e;c++)b[c].join(a);a.getData().addPage(d,b)},rangeCached:function(a,b){return this.getData().hasRange(a,b)},pageCached:function(a){return this.getData().hasPage(a)},pagePending:function(a){return!!this.pageRequests[a]},rangeSatisfied:function(a,b){return this.rangeCached(a,b)},onRangeAvailable:function(a){var d,c=this,f=c.getTotalCount(),e=a.prefetchStart,b=a.prefetchEnd>f-1?f-1:a.prefetchEnd;b=Math.max(0,b),d=c.getData().getRange(e,b+1),!1!==a.fireEvent&&c.fireEvent("guaranteedrange",d,e,b,a),a.callback&&a.callback.call(a.scope||c,d,e,b,a)},guaranteeRange:function(d,e,b,c,a){a=Ext.apply({callback:b,scope:c},a),this.getRange(d,e+1,a)},prefetchRange:function(c,d){var e,f,b,a=this,g=a.getData();if(!a.rangeCached(c,d))for(e=a.getPageFromRecordIndex(c),f=a.getPageFromRecordIndex(d),g.setMaxSize(a.calculatePageCacheSize(d-c+1)),b=e;b<=f;b++)a.pageCached(b)||a.prefetchPage(b)},primeCache:function(a,b,g){var c=this,f=c.getLeadingBufferZone(),e=c.getTrailingBufferZone(),h=c.getPageSize(),d=c.totalCount;b=-1===g?(a=Math.max(a-f,0),Math.min(b+e,d-1)):1===g?(a=Math.max(Math.min(a-e,d-h),0),Math.min(b+f,d-1)):(a=Math.min(Math.max(Math.floor(a-(f+e)/2),0),d-c.pageSize),Math.min(Math.max(Math.ceil(b+(f+e)/2),0),d-1)),c.prefetchRange(a,b)},sort:function(b,a,c){0===arguments.length?this.clearAndLoad():this.getSorters().addSort(b,a,c)},onSorterEndUpdate:function(){var a=this,b=a.getSorters().getRange();b.length?(a.fireEvent("beforesort",a,b),a.clearAndLoad({callback:function(){a.fireEvent("sort",a,b)}})):a.fireEvent("sort",a,b)},clearAndLoad:function(a){this.getData().clear(),this.loadPage(1,a)},privates:{isLast:function(a){return this.indexOf(a)===this.getTotalCount()-1},isMoving:function(){return!1}}}),Ext.define("Ext.data.JsonP",{singleton:!0,requestCount:0,requests:{},timeout:3e4,disableCaching:!0,disableCachingParam:"_dc",callbackKey:"callback",request:function(a){a=Ext.apply({},a);var c,j,b=this,l=Ext.isDefined(a.disableCaching)?a.disableCaching:b.disableCaching,h=a.disableCachingParam||b.disableCachingParam,f=++b.requestCount,e=a.callbackName||"callback"+f,g=a.callbackKey||b.callbackKey,i=Ext.isDefined(a.timeout)?a.timeout:b.timeout,d=Ext.apply({},a.params),k=a.url,m=Ext.name;return l&&!d[h]&&(d[h]=Ext.Date.now()),(a.params=d)[g]=m+".data.JsonP."+e,j=b.createScript(k,d,a),b.requests[f]=c={url:k,params:d,script:j,id:f,scope:a.scope,success:a.success,failure:a.failure,callback:a.callback,callbackKey:g,callbackName:e},0<i&&(c.timeout=Ext.defer(b.handleTimeout,i,b,[c])),b.setupErrorHandling(c),b[e]=Ext.bind(b.handleResponse,b,[c],!0),b.loadScript(c),c},abort:function(a){var c,d=this,b=d.requests;if(a)a.id||(a=b[a]),d.handleAbort(a);else for(c in b)b.hasOwnProperty(c)&&d.abort(b[c])},setupErrorHandling:function(a){a.script.onerror=Ext.bind(this.handleError,this,[a])},handleAbort:function(a){a.errorType="abort",this.handleResponse(null,a)},handleError:function(a){a.errorType="error",this.handleResponse(null,a)},cleanupErrorHandling:function(a){a.script.onerror=null},handleTimeout:function(a){a.errorType="timeout",this.handleResponse(null,a)},handleResponse:function(d,a){var c=!0,b=Ext.GlobalEvents;a.timeout&&clearTimeout(a.timeout),delete this[a.callbackName],delete this.requests[a.id],this.cleanupErrorHandling(a),Ext.fly(a.script).destroy(),a.errorType?(c=!1,Ext.callback(a.failure,a.scope,[a.errorType])):Ext.callback(a.success,a.scope,[d]),Ext.callback(a.callback,a.scope,[c,d,a.errorType]),b.hasListeners.idle&&b.fireEvent("idle")},createScript:function(c,b,d){var a=document.createElement("script");return a.setAttribute("src",Ext.urlAppend(c,Ext.Object.toQueryString(b))),a.setAttribute("async",!0),a.setAttribute("type","text/javascript"),a},loadScript:function(a){Ext.getHead().appendChild(a.script)}}),Ext.define("Ext.data.NodeInterface",{statics:{decorate:function(f){var c,b,d,a=Ext.data.schema.Schema.lookupEntity(f),e=a.prototype;a.prototype.isObservable||a.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable),e.isNode||(c=e.idProperty,d=(b=a.getField(c)).type,a.override(this.getPrototypeBody()),a.addFields([{name:"parentId",type:d,defaultValue:null,allowNull:b.allowNull},{name:"index",type:"int",defaultValue:-1,persist:!1,convert:null},{name:"depth",type:"int",defaultValue:0,persist:!1,convert:null},{name:"expanded",type:"bool",defaultValue:!1,persist:!1,convert:null},{name:"expandable",type:"bool",defaultValue:!0,persist:!1,convert:null},{name:"checked",type:"auto",defaultValue:null,persist:!1,convert:null},{name:"leaf",type:"bool",defaultValue:!1},{name:"cls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"iconCls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"icon",type:"string",defaultValue:"",persist:!1,convert:null},{name:"root",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isLast",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isFirst",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"allowDrop",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"allowDrag",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"loaded",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"loading",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"href",type:"string",defaultValue:"",persist:!1,convert:null},{name:"hrefTarget",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtip",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtitle",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qshowDelay",type:"int",defaultValue:0,persist:!1,convert:null},{name:"children",type:"auto",defaultValue:null,persist:!1,convert:null},{name:"visible",type:"boolean",defaultValue:!0,persist:!1},{name:"text",type:"string",persist:!1}]))},getPrototypeBody:function(){var a={idchanged:!0,append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0,expand:!0,collapse:!0,beforeexpand:!0,beforecollapse:!0,sort:!0},b={silent:!0};return{isNode:!0,firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,constructor:function(){var a=this;return a.mixins.observable.constructor.call(a),a.callParent(arguments),a.childNodes=[],a},createNode:function(a){var h,f,g,c,d,e,b=this,j=b.childType,i=b.self;return a.isModel||(j?i=b.schema.getEntity(j):(f=(h=b.getTreeStore())&&h.getProxy().getReader(),c=(g=b.getProxy())?g.getReader():null,(d=!f||c&&c.initialConfig.typeProperty?c:f)&&(e=d.getTypeProperty())&&(i=d.getChildType(b.schema,a,e))),a=new i(a)),a.childNodes||(a.firstChild=a.lastChild=a.parentNode=a.previousSibling=a.nextSibling=null,a.childNodes=[]),a},isLeaf:function(){return!0===this.get("leaf")},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},updateInfo:function(o,k){var b,e,j,d,p,g,h,f,a=this,i=a.data,r=i.depth,m={},n=a.childNodes,q=n.length,s=a.phantom,t=a.fields,c=a.modified||(a.modified={}),l=k.parentId;for(b in k)if(j=t[a.fieldOrdinals[b]],e=k[b],h=j&&j.persist,d=i[b],((g=h&&"index"===b&&-1!==d&&l&&l!==c.parentId)||!a.isEqual(d,e))&&(i[b]=e,h))if(!g&&c.hasOwnProperty(b)){if(a.isEqual(c[b],e))for(p in delete c[b],a.dirty=!1,c)if(c.hasOwnProperty(p)){a.dirty=!0;break}}else a.dirty=!0,c[b]=d;if(o&&(a.commit(),a.phantom=s),a.data.depth!==r)for(m={depth:a.data.depth+1},f=0;f<q;f++)n[f].updateInfo(o,m)},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return!this.isLeaf()&&0<this.childNodes.length},isExpandable:function(){var a=this;return!!a.get("expandable")&&!(a.isLeaf()||a.isLoaded()&&!a.phantom&&!a.hasChildNodes())},triggerUIUpdate:function(){this.callJoined("afterEdit",[])},appendChild:function(b,h,l){var j,m,c,e,f,i,a=this,k={isLast:!0,parentId:a.getId(),depth:(a.data.depth||0)+1},d=a.getTreeStore(),g=d&&d.bulkUpdate;if(Ext.suspendLayouts(),Ext.isArray(b)){for(m=b.length,i=new Array(m),a.callTreeStore("beginFill"),j=0;j<m;j++)i[j]=a.appendChild(b[j],h,l);a.callTreeStore("endFill",[i])}else{if(b=a.createNode(b),!0!==h&&!1===a.fireEventArgs("beforeappend",[a,b]))return Ext.resumeLayouts(!0),!1;if(c=a.childNodes.length,e=b.parentNode){if(!0!==h&&!1===b.fireEventArgs("beforemove",[b,e,a,c]))return Ext.resumeLayouts(!0),!1;if(!1===e.removeChild(b,!1,h,e.getTreeStore()===d))return Ext.resumeLayouts(!0),!1}d&&d.beginUpdate(),0===(c=a.childNodes.length)&&a.setFirstChild(b),(a.childNodes[c]=b).parentNode=a,b.nextSibling=null,a.setLastChild(b),(f=a.childNodes[c-1])?((b.previousSibling=f).nextSibling=b,f.updateInfo(l,{isLast:!1}),g||f.triggerUIUpdate()):b.previousSibling=null,k.isFirst=0===c,k.index=c,b.updateInfo(l,k),a.isLeaf()&&a.set("leaf",!1),a.isLoaded()?1!==a.childNodes.length||g||a.triggerUIUpdate():g?a.data.loaded=!0:a.set("loaded",!0),c&&a.childNodes[c-1].isExpanded()&&!g&&a.childNodes[c-1].cascadeBy(a.triggerUIUpdate),d&&(d.registerNode(a,!g),g&&d.registerNode(b)),!0!==h&&(a.fireEventArgs("append",[a,b,c]),e&&b.fireEventArgs("move",[b,e,a,c])),a.callTreeStore("onNodeAppend",[b,c]),i=b,d&&d.endUpdate()}return Ext.resumeLayouts(!0),i},getOwnerTree:function(){var a=this.getTreeStore();if(a)return a.ownerTree},getTreeStore:function(){for(var a=this;a&&!a.treeStore;)a=a.parentNode;return a&&a.treeStore},removeChild:function(a,m,i,f){var g,l,d,j,c=this,h=c.indexOf(a),e=c.getTreeStore(),k=e&&e.bulkUpdate;if(-1===h||!0!==i&&!1===c.fireEventArgs("beforeremove",[c,a,!!f]))return!1;if(Ext.suspendLayouts(),e&&e.beginUpdate(),Ext.Array.erase(c.childNodes,h,1),c.firstChild===a&&c.setFirstChild(a.nextSibling),c.lastChild===a&&c.setLastChild(a.previousSibling),(d=a.previousSibling)&&(a.previousSibling.nextSibling=a.nextSibling),a.nextSibling)for(a.nextSibling.previousSibling=a.previousSibling,0===h&&a.nextSibling.updateInfo(!1,{isFirst:!0}),g=h,l=c.childNodes.length;g<l;g++)c.childNodes[g].updateInfo(!1,{index:g});else d&&(d.updateInfo(!1,{isLast:!0}),k||(d.isExpanded()?d.cascadeBy(c.triggerUIUpdate):d.triggerUIUpdate()));return c.childNodes.length||k||c.triggerUIUpdate(),Ext.resumeLayouts(!0),!0!==i&&(j={parentNode:a.parentNode,previousSibling:a.previousSibling,nextSibling:a.nextSibling},c.callTreeStore("beforeNodeRemove",[[a],!!f]),a.previousSibling=a.nextSibling=a.parentNode=null,c.fireEventArgs("remove",[c,a,!!f,j]),c.callTreeStore("onNodeRemove",[[a],!!f])),m?a.erase(!0):a.clear(),f||a.set({parentId:null,lastParentId:c.getId()},b),e&&e.endUpdate(),a},copy:function(d,e){var b,a=this,c=a.callParent([d]),f=a.childNodes?a.childNodes.length:0;if(e)for(b=0;b<f;b++)c.appendChild(a.childNodes[b].copy(void 0,!0));return c},clear:function(b){var a=this;a.parentNode=a.previousSibling=a.nextSibling=null,b&&(a.firstChild=a.lastChild=a.childNodes=null)},drop:function(){var c,e,a,b=this,d=b.childNodes,f=b.parentNode,g=d?d.length:0;for(b.callParent(),f?(a=b.getTreeStore(),f.removeChild(b)):b.get("root")&&(a=b.getTreeStore()).setRoot(null),a&&a.beginUpdate(),c=0;c<g;c++)(e=d[c]).clear(),e.drop();a&&a.endUpdate()},erase:function(e){var b,d,a=this,c=a.childNodes,f=c&&c.length;for(a.remove(),a.clear(!0),a.callParent([e]),b=0;b<f;b++)(d=c[b]).parentNode=null,d.erase(e)},insertBefore:function(b,e,i){var l,h,g,a=this,k=a.indexOf(e),f=b.parentNode,d=k,c=a.getTreeStore(),j=c&&c.bulkUpdate;if(!e)return a.appendChild(b);if(b===e)return!1;if(b=a.createNode(b),!0!==i&&!1===a.fireEventArgs("beforeinsert",[a,b,e]))return!1;if(f===a&&a.indexOf(b)<k&&d--,f){if(!0!==i&&!1===b.fireEventArgs("beforemove",[b,f,a,k,e]))return!1;if(!1===f.removeChild(b,!1,i,f.getTreeStore()===c))return!1}for(c&&c.beginUpdate(),0===d&&a.setFirstChild(b),Ext.Array.splice(a.childNodes,d,0,b),b.parentNode=a,(b.nextSibling=e).previousSibling=b,(h=a.childNodes[d-1])?(b.previousSibling=h).nextSibling=b:b.previousSibling=null,b.updateInfo(!1,{parentId:a.getId(),index:d,isFirst:0===d,isLast:!1,depth:(a.data.depth||0)+1}),g=d+1,l=a.childNodes.length;g<l;g++)a.childNodes[g].updateInfo(!1,{index:g});return a.isLoaded()?1!==a.childNodes.length||j||a.triggerUIUpdate():j?a.data.loaded=!0:a.set("loaded",!0),c&&c.registerNode(a,!j),!0!==i&&(a.fireEventArgs("insert",[a,b,e]),f&&b.fireEventArgs("move",[b,f,a,d,e])),a.callTreeStore("onNodeInsert",[b,d]),c&&c.endUpdate(),b},insertChild:function(c,b){var a=this.childNodes[c];return a?this.insertBefore(b,a):this.appendChild(b)},isLastVisible:function(){var b=this,c=b.data.isLast,a=b.nextSibling;if(c||!b.getTreeStore().isFiltered())return c;for(;a;){if(a.data.visible)return!1;a=a.nextSibling}return!0},remove:function(c,d){var a=this,b=a.parentNode;return b?b.removeChild(a,c,d):c&&a.erase(!0),a},removeAll:function(i,h,f){var c,b,e,a=this,d=a.childNodes,g=d.length;if(g){for(f||(b=a.getTreeStore())&&(b.beginUpdate(),b.suspendEvent("remove"),a.callTreeStore("beforeNodeRemove",[d,!1])),e=0;e<g;++e)(c=d[e]).previousSibling=c.nextSibling=c.parentNode=null,a.fireEventArgs("remove",[a,c,!1]),i?c.erase(!0):c.removeAll(!1,h,!0);return!f&&b&&(b.resumeEvent("remove"),a.callTreeStore("onNodeRemove",[d,!1]),b.endUpdate()),a.firstChild=a.lastChild=null,d.length=0,f||a.triggerUIUpdate(),a}},getChildAt:function(a){return this.childNodes[a]},replaceChild:function(c,a,b){var d=a?a.nextSibling:null;return this.removeChild(a,!1,b),this.insertBefore(c,d,b),a},indexOf:function(a){return Ext.Array.indexOf(this.childNodes,a)},indexOfId:function(d){for(var b=this.childNodes,c=b.length,a=0;a<c;++a)if(b[a].getId()===d)return a;return-1},getPath:function(c,a){c=c||this.idProperty,a=a||"/";for(var d=[this.get(c)],b=this.parentNode;b;)d.unshift(b.get(c)),b=b.parentNode;return a+d.join(a)},getDepth:function(){return this.get("depth")},bubble:function(d,b,c){for(var a=this;a&&!1!==d.apply(b||a,c||[a]);)a=a.parentNode},cascade:function(){return Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.data.Node: cascade has been deprecated. Please use cascadeBy instead."),this.cascadeBy.apply(this,arguments)},cascadeBy:function(a,e,f,d){var b=this;if(1!==arguments.length||Ext.isFunction(a)||(d=a.after,e=a.scope,f=a.args,a=a.before),!a||!1!==a.apply(e||b,f||[b])){var c,g=b.childNodes,h=g.length;for(c=0;c<h;c++)g[c].cascadeBy.call(g[c],a,e,f,d);d&&d.apply(e||b,f||[b])}},eachChild:function(f,d,e){var a,b=this.childNodes,c=b.length;for(a=0;a<c&&!1!==f.apply(d||this,e||[b[a]]);a++);},findChild:function(a,b,c){return this.findChildBy(function(){return this.get(a)==b},null,c)},findChildBy:function(g,d,e){for(var a,b,f=this.childNodes,h=f.length,c=0;c<h;c++){if(a=f[c],!0===g.call(d||a,a))return a;if(e&&null!==(b=a.findChildBy(g,d,e)))return b}return null},contains:function(a){return a.isAncestor(this)},isAncestor:function(b){for(var a=this.parentNode;a;){if(a===b)return!0;a=a.parentNode}return!1},sort:function(e,i,h){var b,d,c=this,a=c.childNodes,g=a.length,f={isFirst:!0};if(0<g){for(e=e||c.getTreeStore().getSortFn(),Ext.Array.sort(a,e),c.setFirstChild(a[0]),c.setLastChild(a[g-1]),b=0;b<g;b++)(d=a[b]).previousSibling=a[b-1],d.nextSibling=a[b+1],f.isLast=b===g-1,f.index=b,d.updateInfo(!1,f),f.isFirst=!1,i&&!d.isLeaf()&&d.sort(e,!0,!0);!0!==h&&(c.fireEventArgs("sort",[c,a]),c.callTreeStore("onNodeSort",[a]))}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isBranchLoaded:function(){var a=!this.isLeaf()&&this.isLoaded();return a&&this.cascadeBy(function(b){return b.isLeaf()||(a=a||b.isBranchLoaded()),a}),a},isLoading:function(){return this.get("loading")},isRoot:function(){return!this.parentNode},isVisible:function(){for(var a=this.parentNode;a;){if(!a.isExpanded())return!1;a=a.parentNode}return!0},expand:function(e,c,d){var b,f,a=this;a.isLeaf()?Ext.callback(c,d||a):a.isLoading()?a.on("expand",function(){a.expand(e,c,d)},a,{single:!0}):a.isExpanded()?e?a.expandChildren(!0,c,d):Ext.callback(c,d||a,[a.childNodes]):!1!==a.fireEventArgs("beforeexpand",[a])&&(e&&(a.parentNode&&a.parentNode.isSynchronousRecursiveExpand?a.isSynchronousRecursiveExpand=!0:((b=a.getTreeStore()).getProxy().isSynchronous||a.isBranchLoaded())&&(a.isSynchronousRecursiveExpand=!0,b.suspendEvent("add"),f=!0)),a.callTreeStore("onBeforeNodeExpand",[a.onChildNodesAvailable,a,[e,c,d]]),f&&(b.resumeEvent("add"),b.fireEvent("refresh",b)),a.isSynchronousRecursiveExpand=!1)},onChildNodesAvailable:function(h,j,g,i){var a,d,c,b=this,f=b.getTreeStore(),e=f&&f.bulkUpdate;for(Ext.suspendLayouts(),a=b.parentNode;a;a=a.parentNode)a.isExpanded()||(c=c||[]).unshift(a);if(e?b.data.expanded=!0:b.set("expanded",!0),c){for(d=1;d<c.length;d++)a=c[d],e?a.data.expanded=!0:a.set("expanded",!0);for(c[0].expand(),d=1;d<c.length;d++)(a=c[d]).fireEventArgs("expand",[a,a.childNodes])}else b.callTreeStore("onNodeExpand",[h,!1]);b.fireEventArgs("expand",[b,h]),j?b.expandChildren(!0,g,i):Ext.callback(g,i||b,[b.childNodes]),Ext.resumeLayouts(!0)},expandChildren:function(l,d,i,b){var k,a,e,c,f,j,h,g=this;for(Ext.isBoolean(d)&&(k=d,d=i,i=b,b=k),void 0===b&&(b=(h=g.getTreeStore())&&h.singleExpand),e=g.childNodes,c=[],f=b?Math.min(e.length,1):e.length,a=0;a<f;++a)(j=e[a]).isLeaf()||(c[c.length]=j);for(f=c.length,a=0;a<f;++a)c[a].expand(l);d&&Ext.callback(d,i||g,[g.childNodes])},collapse:function(f,b,d){var c,e,a=this,j=a.isExpanded(),g=a.getTreeStore(),i=g&&g.bulkUpdate,h=a.childNodes.length;if(!a.isLeaf()&&(!j&&f||!1!==a.fireEventArgs("beforecollapse",[a]))){if(Ext.suspendLayouts(),a.isExpanded())b=f?(e=function(){for(c=0;c<h;c++)a.childNodes[c].setCollapsed(!0)},b?Ext.Function.createSequence(e,Ext.Function.bind(b,d,[a.childNodes])):e):b&&Ext.Function.bind(b,d,[a.childNodes]),i?a.data.expanded=!1:a.set("expanded",!1),a.callTreeStore("onNodeCollapse",[a.childNodes,b,d]),a.fireEventArgs("collapse",[a,a.childNodes]),b=null;else if(f)for(c=0;c<h;c++)a.childNodes[c].setCollapsed(!0);Ext.resumeLayouts(!0)}Ext.callback(b,d||a,[a.childNodes])},setCollapsed:function(c){var b,a=this,d=a.childNodes.length;if(!a.isLeaf()&&!1!==a.fireEventArgs("beforecollapse",[a])&&(a.data.expanded=!1,a.fireEventArgs("collapse",[a,a.childNodes]),c))for(b=0;b<d;b++)a.childNodes[b].setCollapsed(!0)},collapseChildren:function(e,g,h){var a,b,f=this.childNodes,c=f.length,d=[];for(a=0;a<c;++a)!(b=f[a]).isLeaf()&&b.isLoaded()&&b.isExpanded()&&d.push(b);if(c=d.length)for(a=0;a<c;++a)b=d[a],a===c-1?b.collapse(e,g,h):b.collapse(e);else Ext.callback(g,h)},fireEvent:function(a){return this.fireEventArgs(a,Ext.Array.slice(arguments,1))},fireEventArgs:function(c,g){var d,b,f,e=Ext.mixin.Observable.prototype.fireEventArgs;if(a[c]){for(b=this;!1!==d&&b;b=(f=b).parentNode)b.hasListeners&&b.hasListeners[c]&&(d=e.call(b,c,g));return!1!==d&&(b=f.getTreeStore())&&b.hasListeners&&b.hasListeners[c="node"+c]&&(d=b.fireEventArgs(c,g)),d}return e.apply(this,arguments)},serialize:function(g){var c,a,e=g||new Ext.data.writer.Json({writeAllFields:!0}),d=e.getRecordData(this),b=this.childNodes,f=b.length;if(0<f)for(d.children=c=[],a=0;a<f;a++)c.push(b[a].serialize(e));return d},callTreeStore:function(e,a){var c=this,b=c.getTreeStore(),d=b&&b[e];b&&d&&((a=a||[])[0]!==c&&a.unshift(c),d.apply(b,a))},privates:{join:function(a){a.isTreeStore?this.isRoot()&&(this.treeStore=this.store=a):this.callParent([a])},callJoined:function(a,b){this.callParent([a,b]),this.callTreeStore(a,b)}}}}}}),Ext.define("Ext.mixin.Queryable",{mixinId:"queryable",isQueryable:!0,query:function(a){return a=a||"*",Ext.ComponentQuery.query(a,this.getQueryRoot())},queryBy:function(g,e){for(var a,d=[],c=this.getQueryRoot().getRefItems(!0),b=0,f=c.length;b<f;++b)a=c[b],!1!==g.call(e||a,a)&&d.push(a);return d},queryById:function(a){return this.down(Ext.makeIdSelector(a))},child:function(b){var a=this.getQueryRoot().getRefItems();return b&&b.isComponent?this.matchById(a,b.getItemId()):(b&&(a=Ext.ComponentQuery.query(b,a)),a.length?a[0]:null)},down:function(a){return a&&a.isComponent?this.matchById(this.getRefItems(!0),a.getItemId()):(a=a||"",this.query(a)[0]||null)},visitPreOrder:function(b,d,c,a){Ext.ComponentQuery._visit(!0,b,this.getQueryRoot(),d,c,a)},visitPostOrder:function(b,d,c,a){Ext.ComponentQuery._visit(!1,b,this.getQueryRoot(),d,c,a)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(c,e){var a,b,d=c.length;for(a=0;a<d;++a)if((b=c[a]).getItemId()===e)return b;return null}}}),Ext.define("Ext.data.TreeModel",{extend:Ext.data.Model,mixins:[Ext.mixin.Queryable],getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode},statics:{defaultProxy:"memory"}},function(){Ext.data.NodeInterface.decorate(this)}),Ext.define("Ext.data.Request",{config:{action:void 0,params:void 0,method:"GET",url:null,operation:null,proxy:null,disableCaching:!1,headers:{},callbackKey:null,rawRequest:null,jsonData:void 0,xmlData:void 0,withCredentials:!1,username:null,password:null,binary:!1,callback:null,scope:null,timeout:3e4,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(a){this.initConfig(a)},getParam:function(b){var a=this.getParams();if(a)return a[b]},setParam:function(c,b){var a=this.getParams()||{};a[c]=b,this.setParams(a)}}),Ext.define("Ext.data.TreeStore",{extend:Ext.data.Store,alias:"store.tree",isTreeStore:!0,config:{root:null,rootVisible:!1,defaultRootProperty:"children",parentIdProperty:null,clearOnLoad:!0,clearRemovedOnLoad:!0,nodeParam:"node",defaultRootId:"root",defaultRootText:"Root",folderSort:!1},lazyFill:!1,fillCount:0,bulkUpdate:0,_silentOptions:{silent:!0},implicitModel:"Ext.data.TreeModel",constructor:function(b){this.byIdMap={},this.callParent([b])},applyFields:function(a,c){var b=this;a&&b.defaultRootProperty!==b.self.prototype.config.defaultRootProperty&&(a=a.concat({name:b.defaultRootProperty,type:"auto",defaultValue:null,persist:!1})),b.callParent([a,c])},onSorterEndUpdate:function(){var a=this,b=a.getSorters().getRange(),c=a.getRoot(),e=a.getFolderSort();a.fireEvent("beforesort",a,b),c&&(e||b.length)?a.getRemoteSort()?b.length&&a.load({callback:function(){a.fireEvent("sort",a,b)}}):(c.sort(this.getSortFn(),!0),a.fireEvent("datachanged",a),a.fireEvent("refresh",a),a.fireEvent("sort",a,b)):a.fireEvent("sort",a,b)},updateFolderSort:function(a){this.needsFolderSort=a,this.onSorterEndUpdate()},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var a=this,b=this.sorters.getSortFn();return function(d,e){var c=0;return a.needsFolderSort&&(c=(d.data.leaf?1:0)-(e.data.leaf?1:0)),a.needsIndexSort&&0===c&&(c=d.data.index-e.data.index),c||b(d,e)}},getTotalCount:function(){return this.getCount()},afterEdit:function(b,c){var a=this;a.needsLocalFilter()&&a.doFilter(b),a.callParent([b,c])},afterReject:function(b){var a=this;a.contains(b)&&(a.onUpdate(b,Ext.data.Model.REJECT,null),a.fireEvent("update",a,b,Ext.data.Model.REJECT,null))},afterCommit:function(c,a){var b=this;a=a||null,b.contains(c)&&(b.onUpdate(c,Ext.data.Model.COMMIT,a),b.fireEvent("update",b,c,Ext.data.Model.COMMIT,a))},fireChangeEvent:function(a){return!!this.byIdMap[a.id]},updateRootVisible:function(c){var b,a=this.getRoot();a&&(b=this.getData(),c?b.insert(0,a):b.remove(a))},updateTrackRemoved:function(a){this.callParent(arguments),this.removedNodes=this.removed,this.removed=null},onDestroyRecords:function(c,b,a){a&&(this.removedNodes.length=0)},updateProxy:function(a){var b;a&&(a.setIdParam&&a.setIdParam(this.getNodeParam()),b=a.getReader(),Ext.isEmpty(b.getRootProperty())&&b.setRootProperty(this.getDefaultRootProperty()))},setProxy:function(a){this.changingProxy=!0,this.callParent([a]),this.changingProxy=!1},updateModel:function(a){var b=a.prototype.isNode;Ext.data.NodeInterface.decorate(a),b||this.changingProxy||this.getProxy().getReader().buildExtractors(!0)},onFilterEndUpdate:function(d){var g,h,c,f,a=this,e=d.length,b=a.getRoot();if(a.getRemoteFilter())a.callParent([d]);else{if(e?a.doFilter(b):b.cascadeBy({after:function(b){b.set("visible",!0,a._silentOptions)}}),e)for(c=[],f=0,e=(g=b.childNodes).length;f<e;f++)(h=g[f]).get("visible")&&c.push(h);else c=b.childNodes;a.onNodeFilter(b,c),b.fireEvent("filterchange",b,c),a.fireEvent("filterchange",a,d),a.suppressNextFilter=!0,a.callParent([d]),a.suppressNextFilter=!1}},onNodeFilter:function(c,d){var a=this,e=a.getData(),b=[];a.getRootVisible()&&(d.length?b.push(c):c.set("visible",!1,a._silentOptions)),a.handleNodeExpand(c,d,b),a.suspendEvents(),e.splice(0,e.getCount(),b),a.resumeEvents(),a.suppressNextFilter||(a.fireEvent("datachanged",a),a.fireEvent("refresh",a))},onBeforeNodeExpand:function(a,f,h,c){var k,i,e,j,g,b,d=this;a.isLoaded()?(b=[a.childNodes],c&&b.push.apply(b,c),Ext.callback(f,h||a,b)):a.isLoading()?d.on("load",function(){b=[a.childNodes],c&&b.push.apply(b,c),Ext.callback(f,h||a,b)},d,{single:!0,priority:1001}):(k=d.getProxy().getReader(),(g=(j=(e=(i=a.getProxy())?i.getReader():null)&&e.initialConfig.rootProperty?e:k).getRoot(a.raw||a.data))||a.phantom&&!a.isRoot()?(g&&d.fillNode(a,j.extractData(g,{model:a.childType,recordCreator:d.recordCreator})),b=[a.childNodes],c&&b.push.apply(b,c),Ext.callback(f,h||a,b)):(d.read({node:a,onChildNodesAvailable:function(){delete d.lastOptions.onChildNodesAvailable,b=[a.childNodes],c&&b.push.apply(b,c),Ext.callback(f,h||a,b)}}),d.flushLoad()))},onNodeExpand:function(b,e){var a=this,d=a.indexOf(b)+1,c=[];a.handleNodeExpand(b,e,c),a.refreshCounter||!b.isRoot()||b.get("visible")?a.insert(d,c):a.loadRecords(c)},handleNodeExpand:function(d,c,e){var b,a,f=c?c.length:0;if((d===this.getRoot()||this.isVisible(d))&&f)for(b=0;b<f;b++)(a=c[b]).get("visible")&&(e.push(a),a.isExpanded()&&(a.isLoaded()?this.handleNodeExpand(a,a.childNodes,e):(a.set("expanded",!1),a.expand())))},onNodeCollapse:function(e,b,f,g){var c,a=this,d=a.indexOf(e)+1;a.needsLocalFilter()&&(b=Ext.Array.filter(b,a.filterVisible)),b.length&&a.data.contains(b[0])&&(c=a.indexOfNextVisibleNode(e),a.removeAt(d,c-d)),Ext.callback(f,g)},indexOfNextVisibleNode:function(b){for(var a;b.parentNode;){for(a=b.nextSibling;a&&!a.get("visible");a=a.nextSibling);if(a)return this.indexOf(a);b=b.parentNode}return this.getCount()},filterNew:function(a){return!a.get("root")&&this.callParent([a])},filterRejects:function(a){return!a.get("root")&&this.callParent([a])},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew,this)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(f,a){Ext.isArray(a)||(a=[a]);var c,d,b=this,e=a.length;for(c=0;!d&&c<e;c++)a[c].get("visible")&&(d=a[c]);d?(b.startRemoveIndex=b.indexOf(a[0]),b.lastRemoveIndexPlusOne=b.indexOfNextVisibleNode(a[a.length-1])):(b.startRemoveIndex=-1,b.lastRemoveIndexPlusOne=0)},afterDrop:Ext.emptyFn,onNodeRemove:function(i,d,f){var b,a=this,e=a.removedNodes,h=d.length,c=a.startRemoveIndex,g=a.lastRemoveIndexPlusOne;for(a.suspendAutoSync(),-1!==c&&(a.removeIsMove=f,a.removeAt(c,g-c),a.removeIsMove=!1),b=0;b<h;b++)d[b].cascadeBy(function(b){a.unregisterNode(b),e&&!f&&(b.phantom||b.erasing||a.loading||(b.removedFrom=a.indexOf(b),e.push(b),a.needsSync=!0))});a.resumeAutoSync()},onNodeAppend:function(a,c,b){this.onNodeInsert(a,c,b)},onNodeInsert:function(h,a,l){var g,c,j,e,d,i,f,b=this,m=a.raw||a.data,k=b.removedNodes;if(h&&b.needsLocalFilter()&&b.doFilter(h),b.beginUpdate(),b.isVisible(a)){if(0!==l&&a.previousSibling){for(c=a.previousSibling;c&&!c.get("visible");c=c.previousSibling);for(;c.isExpanded()&&c.lastChild;)c=c.lastChild;g=c}else g=h;b.insert(b.indexOf(g)+1,a),!a.isLeaf()&&a.isExpanded()&&(a.isLoaded()?b.onNodeExpand(a,a.childNodes):b.fillCount||(a.set("expanded",!1),a.expand()))}Ext.Array.remove(k,a),b.needsSync=b.needsSync||a.phantom||a.dirty,a.isLeaf()||a.isLoaded()||b.lazyFill||(j=b.getProxy().getReader(),(f=(i=(d=(e=a.getProxy())?e.getReader():null)&&d.initialConfig.rootProperty?d:j).getRoot(m))&&b.fillNode(a,i.extractData(f,{model:a.childType,recordCreator:b.recordCreator}))),b.endUpdate()},registerNode:function(c,f){var b,d,a;if(this.byIdMap[c.id]=c,!0===f)for(d=(b=c.childNodes).length,a=0;a<d;a++)this.registerNode(b[a],!0)},unregisterNode:function(d,f){var b,c,a;if(delete this.byIdMap[d.id],!0===f)for(c=(b=d.childNodes).length,a=0;a<c;a++)this.unregisterNode(b[a],!0)},onNodeSort:function(b,c){var a=this;a.suspendAutoSync(),(-1!==a.indexOf(b)&&b.isExpanded()||b===a.getRoot()&&!a.getRootVisible())&&(Ext.suspendLayouts(),a.onNodeCollapse(b,c),a.onNodeExpand(b,c),Ext.resumeLayouts(!0)),a.resumeAutoSync(a.autoSync)},applyRoot:function(a){var b=this,e=b.getModel(),d=e.prototype.idProperty,c=b.getDefaultRootId();return a&&!a.isNode&&(a=Ext.apply({text:b.getDefaultRootText(),root:!0,isFirst:!0,isLast:!0,depth:0,index:0,parentId:null,allowDrag:!1},a),c&&void 0===a[d]&&(a[d]=c),a=new e(a)),a},updateRoot:function(b,c){var d,e,a=this,f=!c;if(a.byIdMap={},a.getTrackRemoved(),a.suspendEvent("add","remove"),c&&c.isModel&&(e=a.getRootVisible()?[c]:c.childNodes,a.beforeNodeRemove(null,e),c.set("root",!1),a.onNodeRemove(null,e),c.fireEvent("remove",null,c,!1),c.fireEvent("rootchange",null),c.clearListeners(),c.store=c.treeStore=null),a.getData().clear(),b)if(!1===b.fireEventArgs("beforeappend",[null,b]))b=null;else{if(d=b.parentNode){if(!d.removeChild(b,!1,!1,d.getTreeStore()===a))return}else(d=b.getTreeStore())&&d!==a&&b===d.getRoot()&&d.setRoot(null);b.store=b.treeStore=a,b.set("root",!0),b.updateInfo(!0,{isFirst:!0,isLast:!0,depth:0,index:0,parentId:null}),a.registerNode(b,!0),b.fireEvent("append",null,b,!1),b.fireEvent("rootchange",b),a.onNodeAppend(null,b,0),b.phantom=!0}a.fireEvent("rootchange",b,c),b&&(a.getAutoLoad()||b.isExpanded())?b.isLoaded()?(a.onNodeExpand(b,b.childNodes),a.fireEvent("datachanged",a),a.fireEvent("refresh",a)):(b.data.expanded=!1,b.expand(!1,function(){a.fireEvent("datachanged",a),a.fireEvent("refresh",a)})):f||(a.fireEvent("datachanged",a),a.fireEvent("refresh",a)),a.resumeEvent("add","remove")},getNodeById:function(a){return this.byIdMap[a]||null},findNode:function(f,a,d,e,c){if(Ext.isEmpty(a,!1))return null;if(a===this.model.idProperty&&arguments.length<3)return this.byIdMap[a];var g=Ext.String.createRegex(a,d,e,c),b=null;return Ext.Object.eachValue(this.byIdMap,function(a){if(a&&g.test(a.get(f)))return b=a,!1}),b},load:function(b){var a=b&&b.node;if(!a&!(a=this.getRoot()))a=this.setRoot({expanded:!0});else if(!a.isLoading())return this.callParent([b])},flushLoad:function(){var b,g,i,e,f,h,a=this,c=a.pendingLoadOptions,d=a.getClearOnLoad();if(a.clearLoadTask(),c)return e=(b=c.node||a.getRoot())&&b.isRoot()&&b.isLoaded()&&d,g=c.callback,i=c.scope,c.params=c.params||{},b.data.expanded&&!e&&(b.data.loaded=!1,d&&(b.data.expanded=!1),c.callback=function(a,c,e){d||b.collapse(),b.expand(),Ext.callback(g,i,[a,c,e])}),c.id=b.getId(),c=Ext.apply({filters:a.getFilters().items,sorters:a.getSorters().items,node:c.node||b,internalScope:a,internalCallback:a.onProxyLoad},c),a.lastOptions=Ext.apply({},c),c.isReload=e,f=a.createOperation("read",c),!1!==a.fireEvent("beforeload",a,f)&&(a.loading=!0,e?(a.getClearRemovedOnLoad()&&(a.removedNodes.length=0),a.unregisterNode(b,!0),h=!(b.childNodes.length=0)):d&&(a.getTrackRemoved()&&a.getClearRemovedOnLoad()&&a.clearRemoved(b),b.removeAll(!1)),a.loading&&b&&b.set("loading",!0),h&&(a.clearData(!0),a.getRootVisible()&&(a.suspendEvents(),a.add(b),a.resumeEvents())),f.execute()),a},onProxyLoad:function(c){var a=this,f=c.initialConfig,e=c.wasSuccessful(),b=c.getRecords(),d=f.node,g=f.isReload,h=c.getScope()||a,i=[b,c,e];a.destroyed||(a.loading=!1,d.set("loading",!1),e&&(++a.loadCount,a.getClearOnLoad()||(b=a.cleanRecords(d,b)),a.getParentIdProperty()&&(b=a.treeify(d,b)),g&&a.suspendEvent("add","update"),b=a.fillNode(d,b)),g?(a.resumeEvent("add","update"),a.callObservers("BeforePopulate"),a.fireEvent("datachanged",a),a.fireEvent("refresh",a),a.callObservers("AfterPopulate")):Ext.callback(f.onChildNodesAvailable,h,i),a.fireEvent("load",a,b,e,c,d))},clearRemoved:function(k){var a,c,g,d=this,e=d.removedNodes,l=k.getId(),f=e.length,b=f,h={},j=[],i={};if(k!==d.getRoot()){for(;b--;)i[(a=e[b]).getId()]=a;for(b=f;b--;){for(c=a=e[b];c&&c.getId()!==l;)g=c.get("parentId")||c.get("lastParentId"),c=c.parentNode||d.getNodeById(g)||i[g];c&&(h[a.getId()]=a)}for(b=0;b<f;b++)h[(a=e[b]).getId()]||j.push(a);d.removedNodes=j}else d.removedNodes.length=0},fillNode:function(c,a){var b=this,d=a?a.length:0;return++b.bulkUpdate,d&&b.setupNodes(a),1===b.bulkUpdate?c.set("loaded",!0):c.data.loaded=!0,a.length&&c.appendChild(a,void 0,!0),--b.bulkUpdate,a},setupNodes:function(b){var e,h,c,d,a=this,j=a.getSorters(),f=!1,g=b.length,i=a.sortOnLoad&&1<g&&!a.getRemoteSort()&&a.getFolderSort()||j.length;for(a.needsLocalFilter()&&(d=a.getFilters().getFilterFn(),b[0].set("visible",d(b[0]))),c=1;c<g;c++)e=b[c],h=b[c-1],d&&e.set("visible",d(e)),f=e.data.index!==h.data.index;i?(a.needsIndexSort=!0,Ext.Array.sort(b,a.getSortFn()),a.needsIndexSort=!1):f&&Ext.Array.sort(b,a.sortByIndex)},beginFill:function(){var a=this;a.fillCount++||(a.beginUpdate(),a.suspendEvent("add","update"),a.suspendAutoSync(),a.fillArray=[])},endFill:function(g,f){var b,e,d,a=this,c=a.fillArray;if(c.push(f),!--a.fillCount){for(a.resumeAutoSync(),a.resumeEvent("add","update"),b=0,e=c.length;b<e;b++)-1!==(d=a.indexOf(c[b][0]))&&a.fireEvent("add",a,c[b],d);a.fillArray=null,a.endUpdate()}},sortByIndex:function(a,b){return a.data.index-b.data.index},onIdChanged:function(d,e,c){var a,b=d.childNodes,f=b&&b.length;for(this.callParent(arguments),delete this.byIdMap[e],this.byIdMap[c]=d,a=0;a<f;a++)b[a].set("parentId",c)},treeify:function(n,h){var b,a,c,f,k,d,g=this,l=n.getId(),m=g.getParentIdProperty(),j=h.length,i=[],e={};for(b=0;b<j;b++)e[(a=h[b]).id]=a;for(b=0;b<j;b++)!(c=(a=h[b]).data[m])&&0!==c||c===l?i.push(a):((f=e[c]).$children=f.$children||[],f.$children.push(a));for(k in e)(d=(a=e[k]).$children)&&(delete a.$children,g.setupNodes(d),a.appendChild(d)),g.registerNode(a);return g.setupNodes(i),i},cleanRecords:function(h,f){for(var c,e={},d=h.childNodes,a=0,b=d.length,g=[];a<b;++a)e[d[a].getId()]=!0;for(a=0,b=f.length;a<b;++a)e[(c=f[a]).getId()]||g.push(c);return g},removeAll:function(){this.suspendEvents(),this.setRoot(null),this.resumeEvents(),this.callParent()},doSort:function(b){var a=this;a.getRemoteSort()?a.load():(a.tree.sort(b,!0),a.fireEvent("datachanged",a),a.fireEvent("refresh",a)),a.fireEvent("sort",a,a.sorters.getRange())},filterVisible:function(a){return a.get("visible")},isVisible:function(c){for(var a=c.parentNode,b=c.data.visible,d=this.getRoot();b&&a;)b=a.data.expanded&&a.data.visible,a=a.parentNode;return b&&!(c===d&&!this.getRootVisible())},commitChanges:function(){var a=this.removedNodes;a&&(a.length=0),this.callParent()},getRootNode:function(){return this.getRoot()},setRootNode:function(a){return this.setRoot(a),this.getRoot()},privates:{getRawRemovedRecords:function(){return this.removedNodes},recordCreator:function(b,a){return new a(b)},doFilter:function(b){var c=this.getRoot(),a=this.getFilters().getFilterFn();this.filterNodes(c,b,a)},filterNodes:function(f,a,e){var d,b,c=a.childNodes,g=c&&c.length;if(g)for(b=0;b<g;++b)this.filterNodes(f,c[b],e);return d=a===f||e(a),a.set("visible",d,this._silentOptions),d},needsLocalFilter:function(){return!this.getRemoteFilter()&&this.getFilters().length},onRemoteFilterSet:function(a,c){this.getData().setFilters(null),a&&a.on("endupdate",this.onFilterEndUpdate,this)},onRemoteSortSet:function(a,c){this.getData().setSorters(null),a&&a.on("endupdate",this.onSorterEndUpdate,this)}},deprecated:{5:{properties:{tree:null}}}}),Ext.define("Ext.data.Validation",{extend:Ext.data.Model,isValidation:!0,syncGeneration:0,attach:function(a){this.record=a,delete this.data.id},getValidation:function(){return null},isValid:function(){var a=this;return a.syncGeneration!==a.record.generation&&a.refresh(),!a.dirty},refresh:function(q){var k,h,a,d,g,n,j,o,b,e=this,i=e.data,c=e.record,m=c.fields,l=c.generation,p=c.data,r=c.validationSeparator,f=null;if(q||e.syncGeneration!==l){for(e.syncGeneration=l,g=0,n=m.length;g<n;++g)o=p[b=(d=m[g]).name],k=d.defaultInvalidMessage,a=0,b in i?h=i[b]:i[b]=h=!0,d.validate!==Ext.emptyFn&&!0!==(j=d.validate(o,r,null,c))&&(a=j||k),(a=a||!0)!==h&&((f=f||{})[b]=a);f&&e.set(f)}}}),Ext.define("Ext.dom.Helper",function(){var b="afterbegin",d="afterend",a="beforebegin",c="beforeend",g=["BeforeBegin","previousSibling"],f=["AfterEnd","nextSibling"],e={beforebegin:g,afterend:f},h={beforebegin:g,afterend:f,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:!0,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:function(){var b=/([a-z])([A-Z])/g,a={};function decamel(c,a,b){return a+"-"+b.toLowerCase()}return function(c){return a[c]||(a[c]=c.replace(b,decamel))}}(),generateMarkup:function(a,b){var d,c,f,g,h,e=this,i=typeof a;if("string"==i||"number"==i)b.push(a);else if(Ext.isArray(a))for(g=0;g<a.length;g++)a[g]&&e.generateMarkup(a[g],b);else{for(d in f=a.tag||"div",b.push("<",f),a)a.hasOwnProperty(d)&&(void 0===(c=a[d])||e.confRe.test(d)||("object"==typeof c?(b.push(" ",d,'="'),e.generateStyles(c,b,!0).push('"')):b.push(" ",e.attributeTransform[d]||d,'="',c,'"')));e.emptyTags.test(f)?b.push("/>"):(b.push(">"),(c=a.tpl)&&c.applyOut(a.tplData,b),(c=a.html)&&b.push(c),(c=a.cn||a.children)&&e.generateMarkup(c,b),h=e.closeTags,b.push(h[f]||(h[f]="</"+f+">")))}return b},generateStyles:function(c,d,f){var a,b,e=d||[];for(a in c)c.hasOwnProperty(a)&&(b=c[a],a=this.decamelizeName(a),f&&Ext.String.hasHtmlCharacters(b)&&(b=Ext.String.htmlEncode(b)),e.push(a,":",b,";"));return d||e.join("")},markup:function(a){return"string"==typeof a?a:this.generateMarkup(a,[]).join("")},applyStyles:function(b,a){Ext.fly(b).applyStyles(a)},createContextualFragment:function(e){var c,a,d=this.detachedDiv,b=document.createDocumentFragment();for(d.innerHTML=e,c=(a=d.childNodes).length;c--;)b.appendChild(a[0]);return b},createDom:function(e,f){var a,d=this.markup(e),b=this.detachedDiv;return b.innerHTML=d,a=b.firstChild,Ext.supports.ChildContentClearedWhenSettingInnerHTML?a.cloneNode(!0):a},insertHtml:function(g,f,j){var l,k,n,m,i;if(g=g.toLowerCase(),f.insertAdjacentHTML)return this.ieInsertHtml&&(i=this.ieInsertHtml(g,f,j))?i:(l=h[g])?(f.insertAdjacentHTML(l[0],j),f[l[1]]):void 0;if(3===f.nodeType&&(g=(g=g===b?a:g)===c?d:g),k=Ext.supports.CreateContextualFragment?f.ownerDocument.createRange():void 0,m="setStart"+(this.endRe.test(g)?"After":"Before"),e[g])return i=k?(k[m](f),k.createContextualFragment(j)):this.createContextualFragment(j),f.parentNode.insertBefore(i,g===a?f:f.nextSibling),f[(g===a?"previous":"next")+"Sibling"];if(n=(g===b?"first":"last")+"Child",f.firstChild){if(k)try{k[m](f[n]),i=k.createContextualFragment(j)}catch(p){i=this.createContextualFragment(j)}else i=this.createContextualFragment(j);g===b?f.insertBefore(i,f.firstChild):f.appendChild(i)}else f.innerHTML=j;return f[n]},insertBefore:function(c,d,b){return this.doInsert(c,d,b,a)},insertAfter:function(b,c,a){return this.doInsert(b,c,a,d)},insertFirst:function(c,d,a){return this.doInsert(c,d,a,b)},append:function(b,d,a){return this.doInsert(b,d,a,c)},overwrite:function(b,c,e){var a,d=this;return b=Ext.getDom(b),c=d.markup(c),d.ieOverwrite&&(a=d.ieOverwrite(b,c)),a||(b.innerHTML=c,a=b.firstChild),e?Ext.get(a):a},doInsert:function(f,j,k,g){var h,i=this;return"innerHTML"in(f=f.dom||Ext.getDom(f))?h=i.insertHtml(g,f,i.markup(j)):(h=i.createDom(j,null),3===f.nodeType&&(g=(g=g===b?a:g)===c?d:g),e[g]?f.parentNode.insertBefore(h,g===a?f:f.nextSibling):f.firstChild&&g===b?f.insertBefore(h,f.firstChild):f.appendChild(h)),k?Ext.get(h):h},createTemplate:function(b){var a=this.markup(b);return new Ext.Template(a)},createHtml:function(a){return this.markup(a)}}}),Ext.define("Ext.overrides.dom.Helper",function(){var a=/^(?:table|thead|tbody|tr|td)$/i,f=/td|tr|tbody|thead/i,e="<table>",d="</table>",c=e+"<tbody>",b="</tbody>"+d;return{override:"Ext.dom.Helper",ieInsertHtml:function(d,b,e){var c=null;return Ext.isIE9m&&a.test(b.tagName)&&(c=this.insertIntoTable(b.tagName.toLowerCase(),d,b,e)),c},ieOverwrite:function(b,c){if(Ext.isIE9m&&a.test(b.tagName)){for(;b.firstChild;)b.removeChild(b.firstChild);if(c)return this.insertHtml("afterbegin",b,c)}},ieTable:function(g,f,e,d){var b,c,h=-1,a=this.detachedDiv;for(a.innerHTML=[f,e,d].join("");++h<g;)a=a.firstChild;if(b=a.nextSibling)for(b=a,a=document.createDocumentFragment();b;)c=b.nextSibling,a.appendChild(b),b=c;return a},insertIntoTable:function(a,k,i,o){var j,q,n="beforebegin"===k,l="afterbegin"===k,p="beforeend"===k,m="afterend"===k;return"td"===a&&(l||p)||!f.test(a)&&(n||m)?null:(q=n?i:m?i.nextSibling:l?i.firstChild:null,(n||m)&&(i=i.parentNode),j="td"===a||"tr"===a&&(p||l)?this.ieTable(4,"<table><tbody><tr>",o,"</tr></tbody></table>"):("tbody"===a||"thead"===a)&&(p||l)||"tr"===a&&(n||m)?this.ieTable(3,c,o,b):this.ieTable(2,e,o,d),i.insertBefore(j,q),j)}}}()),Ext.define("Ext.dom.GarbageCollector",{singleton:!0,interval:3e4,constructor:function(){var a=this;a.collect=Ext.Function.bind(a.collect,a),a.lastTime=Ext.now(),a.resume()},collect:function(){var a,f,c,d,e,b=Ext.cache;for(a in b)if(b.hasOwnProperty(a)&&!(c=b[a]).skipGarbageCollection){f=c.dom;try{e=Ext.isGarbage(f)}catch(i){delete b[a];continue}e&&c&&c.dom&&c.collect()}if(Ext.isIE9m){for(a in d={},b)b.hasOwnProperty(a)&&(d[a]=b[a]);Ext.cache=Ext.dom.Element.cache=d}this.lastTime=Ext.now()},pause:function(){clearTimeout(this.timerId)},resume:function(){var a=this,b=a.lastTime;Ext.enableGarbageCollector&&Ext.now()-b>a.interval&&a.collect(),a.timerId=Ext.interval(a.collect,a.interval)}}),Ext.define("Ext.event.gesture.Recognizer",{mixins:[Ext.mixin.Identifiable],priority:0,handledEvents:[],config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(a){this.initConfig(a),Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,onTouchCancel:Ext.emptyFn,fail:function(){return!1},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)},reset:Ext.emptyFn,debugHooks:{$enabled:!1,fail:function(a){return Ext.log.info(this.$className+" Gesture Failed: "+a),!1}}}),Ext.define("Ext.event.gesture.SingleTouch",{extend:Ext.event.gesture.Recognizer,inheritableStatics:{NOT_SINGLE_TOUCH:"Not Single Touch",TOUCH_MOVED:"Touch Moved",EVENT_CANCELED:"Event Canceled"},onTouchStart:function(a){if(1<a.touches.length)return this.fail(this.self.NOT_SINGLE_TOUCH)},onTouchCancel:function(){return!1}}),Ext.define("Ext.event.gesture.DoubleTap",{extend:Ext.event.gesture.SingleTouch,priority:300,inheritableStatics:{DIFFERENT_TARGET:"Different Target"},config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(c){var b,a=this;if(!1===a.callParent(arguments))return!1;b=a.lastStartPoint=c.changedTouches[0].point,a.startPoint=a.startPoint||b,a.startTime=c.time,clearTimeout(a.singleTapTimer)},onTouchMove:function(c){var a=this,b=c.changedTouches[0].point;if(Math.abs(b.getDistanceTo(a.lastStartPoint))>=a.getMoveDistance())return a.startPoint=null,a.fail(a.self.TOUCH_MOVED)},onTouchEnd:function(b){var c,a=this,f=a.getMaxDuration(),d=b.time,g=b.target,e=a.lastTapTime,h=a.lastTarget,i=b.changedTouches[0].point;if(a.lastTapTime=d,a.lastTarget=g,e&&(c=d-e)<=f&&Math.abs(i.getDistanceTo(a.startPoint))<=a.getTapDistance())return g!==h?a.fail(a.self.DIFFERENT_TARGET):(a.lastTarget=null,a.lastTapTime=0,a.fire("doubletap",b,{touch:b.changedTouches[0],duration:c}),void(a.startPoint=null));d-a.startTime>f?a.fireSingleTap(b):a.setSingleTapTimer(b)},setSingleTapTimer:function(b){var a=this;a.singleTapTimer=Ext.defer(function(){a.fireSingleTap(b)},a.getMaxDuration())},fireSingleTap:function(b,a){this.fire("singletap",b,{touch:a}),this.startPoint=null},reset:function(){var a=this;a.startTime=a.lastTapTime=0,a.lastStartPoint=a.startPoint=a.singleTapTimer=null}},function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.doubleTap)}),Ext.define("Ext.event.gesture.Drag",{extend:Ext.event.gesture.SingleTouch,priority:100,isStarted:!1,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){this.callParent(arguments),this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0}}},onTouchStart:function(a){if(!1===this.callParent(arguments))return this.isStarted&&null!==this.lastMoveEvent&&(this.lastMoveEvent.isStopped=!1,this.onTouchEnd(this.lastMoveEvent)),!1;this.startTime=a.time,this.startPoint=a.changedTouches[0].point},tryDragStart:function(a){var f=this.startPoint,b=a.changedTouches[0],c=b.point,e=this.getMinDistance(),d=this.info;Math.abs(c.getDistanceTo(f))>=e&&(this.isStarted=!0,this.previousPoint=this.lastPoint=c,this.resetInfo("x",a,b),this.resetInfo("y",a,b),d.time=a.time,this.fire("dragstart",a,d))},onTouchMove:function(a){if(this.isStarted||this.tryDragStart(a),this.isStarted){var b=a.changedTouches[0],c=b.point;this.lastPoint&&(this.previousPoint=this.lastPoint),this.lastPoint=c,this.lastMoveEvent=a,this.updateInfo("x",a,b),this.updateInfo("y",a,b),this.info.time=a.time,this.fire("drag",a,this.info)}},onAxisDragEnd:function(b,a){var c=a.time-a.previousTime[b];0<c&&(a.flick.velocity[b]=(a[b]-a.previous[b])/c)},resetInfo:function(b,h,g){var f=this.lastPoint[b],d=this.startPoint[b],e=f-d,c=b.toUpperCase(),a=this.info;a.touch=g,a.delta[b]=e,a.absDelta[b]=Math.abs(e),a.previousTime[b]=this.startTime,a.previous[b]=d,a[b]=f,a.direction[b]=0,a["start"+c]=this.startPoint[b],a["previous"+c]=a.previous[b],a["page"+c]=a[b],a["delta"+c]=a.delta[b],a["absDelta"+c]=a.absDelta[b],a["previousDelta"+c]=0,a.startTime=this.startTime},updateInfo:function(b,l,k){var e=this,d=e.lastPoint[b],g=e.previousPoint[b],f=e.startPoint[b],i=d-f,a=e.info,h=a.direction,c=b.toUpperCase(),j=a.previous[b];a.touch=k,a.delta[b]=i,a.absDelta[b]=Math.abs(i),d!==j&&d!==a[b]&&(a.previous[b]=a[b],a.previousTime[b]=a.time),g<(a[b]=d)?h[b]=1:d<g&&(h[b]=-1),a["start"+c]=f,a["previous"+c]=a.previous[b],a["page"+c]=a[b],a["delta"+c]=a.delta[b],a["absDelta"+c]=a.absDelta[b],a["previousDelta"+c]=a.previous[b]-f,a.startTime=e.startTime},onTouchEnd:function(a){this.doEnd(a)},onTouchCancel:function(a){return this.doEnd(a,!0),!1},doEnd:function(a,d){if(this.isStarted||this.tryDragStart(a),this.isStarted){var c=a.changedTouches[0],e=c.point,b=this.info;this.isStarted=!1,this.lastPoint=e,this.updateInfo("x",a,c),this.updateInfo("y",a,c),b.time=a.time,this.onAxisDragEnd("x",b),this.onAxisDragEnd("y",b),this.fire(d?"dragcancel":"dragend",a,b),this.startPoint=null,this.previousPoint=null,this.lastPoint=null,this.lastMoveEvent=null}},reset:function(){var a=this;a.isStarted=a.lastPoint=a.startPoint=a.previousPoint=a.lastPoint=a.lastMoveEvent=null,a.initInfo()}},function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.drag)}),Ext.define("Ext.event.gesture.Swipe",{extend:Ext.event.gesture.SingleTouch,priority:500,handledEvents:["swipestart","swipe","swipecancel"],inheritableStatics:{MAX_OFFSET_EXCEEDED:"Max Offset Exceeded",MAX_DURATION_EXCEEDED:"Max Duration Exceeded",DISTANCE_NOT_ENOUGH:"Distance Not Enough"},config:{minDistance:80,maxOffset:35,maxDuration:1e3},onTouchStart:function(b){if(!1===this.callParent(arguments))return!1;var a=b.changedTouches[0];this.startTime=b.time,this.isHorizontal=!0,this.isVertical=!0,this.startX=a.pageX,this.startY=a.pageY},onTouchMove:function(b){var a,e,f=b.changedTouches[0],h=f.pageX,i=f.pageY,k=h-this.startX,l=i-this.startY,c=Math.abs(h-this.startX),d=Math.abs(i-this.startY),j=b.time-this.startTime,g=this.getMinDistance();return b.time-this.startTime>this.getMaxDuration()?this.fail(this.self.MAX_DURATION_EXCEEDED):(this.isHorizontal&&d>this.getMaxOffset()&&(this.isHorizontal=!1),this.isVertical&&c>this.getMaxOffset()&&(this.isVertical=!1),this.isVertical&&this.isHorizontal||(this.isHorizontal&&c<g?(a=k<0?"left":"right",e=c):this.isVertical&&d<g&&(a=l<0?"up":"down",e=d)),a&&!this.started&&(this.started=!0,this.fire("swipestart",b,{touch:f,direction:a,distance:e,duration:j})),this.isHorizontal||this.isVertical?void 0:this.fail(this.self.MAX_OFFSET_EXCEEDED))},onTouchEnd:function(a){if(!1===this.onTouchMove(a))return!1;var b,c,d=a.changedTouches[0],k=d.pageX,l=d.pageY,h=k-this.startX,i=l-this.startY,f=Math.abs(h),g=Math.abs(i),e=this.getMinDistance(),j=a.time-this.startTime;if(this.isVertical&&g<e&&(this.isVertical=!1),this.isHorizontal&&f<e&&(this.isHorizontal=!1),this.isHorizontal)b=h<0?"left":"right",c=f;else{if(!this.isVertical)return this.fail(this.self.DISTANCE_NOT_ENOUGH);b=i<0?"up":"down",c=g}this.started=!1,this.fire("swipe",a,{touch:d,direction:b,distance:c,duration:j})},onTouchCancel:function(a){return this.fire("swipecancel",a),!1},reset:function(){var a=this;a.startTime=a.isHorizontal=a.isVertical=a.startX=a.startY=null}},function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.swipe)}),Ext.define("Ext.event.gesture.EdgeSwipe",{extend:Ext.event.gesture.Swipe,priority:800,handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],inheritableStatics:{NOT_NEAR_EDGE:"Not Near Edge"},config:{minDistance:60},onTouchStart:function(b){if(!1===this.callParent(arguments))return!1;var a=b.changedTouches[0];this.started=!1,this.direction=null,this.isHorizontal=!0,this.isVertical=!0,this.startX=a.pageX,this.startY=a.pageY},onTouchMove:function(c){var a,b,e=c.changedTouches[0],l=e.pageX,m=e.pageY,f=l-this.startX,g=m-this.startY,i=Math.abs(m-this.startY),h=Math.abs(l-this.startX),d=this.getMinDistance(),j=this.getMaxOffset(),k=c.time-this.startTime,o=Ext.Viewport&&Ext.Element.getViewportWidth(),n=Ext.Viewport&&Ext.Element.getViewportHeight();if(this.isVertical&&j<h&&(this.isVertical=!1),this.isHorizontal&&j<i&&(this.isHorizontal=!1),this.isVertical&&this.isHorizontal&&(h<i?this.isHorizontal=!1:this.isVertical=!1),this.isHorizontal?(a=f<0?"left":"right",b=f):this.isVertical&&(a=g<0?"up":"down",b=g),"up"===(a=this.direction||(this.direction=a))?b=-1*g:"left"===a&&(b=-1*f),!(this.distance=b))return this.fail(this.self.DISTANCE_NOT_ENOUGH);if(this.started)this.fire("edgeswipe",c,{touch:e,direction:a,distance:b,duration:k});else{if("right"===a&&this.startX>d)return this.fail(this.self.NOT_NEAR_EDGE);if("down"===a&&this.startY>d)return this.fail(this.self.NOT_NEAR_EDGE);if("left"===a&&o-this.startX>d)return this.fail(this.self.NOT_NEAR_EDGE);if("up"===a&&n-this.startY>d)return this.fail(this.self.NOT_NEAR_EDGE);this.started=!0,this.startTime=c.time,this.fire("edgeswipestart",c,{touch:e,direction:a,distance:b,duration:k})}},onTouchEnd:function(a){var b;!1!==this.onTouchMove(a)&&(b=a.time-this.startTime,this.fire("edgeswipeend",a,{touch:a.changedTouches[0],direction:this.direction,distance:this.distance,duration:b}))},onTouchCancel:function(a){return this.fire("edgeswipecancel",a,{touch:a.changedTouches[0]}),!1},reset:function(){var a=this;a.started=a.direction=a.isHorizontal=a.isVertical=a.startX=a.startY=a.startTime=a.distance=null}},function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.edgeSwipe)}),Ext.define("Ext.event.gesture.LongPress",{extend:Ext.event.gesture.SingleTouch,priority:400,inheritableStatics:{DURATION_NOT_ENOUGH:"Duration Not Enough"},config:{moveDistance:8,minDuration:1e3},handledEvents:["longpress","taphold"],fireLongPress:function(a){this.fire("longpress",a,{touch:a.changedTouches[0],duration:this.getMinDuration()}),this.isLongPress=!0},onTouchStart:function(a){if(!1===this.callParent(arguments))return!1;this.startPoint=a.changedTouches[0].point,this.isLongPress=!1,this.setLongPressTimer(a)},setLongPressTimer:function(b){var a=this;a.timer=Ext.defer(function(){a.fireLongPress(b)},a.getMinDuration())},onTouchMove:function(b){var a=b.changedTouches[0].point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance())return this.fail(this.self.TOUCH_MOVED)},onTouchEnd:function(){if(!this.isLongPress)return this.fail(this.self.DURATION_NOT_ENOUGH)},fail:function(){return clearTimeout(this.timer),this.callParent(arguments)},reset:function(){this.isLongPress=this.startPoint=null},fire:function(b){if("longpress"===b){var a=Array.prototype.slice.call(arguments);a[0]="taphold",this.fire.apply(this,a)}return this.callParent(arguments)}},function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.longPress)}),Ext.define("Ext.event.gesture.MultiTouch",{extend:Ext.event.gesture.Recognizer,requiredTouchesCount:2,isTracking:!1,isStarted:!1,onTouchStart:function(a){var b=this.requiredTouchesCount,c=a.touches.length;c===b?this.start(a):b<c&&this.end(a)},onTouchEnd:function(a){this.end(a)},onTouchCancel:function(a){return this.end(a,!0),!1},start:function(){this.isTracking||(this.isTracking=!0,this.isStarted=!1)},end:function(b,a){this.isTracking&&(this.isTracking=!1,this.isStarted&&(this.isStarted=!1,this[a?"fireCancel":"fireEnd"](b)))},reset:function(){this.isTracking=this.isStarted=!1}}),Ext.define("Ext.event.gesture.Pinch",{extend:Ext.event.gesture.MultiTouch,priority:600,handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(c){if(this.isTracking){var e,d,a,b=c.touches;e=b[0].point,d=b[1].point,0!==(a=e.getDistanceTo(d))&&(this.isStarted?this.fire("pinch",c,{touches:b,distance:a,scale:a/this.startDistance}):(this.isStarted=!0,this.startDistance=a,this.fire("pinchstart",c,{touches:b,distance:a,scale:1})))}},fireEnd:function(a){this.fire("pinchend",a)},fireCancel:function(a){this.fire("pinchcancel",a)},fail:function(){return this.callParent(arguments)},reset:function(){this.lastTouches=null,this.startDistance=0,this.callParent()}},function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.pinch)}),Ext.define("Ext.event.gesture.Rotate",{extend:Ext.event.gesture.MultiTouch,priority:700,handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(g){if(this.isTracking){var i,h,a,e,d,f,b=g.touches,c=this.lastAngle;i=b[0].point,h=b[1].point,a=i.getAngleTo(h),null!==c&&(f=Math.abs(c-a),e=a+360,d=a-360,Math.abs(e-c)<f?a=e:Math.abs(d-c)<f&&(a=d)),this.lastAngle=a,this.isStarted?this.fire("rotate",g,{touches:b,angle:a,rotation:a-this.startAngle}):(this.isStarted=!0,this.startAngle=a,this.fire("rotatestart",g,{touches:b,angle:a,rotation:0})),this.lastTouches=Ext.Array.clone(b)}},fireEnd:function(a){this.lastAngle=null,this.fire("rotateend",a)},fireCancel:function(a){this.lastAngle=null,this.fire("rotatecancel",a)},reset:function(){var a=this;a.lastTouches=a.lastAngle=a.startAngle=null,this.callParent()}},function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.rotate)}),Ext.define("Ext.event.gesture.Tap",{extend:Ext.event.gesture.SingleTouch,priority:200,handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(a){if(!1===this.callParent([a]))return!1;this.startPoint=a.changedTouches[0].point},onTouchMove:function(b){var a=b.changedTouches[0],c=a.point;if(Math.abs(c.getDistanceTo(this.startPoint))>=this.getMoveDistance())return this.fire("tapcancel",b,{touch:a}),this.fail(this.self.TOUCH_MOVED)},onTouchEnd:function(a){this.fire("tap",a,{touch:a.changedTouches[0]})},onTouchCancel:function(a){return this.fire("tapcancel",a,{touch:a.changedTouches[0]}),!1},reset:function(){this.startPoint=null}},function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.tap)}),Ext.define("Ext.event.publisher.Focus",{extend:Ext.event.publisher.Dom,type:"focus",handledEvents:["focusenter","focusleave","focusmove"],handledDomEvents:["focusin","focusout"],doDelegatedEvent:function(a,d){var b,c=this;(a=c.callParent([a,!1]))&&("focusout"===a.type?null==a.relatedTarget&&c.processFocusIn(a,a.target,document.body,d):(b=a.relatedTarget,c.processFocusIn(a,null!=b&&b.tagName?b:document.body,a.target,d)))},processFocusIn:function(i,d,e,l){var h,a,f,g,j,k,c=this,b=[];if(j=Ext.fly(d),k=Ext.fly(e),!(j&&j.isFocusSuspended()||k&&k.isFocusSuspended())){for(a=d,h=Ext.dom.Element.getCommonAncestor(e,d,!0);a&&a!==h;a=a.parentNode)b.push(a);if(!b.length||(f=c.createSyntheticEvent("focusleave",i,d,e),c.publish("focusleave",b,f),!f.isStopped)){for(b.length=0,a=e;a!==h;a=a.parentNode)b.push(a);g=c.createSyntheticEvent("focusenter",i,e,d),b.length&&(c.publish("focusenter",b,g),g.isStopped)||(b=c.getPropagatingTargets(h)).length&&(f=c.createSyntheticEvent("focusmove",i,e,d),c.publish("focusmove",b,f),f.isStopped)||(l&&c.afterEvent(i),Ext.GlobalEvents.fireEvent("focus",{event:g,toElement:e,fromElement:d}))}}},createSyntheticEvent:function(d,c,e,b){var a=new Ext.event.Event(c);return a.type=d,a.relatedTarget=b,a.target=e,a}},function(a){var b;a.instance=new a,Ext.supports.FocusinFocusoutEvents||this.override({handledDomEvents:["focus","blur"],doDelegatedEvent:function(c,e){var d=this;if(c=d.callSuper([c,!1]))if(clearTimeout(b),b=0,"blur"===c.type){var f=c.target===window?document.body:c.target;b=setTimeout(function(){b=0,d.processFocusIn(c,f,document.body,e),a.previousActiveElement=null},0),c.target===window||c.target===document?a.previousActiveElement=null:a.previousActiveElement=c.target}else d.processFocusIn(c,a.previousActiveElement||document.body,c.target===window?document.body:c.target,e)}})}),Ext.define("Ext.fx.State",{isAnimatable:{"background-color":!0,"background-image":!0,"background-position":!0,"border-bottom-color":!0,"border-bottom-width":!0,"border-color":!0,"border-left-color":!0,"border-left-width":!0,"border-right-color":!0,"border-right-width":!0,"border-spacing":!0,"border-top-color":!0,"border-top-width":!0,"border-width":!0,bottom:!0,color:!0,crop:!0,"font-size":!0,"font-weight":!0,height:!0,left:!0,"letter-spacing":!0,"line-height":!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"max-height":!0,"max-width":!0,"min-height":!0,"min-width":!0,opacity:!0,"outline-color":!0,"outline-offset":!0,"outline-width":!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,right:!0,"text-indent":!0,"text-shadow":!0,top:!0,"vertical-align":!0,visibility:!0,width:!0,"word-spacing":!0,"z-index":!0,zoom:!0,transform:!0},constructor:function(a){this.data={},this.set(a)},setConfig:function(a){return this.set(a),this},setRaw:function(a){return this.data=a,this},clear:function(){return this.setRaw({})},setTransform:function(d,a){var c,f,g=this.data,e=Ext.isArray(a),b=g.transform;if(b=b||(g.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}),"string"==typeof d)switch(d){case"translate":if(e){if(0==(c=a.length))break;if(b.translateX=a[0],1==c)break;if(b.translateY=a[1],2==c)break;b.translateZ=a[2]}else b.translateX=a;break;case"rotate":if(e){if(0==(c=a.length))break;if(b.rotateX=a[0],1==c)break;if(b.rotateY=a[1],2==c)break;b.rotateZ=a[2]}else b.rotate=a;break;case"scale":if(e){if(0==(c=a.length))break;if(b.scaleX=a[0],1==c)break;if(b.scaleY=a[1],2==c)break;b.scaleZ=a[2]}else b.scaleX=a,b.scaleY=a;break;case"skew":if(e){if(0==(c=a.length))break;if(b.skewX=a[0],1==c)break;b.skewY=a[1]}else b.skewX=a;break;default:b[d]=a}else for(f in d)d.hasOwnProperty(f)&&(a=d[f],this.setTransform(f,a))},set:function(b,a){var c,d=this.data;if("string"!=typeof b)for(c in b)a=b[c],"transform"===c?this.setTransform(a):d[c]=a;else"transform"===b?this.setTransform(a):d[b]=a;return this},unset:function(b){var a=this.data;return a.hasOwnProperty(b)&&delete a[b],this},getData:function(){return this.data}}),Ext.define("Ext.fx.animation.Abstract",{extend:Ext.Evented,isAnimation:!0,config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:!1,replacePrevious:!0},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\d\.]+)%$/,constructor:function(){return this.states={},this.callParent(arguments),this},applyElement:function(a){return Ext.get(a)},applyBefore:function(a,b){if(a)return Ext.factory(a,Ext.fx.State,b)},applyAfter:function(a,b){if(a)return Ext.factory(a,Ext.fx.State,b)},setFrom:function(a){return this.setState(this.STATE_FROM,a)},setTo:function(a){return this.setState(this.STATE_TO,a)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(b){var a,c=this.stateNameRegex;for(a in b)c.test(a)&&this.setState(a,b[a]);return this},getStates:function(){return this.states},updateCallback:function(a){a&&this.setOnEnd(a)},end:function(){this.stop()},stop:function(){this.fireEvent("stop",this)},destroy:function(){this.stop(),this.callParent()},setState:function(c,d){var a,b=this.getStates();return(a=Ext.factory(d,Ext.fx.State,b[c]))&&(b[c]=a),this},getState:function(a){return this.getStates()[a]},getData:function(){var h,c,a=this,b=a.getStates(),d={},e=a.getBefore(),f=a.getAfter(),k=b[a.STATE_FROM],l=b[a.STATE_TO],i=k.getData(),j=l.getData();for(c in b)b.hasOwnProperty(c)&&(h=b[c].getData(),d[c]=h);return{before:e?e.getData():{},after:f?f.getData():{},states:d,from:i,to:j,duration:a.getDuration(),iteration:a.getIteration(),direction:a.getDirection(),easing:a.getEasing(),delay:a.getDelay(),onEnd:a.getOnEnd(),onBeforeEnd:a.getOnBeforeEnd(),onBeforeStart:a.getOnBeforeStart(),scope:a.getScope(),preserveEndState:a.getPreserveEndState(),replacePrevious:a.getReplacePrevious()}}}),Ext.define("Ext.fx.animation.Slide",{extend:Ext.fx.animation.Abstract,alternateClassName:"Ext.fx.animation.SlideIn",alias:["animation.slide","animation.slideIn"],config:{direction:"left",out:!1,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:!0,useCssTransform:!0},reverseDirectionMap:{up:"down",down:"up",left:"right",right:"left"},applyEasing:function(a){return"auto"===a?"ease-"+(this.getOut()?"in":"out"):a},getContainerBox:function(){var a=this._containerBox;return"auto"===a&&(a=this.getElement().getParent().getBox()),a},getElementBox:function(){var a=this._elementBox;return this.getIsElementBoxFit()?this.getContainerBox():("auto"===a&&(a=this.getElement().getBox()),a)},getData:function(){var h,i,k,l,o=this.getElementBox(),b=this.getContainerBox(),a=o||b,j=this.getFrom(),m=this.getTo(),d=this.getOut(),c=this.getOffset(),g=this.getDirection(),n=this.getUseCssTransform(),e=0,f=0;switch(this.getReverse()&&(g=this.reverseDirectionMap[g]),g){case this.DIRECTION_UP:f=d?b.top-a.top-a.height-c:b.bottom-a.bottom+a.height+c;break;case this.DIRECTION_DOWN:f=d?b.bottom-a.bottom+a.height+c:b.top-a.height-a.top-c;break;case this.DIRECTION_RIGHT:e=d?b.right-a.right+a.width+c:b.left-a.left-a.width-c;break;case this.DIRECTION_LEFT:e=d?b.left-a.left-a.width-c:b.right-a.right+a.width+c}return h=d?0:e,i=d?0:f,n?j.setTransform({translateX:h,translateY:i}):(j.set("left",h),j.set("top",i)),k=d?e:0,l=d?f:0,n?m.setTransform({translateX:k,translateY:l}):(m.set("left",k),m.set("top",l)),this.callParent(arguments)}}),Ext.define("Ext.fx.animation.SlideOut",{extend:Ext.fx.animation.Slide,alias:["animation.slideOut"],config:{out:!0}}),Ext.define("Ext.fx.animation.Fade",{extend:Ext.fx.animation.Abstract,alternateClassName:"Ext.fx.animation.FadeIn",alias:["animation.fade","animation.fadeIn"],config:{out:!1,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(c){var b=this.getTo(),a=this.getFrom();c?(a.set("opacity",1),b.set("opacity",0)):(a.set("opacity",0),b.set("opacity",1))}}),Ext.define("Ext.fx.animation.FadeOut",{extend:Ext.fx.animation.Fade,alias:"animation.fadeOut",config:{out:!0,before:{}}}),Ext.define("Ext.fx.animation.Flip",{extend:Ext.fx.animation.Abstract,alias:"animation.flip",config:{easing:"ease-in",direction:"right",half:!1,out:null},getData:function(){var c=this,k=c.getFrom(),m=c.getTo(),j=c.getDirection(),b=c.getOut(),a=c.getHalf()?90:180,h=1,i=1,d=0,e=0,f=0,g=0;switch(b?i=.8:h=.8,j){case this.DIRECTION_UP:b?f=a:d=-a;break;case this.DIRECTION_DOWN:b?f=-a:d=a;break;case this.DIRECTION_RIGHT:b?g=a:e=-a;break;case this.DIRECTION_LEFT:b?g=-a:e=a}return k.setTransform({rotateX:d,rotateY:e,scale:h}),m.setTransform({rotateX:f,rotateY:g,scale:i}),this.callParent()}}),Ext.define("Ext.fx.animation.Pop",{extend:Ext.fx.animation.Abstract,alias:["animation.pop","animation.popIn"],alternateClassName:"Ext.fx.animation.PopIn",config:{out:!1,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var b=this.getTo(),a=this.getFrom();return this.getOut()?(a.set("opacity",1),a.setTransform({scale:1}),b.set("opacity",0),b.setTransform({scale:0})):(a.set("opacity",0),a.setTransform({scale:0}),b.set("opacity",1),b.setTransform({scale:1})),this.callParent(arguments)}}),Ext.define("Ext.fx.animation.PopOut",{extend:Ext.fx.animation.Pop,alias:"animation.popOut",config:{out:!0,before:{}}}),Ext.define("Ext.fx.Animation",{constructor:function(a){var b,c=Ext.fx.animation.Abstract;return"string"==typeof a?(b=a,a={}):a&&a.type&&(b=a.type),b&&(c=Ext.ClassManager.getByAlias("animation."+b)),Ext.factory(a,c)}}),Ext.define("Ext.fx.runner.Css",{extend:Ext.Evented,prefixedProperties:{transform:!0,"transform-origin":!0,perspective:!0,"transform-style":!0,transition:!0,"transition-property":!0,"transition-duration":!0,"transition-timing-function":!0,"transition-delay":!0,animation:!0,"animation-name":!0,"animation-duration":!0,"animation-iteration-count":!0,"animation-direction":!0,"animation-timing-function":!0,"animation-delay":!0},lengthProperties:{top:!0,right:!0,bottom:!0,left:!0,width:!0,height:!0,"max-height":!0,"max-width":!0,"min-height":!0,"min-width":!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,"border-bottom-width":!0,"border-left-width":!0,"border-right-width":!0,"border-spacing":!0,"border-top-width":!0,"border-width":!0,"outline-width":!0,"letter-spacing":!0,"line-height":!0,"text-indent":!0,"word-spacing":!0,"font-size":!0,translate:!0,translateX:!0,translateY:!0,translateZ:!0,translate3d:!0},durationProperties:{"transition-duration":!0,"transition-delay":!0,"animation-duration":!0,"animation-delay":!0},angleProperties:{rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,skew:!0,skewX:!0,skewY:!0},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",formattedNameCache:{},transformMethods3d:["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"],transformMethodsNo3d:["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"],constructor:function(){var a=this;a.transformMethods=Ext.feature.has.Css3dTransforms?a.transformMethods3d:a.transformMethodsNo3d,a.vendorPrefix=Ext.browser.getStyleDashPrefix(),a.ruleStylesCache={},a.callParent()},getStyleSheet:function(){var a,b,c=this.styleSheet;return c||((a=document.createElement("style")).type="text/css",(document.head||document.getElementsByTagName("head")[0]).appendChild(a),b=document.styleSheets,this.styleSheet=c=b[b.length-1]),c},applyRules:function(j){var d,g,b,c,f,a,e,i=this.getStyleSheet(),h=this.ruleStylesCache,k=i.cssRules;for(d in j)for(a in g=j[d],void 0===(b=h[d])&&(f=k.length,i.insertRule(d+"{}",f),b=h[d]=k.item(f).style),c=(c=b.$cache)||(b.$cache={}),g)e=this.formatValue(g[a],a),c[a=this.formatName(a)]!==e&&(null===(c[a]=e)?b.removeProperty(a):b.setProperty(a,e,"important"));return this},applyStyles:function(f){var c,e,d,b,a,g;for(c in f)if(f.hasOwnProperty(c)){if(!(e=document.getElementById(c)))continue;for(a in d=e.style,b=f[c])b.hasOwnProperty(a)&&(g=this.formatValue(b[a],a),a=this.formatName(a),null===g?d.removeProperty(a):d.setProperty(a,g,"important"))}return this},formatName:function(b){var c=this.formattedNameCache,a=c[b];return a||(a=!Ext.os.is.Tizen&&Ext.feature.has.CssTransformNoPrefix||!this.prefixedProperties[b]?b:this.vendorPrefix+b,c[b]=a),a},formatValue:function(a,c){var g,d,b,f,h,e,j=typeof a,i=this.DEFAULT_UNIT_LENGTH;if(null===a)return"";if("string"==j)return!this.lengthProperties[c]||0<a.match(this.lengthUnitRegex)[1].length?a:a+i;if("number"==j){if(0==a)return"0";if(this.lengthProperties[c])return a+i;if(this.angleProperties[c])return a+this.DEFAULT_UNIT_ANGLE;if(this.durationProperties[c])return a+this.DEFAULT_UNIT_DURATION}else{if("transform"===c){for(h=[],b=0,f=(g=this.transformMethods).length;b<f;b++)d=g[b],h.push(d+"("+this.formatValue(a[d],d)+")");return h.join(" ")}if(Ext.isArray(a)){for(e=[],b=0,f=a.length;b<f;b++)e.push(this.formatValue(a[b],c));return 0<e.length?e.join(", "):"none"}}return a}}),Ext.define("Ext.fx.runner.CssTransition",{extend:Ext.fx.runner.Css,alternateClassName:"Ext.Animator",singleton:!0,listenersAttached:!1,constructor:function(){return this.runningAnimationsData={},this.callParent(arguments)},attachListeners:function(){this.listenersAttached=!0,Ext.getWin().on("transitionend","onTransitionEnd",this)},onTransitionEnd:function(c){var a=c.target,b=a.id;b&&this.runningAnimationsData.hasOwnProperty(b)&&this.refreshRunningAnimationsData(Ext.get(a),[c.browserEvent.propertyName])},onAnimationEnd:function(d,a,b,c,n){var g,f,e,m,i,l=d.getId(),j=this.runningAnimationsData[l],k={},h={};if(b.un("stop","onAnimationStop",this),j&&(g=j.nameMap),k[l]=h,a.onBeforeEnd&&a.onBeforeEnd.call(a.scope||this,d,c),b.fireEvent("animationbeforeend",b,d,c),this.fireEvent("animationbeforeend",this,b,d,c),n||!c&&!a.preserveEndState)for(e=0,m=(f=a.toPropertyNames).length;e<m;e++)i=f[e],g&&!g.hasOwnProperty(i)&&(h[i]=null);a.after&&Ext.merge(h,a.after),this.applyStyles(k),a.onEnd&&a.onEnd.call(a.scope||this,d,c),b.fireEvent("animationend",b,d,c),this.fireEvent("animationend",this,b,d,c),Ext.AnimationQueue.stop(Ext.emptyFn,b)},onAllAnimationsEnd:function(b){var c=b.getId(),a={};delete this.runningAnimationsData[c],a[c]={"transition-property":null,"transition-duration":null,"transition-timing-function":null,"transition-delay":null},this.applyStyles(a),this.fireEvent("animationallend",this,b)},hasRunningAnimations:function(c){var b=c.getId(),a=this.runningAnimationsData;return a.hasOwnProperty(b)&&0<a[b].sessions.length},refreshRunningAnimationsData:function(i,m,f,g){var s=i.getId(),e=this.runningAnimationsData[s];if(e){var h,j,p,d,b,a,k,q,o=e.nameMap,n=e.nameList,c=e.sessions,l=!1;if(f=Boolean(f),g=Boolean(g),!c)return this;if(0===(h=c.length))return this;if(g){for(e.nameMap={},b=n.length=0;b<h;b++)a=c[b],this.onAnimationEnd(i,a.data,a.animation,f,g);c.length=0}else for(b=0;b<h;b++){for(k=(a=c[b]).map,q=a.list,j=0,p=m.length;j<p;j++)k[d=m[j]]&&(delete k[d],Ext.Array.remove(q,d),a.length--,0==--o[d]&&(delete o[d],Ext.Array.remove(n,d)));0==a.length&&(c.splice(b,1),b--,h--,l=!0,this.onAnimationEnd(i,a.data,a.animation,f))}g||f||0!=c.length||!l||this.onAllAnimationsEnd(i)}},getRunningData:function(b){var a=this.runningAnimationsData;return a.hasOwnProperty(b)||(a[b]={nameMap:{},nameList:[],sessions:[]}),a[b]},getTestElement:function(){var d,b,a,c=this.testElement;return c||((d=document.createElement("iframe")).setAttribute("tabIndex",-1),(a=d.style).setProperty("visibility","hidden","important"),a.setProperty("width","0px","important"),a.setProperty("height","0px","important"),a.setProperty("position","absolute","important"),a.setProperty("border","0px","important"),a.setProperty("zIndex","-1000","important"),document.body.appendChild(d),(b=d.contentDocument).open(),b.writeln("</body>"),b.close(),this.testElement=c=b.createElement("div"),c.style.setProperty("position","absolute","important"),b.body.appendChild(c),this.testElementComputedStyle=window.getComputedStyle(c)),c},getCssStyleValue:function(b,a){var c=this.getTestElement(),e=this.testElementComputedStyle,d=c.style;return d.setProperty(b,a),Ext.browser.is.Firefox&&c.offsetHeight,a=e.getPropertyValue(b),d.removeProperty(b),a},run:function(t){var i,f,m,k,F,g,e,u,v,s,r,w,x,G,c,o,A,C,h,b,l,n,y,q,p,z,B,a=this,H=a.lengthProperties,E={},j={},d={};for(a.listenersAttached||a.attachListeners(),w=0,G=(t=Ext.Array.from(t)).length;w<G;w++){for(b in c=t[w],i=(c=Ext.factory(c,Ext.fx.Animation)).getElement(),Ext.AnimationQueue.start(Ext.emptyFn,c),C=window.getComputedStyle(i.dom),f=i.getId(),d=Ext.merge({},c.getData()),c.onBeforeStart&&c.onBeforeStart.call(c.scope||a,i),c.fireEvent("animationstart",c),a.fireEvent("animationstart",a,c),F=(d[f]=d).before,m=d.from,k=d.to,d.fromPropertyNames=g=[],d.toPropertyNames=e=[],k)k.hasOwnProperty(b)&&(k[b]=l=a.formatValue(k[b],b),h=a.formatName(b),(y=H.hasOwnProperty(b))||(l=a.getCssStyleValue(h,l)),m.hasOwnProperty(b)?(m[b]=n=a.formatValue(m[b],b),y||(n=a.getCssStyleValue(h,n)),l!==n&&(g.push(h),e.push(h))):l!==C.getPropertyValue(h)&&e.push(h));if(0!==(o=e.length)){for(0<(z=(s=a.getRunningData(f)).sessions).length&&a.refreshRunningAnimationsData(i,Ext.Array.merge(g,e),!0,d.replacePrevious),q=s.nameMap,p=s.nameList,A={},x=0;x<o;x++)A[b=e[x]]=!0,q.hasOwnProperty(b)?q[b]++:(q[b]=1,p.push(b));B={element:i,map:A,list:e.slice(),length:o,data:d,animation:c},z.push(B),c.on("stop","onAnimationStop",a),r=Ext.apply({},F),Ext.apply(r,m),0<p.length&&(g=Ext.Array.difference(p,g),e=Ext.Array.merge(g,e),r["transition-property"]=g),E[f]=r,j[f]=Ext.apply({},k),j[f]["transition-property"]=e,j[f]["transition-duration"]=d.duration,j[f]["transition-timing-function"]=d.easing,j[f]["transition-delay"]=d.delay,c.startTime=Date.now()}else a.onAnimationEnd(i,d,c)}v=a.$className,a.applyStyles(E),u=function(b){b.data===v&&b.source===window&&(window.removeEventListener("message",u,!1),a.applyStyles(j))},window.requestAnimationFrame?window.requestAnimationFrame(function(){window.addEventListener("message",u,!1),window.postMessage(v,"*")}):Ext.defer(function(){window.addEventListener("message",u,!1),window.postMessage(v,"*")},1)},onAnimationStop:function(h){var e,d,b,g,a,c=this.runningAnimationsData;for(e in c)if(c.hasOwnProperty(e))for(b=0,g=(d=c[e].sessions).length;b<g;b++)(a=d[b]).animation===h&&this.refreshRunningAnimationsData(a.element,a.list.slice(),!1)}}),Ext.define("Ext.theme.triton.list.TreeItem",{override:"Ext.list.TreeItem",compatibility:Ext.isIE8,updateFloated:function(b,a){this.callParent([b,a]),this.toolElement.syncRepaint()}}),Ext.define("Ext.mixin.Container",{extend:Ext.Mixin,mixinConfig:{id:"container"},isContainer:!0,config:{referenceHolder:!1},getReferences:function(){return Ext.ComponentManager.fixReferences(),this.refs||null},lookup:function(b){var a=this.getReferences();return a&&a[b]||null},lookupReference:function(a){return this.lookup(a)},privates:{attachReference:function(b){var a=this;a.destroying||a.destroyed||((a.refs||(a.refs={}))[b.referenceKey]=b)},clearReference:function(a){var b=this.refs,c=a.referenceKey;b&&c&&(a.viewModelKey=a.referenceKey=b[c]=null)},containerOnAdded:function(b,a){a&&Ext.ComponentManager.markReferencesDirty()},containerOnRemoved:function(b){var a;b||(a=this.lookupReferenceHolder())&&(Ext.ComponentManager.markReferencesDirty(),a.clearReferences())},clearReferences:function(){this.refs=null},initContainerInheritedState:function(b,h){var a=this,d=a.getController(),f=a.getSession(),g=a.getConfig("viewModel",!0),e=a.getReference(),c=a.getReferenceHolder();d?(b.referenceHolder=d,c=!0):c&&(b.referenceHolder=a),c?b.referencePath="":e&&a.isParentReference&&(b.referencePath=a.referenceKey+"."),f&&(b.session=f),g?b.viewModelPath="":e&&a.isParentReference&&(b.viewModelPath=a.viewModelKey+".")},setupReference:function(a){var b;return a&&">"===a.charAt(b=a.length-1)&&(this.isParentReference=!0,a=a.substring(0,b)),a}}}),Ext.define("Ext.mixin.Responsive",function(a){return{extend:Ext.Mixin,mixinConfig:{id:"responsive",after:{destroy:"destroy"}},config:{responsiveConfig:{$value:void 0,merge:function(b,c,f,e){if(!b)return c;var a,d=c?Ext.Object.chain(c):{};for(a in b)e&&a in d||(d[a]={fn:null,config:b[a]});return d}},responsiveFormulas:{$value:0,merge:function(b,c,d,a){return this.mergeNew(b,c,d,a)}}},destroy:function(){a.unregister(this),this.callParent()},privates:{statics:{active:!1,all:{},context:Ext.Object.chain(Ext.platformTags),count:0,nextId:0,activate:function(){a.active=!0,a.updateContext(),Ext.on("resize",a.onResize,a)},deactivate:function(){a.active=!1,Ext.un("resize",a.onResize,a)},notify:function(){var c,b=a.all,e=a.context,d=Ext.GlobalEvents,f=a.timer;for(c in f&&(a.timer=null,Ext.Function.cancelAnimationFrame(f)),a.updateContext(),Ext.suspendLayouts(),d.fireEvent("beforeresponsiveupdate",e),b)b[c].setupResponsiveContext();for(c in d.fireEvent("beginresponsiveupdate",e),b)b[c].updateResponsiveState();d.fireEvent("responsiveupdate",e),Ext.resumeLayouts(!0)},onResize:function(){a.timer||(a.timer=Ext.Function.requestAnimationFrame(a.onTimer))},onTimer:function(){a.timer=null,a.notify()},processConfig:function(b,c,a){var g,f=c&&c[a],e=b.config;f&&(g=b.getConfigurator().configs[a],e[a]=g.merge(f,e[a],b))},register:function(b){var c=b.$responsiveId;c||(b.$responsiveId=c=++a.nextId,a.all[c]=b,1==++a.count&&a.activate())},unregister:function(b){var c=b.$responsiveId;c in a.all&&(b.$responsiveId=null,delete a.all[c],0==--a.count&&a.deactivate())},updateContext:function(){var e=Ext.Element,d=e.getViewportWidth(),c=e.getViewportHeight(),b=a.context;b.width=d,b.height=c,b.tall=d<c,b.wide=!b.tall,b.landscape=b.portrait=!1,b.platform||(b.platform=Ext.platformTags),b[Ext.dom.Element.getOrientation()]=!0}},afterClassMixedIn:function(e){var a,b=e.prototype,d=b.responsiveConfig,c=b.responsiveFormulas;(d||c)&&(a={},d&&(delete b.responsiveConfig,a.responsiveConfig=d),c&&(delete b.responsiveFormulas,a.responsiveFormulas=c),e.getConfigurator().add(a))},applyResponsiveConfig:function(a){for(var b in a)a[b].fn=Ext.createRuleFn(b);return a},applyResponsiveFormulas:function(b){var a,c,d={};if(b)for(c in b)Ext.isString(a=b[c])&&(a=Ext.createRuleFn(a)),d[c]=a;return d},getResponsiveState:function(){var b,d,f=a.context,c=this.getResponsiveConfig(),e={};if(c)for(d in c)(b=c[d]).fn.call(this,f)&&Ext.merge(e,b.config);return e},setupResponsiveContext:function(){var c,b=this.getResponsiveFormulas(),d=a.context;if(b)for(c in b)d[c]=b[c].call(this,d)},transformInstanceConfig:function(c){var b,d=this;return a.register(d),c&&(a.processConfig(d,c,"responsiveConfig"),a.processConfig(d,c,"responsiveFormulas")),d.setupResponsiveContext(),b=d.getResponsiveState(),c&&(delete(b=Ext.merge({},c,b)).responsiveConfig,delete b.responsiveFormulas),b},updateResponsiveState:function(){var a=this.getResponsiveState();this.setConfig(a)}}}}),Ext.define("Ext.perf.Accumulator",function(){var c,b=null,d=Ext.global.chrome,a=function(){var b,c;if(a=Ext.now,Ext.isChrome&&d&&d.Interval)(b=new d.Interval).start(),a=function(){return b.microseconds()/1e3};else if(window.ActiveXObject)try{c=new ActiveXObject("SenchaToolbox.Toolbox"),Ext.senchaToolbox=c,a=function(){return c.milliseconds}}catch(e){}return Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=a,a()};function adjustSet(a,b){a.sum+=b,a.min=Math.min(a.min,b),a.max=Math.max(a.max,b)}function leaveFrame(f){var d=f||a()-this.time,e=this,c=e.accum;++c.count,--c.depth||adjustSet(c.total,d),adjustSet(c.pure,d-e.childTime),(b=e.parent)&&(++b.accum.childCount,b.childTime+=d)}function makeSet(){return{min:Number.MAX_VALUE,max:0,sum:0}}function makeTap(b,a){return function(){var c=b.enter(),d=a.apply(this,arguments);return c.leave(),d}}function setToJSON(d,e,b,c){var a={avg:0,min:c.min,max:c.max,sum:0};return d&&(b=b||0,a.sum=c.sum-e*b,a.avg=a.sum/d),a}return{constructor:function(b){var a=this;a.count=a.childCount=a.depth=a.maxDepth=0,a.pure=makeSet(),a.total=makeSet(),a.name=b},statics:{getTimestamp:a},format:function(b){c=c||new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(a){return Math.round(100*a)/100}});var a=this.getData(b);return a.name=this.name,a.pure.type="Pure",a.total.type="Total",a.times=[a.pure,a.total],c.apply(a)},getData:function(b){var a=this;return{count:a.count,childCount:a.childCount,depth:a.maxDepth,pure:setToJSON(a.count,a.childCount,b,a.pure),total:setToJSON(a.count,a.childCount,b,a.total)}},enter:function(){var c=this,d={accum:c,leave:leaveFrame,childTime:0,parent:b};return++c.depth,c.maxDepth<c.depth&&(c.maxDepth=c.depth),(b=d).time=a(),d},monitor:function(c,a,b){var d=this.enter();b?c.apply(a,b):c.call(a),d.leave()},report:function(){Ext.log(this.format())},tap:function(d,g){var b,f,a,h,e,c,i,l,j=this,k="string"==typeof g?[g]:g;return l=function(){if("string"==typeof d)for(b=Ext.global,h=d.split("."),a=0,e=h.length;a<e;++a)b=b[h[a]];else b=d;for(a=0,e=k.length;a<e;++a)c=k[a],(f="!"===c.charAt(0))?c=c.substring(1):f=!(c in b.prototype),(i=f?b:b.prototype)[c]=makeTap(j,i[c])},Ext.ClassManager.onCreated(l,j,d),j}}},function(){Ext.perf.getTimestamp=this.getTimestamp}),Ext.define("Ext.perf.Monitor",{singleton:!0,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[],this.accumulatorsByName={}},calibrate:function(){var b,d=new Ext.perf.Accumulator("$"),g=d.total,a=Ext.perf.Accumulator.getTimestamp,e=0;for(b=a();d.enter().leave(),++e,g.sum<100;);return(a()-b)/e},get:function(b){var c=this,a=c.accumulatorsByName[b];return a||(c.accumulatorsByName[b]=a=new Ext.perf.Accumulator(b),c.accumulators.push(a)),a},enter:function(a){return this.get(a).enter()},monitor:function(b,c,a){this.get(b).monitor(c,a)},report:function(){var a=this,b=a.accumulators,c=a.calibrate();b.sort(function(a,b){return a.name<b.name?-1:b.name<a.name?1:0}),a.updateGC(),Ext.log("Calibration: "+Math.round(100*c)/100+" msec/sample"),Ext.each(b,function(a){Ext.log(a.format(c))})},getData:function(c){var a={},b=this.accumulators;return Ext.each(b,function(b){(c||b.count)&&(a[b.name]=b.getData())}),a},reset:function(){Ext.each(this.accumulators,function(b){var a=b;a.count=a.childCount=a.depth=a.maxDepth=0,a.pure={min:Number.MAX_VALUE,max:0,sum:0},a.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var a,b=this.accumulatorsByName.GC,c=Ext.senchaToolbox;b&&(b.count=c.garbageCollectionCounter||0,b.count&&(a=b.pure,b.total.sum=a.sum=c.garbageCollectionMilliseconds,a.min=a.max=a.sum/b.count,(a=b.total).min=a.max=a.sum/b.count))},watchGC:function(){Ext.perf.getTimestamp();var a=Ext.senchaToolbox;a&&(this.get("GC"),a.watchGarbageCollector(!1))},setup:function(a){var d,c,f,b,e;for(d in a=a||{render:{"Ext.Component":"render"},layout:{"Ext.layout.Context":"run"}},this.currentConfig=a)if(a.hasOwnProperty(d))for(b in c=a[d],f=Ext.Perf.get(d),c)c.hasOwnProperty(b)&&(e=c[b],f.tap(b,e));this.watchGC()},setupLog:function(e){var a,f,d,b,c;for(a in e)if(e.hasOwnProperty(a)&&(f=Ext.ClassManager.get(a))){for(b in c={},d=e[a])c[b]=function(b,a){return function(){var f,c,e,d,g;return f=+Date.now(),g=this.callParent(arguments),c=Date.now()-f,window.console&&0<c&&((d="this"===a?this:"string"==typeof a?this[a]:"number"==typeof a?arguments[a]:null)&&(e=d.id),null!=e?console.log(b+" for "+e+": "+c+"ms"):console.log(b+" for unknown: "+c+"ms"),console.trace&&console.trace()),g}}(b,d[b]);Ext.override(f,c)}}}),Ext.define("Ext.plugin.Abstract",{alternateClassName:"Ext.AbstractPlugin",isPlugin:!0,constructor:function(a){a&&(this.pluginConfig=a,this.initConfig(a))},clonePlugin:function(a){return new this.self(Ext.apply({},a,this.pluginConfig))},setCmp:function(a){this.cmp=a},getCmp:function(){return this.cmp},init:Ext.emptyFn,destroy:function(){this.cmp=this.pluginConfig=null,this.callParent()},onClassExtended:function(c,b,d){var a=b.alias;a&&!b.ptype&&(Ext.isArray(a)&&(a=a[0]),c.prototype.ptype=a.split("plugin.")[1])},resolveListenerScope:function(b){var c,a=this,d=a.getCmp();return d&&(c=d.resolveSatelliteListenerScope(a,b)),c||a.mixins.observable.resolveListenerScope.call(a,b)}}),Ext.define("Ext.overrides.plugin.Abstract",{override:"Ext.plugin.Abstract",$configStrict:!1,$configPrefixed:!1,disabled:!1,getState:null,applyState:null,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}}),Ext.define("Ext.util.ItemCollection",{extend:Ext.util.MixedCollection,alternateClassName:"Ext.ItemCollection",getKey:function(a){return a.getItemId&&a.getItemId()},has:function(a){return this.map.hasOwnProperty(a.getId())}}),Ext.define("Ext.util.LocalStorage",{id:null,destroyed:!1,lazyKeys:!0,prefix:"",session:!1,_keys:null,_store:null,_users:0,statics:{cache:{},get:function(c){var a,e=this.cache,b={_users:1};return Ext.isString(c)?b.id=c:Ext.apply(b,c),(a=e[b.id])?++a._users:a=new this(b),a},supported:!0},constructor:function(b){var a=this;Ext.apply(a,b),a._users&&(Ext.util.LocalStorage.cache[a.id]=a),a.init()},init:function(){var a=this,b=a.id;!a.prefix&&b&&(a.prefix=b+"-"),a._store=a.session?window.sessionStorage:window.localStorage},destroy:function(){var a=this;delete Ext.util.LocalStorage.cache[a.id],a._store=a._keys=null,a.callParent()},getKeys:function(){var d,b,c=this,g=c._store,f=c.prefix,a=c._keys,e=f.length;if(!a)for(c._keys=a=[],d=g.length;d--;)(b=g.key(d)).length>e&&f===b.substring(0,e)&&a.push(b.substring(e));return a},release:function(){--this._users||this.destroy()},save:Ext.emptyFn,clear:function(){var c,a=this,e=a._store,d=a.prefix,b=a._keys||a.getKeys();for(c=b.length;c--;)e.removeItem(d+b[c]);b.length=0},key:function(a){var b=this._keys||this.getKeys();return 0<=a&&a<b.length?b[a]:null},getItem:function(a){var b=this.prefix+a;return this._store.getItem(b)},removeItem:function(d){var a=this,f=a.prefix+d,b=a._store,c=a._keys,e=b.length;b.removeItem(f),c&&e!==b.length&&(a.lazyKeys?a._keys=null:Ext.Array.remove(c,d))},setItem:function(d,f){var b=this,g=b.prefix+d,a=b._store,e=a.length,c=b._keys;a.setItem(g,f),c&&e!==a.length&&c.push(d)}},function(){"localStorage"in window||(Ext.isIE?this.override({data:null,flushDelay:1,init:function(){var b,a=this,c=a.data;a.el=b=document.createElement("div"),b.id=a.id||(a.id="extjs-localstore"),b.addBehavior("#default#userdata"),Ext.getHead().dom.appendChild(b),b.load(a.id),c=b.getAttribute("xdata"),a.data=c=c?Ext.decode(c):{},a._flushFn=function(){a._timer=null,a.save(0)}},destroy:function(){var a=this,b=a.el;b&&(a._timer&&a.save(),b.parentNode.removeChild(b),a.data=a.el=null,a.callParent())},getKeys:function(){var b=this,a=b._keys;return a||(b._keys=a=Ext.Object.getKeys(b.data)),a},save:function(b){var a=this;b?a._timer||(a._timer=Ext.defer(a._flushFn,b)):(a._timer&&(clearTimeout(a._timer),a._timer=null),a.el.setAttribute("xdata",Ext.encode(a.data)),a.el.save(a.id))},clear:function(){var a=this;a.data={},a._keys=null,a.save(a.flushDelay)},getItem:function(b){var a=this.data;return b in a?a[b]:null},removeItem:function(b){var a=this,d=a._keys,c=a.data;b in c&&(delete c[b],d&&(a.lazyKeys?a._keys=null:Ext.Array.remove(d,b)),a.save(a.flushDelay))},setItem:function(b,e){var a=this,c=a.data,d=a._keys;!d||b in c||d.push(b),c[b]=e,a.save(a.flushDelay)}}):this.supported=!1)}),Ext.define("Ext.util.TaskManager",{extend:Ext.util.TaskRunner,alternateClassName:["Ext.TaskManager"],singleton:!0}),Ext.define("Ext.util.TextMetrics",{statics:{shared:null,measure:function(d,e,c){var b=this,a=b.shared;return(a=a||(b.shared=new b(d,c))).bind(d),a.setFixedWidth(c||"auto"),a.getSize(e)},destroy:function(){Ext.destroy(this.shared),this.shared=null}},constructor:function(c,b){var a=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"textmetrics"});a.setVisibilityMode(1),this.measure=a,c&&this.bind(c),a.position("absolute"),a.setLocalXY(-1e3,-1e3),a.hide(),b&&a.setWidth(b)},getSize:function(c){var b,a=this.measure;return a.setHtml(c),b=a.getSize(),a.setHtml(""),b},bind:function(b){var a=this;a.el=Ext.get(b),a.measure.setStyle(a.el.getStyle(["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-break"]))},setFixedWidth:function(a){this.measure.setWidth(a)},getWidth:function(a){return this.measure.dom.style.width="auto",this.getSize(a).width},getHeight:function(a){return this.getSize(a).height},destroy:function(){var a=this;a.el=a.measure=Ext.destroy(a.measure),a.callParent()}},function(){Ext.Element.override({getTextWidth:function(a,c,b){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(a,this.dom.innerHTML,!0)).width,c||0,b||1e6)}})}),Ext.define("Ext.ElementLoader",{mixins:[Ext.util.Observable],statics:{Renderer:{Html:function(c,b,a){return c.getTarget().setHtml(b.responseText,!0===a.scripts,a.rendererScope),!0}}},url:null,params:null,baseParams:null,autoLoad:!1,target:null,loadMask:!1,ajaxOptions:null,scripts:!1,isLoader:!0,constructor:function(c){var b,a=this;a.mixins.observable.constructor.call(a,c),a.setTarget(a.target),a.autoLoad&&(!0===(b=a.autoLoad)&&(b=null),a.load(b))},setTarget:function(a){var b=this;a=Ext.get(a),b.target&&b.target!==a&&b.abort(),b.target=a},getTarget:function(){return this.target||null},abort:function(){var a=this.active;void 0!==a&&(Ext.Ajax.abort(a.request),a.mask&&this.removeMask(),delete this.active)},removeMask:function(){this.target.unmask()},addMask:function(a){this.target.mask(!0===a?null:a)},load:function(b){b=Ext.apply({},b);var a=this,d=Ext.isDefined(b.loadMask)?b.loadMask:a.loadMask,c=Ext.apply({},b.params),e=Ext.apply({},b.ajaxOptions),f=b.callback||a.callback,g=b.scope||a.scope||a;Ext.applyIf(e,a.ajaxOptions),Ext.applyIf(b,e),Ext.applyIf(c,a.params),Ext.apply(c,a.baseParams),Ext.applyIf(b,{url:a.url}),Ext.apply(b,{scope:a,params:c,callback:a.onComplete}),!1!==a.fireEvent("beforeload",a,b)&&(d&&a.addMask(d),a.active={options:b,mask:d,scope:g,callback:f,success:b.success||a.success,failure:b.failure||a.failure,renderer:b.renderer||a.renderer,scripts:Ext.isDefined(b.scripts)?b.scripts:a.scripts},a.active.request=Ext.Ajax.request(b),a.setOptions(a.active,b))},setOptions:function(b,a){b.rendererScope=a.rendererScope||this.rendererScope||this},onComplete:function(d,e,c){var g,f,a=this,b=a.active;b&&(f=b.scope,g=b.rendererScope,(e=e&&!1!==a.getRenderer(b.renderer).call(g,a,c,b))?(Ext.callback(b.success,f,[a,c,d]),a.fireEvent("load",a,c,d)):(Ext.callback(b.failure,f,[a,c,d]),a.fireEvent("exception",a,c,d)),Ext.callback(b.callback,f,[a,e,c,d]),b.mask&&a.removeMask()),delete a.active},getRenderer:function(a){return Ext.isFunction(a)?a:this.statics().Renderer.Html},startAutoRefresh:function(b,c){var a=this;a.stopAutoRefresh(),a.autoRefresh=Ext.interval(function(){a.load(c)},b)},stopAutoRefresh:function(){clearInterval(this.autoRefresh),delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var a=this;a.stopAutoRefresh(),delete a.target,a.abort(),a.callParent()}}),Ext.define("Ext.ComponentLoader",{extend:Ext.ElementLoader,statics:{Renderer:{Data:function(c,b,d){var a=!0;try{c.getTarget().update(Ext.decode(b.responseText))}catch(e){a=!1}return a},Component:function(f,d,e){var b=!0,a=f.getTarget(),c=[];try{c=Ext.decode(d.responseText)}catch(g){b=!1}return b&&(a.suspendLayouts(),e.removeAll&&a.removeAll(),a.add(c),a.resumeLayouts(!0)),b}}},target:null,loadOnRender:!1,loadMask:!1,renderer:"html",setTarget:function(b){var a=this;Ext.isString(b)&&(b=Ext.getCmp(b)),a.target&&a.target!==b&&a.abort(),(a.target=b)&&a.loadOnRender&&(b.rendered?a.doLoadOnRender():a.mon(b,"render",a.doLoadOnRender,a))},doLoadOnRender:function(){var a=this.loadOnRender;this.load(Ext.isObject(a)?a:null)},removeMask:function(){this.target.setLoading(!1)},addMask:function(a){this.target.setLoading(a)},setOptions:function(b,a){b.removeAll=Ext.isDefined(a.removeAll)?a.removeAll:this.removeAll,b.rendererScope=a.rendererScope||this.rendererScope||this.target},getRenderer:function(a){if(Ext.isFunction(a))return a;var b=this.statics().Renderer;switch(a){case"component":return b.Component;case"data":return b.Data;default:return Ext.ElementLoader.Renderer.Html}}}),Ext.define("Ext.layout.SizeModel",{constructor:function(e){var c,a=this,b=a.self,d=b.sizeModelsArray;Ext.apply(a,e),a[c=a.name]=!0,a.fixed=!(a.auto=a.natural||a.shrinkWrap),d[a.ordinal=d.length]=b[c]=b.sizeModels[c]=a},statics:{sizeModelsArray:[],sizeModels:{}},calculated:!1,configured:!1,constrainedMax:!1,constrainedMin:!1,natural:!1,shrinkWrap:!1,calculatedFromConfigured:!1,calculatedFromNatural:!1,calculatedFromShrinkWrap:!1,names:null},function(){var b,c,f,g,e,a=this,d=a.sizeModelsArray;for(new a({name:"calculated"}),new a({name:"configured",names:{width:"width",height:"height"}}),new a({name:"natural"}),new a({name:"shrinkWrap"}),new a({name:"calculatedFromConfigured",configured:!0,calculatedFrom:!0,names:{width:"width",height:"height"}}),new a({name:"calculatedFromNatural",natural:!0,calculatedFrom:!0}),new a({name:"calculatedFromShrinkWrap",shrinkWrap:!0,calculatedFrom:!0}),new a({name:"constrainedMax",configured:!0,constrained:!0,names:{width:"maxWidth",height:"maxHeight"}}),new a({name:"constrainedMin",configured:!0,constrained:!0,names:{width:"minWidth",height:"minHeight"}}),new a({name:"constrainedDock",configured:!0,constrained:!0,constrainedByMin:!0,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}}),b=0,f=d.length;b<f;++b)for((e=d[b]).pairsByHeightOrdinal=g=[],c=0;c<f;++c)g.push({width:e,height:d[c]})}),Ext.define("Ext.layout.Layout",{mixins:[Ext.mixin.Factoryable],factoryConfig:{type:"layout"},isLayout:!0,initialized:!1,running:!1,needsItemSize:!0,setsItemSize:!0,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:!1,$configStrict:!1,constructor:function(b){var a=this;a.id=Ext.id(null,a.type+"-"),a.initConfig(b),delete a.type,a.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(b){var c,a=this,d=a.context;a.lastWidthModel!==b.widthModel&&(a.lastWidthModel&&(c=!0),a.lastWidthModel=b.widthModel),a.lastHeightModel!==b.heightModel&&(a.lastWidthModel&&(c=!0),a.lastHeightModel=b.heightModel),c&&((d=b.context).clearTriggers(a,!1),d.clearTriggers(a,!0),a.triggerCount=0)},finishedLayout:function(a){this.lastWidthModel=a.widthModel,this.lastHeightModel=a.heightModel,this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(a){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(a){return!1},isItemLayoutRoot:function(d){var a=d.getSizeModel(),c=a.width,b=a.height;return!(!d.componentLayout.lastComponentSize&&(c.calculated||b.calculated))&&(!c.shrinkWrap&&!b.shrinkWrap)},isItemShrinkWrap:function(a){return a.shrinkWrap},isRunning:function(){return!!this.ownerContext},getItemsRenderTree:function(g,c){var d,a,b,e,f=g.length;if(f)for(e=[],d=0;d<f;++d)(a=g[d]).rendered||(c&&void 0!==c[a.id]?b=c[a.id]:(this.configureItem(a),b=a.getRenderTree(),c&&(c[a.id]=b)),b&&e.push(b));return e},finishRender:Ext.emptyFn,finishRenderItems:function(e,c){var a,b,d=c.length;for(a=0;a<d;a++)(b=c[a]).rendering&&b.finishRender(a)},renderChildren:function(){var a=this,c=a.getLayoutItems(),b=a.getRenderTarget();a.renderItems(c,b)},renderItems:function(e,d){var a,c=this,f=e.length,b=0;if(f){for(Ext.suspendLayouts();b<f;b++)(a=e[b])&&!a.rendered?c.renderItem(a,d,b):c.isValidParent(a,d,b)?c.configureItem(a):c.moveItem(a,d,b);Ext.resumeLayouts(!0)}},isValidParent:function(e,d,a){var b=d&&d.dom||d,c=this.getItemLayoutEl(e);return!(!c||!b)&&("number"==typeof a?(a=this.getPositionOffset(a),c===b.childNodes[a]):c.parentNode===b)},getItemLayoutEl:function(c){var b,a=c.el?c.el.dom:Ext.getDom(c),d=a.parentNode;return d&&(b=d.className)&&-1!==b.indexOf(Ext.baseCSSPrefix+"resizable-wrap")&&(a=a.parentNode),a},getPositionOffset:function(a){return a},configureItem:function(a){a.ownerLayout=this},renderItem:function(a,c,b){a.rendered||(this.configureItem(a),a.render(c,b))},moveItem:function(c,a,b){a=a.dom||a,"number"==typeof b&&(b=a.childNodes[b]),a.insertBefore(c.el.dom,b||null),c.container=Ext.get(a),this.configureItem(c)},onContentChange:function(){return this.owner.updateLayout(),!0},initLayout:function(){this.initialized=!0},setOwner:function(a){this.owner=a},getLayoutItems:function(){return[]},onAdd:function(a){a.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(b){var a,e=b.el,c=this.owner;b.rendered&&(a=[].concat(this.itemCls||[]),c.itemCls&&(a=Ext.Array.push(a,c.itemCls)),a.length&&e.removeCls(a)),delete b.ownerLayout},afterCollapse:function(b,a){a&&this.onContentChange(b)},afterExpand:function(b,a){a&&this.onContentChange(b)},destroy:function(){var b,a=this;a.targetCls&&(b=a.getTarget())&&b.removeCls(a.targetCls),a.onDestroy(),a.callParent()},sortWeightedItems:function(b,d){for(var a=0,c=b.length;a<c;++a)b[a].$i=a;for(Ext.Array.sort(b,function(b,c){var a=c.weight-b.weight;return a||(a=b.$i-c.$i,b[d]&&(a=-a)),a}),a=0;a<c;++a)delete b[a].$i}},function(){this.prototype.sizeModels=this.sizeModels=Ext.layout.SizeModel.sizeModels}),Ext.define("Ext.layout.container.Container",{extend:Ext.layout.Layout,alias:"layout.container",alternateClassName:"Ext.layout.ContainerLayout",mixins:[Ext.util.ElementContainer],type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:!0,usesContainerWidth:!0,usesHeight:!0,usesWidth:!0,constructor:function(){this.callParent(arguments),this.mixins.elementCt.constructor.call(this)},destroy:function(){this.callParent(),this.mixins.elementCt.destroy.call(this)},beginLayout:function(a){this.callParent(arguments),a.targetContext=a.paddingContext=a.getEl("getTarget",this),this.cacheChildItems(a)},beginLayoutCycle:function(b,c){var a=this;a.callParent(arguments),c&&(a.usesContainerHeight&&++b.consumersContainerHeight,a.usesContainerWidth&&++b.consumersContainerWidth)},cacheChildItems:function(b){var f,e,c,g,a,d=this;if(d.needsItemSize||d.setsItemSize)for(f=b.context,e=b.childItems=[],g=(c=b.visibleItems=d.getVisibleItems()).length,a=0;a<g;++a)e.push(f.getCmp(c[a]))},cacheElements:function(){var a=this.owner;this.attachChildEls(a.el,a)},calculate:function(a){var b=a.props,c=a.el;a.widthModel.shrinkWrap&&isNaN(b.width)&&a.setContentWidth(c.getWidth()),a.heightModel.shrinkWrap&&isNaN(b.height)&&a.setContentHeight(c.getHeight())},configureItem:function(f){var e,a,c=this,b=c.itemCls,d=c.owner.itemCls;f.ownerLayout=c,b&&("string"==typeof b?a=[b]:e=!!(a=b)),d&&(e&&(a=Ext.Array.clone(a)),a=Ext.Array.push(a||[],d)),a&&f.addCls(a)},doRenderBody:function(b,a){this.renderItems(b,a),this.renderContent(b,a)},doRenderContainer:function(d,b){var a=b.$comp.layout,e=a.getRenderTpl(),c=a.getRenderData();e.applyOut(c,d)},doRenderItems:function(c,b){var a=b.$layout.getRenderTree();a&&Ext.DomHelper.generateMarkup(a,c)},finishRender:function(){var b,c,a=this;a.callParent(),a.cacheElements(),b=a.getRenderTarget(),c=a.getLayoutItems(),a.finishRenderItems(b,c)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(d,k){var h,g,b,a,c=d.targetContext,i=c.getFrameInfo(),j=d.paddingContext.getPaddingInfo(),f=0,e=0;return d.widthModel.shrinkWrap||(++e,(h="number"==typeof(b=k?c.getDomProp("width"):c.getProp("width")))&&(++f,(b-=i.width+j.width)<0&&(b=0))),d.heightModel.shrinkWrap||(++e,(g="number"==typeof(a=k?c.getDomProp("height"):c.getProp("height")))&&(++f,(a-=i.height+j.height)<0&&(a=0))),{width:b,height:a,needed:e,got:f,gotAll:f===e,gotWidth:h,gotHeight:g}},getPositionOffset:function(a){if(!this.createsInnerCt){var b=this.owner.itemNodeOffset;b&&(a+=b)}return a},getLayoutItems:function(){var b=this.owner,a=b&&b.items;return a&&a.items||[]},getRenderData:function(){var a=this.owner;return{$comp:a,$layout:this,ownerId:a.id}},getRenderedItems:function(){var a,b,c=this,f=c.getRenderTarget(),e=c.getLayoutItems(),g=e.length,d=[];for(a=0;a<g;a++)(b=e[a]).rendered&&c.isValidParent(b,f,a)&&d.push(b);return d},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var a=Ext.XTemplate.getTpl(this,"renderTpl");return a.renderContent||this.owner.setupRenderTpl(a),a},getRenderTree:function(){for(var b,a,c=this.owner.items,d={};a=c.generation,b=this.getItemsRenderTree(this.getLayoutItems(),d),c.generation!==a;);return b},renderChildren:function(){for(var c,d,a=this,b=a.owner.items,e=a.getRenderTarget();c=b.generation,d=a.getLayoutItems(),a.renderItems(d,e),b.generation!==c;);},getScrollbarsNeeded:function(d,b,h,e){var c=Ext.getScrollbarSize(),i="number"==typeof d,f="number"==typeof b,g=0,a=0;return c.width?(f&&b<e&&(a=2,d-=c.width),i&&d<h&&(g=1,!a&&f&&(b-=c.height)<e&&(a=2)),a+g):0},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var b,a,e=this.getRenderTarget(),d=this.getLayoutItems(),f=d.length,c=[];for(b=0;b<f;b++)(a=d[b]).rendered&&this.isValidParent(a,e,b)&&!0!==a.hidden&&!a.floated&&c.push(a);return c},getMoveAfterIndex:function(a){return this.owner.items.indexOf(a)+1},moveItemBefore:function(b,c){var a,f=this.owner,d=f.items,e=d.indexOf(b);return b===c?b:(c?(a=d.indexOf(c),-1<e&&e<a&&--a):a=d.length,f.insert(a,b))},setupRenderTpl:function(a){a.renderBody=this.doRenderBody,a.renderContainer=this.doRenderContainer,a.renderItems=this.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(a){a.liquidLayout||++this.activeItemCount,this.callParent([a])},onRemove:function(a,b){a.liquidLayout||--this.activeItemCount,this.callParent([a,b])}}),Ext.define("Ext.layout.container.Auto",{alias:["layout.auto","layout.autocontainer"],extend:Ext.layout.container.Container,type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:!1,managePadding:!0,manageOverflow:!1,needsItemSize:!1,setsItemSize:!1,lastOverflowAdjust:{width:0,height:0},outerCtCls:Ext.baseCSSPrefix+"autocontainer-outerCt",innerCtCls:Ext.baseCSSPrefix+"autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','<tpl if="!$comp.html">role="presentation"</tpl>','class="{innerCtCls}">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(a){this.callParent(arguments),this.initContextItems(a)},beforeLayoutCycle:function(d){var a=this.owner,c=a.inheritedState,b=a.inheritedStateInner;c&&!c.invalid||(c=a.getInherited(),b=a.inheritedStateInner),d.widthModel.shrinkWrap?b.inShrinkWrapTable=!0:delete b.inShrinkWrapTable},beginLayoutCycle:function(e){var f,d,c,b,h,a=this,g=a.outerCt,l=a.lastOuterCtWidth||"",k=a.lastOuterCtHeight||"",j=a.lastOuterCtTableLayout||"",i=e.state;a.callParent(arguments),d=c=b="",e.widthModel.shrinkWrap||(d="100%",h=a.owner.inheritedStateInner,f=a.getOverflowXStyle(e),b=h.inShrinkWrapTable||"auto"===f||"scroll"===f?"":"fixed"),e.heightModel.shrinkWrap||Ext.supports.PercentageHeightOverflowBug||(c="100%"),d===l&&!a.hasOuterCtPxWidth||(g.setStyle("width",d),a.lastOuterCtWidth=d,a.hasOuterCtPxWidth=!1),b!==j&&(g.setStyle("table-layout",b),a.lastOuterCtTableLayout=b),c===k&&!a.hasOuterCtPxHeight||(g.setStyle("height",c),a.lastOuterCtHeight=c,a.hasOuterCtPxHeight=!1),a.hasInnerCtPxHeight&&(a.innerCt.setStyle("height",""),a.hasInnerCtPxHeight=!1),i.overflowAdjust=i.overflowAdjust||a.lastOverflowAdjust},calculate:function(b){var a=this,d=b.state,c=a.getContainerSize(b,!0),e=d.calculatedItems||(d.calculatedItems=!a.calculateItems||a.calculateItems(b,c));a.setCtSizeIfNeeded(b,c),e&&b.hasDomProp("containerChildrenSizeDone")&&(a.calculateContentSize(b),c.gotAll)?!a.manageOverflow||b.state.secondPass||a.reserveScrollbar||a.calculateOverflow(b,c):a.done=!1},calculateContentSize:function(a){var b=this,f=(a.widthModel.shrinkWrap?1:0)|(a.heightModel.shrinkWrap?2:0),d=1&f||void 0,c=2&f||void 0,e=0,g=a.props;d&&(isNaN(g.contentWidth)?++e:d=void 0),c&&(isNaN(g.contentHeight)?++e:c=void 0),e&&(d&&!a.setContentWidth(b.measureContentWidth(a))&&(b.done=!1),c&&!a.setContentHeight(b.measureContentHeight(a))&&(b.done=!1))},calculateOverflow:function(d){var g,f,e,a,h,i,b,c=this;h="auto"===c.getOverflowXStyle(d),i="auto"===c.getOverflowYStyle(d),(h||i)&&(e=Ext.getScrollbarSize(),a=0,(b=d.overflowContext.el.dom).scrollWidth>b.clientWidth&&(a|=1),b.scrollHeight>b.clientHeight&&(a|=2),g=i&&2&a?e.width:0,f=h&&1&a?e.height:0,g===c.lastOverflowAdjust.width&&f===c.lastOverflowAdjust.height||(c.done=!1,d.invalidate({state:{overflowAdjust:{width:g,height:f},overflowState:a,secondPass:!0}})))},completeLayout:function(a){this.lastOverflowAdjust=a.state.overflowAdjust},doRenderBody:function(b,a){var c=a.$layout,d=Ext.XTemplate,e=c.beforeBodyTpl,f=c.afterBodyTpl;e&&d.getTpl(c,"beforeBodyTpl").applyOut(a,b),this.renderItems(b,a),this.renderContent(b,a),f&&d.getTpl(c,"afterBodyTpl").applyOut(a,b)},doRenderPadding:function(d,b){var e=b.$layout,a=b.$layout.owner,c=a[a.contentPaddingProperty];e.managePadding&&c&&d.push("padding:",a.unitizeBox(c))},finishedLayout:function(b){var a=this.innerCt;this.callParent(arguments),Ext.isIE8&&a.repaint(),Ext.isOpera&&(a.setStyle("position","relative"),a.dom.scrollWidth,a.setStyle("position",""))},getContainerSize:function(c,d){var b=this.callParent(arguments),a=c.state.overflowAdjust;return a&&(b.width-=a.width,b.height-=a.height),b},getRenderData:function(){var b=this,a=b.callParent();return a.innerCtCls=b.innerCtCls,a.outerCtCls=b.outerCtCls,a},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(a){return a.overflowXStyle||(a.overflowXStyle=this.owner.scrollFlags.overflowX||a.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(a){return a.overflowYStyle||(a.overflowYStyle=this.owner.scrollFlags.overflowY||a.overflowContext.getStyle("overflow-y"))},initContextItems:function(a){var b=this,d=a.target,c=b.owner.getOverflowEl();a.outerCtContext=a.getEl("outerCt",b),a.innerCtContext=a.getEl("innerCt",b),a.overflowContext=c===a.el?a:a.getEl(c),void 0!==d[d.contentPaddingProperty]&&(a.paddingContext=a.innerCtContext)},initLayout:function(){var a=this,b=Ext.getScrollbarSize().width,c=a.owner;a.callParent(),b&&a.manageOverflow&&!a.hasOwnProperty("lastOverflowAdjust")&&(c.scrollable||a.reserveScrollbar)&&(a.lastOverflowAdjust={width:b,height:0})},measureContentHeight:function(b){var a=this.outerCt.getHeight(),c=b.target;return this.managePadding&&void 0===c[c.contentPaddingProperty]&&(a+=b.targetContext.getPaddingInfo().height),a},measureContentWidth:function(f){var a,b,e,c,d;return this.chromeCellMeasureBug&&"table-cell"===(e=(b=(a=this.innerCt.dom).style).display)&&(b.display="",a.offsetWidth,b.display=e),Ext.isSafari&&((b=(a=this.outerCt.dom).style).display="table-cell",a.offsetWidth,a.style.display=""),c=this.outerCt.getWidth(),d=f.target,this.managePadding&&void 0===d[d.contentPaddingProperty]&&(c+=f.targetContext.getPaddingInfo().width),c},setCtSizeIfNeeded:function(a,h){var e,d,c=this,b=h.height,k=a.paddingContext.getPaddingInfo(),g=c.getTarget(),f=c.getOverflowXStyle(a),j="auto"===f||"scroll"===f,i=Ext.getScrollbarSize();b&&!a.heightModel.shrinkWrap&&(Ext.supports.PercentageHeightOverflowBug&&(e=!0),Ext.isIE8&&(d=!0),(e||d)&&j&&g.dom.scrollWidth>g.dom.clientWidth&&(b=Math.max(b-i.height,0)),e&&(a.outerCtContext.setProp("height",b+k.height),c.hasOuterCtPxHeight=!0),d&&(a.innerCtContext.setProp("height",b),c.hasInnerCtPxHeight=!0))},setupRenderTpl:function(a){this.callParent(arguments),a.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&26<=Ext.chromeVersion}),Ext.define("Ext.ZIndexManager",{alternateClassName:"Ext.WindowGroup",statics:{zBase:9e3,activeCounter:0},constructor:function(b){var a=this;a.id=Ext.id(null,"zindex-mgr-"),a.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(b,c){var a=(b.alwaysOnTop||0)-(c.alwaysOnTop||0);return a=a||b.getActiveCounter()-c.getActiveCounter()}},filters:{filterFn:function(a){return a.isVisible()}}}),a.zIndexStack.addObserver(a),a.front=null,a.globalListeners=Ext.GlobalEvents.on({beforehide:a.onComponentShowHide,show:a.onComponentShowHide,scope:a,destroyable:!0}),b?b.isContainer?(b.on("resize",a.onContainerResize,a),a.zseed=Ext.Number.from(a.rendered?b.getEl().getStyle("zIndex"):void 0,a.getNextZSeed()),a.targetEl=b.getTargetEl(),a.container=b):(Ext.on("resize",a.onContainerResize,a),a.zseed=a.getNextZSeed(),a.targetEl=Ext.get(b)):(a.zseed=a.getNextZSeed(),Ext.onInternalReady(function(){Ext.on("resize",a.onContainerResize,a),a.targetEl=Ext.getBody()}))},getId:function(){return this.id},getNextZSeed:function(){return Ext.ZIndexManager.zBase+=1e4},setBase:function(a){return this.zseed=a,this.onCollectionSort()},onCollectionSort:function(){var e,c,f,a,d=this,b=d.front,g=(b&&b.containsFocus,d.zseed),i=d.zIndexStack.getRange(),j=i.length,h=!1;for(e=0;e<j;e++)g=(c=i[e]).setZIndex(g),c.hidden||(a=c).modal&&(f=c);return a!==b&&(b&&!b.destroying&&b.setActive(!1),a&&(h=a.isFocusable(!0)&&(a.modal||a.focusOnToFront&&!a.preventFocusOnActivate),a.setActive(!0,h))),d.front=a,f?d.showModalMask(f):d.hideModalMask(),g},onComponentUpdate:function(a){this.zIndexStack.contains(a)&&this.zIndexStack.sort()},onComponentRender:function(a){this.zIndexStack.itemChanged(a,"hidden")},onComponentShowHide:function(b){var a=this.zIndexStack;b.isFloating()&&!this.hidingAll&&(a.getSource()||a).contains(b)&&(a.itemChanged(b,"hidden"),a.sort())},register:function(a){var b=this;a.zIndexManager&&a.zIndexManager.unregister(a),a.zIndexManager=b,a.rendered||a.on("render",b.onComponentRender,b,{single:!0}),b.zIndexStack.add(a)},unregister:function(b){var a=this;delete b.zIndexManager,b.un("render",a.onComponentRender,a),a.zIndexStack.remove(b),a.onCollectionSort()},get:function(a){return a.isComponent?a:this.zIndexStack.get(a)},bringToFront:function(a,f){var c,d,b=this.zIndexStack,g=b.last();return!(!(a=this.get(a))||b.find("alwaysOnTop",!0))&&(d=a.preventFocusOnActivate,a.preventFocusOnActivate=f,a.setActiveCounter(++Ext.ZIndexManager.activeCounter),a.preventFocusOnActivate=d,(c=b.last())===a&&c!==g)},sendToBack:function(a){return(a=this.get(a))&&a.setActiveCounter(0),a||null},hideAll:function(){var a,b=this.zIndexStack.getRange(),c=b.length;for(this.hidingAll=!0,a=0;a<c;a++)b[a].hide();this.hidingAll=!1},hide:function(){var c,a,b=this,d=Ext.Element.getActiveElement(),e=b.tempHidden=b.zIndexStack.getRange(),f=e.length;for(b.focusRestoreElement=null,c=0;c<f;c++)(a=e[c]).el.contains(d)&&(b.focusRestoreElement=d),a.el.hide(),a.hidden=!0},show:function(){var c,a,b=this,d=b.tempHidden,e=d?d.length:0;for(c=0;c<e;c++)(a=d[c]).el.show(),a.hidden=!1,a.setPosition(a.x,a.y);b.tempHidden=null,b.focusRestoreElement&&b.focusRestoreElement.focus()},getActive:function(){return this.zIndexStack.last()},getBy:function(b,a){return this.zIndexStack.filterBy(b,a).getRange()},each:function(b,a){this.zIndexStack.each(b,a)},eachBottomUp:function(f,d){var b,a,c=this.zIndexStack.getRange(),e=c.length;for(b=0;b<e;b++)if((a=c[b]).isComponent&&!1===f.call(d||a,a))return},eachTopDown:function(e,d){var b,a,c=this.zIndexStack.getRange();for(b=c.length;0<b--;)if((a=c[b]).isComponent&&!1===e.call(d||a,a))return},destroy:function(){var b,a=this,c=a.zIndexStack.getRange(),d=c.length;for(b=0;b<d;b++)Ext.destroy(c[b]);a.container?a.container.un("resize",a.onContainerResize,a):a.targetEl&&Ext.un("resize",a.onContainerResize,a),Ext.destroy(a.mask,a.maskShim,a.zIndexStack,a.globalListeners),a.zIndexStack=a.container=a.targetEl=a.globalListeners=null,a.callParent()},privates:{getMaskBox:function(){var a=this.mask.maskTarget;return a.dom===document.body?{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}:a.getBox()},onContainerResize:function(){var c,d=this,b=d.mask,a=d.maskShim;b&&b.isVisible()&&(b.hide(),a&&a.hide(),c=d.getMaskBox(),a&&(a.setSize(c),a.show()),b.setSize(c),b.show())},onMaskClick:function(){this.front&&this.front.focus()},showModalMask:function(c){var e,b=this,g=c.el,h=g.getStyle("zIndex")-4,f=c.floatParent?c.floatParent.getTargetEl():c.container,a=b.mask,d=b.maskShim;a?b.hideModalMask():(b.mask=a=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"mask "+Ext.baseCSSPrefix+"border-box",style:"height:0;width:0"}),a.setVisibilityMode(Ext.Element.DISPLAY),a.on("click",b.onMaskClick,b)),a.maskTarget=f,e=b.getMaskBox(),d&&(d.setStyle("zIndex",h),d.show(),d.setBox(e)),a.setStyle("zIndex",h),f.saveTabbableState({excludeRoot:g}),a.show(),a.setBox(e)},hideModalMask:function(){var a=this.mask,b=this.maskShim;a&&a.isVisible()&&(a.maskTarget.restoreTabbableState(),a.maskTarget=void 0,a.hide(),b&&b.hide())}}},function(){Ext.WindowManager=Ext.WindowMgr=new this}),Ext.define("Ext.container.Container",{extend:Ext.Component,xtype:"container",alternateClassName:["Ext.Container","Ext.AbstractContainer"],mixins:[Ext.mixin.Queryable,Ext.mixin.Container],renderTpl:"{%this.renderContainer(out,values)%}",autoDestroy:!0,defaultType:"panel",detachOnRemove:!0,items:void 0,layout:"auto",suspendLayout:!1,_applyDefaultsOptions:{defaults:!0,strict:!1},ariaRole:"presentation",baseCls:Ext.baseCSSPrefix+"container",layoutCounter:0,add:function(){var j,d,f,h,b,c,i,g,a=this,e=Ext.Array.slice(arguments),l="number"==typeof e[0]?e.shift():-1,m=a.getLayout(),k=!1;for(1===e.length&&Ext.isArray(e[0])?(d=e[0],j=!0):d=e,a.rendered&&Ext.suspendLayouts(),i=d=a.prepareItems(d,!0),h=d.length,j||1!==h||(i=d[0]),f=0;f<h;f++)b=d[f],c=l<0?a.items.length:l+f,g=!!b.instancedCmp,delete b.instancedCmp,b.floating?((a.floatingItems||(a.floatingItems=new Ext.util.ItemCollection)).add(b),b.onAdded(a,c,g),delete b.$initParent,a.hasListeners.add&&a.fireEvent("add",a,b,c)):a.hasListeners.beforeadd&&!1===a.fireEvent("beforeadd",a,b,c)||!1===a.onBeforeAdd(b)||(a.items.insert(c,b),b.onAdded(a,c,g),delete b.$initParent,a.onAdd(b,c),m.onAdd(b,c),k=!0,a.hasListeners.add&&a.fireEvent("add",a,b,c));return k&&a.updateLayout(),a.rendered&&Ext.resumeLayouts(!0),i},onAdded:function(a,c,b){this.callParent([a,c,b]),this.containerOnAdded(a,b)},onRemoved:function(a){this.containerOnRemoved(a),this.callParent(arguments)},afterComponentLayout:function(){var d,c,b,a=this.floatingItems;if(this.callParent(arguments),a)for(d=(a=a.items).length,c=0;c<d;c++)!(b=a[c]).rendered&&b.autoShow&&b.show()},afterLayout:function(c){var a=this,b=a.getScrollable();++a.layoutCounter,b&&1<a.layoutCounter&&b.refresh(),a.hasListeners.afterlayout&&a.fireEvent("afterlayout",a,c)},beforeDestroy:function(){var b,a=this,d=a.items,c=a.floatingItems;if(d)for(;b=d.first();)a.doRemove(b,!0);if(c)for(;b=c.first();)a.doRemove(b,!0);Ext.destroy(a.layout),a.callParent()},destroy:function(){var a=this;a.callParent(),a.items&&a.items.destroy(),a.floatingItems&&a.floatingItems.destroy(),a.refs=a.items=a.floatingItems=a.layout=null},beforeRender:function(){var b,a=this,c=a.getLayout();a.preventChildDisable=!0,a.callParent(),a.preventChildDisable=!1,c.initialized||c.initLayout(),(b=c.targetCls)&&a.applyTargetCls(b)},cascade:function(f,e,d){var b,a=this,h=a.items?a.items.items:[],j=h.length,g=0,c=d?d.concat(a):[a],i=c.length-1;if(!1!==f.apply(e||a,c))for(;g<j;g++)(b=h[g]).cascade?b.cascade(f,e,d):(c[i]=b,f.apply(e||b,c));return this},contains:function(a,c){var b=!1;return c?(this.cascade(function(c){if(c.contains&&c.contains(a))return!(b=!0)}),b):this.items.contains(a)||this.floatingItems&&this.floatingItems.contains(a)},disable:function(e,d){var c,f,b,a=this,g=a.disabled;if(a.callParent([e,d]),!d&&!a.preventChildDisable&&!g)for(f=(c=a.getChildItemsToDisable()).length,b=0;b<f;b++)c[b].disable(e,!0);return a},enable:function(d,g){var c,e,b,a=this,f=a.disabled;if(a.callParent([d,g]),f)for(e=(c=a.getChildItemsToDisable()).length,b=0;b<e;b++)c[b].enable(d,!0);return a},getChildByElement:function(b,e){var a,c,d=0,f=this.getRefItems(),g=f.length;for(b=Ext.getDom(b);d<g;d++)if((c=(a=f[d]).getEl())&&(c.dom===b||c.contains(b)))return e&&a.getChildByElement?a.getChildByElement(b,e):a;return null},getComponent:function(a){Ext.isObject(a)&&(a=a.getItemId());var b=this.items.get(a),c=this.floatingItems;return!b&&c&&"number"!=typeof a&&(b=c.get(a)),b},getFocusEl:function(){var a=this.getDefaultFocus();return a||(this.focusable?this.getTargetEl():void 0)},getLayout:function(){var b=this,a=b.layout;return a&&a.isLayout||b.setLayout(a),b.layout},getRefItems:function(g){for(var b,f=this,d=f.items.items,e=d.length,c=0,a=[];c<e;c++)b=d[c],a[a.length]=b,g&&b.getRefItems&&a.push.apply(a,b.getRefItems(!0));if(f.floatingItems)for(e=(d=f.floatingItems.items).length,c=0;c<e;c++)b=d[c],a[a.length]=b,g&&b.getRefItems&&a.push.apply(a,b.getRefItems(!0));return a},getDefaultFocus:function(){var b,a=this.defaultFocus;return a&&(b=this.down(a)),b},initComponent:function(){var a=this;a.callParent(),a.getLayout(),a.constructing=!0,a.initItems(),a.disabled&&(a.disabled=!1,a.disable(!0)),delete a.constructing},initItems:function(){var b=this,a=b.items;a&&a.isMixedCollection||(b.items=new Ext.util.ItemCollection,a&&(Ext.isArray(a)||(a=[a]),b.add(a)))},initInheritedState:function(b,c){var a=this,d=(a.controller,a.layout);a.session,a.viewModel,a.reference,a.referenceHolder;a.callParent([b,c]),a.collapsed&&(b.collapsed=!0),a.initContainerInheritedState(b,c),d&&d.initInheritedState&&d.initInheritedState(b,c)},insert:function(c,a){var b;return a&&a.isComponent&&-1!==(b=this.items.indexOf(a))?this.move(b,c):this.add(c,a)},lookupComponent:function(a){return a.isComponent||(a="string"==typeof a?Ext.ComponentManager.get(a):Ext.ComponentManager.create(a,this.defaultType)),a},move:function(a,c){var b,d=this,e=d.items;if(a.isComponent&&(a=e.indexOf(a)),b=e.getAt(a),a!==c){if(!1===(b=e.removeAt(a)))return!1;c=Math.min(c,e.getCount()),e.insert(c,b),d.onMove(b,a,c),d.hasListeners.childmove&&d.fireEvent("childmove",d,b,a,c),d.updateLayout()}return b},moveBefore:function(a,b){return a!==b&&(a=this.layout.moveItemBefore(a,b)),a},moveAfter:function(a,b){var d,c=this.layout;return a!==b&&(d=b?c.getMoveAfterIndex(b):0,a=c.moveItemBefore(a,this.items.getAt(d))),a},nextChild:function(f,e){var a,b=this.items,c=b.indexOf(f),d=0,g=b.length;if(-1!==c)if(e)for(;d<g&&((a=b.getAt(c+d))&&!Ext.ComponentQuery.is(a,e));d++);else a=b.getAt(c+1);return a||null},onAdd:Ext.emptyFn,onBeforeAdd:function(b){var a=b.ownerCt;a&&a!==this&&a.remove(b,!1)},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){this.callParent(arguments),this.repositionFloatingItems()},onResize:function(){this.callParent(arguments),this.repositionFloatingItems()},prevChild:function(f,e){var a,b=this.items,c=b.indexOf(f),d=0,g=b.length;if(-1!==c)if(e)for(;d<g&&((a=b.getAt(c-d))&&!Ext.ComponentQuery.is(a,e));d++);else a=b.getAt(c-1);return a||null},remove:function(d,c){var b,a=this;if(!a.destroyed&&!a.destroying)return!(b=a.getComponent(d))||a.hasListeners.beforeremove&&!1===a.fireEvent("beforeremove",a,b)||(a.doRemove(b,c),a.hasListeners.remove&&a.fireEvent("remove",a,b),a.destroying||b.floating||a.updateLayout()),b},removeAll:function(h){var b,d,c,a=this,f=a.floatingItems,g=[],e=0;for(d=(b=f?a.items.items.concat(f.items):a.items.items.slice()).length,Ext.suspendLayouts(),a.removingAll=!0;e<d;e++)c=b[e],a.remove(c,h),c.ownerCt!==a&&g.push(c);return a.removingAll=!1,Ext.resumeLayouts(!!d),g},setLayout:function(a){var c,d,e=this,b=e.layout,f=b&&b.isLayout;"string"==typeof a&&(a={type:a}),d=a.type,!f||d&&d!==b.type?(f&&b.setOwner(null),"string"==typeof(c=e.self.prototype.layout)?a.type=d||c:Ext.merge(Ext.merge({},c),a),(a=this.layout=Ext.Factory.layout(a)).setOwner(this)):(delete a.type,b.setConfig(a)),e.rendered&&e.updateLayout()},setActiveItem:function(a){return this.getLayout().setActiveItem(a)},privates:{applyDefaults:function(a){var c=this,b=c.defaults;return b&&(Ext.isFunction(b)&&(b=b.call(c,a)),Ext.isString(a)&&(a=Ext.ComponentManager.get(a)),a.isComponent?a.setConfig(b,null,c._applyDefaultsOptions):a=c.getConfigurator().merge(c,Ext.Object.fork(b),a)),a},applyReference:function(a){return this.setupReference(a)},applyTargetCls:function(a){this.layoutTargetCls=a},detachComponent:function(a){Ext.getDetachedBody().appendChild(a.getEl())},doRemove:function(a,c){c=!0===c||!1!==c&&this.autoDestroy;var b=this,e=b.layout,g=e&&b.rendered,d=a.destroying||c,f=a.floating;f?b.floatingItems.remove(a):b.items.remove(a),g&&!f&&(e.running&&Ext.Component.cancelLayout(a,d),e.onRemove(a,d)),a.onRemoved(d),b.onRemove(a,d),c?a.destroy():(g&&!f&&e.afterRemove(a),b.detachOnRemove&&a.rendered&&b.detachComponent(a))},finishRenderChildren:function(){this.callParent();var a=this.getLayout();a&&a.finishRender()},getChildItemsToDisable:function(){return this.query("[isFormField],[isFocusableContainer],button")},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},getScrollerEl:function(){return this.layout.getScrollerEl()||this.callParent()},prepareItems:function(a,f){for(var b,c=0,d=(a=Ext.isArray(a)?a.slice():[a]).length;c<d;c++)null==(b=a[c])?(Ext.Array.erase(a,c,1),--c,--d):(f&&(b=this.applyDefaults(b)),b.$initParent=this,b.isComponent&&(b.instancedCmp=!0),a[c]=this.lookupComponent(b),delete b.$initParent);return a},repositionFloatingItems:function(){var d,c,a,b=this.floatingItems;if(b)for(d=(b=b.items).length,c=0;c<d;c++)(a=b[c]).el&&!a.hidden&&a.setPosition(a.x,a.y)},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){for(var a,b=this.items.items,c=b.length,d=this._noMargin;c--;)(a=b[c]).margin$=null,a.el.setStyle(d)},setupRenderTpl:function(a){this.callParent(arguments),this.getLayout().setupRenderTpl(a)}}}),Ext.define("Ext.layout.container.Editor",{alias:"layout.editor",extend:Ext.layout.container.Container,autoSizeDefault:{width:"field",height:"field"},sizePolicies:{$:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},boundEl:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1}},boundEl:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},boundEl:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(e){var b=this.owner.autoSize,c=b&&b.width,a=this.sizePolicies;return a=(a=a[c]||a.$)[c=b&&b.height]||a.$},calculate:function(c){var e,d,f=this,a=f.owner,b=a.autoSize;!0===b&&(b=f.autoSizeDefault),b&&(e=f.getDimension(a,b.width,"getWidth",a.width),d=f.getDimension(a,b.height,"getHeight",a.height)),c.childItems[0].setSize(e,d),c.setWidth(e),c.setHeight(d),c.setContentSize(e||a.field.getWidth(),d||a.field.getHeight())},getDimension:function(c,d,a,b){switch(d){case"boundEl":return c.boundEl[a]();case"field":return;default:return b}}}),Ext.define("Ext.Editor",{extend:Ext.container.Container,xtype:"editor",layout:"editor",allowBlur:!0,revertInvalid:!0,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!1,focusOnToFront:!1,baseCls:Ext.baseCSSPrefix+"editor",editing:!1,preventDefaultAlign:!0,specialKeyDelay:1,initComponent:function(){var a=this,b=a.field=Ext.ComponentManager.create(a.field||{},"textfield");b.msgTarget=b.msgTarget||"qtip",a.mon(b,{scope:a,specialkey:a.onSpecialKey}),b.grow&&a.mon(b,"autosize",a.onFieldAutosize,a,{delay:1}),a.floating={constrain:a.constrain},a.items=b,a.callParent(arguments)},onAdded:function(a){this.ownerCmp=a},onFieldAutosize:function(){this.updateLayout()},afterRender:function(e,d){var b=this,a=b.field.inputEl;b.callParent(arguments),a&&(a.dom.name="",b.swallowKeys&&a.swallowEvent(["keypress","keydown"]))},onSpecialKey:function(g,b){var a=this,e=b.getKey(),d=a.completeOnEnter&&e===b.ENTER,f=a.cancelOnEsc&&e===b.ESC,c=a.specialKeyTask;(d||f)&&(b.stopEvent(),c||(a.specialKeyTask=c=new Ext.util.DelayedTask),c.delay(a.specialKeyDelay,d?a.completeEdit:a.cancelEdit,a)),a.fireEvent("specialkey",a,g,b)},startEdit:function(h,c,g){var d,f,e,a=this,b=a.field;a.completeEdit(),a.boundEl=Ext.get(h),d=a.boundEl.dom,c=Ext.isDefined(c)?c:Ext.String.trim(d.textContent||d.innerText||d.innerHTML),!1!==a.fireEvent("beforestartedit",a,a.boundEl,c)&&(Ext.suspendLayouts(),a.rendered||(f=a.ownerCt,e=a.renderTo||f&&f.getEl()||Ext.getBody(),Ext.fly(e).position(),a.renderTo=e),a.startValue=c,a.show(),a.realign(!0),b.suspendEvents(),b.setValue(c),b.resetOriginalValue(),b.resumeEvents(),!1!==g&&b.focus(!!b.selectOnFocus||[Number.MAX_VALUE]),b.autoSize&&b.autoSize(),Ext.resumeLayouts(!0),a.toggleBoundEl(!1),a.editing=!0)},realign:function(b){var a=this;!0===b&&a.updateLayout(),a.alignTo(a.boundEl,a.alignment,a.offsets)},completeEdit:function(d){var b,a=this,c=a.field,e=a.startValue;a.editing&&(c.assertValue&&c.assertValue(),b=a.getValue(),c.isValid()?!a.ignoreNoChange||c.didValueChange(b,e)?!1!==a.fireEvent("beforecomplete",a,b,e)&&(b=a.getValue(),a.updateEl&&a.boundEl&&a.boundEl.setHtml(b),a.onEditComplete(d),a.fireEvent("complete",a,b,e)):a.onEditComplete(d):!1!==a.revertInvalid&&a.cancelEdit(d))},onShow:function(){var a=this;a.callParent(arguments),a.fireEvent("startedit",a,a.boundEl,a.startValue)},cancelEdit:function(e){var d,a=this,c=a.startValue,b=a.field;a.editing&&(b&&(d=a.editedValue=a.getValue(),b.suspendEvents(),a.setValue(c),b.resumeEvents()),a.onEditComplete(e),a.fireEvent("canceledit",a,d,c),delete a.editedValue)},onEditComplete:function(a){!(this.editing=!1)!==a&&(this.hide(),this.toggleBoundEl(!0))},onFocusLeave:function(b){var a=this;!0===a.allowBlur&&a.editing&&a.completeEdit(),a.callParent([b])},onHide:function(){var a=this,b=a.field;a.editing?a.completeEdit():b.collapse&&b.collapse(),a.callParent(arguments)},getValue:function(){return this.field.getValue()},setValue:function(a){this.field.setValue(a)},toggleBoundEl:function(a){!1!==this.hideEl&&this.boundEl.setVisible(a)},beforeDestroy:function(){var a=this,b=a.specialKeyTask;b&&b.cancel(),a.specialKeyTask=a.field=a.boundEl=Ext.destroy(a.field),a.callParent(arguments)}}),Ext.define("Ext.Img",{extend:Ext.Component,alias:["widget.image","widget.imagecomponent"],autoEl:"img",baseCls:Ext.baseCSSPrefix+"img",config:{src:null},alt:"",title:"",imgCls:"",maskOnDisable:!1,initComponent:function(){this.glyph&&(this.autoEl="div"),this.callParent()},applySrc:function(a){return a&&Ext.resolveResource(a)},getElConfig:function(){var c,f,a=this,g=a.autoEl,b=a.callParent(),d=Ext._glyphFontFamily,e=a.glyph;return"img"===g||Ext.isObject(g)&&"img"===g.tag?c=b:a.glyph?("string"==typeof e&&(e=(f=e.split("@"))[0],d=f[1]||d),b.html="&#"+e+";",d&&(b.style=b.style||{},b.style.fontFamily=d),b.role="img"):b.cn=[c={tag:"img",id:a.id+"-img"}],c&&(a.imgCls&&(c.cls=(c.cls?c.cls+" ":"")+a.imgCls),c.src=a.src||Ext.BLANK_IMAGE_URL),a.alt?(c||b).alt=a.alt:(c||b).alt="",a.title&&((c||b).title=a.title),b},onRender:function(){var c,a=this,b=a.autoEl;a.callParent(arguments),c=a.el,"img"===b||Ext.isObject(b)&&"img"===b.tag?a.imgEl=c:a.imgEl=c.getById(a.id+"-img")},onDestroy:function(){var a=this.imgEl;a&&this.el!==a&&a.destroy(),this.imgEl=null,this.callParent()},getTitle:function(){return this.title},setTitle:function(b){var a=this.imgEl;this.title=b||"",a&&(a.dom.title=b||"")},getAlt:function(){return this.alt},setAlt:function(b){var a=this.imgEl;this.alt=b||"",a&&(a.dom.alt=b||"")},updateSrc:function(b){var a=this.imgEl;a&&(a.dom.src=b||Ext.BLANK_IMAGE_URL)},setGlyph:function(a){var d,c=this,b=Ext._glyphFontFamily,f=c.glyph,e=c.el;c.glyph=a,c.rendered&&a!==f&&("string"==typeof a&&(a=(d=a.split("@"))[0],b=d[1]||b),e.dom.innerHTML="&#"+a+";",b&&e.setStyle("font-family",b))}}),Ext.define("Ext.util.StoreHolder",{mixinId:"storeholder",bindStore:function(d,e,b){b=b||"store";var a=this,c=e?null:a[b];return d!==c&&(c&&(a.onUnbindStore(c,e,b),a.isComponent&&"store"===b&&c.autoDestroy?c.destroy():a.unbindStoreListeners(c)),d?(a[b]=d=Ext.data.StoreManager.lookup(d),a.bindStoreListeners(d),a.onBindStore(d,c)):a[b]=null),a},getStore:function(){return this.store},setStore:function(a){this.bindStore(a)},unbindStoreListeners:function(b){var a=this.storeListeners;a&&b.un(a)},bindStoreListeners:function(b){var a=this.getStoreListeners(b);a&&((a=Ext.apply({},a)).scope||(a.scope=this),this.storeListeners=a,b.on(a))},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn}),Ext.define("Ext.LoadMask",{extend:Ext.Component,alias:"widget.loadmask",mixins:[Ext.util.StoreHolder],isLoadMask:!0,msg:"Loading...",msgCls:Ext.baseCSSPrefix+"mask-loading",msgWrapCls:Ext.baseCSSPrefix+"mask-msg",useMsg:!0,useTargetEl:!1,cls:Ext.baseCSSPrefix+"mask",componentCls:Ext.baseCSSPrefix+"border-box",ariaRole:"status",focusable:!0,tabIndex:0,autoEl:{tag:"div",role:"status"},childEls:["msgWrapEl","msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="{[values.$comp.msgWrapCls]}">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ',Ext.baseCSSPrefix,'mask-msg-inner {childElCls}">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',Ext.baseCSSPrefix,"mask-msg-text",'{childElCls}">{msg}</div>',"</div>","</div>"],maskOnDisable:!1,skipLayout:!0,constructor:function(c){var b,a=this;2===arguments.length?(b=a.target=c,c=arguments[1]):b=c.target,a.callParent([c]),b.isComponent?(a.ownerCt=b,a.hidden=!0,a.renderTo=a.getMaskTarget(),a.external=a.renderTo===Ext.getBody(),a.bindComponent(b)):(b=Ext.get(b),a.isElement=!0,a.renderTo=a.target),a.render(a.renderTo),a.store&&a.bindStore(a.store,!0)},initRenderData:function(){var a=this.callParent(arguments);return a.msg=this.msg||"",a},onRender:function(){this.callParent(arguments),this.maskEl=this.el},bindComponent:function(b){var a=this,c={scope:this,resize:a.sizeMask};a.external&&(c.added=a.onComponentAdded,c.removed=a.onComponentRemoved,b.floating?(c.move=a.sizeMask,a.activeOwner=b):b.ownerCt&&a.onComponentAdded(b.ownerCt)),a.mon(b,c),a.external&&a.mon(Ext.GlobalEvents,{show:a.onContainerShow,hide:a.onContainerHide,expand:a.onContainerExpand,collapse:a.onContainerCollapse,scope:a})},onComponentAdded:function(b){var a=this;delete a.activeOwner,(a.floatParent=b).floating||(b=b.up("[floating]")),b?(a.activeOwner=b,a.mon(b,"move",a.sizeMask,a),a.mon(b,"tofront",a.onOwnerToFront,a)):a.preventBringToFront=!0,b=a.floatParent.ownerCt,a.rendered&&a.isVisible()&&b&&(a.floatOwner=b,a.mon(b,"afterlayout",a.sizeMask,a,{single:!0}))},onComponentRemoved:function(d){var a=this,b=a.activeOwner,c=a.floatOwner;b&&(a.mun(b,"move",a.sizeMask,a),a.mun(b,"tofront",a.onOwnerToFront,a)),c&&a.mun(c,"afterlayout",a.sizeMask,a),delete a.activeOwner,delete a.floatOwner},afterRender:function(){var a=this;a.callParent(arguments),Ext.isIE&&a.el.on("mousedown",a.onMouseDown,a),this.el.skipGarbageCollection=!0},onMouseDown:function(b){var a=this.el;b.within(a)&&(b.preventDefault(),a.focus())},onOwnerToFront:function(b,a){this.el.setStyle("zIndex",a+1)},onContainerShow:function(a){this.isHierarchicallyHidden()||this.onComponentShow()},onContainerHide:function(a){this.isHierarchicallyHidden()&&this.onComponentHide()},onContainerExpand:function(a){this.isHierarchicallyHidden()||this.onComponentShow()},onContainerCollapse:function(a){this.isHierarchicallyHidden()&&this.onComponentHide()},onComponentHide:function(){var a=this;a.rendered&&a.isVisible()&&(a.hide(),a.showNext=!0)},onComponentShow:function(){this.showNext&&this.show(),delete this.showNext},sizeMask:function(){var a=this,b=a.activeOwner||a.target,c=a.external?a.getOwner().el:a.getMaskTarget();a.rendered&&a.isVisible()&&(a.external&&(!a.isElement&&b.floating&&a.onOwnerToFront(b,b.el.getZIndex()),a.el.setSize(c.getSize()).alignTo(c,"tl-tl")),a.msgWrapEl.center(a.el))},bindStore:function(a,c){var b=this;if(Ext.destroy(b.proxyListeners),b.mixins.storeholder.bindStore.apply(b,arguments),a=b.store){for(;a.getSource;)a=a.getSource();a.loadsSynchronously()||(b.proxyListeners=a.getProxy().on({exception:b.onLoad,scope:b,destroyable:!0})),a.isLoading()&&b.onBeforeLoad()}},getStoreListeners:function(d){var c=this.onLoad,b=this.onBeforeLoad,a={cachemiss:b,cachefilled:{fn:c,buffer:100}};return d.loadsSynchronously()||(a.beforeload=b,a.load=c),a},onDisable:function(){this.callParent(arguments),this.loading&&this.onLoad()},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var a=this.getOwner();return this.isElement?this.target:this.useTargetEl?a.getTargetEl():a.getMaskTarget()||Ext.getBody()},onBeforeLoad:function(){var c,b=this,a=b.getOwner();b.disabled||(b.loading=!0,a.componentLayoutCounter?b.maybeShow():(c=a.afterComponentLayout,a.afterComponentLayout=function(){(a.afterComponentLayout=c).apply(a,arguments),b.maybeShow()}))},maybeShow:function(){var a=this,b=a.getOwner();b.isVisible(!0)?a.loading&&b.rendered&&a.show():a.showNext=!0},hide:function(){var a=this,b=a.ownerCt;return a.isElement?(b.unmask(),void a.fireEvent("hide",this)):(b&&(b.enableTabbing(),b.setMasked(!1)),delete a.showNext,a.callParent(arguments))},show:function(){var a=this;return a.isElement?(a.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls),void a.fireEvent("show",this)):a.callParent(arguments)},afterShow:function(){var a=this,b=a.ownerCt;a.loading=!0,a.callParent(arguments),b.disableTabbing(),b.setMasked(!0),a.el.restoreTabbableState(),a.syncMaskState()},syncMaskState:function(){var a=this,c=a.ownerCt,b=a.el;a.isVisible()&&(a.hasOwnProperty("msgWrapCls")&&(b.dom.className=a.msgWrapCls),a.useMsg?a.msgTextEl.setHtml(a.msg):a.msgEl.hide(),a.shim||Ext.useShims?b.enableShim(null,!0):b.disableShim(),c.el.contains(Ext.Element.getActiveElement())&&a.focus(),a.sizeMask())},onLoad:function(){this.loading=!1,this.hide()},beforeDestroy:function(){this.ownerCt=null,this.bindStore(null),this.callParent()},onDestroy:function(){var a=this;a.isElement&&a.ownerCt.unmask(),a.callParent()}}),Ext.define("Ext.layout.component.Component",{extend:Ext.layout.Layout,type:"component",isComponentLayout:!0,nullBox:{},usesContentHeight:!0,usesContentWidth:!0,usesHeight:!0,usesWidth:!0,widthCache:{},heightCache:{},beginLayoutCycle:function(a,j){var i,b,n,l,c=this,f=c.owner,p=a.ownerCtContext,g=a.heightModel,h=a.widthModel,o=f.el.dom===document.body,e=f.lastBox||c.nullBox,d=f.el.lastBox||c.nullBox,m=!o,k=a.isTopLevel;c.callParent([a,j]),j&&(c.usesContentWidth&&++a.consumersContentWidth,c.usesContentHeight&&++a.consumersContentHeight,c.usesWidth&&++a.consumersWidth,c.usesHeight&&++a.consumersHeight,p&&!p.hasRawContent&&(i=f.ownerLayout)&&(i.usesWidth&&++a.consumersWidth,i.usesHeight&&++a.consumersHeight)),h.configured?(n=f[h.names.width],k&&h.calculatedFrom&&(n=e.width),o||(m=c.setWidthInDom||(j?n!==d.width:h.constrained)),a.setWidth(n,m)):k&&(h.calculated&&(b=e.width,a.setWidth(b,b!==d.width)),b=e.x,a.setProp("x",b,b!==d.x)),g.configured?(l=f[g.names.height],k&&g.calculatedFrom&&(l=e.height),o||(m=j?l!==d.height:g.constrained),a.setHeight(l,m)):k&&(g.calculated&&(b=e.height,a.setHeight(b,b!==d.height)),b=e.y,a.setProp("y",b,b!==d.y))},finishedLayout:function(c){var i,e,g,a,b,d=this,f=c.children,h=d.owner;if(f)for(i=f.length,e=0;e<i;e++)(g=f[e]).el.lastBox=g.props;c.previousSize=d.lastComponentSize,d.lastComponentSize=h.el.lastBox=b=c.props,(a=h.lastBox||(h.lastBox={})).x=b.x,a.y=b.y,a.width=b.width,a.height=b.height,a.invalid=!1,d.callParent([c])},notifyOwner:function(d){var b=this.lastComponentSize,a=d.previousSize;this.owner.afterComponentLayout(b.width,b.height,a?a.width:void 0,a?a.height:void 0)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(d){var b,c=this,a=c.targetInfo;return a||(b=d.getEl("getTarget",c),c.targetInfo=a={padding:b.getPaddingInfo(),border:b.getBorderInfo()}),a},measureAutoDimensions:function(a,w){var r,p,o,e,f,l,k,h=this,u=h.owner,i=u.layout,t=a.heightModel,s=a.widthModel,g=a.boxParent,n=a.isBoxParent,j=a.target,q=a.props,b={gotWidth:!1,gotHeight:!1,isContainer:r=!a.hasRawContent},v=w||3,m=0,d=0;return s.shrinkWrap&&a.consumersContentWidth?(++m,p=!(1&v),r?p?(b.contentWidth=0,b.gotWidth=!0,++d):void 0!==(b.contentWidth=a.getProp("contentWidth"))&&(b.gotWidth=!0,++d):"number"==typeof(e=q.contentWidth)?(b.contentWidth=e,b.gotWidth=!0,++d):(p||!!a.hasDomProp("containerChildrenSizeDone")&&(!(!n&&g&&!g.widthModel.shrinkWrap)||g.hasDomProp("width")))&&(f=p?0:i&&i.measureContentWidth?i.measureContentWidth(a):j.cacheWidth?(l=j.xtype+"-"+j.ui,(k=h.widthCache)[l]||(k[l]=h.measureContentWidth(a))):h.measureContentWidth(a),isNaN(b.contentWidth=f)||(a.setContentWidth(f,!0),b.gotWidth=!0,++d))):s.natural&&a.consumersWidth&&(++m,"number"==typeof(e=q.width)?(b.width=e,b.gotWidth=!0,++d):(!(!n&&g)||g.hasDomProp("width"))&&(isNaN(b.width=h.measureOwnerWidth(a))||(a.setWidth(b.width,!1),b.gotWidth=!0,++d))),t.shrinkWrap&&a.consumersContentHeight?(++m,o=!(2&v),r?o?(b.contentHeight=0,b.gotHeight=!0,++d):void 0!==(b.contentHeight=a.getProp("contentHeight"))&&(b.gotHeight=!0,++d):"number"==typeof(e=q.contentHeight)?(b.contentHeight=e,b.gotHeight=!0,++d):(o||!!a.hasDomProp("containerChildrenSizeDone")&&(!!u.noWrap||(s.shrinkWrap?!(!n&&g&&!g.widthModel.shrinkWrap)||g.hasDomProp("width"):(a.bodyContext||a).hasDomProp("width"))))&&(f=o?0:i&&i.measureContentHeight?i.measureContentHeight(a):j.cacheHeight?(l=j.xtype+"-"+j.ui,(k=h.heightCache)[l]||(k[l]=h.measureContentHeight(a))):h.measureContentHeight(a),isNaN(b.contentHeight=f)||(a.setContentHeight(f,!0),b.gotHeight=!0,++d))):t.natural&&a.consumersHeight&&(++m,"number"==typeof(e=q.height)?(b.height=e,b.gotHeight=!0,++d):(!(!n&&g)||g.hasDomProp("width"))&&(isNaN(b.height=h.measureOwnerHeight(a))||(a.setHeight(b.height,!1),b.gotHeight=!0,++d))),g&&a.onBoxMeasured(),b.gotAll=d===m,b},measureContentWidth:function(a){return a.el.getWidth()-a.getFrameInfo().width},measureContentHeight:function(a){return a.el.getHeight()-a.getFrameInfo().height},measureOwnerHeight:function(a){return a.el.getHeight()},measureOwnerWidth:function(a){return a.el.getWidth()}}),Ext.define("Ext.layout.component.Auto",{alias:"layout.autocomponent",extend:Ext.layout.component.Component,type:"autocomponent",setHeightInDom:!1,setWidthInDom:!1,waitForOuterHeightInDom:!1,waitForOuterWidthInDom:!1,beginLayoutCycle:function(d,f){var a=this,c=a.lastWidthModel,b=a.lastHeightModel,e=a.owner.el;a.callParent(arguments),c&&c.fixed&&d.widthModel.shrinkWrap&&e.setWidth(null),b&&b.fixed&&d.heightModel.shrinkWrap&&e.setHeight(null)},calculate:function(b){var e,d,a=this,c=a.measureAutoDimensions(b),f=b.heightModel,g=b.widthModel;c.gotWidth?g.shrinkWrap?a.publishOwnerWidth(b,c.contentWidth):a.publishInnerWidth&&a.publishInnerWidth(b,c.width):!g.auto&&a.publishInnerWidth&&(void 0===(e=a.waitForOuterWidthInDom?b.getDomProp("width"):b.getProp("width"))?a.done=!1:a.publishInnerWidth(b,e)),c.gotHeight?f.shrinkWrap?a.publishOwnerHeight(b,c.contentHeight):a.publishInnerHeight&&a.publishInnerHeight(b,c.height):!f.auto&&a.publishInnerHeight&&(void 0===(d=a.waitForOuterHeightInDom?b.getDomProp("height"):b.getProp("height"))?a.done=!1:a.publishInnerHeight(b,d)),c.gotAll||(a.done=!1)},calculateOwnerHeightFromContentHeight:function(b,a){return a+b.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(b,a){return a+b.getFrameInfo().width},publishOwnerHeight:function(b,h){var d,f,e,c=this,g=c.owner,a=c.calculateOwnerHeightFromContentHeight(b,h);isNaN(a)?c.done=!1:((d=Ext.Number.constrain(a,g.minHeight,g.maxHeight))===a?f=c.setHeightInDom:(e=c.sizeModels[d<a?"constrainedMax":"constrainedMin"],a=d,b.heightModel.calculatedFromShrinkWrap?b.heightModel=e:b.invalidate({heightModel:e})),b.setHeight(a,f))},publishOwnerWidth:function(b,h){var d,f,e,c=this,g=c.owner,a=c.calculateOwnerWidthFromContentWidth(b,h);isNaN(a)?c.done=!1:((d=Ext.Number.constrain(a,g.minWidth,g.maxWidth))===a?f=c.setWidthInDom:(e=c.sizeModels[d<a?"constrainedMax":"constrainedMin"],a=d,b.widthModel.calculatedFromShrinkWrap?b.widthModel=e:b.invalidate({widthModel:e})),b.setWidth(a,f))}}),Ext.define("Ext.layout.component.ProgressBar",{alias:["layout.progressbar"],extend:Ext.layout.component.Auto,type:"progressbar",beginLayout:function(a){var c,b;if(this.callParent(arguments),!a.textEls)if((b=this.owner.textEl).isComposite)for(a.textEls=[],c=(b=b.elements).length;c--;)a.textEls[c]=a.getEl(Ext.get(b[c]));else a.textEls=[a.getEl("textEl")]},calculate:function(a){var d,b,c;if(this.callParent(arguments),Ext.isNumber(c=a.getProp("width")))for(c-=a.getBorderInfo().width,d=(b=a.textEls).length;d--;)b[d].setWidth(c);else this.done=!1}}),Ext.define("Ext.ProgressBar",{extend:Ext.Component,xtype:"progressbar",mixins:[Ext.ProgressBase],baseCls:Ext.baseCSSPrefix+"progress",animate:!1,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initRenderData:function(){var a=this,b=a.value||0;return Ext.apply(a.callParent(),{internalText:!a.hasOwnProperty("textEl"),text:a.text||"&#160;",percentage:100*b})},onRender:function(){var a=this;a.callParent(arguments),a.textEl?(a.textEl=Ext.get(a.textEl),a.updateText(a.text)):a.textEl=a.el.select("."+a.baseCls+"-text")},updateValue:function(a){this.updateProgress(a,Math.round(100*a)+"%")},updateProgress:function(b,c,d){b=b||0;var a=this,f=a.value,e=a.getTextTpl();return a.value=b=b||0,null!=c?a.updateText(c):e&&a.updateText(e.apply({value:b,percent:100*b})),a.rendered&&!a.destroyed&&(!0===d||!1!==d&&a.animate?(a.bar.stopAnimation(),a.bar.animate(Ext.apply({from:{width:100*f+"%"},to:{width:100*b+"%"}},a.animate))):a.bar.setStyle("width",100*b+"%")),a.fireEvent("update",a,b,c),a},updateText:function(b){var a=this;return a.text=b,a.rendered&&a.textEl.setHtml(a.text),a},applyText:function(a){this.updateText(a)},getText:function(){return this.text},wait:function(a){var c,b=this;return b.waitTimer||(a=a||{},(c=b).updateText(a.text),b.waitTimer=Ext.TaskManager.start({run:function(d){var c=a.increment||10;--d,b.updateProgress(100/c*((d+c)%c+1)*.01,null,a.animate)},interval:a.interval||1e3,duration:a.duration,onStop:function(){a.fn&&a.fn.apply(a.scope||b),b.reset()},scope:c})),b},isWaiting:function(){return null!==this.waitTimer},reset:function(b){var a=this;return a.updateProgress(0),a.clearTimer(),!0===b&&a.hide(),a},clearTimer:function(){var a=this;a.waitTimer&&(a.waitTimer.onStop=null,Ext.TaskManager.stop(a.waitTimer),a.waitTimer=null)},onDestroy:function(){var a=this,b=a.bar;a.clearTimer(),a.rendered&&(a.textEl.isComposite&&a.textEl.clear(),Ext.destroyMembers(a,"textEl","progressBar"),b&&a.animate&&b.stopAnimation()),a.callParent()}}),Ext.define("Ext.dom.ButtonElement",{extend:Ext.dom.Element,setSize:function(b,a,e){var c=this,d=c.component;return c.callParent([b,a,e]),d.btnWrap.setStyle("table-layout",b&&"auto"!==b?"fixed":""),d.btnEl.setStyle("height",a&&"auto"!==a?"auto":""),c},setStyle:function(a,c){var d,b,e=this,f=e.component;return e.callParent([a,c]),a&&(("width"===a||"string"!=typeof a&&"width"in a)&&(d=c||a.width,f.btnWrap.setStyle("table-layout",d&&"auto"!==d?"fixed":"")),("height"===a||"string"!=typeof a&&"height"in a)&&(b=c||a.height,f.btnEl.setStyle("height",b&&"auto"!==b?"auto":""))),e},setHeight:function(a,b){return this.callParent([a,b]),this.component.btnEl.setStyle("height",a&&"auto"!==a?"auto":""),this},setWidth:function(a,b){return this.callParent([a,b]),this.component.btnWrap.setStyle("table-layout",a&&"auto"!==a?"fixed":""),this}}),Ext.define("Ext.button.Manager",{singleton:!0,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,init:function(){var a=this;a.initialized||(Ext.getDoc().on({mouseup:a.onDocumentMouseUp,scope:a}),a.initialized=!0)},onButtonMousedown:function(b,c){var a=this.pressedButton;a&&a.onMouseUp(c),this.pressedButton=b},onDocumentMouseUp:function(b){var a=this.pressedButton;a&&(a.onMouseUp(b),this.pressedButton=null)},toggleGroup:function(c,e){if(e){var a,b=this.groups[c.toggleGroup],d=b.length;for(a=0;a<d;a++)b[a]!==c&&b[a].toggle(!1)}},register:function(a){var c=this,d=this.groups,b=d[a.toggleGroup];c.init(),a.toggleGroup&&((b=b||(d[a.toggleGroup]=[])).push(a),a.on("toggle",c.toggleGroup,c))},unregister:function(a){if(a.toggleGroup){var b=this,c=b.groups[a.toggleGroup];c&&(Ext.Array.remove(c,a),a.un("toggle",b.toggleGroup,b))}},getPressed:function(d){var c,a=this.groups[d],b=0;if(a)for(c=a.length;b<c;b++)if(!0===a[b].pressed)return a[b];return null}}),Ext.define("Ext.menu.Manager",{singleton:!0,alternateClassName:"Ext.menu.MenuMgr",groups:{},visible:[],constructor:function(){var a=this;a.onShow=function(){return delete a.onShow,Ext.on("mousedown",a.checkActiveMenus,a),a.onShow.apply(a,arguments)}},checkActiveMenus:function(f){var c,b,a=this.visible,e=a.length,d=Ext.Component.fromElement(f.target);if(e)for(a=a.slice(),c=0;c<e;++c)(b=a[c]).owns(f)||d&&d.isMenuCheckItem&&d.menu===b||b.hide()},onShow:function(a){a.floating&&Ext.Array.include(this.visible,a)},onHide:function(a){a.floating&&Ext.Array.remove(this.visible,a)},hideAll:function(){var b,a=this.visible,d=a.length,c=!1;if(d)for(a=a.slice(),b=0;b<d;b++)a[b].hide(),c=!0;return c},get:function(a,b){var c;return"string"==typeof a?(c=Ext.getCmp(a))instanceof Ext.menu.Menu&&(a=c):Ext.isArray(a)?(b=Ext.apply({items:a},b),a=new Ext.menu.Menu(b)):a.isComponent||(b=Ext.apply({},a,b),a=Ext.ComponentManager.create(b,"menu")),a},registerCheckable:function(c){var b=this.groups,a=c.group;a&&(b[a]||(b[a]=[]),b[a].push(c))},unregisterCheckable:function(a){var c=this.groups,b=a.group;b&&Ext.Array.remove(c[b],a)},onCheckChange:function(d,h){var a,f,b,g=this.groups,e=d.group,c=0;if(e&&h)for(f=(a=g[e]).length;c<f;c++)(b=a[c])!==d&&b.setChecked(!1)}}),Ext.define("Ext.util.ClickRepeater",{extend:Ext.util.Observable,constructor:function(c,b){var a=this;a.el=Ext.get(c),a.el.unselectable(),Ext.apply(a,b),a.callParent(),a.disabled||(a.disabled=!0,a.enable()),a.handler&&a.on("click",a.handler,a.scope||a)},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,enable:function(){this.disabled&&(this.el.on("mousedown",this.handleMouseDown,this),Ext.isIE8&&this.el.on("dblclick",this.handleDblClick,this),(this.preventDefault||this.stopDefault)&&this.el.on("click",this.eventOptions,this)),this.disabled=!1},disable:function(a){!a&&this.disabled||(clearTimeout(this.timer),this.pressedCls&&this.el.removeCls(this.pressedCls),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.clearListeners()),this.disabled=!0},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){this.preventDefault&&a.preventDefault(),this.stopDefault&&a.stopEvent()},destroy:function(){this.disable(!0),this.callParent()},handleDblClick:function(a){clearTimeout(this.timer),this.fireEvent("mousedown",this,a),this.fireEvent("click",this,a)},handleMouseDown:function(a){clearTimeout(this.timer),this.pressedCls&&this.el.addCls(this.pressedCls),this.mousedownTime=new Date,Ext.getDoc().on("mouseup",this.handleMouseUp,this),this.el.on("mouseout",this.handleMouseOut,this),this.fireEvent("mousedown",this,a),this.fireEvent("click",this,a),this.accelerate&&(this.delay=400),this.timer=Ext.defer(this.click,this.delay||this.interval,this,[a]),this.mousedownPreventDefault&&a.preventDefault(),this.mousedownStopEvent&&a.stopEvent()},click:function(a){this.fireEvent("click",this,a),this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12e3):this.interval,this,[a])},easeOutExpo:function(d,a,b,c){return d===c?a+b:b*(1-Math.pow(2,-10*d/c))+a},handleMouseOut:function(){clearTimeout(this.timer),this.pressedCls&&this.el.removeCls(this.pressedCls),this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(a){this.el.un("mouseover",this.handleMouseReturn,this),this.pressedCls&&this.el.addCls(this.pressedCls),this.click(a)},handleMouseUp:function(a){clearTimeout(this.timer),this.el.un("mouseover",this.handleMouseReturn,this),this.el.un("mouseout",this.handleMouseOut,this),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.pressedCls&&this.el.removeCls(this.pressedCls),this.fireEvent("mouseup",this,a)}}),Ext.define("Ext.button.Button",{alias:"widget.button",extend:Ext.Component,mixins:[Ext.mixin.Queryable,Ext.util.KeyboardInteractive],alternateClassName:"Ext.Button",config:{iconAlign:"left",text:null,textAlign:"center",arrowVisible:!0},isButton:!0,_syncFrameHeight:!0,liquidLayout:!0,hidden:!1,disabled:!1,pressed:!1,tabIndex:0,enableToggle:!1,menuAlign:"tl-bl?",showEmptyMenu:!1,clickEvent:"click",preventDefault:!0,handleMouseEvents:!0,tooltipType:"qtip",baseCls:Ext.baseCSSPrefix+"btn",hrefTarget:"_blank",destroyMenu:!0,focusable:!0,ariaRole:"button",keyHandlers:{SPACE:"onEnterKey",ENTER:"onEnterKey",DOWN:"onDownKey"},defaultBindProperty:"text",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl","arrowEl"],publishes:{pressed:1},_btnWrapCls:Ext.baseCSSPrefix+"btn-wrap",_btnCls:Ext.baseCSSPrefix+"btn-button",_baseIconCls:Ext.baseCSSPrefix+"btn-icon-el",_glyphCls:Ext.baseCSSPrefix+"btn-glyph",_innerCls:Ext.baseCSSPrefix+"btn-inner",_textCls:Ext.baseCSSPrefix+"btn-text",_noTextCls:Ext.baseCSSPrefix+"btn-no-text",_hasIconCls:Ext.baseCSSPrefix+"btn-icon",_pressedCls:Ext.baseCSSPrefix+"btn-pressed",overCls:Ext.baseCSSPrefix+"btn-over",_disabledCls:Ext.baseCSSPrefix+"btn-disabled",_menuActiveCls:Ext.baseCSSPrefix+"btn-menu-active",_arrowElCls:Ext.baseCSSPrefix+"btn-arrow-el",_focusCls:Ext.baseCSSPrefix+"btn-focus",_arrowFocusCls:Ext.baseCSSPrefix+"arrow-focus",renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl><tpl if="split"><span id="{id}-arrowEl" class="{arrowElCls}" data-ref="arrowEl" role="button" hidefocus="on" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="arrowElAttributes"> {$}="{.}"</tpl>>{arrowElText}</span></tpl>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></span>',scale:"small",allowedScales:["small","medium","large"],arrowAlign:"right",arrowCls:"arrow",maskOnDisable:!1,shrinkWrap:3,frame:!0,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){this.disabled||this.doNavigate()},doNavigate:function(){"_blank"===this.hrefTarget?window.open(this.getHref(),this.hrefTarget):location.href=this.getHref()},_triggerRegion:{},initComponent:function(){var a=this;a.addCls(Ext.baseCSSPrefix+"unselectable"),a.callParent(),a.menu&&(a.split=!0,a.setMenu(a.menu,!1,!0)),a.url&&(a.href=a.url),a.configuredWithPreventDefault=a.hasOwnProperty("preventDefault"),a.href&&!a.configuredWithPreventDefault&&(a.preventDefault=!1),Ext.isString(a.toggleGroup)&&""!==a.toggleGroup&&(a.enableToggle=!0),a.html&&!a.text&&(a.text=a.html,delete a.html)},getElConfig:function(){var a=this,b=a.callParent(),d=a.getHref(),c=a.hrefTarget;return"a"===b.tag&&(a.disabled||(b.tabIndex=a.tabIndex),d&&(a.disabled||(b.href=d,c&&(b.target=c)))),a.ariaStaticRoles[a.ariaRole]||(a.menu&&!a.isSplitButton&&(b["aria-haspopup"]=!0),a.enableToggle&&(b["aria-pressed"]=!!a.pressed)),b},beforeRender:function(){this.callParent(),this.pressed&&this.addCls(this._pressedCls)},initRenderData:function(){return Ext.apply(this.callParent(),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(b,g,h){var f,c,a=this,e=a.menu,d=a.isSplitButton?a.arrowEl&&a.arrowEl.dom:a.ariaEl.dom;e&&!h&&(!1!==g&&a.destroyMenu&&e.destroy(),e.ownerCmp=null),b?(f=b.isMenu,(b=Ext.menu.Manager.get(b,{ownerCmp:a})).setOwnerCmp(a,f),b.menuClickBuffer=250,a.mon(b,{scope:a,show:a.onMenuShow,hide:a.onMenuHide}),!e&&a.getArrowVisible()&&(a.split=!0,a.rendered&&(a._addSplitCls(),a.updateLayout())),a.menu=b,d?(d.setAttribute("aria-haspopup",!0),d.setAttribute("aria-owns",b.id)):((c=a.isSplitButton?a.ariaArrowElAttributes||(a.ariaArrowElAttributes={}):a.ariaRenderAttributes||(a.ariaRenderAttributes={}))["aria-haspopup"]=!0,c["aria-owns"]=b.id)):(a.rendered?(d.removeAttribute("aria-haspopup"),d.removeAttribute("aria-owns"),a._removeSplitCls(),a.updateLayout()):(c=a.isSplitButton?a.ariaArrowElAttributes:a.ariaRenderAttributes)&&(delete c["aria-haspopup"],delete c["aria-owns"]),a.split=!1,a.menu=null)},onRender:function(){var d,c,b,a=this;a.callParent(arguments),c=a.el,a.tooltip&&a.setTooltip(a.tooltip,!0),a.handleMouseEvents?(b={scope:a,mouseover:a.onMouseOver,mouseout:a.onMouseOut,mousedown:a.onMouseDown},a.split&&(b.mousemove=a.onMouseMove)):b={scope:a},Ext.supports.Touch&&(b.touchstart=a.onTouchStart),a.repeat?a.mon(new Ext.util.ClickRepeater(c,Ext.isObject(a.repeat)?a.repeat:{}),"click",a.onRepeatClick,a):b[a.clickEvent]?d=!0:b[a.clickEvent]=a.onClick,a.mon(c,b),a.hasFrameTable()&&a.mon(a.frameTable,"click",a.frameTableListener,a),d&&a.mon(c,a.clickEvent,a.onClick,a),Ext.button.Manager.register(a)},onFocusLeave:function(a){this.callParent([a]),this.menu&&this.menu.hide()},getTemplateArgs:function(){var c,a=this,i=a._btnCls,j=a._baseIconCls,d=a.getIconAlign(),b=a.glyph,f=Ext._glyphFontFamily,e=a.text,h=a._hasIcon(),g=a._hasIconCls;return"string"==typeof b&&(b=(c=b.split("@"))[0],f=c[1]),{split:a.isSplitButton,innerCls:a._innerCls,splitCls:a.getArrowVisible()?a.getSplitCls():"",iconUrl:a.icon,iconCls:a.iconCls,glyph:b,glyphCls:b?a._glyphCls:"",glyphFontFamily:f,text:e||"&#160;",closeText:a.closeText,textCls:e?a._textCls:"",noTextCls:e?"":a._noTextCls,hasIconCls:h?g:"",btnWrapCls:a._btnWrapCls,btnWrapStyle:a.width?"table-layout:fixed;":"",btnElStyle:a.height?"height:auto;":"",btnCls:i,baseIconCls:j,iconBeforeText:"left"===d||"top"===d,iconAlignCls:h?g+"-"+d:"",textAlignCls:i+"-"+a.getTextAlign(),arrowElCls:a._arrowElCls,tabIndex:a.tabIndex}},renderIcon:function(a){return this.getTpl("iconTpl").apply(a)},setHref:function(c){var b,a=this,d=a.hrefTarget;a.href=c,a.configuredWithPreventDefault||(a.preventDefault=!c),a.rendered&&(b=a.el.dom,!c||a.disabled?(b.removeAttribute("href"),b.removeAttribute("hrefTarget")):(b.href=a.getHref(),d&&(b.target=d)))},getHref:function(){var a=this,b=a.href;return!!b&&Ext.urlAppend(b,Ext.Object.toQueryString(Ext.apply({},a.params,a.baseParams)))},setParams:function(c){var b,a=this;a.params=c,a.rendered&&(b=a.el.dom,a.disabled?b.removeAttribute("href"):b.href=a.getHref()||"")},getSplitCls:function(){var a=this;return a.split?a.baseCls+"-"+a.arrowCls+" "+a.baseCls+"-"+a.arrowCls+"-"+a.arrowAlign:""},setIcon:function(b){b=b||"";var a=this,d=a.btnIconEl,c=a.icon||"";return(a.icon=b)!==c&&(d&&(d.setStyle("background-image",b?"url("+b+")":""),a._syncHasIconCls(),a.didIconStateChange(c,b)&&a.updateLayout()),a.fireEvent("iconchange",a,c,b)),a},setIconCls:function(b){b=b||"";var a=this,d=a.btnIconEl,c=a.iconCls||"";return c!==(a.iconCls=b)&&(d&&(d.removeCls(c),d.addCls(b),a._syncHasIconCls(),a.didIconStateChange(c,b)&&a.updateLayout()),a.fireEvent("iconchange",a,c,b)),a},setGlyph:function(b){b=b||0;var d,e,a=this,c=a.btnIconEl,f=a.glyph,g=a._glyphCls;return a.glyph=b,c&&("string"==typeof b&&(b=(e=b.split("@"))[0],d=e[1]||Ext._glyphFontFamily),b?f!==b&&(c.dom.innerHTML="&#"+b+";",c.addCls(g)):(c.dom.innerHTML="",c.removeCls(g)),d&&c.setStyle("font-family",d),a._syncHasIconCls(),a.didIconStateChange(f,b)&&a.updateLayout()),a.fireEvent("glyphchange",a,a.glyph,f),a},setTooltip:function(b,c){var a=this;return a.rendered?(c&&b||a.clearTip(),b&&(Ext.quickTipsActive&&Ext.isObject(b)?(Ext.tip.QuickTipManager.register(Ext.apply({target:a.el.id},b)),a.tooltip=b):a.el.dom.setAttribute(a.getTipAttr(),b))):a.tooltip=b,a},updateIconAlign:function(e,f){var a,d,c,b=this;b.rendered&&(a=b.btnEl,d=b.btnIconEl,c=b._hasIconCls,f&&a.removeCls(c+"-"+f),a.addCls(c+"-"+e),"top"===e||"left"===e?a.insertFirst(d):a.appendChild(d),b.updateLayout())},updateTextAlign:function(e,d){var a=this,c=a.btnEl,b=a._btnCls;a.rendered&&(c.removeCls(b+"-"+d),c.addCls(b+"-"+e))},getTipAttr:function(){return"qtip"===this.tooltipType?"data-qtip":"title"},getRefItems:function(c){var a,b=this.menu;return b&&(a=b.getRefItems(c)).unshift(b),a||[]},clearTip:function(){var a=this,b=a.el;Ext.quickTipsActive&&Ext.isObject(a.tooltip)?Ext.tip.QuickTipManager.unregister(b):b.dom.removeAttribute(a.getTipAttr())},beforeDestroy:function(){var a=this;a.rendered&&a.clearTip(),Ext.destroy(a.repeater),a.callParent()},onDestroy:function(){var a=this,b=a.menu;a.rendered&&(Ext.destroy(a.keyMap),delete a.keyMap),b&&a.destroyMenu&&(a.menu=Ext.destroy(b)),Ext.button.Manager.unregister(a),a.callParent()},setHandler:function(a,b){return this.handler=a,1<arguments.length&&(this.scope=b),this},updateText:function(b,c){b=null==b?"":String(b),c=c||"";var a=this,e=a.btnInnerEl,d=a.btnEl;a.rendered&&(e.setHtml(b||"&#160;"),d[b?"addCls":"removeCls"](a._textCls),d[b?"removeCls":"addCls"](a._noTextCls),a.updateLayout()),a.fireEvent("textchange",a,c,b)},didIconStateChange:function(c,b){var a=Ext.isEmpty(b);return Ext.isEmpty(c)?!a:a},click:function(a){return this.onClick(a)},setPressed:function(a){return this.toggle(!1!==a)},toggle:function(b,d){var a=this,c=a.ariaEl.dom;return b=void 0===b?!a.pressed:!!b,!1!==a.fireEvent("beforetoggle",a,b)&&b!==a.pressed&&(a[b?"addCls":"removeCls"](a._pressedCls),a.pressed=b,c&&c.setAttribute("aria-pressed",b),d||(a.fireEvent("toggle",a,b),Ext.callback(a.toggleHandler,a.scope,[a,b],0,a),a.reference&&a.publishState&&a.publishState("pressed",b))),a},maybeShowMenu:function(a){this.menu&&this.showMenu(a)},showMenu:function(c){var a=this,b=a.menu,d=!c||c.pointerType;return b&&a.rendered&&(a.tooltip&&Ext.quickTipsActive&&"title"!==a.getTipAttr()&&Ext.tip.QuickTipManager.getQuickTip().cancelShow(a.el),b.isVisible()?d?b.hide():b.focus():(!c||a.showEmptyMenu||0<b.items.getCount())&&(b.autoFocus=!d,b.showBy(a.el,a.menuAlign))),a},hideMenu:function(){return this.hasVisibleMenu()&&this.menu.hide(),this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},onRepeatClick:function(b,a){this.onClick(a)},onTouchStart:function(a){this.doPreventDefault(a)},onEnterKey:function(a){return this.onClick(a),a.stopEvent(),!1},onClick:function(b){var a=this;a.doPreventDefault(b),"keydown"!==b.type&&b.button||a.disabled||(a.doToggle(),a.maybeShowMenu(b),a.fireHandler(b))},doPreventDefault:function(a){a&&(this.preventDefault||this.disabled&&this.getHref())&&a.preventDefault()},fireHandler:function(b){var a=this;!1===a.fireEvent("click",a,b)||a.destroyed||Ext.callback(a.handler,a.scope,[a,b],0,a)},doToggle:function(){var a=this;!a.enableToggle||!1===a.allowDepress&&a.pressed||a.toggle()},onMouseOver:function(b){var a=this;a.disabled||b.within(a.el,!0,!0)||a.onMouseEnter(b)},onMouseOut:function(b){var a=this;b.within(a.el,!0,!0)||(a.overMenuTrigger&&a.onMenuTriggerOut(b),a.onMouseLeave(b))},onMouseMove:function(b){var a=this,c=a.overMenuTrigger;a.split&&(a.isWithinTrigger(b)?c||a.onMenuTriggerOver(b):c&&a.onMenuTriggerOut(b))},isWithinTrigger:function(d){var c,b,a=this,e=a.el;return(c="right"===a.arrowAlign?d.getX()-a.getX():d.getY()-e.getY())>(b=a.getTriggerRegion()).begin&&c<b.end},getTriggerRegion:function(){var a=this,b=a._triggerRegion,d="right"===a.arrowAlign,e=d?"getRight":"getBottom",c=d?a.getWidth():a.getHeight();return b.begin=c-(a.el[e]()-a.btnEl[e]()),b.end=c,b},onMouseEnter:function(a){this.fireEvent("mouseover",this,a)},onMouseLeave:function(a){this.fireEvent("mouseout",this,a)},onMenuTriggerOver:function(c){var a=this,b=a.arrowTooltip;a.overMenuTrigger=!0,a.split&&b&&a.btnWrap.dom.setAttribute(a.getTipAttr(),b),a.fireEvent("menutriggerover",a,a.menu,c)},onMenuTriggerOut:function(b){var a=this;delete a.overMenuTrigger,a.split&&a.arrowTooltip&&a.btnWrap.dom.setAttribute(a.getTipAttr(),""),a.fireEvent("menutriggerout",a,a.menu,b)},onEnable:function(){var a=this,d=a.href,c=a.hrefTarget,b=a.el.dom;a.callParent(),a.removeCls(a._disabledCls),b.setAttribute("tabIndex",a.tabIndex),d&&(b.href=d),c&&(b.target=c)},onDisable:function(){var a=this,b=a.el.dom;a.callParent(),a.addCls(a._disabledCls),a.removeCls(a.overCls),b.removeAttribute("tabIndex"),a.href&&b.removeAttribute("href"),a.hrefTarget&&b.removeAttribute("target")},setScale:function(b){var a=this,c=a.ui.replace("-"+a.scale,"");if(!Ext.Array.contains(a.allowedScales,b))throw"#setScale: scale must be an allowed scale ("+a.allowedScales.join(", ")+")";a.scale=b,a.setUI(c)},setUI:function(b){var a=this;a.scale&&!b.match(a.scale)&&(b=b+"-"+a.scale),a.callParent([b])},onMouseDown:function(b){var a=this;!Ext.isIE&&"touch"!==b.pointerType||Ext.defer(function(){var c=a.getFocusEl();c&&!b.defaultPrevented&&c.focus()},1),a.disabled||0!==b.button||(Ext.button.Manager.onButtonMousedown(a,b),a.addCls(a._pressedCls))},onMouseUp:function(b){var a=this;a.destroyed||0!==b.button||a.pressed||a.removeCls(a._pressedCls)},onMenuShow:function(){var a=this;a.addCls(a._menuActiveCls),a.fireEvent("menushow",a,a.menu)},onMenuHide:function(b){var a=this;a.removeCls(a._menuActiveCls),a.fireEvent("menuhide",a,a.menu)},onDownKey:function(b){var a=this;if(a.menu&&!a.disabled)return a.showMenu(b),b.stopEvent(),!1},updateArrowVisible:function(b){var a=this;return a.rendered&&(b?(a.menu||a.isSplitButton)&&(a.split=!0,a._addSplitCls()):(a._removeSplitCls(),a.split=!1)),b},privates:{addOverCls:function(){this.disabled||this.addCls(this.overCls)},_addSplitCls:function(){this.btnWrap.addCls(this.getSplitCls())},getTdCls:function(){return Ext.baseCSSPrefix+"button-"+this.ui+"-"+this.scale+"-cell"},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){this.btnWrap.removeCls(this.getSplitCls())},_syncHasIconCls:function(){var a=this,c=a.btnEl,b=a._hasIconCls;c&&c[a._hasIcon()?"addCls":"removeCls"]([b,b+"-"+a.iconAlign])},_hasIcon:function(){return!!(this.icon||this.iconCls||this.glyph)},wrapPrimaryEl:function(a){this.el=new Ext.dom.ButtonElement(a),this.callParent([a])}}}),Ext.define("Ext.button.Split",{extend:Ext.button.Button,alternateClassName:"Ext.SplitButton",alias:"widget.splitbutton",isSplitButton:!0,arrowCls:"split",split:!0,getTemplateArgs:function(){var b,c,a=this;return c=a.callParent(),a.disabled&&(c.tabIndex=null),(b=a.ariaArrowElAttributes||{})["aria-hidden"]=!!a.hidden,b["aria-disabled"]=!!a.disabled,a.arrowTooltip?b["aria-label"]=a.arrowTooltip:b["aria-labelledby"]=a.id,c.arrowElAttributes=b,c},onRender:function(){var b,a=this;a.callParent(),(b=a.getFocusEl())&&b.on({scope:a,focus:a.onMainElFocus,blur:a.onMainElBlur}),(b=a.arrowEl)&&(b.dom.setAttribute("data-componentid",a.id),b.setVisibilityMode(Ext.dom.Element.DISPLAY),b.on({scope:a,focus:a.onArrowElFocus,blur:a.onArrowElBlur}))},setArrowHandler:function(a,b){this.arrowHandler=a,this.scope=b},onClick:function(b){var a=this,c="keydown"===b.type&&b.target===a.arrowEl.dom;a.doPreventDefault(b),a.disabled||(c||a.isWithinTrigger(b)?(b.preventDefault(),a.maybeShowMenu(b),a.fireEvent("arrowclick",a,b),a.arrowHandler&&a.arrowHandler.call(a.scope||a,a,b)):(a.doToggle(),a.fireHandler(b)))},enable:function(c){var b=this,a=b.arrowEl;b.callParent([c]),a&&(a.dom.setAttribute("tabIndex",b.tabIndex),a.dom.setAttribute("aria-disabled","false"))},disable:function(c){var a=this.arrowEl;this.callParent([c]),a&&(a.dom.removeAttribute("tabIndex"),a.dom.setAttribute("aria-disabled","true"))},afterHide:function(b,a){this.callParent([b,a]),this.arrowEl.dom.setAttribute("aria-hidden","true")},afterShow:function(a,c,b){this.callParent([a,c,b]),this.arrowEl.dom.setAttribute("aria-hidden","false")},privates:{isFocusing:function(f){var a=this,d=f.fromElement,e=f.toElement,c=a.focusEl&&a.focusEl.dom,b=a.arrowEl&&a.arrowEl.dom;return!!a.focusable&&(e===c?d!==b:e!==b||d!==c)},isBlurring:function(f){var a=this,d=f.fromElement,e=f.toElement,c=a.focusEl&&a.focusEl.dom,b=a.arrowEl&&a.arrowEl.dom;return!!a.focusable&&(d===c?e!==b:d!==b||e!==c)},getFocusClsEl:Ext.privateFn,onMainElFocus:function(a){this.el.addCls(this._focusCls)},onMainElBlur:function(a){this.el.removeCls(this._focusCls)},onArrowElFocus:function(a){this.el.addCls(this._arrowFocusCls)},onArrowElBlur:function(){this.el.removeCls(this._arrowFocusCls)},setTabIndex:function(a){this.callParent([a]),this.arrowEl&&this.arrowEl.set({tabIndex:a})},_addSplitCls:function(){var a=this.arrowEl;this.callParent(),a.dom.setAttribute("tabIndex",this.tabIndex),a.setVisible(!0)},_removeSplitCls:function(){var a=this.arrowEl;this.callParent(),a.dom.removeAttribute("tabIndex"),a.setVisible(!1)}}}),Ext.define("Ext.layout.container.SegmentedButton",{extend:Ext.layout.container.Container,alias:"layout.segmentedbutton",needsItemSize:!1,setsItemSize:!1,_btnRowCls:Ext.baseCSSPrefix+"segmented-button-row",getRenderTree:function(){var a,d,c=this,b=c.callParent();if(c.owner.getVertical())for(a=0,d=b.length;a<d;a++)b[a]={cls:c._btnRowCls,cn:b[a]};return b},getItemLayoutEl:function(b){var a=b.el.dom;return this.owner.getVertical()?a.parentNode:a},onDestroy:function(){if(this.rendered)for(var a,b=this.getRenderTarget();a=b.last();)a.destroy()}}),Ext.define("Ext.button.Segmented",{extend:Ext.container.Container,xtype:"segmentedbutton",config:{allowDepress:!1,allowMultiple:!1,forceSelection:!1,allowToggle:!0,vertical:!1,defaultUI:"default"},beforeRenderConfig:{value:void 0},defaultBindProperty:"value",publishes:["value"],twoWayBindable:["value"],layout:"segmentedbutton",defaultType:"button",maskOnDisable:!1,isSegmentedButton:!0,baseCls:Ext.baseCSSPrefix+"segmented-button",itemCls:Ext.baseCSSPrefix+"segmented-button-item",_firstCls:Ext.baseCSSPrefix+"segmented-button-first",_lastCls:Ext.baseCSSPrefix+"segmented-button-last",_middleCls:Ext.baseCSSPrefix+"segmented-button-middle",applyValue:function(f,g){var e,d,c,h,j,a,i,k,b=this,l=b.getAllowMultiple();if(c=f instanceof Array?f:null==f?[]:[f],h=g instanceof Array?g:null==g?[]:[g],b._isApplyingValue=!0,!b.rendered)for(a=(j=b.items.items).length-1;0<=a;a--)d=j[a],!b.forceSelection||a||k||(d.pressed=!0),d.pressed&&(k=!0,null==(e=d.value)&&(e=b.items.indexOf(d)),Ext.Array.contains(c,e)||c.unshift(e));for(i=c.length,a=0;a<i;a++)f=c[a],(d=b._lookupButtonByValue(f))&&(null!=(e=d.value)&&e!==f&&(c[a]=e),d.pressed||d.setPressed(!0));for(f=l?c:i?c[0]:null,a=0,i=h.length;a<i;a++)g=h[a],Ext.Array.contains(c,g)||b._lookupButtonByValue(g).setPressed(!1);return b._isApplyingValue=!1,b.hasListeners.change&&!Ext.Array.equals(c,h)&&b.fireEvent("change",b,c,h),f},beforeRender:function(){var a=this;a.addCls(a.baseCls+a._getClsSuffix()),a._syncItemClasses(!0),a.callParent()},onAdd:function(b){var a=this,c="_syncItemClasses";a.mon(b,{hide:c,show:c,beforetoggle:"_onBeforeItemToggle",toggle:"_onItemToggle",scope:a}),a.getAllowToggle()&&(b.enableToggle=!0,a.getAllowMultiple()||(b.toggleGroup=a.getId(),b.allowDepress=a.getAllowDepress())),b.addCls(a.itemCls+a._getClsSuffix()),a._syncItemClasses(),a.callParent([b])},onRemove:function(b){var a=this;b.removeCls(a.itemCls+a._getClsSuffix()),a._syncItemClasses(),a.callParent([b])},beforeLayout:function(){Ext.isChrome&&this.el.dom.offsetWidth,this.callParent()},updateDefaultUI:function(d){var c,b,e,a=this.items;if(this.rendered)Ext.raise("Changing the ui config of a segmented button after render is not supported.");else if(a)for(a.items&&(a=a.items),b=0,e=a.length;b<e;b++)"default"!==(c=a[b]).ui||"default"===d||c.hasOwnProperty("ui")||(a[b].ui=d)},privates:{_getClsSuffix:function(){return this.getVertical()?"-vertical":"-horizontal"},_getFirstCls:function(){return this._firstCls},_getLastCls:function(){return this._lastCls},_lookupButtonByValue:function(d){for(var b,e,c=this.items.items,g=c.length,f=0,a=null;f<g;f++)if(null!=(b=(e=c[f]).value)&&b===d){a=e;break}return a||"number"!=typeof d||(a=c[d]),a},_onBeforeItemToggle:function(b,a){if(this.allowMultiple&&this.forceSelection&&!a&&1===this.getValue().length)return!1},_onItemToggle:function(e,h){if(!this._isApplyingValue){var d,b=this,g=Ext.Array,f=b.allowMultiple,c=null!=e.value?e.value:b.items.indexOf(e),a=b.getValue();f&&(d=g.indexOf(a,c)),h?f?-1===d&&(a=g.slice(a)).push(c):a=c:f?-1<d&&(a=g.slice(a)).splice(d,1):a===c&&(a=null),b.setValue(a),b.fireEvent("toggle",b,e,h)}},_syncItemClasses:function(j){var f,e,g,h,c,b,i,a,d=this;if(j||d.rendered){for(f=d._getFirstCls(),e=d._middleCls,g=d._getLastCls(),c=(h=d.items.items).length,b=[],a=0;a<c;a++)(i=h[a]).hidden||b.push(i);for(c=b.length,a=0;a<c;a++)b[a].removeCls([f,e,g]);if(1<c){for(b[0].addCls(f),a=1;a<c-1;a++)b[a].addCls(e);b[c-1].addCls(g)}}}}}),Ext.define("Ext.panel.Bar",{extend:Ext.container.Container,vertical:!1,_verticalSides:{left:1,right:1},initComponent:function(){var a=this,b=a.vertical;a.dock=a.dock||(b?"left":"top"),a.layout=Ext.apply(b?{type:"vbox",align:"middle",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},a.layout),this.callParent()},onAdded:function(a,c,b){this.initOrientation(),this.callParent([a,c,b])},onRemoved:function(a){this.removeClsWithUI(this.uiCls),this.callParent([a])},beforeRender:function(){var a=this;!a.forceOrientation&&a.ownerCt||a.initOrientation(),a.callParent()},setDock:function(d){var c,b,a=this;d!==a.dock&&(Ext.suspendLayouts(),a.clearOrientation(),a.callParent([d]),a.initOrientation(),b=a.vertical,(c=a.layout).setVertical(b),c.setAlignRoundingMethod(b?"ceil":"floor"),Ext.resumeLayouts(!0))},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?"vertical":"horizontal",this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var a=this,b=a.dock,c=a.vertical=b?b in a._verticalSides:a.vertical;a.addClsWithUI([c?"vertical":"horizontal",a.getDockName()])}}}),Ext.define("Ext.panel.Title",{extend:Ext.Component,xtype:"title",isTitle:!0,noWrap:!0,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{role:"presentation",unselectable:"on"},textElRole:"presentation",tabIndex:0,childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="textElRole"> role="{textElRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></div>',_textAlignClasses:{left:Ext.baseCSSPrefix+"title-align-left",center:Ext.baseCSSPrefix+"title-align-center",right:Ext.baseCSSPrefix+"title-align-right"},_iconAlignClasses:{top:Ext.baseCSSPrefix+"title-icon-top",right:Ext.baseCSSPrefix+"title-icon-right",bottom:Ext.baseCSSPrefix+"title-icon-bottom",left:Ext.baseCSSPrefix+"title-icon-left"},_rotationClasses:{0:Ext.baseCSSPrefix+"title-rotate-none",1:Ext.baseCSSPrefix+"title-rotate-right",2:Ext.baseCSSPrefix+"title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:Ext.baseCSSPrefix+"title",_titleSuffix:"-title",_glyphCls:Ext.baseCSSPrefix+"title-glyph",_iconWrapCls:Ext.baseCSSPrefix+"title-icon-wrap",_baseIconCls:Ext.baseCSSPrefix+"title-icon",_itemCls:Ext.baseCSSPrefix+"title-item",_textCls:Ext.baseCSSPrefix+"title-text",afterComponentLayout:function(){var a,d,e,b=this,c=b.getRotation();c&&!Ext.isIE8&&(e=b.el,d=(a=b.lastBox).x,e.setStyle(b._getVerticalAdjustDirection(),d+(1===c?a.width:-a.height)+"px")),this.callParent()},onRender:function(){var a=this,b=a.getRotation(),c=a.el;a.callParent(),b&&c.setVertical(a._rotationAngles[b]),Ext.supports.FixedTableWidthBug&&(c._needsTableWidthFix=!0)},applyText:function(a){return a=a||"&#160;"},beforeRender:function(){var a=this;a.callParent(),a.addCls(a._rotationClasses[a.getRotation()]),a.addCls(a._textAlignClasses[a.getTextAlign()])},getIconMarkup:function(){return this.getTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var c,a=this,g=a.getIcon(),f=a.getIconCls(),b=a.getGlyph(),d=Ext._glyphFontFamily,e=a.getIconAlign();return"string"==typeof b&&(b=(c=b.split("@"))[0],d=c[1]),{id:a.id,ui:a.ui,itemCls:a._itemCls,iconUrl:g,iconCls:f,iconWrapCls:a._iconWrapCls,baseIconCls:a._baseIconCls,iconAlignCls:a._iconAlignClasses[e],glyph:b,glyphCls:b?a._glyphCls:"",glyphFontFamily:d}},initRenderData:function(){var c,b,a=this;return b=Ext.apply({text:a.getText(),textElRole:a.textElRole,id:a.id,ui:a.ui,itemCls:a._itemCls,textCls:a._textCls,iconMarkup:null,iconBeforeTitle:null},a.callParent()),a._hasIcon()&&(c=a.getIconAlign(),b.iconMarkup=a.getIconMarkup(),b.iconBeforeTitle="top"===c||"left"===c),b},onAdded:function(a,f,e){var b=this,d=b._titleSuffix,c=a.baseCls;b.addCls([c+d,c+d+"-"+a.ui]),b.callParent([a,f,e])},updateGlyph:function(a,g){a=a||0;var c,d,e,b=this,f=b._glyphCls;b.glyph=a,b.rendered&&(b._syncIconVisibility(),c=b.iconEl,"string"==typeof a&&(a=(e=a.split("@"))[0],d=e[1]||Ext._glyphFontFamily),a?g!==a&&(c.dom.innerHTML="&#"+a+";",c.addCls(f)):(c.dom.innerHTML="",c.removeCls(f)),d&&c.setStyle("font-family",d),b._didIconStateChange(g,a)&&b.updateLayout())},updateIcon:function(a,c){a=a||"";var b=this;b.rendered&&a!==c&&(b._syncIconVisibility(),b.iconEl.setStyle("background-image",a?"url("+a+")":""),b._didIconStateChange(c,a)&&b.updateLayout())},updateIconAlign:function(d,f){var e,c,a=this,b=a.iconWrapEl;a.iconWrapEl&&(e=a.el,c=a._iconAlignClasses,f&&b.removeCls(c[f]),b.addCls(c[d]),"top"===d||"left"===d?e.insertFirst(b):e.appendChild(b),a.updateLayout())},updateIconCls:function(a,c){a=a||"";var d,b=this;b.rendered&&c!==a&&(b._syncIconVisibility(),d=b.iconEl,c&&d.removeCls(c),d.addCls(a),b._didIconStateChange(c,a)&&b.updateLayout())},updateRotation:function(d,e){var b,c,a=this;a.rendered&&(b=a.el,c=a._rotationClasses,a.removeCls(c[e]),a.addCls(c[d]),b.setHorizontal(),d&&b.setVertical(a._rotationAngles[d]),b.setStyle({right:"",left:"",top:"",height:"",width:""}),a.lastBox=null,a.updateLayout())},updateText:function(a){this.rendered&&(this.textEl.setHtml(a),this.updateLayout())},updateTextAlign:function(d,c){var a=this,b=a._textAlignClasses;a.rendered&&(c&&a.removeCls(b[c]),a.addCls(b[d]),a.updateLayout())},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(c,b){var a=Ext.isEmpty(b);return Ext.isEmpty(c)?!a:a},_hasIcon:function(){return!!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var d,c,a=this,f=a.el,e=a._hasIcon(),b=a.iconWrapEl;e&&!b&&(d="left"===(c=a.iconAlign)||"top"===c,f.dom.insertAdjacentHTML(d?"afterbegin":"beforeend",a.getIconMarkup()),b=a.iconWrapEl=f[d?"first":"last"](),a.iconEl=b.first()),b&&b.setDisplayed(e)}}}),Ext.define("Ext.panel.Tool",{extend:Ext.Component,xtype:"tool",isTool:!0,baseCls:Ext.baseCSSPrefix+"tool",disabledCls:Ext.baseCSSPrefix+"tool-disabled",toolPressedCls:Ext.baseCSSPrefix+"tool-pressed",toolOverCls:Ext.baseCSSPrefix+"tool-over",childEls:["toolEl"],renderTpl:['<div id="{id}-toolEl" data-ref="toolEl" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"></div>'],toolOwner:null,tooltipType:"qtip",stopEvent:!0,ariaRole:"button",focusable:!0,tabIndex:0,keyHandlers:{SPACE:"onClick",ENTER:"onClick"},cacheHeight:!0,cacheWidth:!0,initComponent:function(){var a=this;a.type=a.type||a.id,Ext.applyIf(a.renderData,{baseCls:a.baseCls,type:a.type}),a.tooltip=a.tooltip||a.qtip,a.callParent()},afterRender:function(){var b,a=this;a.callParent(arguments),a.el.on({click:a.onClick,mousedown:a.onMouseDown,mouseover:a.onMouseOver,mouseout:a.onMouseOut,scope:a}),(b=a.tooltip)&&a.setTooltip(b)},tipAttrs:{qtip:"data-qtip"},setTooltip:function(b,d){var c,a=this,g=a.tooltip,f=a.tooltipType,h=a.id,e=a.el;g&&Ext.quickTipsActive&&Ext.isObject(g)&&Ext.tip.QuickTipManager.unregister(h),a.tooltip=b,d&&(a.tooltipType=d),b&&(Ext.quickTipsActive&&Ext.isObject(b)?Ext.tip.QuickTipManager.register(Ext.apply({target:h},b)):e&&(d&&f&&d!==f&&(c=a.tipAttrs[f]||"title",e.dom.removeAttribute(c)),c=a.tipAttrs[d||f]||"title",e.dom.setAttribute(c,b)),"title"!==c&&a.ariaRole&&"presentation"!==a.ariaRole&&(e?e.dom.setAttribute("aria-label",b):(a.ariaRenderAttributes=a.ariaRenderAttributes||{},a.ariaRenderAttributes["aria-label"]=b)))},setType:function(b){var a=this,c=a.type;return a.type=b,a.rendered?(c&&a.toolEl.removeCls(a.baseCls+"-"+c),a.toolEl.addCls(a.baseCls+"-"+b)):a.renderData.type=b,a},onDestroy:function(){var a=this;a.keyMap;a.setTooltip(null),delete a.toolOwner,a.callParent()},privates:{onClick:function(b,c){var a=this;return!a.disabled&&("keydown"!==b.type&&a.el.removeCls(a.toolPressedCls+" "+a.toolOverCls),!1!==a.stopEvent&&b.stopEvent(),a.handler?Ext.callback(a.handler,a.scope,[b,c,a.ownerCt,a],0,a):a.callback&&Ext.callback(a.callback,a.scope,[a.toolOwner||a.ownerCt,a,b],0,a),a.fireEvent("click",a,b,a.toolOwner||a.ownerCt),!0)},onMouseDown:function(a){if(a.preventDefault(),this.disabled)return!1;this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled)return!1;this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}}),Ext.define("Ext.util.KeyMap",{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(b){var a=this;1!==arguments.length||"string"==typeof b||b.dom||b.tagName||b===document||b.isComponent?a.legacyConstructor.apply(a,arguments):(Ext.apply(a,b),a.bindings=[],a.target.isComponent||(a.target=Ext.get(a.target)),a.binding?a.addBinding(a.binding):b.key&&a.addBinding(b),a.enable())},legacyConstructor:function(d,b,c){var a=this;Ext.apply(a,{target:Ext.get(d),eventName:c||a.eventName,bindings:[]}),b&&a.addBinding(b),a.enable()},addBinding:function(b){var c,d,a=this,e=b.key;if(a.processing&&(a.bindings=a.bindings.slice(0)),Ext.isArray(b))for(c=0,d=b.length;c<d;c++)a.addBinding(b[c]);else a.bindings.push(Ext.apply({keyCode:a.processKeys(e)},b))},removeBinding:function(b){var d,a,f,c=this,e=c.bindings,g=e.length;for(c.processing&&(c.bindings=e.slice(0)),f=c.processKeys(b.key),d=0;d<g;++d)if(((a=e[d]).fn||a.handler)===(b.fn||b.handler)&&a.scope===b.scope&&b.alt===a.alt&&b.crtl===a.crtl&&b.shift===a.shift&&Ext.Array.equals(a.keyCode,f))return void Ext.Array.erase(c.bindings,d,1)},processKeys:function(a){var f,e,d,c,b,g=!1;if(a.test)return a;if(Ext.isString(a)){for(e=[],b=0,c=(d=a.toUpperCase()).length;b<c;++b)e.push(d.charCodeAt(b));a=e,g=!0}if(Ext.isArray(a)||(a=[a]),!g)for(b=0,c=a.length;b<c;++b)f=a[b],Ext.isString(f)&&(a[b]=f.toUpperCase().charCodeAt(0));return a},handleTargetEvent:function(b){var d,c,f,e,a=this;if(a.enabled&&(c=0,f=(d=a.bindings).length,b=a.processEvent.apply(a.processEventScope||a,arguments))){if(a.lastKeyEvent=b,a.ignoreInputFields&&Ext.fly(b.target).isInputField())return;if(!b.getKey)return b;for(a.processing=!0;c<f;++c)if(!1===(e=a.processBinding(d[c],b)))return a.processing=!1,e;a.processing=!1}},processEvent:Ext.identityFn,processBinding:function(c,b){if(this.checkModifiers(c,b)){var f,j,a,g=b.getKey(),h=c.fn||c.handler,i=c.scope||this,d=c.keyCode,e=c.defaultEventAction;if(d.test){if(d.test(String.fromCharCode(b.getCharCode()))&&(!0!==(a=h.call(i,g,b))&&e&&b[e](),!1===a))return a}else if(d.length)for(f=0,j=d.length;f<j;++f)if(g===d[f]){if(!0!==(a=h.call(i,g,b))&&e&&b[e](),!1===a)return a;break}}},checkModifiers:function(e,f){for(var b,a,d=["shift","ctrl","alt"],c=0,g=d.length;c<g;++c)if(void 0!==(b=e[a=d[c]])&&b!==f[a+"Key"])return!1;return!0},on:function(a,g,f){var b,c,d,e;Ext.isObject(a)&&!Ext.isArray(a)?(b=a.key,c=a.shift,d=a.ctrl,e=a.alt):b=a,this.addBinding({key:b,shift:c,ctrl:d,alt:e,fn:g,scope:f})},un:function(a,g,f){var b,c,d,e;Ext.isObject(a)&&!Ext.isArray(a)?(b=a.key,c=a.shift,d=a.ctrl,e=a.alt):b=a,this.removeBinding({key:b,shift:c,ctrl:d,alt:e,fn:g,scope:f})},isEnabled:function(){return this.enabled},enable:function(){var a=this;a.enabled||(a.target.on(a.eventName,a.handleTargetEvent,a,{capture:a.capture,priority:a.priority}),a.enabled=!0)},disable:function(){var a=this;a.enabled&&(a.target.removeListener(a.eventName,a.handleTargetEvent,a),a.enabled=!1)},setDisabled:function(a){a?this.disable():this.enable()},destroy:function(b){var a=this,c=a.target;a.bindings=[],a.disable(),b&&c.destroy(),delete a.target,a.callParent()}}),Ext.define("Ext.util.KeyNav",{alternateClassName:"Ext.KeyNav",disabled:!1,defaultEventAction:!1,forceKeyDown:!1,eventName:"keypress",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(b){var a=this;2!==arguments.length?a.doConstruction(b):a.legacyConstructor.apply(a,arguments)},legacyConstructor:function(b,a){this.doConstruction(Ext.apply({target:b},a))},doConstruction:function(a){var d,b=this,c={target:a.target,ignoreInputFields:a.ignoreInputFields,eventName:b.getKeyEvent("forceKeyDown"in a?a.forceKeyDown:b.forceKeyDown,a.eventName),capture:a.capture};b.map&&b.map.destroy(),b.initConfig(a),a.processEvent&&(c.processEvent=a.processEvent,c.processEventScope=a.processEventScope||b),a.priority&&(c.priority=a.priority),a.keyMap?d=b.map=a.keyMap:(d=b.map=new Ext.util.KeyMap(c),b.destroyKeyMap=!0),this.addBindings(a),d.disable(),a.disabled||d.enable()},addBindings:function(d){var b,a,e,c=this,h=c.map,g=Ext.util.KeyNav.keyOptions,f=d.scope||c;for(b in d)a=d[b],null!=(e=g[b])&&(b=e),!a||1!==b.length&&isNaN(b=parseInt(b,10))||("function"==typeof a&&(a={handler:a,defaultEventAction:void 0!==d.defaultEventAction?d.defaultEventAction:c.defaultEventAction}),h.addBinding({key:b,ctrl:a.ctrl,shift:a.shift,alt:a.alt,handler:Ext.Function.bind(c.handleEvent,a.scope||f,[a.handler||a.fn,c],!0),defaultEventAction:void 0!==a.defaultEventAction?a.defaultEventAction:c.defaultEventAction}))},handleEvent:function(d,a,b,c){return c.lastKeyEvent=a,b.call(this,a)},destroy:function(b){var a=this;a.destroyKeyMap&&a.map.destroy(b),delete a.map,a.callParent()},enable:function(){this.map&&(this.map.enable(),this.disabled=!1)},disable:function(){this.map&&this.map.disable(),this.disabled=!0},setDisabled:function(a){this.map.setDisabled(a),this.disabled=a},getKeyEvent:function(b,a){return b||Ext.supports.SpecialKeyDownRepeat&&!a?"keydown":a||this.eventName}}),Ext.define("Ext.util.FocusableContainer",{extend:Ext.Mixin,mixinConfig:{id:"focusablecontainer",before:{onAdd:"onFocusableChildAdd",onRemove:"onFocusableChildRemove",destroy:"destroyFocusableContainer",onFocusEnter:"onFocusEnter"},after:{afterRender:"initFocusableContainer",onFocusLeave:"onFocusLeave",afterShow:"activateFocusableContainerEl"}},isFocusableContainer:!0,enableFocusableContainer:!0,activeChildTabIndex:0,inactiveChildTabIndex:-1,privates:{initFocusableContainer:function(a){var c,b,d;if(this.enableFocusableContainer)a=null==a||a,this.doInitFocusableContainer(a);else for(b=0,d=(c=this.getFocusables()).length;b<d;b++)c[b].focusableContainer=null},doInitFocusableContainer:function(d){var b,a=this;b=a.getFocusableContainerEl(),d&&a.clearFocusables(),a.findNextFocusableChild({step:1,beforeRender:!0})&&a.activateFocusableContainerEl(b),a.focusableContainerMouseListener=a.mon(b,"mousedown",a.onFocusableContainerMousedown,a),a.focusableKeyNav=a.createFocusableContainerKeyNav(b)},createFocusableContainerKeyNav:function(b){var a=this;return new Ext.util.KeyNav(b,{eventName:"keydown",ignoreInputFields:!0,scope:a,tab:a.onFocusableContainerTabKey,enter:a.onFocusableContainerEnterKey,space:a.onFocusableContainerSpaceKey,up:a.onFocusableContainerUpKey,down:a.onFocusableContainerDownKey,left:a.onFocusableContainerLeftKey,right:a.onFocusableContainerRightKey})},destroyFocusableContainer:function(){this.enableFocusableContainer&&this.doDestroyFocusableContainer()},doDestroyFocusableContainer:function(){var a=this;a.keyNav&&a.keyNav.destroy(),a.focusableContainerMouseListener&&a.focusableContainerMouseListener.destroy(),a.focusableKeyNav=a.focusableContainerMouseListener=null},getFocusables:function(){return this.items.items},initDefaultFocusable:function(h){var b,a,d,f,e,c=this,i=c.activeChildTabIndex,g=!1;if(f=(b=c.getFocusables()).length){for(d=0;d<f;d++)if((a=b[d]).focusable&&!a.disabled&&(g=!0,null!=(e=a.getTabIndex())&&i<=e))return a;if(g)return(a=c.findNextFocusableChild({beforeRender:h,items:b,step:!0}))&&c.activateFocusable(a),a}},clearFocusables:function(){var a,b,c=this.getFocusables(),e=c.length;for(b=0;b<e;b++)(a=c[b]).focusable&&!a.disabled&&this.deactivateFocusable(a)},activateFocusable:function(c,a){var b=null!=a?a:this.activeChildTabIndex;c.setTabIndex(b)},deactivateFocusable:function(c,a){var b=null!=a?a:this.inactiveChildTabIndex;c.setTabIndex(b)},onFocusableContainerTabKey:function(){return!0},onFocusableContainerEnterKey:function(){return!0},onFocusableContainerSpaceKey:function(){return!0},onFocusableContainerUpKey:function(a){return a.preventDefault(),this.moveChildFocus(a,!1)},onFocusableContainerDownKey:function(a){return a.preventDefault(),this.moveChildFocus(a,!0)},onFocusableContainerLeftKey:function(a){return a.preventDefault(),this.moveChildFocus(a,!1)},onFocusableContainerRightKey:function(a){return a.preventDefault(),this.moveChildFocus(a,!0)},getFocusableFromEvent:function(b){return Ext.Component.fromElement(b.getTarget())},moveChildFocus:function(a,b){var c=this.getFocusableFromEvent(a);return this.focusChild(c,b,a)},focusChild:function(c,b){var a=this.findNextFocusableChild({child:c,step:b});return a&&a.focus(),a},findNextFocusableChild:function(f){var g,c,h,b,d,a,e,i=f.beforeRender;for(g=f.items||this.getFocusables(),b=null!=f.step?f.step:1,h=f.child,d=Ext.Array.indexOf(g,h),b=!0===b?1:!1===b?-1:b,e=g.length,a=0<b?d<e?d+b:0:0<d?d+b:e-1;;a+=b){if(d<0&&(e<=a||a<0))return null;if(e<=a)a=-1;else if(a<0)a=e;else{if(a===d)return null;if((c=g[a])&&c.focusable&&!c.disabled&&(i||c.isFocusable&&c.isFocusable()))return c}}return null},getFocusableContainerEl:function(){return this.el},onFocusableChildAdd:function(a){if(this.enableFocusableContainer)return this.doFocusableChildAdd(a)},activateFocusableContainerEl:function(a){(a=a||this.getFocusableContainerEl())&&a.set({tabIndex:this.activeChildTabIndex})},deactivateFocusableContainerEl:function(a){(a=a||this.getFocusableContainerEl())&&a.set({tabIndex:void 0})},isFocusableContainerActive:function(){var c,b,a,d=!1;return((c=this.getFocusableContainerEl())&&c.isTabbable&&c.isTabbable()||(a=(b=this.lastFocusedChild)&&b.getFocusEl&&b.getFocusEl())&&a.isTabbable&&a.isTabbable())&&(d=!0),d},doFocusableChildAdd:function(a){a.focusable&&(a.focusableContainer=this)},onFocusableChildRemove:function(a){if(this.enableFocusableContainer)return this.doFocusableChildRemove(a);a.focusableContainer=null},doFocusableChildRemove:function(a){a===this.lastFocusedChild&&(this.lastFocusedChild=null,this.activateFocusableContainerEl())},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.fromElement(b);this.mousedownTimestamp=a===this?Ext.Date.now():0,a===this&&c.preventDefault()},onFocusEnter:function(f){var b,a=this,d=f.toComponent,c=a.mousedownTimestamp;return a.enableFocusableContainer?(a.mousedownTimestamp=0,d===a?(!c||50<Ext.Date.now()-c)&&(b=a.initDefaultFocusable())&&(a.deactivateFocusableContainerEl(),b.focus()):a.deactivateFocusableContainerEl(),d):null},onFocusLeave:function(c){var a=this,b=a.lastFocusedChild;a.enableFocusableContainer&&(a.destroyed||a.destroying||(a.clearFocusables(),b&&!b.disabled?a.activateFocusable(b):a.activateFocusableContainerEl()))},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(b){var a=this;a.enableFocusableContainer&&(a.clearFocusables(),a.activateFocusable(b),b.needArrowKeys&&a.guardFocusableChild(b))},guardFocusableChild:function(c){var a,b=this,d=b.activeChildTabIndex;(a=b.findNextFocusableChild({child:c,step:-1}))&&a.setTabIndex(d),(a=b.findNextFocusableChild({child:c,step:1}))&&a.setTabIndex(d)},afterFocusableChildFocus:function(a){this.enableFocusableContainer&&(this.lastFocusedChild=a)},beforeFocusableChildEnable:Ext.privateFn,onFocusableChildEnable:function(b){var a=this;a.enableFocusableContainer&&b!==a.lastFocusedChild&&(a.deactivateFocusable(b),a.isFocusableContainerActive()||a.activateFocusableContainerEl())},beforeFocusableChildDisable:function(c){var b,a=this;!a.enableFocusableContainer||a.destroying||a.destroyed||c.hasFocus&&(b=a.findNextFocusableChild({child:c})||c.findFocusTarget())&&b.focus()},onFocusableChildDisable:function(d){var a=this,c=a.lastFocusedChild;!a.enableFocusableContainer||a.destroying||a.destroyed||(d===c&&a.activateFocusableContainerEl(),a.findNextFocusableChild({step:1})||a.deactivateFocusableContainerEl())},onFocusableChildShow:Ext.privateFn,onFocusableChildHide:Ext.privateFn,onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn}}),Ext.define("Ext.panel.Header",{extend:Ext.panel.Bar,xtype:"header",mixins:[Ext.util.FocusableContainer],isHeader:!0,defaultType:"tool",indicateDrag:!1,weight:-1,shrinkWrap:3,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",autoEl:{role:"presentation"},beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{xtype:"title",flex:1},merge:function(a,b){return"object"!=typeof a&&(a={text:a}),Ext.merge(b?Ext.Object.chain(b):{},a)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:Ext.baseCSSPrefix+"header",initComponent:function(){var a=this,b=a.items,d=a.itemPosition,c=[a.headerCls];a.tools=a.tools||[],a.items=b=b?b.slice():[],void 0!==d&&(a._userItems=b.slice(),a.items=b=[]),a.indicateDragCls=a.headerCls+"-draggable",a.indicateDrag&&c.push(a.indicateDragCls),a.addCls(c),a.syncNoBorderCls(),a.enableFocusableContainer=!a.isAccordionHeader&&0<a.tools.length,a.enableFocusableContainer&&(a.ariaRole="toolbar"),Ext.Array.push(b,a.tools),a.tools.length=0,a.callParent(),a.on({dblclick:a.onDblClick,click:a.onClick,element:"el",scope:a})},addTool:function(b){var a=this;a.add(Ext.ComponentManager.create(b,"tool")),!a.isAccordionHeader&&0<a.tools.length&&!a.enableFocusableContainer&&(a.enableFocusableContainer=!0,a.ariaRole="toolbar",a.rendered&&(a.ariaEl.dom.setAttribute("role","toolbar"),a.initFocusableContainer(!0)))},afterLayout:function(){var e,b,c,d,a=this;a.vertical&&(b=a.frameTR)&&(e=a.frameBR,c=a.frameTL,d=a.getWidth()-b.getPadding("r")-(c?c.getPadding("l"):a.el.getBorderWidth("l"))+"px",e.setStyle("background-position-x",d),b.setStyle("background-position-x",d)),this.callParent()},applyTitle:function(a,d){var c,e,b=this;return(c="string"==typeof(a=a||""))&&(a={text:a}),d?(Ext.suspendLayouts(),d.setConfig(a),Ext.resumeLayouts(!0),a=d):(c&&(a.xtype="title"),a.ui=b.ui,e="rotation"in a,a.id=b.id+"-title",b.isAccordionHeader&&(a.ariaRole="tab",a.textElRole=null,a.focusable=!0),a=Ext.create(a),!e&&b.vertical&&"default"===b.titleRotation&&(a.rotation=1)),a},applyTitlePosition:function(b){var a=this.items.getCount();return this._titleInItems&&--a,Math.max(Math.min(b,a),0)},beforeLayout:function(){this.callParent(),this.syncBeforeAfterTitleClasses()},beforeRender:function(){var a=this,b=a.itemPosition;a.protoEl.unselectable(),a.callParent(),void 0!==b&&a.insert(b,a._userItems)},getTools:function(){return this.tools.slice()},onAdd:function(a,c){var b=this.tools;this.callParent([a,c]),a.isTool&&(b.push(a),b[a.type]=a)},onAdded:function(a,c,b){this.syncNoBorderCls(),this.callParent([a,c,b])},onRemoved:function(a,c,b){this.syncNoBorderCls(),this.callParent([a,c,b])},setDock:function(e){var a=this,c=a.getTitle(),b=a.getTitleRotation(),d=c.getRotation();Ext.suspendLayouts(),a.callParent([e]),"default"===b&&((b=a.vertical?1:0)!==d&&c.setRotation(b),a.rendered&&a.resetItemMargins()),Ext.resumeLayouts(!0)},updateGlyph:function(a){this.getTitle().setGlyph(a)},updateIcon:function(a){this.getTitle().setIcon(a)},updateIconAlign:function(a,b){this.getTitle().setIconAlign(a)},updateIconCls:function(a){this.getTitle().setIconCls(a)},updateTitle:function(a,b){b||(this.insert(this.getTitlePosition(),a),this._titleInItems=!0),this.titleCmp=a},updateTitleAlign:function(a,b){this.getTitle().setTextAlign(a)},updateTitlePosition:function(a){this.insert(a,this.getTitle())},updateTitleRotation:function(a){"default"===a&&(a=this.vertical?1:0),this.getTitle().setRotation(a)},privates:{fireClickEvent:function(c,a){var b="."+Ext.panel.Tool.prototype.baseCls;a.getTarget(b)||this.fireEvent(c,this,a)},getFramingInfoCls:function(){var a=this,c=a.callParent(),b=a.ownerCt;return!a.expanding&&b&&(b.collapsed||a.isCollapsedExpander)&&(c+="-"+b.collapsedCls),c+"-"+a.dock},onClick:function(a){this.fireClickEvent("click",a)},onDblClick:function(a){this.fireClickEvent("dblclick",a)},onFocusableContainerMousedown:function(c,b){Ext.Component.fromElement(b)===this?c.preventDefault():this.mixins.focusablecontainer.onFocusableContainerMousedown.apply(this,arguments)},syncBeforeAfterTitleClasses:function(l){var e,d,b,a,c=this,j=c.items,i=j.items,h=c.getTitlePosition(),k=i.length,g=j.generation,f=c.syncBeforeAfterGen;if(l||f!==g)for(c.syncBeforeAfterGen=g,b=0;b<k;++b)e=(a=i[b]).afterTitleCls||(a.afterTitleCls=a.baseCls+"-after-title"),d=a.beforeTitleCls||(a.beforeTitleCls=a.baseCls+"-before-title"),!c.title||b<h?(f&&a.removeCls(e),a.addCls(d)):h<b&&(f&&a.removeCls(d),a.addCls(e))},syncNoBorderCls:function(){var a=this,b=this.ownerCt,c=a.headerCls+"-noborder";(b?!1!==b.border||b.frame:!1!==a.border)?a.removeCls(c):a.addCls(c)}}}),Ext.define("Ext.layout.container.boxOverflow.None",{alternateClassName:"Ext.layout.boxOverflow.None",alias:["box.overflow.none","box.overflow.None"],mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:"none"},isBoxOverflowHandler:!0,$configPrefixed:!1,$configStrict:!1,constructor:function(a){this.initConfig(a)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(b){var a,c=this,d=b.state.boxPlan;d&&d.tooNarrow?(a=c.handleOverflow(b))&&a.reservedSpace&&c.layout.publishInnerCtSize(b,a.reservedSpace):c.clearOverflow()},completeLayout:Ext.emptyFn,finishedLayout:function(e){var c,a,b=this,d=b.layout.owner;d.hasListeners.overflowchange&&(a=(c=d.query(">[hidden]")).length)!==b.lastHiddenCount&&(d.fireEvent("overflowchange",b.lastHiddenCount,a,c),b.lastHiddenCount=a)},onRemove:Ext.emptyFn,getItem:function(a){return this.layout.owner.getComponent(a)},getOwnerType:function(b){return b.isToolbar?"toolbar":b.isTabBar?"tab-bar":b.isMenu?"menu":b.isBreadcrumb?"breadcrumb":b.getXType()},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""},setVertical:function(){var b=this,a=b.layout,c=a.innerCt;c.removeCls(b.getOverflowCls(a.oppositeDirection)),c.addCls(b.getOverflowCls(a.direction))}}),Ext.define("Ext.layout.container.boxOverflow.Scroller",{extend:Ext.layout.container.boxOverflow.None,alternateClassName:"Ext.layout.boxOverflow.Scroller",alias:["box.overflow.scroller","box.overflow.Scroller"],mixins:{observable:Ext.mixin.Observable},animateScroll:!1,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:Ext.baseCSSPrefix+"box-scroller",beforeSuffix:"-before-scroller",afterSuffix:"-after-scroller",constructor:function(b){var a=this;a.mixins.observable.constructor.call(a,b),a.scrollPosition=0,a.scrollSize=0},getPrefixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls("beforeX"),style:"display:none"}},getSuffixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls("afterX"),style:"display:none"}},createScrollerCls:function(g){var c=this,d=c.layout,b=d.owner,e=c.getOwnerType(b),a=c.scrollerCls,f=a+" "+a+"-"+d.names[g]+" "+a+"-"+e+" "+a+"-"+e+"-"+b.ui;return b.plain&&(f+=" "+a+"-plain"),f},getOverflowCls:function(a){return this.scrollerCls+"-body-"+a},beginLayout:function(a){a.innerCtScrollPos=this.getScrollPosition(),this.callParent(arguments)},finishedLayout:function(a){var c,b=this,f=a.state.boxPlan,e=b.layout,d=e.names,g=Math.min(b.getMaxScrollPosition(),a.innerCtScrollPos);f&&f.tooNarrow&&(c=a.childItems[a.childItems.length-1].props,b.scrollSize=c[d.x]+c[d.width],b.updateScrollButtons(),e.innerCt[d.setScrollLeft](g)),b.callParent([a])},handleOverflow:function(i){var g,e,b,c,a=this,d=a.layout.names,h=d.getWidth,f=d.parallelMargins;return a.showScrollers(),b=a.getBeforeScroller(),c=a.getAfterScroller(),g=b[h]()+c[h]()+b.getMargin(f)+c.getMargin(f),e=i.targetContext.getPaddingInfo()[d.width],{reservedSpace:Math.max(g-e,0)}},getBeforeScroller:function(){var a=this;return a._beforeScroller||(a._beforeScroller=a.createScroller(a.beforeSuffix,"beforeRepeater","scrollLeft"))},getAfterScroller:function(){var a=this;return a._afterScroller||(a._afterScroller=a.createScroller(a.afterSuffix,"afterRepeater","scrollRight"))},createScroller:function(g,f,e){var a,b=this,d=b.layout.owner,c=b.scrollerCls;return(a=d.el.getById(d.id+g)).addClsOnOver(c+"-hover"),a.addClsOnClick(c+"-pressed"),a.setVisibilityMode(Ext.Element.DISPLAY),b[f]=new Ext.util.ClickRepeater(a,{interval:b.scrollRepeatInterval,handler:e,scope:b}),a},createWheelListener:function(){var a=this;a.wheelListener=a.layout.innerCt.on("mousewheel",a.onMouseWheel,a,{destroyable:!0})},onMouseWheel:function(a){a.stopEvent(),this.scrollBy(this.getWheelDelta(a)*this.wheelIncrement*-1,!1)},getWheelDelta:function(a){return a.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var a=this;a.wheelListener||a.createWheelListener(),a.getBeforeScroller().show(),a.getAfterScroller().show(),a.layout.owner.addClsWithUI("vertical"===a.layout.direction?"vertical-scroller":"scroller")},hideScrollers:function(){var a=this,b=a.getBeforeScroller(),c=a.getAfterScroller();b&&(b.hide(),c.hide(),a.layout.owner.removeClsWithUI("vertical"===a.layout.direction?"vertical-scroller":"scroller"))},destroy:function(){Ext.destroyMembers(this,"beforeRepeater","afterRepeater","_beforeScroller","_afterScroller","wheelListener"),this.callParent()},scrollBy:function(b,a){this.scrollTo(this.getScrollPosition()+b,a)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var b,a=this,c=a.getBeforeScroller(),d=a.getAfterScroller();c&&d&&(b=a.scrollerCls+"-disabled",c[a.atExtremeBefore()?"addCls":"removeCls"](b),d[a.atExtremeAfter()?"addCls":"removeCls"](b),a.scrolling=!1)},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,!1)},scrollRight:function(){this.scrollBy(this.scrollIncrement,!1)},getScrollPosition:function(){var b=this,c=b.layout;return isNaN(b.scrollPosition)?c.innerCt[c.names.getScrollLeft]():b.scrollPosition},getMaxScrollPosition:function(){var b=this.layout,a=this.scrollSize-b.innerCt.lastBox[b.names.width];return a<0?0:a},atExtremeBefore:function(){return!this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},setVertical:function(){var c=this,d=c.getBeforeScroller(),e=c.getAfterScroller(),b=c.layout.names,a=c.scrollerCls;d.removeCls(a+"-"+b.beforeY),e.removeCls(a+"-"+b.afterY),d.addCls(a+"-"+b.beforeX),e.addCls(a+"-"+b.afterX),this.callParent()},scrollTo:function(g,b){var a=this,d=a.layout,e=d.names,f=a.getScrollPosition(),c=Ext.Number.constrain(g,0,a.getMaxScrollPosition());c===f||a.scrolling||(a.scrollPosition=NaN,void 0===b&&(b=a.animateScroll),d.innerCt[e.scrollTo](e.beforeScrollX,c,!!b&&a.getScrollAnim()),b?a.scrolling=!0:a.updateScrollButtons(),a.fireEvent("scroll",a,c,!!b&&a.getScrollAnim()))},scrollToItem:function(a,i){var d,g,b,c=this,e=c.layout,h=e.owner,f=e.names,j=e.innerCt;void 0!==(a=c.getItem(a))&&(a===h.items.first()?b=0:a===h.items.last()?b=c.getMaxScrollPosition():(d=c.getItemVisibility(a)).fullyVisible||(b=(g=a.getBox(!1,!0))[f.x],d.hiddenEnd&&(b-=j[f.getWidth]()-g[f.width])),void 0!==b&&c.scrollTo(b,i))},getItemVisibility:function(i){var d=this,h=d.getItem(i).getBox(!0,!0),g=d.layout,c=g.names,b=h[c.x],f=b+h[c.width],a=d.getScrollPosition(),e=a+g.innerCt[c.getWidth]();return{hiddenStart:b<a,hiddenEnd:e<f,fullyVisible:a<=b&&f<=e}}}),Ext.define("Ext.dd.DragDropManager",{singleton:!0,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,notifyOccluded:!1,dragCls:Ext.baseCSSPrefix+"dd-drag-current",_execOnAll:function(f,g){var d,e,b,a,c=this.ids;for(d in c)if(c.hasOwnProperty(d))for(e in a=c[d])if(a.hasOwnProperty(e)){if(b=a[e],!this.isTypeOfDD(b))continue;b[f].apply(b,g)}},addListeners:function(){var a=this;a.init(),Ext.getDoc().on({mouseup:a.handleMouseUp,mousemove:{fn:a.handleMouseMove,capture:!1},dragstart:a.preventDrag,drag:a.preventDrag,dragend:a.preventDrag,capture:!0,scope:a}),Ext.getWin().on({unload:a._onUnload,resize:a._onResize,scope:a})},preventDrag:function(a){this.isMouseDown&&a.stopPropagation()},_onResize:function(a){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:8,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(b,a){this.initialized||this.init(),this.ids[a]||(this.ids[a]={}),this.ids[a][b.id]=b},removeDDFromGroup:function(c,a){this.ids[a]||(this.ids[a]={});var b=this.ids[a];b&&b[c.id]&&delete b[c.id]},_remove:function(b,f){var c,a=this,d=a.ids,e=b.groups;if(!a.clearingAll){for(c in a.dragCurrent===b&&(a.dragCurrent=null),e)e.hasOwnProperty(c)&&(f?delete d[c]:d[c]&&delete d[c][b.id]);delete a.handleIds[b.id],delete a.locationCache[b.id]}},regHandle:function(a,b){this.handleIds[a]||(this.handleIds[a]={}),this.handleIds[a][b]=b},isDragDrop:function(a){return!!this.getDDById(a)},getRelated:function(f,e){var c,d,a,b=[];for(c in f.groups)for(d in this.ids[c])a=this.ids[c][d],this.isTypeOfDD(a)&&(e&&!a.isTarget||(b[b.length]=a));return b},isLegalTarget:function(e,d){var a,c,b=this.getRelated(e,!0);for(a=0,c=b.length;a<c;++a)if(b[a].id===d.id)return!0;return!1},isTypeOfDD:function(a){return a&&a.__ygDragDrop},isHandle:function(a,b){return this.handleIds[a]&&this.handleIds[a][b]},getDDById:function(d,c){var b,a;for(b in this.ids)if((a=this.ids[b][d])instanceof Ext.dd.DDTarget||c)return a;return null},handleMouseDown:function(b,e){var d,c,a=this;a.isMouseDown=!0,Ext.quickTipsActive&&Ext.tip.QuickTipManager.ddDisable(),a.currentPoint=b.getPoint(),a.dragCurrent&&a.handleMouseUp(b),a.mousedownEvent=b,a.currentTarget=b.getTarget(),c=(a.dragCurrent=e).getEl(),Ext.fly(c).setCapture(),d=b.getXY(),a.startX=d[0],a.startY=d[1],a.offsetX=a.offsetY=0,a.deltaX=a.startX-c.offsetLeft,a.deltaY=a.startY-c.offsetTop,a.dragThreshMet=!1},startDrag:function(d,e){var c,b=this,a=b.dragCurrent;clearTimeout(b.clickTimeout),a&&(a.b4StartDrag(d,e),a.startDrag(d,e),(c=a.getDragEl())&&Ext.fly(c).addCls(b.dragCls)),b.dragThreshMet=!0},handleMouseUp:function(b){var a=this;a.isMouseDown=!1,Ext.quickTipsActive&&Ext.tip.QuickTipManager.ddEnable(),a.dragCurrent&&(Ext.isIE&&document.releaseCapture&&document.releaseCapture(),clearTimeout(a.clickTimeout),a.dragThreshMet&&a.fireEvents(b,!0),a.stopDrag(b),a.stopEvent(b),a.mousedownEvent=a.currentTarget=null)},stopEvent:function(a){this.stopPropagation&&a.stopPropagation(),this.preventDefault&&a.preventDefault()},stopDrag:function(d){var c,a=this,b=a.dragCurrent;b&&(a.dragThreshMet&&((c=b.getDragEl())&&Ext.fly(c).removeCls(a.dragCls),b.b4EndDrag(d),b.endDrag(d)),a.dragCurrent.onMouseUp(d)),a.dragCurrent=null,a.dragOvers={}},handleMouseMove:function(b){var d,e,a=this,c=a.dragCurrent,f=a.currentPoint=b.getPoint(),g=f.x,h=f.y;return a.offsetX=g-a.startX,a.offsetY=h-a.startY,c&&(a.dragThreshMet||(d=Math.abs(a.offsetX),e=Math.abs(a.offsetY),(d>a.clickPixelThresh||e>a.clickPixelThresh)&&a.startDrag(a.startX,a.startY)),a.dragThreshMet&&(c.b4Drag(b),c.onDrag(b),c.moveOnly||a.fireEvents(b,!1)),a.stopEvent(b)),!0},fireEvents:function(e,t){var p,b,o,q,a,f,n,m,d=this,s=Ext.supports.Touch,c=d.dragCurrent,l=d.currentPoint,v=l.x,w=l.y,j=[],r=[],h=[],i=[],g=[],k=[],u=s?document.documentElement.clientWidth/window.innerWidth:1;if(c&&!c.isLocked()){for(a in m=!(c.deltaX<0||c.deltaY<0),(s||!d.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&m)&&(p=c.getDragEl(),m&&(p.style.visibility="hidden"),e.target=document.elementFromPoint(v/u,w/u),m&&(p.style.visibility="visible")),d.dragOvers)b=d.dragOvers[a],delete d.dragOvers[a],d.isTypeOfDD(b)&&!b.destroyed&&(d.notifyOccluded?this.isOverTarget(l,b,d.mode)||h.push(b):e.within(b.getEl())||h.push(b),r[a]=!0);for(n in c.groups)if("string"==typeof n)for(a in d.ids[n])if(b=d.ids[n][a],d.isTypeOfDD(b)&&(o=b.getEl())&&b.isTarget&&!b.isLocked()&&Ext.fly(o).isVisible(!0)&&(b!==c||!1===c.ignoreSelf))if(d.notifyOccluded)-1!==(b.zIndex=d.getZIndex(o))&&(q=!0),j.push(b);else if(e.within(b.getEl())){j.push(b);break}for(q&&Ext.Array.sort(j,d.byZIndex),a=0,f=j.length;a<f&&(b=j[a],!d.isOverTarget(l,b,d.mode)||(t?g.push(b):(r[b.id]?i.push(b):k.push(b),d.dragOvers[b.id]=b),d.notifyOccluded));a++);if(d.mode)h.length&&(c.b4DragOut(e,h),c.onDragOut(e,h)),k.length&&c.onDragEnter(e,k),i.length&&(c.b4DragOver(e,i),c.onDragOver(e,i)),g.length&&(c.b4DragDrop(e,g),c.onDragDrop(e,g));else{for(a=0,f=h.length;a<f;++a)c.b4DragOut(e,h[a].id),c.onDragOut(e,h[a].id);for(a=0,f=k.length;a<f;++a)c.onDragEnter(e,k[a].id);for(a=0,f=i.length;a<f;++a)c.b4DragOver(e,i[a].id),c.onDragOver(e,i[a].id);for(a=0,f=g.length;a<f;++a)c.b4DragDrop(e,g[a].id),c.onDragDrop(e,g[a].id)}t&&!g.length&&c.onInvalidDrop(e)}},getZIndex:function(a){var c,d=document.body,b=-1;for(a=Ext.getDom(a);a!==d;)isNaN(c=Number(Ext.fly(a).getStyle("zIndex")))||(b=c),a=a.parentNode;return b},byZIndex:function(a,b){return a.zIndex<b.zIndex},getBestMatch:function(d){var c,b,a=null,e=d.length;if(1===e)a=d[0];else for(c=0;c<e;++c){if((b=d[c]).cursorIsOver){a=b;break}(!a||a.overlap.getArea()<b.overlap.getArea())&&(a=b)}return a},refreshCache:function(e){var b,d,a,c;for(b in e)if("string"==typeof b)for(d in this.ids[b])a=this.ids[b][d],this.isTypeOfDD(a)&&((c=this.getLocation(a))?this.locationCache[a.id]=c:delete this.locationCache[a.id])},verifyEl:function(a){return Ext.getBody().contains(a)},getLocation:function(a){if(!this.isTypeOfDD(a))return null;if(a.getRegion)return a.getRegion();var b,d,f,e,g,k,j,h,i,c=a.getEl();try{b=Ext.fly(c).getXY()}catch(l){}return b?(f=(d=b[0])+c.offsetWidth,g=(e=b[1])+c.offsetHeight,k=e-a.padding[0],j=f+a.padding[1],h=g+a.padding[2],i=d-a.padding[3],new Ext.util.Region(k,j,h,i)):null},isOverTarget:function(g,a,i){var b,d,f,e,c=this.locationCache[a.id];return c&&this.useCache||(c=this.getLocation(a),this.locationCache[a.id]=c),!!c&&(a.cursorIsOver=c.contains(g),(b=this.dragCurrent)&&b.getTargetCoord&&(i||b.constrainX||b.constrainY)?(a.overlap=null,d=b.getTargetCoord(g.x,g.y),f=b.getDragEl(),!!(e=new Ext.util.Region(d.y,d.x+f.offsetWidth,d.y+f.offsetHeight,d.x).intersect(c))&&(a.overlap=e,!!i||a.cursorIsOver)):a.cursorIsOver)},_onUnload:function(b,a){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var c,a=this,b=a.elementCache;for(c in a.dragCurrent&&(a.stopDrag(),a.dragCurrent=null),a.clearingAll=!0,a._execOnAll("unreg",[]),delete a.clearingAll,b)delete b[c];a.elementCache={},a.ids={},a.handleIds={}},elementCache:{},getElWrapper:function(b){var a=this.elementCache[b];return a&&a.el||(a=this.elementCache[b]=new this.ElementWrapper(Ext.getDom(b))),a},getElement:function(a){return Ext.getDom(a)},getCss:function(b){var a=Ext.getDom(b);return a?a.style:null},ElementWrapper:function(a){this.el=a||null,this.id=this.el&&a.id,this.css=this.el&&a.style},getPosX:function(a){return Ext.fly(a).getX()},getPosY:function(a){return Ext.fly(a).getY()},swapNode:function(a,b){if(a.swapNode)a.swapNode(b);else{var c=b.parentNode,d=b.nextSibling;d===a?c.insertBefore(a,b):b===a.nextSibling?c.insertBefore(b,a):(a.parentNode.replaceChild(b,a),c.insertBefore(a,d))}},getScroll:function(){var e=window.document,a=e.documentElement,b=e.body,d=0,c=0;return a&&(a.scrollTop||a.scrollLeft)?(d=a.scrollTop,c=a.scrollLeft):b&&(d=b.scrollTop,c=b.scrollLeft),{top:d,left:c}},getStyle:function(b,a){return Ext.fly(b).getStyle(a)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(c,a){var b=Ext.fly(a).getXY();Ext.fly(c).setXY(b)},numericSort:function(a,b){return a-b},handleWasClicked:function(b,c){if(this.isHandle(c,b.id))return!0;for(var a=b.parentNode;a;){if(this.isHandle(c,a.id))return!0;a=a.parentNode}return!1}},function(a){Ext.onInternalReady(function(){a.addListeners()})}),Ext.define("Ext.resizer.Splitter",{extend:Ext.Component,xtype:"splitter",childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',Ext.baseCSSPrefix,"collapse-el ",Ext.baseCSSPrefix,'layout-split-{collapseDir}{childElCls}">',"</div>","</tpl>"],isSplitter:!0,baseCls:Ext.baseCSSPrefix+"splitter",collapsedClsInternal:Ext.baseCSSPrefix+"splitter-collapsed",canResize:!0,collapsible:null,collapseOnDblClick:!0,defaultSplitMin:40,defaultSplitMax:1e3,collapseTarget:"next",horizontal:!1,vertical:!1,size:5,tracker:null,ariaRole:"separator",focusable:!0,tabIndex:0,getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var a=this,c=a.getCollapseTarget(),b=a.collapsible;a.callParent(),c.collapsed&&a.addCls(a.collapsedClsInternal),a.canResize||a.addCls(a.baseCls+"-noresize"),Ext.applyIf(a.renderData,{collapseDir:a.getCollapseDirection(),collapsible:null!==b?b:c.collapsible}),a.ariaRenderAttributes=a.ariaRenderAttributes||{},a.ariaRenderAttributes["aria-orientation"]=a.orientation,a.protoEl.unselectable()},onRender:function(){var b,a=this;a.callParent(arguments),!1!==a.performCollapse&&(a.renderData.collapsible&&a.mon(a.collapseEl,"click",a.toggleTargetCmp,a),a.collapseOnDblClick&&a.mon(a.el,"dblclick",a.toggleTargetCmp,a)),a.getCollapseTarget().on({collapse:a.onTargetCollapse,expand:a.onTargetExpand,beforeexpand:a.onBeforeTargetExpand,beforecollapse:a.onBeforeTargetCollapse,scope:a}),a.canResize&&(a.tracker=Ext.create(a.getTrackerConfig()),a.relayEvents(a.tracker,["beforedragstart","dragstart","dragend"])),(b=a.collapseEl)&&(b.lastCollapseDirCls=a.collapseDirProps[a.collapseDirection].cls)},getCollapseDirection:function(){var c,d,e,b=this,a=b.collapseDirection;return a||((c=b.collapseTarget).isComponent&&(a=c.collapseDirection),a||(e=b.ownerCt.layout.type,a=["bottom","right","top","left"][c.isComponent?(d=b.ownerCt.items,Number(d.indexOf(c)===d.indexOf(b)-1)<<1|Number("hbox"===e)):Number("prev"===b.collapseTarget)<<1|Number("hbox"===e)]),b.collapseDirection=a),b.setOrientation("top"===a||"bottom"===a?"horizontal":"vertical"),a},getCollapseTarget:function(){var a=this;return a.collapseTarget.isComponent?a.collapseTarget:"prev"===a.collapseTarget?a.previousSibling():a.nextSibling()},setCollapseEl:function(b){var a=this.collapseEl;a&&a.setDisplayed(b)},onBeforeTargetExpand:function(a){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(b){var a=this;b===a.getCollapseTarget()&&b["vertical"===a.orientation?"collapsedHorizontal":"collapsedVertical"]()&&a.el.addCls(a.collapsedClsInternal+" "+(a.collapsedCls||"")),a.setCollapseEl("")},onTargetExpand:function(b){var a=this;a.el.removeCls(a.collapsedClsInternal+" "+(a.collapsedCls||"")),a.setCollapseEl("")},collapseDirProps:{top:{cls:Ext.baseCSSPrefix+"layout-split-top"},right:{cls:Ext.baseCSSPrefix+"layout-split-right"},bottom:{cls:Ext.baseCSSPrefix+"layout-split-bottom"},left:{cls:Ext.baseCSSPrefix+"layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var b,c=this,a=c.collapseEl,d=c.collapseDirProps[c.collapseDirection];a&&((b=a.lastCollapseDirCls)&&a.removeCls(b),a.addCls(a.lastCollapseDirCls=d.cls))},applyOrientation:function(){var a=this,e=a.orientation,b=a.orientationProps[e],f=a.size,d=b.fixedAxis,c=b.stretchedAxis,g=a.baseCls+"-";a[e]=!0,a[b.opposite]=!1,a.hasOwnProperty(d)&&"100%"!==a[d]||(a[d]=f),a.hasOwnProperty(c)&&a[c]!==f||(a[c]="100%"),a.removeCls(g+b.opposite),a.addCls(g+e)},setOrientation:function(b){var a=this;a.orientation!==b&&(a.orientation=b,a.applyOrientation())},updateOrientation:function(){delete this.collapseDirection,this.getCollapseDirection(),this.applyCollapseDirection()},toggleTargetCmp:function(d,e){var a=this.getCollapseTarget(),c=a.placeholder;!Ext.isFunction(a.expand)||!Ext.isFunction(a.collapse)||(!c||c.hidden)&&a.hidden||(a.collapsed?a.expand():a.collapseDirection?a.collapse():a.collapse(this.renderData.collapseDir))},setSize:function(){var a=this;a.callParent(arguments),Ext.isIE&&a.el&&a.el.repaint()},beforeDestroy:function(){Ext.destroy(this.tracker),this.callParent()}}),Ext.define("Ext.theme.triton.resizer.Splitter",{override:"Ext.resizer.Splitter",size:10}),Ext.define("Ext.layout.container.Box",{extend:Ext.layout.container.Container,alias:"layout.box",alternateClassName:"Ext.layout.BoxLayout",type:"box",config:{align:"begin",constrainAlign:!1,enableSplitters:!0,overflowHandler:{$value:null,merge:function(a,b){return"string"==typeof a&&(a={type:a}),Ext.merge(b?Ext.Object.chain(b):{},a)}},padding:0,pack:"start",stretchMaxPartner:void 0,vertical:!1,alignRoundingMethod:"round"},itemCls:Ext.baseCSSPrefix+"box-item",targetCls:Ext.baseCSSPrefix+"box-layout-ct",targetElCls:Ext.baseCSSPrefix+"box-target",innerCls:Ext.baseCSSPrefix+"box-inner",manageMargins:!0,createsInnerCt:!0,childEls:["innerCt","targetEl"],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:!0,definitions:"var dh=Ext.DomHelper;"}],constructor:function(c){var b,a=this;a.callParent(arguments),a.setVertical(a.vertical),a.flexSortFn=a.flexSort.bind(a),"string"!=(b=typeof a.padding)&&"number"!=b||(a.padding=Ext.util.Format.parseBox(a.padding),a.padding.height=a.padding.top+a.padding.bottom,a.padding.width=a.padding.left+a.padding.right)},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(h,b){var a=this,f=a.sizePolicy,g=a.align,p=h.flex,c=g,o=a.names,e=o.height,m=o.width,q=h[m],n=h[e],d=a._percentageRe,i=d.test(q),l="stretch"===g,j="stretchmax"===g,k=a.constrainAlign;return!b&&(l||p||i||k&&!j)&&(b=a.owner.getSizeModel()),l?!d.test(n)&&b[e].shrinkWrap&&(c="stretchmax"):j||(c=d.test(n)?"stretch":k&&!b[e].shrinkWrap?"stretchmax":""),(p||i)&&(b[m].shrinkWrap||(f=f.flex)),f[c]},flexSort:function(o,p){var g,i,f,h,e,b,k=this.names.maxWidth,l=this.names.minWidth,c=o.target,d=p.target,m=c.flex,n=d.flex,a=0;return f=c[k]||1/0,h=d[k]||1/0,g=c[l]||0,i=d[l]||0,e=isFinite(g)||isFinite(i),b=isFinite(f)||isFinite(h),(e||b)&&(b&&(a=f-h),0===a&&e&&(a=i-g),0===a&&(a=b?n-m:m-n)),a},isItemBoxParent:function(a){return!0},isItemShrinkWrap:function(a){return!0},roundFlex:function(a){return Math.floor(a)},beginCollapse:function(a){("vertical"===this.direction&&a.collapsedVertical()||"horizontal"===this.direction&&a.collapsedHorizontal())&&(a.collapseMemento.capture(["flex"]),delete a.flex)},beginExpand:function(a){a.collapseMemento.restore(["flex"])},beginLayout:function(a){var d,b=this,f=b.owner,c=f.stretchMaxPartner,h=b.innerCt.dom.style,i=b.names,g=b.overflowHandler,e=f.getScrollable();a.boxNames=i,g&&g.beginLayout(a),"string"==typeof c&&(c=Ext.getCmp(c)||f.query(c)[0]),a.stretchMaxPartner=c&&a.context.getCmp(c),b.callParent(arguments),a.innerCtContext=a.getEl("innerCt",b),a.targetElContext=a.getEl("targetEl",b),e&&((d=(a.ownerScrollable=e).getPosition()).x||d.y)&&(a.scrollRestore=d),h.width=h.height=""},beginLayoutCycle:function(a,l){var h,f,c=this,i=a.state,g=a.ownerScrollable,b=c.align,e=a.boxNames,d=c.pack,k=c._centerRe,j=c.overflowHandler,m=a.state.canScroll;j&&j.beginLayoutCycle(a,l),c.callParent(arguments),a.parallelSizeModel=h=a[e.widthModel],a.perpendicularSizeModel=f=a[e.heightModel],a.boxOptions={align:b={stretch:"stretch"===b,stretchmax:"stretchmax"===b,center:k.test(b),bottom:c._endRe.test(b)},pack:d={center:k.test(d),end:"end"===d}},g&&(m||(i.canScroll={parallel:!h.shrinkWrap&&g[e.getX](),perpendicular:!f.shrinkWrap&&g[e.getY]()}),i.actualScroll||(i.actualScroll={parallel:!1,perpendicular:!1})),b.stretch&&f.shrinkWrap&&(b.stretchmax=!0,b.stretch=!1),b.nostretch=!(b.stretch||b.stretchmax),h.shrinkWrap&&(d.center=d.end=!1),c.cacheFlexes(a),c.targetEl.setWidth(2e4)},cacheFlexes:function(a){for(var b,c,l,f,i,j,e,d=a.boxNames,x=d.widthModel,w=d.heightModel,z=a.boxOptions.align.nostretch,s=0,r=a.childItems,v=r.length,h=[],t=0,g=0,o=0,p=d.minWidth,y=d.minHeight,q=this._percentageRe,n=0,m=0;v--;)b=(c=r[v]).target,(j=c[x]).calculated&&(c.flex=l=b.flex,l?(s+=l,h.push(c),t+=b[p]||0):(f=q.exec(b[d.width]),c.percentageParallel=parseFloat(f[1])/100,++n)),o+=j.configured?b[d.width]:b[p]||0,i=c[w],z&&i.calculated&&(f=q.exec(b[d.height]),c.percentagePerpendicular=parseFloat(f[1])/100,++m),g<(e=i.configured?b[d.height]:b[y]||0)&&(g=e);a.flexedItems=h,a.flexedMinWidth=t,a.smallestWidth=o,a.smallestHeight=g,a.totalFlex=s,a.percentageWidths=n,a.percentageHeights=m,Ext.Array.sort(h,this.flexSortFn)},calculate:function(b){var c=this,f=b.boxNames,a=b.state,h=a.actualScroll,g=a.needsScroll,e=a.canScroll,d=a.boxPlan||(a.boxPlan={}),i=c.overflowHandler;if(d.targetSize=c.getContainerSize(b),e&&!g&&(a.needsScroll=g={parallel:e.parallel&&d.targetSize[f.width]<b.smallestWidth,perpendicular:e.perpendicular&&d.targetSize[f.height]<b.smallestHeight}),a.parallelDone||(a.parallelDone=c.calculateParallel(b,f,d)),a.perpendicularDone||(a.perpendicularDone=c.calculatePerpendicular(b,f,d)),a.parallelDone&&a.perpendicularDone){if(e&&!a.scrollPass&&(g.parallel!==h.parallel||g.perpendicular!==h.perpendicular))return b.invalidate({state:{scrollPass:!0,canScroll:e,needsScroll:h}}),void(c.done=!1);c.publishInnerCtSize(b),c.done&&b.boxOptions.align.stretchmax&&!a.stretchMaxDone&&(c.calculateStretchMax(b,f,d),a.stretchMaxDone=!0),i&&i.calculate(b)}else c.done=!1},calculateParallel:function(c,d,p){var b,k,f,t,a,w,l,g,i,r,j,s=c.parallelSizeModel.shrinkWrap,m=d.width,o=c.childItems,z=d.beforeX,B=d.afterX,K=d.setWidth,q=o.length,A=c.flexedItems,H=A.length,F=c.boxOptions.pack,E=this.padding,C=p.targetSize,x=C[m],v=c.state,n=v.needsScroll,D=v.canScroll,u=0,e=E[z],h=e+E[B],y=Ext.getScrollbarSize(),J=y[d.width],I=y[d.height];if(!s&&!C[d.gotWidth])return!1;for(b=0;b<q;++b)if(u+=(k=(a=o[b]).marginInfo||a.getMarginInfo())[m],!a[d.widthModel].calculated&&(h+=i=a.getProp(m),isNaN(h)))return!1;if(h+=u,c.percentageWidths){if(r=x-u,isNaN(r))return!1;for(b=0;b<q;++b)(a=o[b]).percentageParallel&&(i=Math.ceil(r*a.percentageParallel),h+=i=a.setWidth(i))}for(s?(j=0,p.tooNarrow=!1):(j=x-h,n&&n.perpendicular&&(j-=I),p.tooNarrow=j<c.flexedMinWidth,p.tooNarrow&&D&&D.parallel&&(v.actualScroll.parallel=!0)),g=h,f=j,t=c.totalFlex,b=0;b<H;b++)w=(a=A[b]).flex,l=this.roundFlex(w/t*f),g+=l=a[K](l),f=Math.max(0,f-l),t-=w;for(F.center?(e+=f/2)<0&&(e=0):F.end&&(e+=f),b=0;b<q;++b)e+=(k=(a=o[b]).marginInfo)[z],a.setProp(d.x,e),e+=k[B]+a.props[m];return g+=c.targetContext.getPaddingInfo()[m],c.state.contentWidth=g,n&&n.perpendicular&&(s&&(g+=J),c[d.hasOverflowY]=!0,c.target.componentLayout[d.setWidthInDom]=!0,c[d.invalidateScrollY]=Ext.isIE8),c[d.setContentWidth](g),!0},calculatePerpendicular:function(c,d,B){var n,k,g,i,A,f,a,p,t,s,m,l=this,z=c.state,G=z.needsScroll,H=z.canScroll,h=c.perpendicularSizeModel.shrinkWrap,v=B.targetSize,u=c.childItems,E=u.length,o=Math.max,e=d.height,N=d.setHeight,F=d.beforeY,M=d.y,J=l.padding,C=J[F],j=v[e]-C-J[d.afterY],r=c.boxOptions.align,w=r.stretch,O=r.stretchmax,y=r.center,x=r.bottom,I=l.constrainAlign,b=0,D=0,K=l.onBeforeConstrainInvalidateChild,L=l.onAfterConstrainInvalidateChild,q=Ext.getScrollbarSize().height;if(!h&&!v[d.gotHeight])return!1;if((w||(y||x)&&!h)&&isNaN(j))return!1;if(G&&G.parallel&&(h?s=!0:(j-=q,B.targetSize[e]-=q)),w)b=o(f=j,c.smallestHeight);else for(k=0;k<E;k++){if(i=((a=u[k]).marginInfo||a.getMarginInfo())[e],m=a.percentagePerpendicular){if(++D,h)continue;g=m*j-i,g=a[d.setHeight](g)}else g=a.getProp(e);if(!h&&I&&a[d.heightModel].shrinkWrap&&j<g&&(a.invalidate({before:K,after:L,layout:l,childHeight:j,names:d}),c.state.parallelDone=!1),isNaN(b=o(b,g+i,a.target[d.minHeight]||0)))return!1}if(s&&(b+=q,c[d.hasOverflowX]=!0,c.target.componentLayout[d.setHeightInDom]=!0,c[d.invalidateScrollX]=Ext.isIE8),(p=c.stretchMaxPartner)&&(c.setProp("maxChildHeight",b),(t=p.childItems)&&t.length&&(b=o(b,p.getProp("maxChildHeight")),isNaN(b))))return!1;for(c[d.setContentHeight](b+l.padding[e]+c.targetContext.getPaddingInfo()[e]),s&&(b-=q),b>v[e]&&H&&H.perpendicular&&(z.actualScroll.perpendicular=!0),B.maxSize=b,O?f=b:(y||x||D)&&(f=I?h?b:j:h?b:o(j,b),f-=c.innerCtContext.getBorderInfo()[e]),k=0;k<E;k++)n=C+(i=(a=u[k]).marginInfo||a.getMarginInfo())[F],w?a[N](f-i[e]):(m=a.percentagePerpendicular,h&&m&&(g=m*f-(i=a.marginInfo||a.getMarginInfo())[e],g=a.setHeight(g)),y?0<(A=f-a.props[e])&&(n=C+Math[l.alignRoundingMethod](A/2)):x&&(n=o(0,f-n-a.props[e]))),a.setProp(M,n);return!0},onBeforeConstrainInvalidateChild:function(b,c){var a=c.names.heightModel;b[a].constrainedMin||(b[a]=Ext.layout.SizeModel.calculated)},onAfterConstrainInvalidateChild:function(a,c){var b=c.names;a.setProp(b.beforeY,0),a[b.heightModel].calculated&&a[b.setHeight](c.childHeight)},calculateStretchMax:function(k,c,o){var a,b,d,e,f=this,h=c.height,l=c.width,g=k.childItems,n=g.length,m=o.maxSize,i=f.onBeforeStretchMaxInvalidateChild,j=f.onAfterStretchMaxInvalidateChild;for(d=0;d<n;++d)b=(a=g[d]).props,(e=m-a.getMarginInfo()[h])===b[h]&&!a[c.heightModel].constrained||a.invalidate({before:i,after:j,layout:f,childWidth:b[l],childHeight:e,childX:b.x,childY:b.y,names:c})},onBeforeStretchMaxInvalidateChild:function(b,c){var a=c.names.heightModel;b[a].constrainedMax||(b[a]=Ext.layout.SizeModel.calculated)},onAfterStretchMaxInvalidateChild:function(a,b){var c=b.names,d=b.childHeight,e=b.childWidth;a.setProp("x",b.childX),a.setProp("y",b.childY),a[c.heightModel].calculated&&a[c.setHeight](d),a[c.widthModel].calculated&&a[c.setWidth](e)},completeLayout:function(d){var i,g,e,f,a,b=d.invalidateScrollX,c=d.invalidateScrollY,j=this.overflowHandler,h=d.scrollRestore;j&&j.completeLayout(d),(b||c)&&(a=(i=(g=this.getTarget()).dom).style,b&&("auto"===(e=g.getStyle("overflowX"))?(e=a.overflowX,a.overflowX="scroll"):b=!1),c&&("auto"===(f=g.getStyle("overflowY"))?(f=a.overflowY,a.overflowY="scroll"):c=!1),(b||c)&&(i.scrollWidth,b&&(a.overflowX=e),c&&(a.overflowY=f))),h&&d.ownerScrollable.scrollTo(h.x,h.y)},finishedLayout:function(b){var a=this.overflowHandler;a&&a.finishedLayout(b),this.callParent(arguments)},getLayoutItems:function(){var e,c,g,f,b,d,a,h=this.callParent(),i=h.length;for(g=0;g<i;++g)(f=h[g]).isSplitter||(a=f.splitter,f.hidden?a&&(a.hidden||(a.hidden=!0,a.el&&a.el.hide())):(d=!!a&&"next"===a.collapseTarget,c=null,e&&b?(b.hidden&&(b.hidden=!1,b.el&&b.el.show()),d&&(c=!0)):d&&(c=!e),null!==c&&a.hidden!==c&&(a.hidden=c,a.el&&a.el.setVisible(!c)),b=!d&&a,e=f));return e&&b&&!b.hidden&&(b.hidden=!0,b.el&&b.el.hide()),h},getScrollerEl:function(){return this.innerCt},insertSplitter:function(c,e,d,a){var b={xtype:"splitter",id:c.id+"-splitter",hidden:d,splitterFor:c,synthetic:!0},f=e+("prev"===a.collapseTarget?1:0);b[this.names.height]="100%",a&&Ext.apply(b,a),c.splitter=this.owner.add(f,b)},publishInnerCtSize:function(a,f){f=f||0;var c,b,h=this,g=a.state,d=a.boxNames,m=d.height,j=d.width,k=a.boxOptions.align,o=h.padding,e=g.boxPlan,n=e.targetSize,p=e.maxSize,l=g.needsScroll,i=a.innerCtContext;a.parallelSizeModel.shrinkWrap||e.tooNarrow&&g.canScroll?c=g.contentWidth-a.targetContext.getPaddingInfo()[j]:(c=n[j],l&&l.perpendicular&&(c-=Ext.getScrollbarSize()[j])),c-=f,h.owner.tooNarrow=e.tooNarrow,k.stretch?b=p:(b=e.maxSize+o[d.beforeY]+o[d.afterY]+i.getBorderInfo()[m],a.perpendicularSizeModel.shrinkWrap||!k.center&&!k.bottom||(b=Math.max(n[m],b))),i[d.setWidth](c),i[d.setHeight](b),a.targetElContext.setWidth(a.innerCtContext.props.width-(!h.vertical&&f||0)),isNaN(c+b)&&(h.done=!1)},onAdd:function(b,d){var c=this,a=c.enableSplitters&&b.split&&!b.isButton;c.callParent(arguments),a&&(a=!0===a?{collapseTarget:"next"}:Ext.isString(a)?{collapseTarget:"before"===a?"next":"prev"}:Ext.apply({collapseTarget:"before"===a.side?"next":"prev"},a),c.insertSplitter(b,d,!!b.hidden,a))},onRemove:function(a,h){var b,c=this,g=c.names,e=c.owner,d=a.splitter,f=c.overflowHandler;c.callParent(arguments),d&&e.contains(d)&&(e.doRemove(d,!0),a.splitter=null),f&&f.onRemove(a),a.layoutMarginCap===c.id&&delete a.layoutMarginCap,e.destroying||h||!a.rendered||(b=a.getEl())&&(b.setStyle(g.beforeY,""),b.setStyle(g.beforeX,""),b.setStyle("margin",""))},applyOverflowHandler:function(a,b){return"string"==typeof a&&(a={type:a}),a.type,b&&b.type===a.type?(delete a.type,b.setConfig(a),b):(a.layout=this,Ext.Factory.boxOverflow(a))},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var a=this;Ext.destroy(a.innerCt,a.overflowHandler),a.flexSortFn=a.innerCt=null,a.callParent()},getRenderData:function(){var a=this.callParent();return a.targetElCls=this.targetElCls,a},updateVertical:function(c){var a=this,b=a.overflowHandler,d=a.owner,e=a._props;Ext.apply(a,c?e.vbox:e.hbox),b&&d&&d.rendered&&b.setVertical(c)},_props:{hbox:{direction:"horizontal",oppositeDirection:"vertical",horizontal:!0,vertical:!1,names:{beforeX:"left",beforeScrollX:"left",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",getX:"getX",setX:"setX",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",getY:"getY",setY:"setY",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},vbox:{direction:"vertical",oppositeDirection:"horizontal",horizontal:!1,vertical:!0,names:{beforeX:"top",beforeScrollX:"top",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",getX:"getY",setX:"setY",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",getY:"getX",setY:"setX",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}}),Ext.define("Ext.layout.container.HBox",{extend:Ext.layout.container.Box,alias:"layout.hbox",alternateClassName:"Ext.layout.HBoxLayout",type:"hbox",vertical:!1}),Ext.define("Ext.layout.container.VBox",{extend:Ext.layout.container.Box,alias:"layout.vbox",alternateClassName:"Ext.layout.VBoxLayout",type:"vbox",vertical:!0}),Ext.define("Ext.toolbar.Toolbar",{extend:Ext.container.Container,alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",mixins:[Ext.util.FocusableContainer],isToolbar:!0,baseCls:Ext.baseCSSPrefix+"toolbar",ariaRole:"toolbar",defaultType:"button",layout:void 0,vertical:void 0,enableOverflow:!1,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:!0,itemCls:Ext.baseCSSPrefix+"toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var a=this,b=a.layout,c=a.vertical;void 0===c&&(a.vertical=c="right"===a.dock||"left"===a.dock),a.layout=b=Ext.applyIf(Ext.isString(b)?{type:b}:b||{},{type:c?"vbox":"hbox",align:c?"stretchmax":"middle"}),a.overflowHandler?b.overflowHandler=a.overflowHandler:a.enableOverflow&&(b.overflowHandler="menu"),c&&a.addClsWithUI("vertical"),"footer"===a.ui&&(a.ignoreBorderManagement=!0),a.callParent()},getRefItems:function(d){var a,b=this,c=b.callParent(arguments),e=b.layout;return d&&(b.enableOverflow||"menu"===b.overflowHandler)&&(a=e.overflowHandler)&&a.menu&&(c=c.concat(a.menu.getRefItems(d))),c},lookupComponent:function(a){var b,c,d=arguments;return"string"==typeof a&&(a="string"==typeof(b=(c=Ext.toolbar.Toolbar).shortcutsHV[this.vertical?1:0][a]||c.shortcuts[a])?{xtype:b}:b?Ext.apply({},b):{xtype:"tbtext",text:a},this.applyDefaults(a),d=[a]),this.callParent(d)},onBeforeAdd:function(a){var b=this,d="footer"===b.ui,c=d?b.defaultFooterButtonUI:b.defaultButtonUI;a.isSegmentedButton?"default"!==a.getDefaultUI()||a.config.hasOwnProperty("defaultUI")||a.setDefaultUI(c):"default"!==a.ui||a.hasOwnProperty("ui")||(a.isButton?a.ui=c:a.isFormField&&(a.ui=d?b.defaultFooterFieldUI:b.defaultFieldUI)),a instanceof Ext.toolbar.Separator&&a.setUI(b.vertical?"vertical":"horizontal"),b.callParent(arguments)},onAdd:function(a){a.needArrowKeys&&this.enableFocusableContainer&&(this.enableFocusableContainer=!1),this.callParent(arguments),this.trackMenu(a)},onRemove:function(a){this.callParent(arguments),this.trackMenu(a,!0)},privates:{applyDefaults:function(a){return Ext.isString(a)||(a=this.callParent(arguments)),a},trackMenu:function(b,c){var a=this;a.trackMenus&&b.menu&&b[c?"un":"on"]({mouseover:a.onButtonOver,menushow:a.onButtonMenuShow,menuhide:a.onButtonMenuHide,scope:a})},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(a,c){var b=this.activeMenuBtn;b&&b!==a&&(b.hideMenu(),a.focus(),a.showMenu(c),this.activeMenuBtn=a)},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){this.activeMenuBtn=null}}}),Ext.define("Ext.dd.DragDrop",{constructor:function(a,c,b){a&&this.init(a,c,b)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,triggerEvent:"mousedown",b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(b,a){},b4DragOver:function(a){},onDragOver:function(b,a){},b4DragOut:function(a){},onDragOut:function(b,a){},b4DragDrop:function(a){},onDragDrop:function(b,a){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(j,a,k){Ext.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a}),a=a||this.defaultPadding;var b,h,g,f,c=Ext.get(this.getEl()).getBox(),e=Ext.get(j),i=e.getScroll(),d=e.dom;b=d===document.body?{x:i.left,y:i.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}:{x:(h=e.getXY())[0],y:h[1],width:d.clientWidth,height:d.clientHeight},g=c.y-b.y,f=c.x-b.x,this.resetConstraints(),this.setXConstraint(f-(a.left||0),b.width-f-c.width-(a.right||0),this.xTickSize),this.setYConstraint(g-(a.top||0),b.height-g-c.height-(a.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(b,d,c){var a=this;a.el=a.el||Ext.get(b),a.initTarget(b,d,c),Ext.get(a.id).on(a.triggerEvent,a.handleMouseDown,a)},initTarget:function(a,b,c){this.config=c||{},this.DDMInstance=Ext.dd.DragDropManager,this.groups={},"string"!=typeof a&&(a=Ext.id(a)),this.id=a,this.addToGroup(b||"default"),this.handleElId=a,this.setDragElId(a),this.invalidHandleTypes={A:"A"},this.invalidHandleIds={},this.invalidHandleClasses=[],this.applyConfig(),this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0],this.isTarget=!1!==this.config.isTarget,this.maintainOffset=this.config.maintainOffset,this.primaryButtonOnly=!1!==this.config.primaryButtonOnly},handleOnAvailable:function(){this.available=!0,this.resetConstraints(),this.onAvailable()},setPadding:function(a,b,c,d){this.padding=b||0===b?c||0===c?[a,b,c,d]:[a,b,a,b]:[a,a,a,a]},setInitPosition:function(e,f){var b,c,a,d=this.getEl();this.DDMInstance.verifyEl(d)&&(b=e||0,c=f||0,a=Ext.fly(d).getXY(),this.initPageX=a[0]-b,this.initPageY=a[1]-c,this.lastPageX=a[0],this.lastPageY=a[1],this.setStartPosition(a))},setStartPosition:function(b){var a=b||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null,this.startPageX=a[0],this.startPageY=a[1]},addToGroup:function(a){this.groups[a]=!0,this.DDMInstance.regDragDrop(this,a)},removeFromGroup:function(a){this.groups[a]&&delete this.groups[a],this.DDMInstance.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){"string"!=typeof a&&(a=Ext.id(a)),this.handleElId=a,this.DDMInstance.regHandle(this.id,a)},setOuterHandleElId:function(a){"string"!=typeof a&&(a=Ext.id(a)),Ext.get(a).on(this.triggerEvent,this.handleMouseDown,this),this.setHandleElId(a),this.hasOuterHandles=!0},unreg:function(){var b,a=this;a._domRef&&(b=Ext.fly(a.id))&&b.un(a.triggerEvent,a.handleMouseDown,a),a._domRef=null,a.DDMInstance._remove(a,a.autoGroup)},destroy:function(){this.unreg(),this.callParent()},isLocked:function(){return this.DDMInstance.isLocked()||this.locked},handleMouseDown:function(b,c){var a=this;a.primaryButtonOnly&&b.button||a.isLocked()||(a.DDMInstance.refreshCache(a.groups),(a.hasOuterHandles||a.DDMInstance.isOverTarget(b.getPoint(),a))&&a.clickValidator(b)&&(a.setStartPosition(),a.b4MouseDown(b),a.onMouseDown(b),a.DDMInstance.handleMouseDown(b,a),a.DDMInstance.stopEvent(b)))},clickValidator:function(b){var a=b.getTarget();return this.isValidHandleChild(a)&&(this.id===this.handleElId||this.DDMInstance.handleWasClicked(a,this.id))},addInvalidHandleType:function(b){var a=b.toUpperCase();this.invalidHandleTypes[a]=a},addInvalidHandleId:function(a){"string"!=typeof a&&(a=Ext.id(a)),this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){"string"!=typeof a&&(a=Ext.id(a)),delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(c){var a,b=this.invalidHandleClasses,d=b.length;for(a=0;a<d;++a)b[a]===c&&delete b[a]},isValidHandleChild:function(b){var d,c,e,a=!0;try{d=b.nodeName.toUpperCase()}catch(f){d=b.nodeName}for(a=(a=a&&!this.invalidHandleTypes[d])&&!this.invalidHandleIds[b.id],c=0,e=this.invalidHandleClasses.length;a&&c<e;++c)a=!Ext.fly(b).hasCls(this.invalidHandleClasses[c]);return a},setXTicks:function(d,c){this.xTicks=[],this.xTickSize=c;var a,b={};for(a=this.initPageX;a>=this.minX;a-=c)b[a]||(b[this.xTicks[this.xTicks.length]=a]=!0);for(a=this.initPageX;a<=this.maxX;a+=c)b[a]||(b[this.xTicks[this.xTicks.length]=a]=!0);Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(d,c){this.yTicks=[],this.yTickSize=c;var a,b={};for(a=this.initPageY;a>=this.minY;a-=c)b[a]||(b[this.yTicks[this.yTicks.length]=a]=!0);for(a=this.initPageY;a<=this.maxY;a+=c)b[a]||(b[this.yTicks[this.yTicks.length]=a]=!0);Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(c,b,a){this.leftConstraint=c,this.rightConstraint=b,this.minX=this.initPageX-c,this.maxX=this.initPageX+b,a&&this.setXTicks(this.initPageX,a),this.constrainX=!0},clearConstraints:function(){this.constrainX=!1,this.constrainY=!1,this.clearTicks()},clearTicks:function(){this.xTicks=null,this.yTicks=null,this.xTickSize=0,this.yTickSize=0},setYConstraint:function(c,b,a){this.topConstraint=c,this.bottomConstraint=b,this.minY=this.initPageY-c,this.maxY=this.initPageY+b,a&&this.setYTicks(this.initPageY,a),this.constrainY=!0},resetConstraints:function(){if(this.initPageX||0===this.initPageX){var a=this.maintainOffset?this.lastPageX-this.initPageX:0,b=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(a,b)}else this.setInitPosition();this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize),this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(d,a){if(a){if(a[0]>=d)return a[0];var b,g,c;for(b=0,g=a.length;b<g;++b)if(a[c=b+1]&&a[c]>=d)return d-a[b]<a[c]-d?a[b]:a[c];return a[a.length-1]}return d},toString:function(){return"DragDrop "+this.id}}),Ext.define("Ext.dd.DD",{extend:Ext.dd.DragDrop,constructor:function(a,c,b){a&&this.init(a,c,b)},scroll:!0,autoOffset:function(a,b){var c=a-this.startPageX,d=b-this.startPageY;this.setDelta(c,d)},setDelta:function(a,b){this.deltaX=a,this.deltaY=b},setDragElPos:function(a,b){var c=this.getDragEl();this.alignElWithMouse(c,a,b)},alignElWithMouse:function(d,j,k){var b,g,f,h,a=this.getTargetCoord(j,k),c=d.dom?d:Ext.fly(d,"_dd"),e=c.getSize(),i=Ext.Element;return this.deltaSetXY?(b=this.cachedViewportSize,this.setLocalXY(c,Math.max(0,Math.min(a.x+this.deltaSetXY[0],b.width-e.width)),Math.max(0,Math.min(a.y+this.deltaSetXY[1],b.height-e.height)))):(b=this.cachedViewportSize={width:i.getDocumentWidth(),height:i.getDocumentHeight()},g=[Math.max(0,Math.min(a.x,b.width-e.width)),Math.max(0,Math.min(a.y,b.height-e.height))],c.setXY(g),f=this.getLocalX(c),h=c.getLocalY(),this.deltaSetXY=[f-a.x,h-a.y]),this.cachePosition(a.x,a.y),this.autoScroll(a.x,a.y,d.offsetHeight,d.offsetWidth),a},cachePosition:function(b,c){if(b)this.lastPageX=b,this.lastPageY=c;else{var a=Ext.fly(this.getEl()).getXY();this.lastPageX=a[0],this.lastPageY=a[1]}},autoScroll:function(e,f,m,n){if(this.scroll){var g=Ext.Element.getViewportHeight(),h=Ext.Element.getViewportWidth(),b=this.DDMInstance.getScrollTop(),a=this.DDMInstance.getScrollLeft(),l=m+f,j=n+e,k=g+b-f-this.deltaY,i=h+a-e-this.deltaX,c=document.all?80:30;g<l&&k<40&&window.scrollTo(a,b+c),f<b&&0<b&&f-b<40&&window.scrollTo(a,b-c),h<j&&i<40&&window.scrollTo(a+c,b),e<a&&0<a&&e-a<40&&window.scrollTo(a-c,b)}},getTargetCoord:function(c,d){var a=c-this.deltaX,b=d-this.deltaY;return this.constrainX&&(a<this.minX&&(a=this.minX),a>this.maxX&&(a=this.maxX)),this.constrainY&&(b<this.minY&&(b=this.minY),b>this.maxY&&(b=this.maxY)),{x:a=this.getTick(a,this.xTicks),y:b=this.getTick(b,this.yTicks)}},applyConfig:function(){this.callParent(),this.scroll=!1!==this.config.scroll},b4MouseDown:function(b){var a=b.getXY();this.autoOffset(a[0],a[1])},b4Drag:function(b){var a=b.getXY();this.setDragElPos(a[0],a[1])},toString:function(){return"DD "+this.id},getLocalX:function(a){return a.getLocalX()},setLocalXY:function(a,b,c){a.setLocalXY(b,c)}}),Ext.define("Ext.dd.DDProxy",{extend:Ext.dd.DD,statics:{dragElId:"ygddfdiv"},constructor:function(a,c,b){a&&(this.init(a,c,b),this.initFrame())},resizeFrame:!0,centerFrame:!1,createFrame:function(){var a,b,d=this,c=document.body;c&&c.firstChild?(a=this.getDragEl())||((a=document.createElement("div")).id=this.dragElId,a.setAttribute("role","presentation"),(b=a.style).position="absolute",b.visibility="hidden",b.cursor="move",b.border="2px solid #aaa",b.zIndex=999,c.insertBefore(a,c.firstChild)):Ext.defer(function(){d.createFrame()},50)},initFrame:function(){this.createFrame()},applyConfig:function(){this.callParent(),this.resizeFrame=!1!==this.config.resizeFrame,this.centerFrame=this.config.centerFrame,this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(d,e){var a=this,b=a.getDragEl(),c=b.style;a._resizeProxy(),a.centerFrame&&a.setDelta(Math.round(parseInt(c.width,10)/2),Math.round(parseInt(c.height,10)/2)),a.setDragElPos(d,e),Ext.fly(b).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(d){var a=d.getXY(),b=a[0],c=a[1];this.autoOffset(b,c),this.setDragElPos(b,c)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(c){var b=this.getEl(),a=this.getDragEl();a.style.visibility="",this.beforeMove(),b.style.visibility="hidden",Ext.dd.DDM.moveToEl(b,a),a.style.visibility="hidden",b.style.visibility="",this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}}),Ext.define("Ext.dd.StatusProxy",{extend:Ext.Component,animRepair:!1,childEls:["ghost"],renderTpl:['<div class="'+Ext.baseCSSPrefix+'dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="'+Ext.baseCSSPrefix+'dd-drag-ghost" role="presentation"></div>'],repairCls:Ext.baseCSSPrefix+"dd-drag-repair",ariaRole:"presentation",skipLayout:!0,constructor:function(a){var b=this;a=a||{},Ext.apply(b,{hideMode:"visibility",hidden:!0,floating:!0,id:b.id||Ext.id(),cls:Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed,shadow:a.shadow||!1,renderTo:Ext.getDetachedBody()}),b.callParent(arguments),this.dropStatus=this.dropNotAllowed},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed,this.dropStatus!==a&&(this.el.replaceCls(this.dropStatus,a),this.dropStatus=a)},reset:function(c){var a=this,b=Ext.baseCSSPrefix+"dd-drag-proxy ";a.el.replaceCls(b+a.dropAllowed,b+a.dropNotAllowed),a.dropStatus=a.dropNotAllowed,c&&a.ghost.setHtml("")},update:function(a){"string"==typeof a?this.ghost.setHtml(a):(this.ghost.setHtml(""),a.style.margin="0",this.ghost.dom.appendChild(a));var b=this.ghost.dom.firstChild;b&&Ext.fly(b).setStyle("float","none")},getGhost:function(){return this.ghost},hide:function(a){this.callParent(),a&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},sync:function(){this.el.syncUnderlays()},repair:function(b,c,d){var a=this;a.callback=c,a.scope=d,b&&!1!==a.animRepair?(a.el.addCls(a.repairCls),a.el.setUnderlaysVisible(!1),a.anim=a.el.animate({duration:a.repairDuration||500,easing:"ease-out",to:{x:b[0],y:b[1]},stopAnimation:!0,callback:a.afterRepair,scope:a})):a.afterRepair()},afterRepair:function(){var a=this;a.hide(!0),a.el.removeCls(a.repairCls),"function"==typeof a.callback&&a.callback.call(a.scope||a),delete a.callback,delete a.scope}}),Ext.define("Ext.dd.DragSource",{extend:Ext.dd.DDProxy,dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",animRepair:!0,repairHighlightColor:"c3daf9",constructor:function(b,a){this.el=Ext.get(b),this.dragData||(this.dragData={}),Ext.apply(this,a),this.proxy||(this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})),this.callParent([this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:!0===this.scroll}]),this.dragging=!1},getDragData:function(a){return this.dragData},onDragEnter:function(c,b){var d,a=Ext.dd.DragDropManager.getDDById(b);this.cachedTarget=a,!1!==this.beforeDragEnter(a,c,b)&&(a.isNotifyTarget?(d=a.notifyEnter(this,c,this.dragData),this.proxy.setStatus(d)):this.proxy.setStatus(this.dropAllowed),this.afterDragEnter&&this.afterDragEnter(a,c,b))},beforeDragEnter:function(a,c,b){return!0},onDragOver:function(c,b){var d,a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b);!1!==this.beforeDragOver(a,c,b)&&(a.isNotifyTarget&&(d=a.notifyOver(this,c,this.dragData),this.proxy.setStatus(d)),this.afterDragOver&&this.afterDragOver(a,c,b))},beforeDragOver:function(a,c,b){return!0},onDragOut:function(c,b){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b);!1!==this.beforeDragOut(a,c,b)&&(a.isNotifyTarget&&a.notifyOut(this,c,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(a,c,b)),this.cachedTarget=null},beforeDragOut:function(a,c,b){return!0},onDragDrop:function(c,b){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b);!1!==this.beforeDragDrop(a,c,b)&&(!a.isNotifyTarget||!1!==a.notifyDrop(this,c,this.dragData)?this.onValidDrop(a,c,b):this.onInvalidDrop(a,c,b),this.afterDragDrop&&this.afterDragDrop(a,c,b)),delete this.cachedTarget},beforeDragDrop:function(a,c,b){return!0},onValidDrop:function(a,c,b){this.hideProxy(),this.afterValidDrop&&this.afterValidDrop(a,c,b)},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(c,b,d){var a=this;b||(b=c,c=null,d=b.getTarget().id),!1!==a.beforeInvalidDrop(c,b,d)&&(a.cachedTarget&&(a.cachedTarget.isNotifyTarget&&a.cachedTarget.notifyOut(a,b,a.dragData),a.cacheTarget=null),a.proxy.repair(a.getRepairXY(b,a.dragData),a.afterRepair,a),a.afterInvalidDrop&&a.afterInvalidDrop(b,d))},afterRepair:function(){var a=this;Ext.enableFx&&a.el.highlight(a.repairHighlightColor),a.dragging=!1},beforeInvalidDrop:function(a,c,b){return!0},handleMouseDown:function(b){if(!this.dragging){var a=this.getDragData(b);a&&!1!==this.onBeforeDrag(a,b)&&(this.dragData=a,this.proxy.stop(),this.callParent(arguments))}},onBeforeDrag:function(a,b){return!0},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){return this.proxy.ensureAttachedToBody(!0),this.callParent(arguments)},startDrag:function(a,b){this.proxy.reset(),this.proxy.hidden=!1,this.dragging=!0,this.proxy.update(""),this.onInitDrag(a,b),this.proxy.show()},onInitDrag:function(b,c){var a=this.el.dom.cloneNode(!0);return a.id=Ext.id(),this.proxy.update(a),this.onStartDrag(b,c),!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide(),this.proxy.reset(!0),this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){this.callParent(),Ext.destroy(this.proxy)}}),Ext.define("Ext.panel.Proxy",{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:!0,constructor:function(c,b){var a=this;a.panel=c,a.id=a.panel.id+"-ddproxy",Ext.apply(a,b)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var a=this;a.ghost&&(a.proxy&&(a.proxy.destroy(),delete a.proxy),a.panel.unghost(null,a.moveOnDrag),delete a.ghost)},show:function(){var b,a=this;a.ghost||(b=a.panel.getSize(),a.panel.el.setVisibilityMode(Ext.Element.DISPLAY),a.ghost=a.panel.ghost(),a.insertProxy&&(a.proxy=a.panel.el.insertSibling({role:"presentation",cls:Ext.baseCSSPrefix+"panel-dd-spacer"}),a.proxy.setSize(b)))},repair:function(c,a,b){this.hide(),Ext.callback(a,b||this)},moveProxy:function(a,b){this.proxy&&a.insertBefore(this.proxy.dom,b)}}),Ext.define("Ext.panel.DD",{extend:Ext.dd.DragSource,constructor:function(b,c){var a=this;a.panel=b,a.dragData={panel:b},a.panelProxy=new Ext.panel.Proxy(b,c),a.proxy=a.panelProxy.proxy,a.callParent([b.el,c]),a.setupEl(b)},setupEl:function(c){var a=this,b=c.header,d=c.body;b&&(a.setHandleElId(b.id),d=b.el),d?(d.setStyle("cursor","move"),a.scroll=!1):c.on("boxready",a.setupEl,a,{single:!0})},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.panelProxy.show()},b4MouseDown:function(b){var a=b.getXY(),c=a[0],d=a[1];this.autoOffset(c,d)},onInitDrag:function(a,b){return this.onStartDrag(a,b),!0},createFrame:Ext.emptyFn,getDragEl:function(b){var a=this.panelProxy.ghost;if(a)return a.el.dom},endDrag:function(a){this.panelProxy.hide(),this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX,b-=this.startPageY,this.setDelta(a,b)},onInvalidDrop:function(d,b,c){var a=this;!1!==a.beforeInvalidDrop(d,b,c)&&(a.cachedTarget&&(a.cachedTarget.isNotifyTarget&&a.cachedTarget.notifyOut(a,b,a.dragData),a.cacheTarget=null),a.afterInvalidDrop&&a.afterInvalidDrop(b,c))}}),Ext.define("Ext.layout.component.Dock",{extend:Ext.layout.component.Component,alias:"layout.dock",alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:!0,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:!1,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:!0,x:!0},verticalCollapsePolicy:{height:!0,y:!0},finishRender:function(){var b,c,a=this;a.callParent(),b=a.getRenderTarget(),c=a.getDockedItems(),a.finishRenderItems(b,c)},isItemBoxParent:function(a){return!0},isItemShrinkWrap:function(a){return!0},noBorderClasses:[Ext.baseCSSPrefix+"docked-noborder-top",Ext.baseCSSPrefix+"docked-noborder-right",Ext.baseCSSPrefix+"docked-noborder-bottom",Ext.baseCSSPrefix+"docked-noborder-left"],noBorderClassesSides:{top:Ext.baseCSSPrefix+"docked-noborder-top",right:Ext.baseCSSPrefix+"docked-noborder-right",bottom:Ext.baseCSSPrefix+"docked-noborder-bottom",left:Ext.baseCSSPrefix+"docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},_itemCls:Ext.baseCSSPrefix+"docked",handleItemBorders:function(){var a,l,f,h,d,g,e,c=this,b=c.owner,k=c.lastDockedItems,j=c.borders,m=b.dockedItems.generation,i=c.noBorderClassesSides,n=c.borderWidthProps,o=c.collapsed;if(!(c.initializedBorders===m||b.border&&!b.manageBodyBorders||b.collapsed&&"mini"===b.collapseMode)){for(c.initializedBorders=m,c.collapsed=!1,c.lastDockedItems=l=c.getLayoutItems(),c.collapsed=o,a={top:[],right:[],bottom:[],left:[]},f=0,h=l.length;f<h;f++)g=(d=l[f]).dock,d.ignoreBorderManagement||(a[g].satisfied||(a[g].push(d),a[g].satisfied=!0),a.top.satisfied||"bottom"===g||a.top.push(d),a.right.satisfied||"left"===g||a.right.push(d),a.bottom.satisfied||"top"===g||a.bottom.push(d),a.left.satisfied||"right"===g||a.left.push(d));if(k)for(f=0,h=k.length;f<h;f++)(d=k[f]).destroyed||d.ignoreBorderManagement||b.manageBodyBorders||d.removeCls(c.noBorderClasses);if(j)for(e in j)b.manageBodyBorders&&j[e].satisfied&&b.setBodyStyle(n[e],"");for(e in a)if(h=a[e].length,b.manageBodyBorders)a[e].satisfied&&b.setBodyStyle(n[e],"1px");else{for(f=0;f<h;f++)a[e][f].addCls(i[e]);!a[e].satisfied&&!b.bodyBorder||!1===b.bodyBorder?b.addBodyCls(i[e]):b.removeBodyCls(i[e])}c.borders=a}},beforeLayoutCycle:function(a){var c,d,e=this.owner,f=this.sizeModels.shrinkWrap,b=e.shrinkWrapDock;e.collapsed&&(e.collapsedVertical()?(d=!0,a.measureDimensions=1):(c=!0,a.measureDimensions=2)),a.collapsedVert=d,a.collapsedHorz=c,d?a.heightModel=f:c&&(a.widthModel=f),b=!0===b?3:b||0,a.shrinkWrapDockHeight=1&b&&a.heightModel.shrinkWrap,a.shrinkWrapDockWidth=2&b&&a.widthModel.shrinkWrap},beginLayout:function(a){var k,g,f,d,b,h,i,c=this,e=c.owner,l=c.getLayoutItems(),n=a.context,m=l.length,j=c.lastCollapsedState;for(c.callParent(arguments),(h=e.getCollapsed())!==j&&void 0!==j&&(c.owner.collapsed?(a.isCollapsingOrExpanding=1,e.addClsWithUI(e.collapsedCls)):(a.isCollapsingOrExpanding=2,e.removeClsWithUI(e.collapsedCls),a.lastCollapsedState=c.lastCollapsedState)),c.lastCollapsedState=h,a.dockedItems=k=[],g=0;g<m;g++)(f=l[g]).rendered&&(i=f.dock,(d=n.getCmp(f)).dockedAt={x:0,y:0},d.offsets=b=Ext.Element.parseBox(f.offsets||0),d.horizontal="top"===i||"bottom"===i,b.width=b.left+b.right,b.height=b.top+b.bottom,k.push(d));a.bodyContext=a.getEl("body")},beginLayoutCycle:function(a){var e,g,f,b=this,i=a.dockedItems,j=i.length,c=b.owner,d=c.frameBody,h=b.lastHeightModel;for(b.callParent(arguments),b.owner.manageHeight?b.lastBodyDisplay&&(c.body.dom.style.display=b.lastBodyDisplay=""):("inline-block"!==b.lastBodyDisplay&&(c.body.dom.style.display=b.lastBodyDisplay="inline-block"),h&&h.shrinkWrap&&!a.heightModel.shrinkWrap&&(c.body.dom.style.marginBottom="")),a.widthModel.auto&&(a.widthModel.shrinkWrap&&c.el.setWidth(null),c.body.setWidth(null),d&&d.setWidth(null)),a.heightModel.auto&&(c.body.setHeight(null),d&&d.setHeight(null)),a.collapsedVert?a.setContentHeight(0):a.collapsedHorz&&a.setContentWidth(0),e=0;e<j;e++)if("right"===(f=(g=i[e].target).dock))g.setLocalX(0);else if("left"!==f)continue},calculate:function(a){var k,c,d,i,h,b=this,l=b.measureAutoDimensions(a,a.measureDimensions),j=a.state,e=j.horzDone,f=j.vertDone,g=a.bodyContext;for(a.borderInfo||a.getBorderInfo(),a.paddingInfo||a.getPaddingInfo(),a.frameInfo||a.getFrameInfo(),g.borderInfo||g.getBorderInfo(),g.paddingInfo||g.getPaddingInfo(),a.frameBorder||((k=a.framing)?(a.frameBorder=k.border,a.framePadding=k.padding):(a.frameBorder=a.borderInfo,a.framePadding=a.paddingInfo)),c=!e&&b.createAxis(a,l.contentWidth,a.widthModel,b.horzAxisProps,a.collapsedHorz),d=!f&&b.createAxis(a,l.contentHeight,a.heightModel,b.vertAxisProps,a.collapsedVert),i=0,h=a.dockedItems.length;h--;++i)c&&b.dockChild(a,c,h,i),d&&b.dockChild(a,d,h,i);c&&b.finishAxis(a,c)&&(j.horzDone=e=c),d&&b.finishAxis(a,d)&&(j.vertDone=f=d),e&&f&&b.finishConstraints(a,e,f)?b.finishPositions(a,e,f):b.done=!1},createAxis:function(b,s,d,a,k){var i,j,c,e=0,q=this.owner,n=q[a.maxSize],o=q[a.minSize]||0,f=a.dockBegin,h=a.dockEnd,p=a.pos,g=a.size,m=null!=n;return c=d.shrinkWrap?k?0:s+b.bodyContext.borderInfo[g]:(i=b.frameBorder,j=b.framePadding,e=i[f]+j[f],b.getProp(g)-(i[h]+j[h])),{shrinkWrap:d.shrinkWrap,sizeModel:d,initialBegin:e,begin:e,end:c,collapsed:k,horizontal:a.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:c-e,maxChildSize:0,hasMinMaxConstraints:(o||m)&&d.shrinkWrap,minSize:o,maxSize:m?n:1e9,bodyPosProp:this.owner.manageHeight?p:a.marginBegin,dockBegin:f,dockEnd:h,posProp:p,sizeProp:g,setSize:a.setSize,shrinkWrapDock:b[a.shrinkWrapDock],sizeModelName:a.sizeModel,dockedPixelsEnd:0}},dockChild:function(c,a,j,k){var e,i,f=this,b=c.dockedItems[a.shrinkWrap?j:k],d=b.target,h=d.dock,g=a.sizeProp;d.ignoreParentFrame&&c.isCollapsingOrExpanding&&b.clearMarginCache(),b.marginInfo||b.getMarginInfo(),e=h===a.dockBegin?a.shrinkWrap?f.dockOutwardBegin(c,b,d,a):f.dockInwardBegin(c,b,d,a):h===a.dockEnd?a.shrinkWrap?f.dockOutwardEnd(c,b,d,a):f.dockInwardEnd(c,b,d,a):a.shrinkWrapDock?(i=b.getProp(g)+b.marginInfo[g],a.maxChildSize=Math.max(a.maxChildSize,i),0):f.dockStretch(c,b,d,a),b.dockedAt[a.posProp]=e},dockInwardBegin:function(g,b,e,a){var c,i,d,j=a.begin,h=a.sizeProp,f=e.ignoreParentFrame;return f&&(a.ignoreFrameBegin=b,d=e.dock,j-=(c=g.frameBorder[d])+g.framePadding[d]),e.overlay||(i=b.getProp(h)+b.marginInfo[h],a.begin+=i,f&&(a.begin-=c)),j},dockInwardEnd:function(f,c,b,a){var d,g=a.sizeProp,h=c.getProp(g)+c.marginInfo[g],e=a.end-h;return b.overlay||(a.end=e),b.ignoreParentFrame&&(a.ignoreFrameEnd=c,e+=(d=f.frameBorder[b.dock])+f.framePadding[b.dock],a.end+=d),e},dockOutwardBegin:function(g,b,e,a){var c=a.begin,d=a.sizeProp;return a.collapsed?a.ignoreFrameBegin=a.ignoreFrameEnd=b:e.ignoreParentFrame&&(a.ignoreFrameBegin=b),e.overlay||(c-=b.getProp(d)+b.marginInfo[d],a.begin=c),c},dockOutwardEnd:function(g,b,e,a){var c,f=a.end,d=a.sizeProp;return c=b.getProp(d)+b.marginInfo[d],a.collapsed?a.ignoreFrameBegin=a.ignoreFrameEnd=b:e.ignoreParentFrame&&(a.ignoreFrameEnd=b),e.overlay||(a.end=f+c,a.dockedPixelsEnd+=c),f},dockStretch:function(h,c,f,a){var b,n=f.dock,e=a.sizeProp,i="top"===n||"bottom"===n,l=h.frameBorder,j=c.offsets,k=h.framePadding,o=i?"right":"bottom",d=i?"left":"top",g=a.begin+j[d];return!1!==f.stretch&&(b=a.end-g-j[o],f.ignoreParentFrame&&(g-=k[d]+l[d],b+=k[e]+l[e]),b-=c.marginInfo[e],c[a.setSize](b)),g},finishAxis:function(h,a){if(isNaN(a.maxChildSize))return!1;var c,m,d,u,g=a.begin,e=a.end-g,l=a.collapsed,v=a.setSize,k=a.dockBegin,s=a.dockEnd,n=h.framePadding,t=h.frameBorder,b=t[k],i=h.framing,j=i&&i[k],f=l?0:n[k],w=a.sizeProp,p=a.ignoreFrameBegin,q=a.ignoreFrameEnd,r=h.bodyContext,o=Math.max(b+f-j,0);return a.shrinkWrap?(m=a.initialSize,i?c=(d=-g+b+f)-j-o:d=(c=-g)+f,l||(e+=n[w]),p?(d-=b,c-=b,p.dockedAt[a.posProp]-=f):e+=b,l||(q?q.dockedAt[a.posProp]+=n[s]:e+=t[s]),a.size=e,a.horizontal||this.owner.manageHeight||(u=!1)):(c=i?(d=0,g-j-o):(d=-b,g-f-b),m=e),a.delta=d,r[v](m,u),r.setProp(a.bodyPosProp,c),!isNaN(e)},beforeInvalidateShrinkWrapDock:function(b,c){var a=c.axis.sizeModelName;b[a].constrainedMin||(b[a]=Ext.layout.SizeModel.calculated)},afterInvalidateShrinkWrapDock:function(a,c){var d,b=c.axis,e=c.layout;a[b.sizeModelName].calculated&&(d=e.dockStretch(c.ownerContext,a,a.target,b),a.setProp(b.posProp,b.delta+d))},finishConstraints:function(a,g,e){var r,l,m,c,b,d,k,j,f,h,o=this,i=o.sizeModels,q=g.shrinkWrap,p=e.shrinkWrap,n=o.owner;if(q&&(d=g.size,k=g.collapsed?0:g.minSize,j=g.maxSize,f=g.maxChildSize,j<(h=Math.max(d,f))?(b=i.constrainedMax,m=j):h<k?(b=i.constrainedMin,m=k):d<f?(b=i.constrainedDock,n.dockConstrainedWidth=m=f):m=d),p&&(d=e.size,k=e.collapsed?0:e.minSize,j=e.maxSize,f=e.maxChildSize,j<(h=Math.max(d,f+d-e.initialSize))?(c=i.constrainedMax,l=j):h<k?(c=i.constrainedMin,l=k):d<f?(c=i.constrainedDock,n.dockConstrainedHeight=l=f):(a.collapsedVert||n.manageHeight||(r=!1,a.bodyContext.setProp("margin-bottom",e.dockedPixelsEnd)),l=d)),b||c){if(b&&c&&b.constrainedMax&&c.constrainedByMin)return a.invalidate({widthModel:b}),!1;if(!a.widthModel.calculatedFromShrinkWrap&&!a.heightModel.calculatedFromShrinkWrap)return a.invalidate({widthModel:b,heightModel:c}),!1}else o.invalidateAxes(a,g,e);return q&&(a.setWidth(m),b&&(a.widthModel=b)),p&&(a.setHeight(l,r),c&&(a.heightModel=c)),!0},invalidateAxes:function(l,b,a){var i,o,g,c,e,j,d,f,p=this.beforeInvalidateShrinkWrapDock,q=this.afterInvalidateShrinkWrapDock,m=b.end-b.begin,n=a.initialSize,k=b.shrinkWrapDock&&b.maxChildSize<=m,h=a.shrinkWrapDock&&a.maxChildSize<=n;if(k||h)for(h&&(a.begin=a.initialBegin,a.end=a.begin+a.initialSize),g=0,o=(i=l.dockedItems).length;g<o;++g)j=(c=i[g]).horizontal,d=null,k&&j?(f=b.sizeProp,e=m,d=b):h&&!j&&(f=a.sizeProp,e=n,d=a),d&&(e-=c.getMarginInfo()[f])!==c.props[f]&&c.invalidate({before:p,after:q,axis:d,ownerContext:l,layout:this})},finishPositions:function(d,h,i){var b,a,c=d.dockedItems,g=c.length,e=h.delta,f=i.delta;for(b=0;b<g;++b)(a=c[b]).setProp("x",e+a.dockedAt.x),a.setProp("y",f+a.dockedAt.y)},finishedLayout:function(a){var b=a.target;this.callParent(arguments),a.animatePolicy||(1===a.isCollapsingOrExpanding?b.afterCollapse(!1):2===a.isCollapsingOrExpanding&&b.afterExpand(!1))},getAnimatePolicy:function(b){var a,c,d=this;return 1===b.isCollapsingOrExpanding?a=d.lastCollapsedState:2===b.isCollapsingOrExpanding&&(a=b.lastCollapsedState),"left"===a||"right"===a?c=d.horizontalCollapsePolicy:"top"!==a&&"bottom"!==a||(c=d.verticalCollapsePolicy),c},getDockedItems:function(c,k){var j,h,b,e,g,l,d=this,i="visual"===c,a=i?Ext.ComponentQuery.query("[rendered]",d.owner.dockedItems.items):d.owner.dockedItems.items,f=a&&a.length&&!1!==c;if(null==k)b=f&&!i?a.slice():a;else{for(b=[],e=0,l=a.length;e<l;++e)g="top"===(h=a[e].dock)||"left"===h,(k?g:!g)&&b.push(a[e]);f=f&&b.length}return f&&(j="render"===(c=c||"render"),Ext.Array.sort(b,function(e,f){var a,b;return!j||(a=d.owner.dockOrder[e.dock])===(b=d.owner.dockOrder[f.dock])||a+b?(a=d.getItemWeight(e,c),b=d.getItemWeight(f,c),void 0!==a&&void 0!==b?a-b:0):a-b})),b||[]},getItemWeight:function(b,c){var a=b.weight||this.owner.defaultDockWeights[b.dock];return a[c]||a},getLayoutItems:function(){var c,f,d,b,a,e=this;if(e.owner.collapsed)a=e.owner.getCollapsedDockedItems();else for(f=(c=e.getDockedItems("visual")).length,a=[],b=0;b<f;b++)(d=c[b]).hidden||a.push(d);return a},measureContentWidth:function(b){var a=b.bodyContext;return a.el.getWidth()-a.getBorderInfo().width},measureContentHeight:function(b){var a=b.bodyContext;return a.el.getHeight()-a.getBorderInfo().height},redoLayout:function(b){var a=this.owner;1===b.isCollapsingOrExpanding?(a.reExpander&&a.reExpander.el.show(),a.addClsWithUI(a.collapsedCls),b.redo(!0)):2===b.isCollapsingOrExpanding&&(a.removeClsWithUI(a.collapsedCls),b.bodyContext.redo())},renderChildren:function(){var a=this,c=a.getDockedItems(),b=a.getRenderTarget();a.handleItemBorders(),a.renderItems(c,b)},renderItems:function(m,l){var j,i,o,c,n,a,b,e,d,f=this,g=f.owner,p={},h=m.length,k=g.body,r=!!g.frameSize,q=g.bodyContainer;if(h){for(a=0;a<h;a++)p[(b=m[a]).id]=b;for(o=(i=f.getRenderTarget().dom.childNodes).length,a=n=0;a<o;++a){if(c=i[a],r?!(d=c===k.dom||c===q)&&Ext.fly(c).contains(k)&&(d=!0,g.bodyContainer=c):d=c===k.dom,d){j=a;break}p[c.id]&&++n}for(j-=n,a=0;a<h;++a)e=j+a,"right"!==(b=m[a]).dock&&"bottom"!==b.dock||++e,b.rendered?f.isValidParent(b,l,e)||f.moveItem(b,l,e):f.renderItem(b,l,e)}},undoLayout:function(b){var a=this.owner;1===b.isCollapsingOrExpanding?(a.reExpander&&a.reExpander.el.hide(),a.removeClsWithUI(a.collapsedCls),b.undo(!0)):2===b.isCollapsingOrExpanding&&(a.addClsWithUI(a.collapsedCls),b.bodyContext.undo())},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(g,c){var e,d,f=this,b=f.sizePolicy,a=f.owner.shrinkWrapDock;return!1===g.stretch?b.nostretch:(a=!0===a?3:a||0,(d="left"===(e=g.dock)||"right"===e)?(b=b.vert,a&=1):(b=b.horz,a&=2),a&&(c=c||f.owner.getSizeModel())[d?"height":"width"].shrinkWrap?b.shrinkWrap:b.stretch)},configureItem:function(a,b){this.callParent(arguments),a.addCls(this._itemCls),a.ignoreBorderManagement||a.addClsWithUI(this.getDockCls(a.dock))},getDockCls:function(a){return"docked-"+a},afterRemove:function(a){var b;this.callParent(arguments),a.removeCls(this._itemCls),a.ignoreBorderManagement||a.removeClsWithUI(this.getDockCls(a.dock)),b=a.el.dom,!a.destroying&&b&&b.parentNode.removeChild(b),this.childrenChanged=!0},borderCollapseMap:{},getBorderCollapseTable:function(){var c,b=this.borderCollapseMap,e=this.owner,a=e.baseCls,d=e.ui;return(c=(b=b[a]||(b[a]={}))[d])||(a+="-"+d+"-outer-border-",b[d]=c=[0,a+"l",a+"b",a+"bl",a+"r",a+"rl",a+"rb",a+"rbl",a+"t",a+"tl",a+"tb",a+"tbl",a+"tr",a+"trl",a+"trb",a+"trbl"]),c}}),Ext.define("Ext.util.Memento",function(){function captureOne(d,c,a,b){d[b?b+a:a]=c[a]}function removeOne(b,c,a){delete b[a]}function restoreOne(e,f,a,b){var d=b?b+a:a,c=e[d];(c||e.hasOwnProperty(d))&&restoreValue(f,a,c)}function restoreValue(a,c,b){Ext.isDefined(b)?a[c]=b:delete a[c]}function doMany(f,c,e,a,d){if(c)if(Ext.isArray(a)){var b,g=a.length;for(b=0;b<g;b++)f(c,e,a[b],d)}else f(c,e,a,d)}return{data:null,target:null,constructor:function(a,b){this.data={},a&&(this.target=a,b&&this.capture(b))},capture:function(d,c,b){var a=this;doMany(captureOne,a.data||(a.data={}),c||a.target,d,b)},remove:function(a){doMany(removeOne,this.data,null,a)},restore:function(a,d,c,b){doMany(restoreOne,this.data,c||this.target,a,b),!1!==d&&this.remove(a)},restoreAll:function(c,d){var a,f=d||this.target,b=this.data;for(a in c=!1!==c,b)b.hasOwnProperty(a)&&(restoreValue(f,a,b[a]),c&&delete b[a])}}}()),Ext.define("Ext.container.DockingContainer",{isDockingContainer:!0,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,tabGuard:!1,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" tabIndex="0" class="'+Ext.baseCSSPrefix+"tab-guard "+Ext.baseCSSPrefix+'tab-guard-{tabGuard}" ></div>',addDocked:function(c,d){var e,h,a,j,b=this,k=b.rendered,f=0,g=b.dockedItems,i=g.getCount();for(j=(c=b.prepareItems(c)).length,k&&Ext.suspendLayouts(),d=void 0===d?i:Math.min(d,i);f<j;f++)(a=c[f]).dock=a.dock||"top","left"!==a.dock&&"right"!==a.dock||b.horizontalDocks++,e=d+f,g.insert(e,a),h=!!a.instancedCmp,delete a.instancedCmp,a.onAdded(b,e,h),delete a.$initParent,b.onDockedAdd!==Ext.emptyFn&&b.onDockedAdd(a),b.hasListeners.dockedadd&&b.fireEvent("dockedadd",b,a,e);return b.rendered&&(b.updateLayout(),Ext.resumeLayouts(!0)),c},destroyDockedItems:function(){var b,a=this.dockedItems;if(a)for(;b=a.first();)this.removeDocked(b,!0)},doRenderDockedItems:function(h,a,e){var f,g,b=a.$comp,d=b.componentLayout,c=b.tabGuard&&b.getTpl("tabGuardTpl");d.getDockedItems&&!a.$skipDockedItems&&(c&&!e&&(a.tabGuard="before",b.addChildEl(a.tabGuardEl="tabGuardBeforeEl"),c.applyOut(a,h)),(g=(f=d.getDockedItems("render",!e))&&d.getItemsRenderTree(f))&&Ext.DomHelper.generateMarkup(g,h),c&&e&&(a.tabGuard="after",b.addChildEl(a.tabGuardEl="tabGuardAfterEl"),c.applyOut(a,h)))},getDockedComponent:function(a){return Ext.isObject(a)&&(a=a.getItemId()),this.dockedItems.get(a)},getDockedItems:function(b,c){var a=this.getComponentLayout().getDockedItems("render",c);return b&&a.length&&(a=Ext.ComponentQuery.query(b,a)),a},getDockingRefItems:function(e,d){var c,b=e&&"*,* *",a=this.getDockedItems(b,!0);return a.push.apply(a,d),c=this.getDockedItems(b,!1),a.push.apply(a,c),a},initDockingItems:function(){var b=this,a=b.dockedItems;a&&a.isMixedCollection||(b.dockedItems=new Ext.util.ItemCollection,a&&b.addDocked(a))},insertDocked:function(b,a){this.addDocked(a,b)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(a,c){var d,e,b=this;return c=!0===c||!1!==c&&b.autoDestroy,b.dockedItems.contains(a)&&("left"!==a.dock&&"right"!==a.dock||b.horizontalDocks--,(e=(d=b.componentLayout)&&b.rendered)&&d.onRemove(a),b.dockedItems.remove(a),a.onRemoved(a.destroying||c),b.onDockedRemove(a),c?a.destroy():e&&d.afterRemove(a),b.hasListeners.dockedremove&&b.fireEvent("dockedremove",b,a),b.destroying||b.updateLayout()),a},moveDocked:function(a,c){var b=this;b.rendered&&Ext.suspendLayouts(),b.removeDocked(a,!1),a.dock=c,b.addDocked(a),b.rendered&&(a.frame&&(Ext.getDetachedBody().appendChild(a.el),a.updateFrame()),Ext.resumeLayouts(!0))},setupDockingRenderTpl:function(a){a.renderDockedItems=this.doRenderDockedItems}}),Ext.define("Ext.panel.Panel",{extend:Ext.container.Container,alias:"widget.panel",alternateClassName:"Ext.Panel",mixins:{docking:Ext.container.DockingContainer},childEls:["body"],renderTpl:['<tpl if="headingText">','<div id="{id}-headingEl" data-ref="headingEl" role="heading"',' class="',Ext.baseCSSPrefix,'hidden-clip" style="height:0">',"{headingText}","</div>","</tpl>","{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyAriaAttributes">','<tpl foreach="bodyAriaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",'<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:!0,closable:!1,closeAction:"destroy",closeToolText:"Close panel",collapsed:!1,collapsedCls:"collapsed",collapseFirst:!0,collapsible:void 0,collapseToolText:"Collapse panel",expandToolText:"Expand panel",constrain:!1,constrainHeader:!1,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:!0,frame:!1,frameHeader:!0,hideCollapseTool:!1,manageHeight:!0,maskElement:"el",minButtonWidth:75,preventHeader:!1,shrinkWrapDock:!1,titleCollapse:void 0,baseCls:Ext.baseCSSPrefix+"panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:!0,defaultBindProperty:"title",addBodyCls:function(c){var a=this;return(a.rendered?a.body:a.getProtoBody()).addCls(c),a},addTool:function(b){Ext.isArray(b)||(b=[b]);var e,d,c=this,a=c.header,g=b.length,f=c.tools;for(a&&a.isHeader||(a=null,f||(c.tools=f=[])),e=0;e<g;e++)(d=b[e]).toolOwner=c,a?a.addTool(d):f.push(d);c.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(c){var b=this,d=b.collapsible,a=b.collapseTool;(b.collapsible=c)&&!d?(b.updateCollapseTool(),(a=b.collapseTool)&&a.show()):!c&&d&&a&&a.hide()},addUIClsToElement:function(b){var a=this,c=a.callParent(arguments);return a.addBodyCls([Ext.baseCSSPrefix+b,a.baseCls+"-body-"+b,a.baseCls+"-body-"+a.ui+"-"+b]),c},afterCollapse:function(c){var a=this,d=a.ariaEl.dom,b=a.ownerLayout;a.isCollapsingOrExpanding=0,a.updateCollapseTool(),c&&a.removeCls(Ext.baseCSSPrefix+"animating-size"),b&&b.afterCollapse(a,c),d&&d.setAttribute("aria-expanded",!1),a.isAccordionPanel&&a.body.dom.setAttribute("aria-hidden",!0),a.setHiddenDocked(),a.fireEvent("collapse",a)},afterExpand:function(c){var a=this,d=a.ariaEl.dom,b=a.ownerLayout;a.isCollapsingOrExpanding=0,a.updateCollapseTool(),c&&a.removeCls(Ext.baseCSSPrefix+"animating-size"),b&&b.afterExpand(a,c),d&&d.setAttribute("aria-expanded",!0),a.isAccordionPanel&&a.body.dom.setAttribute("aria-hidden",!1),a.fireEvent("expand",a),a.fireHierarchyEvent("expand")},beforeDestroy:function(){var a=this;Ext.destroy(a.placeholder,a.ghostPanel,a.dd,a.accordionKeyNav,a.defaultButtonKeyNav),a.destroyDockedItems(),a.callParent()},destroy:function(){this.callParent(),this.dockedItems=this.bodyContainer=null},beforeRender:function(){var b,a=this;a.getProtoBody(),a.callParent(),a.initTools(),(!a.preventHeader&&!1!==a.header||a.isViewportBorderChild)&&a.updateHeader(),a.afterHeaderInit=!0,a.collapsed&&(a.isPlaceHolderCollapse()?a.hidden||(a.setHiddenState(!0),a.preventCollapseFire=!0,a.placeholderCollapse(),delete a.preventCollapseFire,b=a.collapsed,a.collapsed=!1):(a.beginCollapse(),a.addClsWithUI(a.collapsedCls))),b&&(a.collapsed=b)},getMemento:function(a){var b=this;if(a&&"string"==typeof a)return b[a+="Memento"]||(b[a]=new Ext.util.Memento(b))},beginCollapse:function(){var c,a=this,g=a.lastBox,f=a.rendered,d=a.getMemento("collapse"),e=a.getSizeModel(),b=a.header;d.capture(["height","minHeight","width","minWidth"]),g&&d.capture(a.restoreDimension(),g,"last."),a.collapsedVertical()?(e.width.shrinkWrap&&(a.width=f?a.getWidth():a.width||a.minWidth||100),delete a.height,a.minHeight=0):a.collapsedHorizontal()&&(e.height.shrinkWrap&&(a.height=f?a.getHeight():a.height||a.minHeight||100),delete a.width,a.minWidth=0),a.ownerCt&&a.ownerCt.getLayout().beginCollapse(a),a.isPlaceHolderCollapse()||!1===b||(b===(c=a.getReExpander())?(b.collapseImmune=!0,b.getInherited().collapseImmune=!0,b.addClsWithUI(a.getHeaderCollapsedClasses(b)),b.rendered&&b.updateFrame()):c.el&&(c.el.show(),c.hidden=!1)),a.resizer&&a.resizer.disable()},beginDrag:function(){this.floatingDescendants&&this.floatingDescendants.hide()},beginExpand:function(){var d,a=this,f=a.lastBox,c=a.getMemento("collapse"),e=a.restoreDimension(),b=a.header;c&&(c.restore(["minHeight","minWidth",e]),f&&c.restore(e,!0,f,"last.")),a.ownerCt&&a.ownerCt.getLayout().beginExpand(a),a.isPlaceHolderCollapse()||!1===b||(b===(d=a.getReExpander())?(delete b.collapseImmune,delete b.getInherited().collapseImmune,b.removeClsWithUI(a.getHeaderCollapsedClasses(b)),b.rendered&&(b.expanding=!0,b.updateFrame(),delete b.expanding)):(d.hidden=!0,d.el.hide())),a.resizer&&a.resizer.enable()},bridgeToolbars:function(){var c,e,a=this,b=[],d=a.minButtonWidth;function initToolbar(b,d,c){return Ext.isArray(b)?b={xtype:"toolbar",items:b}:b.xtype||(b.xtype="toolbar"),b.dock=d,c&&(b.layout=Ext.applyIf(b.layout||{},{pack:{left:"start",center:"center"}[a.buttonAlign]||"end"})),b}a.tbar&&(b.push(initToolbar(a.tbar,"top")),a.tbar=null),a.bbar&&(b.push(initToolbar(a.bbar,"bottom")),a.bbar=null),a.buttons&&(a.fbar=a.buttons,a.buttons=null),a.fbar&&((c=initToolbar(a.fbar,"bottom",!0)).ui="footer",d&&(e=c.defaults,c.defaults=function(c){var f,a=e||{},b=!c.xtype||c.isButton;return b||(f=Ext.ClassManager.getByAlias("widget."+c.xtype))&&(b=f.prototype.isButton),!b||"minWidth"in a||(a=Ext.apply({minWidth:d},a)),a}),b.push(c),a.fbar=null),a.lbar&&(b.push(initToolbar(a.lbar,"left")),a.lbar=null),a.rbar&&(b.push(initToolbar(a.rbar,"right")),a.rbar=null),a.dockedItems?a.dockedItems.isMixedCollection?a.addDocked(b):(Ext.isArray(a.dockedItems)||(a.dockedItems=[a.dockedItems]),a.dockedItems=a.dockedItems.concat(b)):a.dockedItems=b},close:function(){!1!==this.fireEvent("beforeclose",this)&&this.doClose()},collapse:function(c,b){var a=this,f=c||a.collapseDirection,g=a.ownerCt,e=a.ownerLayout,d=a.rendered;return a.isCollapsingOrExpanding?a:(arguments.length<2&&(b=a.animCollapse),a.collapsed||!1===a.fireEvent("beforecollapse",a,c,b)||e&&e.onBeforeComponentCollapse&&!1===e.onBeforeComponentCollapse(a)?a:d&&g&&a.isPlaceHolderCollapse()?a.placeholderCollapse(c,b):(a.collapsed=f,d&&a.beginCollapse(),a.getInherited().collapsed=!0,a.fireHierarchyEvent("collapse"),d&&a.doCollapseExpand(1,b),a))},collapsedHorizontal:function(){var a=this.getCollapsed();return"left"===a||"right"===a},collapsedVertical:function(){var a=this.getCollapsed();return"top"===a||"bottom"===a},convertCollapseDir:function(a){return a.substr(0,1)},createGhost:function(d){var a=this,b=a.header,c=a.frame&&!a.alwaysFramed;return{xtype:"panel",hidden:!1,header:b?{titleAlign:b.getTitleAlign()}:null,ui:c?a.ui.replace(/-framed$/,""):a.ui,id:a.id+"-ghost",renderTo:Ext.getBody(),resizable:!1,draggable:!1,closable:!1,focusable:!1,floating:!0,shadow:!1,frame:c,shim:a.shim,alwaysFramed:a.alwaysFramed,overlapHeader:a.overlapHeader,headerPosition:a.getHeaderPosition(),titleRotation:a.getTitleRotation(),baseCls:a.baseCls,getRefOwner:function(){return a.getRefOwner()},cls:a.baseCls+"-ghost "+(d||"")}},createReExpander:function(c,h){var a=this,g="left"===c,e="right"===c,d=g||e,f=a.ownerCt,b=Ext.apply({hideMode:"offsets",title:a.getTitle(),titleAlign:a.getTitleAlign(),vertical:d,textCls:a.headerTextCls,icon:a.getIcon(),iconCls:a.getIconCls(),iconAlign:a.getIconAlign(),glyph:a.getGlyph(),baseCls:a.self.prototype.baseCls+"-header",ui:a.ui,frame:a.frame&&a.frameHeader,ignoreParentFrame:a.frame||a.overlapHeader,ignoreBorderManagement:a.frame||a.ignoreHeaderBorderManagement,indicateDrag:a.draggable,collapseImmune:!0,ariaRole:a.ariaRole,preventRefocus:!0,ownerCt:f&&"placeholder"===a.collapseMode?f:a,ownerLayout:a.componentLayout,forceOrientation:!0,margin:a.margin},h);return"mini"===a.collapseMode&&(d?b.width=1:b.height=1),a.hideCollapseTool||((g||e&&a.isPlaceHolderCollapse())&&(b.titlePosition=1),b.tools=[{xtype:"tool",type:"expand-"+a.getOppositeDirection(c),isDefaultExpandTool:!0,uiCls:["top"],handler:a.toggleCollapse,scope:a,tooltip:a.expandToolText}]),(b=new Ext.panel.Header(b)).addClsWithUI(a.getHeaderCollapsedClasses(b)),b.expandTool=b.down("tool[isDefaultExpandTool=true]"),b},doClose:function(){this.fireEvent("close",this),this[this.closeAction]()},doCollapseExpand:function(e,b){var a=this,d=a.animCollapse,c=a.ownerLayout;return a.animCollapse=b,a.isCollapsingOrExpanding=e,b&&a.addCls(Ext.baseCSSPrefix+"animating-size"),c&&!b?c.onContentChange(a):a.updateLayout({isRoot:!0}),a.animCollapse=d,a},endDrag:function(){this.floatingDescendants&&this.floatingDescendants.show()},expand:function(b){var a=this,c=a.ownerLayout,d=a.rendered;return a.isCollapsingOrExpanding?a:(arguments.length||(b=a.animCollapse),!a.collapsed&&!a.floatedFromCollapse||!1===a.fireEvent("beforeexpand",a,b)||c&&c.onBeforeComponentExpand&&!1===c.onBeforeComponentExpand(a)?a:(delete a.getInherited().collapsed,d&&a.isPlaceHolderCollapse()?a.placeholderExpand(b):(a.restoreHiddenDocked(),d&&a.beginExpand(),a.collapsed=!1,a.rendered&&a.doCollapseExpand(2,b),a)))},findReExpander:function(g){var a,b,c=Ext.Component,d=this.dockedItems.items,e=d.length;if("mini"!==this.collapseMode)switch(g){case c.DIRECTION_TOP:case c.DIRECTION_BOTTOM:for(b=0;b<e;b++)if(!(a=d[b]).hidden&&a.isHeader&&(!a.dock||"top"===a.dock||"bottom"===a.dock))return a;break;case c.DIRECTION_LEFT:case c.DIRECTION_RIGHT:for(b=0;b<e;b++)if(!(a=d[b]).hidden&&a.isHeader&&("left"===a.dock||"right"===a.dock))return a;break;default:throw"Panel#findReExpander must be passed a valid collapseDirection"}},floatCollapsedPanel:function(){var f,e,b,a=this,c=a.placeholder,d=c.getSize(),i=Ext.panel.Panel.floatCls,h=a.collapsed,g=a.ownerCt||a;if(!a.isSliding)if(a.el.hasCls(i))a.slideOutFloatedPanel();else{switch(a.isSliding=!0,c.el.hide(),c.hidden=!0,a.el.show(),a.setHiddenState(!1),a.collapsed=!1,g.updateLayout(),c.el.show(),c.hidden=!1,a.el.hide(),a.setHiddenState(!0),a.collapsed=h,g.updateLayout(),b=a.getBox(!1,!0),a.slideOutTask=a.slideOutTask||new Ext.util.DelayedTask(a.slideOutFloatedPanel,a),Ext.supports.Touch&&Ext.on("mousedown",e=function(b){b.within(a.el)||(Ext.un("mousedown",e),a.slideOutFloatedPanel())}),a.placeholderListener||(a.placeholderListener=c.on({resize:a.onPlaceholderResize,scope:a,destroyable:!0})),c.el.on("mouseleave",a.onMouseLeaveFloated,a),a.el.on("mouseleave",a.onMouseLeaveFloated,a),c.el.on("mouseenter",a.onMouseEnterFloated,a),a.el.on("mouseenter",a.onMouseEnterFloated,a),a.el.addCls(i),a.floated=h,a.collapseTool&&a.collapseTool.el.hide(),a.collapsed){case"top":a.width=d.width,a.setLocalXY(b.x,b.y+d.height);break;case"right":a.height=d.height,a.setLocalXY(b.x-d.width,b.y);break;case"bottom":a.width=d.width,a.setLocalXY(b.x,b.y-d.height);break;case"left":a.height=d.height,a.setLocalXY(b.x+d.width,b.y)}f=a.convertCollapseDir(a.collapsed),a.floatedFromCollapse=a.collapsed,a.collapsed=!1,a.setHiddenState(!1),a.el.slideIn(f,{preserveScroll:!0,duration:Ext.Number.from(a.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){a.isSliding=!1,a.fireEvent("float",a)}}})}},onPlaceholderResize:function(f,d,c){var a=this,e=a.getBox(!1,!0),b=f.getBox(!1,!0);switch(a.floated){case"top":a.width=d,a.setLocalY(b.y+b.height);break;case"right":a.height=c,a.setLocalX(b.x-e.width);break;case"bottom":a.width=d,a.setLocalY(b.y-e.height);break;case"left":a.height=c,a.setLocalX(b.x+b.width)}a.updateLayout({isRoot:!0})},getAnimationProps:function(){var a,b=this.animCollapse;return a=this.callParent(),"number"==typeof b&&(a.duration=b),a},getCollapsed:function(){var a=this;return!0===a.collapsed?a.collapseDirection:a.collapsed},getCollapsedDockedItems:function(){var a=this;return!1===a.header||"placeholder"===a.collapseMode?a.emptyArray:[a.getReExpander()]},getComponent:function(b){var a=this.callParent(arguments);return void 0!==a||Ext.isNumber(b)||(a=this.getDockedComponent(b)),a},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(d){var b,a=this,c=a.collapsedCls;return b=[c,c+"-"+d.getDockName()],a.border&&(!a.frame||a.frame&&Ext.supports.CSS3BorderRadius)&&b.push(c+"-border-"+d.getDockName()),b},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(b){var a=Ext.Component;switch(b){case a.DIRECTION_TOP:return a.DIRECTION_BOTTOM;case a.DIRECTION_RIGHT:return a.DIRECTION_LEFT;case a.DIRECTION_BOTTOM:return a.DIRECTION_TOP;case a.DIRECTION_LEFT:return a.DIRECTION_RIGHT}},getPlaceholder:function(g){var a=this,d=g||a.collapseDirection,f=null,b=a.placeholder,e=a.floatable,c=a.titleCollapse;return b||((e||a.collapsible&&c)&&(f={click:{fn:!c&&e?a.floatCollapsedPanel:a.toggleCollapse,element:"el",scope:a}}),a.placeholder=b=Ext.widget(a.createReExpander(d,{id:a.id+"-placeholder",listeners:f}))),b.placeholderFor||(b.isComponent||(a.placeholder=b=a.lookupComponent(b)),Ext.applyIf(b,{margin:a.margin,placeholderFor:a,synthetic:!0}),b.addCls([Ext.baseCSSPrefix+"region-collapsed-placeholder",Ext.baseCSSPrefix+"region-collapsed-"+d+"-placeholder",a.collapsedCls])),b},getProtoBody:function(){var a=this,b=a.protoBody;return b||(a.protoBody=b=new Ext.util.ProtoElement({cls:a.bodyCls,style:a.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:!0})),b},getReExpander:function(d){var a=this,b=d||a.collapseDirection,c=a.reExpander||a.findReExpander(b);return a.expandDirection=a.getOppositeDirection(b),c||(a.reExpander=c=a.createReExpander(b,{dock:b,cls:Ext.baseCSSPrefix+"docked "+a.baseCls+"-"+a.ui+"-collapsed",isCollapsedExpander:!0}),a.dockedItems.insert(0,c)),c},getRefItems:function(b){var a=this.callParent(arguments);return this.getDockingRefItems(b,a)},getState:function(){var c,a=this,b=a.callParent()||{},e=a.collapsed,d=a.floated;return d&&(a.collapsed=d),b=a.addPropertyToState(b,"collapsed"),d&&(a.collapsed=e),a.getCollapsed()&&(c=a.getMemento("collapse").data,b=a.addPropertyToState(b,"collapsed",c),a.collapsedVertical()?(delete b.height,c&&(b=a.addPropertyToState(b,"height",c.height))):(delete b.width,c&&(b=a.addPropertyToState(b,"width",c.width)))),b},applyState:function(b){var a,c={};b&&((a=b.collapsed)&&(c=this.getMemento("collapse"),Ext.Object.merge(c.data,a),b.collapsed=!0),this.callParent(arguments))},ghost:function(k){var c,g,h,e,f,i,b=this,a=b.ghostPanel,d=b.getBox(),j=b.header;if(a?a.el.show():(b.ghostPanel=a=Ext.widget(b.createGhost(k)),a.el.dom.removeAttribute("tabIndex")),a.setHiddenState(!1),a.floatParent=b.floatParent,a.toFront(),j&&!b.preventHeader){for((c=a.header).suspendLayouts(),i=(g=c.query("tool")).length;i--;)c.remove(g[i]);c.setTitlePosition(0),a.addTool(b.ghostTools()),a.setTitle(b.getTitle()),c.setTitlePosition(j.titlePosition),(e=b.getIconCls())?a.setIconCls(e):(h=b.getIcon())?a.setIcon(h):(f=b.getGlyph())&&a.setGlyph(f),c.addCls(Ext.baseCSSPrefix+"header-ghost"),c.resumeLayouts()}return a.setPagePosition(d.x,d.y),a.setSize(d.width,d.height),b.el.hide(),a},ghostTools:function(){var a,f,d,c=[],e=this.header,b=e?e.query("tool[hidden=false]"):[];if(b.length)for(a=0,f=b.length;a<f;a++)d=b[a],c.push({type:d.type,tooltip:d.tooltip});else c=[{type:"placeholder"}];return c},initBodyBorder:function(){var a=this;a.frame&&a.bodyBorder&&(Ext.isNumber(a.bodyBorder)||(a.bodyBorder=1),a.getProtoBody().setStyle("border-width",this.unitizeBox(a.bodyBorder)))},initBodyStyles:function(){var a=this,b=a.getProtoBody();void 0!==a.bodyPadding&&(a.layout.managePadding?b.setStyle("padding",0):b.setStyle("padding",this.unitizeBox(!0===a.bodyPadding?5:a.bodyPadding))),a.initBodyBorder()},initBorderProps:function(){var a=this;a.frame&&a.border&&void 0===a.bodyBorder&&(a.bodyBorder=!1),a.frame&&a.border&&(!1===a.bodyBorder||0===a.bodyBorder)&&(a.manageBodyBorders=!0)},initComponent:function(){var a=this;a.collapsible&&a.addStateEvents(["expand","collapse"]),a.unstyled&&a.setUI("plain"),a.frame&&a.setUI(a.ui+"-framed"),a.bridgeToolbars(),a.initBorderProps(),a.callParent(),a.collapseDirection=a.collapseDirection||a.getHeaderPosition()||Ext.Component.DIRECTION_TOP,a.hiddenOnCollapse=new Ext.dom.CompositeElement},initItems:function(){this.callParent(),this.initDockingItems()},initRenderData:function(){var a=this,b=a.callParent();return a.initBodyStyles(),a.protoBody.writeTo(b),delete a.protoBody,a.headingText&&(b.headingText=a.headingText,a.addChildEl("headingEl")),a.bodyAriaRole&&(b.bodyAriaAttributes={role:a.bodyAriaRole},!a.ariaStaticRoles[a.bodyAriaRole]&&a.bodyAriaRenderAttributes&&Ext.apply(b.bodyAriaAttributes,a.bodyAriaRenderAttributes)),b},calculateConstrainedPosition:function(d,g,h,a){var b,e,c=this,f=c.header;return c.constrainHeader&&(b=f.lastBox,a?a=f.vertical?[b?b.width:a[0],a[1]]:[a[0],b?b.height:a[1]]:b&&(a=[b.width,b.height]),e=c.floatParent,d=d||c.constrainTo||(e?e.getTargetEl():null)||c.container||c.el.parent()),c.callParent([d,g,h,a])},initTools:function(){var b,c,e,a=this,d=a.tools;for(a.tools=[],b=d&&d.length;b;)--b,a.tools[b]=e=d[b],e.toolOwner=a;!a.collapsible||a.hideCollapseTool||!1===a.header||a.preventHeader||(a.updateCollapseTool(),a.collapseFirst&&a.tools.unshift(a.collapseTool)),a.addTools(),a.pinnable&&a.initPinnable(),a.closable&&(a.addClsWithUI("closable"),c={xtype:"tool",type:"close",scope:a,handler:a.close,tooltip:a.closeToolText},a.isAccordionPanel&&(c.focusable=!1,c.ariaRole="presentation"),a.addTool(c)),a.collapseTool&&!a.collapseFirst&&a.addTool(a.collapseTool)},isLayoutRoot:function(){return!!this.floatedFromCollapse||this.callParent()},isPlaceHolderCollapse:function(){return"placeholder"===this.collapseMode},isVisible:function(b){var a=this;return a.collapsed&&a.placeholder?a.placeholder.isVisible(b):a.callParent(arguments)},onBoxReady:function(){var b,a=this;a.callParent(arguments),a.collapsed&&a.setHiddenDocked(),a.isAccordionPanel&&(a.ariaEl=a.header.titleCmp.el,a.ariaEl.dom.setAttribute("aria-expanded",!a.collapsed),a.body.dom.setAttribute("aria-labelledby",a.header.titleCmp.id),a.body.dom.setAttribute("aria-hidden",!!a.collapsed),a.accordionKeyNav=new Ext.util.KeyNav({target:a.header.titleCmp.el,scope:a,right:a.navigateAccordion,left:a.navigateAccordion,up:a.navigateAccordion,down:a.navigateAccordion,home:a.navigateAccordion,end:a.navigateAccordion,space:a.toggleCollapse,enter:a.toggleCollapse,del:{alt:!0,fn:a.maybeClose}})),a.defaultButton&&(b=a.defaultButtonTarget?a[a.defaultButtonTarget]:a.body,a.defaultButtonKeyNav=new Ext.util.KeyNav({target:b,scope:a,defaultEventAction:"stopEvent",enter:a.fireDefaultButton}))},onHide:function(c,e,d){var a=this,b=a.dd;a.floatedFromCollapse&&a.slideOutFloatedPanel(!0),a.draggable&&b&&b.endDrag(),a.collapsed&&a.placeholder?(a.splitter&&(Ext.suspendLayouts(),a.splitter.hide(),Ext.resumeLayouts()),a.placeholder.hide()):a.callParent([c,e,d])},onMouseEnterFloated:function(a){this.slideOutTask.cancel()},onMouseLeaveFloated:function(a){this.slideOutTask.delay(500)},onRemoved:function(b){var a=this;a.placeholder&&!b&&a.ownerCt.remove(a.placeholder,!1),a.callParent(arguments)},onShow:function(){var a=this;a.collapsed&&a.isPlaceHolderCollapse()?(a.splitter&&(Ext.suspendLayouts(),a.splitter.show(),Ext.resumeLayouts()),a.setHiddenState(!0),a.placeholderCollapse()):a.callParent(arguments)},placeholderCollapse:function(i,h){var c,a=this,e=a.ownerCt,d=i||a.collapseDirection,g=Ext.panel.Panel.floatCls,f=a.collapseTool,b=a.getPlaceholder(d);return a.isCollapsingOrExpanding=1,a.setHiddenState(!0),a.collapsed=d,b.rendered?(b.el.dom.parentNode!==a.el.dom.parentNode&&a.el.dom.parentNode.insertBefore(b.el.dom,a.el.dom),b.hidden=!1,b.setHiddenState(!1),b.el.show(),e.updateLayout()):e.insert(e.items.indexOf(a),b),a.rendered?(f&&Ext.ComponentManager.getActiveComponent()===f&&(a.focusPlaceholderExpandTool=!0),a.el.setVisibilityMode(a.placeholderCollapseHideMode),h?(a.el.addCls(g),b.el.hide(),c=a.convertCollapseDir(d),a.el.slideOut(c,{preserveScroll:!0,duration:Ext.Number.from(h,Ext.fx.Anim.prototype.duration),listeners:{scope:a,afteranimate:function(){var a=this;a.el.removeCls(g),a.placeholder.el.show().setStyle("display","none").slideIn(c,{easing:"linear",duration:100,listeners:{afteranimate:a.doPlaceholderCollapse,scope:a}})}}})):(a.el.hide(),a.doPlaceholderCollapse())):(a.isCollapsingOrExpanding=0,a.preventCollapseFire||a.fireEvent("collapse",a)),a},doPlaceholderCollapse:function(){var a=this,b=a.placeholder,c=b.expandTool;a.focusPlaceholderExpandTool&&c?c.focus():b.focus(),a.focusPlaceholderExpandTool=!1,b.setHiddenState(!1),b.ariaEl.dom.setAttribute("aria-hidden",!1),b.ariaEl.dom.setAttribute("aria-expanded",!1),a.ariaEl.dom.setAttribute("aria-hidden",!0),a.ariaEl.dom.setAttribute("aria-expanded",!1),a.isCollapsingOrExpanding=0,a.fireEvent("collapse",a)},placeholderExpand:function(d){var e,c,a=this,h=a.collapsed,b=a.placeholder.expandTool,g=Ext.panel.Panel.floatCls,f=a.ownerLayout?a.ownerLayout.centerRegion:null;return Ext.Component.layoutSuspendCount&&(d=!1),a.floatedFromCollapse&&(c=a.getPosition(!0),a.slideOutFloatedPanelBegin(),a.slideOutFloatedPanelEnd(),a.floated=!1),b&&Ext.ComponentManager.getActiveComponent()===b&&(a.focusHeaderCollapseTool=!0,b._ariaRole=b.ariaEl.dom.getAttribute("role"),b._ariaLabel=b.ariaEl.dom.getAttribute("aria-label"),b.ariaEl.dom.setAttribute("role","presentation"),b.ariaEl.dom.removeAttribute("aria-label")),d?(Ext.suspendLayouts(),a.placeholder.hide(),a.el.show(),a.collapsed=!1,a.setHiddenState(!1),f&&!c&&(f.hidden=!0),Ext.resumeLayouts(!0),f.hidden=!1,a.el.addCls(g),a.isCollapsingOrExpanding=2,c?(e=a.getXY(),a.setLocalXY(c[0],c[1]),a.setXY([e[0],e[1]],{duration:Ext.Number.from(d,Ext.fx.Anim.prototype.duration),listeners:{scope:a,afteranimate:function(){var a=this;a.el.removeCls(g),a.isCollapsingOrExpanding=0,a.fireEvent("expand",a)}}})):(a.el.hide(),a.placeholder.el.show(),a.placeholder.hidden=!1,a.setHiddenState(!1),a.el.slideIn(a.convertCollapseDir(h),{preserveScroll:!0,duration:Ext.Number.from(d,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:a.doPlaceholderExpand,scope:a}}))):(a.floated=a.collapsed=!1,a.doPlaceholderExpand(!0)),a},doPlaceholderExpand:function(e){var a=this,c=a.placeholder,d=a.collapseTool,b=c.expandTool;e&&(Ext.suspendLayouts(),a.show()),a.el.removeCls(Ext.panel.Panel.floatCls),c.hide(),e?Ext.resumeLayouts(!0):a.updateLayout(),a.focusHeaderCollapseTool&&d&&d.focus(),a.focusHeaderCollapseTool=!1,c.ariaEl.dom.setAttribute("aria-expanded",!0),a.ariaEl.dom.setAttribute("aria-expanded",!0),b&&b._ariaRole&&(b.ariaEl.dom.setAttribute("role",b._ariaRole),b.ariaEl.dom.setAttribute("aria-label",b._ariaLabel),b._ariaRole=b._ariaLabel=null),a.isCollapsingOrExpanding=0,a.fireEvent("expand",a)},remove:function(a,b){var c=this.dockedItems;return c&&c.contains(a)?this.removeDocked(a,b):this.callParent([a,b]),a},removeBodyCls:function(c){var a=this;return(a.rendered?a.body:a.getProtoBody()).removeCls(c),a},removeUIClsFromElement:function(b){var a=this,c=a.callParent(arguments);return a.removeBodyCls([Ext.baseCSSPrefix+b,a.baseCls+"-body-"+b,a.baseCls+"-body-"+a.ui+"-"+b]),c},restoreDimension:function(){var a=this.collapseDirection;return"top"===a||"bottom"===a?"height":"width"},restoreHiddenDocked:function(){this.setDockedItemsVisibility(this.hiddenOnCollapse,!0)},setBodyStyle:function(a,d){var b=this,c=b.rendered?b.body:b.getProtoBody();return Ext.isFunction(a)&&(a=a()),1===arguments.length?(Ext.isString(a)&&(a=Ext.Element.parseStyles(a)),c.setStyle(a)):c.setStyle(a,d),b},setBorder:function(a,d){if(!d){var b=this,c=b.header;a=a?!0===a?"1px":b.unitizeBox(a):0,c&&(c.isHeader?c.setBorder(a):c.border=a),b.rendered&&!1!==b.bodyBorder&&b.body.setStyle("border-width",a),b.updateLayout(),b.border=a}},setCollapsed:function(a){this[a?"collapse":"expand"]()},setDockedItemsVisibility:function(b,g){var a,e,c=this,f=c.getDockedItems(),h=f.length,d=0;for(!1!==c.header&&(e=c.getReExpander());d<h;d++)(a=f[d])&&a!==e&&a.el&&b.add(a.el);b.setStyle("visibility",g?"":"hidden"),b.clear()},setGlyph:function(b){var a=this,e=a.glyph,c=a.header,d=a.placeholder;b!==e&&(a.glyph=b,c?c.isHeader?c.setGlyph(b):c.glyph=b:(a.rendered||a.afterHeaderInit)&&a.updateHeader(),d&&d.setGlyph&&d.setGlyph(b),a.fireEvent("glyphchange",a,b,e))},setIcon:function(b){var a=this,e=a.icon,c=a.header,d=a.placeholder;b!==e&&(a.icon=b,c?c.isHeader?c.setIcon(b):c.icon=b:(a.rendered||a.afterHeaderInit)&&a.updateHeader(),d&&d.setIcon&&d.setIcon(b),a.fireEvent("iconchange",a,b,e))},setIconCls:function(b){var a=this,e=a.iconCls,c=a.header,d=a.placeholder;b!==e&&(a.iconCls=b,c?c.isHeader?c.setIconCls(b):c.iconCls=b:(a.rendered||a.afterHeaderInit)&&a.updateHeader(),d&&d.setIconCls&&d.setIconCls(b),a.fireEvent("iconclschange",a,b,e))},setTitle:function(b){var a=this,f=a.title,d=a.header,e=a.reExpander,c=a.placeholder;b!==f&&(a.title=b,d?d.isHeader&&d.setTitle(b):(a.rendered||a.afterHeaderInit)&&a.updateHeader(),a.headingEl&&a.headingEl.setHtml(b),e&&e.setTitle(b),c&&c.setTitle&&c.setTitle(b),a.fireEvent("titlechange",a,b,f))},setHiddenDocked:function(){var a=this,b=new Ext.dom.CompositeElement;a.hiddenOnCollapse.add(a.body),b.add(a.body),a.setDockedItemsVisibility(b,!1)},setUI:function(b){var a=this;a.callParent(arguments),a.header&&a.header.rendered&&a.header.setUI(b)},toggleCollapse:function(){return this.collapsed||this.floatedFromCollapse?this.expand():this.collapse()},updateCollapseTool:function(){var c,a=this,b=a.collapseTool;!b&&a.collapsible&&(a.collapseDirection=a.collapseDirection||a.getHeaderPosition()||"top",c={xtype:"tool",handler:a.toggleCollapse,scope:a},a.isAccordionPanel&&(c.focusable=!1,c.ariaRole="presentation"),a.collapseTool=a.expandTool=b=Ext.widget(c)),b&&(a.collapsed&&!a.isPlaceHolderCollapse()?(b.setType("expand-"+a.getOppositeDirection(a.collapseDirection)),b.setTooltip(a.expandToolText)):(b.setType("collapse-"+a.collapseDirection),b.setTooltip(a.collapseToolText)))},navigateAccordion:function(c){var a,b=this,g=b.accordionWrapOver,d="[isAccordionPanel]",e=d+":first",f=d+":last";switch(c.getKey()){case c.UP:case c.LEFT:!(a=b.prev(d))&&g&&(a=b.ownerCt.child(f));break;case c.DOWN:case c.RIGHT:!(a=b.next(d))&&g&&(a=b.ownerCt.child(e));break;case c.HOME:a=b.ownerCt.child(e);break;case c.END:a=b.ownerCt.child(f);break;case c.DELETE:(a=b.prev(d)||b.next(d))||(c.doNotClose=!0)}a&&a!==b&&a.header.titleCmp.focus()},fireDefaultButton:function(d){var a,b=this;if((a=(b.lookupReferenceHolder(!1)||b).lookupReference(b.defaultButton))&&a.click)return a.click(d),d.stopEvent(),!1},maybeClose:function(b){var a=this;a.closable&&(a.navigateAccordion(b),b.doNotClose||a.close())},onFocusEnter:function(c){var a=this,b=a.ariaEl.dom;a.callParent([c]),a.isAccordionPanel&&b&&b.setAttribute("aria-selected",!0)},onFocusLeave:function(c){var a=this,b=a.ariaEl.dom;a.callParent([c]),a.isAccordionPanel&&b&&b.removeAttribute("aria-selected")},updateHeaderPosition:function(b){var a=this.header;a&&a.isHeader&&a.setDock(b)},updateIconAlign:function(b){var a=this.header;a&&a.isHeader&&a.setIconAlign(b)},updateTitleAlign:function(b){var a=this.header;a&&a.isHeader&&a.setTitleAlign(b)},updateTitleRotation:function(b){var a=this.header;a&&a.isHeader&&a.setTitleRotation(b)},unghost:function(e,c,d){var a=this,b=a.ghostPanel;b&&(!1!==e&&(a.el.show(),!1!==c&&(a.setPagePosition(b.getXY()),"offsets"===a.hideMode&&delete a.el.hideModeStyles),d&&a.focus(!1,10)),b.el.hide(),b.setHiddenState(!0))},updateHeader:function(n){var f,b,a=this,c=a.header,e=a.getTitle(),g=a.tools,k=a.getIcon(),j=a.getGlyph(),i=a.getIconCls(),m=j||k||i,d=a.ariaEl.dom,h=a.getHeaderPosition(),l="left"===h||"right"===h;Ext.isObject(c)||!1!==c&&(n||e||m||g&&g.length||a.collapsible&&!a.titleCollapse)?(c&&c.isHeader?c.show():(c=a.header=Ext.widget(Ext.merge({xtype:"header",title:e,titleAlign:a.getTitleAlign(),vertical:l,dock:a.getHeaderPosition()||"top",titleRotation:a.getTitleRotation(),textCls:a.headerTextCls,iconCls:i,iconAlign:a.getIconAlign(),icon:k,glyph:j,baseCls:a.baseCls+"-header",tools:g,ui:a.ui,id:a.id+"_header",overCls:a.headerOverCls,indicateDrag:a.draggable,frame:(a.frame||a.alwaysFramed)&&a.frameHeader,ignoreParentFrame:a.frame||a.overlapHeader,ignoreBorderManagement:a.frame||a.ignoreHeaderBorderManagement,isAccordionHeader:a.isAccordionPanel,ownerCt:a,synthetic:!0,listeners:a.collapsible&&a.titleCollapse?{click:a.toggleCollapse,scope:a}:null},a.header)),a.addDocked(c,0)),a.isAccordionPanel?d?(d.setAttribute("aria-labelledby",c.id+"-title"),d.removeAttribute("aria-label")):((b=a.ariaRenderAttributes||(a.ariaRenderAttributes={}))["aria-labelledby"]=c.id+"-title",delete b["aria-label"]):e?"tabpanel"!==a.ariaRole&&(d?(d.setAttribute("aria-labelledby",c.id+"-title-textEl"),d.removeAttribute("aria-label")):((b=a.ariaRenderAttributes||(a.ariaRenderAttributes={}))["aria-labelledby"]=c.id+"-title-textEl",delete b["aria-label"])):a.ariaRenderAttributes&&delete a.ariaRenderAttributes["aria-label"]):(c&&c.hide(),e=Ext.util.Format.stripTags(e),d?d.hasAttribute("aria-labelledby")||(e?d.setAttribute("aria-label",e):d.removeAttribute("aria-label")):(b=a.ariaRenderAttributes||(a.ariaRenderAttributes={}))["aria-labelledby"]||(e?b["aria-label"]=e:delete b["aria-label"])),a.isViewportBorderChild&&!a.hasOwnProperty("ariaRole")&&(a.ariaRole="region"),e&&"region"===a.ariaRole?(f=a.headingEl)?f.setHtml(e):a.rendered?(a.headingEl=Ext.dom.Helper.insertFirst(a.el,{tag:"div",id:a.id+"-headingEl",role:"heading",class:Ext.baseCSSPrefix+"hidden-clip",style:"height:0",html:e},!0),d.removeAttribute("aria-label"),d.setAttribute("aria-labelledby",a.id+"-headingEl")):(a.headingText=a.title,(b=a.ariaRenderAttributes||(a.ariaRenderAttributes={}))["aria-labelledby"]=a.id+"-headingEl",delete b["aria-label"]):a.headingEl&&(a.headingEl.destroy(),a.headingEl=null)},statics:{floatCls:Ext.baseCSSPrefix+"border-region-slide-in"},privates:{addUIToElement:function(){var a=this;a.callParent(arguments),a.addBodyCls(a.baseCls+"-body-"+a.ui)},applyTargetCls:function(a){this.getProtoBody().addCls(a)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var a=this;return a.body||a.protoBody||a.frameBody||a.el},initDraggable:function(){var a=this;a.simpleDrag?a.initSimpleDraggable():a.dd=new Ext.panel.DD(a,Ext.isBoolean(a.draggable)?null:a.draggable)},initResizable:function(){this.callParent(arguments),this.collapsed&&this.resizer.disable()},initSimpleDraggable:function(){var b,c,a=this;a.header||a.updateHeader(!0),a.header&&(b=Ext.applyIf({el:a.el,delegate:"#"+a.header.id},a.draggable),(a.constrain||a.constrainHeader)&&(b.constrain=a.constrain,b.constrainDelegate=a.constrainHeader,b.constrainTo=a.constrainTo||a.container),c=a.dd=new Ext.util.ComponentDragger(a,b),a.relayEvents(c,["dragstart","drag","dragend"]),a.maximized&&c.disable())},removeUIFromElement:function(){var a=this;a.callParent(arguments),a.removeBodyCls(a.baseCls+"-body-"+a.ui)},setupRenderTpl:function(a){this.callParent(arguments),this.setupDockingRenderTpl(a)},slideOutFloatedPanel:function(e){function c(){a.slideOutFloatedPanelEnd(),a.el.removeCls(Ext.baseCSSPrefix+"border-region-slide-in")}var b,a=this,d=a.el;if(!a.isSliding&&!a.destroyed){if(a.isSliding=!0,a.floated=!1,a.slideOutFloatedPanelBegin(),e)return d.hide(),c();"string"==typeof a.collapsed&&(b=a.convertCollapseDir(a.collapsed)),d.slideOut(b,{preserveScroll:!0,duration:Ext.Number.from(a.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:c}})}},slideOutFloatedPanelBegin:function(){var a=this,b=a.placeholder.el,c=a.el;a.collapsed=a.floatedFromCollapse,a.setHiddenState(!0),a.floatedFromCollapse=null,b.un("mouseleave",a.onMouseLeaveFloated,a),c.un("mouseleave",a.onMouseLeaveFloated,a),b.un("mouseenter",a.onMouseEnterFloated,a),c.un("mouseenter",a.onMouseEnterFloated,a)},slideOutFloatedPanelEnd:function(b){var a=this;a.collapseTool&&a.collapseTool.el.show(),a.slideOutTask.cancel(),a.isSliding=!1,b||a.fireEvent("unfloat",a)}}},function(){var a=this.prototype;a.animCollapse=Ext.enableFx,a.placeholderCollapseHideMode=Ext.Element.VISIBILITY}),Ext.define("Ext.container.Monitor",{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,disabled:0,constructor:function(a){Ext.apply(this,a)},bind:function(b){var a=this;(a.target=b).on("beforedestroy",a.disable,a),a.onContainerAdd(b)},unbind:function(){var a=this,b=a.target;b&&b.un("beforedestroy",a.disable,a),a.items=null},disable:function(){++this.disabled},enable:function(){0<this.disabled&&--this.disabled},handleAdd:function(b,a){this.disabled||(a.is(this.selector)&&this.onItemAdd(a.ownerCt,a),a.isQueryable&&this.onContainerAdd(a))},onItemAdd:function(e,b){var a=this,d=a.items,c=a.addHandler;a.disabled||(c&&c.call(a.scope||b,b),d&&d.add(b))},onItemRemove:function(e,b){var a=this,d=a.items,c=a.removeHandler;a.disabled||(c&&c.call(a.scope||b,b),d&&d.remove(b))},onContainerAdd:function(c,i){var d,e,b,f,a=this,h=a.handleAdd,g=a.handleRemove;if(c.isContainer&&(c.on("add",h,a),c.on("dockedadd",h,a),c.on("remove",g,a),c.on("dockedremove",g,a)),!0!==i)for(b=0,e=(d=c.query(a.selector)).length;b<e;++b)f=d[b],a.onItemAdd(f.ownerCt,f);for(b=0,e=(d=c.query(">container")).length;b<e;++b)a.onContainerAdd(d[b],!0)},handleRemove:function(c,a){var b=this;b.disabled||(a.is(b.selector)&&b.onItemRemove(c,a),a.isQueryable&&b.onContainerRemove(c,a))},onContainerRemove:function(g,c){var b,a,e,f,d=this;if(c.destroyed||c.destroying||!c.isContainer)d.invalidateItems(!0);else{for(d.removeCtListeners(c),a=0,e=(b=c.query(d.selector)).length;a<e;++a)f=b[a],d.onItemRemove(f.ownerCt,f);for(a=0,e=(b=c.query("container")).length;a<e;++a)d.removeCtListeners(b[a])}},removeCtListeners:function(b){var a=this;b.un("add",a.handleAdd,a),b.un("dockedadd",a.handleAdd,a),b.un("remove",a.handleRemove,a),b.un("dockedremove",a.handleRemove,a)},getItems:function(){var b=this,a=b.items;return a||(a=b.items=new Ext.util.MixedCollection).addAll(b.target.query(b.selector)),a},invalidateItems:function(c){var a=this,b=a.invalidateHandler;c&&b&&b.call(a.scope||a,a),a.items=null}}),Ext.define("Ext.plugin.Responsive",{extend:Ext.mixin.Responsive,alias:"plugin.responsive",pluginId:"responsive",isPlugin:!0,constructor:function(c){var a=this,b=c.cmp,d=Ext.apply({responsiveConfig:b.responsiveConfig,responsiveFormulas:b.responsiveFormulas},c);delete d.cmp,a.cmp=b,a.initConfig(d),a.transformed&&(b.setConfig(a.transformed),a.transformed=null)},init:Ext.emptyFn,privates:{transformInstanceConfig:function(c){var a=this.callParent([c]);a.ptype&&delete(a=Ext.apply({},a)).ptype,this.transformed=a;var b=Ext.apply({},c);return delete b.ptype,delete b.responsiveConfig,delete b.responsiveFormulas,b},updateResponsiveState:function(){var a=this.getResponsiveState();this.cmp.setConfig(a)}}}),Ext.define("Ext.plugin.Viewport",{extend:Ext.plugin.Responsive,alias:"plugin.viewport",setCmp:function(a){(this.cmp=a)&&!a.isViewport&&(this.decorate(a),a.renderConfigs&&a.flushRenderConfigs(),a.setupViewport())},statics:{decorate:function(a){Ext.applyIf(a.prototype||a,{ariaRole:"application",viewportCls:Ext.baseCSSPrefix+"viewport"}),Ext.override(a,{isViewport:!0,preserveElOnDestroy:!0,initComponent:function(){this.callParent(),this.setupViewport()},getSizeModel:function(){var a=Ext.layout.SizeModel.configured;return a.pairsByHeightOrdinal[a.ordinal]},handleViewportResize:function(){var a=this,b=Ext.dom.Element,d=b.getViewportWidth(),c=b.getViewportHeight();d===a.width&&c===a.height||a.setSize(d,c)},setupViewport:function(){var a=this,b=document.body,c=Ext.scroll.DomScroller;c.document&&(c.document=c.document.destroy()),b.id||(b.id=a.id),b.setAttribute("data-componentid",a.id),a.ariaStaticRoles[a.ariaRole]||b.setAttribute("role",a.ariaRole),b=a.el=Ext.getBody(),Ext.fly(document.documentElement).addCls(a.viewportCls),b.setHeight=b.setWidth=Ext.emptyFn,b.dom.scroll="no",a.allowDomMove=!1,a.renderTo=b,Ext.supports.Touch&&a.addMeta("apple-mobile-web-app-capable","yes"),Ext.getScrollbarSize(),a.width=a.height=void 0,a.initialViewportHeight=Ext.Element.getViewportHeight(),a.initialViewportWidth=Ext.Element.getViewportWidth()},afterLayout:function(a){Ext.supports.Touch&&(document.body.scrollTop=0),this.callParent([a])},onRender:function(){var a=this;a.callParent(arguments),a.width=a.initialViewportWidth,a.height=a.initialViewportHeight,a.initialViewportWidth=a.initialViewportHeight=null,Ext.supports.TouchEvents&&a.mon(Ext.getDoc(),{touchmove:function(a){a.preventDefault()},translate:!1,delegated:!1})},initInheritedState:function(c,d){var a=this,b=Ext.rootInheritedState;c!==b?a.initInheritedState(a.inheritedState=b,a.inheritedStateInner=Ext.Object.chain(b)):a.callParent([c,d])},beforeDestroy:function(){var b,a=this,c=Ext.rootInheritedState;for(b in c)"rtl"!==b&&delete c[b];a.removeUIFromElement(),a.el.removeCls(a.baseCls),Ext.fly(document.body.parentNode).removeCls(a.viewportCls),a.callParent()},addMeta:function(c,b){var a=document.createElement("meta");a.setAttribute("name",c),a.setAttribute("content",b),Ext.getHead().appendChild(a)},privates:{applyTargetCls:function(a){this.el.addCls(a)},disableTabbing:function(){var a=this.el;a&&a.saveTabbableState({skipSelf:!0})},enableTabbing:function(){var a=this.el;a&&a.restoreTabbableState(!0)}}})}},privates:{updateResponsiveState:function(){this.cmp.handleViewportResize(),this.callParent()}}},function(a){a.prototype.decorate=a.decorate}),Ext.define("Ext.container.Viewport",{extend:Ext.container.Container,mixins:[Ext.mixin.Responsive],alias:"widget.viewport",alternateClassName:"Ext.Viewport",ariaRole:"application",privates:{updateResponsiveState:function(){this.handleViewportResize(),this.mixins.responsive.updateResponsiveState.call(this)}}},function(){Ext.plugin.Viewport.decorate(this)}),Ext.define("Ext.layout.container.Anchor",{alias:"layout.anchor",extend:Ext.layout.container.Auto,alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:!0,setsItemSize:!0,beginLayoutCycle:function(f){var b,a,e,d,g,c=0;for(this.callParent(arguments),g=(e=f.childItems).length,d=0;d<g&&(!(b=(a=e[d]).target.anchorSpec)||(a.widthModel.calculated&&b.right&&(c|=1),a.heightModel.calculated&&b.bottom&&(c|=2),3!==c));++d);f.anchorDimensions=c},calculateItems:function(i,b){var h,a,g,c,e,d,j=i.childItems,q=j.length,k=b.gotHeight,l=b.gotWidth,o=b.height,p=b.width,n=(l?1:0)|(k?2:0),f=i.anchorDimensions;if(!f)return!0;for(e=0;e<q;e++)g=(a=j[e]).getMarginInfo(),h=a.target.anchorSpec,l&&a.widthModel.calculated&&(d=h.right(p)-g.width,d=this.adjustWidthAnchor(d,a),a.setWidth(d)),k&&a.heightModel.calculated&&(c=h.bottom(o)-g.height,c=this.adjustHeightAnchor(c,a),a.setHeight(c));return(n&f)===f},anchorFactory:{offset:function(a){return function(b){return b+a}},ratio:function(a){return function(b){return Math.floor(b*a)}},standard:function(a){return function(b){return b-a}}},parseAnchor:function(a,e,d){if(a&&"none"!==a){var c,b=this.anchorFactory;if(this.parseAnchorRE.test(a))return b.standard(d-e);if(-1!==a.indexOf("%"))return b.ratio(.01*parseFloat(a.replace("%","")));if(c=parseInt(a,10),!isNaN(c))return b.offset(c)}return null},adjustWidthAnchor:function(a,b){return a},adjustHeightAnchor:function(a,b){return a},configureItem:function(a){var f,d,e,c=this,b=c.owner,g=a.anchor;c.callParent(arguments),a.anchor||!a.items||Ext.isNumber(a.width)||(a.anchor=g=c.defaultAnchor),b.anchorSize?"number"==typeof b.anchorSize?d=b.anchorSize:(d=b.anchorSize.width,e=b.anchorSize.height):(d=b.initialConfig.width,e=b.initialConfig.height),g&&(f=g.split(" "),a.anchorSpec={right:c.parseAnchor(f[0],a.initialConfig.width,d),bottom:c.parseAnchor(f[1],a.initialConfig.height,e)})},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(e){var b,a=e.anchorSpec,d="$",c=this.sizePolicy;return a&&(b=this.owner.getSizeModel(),a.right&&!b.width.shrinkWrap&&(c=c.r),a.bottom&&!b.height.shrinkWrap&&(d="b")),c[d]}}),Ext.define("Ext.dd.DragTracker",{mixins:{observable:Ext.util.Observable},active:!1,trackOver:!1,tolerance:5,autoStart:!1,constructor:function(b){var a=this;Ext.apply(a,b),a.dragRegion=new Ext.util.Region(0,0,0,0),a.el&&a.initEl(a.el),a.mixins.observable.constructor.call(a),a.disabled&&a.disable()},initEl:function(b){var a=this,c=a.delegate;a.el=b=Ext.get(b),c&&c.isElement&&(a.handle=c),a.delegate=a.handle?void 0:a.delegate,a.handle||(a.handle=b),a.handleListeners={scope:a,delegate:a.delegate,mousedown:a.onMouseDown,dragstart:a.onDragStart},Ext.supports.TouchEvents||!a.trackOver&&!a.overCls||Ext.apply(a.handleListeners,{mouseover:a.onMouseOver,mouseout:a.onMouseOut}),a.mon(a.handle,a.handleListeners),a.keyNav=new Ext.util.KeyNav({target:b,up:a.onResizeKeyDown,left:a.onResizeKeyDown,right:a.onResizeKeyDown,down:a.onResizeKeyDown,scope:a})},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){var a=this;a.endDrag({}),a.el=a.handle=a.onBeforeStart=a.onStart=a.onDrag=a.onEnd=null,a.callParent()},onMouseOver:function(d,h){var f,b,e,g,c,a=this;if(!a.disabled&&(d.within(d.target,!0,!0)||a.delegate)){if(f=a.handleCls,a.mouseIsOut=!1,f)for(e=0,g=a.handleEls.length;e<g;e++)c=(c=(b=a.handleEls[e]).delegateCls)||(b.delegateCls=[f,"-",b.region,"-over"].join("")),b.addCls([c,a.overCls]);a.fireEvent("mouseover",a,d,a.delegate?d.getTarget(a.delegate,h):a.handle)}},onMouseOut:function(e){var c,b,d,a=this;if(a.mouseIsDown)a.mouseIsOut=!0;else{if(a.handleCls)for(b=0,d=a.handleEls.length;b<d;b++)(c=a.handleEls[b]).removeCls([c.delegateCls,a.overCls]);a.fireEvent("mouseout",a,e)}},onMouseDown:function(b,c){var a=this;a.disabled||b.dragTracked||(a.dragTarget=a.delegate?c:a.handle.dom,a.startXY=a.lastXY=b.getXY(),a.startRegion=Ext.fly(a.dragTarget).getRegion(),!1!==a.fireEvent("mousedown",a,b)&&!1!==a.fireEvent("beforedragstart",a,b)&&!1!==a.onBeforeStart(b)&&(a.mouseIsDown=!0,b.dragTracked=!0,a.el.setCapture(),b.stopPropagation(),!1!==a.preventDefault&&b.preventDefault(),Ext.getDoc().on({scope:a,capture:!0,mouseup:a.onMouseUp,mousemove:a.onMouseMove,selectstart:a.stopSelect}),a.dragEnded=!1,a.tolerance?a.autoStart&&(a.timer=Ext.defer(a.triggerStart,!0===a.autoStart?1e3:a.autoStart,a,[b])):a.triggerStart()))},onMouseMove:function(b,e){var a=this,c=b.getXY(),d=a.startXY;if(b.stopPropagation(),!1!==a.preventDefault&&b.preventDefault(),!a.dragEnded){if(a.lastXY=c,!a.active){if(!(Math.max(Math.abs(d[0]-c[0]),Math.abs(d[1]-c[1]))>a.tolerance))return;a.triggerStart(b)}!1===a.fireEvent("mousemove",a,b)?a.onMouseUp(b):(a.onDrag(b),a.fireEvent("drag",a,b))}},onMouseUp:function(b){var a=this;a.mouseIsDown=!1,a.mouseIsOut&&(a.mouseIsOut=!1,a.onMouseOut(b)),!1!==a.preventDefault&&b.preventDefault(),Ext.isIE&&document.releaseCapture&&document.releaseCapture(),a.fireEvent("mouseup",a,b),a.endDrag(b)},endDrag:function(b){var a=this,c=a.active;Ext.getDoc().un({mousemove:a.onMouseMove,mouseup:a.onMouseUp,selectstart:a.stopSelect,capture:!0,scope:a}),a.clearStart(),a.active=!1,c&&(a.dragEnded=!0,a.onEnd(b),a.fireEvent("dragend",a,b)),a._constrainRegion=null},triggerStart:function(b){var a=this;a.clearStart(),a.active=!0,a.onStart(b),a.fireEvent("dragstart",a,b)},clearStart:function(){var a=this.timer;a&&(clearTimeout(a),this.timer=null)},stopSelect:function(a){return a.stopEvent(),!1},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var a=this;if(a.constrainTo){if(a.constrainTo instanceof Ext.util.Region)return a.constrainTo;a._constrainRegion||(a._constrainRegion=Ext.fly(a.constrainTo).getViewRegion())}else a._constrainRegion||(a._constrainRegion=a.getDragCt().getViewRegion());return a._constrainRegion},getXY:function(a){return a?this.constrainModes[a](this,this.lastXY):this.lastXY},getOffset:function(c){var a=this.getXY(c),b=this.startXY;return[a[0]-b[0],a[1]-b[1]]},onDragStart:function(a){a.stopPropagation()},constrainModes:{point:function(d,b){var a=d.dragRegion,c=d.getConstrainRegion();return c?(a.x=a.left=a[0]=a.right=b[0],a.y=a.top=a[1]=a.bottom=b[1],a.constrainTo(c),[a.left,a.top]):b},dragTarget:function(e,c){var d,f=e.startXY,a=e.startRegion.copy(),b=e.getConstrainRegion();return b&&(a.translateBy(c[0]-f[0],c[1]-f[1]),a.right>b.right&&(c[0]+=d=b.right-a.right,a.left+=d),a.left<b.left&&(c[0]+=b.left-a.left),a.bottom>b.bottom&&(c[1]+=d=b.bottom-a.bottom,a.top+=d),a.top<b.top&&(c[1]+=b.top-a.top)),c}}}),Ext.define("Ext.resizer.SplitterTracker",{extend:Ext.dd.DragTracker,enabled:!0,overlayCls:Ext.baseCSSPrefix+"resizable-overlay",createDragOverlay:function(){var a,b=Ext.dom.Element;(a=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"})).unselectable(),a.setSize(b.getDocumentWidth(),b.getDocumentHeight()),a.show()},getPrevCmp:function(){return this.getSplitter().previousSibling(":not([hidden])")},getNextCmp:function(){return this.getSplitter().nextSibling(":not([hidden])")},onBeforeStart:function(g){var d,a=this,c=a.getPrevCmp(),b=a.getNextCmp(),e=a.getSplitter().collapseEl,f=g.getTarget();return!(!c||!b)&&((!e||f!==e.dom)&&(!b.collapsed&&!c.collapsed&&(a.prevBox=c.getEl().getBox(),a.nextBox=b.getEl().getBox(),a.constrainTo=d=a.calculateConstrainRegion(),d||!1)))},onStart:function(b){var a=this.getSplitter();this.createDragOverlay(),a.addCls(a.baseCls+"-active")},onResizeKeyDown:function(b){var c,a=this,d=a.getSplitter(),f=b.getKey(),e="vertical"===d.orientation?0:1,g=f===b.UP||f===b.LEFT?-1:1;!a.active&&a.onBeforeStart(b)&&(Ext.fly(b.target).on("keyup",a.onResizeKeyUp,a),a.triggerStart(b),a.onMouseDown(b),a.startXY=d.getXY(),a.lastKeyDownXY=Ext.Array.slice(a.startXY),(c=a.easing=new Ext.fx.easing.Linear).setStartTime(Ext.Date.now()),c.setStartValue(1),c.setEndValue(4),c.setDuration(2e3)),a.active&&(a.lastKeyDownXY[e]=Math.round(a.lastKeyDownXY[e]+g*a.easing.getValue()),a.lastXY=a.lastKeyDownXY,d.setXY(a.getXY("dragTarget")))},onResizeKeyUp:function(a){this.onMouseUp(a)},calculateConstrainRegion:function(){var i,h,d,a=this,k=a.getSplitter(),j=k.getWidth(),e=k.defaultSplitMin,l=k.orientation,c=a.prevBox,g=a.getPrevCmp(),b=a.nextBox,f=a.getNextCmp();return h="vertical"===l?(d={prevCmp:g,nextCmp:f,prevBox:c,nextBox:b,defaultMin:e,splitWidth:j},i=new Ext.util.Region(c.y,a.getVertPrevConstrainRight(d),c.bottom,a.getVertPrevConstrainLeft(d)),new Ext.util.Region(b.y,a.getVertNextConstrainRight(d),b.bottom,a.getVertNextConstrainLeft(d))):(i=new Ext.util.Region(c.y+(g.minHeight||e),c.right,(g.maxHeight?c.y+g.maxHeight:b.bottom-(f.minHeight||e))+j,c.x),new Ext.util.Region((f.maxHeight?b.bottom-f.maxHeight:c.y+(g.minHeight||e))-j,b.right,b.bottom-(f.minHeight||e),b.x)),i.intersect(h)},performResize:function(p,b){for(var g,a,c=this,k=c.getSplitter(),n=k.orientation,f=c.getPrevCmp(),e=c.getNextCmp(),l=k.ownerCt,j=l.query(">[flex]"),o=j.length,h="vertical"===n,i=0,d=h?"width":"height";i<o;i++)g=j[i],a=h?g.getWidth():g.getHeight(),g.flex=a;b=h?b[0]:b[1],f&&(a=c.prevBox[d]+b,f.flex?f.flex=a:f[d]=a),e&&(a=c.nextBox[d]-b,e.flex?e.flex=a:e[d]=a),l.updateLayout()},endDrag:function(){var a=this;a.overlay&&(a.overlay.destroy(),delete a.overlay),a.callParent(arguments)},onEnd:function(c){var a=this,b=a.getSplitter();b.removeCls(b.baseCls+"-active"),a.performResize(c,a.getResizeOffset())},onDrag:function(f){var a=this,d=a.getOffset("dragTarget"),b=a.getSplitter(),c=b.getEl();"vertical"===b.orientation?c.setX(a.startRegion.left+d[0]):c.setY(a.startRegion.top+d[1])},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(a){return(a.prevCmp.maxWidth?a.prevBox.x+a.prevCmp.maxWidth:a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin))+a.splitWidth},getVertPrevConstrainLeft:function(a){return a.prevBox.x+(a.prevCmp.minWidth||a.defaultMin)},getVertNextConstrainRight:function(a){return a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin)},getVertNextConstrainLeft:function(a){return(a.nextCmp.maxWidth?a.nextBox.right-a.nextCmp.maxWidth:a.prevBox.x+(a.prevBox.minWidth||a.defaultMin))-a.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}}),Ext.define("Ext.dd.DDTarget",{extend:Ext.dd.DragDrop,constructor:function(a,c,b){a&&this.initTarget(a,c,b)},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return"DDTarget "+this.id}}),Ext.define("Ext.dd.ScrollManager",{singleton:!0,dirTrans:{up:-1,left:-1,down:1,right:1},constructor:function(){var a=Ext.dd.DragDropManager;a.fireEvents=Ext.Function.createSequence(a.fireEvents,this.onFire,this),a.stopDrag=Ext.Function.createSequence(a.stopDrag,this.onStop,this),this.doScroll=this.doScroll.bind(this),this.ddmInstance=a,this.els={},this.dragEl=null,this.proc={}},onStop:function(b){var a=Ext.dd.ScrollManager;a.dragEl=null,a.clearProc()},triggerRefresh:function(){this.ddmInstance.dragCurrent&&this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)},doScroll:function(){var d=this;if(d.ddmInstance.dragCurrent){function f(){d.triggerRefresh()}var b=d.proc,h=b.el,g=b.component,c=b.el.ddScrollConfig,e=c&&c.increment?c.increment:d.increment,a=c&&"animate"in c?c.animate:d.animate;a&&(!0===a?a={callback:f}:a.callback=a.callback?Ext.Function.createSequence(a.callback,f):f),g?(e*=d.dirTrans[b.dir],"up"===b.dir||"down"===b.dir?g.scrollBy(0,e,a):g.scrollBy(e,0,a)):h.scroll(b.dir,e,a),a||f()}},clearProc:function(){var a=this.proc;a.id&&clearInterval(a.id),a.id=0,a.el=null,a.dir=""},startProc:function(a,f){var c,e,b=this,d=b.proc;b.clearProc(),d.el=a,d.dir=f,c=a.ddScrollConfig?a.ddScrollConfig.ddGroup:void 0,e=a.ddScrollConfig&&a.ddScrollConfig.frequency?a.ddScrollConfig.frequency:b.frequency,void 0!==c&&b.ddmInstance.dragCurrent.ddGroup!==c||(d.id=Ext.interval(b.doScroll,e))},onFire:function(j,i){var d,f,g,h,b,c,e,a=this;if(!i&&a.ddmInstance.dragCurrent){for(h in a.dragEl&&a.dragEl===a.ddmInstance.dragCurrent||(a.dragEl=a.ddmInstance.dragCurrent,a.refreshCache()),d=j.getPoint(),f=a.proc,g=a.els)if(c=(b=g[h])._region,e=b.ddScrollConfig||a,c&&c.contains(d)&&b.isScrollable()){if(c.bottom-d.y<=e.vthresh)return void(f.el!==b&&a.startProc(b,"down"));if(c.right-d.x<=e.hthresh)return void(f.el!==b&&a.startProc(b,"right"));if(d.y-c.top<=e.vthresh)return void(f.el!==b&&a.startProc(b,"up"));if(d.x-c.left<=e.hthresh)return void(f.el!==b&&a.startProc(b,"left"))}a.clearProc()}},register:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;b<c;b++)this.register(a[b]);else a=Ext.get(a),this.els[a.id]=a},unregister:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;b<c;b++)this.unregister(a[b]);else a=Ext.get(a),delete this.els[a.id]},vthresh:25*(window.devicePixelRatio||1),hthresh:25*(window.devicePixelRatio||1),increment:100,frequency:500,animate:!0,animDuration:.4,ddGroup:void 0,refreshCache:function(){var b,a=this.els;for(b in a)"object"==typeof a[b]&&(a[b]._region=a[b].getRegion())}}),Ext.define("Ext.dd.DropTarget",{extend:Ext.dd.DDTarget,constructor:function(b,a){this.el=Ext.get(b),Ext.apply(this,a),this.containerScroll&&Ext.dd.ScrollManager.register(this.el),this.callParent([this.el.dom,this.ddGroup||this.group,{isTarget:!0}])},containerScroll:!1,dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(b,c,a){return this.overClass&&this.el.addCls(this.overClass),this.dropAllowed},notifyOver:function(b,c,a){return this.dropAllowed},notifyOut:function(b,c,a){this.overClass&&this.el.removeCls(this.overClass)},notifyDrop:function(b,c,a){return this.overClass&&this.el.removeCls(this.overClass),!1},destroy:function(){this.callParent(),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}}),Ext.define("Ext.dd.DragZone",{extend:Ext.dd.DragSource,constructor:function(a,d){var c=this,b=c.containerScroll;c.callParent([a,d]),b&&(a=c.scrollEl||a,a=Ext.get(a),Ext.isObject(b)&&(a.ddScrollConfig=b),Ext.dd.ScrollManager.register(a))},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){return this.proxy.update(this.dragData.ddel.cloneNode(!0)),this.onStartDrag(a,b),!0},getRepairXY:function(a){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){this.callParent(),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}}),Ext.define("Ext.dd.Registry",{singleton:!0,constructor:function(){this.elements={},this.handles={},this.autoIdSeed=0},getId:function(a,c){if("string"==typeof a)return a;var b=a.id;return b||!1===c||(b="extdd-"+ ++this.autoIdSeed,a.id=b),b},register:function(b,a){if(a=a||{},"string"==typeof b&&(b=document.getElementById(b)),a.ddel=b,!1!==(this.elements[this.getId(b)]=a).isHandle&&(this.handles[a.ddel.id]=a),a.handles){var c,d,e=a.handles;for(c=0,d=e.length;c<d;c++)this.handles[this.getId(e[c])]=a}},unregister:function(f){var c,a,d,e=this.getId(f,!1),b=this.elements[e];if(b&&(delete this.elements[e],b.handles))for(a=0,d=(c=b.handles).length;a<d;a++)delete this.handles[this.getId(c[a],!1)]},getHandle:function(a){return"string"!=typeof a&&(a=a.id),this.handles[a]},getHandleFromEvent:function(b){var a=b.getTarget();return a?this.handles[a.id]:null},getTarget:function(a){return"string"!=typeof a&&(a=a.id),this.elements[a]},getTargetFromEvent:function(b){var a=b.getTarget();return a?this.elements[a.id]||this.handles[a.id]:null}}),Ext.define("Ext.dd.DropZone",{extend:Ext.dd.DropTarget,getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(d,b,c,a){},onNodeOver:function(d,b,c,a){return this.dropAllowed},onNodeOut:function(d,b,c,a){},onNodeDrop:function(d,b,c,a){return!1},onContainerOver:function(b,c,a){return this.dropNotAllowed},onContainerDrop:function(b,c,a){return!1},notifyEnter:function(b,c,a){return this.dropNotAllowed},notifyOver:function(d,b,c){var a=this,e=a.getTargetFromEvent(b);return e?(a.lastOverNode!==e&&(a.lastOverNode&&a.onNodeOut(a.lastOverNode,d,b,c),a.onNodeEnter(e,d,b,c),a.lastOverNode=e),a.onNodeOver(e,d,b,c)):(a.lastOverNode&&(a.onNodeOut(a.lastOverNode,d,b,c),a.lastOverNode=null),a.onContainerOver(d,b,c))},notifyOut:function(b,c,a){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,b,c,a),this.lastOverNode=null)},notifyDrop:function(d,b,c){var a=this,e=a.getTargetFromEvent(b),f=e?a.onNodeDrop(e,d,b,c):a.onContainerDrop(d,b,c);return a.lastOverNode&&(a.onNodeOut(a.lastOverNode,d,b,c),a.lastOverNode=null),f},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}}),Ext.define("Ext.event.publisher.MouseEnterLeave",{extend:Ext.event.publisher.Dom,type:"mouseEnterLeave"},function(a){var b={mouseover:"mouseenter",mouseout:"mouseleave"};Ext.supports.MouseEnterLeave||a.override({handledDomEvents:["mouseover","mouseout"],handledEvents:["mouseenter","mouseleave"],doDelegatedEvent:function(a){var g,f,h,d,e,c;g=(a=this.callParent([a])).getTarget(),(f=a.getRelatedTarget())&&Ext.fly(g).contains(f)||(h=g.id)&&(d=Ext.cache[h])&&(e=b[a.type],a=a.chain({type:e}),d.hasListeners[e]&&(c=(c=d.events[e])&&c.directs)&&(a.setCurrentTarget(d.dom),c.fire(a,a.target)))}}),a.instance=new a}),Ext.define("Ext.form.action.Action",{alternateClassName:"Ext.form.Action",submitEmptyText:!0,constructor:function(a){a&&Ext.apply(this,a);var b=a.params;Ext.isString(b)&&(this.params=Ext.Object.fromQueryString(b))},run:Ext.emptyFn,onFailure:function(c){var a=this.form,b=a&&!a.destroying&&!a.destroyed;this.response=c,this.failureType=Ext.form.action.Action.CONNECT_FAILURE,b&&a.afterAction(this,!1)},processResponse:function(a){return!(this.response=a).responseText&&!a.responseXML||(this.result=this.handleResponse(a))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var a=this;return{success:a.onSuccess,failure:a.onFailure,scope:a,timeout:1e3*(a.timeout||a.form.timeout)}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}}),Ext.define("Ext.form.action.Load",{extend:Ext.form.action.Action,alternateClassName:"Ext.form.Action.Load",alias:"formaction.load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(d){var b=this.processResponse(d),a=this.form,c=a&&!a.destroying&&!a.destroyed;if(!0===b||!b.success||!b.data)return this.failureType=Ext.form.action.Action.LOAD_FAILURE,void(c&&a.afterAction(this,!1));c&&(a.clearInvalid(),a.setValues(b.data),a.afterAction(this,!0))},handleResponse:function(b){var a,d,c=this.form.reader;return c?(d=(a=c.read(b)).records&&a.records[0]?a.records[0].data:null,{success:a.success,data:d}):Ext.decode(b.responseText)}}),Ext.define("Ext.form.action.Submit",{extend:Ext.form.action.Action,alternateClassName:"Ext.form.Action.Submit",alias:"formaction.submit",type:"submit",run:function(){var a=this,b=a.form;!1===a.clientValidation||b.isValid()?a.doSubmit():(a.failureType=Ext.form.action.Action.CLIENT_INVALID,b.afterAction(a,!1))},doSubmit:function(){var c,a=this,b=Ext.apply(a.createCallback(),{url:a.getUrl(),method:a.getMethod(),headers:a.headers}),e=a.form,d=a.jsonSubmit||e.jsonSubmit,f=d?"jsonData":"params";e.hasUpload()?(c=a.buildForm(),b.form=c.formEl,b.isUpload=!0):b[f]=a.getParams(d),Ext.Ajax.request(b),c&&a.cleanup(c)},cleanup:function(b){var a,c,e=b.formEl,f=b.uploadEls,d=b.uploadFields,g=d.length;for(a=0;a<g;++a)(c=d[a]).clearOnSubmit||c.restoreInput(f[a]);e&&Ext.removeNode(e)},getParams:function(b){var c=this.callParent(),d=this.form.getValues(!1,!1,!1!==this.submitEmptyText,b,!0);return Ext.apply({},d,c)},buildForm:function(){var f,i,b,k,e,d,g,p,m,a=this,h=[],q=a.form,j=a.getParams(),c=[],n=[],o=q.getFields().items,l=o.length;for(b=0;b<l;++b)(k=o[b]).isFileUpload()&&c.push(k);for(e in j)if(j.hasOwnProperty(e))if(d=j[e],Ext.isArray(d))for(p=d.length,g=0;g<p;g++)h.push(a.getFieldConfig(e,d[g]));else h.push(a.getFieldConfig(e,d));for(f={tag:"form",role:"presentation",action:a.getUrl(),method:a.getMethod(),target:a.target?Ext.isString(a.target)?a.target:Ext.fly(a.target).dom.name:"_self",style:"display:none",cn:h},c.length&&(f.encoding=f.enctype="multipart/form-data"),i=Ext.DomHelper.append(Ext.getBody(),f),l=c.length,b=0;b<l;++b)m=c[b].extractFileInput(),i.appendChild(m),n.push(m);return{formEl:i,uploadFields:c,uploadEls:n}},getFieldConfig:function(b,a){return{tag:"input",type:"hidden",name:b,value:Ext.String.htmlEncode(a)}},onSuccess:function(e){var a=this.form,c=a&&!a.destroying&&!a.destroyed,d=!0,b=this.processResponse(e);!0===b||b.success||(b.errors&&c&&a.markInvalid(b.errors),this.failureType=Ext.form.action.Action.SERVER_INVALID,d=!1),c&&a.afterAction(this,d)},handleResponse:function(g){var e,a,b,h,c,d,f=this.form.errorReader;if(f){if(a=[],c=(e=f.read(g)).records)for(b=0,h=c.length;b<h;b++)a[b]=c[b].data;a.length<1&&(a=null),d={success:e.success,errors:a}}else try{d=Ext.decode(g.responseText)}catch(j){d={success:!1,errors:[]}}return d}}),Ext.define("Ext.util.ComponentDragger",{extend:Ext.dd.DragTracker,autoStart:500,constructor:function(b,a){this.comp=b,this.initialConstrainTo=a.constrainTo,this.callParent([a])},onStart:function(c){var a=this,b=a.comp;a.startPosition=b.getXY(),b.ghost&&!b.liveDrag&&(a.proxy=b.ghost(),a.dragTarget=a.proxy.header.el),(a.constrain||a.constrainDelegate)&&(a.constrainTo=a.calculateConstrainRegion()),b.beginDrag&&b.beginDrag(),b.el.shim&&b.el.maskIframes()},calculateConstrainRegion:function(){var d,f,c=this,h=c.comp,b=c.initialConstrainTo,a=h.constraintInsets,j=c.proxy?c.proxy.el:h.el,g=j.shadow,e=g&&!c.constrainDelegate&&h.constrainShadow&&!g.disabled?g.getShadowSize():0;return b=b instanceof Ext.util.Region?b.copy():Ext.fly(b).getConstrainRegion(),a&&(a=Ext.isObject(a)?a:Ext.Element.parseBox(a),b.adjust(a.top,a.right,a.bottom,a.left)),e&&b.adjust(e[0],-e[1],-e[2],e[3]),c.constrainDelegate||(d=Ext.fly(c.dragTarget).getRegion(),f=j.getRegion(),b.adjust(d.top-f.top,d.right-f.right,d.bottom-f.bottom,d.left-f.left)),b},onDrag:function(d){var a=this,c=a.proxy&&!a.comp.liveDrag?a.proxy:a.comp,b=a.getOffset(a.constrain||a.constrainDelegate?"dragTarget":null);c.setPagePosition(a.startPosition[0]+b[0],a.startPosition[1]+b[1])},onEnd:function(b){var a=this.comp;a.destroyed||a.destroying||(this.proxy&&!a.liveDrag&&a.unghost(),a.endDrag&&a.endDrag(),a.el.shim&&a.el.unmaskIframes())}}),Ext.define("Ext.util.FocusTrap",{extend:Ext.Mixin,mixinConfig:{id:"focustrap",after:{afterRender:"initTabGuards",addTool:"initTabGuards",add:"initTabGuards",remove:"initTabGuards",addDocked:"initTabGuards",removeDocked:"initTabGuards",onShow:"initTabGuards",afterHide:"initTabGuards"}},config:{tabGuard:!0,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" role="button" data-tabguardposition="{tabGuard}" aria-busy="true" style="height:0"class="'+Ext.baseCSSPrefix+'hidden-clip"></div>',tabGuardIndex:0},tabGuardPositionAttribute:"data-tabguardposition",privates:{initTabGuards:function(){var b,a=this,f=a.tabGuardPositionAttribute,c=a.tabGuardBeforeEl,d=a.tabGuardAfterEl,e=a.tabGuardIndex;a.rendered&&a.tabGuard&&((b=a.el.findTabbableElements({skipSelf:!0}))[0]&&b[0].hasAttribute(f)&&b.shift(),b.length&&b[b.length-1].hasAttribute(f)&&b.pop(),b.length?(c.dom.setAttribute("tabIndex",e),c.on("focusenter",a.onTabGuardFocusEnter,a),d.dom.setAttribute("tabIndex",e),d.on("focusenter",a.onTabGuardFocusEnter,a)):(c.dom.removeAttribute("tabIndex"),c.un("focusenter",a.onTabGuardFocusEnter,a),d.dom.removeAttribute("tabIndex"),d.un("focusenter",a.onTabGuardFocusEnter,a)))},onTabGuardFocusEnter:function(j,i){var a,c,b,e=this.el,g=this.tabGuardPositionAttribute,f=i.getAttribute(g),d=j.relatedTarget;c=!d.hasAttribute(g)&&d!==e.dom&&e.contains(d)?"before"!==f:"before"===f,(a=e.findTabbableElements({skipSelf:!0})).shift(),a.pop(),(b=c?a[0]:a[a.length-1])&&b.focus()}}}),Ext.define("Ext.window.Window",{extend:Ext.panel.Panel,alternateClassName:"Ext.Window",mixins:[Ext.util.FocusTrap],alias:"widget.window",baseCls:Ext.baseCSSPrefix+"window",resizable:!0,draggable:!0,constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:50,minWidth:50,expandOnShow:!0,collapsible:!1,closable:!0,hidden:!0,autoRender:!0,hideMode:"offsets",floating:!0,itemCls:Ext.baseCSSPrefix+"window-item",overlapHeader:!0,ignoreHeaderBorderManagement:!0,alwaysFramed:!0,isRootCfg:{isRoot:!0},isWindow:!0,ariaRole:"dialog",initComponent:function(){var a=this;a.frame=!1,a.callParent(),a.plain&&a.addClsWithUI("plain"),a.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var a;return(a=this.callParent()).tabIndex=-1,a},getFocusEl:function(){return this.getDefaultFocus()||this.el},getState:function(){var b,a=this,e=a.callParent()||{},c=!!a.maximized,d=a.ghostBox;return b=(e.maximized=c)?a.restorePos:d?[d.x,d.y]:a.getPosition(),Ext.apply(e,{size:c?a.restoreSize:a.getSize(),pos:b}),e},applyState:function(a){var b=this;a&&(b.maximized=a.maximized,b.maximized?(b.hasSavedRestore=!0,b.restoreSize=a.size,b.restorePos=a.pos):Ext.apply(b,{width:a.size.width,height:a.size.height,x:a.pos[0],y:a.pos[1]}))},onRender:function(c,b){var a=this;a.callParent(arguments),a.header&&a.header.on({scope:a,click:a.onHeaderClick}),a.maximizable&&a.header.on({scope:a,dblclick:a.toggleMaximize})},afterRender:function(){var b,a=this,c=a.header;a.maximized&&(a.maximized=!1,a.maximize(),c&&c.removeCls(c.indicateDragCls)),a.callParent(),a.closable?(b=a.getKeyMap()).on(27,a.onEsc,a):b=a.keyMap,b&&a.hidden&&b.disable()},onEsc:function(b,a){a.stopEvent(),this.close()},beforeDestroy:function(){var a=this;a.rendered&&(Ext.un("resize",a.onWindowResize,a),delete a.animateTarget,a.hide(),Ext.destroy(a.keyMap)),a.callParent()},addTools:function(){var a=this,b=[];a.callParent(),a.minimizable&&b.push({type:"minimize",handler:"minimize",scope:a}),a.maximizable&&b.push({type:a.maximized?"restore":"maximize",handler:"toggleMaximize",scope:a}),b.length&&a.addTool(b)},onShow:function(){var a=this;a.callParent(arguments),a.expandOnShow&&a.expand(!1),a.syncMonitorWindowResize(),a.keyMap&&a.keyMap.enable()},doClose:function(){var a=this;a.hidden?(a.fireEvent("close",a),"destroy"===a.closeAction&&a.destroy()):a.hide(a.animateTarget,a.doClose,a)},afterHide:function(){var a=this;a.syncMonitorWindowResize(),a.keyMap&&a.keyMap.disable(),a.callParent(arguments)},onWindowResize:function(){var b,a=this;a.destroyed||(a.maximized?a.fitContainer():(((b=a.getSizeModel()).width.natural||b.height.natural)&&a.updateLayout(),a.doConstrain()))},minimize:function(){return this.fireEvent("minimize",this),this},resumeHeaderLayout:function(a){this.header.resumeLayouts(a?this.isRootCfg:null)},afterCollapse:function(){var a=this,b=a.header,c=a.tools;b&&a.maximizable&&(b.suspendLayouts(),c.maximize.hide(),this.resumeHeaderLayout(!0)),a.resizer&&a.resizer.disable(),a.callParent(arguments)},afterExpand:function(){var b,a=this,c=a.header,d=a.tools;c&&(c.suspendLayouts(),a.maximizable&&(d.maximize.show(),b=!0),this.resumeHeaderLayout(b)),a.resizer&&a.resizer.enable(),a.callParent(arguments)},maximize:function(c){var d,a=this,b=a.header,f=a.tools,g=a.width,e=a.height;return a.maximized||(a.expand(!1),a.hasSavedRestore||(a.restoreSize={width:g||null,height:e||null},a.restorePos=a.getPosition()),b&&(b.suspendLayouts(),f.maximize&&f.maximize.setType("restore"),a.collapseTool&&(a.collapseTool.hide(),d=!0),a.resumeHeaderLayout(d)),a.el.disableShadow(),a.dd&&(a.dd.disable(),b&&b.removeCls(b.indicateDragCls)),a.resizer&&a.resizer.disable(),a.el.addCls(Ext.baseCSSPrefix+"window-maximized"),a.container.addCls(Ext.baseCSSPrefix+"window-maximized-ct"),a.syncMonitorWindowResize(),a.fitContainer(c=c||a.animateTarget?{callback:function(){a.maximized=!0,a.fireEvent("maximize",a)}}:null),c||(a.maximized=!0,a.fireEvent("maximize",a))),a},restore:function(c){var e,a=this,f=a.tools,b=a.header,d=a.restoreSize;return a.maximized&&(a.hasSavedRestore=null,a.removeCls(Ext.baseCSSPrefix+"window-maximized"),b&&(b.suspendLayouts(),f.maximize&&f.maximize.setType("maximize"),a.collapseTool&&(a.collapseTool.show(),e=!0),a.resumeHeaderLayout(e)),d.x=a.restorePos[0],d.y=a.restorePos[1],a.setBox(d,c=c||a.animateTarget?{callback:function(){a.el.enableShadow(null,!0),a.maximized=!1,a.fireEvent("restore",a)}}:null),a.restorePos=a.restoreSize=null,a.dd&&(a.dd.enable(),b&&b.addCls(b.indicateDragCls)),a.resizer&&a.resizer.enable(),a.container.removeCls(Ext.baseCSSPrefix+"window-maximized-ct"),a.syncMonitorWindowResize(),c||(a.el.enableShadow(null,!0),a.maximized=!1,a.fireEvent("restore",a))),a},syncMonitorWindowResize:function(){var a=this,b=a._monitoringResize,d=a.monitorResize||a.constrain||a.constrainHeader||a.maximized,c=a.hidden||a.destroying||a.destroyed;d&&!c?b||(Ext.on("resize",a.onWindowResize,a,{buffer:1}),a._monitoringResize=!0):b&&(Ext.un("resize",a.onWindowResize,a),a._monitoringResize=!1)},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var a=this.callParent(arguments);return a.xtype="window",a.focusOnToFront=!1,a},getDefaultFocus:function(){var b,c,d=this,a=d.defaultFocus;return void 0!==a&&(Ext.isNumber(a)?b=d.query("button")[a]:Ext.isString(a)?(c=a,Ext.validIdRe.test(c)&&(b=d.down(Ext.makeIdSelector(c))),b=b||d.down(c)):a.focus&&(b=a)),b},privates:{initDraggable:function(){this.initSimpleDraggable()},onHeaderClick:function(b,c){var a;b.el.contains(c.getTarget())&&(a=this.getDefaultFocus())&&a.focus()},initResizable:function(){this.callParent(arguments),this.maximized&&this.resizer.disable()}}}),Ext.define("Ext.form.Labelable",{extend:Ext.Mixin,isLabelable:!0,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl","ariaErrorEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{childElCls} {unselectableCls}" style="{labelStyle}"<tpl if="inputId">',' for="{inputId}"</tpl> {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" role="presentation"',' class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}",'<div id="{id}-ariaErrorEl" data-ref="ariaErrorEl" role="alert" aria-live="polite"',' class="'+Ext.baseCSSPrefix+'hidden-clip">',"</div>","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="presentation" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{tipAnchorTarget}">',"</div>","</div>","</tpl>",{disableFormats:!0}],activeErrorsTpl:void 0,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:!0,formItemCls:Ext.baseCSSPrefix+"form-item",labelCls:Ext.baseCSSPrefix+"form-item-label",topLabelCls:Ext.baseCSSPrefix+"form-item-label-top",rightLabelCls:Ext.baseCSSPrefix+"form-item-label-right",labelInnerCls:Ext.baseCSSPrefix+"form-item-label-inner",topLabelSideErrorCls:Ext.baseCSSPrefix+"form-item-label-top-side-error",errorMsgCls:Ext.baseCSSPrefix+"form-error-msg",errorWrapCls:Ext.baseCSSPrefix+"form-error-wrap",errorWrapSideCls:Ext.baseCSSPrefix+"form-error-wrap-side",errorWrapUnderCls:Ext.baseCSSPrefix+"form-error-wrap-under",errorWrapUnderSideLabelCls:Ext.baseCSSPrefix+"form-error-wrap-under-side-label",baseBodyCls:Ext.baseCSSPrefix+"form-item-body",invalidIconCls:Ext.baseCSSPrefix+"form-invalid-icon",invalidUnderCls:Ext.baseCSSPrefix+"form-invalid-under",noLabelCls:Ext.baseCSSPrefix+"form-item-no-label",fieldBodyCls:"",invalidCls:Ext.baseCSSPrefix+"form-invalid",fieldLabel:void 0,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:!1,hideEmptyLabel:!0,preventMark:!1,autoFitErrors:!0,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:!0,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var a,c,b=this.tip;b||(a={id:"ext-form-error-tip",ui:"form-invalid"},Ext.supports.Touch&&(a.dismissDelay=0,a.anchor="top",a.showDelay=0,a.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.anchorTarget).getWidth()}}),b=this.tip=Ext.create("Ext.tip.QuickTip",a),(c=Ext.apply({},b.tagConfig)).attribute="errorqtip",b.setTagConfig(c))},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var a=this,b=a.padding;b&&(a.padding=void 0,a.extraMargins=Ext.Element.parseBox(b)),Ext.isIE8&&(a.restoreDisplay=Ext.Function.createDelayed(a.doRestoreDisplay,0,a)),a.activeErrorsTpl||("title"===a.msgTarget?a.activeErrorsTpl=a.plaintextActiveErrorsTpl:a.activeErrorsTpl=a.htmlActiveErrorsTpl),a.addCls([a.formItemCls,a.formItemCls+"-"+a.ui]),a.lastActiveError="",a.enableBubble("errorchange")},trimLabelSeparator:function(){var c=this.labelSeparator,a=this.fieldLabel||"";return a.substr(a.length-1)===c?a.slice(0,-1):a},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(b){b=b||"";var a=this,f=a.labelSeparator,h=a.labelEl,c=a.errorWrapEl,g="top"!==a.labelAlign,e=a.noLabelCls,d=a.errorWrapUnderSideLabelCls;a.fieldLabel=b,a.rendered&&(Ext.isEmpty(b)&&a.hideEmptyLabel?(a.addCls(e),g&&c&&c.removeCls(d)):(f&&(b=a.trimLabelSeparator()+f),h.dom.firstChild.innerHTML=b,a.removeCls(e),g&&c&&c.addCls(d)),a.updateLayout())},setHideLabel:function(b){var a=this;b!==a.hideLabel&&(a.hideLabel=b,a.rendered&&(a[b?"addCls":"removeCls"](a.noLabelCls),a.updateLayout()))},setHideEmptyLabel:function(b){var c,a=this;b!==a.hideEmptyLabel&&(a.hideEmptyLabel=b,a.rendered&&!a.hideLabel&&(c=b&&!a.getFieldLabel(),a[c?"addCls":"removeCls"](a.noLabelCls),a.updateLayout()))},getInsertionRenderData:function(c,d){for(var b,a,e=d.length;e--;)(a=this[b=d[e]])&&"string"!=typeof a&&(a.isTemplate||(a=Ext.XTemplate.getTpl(this,b)),a=a.apply(c)),c[b]=a||"";return c},getLabelableRenderData:function(){var n,i,a=this,l=a.labelAlign,o="top"===l,r="right"===l,c="side"===a.msgTarget,h="under"===a.msgTarget,q=a.errorMsgCls,b=a.labelPad,m=a.labelWidth,d=a.labelClsExtra||"",j=c?a.errorWrapSideCls:a.errorWrapUnderCls,g="",f="",p=a.hasVisibleLabel(),k=a.autoFitErrors,e=a.defaultBodyWidth;return o?(d+=" "+a.topLabelCls,b&&(f="padding-bottom:"+b+"px;"),c&&!k&&(d+=" "+a.topLabelSideErrorCls)):(r&&(d+=" "+a.rightLabelCls),b&&(g+=a.getHorizontalPaddingStyle()+b+"px;"),g+="width:"+(m+(b||0))+"px;",f="width:"+m+"px"),p&&!o&&h&&(j+=" "+a.errorWrapUnderSideLabelCls),e&&(n="min-width:"+e+"px;max-width:"+e+"px;"),i={id:a.id,inputId:a.getInputId(),labelCls:a.labelCls,labelClsExtra:d,labelStyle:g+(a.labelStyle||""),labelInnerStyle:f,labelInnerCls:a.labelInnerCls,unselectableCls:Ext.Element.unselectableCls,bodyStyle:n,baseBodyCls:a.baseBodyCls,fieldBodyCls:a.fieldBodyCls,extraFieldBodyCls:a.extraFieldBodyCls,errorWrapCls:a.errorWrapCls,errorWrapExtraCls:j,renderError:c||h,invalidMsgCls:c?a.invalidIconCls:h?a.invalidUnderCls:"",errorMsgCls:q,growCls:a.grow?a.growCls:"",tipAnchorTarget:a.id+"-inputEl",errorWrapStyle:c&&!k?"visibility:hidden":"display:none",fieldLabel:a.getFieldLabel(),labelSeparator:a.labelSeparator},a.getInsertionRenderData(i,a.labelableInsertions),i},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){var a=this;a.setFieldDefaults(a.getInherited().fieldDefaults),a.ownerLayout&&a.addCls(Ext.baseCSSPrefix+a.ownerLayout.type+"-form-item"),a.hasVisibleLabel()||a.addCls(a.noLabelCls)},onLabelRender:function(){var c,b,a=this,f={},e=Ext.Element,d=a.errorWrapEl;if(d&&d.setVisibilityMode("side"!==a.msgTarget||a.autoFitErrors?e.DISPLAY:e.VISIBILITY),a.extraMargins){for(b in c=a.el.getMargin())c.hasOwnProperty(b)&&(f["margin-"+b]=c[b]+a.extraMargins[b]+"px");a.el.setStyle(f)}},hasVisibleLabel:function(){return!this.hideLabel&&!(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return!!this.getActiveError()},setActiveError:function(a){this.setActiveErrors(a)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(c){var e,d,j,f,a=this,h=a.errorWrapEl,b=a.msgTarget,g="side"===b,i="qtip"===b;c=Ext.Array.from(c),j=a.getTpl("activeErrorsTpl"),a.activeErrors=c,d=a.activeError=j.apply({fieldLabel:a.fieldLabel,errors:c,listCls:Ext.baseCSSPrefix+"list-plain"}),a.renderActiveError(),a.rendered&&(e=a.getActionEl(),g?a.errorEl.dom.setAttribute("data-errorqtip",d):i?e.dom.setAttribute("data-errorqtip",d):"title"===b&&e.dom.setAttribute("title",d),"title"!==b&&(a.ariaErrorEl.dom.innerHTML=c.join(". "),e.dom.setAttribute("aria-describedby",a.ariaErrorEl.id)),(g||i)&&Ext.form.Labelable.initTip(),a.msgTargets[b]||(f=Ext.get(b))&&(f.dom.innerHTML=d)),h&&(h.setVisible(0<c.length),g&&a.autoFitErrors&&a.labelEl.addCls(a.topLabelSideErrorCls),a.updateLayout())},unsetActiveError:function(){var c,d,a=this,e=a.errorWrapEl,b=a.msgTarget,f=a.restoreDisplay;a.hasActiveError()&&(delete a.activeError,delete a.activeErrors,a.renderActiveError(),a.rendered&&(c=a.getActionEl(),"qtip"===b?c.dom.removeAttribute("data-errorqtip"):"title"===b&&c.dom.removeAttribute("title"),"title"!==b&&(a.ariaErrorEl.dom.innerHTML="",c.dom.removeAttribute("aria-describedby")),a.msgTargets[b]||(d=Ext.get(b))&&(d.dom.innerHTML=""),e&&(e.hide(),"side"===b&&a.autoFitErrors&&a.labelEl.removeCls(a.topLabelSideErrorCls),a.updateLayout(),f&&(a.el.dom.style.display="block",a.restoreDisplay()))))},doRestoreDisplay:function(){var a=this.el;a&&a.dom&&(a.dom.style.display="")},renderActiveError:function(){var a=this,b=a.getActiveError(),c=!!b;b!==a.lastActiveError&&(a.lastActiveError=b,a.fireEvent("errorchange",a,b)),!a.rendered||a.destroyed||a.preventMark||(a.toggleInvalidCls(c),a.errorEl&&(a.errorEl.dom.innerHTML=b))},toggleInvalidCls:function(a){this.el[a?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(b){var a;for(a in b)this.hasOwnProperty(a)||(this[a]=b[a])}},function(){Ext.supports.Touch&&(this.prototype.msgTarget="side")}),Ext.define("Ext.form.field.Field",{mixinId:"field",isFormField:!0,config:{validation:null,validationField:null},disabled:!1,submitValue:!0,validateOnChange:!0,valuePublishEvent:"change",suspendCheckChange:0,dirty:!1,initField:function(){var d,c,a=this,b=a.valuePublishEvent;if(a.initValue(),Ext.isString(b))a.on(b,a.publishValue,a);else for(c=0,d=b.length;c<d;++c)a.on(b[c],a.publishValue,a)},initValue:function(){var a=this;"value"in a&&(a.suspendCheckChange++,a.setValue(a.value),a.suspendCheckChange--),a.initialValue=a.originalValue=a.lastValue=a.getValue()},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(b){var a=this;return a.value=b,a.checkChange(),a},isEqual:function(a,b){return String(a)===String(b)},isEqualAsString:function(a,b){return String(Ext.valueFrom(a,""))===String(Ext.valueFrom(b,""))},getSubmitData:function(){var a=this,b=null;return!a.disabled&&a.submitValue&&((b={})[a.getName()]=""+a.getValue()),b},getModelData:function(d,c){var a=this,b=null;return a.disabled||!a.submitValue&&c||((b={})[a.getFieldIdentifier()]=a.getValue()),b},reset:function(){var a=this;a.beforeReset(),a.setValue(a.originalValue),a.clearInvalid(),delete a.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue(),this.checkDirty()},checkChange:function(){var b,c,a=this;a.suspendCheckChange||(b=a.getValue(),c=a.lastValue,!a.destroyed&&a.didValueChange(b,c)&&(a.lastValue=b,a.fireEvent("change",a,b,c),a.onChange(b,c)))},didValueChange:function(a,b){return!this.isEqual(a,b)},onChange:function(b){var a=this;a.validateOnChange&&a.validate(),a.checkDirty()},publishValue:function(){var a=this;a.rendered&&!a.getErrors().length&&a.publishState("value",a.getValue())},isDirty:function(){var a=this;return!a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();b!==a.wasDirty&&(a.dirty=b,a.fireEvent("dirtychange",a,b),a.onDirtyChange(b),a.wasDirty=b)},onDirtyChange:Ext.emptyFn,getErrors:function(e){var c,b=[],d=this.getValidationField(),a=this.getValidation();return d&&!0!==(c=d.validate(e))&&b.push(c),a&&!0!==a&&b.push(a),b},isValid:function(){return this.disabled||Ext.isEmpty(this.getErrors())},validate:function(){return this.checkValidityChange(this.isValid())},checkValidityChange:function(a){var b=this;return a!==b.wasValid&&(b.wasValid=a,b.fireEvent("validitychange",b,a)),a},batchChanges:function(a){try{this.suspendCheckChange++,a()}catch(b){throw b}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return!1},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(b,a){a&&this.validate()},privates:{resetToInitialValue:function(){var a=this,b=a.originalValue;a.originalValue=a.initialValue,a.reset(),a.originalValue=b}}}),Ext.define("Ext.form.field.Base",{extend:Ext.Component,mixins:[Ext.form.Labelable,Ext.form.field.Field],xtype:"field",alternateClassName:["Ext.form.Field","Ext.form.BaseField"],focusable:!0,shrinkWrap:!0,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:!0}],defaultBindProperty:"value",autoEl:{role:"presentation"},subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:!0,invalidText:"The value in this field is invalid",fieldCls:Ext.baseCSSPrefix+"form-field",focusCls:"form-focus",dirtyCls:Ext.baseCSSPrefix+"form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:!0,readOnly:!1,readOnlyCls:Ext.baseCSSPrefix+"form-readonly",validateOnBlur:!0,hasFocus:!1,baseCls:Ext.baseCSSPrefix+"field",fieldBodyCls:Ext.baseCSSPrefix+"field-body",maskOnDisable:!1,stretchInputElFixed:!0,ariaEl:"inputEl",initComponent:function(){var a=this;a.callParent(),a.subTplData=a.subTplData||{},a.initLabelable(),a.initField(),a.initDefaultName(),a.readOnly&&a.addCls(a.readOnlyCls),a.addCls(Ext.baseCSSPrefix+"form-type-"+a.inputType)},initDefaultName:function(){var a=this;a.name||(a.name=a.getInputId())},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(f){var b,c,a=this,e=a.inputType,d=a.getInputId();return b=Ext.apply({ui:a.ui,id:d,cmpId:a.id,name:a.name||d,disabled:a.disabled,readOnly:a.readOnly,value:a.getRawValue(),type:e,fieldCls:a.fieldCls,fieldStyle:a.getFieldStyle(),childElCls:f.childElCls,tabIdx:a.tabIndex,inputCls:a.inputCls,typeCls:Ext.baseCSSPrefix+"form-"+(a.isTextInput?"text":e)},a.subTplData),a.ariaRole&&(c={role:a.ariaRole,"aria-hidden":!!a.hidden,"aria-disabled":!!a.disabled,"aria-readonly":!!a.readOnly,"aria-invalid":!1},a.ariaLabel&&(c["aria-label"]=a.ariaLabel),a.format&&a.formatText&&!b.title&&(c.title=Ext.String.formatEncode(a.formatText,a.format)),b.inputElAriaAttributes=Ext.apply(c,a.getAriaAttributes())),a.getInsertionRenderData(b,a.subTplInsertions),b},getSubTplMarkup:function(f){var b=this,c=b.getSubTplData(f),e=b.getTpl("preSubTpl"),d=b.getTpl("postSubTpl"),a="";return e&&(a+=e.apply(c)),a+=b.getTpl("fieldSubTpl").apply(c),d&&(a+=d.apply(c)),a},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},setFieldStyle:function(b){var a=this.inputEl;a&&a.applyStyles(b),this.fieldStyle=b},getFieldStyle:function(){var a=this.fieldStyle;return Ext.isObject(a)?Ext.DomHelper.generateStyles(a,null,!0):a||""},onRender:function(){this.callParent(arguments),this.mixins.labelable.self.initTip(),this.renderActiveError()},onFocusLeave:function(a){this.callParent([a]),this.completeEdit()},completeEdit:Ext.emptyFn,isFileUpload:function(){return"file"===this.inputType},getSubmitData:function(){var c,a=this,b=null;return!a.disabled&&a.submitValue&&null!==(c=a.getSubmitValue())&&((b={})[a.getName()]=c),b},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var a=this,b=a.inputEl?a.inputEl.getValue():Ext.valueFrom(a.rawValue,"");return a.rawValue=b},setRawValue:function(b){var a=this,c=a.rawValue;return a.transformRawValue.$nullFn||(b=a.transformRawValue(b)),b=Ext.valueFrom(b,""),void 0!==c&&c===b&&!a.valueContainsPlaceholder||(a.rawValue=b,a.inputEl&&(a.bindChangeEvents(!1),a.inputEl.dom.value=b,a.bindChangeEvents(!0)),a.rendered&&a.reference&&a.publishState("rawValue",b)),b},transformRawValue:Ext.identityFn,valueToRaw:function(a){return""+Ext.valueFrom(a,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));return a.value=b},setValue:function(b){var a=this;return a.setRawValue(a.valueToRaw(b)),a.mixins.field.setValue.call(a,b)},onBoxReady:function(){var a=this;a.callParent(arguments),a.setReadOnlyOnBoxReady&&a.setReadOnly(a.readOnly)},onDisable:function(){var a=this,b=a.inputEl;a.callParent(),b&&(b.dom.disabled=!0,a.hasActiveError()&&(a.clearInvalid(),a.hadErrorOnDisable=!0)),!1===a.wasValid&&a.checkValidityChange(!0)},onEnable:function(){var c,a=this,b=a.inputEl,d=a.preventMark;a.callParent(),b&&(b.dom.disabled=!1),void 0!==a.wasValid&&(a.forceValidation=!0,a.preventMark=!a.hadErrorOnDisable,c=a.isValid(),a.forceValidation=!1,a.preventMark=d,a.checkValidityChange(c)),delete a.hadErrorOnDisable},setReadOnly:function(b){var a=this,c=a.inputEl,d=a.readOnly;a[(b=!!b)?"addCls":"removeCls"](a.readOnlyCls),a.readOnly=b,c?(c.dom.readOnly=b,a.ariaEl.dom.setAttribute("aria-readonly",b)):a.rendering&&(a.setReadOnlyOnBoxReady=!0),b!==d&&a.fireEvent("writeablechange",a,b)},fireKey:function(a){a.isSpecialKey()&&this.fireEvent("specialkey",this,a)},initEvents:function(){var c,b,a=this,d=a.inputEl,f=a.onFieldMutation,e=a.checkChangeEvents,g=e.length;if(d)for(a.mon(d,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",a.fireKey,a),c=0;c<g;++c)"propertychange"===(b=e[c])&&(a.usesPropertychange=!0),"textInput"===b&&(a.usesTextInput=!0),a.mon(d,b,f,a);a.callParent()},onFieldMutation:function(a){this.readOnly||"propertychange"===a.type&&this.ignoreChangeRe.test(a.browserEvent.propertyName)||this.startCheckChangeTask()},startCheckChangeTask:function(){var a=this,b=a.checkChangeTask;b||(a.checkChangeTask=b=new Ext.util.DelayedTask(a.doCheckChangeTask,a)),a.bindNotifyListener||(a.bindNotifyListener=Ext.on("beforebindnotify",a.onBeforeNotify,a,{destroyable:!0})),b.delay(a.checkChangeBuffer)},doCheckChangeTask:function(){var a=this.bindNotifyListener;a&&(a.destroy(),this.bindNotifyListener=null),this.checkChange()},publishValue:function(){var a=this;a.rendered&&!a.getErrors().length&&a.publishState("value",a.getValue())},onDirtyChange:function(b){var a=this;a[b?"addCls":"removeCls"](a.dirtyCls),a.rendered&&a.reference&&a.publishState("dirty",b)},isValid:function(){var a=this,b=a.disabled;return a.forceValidation||!b?a.validateValue(a.processRawValue(a.getRawValue())):b},validateValue:function(d){var a=this,c=a.getErrors(d),b=Ext.isEmpty(c);return a.preventMark||(b?a.clearInvalid():a.markInvalid(c)),b},markInvalid:function(d){var b,a=this,c=a.ariaEl.dom,e=a.getActiveError();a.setActiveErrors(Ext.Array.from(d)),e!==(b=a.getActiveError())&&(a.setError(b),!a.ariaStaticRoles[a.ariaRole]&&c&&c.setAttribute("aria-invalid",!0))},clearInvalid:function(){var a=this,b=a.ariaEl.dom,c=a.hasActiveError();delete a.hadErrorOnDisable,a.unsetActiveError(),c&&(a.setError(""),!a.ariaStaticRoles[a.ariaRole]&&b&&b.setAttribute("aria-invalid",!1))},setError:function(d){var c,a=this,b=a.msgTarget;a.rendered&&("title"===b||"qtip"===b?(c="qtip"===b?"data-errorqtip":"title",a.getActionEl().dom.setAttribute(c,d||"")):a.updateLayout())},renderActiveError:function(){var a=this,c=a.hasActiveError(),b=a.invalidCls+"-field";a.inputEl&&a.inputEl[c?"addCls":"removeCls"]([b,b+"-"+a.ui]),a.mixins.labelable.renderActiveError.call(a)},beforeDestroy:function(){var a=this,b=a.checkChangeTask;b&&b.cancel(),a.checkChangeTask=a.bindNotifyListener=Ext.destroy(a.bindNotifyListener),a.callParent()},privates:{applyBind:function(f,c){var a,d,b=this,e=c&&c.value;return(a=b.callParent([f,c]))&&(d=a.value,b.hasBindingValue=!!d,d!==e&&b.getInherited().modelValidation&&b.updateValueBinding(a)),a},applyRenderSelectors:function(){var a=this;a.callParent(),a.inputEl||(a.inputEl=a.el.getById(a.getInputId()))},bindChangeEvents:function(c){var b=c?"resumeEvent":"suspendEvent",a=this.inputEl;this.usesPropertychange&&a[b]("propertychange"),this.usesTextInput&&a[b]("textInput")},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var a=this;return a.hasOwnProperty("renderTpl")||(a.renderTpl=a.getTpl("labelableRenderTpl")),a.callParent()},onBeforeNotify:function(){this.checkChangeTask.cancel(),this.checkChange()},updateValueBinding:function(b){var a=b.value,c=b.$fieldBinding;c&&(c.destroy(),b.$fieldBinding=null),a&&a.bindValidationField&&(this.fieldBinding=a.bindValidationField("setValidationField",this))}},deprecated:{5:{methods:{doComponentLayout:function(){this.bindChangeEvents(!1),this.callParent(arguments),this.bindChangeEvents(!0)}}}}}),Ext.define("Ext.form.field.VTypes",function(){var b=/^[a-zA-Z_]+$/,a=/^[a-zA-Z0-9_]+$/,c=/^(")?(?:[^\."\s])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,d=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:!0,alternateClassName:"Ext.form.VTypes",email:function(a){return c.test(a)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(a){return d.test(a)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(a){return b.test(a)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(b){return a.test(b)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()),Ext.define("Ext.form.trigger.Trigger",{alias:"trigger.trigger",mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:"trigger"},repeatClick:!1,hidden:!1,hideOnReadOnly:void 0,weight:0,preventMouseDown:!0,baseCls:Ext.baseCSSPrefix+"form-trigger",focusCls:Ext.baseCSSPrefix+"form-trigger-focus",overCls:Ext.baseCSSPrefix+"form-trigger-over",clickCls:Ext.baseCSSPrefix+"form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>',"{[values.$trigger.renderBody(values)]}","</div>"],statics:{weightComparator:function(a,b){return a.weight-b.weight}},constructor:function(c){var b,a=this;Ext.apply(a,c),a.compat4Mode&&(b=a.cls,a.focusCls=[a.focusCls,b+"-focus"],a.overCls=[a.overCls,b+"-over"],a.clickCls=[a.clickCls,b+"-click"])},afterFieldRender:function(){this.initEvents()},destroy:function(){var a=this;a.clickRepeater=a.el=Ext.destroy(a.clickRepeater,a.el),a.callParent()},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var a=this.el;this.hidden=!0,a&&a.hide()},initEvents:function(){var a=this,b=a.isFieldEnabled,c=a.getStateEl(),d=a.el;c.addClsOnOver(a.overCls,b,a),c.addClsOnClick(a.clickCls,b,a),a.repeatClick?a.clickRepeater=new Ext.util.ClickRepeater(d,{preventDefault:!0,handler:a.onClick,listeners:{mousedown:a.onClickRepeaterMouseDown,scope:a},scope:a}):a.field.mon(d,{click:a.onClick,mousedown:a.onMouseDown,scope:a})},isFieldEnabled:function(){return!this.field.disabled},isVisible:function(){var a=this,c=a.field,b=!1;return!a.hidden&&c&&a.rendered&&!a.destroyed||(b=!0),!b},onClick:function(){var a=this,c=arguments,e=a.clickRepeater?c[1]:c[0],d=a.handler,b=a.field;d&&!b.readOnly&&a.isFieldEnabled()&&Ext.callback(a.handler,a.scope,[b,a,e],0,b)},resolveListenerScope:function(a){return this.field.resolveSatelliteListenerScope(this,a)},onMouseDown:function(a){"touch"===a.pointerType||this.field.owns(Ext.Element.getActiveElement())||this.field.inputEl.focus(),this.preventMouseDown&&a.preventDefault()},onClickRepeaterMouseDown:function(b,a){a.parentEvent&&"mousedown"!==a.parentEvent.type||this.field.inputEl.focus(),a.preventDefault()},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var a=this;(a.el=a.field.triggerWrap.selectNode("#"+a.domId,!1)).setVisibilityMode(Ext.Element.DISPLAY),a.rendered=!0},renderBody:function(b){var a=this,c=a.bodyTpl;return Ext.apply(b,a.getBodyRenderData()),c?Ext.XTemplate.getTpl(a,"bodyTpl").apply(b):""},renderTrigger:function(b){var a=this,d=a.width,c=a.hidden?"display:none;":"";return d&&(c+="width:"+d),Ext.XTemplate.getTpl(a,"renderTpl").apply({$trigger:a,fieldData:b,ui:b.ui,childElCls:b.childElCls,triggerId:a.domId=a.field.id+"-trigger-"+a.id,cls:a.cls,triggerStyle:c,extraCls:a.extraCls,baseCls:a.baseCls})},setHidden:function(a){a!==this.hidden&&this[a?"hide":"show"]()},setVisible:function(a){this.setHidden(!a)},show:function(){var a=this.el;this.hidden=!1,a&&a.show()}}),Ext.define("Ext.form.field.Text",{extend:Ext.form.field.Base,alias:"widget.textfield",alternateClassName:["Ext.form.TextField","Ext.form.Text"],config:{hideTrigger:!1,triggers:void 0},renderConfig:{editable:!0},growMin:30,growMax:800,growAppend:"W",allowBlank:!0,validateBlank:!1,allowOnlyWhitespace:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyText:"",emptyCls:Ext.baseCSSPrefix+"form-empty-field",requiredCls:Ext.baseCSSPrefix+"form-required-field",valueContainsPlaceholder:!1,ariaRole:"textbox",repeatTriggerClick:!1,triggerWrapCls:Ext.baseCSSPrefix+"form-trigger-wrap",triggerWrapFocusCls:Ext.baseCSSPrefix+"form-trigger-wrap-focus",triggerWrapInvalidCls:Ext.baseCSSPrefix+"form-trigger-wrap-invalid",fieldBodyCls:Ext.baseCSSPrefix+"form-text-field-body",inputWrapCls:Ext.baseCSSPrefix+"form-text-wrap",inputWrapFocusCls:Ext.baseCSSPrefix+"form-text-wrap-focus",inputWrapInvalidCls:Ext.baseCSSPrefix+"form-text-wrap-invalid",growCls:Ext.baseCSSPrefix+"form-text-grow",needArrowKeys:!0,squashMouseUp:{mouseup:function(){},translate:!1,single:!0,preventDefault:!0},childEls:["triggerWrap","inputWrap"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap"',' role="presentation" class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap"',' role="presentation" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:["</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var a=this,b=a.emptyCls;!1===a.allowOnlyWhitespace&&(a.allowBlank=!1),a.size&&(a.defaultBodyWidth=6.5*a.size+20),a.onTrigger1Click||(a.onTrigger1Click=a.onTriggerClick),a.callParent(),a.readOnly&&a.setReadOnly(a.readOnly),a.fieldFocusCls=a.baseCls+"-focus",a.emptyUICls=b+" "+b+"-"+a.ui,a.addStateEvents("change")},initEvents:function(){var a=this,b=a.inputEl;a.callParent(),(a.selectOnFocus||a.emptyText)&&a.mon(b,"mousedown",a.onMouseDown,a),(a.maskRe||a.vtype&&!0!==a.disableKeyFilter&&(a.maskRe=Ext.form.field.VTypes[a.vtype+"Mask"]))&&a.mon(b,"keypress",a.filterKeys,a),a.enableKeyEvents&&a.mon(b,{scope:a,keyup:a.onKeyUp,keydown:a.onKeyDown,keypress:a.onKeyPress})},isEqual:function(a,b){return this.isEqualAsString(a,b)},onChange:function(a,b){this.callParent(arguments),this.autoSize()},getSubTplData:function(h){var e,f,d,a=this,c=a.getRawValue(),g=a.emptyText&&c.length<1,b=a.maxLength;return a.enforceMaxLength&&b!==Number.MAX_VALUE||(b=void 0),g&&(Ext.supports.Placeholder?e=a.emptyText:(c=a.emptyText,a.valueContainsPlaceholder=!0)),(d=(f=Ext.apply(a.callParent([h]),{triggerWrapCls:a.triggerWrapCls,inputWrapCls:a.inputWrapCls,triggers:a.orderedTriggers,maxLength:b,readOnly:!a.editable||a.readOnly,placeholder:e,value:c,fieldCls:a.fieldCls+(g&&(e||c)?" "+a.emptyUICls:"")+(a.allowBlank?"":" "+a.requiredCls)})).inputElAriaAttributes)&&(d["aria-required"]=!a.allowBlank),f},onRender:function(){var d,a=this,b=a.getTriggers(),c=[];if(Ext.supports.FixedTableWidthBug&&(a.el._needsTableWidthFix=!0),a.callParent(),b){for(d in this.invokeTriggers("onFieldRender"),b)c.push(b[d].el);a.triggerEl=a.triggerCell=new Ext.CompositeElement(c,!0)}a.inputCell=a.inputWrap},afterRender:function(){var a=this;a.autoSize(),a.callParent(),a.invokeTriggers("afterFieldRender")},onMouseDown:function(){this.hasFocus||Ext.getDoc().on(this.squashMouseUp)},applyTriggers:function(c){var e,b,h,g,d,a=this,j=a.getHideTrigger(),k=a.readOnly,f=a.orderedTriggers=[],i=a.repeatTriggerClick;if(!c)for(c={},a.triggerCls&&!a.trigger1Cls&&(a.trigger1Cls=a.triggerCls),d=1;g=a["trigger"+d+"Cls"];d++)c["trigger"+d]={cls:g,extraCls:Ext.baseCSSPrefix+"trigger-index-"+d,handler:"onTrigger"+d+"Click",compat4Mode:!0,scope:a};for(e in c)c.hasOwnProperty(e)&&((b=c[e]).field=a,b.id=e,(k&&!1!==b.hideOnReadOnly||j&&!1!==b.hidden)&&(b.hidden=!0),i&&!1!==b.repeatClick&&(b.repeatClick=!0),h=c[e]=Ext.form.trigger.Trigger.create(b),f.push(h));return Ext.Array.sort(f,Ext.form.trigger.Trigger.weightComparator),c},invokeTriggers:function(d,e){var c,b,a=this.getTriggers();if(a)for(c in a)a.hasOwnProperty(c)&&(b=a[c])[d].apply(b,e||[])},getTrigger:function(a){return this.getTriggers()[a]},updateHideTrigger:function(a){this.invokeTriggers(a?"hide":"show")},updateEditable:function(a,b){this.setReadOnlyAttr(!a||this.readOnly)},setReadOnly:function(b){var c,e,a=this,d=a.getTriggers(),f=a.getHideTrigger();if(b=!!b,a.callParent([b]),a.rendered&&a.setReadOnlyAttr(b||!a.editable),d)for(e in d)!0!==(c=d[e]).hideOnReadOnly&&(!1===c.hideOnReadOnly||f)||c.setVisible(!b)},setReadOnlyAttr:function(c){var b=this,a="readonly",d=b.inputEl.dom;c?d.setAttribute(a,a):d.removeAttribute(a),b.ariaRole&&b.ariaEl.dom.setAttribute("aria-readonly",!!c)},processRawValue:function(c){var d,b,a=this.stripCharsRe;return a&&(a.global||(d="g",d+=a.ignoreCase?"i":"",d+=a.multiline?"m":"",a=new RegExp(a.source,d)),(b=c.replace(a,""))!==c&&(this.setRawValue(b),c=b)),c},onDisable:function(){this.callParent(),Ext.isIE&&(this.inputEl.dom.unselectable="on")},onEnable:function(){this.callParent(),Ext.isIE&&(this.inputEl.dom.unselectable="")},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){this.callParent(),this.applyEmptyText()},applyEmptyText:function(){var c,a=this,b=a.emptyText;a.rendered&&b&&(c=a.getRawValue().length<1&&!a.hasFocus,Ext.supports.Placeholder?a.inputEl.dom.placeholder=b:c&&(a.setRawValue(b),a.valueContainsPlaceholder=!0),c?a.inputEl.addCls(a.emptyUICls):a.inputEl.removeCls(a.emptyUICls),a.autoSize())},getEmptyText:function(){return this.emptyText},setEmptyText:function(e){var a=this,c=a.inputEl,b=c&&c.dom,d=e||"";return e?(a.emptyText=d,a.applyEmptyText()):b&&(Ext.supports.Placeholder?b.removeAttribute("placeholder"):b.value!==a.getRawValue()&&(b.value="",c.removeCls(a.emptyUICls)),a.valueContainsPlaceholder=!1),a.emptyText=d,a},afterFirstLayout:function(){if(this.callParent(),Ext.isIE&&this.disabled){var a=this.inputEl;a&&(a.dom.unselectable="on")}},toggleInvalidCls:function(b){var a=b?"addCls":"removeCls";this.callParent(),this.triggerWrap[a](this.triggerWrapInvalidCls),this.inputWrap[a](this.inputWrapInvalidCls)},beforeFocus:function(){var a=this,b=a.inputEl,c=a.emptyText;a.callParent(arguments),c&&!Ext.supports.Placeholder&&b.dom.value===a.emptyText&&a.valueContainsPlaceholder?(a.setRawValue(""),b.removeCls(a.emptyUICls),a.valueContainsPlaceholder=!1):Ext.supports.Placeholder&&b.removeCls(a.emptyUICls)},onFocus:function(b){var a=this;a.callParent(arguments),a.selectOnFocus&&a.inputEl.dom.select(),a.emptyText&&a.autoSize(),a.addCls(a.fieldFocusCls),a.triggerWrap.addCls(a.triggerWrapFocusCls),a.inputWrap.addCls(a.inputWrapFocusCls),a.invokeTriggers("onFieldFocus",[b])},onBlur:function(b){var a=this;a.callParent(arguments),a.removeCls(a.fieldFocusCls),a.triggerWrap.removeCls(a.triggerWrapFocusCls),a.inputWrap.removeCls(a.inputWrapFocusCls),a.invokeTriggers("onFieldBlur",[b])},completeEdit:function(a){this.callParent([a]),this.applyEmptyText()},filterKeys:function(a){if(!(a.ctrlKey&&!a.altKey||a.isSpecialKey())){var b=String.fromCharCode(a.getCharCode());this.maskRe.test(b)||a.stopEvent()}},getState:function(){return this.addPropertyToState(this.callParent(),"value")},applyState:function(a){this.callParent(arguments),a.hasOwnProperty("value")&&this.setValue(a.value)},getRawValue:function(){var a=this,b=a.callParent();return b===a.emptyText&&a.valueContainsPlaceholder&&(b=""),b},setValue:function(c){var a=this,b=a.inputEl;return b&&a.emptyText&&!Ext.isEmpty(c)&&(b.removeCls(a.emptyUICls),a.valueContainsPlaceholder=!1),a.callParent(arguments),a.applyEmptyText(),a},getErrors:function(b){b=arguments.length?null==b?"":b:this.processRawValue(this.getRawValue());var e,g,a=this,c=a.callParent([b]),f=a.validator,d=a.vtype,j=Ext.form.field.VTypes,k=a.regex,i=Ext.String.format;if(Ext.isFunction(f)&&!0!==(e=f.call(a,b))&&c.push(e),(a.allowOnlyWhitespace?b:Ext.String.trim(b)).length<1||b===a.emptyText&&a.valueContainsPlaceholder){if(a.allowBlank||c.push(a.blankText),!a.validateBlank)return c;g=!0}return!g&&b.length<a.minLength&&c.push(i(a.minLengthText,a.minLength)),b.length>a.maxLength&&c.push(i(a.maxLengthText,a.maxLength)),d&&(j[d](b,a)||c.push(a.vtypeText||j[d+"Text"])),k&&!k.test(b)&&c.push(a.regexText||a.invalidText),c},selectText:function(a,b){var d,c=this.getRawValue().length,e=this.inputEl.dom;0<c&&(a=void 0===a?0:Math.min(a,c),b=void 0===b?c:Math.min(b,c),e.setSelectionRange?e.setSelectionRange(a,b):e.createTextRange&&((d=e.createTextRange()).moveStart("character",a),d.moveEnd("character",b-c),d.select()))},getGrowWidth:function(){return this.inputEl.dom.value},autoSize:function(){var d,f,c,g,b,e,a=this;if(a.grow&&a.rendered&&a.getSizeModel().width.auto){for(f in g=a.inputEl,d=a.getTriggers(),c=0,e=Ext.util.Format.htmlEncode(a.getGrowWidth()||(a.hasFocus?"":a.emptyText)||""),e+=a.growAppend,d)c+=d[f].el.getWidth();b=g.getTextWidth(e)+c+a.inputWrap.getBorderWidth("lr")+a.triggerWrap.getBorderWidth("lr"),b=Math.min(Math.max(b,a.growMin),a.growMax),a.bodyEl.setWidth(b),a.updateLayout(),a.fireEvent("autosize",a,b)}},onDestroy:function(){var a=this;a.invokeTriggers("destroy"),Ext.destroy(a.triggerRepeater),a.callParent()},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var b,a=this.getTriggers(),c=0;if(a&&this.rendered)for(b in a)a.hasOwnProperty(b)&&(c+=a[b].el.getWidth());return c}}}}}),Ext.define("Ext.form.field.TextArea",{extend:Ext.form.field.Text,alias:["widget.textareafield","widget.textarea"],alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" data-ref="inputEl" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:!0}],growMin:60,growMax:1e3,growAppend:"\n-",enterIsSpecial:!1,preventScrollbars:!1,returnRe:/\r/g,inputCls:Ext.baseCSSPrefix+"form-textarea",extraFieldBodyCls:Ext.baseCSSPrefix+"form-textarea-body",ariaAttributes:{"aria-multiline":!0},getSubTplData:function(d){var a=this,c=a.getFieldStyle(),b=a.callParent(arguments);return a.grow&&a.preventScrollbars&&(b.fieldStyle=(c||"")+";overflow:hidden;height:"+a.growMin+"px"),b},afterRender:function(){var a=this;a.callParent(arguments),a.needsMaxCheck=a.enforceMaxLength&&a.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength,a.needsMaxCheck&&a.inputEl.on("paste",a.onPaste,a)},transformRawValue:function(a){return this.stripReturns(a)},getValue:function(){return this.stripReturns(this.callParent())},valueToRaw:function(a){return a=this.stripReturns(a),this.callParent([a])},stripReturns:function(a){return a&&"string"==typeof a&&(a=a.replace(this.returnRe,"")),a},onPaste:function(){var a=this;a.pasteTask||(a.pasteTask=new Ext.util.DelayedTask(a.pasteCheck,a)),a.pasteTask.delay(1)},pasteCheck:function(){var b=this,a=b.getValue(),c=b.maxLength;a.length>c&&(a=a.substr(0,c),b.setValue(a))},fireKey:function(a){var b=this,c=a.getKey();a.isSpecialKey()&&(b.enterIsSpecial||c!==a.ENTER||a.hasModifier())&&b.fireEvent("specialkey",b,a),!b.needsMaxCheck||c===a.BACKSPACE||c===a.DELETE||a.isNavKeyPress()||b.isCutCopyPasteSelectAll(a,c)||b.getValue().length>=b.maxLength&&a.stopEvent()},isCutCopyPasteSelectAll:function(a,b){return!!a.ctrlKey&&(b===a.A||b===a.C||b===a.V||b===a.X)},autoSize:function(){var b,c,e,d,a=this;a.grow&&a.rendered&&a.getSizeModel().height.auto&&(e=(b=a.inputEl).getWidth(!0),d=Ext.util.Format.htmlEncode(b.dom.value)||"&#160;",d=(d+=a.growAppend).replace(/\n/g,"<br/>"),c=Ext.util.TextMetrics.measure(b,d,e).height+b.getPadding("tb")+a.inputWrap.getBorderWidth("tb")+a.triggerWrap.getBorderWidth("tb"),c=Math.min(Math.max(c,a.growMin),a.growMax),a.bodyEl.setHeight(c),a.updateLayout(),a.fireEvent("autosize",a,c))},beforeDestroy:function(){var a=this.pasteTask;a&&(a.cancel(),this.pasteTask=null),this.callParent()}}),Ext.define("Ext.window.MessageBox",{extend:Ext.window.Window,alias:"widget.messagebox",OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:Ext.baseCSSPrefix+"message-box-info",WARNING:Ext.baseCSSPrefix+"message-box-warning",QUESTION:Ext.baseCSSPrefix+"message-box-question",ERROR:Ext.baseCSSPrefix+"message-box-error",hideMode:"offsets",closeAction:"hide",resizable:!1,scrollable:!0,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:!0,cls:[Ext.baseCSSPrefix+"message-box",Ext.baseCSSPrefix+"hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:!0,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:Ext.baseCSSPrefix+"message-box-icon",ariaRole:"alertdialog",makeButton:function(b){var a=this.buttonIds[b];return new Ext.button.Button({handler:this.btnCallback,itemId:a,scope:this,text:this.buttonText[a],minWidth:75})},btnCallback:function(e,b){var d,c,a=this;!b||"keydown"!==b.type||b.isSpecialKey()?((a.cfg.prompt||a.cfg.multiline)&&(d=(c=a.cfg.multiline?a.textArea:a.textField).getValue(),c.reset()),a.hide(),a.userCallback(e.itemId,d,a.cfg)):b.getTarget(null,null,!0).on({keyup:function(b){a.btnCallback(e,b)},single:!0})},hide:function(){var a=this,b=a.cfg?a.cfg.cls:"";a.progressBar.reset(),b&&a.removeCls(b),a.callParent(arguments)},constructor:function(b){var a=this;a.callParent(arguments),a.minWidth=a.defaultMinWidth=a.minWidth||a.defaultMinWidth,a.maxWidth=a.defaultMaxWidth=a.maxWidth||a.defaultMaxWidth,a.minHeight=a.defaultMinHeight=a.minHeight||a.defaultMinHeight,a.maxHeight=a.defaultMaxHeight=a.maxHeight||a.defaultMaxHeight},initComponent:function(e){var d,c,a=this,b=a.id;for(a.title=a.title||"&#160;",a.iconCls=a.iconCls||"",a.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[a.iconComponent=new Ext.Component({cls:a.baseIconCls}),a.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[a.msg=new Ext.Component({id:b+"-msg",cls:a.baseCls+"-text"}),a.textField=new Ext.form.field.Text({id:b+"-textfield",enableKeyEvents:!0,listeners:{keydown:a.onPromptKey,scope:a}}),a.textArea=new Ext.form.field.TextArea({id:b+"-textarea",height:75})]})]}),a.progressBar=new Ext.ProgressBar({id:b+"-progressbar",margin:"0 10 10 10"}),a.items=[a.topContainer,a.progressBar],a.msgButtons=[],d=0;d<4;d++)c=a.makeButton(d),a.msgButtons[c.itemId]=c,a.msgButtons.push(c);a.bottomTb=new Ext.toolbar.Toolbar({id:b+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[a.msgButtons[0],a.msgButtons[1],a.msgButtons[2],a.msgButtons[3]]}),a.dockedItems=[a.bottomTb],a.on("close",a.onClose,a),a.callParent()},onClose:function(){var a=this.header.child("[type=close]");a&&(a.itemId="cancel",this.btnCallback(a),delete a.itemId)},onPromptKey:function(c,b){var a=this;b.keyCode!==b.RETURN&&10!==b.keyCode||(a.msgButtons.ok.isVisible()?a.msgButtons.ok.handler.call(a,a.msgButtons.ok):a.msgButtons.yes.isVisible()&&a.msgButtons.yes.handler.call(a,a.msgButtons.yes))},reconfigure:function(b){var i,n,m,e,d,f,o,k,l,h,p,a=this,j=0,q=!0,t=a.buttonText,g=a.resizer,c=a.header,r=c&&!c.isHeader,s=b&&(b.message||b.msg);for(a.updateButtonText(),a.cfg=b=b||{},h=b.wait,b.width&&(n=b.width),b.height&&(m=b.height),a.minWidth=b.minWidth||a.defaultMinWidth,a.maxWidth=b.maxWidth||a.defaultMaxWidth,a.minHeight=b.minHeight||a.defaultMinHeight,a.maxHeight=b.maxHeight||a.defaultMaxHeight,g&&(i=g.resizeTracker,g.minWidth=i.minWidth=a.minWidth,g.maxWidth=i.maxWidth=a.maxWidth,g.minHeight=i.minHeight=a.minHeight,g.maxHeight=i.maxHeight=a.maxHeight),delete a.defaultFocus,b.defaultFocus&&(a.defaultFocus=b.defaultFocus),a.animateTarget=b.animateTarget||void 0,a.modal=!1!==b.modal,a.setTitle(b.title||r&&c.title||a.title),a.setIconCls(b.iconCls||r&&c.iconCls||a.iconCls),j=Ext.isObject(b.buttons)?(a.buttonText=b.buttons,0):(a.buttonText=b.buttonText||a.buttonText,Ext.isNumber(b.buttons)?b.buttons:0),j|=a.updateButtonText(),a.buttonText=t,Ext.suspendLayouts(),a.width=a.height=null,(n||m)&&(n&&a.setWidth(n),m&&a.setHeight(m)),a.hidden=!1,a.rendered||a.render(Ext.getBody()),a.closable=!1!==b.closable&&!h,(c=a.header)&&((p=c.child("[type=close]"))&&p.setVisible(a.closable),b.title||a.closable||b.iconCls?c.show():c.hide()),a.liveDrag=!b.proxyDrag,a.userCallback=Ext.Function.bindCallback(b.callback||b.fn||Ext.emptyFn,b.scope||Ext.global),a.setIcon(b.icon),o=a.msg,s?(o.setHtml(s),o.show()):o.hide(),d=a.textArea,f=a.textField,b.prompt||b.multiline?(a.multiline=b.multiline,b.multiline?(d.setValue(b.value),d.setHeight(b.defaultTextHeight||a.defaultTextHeight),d.show(),f.hide(),a.defaultFocus=d):(f.setValue(b.value),d.hide(),f.show(),a.defaultFocus=f)):(d.hide(),f.hide()),k=a.progressBar,b.progress||h?(k.show(),a.updateProgress(0,b.progressText),h&&k.wait(!0===h?b.waitConfig:h)):k.hide(),l=a.msgButtons,e=0;e<4;e++)j&Math.pow(2,e)?(a.defaultFocus||(a.defaultFocus=l[e]),l[e].show(),q=!1):l[e].hide();q?a.bottomTb.hide():a.bottomTb.show(),Ext.resumeLayouts(!0)},updateButtonText:function(){var a,d,b=this,c=b.buttonText,e=0;for(a in c)c.hasOwnProperty(a)&&(d=b.msgButtons[a])&&(b.cfg&&b.cfg.buttonText&&(e|=Math.pow(2,Ext.Array.indexOf(b.buttonIds,a))),d.text!==c[a]&&d.setText(c[a]));return e},show:function(b){var c,a=this;return b=b||{},Ext.Component.layoutSuspendCount?Ext.on({resumelayouts:function(){a.show(b)},single:!0}):(a.reconfigure(b),b.cls&&a.addCls(b.cls),c=a.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])"),a.preventFocusOnActivate=!c.length,a.hidden=!0,a.callParent()),a},onShow:function(){this.callParent(arguments),this.center()},updateText:function(a){this.msg.setHtml(a)},setIcon:function(e,d,c){var b=this,a=b.iconComponent,f=b.messageIconCls;return f&&a.removeCls(f),e?(a.show(),(d||c)&&a.setSize(d||a.getWidth(),c||a.getHeight()),a.addCls(Ext.baseCSSPrefix+"dlg-icon"),a.addCls(b.messageIconCls=e)):(a.removeCls(Ext.baseCSSPrefix+"dlg-icon"),a.hide()),b},updateProgress:function(c,b,a){return this.progressBar.updateProgress(c,b),a&&this.updateText(a),this},onEsc:function(){!1!==this.closable&&this.callParent(arguments)},confirm:function(a,b,d,c){return Ext.isString(a)&&(a={title:a,icon:this.QUESTION,message:b,buttons:this.YESNO,callback:d,scope:c}),this.show(a)},prompt:function(a,c,f,d,b,e){return Ext.isString(a)&&(a={prompt:!0,title:a,minWidth:this.minPromptWidth,message:c,buttons:this.OKCANCEL,callback:f,scope:d,multiline:b,value:e}),this.show(a)},wait:function(a,c,b){return Ext.isString(a)&&(a={title:c,message:a,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:b}),this.show(a)},alert:function(a,b,d,c){return Ext.isString(a)&&(a={title:a,message:b,buttons:this.OK,fn:d,scope:c,minWidth:this.minWidth}),this.show(a)},progress:function(a,c,b){return Ext.isString(a)&&(a={title:a,message:c,progress:!0,progressText:b}),this.show(a)}},function(a){Ext.onInternalReady(function(){Ext.MessageBox=Ext.Msg=new a})}),Ext.define("Ext.form.Basic",{extend:Ext.util.Observable,alternateClassName:"Ext.form.BasicForm",taskDelay:10,constructor:function(c,d){var b,a=this;a.owner=c,a.fieldMonitors={validitychange:a.checkValidityDelay,enable:a.checkValidityDelay,disable:a.checkValidityDelay,dirtychange:a.checkDirtyDelay,errorchange:a.checkErrorDelay,scope:a},a.checkValidityTask=new Ext.util.DelayedTask(a.checkValidity,a),a.checkDirtyTask=new Ext.util.DelayedTask(a.checkDirty,a),a.checkErrorTask=new Ext.util.DelayedTask(a.checkError,a),a.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:a,addHandler:a.onFieldAdd,removeHandler:a.onFieldRemove,invalidateHandler:a.onMonitorInvalidate}),a.monitor.bind(c),Ext.apply(a,d),Ext.isString(a.paramOrder)&&(a.paramOrder=a.paramOrder.split(/[\s,|]/)),(b=a.reader)&&!b.isReader&&("string"==typeof b&&(b={type:b}),a.reader=Ext.createByAlias("reader."+b.type,b)),(b=a.errorReader)&&!b.isReader&&("string"==typeof b&&(b={type:b}),a.errorReader=Ext.createByAlias("reader."+b.type,b)),a.callParent()},initialize:function(){this.initialized=!0,this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:!1,waitTitle:"Please Wait...",trackResetOnLoad:!1,wasDirty:!1,destroy:function(){var a=this,b=a.monitor;b&&(b.unbind(),a.monitor=null),a.clearListeners(),a.checkValidityTask.cancel(),a.checkDirtyTask.cancel(),a.checkErrorTask.cancel(),a.checkValidityTask=a.checkDirtyTask=a.checkErrorTask=null,a.callParent()},onFieldAdd:function(a){a.on(this.fieldMonitors),this.onMonitorInvalidate()},onFieldRemove:function(a){a.un(this.fieldMonitors),this.onMonitorInvalidate()},onMonitorInvalidate:function(){this.initialized&&this.checkValidityDelay()},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var a=this._boundItems;return a&&0!==a.getCount()||(a=this._boundItems=new Ext.util.MixedCollection).addAll(this.owner.query("[formBind]")),a},hasInvalidField:function(){return!!this.getFields().findBy(function(a){var b,c=a.preventMark;return a.preventMark=!0,b=a.isValid(),a.preventMark=c,!b})},isValid:function(){var a;return Ext.suspendLayouts(),a=this.getFields().filterBy(function(a){return!a.validate()}),Ext.resumeLayouts(!0),a.length<1},checkValidity:function(){var b,a=this;a.destroyed||(b=!a.hasInvalidField())!==a.wasValid&&(a.onValidityChange(b),a.fireEvent("validitychange",a,b),a.wasValid=b)},checkValidityDelay:function(){var a=this.taskDelay;a?this.checkValidityTask.delay(a):this.checkValidity()},checkError:function(){this.fireEvent("errorchange",this)},checkErrorDelay:function(){var a=this.taskDelay;a?this.checkErrorTask.delay(a):this.checkError()},onValidityChange:function(e){var b,a,f,c,d=this.getBoundItems();if(d)for(f=(b=d.items).length,a=0;a<f;a++)(c=b[a]).disabled===e&&c.setDisabled(!e)},isDirty:function(){return!!this.getFields().findBy(function(a){return a.isDirty()})},checkDirtyDelay:function(){var a=this.taskDelay;a?this.checkDirtyTask.delay(a):this.checkDirty()},checkDirty:function(){var a;this.destroyed||(a=this.isDirty())!==this.wasDirty&&(this.fireEvent("dirtychange",this,a),this.wasDirty=a)},hasUpload:function(){return!!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(a,b){return Ext.isString(a)&&(a=Ext.ClassManager.instantiateByAlias("formaction."+a,Ext.apply({},b,{form:this}))),!1!==this.fireEvent("beforeaction",this,a)&&(this.beforeAction(a),Ext.defer(a.run,100,a)),this},submit:function(a){var b,c=this;return b=(a=a||{}).standardSubmit||c.standardSubmit?"standardsubmit":c.api?"directsubmit":"submit",c.doAction(b,a)},load:function(a){return this.doAction(this.api?"directload":"load",a)},updateRecord:function(a){if(!(a=a||this._record))return this;for(var b,d=a.self.fields,e=this.getFieldValues(),f={},c=0,g=d.length;c<g;++c)b=d[c].name,e.hasOwnProperty(b)&&(f[b]=e[b]);return a.beginEdit(),a.set(f),a.endEdit(),this},loadRecord:function(a){return this._record=a,this.setValues(a.getData())},getRecord:function(){return this._record},beforeAction:function(g){var e,d,b,a=this,c=g.waitMsg,f=Ext.baseCSSPrefix+"mask-loading",h=a.getFields().items,i=h.length;for(e=0;e<i;e++)(d=h[e]).isFormField&&d.syncValue&&d.syncValue();c&&(!0===(b=a.waitMsgTarget)?a.owner.el.mask(c,f):b?(b=a.waitMsgTarget=Ext.get(b)).mask(c,f):(a.floatingAncestor=a.owner.up("[floating]"),a.floatingAncestor&&(a.savePreventFocusOnActivate=a.floatingAncestor.preventFocusOnActivate,a.floatingAncestor.preventFocusOnActivate=!0),Ext.MessageBox.wait(c,g.waitTitle||a.waitTitle)))},afterAction:function(a,e){var b=this;if(a.waitMsg){var d=Ext.MessageBox,c=b.waitMsgTarget;!0===c?b.owner.el.unmask():c?c.unmask():d.hide()}b.floatingAncestor&&(b.floatingAncestor.preventFocusOnActivate=b.savePreventFocusOnActivate),e?(a.reset&&b.reset(),Ext.callback(a.success,a.scope||a,[b,a]),b.fireEvent("actioncomplete",b,a)):(Ext.callback(a.failure,a.scope||a,[b,a]),b.fireEvent("actionfailed",b,a))},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.name===a||b.dataIndex===a})},markInvalid:function(a){var c,d,b,e,g=this;function mark(b,c){var a=g.findField(b);a&&a.markInvalid(c)}if(Ext.isArray(a))for(d=a.length,c=0;c<d;c++)mark((b=a[c]).id||b.field,b.msg||b.message);else if(a instanceof Ext.data.ErrorCollection)for(d=a.items.length,c=0;c<d;c++)mark((b=a.items[c]).field,b.message);else for(e in a)a.hasOwnProperty(e)&&mark(e,a[e]);return this},setValues:function(a){var b,d,c,e=this;function setVal(b,c){var a=e.findField(b);a&&(a.setValue(c),e.trackResetOnLoad&&a.resetOriginalValue())}if(Ext.suspendLayouts(),Ext.isArray(a))for(d=a.length,b=0;b<d;b++)setVal((c=a[b]).id,c.value);else Ext.iterate(a,setVal);return Ext.resumeLayouts(!0),this},getValues:function(n,m,h,k,l){var e,f,c,d,b,g,a={},j=this.getFields().items,o=j.length,i=Ext.isArray;for(g=0;g<o;g++)if(e=j[g],(!m||e.isDirty())&&(f=e[k?"getModelData":"getSubmitData"](h,l),Ext.isObject(f)))for(b in f)f.hasOwnProperty(b)&&(c=f[b],h&&""===c&&(c=e.emptyText||""),e.isRadio?a[b]=a[b]||c:a.hasOwnProperty(b)?(i(d=a[b])||(d=a[b]=[d]),i(c)?a[b]=d.concat(c):d.push(c)):a[b]=c);return n&&(a=Ext.Object.toQueryString(a)),a},getFieldValues:function(a){return this.getValues(!1,a,!1,!0)},clearInvalid:function(){Ext.suspendLayouts();var a,b=this.getFields().items,d=b.length;for(a=0;a<d;a++)b[a].clearInvalid();return Ext.resumeLayouts(!0),this},reset:function(d){Ext.suspendLayouts();var a,b=this,c=b.getFields().items,e=c.length;for(a=0;a<e;a++)c[a].reset();return Ext.resumeLayouts(!0),!0===d&&delete b._record,b},applyToFields:function(d){var a,b=this.getFields().items,c=b.length;for(a=0;a<c;a++)Ext.apply(b[a],d);return this},applyIfToFields:function(d){var a,b=this.getFields().items,c=b.length;for(a=0;a<c;a++)Ext.applyIf(b[a],d);return this}}),Ext.define("Ext.form.FieldAncestor",{extend:Ext.Mixin,mixinConfig:{id:"fieldAncestor",after:{initInheritedState:"initFieldInheritedState"},before:{destroy:"onBeforeDestroy"}},initFieldAncestor:function(){var a=this;a.monitor=new Ext.container.Monitor({scope:a,selector:"[isFormField]:not([excludeForm])",addHandler:a.onChildFieldAdd,removeHandler:a.onChildFieldRemove}),a.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(a){var c=a.fieldDefaults,b=this.fieldDefaults;b&&(a.fieldDefaults=c?Ext.apply(Ext.Object.chain(c),b):b)},onChildFieldAdd:function(b){var a=this;a.mon(b,"errorchange",a.handleFieldErrorChange,a),a.mon(b,"validitychange",a.handleFieldValidityChange,a)},onChildFieldRemove:function(b){var a=this;a.mun(b,"errorchange",a.handleFieldErrorChange,a),a.mun(b,"validitychange",a.handleFieldValidityChange,a)},initFieldDefaults:function(){this.fieldDefaults||(this.fieldDefaults={})},handleFieldValidityChange:function(b,c){var a=this;b!==a&&(a.fireEvent("fieldvaliditychange",a,b,c),a.onFieldValidityChange(b,c))},handleFieldErrorChange:function(b,c){var a=this;b!==a&&(a.fireEvent("fielderrorchange",a,b,c),a.onFieldErrorChange(b,c))},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor.unbind()}}),Ext.define("Ext.form.CheckboxManager",{extend:Ext.util.MixedCollection,singleton:!0,getByName:function(b,a){return this.filterBy(function(c){return c.name===b&&c.getFormId()===a})}}),Ext.define("Ext.form.field.Checkbox",{extend:Ext.form.field.Base,alias:["widget.checkboxfield","widget.checkbox"],alternateClassName:"Ext.form.Checkbox",stretchInputElFixed:!1,childEls:["boxLabelEl","innerWrapEl","displayEl"],fieldSubTpl:['<div id="{cmpId}-innerWrapEl" data-ref="innerWrapEl" role="presentation"',' class="{wrapInnerCls}">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<input type="button" id="{id}" name="{inputName}" data-ref="inputEl" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{checkboxCls} {clipCls}" autocomplete="off" hidefocus="true" ','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',"/>",'<span id="{cmpId}-displayEl" data-ref="displayEl" class="{fieldCls} {typeCls} ','{typeCls}-{ui} {inputCls} {inputCls}-{ui} {childElCls} {afterLabelCls}"></span>','<tpl if="!labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:!0,compiled:!0}],publishes:{checked:1},subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:!0,focusCls:"form-checkbox-focus",fieldBodyCls:Ext.baseCSSPrefix+"form-cb-wrap",checked:!1,checkedCls:Ext.baseCSSPrefix+"form-cb-checked",boxLabelCls:Ext.baseCSSPrefix+"form-cb-label",boxLabelAlign:"after",afterLabelCls:Ext.baseCSSPrefix+"form-cb-after",wrapInnerCls:Ext.baseCSSPrefix+"form-cb-wrap-inner",noBoxLabelCls:Ext.baseCSSPrefix+"form-cb-no-box-label",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",isTextInput:!1,ariaRole:"checkbox",onRe:/^on$/i,inputCls:Ext.baseCSSPrefix+"form-cb",_checkboxCls:Ext.baseCSSPrefix+"form-cb-input",_clipCls:Ext.baseCSSPrefix+"hidden-clip",initComponent:function(){var a=this,b=a.value;void 0!==b&&(a.checked=a.isChecked(b,a.inputValue)),a.callParent(),a.getManager().add(a)},initDefaultName:Ext.emptyFn,initValue:function(){var a=this,b=!!a.checked;a.originalValue=a.lastValue=b,a.setValue(b)},getElConfig:function(){var a=this;return a.isChecked(a.rawValue,a.inputValue)&&a.addCls(a.checkedCls),a.callParent()},getSubTplData:function(g){var c,b,a=this,f=a.boxLabel,e=a.boxLabelAlign,d="before"===e;return(b=(c=Ext.apply(a.callParent([g]),{clipCls:a._clipCls,checkboxCls:a._checkboxCls,disabled:a.readOnly||a.disabled,wrapInnerCls:a.wrapInnerCls,boxLabel:f,boxLabelCls:a.boxLabelCls,boxLabelAlign:e,labelAlignedBefore:d,afterLabelCls:d?a.afterLabelCls:"",noBoxLabelCls:f?"":a.noBoxLabelCls,inputName:a.name||a.id})).inputElAriaAttributes)&&(b["aria-checked"]=!!a.checked,b["aria-labelledby"]=a.id+"-boxLabelEl"),c},initEvents:function(){var a=this;a.callParent(),a.inputEl.on({click:"onBoxClick",scope:a,translate:!1}),a.displayEl.on({click:"onBoxClick",mousedown:"_onDisplayElMouseDown",scope:a})},setBoxLabel:function(b){var a=this;a.boxLabel=b,a.rendered&&(a.boxLabelEl.setHtml(b),a.boxLabelEl[b?"removeCls":"addCls"](a.noBoxLabelCls),a.updateLayout())},onBoxClick:function(){var a=this;a.disabled||a.readOnly||a.setValue(!a.checked)},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b},isChecked:function(a,b){return!0===a||"true"===a||"1"===a||1===a||((Ext.isString(a)||Ext.isNumber(a))&&b?a==b:this.onRe.test(a))},setRawValue:function(e){var a=this,d=a.inputEl,c=a.displayEl,b=a.isChecked(e,a.inputValue);return d&&(a[b?"addCls":"removeCls"](a.checkedCls),a.ariaRole&&a.ariaEl.dom.setAttribute("aria-checked",b)),Ext.isIE8&&c&&b!==a.lastValue&&c.repaint(),a.checked=a.rawValue=b,a.duringSetValue||(a.lastValue=b),b},setValue:function(e){var c,b,f,d,a=this;if(Ext.isArray(e))for(f=(c=a.getManager().getByName(a.name,a.getFormId()).items).length,b=0;b<f;++b)(d=c[b]).setValue(Ext.Array.contains(e,d.inputValue));else a.duringSetValue=!0,a.callParent(arguments),delete a.duringSetValue;return a},valueToRaw:Ext.identityFn,onChange:function(c,d){var a=this,b=a.handler;b&&Ext.callback(b,a.scope,[a,c],0,a),a.callParent(arguments),a.reference&&a.publishState&&a.publishState("checked",c)},resetOriginalValue:function(f){var c,e,b,a=this;if(!f)for(e=(c=a.getManager().getByName(a.name,a.getFormId()).items).length,b=0;b<e;++b)c[b]!==a&&c[b].resetOriginalValue(!0);a.callParent()},beforeDestroy:function(){this.callParent(),this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var a=this,b=a.inputEl;a.callParent(),b&&(b.dom.disabled=a.readOnly)},setReadOnly:function(c){var a=this,b=a.inputEl;b&&(b.dom.disabled=!!c||a.disabled),a.callParent(arguments)},getFormId:function(){var b,a=this;return a.formId||(b=a.up("form"))&&(a.formId=b.id),a.formId},getFocusClsEl:function(){return this.displayEl},privates:{_onDisplayElMouseDown:function(a){a.preventDefault(),this.inputEl.focus(1)}}}),Ext.define("Ext.theme.triton.form.field.Checkbox",{override:"Ext.form.field.Checkbox",compatibility:Ext.isIE8,initComponent:function(){this.callParent(),Ext.on({show:"onGlobalShow",scope:this})},onFocus:function(b){var a;this.callParent([b]),(a=this.getFocusClsEl())&&a.syncRepaint()},onBlur:function(b){var a;this.callParent([b]),(a=this.getFocusClsEl())&&a.syncRepaint()},onGlobalShow:function(a){a.isAncestor(this)&&this.getFocusClsEl().syncRepaint()}}),Ext.define("Ext.form.Label",{extend:Ext.Component,alias:"widget.label",autoEl:"label",maskOnDisable:!1,getElConfig:function(){var a=this;return a.html=a.text?Ext.util.Format.htmlEncode(a.text):a.html||"",Ext.apply(a.callParent(),{htmlFor:a.forId||""})},setText:function(c,b){var a=this;return(b=!1!==b)?(a.text=c,delete a.html):(a.html=c,delete a.text),a.rendered&&(a.el.dom.innerHTML=!1!==b?Ext.util.Format.htmlEncode(c):c,a.updateLayout()),a}}),Ext.define("Ext.form.Panel",{extend:Ext.panel.Panel,mixins:{fieldAncestor:Ext.form.FieldAncestor},alias:"widget.form",alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",bodyAriaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var a=this;a.frame&&(a.border=!1),a.initFieldAncestor(),a.callParent(),a.relayEvents(a.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]),a.pollForChanges&&a.startPolling(a.pollInterval||500)},initItems:function(){this.callParent(),this.initMonitor(),this.form=this.createForm()},afterFirstLayout:function(){this.callParent(arguments),this.form.initialize()},createForm:function(){for(var a,d={},c=this.basicFormConfigs,e=c.length,b=0;b<e;++b)d[a=c[b]]=this[a];return new Ext.form.Basic(this,d)},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(a){return this.getForm().updateRecord(a)},getValues:function(d,c,a,b){return this.getForm().getValues(d,c,a,b)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(){this.form.reset()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling(),this.form.destroy(),this.callParent()},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},startPolling:function(b){this.stopPolling();var a=new Ext.util.TaskRunner(b);a.start({interval:0,run:this.checkChange,scope:this}),this.pollTask=a},stopPolling:function(){var a=this.pollTask;a&&(a.stopAll(),delete this.pollTask)},checkChange:function(){var a,b=this.form.getFields().items,c=b.length;for(a=0;a<c;a++)b[a].checkChange()}}),Ext.define("Ext.form.field.Picker",{extend:Ext.form.field.Text,alias:"widget.pickerfield",alternateClassName:"Ext.form.Picker",config:{triggers:{picker:{handler:"onTriggerClick",scope:"this"}}},renderConfig:{editable:!0},isPickerField:!0,matchFieldWidth:!0,pickerAlign:"tl-bl?",openCls:Ext.baseCSSPrefix+"pickerfield-open",isExpanded:!1,applyTriggers:function(a){var b=a.picker;return b.cls||(b.cls=this.triggerCls),this.callParent([a])},getSubTplData:function(d){var b,a;return b=this.callParent([d]),this.ariaRole&&(a=b.inputElAriaAttributes)&&(a["aria-haspopup"]=!0,a["aria-expanded"]=!1),b},initEvents:function(){var a=this;a.callParent(),a.keyNav=new Ext.util.KeyNav(a.inputEl,{down:a.onDownArrow,esc:{handler:a.onEsc,scope:a,defaultEventAction:!1},scope:a,forceKeyDown:!0}),Ext.isGecko&&a.inputEl.dom.setAttribute("autocomplete","off")},updateEditable:function(b,c){var a=this;b?a.inputEl.un("click",a.onTriggerClick,a):a.inputEl.on("click",a.onTriggerClick,a),a.callParent([b,c])},onEsc:function(a){Ext.isIE&&a.preventDefault(),this.isExpanded&&(this.collapse(),a.stopEvent())},onDownArrow:function(b){var a=this;150<b.time-a.lastDownArrow&&delete a.lastDownArrow,a.isExpanded?!b.isStopped&&b.time-a.lastDownArrow<150&&delete a.lastDownArrow:(b.stopEvent(),a.onTriggerClick(),a.lastDownArrow=b.time)},expand:function(){var d,c,b,e,a=this;!a.rendered||a.isExpanded||a.destroyed||(d=a.bodyEl,b=a.getPicker(),e=Ext.getDoc(),b.setMaxHeight(b.initialConfig.maxHeight),a.matchFieldWidth&&b.setWidth(a.bodyEl.getWidth()),b.show(),a.isExpanded=!0,a.alignPicker(),d.addCls(a.openCls),a.ariaRole&&((c=a.ariaEl.dom).setAttribute("aria-owns",b.listEl?b.listEl.id:b.el.id),c.setAttribute("aria-expanded",!0)),a.touchListeners=e.on({translate:!1,touchstart:a.collapseIf,scope:a,delegated:!1,destroyable:!0}),a.scrollListeners=Ext.on({scroll:a.onGlobalScroll,scope:a,destroyable:!0}),Ext.on("resize",a.alignPicker,a,{buffer:1}),a.fireEvent("expand",a),a.onExpand())},onExpand:Ext.emptyFn,alignPicker:function(){if(!this.destroyed){var a=this.getPicker();a.isVisible()&&a.isFloating()&&this.doAlign()}},doAlign:function(){var b,a=this,c=a.picker,d="-above";a.picker.alignTo(a.triggerWrap,a.pickerAlign,a.pickerOffset),b=c.el.getY()<a.inputEl.getY(),a.bodyEl[b?"addCls":"removeCls"](a.openCls+d),c[b?"addCls":"removeCls"](c.baseCls+d)},collapse:function(){var a=this;if(a.isExpanded&&!a.destroyed&&!a.destroying){var d=a.openCls,b=a.picker,c="-above";b.hide(),a.isExpanded=!1,a.bodyEl.removeCls([d,d+c]),b.el.removeCls(b.baseCls+c),a.ariaRole&&a.ariaEl.dom.setAttribute("aria-expanded",!1),a.touchListeners.destroy(),a.scrollListeners.destroy(),Ext.un("resize",a.alignPicker,a),a.fireEvent("collapse",a),a.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(b){var a=this;a.destroyed||b.within(a.bodyEl,!1,!0)||a.owns(b.target)||Ext.fly(b.target).isFocusable()||a.collapse()},getPicker:function(){var a=this,b=a.picker;return b||(a.creatingPicker=!0,a.picker=b=a.createPicker(),delete(b.ownerCmp=a).creatingPicker),a.picker},onFocusLeave:function(a){this.collapse(),this.callParent([a])},getRefItems:function(){var a=[];return this.picker&&(a[0]=this.picker),a},createPicker:Ext.emptyFn,onTriggerClick:function(b){var a=this;a.readOnly||a.disabled||(a.isExpanded?a.collapse():a.expand())},beforeDestroy:function(){var a=this,b=a.picker;a.callParent(),Ext.un("resize",a.alignPicker,a),Ext.destroy(a.keyNav,b),b&&(a.picker=b.pickerField=null)},privates:{onGlobalScroll:function(c){var a,b,d=this.el;c.getElement().contains(d)&&(a=c.getPosition(),b=d.getScrollIntoViewXY(c.getElement(),a.x,a.y),!this.up("[fixed]")&&b.y===a.y&&b.x===a.x||this.collapse())}}}),Ext.define("Ext.selection.Model",{extend:Ext.mixin.Observable,alternateClassName:"Ext.AbstractSelectionModel",mixins:[Ext.util.StoreHolder,Ext.mixin.Factoryable],alias:"selection.abstract",factoryConfig:{defaultType:"dataviewmodel"},$configPrefixed:!1,$configStrict:!1,config:{store:null,selected:{}},isSelectionModel:!0,allowDeselect:void 0,toggleOnClick:!0,selected:null,pruneRemoved:!0,suspendChange:0,ignoreRightMouseSelection:!1,constructor:function(b){var a=this;a.modes={SINGLE:!0,SIMPLE:!0,MULTI:!0},a.callParent([b]),a.setSelectionMode(a.mode),"SINGLE"!==a.selectionMode&&(a.allowDeselect=!0)},updateStore:function(b,a){this.bindStore(b,!a)},applySelected:function(a){return a.isCollection||(a=new Ext.util.Collection(Ext.apply({rootProperty:"data"},a))),a},getStoreListeners:function(){var a=this;return{add:a.onStoreAdd,clear:a.onStoreClear,remove:a.onStoreRemove,update:a.onStoreUpdate,idchanged:a.onIdChanged,load:a.onStoreLoad,refresh:a.onStoreRefresh,pageadd:a.onPageAdd,pageremove:a.onPageRemove}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){this.suspendChange&&--this.suspendChange},selectAll:function(b){var a=this,c=a.store.getRange(),d=a.getSelection().length;a.suspendChanges(),a.doSelect(c,!0,b),a.resumeChanges(),b||a.destroyed||a.maybeFireSelectionChange(a.getSelection().length!==d)},deselectAll:function(f){var c,g,e,a=this,b=a.getSelection(),d={},i=a.store,h=b.length;for(c=0,g=b.length;c<g;c++)e=b[c],d[e.id]=i.indexOf(e);b=Ext.Array.sort(b,function(c,e){return d[c.id]<d[e.id]?-1:1}),a.suspendChanges(),a.doDeselect(b,f),a.resumeChanges(),f||a.destroyed||a.maybeFireSelectionChange(a.getSelection().length!==h)},getSelectionStart:function(){return this.selectionStart},setSelectionStart:function(a){this.selectionStart=a},selectWithEvent:function(b,c){var a=this,d=a.isSelected(b),e=c.shiftKey;switch(a.selectionMode){case"MULTI":a.selectWithEventMulti(b,c,d);break;case"SIMPLE":a.selectWithEventSimple(b,c,d);break;case"SINGLE":a.selectWithEventSingle(b,c,d)}e||(a.isSelected(b)?a.selectionStart=b:a.selectionStart=null)},vetoSelection:function(a){return!!a.stopSelection||("keydown"===a.type||0===a.button?"mousedown"===a.type:!(!this.ignoreRightMouseSelection&&!this.isSelected(a.record))||void 0)},onNavigate:function(d){if(d.record&&!this.vetoSelection(d.keyEvent)){this.onBeforeNavigate(d);var a=this,b=d.keyEvent,f=b.ctrlKey||d.ctrlKey,g=d.recordIndex,c=d.record,j=d.previousRecord,k=a.isSelected(c),h=a.selectionStart&&a.isSelected(d.previousRecord)?a.selectionStart:a.selectionStart=d.previousRecord,l=d.previousRecordIndex,e=b.getCharCode(),m=e===b.SPACE,i=e===b.UP||e===b.PAGE_UP||e===b.HOME?"up":e===b.DOWN||e===b.PAGE_DOWN||e===b.END?"down":null;switch(a.selectionMode){case"MULTI":a.setSelectionStart(d.selectionStart),e===b.A&&f?(a.selected.beginUpdate(),a.selectRange(0,a.store.getCount()-1),a.selected.endUpdate()):m?b.shiftKey?a.selectRange(h,c,f):k?a.allowDeselect&&a.doDeselect(c):a.doSelect(c,f):b.shiftKey&&h?("up"===i&&l<=g?a.deselectRange(j,g+1):"down"===i&&g<=l?a.deselectRange(j,g-1):h!==c&&a.selectRange(h,c,f),a.lastSelected=c):e?f||a.doSelect(c,!1):a.selectWithEvent(c,b);break;case"SIMPLE":e===b.A&&f?(a.selected.beginUpdate(),a.selectRange(0,a.store.getCount()-1),a.selected.endUpdate()):k?a.doDeselect(c):a.doSelect(c,!0);break;case"SINGLE":f||(i?a.doSelect(c,!1):!m&&e||a.selectWithEvent(c,b))}b.shiftKey||a.destroyed||!a.isSelected(c)||(a.selectionStart=c,a.selectionStartIdx=g)}},selectRange:function(d,f,m){var h,a,g,e,c,j,k,b=this,i=b.store,l=b.selected.items;if(!b.isLocked()){for(d=(h=b.normalizeRowRange(d,f))[0],f=h[1],e=[],a=d;a<=f;a++)b.isSelected(i.getAt(a))||e.push(i.getAt(a));if(!m){for(c=[],b.suspendChanges(),a=0,g=l.length;a<g;++a)k=l[a],((j=i.indexOf(k))<d||f<j)&&c.push(k);for(a=0,g=c.length;a<g;++a)b.doDeselect(c[a]);b.resumeChanges()}b.destroyed||(e.length?b.doMultiSelect(e,!0):c&&b.maybeFireSelectionChange(0<c.length))}},deselectRange:function(d,e){var g,c,b,f,a=this,h=a.store;if(!a.isLocked()){for(d=(g=a.normalizeRowRange(d,e))[0],e=g[1],b=[],c=d;c<=e;c++)f=h.getAt(c),a.isSelected(f)&&b.push(f);b.length&&a.doDeselect(b)}},normalizeRowRange:function(a,b){var d,c=this.store;return Ext.isNumber(a)||(a=c.indexOf(a)),a=Math.max(0,a),Ext.isNumber(b)||(b=c.indexOf(b)),(b=Math.min(b,c.getCount()-1))<a&&(d=b,b=a,a=d),[a,b]},select:function(a,c,b){!Ext.isDefined(a)||Ext.isArray(a)&&!a.length||this.doSelect(a,c,b)},deselect:function(b,a){this.doDeselect(b,a)},doSelect:function(a,e,d){var c,b=this;if(!b.locked&&null!=a){if("number"==typeof a){if(!(c=b.store.getAt(a)))return;a=[c]}"SINGLE"===b.selectionMode?(a.isModel&&(a=[a]),a.length&&b.doSingleSelect(a[0],d)):b.doMultiSelect(a,e,d)}},doMultiSelect:function(b,k,d){var e,f,j,c,i,a=this,g=a.selected,h=!1;if(!a.locked){if(j=(b=Ext.isArray(b)?b:[b]).length,!k&&0<g.getCount()){if(e=a.deselectDuringSelect(b,d),a.destroyed)return;if(e[0])return void a.maybeFireSelectionChange(0<e[1]&&!d);h=0<e[1]}for(i=function(){g.getCount()||(a.selectionStart=c),g.add(c),h=!0},f=0;f<j;f++)if(c=b[f],!a.isSelected(c)&&(a.onSelectChange(c,!0,d,i),a.destroyed))return;a.lastSelected=c,a.maybeFireSelectionChange(h&&!d)}},deselectDuringSelect:function(h,g){var e,b,a=this,f=a.selected.getRange(),i=f.length,c=0,d=!1;for(a.suspendChanges(),a.deselectingDuringSelect=!0,b=0;b<i;++b)if(e=f[b],Ext.Array.contains(h,e)||(a.doDeselect(e,g)?++c:d=!0),a.destroyed){d=!0,c=0;break}return a.deselectingDuringSelect=!1,a.resumeChanges(),[d,c]},doDeselect:function(c,f){var j,b,i,a=this,h=a.selected,e=0,g=0,d=0;if(a.locked||!a.store)return!1;if("number"==typeof c){if(!(b=a.store.getAt(c)))return!1;c=[b]}else Ext.isArray(c)||(c=[c]);for(i=function(){++d,h.remove(b),b===a.selectionStart&&(a.selectionStart=null)},j=c.length,a.suspendChanges();e<j;e++)if(b=c[e],a.isSelected(b)&&(a.lastSelected===b&&(a.lastSelected=h.last()),++g,a.onSelectChange(b,!1,f,i),a.destroyed))return!1;return a.resumeChanges(),a.maybeFireSelectionChange(0<d&&!f),d===g},doSingleSelect:function(b,c){var f,a=this,e=!1,d=a.selected;a.locked||a.isSelected(b)||(f=function(){if(d.getCount()){a.suspendChanges();var f=a.deselectDuringSelect([b],c);if(a.destroyed)return;if(a.resumeChanges(),f[0])return!1}a.lastSelected=b,d.getCount()||(a.selectionStart=b),d.add(b),e=!0},a.onSelectChange(b,!0,c,f),e&&!a.destroyed&&a.maybeFireSelectionChange(!c))},maybeFireSelectionChange:function(b){var a=this;b&&!a.suspendChange&&a.fireEvent("selectionchange",a,a.getSelection())},getLastSelected:function(){return this.lastSelected},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():"SINGLE",this.selectionMode=this.modes[a]?a:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isRangeSelected:function(b,c){var a,d,e=this,f=e.store;for(b=(d=e.normalizeRowRange(b,c))[0],c=d[1],a=b;a<=c;a++)if(!e.isSelected(f.getAt(a)))return!1;return!0},isSelected:function(a){return a=Ext.isNumber(a)?this.store.getAt(a):a,this.selected.contains(a)},hasSelection:function(){var a=this.getSelected();return!(!a||!a.getCount())},refresh:function(){var h,j,d,g,i,f,a=this,l=a.store,e=[],c=[],k=a.getSelection(),m=k.length,b=a.getSelected();if(l&&(b.isCollection||b.isRows)&&b.getCount()){for((d=l.getData()).getSource&&(j=d.getSource())&&(d=j),a.refreshing=!0,b.beginUpdate(),a.suspendChanges(),f=0;f<m&&(g=k[f],(i=d.get(g.getId()))?e.push(i):a.pruneRemoved||c.push(g),"SINGLE"!==a.mode||!c.length);f++);b.getCount()!==e.length+c.length&&(h=!0),a.clearSelections(),e.length&&a.doSelect(e,!1,!0),c.length&&(b.add(c),a.lastSelected||(a.lastSelected=c[c.length-1])),a.resumeChanges(),h?b.endUpdate():b.updating--,a.refreshing=!1,a.maybeFireSelectionChange(h)}},clearSelections:function(){var a=this.getSelected();a&&a.clear(),this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){!this.store.isLoading()&&this.hasSelection()&&(this.clearSelections(),this.maybeFireSelectionChange(!0))},onStoreRemove:function(i,c,j,h){var d,g,f,e,a=this,b=c;if(a.selectionStart&&Ext.Array.contains(c,a.selectionStart)&&(a.selectionStart=null),!h&&!a.locked&&a.pruneRemoved){if(e=i.isMoving(null,!0))for(b=null,d=0,g=c.length;d<g;++d)e[(f=c[d]).id]||(b=b||[]).push(f);b&&a.deselect(b)}},onPageRemove:function(c,b,a){this.onStoreRemove(this.store,a)},onPageAdd:function(f,e,c){var a,b,d=c.length;for(a=0;a<d;a++)b=c[a],this.selected.get(b.id)&&this.selected.replace(b)},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){var a=this;a.clearSelections(),a.bindStore(null),a.selected=Ext.destroy(a.selected),a.callParent()},onStoreUpdate:Ext.emptyFn,onIdChanged:function(d,b,a,c){this.selected.updateKey(b,a)},onStoreRefresh:function(){this.updateSelectedInstances(this.selected)},updateSelectedInstances:function(f){var g,k,d,b,c,i,a=this,h=a.getStore(),e=a.lastSelected,j=0,l=a.pruneRemovedOnRefresh();if(!h.isBufferedStore){for(k=(g=f.getRange()).length,e&&(a.lastSelected=h.getById(e.id),i=a.lastSelected!==e),a.refreshing=!0,d=0;d<k;++d)b=g[d],(c=h.getById(b.id))?c!==b&&f.replace(c):l&&(f.remove(b),++j);a.refreshing=!1,a.maybeFireSelectionChange(0<j),i&&a.fireEvent("lastselectedchanged",a,a.getSelection(),a.lastSelected)}},pruneRemovedOnRefresh:function(){return this.pruneRemoved},onStoreLoad:Ext.emptyFn,onSelectChange:function(d,e,b,f){var a=this,c=e?"select":"deselect";!1!==(b||a.fireEvent("before"+c,a,d))&&!1!==f()&&(b||a.fireEvent(c,a,d))},onEditorKey:Ext.emptyFn,beforeViewRender:function(a){Ext.Array.include(this.views||(this.views=[]),a)},onHeaderClick:Ext.emptyFn,resolveListenerScope:function(a){var b,c=this.view;return c&&(b=c.resolveSatelliteListenerScope(this,a)),b||this.callParent([a])},bindComponent:Ext.emptyFn,privates:{onBeforeNavigate:Ext.privateFn,selectWithEventMulti:function(b,l,e){var f,d,h,a=this,g=l.shiftKey,c=l.ctrlKey,j=g?a.getSelectionStart():null,i=a.getSelection(),k=i.length;if(g&&j)a.selectRange(j,b,c);else if(c&&e)a.allowDeselect&&a.doDeselect(b,!1);else if(c)a.doSelect(b,!0,!1);else if(e&&!g&&!c&&1<k){if(a.allowDeselect){for(f=[],d=0;d<k;++d)(h=i[d])!==b&&f.push(h);a.doDeselect(f)}}else e||a.doSelect(b,!1)},selectWithEventSimple:function(a,c,b){b?this.doDeselect(a):this.doSelect(a,!0)},selectWithEventSingle:function(c,e,d){var a=this,b=a.allowDeselect;b&&!e.ctrlKey&&(b=a.toggleOnClick),b&&d?a.doDeselect(c):a.doSelect(c,!1)}}}),Ext.define("Ext.selection.DataViewModel",{extend:Ext.selection.Model,alias:"selection.dataviewmodel",deselectOnContainerClick:!0,bindComponent:function(b){var c,a=this;a.view!==b&&(a.view&&(a.navigationModel=null,Ext.destroy(a.viewListeners,a.navigationListeners)),(a.view=b)&&((c=a.getViewListeners()).scope=a,c.destroyable=!0,a.navigationModel=b.getNavigationModel(),a.viewListeners=b.on(c),a.navigationListeners=a.navigationModel.on({navigate:a.onNavigate,scope:a,destroyable:!0})))},getViewListeners:function(){var a={};return a[this.view.triggerCtEvent]=this.onContainerClick,a},onUpdate:function(a){var b=this.view;b&&this.isSelected(a)&&b.onItemSelect(a)},onContainerClick:function(){this.deselectOnContainerClick&&this.deselectAll()},onSelectChange:function(b,f,d,h){var a=this,c=a.view,g=f?"select":"deselect",e=a.store.indexOf(b);!1!==(d||a.fireEvent("before"+g,a,b,e))&&!1!==h()&&(c&&(f?c.onItemSelect(b):c.onItemDeselect(b)),d||a.fireEvent(g,a,b,e))},destroy:function(){this.bindComponent(),Ext.destroy(this.keyNav),this.callParent()}}),Ext.define("Ext.view.NavigationModel",{mixins:[Ext.util.Observable,Ext.mixin.Factoryable,Ext.util.StoreHolder],alias:"view.navigation.default",config:{store:null},focusCls:Ext.baseCSSPrefix+"view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(a){this.view!==a&&(this.view=a,this.bindView(a))},bindView:function(c){var b,a=this,d=c.dataSource;a.initKeyNav(c),d.isEmptyStore||a.setStore(d),(b=a.getViewListeners()).destroyable=!0,a.viewListeners=a.viewListeners||[],a.viewListeners.push(c.on(b))},updateStore:function(a){this.mixins.storeholder.bindStore.apply(this,[a])},getViewListeners:function(){var a=this;return{containermousedown:a.onContainerMouseDown,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemMouseDown,scope:a}},initKeyNav:function(b){var a=this;a.keyNav=new Ext.util.KeyNav({target:b,ignoreInputFields:!0,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:a.processViewEvent,up:a.onKeyUp,down:a.onKeyDown,right:a.onKeyRight,left:a.onKeyLeft,pageDown:a.onKeyPageDown,pageUp:a.onKeyPageUp,home:a.onKeyHome,end:a.onKeyEnd,space:a.onKeySpace,enter:a.onKeyEnter,A:{ctrl:!0,handler:a.onSelectAllKeyPress},scope:a})},processViewEvent:function(e,b,d,c,a){return a},addKeyBindings:function(a){this.keyNav.addBindings(a)},enable:function(){this.keyNav.enable(),this.disabled=!1},disable:function(){this.keyNav.disable(),this.disabled=!0},onContainerMouseDown:function(b,a){"mouse"===a.pointerType&&Ext.getScrollbarSize().width&&(b.el.getClientRegion().contains(a.getPoint())||a.preventDefault())},onItemMouseDown:function(e,c,d,b,a){"touch"!==a.pointerType&&this.setPosition(b)},onItemClick:function(e,b,d,c,a){this.record===b?this.fireNavigateEvent(a):this.setPosition(c,a)},setPosition:function(d,h,j,g){var b,c,a=this,f=a.view,i=f.getSelectionModel(),e=f.dataSource;if(null!=d&&f.all.getCount()?"number"==typeof d?(c=Math.max(Math.min(d,e.getCount()-1),0),b=e.getAt(d)):d.isEntity?(b=e.getById(d.id),-1===(c=e.indexOf(b))&&(b=e.getAt(0),c=0)):d.tagName?(b=f.getRecord(d),c=e.indexOf(b)):b=c=null:a.record=a.recordIndex=null,b===a.record)return a.recordIndex=c,a.focusPosition(c);a.item&&a.item.removeCls(a.focusCls),a.previousRecordIndex=a.recordIndex,a.previousRecord=a.record,a.previousItem=a.item,a.recordIndex=c,a.record=b,g=g||a.record===a.lastFocused,b?a.focusPosition(a.recordIndex):a.item=null,j||i.fireEvent("focuschange",i,a.previousRecord,a.record),!g&&h&&a.fireNavigateEvent(h)},focusPosition:function(b){var a=this;null!=b&&-1!==b?(b.isEntity&&(b=a.view.dataSource.indexOf(b)),a.item=a.view.all.item(b),a.item?(a.lastFocused=a.record,a.lastFocusedIndex=a.recordIndex,a.focusItem(a.item)):a.record=null):a.item=null},focusItem:function(a){a.addCls(this.focusCls),a.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){return-1===this.view.dataSource.indexOf(this.lastFocused)?null:this.lastFocused},onKeyUp:function(b){var a=this.recordIndex-1;a<0&&(a=this.view.all.getCount()-1),this.setPosition(a,b)},onKeyDown:function(b){var a=this.recordIndex+1;a>this.view.all.getCount()-1&&(a=0),this.setPosition(a,b)},onKeyRight:function(b){var a=this.recordIndex+1;a>this.view.all.getCount()-1&&(a=0),this.setPosition(a,b)},onKeyLeft:function(b){var a=this.recordIndex-1;a<0&&(a=this.view.all.getCount()-1),this.setPosition(a,b)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(a){this.setPosition(0,a)},onKeyEnd:function(a){this.setPosition(this.view.all.getCount()-1,a)},onKeySpace:function(a){this.fireNavigateEvent(a)},onKeyEnter:function(a){a.stopEvent(),a.view.fireEvent("itemclick",a.view,a.record,a.item,a.recordIndex,a)},onSelectAllKeyPress:function(a){this.fireNavigateEvent(a)},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{navigationModel:a,keyEvent:b,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,recordIndex:a.recordIndex,record:a.record,item:a.item})},destroy:function(){var a=this;a.setStore(null),Ext.destroy(a.viewListeners,a.keyNav),a.keyNav=a.viewListeners=a.dataSource=a.lastFocused=null,a.callParent()}}),Ext.define("Ext.view.AbstractView",{extend:Ext.Component,mixins:[Ext.util.StoreHolder],inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.getAttribute("data-boundView"))}},defaultBindProperty:"store",renderBuffer:document.createElement("div"),statics:{updateDelay:200,queueRecordChange:function(n,o,d,m,f){var h,b,l,e,c,j,k,a=this,g=a.changeQueue||(a.changeQueue={}),i=d.internalId;if(b=(h=g[i]||(g[i]={operation:m,record:d,data:{},views:[]})).data,Ext.Array.include(h.views,n),f&&(l=f.length)){for(e=0;e<l;e++)c=f[e],j=d.data[c],b.hasOwnProperty(c)?d.isEqual(b[c],j)&&(delete b[c],k=!0):b[c]=j;k&&!Ext.Object.getKeys(b).length&&delete g[i]}else Ext.apply(b,d.data);a.flushQueueTask||(a.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(a.onFlushTick,a):Ext.Function.bind(a.onFlushTick,a),interval:Ext.view.AbstractView.updateDelay,repeat:1})),a.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var f,h,e,a,g,d,b,c=this;if(Ext.isScrolling)c.flushQueueTask.start();else{for(g in e=c.changeQueue,this.changeQueue={},e)for(h=(f=(a=e[g]).views).length,d=0;d<h;d++)(b=f[d]).destroyed||b.handleUpdate(b.dataSource,a.record,a.operation,Ext.Object.getKeys(a.data));Ext.AnimationQueue.stop(c.flushChangeQueue,c)}}},config:{selection:null,store:"ext-empty-store",navigationModel:{type:"default"},selectionModel:{type:"dataviewmodel"}},publishes:["selection"],twoWayBindable:["selection"],throttledUpdate:!1,deferInitialRefresh:!1,itemCls:Ext.baseCSSPrefix+"dataview-item",loadingText:"Loading...",loadMask:!0,loadingUseMsg:!0,selectedItemCls:Ext.baseCSSPrefix+"item-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,blockRefresh:!1,preserveScrollOnRefresh:!1,preserveScrollOnReload:!1,ariaRole:"listbox",itemAriaRole:"option",last:!1,focusable:!0,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:!0,updateSuspendCounter:0,addCmpEvents:Ext.emptyFn,constructor:function(a){a&&a.selModel&&(a.selectionModel=a.selModel),this.callParent([a])},initComponent:function(){var d,a=this,b=(Ext.isDefined,a.itemTpl),c={};b&&(Ext.isArray(b)?("string"!=typeof b[b.length-1]&&(c=(b=b.slice(0)).pop()),b=b.join("")):Ext.isObject(b)&&(c=Ext.apply(c,b.initialConfig),b=b.html),a.itemSelector||(a.itemSelector="."+a.itemCls),b=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',a.itemCls,b,a.itemAriaRole),a.tpl=new Ext.XTemplate(b,c)),a.callParent(),a.tpl=a.getTpl("tpl"),a.overItemCls&&(a.trackOver=!0),a.addCmpEvents(),d=a.store=Ext.data.StoreManager.lookup(a.store||"ext-empty-store"),a.dataSource||(a.dataSource=d),a.bindStore(d,!0),a.getNavigationModel().bindComponent(this),a.all||(a.all=new Ext.CompositeElementLite),a.scrollState={top:0,left:0},a.savedTabIndexAttribute="data-savedtabindex-"+a.id},getElConfig:function(){var a=this.mixins.renderable.getElConfig.call(this);return this.focusable&&(a.tabIndex=0),a},onRender:function(){var a=this.loadMask;this.callParent(arguments),a&&this.createMask(a)},beforeLayout:function(){var a=this;a.callParent(arguments),a.refreshNeeded&&!a.pendingRefresh&&(a.refreshCounter?a.refresh():a.doFirstRefresh(a.dataSource))},onMaskBeforeShow:function(){var a=this,b=a.loadingHeight;b&&b>a.getHeight()&&(a.hasLoadingHeight=!0,a.oldMinHeight=a.minHeight,a.minHeight=b,a.updateLayout())},onMaskHide:function(){var a=this;!a.destroying&&a.hasLoadingHeight&&(a.minHeight=a.oldMinHeight,a.updateLayout(),delete a.hasLoadingHeight)},beforeRender:function(){this.callParent(arguments),this.getSelectionModel().beforeViewRender(this)},afterRender:function(){this.callParent(arguments),this.focusable&&(this.focusEl=this.el)},getRefItems:function(){var a=this.loadMask,b=[];return a&&a.isComponent&&b.push(a),b},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(c){var b,a=this;a.ignoreNextSelection||(a.ignoreNextSelection=!0,b=a.getSelectionModel(),c?b.select(c):b.deselectAll(),a.ignoreNextSelection=!1)},updateBindSelection:function(d,c){var a=this,b=null;a.ignoreNextSelection||(a.ignoreNextSelection=!0,c.length&&(b=d.getLastSelected(),a.hasHadSelection=!0),a.hasHadSelection&&a.setSelection(b),a.ignoreNextSelection=!1)},applySelectionModel:function(b,e){var c,d,a=this,g=a.grid;return e?(e.un({scope:a,selectionchange:a.updateBindSelection,lastselectedchanged:a.updateBindSelection,select:a.ariaSelect,deselect:a.ariaDeselect}),Ext.destroy(a.selModelRelayer),b=Ext.Factory.selection(b)):b&&b.isSelectionModel?b.locked=a.disableSelection:(c=a.simpleSelect?"SIMPLE":a.multiSelect?"MULTI":"SINGLE","string"==typeof b&&(b={type:b}),b=Ext.Factory.selection(Ext.apply({allowDeselect:a.allowDeselect||a.multiSelect,mode:c,locked:a.disableSelection},b))),"SINGLE"!==b.mode&&((d=(g||a).ariaEl.dom)?d.setAttribute("aria-multiselectable",!0):g||((a.ariaRenderAttributes||(a.ariaRenderAttributes={}))["aria-multiselectable"]=!0)),a.selModelRelayer=a.relayEvents(b,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]),b.on({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection,select:a.ariaSelect,deselect:a.ariaDeselect}),b},updateSelectionModel:function(a){this.selModel=a},applyNavigationModel:function(a){return Ext.Factory.viewNavigation(a)},onFocusEnter:function(d){var c,a=this,b=a.getNavigationModel();a.toggleChildrenTabbability(!1),!a.itemFocused&&a.all.getCount()&&(c=b.getLastFocused(),b.setPosition(c||0,d.event,null,!c),a.itemFocused=null!=b.getPosition()),a.itemFocused&&this.el.dom.setAttribute("tabIndex","-1"),a.callParent([d])},onFocusLeave:function(b){var a=this;a.itemFocused&&!a.refreshing&&(a.getNavigationModel().setPosition(null,b.event,null,!0),a.itemFocused=!1,a.el.dom.setAttribute("tabIndex",0)),a.callParent([b])},ariaSelect:function(c,b){var a=this.getNode(b);a&&a.setAttribute("aria-selected",!0)},ariaDeselect:function(c,b){var a=this.getNode(b);a&&a.removeAttribute("aria-selected")},onRemoved:function(a){this.callParent([a]),a||this.onFocusLeave({})},refresh:function(){var e,f,h,b,a=this,c=a.all,i=c.getCount(),g=a.refreshCounter,j=a.getSelectionModel(),d=g&&c.getCount()&&a.preserveScrollOnRefresh&&a.getScrollable();a.rendered&&!a.destroyed&&(a.hasListeners.beforerefresh&&!1===a.fireEvent("beforerefresh",a)||(a.refreshing=!0,h=a.saveFocusState(),e=a.getTargetEl(),f=a.getViewRange(),e.dom,d&&((b=d.getPosition()).x||b.y||(b=null)),g?(a.clearViewEl(),a.refreshCounter++):a.refreshCounter=1,a.tpl.append(e,a.collectData(f,c.startIndex||0)),f.length<1?(a.addEmptyText(),c.clear()):(a.collectNodes(e.dom),a.updateIndexes(0)),h(),!1!==a.refreshSelmodelOnRefresh&&j.refresh(),a.refreshNeeded=!1,a.refreshSize(c.getCount()!==i),a.fireEvent("refresh",a,f),d&&d.scrollTo(b),a.viewReady||(a.viewReady=!0,a.fireEvent("viewready",a)),a.refreshing=!1,a.refreshScroll(),a.cleanupData()))},addEmptyText:function(){var a=this,b=a.getStore();a.emptyText&&!b.isLoading()&&(!a.deferEmptyText||1<a.refreshCounter||b.isLoaded())&&(a.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",a.getTargetEl().dom,a.emptyText))},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(d){var a=this,b=a.getSizeModel(),c=a.getScrollable();b.height.shrinkWrap||b.width.shrinkWrap||d?a.updateLayout():a.touchScroll&&!a.bufferedRenderer&&(c?c.refresh():a.on({boxready:a.refreshScroll,scope:a,single:!0}))},afterFirstLayout:function(d,c){var a=this,b=a.getScrollable();b&&b.on({scroll:a.onViewScroll,scrollend:a.onViewScrollEnd,scope:a,onFrame:!!Ext.global.requestAnimationFrame}),a.callParent([d,c])},clearViewEl:function(){var a=this,c=a.getTargetEl(),b=a.getNodeContainer()===c;a.clearEmptyEl(),a.all.clear(!b),b&&(c.dom.innerHTML="")},clearEmptyEl:function(){var a=this.emptyEl;a&&Ext.removeNode(a),this.emptyEl=null},onViewScroll:function(c,a,b){this.fireEvent("scroll",this,a,b)},onViewScrollEnd:function(c,a,b){this.fireEvent("scrollend",this,a,b)},saveScrollState:function(){var a=this,b=a.scrollState;a.rendered&&(b.left=a.getScrollX(),b.top=a.getScrollY())},restoreScrollState:function(){var a=this,b=a.scrollState;a.rendered&&(a.setScrollX(b.left),a.setScrollY(b.top))},prepareData:function(c,f,e){var a,b,d;if(e)for(b in a=e.getAssociatedData())a.hasOwnProperty(b)&&(d||(c=Ext.Object.chain(c),d=!0),c[b]=a[b]);return c},collectData:function(c,e){for(var b,d=[],a=0,f=c.length;a<f;a++)b=c[a],d[a]=this.prepareData(b.data,e+a,b);return d},cleanupData:Ext.emptyFn,bufferRender:function(g,h){var a,f,c,b=this,e=b.renderBuffer,d=document.createDocumentFragment();for(b.tpl.overwrite(e,b.collectData(g,h)),c=0,f=(a=Ext.fly(e).query(b.getItemSelector())).length;c<f;c++)d.appendChild(a[c]);return{fragment:d,children:a}},nodeContainerSelector:null,getNodeContainer:function(){var b=this.getTargetEl(),a=this.nodeContainerSelector;return a?b.down(a,!0):b},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(g,c,f,d,b){var a=this;b&&b.filtered||!a.getNode(c)||(a.throttledUpdate?a.statics().queueRecordChange(a,g,c,f,d):a.handleUpdate.apply(a,arguments))},handleUpdate:function(f,b){var c,d,a=this,e=a.getSelectionModel();if(a.viewReady&&-1<(c=a.dataSource.indexOf(b))&&a.getNode(b))return d=a.bufferRender([b],c).children[0],a.all.replaceElement(c,d,!0),a.updateIndexes(c,c),e.onUpdate(b),a.refreshSizePending=!0,e.isSelected(b)&&a.onItemSelect(b),a.hasListeners.itemupdate&&a.fireEvent("itemupdate",b,c,d),d},onReplace:function(o,b,e,d){var h,g,f,l,k,i,a=this,c=a.all,n=a.getSelectionModel(),j=b;a.rendered&&(g=(h=a.bufferRender(d,b,!0)).fragment,f=h.children,c.item(b)?c.item(b).insertSibling(g,"before",!0):a.appendNodes(g),c.insert(b,f),e.length&&(i=a.saveFocusState()),k=(b+=d.length)+e.length-1,l=c.removeRange(b,k,!0),!1!==a.refreshSelmodelOnRefresh&&n.refresh(),a.updateIndexes(b),a.hasListeners.itemremove&&a.fireEvent("itemremove",e,j,l,a),a.hasListeners.itemadd&&a.fireEvent("itemadd",d,j,f),i(),a.refreshSize())},onAdd:function(f,d,b){var c,a=this,e=a.getSelectionModel();a.rendered&&(0===a.all.getCount()?(a.refresh(),c=a.all.slice()):(c=a.doAdd(d,b),!1!==a.refreshSelmodelOnRefresh&&e.refresh(),a.updateIndexes(b),a.refreshSizePending=!0),a.hasListeners.itemadd&&a.fireEvent("itemadd",d,b,c))},appendNodes:function(a){var b=this.all,c=b.getCount();this.nodeContainerSelector?this.getNodeContainer().appendChild(a):b.item(c-1).insertSibling(a,"after")},doAdd:function(j,b){var d=this,g=d.bufferRender(j,b,!0),f=g.fragment,c=g.children,a=d.all,h=a.getCount(),e=a.startIndex||0,i=a.endIndex||h-1;return 0===h||i<b?d.appendNodes(f):b<=e?a.item(e).insertSibling(f,"before",!0):a.item(b).insertSibling(c,"before",!0),a.insert(b,c),c},onRemove:function(l,d,b){var e,c,k,f,h,j,a=this,i=a.all,g=a.hasListeners.itemremove;if(i.getCount()){if(0===a.dataSource.getCount())g&&a.fireEvent("itemremove",d,b,a.getNodes(b,b+d.length-1)),a.refresh();else{for(j=a.saveFocusState(),g&&(f=[]),c=d.length-1;0<=c;--c)k=d[c],e=b+c,f&&(h=i.item(e),f[c]=h?h.dom:void 0),i.item(e)&&a.doRemove(k,e);g&&a.fireEvent("itemremove",d,b,f,a),j(),a.updateIndexes(b)}a.refreshSizePending=!0}},doRemove:function(b,a){this.all.removeElement(a,!0)},saveFocusState:function(){var a=this,e=a.dataSource||a.store,c=a.getNavigationModel(),b=c.recordIndex,d=c.record;return a.el.contains(Ext.Element.getActiveElement())?(a.el.dom.focus(),function(){e.getCount()&&(b=Math.min(b,a.all.getCount()-1),c.setPosition(e.contains(d)?d:b,null,null,!0))}):Ext.emptyFn},refreshNode:function(a){Ext.isNumber(a)&&(a=this.store.getAt(a)),this.onUpdate(this.dataSource,a)},updateIndexes:function(d,b){var c,a,e=this.all.elements,f=this.getViewRange(),g=this.id;for(d=d||0,b=b||(0===b?0:e.length-1),a=d;a<=b;a++)(c=e[a]).setAttribute("data-recordIndex",a),c.setAttribute("data-recordId",f[a].internalId),c.setAttribute("data-boundView",g)},bindStore:function(b,e){var a=this,c=a.getSelectionModel(),d=a.getNavigationModel();c.bindStore(b),c.bindComponent(b?a:null),a.mixins.storeholder.bindStore.apply(a,arguments),d.setStore(b),b&&a.componentLayoutCounter&&a.doFirstRefresh(b,!e)},doFirstRefresh:function(b,c){var a=this;a.deferInitialRefresh&&!c?Ext.defer(a.doFirstRefresh,1,a,[b,!0]):b&&!b.isLoading()&&a.refresh()},onUnbindStore:function(a){this.setMaskBind(null),this.dataSource===a&&(this.dataSource=null)},onBindStore:function(c,b){var a=this;a.store.isBufferedStore&&(a.store.preserveScrollOnReload=a.preserveScrollOnReload),b&&b.isBufferedStore&&delete b.preserveScrollOnReload,a.setMaskBind(c),a.dataSource||(a.dataSource=c)},setMaskBind:function(b){var a=this.loadMask;this.rendered&&a&&b&&!a.bindStore&&(a=this.createMask()),a&&a.bindStore&&a.bindStore(b)},getStoreListeners:function(){var a=this;return{refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.onDataRefresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:function(){++this.updateSuspendCounter,Ext.suspendLayouts()},onEndUpdate:function(){var a=this;a.updateSuspendCounter&&--a.updateSuspendCounter,Ext.resumeLayouts(!0),a.refreshSizePending&&(a.refreshSize(!0),a.refreshSizePending=!1)},onDataRefresh:function(b){var a=this,c=a.preserveScrollOnRefresh;b.loadCount>a.lastRefreshLoadCount&&(a.preserveScrollOnRefresh=a.preserveScrollOnReLoad),a.refreshView(),a.preserveScrollOnRefresh=c,a.lastRefreshLoadCount=b.loadCount},refreshView:function(){var a=this;a.blockRefresh||!a.rendered||a.up("[collapsed],[isCollapsingOrExpanding],[hidden]")?a.refreshNeeded=!0:a.bufferedRenderer?a.bufferedRenderer.refreshView():a.refresh()},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){for(var c=[],b=this.getSelectionModel().getSelection(),d=b.length,a=0;a<d;a++)c.push(this.getNode(b[a]));return c},getRecords:function(c){for(var a=[],b=0,e=c.length,d=this.dataSource.data;b<e;b++)a[a.length]=d.getByKey(c[b].getAttribute("data-recordId"));return a},getRecord:function(a){return this.dataSource.getByInternalId(Ext.getDom(a).getAttribute("data-recordId"))},isSelected:function(a){var b=this.getRecord(a);return this.getSelectionModel().isSelected(b)},select:function(c,b,a){this.getSelectionModel().select(c,b,a)},deselect:function(b,a){this.getSelectionModel().deselect(b,a)},getNode:function(a){var b,c=this;return c.rendered&&(a||0===a)&&(b=Ext.isString(a)?document.getElementById(a):a.isModel?c.getNodeByRecord(a):Ext.isNumber(a)?c.all.elements[a]:(a.target&&a.target.nodeType&&(a=a.target),Ext.fly(a).findParent(c.itemSelector,c.getTargetEl()))),b||null},getNodeByRecord:function(a){var b=this.store.indexOf(a);return this.all.elements[b]||null},getNodes:function(b,a){return void 0!==a&&a++,this.all.slice(b,a)},indexOf:function(a){return(a=this.getNode(a))||0===a?a.getAttribute("data-recordIndex")?Number(a.getAttribute("data-recordIndex")):this.all.indexOf(a):-1},onDestroy:function(){var a=this,b=a.updateSuspendCounter;for(a.all.clear(),a.emptyEl=null,a.callParent(),a.bindStore(null),a.store=a.dataSource=a.storeListeners=null,a.selModelRelayer&&(a.selModelRelayer.destroy(),a.selModelRelayer=null),Ext.destroy(a.navigationModel,a.selectionModel),a.navigationModel=a.selectionModel=a.selModel=null,a.loadMask=null;b--;)Ext.resumeLayouts(!0)},onItemSelect:function(b){var a=this.getNode(b);a&&Ext.fly(a).addCls(this.selectedItemCls)},onItemDeselect:function(b){var a=this.getNode(b);a&&Ext.fly(a).removeCls(this.selectedItemCls)},getItemSelector:function(){return this.itemSelector},addItemCls:function(b,c){var a=this.getNode(b);a&&Ext.fly(a).addCls(c)},removeItemCls:function(b,c){var a=this.getNode(b);a&&Ext.fly(a).removeCls(c)},setStore:function(b){var a=this;a.store!==b&&(a.isConfiguring?a.store=b:a.bindStore(b,!1))},privates:{toggleChildrenTabbability:function(b){var a=this.getTargetEl();b?a.restoreTabbableState(!0):a.saveTabbableState({skipSelf:!0,includeSaved:!1})},collectNodes:function(c){var a=this.all,b={role:this.itemAriaRole};a.fill(Ext.fly(c).query(this.getItemSelector()),a.startIndex||0),this.focusable&&(b.tabindex="-1"),a.set(b)},createMask:function(d){var b,a=this,c=a.getStore();return!c||c.isEmptyStore||c.loadsSynchronously()||(b={target:a,msg:a.loadingText,useMsg:a.loadingUseMsg,store:c},a.loadingCls&&(b.msgCls=a.loadingCls),Ext.isObject(d)&&(b=Ext.apply(b,d)),a.loadMask=new Ext.LoadMask(b),a.loadMask.on({scope:a,beforeshow:a.onMaskBeforeShow,hide:a.onMaskHide})),a.loadMask},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)},getTargetEl:function(){return this.touchScroll?this.getScrollerEl():this.callParent()}}},function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection().length},getSelectedRecords:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection()},select:function(d,c,b){Ext.global.console&&Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()");var a=this.getSelectionModel();return a.select.apply(a,arguments)},clearSelections:function(){return Ext.global.console&&Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()"),this.getSelectionModel().deselectAll()}})})}),Ext.define("Ext.view.View",{extend:Ext.view.AbstractView,alternateClassName:"Ext.DataView",alias:"widget.dataview",inputTagRe:/^textarea$|^input$/i,keyEventRe:/^key/,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keyup:"KeyUp",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var a=this;a.callParent(),a.mon(a.el,{scope:a,click:a.handleEvent,longpress:a.handleEvent,mousedown:a.handleEvent,mouseup:a.handleEvent,dblclick:a.handleEvent,contextmenu:a.handleEvent,keydown:a.handleEvent,keyup:a.handleEvent,keypress:a.handleEvent,mouseover:a.handleMouseOver,mouseout:a.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(b){var a=this,d=a.getTargetSelector(),c=b.getTarget(d);a.destroyed||(c?a.mouseOverItem!==c&&a.el.contains(c)&&(a.mouseOverItem=b.item=c,b.newType="mouseenter",a.handleEvent(b)):a.handleEvent(b))},handleMouseOut:function(a){var d,c=this,f=c.getTargetSelector(),b=a.getTarget(f),e=a.getRelatedTarget(f);(b!==e||null===b&&null===e)&&(c.destroyed||(b&&(d=c.self.getBoundView(b))?(a.item=b,a.newType="mouseleave",d.handleEvent(a),d.mouseOverItem=null):c.handleEvent(a)))},handleEvent:function(a){var b=this,c=b.keyEventRe.test(a.type);a.view=b,a.item=a.getTarget(b.itemSelector),a.item&&(a.record=b.getRecord(a.item)),!1!==b.processUIEvent(a)&&b.processSpecialEvent(a),c&&!Ext.fly(a.target).isInputField()&&(a.getKey()!==a.SPACE&&!a.isNavKeyPress(!0)||a.preventDefault()),a.view=null},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(b){if(Ext.getBody().isAncestor(b.target)){var g,a=this,f=b.item,j=a.self,h=j.EventMap,i=j.TouchEventMap,e=b.record,d=b.type,c=d;if(b.newType&&(c=b.newType),f){if(c=i[c]||c,g=b.recordIndex=a.indexInStore?a.indexInStore(e):a.indexOf(f),!e||!1===a.processItemEvent(e,f,g,b))return!1;if(!1===a["onBeforeItem"+h[c]](e,f,g,b)||!1===a.fireEvent("beforeitem"+c,a,e,f,g,b)||!1===a["onItem"+h[c]](e,f,g,b))return!1;a.fireEvent("item"+c,a,e,f,g,b)}else{if(d=i[d]||d,!1===a.processContainerEvent(b)||!1===a["onBeforeContainer"+h[d]](b)||!1===a.fireEvent("beforecontainer"+d,a,b)||!1===a["onContainer"+h[d]](b))return!1;a.fireEvent("container"+d,a,b)}return!0}},onItemMouseEnter:function(b,a,c,d){this.trackOver&&this.highlightItem(a)},onItemMouseLeave:function(a,c,b,d){this.trackOver&&this.clearHighlight()},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyUp:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyUp:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyUp:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyUp:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(c){var a=this,b=a.highlightedItem,d=a.overItemCls;b!==c&&(b&&(Ext.fly(b).removeCls(d),Ext.isIE8&&(a.repaintBorder(b),a.repaintBorder(b.nextSibling)),a.hasListeners.unhighlightitem&&a.fireEvent("unhighlightitem",a,b)),(a.highlightedItem=c)&&(Ext.fly(c).addCls(a.overItemCls),Ext.isIE8&&a.repaintBorder(c.nextSibling),a.hasListeners.highlightitem&&a.fireEvent("highlightitem",a,c)))},highlightItem:function(a){this.setHighlightedItem(a)},clearHighlight:function(){this.setHighlightedItem(void 0)},handleUpdate:function(f,e){var d,c,b,a=this;a.viewReady&&(d=a.getNode(e),c=a.callParent(arguments),(b=a.highlightedItem)&&b===d&&(delete a.highlightedItem,c&&a.highlightItem(c)))},refresh:function(){this.clearHighlight(),this.callParent(arguments)},focusNode:function(h){var b,g=this,e=Ext.fly(g.getNode(h)),f=g.el,d=0,c=0,a=f.getRegion();a.bottom=a.top+f.dom.clientHeight,a.right=a.left+f.dom.clientWidth,e&&((b=e.getRegion()).top<a.top?d=b.top-a.top:b.bottom>a.bottom&&(d=b.bottom-a.bottom),b.left<a.left?c=b.left-a.left:b.right>a.right&&(c=b.right-a.right),(c||d)&&g.scrollBy(c,d,!1),e.set({tabIndex:-1}),e.focus())},privates:{repaintBorder:function(b){var a=this.getNode(b);a&&(a.className=a.className)}}}),Ext.define("Ext.view.BoundListKeyNav",{extend:Ext.view.NavigationModel,alias:"view.navigation.boundlist",navigateOnSpace:!0,initKeyNav:function(c){var a=this,b=c.pickerField;a.keyNav||(a.callParent([c]),a.keyNav.map.addBinding({key:Ext.event.Event.ESC,fn:a.onKeyEsc,scope:a})),b&&(b.rendered?a.fieldKeyNav=new Ext.util.KeyNav({disabled:!0,target:b.inputEl,forceKeyDown:!0,up:a.onKeyUp,down:a.onKeyDown,right:a.onKeyRight,left:a.onKeyLeft,pageDown:a.onKeyPageDown,pageUp:a.onKeyPageUp,home:a.onKeyHome,end:a.onKeyEnd,tab:a.onKeyTab,space:a.onKeySpace,enter:a.onKeyEnter,A:{ctrl:!0,handler:a.onSelectAllKeyPress},priority:1001,scope:a}):b.on("render",Ext.Function.bind(a.initKeyNav,a,[c],0),a,{single:!0}))},processViewEvent:function(b,c,e,d,a){return a.within(b.listWrap)?a:a.getKey()===a.ESC?(Ext.fly(a.target).isInputField()&&(a.target=a.target.parentNode),a):void 0},enable:function(){this.fieldKeyNav.enable(),this.callParent()},disable:function(){this.fieldKeyNav.disable(),this.callParent()},onItemMouseDown:function(e,b,d,c,a){this.callParent([e,b,d,c,a]),a.preventDefault()},onKeyUp:function(g){var a=this.view,f=a.all,c=a.highlightedItem,b=c?a.indexOf(c):-1,e=0<b?b-1:f.getCount()-1;this.setPosition(e),g.preventDefault()},onKeyDown:function(g){var a=this.view,f=a.all,c=a.highlightedItem,b=c?a.indexOf(c):-1,e=b<f.getCount()-1?b+1:0;this.setPosition(e),g.preventDefault()},onKeyLeft:Ext.returnTrue,onKeyRight:Ext.returnTrue,onKeyTab:function(c){var b=this.view,a=b.pickerField;return b.isVisible()&&(a.selectOnTab&&this.selectHighlighted(c),a.collapse&&a.collapse()),!0},onKeyEnter:function(d){var c=this.view,b=c.getSelectionModel(),a=c.pickerField,e=b.getCount();return d.stopEvent(),this.selectHighlighted(d),!a.multiSelect&&e===b.getCount()&&a.collapse&&a.collapse(),!1},onKeySpace:function(){return this.navigateOnSpace&&this.callParent(arguments),!0},onKeyEsc:function(){this.view.pickerField&&this.view.pickerField.collapse()},focusItem:function(a){var b=this.view;"number"==typeof a&&(a=b.all.item(a)),a&&(a=a.dom,b.highlightItem(a),b.getScrollable().scrollIntoView(a,!1))},selectHighlighted:function(d){var a,c=this,b=c.view,e=b.getSelectionModel(),f=c.recordIndex;b.all.getCount()&&(a=c.getRecord())&&(d.getKey()!==d.ENTER&&e.isSelected(a)||(e.selectWithEvent(a,d),b.store.data.contains(a)||c.setPosition(Math.min(f,b.store.getCount()-1))))},destroy:function(){this.fieldKeyNav=Ext.destroy(this.fieldKeyNav),this.callParent()}}),Ext.define("Ext.layout.component.BoundList",{extend:Ext.layout.component.Auto,alias:"layout.boundlist",type:"component",beginLayout:function(a){var c=this,b=c.owner,d=b.pagingToolbar;c.scrollPos=b.listWrap.getScroll(),c.callParent(arguments),b.floating&&(a.savedXY=b.getXY(),b.setXY([0,-9999])),d&&(a.toolbarContext=a.context.getCmp(d)),a.listContext=a.getEl("listWrap")},beginLayoutCycle:function(b){var a=this.owner;this.callParent(arguments),b.heightModel.auto&&(a.el.setHeight("auto"),a.listWrap.setHeight("auto"))},getLayoutItems:function(){var a=this.owner.pagingToolbar;return a?[a]:[]},isValidParent:function(){return!0},finishedLayout:function(e){var a=this,d=e.savedXY,c=a.owner.listWrap,b=a.scrollPos;a.callParent(arguments),d&&a.owner.setXY(d),c.setScrollLeft(b.left),c.setScrollTop(b.top)},measureContentWidth:function(a){return this.owner.listWrap.getWidth()},measureContentHeight:function(a){return this.owner.listWrap.getHeight()},publishInnerHeight:function(b,d){var c=b.toolbarContext,a=0;c&&(a=c.getProp("height")),void 0===a?this.done=!1:b.listContext.setHeight(d-b.getFrameInfo().height-a)},calculateOwnerHeightFromContentHeight:function(c){var b=this.callParent(arguments),a=c.toolbarContext;return a&&(b+=a.getProp("height")),b}}),Ext.define("Ext.toolbar.Item",{extend:Ext.Component,alias:"widget.tbitem",alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn}),Ext.define("Ext.toolbar.TextItem",{extend:Ext.toolbar.Item,alias:"widget.tbtext",alternateClassName:"Ext.Toolbar.TextItem",text:"",baseCls:Ext.baseCSSPrefix+"toolbar-text",ariaRole:null,beforeRender:function(){var a=this.text;this.callParent(),a&&(this.html=a)},setText:function(a){this.update(a)}}),Ext.define("Ext.form.trigger.Spinner",{extend:Ext.form.trigger.Trigger,alias:"trigger.spinner",cls:Ext.baseCSSPrefix+"form-trigger-spinner",spinnerCls:Ext.baseCSSPrefix+"form-spinner",spinnerUpCls:Ext.baseCSSPrefix+"form-spinner-up",spinnerDownCls:Ext.baseCSSPrefix+"form-spinner-down",focusCls:Ext.baseCSSPrefix+"form-spinner-focus",overCls:Ext.baseCSSPrefix+"form-spinner-over",clickCls:Ext.baseCSSPrefix+"form-spinner-click",focusFieldOnClick:!0,vertical:!0,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',destroy:function(){var a=this;a.spinnerEl&&(a.spinnerEl.destroy(),a.spinnerEl=a.upEl=a.downEl=null),a.callParent()},getBodyRenderData:function(){var a=this;return{vertical:a.vertical,upDisabledCls:a.upEnabled?"":a.spinnerUpCls+"-disabled",downDisabledCls:a.downEnabled?"":a.spinnerDownCls+"-disabled",spinnerCls:a.spinnerCls,spinnerUpCls:a.spinnerUpCls,spinnerDownCls:a.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(){var a=this,d=arguments,c=a.clickRepeater?d[1]:d[0],b=a.field;b.readOnly||b.disabled||(a.upEl.contains(c.target)?Ext.callback(a.upHandler,a.scope,[b,a,c],0,b):a.downEl.contains(c.target)&&Ext.callback(a.downHandler,a.scope,[b,a,c],0,b)),b.inputEl.focus()},onFieldRender:function(){var b,a=this,d=a.vertical;a.callParent(),b=(a.spinnerEl=a.el.select("."+a.spinnerCls,!0)).elements,a.upEl=d?b[0]:b[1],a.downEl=d?b[1]:b[0]},setUpEnabled:function(a){this.upEl[a?"removeCls":"addCls"](this.spinnerUpCls+"-disabled")},setDownEnabled:function(a){this.downEl[a?"removeCls":"addCls"](this.spinnerDownCls+"-disabled")}}),Ext.define("Ext.form.field.Spinner",{extend:Ext.form.field.Text,alias:"widget.spinnerfield",alternateClassName:"Ext.form.Spinner",config:{triggers:{spinner:{type:"spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",scope:"this"}}},spinUpEnabled:!0,spinDownEnabled:!0,keyNavEnabled:!0,mouseWheelEnabled:!0,repeatTriggerClick:!0,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",applyTriggers:function(c){var a=this,b=c.spinner;return b.upEnabled=a.spinUpEnabled,b.downEnabled=a.spinDownEnabled,a.callParent([c])},onRender:function(){var a=this,b=a.getTrigger("spinner");a.callParent(),a.keyNavEnabled&&(a.spinnerKeyNav=new Ext.util.KeyNav(a.inputEl,{scope:a,up:a.spinUp,down:a.spinDown})),a.mouseWheelEnabled&&a.mon(a.bodyEl,"mousewheel",a.onMouseWheel,a),a.spinUpEl=b.upEl,a.spinDownEl=b.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var a=this;a.spinUpEnabled&&!a.disabled&&(a.fireEvent("spin",a,"up"),a.fireEvent("spinup",a),a.onSpinUp())},spinDown:function(){var a=this;a.spinDownEnabled&&!a.disabled&&(a.fireEvent("spin",a,"down"),a.fireEvent("spindown",a),a.onSpinDown())},setSpinUpEnabled:function(b){var a=this;a.spinUpEnabled!==(a.spinUpEnabled=b)&&a.rendered&&a.getTrigger("spinner").setUpEnabled(b)},setSpinDownEnabled:function(b){var a=this;a.spinDownEnabled!==(a.spinDownEnabled=b)&&a.rendered&&a.getTrigger("spinner").setDownEnabled(b)},onMouseWheel:function(c){var a,b=this;b.hasFocus&&(0<(a=c.getWheelDelta())?b.spinUp():a<0&&b.spinDown(),c.stopEvent())},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav"),this.callParent()}}),Ext.define("Ext.form.field.Number",{extend:Ext.form.field.Spinner,alias:"widget.numberfield",alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:!0,allowDecimals:!0,decimalSeparator:null,submitLocaleSeparator:!0,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:!1,initComponent:function(){var a=this;null===a.decimalSeparator&&(a.decimalSeparator=Ext.util.Format.decimalSeparator),a.callParent(),a.setMinValue(a.minValue),a.setMaxValue(a.maxValue)},getSubTplData:function(g){var d,a,b,c=this,f=c.minValue,e=c.maxValue;return(a=(d=c.callParent([g])).inputElAriaAttributes)&&(f>Number.NEGATIVE_INFINITY&&(a["aria-valuemin"]=f),e<Number.MAX_VALUE&&(a["aria-valuemax"]=e),null!=(b=c.getValue())&&f<=b&&b<=e&&(a["aria-valuenow"]=b)),d},setValue:function(d){var c,b,a=this;return a.hasFocus&&(b=(c=a.getBind())&&c.value)&&b.syncing&&d===a.value?a:a.callParent([d])},getErrors:function(b){b=0<arguments.length?b:this.processRawValue(this.getRawValue());var d,a=this,c=a.callParent([b]),e=Ext.String.format;return b.length<1||(b=String(b).replace(a.decimalSeparator,"."),isNaN(b)&&c.push(e(a.nanText,b)),d=a.parseValue(b),0===a.minValue&&d<0?c.push(this.negativeText):d<a.minValue&&c.push(e(a.minText,a.minValue)),d>a.maxValue&&c.push(e(a.maxText,a.maxValue))),c},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));return null===a&&(a=b||null),a},valueToRaw:function(a){var b=this,c=b.decimalSeparator;return a=b.parseValue(a),a=b.fixPrecision(a),a=Ext.isNumber(a)?a:parseFloat(String(a).replace(c,".")),a=isNaN(a)?"":String(a).replace(".",c)},getSubmitValue:function(){var b=this,a=b.callParent();return b.submitLocaleSeparator||(a=a.replace(b.decimalSeparator,".")),a},onChange:function(a){var b=this.ariaEl.dom;this.toggleSpinners(),this.callParent(arguments),b&&(Ext.isNumber(a)&&isFinite(a)?b.setAttribute("aria-valuenow",a):b.removeAttribute("aria-valuenow"))},toggleSpinners:function(){var b,a=this,c=a.getValue(),d=null===c;(a.spinUpEnabled||a.spinUpDisabledByToggle)&&(b=d||c<a.maxValue,a.setSpinUpEnabled(b,!0)),(a.spinDownEnabled||a.spinDownDisabledByToggle)&&(b=d||c>a.minValue,a.setSpinDownEnabled(b,!0))},setMinValue:function(e){var d,b,a=this,c=a.ariaEl.dom;a.minValue=d=Ext.Number.from(e,Number.NEGATIVE_INFINITY),a.toggleSpinners(),c&&(d>Number.NEGATIVE_INFINITY?c.setAttribute("aria-valuemin",d):c.removeAttribute("aria-valuemin")),!0!==a.disableKeyFilter&&(b=a.baseChars+"",a.allowExponential?b+=a.decimalSeparator+"e+-":(a.allowDecimals&&(b+=a.decimalSeparator),a.minValue<0&&(b+="-")),b=Ext.String.escapeRegex(b),a.maskRe=new RegExp("["+b+"]"),a.autoStripChars&&(a.stripCharsRe=new RegExp("[^"+b+"]","gi")))},setMaxValue:function(c){var a,b=this.ariaEl.dom;this.maxValue=a=Ext.Number.from(c,Number.MAX_VALUE),b&&(a<Number.MAX_VALUE?b.setAttribute("aria-valuemax",a):b.removeAttribute("aria-valuemax")),this.toggleSpinners()},parseValue:function(a){return a=parseFloat(String(a).replace(this.decimalSeparator,".")),isNaN(a)?null:a},fixPrecision:function(a){var c=isNaN(a),b=this.decimalPrecision;return c||!a?c?"":a:((!this.allowDecimals||b<=0)&&(b=0),parseFloat(Ext.Number.toFixed(parseFloat(a),b)))},onBlur:function(c){var a=this,b=a.rawToValue(a.getRawValue());Ext.isEmpty(b)||a.setValue(b),a.callParent([c])},setSpinUpEnabled:function(b,a){this.callParent(arguments),a?this.spinUpDisabledByToggle=!b:delete this.spinUpDisabledByToggle},onSpinUp:function(){var a=this;a.readOnly||a.setSpinValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))},setSpinDownEnabled:function(b,a){this.callParent(arguments),a?this.spinDownDisabledByToggle=!b:delete this.spinDownDisabledByToggle},onSpinDown:function(){var a=this;a.readOnly||a.setSpinValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))},setSpinValue:function(b){var a=this;a.enforceMaxLength&&a.fixPrecision(b).toString().length>a.maxLength||a.setValue(b)}}),Ext.define("Ext.toolbar.Paging",{extend:Ext.toolbar.Toolbar,xtype:"pagingtoolbar",alternateClassName:"Ext.PagingToolbar",mixins:[Ext.util.StoreHolder],displayInfo:!1,prependButtons:!1,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,emptyPageData:{total:0,currentPage:0,pageCount:0,toRecord:0,fromRecord:0},defaultBindProperty:"store",getPagingItems:function(){var a=this,b={scope:a,blur:a.onPagingBlur};return b[Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress"]=a.onPagingKeyDown,[{itemId:"first",tooltip:a.firstText,overflowText:a.firstText,iconCls:Ext.baseCSSPrefix+"tbar-page-first",disabled:!0,handler:a.moveFirst,scope:a},{itemId:"prev",tooltip:a.prevText,overflowText:a.prevText,iconCls:Ext.baseCSSPrefix+"tbar-page-prev",disabled:!0,handler:a.movePrevious,scope:a},"-",a.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:Ext.baseCSSPrefix+"tbar-page-number",allowDecimals:!1,minValue:1,hideTrigger:!0,enableKeyEvents:!0,keyNavEnabled:!1,selectOnFocus:!0,submitValue:!1,isFormField:!1,width:a.inputItemWidth,margin:"-1 2 3 2",listeners:b},{xtype:"tbtext",itemId:"afterTextItem",html:Ext.String.format(a.afterPageText,1)},"-",{itemId:"next",tooltip:a.nextText,overflowText:a.nextText,iconCls:Ext.baseCSSPrefix+"tbar-page-next",disabled:!0,handler:a.moveNext,scope:a},{itemId:"last",tooltip:a.lastText,overflowText:a.lastText,iconCls:Ext.baseCSSPrefix+"tbar-page-last",disabled:!0,handler:a.moveLast,scope:a},"-",{itemId:"refresh",tooltip:a.refreshText,overflowText:a.refreshText,iconCls:Ext.baseCSSPrefix+"tbar-loading",disabled:a.store.isLoading(),handler:a.doRefresh,scope:a}]},initComponent:function(){var b,a=this,c=a.items||a.buttons||[];a.bindStore(a.store||"ext-empty-store",!0),b=a.getPagingItems(),a.prependButtons?a.items=c.concat(b):a.items=b.concat(c),delete a.buttons,a.displayInfo&&(a.items.push("->"),a.items.push({xtype:"tbtext",itemId:"displayItem"})),a.callParent()},beforeRender:function(){this.callParent(arguments),this.updateBarInfo()},updateBarInfo:function(){var a=this;a.store.isLoading()||(a.calledInternal=!0,a.onLoad(),a.calledInternal=!1)},updateInfo:function(){var c,a=this,d=a.child("#displayItem"),f=a.store,b=a.getPageData();d&&(c=0===f.getCount()?a.emptyMsg:Ext.String.format(a.displayMsg,b.fromRecord,b.toRecord,b.total),d.setText(c))},onLoad:function(){var f,c,b,g,d,e,a=this;if(d=0===a.store.getCount())b=c=0,g=Ext.String.format(a.afterPageText,0);else{if(c=(f=a.getPageData()).currentPage,(b=f.pageCount)<c)return void(0<b?a.store.loadPage(b):a.getInputItem().reset());g=Ext.String.format(a.afterPageText,isNaN(b)?1:b)}Ext.suspendLayouts(),(e=a.child("#afterTextItem"))&&e.update(g),(e=a.getInputItem())&&e.setDisabled(d).setValue(c),a.setChildDisabled("#first",1===c||d),a.setChildDisabled("#prev",1===c||d),a.setChildDisabled("#next",c===b||d),a.setChildDisabled("#last",c===b||d),a.setChildDisabled("#refresh",!1),a.updateInfo(),Ext.resumeLayouts(!0),a.calledInternal||a.fireEvent("change",a,f||a.emptyPageData)},setChildDisabled:function(c,b){var a=this.child(c);a&&a.setDisabled(b)},getPageData:function(){var a=this.store,b=a.getTotalCount();return{total:b,currentPage:a.currentPage,pageCount:Math.ceil(b/a.pageSize),fromRecord:(a.currentPage-1)*a.pageSize+1,toRecord:Math.min(a.currentPage*a.pageSize,b)}},onLoadError:function(){this.setChildDisabled("#refresh",!1)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(d){var c,a=this.getInputItem(),b=!1;return a&&(c=a.getValue(),b=parseInt(c,10),!c||isNaN(b))?(a.setValue(d.currentPage),!1):b},onPagingBlur:function(c){var b,a=this.getInputItem();a&&(b=this.getPageData().currentPage,a.setValue(b))},onPagingKeyDown:function(a,b){this.processKeyEvent(a,b)},processKeyEvent:function(g,b){var a,e=this,c=b.getKey(),d=e.getPageData(),f=b.shiftKey?10:1;c===b.RETURN?(b.stopEvent(),!1!==(a=e.readPageFromInput(d))&&(a=Math.min(Math.max(1,a),d.pageCount))!==d.currentPage&&!1!==e.fireEvent("beforechange",e,a)&&e.store.loadPage(a)):c===b.HOME||c===b.END?(b.stopEvent(),a=c===b.HOME?1:d.pageCount,g.setValue(a)):c!==b.UP&&c!==b.PAGE_UP&&c!==b.DOWN&&c!==b.PAGE_DOWN||(b.stopEvent(),(a=e.readPageFromInput(d))&&(c!==b.DOWN&&c!==b.PAGE_DOWN||(f*=-1),1<=(a+=f)&&a<=d.pageCount&&g.setValue(a)))},beforeLoad:function(){this.setChildDisabled("#refresh",!0)},moveFirst:function(){return!1!==this.fireEvent("beforechange",this,1)&&(this.store.loadPage(1),!0)},movePrevious:function(){var a=this,b=a.store,c=b.currentPage-1;return 0<c&&!1!==a.fireEvent("beforechange",a,c)&&(b.previousPage(),!0)},moveNext:function(){var a=this,b=a.store,d=a.getPageData().pageCount,c=b.currentPage+1;return c<=d&&!1!==a.fireEvent("beforechange",a,c)&&(b.nextPage(),!0)},moveLast:function(){var a=this,b=a.getPageData().pageCount;return!1!==a.fireEvent("beforechange",a,b)&&(a.store.loadPage(b),!0)},doRefresh:function(){var a=this,c=a.store,b=c.currentPage;return!1!==a.fireEvent("beforechange",a,b)&&(c.loadPage(b),!0)},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onBindStore:function(){this.rendered&&this.updateBarInfo()},onDestroy:function(){this.bindStore(null),this.callParent()}}),Ext.define("Ext.theme.triton.toolbar.Paging",{override:"Ext.toolbar.Paging",inputItemWidth:50}),Ext.define("Ext.view.BoundList",{extend:Ext.view.View,alias:"widget.boundlist",alternateClassName:"Ext.BoundList",mixins:[Ext.mixin.Queryable],pageSize:0,baseCls:Ext.baseCSSPrefix+"boundlist",itemCls:Ext.baseCSSPrefix+"boundlist-item",listItemCls:"",shadow:!1,trackOver:!0,preserveScrollOnRefresh:!0,enableInitialSelection:!1,refreshSelmodelOnRefresh:!0,componentLayout:"boundlist",navigationModel:"boundlist",scrollable:!0,ariaEl:"listEl",tabIndex:-1,childEls:["listWrap","listEl"],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap"',' class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="',Ext.baseCSSPrefix,'list-plain"','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',">","</ul>","</div>","{%","var pagingToolbar=values.$comp.pagingToolbar;","if (pagingToolbar) {","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:!0}],focusOnToFront:!1,initComponent:function(){var a=this,b=a.baseCls,c=a.itemCls;a.selectedItemCls=b+"-selected",a.trackOver&&(a.overItemCls=b+"-item-over"),a.itemSelector="."+c,a.scrollerSelector="ul."+Ext.baseCSSPrefix+"list-plain",a.floating&&a.addCls(b+"-floating"),a.tpl?a.tpl.isTemplate||(a.tpl=new Ext.XTemplate(a.tpl)):a.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+c+'">'+a.getInnerTpl(a.displayField)+"</li>","</tpl>"),a.pageSize&&(a.pagingToolbar=a.createPagingToolbar()),a.callParent()},getRefOwner:function(){return this.pickerField||this.callParent()},getRefItems:function(){var b=this.callParent(),a=this.pagingToolbar;return a&&b.push(a),b},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:!1,ownerCt:this,ownerLayout:this.getComponentLayout()})},getNodeContainer:function(){return this.listEl},refresh:function(){var b=this,a=b.tpl;a.field=b.pickerField,a.store=b.store,b.callParent(),a.field=a.store=null},bindStore:function(c,b){var a=this.pagingToolbar;this.callParent(arguments),a&&a.bindStore(c,b)},getInnerTpl:function(a){return"{"+a+"}"},onShow:function(){var a=this.pickerField;this.callParent(),a&&a.rendered&&!a.hasFocus&&a.focus()},afterComponentLayout:function(e,d,c,b){var a=this.pickerField;this.callParent([e,d,c,b]),a&&a.alignPicker&&a.alignPicker()},onItemClick:function(e){var c,a,b=this.pickerField;b&&(c=b.valueField,a=this.getSelectionModel().getSelection(),!b.multiSelect&&a.length&&(a=a[0])&&b.isEqual(e.get(c),a.get(c))&&b.collapse&&b.collapse())},onContainerClick:function(b){var a=this.pagingToolbar;if(a&&a.rendered&&b.within(a.el))return!1},onDestroy:function(){this.callParent(),Ext.destroyMembers(this,"pagingToolbar","listWrap","listEl")},privates:{getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var a=this.pagingToolbar;this.callParent(arguments),a&&a.finishRender()}}}),Ext.define("Ext.form.field.ComboBox",{extend:Ext.form.field.Picker,alternateClassName:"Ext.form.ComboBox",alias:["widget.combobox","widget.combo"],mixins:[Ext.util.StoreHolder],config:{filters:null,selection:null,valueNotFoundText:null,displayTpl:!1,delimiter:", ",displayField:"text"},publishes:["selection"],twoWayBindable:["selection"],triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",hiddenName:"",collapseOnSelect:!1,hiddenDataCls:Ext.baseCSSPrefix+"hidden-display "+Ext.baseCSSPrefix+"form-data-hidden",ariaRole:"combobox",childEls:{hiddenDataEl:!0},filtered:!1,afterRender:function(){var a=this;a.callParent(arguments),a.setHiddenValue(a.value)},multiSelect:!1,triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:!0,autoLoadOnValue:!1,pageSize:0,anyMatch:!1,caseSensitive:!1,autoSelect:!0,typeAhead:!1,typeAheadDelay:250,selectOnTab:!0,forceSelection:!1,growToLongestValue:!0,clearFilterOnBlur:!0,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:!0,clearValueOnEmpty:!0,getGrowWidth:function(){var h,e,g,c,b,f,d,a=this,i=a.inputEl.dom.value;if(a.growToLongestValue)for(h=a.displayField,g=(e=a.store).data.length,b=c=0;b<g;b++)c<(d=(f=e.getAt(b).data[h]).length)&&(c=d,i=f);return i},initComponent:function(){var b,c,a=this,d=Ext.isDefined,f=a.store,e=a.transform;"pinList"in a&&(a.collapseOnSelect=!a.pinList),e&&(b=Ext.getDom(e))&&(a.store||(f=Ext.Array.map(Ext.Array.from(b.options),function(a){return[a.value,a.text]})),a.name||(a.name=b.name),"value"in a||(a.value=b.value)),a.bindStore(f||"ext-empty-store",!0,!0),c="local"===a.queryMode,d(a.queryDelay)||(a.queryDelay=c?10:500),d(a.minChars)||(a.minChars=c?0:4),a.callParent(),a.doQueryTask=new Ext.util.DelayedTask(a.doRawQuery,a),b&&(a.transformInPlace&&(a.render(b.parentNode,b),delete a.renderTo),Ext.removeNode(b))},getSubTplData:function(c){var b,a;return(a=(b=this.callParent([c])).inputElAriaAttributes)&&(a["aria-autocomplete"]="list"),b},getSubTplMarkup:function(c){var a=this,b="",d=a.callParent(arguments);return a.hiddenName&&(b='<div id="'+c.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+a.hiddenDataCls+'" role="presentation"></div>'),b+d},applyDisplayTpl:function(a){return a?a.isTemplate||(a=new Ext.XTemplate(a)):(a=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+this.getDisplayField()+'"]]}<tpl if="xindex < xcount">'+this.getDelimiter()+"</tpl></tpl>")).auto=!0,a},applyFilters:function(b,a){var c=this;return null===b||b.isFilterCollection?b:(b&&((a=a||this.getFilters()).beginUpdate(),a.splice(0,a.length,b),a.each(function(a){a.ownerId=c.id}),a.endUpdate()),a)},applyValueNotFoundText:function(b){var a=this,c=a.valueNotFoundRecord||(a.valueNotFoundRecord=new Ext.data.Model);return c.set(a.displayField,b),a.valueField&&a.displayField!==a.valueField&&c.set(a.valueField,b),b},getFilters:function(b){var a=this.filters;return a||!1===b||(a=new Ext.util.FilterCollection,this.setFilters(a)),a},updateFilters:function(a,c){var b=this;c&&c.un("endupdate","onEndUpdateFilters",b),a&&a.on("endupdate","onEndUpdateFilters",b),b.onEndUpdateFilters(a)},onEndUpdateFilters:function(a){var d,c,b=this,f=b.filtered,e=!!a&&0<a.length;(f||e)&&(b.filtered=e,d=[],(c=b.store.getFilters()).each(function(c){c.ownerId!==b.id||a.contains(c)||d.push(c)}),c.splice(0,d,a.items))},completeEdit:function(c){var a=this,b=a.queryFilter;this.callParent([c]),a.doQueryTask.cancel(),a.assertValue(),b&&"local"===a.queryMode&&a.clearFilterOnBlur&&a.getStore().getFilters().remove(b)},onFocus:function(b){var a=this;a.callParent([b]),"all"!==a.triggerAction&&a.queryFilter&&"local"===a.queryMode&&a.clearFilterOnBlur&&(delete a.lastQuery,a.doRawQuery())},assertValue:function(){var b,a=this,e=a.getRawValue(),c=a.getDisplayValue(),d=a.lastSelectedRecords;a.forceSelection&&(a.multiSelect?e!==c&&a.setRawValue(c):(b=a.findRecordByDisplay(e))?a.getDisplayValue([a.getRecordDisplayData(b)])!==c&&a.select(b,!0):!d||a.allowBlank&&!a.rawValue?(d&&delete a.lastSelectedRecords,a.setRawValue("")):a.setValue(d)),a.collapse()},onTypeAhead:function(){var b,g,c,a=this,e=a.displayField,d=a.store.findRecord(e,a.getRawValue()),f=a.getPicker();d&&(g=(b=d.get(e)).length,c=a.getRawValue().length,f.highlightItem(f.getNode(d)),0!==c&&c!==g&&(a.setRawValue(b),a.selectText(c,b.length)))},resetToDefault:Ext.emptyFn,beforeReset:function(){var a=this.queryFilter;this.callParent(),a&&this.getStore().getFilters().remove(a)},onUnbindStore:function(){var a=this,c=a.picker,b=a.queryFilter;b&&!a.store.destroyed&&(a.changingFilters=!0,a.getStore().removeFilter(b,!0),a.changingFilters=!1),a.pickerSelectionModel.destroy(),c&&c.bindStore(null)},onBindStore:function(b,f){var c,e,a=this,d=a.picker;b&&(b.autoCreated&&(a.queryMode="local",a.valueField=a.displayField="field1",b.expanded||(a.displayField="field2"),a.getDisplayTpl().auto&&a.setDisplayTpl(null)),Ext.isDefined(a.valueField)||(a.valueField=a.displayField),(c={byValue:{rootProperty:"data",unique:!1}}).byValue.property=a.valueField,b.setExtraKeys(c),a.displayField===a.valueField?b.byText=b.byValue:(c.byText={rootProperty:"data",unique:!1},c.byText.property=a.displayField,b.setExtraKeys(c)),e={rootProperty:"data",extraKeys:{byInternalId:{property:"internalId"},byValue:{property:a.valueField,rootProperty:"data"}},listeners:{beginupdate:a.onValueCollectionBeginUpdate,endupdate:a.onValueCollectionEndUpdate,scope:a}},a.valueCollection=new Ext.util.Collection(e),a.pickerSelectionModel=new Ext.selection.DataViewModel({mode:a.multiSelect?"SIMPLE":"SINGLE",deselectOnContainerClick:!1,enableInitialSelection:!1,pruneRemoved:!1,selected:a.valueCollection,store:b,listeners:{scope:a,lastselectedchanged:a.updateBindSelection}}),f||a.resetToDefault(),d&&(d.setSelectionModel(a.pickerSelectionModel),d.getStore()!==b&&d.bindStore(b)))},bindStore:function(a,e,c){var b=this,d=b.queryFilter;b.mixins.storeholder.bindStore.call(b,a,c),(a=b.getStore())&&d&&!e&&a.getFilters().add(d),c||!a||a.isEmptyStore||b.setValueOnData()},getStoreListeners:function(c){if(!c.isEmptyStore){var a=this,b={datachanged:a.onDataChanged,load:a.onLoad,exception:a.onException,update:a.onStoreUpdate,remove:a.checkValueOnChange};return c.getRemoteFilter()||(b.filterchange=a.checkValueOnChange),b}},onDataChanged:function(){this.grow&&this.growToLongestValue&&this.autoSize()},checkValueOnChange:function(){var a=this;!a.destroying&&a.getStore().isLoaded()&&(a.multiSelect||!a.forceSelection||a.changingFilters||a.findRecordByValue(a.value)||a.setValue(null))},onStoreUpdate:function(b,a){this.updateValue()},onException:function(){this.collapse()},onLoad:function(b,e,d){var a=this,c=!a.valueCollection.byValue.get(a.value);!d||!c||b.lastOptions&&"rawQuery"in b.lastOptions||a.setValueOnData(),a.checkValueOnChange()},setValueOnData:function(){var a=this;a.setValue(a.value),a.isExpanded&&a.getStore().getCount()&&a.doAutoSelect()},doRawQuery:function(){var a=this,b=a.inputEl.dom.value;a.multiSelect&&(b=b.split(a.delimiter).pop()),a.doQuery(b,!1,!0)},doQuery:function(c,f,g){var a=this,d=a.getStore(),e=d.filters&&!d.filters.length&&!!c,b=a.beforeQuery({query:c||"",rawQuery:g,forceAll:f,combo:a,cancel:!1});return!1===b||b.cancel||(a.queryCaching&&!e&&b.query===a.lastQuery?(a.getPicker().refresh(),a.expand()):(a.lastQuery=b.query,"local"===a.queryMode?a.doLocalQuery(b):a.doRemoteQuery(b))),!0},beforeQuery:function(a){return!1===this.fireEvent("beforequery",a)?a.cancel=!0:a.cancel||a.query.length<this.minChars&&!a.forceAll&&(a.cancel=!0),a},doLocalQuery:function(d){var a=this,c=d.query,e=a.getStore(),b=a.queryFilter;a.queryFilter=null,a.changingFilters=!0,b&&e.removeFilter(b,!0),c&&(b=a.queryFilter=new Ext.util.Filter({id:a.id+"-filter",anyMatch:a.anyMatch,caseSensitive:a.caseSensitive,root:"data",property:a.displayField,value:a.enableRegEx?new RegExp(c):c}),e.addFilter(b,!0)),a.changingFilters=!1,a.store.getCount()||a.getPicker().emptyText?(a.getPicker().refresh(),a.expand()):a.collapse(),a.afterQuery(d)},doRemoteQuery:function(b){function c(){a.destroyed||a.afterQuery(b)}var a=this;a.expand(),a.pageSize?a.loadPage(1,{rawQuery:b.rawQuery,callback:c}):a.store.load({params:a.getParams(b.query),rawQuery:b.rawQuery,callback:c})},afterQuery:function(b){var a=this;a.store.getCount()&&(a.typeAhead&&a.doTypeAhead(),b.rawQuery&&(!a.picker||a.picker.getSelectionModel().hasSelection())||a.doAutoSelect()),a.startCheckChangeTask()},loadPage:function(b,a){this.store.loadPage(b,Ext.apply({params:this.getParams(this.lastQuery)},a))},onPageChange:function(b,a){return this.loadPage(a),!1},getParams:function(c){var a={},b=this.queryParam;return b&&(a[b]=c),a},doAutoSelect:function(){var a,b=this,d=b.picker,c=0;d&&b.autoSelect&&0<b.store.getCount()&&((a=b.picker.getSelectionModel()).lastSelected&&a.selected.length&&(c=a.lastSelected),d.getNavigationModel().setPosition(c))},doTypeAhead:function(){var a=this,b=Ext.event.Event;a.typeAheadTask||(a.typeAheadTask=new Ext.util.DelayedTask(a.onTypeAhead,a)),a.lastKey!==b.BACKSPACE&&a.lastKey!==b.DELETE&&a.typeAheadTask.delay(a.typeAheadDelay)},onTriggerClick:function(){var a=this;a.readOnly||a.disabled||(a.isExpanded?a.collapse():"all"===a.triggerAction?a.doQuery(a.allQuery,!0):"last"===a.triggerAction?a.doQuery(a.lastQuery,!0):a.doQuery(a.getRawValue(),!1,!0))},onFieldMutation:function(b){var a=this,c=b.getKey(),d=c===b.BACKSPACE||c===b.DELETE,e=a.inputEl.dom.value,f=e.length;a.readOnly||e===a.lastMutatedValue&&!d||c===b.TAB||(a.lastMutatedValue=e,a.lastKey=c,!f||"keyup"===b.type&&b.isSpecialKey()&&!d?(f||c&&!d||(++a.suspendCheckChange,a.multiSelect||(a.value=null,a.displayTplData=void 0),a.clearValueOnEmpty&&(a.valueCollection.beginUpdate(),a.pickerSelectionModel.deselectAll(),a.valueCollection.removeAll(),a.valueCollection.endUpdate()),a.collapse(),a.queryFilter&&(a.changingFilters=!0,a.store.removeFilter(a.queryFilter,!0),a.changingFilters=!1),--a.suspendCheckChange),a.callParent([b])):a.doQueryTask.delay(a.queryDelay))},onDestroy:function(){var a=this;a.doQueryTask.cancel(),a.typeAheadTask&&(a.typeAheadTask.cancel(),a.typeAheadTask=null),a.bindStore(null),a.valueCollection=Ext.destroy(a.valueCollection),a.callParent()},onAdded:function(){var a=this;a.callParent(arguments),a.picker&&(a.picker.ownerCt=a.up("[floating]"),a.picker.registerWithOwnerCt())},createPicker:function(){var b,a=this,c=Ext.apply({xtype:"boundlist",id:a.pickerId,pickerField:a,selectionModel:a.pickerSelectionModel,floating:!0,hidden:!0,store:a.getPickerStore(),displayField:a.displayField,preserveScrollOnRefresh:!0,pageSize:a.pageSize,tpl:a.tpl},a.listConfig,a.defaultListConfig);return b=a.picker=Ext.widget(c),a.pageSize&&b.pagingToolbar.on("beforechange",a.onPageChange,a),b.initialConfig.maxHeight||b.on({beforeshow:a.onBeforePickerShow,scope:a}),b.getSelectionModel().on({beforeselect:a.onBeforeSelect,beforedeselect:a.onBeforeDeselect,focuschange:a.onFocusChange,scope:a}),b.getNavigationModel().navigateOnSpace=!1,b},getPickerStore:function(){return this.store},onBeforePickerShow:function(d){var a=this.getPosition()[1]-Ext.getBody().getScroll().top,c=Ext.Element.getViewportHeight()-a-this.getHeight();d.maxHeight=Math.max(a,c)-5},onBeforeSelect:function(c,b,a){return this.fireEvent("beforeselect",this,b,a)},onBeforeDeselect:function(c,b,a){return this.fireEvent("beforedeselect",this,b,a)},onFocusChange:function(e,d,b){var a,c=this.picker;b&&(a=Ext.get(c.getNodeByRecord(b)))&&this.ariaEl.dom.setAttribute("aria-activedescendant",a.id)},getSelection:function(){var a=this.getPicker().getSelectionModel();return a.getSelection().length?a.getLastSelected():null},updateSelection:function(c){var b,a=this;a.ignoreNextSelection||(a.ignoreNextSelection=!0,b=a.getPicker().getSelectionModel(),c?(b.select(c),a.hasHadSelection=!0):b.deselectAll(),a.ignoreNextSelection=!1)},updateBindSelection:function(d,c){var a=this,b=null;a.ignoreNextSelection||(a.ignoreNextSelection=!0,c.length&&(b=d.getLastSelected(),a.hasHadSelection=!0),a.hasHadSelection&&a.setSelection(b),a.ignoreNextSelection=!1)},onValueCollectionBeginUpdate:Ext.emptyFn,onValueCollectionEndUpdate:function(){var a=this,e=a.store,b=a.valueCollection.getRange(),d=b[0],c=b.length;a.updateBindSelection(a.pickerSelectionModel,b),a.isSelectionUpdating()||(Ext.suspendLayouts(),a.lastSelection=b,c&&(a.lastSelectedRecords=b),a.updateValue(),c&&(!a.multiSelect&&e.contains(d)||a.collapseOnSelect||!e.getCount())&&(a.updatingValue=!0,a.collapse(),a.updatingValue=!1),Ext.resumeLayouts(!0),c&&!a.suspendCheckChange&&(a.multiSelect||(b=d),a.fireEvent("select",a,b)))},isSelectionUpdating:function(){var a=this.pickerSelectionModel;return a.deselectingDuringSelect||a.refreshing},onExpand:function(){var a=this.getPicker().getNavigationModel();a&&a.enable(),this.doAutoSelect()},onCollapse:function(){var a=this.getPicker().getNavigationModel();a&&a.disable(),this.updatingValue&&this.doQueryTask.cancel()},select:function(b,e){var c,a=this,d=a.picker;b&&b.isModel&&!0===e&&d&&(c=!d.getSelectionModel().isSelected(b)),c||a.suspendEvent("select"),a.setValue(b),a.resumeEvent("select")},findRecord:function(c,d){var b=this.store,a=b.findExact(c,d);return-1!==a&&b.getAt(a)},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(c){var a=this.store.byValue.get(c),b=!1;return a&&(b=a[0]||a),b},findRecordByDisplay:function(c){var a=this.store.byText.get(c),b=!1;return a&&(b=a[0]||a),b},addValue:function(a){if(null!=a)return this.doSetValue(a,!0)},setValue:function(b){var a=this;if(null!=b)return a.doSetValue(b);a.suspendEvent("select"),a.valueCollection.beginUpdate(),a.pickerSelectionModel.deselectAll(),a.valueCollection.endUpdate(),a.lastSelectedRecords=null,a.resumeEvent("select")},setRawValue:function(a){this.callParent([a]),this.lastMutatedValue=a},doSetValue:function(c,p){var d,h,b,i,g,q,a=this,f=a.getStore(),v=f.getModel(),e=[],u=[],r=a.autoLoadOnValue,m=0<f.getCount()||f.isLoaded(),l=f.hasPendingLoad(),o=r&&!m&&!l,t=a.forceSelection,n=a.pickerSelectionModel,s=a.displayField===a.valueField,j=f.isEmptyStore,k=a.lastSelection;if((l||o||!m||j)&&(c.isModel||(a.value=p?Ext.Array.from(a.value).concat(c):c,a.setHiddenValue(a.value),a.setRawValue(s?c:"")),o&&!j&&f.load(),!c.isModel||j))return a;for(d=0,h=(c=p?Ext.Array.from(a.value).concat(c):Ext.Array.from(c)).length;d<h;d++)(b=c[d])&&b.isModel||(b=(b=a.findRecordByValue(q=b))||a.valueCollection.find(a.valueField,q)),b||(t?a.valueNotFoundRecord&&(b=a.valueNotFoundRecord):!b&&c[d]&&((i={})[a.displayField]=c[d],a.valueField&&a.displayField!==a.valueField&&(i[a.valueField]=c[d]),b=new v(i))),b&&(e.push(b),u.push(b.get(a.valueField)));if(k)if((h=k.length)===e.length)for(d=0;!g&&d<h;d++)-1===Ext.Array.indexOf(a.lastSelection,e[d])&&(g=!0);else g=!0;else g=e.length;return g?(a.suspendEvent("select"),a.valueCollection.beginUpdate(),e.length?n.select(e,!1):n.deselectAll(),a.valueCollection.endUpdate(),a.resumeEvent("select")):a.updateValue(),a.inputEl&&a.emptyText&&(a.inputEl.removeCls(a.emptyCls),a.valueContainsPlaceholder=!1),a.applyEmptyText(),a},updateValue:function(){var d,c,a=this,f=a.valueCollection.getRange(),h=f.length,b=[],e=a.displayTplData||(a.displayTplData=[]),g=a.inputEl;for(d=e.length=0;d<h;d++)c=f[d],e.push(a.getRecordDisplayData(c)),c!==a.valueNotFoundRecord&&b.push(c.get(a.valueField));a.setHiddenValue(b),a.value=a.multiSelect?b:b[0],Ext.isDefined(a.value)||(a.value=void 0),a.displayTplData=e,g&&a.emptyText&&!Ext.isEmpty(a.value)&&g.removeCls(a.emptyCls),a.setRawValue(a.getDisplayValue()),a.checkChange(),a.applyEmptyText()},setHiddenValue:function(f){var e,d,b,g,c,a,h=this,i=h.hiddenName;if(h.hiddenDataEl&&i){for(f=Ext.Array.from(f),g=(b=(d=h.hiddenDataEl.dom).childNodes)[0],c=f.length,a=b.length,!g&&0<c&&(h.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:"input",type:"hidden",name:i})),a=1,g=d.firstChild);c<a;)d.removeChild(b[0]),--a;for(;a<c;)d.appendChild(g.cloneNode(!0)),++a;for(e=0;e<c;e++)b[e].value=f[e]}},getDisplayValue:function(a){return a=a||this.displayTplData,this.getDisplayTpl().apply(a)},getRecordDisplayData:function(a){return a.data},getValue:function(){var a=this,e=a.getStore(),d=a.picker,c=a.getRawValue(),b=a.value;return e.isEmptyStore||a.getDisplayValue()===c||(a.displayTplData=void 0,d&&(a.valueCollection.suspendEvents(),d.getSelectionModel().deselectAll(),a.valueCollection.resumeEvents(),a.lastSelection=null),b=e.isLoaded()&&(a.multiSelect||a.forceSelection)?a.value=void 0:a.value=c),a.value=null==b?null:b,a.value},getSubmitValue:function(){var a=this.getValue();return Ext.isEmpty(a)&&(a=""),a},isEqual:function(b,c){var a,d,e=Ext.Array.from;if(b=e(b),c=e(c),(d=b.length)!==c.length)return!1;for(a=0;a<d;a++)if(c[a]!==b[a])return!1;return!0},clearValue:function(){this.setValue(null)}}),Ext.define("Ext.theme.triton.picker.Month",{override:"Ext.picker.Month",footerButtonUI:"default-toolbar",calculateMonthMargin:Ext.emptyFn}),Ext.define("Ext.theme.triton.picker.Date",{override:"Ext.picker.Date",footerButtonUI:"default-toolbar"}),Ext.define("Ext.form.field.FileButton",{extend:Ext.button.Button,alias:"widget.filebutton",childEls:["fileInputEl"],inputCls:Ext.baseCSSPrefix+"form-file-input",cls:Ext.baseCSSPrefix+"form-file-btn",preventDefault:!1,tabIndex:void 0,autoEl:{tag:"div",unselectable:"on"},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" role="{role}" ','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>',">"],keyHandlers:null,ariaEl:"fileInputEl",getAfterMarkup:function(a){return this.getTpl("afterTpl").apply(a)},getTemplateArgs:function(){var a,b=this;return(a=b.callParent()).inputCls=b.inputCls,a.inputName=b.inputName||b.id,a.tabIndex=b.tabIndex||null,a.role=b.ariaRole,a},afterRender:function(){var a=this;a.callParent(arguments),a.fileInputEl.on({scope:a,change:a.fireChange,focus:a.onFileFocus,blur:a.onFileBlur})},fireChange:function(a){this.fireEvent("change",this,a,this.fileInputEl.dom.value)},createFileInput:function(c){var a=this,b=a.fileInputEl=a.el.createChild({name:a.inputName,id:c?void 0:a.id+"-fileInputEl",cls:a.inputCls,tag:"input",type:"file",size:1,role:"button"});b.dom.setAttribute("data-componentid",a.id),b.on({scope:a,change:a.fireChange,focus:a.onFileFocus,blur:a.onFileBlur})},onFileFocus:function(b){var a=this.ownerCt;this.hasFocus||this.onFocus(b),a&&!a.hasFocus&&a.onFocus(b)},onFileBlur:function(b){var a=this.ownerCt;this.hasFocus&&this.onBlur(b),a&&a.hasFocus&&a.onBlur(b)},reset:function(a){a&&this.fileInputEl.destroy(),this.createFileInput(!a)},restoreInput:function(a){var b=this;b.fileInputEl.destroy(),a=Ext.get(a),b.el.appendChild(a),b.fileInputEl=a},onDisable:function(){this.callParent(),this.fileInputEl.dom.disabled=!0},onEnable:function(){this.callParent(),this.fileInputEl.dom.disabled=!1},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el}}}),Ext.define("Ext.form.trigger.Component",{extend:Ext.form.trigger.Trigger,alias:"trigger.component",cls:Ext.baseCSSPrefix+"form-trigger-cmp",onFieldRender:function(){var b=this,a=b.component;b.callParent(),a.isComponent||a.isWidget||(a=Ext.widget(a)),(b.component=a).render(b.el)},destroy:function(){var a=this.component;(a.isComponent||a.isWidget)&&a.destroy(),this.component=null,this.callParent()}}),Ext.define("Ext.form.field.File",{extend:Ext.form.field.Text,alias:["widget.filefield","widget.fileuploadfield"],alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],emptyText:void 0,needArrowKeys:!1,triggers:{filebutton:{type:"component",hideOnReadOnly:!1,preventMouseDown:!1}},buttonText:"Browse...",buttonOnly:!1,buttonMargin:3,clearOnSubmit:!0,extraFieldBodyCls:Ext.baseCSSPrefix+"form-file-wrap",inputCls:Ext.baseCSSPrefix+"form-text-file",readOnly:!0,editable:!1,submitValue:!1,triggerNoEditCls:"",childEls:["browseButtonWrap"],applyTriggers:function(c){var a=this,b=(c||{}).filebutton;if(b)return b.component=Ext.apply({xtype:"filebutton",ownerCt:a,id:a.id+"-button",ui:a.ui,disabled:a.disabled,text:a.buttonText,style:a.buttonOnly?"":a.getButtonMarginProp()+a.buttonMargin+"px",inputName:a.getName(),listeners:{scope:a,change:a.onFileChange}},a.buttonConfig),a.callParent([c])},getSubTplData:function(b){var a=this.callParent([b]);return a.tabIdx=-1,a},onRender:function(){var b,e,c,d,a=this;a.callParent(arguments),(b=a.inputEl).dom.name="",b.on("focus",a.onInputFocus,a),b.on("mousedown",a.onInputMouseDown,a),d=a.getTrigger("filebutton"),e=a.button=d.component,a.fileInputEl=e.fileInputEl,c=e.el,a.buttonOnly&&(a.inputWrap.setDisplayed(!1),a.shrinkWrap=3),d.el.setWidth(c.getWidth()+c.getMargin("lr")),Ext.isIE&&a.button.getEl().repaint()},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap" data-ref="browseButtonWrap" role="presentation"></td>'},onFileChange:function(b,c,a){this.duringFileSelect=!0,Ext.form.field.File.superclass.setValue.call(this,a),delete this.duringFileSelect},didValueChange:function(){return!!this.duringFileSelect},setEmptyText:Ext.emptyFn,setValue:Ext.emptyFn,reset:function(){var a=this,b=a.clearOnSubmit;a.rendered&&(a.button.reset(b),a.fileInputEl=a.button.fileInputEl,b&&(a.inputEl.dom.value="",Ext.form.field.File.superclass.setValue.call(this,null))),a.callParent()},onShow:function(){this.callParent(),this.button.updateLayout()},onDisable:function(){this.callParent(),this.button.disable()},onEnable:function(){this.callParent(),this.button.enable()},isFileUpload:Ext.returnTrue,extractFileInput:function(){var a,b=this;return b.rendered?(a=b.button.fileInputEl.dom,b.reset()):((a=document.createElement("input")).type="file",a.className=Ext.baseCSSPrefix+"hidden-display",a.name=b.getName()),a},restoreInput:function(b){if(this.rendered){var a=this.button;a.restoreInput(b),this.fileInputEl=a.fileInputEl}},onDestroy:function(){this.fileInputEl=this.button=null,this.callParent()},getButtonMarginProp:function(){return"margin-left:"},onInputFocus:function(a){this.focus(),Ext.isIE9m&&(this.fileInputEl.addCls(Ext.baseCSSPrefix+"position-relative"),this.fileInputEl.removeCls(Ext.baseCSSPrefix+"position-relative"))},onInputMouseDown:function(a){a.preventDefault(),this.focus()},privates:{getFocusEl:function(){return this.button},getFocusClsEl:Ext.privateFn}}),Ext.define("Ext.tip.Tip",{extend:Ext.panel.Panel,alias:"widget.tip",alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:!0,autoRender:!0,hidden:!0,baseCls:Ext.baseCSSPrefix+"tip",focusOnToFront:!1,maskOnDisable:!1,closeAction:"hide",alwaysFramed:!0,frameHeader:!1,initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow,constrain:a.constrainPosition},a.self.prototype.floating),a.callParent(arguments),a.constrain=a.constrain||a.constrainPosition},showAt:function(b){var a=this;this.callParent(arguments),a.isVisible()&&(a.setPagePosition(b[0],b[1]),(a.constrainPosition||a.constrain)&&a.doConstrain(),a.toFront(!0))},privates:{initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.dom.parentNode},Ext.Component.prototype.initDraggable.call(a)}},ghost:void 0,unghost:void 0}),Ext.define("Ext.tip.ToolTip",{extend:Ext.tip.Tip,alias:"widget.tooltip",alternateClassName:"Ext.ToolTip",autoHide:!0,showDelay:500,hideDelay:200,dismissDelay:5e3,trackMouse:!1,anchorToTarget:!0,anchorOffset:0,targetCounter:0,quickShowInterval:250,hideAction:"hide",fadeOutDuration:1e3,ariaRole:"tooltip",initComponent:function(){var a=this;a.callParent(arguments),a.lastActive=new Date,a.setTarget(a.target),a.origAnchor=a.anchor},onRender:function(c,b){var a=this;a.callParent(arguments),a.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+a.getAnchorPosition(),a.anchorEl=a.el.createChild({role:"presentation",cls:Ext.baseCSSPrefix+"tip-anchor "+a.anchorCls})},setTarget:function(d){var c,a=this,b=Ext.get(d);a.target&&(c=Ext.get(a.target),Ext.supports.Touch?a.mun(c,"tap",a.onTargetOver,a):a.mun(c,{mouseover:a.onTargetOver,mouseout:a.onTargetOut,mousemove:a.onMouseMove,scope:a})),(a.target=b)&&(Ext.supports.Touch?a.mon(b,{tap:a.onTargetOver,scope:a}):a.mon(b,{mouseover:a.onTargetOver,mouseout:a.onTargetOut,mousemove:a.onMouseMove,scope:a})),a.anchor&&(a.anchorTarget=a.target)},onMouseMove:function(c){var d,b,a=this;a.target&&!a.target.contains(c.target)||((d=a.delegate?c.getTarget(a.delegate):a.triggerElement=!0)?(a.targetXY=c.getXY(),d===a.triggerElement?!a.hidden&&a.trackMouse&&(b=a.getTargetXY(),a.constrainPosition&&(b=a.el.adjustForConstraints(b,a.el.parent())),a.setPagePosition(b)):(a.hide(),a.lastActive=new Date(0),a.onTargetOver(c))):!a.closable&&a.isVisible()&&!1!==a.autoHide&&a.delayHide())},getTargetXY:function(){var c,d,h,m,l,f,e,j,k,b,g,i,a=this;if(a.delegate&&(a.anchorTarget=a.triggerElement),a.anchor){if(a.targetCounter++,d=a.getOffsets(),h=a.anchorToTarget&&!a.trackMouse?a.getAlignToXY(a.anchorTarget,a.getAnchorAlign()):a.targetXY,m=Ext.Element.getViewportWidth()-5,l=Ext.Element.getViewportHeight()-5,f=document.documentElement,e=document.body,j=(f.scrollLeft||e.scrollLeft||0)+5,k=(f.scrollTop||e.scrollTop||0)+5,b=[h[0]+d[0],h[1]+d[1]],g=a.getSize(),i=a.constrainPosition,a.anchorEl.removeCls(a.anchorCls),a.targetCounter<2&&i){if(b[0]<j)return a.anchorToTarget&&(a.defaultAlign="l-r",a.mouseOffset&&(a.mouseOffset[0]*=-1)),a.anchor="left",a.getTargetXY();if(b[0]+g.width>m)return a.anchorToTarget&&(a.defaultAlign="r-l",a.mouseOffset&&(a.mouseOffset[0]*=-1)),a.anchor="right",a.getTargetXY();if(b[1]<k)return a.anchorToTarget&&(a.defaultAlign="t-b",a.mouseOffset&&(a.mouseOffset[1]*=-1)),a.anchor="top",a.getTargetXY();if(b[1]+g.height>l)return a.anchorToTarget&&(a.defaultAlign="b-t",a.mouseOffset&&(a.mouseOffset[1]*=-1)),a.anchor="bottom",a.getTargetXY()}return a.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+a.getAnchorPosition(),a.anchorEl.addCls(a.anchorCls),a.targetCounter=0,b}return c=a.getMouseOffset(),a.targetXY?[a.targetXY[0]+c[0],a.targetXY[1]+c[1]]:c},calculateConstrainedPosition:function(e){var d,b,c,a=this;return!e&&a.isContainedFloater()?((d=a.isVisible())||a.el.show(),b=a.getTargetXY(),d||a.el.hide(),c=a.floatParent.getTargetEl().getViewRegion(),b[0]-=c.left,b[1]-=c.top):b=a.callOverridden(arguments),b},getMouseOffset:function(){var a=this,b=a.anchor?[0,0]:[15,18];return a.mouseOffset&&(b[0]+=a.mouseOffset[0],b[1]+=a.mouseOffset[1]),b},fadeOut:function(){var a=this;a.el.fadeOut({duration:a.fadeOutDuration,callback:function(){a.hide(),a.el.setOpacity("")}})},getAnchorPosition:function(){var b,a=this;switch(a.anchor?a.tipAnchor=a.anchor.charAt(0):(b=a.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/),a.tipAnchor=b[1].charAt(0)),a.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var c,a,b=this,d=b.getAnchorPosition().charAt(0);if(b.anchorToTarget&&!b.trackMouse)switch(d){case"t":a=[0,9];break;case"b":a=[0,-13];break;case"r":a=[-13,0];break;default:a=[9,0]}else switch(d){case"t":a=[-15-b.anchorOffset,30];break;case"b":a=[-19-b.anchorOffset,-13-b.el.dom.offsetHeight];break;case"r":a=[-15-b.el.dom.offsetWidth,-13-b.anchorOffset];break;default:a=[25,-13-b.anchorOffset]}return c=b.getMouseOffset(),a[0]+=c[0],a[1]+=c[1],a},onTargetOver:function(b){var c,a=this,d=a.delegate;a.disabled||b.within(a.target.dom,!0)||(c=!d||b.getTarget(d))&&(a.triggerElement=c,a.triggerEvent=b,a.clearTimer("hide"),a.targetXY=b.getXY(),a.delayShow())},delayShow:function(c){var a=this,b=a.el&&(!1===c||!a.trackMouse)&&a.getTargetXY();a.hidden&&!a.showTimer?Ext.Date.getElapsed(a.lastActive)<a.quickShowInterval?a.show():a.showTimer=Ext.defer(a.showFromDelay,a.showDelay,a,[b]):a.hidden||!1===a.autoHide||a.show(b)},showFromDelay:function(b){var a=this;a.disabled||(a.fromDelayShow=!0,a.show(b),delete a.fromDelayShow)},onShowVeto:function(){this.callParent(),delete this.triggerElement,this.clearTimer("show")},onTargetOut:function(d){var a=this,b=a.triggerElement,c=!0===b?a.target:b;a.disabled||!b||d.within(c,!0)||(a.showTimer&&(a.clearTimer("show"),a.triggerElement=null),!1!==a.autoHide&&a.delayHide())},delayHide:function(){var a=this;a.hidden||a.hideTimer||(a.hideTimer=Ext.defer(a[a.hideAction],a.hideDelay,a))},hide:function(){var a=this;a.clearTimer("dismiss"),a.lastActive=new Date,a.anchorEl&&a.anchorEl.hide(),a.callParent(arguments),delete a.triggerElement},show:function(b){var a=this;this.callParent(),!1===this.hidden&&(a.anchor&&(a.anchor=a.origAnchor),a.calledFromShowAt||a.showAt(b||a.getTargetXY()))},showAt:function(b){var a=this;a.lastActive=new Date,a.clearTimers(),a.calledFromShowAt=!0,a.isVisible()||this.callParent(arguments),a.isVisible()&&(a.setPagePosition(b[0],b[1]),(a.constrainPosition||a.constrain)&&a.doConstrain(),a.toFront(!0),a.el.syncUnderlays(),a.dismissDelay&&!1!==a.autoHide&&(a.dismissTimer=Ext.defer(a.hide,a.dismissDelay,a))),delete a.calledFromShowAt},syncAnchor:function(){var b,c,d,a=this;switch(a.tipAnchor.charAt(0)){case"t":b="b",c="tl",d=[20+a.anchorOffset,1];break;case"r":b="l",c="tr",d=[-1,12+a.anchorOffset];break;case"b":b="t",c="bl",d=[20+a.anchorOffset,-1];break;default:b="r",c="tl",d=[1,12+a.anchorOffset]}a.anchorEl.alignTo(a.el,b+"-"+c,d),a.anchorEl.setStyle("z-index",parseInt(a.el.getZIndex(),10)||1).setVisibilityMode(Ext.Element.DISPLAY)},afterSetPosition:function(b,c){var a=this;a.callParent(arguments),a.anchor?(a.syncAnchor(),a.anchorEl.isVisible()||a.anchorEl.show()):a.anchorEl.hide()},_timerNames:{},clearTimer:function(a){var b=this,d=b._timerNames,c=d[a]||(d[a]=a+"Timer"),e=b[c];e&&(clearTimeout(e),b[c]=null)},clearTimers:function(){var a=this;a.clearTimer("show"),a.clearTimer("dismiss"),a.clearTimer("hide")},onShow:function(){var a=this;a.callParent(),a.mon(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onHide:function(){var a=this;a.callParent(),a.mun(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onDocMouseDown:function(b){var a=this;a.closable||b.within(a.el.dom)||(a.disable(),Ext.defer(a.doEnable,100,a))},doEnable:function(){this.destroyed||this.enable()},onDisable:function(){this.callParent(),this.clearTimers(),this.hide()},beforeDestroy:function(){var a=this;a.clearTimers(),Ext.destroy(a.anchorEl),delete a.anchorEl,delete a.target,delete a.anchorTarget,delete a.triggerElement,a.callParent()},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this),this.callParent()}}),Ext.define("Ext.tip.QuickTip",{extend:Ext.tip.ToolTip,alias:"widget.quicktip",alternateClassName:"Ext.QuickTip",interceptTitles:!1,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},isQuickTip:!0,shrinkWrapDock:!0,initComponent:function(){var a=this;a.target=a.target||Ext.getDoc(),a.targets=a.targets||{},a.callParent()},setTagConfig:function(a){this.tagConfig=Ext.apply({},a),delete this.tagConfig.attr},text:null,register:function(a){for(var b,c,e,f=Ext.isArray(a)?a:arguments,d=0,g=f.length;d<g;d++)if(b=(a=f[d]).target)if(Ext.isArray(b))for(c=0,e=b.length;c<e;c++)this.targets[Ext.id(b[c])]=a;else this.targets[Ext.id(b)]=a},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(b){var c=this,a=c.activeTarget;b=Ext.get(b).dom,c.isVisible()?a&&a.el===b&&c.hide():a&&a.el===b&&c.clearTimer("show")},getTipCfg:function(a,f){var e,b=a.title,c=this.tagConfig,d=c.attr||(c.attr=c.namespace+c.attribute);return this.interceptTitles&&b&&Ext.isString(b)?(a.setAttribute(d,b),a.removeAttribute("title"),{text:b}):(a=Ext.fly(a).findParent(function(a){return e=a.getAttribute(d)}))?{target:a,text:e}:void 0},onTargetOver:function(a){this.doTargetOver(a.getTarget(this.delegate),null,a)},doTargetOver:function(b,p,l){var f,n,j,c,d,e,g,k,i,h,o,m,a=this;if(!a.disabled&&("string"==typeof b&&(b=Ext.getDom(b)),a.targetXY=p||(l?l.getXY():Ext.fly(b).getXY()),b&&1===b.nodeType&&b!==document.documentElement&&b!==document.body))if(!a.activeTarget||b!==a.activeTarget.el&&!Ext.fly(a.activeTarget.el).contains(b)){if(b){for(m in i=a.targets)if(i.hasOwnProperty(m)&&(o=i[m],(h=Ext.fly(o.target))&&(h.dom===b||h.contains(b)))){c=h.dom;break}if(c)return a.activeTarget=a.targets[c.id],a.activeTarget.el=b,a.anchor=a.activeTarget.anchor,a.anchor&&(a.anchorTarget=b),(f=parseInt(a.activeTarget.showDelay,10))&&(j=a.showDelay,a.showDelay=f),a.delayShow(),f&&(a.showDelay=j),void((n=a.activeTarget.hideAction)?a.hideAction=n:delete a.hideAction)}c=Ext.fly(b,"_quicktip-target"),e=(d=a.tagConfig).namespace,(g=a.getTipCfg(b,l))&&(g.target&&(b=g.target,c=Ext.fly(b,"_quicktip-target")),k=c.getAttribute(e+d.hide),a.activeTarget={el:b,text:g.text,width:+c.getAttribute(e+d.width)||null,autoHide:"user"!==k&&"false"!==k,title:c.getAttribute(e+d.title),cls:c.getAttribute(e+d.cls),align:c.getAttribute(e+d.align),showDelay:parseInt(c.getAttribute(e+d.showDelay)||0,10),hideAction:c.getAttribute(e+d.hideAction),anchorTarget:c.getAttribute(e+d.anchorTarget)},a.initialConfig.hasOwnProperty("anchor")||(a.anchor=c.getAttribute(e+d.anchor)),a.anchor&&!a.initialConfig.hasOwnProperty("anchorTarget")&&(a.anchorTarget=a.activeTarget.anchorTarget||b),(f=parseInt(a.activeTarget.showDelay,10))&&(j=a.showDelay,a.showDelay=f),a.delayShow(),f&&(a.showDelay=j))}else a.targetTextEmpty()?(a.onShowVeto(),delete a.activeTarget):(a.clearTimer("hide"),a.show())},onTargetOut:function(d){var b,e,a=this,c=a.activeTarget;c&&d.within(a.activeTarget.el)&&!a.getTipCfg(d.getTarget(),d)||(a.clearTimer("show"),delete a.activeTarget,!1!==a.autoHide&&((b=c&&parseInt(c.hideDelay,10))&&(e=a.hideDelay,a.hideDelay=b),a.delayHide(),b&&(a.hideDelay=e)))},targetTextEmpty:function(){var b,c=this,a=c.activeTarget,e=c.tagConfig;return!(!a||!(b=a.el)||b.getAttribute(e.namespace+e.attribute)||c.targets[Ext.id(a.target)])},show:function(){var a=this;if(a.fromDelayShow&&a.targetTextEmpty())return a.onShowVeto(),void delete a.activeTarget;a.callParent(arguments)},showAt:function(d){var e,c,a=this,b=a.activeTarget,f=a.header;b&&(a.rendered||(a.render(Ext.getBody()),a.activeTarget=b),a.suspendLayouts(),b.title?(a.setTitle(b.title),f.show()):f&&f.hide(),a.update(b.text),a.autoHide=b.autoHide,e=b.dismissDelay,a.dismissDelay=Ext.isNumber(e)?e:a.dismissDelay,b.mouseOffset&&(d[0]+=b.mouseOffset[0],d[1]+=b.mouseOffset[1]),(c=a.lastCls)&&(a.removeCls(c),delete a.lastCls),(c=b.cls)&&(a.addCls(c),a.lastCls=c),a.setWidth(b.width),a.anchor?a.constrainPosition=!1:b.align?(d=a.getAlignToXY(b.el,b.align),a.constrainPosition=!1):a.constrainPosition=!0,a.resumeLayouts(!0)),a.callParent([d])},showByTarget:function(b){var c,e,d,a=this;(c=a.targets[b.id])&&(a.activeTarget=c,a.activeTarget.el=Ext.get(b).dom,a.anchor=a.activeTarget.anchor,e=b.getSize(),d=b.getXY(),a.showAt([d[0],d[1]+e.height]))},hide:function(){delete this.activeTarget,this.callParent()}}),Ext.define("Ext.tip.QuickTipManager",{singleton:!0,alternateClassName:"Ext.QuickTips",disabled:!1,init:function(d,e){var c=this;if(!c.tip){if(!Ext.isReady)return Ext.onInternalReady(function(){Ext.tip.QuickTipManager.init(d,e)}),!1;var a=Ext.apply({disabled:c.disabled,id:"ext-quicktips-tip"},e),b=a.className,f=a.xtype;b?delete a.className:f&&(b="widget."+f,delete a.xtype),!1!==d&&(a.renderTo=document.body),c.tip=Ext.create(b||"Ext.tip.QuickTip",a),Ext.quickTipsActive=!0}},destroy:function(){Ext.destroy(this.tip),this.tip=void 0},ddDisable:function(){var a=this.tip;a&&!this.disabled&&a.disable()},ddEnable:function(){var a=this.tip;a&&!this.disabled&&a.enable()},enable:function(){var a=this.tip;a&&a.enable(),this.disabled=!1},disable:function(){var a=this.tip;a&&a.disable(),this.disabled=!0},isEnabled:function(){var a=this.tip;return void 0!==a&&!a.disabled},getQuickTip:function(){return this.tip},register:function(){var a=this.tip;a.register.apply(a,arguments)},unregister:function(){var a=this.tip;a.unregister.apply(a,arguments)},tips:function(){var a=this.tip;a.register.apply(a,arguments)}}),Ext.define("Ext.toolbar.Separator",{extend:Ext.toolbar.Item,alias:"widget.tbseparator",alternateClassName:"Ext.Toolbar.Separator",baseCls:Ext.baseCSSPrefix+"toolbar-separator",ariaRole:"separator"}),Ext.define("Ext.grid.CellContext",{isCellContext:!0,constructor:function(a){this.view=a},setPosition:function(a,c){var b=this;if(1===arguments.length)if(a.length)c=a[0],a=a[1];else{if(a.isCellContext)return b.setAll(a.view,a.rowIdx,a.colIdx,a.record,a.columnHeader);a.view&&(b.view=a.view),c=a.column,a=a.row}return b.setRow(a),b.setColumn(c),b},setAll:function(f,d,c,e,b){var a=this;return a.view=f,a.rowIdx=d,a.colIdx=c,a.record=e,a.column=b,a},setRow:function(a){var b=this,c=b.view.dataSource;return void 0!==a&&("number"==typeof a?(b.rowIdx=Math.max(Math.min(a,c.getCount()-1),0),b.record=c.getAt(a)):a.isModel?(b.record=a,b.rowIdx=c.indexOf(a)):(a.tagName||a.isElement)&&(b.record=b.view.getRecord(a),b.rowIdx=c.indexOf(b.record))),b},setColumn:function(a){var b=this,c=b.view.getVisibleColumnManager();return void 0!==a&&("number"==typeof a?(b.colIdx=a,b.column=c.getHeaderAtIndex(a)):a.isHeader&&(b.column=a,b.colIdx=c.indexOf(a))),b},getCell:function(a){return this.view.getCellByPosition(this,a)},getRow:function(b){var a=this.view.getRow(this.record);return b?a:Ext.get(a)},getNode:function(b){var a=this.view.getNode(this.record);return b?a:Ext.get(a)},isEqual:function(a){return a&&a.isCellContext&&a.record===this.record&&a.column===this.column},clone:function(){var a=this,b=new a.self(a.view);return b.rowIdx=a.rowIdx,b.colIdx=a.colIdx,b.record=a.record,b.column=a.column,b},privates:{isFirstColumn:function(){var a=this.getCell(!0);if(a)return!a.previousSibling},isLastColumn:function(){var a=this.getCell(!0);if(a)return!a.nextSibling},getLastColumnIndex:function(){var a=this.getRow(!0);return a?a.lastChild.cellIndex:-1},navigate:function(c){var a=this,b=a.view.getVisibleColumnManager().getColumns();switch(c){case-1:for(;a.colIdx?a.colIdx--:a.colIdx=b.length-1,a.setColumn(a.colIdx),!a.getCell(!0););break;case 1:for(;a.colIdx>=b.length?a.colIdx=0:a.colIdx++,a.setColumn(a.colIdx),!a.getCell(!0););}}},statics:{compare:function(a,b){return a.rowIdx-b.rowIdx||a.colIdx-b.colIdx}}}),Ext.define("Ext.grid.CellEditor",{extend:Ext.Editor,isCellEditor:!0,alignment:"l-l!",hideEl:!1,cls:Ext.baseCSSPrefix+"small-editor "+Ext.baseCSSPrefix+"grid-editor "+Ext.baseCSSPrefix+"grid-cell-editor",treeNodeSelector:"."+Ext.baseCSSPrefix+"tree-node-text",shim:!1,shadow:!1,setGrid:function(d){var b,a=this,c=a.grid;d!==c&&(b={beforeitemupdate:a.beforeItemUpdate,itemupdate:a.onItemUpdate,scope:a},c&&c.getView().un(b),(a.grid=d).getView().on(b))},beforeViewRefresh:function(c){var a=this,b=a.el&&a.el.dom;b&&(a.wasAllowBlur=a.allowBlur,a.editing&&(c.cellFocused=!1,a.allowBlur=!1),b.parentNode&&(c.refreshing=!0,b.parentNode.removeChild(b)))},onViewRefresh:function(d){var c,a=this,e=a.el&&a.el.dom,b=a.context;if(e){if(!(c=d.getCellByPosition(b,!0)))return a.allowBlur=a.wasAllowBlur,a.completeEdit(),void Ext.getDetachedBody().dom.appendChild(e);b.node=d.getNode(b.record),b.row=d.getRow(b.record),b.cell=c,b.rowIdx=d.indexOf(b.row),c.insertBefore(e,c.firstChild),a.boundEl=a.container=Ext.get(c),a.realign(!0),a.editing&&(Ext.isIE?Ext.defer(function(){a.destroyed||(a.allowBlur=a.wasAllowBlur,a.field.focus())},10):(a.allowBlur=a.wasAllowBlur,a.field.focus()))}},beforeItemUpdate:function(e,g,h,d){var a,c=this,b=c.context,f=d.length;if(e===b.record)for(a=0;a<f;a++)if(d[a]===b.column)return c.needsFixOnItemUpdate=!0,void c.beforeViewRefresh(b.view)},onItemUpdate:function(d,b,c){var a=this.context.view;this.needsFixOnItemUpdate&&(this.needsFixOnItemUpdate=a.refreshing=!1,this.onViewRefresh(a))},startEdit:function(a,c,b){this.context=this.editingPlugin.context,this.callParent([a,c,b])},onShow:function(){var a=this,b=a.boundEl.down(a.context.view.innerSelector);b&&(a.isForTree&&(b=b.child(a.treeNodeSelector)),b.hide()),a.callParent(arguments)},onFocusEnter:function(){var a=this.context,b=a.view;a.node=b.getNode(a.record),a.row=b.getRow(a.record),a.cell=a.getCell(!0),a.rowIdx=b.indexOf(a.row),this.realign(!0),this.callParent(arguments),this.focusEnterEvent=null},onEditComplete:function(a){a&&this.restoreCell(),this.callParent(arguments)},onHide:function(){this.restoreCell(),this.callParent(arguments)},onSpecialKey:function(g,b){var a=this,f=b.getKey(),c=a.completeOnEnter&&f===b.ENTER,d=a.cancelOnEsc&&f===b.ESC,e=a.editingPlugin.view;(c||d)&&(b.stopEvent(),c?a.completeEdit(!0):d&&a.cancelEdit(!0),e.getNavigationModel().setPosition(a.context,null,b),e.ownerGrid.setActionableMode(!1))},getRefOwner:function(){return this.column&&this.column.getView()},restoreCell:function(){var b=this,a=b.boundEl.down(b.context.view.innerSelector);a&&(b.isForTree&&(a=a.child(b.treeNodeSelector)),a.show())},afterRender:function(){var a=this,b=a.field;a.callParent(arguments),b.isCheckbox&&b.mon(b.inputEl,{mousedown:a.onCheckBoxMouseDown,click:a.onCheckBoxClick,scope:a})},onCheckBoxMouseDown:function(){this.completeEdit=Ext.emptyFn},onCheckBoxClick:function(){delete this.completeEdit,this.field.focus(!1,10)},realign:function(j){var e,a=this,c=a.boundEl,b=c.down(a.context.view.innerSelector),d=b.dom.firstChild,f=c.getWidth(),h=Ext.Array.clone(a.offsets),k=a.grid,i="",g=!d||3===d.nodeType&&!Ext.String.trim(i=d.data).length;a.isForTree&&(e=a.getTreeNodeOffset(b),f-=Math.abs(e),h[0]+=e),k.columnLines&&(f-=c.getBorderWidth("rl")),!0===j&&a.field.setWidth(f),g&&(b.dom.innerHTML="X"),a.alignTo(c,a.alignment,h),g&&(b.dom.firstChild.data=i)},getTreeNodeOffset:function(a){return a.child(this.treeNodeSelector).getOffsetsTo(a)[0]}}),Ext.define("Ext.grid.ColumnComponentLayout",{extend:Ext.layout.component.Auto,alias:"layout.columncomponent",type:"columncomponent",setWidthInDom:!0,_paddingReset:{paddingTop:"",paddingBottom:""},columnAutoCls:Ext.baseCSSPrefix+"column-header-text-container-auto",beginLayout:function(a){this.callParent(arguments),a.titleContext=a.getEl("titleEl")},beginLayoutCycle:function(d){var b=this,a=b.owner,c=d.widthModel.shrinkWrap;b.callParent(arguments),c&&a.el.setWidth(""),a.textContainerEl[c&&!a.isGroupHeader?"addCls":"removeCls"](b.columnAutoCls),a.titleEl.setStyle(b._paddingReset)},publishInnerHeight:function(a,e){var c,b=this.owner;if(b.getRootHeaderCt().hiddenHeaders)a.setProp("innerHeight",0);else if(!a.hasRawContent){if(b.headerWrap&&!a.hasDomProp("width"))return void(this.done=!1);c=e-a.getBorderInfo().height,a.setProp("innerHeight",c-b.titleEl.getHeight(),!1)}},measureContentHeight:function(a){return a.el.dom.offsetHeight},publishInnerWidth:function(a,b){a.hasRawContent||a.setProp("innerWidth",b-a.getBorderInfo().width,!1)},calculateOwnerHeightFromContentHeight:function(a,c){var d=this.callParent(arguments),b=this.owner;return a.hasRawContent?d:!b.headerWrap||a.hasDomProp("width")?c+b.titleEl.getHeight()+a.getBorderInfo().height:null},calculateOwnerWidthFromContentWidth:function(a,d){var c=this.owner,f=a.getPaddingInfo().width,e=this.getTriggerOffset(c,a);return(c.isGroupHeader?d:Math.max(d,c.textEl.getWidth()+a.titleContext.getPaddingInfo().width))+f+e},getTriggerOffset:function(a,c){var b=0;return c.widthModel.shrinkWrap&&!a.menuDisabled&&0===a.query(">:not([hidden])").length&&(b=a.getTriggerElWidth()),b}}),Ext.define("Ext.layout.container.Fit",{extend:Ext.layout.container.Container,alternateClassName:"Ext.layout.FitLayout",alias:"layout.fit",itemCls:Ext.baseCSSPrefix+"fit-item",type:"fit",manageMargins:!0,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(d,b){var a=b||this.owner.getSizeModel(),c=(a.width.shrinkWrap?0:1)|(a.height.shrinkWrap?0:2);return this.sizePolicies[c]},beginLayoutCycle:function(a,p){var b,k,g,e,q,n,c,d,o,r,f=this,j=f.lastHeightModel&&f.lastHeightModel.calculated,m=f.lastWidthModel&&f.lastWidthModel.calculated,l=m||j,h=0,i=0;for(f.callParent(arguments),l&&"TD"!==a.targetContext.el.dom.tagName.toUpperCase()&&(l=m=j=!1),q=(k=a.childItems).length,g=0;g<q;++g)e=k[g],p&&(c=(b=e.target).minHeight,((d=b.minWidth)||c)&&(h<(c+=(n=e.marginInfo||e.getMarginInfo()).height)&&(h=c),i<(d+=n.height)&&(i=d))),l&&(o=e.el.dom.style,j&&(o.height=""),m&&(o.width=""));p&&(a.maxChildMinHeight=h,a.maxChildMinWidth=i),b=a.target,a.overflowX=!a.widthModel.shrinkWrap&&a.maxChildMinWidth&&b.scrollFlags.x||r,a.overflowY=!a.heightModel.shrinkWrap&&a.maxChildMinHeight&&b.scrollFlags.y||r},calculate:function(a){var e,f,l,g,i,h,d=this,p=a.childItems,m=p.length,b=d.getContainerSize(a),c={length:m,ownerContext:a,targetSize:b},o=a.widthModel.shrinkWrap,n=a.heightModel.shrinkWrap,j=a.overflowX,k=a.overflowY;if(a.state.info=c,(j||k)&&(e=d.getScrollbarsNeeded(j&&b.width,k&&b.height,a.maxChildMinWidth,a.maxChildMinHeight))&&(f=Ext.getScrollbarSize(),1&e&&(b.height-=f.height),2&e&&(b.width-=f.width)),0<m)for(g=0;g<m;++g)c.index=g,d.fitItem(p[g],c);else c.contentWidth=c.contentHeight=0;(n||o)&&(l=a.targetContext.getPaddingInfo(),o&&(k&&!b.gotHeight?d.done=!1:(i=c.contentWidth+l.width,2&e&&(i+=f.width),a.setContentWidth(i)||(d.done=!1))),n&&(j&&!b.gotWidth?d.done=!1:(h=c.contentHeight+l.height,1&e&&(h+=f.height),a.setContentHeight(h)||(d.done=!1))))},fitItem:function(b,a){var c=this;b.invalid?c.done=!1:(a.margins=b.getMarginInfo(),a.needed=a.got=0,c.fitItemWidth(b,a),c.fitItemHeight(b,a),a.got!==a.needed&&(c.done=!1))},fitItemWidth:function(b,a){var c,d;if(a.ownerContext.widthModel.shrinkWrap)d=b.getProp("width")+a.margins.width,c=a.contentWidth,a.contentWidth=void 0===c?d:Math.max(c,d);else if(b.widthModel.calculated){if(++a.needed,!a.targetSize.gotWidth)return;++a.got,this.setItemWidth(b,a)}this.positionItemX(b,a)},fitItemHeight:function(b,a){var c,d;if(a.ownerContext.heightModel.shrinkWrap)d=b.getProp("height")+a.margins.height,c=a.contentHeight,a.contentHeight=void 0===c?d:Math.max(c,d);else if(b.heightModel.calculated){if(++a.needed,!a.targetSize.gotHeight)return;++a.got,this.setItemHeight(b,a)}this.positionItemY(b,a)},positionItemX:function(c,b){var a=b.margins;(b.index||a.left)&&c.setProp("x",a.left),a.width&&b.ownerContext.widthModel.shrinkWrap&&c.setProp("margin-right",a.width)},positionItemY:function(c,b){var a=b.margins;(b.index||a.top)&&c.setProp("y",a.top),a.height&&b.ownerContext.heightModel.shrinkWrap&&c.setProp("margin-bottom",a.height)},setItemHeight:function(b,a){b.setHeight(a.targetSize.height-a.margins.height)},setItemWidth:function(b,a){b.setWidth(a.targetSize.width-a.margins.width)}}),Ext.define("Ext.panel.Table",{extend:Ext.panel.Panel,alias:"widget.tablepanel",extraBaseCls:Ext.baseCSSPrefix+"grid",extraBodyCls:Ext.baseCSSPrefix+"grid-body",actionableModeCls:Ext.baseCSSPrefix+"grid-actionable",noHeaderBordersCls:Ext.baseCSSPrefix+"no-header-borders",defaultBindProperty:"store",layout:"fit",ariaRole:"grid",config:{selection:null,headerBorders:!0},publishes:["selection"],twoWayBindable:["selection"],autoLoad:!1,variableRowHeight:!1,numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,hasView:!1,viewType:null,deferRowRender:!1,sortableColumns:!0,multiColumnSort:!1,enableLocking:!1,scrollerOwner:!0,enableColumnMove:!0,sealedColumns:!1,enableColumnResize:!0,rowLines:!0,bufferedRenderer:!0,ownerGrid:null,colLinesCls:Ext.baseCSSPrefix+"grid-with-col-lines",rowLinesCls:Ext.baseCSSPrefix+"grid-with-row-lines",noRowLinesCls:Ext.baseCSSPrefix+"grid-no-row-lines",hiddenHeaderCtCls:Ext.baseCSSPrefix+"grid-header-ct-hidden",hiddenHeaderCls:Ext.baseCSSPrefix+"grid-header-hidden",resizeMarkerCls:Ext.baseCSSPrefix+"grid-resize-marker",emptyCls:Ext.baseCSSPrefix+"grid-empty",focusable:!0,constructor:function(d){var b,a=this,c=d&&d.ownerGrid;a.ownerGrid=c||a,a.actionables=c?c.actionables:[],a.callParent([d]),(b=a.store).trackStateChanges=!0,a.autoLoad&&(b.isEmptyStore||b.load())},registerActionable:function(a){Ext.Array.include(this.actionables,a)},initComponent:function(){var d,e,f,j,g,i,h,c,a=this,b=a.columns||a.colModel||[];if(d=a.store=Ext.data.StoreManager.lookup(a.store||"ext-empty-store"),a.enableLocking=a.enableLocking||a.hasLockedColumns(b),a.plugins&&(a.plugins=a.constructPlugins()),a.columnLines&&a.addBodyCls(a.colLinesCls),a.addBodyCls(a.rowLines?a.rowLinesCls:a.noRowLinesCls),a.addBodyCls(a.extraBodyCls),a.enableLocking?(a.self.mixin("lockable",Ext.grid.locking.Lockable),a.injectLockable(),c=a.headerCt):b.isRootHeader?(a.hideHeaders?(b.setHeight(0),b.hiddenHeaders=!0):b.setScrollable({x:!1,y:!1}),a.headerCt=c=b,c.grid=a,c.forceFit=!!a.forceFit,(c.$initParent=a).columnManager=b.columnManager,a.visibleColumnManager=b.visibleColumnManager):(Ext.isArray(b)&&(b={items:b}),Ext.apply(b,{grid:a,$initParent:a,forceFit:a.forceFit,sortable:a.sortableColumns,enableColumnMove:a.enableColumnMove,enableColumnResize:a.enableColumnResize,columnLines:a.columnLines,sealed:a.sealedColumns,scrollable:a.hideHeaders?void 0:{x:!1,y:!1}}),a.hideHeaders&&(b.height=0,b.hiddenHeaders=!0),Ext.isDefined(a.enableColumnHide)&&(b.enableColumnHide=a.enableColumnHide),a.headerCt=c=new Ext.grid.header.Container(b)),a.columns=i=c.getGridColumns(),a.scrollTask=new Ext.util.DelayedTask(a.syncHorizontalScroll,a),a.cls=(a.cls||"")+(" "+a.extraBaseCls),delete a.autoScroll,(g=a.plugins&&Ext.Array.findBy(a.plugins,function(a){return a.isBufferedRenderer}))&&(a.bufferedRenderer=g),!a.hasView){if(d.isBufferedStore&&!d.getRemoteSort())for(f=0,j=i.length;f<j;f++)i[f].sortable=!1;a.hideHeaders&&(a.headerCt.addCls(a.hiddenHeaderCtCls),a.addCls(a.hiddenHeaderCls)),a.relayHeaderCtEvents(c),a.features=a.features||[],Ext.isArray(a.features)||(a.features=[a.features]),a.dockedItems=[].concat(a.dockedItems||[]),a.dockedItems.unshift(c),a.viewConfig=a.viewConfig||{},e=a.getView(),a.items=[e],a.hasView=!0,a.hideHeaders||(h=e.getScrollable())&&c.getScrollable().addPartner(h,"x"),a.bindStore(d,!0),a.mon(e,{viewready:a.onViewReady,refresh:a.onRestoreHorzScroll,scope:a})}a.selModel=a.view.getSelectionModel(),a.selModel.isRowModel&&a.selModel.on({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection}),a.relayEvents(a.view,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown","rowclick","rowdblclick","rowcontextmenu","rowmousedown","rowmouseup","rowkeydown","beforeitemkeydown","itemkeydown","beforeitemkeyup","itemkeyup","beforeitemkeypress","itemkeypress","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","beforecontainerkeyup","beforecontainerkeypress","containermouseup","containermousedown","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","containerkeyup","containerkeypress","selectionchange","beforeselect","select","beforedeselect","deselect"]),a.callParent(),a.enableLocking?a.afterInjectLockable():delete c.$initParent,a.addStateEvents(["columnresize","columnmove","columnhide","columnshow","sortchange","filterchange","groupchange"])},beforeRender:function(){var c,a=this,b=a.bufferedRenderer;a.lockable?a.getProtoBody().addCls(a.lockingBodyCls):(b&&a.getSizeModel().height.auto&&(a.bufferedRenderer=b=!1),b&&!b.isBufferedRenderer&&(b={xclass:"Ext.grid.plugin.BufferedRenderer"},Ext.copy(b,a,"variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer"),a.bufferedRenderer=a.addPlugin(b)),(c=a.ariaRenderAttributes||(a.ariaRenderAttributes={}))["aria-readonly"]=!a.isEditable,c["aria-multiselectable"]="SINGLE"!==a.selModel.selectionMode),a.callParent(arguments)},onRender:function(){var b,c,a=this;a.isLocked&&a.getSizeModel().width.shrinkWrap&&(a.shrinkWrapColumns=!0,c=a.headerCt.getTableWidth(),b=a.gridPanelBorderWidth||(a.gridPanelBorderWidth=a.el.getBorderWidth("lr")),a.width=c+b),a.callParent()},getHeaderContainer:function(){return this.getView().getHeaderCt()},getColumns:function(){return this.getColumnManager().getColumns()},getVisibleColumns:function(){return this.getVisibleColumnManager().getColumns()},focus:function(){this.getView().focus()},disableColumnHeaders:function(){this.headerCt.disable()},enableColumnHeaders:function(){this.headerCt.enable()},hasLockedColumns:function(a){var b,d,c;for(a.isRootHeader?a=a.items.items:Ext.isObject(a)&&(a=a.items),b=0,d=a.length;b<d;b++)if(!(c=a[b]).processed&&c.locked)return!0},relayHeaderCtEvents:function(a){this.relayEvents(a,["columnresize","columnmove","columnhide","columnshow","columnschanged","sortchange","headerclick","headercontextmenu","headertriggerclick"])},getState:function(){var b=this,a=b.callParent(),c=b.store.getState();return a=b.addPropertyToState(a,"columns",b.headerCt.getColumnsState()),c&&(a.storeState=c),a},applyState:function(b){var e=this,a=b.sort,d=b.storeState,c=e.store,f=b.columns;delete b.columns,e.callParent(arguments),f&&e.headerCt.applyColumnsState(f,d),a?c.getRemoteSort()?c.sort({property:a.property,direction:a.direction,root:a.root},null,!1):c.sort(a.property,a.direction):d&&c.applyState(d)},getStore:function(){return this.store},getView:function(){var c,b,d,a=this;return a.view||(c=(d=a.viewConfig).scroll||a.scroll,null==(b=a.scrollable)&&null==d.scrollable&&null!==c&&(!0===c||"both"===c?b=!0:!1===c||"none"===c?b=!1:"vertical"===c?b={x:!1,y:!0}:"horizontal"===c&&(b={x:!0,y:!1})),d=Ext.apply({grid:a,ownerGrid:a.ownerGrid,deferInitialRefresh:a.deferRowRender,variableRowHeight:a.variableRowHeight,preserveScrollOnRefresh:!0,trackOver:!1!==a.trackMouseOver,throttledUpdate:!0===a.throttledUpdate,xtype:a.viewType,store:a.store,headerCt:a.headerCt,columnLines:a.columnLines,rowLines:a.rowLines,navigationModel:"grid",features:a.features,panel:a,emptyText:a.emptyText||""},a.viewConfig),null!=b&&(d.scrollable=b,a.scrollable=null),Ext.create(d),a.view.emptyText&&(a.view.emptyText='<div class="'+a.emptyCls+'">'+a.view.emptyText+"</div>"),a.view.getComponentLayout().headerCt=a.headerCt,a.mon(a.view,{uievent:a.processEvent,scope:a}),a.headerCt.view=a.view,a.hasListeners.viewcreated&&a.fireEvent("viewcreated",a,a.view)),a.view},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){return this.ownerGrid.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,applyScrollable:function(a){return this.view&&this.view.setScrollable(a),a},getScrollable:function(){return null},processEvent:function(g,h,f,c,d,b,e,i){var a=b.position.column;if(a)return a.processEvent.apply(a,arguments)},ensureVisible:function(b,a){this.doEnsureVisible(b,a)},scrollByDeltaY:function(b,a){this.getView().scrollBy(0,b,a)},scrollByDeltaX:function(b,a){this.getView().scrollBy(b,0,a)},afterCollapse:function(){this.saveScrollPos(),this.callParent(arguments)},afterExpand:function(){this.callParent(arguments),this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:function(){var b,a=this.view.getScrollable();a&&a.isTouchScroller&&(b=a.getSize())&&a.setSize({x:this.headerCt.getTableWidth(),y:b.y})},onHeaderMove:function(e,f,b,c,d){var a=this;!1===a.optimizedColumnMove?a.view.refreshView():a.view.moveColumn(c,d,b),a.delayScroll()},onHeaderHide:function(b,c){var a=this.view;!b.childHideCount&&a.refreshCounter&&a.refreshView()},onHeaderShow:function(b,c){var a=this.view;a.refreshCounter&&a.refreshView()},onHeadersChanged:function(b,c){var a=this;a.rendered&&!a.reconfiguring&&(a.view.refreshView(),a.delayScroll())},delayScroll:function(){var a=this.view;a&&this.scrollTask.delay(10,null,null,[a])},onViewReady:function(){this.fireEvent("viewready",this)},onRestoreHorzScroll:function(){var a=this;a.scrollXPos&&a.syncHorizontalScroll(a,!0)},getScrollerOwner:function(){var a=this;return this.scrollerOwner||(a=this.up("[scrollerOwner]")),a},getLhsMarker:function(){var a=this;return a.lhsMarker||(a.lhsMarker=Ext.DomHelper.append(a.el,{role:"presentation",cls:a.resizeMarkerCls},!0))},getRhsMarker:function(){var a=this;return a.rhsMarker||(a.rhsMarker=Ext.DomHelper.append(a.el,{role:"presentation",cls:a.resizeMarkerCls},!0))},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(c){var b,a=this;a.ignoreNextSelection||(a.ignoreNextSelection=!0,b=a.getSelectionModel(),c?b.select(c):b.deselectAll(),a.ignoreNextSelection=!1)},updateBindSelection:function(d,c){var a=this,b=null;a.ignoreNextSelection||(a.ignoreNextSelection=!0,c.length&&(b=d.getLastSelected(),a.hasHadSelection=!0),a.hasHadSelection&&a.setSelection(b),a.ignoreNextSelection=!1)},updateHeaderBorders:function(a){this[a?"removeCls":"addCls"](this.noHeaderBordersCls)},getNavigationModel:function(){return this.getView().getNavigationModel()},getSelectionModel:function(){return this.getView().getSelectionModel()},getScrollTarget:function(){var a=this.getScrollerOwner().query("tableview");return a[a.length-1]},syncHorizontalScroll:function(e,b){var a=this,c=a.view.getScrollX();b=!0===b,a.rendered&&(b||c!==a.scrollXPos)&&(b&&a.getScrollTarget().setScrollX(c),a.headerCt.setScrollX(c),a.scrollXPos=c)},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(b,d){var a=this,c=a.getView();b?(a.store=b,c.store!==b&&c.bindStore(b,!1),a.mon(b,{load:a.onStoreLoad,scope:a}),a.storeRelayers=a.relayEvents(b,["filterchange","groupchange"])):a.unbindStore()},unbindStore:function(){var c,a=this,b=a.store;b&&(b.trackStateChanges=!1,a.store=null,a.mun(b,{load:a.onStoreLoad,scope:a}),Ext.destroy(a.storeRelayers),(c=a.view).store&&c.bindStore(null))},setColumns:function(a){(a.length||this.getColumnManager().getColumns().length)&&this.reconfigure(void 0,a)},setStore:function(a){this.reconfigure(a),!this.autoLoad||a.isEmptyStore||a.loading||a.isLoaded()||a.load()},reconfigure:function(b,c){var j,g,a=this,f=a.store,e=a.headerCt,i=a.lockable,h=e?e.items.getRange():a.columns,d=a.getView();1===arguments.length&&Ext.isArray(b)&&(c=b,b=null),c=c&&Ext.Array.slice(c),a.reconfiguring=!0,b=b&&Ext.StoreManager.lookup(b),a.fireEvent("beforereconfigure",a,b,c,f,h),Ext.suspendLayouts(),i?a.reconfigureLockable(b,c):(j=d.blockRefresh,d.blockRefresh=!0,b&&b!==f&&(a.unbindStore(),a.bindStore(b)),c&&(delete a.scrollXPos,e.removeAll(),e.add(c)),d.blockRefresh=j,g=d.refreshCounter),Ext.resumeLayouts(!0),i?a.afterReconfigureLockable():d.refreshCounter===g&&d.refreshView(),a.fireEvent("reconfigure",a,b,c,f,h),delete a.reconfiguring},beforeDestroy:function(){var a=this,b=a.scrollTask;b&&(b.cancel(),a.scrollTask=null),Ext.destroy(a.focusEnterLeaveListeners),a.callParent()},onDestroy:function(){var a=this;a.lockable&&a.destroyLockable(),a.unbindStore(),a.callParent(),a.columns=a.storeRelayers=a.columnManager=a.visibleColumnManager=null},destroy:function(){var a=this;a.callParent(),a.destroyed&&(a.view=a.selModel=a.headerCt=null)},privates:{initFocusableElement:function(){},doEnsureVisible:function(a,c){if(this.lockable)return this.ensureLockedVisible(a,c);"number"==typeof a||a.isEntity||(a=this.store.getById(a));var g,h,k,j,m,l,i,e,n,b=this,d=b.getView(),f=d.getNode(a);c&&(g=c.callback,h=c.scope,k=c.animate,j=c.highlight,m=c.select,l=c.focus,e=c.column),b.deferredEnsureVisible&&b.deferredEnsureVisible.destroy(),d.componentLayoutCounter?("number"==typeof e&&(e=b.ownerGrid.getVisibleColumnManager().getColumns()[e]),f?(i=d.getScrollable(),e&&(n=Ext.fly(f).selectNode(e.getCellSelector())),i&&i.scrollIntoView(n||f,!!e,k,j),a.isEntity||(a=d.getRecord(f)),m&&d.getSelectionModel().select(a),l&&d.getNavigationModel().setPosition(a,0),Ext.callback(g,h||b,[!0,a,f])):d.bufferedRenderer?d.bufferedRenderer.scrollTo(a,{animate:k,highlight:j,select:m,focus:l,column:e,callback:function(d,c,a){Ext.callback(g,h||b,[!0,c,a])}}):Ext.callback(g,h||b,[!1,null])):b.deferredEnsureVisible=d.on({resize:b.doEnsureVisible,args:Ext.Array.slice(arguments),scope:b,single:!0,destroyable:!0})},getFocusEl:function(){return this.getView().getFocusEl()},setActionableMode:function(b,c){var a=this.ownerGrid;if(!a.destroying&&!1!==a.view.setActionableMode(b,c))return a.fireEvent("actionablemodechange",b),a[b?"addCls":"removeCls"](a.actionableModeCls),!0}}}),Ext.define("Ext.grid.ColumnLayout",{extend:Ext.layout.container.HBox,alias:"layout.gridcolumn",type:"gridcolumn",firstHeaderCls:Ext.baseCSSPrefix+"column-header-first",lastHeaderCls:Ext.baseCSSPrefix+"column-header-last",initLayout:function(){this.callParent(),void 0===this.scrollbarWidth&&(this.self.prototype.scrollbarWidth=Ext.getScrollbarSize().width)},beginLayout:function(d){var c,b,a=this,j=a.owner,e=a.firstHeaderCls,f=a.lastHeaderCls,h=[e,f],i=a.getVisibleItems(),g=i.length;for(a.callParent([d]),c=0;c<g;c++)b=i[c],1===g?b.addCls(h):0===c?(b.addCls(e),b.removeCls(f)):c===g-1?(b.removeCls(e),b.addCls(f)):b.removeCls(h);a.scrollbarWidth=0,j.isRootHeader&&a.determineScrollbarWidth(d),a.scrollbarWidth||(d.manageScrollbar=!1)},moveItemBefore:function(a,c){var b=a.ownerCt;return a!==c&&b&&b.remove(a,!1),this.callParent([a,c])},determineScrollbarWidth:function(g){var e=this.owner,a=e.grid,b=!1===e.reserveScrollbar,c=a.reserveScrollbar&&!b,d=!c&&!b&&a.view.scrollFlags.y;g.manageScrollbar=d,a.ownerGrid.collapsed||!c&&!d||delete this.scrollbarWidth},calculate:function(a){var f,c,j,n,e,d,h,b=this,m=b.owner.grid,i=a.viewContext,g=a.state,o=a.context;if(b.callParent([a]),m&&g.parallelDone){if(f=i.lockingPartnerContext,m.ownerGrid.forceFit&&!g.reflexed&&b.convertWidthsToFlexes(a))return b.cacheFlexes(a),b.done=!1,void a.invalidate({state:{reflexed:!0,scrollbarAdjustment:b.getScrollbarAdjustment(a)}});if(void 0===(c=g.columnsChanged)){for(c=!1,e=0,n=(j=a.target.getVisibleGridColumns()).length;e<n;e++)(d=o.getCmp(j[e])).lastBox&&d.props.width===d.lastBox.width||((c=c||[])[e]=d);g.columnsChanged=c,a.setProp("columnsChanged",c)}if(a.manageScrollbar&&b.getScrollbarAdjustment(a)){if(void 0===(h=i.getProp("viewOverflowY")))return void(b.done=!1);h||(f&&(f.invalidate(),f.headerContext.invalidate()),i.invalidate(),a.invalidate({state:{scrollbarAdjustment:0}}))}}},finishedLayout:function(a){this.callParent([a]),"rowgroup"===this.owner.ariaRole&&this.innerCt.dom.setAttribute("role","row"),a.props.columnsChanged=null},convertWidthsToFlexes:function(d){var e,g,c,a,b,f=0,h=this.sizeModels.calculated;for(g=(e=d.childItems).length,c=0;c<g;c++)b=(a=e[c]).target,f+=a.props.width,b.fixed||!1===b.resizable||(b.flex=d.childItems[c].flex=a.props.width,b.width=null,a.widthModel=h);return f!==d.props.width},getScrollbarAdjustment:function(b){var c=b.state,d=this.owner.grid,a=c.scrollbarAdjustment;return void 0===a&&(a=0,(d.reserveScrollbar||b.manageScrollbar&&!d.ownerGrid.layout.ownerContext.heightModel.shrinkWrap)&&(a=this.scrollbarWidth),c.scrollbarAdjustment=a),a},getContainerSize:function(a){var e,d,i,h,g,c,b,f,j=this;return j.owner.isRootHeader?((f=j.callParent([a])).gotWidth&&(f.width-=j.getScrollbarAdjustment(a)),f):(i=a.paddingContext.getPaddingInfo(),e=d=0,a.widthModel.shrinkWrap||(++d,(h="number"==typeof(c=a.getProp("innerWidth")))&&(++e,(c-=i.width)<0&&(c=0))),a.heightModel.shrinkWrap||(++d,(g="number"==typeof(b=a.getProp("innerHeight")))&&(++e,(b-=i.height)<0&&(b=0))),{width:c,height:b,needed:d,got:e,gotAll:e===d,gotWidth:h,gotHeight:g})},publishInnerCtSize:function(a){var d=this.owner,b=0;return null!=a.peek("contentWidth")&&d.isRootHeader&&(b=-a.state.scrollbarAdjustment),this.callParent([a,b])}}),Ext.define("Ext.grid.ColumnManager",{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(b,c,a){this.headerCt=c,a&&(this.secondHeaderCt=a),this.visibleOnly=!!b},getColumns:function(){return this.columns||this.cacheColumns(),this.columns},hasVariableRowHeight:function(){var b,a=this,c=a.getColumns(),d=c.length;if(null==a.variableRowHeight)for(a.variableRowHeight=!1,b=0;!a.variableRowHeight&&b<d;b++)a.variableRowHeight=!!c[b].variableRowHeight;return a.variableRowHeight},getHeaderIndex:function(a){return a.isGroupHeader&&(a=this.getHeaderColumns(a)[0]),Ext.Array.indexOf(this.getColumns(),a)},getHeaderAtIndex:function(b){return this.getColumns()[b]||null},getPreviousSibling:function(c){var a=this.getHeaderIndex(c),b=null;return 0<a&&(b=this.getColumns()[a-1]),b},getNextSibling:function(c){var b,a=this.getHeaderIndex(c);return-1!==a&&(b=this.getColumns()[a+1]),b||null},getFirst:function(){var a=this.getColumns();return 0<a.length?a[0]:null},getLast:function(){var a=this.getColumns(),b=a.length;return 0<b?a[b-1]:null},getHeaderByDataIndex:function(d){var a,b,c=this.getColumns(),e=c.length;for(a=0;a<e;++a)if((b=c[a]).dataIndex===d)return b;return null},getHeaderById:function(e){var a,b,c=this.getColumns(),d=c.length;for(a=0;a<d;++a)if((b=c[a]).getItemId()===e)return b;return null},getVisibleHeaderClosestToIndex:function(b){var a=this.getHeaderAtIndex(b);return a&&a.hidden&&(a=a.next(":not([hidden])")||a.prev(":not([hidden])")),a},cacheColumns:function(){var a=this.getHeaderColumns(this.headerCt),b=this.secondHeaderCt;b&&(a=a.concat(this.getHeaderColumns(b))),this.columns=a},getHeaderColumns:function(a){var b=this.visibleOnly?a.getVisibleGridColumns():a.getGridColumns();return Ext.Array.clone(b)},invalidate:function(){var a=this.rootColumns;this.columns=this.variableRowHeight=null,a&&a.invalidate()},destroy:function(){this.columns=this.rootColumns=null,this.callParent()}},function(){this.createAlias("indexOf","getHeaderIndex")}),Ext.define("Ext.grid.NavigationModel",{extend:Ext.view.NavigationModel,alias:"view.navigation.grid",focusCls:Ext.baseCSSPrefix+"grid-item-focused",getViewListeners:function(){var a=this;return{focusmove:{element:"el",fn:a.onFocusMove},containermousedown:a.onContainerMouseDown,cellmousedown:a.onCellMouseDown,cellclick:a.onCellClick,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemClick,scope:a}},initKeyNav:function(b){var a=this;a.keyNav||(a.keyNav=[],a.position=new Ext.grid.CellContext(b)),a.keyNav.push(new Ext.util.KeyNav({target:b,ignoreInputFields:!0,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:a.processViewEvent,up:a.onKeyUp,down:a.onKeyDown,right:a.onKeyRight,left:a.onKeyLeft,pageDown:a.onKeyPageDown,pageUp:a.onKeyPageUp,home:a.onKeyHome,end:a.onKeyEnd,space:a.onKeySpace,enter:a.onKeyEnter,esc:a.onKeyEsc,113:a.onKeyF2,tab:a.onKeyTab,A:{ctrl:!0,handler:a.onSelectAllKeyPress},scope:a}))},addKeyBindings:function(b){var a,c=this.keyNav.length;for(a=0;a<c;a++)this.keyNav[a].addBindings(b)},enable:function(){var a,b=this.keyNav.length;for(a=0;a<b;a++)this.keyNav[a].enable();this.disabled=!1},disable:function(){var a,b=this.keyNav.length;for(a=0;a<b;a++)this.keyNav[a].disable();this.disabled=!0},processViewEvent:function(c,e,f,d,a){var b=a.getKey();return c.actionableMode?(this.map.ignoreInputFields=!1,b===a.TAB||b===a.ESC||b===a.F2?a:void 0):(this.map.ignoreInputFields=!0,b===a.TAB?null:a)},onCellMouseDown:function(c,e,g,h,i,f,a){var d,b=Ext.Component.fromElement(a.target,e);c.actionableMode&&(a.getTarget(null,null,!0).isTabbable()||(d=Ext.ComponentManager.getActiveComponent())&&d.owns(a))||("touch"!==a.pointerType&&this.setPosition(a.position,null,a),b&&b.isFocusable&&b.isFocusable()&&(c.setActionableMode(!0,a.position),b.focus()))},onCellClick:function(d,f,h,i,j,g,a){var b=this,c=Ext.Component.fromElement(a.target,f),e=c&&c.isFocusable&&c.isFocusable();d.actionableMode?(a.position.isEqual(d.actionPosition)||e||b.setPosition(a.position,null,a),b.fireEvent("navigate",{view:d,navigationModel:b,keyEvent:a,previousPosition:b.previousPosition,previousRecordIndex:b.previousRecordIndex,previousRecord:b.previousRecord,previousItem:b.previousItem,previousCell:b.previousCell,previousColumnIndex:b.previousColumnIndex,previousColumn:b.previousColumn,position:a.position,recordIndex:a.position.rowIdx,record:a.position.record,item:a.item,cell:a.position.cellElement,columnIndex:a.position.colIdx,column:a.position.column})):b.position.isEqual(a.position)||e?b.fireNavigateEvent(a):b.setPosition(a.position,null,a)},onFocusMove:function(f){var e,d,c,b=f.target,a=Ext.Component.fromElement(f.delegatedTarget,null,"tableview");b=f.target;if(a&&Ext.fly(b).is(a.cellSelector)){if(a.actionableModeTabbing)return;a.ownerGrid.setActionableMode(!1),e=a.getRecord(b),d=a.getHeaderByCell(b),e&&d&&((c=new Ext.grid.CellContext(a).setPosition(e,d)).isEqual(this.position)||this.setPosition(c))}},onItemMouseDown:function(f,c,e,d,a){a.position.cellElement||"touch"===a.pointerType||(this.getClosestCell(a),this.setPosition(a.position,null,a))},onItemClick:function(e,b,d,c,a){a.position.cellElement||(this.getClosestCell(a),"touch"===a.pointerType&&this.setPosition(a.position,null,a),this.fireNavigateEvent(a))},getClosestCell:function(f){var e,c,g,b,d,a=f.position;if(!a.cellElement)for(e=f.getX(),g=(c=a.view.getVisibleColumnManager().getColumns()).length,b=0;b<g;b++)if(c[b],e>=(d=c[b].getBox()).left&&e<d.right)return a.setColumn(c[b]),a.rowElement=a.getRow(!0),void(a.cellElement=a.getCell(!0))},deferSetPosition:function(g,e,d,f,c,b){var a=this.view.getFocusTask();return a.delay(g,this.setPosition,this,[e,d,f,c,b]),a},setPosition:function(b,g,l,q,o){var c,n,m,h,j,e,f,d,i,a=this,k=null==b&&null==g,p=null==a.record&&null==a.recordIndex&&null==a.item;if((c=b&&b.isCellContext?b.view:l&&l.view?l.view:a.lastFocused?a.lastFocused.view:a.view).getFocusTask().cancel(),!(c.destroyed||!c.refreshCounter||!c.ownerCt||k&&p)&&c.all.getCount()){if(m=c.getSelectionModel(),h=c.dataSource,j=c.getVisibleColumnManager(),b&&b.isCellContext)d=b.record,e=b.rowIdx,f=b.colIdx,i=b.column,-1===h.indexOf(d)&&(n=c.getScrollable(),a.recordIndex=-1,n.getPosition().y>=n.getMaxPosition().y-c.all.last(!0).offsetHeight&&b.rowIdx--,e=Math.min(b.rowIdx,h.getCount()-1),f=Math.min(f,j.getColumns().length),d=h.getAt(e),i=j.getColumns()[f]);else{if(k)d=e=null;else if(null==g&&(g=a.lastFocused?a.lastFocused.column:0),"number"==typeof b)e=Math.max(Math.min(b,h.getCount()-1),0),d=h.getAt(b);else if(b.isEntity)d=b,e=h.indexOf(d);else if(b.tagName)d=c.getRecord(b),-1===(e=h.indexOf(d))&&(d=null);else{if(p)return;k=!0,d=e=null}d?(-1===e&&(a.recordIndex=-1,d=h.getAt(0),e=0,g=null),null==g?(i=a.column)||(f=0,i=j.getColumns()[0]):f="number"==typeof g?(i=j.getColumns()[g],g):(i=g,j.indexOf(g))):(k=!0,i=f=null)}if(e===a.recordIndex&&f===a.columnIndex&&c===a.position.view)return a.focusPosition(a.position);a.cell&&a.cell.removeCls(a.focusCls),a.previousRecordIndex=a.recordIndex,a.previousRecord=a.record,a.previousItem=a.item,a.previousCell=a.cell,a.previousColumn=a.column,a.previousColumnIndex=a.columnIndex,a.previousPosition=a.position.clone(),a.selectionStart=m.selectionStart,a.position.setAll(c,a.recordIndex=e,a.columnIndex=f,a.record=d,a.column=i),k?a.item=a.cell=null:a.focusPosition(a.position,o),q||(m.fireEvent("focuschange",m,a.previousRecord,a.record),c.fireEvent("rowfocus",a.record,a.item,a.recordIndex),c.fireEvent("cellfocus",a.record,a.cell,a.position)),l&&!o&&a.cell!==a.previousCell&&a.fireNavigateEvent(l)}},focusPosition:function(b){var c,d,a=this;a.item=a.cell=null,b&&b.record&&b.column&&(c=b.view,(d=b.rowElement?a.item=b.rowElement:c.getRowByRecord(b.record))?(a.cell=b.cellElement||Ext.fly(d).down(b.column.getCellSelector(),!0),a.cell?(a.cell=new Ext.dom.Fly(a.cell),c.lastFocused=a.lastFocused=a.position.clone(),a.focusItem(a.cell),c.focusEl=a.cell):(a.position.setAll(),a.record=a.column=a.recordIndex=a.columnIndex=null)):(d=c.dataSource.indexOf(b.record),a.position.setAll(),a.record=a.column=a.recordIndex=a.columnIndex=null,-1!==d&&c.bufferedRenderer&&(a.lastKeyEvent=null,c.bufferedRenderer.scrollTo(d,!1,a.afterBufferedScrollTo,a))))},focusItem:function(a){a.addCls(this.focusCls),a.focus()},getCell:function(){return this.cell},getPosition:function(f){var b,e,d,c=this,a=c.position;if(a.record&&a.column){if(f)return a;if(-1===(b=(d=(e=a.view).dataSource).indexOf(a.record))&&(b=a.rowIdx,(a.record=d.getAt(b))||(b=-1)),-1!==b&&-1!==e.getVisibleColumnManager().indexOf(a.column))return a;a.setAll(),c.record=c.column=c.recordIndex=c.columnIndex=null}return null},getLastFocused:function(){var b,a=this.lastFocused;if(a&&a.record&&a.column&&-1!==(b=a.view).dataSource.indexOf(a.record)&&-1!==b.getVisibleColumnManager().indexOf(a.column))return a},onKeyTab:function(a){var c,h,e=!a.shiftKey,d=a.position.clone(),g=d.view,f=a.position.cellElement,b=Ext.fly(f).findTabbableElements(),i=g.ownerGrid.actionables,j=i.length;for(a.preventDefault(),c=b[Ext.Array.indexOf(b,a.target)+(e?1:-1)];!c&&(f=f[e?"nextSibling":"previousSibling"]);){for(d.setColumn(g.getHeaderByCell(f)),h=0;h<j;h++)i[h].activateCell(d);(b=Ext.fly(f).findTabbableElements()).length&&(c=b[e?0:b.length-1])}if(c)return this.actionPosition=d.view.actionPosition=d,void Ext.fly(c).focus();Ext.isIE&&g.el.focus(),g.onRowExit(a.item,a.item[e?"nextSibling":"previousSibling"],e)},onKeyUp:function(b){var c=b.view.walkRecs(b.record,-1),a=this.getPosition();c&&(a.setRow(c),a.getCell(!0)||a.navigate(-1),this.setPosition(a,null,b))},onKeyDown:function(a){var c=a.record.isExpandingOrCollapsing?null:a.view.walkRecs(a.record,1),b=this.getPosition();c&&(b.setRow(c),b.getCell(!0)||b.navigate(-1),this.setPosition(b,null,a))},onKeyRight:function(b){var a=this.move("right",b);a&&this.setPosition(a,null,b)},onKeyLeft:function(b){var a=this.move("left",b);a&&this.setPosition(a,null,b)},onKeyEnter:function(a){var b=["cellclick",a.view,a.position.cellElement,a.position.colIdx,a.record,a.position.rowElement,a.recordIndex,a],c=a.position.getCell();c&&(c.query('[tabIndex="-1"]').length||(a.stopEvent(),a.view.fireEvent.apply(a.view,b),b[0]="celldblclick",a.view.fireEvent.apply(a.view,b)),this.view.actionableMode||this.view.ownerGrid.setActionableMode(!0,this.getPosition()))},onKeyF2:function(c){var b=this.view.ownerGrid,a=b.actionableMode;b.setActionableMode(!a,a?null:this.getPosition())},onKeyEsc:function(a){this.view.ownerGrid.setActionableMode(!1)},move:function(b,d){var c=this,a=c.getPosition();if(a&&a.record)return a.view.walkCells(a,b,!d.shiftKey||"right"!==b&&"left"!==b?null:c.vetoRowChange,c)},vetoRowChange:function(a){return this.getPosition().record===a.record},onKeyPageDown:function(a){var f,e,b=this,c=a.view,d=b.getRowsVisible();d&&(c.bufferedRenderer?(f=Math.min(a.recordIndex+d,c.dataSource.getCount()-1),b.lastKeyEvent=a,c.bufferedRenderer.scrollTo(f,!1,b.afterBufferedScrollTo,b)):(e=c.walkRecs(a.record,d),b.setPosition(e,null,a)))},onKeyPageUp:function(a){var f,e,b=this,d=a.view,c=b.getRowsVisible();c&&(d.bufferedRenderer?(f=Math.max(a.recordIndex-c,0),b.lastKeyEvent=a,d.bufferedRenderer.scrollTo(f,!1,b.afterBufferedScrollTo,b)):(e=d.walkRecs(a.record,-c),b.setPosition(e,null,a)))},onKeyHome:function(a){var b=this,c=a.view;a.altKey?c.bufferedRenderer?(b.lastKeyEvent=a,c.bufferedRenderer.scrollTo(0,!1,b.afterBufferedScrollTo,b)):b.setPosition(c.walkRecs(a.record,-c.dataSource.indexOf(a.record)),null,a):b.setPosition(a.record,0,a)},afterBufferedScrollTo:function(b,a){this.setPosition(a,null,this.lastKeyEvent,null,!this.lastKeyEvent)},onKeyEnd:function(a){var c=this,b=a.view;a.altKey?b.bufferedRenderer?(c.lastKeyEvent=a,b.bufferedRenderer.scrollTo(b.store.getCount()-1,!1,c.afterBufferedScrollTo,c)):c.setPosition(b.walkRecs(a.record,b.dataSource.getCount()-1-b.dataSource.indexOf(a.record)),null,a):c.setPosition(a.record,a.view.getVisibleColumnManager().getColumns().length-1,a)},getRowsVisible:function(){var c,a,b=!1,e=this.view,d=e.all.first();return d&&(c=d.getHeight(),a=e.el.getHeight(),b=Math.floor(a/c)),b},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{view:a.position.view,navigationModel:a,keyEvent:b||new Ext.event.Event({}),previousPosition:a.previousPosition,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,previousCell:a.previousCell,previousColumnIndex:a.previousColumnIndex,previousColumn:a.previousColumn,position:a.position,recordIndex:a.recordIndex,record:a.record,selectionStart:a.selectionStart,item:a.item,cell:a.cell,columnIndex:a.columnIndex,column:a.column})}}),Ext.define("Ext.view.TableLayout",{extend:Ext.layout.component.Auto,alias:"layout.tableview",type:"tableview",beginLayout:function(a){var b=this,e=b.owner,f=e.ownerGrid,c=e.lockingPartner,d=a.context;a.doSyncRowHeights=c&&c.grid.isVisible()&&f.syncRowHeight,b.columnFlusherId||(b.columnFlusherId=b.id+"-columns",b.rowHeightFlusherId=b.id+"-rows"),b.owner.bufferedRenderer&&b.owner.bufferedRenderer.beforeTableLayout(a),b.callParent([a]),a.doSyncRowHeights&&(a.lockingPartnerContext||((a.lockingPartnerContext=d.getCmp(c)).lockingPartnerContext=a),a.rowHeightSynchronizer=b.owner.syncRowHeightBegin()),(a.headerContext=d.getCmp(b.headerCt)).viewContext=a},beginLayoutCycle:function(a,b){this.callParent([a,b]),a.syncRowHeights&&(a.target.syncRowHeightClear(a.rowHeightSynchronizer),a.syncRowHeights=!1)},calculate:function(a){var h,l,d,e,j,i,b=this,o=a.context,p=a.lockingPartnerContext,q=a.headerContext,g=a.ownerCtContext,k=b.owner,f=q.getProp("columnsChanged"),c=a.state,n=k.body.dom;if(!(k.all.getCount()||n&&k.body.child("table")))return a.setProp("viewOverflowY",!1),void b.callParent([a]);if(void 0!==f)if(!f||((h=c.columnFlusher)||o.queueFlush(c.columnFlusher=h={ownerContext:a,columnsChanged:f,layout:b,id:b.columnFlusherId,flush:b.flushColumnWidths}),h.flushed)){if(a.doSyncRowHeights){if(!(e=c.rowHeightFlusher)){if((d=c.rowHeights)||(c.rowHeights=d=a.rowHeightSynchronizer,b.owner.syncRowHeightMeasure(d),a.setProp("rowHeights",d)),!(l=p.getProp("rowHeights")))return void(b.done=!1);o.queueFlush(c.rowHeightFlusher=e={ownerContext:a,synchronizer:d,otherSynchronizer:l,layout:b,id:b.rowHeightFlusherId,flush:b.flushRowHeights})}if(!e.flushed)return void(b.done=!1)}if(b.callParent([a]),!a.heightModel.shrinkWrap){if(i=!1,!g.heightModel.shrinkWrap){if(!(j=g.target.layout.getContainerSize(g)).gotHeight)return void(b.done=!1);i=n.offsetHeight>j.height}a.setProp("viewOverflowY",i)}}else b.done=!1;else b.done=!1},measureContentHeight:function(e){var d=this.owner,b=d.body.dom,c=d.emptyEl,a=0;return c&&(a+=c.offsetHeight),b&&(a+=b.offsetHeight),e.headerContext.state.boxPlan.tooNarrow&&(a+=Ext.getScrollbarSize().height),a},flushColumnWidths:function(){var b,c,e,f,a=this,i=a.layout,d=a.ownerContext,g=a.columnsChanged,h=d.target,j=g.length;if(d.state.columnFlusher===a){for(c=0;c<j;c++)(b=g[c])&&(e=b.props.width,h.body.select(h.getColumnSizerSelector(b.target)).setWidth(e),(f=b.lastBox)&&(f.width=e));a.flushed=!0,i.pending||d.context.queueLayout(i)}},flushRowHeights:function(){var a=this,c=a.layout,b=a.ownerContext;b.state.rowHeightFlusher===a&&(b.target.syncRowHeightFinish(a.synchronizer,a.otherSynchronizer),a.flushed=!0,b.syncRowHeights=!0,c.pending||b.context.queueLayout(c))},finishedLayout:function(b){var a=this,c=Ext.fly(a.owner.getNodeContainer());a.callParent([b]),c&&c.setWidth(b.headerContext.props.contentWidth),a.owner.bufferedRenderer&&a.owner.bufferedRenderer.afterTableLayout(b)}}),Ext.define("Ext.grid.locking.RowSynchronizer",{constructor:function(c,d){var a,b=this;for(b.view=c,b.rowEl=d,b.els={},b.add("data",c.rowSelector),a=c.rowTpl;a;a=a.nextTpl)a.beginRowSync&&a.beginRowSync(b)},add:function(c,b){var a=Ext.fly(this.rowEl).down(b,!0);a&&(this.els[c]={el:a})},finish:function(i){var e,b,c,a,d=this,f=d.els,j=i.els,h=0,g=0;for(c in f)0<(b=(a=(e=j[c])?e.height:0)-f[c].height)?(h+=b,Ext.fly(f[c].el).setHeight(a)):g-=b;a=i.rowHeight+g,Ext.isIE9&&d.view.ownerGrid.rowLines&&a--,d.rowHeight+h<a&&Ext.fly(d.rowEl).setHeight(a)},measure:function(){var a,c=this,b=c.els;for(a in c.rowHeight=c.rowEl.offsetHeight,b)b[a].height=b[a].el.offsetHeight},reset:function(){var a,b=this.els;for(a in this.rowEl.style.height="",b)b[a].el.style.height=""}}),Ext.define("Ext.view.NodeCache",{statics:{range:document.createRange&&document.createRange()},constructor:function(a){this.view=a,this.clear(),this.el=new Ext.dom.Fly},destroy:function(){var a=this;a.destroyed||(a.el.destroy(),a.el=a.view=null,a.destroyed=!0),a.callParent()},clear:function(e){var d,a=this,b=a.elements,c=a.statics().range;if(a.count&&e)if(c)c.setStartBefore(b[a.startIndex]),c.setEndAfter(b[a.endIndex]),c.deleteContents();else for(d in b)Ext.removeNode(b[d]);a.elements={},a.count=a.startIndex=0,a.endIndex=-1},fill:function(f,a,c){c=c||0;var b,d=this,g=d.elements={},e=f.length-c;for(a=a||0,b=0;b<e;b++)g[a+b]=f[b+c];return d.startIndex=a,d.endIndex=a+e-1,d.count=e,this},insert:function(c,f){var a,b=this,e=b.elements,d=f.length;if(b.count){if(c<b.count)for(a=b.endIndex+d;c+d<=a;a--)e[a]=e[a-d],e[a].setAttribute("data-recordIndex",a);b.endIndex=b.endIndex+d}else b.startIndex=c,b.endIndex=c+d-1;for(a=0;a<d;a++,c++)e[c]=f[a],e[c].setAttribute("data-recordIndex",c);b.count+=d},invoke:function(d,e){var c,b,a=this;for(d=Ext.dom.Element.prototype[d],b=a.startIndex;b<=a.endIndex;b++)(c=a.item(b))&&d.apply(c,e);return a},item:function(a,c){var b=null;return this.elements[a]&&(b=c?this.elements[a]:this.el.attach(this.elements[a])),b},first:function(a){return this.item(this.startIndex,a)},last:function(a){return this.item(this.endIndex,a)},moveBlock:function(c){var f,e,a,b=this,d=b.elements;if(c){for(e=c<0?(a=b.startIndex-1,f=b.endIndex,1):(a=b.endIndex+1,f=b.startIndex,-1),b.startIndex+=c,b.endIndex+=c;(d[(a+=e)+c]=d[a]).setAttribute("data-recordIndex",a+c),(a<b.startIndex||a>b.endIndex)&&delete d[a],a!==f;);delete d[a]}},getCount:function(){return this.count},slice:function(e,a){var b,d=this.elements,c=[];for(a=a?Math.min(this.endIndex,a-1):this.endIndex,b=e||this.startIndex;b<=a;b++)c.push(d[b]);return c},replaceElement:function(a,b,d){var e=this.elements,c="number"==typeof a?a:this.indexOf(a);return-1<c&&(b=Ext.getDom(b),d&&((a=e[c]).parentNode.insertBefore(b,a),Ext.removeNode(a),b.setAttribute("data-recordIndex",c)),this.elements[c]=b),this},indexOf:function(b){var a,c=this.elements;for(b=Ext.getDom(b),a=this.startIndex;a<=this.endIndex;a++)if(c[a]===b)return a;return-1},removeRange:function(g,c,j){var d,b,h,f,a=this,e=a.elements,i=[];for(c=null==c?a.endIndex+1:Math.min(a.endIndex+1,c+1),null==g&&(g=a.startIndex),h=c-g,b=g,f=c;b<=a.endIndex;b++,f++)d=e[b],b<c&&(i.push(d),j&&Ext.removeNode(d)),f<=a.endIndex?(d=e[b]=e[f]).setAttribute("data-recordIndex",b):delete e[b];return a.count-=h,a.endIndex-=h,i},removeElement:function(a,k){var i,f,e,d,g,b=this,h=b.elements,c=0;if(Ext.isArray(a)){for(i=a,a=[],e=i.length,c=0;c<e;c++)"number"!=typeof(f=i[c])&&(f=b.indexOf(f)),f>=b.startIndex&&f<=b.endIndex&&(a[a.length]=f);Ext.Array.sort(a),e=a.length}else{if(a<b.startIndex||a>b.endIndex)return;e=1,a=[a]}for(d=g=a[0],c=0;d<=b.endIndex;d++,g++)c<e&&d===a[c]&&(g++,c++,k&&Ext.removeNode(h[d])),g<=b.endIndex&&g>=b.startIndex?(h[d]=h[g]).setAttribute("data-recordIndex",d):delete h[d];b.endIndex-=e,b.count-=e},scroll:function(i,t,m){var a,d,o,j,l,n,f,g,b=this,e=b.view,p=e.store,c=b.elements,r=i.length,q=e.getNodeContainer(),k=e.hasListeners.itemremove,s=e.hasListeners.itemadd,h=b.statics().range;if(i.length){if(-1===t){if(m){if(k&&(f=[],g=[]),n=b.endIndex-m+1,h)for(h.setStartBefore(c[n]),h.setEndAfter(c[b.endIndex]),h.deleteContents(),a=n;a<=b.endIndex;a++)d=c[a],delete c[a],k&&(f.push(p.getByInternalId(d.getAttribute("data-recordId"))),g.push(d));else for(a=n;a<=b.endIndex;a++)d=c[a],delete c[a],Ext.removeNode(d),k&&(f.push(p.getByInternalId(d.getAttribute("data-recordId"))),g.push(d));e.fireEvent("itemremove",f,n,g,e),b.endIndex-=m}if(i.length){for(j=(l=e.bufferRender(i,b.startIndex-=r)).children,a=0;a<r;a++)c[b.startIndex+a]=j[a];q.insertBefore(l.fragment,q.firstChild),s&&e.fireEvent("itemadd",i,b.startIndex,j)}}else{if(m){if(k&&(f=[],g=[]),o=b.startIndex+m,h)for(h.setStartBefore(c[b.startIndex]),h.setEndAfter(c[o-1]),h.deleteContents(),a=b.startIndex;a<o;a++)d=c[a],delete c[a],k&&(f.push(p.getByInternalId(d.getAttribute("data-recordId"))),g.push(d));else for(a=b.startIndex;a<o;a++)d=c[a],delete c[a],Ext.removeNode(d),k&&(f.push(p.getByInternalId(d.getAttribute("data-recordId"))),g.push(d));e.fireEvent("itemremove",f,b.startIndex,g,e),b.startIndex=o}for(j=(l=e.bufferRender(i,b.endIndex+1)).children,a=0;a<r;a++)c[b.endIndex+=1]=j[a];q.appendChild(l.fragment),s&&e.fireEvent("itemadd",i,b.endIndex+1,j)}return b.count=b.endIndex-b.startIndex+1,j}},sumHeights:function(){var a,b=0,c=this.elements;for(a=this.startIndex;a<=this.endIndex;a++)b+=c[a].offsetHeight;return b}},function(){Ext.dom.CompositeElementLite.importElementMethods.call(this)}),Ext.define("Ext.view.Table",{extend:Ext.view.View,xtype:["tableview","gridview"],alternateClassName:"Ext.grid.View",isTableView:!0,config:{selectionModel:{type:"rowmodel"}},inheritableStatics:{normalSideEvents:["deselect","select","beforedeselect","beforeselect","selectionchange"],events:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","cellkeydown","beforecellkeydown","cellmouseup","beforecellmouseup","cellmousedown","beforecellmousedown","cellcontextmenu","beforecellcontextmenu","celldblclick","beforecelldblclick","cellclick","beforecellclick","refresh","itemremove","itemadd","beforeitemupdate","itemupdate","viewready","beforerefresh","unhighlightitem","highlightitem","focuschange","containerkeydown","containercontextmenu","containerdblclick","containerclick","containermouseout","containermouseover","containermouseup","containermousedown","beforecontainerkeydown","beforecontainercontextmenu","beforecontainerdblclick","beforecontainerclick","beforecontainermouseout","beforecontainermouseover","beforecontainermouseup","beforecontainermousedown","itemkeydown","itemcontextmenu","itemdblclick","itemclick","itemmouseleave","itemmouseenter","itemmouseup","itemmousedown","rowclick","rowcontextmenu","rowdblclick","rowkeydown","rowmouseup","rowmousedown","rowkeydown","beforeitemkeydown","beforeitemcontextmenu","beforeitemdblclick","beforeitemclick","beforeitemmouseleave","beforeitemmouseenter","beforeitemmouseup","beforeitemmousedown","statesave","beforestatesave","staterestore","beforestaterestore","uievent","groupcollapse","groupexpand","scroll"]},scrollable:!0,componentLayout:"tableview",baseCls:Ext.baseCSSPrefix+"grid-view",unselectableCls:Ext.baseCSSPrefix+"unselectable",firstCls:Ext.baseCSSPrefix+"grid-cell-first",lastCls:Ext.baseCSSPrefix+"grid-cell-last",itemCls:Ext.baseCSSPrefix+"grid-item",selectedItemCls:Ext.baseCSSPrefix+"grid-item-selected",selectedCellCls:Ext.baseCSSPrefix+"grid-cell-selected",focusedItemCls:Ext.baseCSSPrefix+"grid-item-focused",overItemCls:Ext.baseCSSPrefix+"grid-item-over",altRowCls:Ext.baseCSSPrefix+"grid-item-alt",dirtyCls:Ext.baseCSSPrefix+"grid-dirty-cell",rowClsRe:new RegExp("(?:^|\\s*)"+Ext.baseCSSPrefix+"grid-item-alt(?:\\s+|$)","g"),cellRe:new RegExp(Ext.baseCSSPrefix+"grid-cell-([^\\s]+)(?:\\s|$)",""),positionBody:!0,positionCells:!1,stripeOnUpdate:null,actionableMode:!1,trackOver:!0,getRowClass:null,stripeRows:!0,markDirty:!0,ariaRole:"rowgroup",rowAriaRole:"row",cellAriaRole:"gridcell",tpl:["{%","view = values.view;","if (!(columns = values.columns)) {","columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();","}","values.fullWidth = 0;","for (i = 0, len = columns.length; i < len; i++) {","column = columns[i];","values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);","}","tableCls=values.tableCls=[];","%}",'<div class="'+Ext.baseCSSPrefix+'grid-item-container" role="presentation" style="width:{fullWidth}px">',"{[view.renderTHead(values, out, parent)]}","{%","view.renderRows(values.rows, values.columns, values.viewStartIndex, out);","%}","{[view.renderTFoot(values, out, parent)]}","</div>","{% ","view = columns = column = null;","%}",{definitions:"var view, tableCls, columns, i, len, column;",priority:0}],outerRowTpl:['<table id="{rowId}" role="presentation" ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]}" cellpadding="0" cellspacing="0" style="{itemStyle};width:0">',"{%","this.nextTpl.applyOut(values, out, parent)","%}","</table>",{priority:9999}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " '+Ext.baseCSSPrefix+'grid-row";',"%}",'<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]}"',' role="{rowRole}" {rowAttr:attributes}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],cellTpl:['<td class="{tdCls}" role="{cellRole}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>"',' tabindex="-1" data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" ',"{cellInnerAttr:attributes}>{value}</div>","</td>",{priority:0}],refreshSelmodelOnRefresh:!1,tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:[Ext.baseCSSPrefix+"grid-cell "+Ext.baseCSSPrefix+"grid-td"]},constructor:function(a){a.grid.isTree&&(a.baseCls=Ext.baseCSSPrefix+"tree-view"),this.callParent([a])},hasVariableRowHeight:function(b){var a=this;return a.variableRowHeight||a.store.isGrouped()||a.getVisibleColumnManager().hasVariableRowHeight()||!b&&a.lockingPartner&&a.lockingPartner.hasVariableRowHeight(!0)},initComponent:function(){var a=this;a.columnLines&&a.addCls(a.grid.colLinesCls),a.rowLines&&a.addCls(a.grid.rowLinesCls),a.body=new Ext.dom.Fly,a.body.id=a.id+"gridBody",a.trackOver||(a.overItemCls=null),((a.headerCt.view=a).grid.view=a).initFeatures(a.grid),a.itemSelector=a.getItemSelector(),a.all=new Ext.view.NodeCache(a),a.callParent()},applySelectionModel:function(a,f){var b=this.ownerGrid,e=a.type,c=this.disableSelection||b.disableSelection;return f||a&&a.isSelectionModel||(a=b.selModel||a),a&&(a.isSelectionModel?(a.allowDeselect=b.allowDeselect||"SINGLE"!==a.selectionMode,a.locked=c):("string"==typeof a?a={type:a}:a.type=b.selType||a.selType||a.type||e,a.mode||(b.simpleSelect?a.mode="SIMPLE":b.multiSelect&&(a.mode="MULTI")),a=Ext.Factory.selection(Ext.apply({allowDeselect:b.allowDeselect,locked:c},a)))),a},updateSelectionModel:function(b,c){var a=this;c&&(c.un({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection}),Ext.destroy(a.selModelRelayer)),a.selModelRelayer=a.relayEvents(b,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]),b.on({scope:a,lastselectedchanged:a.updateBindSelection,selectionchange:a.updateBindSelection}),a.selModel=b},getVisibleColumnManager:function(){return this.ownerCt.getVisibleColumnManager()},getColumnManager:function(){return this.ownerCt.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},moveColumn:function(c,h,j){var f,i,q,n,d,a,o,b=this,m=1<j,e=m&&document.createRange?document.createRange():null,g=m&&!e?document.createDocumentFragment():null,l=h,p=b.getGridColumns().length,k=p-1,r=(b.firstCls||b.lastCls)&&(0===h||h===p||0===c||c===k);if(b.rendered&&h!==c){for(f=0,n=(q=b.el.query(b.rowSelector)).length;f<n;f++){if(a=(d=q[f]).childNodes,r){if(1===a.length){Ext.fly(a[0]).addCls(b.firstCls),Ext.fly(a[0]).addCls(b.lastCls);continue}0===c?(Ext.fly(a[0]).removeCls(b.firstCls),Ext.fly(a[1]).addCls(b.firstCls)):c===k&&(Ext.fly(a[k]).removeCls(b.lastCls),Ext.fly(a[k-1]).addCls(b.lastCls)),0===h?(Ext.fly(a[0]).removeCls(b.firstCls),Ext.fly(a[c]).addCls(b.firstCls)):h===p&&(Ext.fly(a[k]).removeCls(b.lastCls),Ext.fly(a[c]).addCls(b.lastCls))}if(m){if(e)e.setStartBefore(a[c]),e.setEndAfter(a[c+j-1]),g=e.extractContents();else for(i=0;i<j;i++)g.appendChild(a[c]);d.insertBefore(g,a[l]||null)}else d.insertBefore(a[c],a[l]||null)}for(f=0,n=(o=b.el.query("colgroup")).length;f<n;f++)if(d=o[f],m){if(e)e.setStartBefore(d.childNodes[c]),e.setEndAfter(d.childNodes[c+j-1]),g=e.extractContents();else for(i=0;i<j;i++)g.appendChild(d.childNodes[c]);d.insertBefore(g,d.childNodes[l]||null)}else d.insertBefore(d.childNodes[c],d.childNodes[l]||null)}},scrollToTop:Ext.emptyFn,addElListener:function(a,c,b){this.mon(this,a,c,b,{element:"el"})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(a){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(a)},getCell:function(b,a){var c=this.getRow(b);return"number"==typeof a&&(a=this.getHeaderAtIndex(a)),Ext.fly(c).down(a.getCellSelector())},getFeature:function(b){var a=this.featuresMC;if(a)return a.get(b)},findFeature:function(a){if(this.features)return Ext.Array.findBy(this.features,function(b){if(b.ftype===a)return!0})},initFeatures:function(e){var d,c,b,f,a=this;for(a.tpl=Ext.XTemplate.getTpl(this,"tpl"),a.rowTpl=Ext.XTemplate.getTpl(this,"rowTpl"),a.addRowTpl(Ext.XTemplate.getTpl(this,"outerRowTpl")),a.cellTpl=Ext.XTemplate.getTpl(this,"cellTpl"),a.featuresMC=new Ext.util.MixedCollection,f=(c=a.features=a.constructFeatures())?c.length:0,d=0;d<f;d++)(b=c[d]).view=a,b.grid=e,a.featuresMC.add(b),b.init(e)},renderTHead:function(c,f,e){var d,a,b=c.view.headerFns;if(b)for(a=0,d=b.length;a<d;++a)b[a].call(this,c,f,e)},addHeaderFn:function(b){var a=this.headerFns;(a=a||(this.headerFns=[])).push(b)},renderTFoot:function(c,f,e){var d,a,b=c.view.footerFns;if(b)for(a=0,d=b.length;a<d;++a)b[a].call(this,c,f,e)},addFooterFn:function(b){var a=this.footerFns;(a=a||(this.footerFns=[])).push(b)},addTpl:function(a){return this.insertTpl("tpl",a)},addRowTpl:function(a){return this.insertTpl("rowTpl",a)},addCellTpl:function(a){return this.insertTpl("cellTpl",a)},insertTpl:function(d,a){var b,c;for(a=a.isTemplate?Ext.Object.chain(a):new Ext.XTemplate("{%this.nextTpl.applyOut(values, out, parent);%}",a),b=this[d];a.priority<b.priority;b=b.nextTpl)c=b;return c?c.nextTpl=a:this[d]=a,a.nextTpl=b,a},tplApplyOut:function(b,c,a){this.before&&!1===this.before(b,c,a)||(this.nextTpl.applyOut(b,c,a),this.after&&this.after(b,c,a))},constructFeatures:function(){var a,d,e,c=this.features,b=0;if(c)for(d=[],e=c.length;b<e;b++)(a=c[b]).isFeature||(a=Ext.create("feature."+a.ftype,a)),d[b]=a;return d},beforeRender:function(){this.callParent(),this.enableTextSelection||this.protoEl.unselectable()},getElConfig:function(){var a=this.callParent();return delete a["aria-hidden"],delete a["aria-disabled"],a},onBindStore:function(c){var b=this,a=b.bufferedRenderer;a&&a.store!==c&&a.bindStore(c),b.all&&b.all.getCount()&&(a&&a.setBodyTop(0),b.clearViewEl()),b.callParent(arguments)},getStoreListeners:function(){var a=this.callParent();return this.bufferedRenderer&&delete a.clear,a.beforepageremove=this.beforePageRemove,a},beforePageRemove:function(c,a){var d=this.all,b=c.getPageSize();if(d.startIndex>=(a-1)*b&&d.endIndex<=a*b-1)return c.get(a),!1},onViewScroll:function(a,b,c){this.ignoreScroll||this.callParent([a,b,c])},createRowElement:function(e,f,d){var a=this,c=a.renderBuffer,b=a.collectData([e],f);return b.columns=d,a.tpl.overwrite(c,b),a.cleanupData(),Ext.fly(c).down(a.getNodeContainerSelector(),!0).firstChild},bufferRender:function(e,f){var b,c=this,a=c.renderBuffer,d=document.createRange?document.createRange():null;if(c.tpl.overwrite(a,c.collectData(e,f)),c.cleanupData(),Ext.fly(a).saveTabbableState({skipSelf:!0,includeHidden:!0}),a=Ext.fly(a).down(c.getNodeContainerSelector(),!0),d)d.selectNodeContents(a),b=d.extractContents();else for(b=document.createDocumentFragment();a.firstChild;)b.appendChild(a.firstChild);return{fragment:b,children:Ext.Array.toArray(b.childNodes)}},collectData:function(c,b){var a=this;return((a.rowValues.view=a).tableValues.view=a).tableValues.rows=c,a.tableValues.columns=null,a.tableValues.viewStartIndex=b,a.tableValues.touchScroll=a.touchScroll,a.tableValues.tableStyle="width:"+a.headerCt.getTableWidth()+"px",a.tableValues},cleanupData:function(){var a=this.tableValues;a.view=a.columns=a.rows=this.rowValues.view=null},refreshSize:function(c){var a=this,b=a.getBodySelector();b&&a.body.attach(a.el.down(b,!0)),a.hasLoadingHeight||(Ext.suspendLayouts(),a.callParent(arguments),(c||a.hasVariableRowHeight()&&a.dataSource.getCount())&&a.grid.updateLayout(),Ext.resumeLayouts(!0))},clearViewEl:function(g){var d,c,a=this,b=a.all,i=a.getStore(),h=b.slice(),e=[];if(a.hasListeners.itemremove)for(d=b.startIndex;d<=b.endIndex;d++)e.push(i.getByInternalId(b.item(d,!0).getAttribute("data-recordId")));a.fireEvent("itemremove",e,b.startIndex,h,a),a.callParent(),(c=Ext.fly(a.getNodeContainer()))&&!g&&a.getTargetEl().dom!==c.dom&&c.destroy()},getMaskTarget:function(){return this.ownerCt.body},statics:{getBoundView:function(a){return Ext.getCmp(a.getAttribute("data-boundView"))}},getRecord:function(a){if(!this.store.destroyed)return a.isModel?a:(a=this.getNode(a))?this.dataSource.getByInternalId(a.getAttribute("data-recordId")):void 0},indexOf:function(a){return(a=this.getNode(a))||0===a?this.all.indexOf(a):-1},indexInStore:function(a){return a?this.dataSource.indexOf(this.getRecord(a)):-1},indexOfRow:function(a){var c=this.dataSource;return a.isCollapsedPlaceholder?c.indexOfPlaceholder(a):c.indexOf(a)},renderRows:function(e,g,d,h){var c,b=this,a=b.rowValues,f=e.length;for(a.view=b,a.columns=g,a.rowRole=b.rowAriaRole,b.cellValues.cellRole=b.cellAriaRole,c=0;c<f;c++,d++)a.itemClasses.length=a.rowClasses.length=0,b.renderRow(e[c],d,h);a.view=a.columns=a.record=null},renderColumnSizer:function(f,d){var a,c,e,b=f.columns||this.getGridColumns(),g=b.length;for(d.push('<colgroup role="presentation">'),a=0;a<g;a++)e=(c=b[a]).cellWidth?c.cellWidth:Ext.grid.header.Container.prototype.defaultWidth,d.push('<col role="presentation" class="',Ext.baseCSSPrefix,"grid-cell-",b[a].getItemId(),'" style="width:'+e+'px">');d.push("</colgroup>")},renderRow:function(c,e,j){var f,a=this,k=-1===e,h=a.selectionModel,b=a.rowValues,d=b.itemClasses,g=b.rowClasses,l=a.itemCls,i=a.rowTpl;if(b.rowAttr={},b.record=c,b.recordId=c.internalId,b.recordIndex=a.store.indexOf(c),b.rowIndex=e,b.rowId=a.getRowId(c),b.itemCls=b.rowCls="",b.columns||(b.columns=a.ownerCt.getVisibleColumnManager().getColumns()),d.length=g.length=0,k||(d[0]=l,!a.ownerCt.disableSelection&&h.isRowSelected&&h.isRowSelected(c)&&d.push(a.selectedItemCls),a.stripeRows&&e%2!=0&&d.push(a.altRowCls),a.getRowClass&&(f=a.getRowClass(c,e,null,a.dataSource))&&g.push(f)),!j)return i.apply(b,a.tableValues);i.applyOut(b,j,a.tableValues)},renderCell:function(b,f,j,n,m,p){var l,g,e,c=this,h=c.selectionModel,a=c.cellValues,d=a.classes,k=f.data[b.dataIndex],o=c.cellTpl,i=c.navigationModel.getPosition();a.record=f,a.column=b,a.recordIndex=j,a.rowIndex=n,a.columnIndex=a.cellIndex=m,a.align=b.align,a.innerCls=b.innerCls,a.tdCls=a.tdStyle=a.tdAttr=a.style="",a.unselectableAttr=c.enableTextSelection?"":'unselectable="on"',d[1]=b.getCellId(),e=2,b.renderer&&b.renderer.call?(l=c.ownerCt.columnManager.getHeaderIndex(b),g=b.renderer.call(b.usingDefaultRenderer?b:b.scope||c.ownerCt,k,a,f,j,l,c.dataSource,c),a.css&&(f.cssWarning=!0,a.tdCls+=" "+a.css,a.css=null),a.tdCls&&(d[e++]=a.tdCls)):g=k,a.value=null==g||""===g?b.emptyCellText:g,b.tdCls&&(d[e++]=b.tdCls),c.markDirty&&f.dirty&&f.isModified(b.dataIndex)&&(d[e++]=c.dirtyCls),b.isFirstVisible&&(d[e++]=c.firstCls),b.isLastVisible&&(d[e++]=c.lastCls),c.enableTextSelection||(d[e++]=c.unselectableCls),h&&(h.isCellModel||h.isSpreadsheetModel)&&h.isCellSelected(c,j,b)&&(d[e++]=c.selectedCellCls),i&&i.record.id===f.id&&i.column===b&&(d[e++]=c.focusedItemCls),d.length=e,a.tdCls=d.join(" "),o.applyOut(a,p),a.column=a.record=null},getRow:function(a){var b;return!a&&0!==a||!this.rendered?null:(a.target&&(a=a.target),Ext.isString(a)?Ext.fly(a).down(this.rowSelector,!0):Ext.isNumber(a)?(b=this.all.item(a))&&b.down(this.rowSelector,!0):a.isModel?this.getRowByRecord(a):(b=Ext.fly(a)).is(this.itemSelector)?this.getRowFromItem(b):b.findParent(this.rowSelector,this.getTargetEl()))},getRowId:function(a){return this.id+"-record-"+a.internalId},constructRowId:function(a){return this.id+"-record-"+a},getNodeById:function(a){return a=this.constructRowId(a),this.retrieveNode(a,!1)},getRowById:function(a){return a=this.constructRowId(a),this.retrieveNode(a,!0)},getNodeByRecord:function(a){return this.retrieveNode(this.getRowId(a),!1)},getRowByRecord:function(a){return this.retrieveNode(this.getRowId(a),!0)},getRowFromItem:function(c){var a,b=Ext.getDom(c).tBodies[0].childNodes,d=b.length;for(a=0;a<d;a++)if(Ext.fly(b[a]).is(this.rowSelector))return b[a]},retrieveNode:function(c,b){var a=this.el.getById(c,!0);return b&&a?Ext.fly(a).down(this.rowSelector,!0):a},updateIndexes:Ext.emptyFn,bodySelector:"div."+Ext.baseCSSPrefix+"grid-item-container",nodeContainerSelector:"div."+Ext.baseCSSPrefix+"grid-item-container",itemSelector:"table."+Ext.baseCSSPrefix+"grid-item",rowSelector:"tr."+Ext.baseCSSPrefix+"grid-row",cellSelector:"td."+Ext.baseCSSPrefix+"grid-cell",sizerSelector:"."+Ext.baseCSSPrefix+"grid-cell",innerSelector:"div."+Ext.baseCSSPrefix+"grid-cell-inner",getBodySelector:function(){return this.bodySelector},getColumnSizerSelector:function(b){var a=this.sizerSelector+"-"+b.getItemId();return"td"+a+",col"+a},getItemSelector:function(){return this.itemSelector},getCellSelector:function(a){return a?a.getCellSelector():this.cellSelector},getCellInnerSelector:function(a){return this.getCellSelector(a)+" "+this.innerSelector},addRowCls:function(b,c){var a=this.getRow(b);a&&Ext.fly(a).addCls(c)},removeRowCls:function(b,c){var a=this.getRow(b);a&&Ext.fly(a).removeCls(c)},onRowSelect:function(c){var b,a=this;a.addItemCls(c,a.selectedItemCls),(b=a.getRow(c))&&b.setAttribute("aria-selected",!0),Ext.isIE8&&a.repaintBorder(c+1)},onRowDeselect:function(c){var b,a=this;a.removeItemCls(c,a.selectedItemCls),(b=a.getRow(c))&&b.removeAttribute("aria-selected"),Ext.isIE8&&a.repaintBorder(c+1)},onCellSelect:function(b){var a=this.getCellByPosition(b);a&&(a.addCls(this.selectedCellCls),a.dom.setAttribute("aria-selected",!0))},onCellDeselect:function(b){var a=this.getCellByPosition(b,!0);a&&(Ext.fly(a).removeCls(this.selectedCellCls),a.removeAttribute("aria-selected"))},getCellInclusive:function(a,d){if(a){var c=this.getRow(a.row),b=this.ownerCt.getColumnManager().getHeaderAtIndex(a.column);if(b&&c)return Ext.fly(c).down(this.getCellSelector(b),d)}return!1},getCellByPosition:function(a,e){if(a){var b=a.view||this,d=b.getRow(a.record||a.row),c=a.column.isColumn?a.column:b.getVisibleColumnManager().getHeaderAtIndex(a.column);if(c&&d)return Ext.fly(d).down(b.getCellSelector(c),e)}return!1},onFocusEnter:function(e){var b,d,g,c,h,a=this,f=e.fromComponent,i=a.getNavigationModel(),j=a.bufferedRenderer;if(!a.actionableMode){if(e=e.event,!a.cellFocused&&a.all.getCount()&&a.dataSource.getCount())if(c=e.getTarget(),Ext.fly(c).is(a.getCellSelector()))b=new Ext.grid.CellContext(a).setPosition(a.getRecord(c),a.getHeaderByCell(c));else if(c&&Ext.fly(c).isFocusable()&&a.el.contains(c)&&c!==a.el.dom)a.ownerGrid.setActionableMode(!0,new Ext.grid.CellContext(a).setPosition(a.getRecord(c),a.getHeaderByCell(Ext.fly(c).up(a.getCellSelector())))),Ext.fly(c).focus();else{if((b=a.lastFocused)?(h=a.getScrollable())&&!h.isInView(b.getRow()).y||(d=b.record):b=new Ext.grid.CellContext(a.isNormalView&&a.lockingPartner.grid.isVisible()?a.lockingPartner:a).setColumn(0),f&&f.isColumn&&f.getView()===a&&(b.view=a,b.setColumn(f)),!d){for(g=j?j.getFirstVisibleRowIndex():0,d=a.dataSource.getAt(g);d&&d.isNonData;)g++,d=a.dataSource.getAt(g);d?b.setRow(d):b=null}if(!b)return e.stopEvent(),void a.el.focus()}b&&(i.setPosition(b,null,e,null,!0),a.cellFocused=!!i.getPosition(),a.cellFocused&&(a.el.dom.setAttribute("tabIndex","-1"),a.toggleChildrenTabbability(!1))),Ext.Component.prototype.onFocusEnter.call(a,e)}},onFocusLeave:function(b){var a=this,c=!a.lockingPartner||!b.toComponent||b.toComponent!==a.lockingPartner&&!a.lockingPartner.isAncestor(b.toComponent);a.refreshing||(a.cellFocused&&(c&&a.getNavigationModel().setPosition(null,null,b.event,null,!0),a.cellFocused=!1,a.focusEl=a.el,a.focusEl.dom.setAttribute("tabIndex",0)),c&&a.ownerGrid.actionableMode&&a.ownerGrid.setActionableMode(!1),Ext.Component.prototype.onFocusLeave.call(a,b))},onRowFocus:function(b,d,c){var a=this;d?(a.addItemCls(b,a.focusedItemCls),c||a.focusRow(b)):a.removeItemCls(b,a.focusedItemCls),Ext.isIE8&&a.repaintBorder(b+1)},focusRow:function(d,b){var a=this,c=a.getFocusTask();b?c.delay(Ext.isNumber(b)?b:10,a.focusRow,a,[d,!1]):(c.cancel(),a.isVisible(!0)&&a.getNavigationModel().setPosition(a.getRecord(d)))},focusNode:function(b,a){this.focusRow(b,a)},scrollRowIntoView:function(a,b){(a=this.getRow(a))&&this.scrollElIntoView(a,!1,b)},focusCell:function(b,c){var a=this,d=a.getFocusTask();c?d.delay(Ext.isNumber(c)?c:10,a.focusCell,a,[b,!1]):(d.cancel(),a.isVisible(!0)&&a.getCellByPosition(b)&&a.getNavigationModel().setPosition(b))},getLastFocused:function(){var b=this,a=b.lastFocused;if(a&&a.record&&a.column&&-1!==b.dataSource.indexOf(a.record)&&-1!==b.getVisibleColumnManager().indexOf(a.column)&&b.getNode(a.record))return a},scrollCellIntoView:function(a,b){a.isCellContext&&(a=this.getCellByPosition(a)),a&&this.scrollElIntoView(a,null,b)},scrollElIntoView:function(d,c,b){var a=this.getScrollable();a&&a.scrollIntoView(d,c,b)},syncRowHeightBegin:function(){var a,c,e,b=this.all,h=b.count,d=[],g=Ext.grid.locking.RowSynchronizer;for(a=0,c=b.startIndex;a<h;a++,c++)d[a]=e=new g(this,b.elements[c]),e.reset();return d},syncRowHeightClear:function(b){var a,d=this.all.count;for(a=0;a<d;a++)b[a].reset()},syncRowHeightMeasure:function(b){var a,c=b.length;for(a=0;a<c;a++)b[a].measure()},syncRowHeightFinish:function(c,d){var a,e=c.length,b=this.bufferedRenderer;for(a=0;a<e;a++)c[a].finish(d[a]);b&&b.syncRowHeightsFinish()},handleUpdate:function(I,d,x,B){x=x||Ext.data.Model.EDIT;var c,E,j,o,H,y,l,t,p,b,q,i,s,h,F,e,A,z,v,a=this,D=a.store.indexOf(d),m=a.rowTpl,w=a.markDirty,k=a.dirtyCls,u=x!==Ext.data.Model.EDIT,f=[],n=a.variableRowHeight,r=0,G=a.ownerCt,g=a.cellFly||(a.self.prototype.cellFly=new Ext.dom.Fly);if(a.viewReady&&(c=a.getNodeByRecord(d))){if(d.isCollapsedPlaceholder)return void Ext.fly(c).syncContent(a.createRowElement(d,a.indexOfRow(d)));for(t=a.overItemCls,i=0,q=(p=a.ownerCt.getVisibleColumnManager().getColumns()).length;i<q;i++)(b=p[i]).preventUpdate?(h=Ext.fly(c).down(b.getCellSelector(),!0))&&!u&&w&&(g.attach(h),d.isModified(b.dataIndex)?g.addCls(k):g.removeCls(k)):(s=a.shouldUpdateCell(d,b,B))&&(r|=s,f[f.length]=b,n=n||b.variableRowHeight);if(a.fireEvent("beforeitemupdate",d,D,c,f),a.getRowClass||!a.getRowFromItem(c)||1&r||1<c.tBodies[0].childNodes.length){if(z=c._extData,j=a.createRowElement(d,a.indexOfRow(d),f),Ext.fly(c,"_internal").hasCls(t)&&Ext.fly(j).addCls(t),Ext.isIE9m&&c.mergeAttributes)c.mergeAttributes(j,!0);else for(H=(o=j.attributes).length,l=0;l<H;l++)"id"!==(y=o[l].name)&&c.setAttribute(y,o[l].value);for(z&&(z.isSynchronized=!1),p.length&&(E=a.getRow(c))&&a.updateColumns(E,Ext.fly(j).down(a.rowSelector,!0),f);m&&(!m.syncContent||!1!==m.syncContent(c,j,B?f:null));)m=m.nextTpl}else for(i=0,q=f.length;i<q;i++)F=(b=f[i]).dataIndex,e=d.get(F),h=Ext.fly(c).down(b.getCellSelector(),!0),g.attach(h),!u&&w&&(d.isModified(b.dataIndex)?g.addCls(k):g.removeCls(k)),A=b.usingDefaultRenderer?b:b.scope,b.updater?Ext.callback(b.updater,A,[h,e,d,a,a.dataSource],0,b,G):(b.renderer&&(e=Ext.callback(b.renderer,A,[e,null,d,0,0,a.dataSource,a],0,b,G)),e=(v=null==e||""===e)?b.emptyCellText:e,b.producesHTML||v?g.down(a.innerSelector,!0).innerHTML=e:g.down(a.innerSelector,!0).childNodes[0].data=e),a.highlightClass&&(Ext.fly(h).addCls(a.highlightClass),a.changedCells||(a.self.prototype.changedCells=[],a.prototype.clearChangedTask=new Ext.util.DelayedTask(a.clearChangedCells,a.prototype),a.clearChangedTask.delay(a.unhighlightDelay)),a.changedCells.push({cell:h,cls:a.highlightClass,expires:Ext.Date.now()+1e3}));u&&w&&!d.dirty&&Ext.fly(c,"_internal").select("."+k).removeCls(k),n&&Ext.suspendLayouts(),a.fireEvent("itemupdate",d,D,c),n&&(a.ownerGrid.updateLayout(),Ext.resumeLayouts(!0))}},afterComponentLayout:function(){var a;this.callParent(arguments),this.touchScroll&&!this.bufferedRenderer&&(a=this.getScrollable())&&a.refresh()},clearChangedCells:function(){for(var b,a=this,e=Ext.Date.now(),c=a.changedCells.length;0<c&&(b=a.changedCells[0]).expires<=e;)Ext.fly(b.cell).removeCls(b.highlightClass),Ext.Array.erase(a.changedCells,0,1),c--;c&&a.clearChangedTask.delay(a.unhighlightDelay)},updateColumns:function(b,f,h){var d,k,g,a,c,l,j,i,n=h.length,e=this.getCellSelector();if(b.mergeAttributes)b.mergeAttributes(f,!0);else for(k=(d=f.attributes).length,a=0;a<k;a++)"id"!==(g=d[a].name)&&b.setAttribute(g,d[a].value);for(c=0;c<n;c++)l=h[c],e=this.getCellSelector(l),j=Ext.fly(b).selectNode(e),i=Ext.fly(f).selectNode(e),Ext.fly(j).syncContent(i)},shouldUpdateCell:function(c,b,a){return b.shouldUpdateCell(c,a)},refresh:function(){var b,a=this,c=a.saveFocusState();a.destroying||(a.callParent(arguments),c(),a.headerCt.setSortState(),a.touchScroll&&a.el&&!a.all.getCount()&&a.headerCt&&a.headerCt.tooNarrow&&(b=a.getScrollable())&&b.isTouchScroller&&b.setSize({x:a.headerCt.getTableWidth(),y:b.getSize().y}))},processContainerEvent:function(b){var a=Ext.Component.fromElement(b.target.parentNode);if(a&&a.up(this.ownerCt))return!1},processItemEvent:function(g,o,f,b){var k,h,i,m,j,e,d,a=this,p=a.self,q=p.EventMap,c=b.type,n=a.features,r=n.length,l=b.position=a.eventPosition||(a.eventPosition=new Ext.grid.CellContext);if(Ext.isIE&&"mouseup"===c&&!b.within(a.el))return!1;if(-1===a.indexInStore(o))return this.processSpecialEvent(b),b.preventDefault(),!1;if(e=l.rowElement=Ext.fly(o).down(a.rowSelector,!0),d=b.getTarget(a.getCellSelector(),e),c=p.TouchEventMap[c]||c,d){if(!d.parentNode)return!1;j=a.getHeaderByCell(d),h=a.ownerCt.getColumnManager().getHeaderIndex(j)}else h=-1;if(l.setAll(a,f,j?a.getVisibleColumnManager().getHeaderIndex(j):-1,g,j),l.cellElement=d,!1===(i=a.fireEvent("uievent",c,a,d,f,h,b,g,e))||!1===a.callParent(arguments))return!1;for(k=0;k<r;++k)if((m=n[k]).wrapsItem&&!1===m.vetoEvent(g,e,f,b))return a.processSpecialEvent(b),!1;return d&&"mouseover"!==c&&"mouseout"!==c&&(i=!(!1===a["onBeforeCell"+q[c]](d,h,g,e,f,b)||!1===a.fireEvent("beforecell"+c,a,d,h,g,e,f,b)||!1===a["onCell"+q[c]](d,h,g,e,f,b)||!1===a.fireEvent("cell"+c,a,d,h,g,e,f,b))),!1!==i&&(i=a.fireEvent("row"+c,a,g,e,f,b)),i},processSpecialEvent:function(f){var g,c,i,d,h,j,a=this,k=a.features,l=k.length,b=f.type,e=a.ownerCt;if(a.callParent(arguments),"mouseover"!==b&&"mouseout"!==b){for(b=a.self.TouchEventMap[b]||b,g=0;g<l;g++)if((c=k[g]).hasFeatureEvent&&(d=f.getTarget(c.eventSelector,a.getTargetEl()))&&(i=c.eventPrefix,h=c.getFireEventArgs("before"+i+b,a,d,f),j=c.getFireEventArgs(i+b,a,d,f),!1===a.fireEvent.apply(a,h)||!1===e.fireEvent.apply(e,h)||!1===a.fireEvent.apply(a,j)||!1===e.fireEvent.apply(e,j)))return!1;return!0}},onCellMouseDown:Ext.emptyFn,onCellLongPress:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onCellKeyUp:Ext.emptyFn,onCellKeyPress:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellLongPress:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,onBeforeCellKeyUp:Ext.emptyFn,onBeforeCellKeyPress:Ext.emptyFn,expandToFit:function(a){this.autoSizeColumn(a)},autoSizeColumn:function(a){if(Ext.isNumber(a)&&(a=this.getGridColumns()[a]),a){if(a.isGroupHeader)return void a.autoSize();delete a.flex,a.setWidth(this.getMaxContentWidth(a))}},getMaxContentWidth:function(b){var a,c=this,d=c.el.query(b.getCellInnerSelector()),j=b.getWidth(),f=0,i=d.length,g=c.body.select(c.getColumnSizerSelector(b)),h=Math.max,e=0;for(0<i&&(Ext.supports.ScrollWidthInlinePaddingBug&&(e+=c.getCellPaddingAfter(d[0])),c.columnLines&&(e+=Ext.fly(d[0].parentNode).getBorderWidth("lr"))),g.setWidth(1),b.textEl.setStyle({"text-overflow":"clip",display:"table-cell"}),a=b.textEl.dom.offsetWidth+b.titleEl.getPadding("lr"),b.textEl.setStyle({"text-overflow":"",display:""});f<i;f++)a=h(a,d[f].scrollWidth);return a=h((a+=e)+1,40),g.setWidth(j),a},getPositionByEvent:function(b){var a=this,c=b.getTarget(a.cellSelector),d=b.getTarget(a.itemSelector),f=a.getRecord(d),e=a.getHeaderByCell(c);return a.getPosition(f,e)},getHeaderByCell:function(a){return!!a&&this.ownerCt.getVisibleColumnManager().getHeaderById(Ext.getDom(a).getAttribute("data-columnId"))},walkCells:function(e,i,g,j){var c=this,b=e.clone(),d=c.lockingPartner&&c.lockingPartner.grid.isVisible()?c.lockingPartner:null,a=e.rowIdx,h=c.dataSource.getCount()-1,f=c.ownerCt.getVisibleColumnManager().getColumns();switch(i.toLowerCase()){case"right":if(e.isLastColumn()){if(h<(a=d&&c.isLockedView?a:a+1))return!1;d&&(b.view=d),b.setPosition(a,0)}else b.navigate(1);break;case"left":if(e.isFirstColumn()){if((a=d&&c.isNormalView?a:a-1)<0)return!1;d&&(f=(b.view=d).getVisibleColumnManager().getColumns()),b.setPosition(a,f[f.length-1])}else b.navigate(-1);break;case"up":if(0===a)return!1;b.setRow(a-1);break;case"down":if(a===h)return!1;b.setRow(a+1)}return(!g||!0===g.call(j||c,b))&&b},walkRows:function(f,e){var h,j=this.dataSource,g=0,d=f,b=e<0?0:j.getCount()-1,c=b?1:-1,a=f;do{if(b?b<=a:a<=b)return d||b;a+=c,(h=Ext.fly(this.getRow(a)))&&h.isVisible(!0)&&(g+=c,d=a)}while(g!==e);return a},walkRecs:function(h,g){var j,d,a=this.dataSource,i=0,e=h,c=g<0?0:(a.isBufferedStore?a.getTotalCount():a.getCount())-1,f=c?1:-1,b=a.indexOf(h);do{if(c?c<=b:b<=c)return e;b+=f,!(d=a.getAt(b)).isCollapsedPlaceholder&&(j=Ext.fly(this.getNodeByRecord(d)))&&j.isVisible(!0)&&(i+=f,e=d)}while(i!==g);return e},getFirstVisibleRowIndex:function(){var a=this,c=a.dataSource.isBufferedStore?a.dataSource.getTotalCount():a.dataSource.getCount(),b=a.indexOf(a.all.first())-1;do{if((b+=1)===c)return}while(!Ext.fly(a.getRow(b)).isVisible(!0));return b},getLastVisibleRowIndex:function(){var b=this,a=b.indexOf(b.all.last());do{if(-1===--a)return}while(!Ext.fly(b.getRow(a)).isVisible(!0));return a},getHeaderCt:function(){return this.headerCt},getPosition:function(b,a){return new Ext.grid.CellContext(this).setPosition(b,a)},onDestroy:function(){var d,b,a=this,c=a.featuresMC;if(c)for(b=0,d=c.getCount();b<d;++b)c.getAt(b).destroy();a.cellFly=a.featuresMC=null,a.callParent(arguments),a.all.destroy(),a.body.destroy(),a.all=a.body=a.body.el=null,a.grid=a.ownerGrid=a.headerCt=a.panel=null,a.selection=a.actionPosition=a.eventPosition=a.lastFocused=null,a.actionRow=a.cellTpl=a.rowTpl=a.bufferedRenderer=null},onReplace:function(g,d,f,e){var c,a=this,b=a.bufferedRenderer;a.rendered&&b?(c=a.saveFocusState(),b.onReplace(g,d,f,e),c()):a.callParent(arguments),a.setPendingStripe(d)},onResize:function(d,c,f,e){var a=this,b=a.bufferedRenderer;b&&b.onViewResize(a,d,c,f,e),a.callParent([d,c])},onAdd:function(e,c,d){var a=this,b=a.bufferedRenderer;a.rendered&&b&&(b.bodyTop||a.dataSource.getCount()+c.length>=b.viewSize)?b.onReplace(e,d,[],c):a.callParent(arguments),a.setPendingStripe(d)},onRemove:function(f,d,e){var c,a=this,b=a.bufferedRenderer;a.rendered&&b&&a.dataSource.getCount()+d.length>=b.viewSize?(c=a.saveFocusState(),b.onReplace(f,e,d,[]),c()):a.callParent(arguments),a.setPendingStripe(e)},saveFocusState:function(){var f,e,b=this,g=b.dataSource,c=b.actionableMode,d=b.getNavigationModel(),a=c?b.actionPosition:d.getPosition(!0);return a?(a=a.clone(),c&&b.ownerGrid.setActionableMode(!1),b.el.dom.focus(),d.setPosition(),function(){g.getCount()?(f=Math.min(a.rowIdx,b.all.getCount()-1),e=Math.min(a.colIdx,b.getVisibleColumnManager().getColumns().length-1),a=new Ext.grid.CellContext(b).setPosition(g.contains(a.record)?a.record:f,e),c?b.ownerGrid.setActionableMode(!0,a):(b.cellFocused=!0,d.setPosition(a,null,null,null,!0))):a.column.focus()}):Ext.emptyFn},onDataRefresh:function(c){var a=this,b=a.ownerCt;b&&2===b.isCollapsingOrExpanding?b.on("expand",a.onDataRefresh,a,{single:!0}):a.callParent([c])},getViewRange:function(){var a=this;return a.bufferedRenderer?a.bufferedRenderer.getViewRange():a.callParent()},setPendingStripe:function(b){var a=this.stripeOnUpdate;a=null===a?b:Math.min(a,b),this.stripeOnUpdate=a},onEndUpdate:function(){var a=this,b=a.stripeOnUpdate,c=a.all.startIndex;a.rendered&&(b||0===b)&&(b<c&&(b=c),a.doStripeRows(b),a.stripeOnUpdate=null),a.callParent(arguments)},doStripeRows:function(d,g){var e,f,c,b,a=this;if(a.rendered&&a.stripeRows)for(c=0,f=(e=a.getNodes(d,g)).length;c<f;c++)(b=e[c]).className=b.className.replace(a.rowClsRe," "),++d%2==0&&(b.className+=" "+a.altRowCls)},hasActiveFeature:function(){return this.isGrouping&&this.store.isGrouped()||this.isRowWrapped},getCellPaddingAfter:function(a){return Ext.fly(a).getPadding("r")},privates:{refreshScroll:function(){var a=this.bufferedRenderer;a?a.refreshSize():this.callParent()},collectNodes:function(a){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},setActionableMode:function(n,c){var f,l,i,m,b,h,k,d,j,a=this,g=a.getNavigationModel(),e=a.grid.actionables,o=e.length;if(a.actionableMode===n&&(!n||c.isEqual(a.actionPosition)))return!1;if(n){if(c&&(c.view===a||c.view===(d=a.lockingPartner)&&d.actionableMode)){if(h=(c=c.clone()).record,a.grid.ensureVisible(h,{column:c.column}),f=a.all.item(c.rowIdx),!d)for(l=Ext.fly(f).down(c.column.getCellSelector()),b=0;b<o;b++)k=k||e[b].activateCell(c);if(d||l.restoreTabbableState(!0).length||k){for(b=0;b<o;b++)e[b].activateRow&&e[b].activateRow(f);if(d||(i=l.findTabbableElements()).length){if(f.restoreTabbableState(!0),d)return a.actionableMode=!0,!(a.actionPosition=null);if(i)return a.actionRow=f,a.actionableMode=a.ownerGrid.actionableMode=!0,g.setPosition(),g.actionPosition=a.actionPosition=c,Ext.fly(i[0]).focus(),!0}}}return!1}for(m=Ext.fly(Ext.Element.getActiveElement()),(j=a.el.contains(m))&&(h=a.actionPosition&&a.actionPosition.record),b=0;b<o;b++)e[b].deactivate&&e[b].deactivate();a.actionRow&&a.actionRow.saveTabbableState({skipSelf:!0,includeSaved:!1}),a.actionableMode=a.ownerGrid.actionableMode=!1,a.actionPosition=g.actionPosition=a.actionRow=null,j&&g.setPosition(new Ext.grid.CellContext(a).setPosition(h||0,a.getHeaderByCell(m.findParent(a.getCellSelector()))||0))},onRowExit:function(h,i,f){var b,d,a=this,j=f?"nextSibling":"previousSibling",c=a.lockingPartner,e=a.grid.actionables,k=e.length;for(a.refreshing=a.actionableModeTabbing=!0,b=0;b<k;b++)e[b].deactivate&&e[b].deactivate();c&&c.grid.isVisible()&&(d=a.all.indexOf(h),f?a.isNormalView&&d++:(c.getVisibleColumnManager().getColumns().length,a.isLockedView&&d--),a.actionPosition=null,i=(a=c).all.item(d,!0)),a.findFirstActionableElement(i,j,f),a.refreshing=a.actionableModeTabbing=!1,Ext.fly(h).saveTabbableState({skipSelf:!0,includeSaved:!1})},findFirstActionableElement:function(d,p,c){var k,g,b,h,o,j,i,a=this,n=a.getVisibleColumnManager().getColumns(),m=n.length,f=a.grid.actionables,l=f.length,e=new Ext.grid.CellContext(a);if(d){for(e.setRow(d),b=0;b<l;b++)f[b].activateRow&&f[b].activateRow(d);for(b=c?0:m-1;(c?b<m:-1<b)&&!g;b+=c?1:-1){for(o=n[b],e.setColumn(o),k=Ext.fly(d).down(e.column.getCellSelector()),h=0;h<l;h++)j=j||f[h].activateCell(e);(k.restoreTabbableState(!0).length||j)&&(i=k.findTabbableElements(),a.actionRow=Ext.get(d),a.actionRow.restoreTabbableState(!0),g=i[c?0:i.length-1])}g?(a.actionPosition=a.getNavigationModel().actionPosition=e,Ext.fly(g).focus()):a.onRowExit(d,a.all.item(e.rowIdx+(c?1:-1)),c)}else a.grid.ensureVisible(c?0:a.dataSource.getCount()-1,{callback:function(b,e,d){b?a.findFirstActionableElement(d,p,c):a.ownerGrid.setActionableMode(!1)}})}}}),Ext.define("Ext.view.DropZone",{extend:Ext.dd.DropZone,indicatorCls:Ext.baseCSSPrefix+"grid-drop-indicator",indicatorHtml:['<div class="',Ext.baseCSSPrefix,'grid-drop-indicator-left" role="presentation"></div>','<div class="'+Ext.baseCSSPrefix+'grid-drop-indicator-right" role="presentation"></div>'].join(""),constructor:function(b){var a=this;Ext.apply(a,b),a.ddGroup||(a.ddGroup="view-dd-zone-"+a.view.id),a.callParent([a.view.el])},fireViewEvent:function(){var b,a=this;return a.lock(),b=a.view.fireEvent.apply(a.view,arguments),a.unlock(),b},getTargetFromEvent:function(h){var d,b,c,a,g,e=h.getTarget(this.view.getItemSelector());if(!e)for(d=h.getY(),a=0,g=(b=this.view.getNodes()).length;a<g;a++)if(c=b[a],d<=Ext.fly(c).getBox().bottom)return c;return e},getIndicator:function(){var a=this;return a.indicator||(a.indicator=new Ext.Component({ariaRole:"presentation",html:a.indicatorHtml,cls:a.indicatorCls,ownerCt:a.view,floating:!0,shadow:!1})),a.indicator},getPosition:function(d,c){var e=d.getXY()[1],a=Ext.fly(c).getRegion();return a.bottom-e>=(a.bottom-a.top)/2?"before":"after"},containsRecordAtOffset:function(f,d,g){if(!d)return!1;var a=this.view,e=a.indexOf(d),c=a.getNode(e+g),b=c?a.getRecord(c):null;return b&&Ext.Array.contains(f,b)},positionIndicator:function(f,h,i){var e,a=this,c=a.view,d=a.getPosition(i,f),b=c.getRecord(f),g=h.records;Ext.Array.contains(g,b)||("before"!==d||a.containsRecordAtOffset(g,b,-1))&&("after"!==d||a.containsRecordAtOffset(g,b,1))?a.invalidateDrop():(a.valid=!0,a.overRecord===b&&a.currentPosition===d||(e=Ext.fly(f).getY()-c.el.getY()-1,"after"===d&&(e+=Ext.fly(f).getHeight()),2===c.touchScroll&&(e+=c.getScrollY()),a.getIndicator().setWidth(Ext.fly(c.el).getWidth()).showAt(0,e),a.overRecord=b,a.currentPosition=d))},invalidateDrop:function(){this.valid&&(this.valid=!1,this.getIndicator().hide())},onNodeOver:function(c,e,d,b){var a=this;return Ext.Array.contains(b.records,a.view.getRecord(c))||a.positionIndicator(c,b,d),a.valid?a.dropAllowed:a.dropNotAllowed},notifyOut:function(d,b,e,c){var a=this;a.callParent(arguments),a.overRecord=a.currentPosition=null,a.valid=!1,a.indicator&&a.indicator.hide()},onContainerOver:function(f,e,d){var a=this,b=a.view;return b.dataSource.getCount()?a.positionIndicator(b.all.last(),d,e):(a.overRecord=a.currentPosition=null,a.getIndicator().setWidth(Ext.fly(b.el).getWidth()).showAt(0,0),a.valid=!0),a.dropAllowed},onContainerDrop:function(b,c,a){return this.onNodeDrop(b,null,c,a)},onNodeDrop:function(f,g,h,e){var a=this,d=!1,c={wait:!1,processDrop:function(){a.invalidateDrop(),a.handleNodeDrop(e,a.overRecord,a.currentPosition),d=!0,a.fireViewEvent("drop",f,e,a.overRecord,a.currentPosition)},cancelDrop:function(){a.invalidateDrop(),d=!0}},b=!1;if(a.valid){if(b=a.fireViewEvent("beforedrop",f,e,a.overRecord,a.currentPosition,c),c.wait)return;!1!==b&&(d||c.processDrop())}return b},destroy:function(){this.indicator=Ext.destroy(this.indicator),this.callParent()}}),Ext.define("Ext.grid.plugin.HeaderResizer",{extend:Ext.plugin.Abstract,alias:"plugin.gridheaderresizer",disabled:!1,config:{dynamic:!1},colHeaderCls:Ext.baseCSSPrefix+"column-header",minColWidth:40,maxColWidth:1e3,eResizeCursor:"col-resize",init:function(b){var a=this;(a.headerCt=b).on("render",a.afterHeaderRender,a,{single:a}),a.minColWidth||(a.self.prototype.minColWidth=Ext.grid.column.Column.prototype.minWidth)},destroy:function(){var a=this,b=a.tracker;b&&(b.destroy(),a.tracker=null),a.headerCt.un("render",a.afterHeaderRender,a),a.headerCt=null,a.callParent()},afterHeaderRender:function(){var a=this,b=a.headerCt,c=b.el;b.mon(c,"mousemove",a.onHeaderCtMouseMove,a),a.markerOwner=a.ownerGrid=a.headerCt.up("tablepanel").ownerGrid,a.tracker=new Ext.dd.DragTracker({disabled:a.disabled,onBeforeStart:a.onBeforeStart.bind(a),onStart:a.onStart.bind(a),onDrag:a.onDrag.bind(a),onEnd:a.onEnd.bind(a),tolerance:3,autoStart:300,el:c})},onHeaderCtMouseMove:function(b){var a=this;a.headerCt.dragging||a.disabled?a.activeHd&&(a.activeHd.el.dom.style.cursor="",delete a.activeHd):"touch"!==b.pointerType&&a.findActiveHeader(b)},findActiveHeader:function(f){var a,b,c,j,d=this,e=d.headerCt,i=f.getTarget("."+d.colHeaderCls,e.el,!0),h=d.ownerGrid,g=h.ownerLockable;if(d.activeHd=null,i){if((a=Ext.getCmp(i.id)).isAtEndEdge(f)){if(1===e.visibleColumnManager.getColumns().length&&e.forceFit)return;b=a}else a.isAtStartEdge(f)&&(c=e.visibleColumnManager.getColumns(),j=a.isGroupHeader?a.getGridColumns()[0]:a,(b=c[Ext.Array.indexOf(c,j)-1])||!g||h.isLocked||(b=(c=g.lockedGrid.headerCt.visibleColumnManager.getColumns())[c.length-1]));b?(b.isGroupHeader&&(b=(c=b.getGridColumns())[c.length-1]),b&&!b.fixed&&!1!==b.resizable&&(d.activeHd=b,a.el.dom.style.cursor=d.eResizeCursor,a.triggerEl&&(a.triggerEl.dom.style.cursor=d.eResizeCursor))):(a.el.dom.style.cursor="",a.triggerEl&&(a.triggerEl.dom.style.cursor=""))}return d.activeHd},onBeforeStart:function(b){var a=this;return a.dragHd=a.activeHd||"touch"===b.pointerType&&a.findActiveHeader(b),a.dragHd&&!a.headerCt.dragging?(a.xDelta=a.dragHd.getX()+a.dragHd.getWidth()-a.tracker.getXY()[0],a.tracker.constrainTo=a.getConstrainRegion(),!0):a.headerCt.dragging=!1},getConstrainRegion:function(){var c,f,a=this,e=a.dragHd.el,b=a.ownerGrid,g=b.getSizeModel().width,d=g.shrinkWrap?a.headerCt.getWidth()-a.headerCt.visibleColumnManager.getColumns().length*a.minColWidth:a.maxColWidth;return a.headerCt.forceFit?(c=a.dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])"))&&a.headerInSameGrid(c)&&(d=e.getWidth()+(c.getWidth()-a.minColWidth)):b.isLocked&&g.shrinkWrap&&(d=a.dragHd.up("[scrollerOwner]").getTargetEl().getWidth(!0)-b.getWidth()-(b.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*a.minColWidth+Ext.getScrollbarSize().width)),(f=a.adjustConstrainRegion(e.getRegion(),0,0,0,a.minColWidth)).right=e.getX()+d,f},onStart:function(k){var f,g,b,c,d,e,a=this,i=a.dragHd,j=i.el.getWidth(),h=i.getRootHeaderCt();a.headerCt.dragging=!0,a.origWidth=j,a.dynamic||((b=a.markerOwner).frame&&b.resizable&&(a.gridOverflowSetting=b.el.dom.style.overflow,b.el.dom.style.overflow="hidden"),f=a.getLeftMarkerX(b),c=b.getLhsMarker(),d=b.getRhsMarker(),e=a.ownerGrid.body.getHeight()+h.getHeight(),g=h.getOffsetsTo(b)[1]-b.el.getBorderWidth("t"),c.dom.style.cursor=a.eResizeCursor,d.dom.style.cursor=a.eResizeCursor,c.setLocalY(g),d.setLocalY(g),c.setHeight(e),d.setHeight(e),a.setMarkerX(c,f),a.setMarkerX(d,f+j))},onDrag:function(b){var a=this;a.dynamic?a.doResize():a.setMarkerX(a.getMovingMarker(a.markerOwner),a.calculateDragX(a.markerOwner))},getMovingMarker:function(a){return a.getRhsMarker()},onEnd:function(c){var a=this,b=a.markerOwner;a.headerCt.dragging=!1,a.dragHd&&(a.dynamic||("gridOverflowSetting"in a&&(b.el.dom.style.overflow=a.gridOverflowSetting),a.setMarkerX(b.getLhsMarker(),-9999),a.setMarkerX(b.getRhsMarker(),-9999)),a.doResize(),"touch"!==c.pointerType?(a.dragHd=null,a.activeHd.el.dom.style.cursor=a.eResizeCursor):a.dragHd=a.activeHd=null),a.headerCt.blockNextEvent()},doResize:function(){var a,b=this,c=b.dragHd,d=b.tracker.getOffset("point");c&&d[0]&&(c.flex&&delete c.flex,Ext.suspendLayouts(),b.adjustColumnWidth(d[0]-b.xDelta),b.headerCt.forceFit&&((a=c.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])"))&&!b.headerInSameGrid(a)&&(a=null),a&&(delete a.flex,a.setWidth(a.getWidth()-d[0]))),Ext.resumeLayouts(!0))},headerInSameGrid:function(a){var b=this.dragHd.up("tablepanel");return!!a.up(b)},disable:function(){var a=this.tracker;this.disabled=!0,a&&a.disable()},enable:function(){var a=this.tracker;this.disabled=!1,a&&a.enable()},calculateDragX:function(a){return this.tracker.getXY("point")[0]+this.xDelta-a.getX()-a.el.getBorderWidth("l")},getLeftMarkerX:function(a){return this.dragHd.getX()-a.getX()-a.el.getBorderWidth("l")-1},setMarkerX:function(a,b){a.setLocalX(b)},adjustConstrainRegion:function(a,e,d,b,c){return a.adjust(e,d,b,c)},adjustColumnWidth:function(a){this.dragHd.setWidth(this.origWidth+a)}}),Ext.define("Ext.grid.header.DragZone",{extend:Ext.dd.DragZone,colHeaderSelector:"."+Ext.baseCSSPrefix+"column-header",colInnerSelector:"."+Ext.baseCSSPrefix+"column-header-inner",maxProxyWidth:120,constructor:function(b){var a=this;a.headerCt=b,a.ddGroup=a.getDDGroup(),a.autoGroup=!0,a.callParent([b.el]),a.proxy.el.addCls(Ext.baseCSSPrefix+"grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(c){if(c.getTarget(this.colInnerSelector)){var a,b,d=c.getTarget(this.colHeaderSelector);if(d&&(a=Ext.getCmp(d.id),!this.headerCt.dragging&&a.draggable&&!a.isAtStartEdge(c)&&!a.isAtEndEdge(c)))return(b=document.createElement("div")).role="presentation",b.innerHTML=a.text,{ddel:b,header:a}}return!1},onBeforeDrag:function(){return!(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=!0,this.headerCt.hideMenu(),this.callParent(arguments)},onDragDrop:function(){this.headerCt.dragging=!1,this.callParent(arguments)},afterRepair:function(){this.callParent(),this.headerCt.dragging=!1},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}}),Ext.define("Ext.grid.header.DropZone",{extend:Ext.dd.DropZone,colHeaderCls:Ext.baseCSSPrefix+"column-header",proxyOffsets:[-4,-9],constructor:function(b){var a=this;a.headerCt=b,a.ddGroup=a.getDDGroup(),a.autoGroup=!0,a.callParent([b.el])},destroy:function(){this.callParent(),Ext.destroy(this.topIndicator,this.bottomIndicator)},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(a){return a.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){return this.topIndicator||(this.topIndicator=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"col-move-top",html:"&#160;"}),this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)),this.topIndicator},getBottomIndicator:function(){return this.bottomIndicator||(this.bottomIndicator=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"col-move-bottom",html:"&#160;"})),this.bottomIndicator},getLocation:function(d,c){var e=d.getXY()[0],a=Ext.fly(c).getRegion();return{pos:a.right-e<=(a.right-a.left)/2?"after":"before",header:Ext.getCmp(c.id),node:c}},positionIndicator:function(t,v,w){var r,s,e,d,o,m,j,h,g,q,p,l,u,k,i,a=this,f=t.header,n=a.getLocation(w,v),b=n.header,c=n.pos;if(b!==a.lastTargetHeader||c!==a.lastDropPos){if(r=f.nextSibling("gridcolumn:not([hidden])"),s=f.previousSibling("gridcolumn:not([hidden])"),a.lastTargetHeader=b,a.lastDropPos=c,!b.draggable&&"before"===c&&0===b.getIndex())return!1;if(t.dropLocation=n,f!==b&&("before"===c&&r!==b||"after"===c&&s!==b)&&!b.isDescendantOf(f)){for(u=(l=Ext.dd.DragDropManager.getRelated(a)).length,k=0;k<u;k++)(i=l[k])!==a&&i.invalidateDrop&&i.invalidateDrop();a.valid=!0,e=a.getTopIndicator(),d=a.getBottomIndicator(),m="before"===c?(o="bc-tl","tc-bl"):(o="bc-tr","tc-br"),j=e.getAlignToXY(b.el,o),h=d.getAlignToXY(b.el,m),q=(g=a.headerCt.el).getX()-a.indicatorXOffset,p=g.getX()+g.getWidth(),j[0]=Ext.Number.constrain(j[0],q,p),h[0]=Ext.Number.constrain(h[0],q,p),e.setXY(j),d.setXY(h),e.show(),d.show()}else a.invalidateDrop()}},invalidateDrop:function(){this.valid=!1,this.hideIndicators()},onNodeOver:function(h,j,i,a){var b,g,e,f,c=this,d=a.header;return a.header.el.dom===h?b=!1:(a.isLock=a.isUnlock=a.crossPanel=!1,g=c.getLocation(i,h).header,(b=d.ownerCt===g.ownerCt)||d.ownerCt.sealed||g.ownerCt.sealed||(b=!0,(e=d.up("tablepanel"))!==(f=g.up("tablepanel"))&&(a.crossPanel=!0,a.isLock=f.isLocked&&!e.isLocked,a.isUnlock=!f.isLocked&&e.isLocked,(a.isUnlock&&!1===d.lockable||a.isLock&&!d.isLockable())&&(b=!1)))),b?c.positionIndicator(a,h,i):c.valid=!1,c.valid?c.dropAllowed:c.dropNotAllowed},hideIndicators:function(){var a=this;a.getTopIndicator().hide(),a.getBottomIndicator().hide(),a.lastTargetHeader=a.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},getNestedHeader:function(a,b){var d,c=a.items;return a.isGroupHeader&&c.length&&(d=b?"last":"first",a=this.getNestedHeader(c[d](),b)),a},onNodeDrop:function(r,q,s,f){if(this.headerCt.blockNextEvent(),this.valid){var c,i,l,o,j=this,a=f.header,m=f.dropLocation,g=m.pos,b=m.header,e=a.ownerCt,p=e.getRootHeaderCt(),d=b.ownerCt,k=j.headerCt.visibleColumnManager,h=k.getHeaderIndex(a);f.isLock||f.isUnlock?(l=e.up("[scrollerOwner]"),c=d.items.indexOf(b),"after"===g&&c++,f.isLock?l.lock(a,c,d):l.unlock(a,c,d)):(c="after"===g?k.getHeaderIndex(j.getNestedHeader(b,1))+1:k.getHeaderIndex(j.getNestedHeader(b,0)),j.invalidateDrop(),o=a.getWidth(),Ext.suspendLayouts(),e.isDDMoveInGrid=d.isDDMoveInGrid=!f.crossPanel,a.isGroupHeader&&b.isGroupHeader&&a.setNestedParent(b),"before"===g?b.insertNestedHeader(a):d["move"+g.charAt(0).toUpperCase()+g.substr(1)](a,b),0<=c&&(!b.isGroupHeader||b.items&&b.items.length)&&h!==c&&(i=a.isGroupHeader?a.query(":not([hidden]):not([isGroupHeader])").length:1,h<=c&&1<i&&(c-=i),d.getRootHeaderCt().grid.view.moveColumn(h,c,i)),p.fireEvent("columnmove",e,a,h,c),e.isDDMoveInGrid=d.isDDMoveInGrid=!1,d.isGroupHeader&&!e.isGroupHeader?e!==d&&(a.savedFlex=a.flex,delete a.flex,a.width=o):e.isGroupHeader||a.savedFlex&&(a.flex=a.savedFlex,delete a.width),Ext.resumeLayouts(!0))}}}),Ext.define("Ext.grid.plugin.HeaderReorderer",{extend:Ext.plugin.Abstract,alias:"plugin.gridheaderreorderer",init:function(a){(this.headerCt=a).on({boxready:this.onHeaderCtRender,single:!0,scope:this})},destroy:function(){var a=this;a.headerCt.un("boxready",a.onHeaderCtRender,a),Ext.destroy(a.dragZone,a.dropZone),a.headerCt=a.dragZone=a.dropZone=null,a.callParent()},onHeaderCtRender:function(){var a=this;a.dragZone=new Ext.grid.header.DragZone(a.headerCt),a.dropZone=new Ext.grid.header.DropZone(a.headerCt),a.disabled&&a.dragZone.disable()},enable:function(){this.disabled=!1,this.dragZone&&this.dragZone.enable()},disable:function(){this.disabled=!0,this.dragZone&&this.dragZone.disable()}}),Ext.define("Ext.grid.header.Container",{extend:Ext.container.Container,mixins:[Ext.util.FocusableContainer],border:!0,alias:"widget.headercontainer",baseCls:Ext.baseCSSPrefix+"grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",detachOnRemove:!1,defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",headerOpenCls:Ext.baseCSSPrefix+"column-header-open",menuSortAscCls:Ext.baseCSSPrefix+"hmenu-sort-asc",menuSortDescCls:Ext.baseCSSPrefix+"hmenu-sort-desc",menuColsIcon:Ext.baseCSSPrefix+"cols-icon",blockEvents:!1,dragging:!1,sortOnClick:!0,enableFocusableContainer:!1,childHideCount:0,sortable:!0,enableColumnHide:!0,initComponent:function(){var a=this;a.plugins=a.plugins||[],a.defaults=a.defaults||{},a.isColumn||(a.enableColumnResize&&(a.resizer=new Ext.grid.plugin.HeaderResizer,a.plugins.push(a.resizer)),a.enableColumnMove&&(a.reorderer=new Ext.grid.plugin.HeaderReorderer,a.plugins.push(a.reorderer))),a.isColumn&&!a.isGroupHeader?a.items&&0!==a.items.length||(a.isContainer=a.isFocusableContainer=!1,a.focusable=!0,a.layout={type:"container",calculate:Ext.emptyFn}):(a.layout=Ext.apply({type:"gridcolumn",align:"stretch"},a.initialConfig.layout),a.defaults.columnLines=a.columnLines,a.isGroupHeader?(a.visibleColumnManager=new Ext.grid.ColumnManager(!0,a),a.columnManager=new Ext.grid.ColumnManager(!1,a)):(a.isRootHeader=!0,a.hiddenHeaders||(a.enableFocusableContainer=!0,a.ariaRole="rowgroup"),a.columnManager=new Ext.grid.ColumnManager(!1,a),a.visibleColumnManager=new Ext.grid.ColumnManager(!0,a),a.grid&&(a.grid.columnManager=a.columnManager,a.grid.visibleColumnManager=a.visibleColumnManager))),a.menuTask=new Ext.util.DelayedTask(a.updateMenuDisabledState,a),a.callParent()},insertNestedHeader:function(d){var a,b=this,e=d.ownerCt,f=b.ownerCt,c=f.layout.owner;e&&(b.isGroupHeader&&!f.isNestedParent&&(a=c.items.indexOf(b)),e.remove(d,!1)),void 0===a&&(a=c.items.indexOf(b)),c.insert(a,d)},isNested:function(){return!!this.getRootHeaderCt().down("[isNestedParent]")},isNestedGroupHeader:function(){var b=this.getRefOwner().query(">:not([hidden])");return 1===b.length&&b[0]===this},maybeShowNestedGroupHeader:function(){var b,a=this.items;a&&1===a.length&&(b=a.getAt(0))&&b.hidden&&b.show()},setNestedParent:function(a){a.isNestedParent=!1,a.ownerCt.isNestedParent=!(1!==this.ownerCt.items.length||1!==a.ownerCt.items.length)},initEvents:function(){var b,c,a=this;a.callParent(),a.isColumn||a.isGroupHeader||(c={click:b=a.onHeaderCtEvent,dblclick:b,contextmenu:b,mouseover:a.onHeaderCtMouseOver,mouseout:a.onHeaderCtMouseOut,scope:a},Ext.supports.Touch&&(c.longpress=a.onHeaderCtLongPress),a.mon(a.el,c))},onHeaderCtEvent:function(a,g){var b,e,d,c=this,f=c.getHeaderElByEvent(a);c.longPressFired?c.longPressFired=!1:f&&!c.blockEvents&&(b=Ext.getCmp(f.id))&&(e=b[b.clickTargetName],(b.isGroupHeader||b.isContainer)&&!a.within(e)||("click"===a.type||"tap"===a.type?(d=b.onTitleElClick(a,e,c.sortOnClick))?c.onHeaderTriggerClick(d,a,"touch"===a.pointerType?d.el:d.triggerEl):c.onHeaderClick(b,a,g):"contextmenu"===a.type?c.onHeaderContextMenu(b,a,g):"dblclick"===a.type&&b.resizable&&b.onTitleElDblClick(a,e.dom)))},blockNextEvent:function(){this.blockEvents=!0,Ext.asap(this.unblockEvents,this)},unblockEvents:function(){this.blockEvents=!1},onHeaderCtMouseOver:function(b,e){var c,a,d;b.within(this.el,!0)||(a=(c=b.getTarget("."+Ext.grid.column.Column.prototype.baseCls))&&Ext.getCmp(c.id))&&(d=a[a.clickTargetName],b.within(d)&&a.onTitleMouseOver(b,d.dom))},onHeaderCtMouseOut:function(c,g){var a,b,f="."+Ext.grid.column.Column.prototype.baseCls,d=c.getTarget(f),e=c.getRelatedTarget(f);d!==e&&(d&&(a=Ext.getCmp(d.id))&&(b=a[a.clickTargetName],a.onTitleMouseOut(c,b.dom)),e&&(a=Ext.getCmp(e.id))&&(b=a[a.clickTargetName],a.onTitleMouseOver(c,b.dom)))},onHeaderCtLongPress:function(d){var a=this,b=a.getHeaderElByEvent(d),c=Ext.getCmp(b.id);c.menuDisabled||(a.longPressFired=!0,a.showMenuBy(d,b,c))},getHeaderElByEvent:function(a){return a.getTarget("."+Ext.grid.column.Column.prototype.baseCls)},isLayoutRoot:function(){return!this.hiddenHeaders&&this.callParent()},getRootHeaderCt:function(){var a=this;return a.isRootHeader?a:a.up("[isRootHeader]")},onDestroy:function(){var a=this;a.menu&&a.menu.un("hide",a.onMenuHide,a),a.menuTask.cancel(),a.callParent(),Ext.destroy(a.visibleColumnManager,a.columnManager,a.menu),a.columnManager=a.visibleColumnManager=null},applyColumnsState:function(h,n){if(h&&h.length){var g,e,a,d,f=this,m=f.items.items,o=m.length,b=0,i=h.length,k=!1,c=[],l={},j=[];for(g=0;g<i;g++)(a=h[g]).index=g,l[a.id]=a;for(b=0;b<o;b++)(a=l[(e=m[b]).getStateId()])?(b!==(d=a.index)&&(k=!0),(c[d]=e).applyColumnState&&e.applyColumnState(a,n)):j.push({index:b,column:e});if(c=Ext.Array.clean(c),i=j.length)for(b=0;b<i;b++)(d=(a=j[b]).index)<c.length?(k=!0,Ext.Array.splice(c,d,0,a.column)):c.push(a.column);k&&(f.applyingState=!0,f.removeAll(!1),delete f.applyingState,f.add(c),f.purgeCache())}},getColumnsState:function(){var a,b=[];return this.items.each(function(c){(a=c.getColumnState&&c.getColumnState())&&b.push(a)}),b},onAdd:function(b){var a=this;a.callParent(arguments),a.onHeadersChanged(b,a.isDDMoveInGrid)},move:function(b,e){var a,c=this,d=c.items;b.isComponent?(a=b,b=d.indexOf(a)):a=d.getAt(b),a.visibleFromIdx=c.getRootHeaderCt().visibleColumnManager.indexOf(a),c.callParent(arguments)},onMove:function(a,g,h){var b,c=this,e=c.getRootHeaderCt(),f=e.visibleColumnManager,d=1;c.onHeadersChanged(a,!0),(b=f.indexOf(a))>=a.visibleFromIdx&&b++,c.callParent(arguments),a.isGroupHeader&&(d=a.visibleColumnManager.getColumns().length),e.onHeaderMoved(a,d,a.visibleFromIdx,b)},maybeContinueRemove:function(){var a=this;return a.isGroupHeader&&!a.applyingState&&!a.isNestedParent&&a.ownerCt&&!a.items.getCount()},onRemove:function(b,c){var a=this,d=a.ownerCt;b.lastHiddenHeader;a.callParent([b,c]),a.destroying||(a.isDDMoveInGrid||a.onHeadersChanged(b,!1),a.maybeContinueRemove()&&(b.rendered&&a.detachComponent(b),Ext.suspendLayouts(),d.remove(a),Ext.resumeLayouts(!0)))},onHeadersChanged:function(c,d){var b,a=this.getRootHeaderCt();this.purgeHeaderCtCache(this),a&&(a.onColumnsChanged(),c.isGroupHeader||(b=a.ownerCt)&&!d&&b.onHeadersChanged(a,c))},onHeaderMoved:function(d,f,c,e){var a=this,b=a.ownerCt;a.rendered&&(b&&b.onHeaderMove&&b.onHeaderMove(a,d,f,c,e),a.fireEvent("columnmove",a,d,c,e))},onColumnsChanged:function(){var c,d,a=this,b=a.menu;a.rendered&&(a.fireEvent("columnschanged",a),b&&(c=b.child("#columnItemSeparator"))&&(d=b.child("#columnItem"),c.destroy(),d.destroy()))},lookupComponent:function(b){var a=this.callParent(arguments);return a.isGroupHeader||void 0!==a.width||a.flex||(a.width=this.defaultWidth),a},setSortState:function(){var c,b,a,e=this.up("[store]").store,d=this.visibleColumnManager.getColumns(),f=d.length;for(c=0;c<f;c++)(a=(b=d[c]).getSorter())?e.getSorters().contains(a)||(a=null):a=e.getSorters().get(b.getSortParam()),b.setSortState(a)},getHeaderMenu:function(){var a,b=this.getMenu();return b&&(a=b.child("#columnItem"))?a.menu:null},onHeaderVisibilityChange:function(d,e){var b,a=this,c=a.getHeaderMenu();a.purgeHeaderCtCache(d.ownerCt),c&&((b=a.getMenuItemForHeader(c,d))&&b.setChecked(e,!0),c.isVisible()&&a.menuTask.delay(50))},updateMenuDisabledState:function(e){var b,d,a,c,f=this,g=f.query("gridcolumn:not([hidden])"),h=g.length;for(e=e||f.getMenu(),b=0;b<h;++b)d=g[b],(a=f.getMenuItemForHeader(e,d))&&(c=d.isHideable()?"enable":"disable",a.menu&&(c+="CheckChange"),a[c]())},getMenuItemForHeader:function(b,a){return a?b.down("menucheckitem[headerId="+a.id+"]"):null},onHeaderShow:function(b){var a=this,d=a.ownerCt,c=b.lastHiddenHeader;d&&(a.forceFit&&delete a.flex,c&&!b.query("[hidden=false]").length&&(c.show(),b.lastHiddenHeader=null),a.onHeaderVisibilityChange(b,!0),d.onHeaderShow(a,b),a.fireEvent("columnshow",a,b),a.fireEvent("columnschanged",this))},onHeaderHide:function(b){var a=this,c=a.ownerCt;c&&(a.onHeaderVisibilityChange(b,!1),c.onHeaderHide(a,b),a.fireEvent("columnhide",a,b),a.fireEvent("columnschanged",this))},onHeaderResize:function(c,d){var a=this,b=a.ownerCt;b&&b.onHeaderResize(a,c,d),a.fireEvent("columnresize",a,c,d)},onHeaderClick:function(a,c,e){var b=this,d=a.getView().getSelectionModel();a.fireEvent("headerclick",b,a,c,e),!1!==b.fireEvent("headerclick",b,a,c,e)&&d.onHeaderClick&&d.onHeaderClick(b,a,c)},onHeaderContextMenu:function(a,b,c){a.fireEvent("headercontextmenu",this,a,b,c),this.fireEvent("headercontextmenu",this,a,b,c)},onHeaderTriggerClick:function(a,c,d){var b=this;!1!==a.fireEvent("headertriggerclick",b,a,c,d)&&!1!==b.fireEvent("headertriggerclick",b,a,c,d)&&(a.activeMenu?c.pointerType?a.activeMenu.hide():a.activeMenu.focus():b.showMenuBy(c,d,a))},showMenuBy:function(b,g,d){var c,a=this.getMenu(),f=a.down("#ascItem"),e=a.down("#descItem");b&&b.pointerType;a.activeHeader=a.ownerCmp=d,d.setMenuActive(a),c=d.sortable?"enable":"disable",f&&f[c](),e&&e[c](),a.autoFocus=!b||b.keyCode,a.showBy(g,"tl-bl?"),a.isVisible()||this.onMenuHide(a)},hideMenu:function(){this.menu&&this.menu.hide()},onMenuHide:function(a){a.activeHeader.setMenuActive(!1)},purgeHeaderCtCache:function(a){for(;a;){if(a.purgeCache(),a.isRootHeader)return;a=a.ownerCt}},purgeCache:function(){var a=this,b=a.visibleColumnManager,c=a.columnManager;a.gridVisibleColumns=a.gridDataColumns=a.hideableColumns=null,b&&(b.invalidate(),c.invalidate())},getMenu:function(){var a=this,b=a.view&&a.view.ownerGrid;return a.menu||(a.menu=new Ext.menu.Menu({hideOnParentHide:!1,items:a.getMenuItems(),listeners:{beforeshow:a.beforeMenuShow,hide:a.onMenuHide,scope:a}}),a.fireEvent("menucreate",a,a.menu),b&&b.fireEvent("headermenucreate",b,a.menu,a)),a.menu},beforeMenuShow:function(d){var b,c,a=this;d.child("#columnItem")||(b=a.enableColumnHide?a.getColumnMenu(a):null,c=a.sortable?2:0,b&&b.length&&d.insert(c,[{itemId:"columnItemSeparator",xtype:"menuseparator"},{itemId:"columnItem",text:a.columnsText,iconCls:a.menuColsIcon,menu:{items:b},hideOnClick:!1}])),a.updateMenuDisabledState(a.menu)},getMenuItems:function(){var a=this,b=[],c=a.enableColumnHide?a.getColumnMenu(a):null;return a.sortable&&(b=[{itemId:"ascItem",text:a.sortAscText,iconCls:a.menuSortAscCls,handler:a.onSortAscClick,scope:a},{itemId:"descItem",text:a.sortDescText,iconCls:a.menuSortDescCls,handler:a.onSortDescClick,scope:a}]),c&&c.length&&(a.sortable&&b.push({itemId:"columnItemSeparator",xtype:"menuseparator"}),b.push({itemId:"columnItem",text:a.columnsText,iconCls:a.menuColsIcon,menu:c,hideOnClick:!1})),b},onSortAscClick:function(){this.getMenu().activeHeader.sort("ASC")},onSortDescClick:function(){this.getMenu().activeHeader.sort("DESC")},getColumnMenu:function(f){for(var a,d,b=[],c=0,e=f.query(">gridcolumn[hideable]"),g=e.length;c<g;c++)a=e[c],d=new Ext.menu.CheckItem({text:a.menuText||a.text,checked:!a.hidden,hideOnClick:!1,headerId:a.id,menu:a.isGroupHeader?this.getColumnMenu(a):void 0,checkHandler:this.onColumnCheckChange,scope:this}),b.push(d);return b.length?b:null},onColumnCheckChange:function(c,b){var a=Ext.getCmp(c.headerId);a.rendered?a[b?"show":"hide"]():a.hidden=!b},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var a,b=0,c=this.getVisibleGridColumns(),d=c.length;for(a=0;a<d;a++)b+=c[a].getCellWidth()||0;return b},getVisibleGridColumns:function(){var e,f,a,g,d,c,b=this;if(b.gridVisibleColumns)return b.gridVisibleColumns;for(e=b.getGridColumns(),f=b.getRootHeaderCt(),a=[],g=e.length,d=0;d<g;d++)(c=e[d]).hidden||c.isColumnHidden(f)||(a[a.length]=c);return b.gridVisibleColumns=a},isColumnHidden:function(b){for(var a=this.getRefOwner();a&&a!==b;){if(a.hidden)return!0;a=a.getRefOwner()}return!1},getGridColumns:function(g,f){if(!g&&this.gridDataColumns)return this.gridDataColumns;var h,b,d,a,e,i=this,c=g||[];if(f=f||i.hidden,i.items&&(h=i.items.items))for(b=0,d=h.length;b<d;b++)(a=h[b]).isGroupHeader?(a.visibleIndex=c.length,a.getGridColumns(c,f)):(a.hiddenAncestor=f,c.push(a));if(g||(i.gridDataColumns=c),!g&&d){for(b=0,d=c.length;b<d;b++)(a=c[b]).fullColumnIndex=b,a.isFirstVisible=a.isLastVisible=!1,a.hidden||a.hiddenAncestor||(e||(a.isFirstVisible=!0),e=a);e&&(e.isLastVisible=!0)}return c},getHideableColumns:function(){var b=this,a=b.hideableColumns;return a=a||(b.hideableColumns=b.query("[hideable]"))},getHeaderIndex:function(a){return this.columnManager||(this.columnManager=this.getRootHeaderCt().columnManager),this.columnManager.getHeaderIndex(a)},getHeaderAtIndex:function(a){return this.columnManager||(this.columnManager=this.getRootHeaderCt().columnManager),this.columnManager.getHeaderAtIndex(a)},getVisibleHeaderClosestToIndex:function(a){return this.visibleColumnManager||(this.visibleColumnManager=this.getRootHeaderCt().visibleColumnManager),this.visibleColumnManager.getVisibleHeaderClosestToIndex(a)},applyForceFit:function(b){var f,c,a,g,d,k=this,j=k.view,i=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,l=!1,m=Ext.grid.header.Container.prototype.defaultWidth,h=k.el.dom.clientWidth-(j.el.dom.scrollHeight>j.el.dom.clientHeight?Ext.getScrollbarSize().width:0),n=0,e=k.getVisibleGridColumns(),o=b.hidden;Ext.suspendLayouts(),g=h-(e.length+1)*i,b.flex=null,o?(d=b.width||b.savedWidth,b.savedWidth=null):d=j.getMaxContentWidth(b),g<d?(b.width=g,l=!0):(b.width=d,h-=d+m,function(){for(c=0,f=e.length;c<f;c++)(a=e[c])!==b&&(a.flex=a.flex||a.width||a.getWidth(),n+=a.flex,a.width=null)}()),function(){var g;for(c=0,f=e.length;c<f;c++)g=(a=e[c])===b,l&&!g?(a.flex=i,a.width=null):g||(d=a.flex||m,a.flex=Math.max(Math.ceil(d/n*h),i),a.width=null),a.setWidth(a.width||a.flex)}(),Ext.resumeLayouts(!0)},autoSizeColumn:function(a){var b=this.view;b&&(b.autoSizeColumn(a),this.forceFit&&this.applyForceFit(a))},getRefItems:function(b){var a=this.callParent([b]);return this.menu&&a.push(this.menu),a},privates:{beginChildHide:function(){++this.childHideCount},endChildHide:function(){--this.childHideCount},getFocusables:function(){return this.isRootHeader?this.getVisibleGridColumns():this.items.items},createFocusableContainerKeyNav:function(b){var a=this;return new Ext.util.KeyNav(b,{scope:a,down:a.showHeaderMenu,left:a.onFocusableContainerLeftKey,right:a.onFocusableContainerRightKey,home:a.onHomeKey,end:a.onEndKey,space:a.onHeaderActivate,enter:a.onHeaderActivate})},onHomeKey:function(a){return this.focusChild(null,!0,a)},onEndKey:function(a){return this.focusChild(null,!1,a)},showHeaderMenu:function(b){var a=this.getFocusableFromEvent(b);a&&a.isColumn&&a.triggerEl&&this.onHeaderTriggerClick(a,b,a.triggerEl)},onHeaderActivate:function(d){var c,b,a=this.getFocusableFromEvent(d);a&&a.isColumn&&(c=a.getView(),a.sortable&&this.sortOnClick&&(b=c.getNavigationModel().getLastFocused(),a.toggleSortState(),b&&c.ownerCt.ensureVisible(b.record)),this.onHeaderClick(a,d,a.el))},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.fromElement(b);a===this?c.preventDefault():a.focus()}}}),Ext.define("Ext.grid.column.Column",{extend:Ext.grid.header.Container,xtype:"gridcolumn",alternateClassName:"Ext.grid.Column",config:{triggerVisible:!1,sorter:null},baseCls:Ext.baseCSSPrefix+"column-header",hoverCls:Ext.baseCSSPrefix+"column-header-over",ariaRole:"columnheader",enableFocusableContainer:!1,sortState:null,possibleSortStates:["ASC","DESC"],ariaSortStates:{ASC:"ascending",DESC:"descending"},childEls:["titleEl","triggerEl","textEl","textContainerEl"],headerWrap:!1,renderTpl:['<div id="{id}-titleEl" data-ref="titleEl" role="presentation"','{tipMarkup}class="',Ext.baseCSSPrefix,'column-header-inner<tpl if="!$comp.isContainer"> ',Ext.baseCSSPrefix,"leaf-column-header</tpl>",'<tpl if="empty"> ',Ext.baseCSSPrefix,'column-header-inner-empty</tpl>">','<div id="{id}-textContainerEl" data-ref="textContainerEl" role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-container">','<div role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-wrapper">','<div id="{id}-textEl" data-ref="textEl" role="presentation" class="',Ext.baseCSSPrefix,"column-header-text",'{childElCls}">','<span role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-inner">{text}</span>',"</div>","</div>","</div>",'<tpl if="!menuDisabled">','<div id="{id}-triggerEl" data-ref="triggerEl" role="presentation" class="',Ext.baseCSSPrefix,"column-header-trigger",'{childElCls}" style="{triggerStyle}"></div>',"</tpl>","</div>","{%this.renderContainer(out,values)%}"],dataIndex:null,text:"&#160;",menuText:null,emptyCellText:"&#160;",sortable:!0,resizable:!0,hideable:!0,menuDisabled:!1,renderer:!1,align:"left",draggable:!0,tooltipType:"qtip",initDraggable:Ext.emptyFn,tdCls:"",producesHTML:!0,ignoreExport:!1,isHeader:!0,isColumn:!0,tabIndex:-1,ascSortCls:Ext.baseCSSPrefix+"column-header-sort-ASC",descSortCls:Ext.baseCSSPrefix+"column-header-sort-DESC",componentLayout:"columncomponent",groupSubHeaderCls:Ext.baseCSSPrefix+"group-sub-header",groupHeaderCls:Ext.baseCSSPrefix+"group-header",clickTargetName:"titleEl",detachOnRemove:!0,initResizable:Ext.emptyFn,rendererNames:{column:"renderer",edit:"editRenderer",summary:"summaryRenderer"},formatterNames:{column:"formatter",edit:"editFormatter",summary:"summaryFormatter"},initComponent:function(){var a=this;a.rendererScope||(a.rendererScope=a.scope),null!=a.header&&(a.text=a.header,a.header=null),a.cellWrap&&(a.tdCls=(a.tdCls||"")+" "+Ext.baseCSSPrefix+"wrap-cell"),null!=a.columns?(a.isGroupHeader=!0,a.ariaRole="presentation",a.items=a.columns,a.columns=a.flex=a.width=null,a.cls=(a.cls||"")+" "+a.groupHeaderCls,a.sortable=a.resizable=!1,a.align="center"):a.flex&&(a.minWidth=a.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth),a.addCls(Ext.baseCSSPrefix+"column-header-align-"+a.align),a.setupRenderer(),a.setupRenderer("edit"),a.setupRenderer("summary"),a.callParent(arguments)},onAdded:function(e,g,f){var c,d,b,a=this;a.callParent([e,g,f]),a.headerId||((b=(d=a.up("tablepanel"))?d.ownerGrid:a.getRootHeaderCt()).headerCounter=(b.headerCounter||0)+1,a.headerId="h"+b.headerCounter),a.stateId||(a.stateId=a.initialConfig.id||a.headerId),(c=a.getSorter())&&!c.initialConfig.id&&c.setId((a.dataIndex||a.stateId)+"-sorter")},applySorter:function(a){return this.getRootHeaderCt().up("tablepanel").store.getData().getSorters().decodeSorter(a)},bindFormatter:function(a){var b=this;return function(c){return a.format(c,a.scope||b.rendererScope||b.resolveListenerScope())}},bindRenderer:function(b){var a=this;return a.hasCustomRenderer=!0,function(){return Ext.callback(b,a.rendererScope,arguments,0,a)}},setupRenderer:function(c){c=c||"column";var e,g,a=this,b=a[a.formatterNames[c]],d=a[a.rendererNames[c]],f="column"===c;b?((e=0===b.indexOf("this."))&&(b=b.substring(5)),b=Ext.app.bind.Template.prototype.parseFormat(b),a[a.formatterNames[c]]=null,e&&(b.scope=null),a[a.rendererNames[c]]=a.bindFormatter(b)):d?("string"==typeof d&&(d=a[a.rendererNames[c]]=a.bindRenderer(d),g=!0),f&&(a.hasCustomRenderer=g||1<d.length)):f&&a.defaultRenderer&&(a.renderer=a.defaultRenderer,a.usingDefaultRenderer=!0)},getView:function(){var a=this.getRootHeaderCt();if(a)return a.view},onFocusLeave:function(a){this.callParent([a]),this.activeMenu&&this.activeMenu.hide()},initItems:function(){var a=this;a.callParent(arguments),a.isGroupHeader&&(!a.config.hidden&&a.hasVisibleChildColumns()||a.hide())},hasVisibleChildColumns:function(){var a,b,c=this.items.items,d=c.length;for(a=0;a<d;++a)if((b=c[a]).isColumn&&!b.hidden)return!0;return!1},onAdd:function(b){var a=this;b.isColumn&&(b.isSubHeader=!0,b.addCls(a.groupSubHeaderCls)),a.isGroupHeader&&a.hidden&&a.hasVisibleChildColumns()&&a.show(),a.callParent([b])},onRemove:function(b,c){var a=this;b.isSubHeader&&(b.isSubHeader=!1,b.removeCls(a.groupSubHeaderCls)),a.callParent([b,c]),a.destroyed||a.destroying||a.hasVisibleChildColumns()||a.ownerCt.isNested()||a.hide()},initRenderData:function(){var a=this,c="",d=a.tooltip,b=a.text,e="qtip"===a.tooltipType?"data-qtip":"title";return Ext.isEmpty(d)||(c=e+'="'+d+'" '),Ext.applyIf(a.callParent(arguments),{text:b,empty:"&#160;"===b||" "===b||""===b,menuDisabled:a.menuDisabled,tipMarkup:c,triggerStyle:this.getTriggerVisible()?"display:block":""})},applyColumnState:function(a,g){var h,c,f,b=this,e=b.getSorter(),d=g&&g.sorters;if(e&&d&&(h=d.length))for(f=e.getId(),c=0;c<h;c++)if(d[c].id===f){e.setDirection(d[c].direction),d[c]=e;break}b.applyColumnsState(a.columns),null!=a.hidden&&(b.hidden=a.hidden),null!=a.locked&&(b.locked=a.locked),null!=a.sortable&&(b.sortable=a.sortable),null!=a.width?(b.flex=null,b.width=a.width):null!=a.flex&&(b.width=null,b.flex=a.flex)},getColumnState:function(){var c,b=this,e=b.items.items,f=e?e.length:0,d=[],a={id:b.getStateId()};if(b.savePropsToState(["hidden","sortable","locked","flex","width"],a),b.isGroupHeader){for(c=0;c<f;c++)d.push(e[c].getColumnState());d.length&&(a.columns=d)}return"width"in a&&delete a.flex,a},setText:function(a){this.text=a,this.rendered&&this.textEl.setHtml(a)},getIndex:function(){return!this.isGroupColumn&&this.getRootHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return null!=this.visibleIndex?this.visibleIndex:!this.isGroupColumn&&Ext.Array.indexOf(this.getRootHeaderCt().getVisibleGridColumns(),this)},getLabelChain:function(){for(var a,c=this,b=[];a=c.up("headercontainer");)a.text&&b.unshift(Ext.util.Format.stripTags(a.text)),c=a;return b},beforeRender:function(){var b,a=this,d=a.getRootHeaderCt(),e=a.isSortable(),c=[];a.callParent(),e||a.groupable||a.lockable||!1!==d.grid.enableColumnHide&&d.getHideableColumns().length||(a.menuDisabled=!0),a.cellWrap&&(a.variableRowHeight=!0),(b=a.ariaRenderAttributes||(a.ariaRenderAttributes={}))["aria-readonly"]=!0,e&&(b["aria-sort"]=a.ariaSortStates[a.sortState]),a.isSubHeader&&(c=a.getLabelChain(),a.text&&c.push(Ext.util.Format.stripTags(a.text)),c.length&&(b["aria-label"]=c.join(" "))),a.protoEl.unselectable()},getTriggerElWidth:function(){var c=this,a=c.triggerEl,b=c.self.triggerElWidth;return a&&void 0===b&&(a.setStyle("display","block"),b=c.self.triggerElWidth=a.getWidth(),a.setStyle("display","")),b},afterComponentLayout:function(d,f,c,e){var a=this,b=a.getRootHeaderCt();a.callParent(arguments),b&&(null!=c||a.flex)&&d!==c&&b.onHeaderResize(a,d)},onDestroy:function(){var a=this;Ext.destroy(a.field),a.field=null,a.callParent(arguments)},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(a){this.triggerEl&&this.onTitleElClick(a,this.triggerEl.dom||this.el.dom)},onEnterKey:function(a){this.onTitleElClick(a,this.el.dom)},onTitleElDblClick:function(e){var b,c,d,a=this;if(a.isAtStartEdge(e))(b=a.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])"))&&b.getRootHeaderCt()===a.getRootHeaderCt()&&b.autoSize();else if(a.isAtEndEdge(e)){if(a.isGroupHeader&&e.getPoint().isContainedBy(a.layout.innerCt))return c=a.query("gridcolumn:not([hidden]):not([isGroupHeader])"),void a.getRootHeaderCt().autoSizeColumn(c[c.length-1]);if(1===(d=a.getRootHeaderCt()).visibleColumnManager.getColumns().length&&d.forceFit)return;a.autoSize()}},autoSize:function(){var c,d,b,e,a=this;if(a.isGroupHeader){for(d=(c=a.query("gridcolumn:not([hidden]):not([isGroupHeader])")).length,e=a.getRootHeaderCt(),Ext.suspendLayouts(),b=0;b<d;b++)e.autoSizeColumn(c[b]);Ext.resumeLayouts(!0)}else a.getRootHeaderCt().autoSizeColumn(a)},onTitleElClick:function(b,f,e){var c,d,a=this;return"touch"===b.pointerType?(d=a.previousSibling(":not([hidden])"),!a.menuDisabled&&a.isAtEndEdge(b,parseInt(a.triggerEl.getStyle("width"),10))?a.menuDisabled||(c=a):d&&!d.menuDisabled&&a.isAtStartEdge(b)&&(c=d)):c=a.triggerEl&&(b.target===a.triggerEl.dom||f===a.triggerEl||b.within(a.triggerEl))?a:null,!1===e||(c||a.isAtStartEdge(b)||a.isAtEndEdge(b))&&!b.getKey()||a.toggleSortState(),c},processEvent:function(d,e,c,a,b,f){return this.fireEvent.apply(this,arguments)},isSortable:function(){var a=this.getRootHeaderCt(),c=a?a.grid:null,b=this.sortable;return c&&!1===c.sortableColumns&&(b=!1),b},toggleSortState:function(){this.isSortable()&&this.sort()},sort:function(b){var a=this,d=a.up("tablepanel"),e=d.store,c=a.getSorter();Ext.suspendLayouts(),a.sorting=!0,c?(b&&c.setDirection(b),e.sort(c,d.multiColumnSort?"multi":"replace")):e.sort(a.getSortParam(),b,d.multiColumnSort?"multi":"replace"),delete a.sorting,Ext.resumeLayouts(!0)},getSortParam:function(){return this.dataIndex},setSortState:function(h){var e,a=this,g=h&&h.getDirection(),c=a.ascSortCls,b=a.descSortCls,f=a.getRootHeaderCt(),d=a.ariaEl.dom;switch(g){case"DESC":a.hasCls(b)||(a.addCls(b),a.sortState="DESC",e=!0),a.removeCls(c);break;case"ASC":a.hasCls(c)||(a.addCls(c),a.sortState="ASC",e=!0),a.removeCls(b);break;default:a.removeCls([c,b]),a.sortState=null}d&&(a.sortState?d.setAttribute("aria-sort",a.ariaSortStates[a.sortState]):d.removeAttribute("aria-sort")),e&&f.fireEvent("sortchange",f,a,g)},isHideable:function(){var a={hideCandidate:this,result:this.hideable};return a.result&&this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[a]),a.result},hasOtherMenuEnabledChildren:function(b){var a,c;return this.isXType("headercontainer")?(c=(a=this.query(">gridcolumn:not([hidden]):not([menuDisabled])")).length,Ext.Array.contains(a,b.hideCandidate)&&c--,!c&&void(b.hideCandidate=this)):b.result=!1},isLockable:function(){var a={result:!1!==this.lockable};return a.result&&this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[a]),a.result},isLocked:function(){return this.locked||!!this.up("[isColumn][locked]","[isRootHeader]")},hasMultipleVisibleChildren:function(a){return this.isXType("headercontainer")?!(1<this.query(">gridcolumn:not([hidden])").length)&&void 0:a.result=!1},hide:function(){var a=this,b=a.getRootHeaderCt(),c=a.getRefOwner();return c.constructing?a.callParent():a.rendered&&!a.isVisible()||(b.forceFit&&(a.visibleSiblingCount=b.getVisibleGridColumns().length-1,a.flex&&(a.savedWidth=a.getWidth(),a.flex=null)),b.beginChildHide(),Ext.suspendLayouts(),c.isGroupHeader&&(a.isNestedGroupHeader()&&c.hide(),a.isSubHeader&&!a.isGroupHeader&&1===c.query(">gridcolumn:not([hidden])").length&&(c.lastHiddenHeader=a)),a.callParent(),b.endChildHide(),b.onHeaderHide(a),Ext.resumeLayouts(!0)),a},show:function(){var a=this,c=a.getRootHeaderCt(),b=a.getRefOwner();return a.isVisible()||(b.isGroupHeader&&(b.lastHiddenHeader=null),a.rendered&&c.forceFit&&c.applyForceFit(a),Ext.suspendLayouts(),a.isSubHeader&&b.hidden&&b.show(!1,!0),a.callParent(arguments),a.isGroupHeader&&a.maybeShowNestedGroupHeader(),(b=a.getRootHeaderCt())&&b.onHeaderShow(a),Ext.resumeLayouts(!0)),a},shouldUpdateCell:function(d,b){if(!this.preventUpdate){if(this.hasCustomRenderer)return 1;if(!b)return 2;var a,c,e=b.length;for(a=0;a<e;++a)if((c=b[a])===this.dataIndex||c===d.idProperty)return 2}},getCellWidth:function(){var b,a=this;return a.rendered&&a.componentLayout&&a.componentLayout.lastComponentSize?b=a.componentLayout.lastComponentSize.width:a.width?b=a.width:a.isColumn||(b=a.getTableWidth()),b},getCellId:function(){return Ext.baseCSSPrefix+"grid-cell-"+this.getItemId()},getCellSelector:function(){var a=this.getView();return(a?a.getCellSelector():"")+"."+this.getCellId()},getCellInnerSelector:function(){return this.getCellSelector()+" ."+Ext.baseCSSPrefix+"grid-cell-inner"},isAtStartEdge:function(b){var a=b.getXY()[0]-this.getX();return!(a<0&&0===this.getIndex())&&a<this.getHandleWidth(b)},isAtEndEdge:function(a,b){return this.getX()+this.getWidth()-a.getXY()[0]<=(b||this.getHandleWidth(a))},getHandleWidth:function(a){return"touch"===a.pointerType?10:4},setMenuActive:function(a){this.activeMenu=a,this.titleEl[a?"addCls":"removeCls"](this.headerOpenCls)},deprecated:{5:{methods:{bindRenderer:function(a){return function(b){return Ext.util.Format[a](b)}}}}}}),Ext.define("Ext.theme.triton.grid.column.Column",{override:"Ext.grid.column.Column",compatibility:Ext.isIE8,onTitleMouseOver:function(){var a=this.triggerEl;this.callParent(arguments),a&&a.syncRepaint()}}),Ext.define("Ext.grid.column.Action",{extend:Ext.grid.column.Column,alias:["widget.actioncolumn"],alternateClassName:"Ext.grid.ActionColumn",stopSelection:!0,actionIdRe:new RegExp(Ext.baseCSSPrefix+"action-col-(\\d+)"),altText:"",menuText:"<i>Actions</i>",ignoreExport:!0,sortable:!1,innerCls:Ext.baseCSSPrefix+"grid-cell-inner-action-col",actionIconCls:Ext.baseCSSPrefix+"action-col-icon",constructor:function(g){var e,c,f,a=this,b=Ext.apply({},g),d=b.items||a.items||[a];for(a.origRenderer=b.renderer||a.renderer,a.origScope=b.scope||a.scope,a.renderer=a.scope=b.renderer=b.scope=null,b.items=null,a.callParent([b]),c=0,f=(a.items=d).length;c<f;++c)if(d[c].getClass){e=!0;break}(a.origRenderer||e)&&(a.hasCustomRenderer=!0)},initComponent:function(){var a=this;a.callParent(),a.sortable&&!a.dataIndex&&(a.sortable=!1)},defaultRenderer:function(r,k,m,n,l,q,o){var c,a,h,f,g,i,e,b=this,d=b.origScope||b,j=b.items,p=j.length;for(h=Ext.isFunction(b.origRenderer)&&b.origRenderer.apply(d,arguments)||"",k.tdCls+=" "+Ext.baseCSSPrefix+"action-col-cell",c=0;c<p;c++)e=(a=j[c]).icon,g=(f=a.disabled||!!a.isDisabled&&a.isDisabled.call(a.scope||d,o,n,l,a,m))?null:a.tooltip||(a.getTip?a.getTip.apply(a.scope||d,arguments):null),i=a.getAltText?a.getAltText.apply(a.scope||d,arguments):a.altText||b.altText,a.hasActionConfiguration||(a.stopSelection=b.stopSelection,a.disable=Ext.Function.bind(b.disableAction,b,[c],0),a.enable=Ext.Function.bind(b.enableAction,b,[c],0),a.hasActionConfiguration=!0),h+="<"+(e?"img":"div")+' tabIndex="0" role="button"'+(e?' alt="'+i+'" src="'+a.icon+'"':"")+' class="'+b.actionIconCls+" "+Ext.baseCSSPrefix+"action-col-"+String(c)+" "+(f?b.disabledCls+" ":" ")+(Ext.isFunction(a.getClass)?a.getClass.apply(a.scope||d,arguments):a.iconCls||b.iconCls||"")+'"'+(g?' data-qtip="'+g+'"':"")+(e?"/>":"></div>");return h},updater:function(e,d,c,f,b){var a={};Ext.fly(e).addCls(a.tdCls).down(this.getView().innerSelector,!0).innerHTML=this.defaultRenderer(d,a,c,null,null,b,f)},enableAction:function(a,c){var b=this;a?Ext.isNumber(a)||(a=Ext.Array.indexOf(b.items,a)):a=0,b.items[a].disabled=!1,b.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+a).removeCls(b.disabledCls),c||b.fireEvent("enable",b)},disableAction:function(a,c){var b=this;a?Ext.isNumber(a)||(a=Ext.Array.indexOf(b.items,a)):a=0,b.items[a].disabled=!0,b.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+a).addCls(b.disabledCls),c||b.fireEvent("disable",b)},beforeDestroy:function(){return this.renderer=this.items=null,this.callParent(arguments)},processEvent:function(f,g,n,h,i,d,l,o){var m,b,j,a=this,c=d.getTarget(),e="keydown"===f&&d.getKey(),k=Ext.fly(n);if(d.stopSelection=!e&&a.stopSelection,e&&(c===n||!k.contains(c))){if(1!==(c=k.query("."+a.actionIconCls,!0)).length)return;c=c[0]}if(c&&(m=c.className.match(a.actionIdRe))&&(j=(b=a.items[parseInt(m[1],10)]).disabled||!!b.isDisabled&&b.isDisabled.call(b.scope||a.origScope||a,g,h,i,b,l),b&&!j))if("mousedown"!==f||a.getView().actionableMode){if(("click"===f||e===d.ENTER||e===d.SPACE)&&(Ext.callback(b.handler||a.handler,b.scope||a.origScope,[g,h,i,b,d,l,o],void 0,a),!g.el.contains(Ext.Element.getActiveElement())))return!1}else d.preventDefault();return a.callParent(arguments)},cascade:function(b,a){b.call(a||this,this)},getRefItems:function(){return[]},privates:{getFocusables:function(){return[]},shouldUpdateCell:function(){return 2}}}),Ext.define("Ext.theme.triton.grid.column.RowNumberer",{override:"Ext.grid.column.RowNumberer",width:32}),Ext.define("Ext.menu.Item",{extend:Ext.Component,alias:"widget.menuitem",alternateClassName:"Ext.menu.TextItem",isMenuItem:!0,mixins:[Ext.mixin.Queryable],activated:!1,activeCls:Ext.baseCSSPrefix+"menu-item-active",clickHideDelay:0,destroyMenu:!0,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",hideOnClick:!0,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:!0,ariaRole:"menuitem",ariaEl:"itemEl",baseCls:Ext.baseCSSPrefix+"menu-item",arrowCls:Ext.baseCSSPrefix+"menu-item-arrow",baseIconCls:Ext.baseCSSPrefix+"menu-item-icon",textCls:Ext.baseCSSPrefix+"menu-item-text",indentCls:Ext.baseCSSPrefix+"menu-item-indent",indentNoSeparatorCls:Ext.baseCSSPrefix+"menu-item-indent-no-separator",indentRightIconCls:Ext.baseCSSPrefix+"menu-item-indent-right-icon",indentRightArrowCls:Ext.baseCSSPrefix+"menu-item-indent-right-arrow",linkCls:Ext.baseCSSPrefix+"menu-item-link",linkHrefCls:Ext.baseCSSPrefix+"menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="ariaAttributes"> {$}="{.}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:!1,iconAlign:"left",initComponent:function(){var c,a=this,b=a.cls?[a.cls]:[];a.hasOwnProperty("canActivate")&&(a.focusable=a.canActivate),a.plain&&b.push(Ext.baseCSSPrefix+"menu-item-plain"),b.length&&(a.cls=b.join(" ")),a.menu&&(c=a.menu,a.menu=null,a.setMenu(c)),a.callParent(arguments)},canFocus:function(){var a=this;return a.focusable&&a.rendered&&!1!==a.canActivate&&!a.destroying&&!a.destroyed&&a.isVisible(!0)},onFocus:function(b){var a=this;a.callParent([b]),a.disabled||(a.plain||a.addCls(a.activeCls),a.activated=!0,a.hasListeners.activate&&a.fireEvent("activate",a))},onFocusLeave:function(b){var a=this;a.callParent([b]),a.activated&&(a.plain||a.removeCls(a.activeCls),a.doHideMenu(),a.activated=!1,a.hasListeners.deactivate&&a.fireEvent("deactivate",a))},doHideMenu:function(){var a=this.menu;this.cancelDeferExpand(),a&&a.isVisible()&&a.hide()},deferHideParentMenus:function(){for(var a=this.getRefOwner();a&&(a.isMenu&&a.floating||a.isMenuItem);a=a.getRefOwner())a.isMenu&&a.hide()},expandMenu:function(c,b){var a=this;a.activated&&a.menu&&(a.hideOnClick=!1,a.cancelDeferHide(),0===(b=null==b?a.menuExpandDelay:b)?a.doExpandMenu(c):(a.cancelDeferExpand(),a.expandMenuTimer=Ext.defer(a.doExpandMenu,b,a,[c])))},doExpandMenu:function(c){var b=this,a=b.menu;a.isVisible()||((b.parentMenu.activeChild=a).ownerCmp=b,a.parentMenu=b.parentMenu,a.constrainTo=document.body,a.autoFocus=!c||!c.pointerType,a.showBy(b,b.menuAlign))},getRefItems:function(c){var a,b=this.menu;return b&&(a=b.getRefItems(c)).unshift(b),a||[]},getValue:function(){return this.value},hideMenu:function(b){var a=this;a.menu&&(a.cancelDeferExpand(),a.hideMenuTimer=Ext.defer(a.doHideMenu,Ext.isNumber(b)?b:a.menuHideDelay,a))},onClick:function(b){var d,c,a=this,e=a.clickHideDelay,f=b.browserEvent;return!((!a.href||a.disabled)&&(b.stopEvent(),a.disabled))&&(a.disabled||a.handlingClick||(a.hideOnClick&&(e?a.deferHideParentMenusTimer=Ext.defer(a.deferHideParentMenus,e,a):a.deferHideParentMenus()),d=a.fireEvent("click",a,b),a.destroyed)?void 0:(!1!==d&&a.handler&&Ext.callback(a.handler,a.scope,[a,b],0,a),c=Ext.isIE9m?!1===f.returnValue:!!f.defaultPrevented,a.href&&"click"!==b.type&&!c&&(a.handlingClick=!0,a.itemEl.dom.click(),a.handlingClick=!1),a.hideOnClick||a.focus(),d))},onRemoved:function(){var a=this;a.activated&&a.parentMenu.activeItem===a&&a.parentMenu.deactivateActiveItem(),a.callParent(arguments),a.parentMenu=a.ownerCmp=null},beforeDestroy:function(){var a=this;a.rendered&&a.clearTip(),a.callParent()},onDestroy:function(){var a=this;a.cancelDeferExpand(),a.cancelDeferHide(),clearTimeout(a.deferHideParentMenusTimer),a.setMenu(null),a.callParent(arguments)},beforeRender:function(){var h,a=this,c=a.glyph,j=Ext._glyphFontFamily,b=!!(a.icon||a.iconCls||c),f=!!a.menu,i="right"===a.iconAlign&&!f,e=a.isMenuCheckItem,d=[],k=a.ownerCt,g=k.plain;a.plain&&(a.ariaEl="el"),a.callParent(),b&&f&&a.showCheckbox&&(b=!1),"string"==typeof c&&(c=(h=c.split("@"))[0],j=h[1]),(!g||b&&!i||e)&&(k.showSeparator&&!g?d.push(a.indentCls):d.push(a.indentNoSeparatorCls)),f?d.push(a.indentRightArrowCls):b&&(i||e)&&d.push(a.indentRightIconCls),Ext.applyIf(a.renderData,{hasHref:!!a.href,href:a.href||"#",hrefTarget:a.hrefTarget,icon:a.icon,iconCls:a.iconCls,glyph:c,glyphCls:c?Ext.baseCSSPrefix+"menu-item-glyph":void 0,glyphFontFamily:j,hasIcon:b,hasMenu:f,indent:!g||b||e,isCheckItem:e,rightIcon:i,plain:a.plain,text:a.text,arrowCls:a.arrowCls,baseIconCls:a.baseIconCls,textCls:a.textCls,indentCls:d.join(" "),linkCls:a.linkCls,linkHrefCls:a.linkHrefCls,groupCls:a.group?a.groupCls:"",tabIndex:a.tabIndex})},onRender:function(){var a=this;a.callParent(arguments),a.tooltip&&a.setTooltip(a.tooltip,!0)},getMenu:function(){return this.menu||null},setMenu:function(b,f){var c,g,a=this,e=a.menu,h=a.arrowEl,d=a.ariaEl.dom;e&&(e.ownerCmp=e.parentMenu=null,(!0===f||!1!==f&&a.destroyMenu)&&Ext.destroy(e),d?(d.removeAttribute("aria-haspopup"),d.removeAttribute("aria-owns")):(delete(c=a.ariaRenderAttributes||(a.ariaRenderAttributes={}))["aria-haspopup"],delete c["aria-owns"])),b?(g=b.isMenu,(b=a.menu=Ext.menu.Manager.get(b,{ownerCmp:a,focusOnToFront:!1})).setOwnerCmp(a,g),d?(d.setAttribute("aria-haspopup",!0),d.setAttribute("aria-owns",b.id)):((c=a.ariaRenderAttributes||(a.ariaRenderAttributes={}))["aria-haspopup"]=!0,c["aria-owns"]=b.id)):b=a.menu=null,b&&a.rendered&&!a.destroying&&h&&h[b?"addCls":"removeCls"](a.arrowCls)},setHandler:function(b,a){this.handler=b||null,this.scope=a},setIcon:function(a){var b=this.iconEl,c=this.icon;b&&(b.src=a||Ext.BLANK_IMAGE_URL),this.icon=a,this.fireEvent("iconchange",this,c,a)},setIconCls:function(b){var a=this,c=a.iconEl,d=a.iconCls;c&&(a.iconCls&&c.removeCls(a.iconCls),b&&c.addCls(b)),a.iconCls=b,a.fireEvent("iconchange",a,d,b)},setText:function(b){var a=this,d=a.textEl||a.el,c=a.text;a.text=b,a.rendered&&(d.setHtml(b||""),a.updateLayout()),a.fireEvent("textchange",a,c,b)},getTipAttr:function(){return"qtip"===this.tooltipType?"data-qtip":"title"},clearTip:function(){Ext.quickTipsActive&&Ext.isObject(this.tooltip)&&Ext.tip.QuickTipManager.unregister(this.itemEl)},setTooltip:function(b,c){var a=this;return a.rendered?(c||a.clearTip(),Ext.quickTipsActive&&Ext.isObject(b)?(Ext.tip.QuickTipManager.register(Ext.apply({target:a.itemEl.id},b)),a.tooltip=b):a.itemEl.dom.setAttribute(a.getTipAttr(),b)):a.tooltip=b,a},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)},getFocusEl:function(){return this.plain?this.el:this.itemEl}}}),Ext.define("Ext.theme.triton.menu.Item",{override:"Ext.menu.Item",compatibility:Ext.isIE8,onFocus:function(a){this.callParent([a]),this.repaintIcons()},onFocusLeave:function(a){this.callParent([a]),this.repaintIcons()},privates:{repaintIcons:function(){var c=this.iconEl,a=this.arrowEl,b=this.checkEl;c&&c.syncRepaint(),a&&a.syncRepaint(),b&&b.syncRepaint()}}}),Ext.define("Ext.menu.CheckItem",{extend:Ext.menu.Item,alias:"widget.menucheckitem",checkedCls:Ext.baseCSSPrefix+"menu-item-checked",uncheckedCls:Ext.baseCSSPrefix+"menu-item-unchecked",groupCls:Ext.baseCSSPrefix+"menu-group-icon",hideOnClick:!1,checkChangeDisabled:!1,submenuText:"{0} submenu",ariaRole:"menuitemcheckbox",childEls:["checkEl"],showCheckbox:!0,isMenuCheckItem:!0,checkboxCls:Ext.baseCSSPrefix+"menu-item-checkbox",initComponent:function(){var a=this;a.checked=!!a.checked,a.callParent(arguments),a.group&&(Ext.menu.Manager.registerCheckable(a),!1!==a.initialConfig.hideOnClick&&(a.hideOnClick=!0))},beforeRender:function(){var b,a=this;a.callParent(),Ext.apply(a.renderData,{checkboxCls:a.checkboxCls,showCheckbox:a.showCheckbox}),(b=a.ariaRenderAttributes||(a.ariaRenderAttributes={}))["aria-checked"]=a.menu?"mixed":a.checked,a.menu&&(b["aria-label"]=Ext.String.formatEncode(a.submenuText,a.text))},afterRender:function(){var a=this;a.callParent(),a.checked=!a.checked,a.setChecked(!a.checked,!0),a.checkChangeDisabled&&a.disableCheckChange(),Ext.isGecko&&a.checkEl&&a.checkEl.on("mousedown",a.onMouseDownCheck)},disableCheckChange:function(){var a=this,b=a.checkEl;b&&b.addCls(a.disabledCls),Ext.isIE8&&a.rendered&&a.el.repaint(),a.checkChangeDisabled=!0},enableCheckChange:function(){var a=this,b=a.checkEl;b&&b.removeCls(a.disabledCls),a.checkChangeDisabled=!1},onMouseDownCheck:function(a){a.preventDefault()},onClick:function(b){var a=this;if(!(a.disabled||a.checkChangeDisabled||a.checked&&a.group||a.menu&&"touch"===b.pointerType&&!a.checkEl.contains(b.target))&&(a.setChecked(!a.checked),"keydown"===b.type&&a.menu))return!1;this.callParent([b])},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this),this.callParent(arguments)},setText:function(c){var a=this,b=a.ariaEl.dom;a.callParent([c]),b&&a.menu&&b.setAttribute("aria-label",Ext.String.formatEncode(a.submenuText,c))},setChecked:function(b,d){var a=this,f=a.checkedCls,e=a.uncheckedCls,c=a.el,g=a.ariaEl.dom;a.checked===b||!d&&!1===a.fireEvent("beforecheckchange",a,b)||(c&&(b?(c.addCls(f),c.removeCls(e)):(c.addCls(e),c.removeCls(f))),g&&g.setAttribute("aria-checked",a.menu?"mixed":!!b),a.checked=b,Ext.menu.Manager.onCheckChange(a,b),d||(Ext.callback(a.checkHandler,a.scope,[a,b],0,a),a.fireEvent("checkchange",a,b)))}}),Ext.define("Ext.menu.Separator",{extend:Ext.menu.Item,alias:"widget.menuseparator",focusable:!1,canActivate:!1,hideOnClick:!1,plain:!0,separatorCls:Ext.baseCSSPrefix+"menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(){this.addCls(this.separatorCls),this.callParent()}}),Ext.define("Ext.menu.Menu",{extend:Ext.panel.Panel,alias:"widget.menu",mixins:[Ext.util.FocusableContainer],enableKeyNav:!0,allowOtherMenus:!1,ariaRole:"menu",floating:!0,constrain:!0,hidden:!0,hideMode:"visibility",ignoreParentClicks:!1,isMenu:!0,showSeparator:!0,minWidth:void 0,defaultMinWidth:120,defaultAlign:"tl-bl?",focusOnToFront:!1,bringParentToFront:!1,defaultFocus:":focusable",menuClickBuffer:0,baseCls:Ext.baseCSSPrefix+"menu",_iconSeparatorCls:Ext.baseCSSPrefix+"menu-icon-separator",_itemCmpCls:Ext.baseCSSPrefix+"menu-item-cmp",layout:{type:"vbox",align:"stretchmax",overflowHandler:"Scroller"},initComponent:function(){var a=this,d=[Ext.baseCSSPrefix+"menu"],c=a.bodyCls?[a.bodyCls]:[],e=!1!==a.floating,b={element:"el",click:a.onClick,mouseover:a.onMouseOver,scope:a};Ext.supports.Touch&&(b.pointerdown=a.onMouseOver),a.on(b),a.on({beforeshow:a.onBeforeShow,scope:a}),a.plain&&d.push(Ext.baseCSSPrefix+"menu-plain"),a.cls=d.join(" "),c.push(Ext.baseCSSPrefix+"menu-body",Ext.dom.Element.unselectableCls),a.bodyCls=c.join(" "),e?void 0===a.minWidth&&(a.minWidth=a.defaultMinWidth):(a.hidden=!!a.initialConfig.hidden,a.constrain=!1),a.callParent(arguments),Ext.override(a.getLayout(),{configureItem:a.configureItem})},initFloatConstrain:Ext.emptyFn,getInherited:function(){var a=this.callParent();return a.hidden=this.hidden,a},beforeRender:function(){var a=this;a.callParent(arguments),a.getSizeModel().width.shrinkWrap||(a.layout.align="stretch"),a.floating&&(a.ariaRenderAttributes=a.ariaRenderAttributes||{},a.ariaRenderAttributes["aria-expanded"]=!!a.autoShow)},onBoxReady:function(){var a=this,c=a._iconSeparatorCls,b=a.focusableKeyNav;b?(b.map.processEventScope=a,b.map.processEvent=function(a){return a.keyCode===a.ESC&&(a.target=this.el.dom),a},b.map.addBinding([{key:Ext.event.Event.ESC,handler:a.onEscapeKey,scope:a},{key:/[\w]/,handler:a.onShortcutKey,scope:a,shift:!1,ctrl:!1,alt:!1}])):a.escapeKeyNav=new Ext.util.KeyNav(a.el,{eventName:"keydown",scope:a,esc:a.onEscapeKey}),a.callParent(arguments),a.showSeparator&&(a.iconSepEl=a.body.insertFirst({role:"presentation",cls:c+" "+c+"-"+a.ui,html:"&#160;"})),(Ext.supports.MSPointerEvents||Ext.supports.PointerEvents)&&a.el.on({scope:a,click:a.preventClick,translate:!1}),a.mouseMonitor=a.el.monitorMouseLeave(100,a.onMouseLeave,a)},onFocusLeave:function(b){var a=this;a.callParent([b]),a.mixins.focusablecontainer.onFocusLeave.call(a,b),a.floating&&a.hide()},canActivateItem:function(a){return a&&a.isFocusable()},deactivateActiveItem:function(){var a=this.lastFocusedChild;a&&a.blur()},getItemFromEvent:function(d){for(var b=this.layout.getRenderTarget().dom,a=d.getTarget();a.parentNode!==b;)if(!(a=a.parentNode))return;return Ext.getCmp(a.id)},lookupComponent:function(a){var b=this;return"string"==typeof a?a=b.lookupItemFromString(a):Ext.isObject(a)&&(a=b.lookupItemFromObject(a)),a.dock||(a.minWidth=a.minWidth||b.minWidth),a},lookupItemFromObject:function(a){return a.isComponent||(a=a.xtype?Ext.ComponentManager.create(a,a.xtype):Ext.create("Ext.menu."+(Ext.isBoolean(a.checked)?"Check":"")+"Item",a)),a.isMenuItem&&(a.parentMenu=this),a},lookupItemFromString:function(a){return"separator"===a||"-"===a?new Ext.menu.Separator:new Ext.menu.Item({canActivate:!1,hideOnClick:!1,plain:!0,text:a})},configureItem:function(a){var b,d,c=this.owner,f=Ext.baseCSSPrefix,e=c.ui;a.isMenuItem?a.setUI(e):1<c.items.getCount()&&!a.rendered&&!a.dock&&(b=[(d=c._itemCmpCls)+" "+d+"-"+e],c.plain||!1===a.indent&&"no-icon"!==a.iconCls||b.push(f+"menu-item-indent-"+e),a.rendered?a.el.addCls(b):a.cls=(a.cls||"")+" "+b.join(" "),a.$extraMenuCls=b),this.callParent(arguments)},onRemove:function(a){this.callParent([a]),!a.destroyed&&a.$extraMenuCls&&a.el.removeCls(a.$extraMenuCls)},onClick:function(b){var a,d,c=this,e="keydown"===b.type;c.disabled?b.stopEvent():((a=c.getItemFromEvent(b))&&a.isMenuItem&&(a.menu&&c.ignoreParentClicks?b.stopEvent():d=a.onClick(b),a.menu&&!1!==d&&e&&a.expandMenu(b,0)),a&&!a.disabled||(a=void 0),c.fireEvent("click",c,a,b))},onDestroy:function(){var a=this;a.escapeKeyNav&&a.escapeKeyNav.destroy(),a.parentMenu=a.ownerCmp=a.escapeKeyNav=null,a.rendered&&(a.el.un(a.mouseMonitor),Ext.destroy(a.iconSepEl)),Ext.menu.Manager.onHide(a),a.callParent(arguments)},onMouseLeave:function(a){this.disabled||this.fireEvent("mouseleave",this,a)},onMouseOver:function(c){var a=this,g=c.getRelatedTarget(),e=!a.el.contains(g),b=a.getItemFromEvent(c),d=a.parentMenu,f=a.ownerCmp;e&&d&&(d.setActiveItem(f),f.cancelDeferHide(),d.mouseMonitor.mouseenter()),a.disabled||(b&&(b.containsFocus||b.focus(),b.expandMenu&&b.expandMenu(c)),e&&a.fireEvent("mouseenter",a,c),a.fireEvent("mouseover",a,b,c))},setActiveItem:function(a){a&&a!==this.lastFocusedChild&&this.focusChild(a,1)},onEscapeKey:function(){this.floating&&this.hide()},onShortcutKey:function(h,g){for(var e=String.fromCharCode(g.getCharCode()),c=this.query(">[text]"),f=c.length,a=this.lastFocusedChild,d=Ext.Array.indexOf(c,a),b=d;;){if(++b===f&&(b=0),a=c[b],b===d)return;if(a.text&&a.text[0].toUpperCase()===e)return void a.focus()}},onFocusableContainerTabKey:function(a){this.floating&&this.hide()},onFocusableContainerEnterKey:function(a){this.onClick(a)},onFocusableContainerSpaceKey:function(a){this.onClick(a)},onFocusableContainerLeftKey:function(a){a.preventDefault(),this.parentMenu&&(this.ownerCmp.focus(),this.hide())},onFocusableContainerRightKey:function(b){var a=this.lastFocusedChild;b.preventDefault(),a&&a.expandMenu&&a.expandMenu(b,0)},onBeforeShow:function(){if(Ext.Date.getElapsed(this.lastHide)<this.menuClickBuffer)return!1},beforeShow:function(){var c,b,d,a=this;a.floating&&((c=a.hasFloatMenuParent())||a.allowOtherMenus||Ext.menu.Manager.hideAll(),c?a.focusAnchor=c.focusAnchor:(b=Ext.Element.getActiveElement())===document.body||b===document.documentElement?a.focusAnchor=null:a.focusAnchor=b,a.savedMaxHeight=a.maxHeight,d=a.container.getViewSize().height,a.maxHeight=Math.min(a.maxHeight||d,d)),a.callParent(arguments)},afterShow:function(){var a=this,b=a.ariaEl.dom;a.callParent(arguments),Ext.menu.Manager.onShow(a),a.floating&&b&&b.setAttribute("aria-expanded",!0),a.floating&&a.autoFocus&&(a.maxHeight=a.savedMaxHeight,a.focus())},onHide:function(d,f,e){var b,a=this,c=a.ariaEl.dom;a.el.contains(Ext.Element.getActiveElement())&&(b=a.focusAnchor||a.ownerCmp||a.up(":focusable"))&&(a.previousFocus=b),a.callParent([d,f,e]),a.lastHide=Ext.Date.now(),Ext.menu.Manager.onHide(a),a.floating&&c&&c.setAttribute("aria-expanded",!1)},preventClick:function(b){var a=this.getItemFromEvent(b);a&&a.isMenuItem&&!a.href&&b.preventDefault()},privates:{hasFloatMenuParent:function(){return this.parentMenu||this.up("menu[floating=true]")},setOwnerCmp:function(b,c){var a=this;a.parentMenu=b.isMenuItem?b:null,a.ownerCmp=b,a.registerWithOwnerCt(),delete a.hierarchicallyHidden,a.onInheritedAdd(b,c),a.containerOnAdded(b,c)}}}),Ext.define("Ext.theme.triton.menu.Menu",{override:"Ext.menu.Menu",compatibility:Ext.isIE8,afterShow:function(){var c,a,b,d;for(this.callParent(arguments),b=0,d=(c=this.items.getRange()).length;b<d;b++)(a=c[b])&&a.repaintIcons&&a.repaintIcons()}}),Ext.define("Ext.grid.locking.HeaderContainer",{extend:Ext.grid.header.Container,headerCtRelayEvents:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","remove","add","beforeremove","beforeadd","afterlayout","menucreate","sortchange","columnschanged","columnshow","columnhide","columnmove","headertriggerclick","headercontextmenu","headerclick","columnresize","statesave","beforestatesave","staterestore","beforestaterestore"],constructor:function(d){var a=this,b=d.lockedGrid,c=d.normalGrid;a.lockable=d,a.callParent(),b.visibleColumnManager.rootColumns=c.visibleColumnManager.rootColumns=d.visibleColumnManager=a.visibleColumnManager=new Ext.grid.ColumnManager(!0,b.headerCt,c.headerCt),b.columnManager.rootColumns=c.columnManager.rootColumns=d.columnManager=a.columnManager=new Ext.grid.ColumnManager(!1,b.headerCt,c.headerCt),a.lockedEventRelayers=a.relayEvents(b.headerCt,a.headerCtRelayEvents),a.normalEventRelayers=a.relayEvents(c.headerCt,a.headerCtRelayEvents)},destroy:function(){var a=this;Ext.destroy(a.lockedEventRelayers,a.normalEventRelayers),a.lockedEventRelayers=a.normalEventRelayers=null,a.callParent()},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var b=this.lockable.lockedGrid.headerCt.getColumnsState(),c=this.lockable.normalGrid.headerCt.getColumnsState();return b.concat(c)},applyColumnsState:function(k,o){var e,a,f,d,j=this.lockable.lockedGrid,b=j.headerCt,c=this.lockable.normalGrid.headerCt,m=Ext.Array.toValueMap(b.items.items,"stateId"),n=Ext.Array.toValueMap(c.items.items,"stateId"),g=[],h=[],i=1,p=k.length;for(e=0;e<p;e++)(a=(f=m[(d=k[e]).id])||n[d.id])&&(a.applyColumnState&&a.applyColumnState(d,o),void 0===a.locked&&(a.locked=!!f),a.locked?(g.push(a),a.hidden||"number"!=typeof a.width||(i+=a.width)):h.push(a));g.length+h.length===b.items.getCount()+c.items.getCount()&&(b.removeAll(!1),c.removeAll(!1),b.add(g),c.add(h),j.setWidth(i))},disable:function(){var a=this.lockable;a.lockedGrid.headerCt.disable(),a.normalGrid.headerCt.disable()},enable:function(){var a=this.lockable;a.lockedGrid.headerCt.enable(),a.normalGrid.headerCt.enable()}}),Ext.define("Ext.grid.locking.View",{alternateClassName:"Ext.grid.LockingView",mixins:[Ext.util.Observable,Ext.util.StoreHolder,Ext.util.Focusable],isLockingView:!0,loadMask:!0,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(b){var e,c,d=Ext,a=this;a.ownerGrid=b.ownerGrid,(a.ownerGrid.view=a).navigationModel="treepanel"===b.locked.xtype?new d.tree.NavigationModel(a):new d.grid.NavigationModel(a),b.locked.viewConfig.bindStore=d.emptyFn,b.normal.viewConfig.bindStore=a.subViewBindStore,b.normal.viewConfig.isNormalView=b.locked.viewConfig.isLockedView=!0,b.locked.viewConfig.beforeLayout=b.normal.viewConfig.beforeLayout=a.beforeLayout,b.locked.viewConfig.navigationModel=b.normal.viewConfig.navigationModel=a.navigationModel,a.lockedGrid=a.ownerGrid.lockedGrid=d.ComponentManager.create(b.locked),a.lockedView=e=a.lockedGrid.getView(),a.selModel=b.normal.viewConfig.selModel=e.getSelectionModel(),a.lockedGrid.isTree&&(a.lockedView.animate=!1,b.normal.store=e.store,b.normal.viewConfig.stripeRows=a.lockedView.stripeRows,b.normal.rowLines=a.lockedGrid.rowLines),a.normalGrid=a.ownerGrid.normalGrid=d.ComponentManager.create(b.normal),e.lockingPartner=c=a.normalView=a.normalGrid.getView(),c.lockingPartner=e,a.loadMask=void 0!==b.loadMask?b.loadMask:a.loadMask,a.mixins.observable.constructor.call(a),a.lockedViewEventRelayers=a.relayEvents(e,d.view.Table.events),a.normalViewEventRelayers=a.relayEvents(c,d.view.Table.events.concat(d.view.Table.normalSideEvents)),c.on({scope:a,itemmouseleave:a.onItemMouseLeave,itemmouseenter:a.onItemMouseEnter}),e.on({scope:a,itemmouseleave:a.onItemMouseLeave,itemmouseenter:a.onItemMouseEnter}),a.ownerGrid.on({render:a.onPanelRender,scope:a}),a.loadingText=c.loadingText,a.loadingCls=c.loadingCls,a.loadingUseMsg=c.loadingUseMsg,a.itemSelector=a.getItemSelector(),a.all=c.all,a.bindStore(c.dataSource,!0,"dataSource")},subViewBindStore:function(c){var b,a=this;a.destroying||a.destroyed||((b=a.getSelectionModel()).bindStore(c),b.bindComponent(a))},beforeLayout:function(){var a=this.ownerCt.ownerLockable.view,b=a.lockedGrid.view,c=a.normalGrid.view;a.relayingOperation||(a.lockedGrid.isVisible()&&b.refreshNeeded&&b.doFirstRefresh(b.dataSource),c.refreshNeeded&&c.doFirstRefresh(c.dataSource))},onPanelRender:function(){var a=this,b=a.loadMask,c={target:a.ownerGrid,msg:a.loadingText,msgCls:a.loadingCls,useMsg:a.loadingUseMsg,store:a.ownerGrid.store};a.el=a.ownerGrid.getTargetEl(),a.rendered=!0,a.initFocusableEvents(),a.fireEvent("render",a),b&&(Ext.isObject(b)&&(c=Ext.apply(c,b)),a.loadMask=new Ext.LoadMask(c))},getRefOwner:function(){return this.ownerGrid},getVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getGridColumns:function(){return this.getVisibleColumnManager().getColumns()},getEl:function(a){return this.getViewForColumn(a).getEl()},getCellSelector:function(){return this.normalView.getCellSelector()},getItemSelector:function(){return this.normalView.getItemSelector()},getViewForColumn:function(c){var a,b=this.lockedView;return b.headerCt.cascade(function(b){if(b===c)return!(a=!0)}),a?b:this.normalView},onItemMouseEnter:function(d,f){var c,b=this.lockedView,a=this.normalView;d.trackOver&&(d!==b&&(a=b),c=a.getNode(f),a.highlightItem(c))},onItemMouseLeave:function(c,e){var a=this.lockedView,b=this.normalView;c.trackOver&&(c!==a&&(b=a),b.clearHighlight())},relayFn:function(d,b){b=b||[];var c=this,a=c.lockedView;c.relayingOperation=!0,a[d].apply(a,b),(a=c.normalView)[d].apply(a,b),c.relayingOperation=!1},getSelectionModel:function(){return this.normalView.getSelectionModel()},getNavigationModel:function(){return this.navigationModel},getStore:function(){return this.ownerGrid.store},onBindStore:function(c,f,e){var b=this.lockedView,a=this.normalView;!a.componentLayoutCounter||b.blockRefresh&&a.blockRefresh||(Ext.suspendLayouts(),b.doFirstRefresh(c),a.doFirstRefresh(c),Ext.resumeLayouts(!0))},getStoreListeners:function(){var a=this;return{priority:1e3,refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.onDataRefresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:function(){Ext.suspendLayouts(),this.relayFn("onBeginUpdate",arguments),Ext.resumeLayouts(!0)},onEndUpdate:function(){Ext.suspendLayouts(),this.relayFn("onEndUpdate",arguments),Ext.resumeLayouts(!0)},onDataRefresh:function(){Ext.suspendLayouts(),this.relayFn("onDataRefresh",arguments),Ext.resumeLayouts(!0)},onReplace:function(){Ext.suspendLayouts(),this.relayFn("onReplace",arguments),Ext.resumeLayouts(!0)},onAdd:function(){Ext.suspendLayouts(),this.relayFn("onAdd",arguments),Ext.resumeLayouts(!0)},onRemove:function(){Ext.suspendLayouts(),this.relayFn("onRemove",arguments),Ext.resumeLayouts(!0)},setActionableMode:function(d,a){var c,b;if(d)return!!(a=a||this.getNavigationModel().getPosition())&&((a=a.clone()).view=b=a.column.getView(),!1!==(c=b.setActionableMode(d,a))&&b.lockingPartner.grid.isVisible()&&(b.lockingPartner.setActionableMode(d,a),b.lockingPartner.actionableMode||(b.setActionableMode(!1),c=!1)),c);this.relayFn("setActionableMode",[!1])},onUpdate:function(){Ext.suspendLayouts(),this.relayFn("onUpdate",arguments),Ext.resumeLayouts(!0)},refresh:function(){Ext.suspendLayouts(),this.relayFn("refresh",arguments),Ext.resumeLayouts(!0)},refreshView:function(){Ext.suspendLayouts(),this.relayFn("refreshView",arguments),Ext.resumeLayouts(!0)},getNode:function(a){return this.normalView.getNode(a)},getRow:function(a){return this.normalView.getRow(a)},getCell:function(b,a){var d=this.getViewForColumn(a).getRow(b);return Ext.fly(d).down(a.getCellSelector())},indexOf:function(b){var a=this.lockedView.indexOf(b);return a=a||this.normalView.indexOf(b)},focus:function(){var a=this.ownerGrid.down(">tablepanel:not(hidden)>tableview");a&&a.focus()},focusRow:function(c){var a=this.getNavigationModel().lastFocused;(a?a.view:this.normalView).focusRow(c)},focusCell:function(a){a.view.focusCell(a)},onRowFocus:function(){this.relayFn("onRowFocus",arguments)},isVisible:function(a){return this.ownerGrid.isVisible(a)},getFocusEl:function(){var a=this.getNavigationModel().lastFocused;return(a?a.view:this.normalView).getFocusEl()},getCellInclusive:function(a,c){var d=a.column,b=this.lockedGrid.getColumnManager().getColumns().length;return b<=d?((a=Ext.apply({},a)).column-=b,this.normalView.getCellInclusive(a,c)):this.lockedView.getCellInclusive(a,c)},getHeaderByCell:function(a){return!!a&&this.getVisibleColumnManager().getHeaderById(a.getAttribute("data-columnId"))},onRowSelect:function(){this.relayFn("onRowSelect",arguments)},onRowDeselect:function(){this.relayFn("onRowDeselect",arguments)},onCellSelect:function(a){a.column.getView().onCellSelect({record:a.record,column:a.column})},onCellDeselect:function(a){a.column.getView().onCellDeselect({record:a.record,column:a.column})},getCellByPosition:function(a,c){var b=a.view,d=a.column;return b===this&&(a=new Ext.grid.CellContext(d.getView()).setPosition(a.record,a.column)),b.getCellByPosition(a,c)},getRecord:function(b){var a=this.lockedView.getRecord(b);return a=a||this.normalView.getRecord(b)},scrollBy:function(){var a=this.normalView;a.scrollBy.apply(a,arguments)},ensureVisible:function(){var a=this.normalView;a.ensureVisible.apply(a,arguments)},disable:function(){this.relayFn("disable",arguments)},enable:function(){this.relayFn("enable",arguments)},addElListener:function(){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){var a=this;a.rendered=!1,a.bindStore(null,!1,"dataSource"),Ext.destroy(a.lockedViewEventRelayers,a.normalViewEventRelayers),a.lockedViewEventRelayers=a.normalViewEventRelayers=null,a.callParent(),Ext.destroy(a.loadMask,a.navigationModel,a.selModel),a.lockedView.lockingPartner=a.normalView.lockingPartner=null,a.lockedGrid=a.lockedView=a.normalGrid=a.normalView=null,a.loadMask=a.navigationModel=a.selModel=a.headerCt=null,a.ownerGrid=a.storeListeners=null}},function(){this.borrow(Ext.Component,["up"]),this.borrow(Ext.view.AbstractView,["doFirstRefresh","applyFirstRefresh"]),this.borrow(Ext.view.Table,["cellSelector","selectedCellCls","selectedItemCls"])}),Ext.define("Ext.grid.locking.Lockable",{alternateClassName:"Ext.grid.Lockable",syncRowHeight:!0,headerCounter:0,scrollDelta:40,lockedGridCls:Ext.baseCSSPrefix+"grid-inner-locked",normalGridCls:Ext.baseCSSPrefix+"grid-inner-normal",lockingBodyCls:Ext.baseCSSPrefix+"grid-locking-body",unlockText:"Unlock",lockText:"Lock",bothCfgCopy:["hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns","multiColumnSort","columnLines","rowLines","variableRowHeight","numFromEdge","trailingBufferZone","leadingBufferZone","scrollToLoadBuffer","syncRowHeight"],normalCfgCopy:["scroll"],lockedCfgCopy:[],determineXTypeToCreate:function(g){var a,b,d,e,c;if(this.subGridXType)a=this.subGridXType;else{if(!g)return"gridpanel";e=(b=this.getXTypes().split("/"))[(d=b.length)-1],a="tablepanel"!==(c=b[d-2])?c:e}return a},injectLockable:function(){this.focusable=!1,this.lockable=!0,this.hasView=!0;var m,i,b,c,e,n,f,h,a=this,q=Ext.getScrollbarSize(),l=q.width,o=a.store=Ext.StoreManager.lookup(a.store),d=a.lockedViewConfig,g=a.normalViewConfig,s=Ext.Object,j=a.viewConfig,r=j&&j.loadMask,u=void 0!==r?r:a.loadMask,p=a.bufferedRenderer,k=0<l&&2!==Ext.supports.touchScroll,t=a.getInherited().rtl;for(m=a.constructLockableFeatures(),a.features=null,i=a.constructLockablePlugins(),a.plugins=i.topPlugins,b={id:a.id+"-locked",$initParent:a,isLocked:!0,bufferedRenderer:p,ownerGrid:a,ownerLockable:a,xtype:a.determineXTypeToCreate(!0),store:o,reserveScrollbar:k,scrollable:{indicators:{x:!0,y:!1}},scrollerOwner:!1,animate:!1,border:!1,cls:a.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||a.normalGrid.floatedFromCollapse},features:m.lockedFeatures,plugins:i.lockedPlugins},c={id:a.id+"-normal",$initParent:a,isLocked:!1,bufferedRenderer:p,ownerGrid:a,ownerLockable:a,xtype:a.determineXTypeToCreate(),store:o,reserveScrollbar:a.reserveScrollbar,scrollerOwner:!1,border:!1,cls:a.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||a.lockedGrid.floatedFromCollapse},features:m.normalFeatures,plugins:i.normalPlugins},a.addCls(Ext.baseCSSPrefix+"grid-locked"),Ext.copy(c,a,a.bothCfgCopy,!0),Ext.copy(b,a,a.bothCfgCopy,!0),Ext.copy(c,a,a.normalCfgCopy,!0),Ext.copy(b,a,a.lockedCfgCopy,!0),Ext.apply(c,a.normalGridConfig),Ext.apply(b,a.lockedGridConfig),e=0;e<a.normalCfgCopy.length;e++)delete a[a.normalCfgCopy[e]];for(e=0;e<a.lockedCfgCopy.length;e++)delete a[a.lockedCfgCopy[e]];a.addStateEvents(["lockcolumn","unlockcolumn"]),n=a.processColumns(a.columns||[],b),b.columns=n.locked,b.columns.items.length||(b.hidden=!0),c.columns=n.normal,c.columns.items.length||(c.hidden=!0),c.flex=1,b.viewConfig=d=d?s.chain(d):{},c.viewConfig=g=g?s.chain(g):{},d.loadingUseMsg=!1,d.loadMask=!1,k&&(d.margin=t?"0 0 0 -"+l+"px":"0 -"+l+"px 0 0"),g.loadMask=!1,Ext.applyIf(d,j),Ext.applyIf(g,j),a.initialConfig.layout||(a.layout={type:"hbox",align:"stretch"}),a.getLayout(),"border"===a.layout.type&&(a.split&&(b.split=!0),b.region||(b.region="west"),c.region||(c.region="center"),a.addCls(Ext.baseCSSPrefix+"grid-locked-split")),a.layout instanceof Ext.layout.container.Box||(a.split=!1),a.view=new Ext.grid.locking.View({loadMask:u,locked:b,normal:c,ownerGrid:a}),b=a.lockedGrid,(c=a.normalGrid).getView().getScrollable().addPartner(b.getView().getScrollable(),"y"),q.height&&2!==Ext.supports.touchScroll&&(b.on({afterlayout:a.afterLockedViewLayout,scope:a}),b.getView().getOverflowStyle()),f=b.headerCt,h=c.headerCt,k&&!t&&(f.reserveScrollbar=!1),a.headerCt=a.view.headerCt=new Ext.grid.locking.HeaderContainer(a),f.lockedCt=!0,f.lockableInjected=!0,h.lockableInjected=!0,f.on({add:a.delaySyncLockedWidth,remove:a.delaySyncLockedWidth,columnshow:a.delaySyncLockedWidth,columnhide:a.delaySyncLockedWidth,sortchange:a.onLockedHeaderSortChange,columnresize:a.delaySyncLockedWidth,scope:a}),h.on({add:a.delaySyncLockedWidth,remove:a.delaySyncLockedWidth,columnshow:a.delaySyncLockedWidth,columnhide:a.delaySyncLockedWidth,sortchange:a.onNormalHeaderSortChange,scope:a}),a.modifyHeaderCt(),a.items=[b],a.split&&(a.addCls(Ext.baseCSSPrefix+"grid-locked-split"),a.items[1]={xtype:"splitter"}),a.items.push(c),a.relayHeaderCtEvents(f),a.relayHeaderCtEvents(h),a.storeRelayers=a.relayEvents(o,["filterchange","groupchange","beforeload","load"]),a.gridRelayers=a.relayEvents(c,["viewready"])},afterInjectLockable:function(){delete this.lockedGrid.$initParent,delete this.normalGrid.$initParent},getLockingViewConfig:function(){return{xclass:"Ext.grid.locking.View",locked:this.lockedGrid,normal:this.normalGrid,panel:this}},processColumns:function(b,m){var d,k,a,g,h=this,c=new Ext.grid.header.Container({$initParent:h}),e=[],f=[],i={itemId:"lockedHeaderCt",stretchMaxPartner:"^^>>#normalHeaderCt",items:e},j={itemId:"normalHeaderCt",stretchMaxPartner:"^^>>#lockedHeaderCt",items:f},l={locked:i,normal:j};for(Ext.isObject(b)&&(Ext.applyIf(i,b),Ext.applyIf(j,b),delete(g=Ext.apply({},b)).items,Ext.apply(c,g),b=b.items),c.constructing=!0,d=0,k=b.length;d<k;++d)(a=b[d]).isComponent||delete(a=((a=c.applyDefaults(a)).$initParent=c).lookupComponent(a)).$initParent,a.processed=!0,a.locked||a.autoLock?e.push(a):f.push(a);return h.fireEvent("processcolumns",h,e,f),c.destroy(),l},afterLockedViewLayout:function(){var e=this.lockedGrid,g=this.normalGrid,f=e.getView(),h=g.getView(),c=f.scrollFlags.x&&e.headerCt.tooNarrow,d=h.scrollFlags.x&&g.headerCt.tooNarrow,b=h.getScrollable(),a=f.getScrollable();c!==d?c?(b.setX("scroll"),a.setX(!0)):(a.setX("scroll"),b.setX(!0)):(a.setX(!d||"scroll"),b.setX(!0))},ensureLockedVisible:function(){this.lockedGrid.ensureVisible.apply(this.lockedGrid,arguments),this.normalGrid.ensureVisible.apply(this.normalGrid,arguments)},onLockedViewMouseWheel:function(h){var a,f,g,b=this,e=-b.scrollDelta*h.getWheelDeltas().y,d=b.lockedGrid.getView(),c=d.el.dom;b.ignoreMousewheel||(c&&(f=(a=d.getScrollY())!==c.scrollHeight-c.clientHeight,g=0!==a),(e<0&&g||0<e&&f)&&(h.stopEvent(),a+=e,d.setScrollY(a),b.normalGrid.getView().setScrollY(a),b.onNormalViewScroll()))},onLockedViewScroll:function(){var b,d,e=this.lockedGrid.getView(),a=this.normalGrid.getView(),c=e.getScrollY();a.getScrollY()!==c&&(a.setScrollY(c),a.bufferedRenderer&&(d=e.body.dom,(b=a.body.dom).style.position="absolute",b.style.top=d.style.top))},onNormalViewScroll:function(){var a,b=this.lockedGrid.getView(),c=this.normalGrid.getView(),f=b.getScrollY(),d=c.getScrollY();d!==f&&(b.setScrollY(d),c.bufferedRenderer&&(a=b.body).dom&&(a.dom.style.position="absolute",a.translate(null,c.bufferedRenderer.bodyTop)))},syncRowHeights:function(){if(!this.destroyed){var e,b=this.normalGrid.getView(),a=this.lockedGrid.getView(),d=b.syncRowHeightBegin(),c=a.syncRowHeightBegin();b.syncRowHeightMeasure(d),a.syncRowHeightMeasure(c),b.syncRowHeightFinish(d,c),a.syncRowHeightFinish(c,d),e=b.getScrollY(),a.setScrollY(e)}},modifyHeaderCt:function(){var a=this;a.lockedGrid.headerCt.getMenuItems=a.getMenuItems(a.lockedGrid.headerCt.getMenuItems,!0),a.normalGrid.headerCt.getMenuItems=a.getMenuItems(a.normalGrid.headerCt.getMenuItems,!1),a.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.lockedGrid.headerCt.showMenuBy,a.showMenuBy),a.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(a.normalGrid.headerCt.showMenuBy,a.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(f,g,c){var d=this.getMenu(),a=d.down("#unlockItem"),b=d.down("#lockItem"),e=a.prev();!1===c.lockable?(e.hide(),a.hide(),b.hide()):(e.show(),a.show(),b.show(),a.initialConfig.disabled||a.setDisabled(!1===c.lockable),b.initialConfig.disabled||b.setDisabled(!c.isLockable()))},getMenuItems:function(d,b){var a=this,f=a.unlockText,h=a.lockText,g=Ext.baseCSSPrefix+"hmenu-unlock",i=Ext.baseCSSPrefix+"hmenu-lock",c=a.onUnlockMenuClick.bind(a),e=a.onLockMenuClick.bind(a);return function(){var a=d.call(this);return a.push("-",{itemId:"unlockItem",iconCls:g,text:f,handler:c,disabled:!b}),a.push({itemId:"lockItem",iconCls:i,text:h,handler:e,disabled:b}),a}},delaySyncLockedWidth:function(){var a=this,b=a.syncLockedWidthTask;a.view.all.getCount()&&(b=b||(a.syncLockedWidthTask=new Ext.util.DelayedTask(a.syncLockedWidth,a))).delay(1)},syncLockedWidth:function(){var b=this,c=b.rendered,a=b.lockedGrid,g=a.view,d=b.normalGrid,e=a.getVisibleColumnManager().getColumns().length,f=d.getVisibleColumnManager().getColumns().length,h=b.syncLockedWidthTask;return h&&h.cancel(),Ext.suspendLayouts(),f?(d.show(),e?(c&&a.shrinkWrapColumns&&!a.headerCt.forceFit&&(delete a.flex,a.setWidth(a.headerCt.getTableWidth()+a.gridPanelBorderWidth)),a.addCls(b.lockedGridCls),a.show(),a.split&&(b.child("splitter").show(),b.addCls(Ext.baseCSSPrefix+"grid-locked-split"))):(c&&a.getView().clearViewEl(!0),a.hide(),a.split&&(b.child("splitter").hide(),b.removeCls(Ext.baseCSSPrefix+"grid-locked-split"))),2!==Ext.supports.touchScroll&&Ext.Component.pendingLayouts&&g.getScrollable().setX(!0),c&&(b.ignoreMousewheel=g.scrollFlags.y)):(d.hide(),a.flex=1,delete a.width,a.removeCls(b.lockedGridCls),a.show(),b.ignoreMousewheel=!0),Ext.resumeLayouts(!0),[e,f]},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(a,l,g){var h,k,j,f,e=this,i=e.normalGrid,b=e.lockedGrid,d=i.view,c=b.view,m=i.headerCt;j=(a=a||m.getMenu().activeHeader).hasFocus,g=g||b.headerCt,k=a.ownerCt,a.isLockable()&&(a.flex&&b.shrinkWrapColumns&&(a.width=a.getWidth(),a.flex=null),Ext.suspendLayouts(),b.hidden&&(b.componentLayoutCounter||(c.bufferedRenderer&&c.bufferedRenderer.onViewResize(c,0,d.getHeight()),f=d.getScrollY()),b.show()),d.blockRefresh=c.blockRefresh=!0,a.ownerCmp=a.ownerCt,k.remove(a,!1),a.locked=!0,Ext.isDefined(l)?g.insert(l,a):g.add(a),d.blockRefresh=c.blockRefresh=!1,a.ownerCmp=null,(h=e.syncLockedWidth())[0]&&b.getView().refreshView(),h[1]&&i.getView().refreshView(),e.fireEvent("lockcolumn",e,a),Ext.resumeLayouts(!0),f&&(c.setScrollY(f),d.setScrollY(f)),j&&a.focus())},unlock:function(a,f,g){var c,j,b=this,e=b.normalGrid,d=b.lockedGrid,i=e.view,h=d.view,k=d.headerCt;Ext.isDefined(f)||(f=0),j=(a=a||k.getMenu().activeHeader).hasFocus,g=g||e.headerCt,Ext.suspendLayouts(),i.blockRefresh=h.blockRefresh=!0,a.ownerCmp=a.ownerCt,a.ownerCt.remove(a,!1),a.locked=!1,g.insert(f,a),i.blockRefresh=h.blockRefresh=!1,a.ownerCmp=null,(c=b.syncLockedWidth())[0]&&d.getView().refreshView(),c[1]&&e.getView().refreshView(),b.fireEvent("unlockcolumn",b,a),Ext.resumeLayouts(!0),j&&a.focus()},reconfigureLockable:function(a,f){var b,g,d=this,h=d.store,c=d.lockedGrid,e=d.normalGrid;a&&a!==h&&(a=Ext.data.StoreManager.lookup(a),d.store=a,c.view.blockRefresh=e.view.blockRefresh=!0,c.bindStore(a),(b=c.view).store=a,b.dataSource.isFeatureStore||(b.dataSource=a),b.bufferedRenderer&&b.bufferedRenderer.bindStore(a),e.bindStore(a),(b=e.view).store=a,b.dataSource.isFeatureStore||(b.dataSource=a),b.bufferedRenderer&&b.bufferedRenderer.bindStore(a),d.view.store=a,(g=d.view.loadMask)&&g.isLoadMask&&g.bindStore(a),d.view.bindStore(e.view.dataSource,!1,"dataSource"),c.view.blockRefresh=e.view.blockRefresh=!1),f&&(c.reconfiguring=e.reconfiguring=!0,c.headerCt.removeAll(),e.headerCt.removeAll(),f=d.processColumns(f,c),c.headerCt.add(f.locked.items),e.headerCt.add(f.normal.items),c.reconfiguring=e.reconfiguring=!1,d.syncLockedWidth()),d.refreshCounter=c.view.refreshCounter},afterReconfigureLockable:function(){var a=this.lockedGrid.getView();this.refreshCounter===a.refreshCounter&&this.view.refresh()},constructLockableFeatures:function(){var a,e,c,d,g,b=this.features,f=0;if(b)for(Ext.isArray(b)||(b=[b]),c=[],d=[],g=b.length;f<g;f++)switch((a=b[f]).isFeature||(a=Ext.create("feature."+a.ftype,a)),a.lockableScope){case"locked":c.push(a);break;case"normal":d.push(a);break;default:a.lockableScope="both",c.push(a),d.push(e=a.clone()),(e.lockingPartner=a).lockingPartner=e}return{normalFeatures:d,lockedFeatures:c}},constructLockablePlugins:function(){var a,g,f,h,c,d,k,b=this.plugins,i=0;if(b)for(Ext.isArray(b)||(b=[b]),h=[],c=[],d=[],k=b.length;i<k;i++)switch((a=b[i]).init?a.lockableScope:(a.ptype?Ext.ClassManager.getByAlias("plugin."+a.ptype):Ext.ClassManager.get(a.xclass)).prototype.lockableScope){case"both":c.push(f=a.clonePlugin()),d.push(g=a.clonePlugin()),(f.lockingPartner=g).lockingPartner=f,Ext.destroy(a);break;case"locked":c.push(a);break;case"normal":d.push(a);break;default:h.push(a)}return{topPlugins:h,normalPlugins:d,lockedPlugins:c}},destroyLockable:function(){var a=this,b=a.syncLockedWidthTask;b&&(b.cancel(),a.syncLockedWidthTask=null),a.lockedGrid&&a.lockedGrid.headerCt&&(a.lockedGrid.headerCt.showMenuBy=null),a.normalGrid&&a.normalGrid.headerCt&&(a.normalGrid.headerCt.showMenuBy=null),Ext.destroy(a.view,a.headerCt)}},function(){this.borrow(Ext.Component,["constructPlugin"])}),Ext.define("Ext.grid.plugin.BufferedRenderer",{extend:Ext.AbstractPlugin,alias:"plugin.bufferedrenderer",isBufferedRenderer:!0,lockableScope:"both",numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:!0,scrollToLoadBuffer:200,viewSize:100,rowHeight:21,position:0,lastScrollDirection:1,bodyTop:0,scrollHeight:0,loadId:0,init:function(c){var a=this,b=c.view,d={scroll:a.onViewScroll,scrollend:a.onViewScrollEnd,refresh:a.onViewRefresh,columnschanged:a.checkVariableRowHeight,boxready:a.onViewBoxReady,scope:a,destroyable:!0},e=b.initialConfig;(c.isTree||c.ownerLockable&&c.ownerLockable.isTree)&&(b.blockRefresh=!1,e&&void 0===e.loadMask&&(b.loadMask=!0)),b.positionBody&&(d.refresh=a.onViewRefresh),Ext.isWebKit&&2!==Ext.supports.touchScroll&&(a.needsPointerEventsFix=!0,d.scrollEnd=a.onViewScrollEnd),a.grid=c,a.view=b,a.isRTL=b.getInherited().rtl,b.bufferedRenderer=a,b.preserveScrollOnRefresh=!0,b.animate=!1,a.bindStore(b.dataSource),b.hasOwnProperty("rowHeight")&&(a.rowHeight=b.rowHeight),a.position=0,a.viewListeners=b.on(d)},checkVariableRowHeight:function(){this.variableRowHeight=this.view.hasVariableRowHeight()},bindStore:function(b){var a=this,c=a.store;a.view;c&&c.isFeatureStore||(c&&a.unbindStore(),a.storeListeners=b.on({scope:a,groupchange:a.onStoreGroupChange,clear:a.onStoreClear,beforeload:a.onBeforeStoreLoad,load:a.onStoreLoad,destroyable:!0}),a.store=b,a.view.componentLayout.layoutCount&&(delete a.viewSize,b.isBufferedStore&&b.setViewSize(a.viewSize),a.onViewResize(a.view,0,a.view.getHeight())))},unbindStore:function(){this.storeListeners.destroy(),this.storeListeners=this.store=null},onBeforeStoreLoad:function(c){var a=this,b=a.view;b&&b.refreshCounter&&(c.isTreeStore||b.preserveScrollOnReload?a.nextRefreshStartIndex=b.all.startIndex:0!==a.scrollTop&&(a.setBodyTop(a.bodyTop=a.scrollTop=a.position=a.scrollHeight=a.nextRefreshStartIndex=0),b.setScrollY(0)),a.lastScrollDirection=a.scrollOffset=null),a.disable()},onStoreLoad:function(){this.enable()},onStoreClear:function(){var a=this,b=a.view;b.rendered&&!a.store.destroyed&&(0!==a.scrollTop&&(a.bodyTop=a.scrollTop=a.position=a.scrollHeight=0,a.nextRefreshStartIndex=null,b.setScrollY(0)),b.refresh(),a.lastScrollDirection=a.scrollOffset=null)},onStoreGroupChange:function(a){this.refreshSize()},onViewBoxReady:function(a){this.refreshScroller(a,this.scrollHeight)},onViewRefresh:function(b,c){var e,a=this,d=b.all;if(a.checkVariableRowHeight(),!b.componentLayoutCounter&&(b.headerCt.down("{flex}")||a.variableRowHeight))return b.on({boxready:Ext.Function.pass(a.onViewRefresh,[b,c],a),single:!0}),void(a.skipNextRefreshSize=!0);a.skipNextRefreshSize=!1,a.refreshing||(a.refreshSize(),a.scrollTop!==b.getScrollY()?(a.onViewScroll(),a.onViewScrollEnd()):(a.hasOwnProperty("bodyTop")||(a.bodyTop=d.startIndex*a.rowHeight,b.setScrollY(a.bodyTop)),a.setBodyTop(a.bodyTop),e=b.getHeight(),d.getCount()&&0<e&&(a.onViewResize(b,null,e),c&&d.getCount()!==c.length&&(c.length=0,c.push.apply(c,a.store.getRange(d.startIndex,d.endIndex))))))},beforeTableLayout:function(b){var a=this.view.body.dom;a&&(b.bodyHeight=a.offsetHeight,b.bodyWidth=a.offsetWidth)},afterTableLayout:function(d){var c,a=this,b=a.view;d.bodyHeight&&b.body.dom&&(delete a.rowHeight,a.refreshSize(),(c=b.body.dom.offsetHeight)!==d.bodyHeight&&(a.onViewResize(b,null,b.el.lastBox.height),c<d.bodyHeight&&(a.viewSize>=a.store.getCount()?a.setBodyTop(0):(a.bodyTop>a.scrollTop||a.bodyTop+c<a.scrollTop+a.viewClientHeight)&&a.setBodyTop(a.scrollTop-a.trailingBufferZone*a.rowHeight)),b.all.endIndex===b.dataSource.getCount()-1&&a.stretchView(b,a.scrollHeight=a.bodyTop+c-1)))},refreshSize:function(){var a=this,b=a.view,c=a.skipNextRefreshSize,d=b.body.dom;a.skipNextRefreshSize=!1,!c&&d&&(a.bodyHeight=b.body.dom.offsetHeight,a.scrollHeight=a.getScrollHeight(),a.stretchView(b,a.scrollHeight))},onViewResize:function(e,g,d,f,c){var b,a=this;c&&d===c||(b=Math.ceil(d/a.rowHeight)+a.trailingBufferZone+a.leadingBufferZone,a.viewSize=a.setViewSize(b),a.viewClientHeight=e.el.dom.clientHeight)},stretchView:function(c,b){var a=this;a.scrollTop>b&&(a.position=a.scrollTop=Math.max(b-a.bodyHeight,0),c.setScrollY(a.scrollTop)),a.bodyTop>b&&c.body.translate(null,a.bodyTop=a.position),c.getScrollable()&&a.refreshScroller(c,b)},refreshScroller:function(b,c){var a=b.getScrollable();a&&(a.setElementSize&&a.setElementSize(),a.setSize({x:b.headerCt.getTableWidth(),y:c}))},setViewSize:function(c,o){var e,f,i,n,m,l,k,a=this,h=a.store,g=a.view,d=g.all,j=d.getCount(),b=a.view.lockingPartner&&a.view.lockingPartner.bufferedRenderer;return b&&!o&&b.view.componentLayoutCounter&&(b.viewSize>c?c=b.viewSize:b.setViewSize(c,!0)),(i=j-c)&&(a.scrollTop=g.getScrollY(),a.viewSize=c,h.isBufferedStore&&h.setViewSize(c),j&&(k=h.getCount(),e=d.startIndex,f=Math.min(e+c-1,k-1),e===d.startIndex&&f===d.endIndex?i<0&&a.handleViewScroll(-1):(b&&b.disable(),i<0?j<k?h.getRange(d.endIndex+1,f,{callback:function(b,c){l=g.doAdd(b,c),g.fireEvent("itemadd",b,c,l),a.setBodyTop(a.bodyTop)}}):a.refreshView(0):(e=d.endIndex-(i-1),f=d.endIndex,m=d.slice(e,f+1),d.removeRange(e,f,!0),g.hasListeners.itemremove&&(n=h.getRange(e,f),g.fireEvent("itemremove",n,e,m)),a.setBodyTop(a.bodyTop)),b&&b.enable()))),c},getViewRange:function(){var d=this,c=d.view.all,a=d.store,b=0;return c.getCount()?b=c.startIndex:a.isBufferedStore&&(a.currentPage||(a.currentPage=1),b=c.startIndex=(a.currentPage-1)*(a.pageSize||1),a.currentPage=1),a.data.getCount()?a.getRange(b,b+(d.viewSize||a.defaultViewSize)-1):[]},onReplace:function(l,d,j,k){var i,a=this,c=a.view,b=c.all,g=b.getCount(),h=d+j.length-1,e=k.length-j.length,f=e*a.rowHeight;if(!(d>=b.startIndex+a.viewSize))return g&&h<b.startIndex&&b.getCount()>=a.viewSize?(b.moveBlock(e),a.refreshSize(),i=b.startIndex,0<e&&(a.doNotMirror=!0,a.handleViewScroll(-1),a.doNotMirror=!1),b.startIndex===i?b.startIndex&&(a.setBodyTop(a.bodyTop+=f),c.suspendEvent("scroll"),c.scrollBy(0,f),c.resumeEvent("scroll"),a.position=a.scrollTop=c.getScrollY()):(c.suspendEvent("scroll"),c.scrollBy(0,(i-b.startIndex)*a.rowHeight),c.resumeEvent("scroll")),void c.refreshSize(b.getCount()!==g)):g&&d>b.endIndex?(a.refreshSize(),0<e&&a.onRangeFetched(null,b.startIndex,Math.min(l.getCount(),b.startIndex+a.viewSize)-1,null,!0),void c.refreshSize(b.getCount()!==g)):void(d<b.startIndex&&h<=b.endIndex?a.refreshView(b.startIndex-j.length+k.length):(d<b.startIndex&&h<=b.endIndex&&f&&(c.suspendEvent("scroll"),c.setScrollY(a.position=a.scrollTop+=f),c.resumeEvent("scroll")),a.refreshView()));a.refreshSize()},scrollTo:function(b,i){var h,m,n,o,e,l,c,k,p=arguments,a=this,d=a.view,f=d.lockingPartner&&d.lockingPartner.grid.isVisible()&&d.lockingPartner.bufferedRenderer,g=a.store,j=g.getCount();if(void 0===i||i instanceof Object||(i={select:p[1],callback:p[2],scope:p[3]}),(e=d.dataSource.groupingFeature)&&e.collapsible)c=b.isEntity?b:d.store.getAt(Math.min(Math.max(b,0),d.store.getCount()-1)),l=e.getMetaGroup(c),b=l&&l.isCollapsed?e.isExpandingOrCollapsing?(c=l.placeholder,e.indexOfPlaceholder(c)):(e.expand(e.getGroup(c).getGroupKey()),j=g.getCount(),e.indexOf(c)):e.indexOf(c);else if(b.isEntity){if(c=b,-1===(b=g.indexOf(c)))return}else b=Math.min(Math.max(b,0),j-1),c=g.getAt(b);if(c&&(n=d.getNode(c)))return d.grid.ensureVisible(c,i),a.onViewScroll(),void a.onViewScrollEnd();b<d.all.startIndex?(k=-1,h=Math.max(Math.min(b-Math.floor((a.leadingBufferZone+a.trailingBufferZone)/2),j-a.viewSize+1),0),m=Math.min(h+a.viewSize-1,j-1)):(k=1,m=Math.min(b+Math.floor((a.leadingBufferZone+a.trailingBufferZone)/2),j-1),h=Math.max(m-(a.viewSize-1),0)),o=Math.max(h*a.rowHeight,0),g.getRange(h,m,{callback:function(j,e,h){a.renderRange(e,h,!0,!0),c=g.data.getRange(b,b+1)[0],n=d.getNode(c),d.body.translate(null,a.bodyTop=o),1===k&&a.refreshSize(),f&&(f.renderRange(e,h,!0,!0),a.syncRowHeights(),f.view.body.translate(null,f.bodyTop=o),1===k&&f.refreshSize()),n&&(d.grid.ensureVisible(c,i),a.scrollTop=a.position=a.view.getScrollY(),f&&(f.position=f.scrollTop=a.scrollTop))}})},onViewScroll:function(){var c,b,a=this,d=a.store.getCount(),e=a.scrollTop=a.view.getScrollY();a.needsPointerEventsFix&&(a.view.body.dom.style.pointerEvents="none"),a.disabled||d<a.viewSize||(b=0<(c=e-a.position)?1:-1,(20<=Math.abs(c)||b!==a.lastScrollDirection)&&(a.lastScrollDirection=b,a.handleViewScroll(a.lastScrollDirection)))},onViewScrollEnd:function(){this.needsPointerEventsFix&&(this.view.body.dom.style.pointerEvents="")},handleViewScroll:function(h){var b,c,a=this,d=a.view.all,g=a.store,f=a.viewSize,e=g.getCount()-1;if(-1===h?d.startIndex&&a.topOfViewCloseToEdge()&&(b=Math.max(0,a.getLastVisibleRowIndex()+a.trailingBufferZone-f)):d.endIndex<e&&a.bottomOfViewCloseToEdge()&&(b=Math.max(0,a.getFirstVisibleRowIndex()-a.trailingBufferZone)),null==b)a.position=a.scrollTop,a.loadId++;else if(c=Math.min(b+f-1,e),a.variableRowHeight&&c===d.endIndex&&c<e&&(c++,a.viewSize=f++,g.isBufferedStore&&g.setViewSize(a.viewSize)),b!==d.startIndex||c!==d.endIndex)return a.renderRange(b,c),!0},bottomOfViewCloseToEdge:function(){var a=this;return a.variableRowHeight?a.bodyTop+a.bodyHeight<a.scrollTop+a.view.lastBox.height+a.numFromEdge*a.rowHeight:a.view.all.endIndex-a.getLastVisibleRowIndex()<a.numFromEdge},topOfViewCloseToEdge:function(){var a=this;return a.variableRowHeight?a.bodyTop>a.scrollTop-a.numFromEdge*a.rowHeight:a.getFirstVisibleRowIndex()-a.view.all.startIndex<a.numFromEdge},refreshView:function(a){var c,b=this,d=b.viewSize,h=b.view.all,g=b.store,e=g.getCount(),f=Math.max(0,e-1);if(!e)return b.doRefreshView([],0,0);e<d?(a=0,c=f):(null==a&&(null!=b.nextRefreshStartIndex?(a=b.nextRefreshStartIndex,b.nextRefreshStartIndex=null):a=h.startIndex),a=Math.max(0,Math.min(a,f-(d-b.leadingBufferZone)+1)),d<(c=Math.min(a+d-1,f))-a+1&&(a=c-d+1)),0===a&&0===c&&0===e?b.doRefreshView([],0,0):g.getRange(a,c,{callback:b.doRefreshView,scope:b})},doRefreshView:function(i,h,p,q){var e,f,g,d,j,a=this,b=a.view,c=b.all,l=c.startIndex,m=c.endIndex,n=c.getCount(),k=h!==c.startIndex;if(b.refreshCounter){if(b.hasListeners.beforerefresh&&!1===b.fireEvent("beforerefresh",b))return;b.refreshing=a.refreshing=!0,j=b.saveFocusState(),b.clearViewEl(!0),b.refreshCounter++,i.length?(b.doAdd(i,h),k&&(e=c.item(l,!0),f=c.item(m,!0),e?d=-e.offsetTop:f&&(d=c.last(!0).offsetTop-f.offsetTop),d?(a.bodyTop=Math.max(a.bodyTop+d,0),a.scrollTop=a.bodyTop?a.scrollTop+d:0):(a.bodyTop=g=h*a.rowHeight,a.scrollTop=Math.max(g-a.rowHeight*(g<a.bodyTop?a.leadingBufferZone:a.trailingBufferZone,0))))):(a.scrollTop&&(a.bodyTop=a.scrollTop=0),b.addEmptyText()),k&&(a.setBodyTop(a.bodyTop),b.suspendEvent("scroll"),b.setScrollY(a.position=a.scrollTop),b.resumeEvent("scroll")),a.refreshSize(),b.refreshSize(c.getCount()!==n),b.fireEvent("refresh",b,i),j(),b.headerCt.setSortState(),b.refreshNeeded=b.refreshing=a.refreshing=!1}else b.refresh()},renderRange:function(b,c,f,d){var a=this,e=a.view.all,g=a.store;b===e.startIndex&&c===e.endIndex||(g.rangeCached(b,c)?(a.cancelLoad(),a.synchronousRender||f?a.onRangeFetched(null,b,c,null,d):(a.renderTask||(a.renderTask=new Ext.util.DelayedTask(a.onRangeFetched,a,null,!1)),a.renderTask.delay(1,null,null,[null,b,c,null,d]))):a.attemptLoad(b,c))},onRangeFetched:function(h,e,j,x,w){var u,l,m,d,g,s,r,p,o,q,t,n,a=this,b=a.view,v=b.el,c=b.all,i=0,f=b.lockingPartner&&!w&&!a.doNotMirror&&b.lockingPartner.bufferedRenderer,k=a.variableRowHeight;if(!b.destroyed){if(h)a.scrollTop=a.view.getScrollY();else if(!(h=a.store.getRange(e,j)))return;if(q=Ext.Element.getActiveElement(),t=v.contains(q),m=e*a.rowHeight,e<c.startIndex&&j>c.endIndex){for(r=c.startIndex-e,b.clearViewEl(!0),g=b.doAdd(h,e),b.fireEvent("itemadd",h,e,g),o=0;o<r;o++)i-=g[o].offsetHeight;d=a.bodyTop+i}else(a.teleported||e>c.endIndex||j<c.startIndex)&&(d=m,k&&(p=a.scrollTop<a.position?a.leadingBufferZone:a.trailingBufferZone)<e&&(d=a.scrollTop-a.rowHeight*p),b.clearViewEl(!0),a.teleported=!1),c.getCount()?j>c.endIndex?(l=Math.max(e-c.startIndex,0),k&&(i=c.item(c.startIndex+l,!0).offsetTop),g=c.scroll(Ext.Array.slice(h,c.endIndex+1-e),1,l),d=k?a.bodyTop+i:m):(l=Math.max(c.endIndex-j,0),u=c.startIndex,g=c.scroll(Ext.Array.slice(h,0,c.startIndex-e),-1,l),k?(d=a.bodyTop-c.item(u,!0).offsetTop,c.startIndex?d<0&&(i=c.startIndex*a.rowHeight,b.setScrollY(a.position=a.scrollTop+=i),d=a.bodyTop+i):d&&(b.setScrollY(a.position=a.scrollTop-=d),d=0)):d=m):(g=b.doAdd(h,e),b.fireEvent("itemadd",h,e,g)),a.position=a.scrollTop;return t&&!v.contains(q)&&(n=b.actionableMode?b.actionPosition:b.lastFocused)&&n.column&&(b.onFocusLeave({}),n.column.focus()),d=Math.max(Math.floor(d),0),b.positionBody&&a.setBodyTop(d),g&&f&&!f.disabled&&(f.scrollTop=f.position=a.scrollTop,f.view.ownerCt.isVisible()&&(s=f.onRangeFetched(null,e,j,x,!0),!b.ownerGrid.syncRowHeight&&f.variableRowHeight===k||(a.syncRowHeights(g,s),a.bodyHeight=b.body.dom.offsetHeight)),f.bodyTop!==d&&f.setBodyTop(d),f.view.setScrollY(a.scrollTop)),g}},syncRowHeights:function(b,e){var a,g,d=this,c=0,f=1,i=[],h=[],j=Ext.grid.locking.RowSynchronizer;for(b&&e&&(c=b.length,f=e.length),c!==f&&(b=d.view.all.slice(),e=d.view.lockingPartner.all.slice(),c=f=b.length),a=0;a<c;a++)i[a]=g=new j(d.view,b[a]),g.measure();for(a=0;a<f;a++)h[a]=g=new j(d.view.lockingPartner,e[a]),g.measure();for(a=0;a<c;a++)i[a].finish(h[a]),h[a].finish(i[a]);d.syncRowHeightsFinish()},syncRowHeightsFinish:function(){var a=this,c=a.view,b=c.lockingPartner.bufferedRenderer;c.componentLayoutCounter&&(delete a.rowHeight,a.refreshSize(),b.rowHeight!==a.rowHeight&&(delete b.rowHeight,b.refreshSize()))},setBodyTop:function(d){var a=this,c=a.view,e=c.all,f=a.store,b=c.body;b.dom&&(a.translateBody(b,d),a.variableRowHeight?(a.bodyHeight=b.dom.offsetHeight,e.endIndex===f.getCount()-1?a.scrollHeight=d+a.bodyHeight-1:a.scrollHeight=a.getScrollHeight(),a.stretchView(c,a.scrollHeight)):a.bodyHeight=e.getCount()*a.rowHeight)},translateBody:function(b,a){b.translate(null,this.bodyTop=a)},getFirstVisibleRowIndex:function(d,f,c,e){var b,h,a=this,g=a.view.all,j=g.elements,k=a.viewClientHeight,i=a.bodyTop;if(g.getCount()&&a.variableRowHeight){if(arguments.length)b=d+Math.floor((f-d)/2);else{if(d=g.startIndex,f=g.endIndex,(e=(c=a.scrollTop)+k)<i||i+a.bodyHeight<c)return a.teleported=!0,Math.floor(a.scrollTop/a.rowHeight);b=d+Math.min(a.numFromEdge+(-1===a.lastScrollDirection?a.leadingBufferZone:a.trailingBufferZone),Math.floor((f-d)/2))}if((h=i+j[b].offsetTop)+j[b].offsetHeight<=c)return a.getFirstVisibleRowIndex(b+1,f,c,e);if(h<=c)return b;if(b!==d)return a.getFirstVisibleRowIndex(d,b-1,c,e)}return Math.floor(a.scrollTop/a.rowHeight)},getLastVisibleRowIndex:function(f,d,e,c){var b,i,a=this,g=a.view.all,l=g.elements,h=a.viewClientHeight,j=a.bodyTop;if(g.getCount()&&a.variableRowHeight){if(arguments.length)b=f+Math.floor((d-f)/2);else{if(f=g.startIndex,d=g.endIndex,(c=(e=a.scrollTop)+h)<j||j+a.bodyHeight<e)return a.teleported=!0,Math.floor(a.scrollTop/a.rowHeight)+Math.ceil(h/a.rowHeight);b=d-Math.min(a.numFromEdge+(1===a.lastScrollDirection?a.leadingBufferZone:a.trailingBufferZone),Math.floor((d-f)/2))}if(c<(i=j+l[b].offsetTop))return a.getLastVisibleRowIndex(f,b-1,e,c);if(c<=i+l[b].offsetHeight)return b;if(b!==d)return a.getLastVisibleRowIndex(b+1,d,e,c)}return a.getFirstVisibleRowIndex()+Math.ceil(h/a.rowHeight)},getScrollHeight:function(){var h,f,e,b,a=this,d=a.view.all,c=a.store.getCount(),g=d.getCount();return c?(a.hasOwnProperty("rowHeight")||(g?a.variableRowHeight?a.rowHeight=Math.floor(a.bodyHeight/g):(f=(h=d.first()).getHeight(),Ext.isIE8&&0<(e=h.getBorderWidth("b"))&&(f-=e),a.rowHeight=f):delete a.rowHeight),a.variableRowHeight?d.endIndex===c-1?b=a.bodyTop+a.bodyHeight-1:(b=Math.floor((c-g)*a.rowHeight)+a.bodyHeight,b+=a.bodyTop-d.startIndex*a.rowHeight):b=Math.floor(c*a.rowHeight),a.scrollHeight=b):0},attemptLoad:function(b,c){var a=this;a.scrollToLoadBuffer?(a.loadTask||(a.loadTask=new Ext.util.DelayedTask(a.doAttemptLoad,a,[])),a.loadTask.delay(a.scrollToLoadBuffer,a.doAttemptLoad,a,[b,c])):a.doAttemptLoad(b,c)},cancelLoad:function(){this.loadTask&&this.loadTask.cancel()},doAttemptLoad:function(b,c){var a=this;a.destroyed||a.store.getRange(b,c,{loadId:++a.loadId,callback:function(c,d,e,b){b.loadId===a.loadId&&a.onRangeFetched(c,d,e,b)},fireEvent:!1})},destroy:function(){var a=this,b=a.view;a.cancelLoad(),b&&b.el&&b.un("scroll",a.onViewScroll,a),a.store&&a.unbindStore(),a.viewListeners=a.gridListeners=a.view=a.grid=Ext.destroy(a.viewListeners,a.stretcher,a.gridListeners),a.callParent()}},function(a){Ext.supports.Touch&&(a.prototype.leadingBufferZone=a.prototype.trailingBufferZone=2,a.prototype.numFromEdge=1)}),Ext.define("Ext.grid.plugin.Editing",{extend:Ext.plugin.Abstract,alias:"editing.editing",mixins:[Ext.mixin.Observable],clicksToEdit:2,triggerEvent:void 0,relayedEvents:["beforeedit","edit","validateedit","canceledit"],defaultFieldUI:"default",defaultFieldXType:"textfield",editStyle:"",constructor:function(b){var a=this;a.callParent([b]),a.mixins.observable.constructor.call(a),a.on("edit",function(b,c){a.fireEvent("afteredit",b,c)})},init:function(b){var a=this,c=b.ownerLockable;a.grid=b,a.view=b.view,a.initEvents(),b.rendered?a.setup():a.mon(b,{beforereconfigure:a.onBeforeReconfigure,reconfigure:a.onReconfigure,scope:a,beforerender:{fn:a.onBeforeRender,single:!0,scope:a}}),b.editorEventRelayers=b.relayEvents(a,a.relayedEvents),c&&(c.editorEventRelayers=c.relayEvents(a,a.relayedEvents)),b.isEditable=!0,b.editingPlugin=b.view.editingPlugin=a},onBeforeReconfigure:function(){this.reconfiguring=!0},onReconfigure:function(){this.setup(),delete this.reconfiguring},onBeforeRender:function(){this.setup()},setup:function(){this.initFieldAccessors(this.grid.getTopLevelColumnManager().getColumns())},destroy:function(){var b=this,a=b.grid;Ext.destroy(b.keyNav),b.clearListeners(),a&&(a.ownerLockable&&(Ext.destroy(a.ownerLockable.editorEventRelayers),a.ownerLockable.editorEventRelayers=null),Ext.destroy(a.editorEventRelayers),a.editorEventRelayers=null,a.editingPlugin=a.view.editingPlugin=b.grid=b.view=b.editor=b.keyNav=null),b.callParent()},getEditStyle:function(){return this.editStyle},initFieldAccessors:function(a){a.isGroupHeader?a=a.getGridColumns():Ext.isArray(a)||(a=[a]);function e(b,a){return d.getColumnField(this,a)}function f(){return d.hasColumnField(this)}function g(a){d.setColumnField(this,a)}var c,b,d=this,h=a.length;for(c=0;c<h;c++)(b=a[c]).getEditor||(b.getEditor=e),b.hasEditor||(b.hasEditor=f),b.setEditor||(b.setEditor=g)},removeFieldAccessors:function(a){a.isGroupHeader?a=a.getGridColumns():Ext.isArray(a)||(a=[a]);var c,b,d=a.length;for(c=0;c<d;c++)(b=a[c]).getEditor=b.hasEditor=b.setEditor=b.field=b.editor=null},getColumnField:function(b,d){var a=b.field;return a&&a.isFormField||(a=b.field=this.createColumnField(b,d)),a&&"default"===a.ui&&!a.hasOwnProperty("ui")&&(a.ui=this.defaultFieldUI),a},hasColumnField:function(a){return!(!a.field||!a.field.isComponent)},setColumnField:function(a,b){a.field=b,a.field=this.createColumnField(a)},createColumnField:function(b,d){var c,a=b.field;return!a&&b.editor&&(a=b.editor,b.editor=null),!a&&d&&(a=d),a&&(c=b.dataIndex,a.isComponent?a.column=b:(a=Ext.isString(a)?{name:c,xtype:a,column:b}:Ext.apply({name:c,column:b},a),a=Ext.ComponentManager.create(a,this.defaultFieldXType)),a.dataIndex=c,a.isEditorComponent=!0,b.field=a),a},initEvents:function(){this.initEditTriggers(),this.initCancelTriggers()},initCancelTriggers:Ext.emptyFn,initEditTriggers:function(){var a=this,b=a.view;"cellfocus"===a.triggerEvent?a.mon(b,"cellfocus",a.onCellFocus,a):"rowfocus"===a.triggerEvent?a.mon(b,"rowfocus",a.onRowFocus,a):(b.getSelectionModel().isCellModel&&(b.onCellFocus=a.beforeViewCellFocus.bind(a)),a.mon(b,a.triggerEvent||"cell"+(1===a.clicksToEdit?"click":"dblclick"),a.onCellClick,a)),a.initAddRemoveHeaderEvents(),a.view.getNavigationModel().addKeyBindings({esc:a.onEscKey,scope:a})},beforeViewCellFocus:function(a){!this.view.selModel.keyNavigation&&this.editing&&this.isCellEditable&&this.isCellEditable(a.row,a.columnHeader)||this.view.focusCell.apply(this.view,arguments)},onRowFocus:function(b,a,c){this.startEdit(a,0)},onCellFocus:function(b,c,a){this.startEdit(a.row,a.column)},onCellClick:function(a,i,e,g,j,h,c){var b=a.expanderSelector,f=a.ownerCt.getColumnManager().getHeaderAtIndex(e).getEditor(g);!this.shouldStartEdit(f)||b&&c.getTarget(b)||a.ownerGrid.setActionableMode(!0,c.position)},initAddRemoveHeaderEvents:function(){var a=this,b=a.grid.headerCt;a.mon(b,{scope:a,add:a.onColumnAdd,columnmove:a.onColumnMove,beforedestroy:a.beforeGridHeaderDestroy})},onColumnAdd:function(b,a){this.initFieldAccessors(a)},onColumnMove:Ext.emptyFn,onEscKey:function(b){if(this.editing){var a=Ext.getCmp(b.getTarget().getAttribute("componentId"));if(!(a&&a.isPickerField&&a.isExpanded))return this.cancelEdit()}},beforeEdit:Ext.emptyFn,shouldStartEdit:function(a){return!!a},getEditingContext:function(d,a){var c,f,h,j,b,e=this,g=e.grid,k=g.visibleColumnManager,i=e.grid.lockable?e.grid:e.view;if(i.componentLayoutCounter){if(!e.disabled&&!e.grid.collapsed&&e.grid.view.isVisible(!0)&&(Ext.isNumber(a)&&(a=k.getHeaderAtIndex(a)),a&&(a.hidden&&(a=a.next(":not([hidden])")||a.prev(":not([hidden])")),(g=(c=a.getView()).ownerCt).ensureVisible(d,{column:a}),(f=c.getRow(d))&&(j=c.getVisibleColumnManager().indexOf(a),Ext.isNumber(d)?(h=d,d=c.getRecord(f)):h=c.indexOf(f),d))))return(b=new Ext.grid.CellContext(c).setAll(c,h,j,d,a)).grid=g,b.store=c.dataSource,b.field=a.dataIndex,b.value=b.originalValue=d.get(a.dataIndex),b.row=f,b.node=c.getNode(d),b.cell=c.getCellByPosition(b,!0),b}else i.on({boxready:Ext.Function.bind(e.startEdit,e,[d,a]),single:!0})},cancelEdit:function(){var a=this;a.editing=!1,a.fireEvent("canceledit",a,a.context)},completeEdit:function(){var a=this;a.editing&&a.validateEdit()&&a.fireEvent("edit",a,a.context),a.context=null,a.editing=!1},validateEdit:function(a){return!1!==this.fireEvent("validateedit",this,a)&&!a.cancel}}),Ext.define("Ext.grid.plugin.CellEditing",{alias:"plugin.cellediting",extend:Ext.grid.plugin.Editing,init:function(b){var a=this;a.cacheDeactivatedEditors=Ext.Function.createAnimationFrame(a.cacheDeactivatedEditors),b.registerActionable(a),a.callParent(arguments),a.editors=new Ext.util.MixedCollection(!1,function(a){return a.editorId})},beforeGridHeaderDestroy:function(g){var c,a,b,d=this,e=d.grid.getColumnManager().getColumns(),f=e.length;for(c=0;c<f;c++)a=e[c],b=(b=d.editors.getByKey(a.getItemId()))||(a.editor||a.field),Ext.destroy(b),d.removeFieldAccessors(a)},onReconfigure:function(c,b,a){a&&this.editors.clear(),this.callParent()},destroy:function(){var a=this;a.editors&&(a.editors.each(Ext.destroy,Ext),a.editors.clear()),a.callParent()},initCancelTriggers:function(){var a=this,b=a.grid;a.mon(b,{columnresize:a.cancelEdit,columnmove:a.cancelEdit,scope:a})},isCellEditable:function(c,a){var b=this.getEditingContext(c,a);if(b.view.isVisible(!0)&&b&&(a=b.column,c=b.record,a&&this.getEditor(c,a)))return!0},activateCell:function(g){var c,d,a,b=this,f=g.record,e=g.column;if((c=b.getEditingContext(f,e))&&(b.preventBeforeCheck||e.getEditor(f)&&!1!==b.beforeEdit(c)&&!1!==b.fireEvent("beforeedit",b,c)&&!c.cancel))return(a=b.getEditor(f,e))?(d=Ext.get(c.cell),a.rendered?(a.container!==d&&(a.container=d).dom.insertBefore(a.el.dom,d.dom.firstChild),a.hide()):(a.hidden=!0,a.render(d,0)),b.setEditingContext(c),a.startEdit(d,c.value,!1),a.editing&&(b.setActiveEditor(a),b.setActiveRecord(f),b.setActiveColumn(e),b.editing=!0,b.scroll=g.view.el.getScroll()),a.editing):void 0},activateRow:Ext.emptyFn,deactivate:function(){var a,b=this.editors.items,d=b.length;for(a=0;a<d;a++)b[a].hide();this.cacheDeactivatedEditors()},cacheDeactivatedEditors:function(){var b,a,d=this.editors.items,e=d.length,c=Ext.getDetachedBody();for(b=0;b<e;b++)(a=d[b]).isVisible()||(c.dom.appendChild(a.el.dom),a.container=c)},startEdit:function(b,a){this.startEditByPosition(new Ext.grid.CellContext(this.view).setPosition(b,a))},completeEdit:function(b){var a=this.getActiveEditor();a&&a.completeEdit(b)},setEditingContext:function(a){this.context=a},setActiveEditor:function(a){this.activeEditor=a},getActiveEditor:function(){return this.activeEditor},setActiveColumn:function(a){this.activeColumn=a},getActiveColumn:function(){return this.activeColumn},setActiveRecord:function(a){this.activeRecord=a},getActiveRecord:function(){return this.activeRecord},getEditor:function(f,c){var b=this,e=b.editors,d=c.getItemId(),a=e.getByKey(d);if(!a){if(!(a=c.getEditor(f)))return!1;a instanceof Ext.grid.CellEditor?a.floating=!0:a=new Ext.grid.CellEditor({floating:!0,editorId:d,field:a}),a.field.excludeForm=!0,a.column!==c&&(a.column=c,a.on({scope:b,complete:b.onEditComplete,canceledit:b.cancelEdit}),c.on("removed",b.onColumnRemoved,b)),e.add(a)}return a.ownerCmp=b.grid.ownerGrid,c.isTreeColumn&&(a.isForTree=c.isTreeColumn,a.addCls(Ext.baseCSSPrefix+"tree-cell-editor")),a.setGrid(b.grid),a.editingPlugin=b,a},onColumnRemoved:function(c){var a=this,b=a.context;b&&b.column===c&&a.cancelEdit(),c.un("removed",a.onColumnRemoved,a)},setColumnField:function(a,c){var b=this.editors.getByKey(a.getItemId());Ext.destroy(b,a.field),this.editors.removeAtKey(a.getItemId()),this.callParent(arguments)},getCell:function(b,a){return this.grid.getView().getCell(b,a)},onEditComplete:function(g,d,f){var e,c,a=this,b=g.context;e=b.view,c=b.record,b.value=d,a.validateEdit(b)?(c.isEqual(d,f)||(c.set(b.column.dataIndex,d),b.rowIdx=e.indexOf(c)),a.fireEvent("edit",a,b),a.context===b&&(a.setActiveEditor(null),a.setActiveColumn(null),a.setActiveRecord(null),a.editing=!1)):a.editing=!1},cancelEdit:function(a){var b=this,c=b.context;a&&a.isCellEditor?(b.context.value="editedValue"in a?a.editedValue:a.getValue(),b.callParent(arguments),a.context===c?(b.setActiveEditor(null),b.setActiveColumn(null),b.setActiveRecord(null)):b.editing=!0):(a=b.getActiveEditor())&&a.field&&a.cancelEdit()},startEditByPosition:function(b){var d,a=this,e=a.grid.getColumnManager(),c=a.getActiveEditor();if(b.isCellContext||(b=new Ext.grid.CellContext(a.view).setPosition(b.row,a.grid.getColumnManager().getColumns()[b.column])),d=e.getHeaderIndex(b.column),b.column=e.getVisibleHeaderClosestToIndex(d),a.grid.actionableMode){if(a.editing&&b.isEqual(a.context))return;c&&c.completeEdit()}if(!a.grid.actionableMode)return a.grid.setActionableMode(!0,b);a.activateCell(b)&&(a.activateRow(a.view.all.item(b.rowIdx,!0)),(c=a.getEditor(b.record,b.column))&&c.field.focus())}}),Ext.define("Ext.theme.triton.grid.plugin.RowExpander",{override:"Ext.grid.plugin.RowExpander",headerWidth:32}),Ext.define("Ext.theme.triton.grid.selection.SpreadsheetModel",{override:"Ext.grid.selection.SpreadsheetModel",checkboxHeaderWidth:32}),Ext.define("Ext.util.Queue",{constructor:function(){this.clear()},add:function(b){var a=this,c=a.getKey(b);return a.map[c]||(++a.length,a.items.push(b),a.map[c]=b),b},clear:function(){var a=this,b=a.items;return a.items=[],a.map={},a.length=0,b},contains:function(b){var a=this.getKey(b);return this.map.hasOwnProperty(a)},getCount:function(){return this.length},getKey:function(a){return a.id},remove:function(b){var c,a=this,e=a.getKey(b),d=a.items;return a.map[e]&&(c=Ext.Array.indexOf(d,b),Ext.Array.erase(d,c,1),delete a.map[e],--a.length),b}}),Ext.define("Ext.layout.ContextItem",{heightModel:null,widthModel:null,sizeModel:null,optOut:!1,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:!0,isContextItem:!0,isTopLevel:!1,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:!1,constructor:function(s){var r,c,f,d,k,i,b,p,m,q,n,h,e,j,a=this,o=Ext.layout.SizeModel.sizeModels,l=o.configured,g=o.shrinkWrap;Ext.apply(a,s),b=a.target,r=a.el,a.id=b.id,a.flushedProps={},a.props=k={},a.styles={},b.isComponent?(a.wrapsComponent=!0,a.framing=b.frameSize||null,a.isComponentChild=b.ownerLayout&&b.ownerLayout.isComponentLayout,c=b.lastBox,(f=b.ownerCt)&&(d=f.el&&a.context.items[f.el.id])&&(a.ownerCtContext=d),a.sizeModel=i=b.getSizeModel(d&&d.widthModel.pairsByHeightOrdinal[d.heightModel.ordinal]),a.widthModel=h=i.width,a.heightModel=e=i.height,c&&!1===c.invalid&&(q=b.width===(p=c.width),n=b.height===(m=c.height),h===g&&e===g?j=!0:h===l&&q&&(j=e===g||e===l&&n),j&&(a.optOut=!0,k.width=p,k.height=m))):c=r.lastBox,a.lastBox=c},init:function(r,i){var n,l,t,q,k,d,f,g,a=this,c=a.props,e=a.dirty,b=a.ownerCtContext,h=a.target.ownerLayout,j=!a.state,s=r||j,o=a.heightModel,p=a.widthModel,m=0;if(a.dirty=a.invalid=!1,a.props={},a.remainingChildDimensions=0,a.boxChildren&&(a.boxChildren.length=0),j||(a.clearAllBlocks("blocks"),a.clearAllBlocks("domBlocks")),!a.wrapsComponent)return s;if(d=a.target,a.state={},j)d.beforeLayout&&d.beforeLayout!==Ext.emptyFn&&d.beforeLayout(),!b&&(q=d.ownerCt)&&(b=a.context.items[q.el.id]),b?(a.ownerCtContext=b,a.isBoxParent=h&&h.isItemBoxParent(a)):a.isTopLevel=!0,a.frameBodyContext=a.getEl("frameBody");else for(b=a.ownerCtContext,a.isTopLevel=!b,l=0,t=(n=a.children).length;l<t;++l)n[l].init(!0);return a.hasRawContent=!(d.isContainer&&0<d.items.items.length),r?(a.widthModel=a.heightModel=null,k=d.getSizeModel(b&&b.widthModel.pairsByHeightOrdinal[b.heightModel.ordinal]),j&&(a.sizeModel=k),a.widthModel=k.width,a.heightModel=k.height,b&&!a.isComponentChild&&(h.needsItemSize||!d.liquidLayout?b.remainingChildDimensions+=2:(a.widthModel.calculated&&++b.remainingChildDimensions,a.heightModel.calculated&&++b.remainingChildDimensions))):c&&(a.recoverProp("x",c,e),a.recoverProp("y",c,e),a.widthModel.calculated?a.recoverProp("width",c,e):"width"in c&&++m,a.heightModel.calculated?a.recoverProp("height",c,e):"height"in c&&++m,b&&!a.isComponentChild&&(b.remainingChildDimensions+=m)),c&&h&&h.manageMargins&&(a.recoverProp("margin-top",c,e),a.recoverProp("margin-right",c,e),a.recoverProp("margin-bottom",c,e),a.recoverProp("margin-left",c,e)),i&&(f=i.heightModel,(g=i.widthModel)&&f&&p&&o&&p.shrinkWrap&&o.shrinkWrap&&g.constrainedMax&&f.constrainedMin&&(f=null),g&&(a.widthModel=g),f&&(a.heightModel=f),i.state&&Ext.apply(a.state,i.state)),s},initContinue:function(f){var d,b=this,a=b.ownerCtContext,g=b.target,c=b.widthModel,e=g.getInherited();return c.fixed?e.inShrinkWrapTable=!1:delete e.inShrinkWrapTable,f&&(a&&c.shrinkWrap?(d=a.isBoxParent?a:a.boxParent)&&d.addBoxChild(b):c.natural&&(b.boxParent=a)),f},initDone:function(d){var a=this,b=a.props,c=a.state;0===a.remainingChildDimensions&&(b.containerChildrenSizeDone=!0),d&&(b.containerLayoutDone=!0),a.boxChildren&&a.boxChildren.length&&a.widthModel.shrinkWrap&&(a.el.setWidth(1e4),c.blocks=(c.blocks||0)+1)},initAnimation:function(){var a=this,b=a.target,c=a.ownerCtContext;c&&c.isTopLevel?a.animatePolicy=b.ownerLayout.getAnimatePolicy(a):!c&&b.isCollapsingOrExpanding&&b.animCollapse&&(a.animatePolicy=b.componentLayout.getAnimatePolicy(a)),a.animatePolicy&&a.context.queueAnimation(a)},addBlock:function(f,a,e){var b=this,d=b[f]||(b[f]={}),c=d[e]||(d[e]={});c[a.id]||(++(c[a.id]=a).blockCount,++b.context.blockCount)},addBoxChild:function(a){var b,c=a.widthModel;a.boxParent=this,a.measuresBox=c.shrinkWrap?a.hasRawContent:c.natural,a.measuresBox&&((b=this.boxChildren)?b.push(a):this.boxChildren=[a])},addPositionStyles:function(b,c){var d=c.x,e=c.y,a=0;return void 0!==d&&(b.left=d+"px",++a),void 0!==e&&(b.top=e+"px",++a),a},addTrigger:function(c,e){var b=this,h=e?"domTriggers":"triggers",f=b[h]||(b[h]={}),g=b.context,a=g.currentLayout,d=f[c]||(f[c]={});d[a.id]||(++(d[a.id]=a).triggerCount,((d=g.triggers[e?"dom":"data"])[a.id]||(d[a.id]=[])).push({item:this,prop:c}),void 0!==b.props[c]&&(e&&b.dirty&&c in b.dirty||++a.firedTriggers))},boxChildMeasured:function(){var a=this,b=a.state;(b.boxesMeasured=(b.boxesMeasured||0)+1)===a.boxChildren.length&&(b.clearBoxWidth=1,++a.context.progressCount,a.markDirty())},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(b){var a=b.getStyles(b.borderNames,b.trblNames);return a.width=a.left+a.right,a.height=a.top+a.bottom,a},marginInfo:function(b){var a=b.getStyles(b.marginNames,b.trblNames);return a.width=a.left+a.right,a.height=a.top+a.bottom,a},paddingInfo:function(b){var a=(b.frameBodyContext||b).getStyles(b.paddingNames,b.trblNames);return a.width=a.left+a.right,a.height=a.top+a.bottom,a}},checkCache:function(a){return this.cacheMissHandlers[a](this)},clearAllBlocks:function(c){var b,a=this[c];if(a)for(b in a)this.clearBlocks(c,b)},clearBlocks:function(g,f){var d,a,e,c=this[g],b=c&&c[f];if(b)for(e in delete c[f],d=this.context,b)a=b[e],--d.blockCount,--a.blockCount||a.pending||a.done||d.queueLayout(a)},block:function(b,a){this.addBlock("blocks",b,a)},domBlock:function(b,a){this.addBlock("domBlocks",b,a)},fireTriggers:function(g,e){var a,d,c=this[g],b=c&&c[e],f=this.context;if(b)for(d in b)++(a=b[d]).firedTriggers,a.done||a.blockCount||a.pending||f.queueLayout(a)},flush:function(){var a=this,d=a.dirty,b=a.state,c=a.el;a.dirtyCount=0,"attributes"in a&&(c.set(a.attributes),delete a.attributes),"innerHTML"in a&&(c.innerHTML=a.innerHTML,delete a.innerHTML),b&&b.clearBoxWidth&&(b.clearBoxWidth=0,a.el.setStyle("width",null),--b.blocks||a.context.queueItemLayouts(a)),d&&(delete a.dirty,a.writeProps(d,!0))},flushAnimations:function(){var a,h,l,f,d,g,e,m,c,j,i,b=this,k=b.previousSize;if(k){for(l=(h=(a=b.target).getAnimationProps()).duration,f=Ext.Object.getKeys(b.animatePolicy),d=Ext.apply({},{from:{},to:{},duration:l||Ext.fx.Anim.prototype.duration},h),e=g=0,m=f.length;e<m;e++)(j=k[c=f[e]])!==(i=b.peek(c))&&(c=b.translateProps[c]||c,d.from[c]=j,d.to[c]=i,++g);g&&(1===b.isCollapsingOrExpanding?a.componentLayout.undoLayout(b):b.writeProps(d.from),b.el.animate(d),d=Ext.fx.Manager.getFxQueue(b.el.id)[0],(a.$layoutAnim=d).on({afteranimate:function(){delete a.$layoutAnim,a.destroying||a.destroyed||(1===b.isCollapsingOrExpanding?(a.componentLayout.redoLayout(b),a.afterCollapse(!0)):2===b.isCollapsingOrExpanding&&a.afterExpand(!0),a.hasListeners.afterlayoutanimation&&a.fireEvent("afterlayoutanimation",a))}}))}},getBorderInfo:function(){var b=this,a=b.borderInfo;return a||(b.borderInfo=a=b.checkCache("borderInfo")),a},getEl:function(b,f){var c,a,e,d=this;if(b){if(b.dom)a=b;else if(c=d.target,f&&(c=f),"function"==typeof(a=c[b])&&(a=a.call(c))===d.el)return this;a&&(e=d.context.getEl(d,a))}return e||null},getFrameInfo:function(){var a,b,c=this,d=c.frameInfo;return d||(a=c.framing,b=c.getBorderInfo(),c.frameInfo=d=a?{top:a.top+b.top,right:a.right+b.right,bottom:a.bottom+b.bottom,left:a.left+b.left,width:a.width+b.width,height:a.height+b.height}:b),d},getMarginInfo:function(){var c,f,d,e,b=this,a=b.marginInfo;return a||(b.wrapsComponent?(e=(d=(c=b.target).ownerLayout)?d.id:null,f=d&&d.manageMargins,(a=c.margin$)&&a.ownerId!==e&&(a=null),a||(a=b.parseMargins(c,c.margin)||b.checkCache("marginInfo"),f&&(b.setProp("margin-top",0),b.setProp("margin-right",0),b.setProp("margin-bottom",0),b.setProp("margin-left",0)),a.ownerId=e,c.margin$=a),a.width=a.left+a.right,a.height=a.top+a.bottom):a=b.checkCache("marginInfo"),b.marginInfo=a),a},clearMarginCache:function(){delete this.marginInfo,delete this.target.margin$},getPaddingInfo:function(){var b=this,a=b.paddingInfo;return a||(b.paddingInfo=a=b.checkCache("paddingInfo")),a},getProp:function(a){var c=this.props[a];return this.addTrigger(a),c},getDomProp:function(b){var a=this,c=a.dirty&&b in a.dirty?void 0:a.props[b];return a.addTrigger(b,!0),c},getStyle:function(b){var d,a,e=this,c=e.styles;return b in c?a=c[b]:(d=e.styleInfo[b],a=e.el.getStyle(b),d&&d.parseInt&&(a=parseInt(a,10)||0),c[b]=a),a},getStyles:function(f,e){var a,b,d,c,k,m,n,g,l=this,i=l.styles,j={},h=0,o=f.length;for(e=e||f,a=0;a<o;++a)(c=f[a])in i?(j[e[a]]=i[c],++h,a&&1===h&&(b=f.slice(0,a),d=e.slice(0,a))):h&&((b=b||[]).push(c),(d=d||[]).push(e[a]));if(h<o)for(b=b||f,d=d||e,m=l.styleInfo,n=l.el.getStyle(b),a=b.length;a--;)k=m[c=b[a]],g=n[c],k&&k.parseInt&&(g=parseInt(g,10)||0),j[d[a]]=g,i[c]=g;return j},hasProp:function(a){return null!=this.getProp(a)},hasDomProp:function(a){return null!=this.getDomProp(a)},invalidate:function(a){this.context.queueInvalidate(this,a)},markDirty:function(){1==++this.dirtyCount&&this.context.queueFlush(this)},onBoxMeasured:function(){var a=this.boxParent,b=this.state;a&&a.widthModel.shrinkWrap&&!b.boxMeasured&&this.measuresBox&&(b.boxMeasured=1,a.boxChildMeasured())},parseMargins:function(c,a){!0===a&&(a=5);var b,d=typeof a;return"string"==d||"number"==d?b=c.parseBox(a):a&&(b={top:0,right:0,bottom:0,left:0},a=a&&Ext.apply(b,c.parseBox(a))),b},peek:function(a){return this.props[a]},recalculateSizeModel:function(){var d,a=this,e=a.target,b=e.componentLayout,c=a.ownerCtContext,f=b.ownerContext;b.ownerContext=null,a.sizeModel=d=e.getSizeModel(c&&c.widthModel.pairsByHeightOrdinal[c.heightModel.ordinal]),a.widthModel=d.width,a.heightModel=d.height,f&&(b.ownerContext=a)},recoverProp:function(a,d,b){var c=this,f=c.props;a in d&&(f[a]=d[a],b&&a in b&&((c.dirty||(c.dirty={}))[a]=b[a]))},redo:function(e){var b,d,a,c=this;if(c.revertProps(c.props),e&&c.wrapsComponent){if(c.childItems)for(a=0,d=(b=c.childItems).length;a<d;a++)b[a].redo(e);for(a=0,d=(b=c.children).length;a<d;a++)b[a].redo()}},removeEl:function(b,e){var c,a,d=this;if(b){if(b.dom)a=b;else if(c=d.target,e&&(c=e),"function"==typeof(a=c[b])&&(a=a.call(c))===d.el)return this;a&&d.context.removeEl(a,d)}},revertProps:function(c){var a,d=this.flushedProps,b={};for(a in c)d.hasOwnProperty(a)&&(b[a]=c[a]);this.writeProps(b)},setAttribute:function(c,b){var a=this;a.attributes||(a.attributes={}),a.attributes[c]=b,a.markDirty()},setBox:function(a){var b=this;"left"in a&&b.setProp("x",a.left),"top"in a&&b.setProp("y",a.top),b.setSize(a.width,a.height)},setContentHeight:function(b,a){return!a&&this.hasRawContent?1:this.setProp("contentHeight",b)},setContentWidth:function(b,a){return!a&&this.hasRawContent?1:this.setProp("contentWidth",b)},setContentSize:function(c,b,a){return this.setContentWidth(c,a)+this.setContentHeight(b,a)===2},setProp:function(b,c,f){var a=this,d=typeof c;return"undefined"==d||"number"==d&&isNaN(c)?0:(a.props[b]===c||(a.props[b]=c,++a.context.progressCount,!1===f?(a.fireTriggers("domTriggers",b),a.clearBlocks("domBlocks",b)):a.styleInfo[b]&&(a.dirty||(a.dirty={}),a.dirty[b]=c,a.markDirty()),a.fireTriggers("triggers",b),a.clearBlocks("blocks",b)),1)},setHeight:function(b,e){var d,f,i,g,a=this,h=a.target,c=a.ownerCtContext;if(b<0&&(b=0),a.wrapsComponent){if(i=!a.collapsedVert&&h.minHeight||0,b=Ext.Number.constrain(b,i,h.maxHeight),g=a.props.height,!a.setProp("height",b,e))return NaN;c&&!a.isComponentChild&&isNaN(g)&&(--c.remainingChildDimensions||c.setProp("containerChildrenSizeDone",!0)),(d=a.frameBodyContext)&&(f=a.getFrameInfo(),d[a.el.vertical?"setWidth":"setHeight"](b-f.height,e))}else if(!a.setProp("height",b,e))return NaN;return b},setWidth:function(b,e){var d,f,i,g,a=this,h=a.target,c=a.ownerCtContext;if(b<0&&(b=0),a.wrapsComponent){if(i=!a.collapsedHorz&&h.minWidth||0,b=Ext.Number.constrain(b,i,h.maxWidth),g=a.props.width,!a.setProp("width",b,e))return NaN;c&&!a.isComponentChild&&isNaN(g)&&(--c.remainingChildDimensions||c.setProp("containerChildrenSizeDone",!0)),(d=a.frameBodyContext)&&(f=a.getFrameInfo(),d.setWidth(b-f.width,e))}else if(!a.setProp("width",b,e))return NaN;return b},setSize:function(c,b,a){this.setWidth(c,a),this.setHeight(b,a)},translateProps:{x:"left",y:"top"},undo:function(e){var b,d,a,c=this;if(c.revertProps(c.lastBox),e&&c.wrapsComponent){if(c.childItems)for(a=0,d=(b=c.childItems).length;a<d;a++)b[a].undo(e);for(a=0,d=(b=c.children).length;a<d;a++)b[a].undo()}},unsetProp:function(a){var b=this.dirty;delete this.props[a],b&&delete b[a]},writeProps:function(a,s){if(a&&"object"==typeof a){var g,c,k,m,l,e,j,p,b=this,q=b.el,d={},f=0,r=b.styleInfo,i=a.width,h=a.height,o=b.target;for(c in"displayed"in a&&q.setDisplayed(a.displayed),a)s&&(b.fireTriggers("domTriggers",c),b.clearBlocks("domBlocks",c),b.flushedProps[c]=1),(g=r[c])&&g.dom&&(g.suffix&&(k=parseInt(a[c],10))?d[c]=k+g.suffix:d[c]=a[c],++f);("x"in a||"y"in a)&&(o.isComponent?o.setPosition(a.x,a.y):f+=b.addPositionStyles(d,a)),b.wrapsComponent&&Ext.isIE9&&((m=void 0!==i&&b.hasOverflowY)||(l=void 0!==h&&b.hasOverflowX))&&(void 0===(e=b.isAbsolute)&&(e=!1,p=b.target.getTargetEl().getStyle("position"),b.isAbsolute=e="absolute"===p),e&&(j=Ext.getScrollbarSize(),m&&(i=parseInt(i,10)+j.width,d.width=i+"px",++f),l&&(h=parseInt(h,10)+j.height,d.height=h+"px",++f))),f&&q.setStyle(d)}},debugHooks:{$enabled:!1,addBlock:function(c,a,b){return(a.blockedBy||(a.blockedBy={}))[this.id+"."+b+("dom"===c.substring(0,3)?":dom":"")]=1,this.callParent(arguments)},addBoxChild:function(d){var c=this.callParent(arguments),a=this.boxChildren;return a&&1===a.length&&(this.context.boxParents||(this.context.boxParents=new Ext.util.MixedCollection)).add(this),c},addTrigger:function(b,d){var a,c=this.context.currentLayout;this.callParent(arguments),((a=this.context.triggersByLayoutId)[c.id]||(a[c.id]={}))[this.id+"."+b+(d?":dom":"")]={item:this,name:b}},checkAuthority:function(f){var d,e,a=this,c=a[f+"Model"],b=a.context.currentLayout;b===a.target.ownerLayout?d=c.calculated:b.isComponentLayout&&(d=a.isTopLevel||c.auto||c.configured),d||(e=a.context.getLayoutName(b),Ext.log(e+" cannot set "+f))},clearBlocks:function(f,d){var c,b=this[f],a=b&&b[d],g=this.id+"."+d+("dom"===f.substring(0,3)?":dom":"");if(a)for(c in a)delete a[c].blockedBy[g];return this.callParent(arguments)},getEl:function(b){var a=this.callParent(arguments);return a&&a!==this&&a.parent!==this&&Ext.raise({msg:"Got element from wrong component"}),a},init:function(){var b,a=this;return b=a.callParent(arguments),a.context.logOn.initItem&&Ext.log(a.id," consumers: content=",a.consumersContentWidth,"/",a.consumersContentHeight,", container=",a.consumersContainerWidth,"/",a.consumersContainerHeight,", size=",a.consumersWidth,"/",a.consumersHeight),b},invalidate:function(){return this.wrapsComponent?this.context.logOn.invalidate&&Ext.log("invalidate: ",this.id):Ext.raise({msg:"Cannot invalidate an element contextItem"}),this.callParent(arguments)},setProp:function(b,d,h){var c,a=this,g=a.context.currentLayout,e=a.context.getLayoutName(g),f=a.id+"."+b;return null!==d&&((c=a.setBy||(a.setBy={}))[b]?c[b]!==e&&Ext.log({level:"warn"},"BAD! ",f," set by ",c[b]," and ",e):c[b]=e),a.context.logOn.setProp&&(void 0===d||isNaN(d)||a.props[b]===d||Ext.log("set ",f," = ",d," (",h,")")),this.callParent(arguments)},setHeight:function(b,c,a){return!a&&this.wrapsComponent&&this.checkAuthority("height"),this.callParent(arguments)},setWidth:function(c,b,a){return!a&&this.wrapsComponent&&this.checkAuthority("width"),this.callParent(arguments)}}},function(){var a={dom:!0,parseInt:!0,suffix:"px"},c={dom:!0},b={dom:!1};this.prototype.styleInfo={containerChildrenSizeDone:b,containerLayoutDone:b,displayed:b,done:b,x:b,y:b,columnsChanged:b,rowHeights:b,viewOverflowY:b,left:a,top:a,right:a,bottom:a,width:a,height:a,"border-top-width":a,"border-right-width":a,"border-bottom-width":a,"border-left-width":a,"margin-top":a,"margin-right":a,"margin-bottom":a,"margin-left":a,"padding-top":a,"padding-right":a,"padding-bottom":a,"padding-left":a,"line-height":c,display:c,clear:c}}),Ext.define("Ext.layout.Context",{remainingLayouts:0,state:0,cycleWatchDog:200,constructor:function(b){var a=this;Ext.apply(a,b),a.items={},a.layouts={},a.blockCount=0,a.cycleCount=0,a.flushCount=0,a.calcCount=0,a.animateQueue=a.newQueue(),a.completionQueue=a.newQueue(),a.finalizeQueue=a.newQueue(),a.finishQueue=a.newQueue(),a.flushQueue=a.newQueue(),a.invalidateData={},a.layoutQueue=a.newQueue(),a.invalidQueue=[],a.triggers={data:{},dom:{}}},callLayout:function(a,b){(this.currentLayout=a)[b](this.getCmp(a.owner))},cancelComponent:function(a,p,o){var e,f,j,d,c,m,h,i,k,g,b=this,l=a,n=!a.isComponent,q=n?l.length:1;for(e=0;e<q;++e){if(n&&(a=l[e]),o&&(a.ownerCt?(g=this.items[a.ownerCt.el.id])&&Ext.Array.remove(g.childItems,b.getCmp(a)):a.rendered&&b.removeEl(a.el)),!p&&(j=(h=b.invalidQueue).length))for(b.invalidQueue=m=[],f=0;f<j;++f)(k=(i=h[f]).item.target)===a||k.up(a)||m.push(i);c=a.componentLayout,b.cancelLayout(c),c.getLayoutItems&&(d=c.getLayoutItems()).length&&b.cancelComponent(d,!0),a.isContainer&&!a.collapsed&&(c=a.layout,b.cancelLayout(c),(d=c.getVisibleItems()).length&&b.cancelComponent(d,!0))}},cancelLayout:function(a){var b=this;b.completionQueue.remove(a),b.finalizeQueue.remove(a),b.finishQueue.remove(a),b.layoutQueue.remove(a),a.running&&b.layoutDone(a),a.ownerContext=null},clearTriggers:function(h,f){var b,e,d,g=h.id,a=this.triggers[f?"dom":"data"],c=a&&a[g],i=c&&c.length||0;for(b=0;b<i;++b)e=(d=c[b]).item,delete(a=f?e.domTriggers:e.triggers)[d.prop][g]},flush:function(){var a,c=this.flushQueue.clear(),b=c.length;if(b)for(++this.flushCount,a=0;a<b;++a)c[a].flush()},flushAnimations:function(){var a,b=this.animateQueue.clear(),c=b.length;if(c){for(a=0;a<c;a++)!1!==b[a].target.animate&&b[a].flushAnimations();Ext.fx.Manager.runner()}},flushInvalidates:function(){var a,d,e,c,b=this,f=b.invalidQueue,g=f&&f.length;if(b.invalidQueue=[],g){for(d=[],c=0;c<g;++c)(a=(e=f[c]).item.target).container.isDetachedBody||(d.push(a),e.options&&(b.invalidateData[a.id]=e.options));b.invalidate(d,null)}},flushLayouts:function(d,g,h){var b,c,a=this,e=h?a[d].items:a[d].clear(),f=e.length;if(f){for(b=0;b<f;++b)(c=e[b]).running||a.callLayout(c,g);a.currentLayout=null}},getCmp:function(a){return this.getItem(a,a.el)},getEl:function(b,c){var a=this.getItem(c,c);return a.parent||((a.parent=b).children.length?b.children.push(a):b.children=[a]),a},getItem:function(d,b){var c=b.id,a=this.items;return a[c]||(a[c]=new Ext.layout.ContextItem({context:this,target:d,el:b}))},handleFailure:function(){var b,c,a=this.layouts;for(c in Ext.failedLayouts=(Ext.failedLayouts||0)+1,a)b=a[c],a.hasOwnProperty(c)&&(b.running=!1,b.ownerContext=null)},invalidate:function(i,q){var l,h,m,k,c,a,g,p,e,b,f,n,j,d=this,o=!i.isComponent;for(k=0,p=o?i.length:1;k<p;++k)if((c=o?i[k]:i).rendered&&!c.hidden){if(h=c.ownerLayout,e=c.componentLayout,j=!1,h&&h.needsItemSize||!c.liquidLayout||(j=!0),(!j||h&&h.setsItemSize)&&(m=!(a=d.getCmp(c)).state,b=c.isContainer&&!c.collapsed?c.layout:null,f=d.invalidateData[a.id],delete d.invalidateData[a.id],n=a.init(q,f)),j)continue;f&&d.processInvalidate(f,a,"before"),e.beforeLayoutCycle&&e.beforeLayoutCycle(a),b&&b.beforeLayoutCycle&&b.beforeLayoutCycle(a),n=a.initContinue(n),l=!0,e.getLayoutItems&&(e.renderChildren(),(g=e.getLayoutItems()).length&&d.invalidate(g,!0)),b&&(l=!1,b.renderChildren(),(b.needsItemSize||b.activeItemCount)&&(g=b.getVisibleItems()).length&&d.invalidate(g,!0)),a.initDone(l),d.resetLayout(e,a,m),b&&d.resetLayout(b,a,m),a.initAnimation(),f&&d.processInvalidate(f,a,"after")}d.currentLayout=null},isDescendant:function(b,c){if(b.isContainer)for(var a=c.ownerCt;a;a=a.ownerCt)if(a===b)return!0;return!1},layoutDone:function(b){var a=b.ownerContext;b.running=!1,b.isComponentLayout?(a.measuresBox&&a.onBoxMeasured(),a.setProp("done",!0)):a.setProp("containerLayoutDone",!0),--this.remainingLayouts,++this.progressCount},newQueue:function(){return new Ext.util.Queue},processInvalidate:function(a,e,c){if(a[c]){var b=this,d=b.currentLayout;b.currentLayout=a.layout||null,a[c](e,a),b.currentLayout=d}},queueAnimation:function(a){this.animateQueue.add(a)},queueCompletion:function(a){this.completionQueue.add(a)},queueFinalize:function(a){this.finalizeQueue.add(a)},queueFlush:function(a){this.flushQueue.add(a)},chainFns:function(b,a,d){var c=this,g=b.layout,f=a.layout,e=b[d],h=a[d];return function(d){var i=c.currentLayout;e&&(c.currentLayout=g,e.call(b.scope||b,d,b)),c.currentLayout=f,h.call(a.scope||a,d,a),c.currentLayout=i}},purgeInvalidates:function(){var c,b,e,d,f,g,a=[],i=this.invalidQueue,k=i.length;for(c=0;c<k;++c){for(f=(d=i[c]).item.target,g=!0,b=a.length;b--;){if(e=a[b].item.target,f.isLayoutChild(e)){g=!1;break}e.isLayoutChild(f)&&Ext.Array.erase(a,b,1)}g&&a.push(d)}this.invalidQueue=a},queueInvalidate:function(c,a){var d,f,g,b,j,e=this,h=[],i=e.invalidQueue,k=i.length;for(c.isComponent?(d=c,(c=e.items[d.el.id])?c.recalculateSizeModel():c=e.getCmp(d)):d=c.target,c.invalid=!0;k--;){if(g=(f=i[k]).item.target,!d.isFloating&&d.up(g))return;if(g===d)return void((b=f.options)?a&&(a.widthModel&&(b.widthModel=a.widthModel),a.heightModel&&(b.heightModel=a.heightModel),(j=b.state)?a.state&&Ext.apply(j,a.state):b.state=a.state,a.before&&(b.before=e.chainFns(b,a,"before")),a.after&&(b.after=e.chainFns(b,a,"after"))):f.options=a);g.isLayoutChild(d)||h.push(f)}h.push({item:c,options:a}),e.invalidQueue=h},queueItemLayouts:function(c){var b=c.isComponent?c:c.target,a=b.componentLayout;a.pending||a.invalid||a.done||this.queueLayout(a),!(a=b.layout)||a.pending||a.invalid||a.done||b.collapsed||this.queueLayout(a)},queueLayout:function(a){this.layoutQueue.add(a),a.pending=!0},removeEl:function(e,b){var d=e.id,a=b?b.children:null,c=this.items;a&&Ext.Array.remove(a,c[d]),delete c[d]},resetLayout:function(a,c,d){var b=this;(b.currentLayout=a).done=!1,a.pending=!0,a.firedTriggers=0,b.layoutQueue.add(a),d?((b.layouts[a.id]=a).running=!0,a.finishedLayout&&b.finishQueue.add(a),++b.remainingLayouts,++a.layoutCount,a.ownerContext=c,a.beginCount=0,a.blockCount=0,a.calcCount=0,a.triggerCount=0,a.initialized||a.initLayout(),a.beginLayout(c)):(++a.beginCount,a.running||(++b.remainingLayouts,a.running=!0,a.ownerContext=c,a.isComponentLayout&&c.unsetProp("done"),b.completionQueue.remove(a),b.finalizeQueue.remove(a))),a.beginLayoutCycle(c,d)},run:function(){var a=this,b=!1,c=a.cycleWatchDog;for(a.purgeInvalidates(),a.flushInvalidates(),a.state=1,a.totalCount=a.layoutQueue.getCount(),a.flush();(a.remainingLayouts||a.invalidQueue.length)&&c--;){if(a.invalidQueue.length&&a.flushInvalidates(),a.runCycle())b=!1;else if(b){if(!a.invalidQueue.length){a.state=2;break}}else a.flush(),b=!0,a.flushLayouts("completionQueue","completeLayout");a.remainingLayouts||a.invalidQueue.length||(a.flush(),a.flushLayouts("completionQueue","completeLayout"),a.flushLayouts("finalizeQueue","finalizeLayout"))}return a.runComplete()},runComplete:function(){var a=this;return a.state=2,a.remainingLayouts?(a.handleFailure(),!1):(a.flush(),a.flushLayouts("finishQueue","finishedLayout",!0),a.flushLayouts("finishQueue","notifyOwner"),a.flush(),a.flushAnimations(),!0)},runCycle:function(){var b,a=this,c=a.layoutQueue.clear(),d=c.length;for(++a.cycleCount,b=a.progressCount=0;b<d;++b)a.runLayout(a.currentLayout=c[b]);return a.currentLayout=null,0<a.progressCount},runLayout:function(a){var b=this,c=b.getCmp(a.owner);a.pending=!1,c.state.blocks||(a.done=!0,++a.calcCount,++b.calcCount,a.calculate(c),a.done?(b.layoutDone(a),a.completeLayout&&b.queueCompletion(a),a.finalizeLayout&&b.queueFinalize(a)):a.pending||a.invalid||a.blockCount+a.triggerCount-a.firedTriggers||b.queueLayout(a))},setItemSize:function(a,g,f){var d,b=a,c=1;for(a.isComposite?(c=(b=a.elements).length,a=b[0]):a.dom||a.el||(c=b.length,a=b[0]),d=0;d<c;)this.get(a).setSize(g,f),a=b[++d]},debugHooks:{$enabled:!1,pageAnalyzerMode:!0,logOn:{0:0},cancelComponent:function(a){this.logOn.cancelComponent&&Ext.log("cancelCmp: ",a.id),this.callParent(arguments)},cancelLayout:function(a){this.logOn.cancelLayout&&Ext.log("cancelLayout: ",this.getLayoutName(a)),this.callParent(arguments)},callLayout:function(b,d){var a=this.accumByType[b.type],c=a&&a.enter();this.callParent(arguments),a&&c.leave()},checkRemainingLayouts:function(){var b,d,a=this,c=0;for(b in a.layouts)d=a.layouts[b],a.layouts.hasOwnProperty(b)&&d.running&&++c;a.remainingLayouts!==c&&Ext.raise({msg:"Bookkeeping error me.remainingLayouts"})},flush:function(){if(this.logOn.flush){var a=this.flushQueue;Ext.log("--- Flush ",a&&a.getCount())}return this.callParent(arguments)},flushInvalidates:function(){this.logOn.flushInvalidate&&Ext.log(">> flushInvalidates");var a=this.callParent(arguments);return this.logOn.flushInvalidate&&Ext.log("<< flushInvalidates"),a},getCmp:function(b){var a=this.callParent(arguments);return a.wrapsComponent||Ext.raise({msg:b.id+" is not a component"}),a},getEl:function(b,c){var a=this.callParent(arguments);return a&&a.wrapsComponent&&Ext.raise({msg:b.id+"/"+c.id+" is a component (expected element)"}),a},getLayoutName:function(a){return a.owner.id+"<"+a.type+">"},layoutDone:function(c){var a=this,b=a.getLayoutName(c);a.logOn.layoutDone&&Ext.log("layoutDone: ",b," ( ",a.remainingLayouts," running)"),c.running||Ext.raise({msg:b+" is already done"}),a.remainingLayouts||Ext.raise({msg:b+" finished but no layouts are running"}),a.callParent(arguments)},layoutTreeHasFailures:function(b,c){var a=this;if(function hasFailure(d){var c,b,e=!d.done;if(d.done)for(c in a.layouts)a.layouts.hasOwnProperty(c)&&(b=a.layouts[c]).owner.ownerLayout===d&&hasFailure(b)&&(e=!0);return e}(b))return!0;return function markReported(e){var d,b;for(d in c[e.id]=1,a.layouts)a.layouts.hasOwnProperty(d)&&(b=a.layouts[d]).owner.ownerLayout===e&&markReported(b)}(b),!1},queueLayout:function(a){return(a.done||a.blockCount||a.pending)&&Ext.raise({msg:this.getLayoutName(a)+" should not be queued for layout"}),this.logOn.queueLayout&&Ext.log("Queue ",this.getLayoutName(a)),this.callParent(arguments)},reportLayoutResult:function(a,m){var c,g,f,l,e,h,n,k,b=this,o=a.owner,d=b.getCmp(o),j=[],i=[];for(c in m[a.id]=1,a.blockedBy)a.blockedBy.hasOwnProperty(c)&&j.push(a.blockedBy[c]);for(c in j.sort(),b.triggersByLayoutId[a.id])b.triggersByLayoutId[a.id].hasOwnProperty(c)&&(g=b.triggersByLayoutId[a.id][c],i.push({name:c,info:g}));if(i.sort(function(a,b){return a.name<b.name?-1:b.name<a.name?1:0}),Ext.log({indent:1},a.done?"++":"--",b.getLayoutName(a),d.isBoxParent?" [isBoxParent]":"",d.boxChildren?" - boxChildren: "+d.state.boxesMeasured+"/"+d.boxChildren.length:"",d.boxParent?" - boxParent: "+d.boxParent.id:""," - size: ",d.widthModel.name,"/",d.heightModel.name),!a.done||b.reportOnSuccess){if(j.length){for(++Ext.log.indent,Ext.log({indent:1},"blockedBy:  count=",a.blockCount),l=j.length,f=0;f<l;f++)Ext.log(j[f]);Ext.log.indent-=2}if(i.length){for(++Ext.log.indent,Ext.log({indent:1},"triggeredBy: count="+a.triggerCount),l=i.length,f=0;f<l;f++)n=(h=(k=g.info||g).item).setBy&&h.setBy[k.name]||"?",g=i[f],Ext.log(g.name," (",h.props[k.name],") dirty: ",!!h.dirty&&!!h.dirty[k.name],", setBy: ",n);Ext.log.indent-=2}}for(c in b.layouts)b.layouts.hasOwnProperty(c)&&((e=b.layouts[c]).done||e.owner.ownerLayout!==a||b.reportLayoutResult(e,m));for(c in b.layouts)b.layouts.hasOwnProperty(c)&&(e=b.layouts[c]).done&&e.owner.ownerLayout===a&&b.reportLayoutResult(e,m);--Ext.log.indent},resetLayout:function(d){var e,a=this,c=d.type,f=a.getLayoutName(d),b=a.accumByType[c];a.logOn.resetLayout&&Ext.log("resetLayout: ",f," ( ",a.remainingLayouts," running)"),a.state||(!b&&a.profileLayoutsByType&&(a.accumByType[c]=b=Ext.Perf.get("layout_"+d.type)),a.numByType[c]=(a.numByType[c]||0)+1),e=b&&b.enter(),a.callParent(arguments),b&&e.leave(),a.checkRemainingLayouts()},round:function(a){return Math.round(1e3*a)/1e3},run:function(){var i,h,b,d,c,k,l,o,f,j,g,m,n,e,a=this;if(a.accumByType={},a.calcsByType={},a.numByType={},a.timesByType={},a.triggersByLayoutId={},Ext.log.indentSize=3,Ext.log("==================== LAYOUT ===================="),h=Ext.perf.getTimestamp(),i=a.callParent(arguments),h=Ext.perf.getTimestamp()-h,a.logOn.boxParent&&a.boxParents)for(b in a.boxParents)if(a.boxParents.hasOwnProperty(b))for(o=(l=(k=a.boxParents[b]).boxChildren).length,Ext.log("boxParent: ",k.id),d=0;d<o;++d)Ext.log(" --\x3e ",l[d].id);for(b in i?Ext.log("----------------- SUCCESS -----------------"):Ext.log({level:"error"},"----------------- FAILURE -----------------"),a.layouts)a.layouts.hasOwnProperty(b)&&((c=a.layouts[b]).running&&Ext.log.error("Layout left running: ",a.getLayoutName(c)),c.ownerContext&&Ext.log.error("Layout left connected: ",a.getLayoutName(c)));if(!i||a.reportOnSuccess){for(b in f={},j=0,a.layouts)a.layouts.hasOwnProperty(b)&&(c=a.layouts[b],a.items[c.owner.el.id].isTopLevel&&(a.reportOnSuccess||a.layoutTreeHasFailures(c,f))&&a.reportLayoutResult(c,f));for(b in a.layouts)a.layouts.hasOwnProperty(b)&&(f[(c=a.layouts[b]).id]||(j||Ext.log("----- Unreported!! -----"),++j,a.reportLayoutResult(c,f)))}for(b in Ext.log("Cycles: ",a.cycleCount,", Flushes: ",a.flushCount,", Calculates: ",a.calcCount," in ",a.round(h)," msec"),Ext.log("Calculates by type:"),g=[],a.numByType)a.numByType.hasOwnProperty(b)&&(m=a.numByType[b],g.push({type:b,total:m,calcs:a.calcsByType[b],multiple:Math.round(a.calcsByType[b]/m*10)/10,calcTime:a.round(a.timesByType[b]),avgCalcTime:a.round(a.timesByType[b]/a.calcsByType[b])}));for(g.sort(function(a,b){return b.calcTime-a.calcTime}),n=g.length,d=0;d<n;d++)e=g[d],Ext.log(e.type,": ",e.total," in ",e.calcs," tries (",e.multiple,"x) at ",e.calcTime," msec (avg ",e.avgCalcTime," msec)");return i},runCycle:function(){return this.logOn.runCycle&&Ext.log(">>> Cycle ",this.cycleCount," (queue length: ",this.layoutQueue.length,")"),this.callParent(arguments)},runLayout:function(e){var f,g,c,a=this,b=e.type,d=a.accumByType[b];return a.logOn.calculate&&Ext.log("-- calculate ",this.getLayoutName(e)),f=d&&d.enter(),c=Ext.perf.getTimestamp(),g=a.callParent(arguments),c=Ext.perf.getTimestamp()-c,d&&f.leave(),a.calcsByType[b]=(a.calcsByType[b]||0)+1,a.timesByType[b]=(a.timesByType[b]||0)+c,g}}}),Ext.define("Ext.layout.container.Absolute",{alias:"layout.absolute",extend:Ext.layout.container.Anchor,alternateClassName:"Ext.layout.AbsoluteLayout",targetCls:Ext.baseCSSPrefix+"abs-layout-ct",itemCls:Ext.baseCSSPrefix+"abs-layout-item",ignoreOnContentChange:!0,type:"absolute",adjustWidthAnchor:function(c,a){var b=this.targetPadding;return c-a.getStyle("left")+b.left},adjustHeightAnchor:function(c,a){var b=this.targetPadding;return c-a.getStyle("top")+b.top},isItemLayoutRoot:function(a){return this.ignoreOnContentChange||this.callParent(arguments)},isItemShrinkWrap:function(a){return!0},beginLayout:function(c){var a=this,b=a.getTarget();a.callParent(arguments),b.dom!==document.body&&b.position(),a.targetPadding=c.targetContext.getPaddingInfo()},isItemBoxParent:function(a){return!0},onContentChange:function(){return!this.ignoreOnContentChange&&this.callParent(arguments)},calculateContentSize:function(a,r){var h,l,b,j,g,i,m,n=this,o=(r||0)|((a.widthModel.shrinkWrap?1:0)|(a.heightModel.shrinkWrap?2:0)),d=1&o||void 0,c=2&o||void 0,p=a.childItems,s=p.length,e=0,f=0,k=0,q=a.props;if(d&&(isNaN(q.contentWidth)?++k:d=void 0),c&&(isNaN(q.contentHeight)?++k:c=void 0),k){for(g=0;g<s;++g)if(l=(b=p[g]).target,j=c&&b.getProp("height"),m=d&&b.getProp("width"),j+=(i=b.getMarginInfo()).bottom,m+=i.right,e=Math.max(e,(l.y||0)+j),f=Math.max(f,(l.x||0)+m),isNaN(e)&&isNaN(f))return void(n.done=!1);(d||c)&&(h=a.targetContext.getPaddingInfo()),d&&!a.setContentWidth(f+h.width)&&(n.done=!1),c&&!a.setContentHeight(e+h.height)&&(n.done=!1)}}}),Ext.define("Ext.resizer.BorderSplitter",{extend:Ext.resizer.Splitter,alias:"widget.bordersplitter",collapseTarget:null,getTrackerConfig:function(){var a=this.callParent();return a.xclass="Ext.resizer.BorderSplitterTracker",a},onTargetCollapse:function(a){this.callParent([a]),!1!==this.performCollapse&&"mini"==a.collapseMode&&a.addCls(a.baseCls+"-"+a.collapsedCls+"-mini")},onTargetExpand:function(a){this.callParent([a]),!1!==this.performCollapse&&"mini"==a.collapseMode&&a.removeCls(a.baseCls+"-"+a.collapsedCls+"-mini")}}),Ext.define("Ext.layout.container.Border",{extend:Ext.layout.container.Container,alias:"layout.border",alternateClassName:"Ext.layout.BorderLayout",targetCls:Ext.baseCSSPrefix+"border-layout-ct",itemCls:[Ext.baseCSSPrefix+"border-item",Ext.baseCSSPrefix+"box-item"],type:"border",isBorderLayout:!0,padding:void 0,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:!0,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:!1,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:!0,panelCollapseAnimate:!0,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(n,t,k){var d,h,a,c,b,j,q,l,r,f,o,m=this,g=m.axisProps[k],e=!g.horizontal,s=g.sizeProp,i=0,p=n.childItems,u=p.length;for(h=0;h<u;++h)if(b=(a=p[h]).target,a.layoutPos={},b.region){if(a.region=j=b.region,a.isCenter=b.isCenter,a.isHorz=b.isHorz,a.isVert=b.isVert,a.weight=b.weight||m.regionWeights[j]||0,b.weight=a.weight,t[b.id]=a,b.isCenter){d=a,c=b.flex,n.centerRegion=d;continue}if(e!==a.isVert)continue;a.reverseWeighting=j===g.borderEnd,r=typeof(l=b[s]),b.collapsed||("string"==r&&(q=m.percentageRe.exec(l))?a.percentage=parseInt(q[1],10):b.flex&&(i+=a.flex=b.flex))}return d&&((o=(f=d.target).placeholderFor)?c||e!==o.collapsedVertical()||(c=0,d.collapseAxis=k):f.collapsed&&e===f.collapsedVertical()&&(c=0,d.collapseAxis=k)),null==c&&(c=1),i+=c,Ext.apply({before:e?"top":"left",totalFlex:i},g)},beginLayout:function(c){var d,j,l,e,k,a,h,n,i,b=this,f=b.getLayoutItems(),g=b.padding,o=typeof g,m=!1;for(g?"string"!=o&&"number"!=o||(g=Ext.util.Format.parseBox(g)):(g=c.getEl("getTargetEl").getPaddingInfo(),m=!0),c.outerPad=g,c.padOnContainer=m,e=0,l=f.length;e<l;++e)j=f[e],(a=b.getSplitterTarget(j))&&(h=void 0,n=!!j.hidden,a.split?n!==a.hidden&&(h=!a.hidden):a.isCollapsingOrExpanding&&(h=!!a.collapsed),h?j.show():!1===h&&j.hide());for(b.callParent(arguments),l=(f=c.childItems).length,k={},c.borderAxisHorz=b.beginAxis(c,k,"horz"),c.borderAxisVert=b.beginAxis(c,k,"vert"),e=0;e<l;++e)d=f[e],(a=b.getSplitterTarget(d.target))&&((i=k[a.id])||((i=c.getEl(a.el,b)).region=a.region),d.collapseTarget=a=i,d.weight=a.weight,d.reverseWeighting=a.reverseWeighting,(a.splitter=d).isHorz=a.isHorz,d.isVert=a.isVert);b.sortWeightedItems(f,"reverseWeighting"),b.setupSplitterNeighbors(f)},calculate:function(e){var c,a,h,b,k,l,d=this,o=d.getContainerSize(e),j=e.childItems,m=j.length,f=e.borderAxisHorz,g=e.borderAxisVert,i=e.outerPad,n=e.padOnContainer;for(f.begin=i[d.padOnContainerProp],g.begin=i.top,k=f.end=f.flexSpace=o.width+(n?i[d.padOnContainerProp]:-i[d.padNotOnContainerProp]),l=g.end=g.flexSpace=o.height+(n?i.top:-i.bottom),c=0;c<m;++c)h=(a=j[c]).getMarginInfo(),(a.isHorz||a.isCenter)&&(f.addUnflexed(h.width),k-=h.width),(a.isVert||a.isCenter)&&(g.addUnflexed(h.height),l-=h.height),a.flex||a.percentage||(a.isHorz||a.isCenter&&"horz"===a.collapseAxis?(b=a.getProp("width"),f.addUnflexed(b),a.collapseTarget&&(k-=b)):(a.isVert||a.isCenter&&"vert"===a.collapseAxis)&&(b=a.getProp("height"),g.addUnflexed(b),a.collapseTarget&&(l-=b)));for(c=0;c<m;++c)h=(a=j[c]).getMarginInfo(),a.percentage&&(a.isHorz?(b=Math.ceil(k*a.percentage/100),b=a.setWidth(b),f.addUnflexed(b)):a.isVert&&(b=Math.ceil(l*a.percentage/100),b=a.setHeight(b),g.addUnflexed(b)));for(c=0;c<m;++c)(a=j[c]).isCenter||(d.calculateChildAxis(a,f),d.calculateChildAxis(a,g));d.finishAxis(e,g)+d.finishAxis(e,f)<2?d.done=!1:d.finishPositions(j)},calculateChildAxis:function(b,a){var d,g,h,e,c,j=b.collapseTarget,k="set"+a.sizePropCap,f=a.sizeProp,i=b.getMarginInfo()[f];j?d=j.region:(d=b.region,h=b.flex),(g=d===a.borderBegin)||d===a.borderEnd?(c=h?(c=Math.ceil(a.flexSpace*(h/a.totalFlex)),b[k](c)):b.percentage?b.peek(f):b.getProp(f),c+=i,g?(e=a.begin,a.begin+=c):a.end=e=a.end-c):(b[k](a.end-a.begin-i),e=a.begin),b.layoutPos[a.posProp]=e},eachItem:function(a,d,f){var c,e=this.getLayoutItems(),b=0;for(Ext.isFunction(a)&&(f=d=a);b<e.length&&(c=e[b],a&&c.region!==a||!1!==d.call(f,c));b++);},finishAxis:function(d,a){var c=a.end-a.begin,b=d.centerRegion;return b&&(b["set"+a.sizePropCap](c-b.getMarginInfo()[a.sizeProp]),b.layoutPos[a.posProp]=a.begin),Ext.isNumber(c)?1:0},finishPositions:function(c){var b,a,e=c.length,d=this.horzPositionProp;for(b=0;b<e;++b)(a=c[b]).setProp("x",a.layoutPos.x+a.marginInfo[d]),a.setProp("y",a.layoutPos.y+a.marginInfo.top)},getLayoutItems:function(){for(var a,b,c=this.owner,e=c&&c.items&&c.items.items||[],g=e.length,f=[],d=0;d<g;d++)b=(a=e[d]).placeholderFor,!a.hidden&&(a.floated&&2!==a.isCollapsingOrExpanding||b&&2===b.isCollapsingOrExpanding)||f.push(a);return f},getPlaceholder:function(a){return a.getPlaceholder&&a.getPlaceholder()},getMaxWeight:function(a){return this.getMinMaxWeight(a)},getMinWeight:function(a){return this.getMinMaxWeight(a,!0)},getMinMaxWeight:function(b,c){var a=null;return this.eachItem(b,function(b){if(b.hasOwnProperty("weight")){if(null===a)return void(a=b.weight);(c&&b.weight<a||b.weight>a)&&(a=b.weight)}},this),a},getSplitterTarget:function(b){var a=b.collapseTarget;return a&&a.collapsed&&a.placeholder||a},isItemBoxParent:function(a){return!0},isItemShrinkWrap:function(a){return!0},insertSplitter:function(a,f,e,d){var c=a.region,b=Ext.apply({xtype:"bordersplitter",collapseTarget:a,id:a.id+"-splitter",hidden:e,canResize:!1!==a.splitterResize,splitterFor:a,synthetic:!0},d),g=f+("south"===c||"east"===c?0:1);"mini"===a.collapseMode&&(b.collapsedCls=a.collapsedCls),a.splitter=this.owner.add(g,b)},getMoveAfterIndex:function(b){var a=this.callParent(arguments);return b.splitter&&a++,a},moveItemBefore:function(c,a){var b;return a&&a.splitter&&("south"!==(b=a.region)&&"east"!==b||(a=a.splitter)),this.callParent([c,a])},onAdd:function(a,i){var e,c,g,h,b=this,d=a.placeholderFor,f=a.region;b.callParent(arguments),f?(Ext.apply(a,b.regionFlags[f]),b.owner.isViewport&&(a.isViewportBorderChild=!0),a.initBorderRegion&&a.initBorderRegion(),(e="center"===f)?b.centerRegion=a:(c=a.split,g=!!a.hidden,"object"==typeof c&&(h=c,c=!0),!a.isHorz&&!a.isVert||!c&&"mini"!==a.collapseMode||b.insertSplitter(a,i,g||!c,h)),e||a.hasOwnProperty("collapseMode")||(a.collapseMode=b.panelCollapseMode),a.hasOwnProperty("animCollapse")||("placeholder"!==a.collapseMode?a.animCollapse=!1:a.animCollapse=b.panelCollapseAnimate)):d&&(Ext.apply(a,b.regionFlags[d.region]),a.region=d.region,a.weight=d.weight)},onDestroy:function(){this.centerRegion=null,this.callParent()},onRemove:function(a,f){var b,c=this,h=a.region,e=a.splitter,d=c.owner,g=d.destroying;h&&(a.isCenter&&(c.centerRegion=null),delete a.isCenter,delete a.isHorz,delete a.isVert,e&&!d.destroying&&d.doRemove(e,!0),delete a.splitter),c.callParent(arguments),g||f||!a.rendered||(b=a.getEl())&&(b.setStyle("top",""),b.setStyle(c.horzPositionProp,""))},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:!0,isHorz:!1,isVert:!1},north:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:"top"},south:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:"bottom"},west:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:"left"},east:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:"right"}},setupSplitterNeighbors:function(l){var h,b,j,g,d,a,f,e,c,i={},m=l.length,k=this.touchedRegions;for(h=0;h<m;++h)if(f=(a=l[h].target).region,a.isCenter)j=a;else if(f){for(b=0,g=(c=k[f]).length;b<g;++b)(d=i[c[b]])&&d.neighbors.push(a);(e=a.placeholderFor?a.placeholderFor.splitter:a.splitter)&&(e.neighbors=[]),i[f]=e}if(j)for(b=0,g=(c=k.center).length;b<g;++b)(d=i[c[b]])&&d.neighbors.push(j)},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(b){var d,c,f,e,a=this.sizePolicies;return b.isCenter?(e=b.placeholderFor)?e.collapsedVertical()?a.vert:a.horz:b.collapsed?b.collapsedVertical()?a.vert:a.horz:a.flexAll:(d=b.collapseTarget)?d.isVert?a.vert:a.horz:b.region?(f=b.isVert?(c=b.height,a.vert):(c=b.width,a.horz),b.flex||"string"==typeof c&&this.percentageRe.test(c)?a.flexAll:f):this.autoSizePolicy}},function(){var a={addUnflexed:function(a){this.flexSpace=Math.max(this.flexSpace-a,0)}},b=this.prototype.axisProps;Ext.apply(b.horz,a),Ext.apply(b.vert,a)}),Ext.define("Ext.layout.container.Card",{extend:Ext.layout.container.Fit,alternateClassName:"Ext.layout.CardLayout",alias:"layout.card",type:"card",hideInactive:!0,deferredRender:!1,getRenderTree:function(){var b=this,a=b.getActiveItem();if(a){if(a.hasListeners.beforeactivate&&!1===a.fireEvent("beforeactivate",a)?a=b.activeItem=b.owner.activeItem=null:a.hasListeners.activate&&a.on({boxready:function(){a.fireEvent("activate",a)},single:!0}),!b.deferredRender)return b.callParent(arguments);if(a)return b.getItemsRenderTree([a])}},renderChildren:function(){var a=this,b=a.getActiveItem();a.deferredRender?b&&a.renderItems([b],a.getRenderTarget()):a.callParent()},isValidParent:function(a,c,d){var b=a.el?a.el.dom:Ext.getDom(a);return b&&b.parentNode===(c.dom||c)||!1},getActiveItem:function(){var a=this,c=void 0===a.activeItem?a.owner&&a.owner.activeItem:a.activeItem,b=a.parseActiveItem(c);return b&&-1!==a.owner.items.indexOf(b)&&(a.activeItem=b),null==b?null:a.activeItem||a.owner.activeItem},parseActiveItem:function(a){return a&&a.isComponent?a:"number"==typeof a||void 0===a?this.getLayoutItems()[a||0]:null===a?null:this.owner.getComponent(a)},configureItem:function(a){a.setHiddenState(a!==this.getActiveItem()),this.callParent(arguments)},onAdd:function(a,b){this.callParent([a,b]),this.setItemHideMode(a)},onRemove:function(b){var a=this;a.callParent([b]),a.resetItemHideMode(b),b===a.activeItem&&(a.activeItem=void 0)},getAnimation:function(b,c){var a=(b||{}).cardSwitchAnimation;return!1!==a&&(a||c.cardSwitchAnimation)},getNext:function(){var c=arguments[0],a=this.getLayoutItems();return a[Ext.Array.indexOf(a,this.activeItem)+1]||!!c&&a[0]},next:function(){var a=arguments[0],b=arguments[1];return this.setActiveItem(this.getNext(b),a)},getPrev:function(){var c=arguments[0],a=this.getLayoutItems();return a[Ext.Array.indexOf(a,this.activeItem)-1]||!!c&&a[a.length-1]},prev:function(){var a=arguments[0],b=arguments[1];return this.setActiveItem(this.getPrev(b),a)},setActiveItem:function(a){var f,c=this,d=c.owner,b=c.activeItem,g=d.rendered;if(a=c.parseActiveItem(a),-1===d.items.indexOf(a)&&(d.items.items.length,Ext.suspendLayouts(),a=d.add(a),Ext.resumeLayouts()),a&&b!==a){if(!1===a.fireEvent("beforeactivate",a,b))return!1;if(b&&!1===b.fireEvent("beforedeactivate",b,a))return!1;if(g){if(Ext.suspendLayouts(),a.rendered||c.renderItem(a,c.getRenderTarget(),d.items.length),b&&c.hideInactive){if(f=b.el.contains(Ext.Element.getActiveElement()),b.hide(),!b.hidden)return!1;b.hiddenByLayout=!0,b.fireEvent("deactivate",b,a)}a.hidden&&a.show(),a.hidden?c.activeItem=a=null:(c.activeItem=a,f&&(a.defaultFocus||(a.defaultFocus=":focusable"),a.focus())),Ext.resumeLayouts(!0)}else c.activeItem=a;return a.fireEvent("activate",a,b),c.activeItem}return!1},resetItemHideMode:function(a){a.hideMode=a.originalHideMode,delete a.originalHideMode},setItemHideMode:function(a){a.originalHideMode=a.hideMode,a.hideMode="offsets"}}),Ext.define("Ext.plugin.Manager",{alternateClassName:["Ext.PluginManager","Ext.PluginMgr"],singleton:!0,typeName:"ptype",create:function(a,e,c){var b,d;return(b=a.init?a:(c?(a=Ext.apply({},a)).cmp=c:c=a.cmp,a.xclass?Ext.create(a):(d="plugin."+(a.ptype||e),Ext.ClassManager.instantiateByAlias(d,a))))&&c&&b.setCmp&&!b.setCmpCalled&&(b.setCmp(c),b.setCmpCalled=!0),b}}),Ext.define("Ext.resizer.BorderSplitterTracker",{extend:Ext.resizer.SplitterTracker,getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var j,h,f,d,a,g,m,q,i=this,e=i.splitter,k=e.collapseTarget,n=e.defaultSplitMin,l=e.vertical?"Width":"Height",p="min"+l,o="max"+l,w="get"+l,r=e.neighbors,x=r.length,c=k.el.getBox(),u=c.x,v=c.y,t=c.right,s=c.bottom,b=e.vertical?t-u:s-v;for(d=(k[p]||Math.min(b,n))-b,(a=k[o])?a-=b:a=1e9,q=b,j=0;j<x;++j)b=(h=r[j])[w](),null===(f=h[o])&&(f=void 0),g=b-f,m=b-(h[p]||Math.min(b,n)),isNaN(g)||d<g&&(d=g),m<a&&(a=m);return a-d<2?null:(c=new Ext.util.Region(v,t,s,u),i.constraintAdjusters[i.getCollapseDirection()](c,d,a,e),i.dragInfo={minRange:d,maxRange:a,targetSize:q},c)},constraintAdjusters:{left:function(a,c,b,d){a[0]=a.x=a.left=a.right+c,a.right+=b+d.getWidth()},top:function(a,c,b,d){a[1]=a.y=a.top=a.bottom+c,a.bottom+=b+d.getHeight()},bottom:function(a,c,b,d){a.bottom=a.top-c,a.top-=b+d.getHeight()},right:function(a,c,b,d){a.right=a.left-c,a[0]=a.x=a.left=a.x-b+d.getWidth()}},onBeforeStart:function(h){var a,b,c=this,f=c.splitter,d=f.collapseTarget,e=f.neighbors,g=e.length;if(d.collapsed)return!1;for(a=0;a<g;++a)if((b=e[a]).collapsed&&b.isHorz===d.isHorz)return!1;return!!(c.constrainTo=c.calculateConstrainRegion())},performResize:function(j,i){var g,d=this,b=d.splitter,e=b.getCollapseDirection(),h=b.collapseTarget,f=d.splitAdjusters[b.vertical?"horz":"vert"],a=i[f.index],c=d.dragInfo;"right"!==e&&"bottom"!==e||(a=-a),(a=Math.min(Math.max(c.minRange,a),c.maxRange))&&((g=b.ownerCt).suspendLayouts(),f.adjustTarget(h,c.targetSize,a),g.resumeLayouts(!0))},splitAdjusters:{horz:{index:0,adjustTarget:function(a,c,b){a.flex=null,a.setSize(c+b)}},vert:{index:1,adjustTarget:function(a,b,c){a.flex=null,a.setSize(void 0,b+c)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}}),Ext.define("Ext.resizer.ResizeTracker",{extend:Ext.dd.DragTracker,dynamic:!0,preserveRatio:!1,constrainTo:null,proxyCls:Ext.baseCSSPrefix+"resizable-proxy",constructor:function(b){var d,c,e,a=this;b.el||(b.target.isComponent?a.el=b.target.getEl():a.el=b.target),this.callParent(arguments),a.preserveRatio&&a.minWidth&&a.minHeight&&((d=a.minWidth/a.el.getWidth())<(c=a.minHeight/a.el.getHeight())?a.minWidth=a.el.getWidth()*c:a.minHeight=a.el.getHeight()*d),a.throttle&&(e=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(a,arguments)},a.throttle),a.resize=function(d,c,b){b?Ext.resizer.ResizeTracker.prototype.resize.apply(a,arguments):e.apply(null,arguments)})},onBeforeStart:function(a){this.startBox=this.target.getBox()},getProxy:function(){var a=this;if(a.dynamic||a.proxy||(a.proxy=a.createProxy(a.target||a.el),a.hideProxy=!0),a.proxy)return a.proxy.show(),a.proxy},createProxy:function(a){var b,c=this.proxyCls;return(b=a.isComponent?a.getProxy().addCls(c):a.createProxy({tag:"div",role:"presentation",cls:c,id:a.id+"-rzproxy"},Ext.getBody())).removeCls(Ext.baseCSSPrefix+"proxy-el"),b},onStart:function(a){this.activeResizeHandle=Ext.get(this.getDragTarget().id),this.dynamic||this.resize(this.startBox)},onMouseDown:function(c,b){var a=Ext.fly(b.parentNode);this.callParent(arguments),a&&a.shim&&a.maskIframes()},onMouseUp:function(b){var a=Ext.fly(this.dragTarget.parentNode);this.callParent(arguments),a&&a.shim&&a.unmaskIframes()},onDrag:function(a){(this.dynamic||this.proxy)&&this.updateDimensions(a)},updateDimensions:function(s,r){var n,k,j,i,g,a,o,p,c=this,h=c.activeResizeHandle.region,d=c.getOffset(c.constrainTo?"dragTarget":null),b=c.startBox,f=0,e=0,l=0,m=0;switch(h=c.convertRegionName(h)){case"south":e=d[1],g=2;break;case"north":m=-(e=-d[1]),g=2;break;case"east":f=d[0],g=1;break;case"west":l=-(f=-d[0]),g=1;break;case"northeast":m=-(e=-d[1]),f=d[0],i=[b.x,b.y+b.height],g=3;break;case"southeast":e=d[1],f=d[0],i=[b.x,b.y],g=3;break;case"southwest":l=-(f=-d[0]),e=d[1],i=[b.x+b.width,b.y],g=3;break;case"northwest":m=-(e=-d[1]),l=-(f=-d[0]),i=[b.x+b.width,b.y+b.height],g=3}if(a={width:b.width+f,height:b.height+e,x:b.x+l,y:b.y+m},k=Ext.Number.snap(a.width,c.widthIncrement),j=Ext.Number.snap(a.height,c.heightIncrement),k!==a.width||j!==a.height){switch(h){case"northeast":case"north":a.y-=j-a.height;break;case"southwest":case"west":a.x-=k-a.width;break;case"northwest":a.x-=k-a.width,a.y-=j-a.height}a.width=k,a.height=j}a.width<c.minWidth||a.width>c.maxWidth?(a.width=Ext.Number.constrain(a.width,c.minWidth,c.maxWidth),l&&(a.x=b.x+(b.width-a.width))):c.lastX=a.x,a.height<c.minHeight||a.height>c.maxHeight?(a.height=Ext.Number.constrain(a.height,c.minHeight,c.maxHeight),m&&(a.y=b.y+(b.height-a.height))):c.lastY=a.y,(c.preserveRatio||s.shiftKey)&&(n=c.startBox.width/c.startBox.height,o=Math.min(Math.max(c.minHeight,a.width/n),c.maxHeight),p=Math.min(Math.max(c.minWidth,a.height*n),c.maxWidth),1===g?a.height=o:2===g?a.width=p:(n<Math.abs(i[0]-this.lastXY[0])/Math.abs(i[1]-this.lastXY[1])?a.height=o:a.width=p,"northeast"===h?a.y=b.y-(a.height-b.height):"northwest"===h?(a.y=b.y-(a.height-b.height),a.x=b.x-(a.width-b.width)):"southwest"===h&&(a.x=b.x-(a.width-b.width)))),c.setPosition=a.x!==c.startBox.x||a.y!==c.startBox.y,c.resize(a,r)},resize:function(b,e){var c,a=this,d=a.setPosition;(a.dynamic||!a.dynamic&&e)&&(d?a.target.setBox(b):a.target.setSize(b.width,b.height)),e||(c=a.getProxy())&&c!==a.target&&(d||a.hideProxy?c.setBox(b):c.setSize(b.width,b.height))},onEnd:function(a){this.updateDimensions(a,!0),this.proxy&&this.hideProxy&&this.proxy.hide()},convertRegionName:function(a){return a}}),Ext.define("Ext.resizer.Resizer",{mixins:{observable:Ext.util.Observable},alternateClassName:"Ext.Resizable",handleCls:Ext.baseCSSPrefix+"resizable-handle",overCls:Ext.baseCSSPrefix+"resizable-handle-over",pinnedCls:Ext.baseCSSPrefix+"resizable-pinned",wrapCls:Ext.baseCSSPrefix+"resizable-wrap",wrappedCls:Ext.baseCSSPrefix+"resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:!0,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:1e4,maxWidth:1e4,pinned:!1,preserveRatio:!1,transparent:!1,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},ariaRole:"presentation",constructor:function(e){var b,k,i,m,p,c,f,n,l,g,o,j,a=this,d=a.handles,q=Ext.dom.Element.unselectableCls,h=[];for((Ext.isString(e)||Ext.isElement(e)||e.dom)&&(b=e,(e=arguments[1]||{}).target=b),a.mixins.observable.constructor.call(a,e),(b=a.target)?b.isComponent?(b.addClsWithUI("resizable"),b.minWidth&&(a.minWidth=b.minWidth),b.minHeight&&(a.minHeight=b.minHeight),b.maxWidth&&(a.maxWidth=b.maxWidth),b.maxHeight&&(a.maxHeight=b.maxHeight),b.floating&&(a.hasOwnProperty("handles")||(a.handles="n ne e se s sw w nw")),a.el=b.getEl()):b=a.el=a.target=Ext.get(b):b=a.target=a.el=Ext.get(a.el),a.el.addCls(Ext.Component.prototype.borderBoxCls),Ext.isNumber(a.width)&&(a.width=Ext.Number.constrain(a.width,a.minWidth,a.maxWidth)),Ext.isNumber(a.height)&&(a.height=Ext.Number.constrain(a.height,a.minHeight,a.maxHeight)),null===a.width&&null===a.height||a.target.setSize(a.width,a.height),"TEXTAREA"!==(m=a.el.dom.tagName.toUpperCase())&&"IMG"!==m&&"TABLE"!==m||(a.originalTarget=a.target,g=b.isComponent?b.getEl():b,a.el.addCls(a.wrappedCls),a.target=a.el=a.el.wrap({role:"presentation",cls:a.wrapCls,id:a.el.id+"-rzwrap",style:g.getStyle(["margin-top","margin-bottom"])}),o=g.getPositioning(),a.el.setPositioning(o),g.clearPositioning(),l=g.getBox(),"absolute"!==o.position&&(l.x=0,l.y=0),a.el.setBox(l),g.setStyle("position","absolute"),a.isTargetWrapped=!0),a.el.position(),a.pinned&&a.el.addCls(a.pinnedCls),a.resizeTracker=new Ext.resizer.ResizeTracker({disabled:a.disabled,target:b,el:a.el,constrainTo:a.constrainTo,handleCls:a.handleCls,overCls:a.overCls,throttle:a.throttle,proxy:a.originalTarget?a.el:null,dynamic:!!a.originalTarget||a.dynamic,originalTarget:a.originalTarget,delegate:"."+a.handleCls,preserveRatio:a.preserveRatio,heightIncrement:a.heightIncrement,widthIncrement:a.widthIncrement,minHeight:a.minHeight,maxHeight:a.maxHeight,minWidth:a.minWidth,maxWidth:a.maxWidth}),a.resizeTracker.on({mousedown:a.onBeforeResize,drag:a.onResize,dragend:a.onResizeEnd,scope:a}),"all"===a.handles&&(a.handles="n s e w ne nw se sw"),d=a.handles=a.handles.split(a.delimiterRe),i=a.possiblePositions,p=d.length,k=a.handleCls+" "+a.handleCls+"-{0}",a.target.isComponent&&(k+=" "+(j=a.target.baseCls)+"-handle "+j+"-handle-{0}",Ext.supports.CSS3BorderRadius&&(k+=" "+j+"-handle-{0}-br")),c=0;c<p;c++)d[c]&&i[d[c]]&&(f=i[d[c]],h.push('<div id="',a.el.id,"-",f,'-handle" class="',Ext.String.format(k,f)," ",q,'" unselectable="on" role="presentation"',"></div>"));for(Ext.DomHelper.append(a.el,h.join("")),c=h.length=0;c<p;c++)d[c]&&i[d[c]]&&(n=a[f=i[d[c]]]=a.el.getById(a.el.id+"-"+f+"-handle"),h.push(n),n.region=f,a.transparent&&n.setOpacity(0));a.resizeTracker.handleEls=h},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(a,b){return this.fireResizeEvent("beforeresize",a,b)},onResize:function(a,b){return this.fireResizeEvent("resizedrag",a,b)},onResizeEnd:function(a,b){return this.fireResizeEvent("resize",a,b)},fireResizeEvent:function(c,e,d){var b,a=this;if(a.hasListeners[c])return b=a.el.getBox(),a.fireEvent(c,a,b.width,b.height,d)},resizeTo:function(c,b){var a=this;a.target.setSize(c,b),a.fireEvent("resize",a,c,b,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var b,d,a=this,c=a.handles,f=c.length,e=a.possiblePositions;for(a.resizeTracker.destroy(),a.isTargetWrapped&&a.target.destroy(),b=0;b<f;b++)(d=a[e[c[b]]])&&d.destroy();a.callParent()}}),Ext.define("Ext.selection.CellModel",{extend:Ext.selection.DataViewModel,alias:"selection.cellmodel",isCellModel:!0,deselectOnContainerClick:!1,enableKeyNav:!0,preventWrap:!1,bindComponent:function(b){var c,a=this;a.view&&a.gridListeners&&a.gridListeners.destroy(),a.callParent([b]),b&&!1!==(c=b.grid||b.ownerCt).optimizedColumnMove&&(a.gridListeners=c.on({columnmove:a.onColumnMove,scope:a,destroyable:!0}))},getViewListeners:function(){var a=this.callParent();return a.refresh=this.onViewRefresh,a},getHeaderCt:function(){var a=this.navigationModel.getPosition();return(a?a.view:this.primaryView).headerCt},onNavigate:function(a){a.record&&!a.keyEvent.stopSelection&&this.setPosition(a.position)},selectWithEvent:function(a,b){this.select(a)},select:function(a,g,e){var c,b=this,d=b.getPosition(),f=b.view.store;!a&&0!==a||(a.isModel?a=-1!==(c=f.indexOf(a))?{row:c,column:d?d.column:0}:null:"number"==typeof a&&(a={row:a,column:0})),a?b.selectByPosition(a,e):b.deselect()},getCurrentPosition:function(){var a=this.selecting?this.nextSelection:this.selection;return a?{view:a.view,record:a.record,row:a.rowIdx,columnHeader:a.column,column:a.view.getColumnManager().indexOf(a.column)}:a},getPosition:function(){return(this.selecting?this.nextSelection:this.selection)||null},setCurrentPosition:function(a,b,c){return a&&!a.isCellContext&&(a=new Ext.grid.CellContext(this.view).setPosition({row:a.row,column:"number"==typeof a.column?this.view.getColumnManager().getColumns()[a.column]:a.column})),this.setPosition(a,b,c)},setPosition:function(a,d,e){var b=this,c=b.selection;if(a=a&&(a.isCellContext?a.clone():new Ext.grid.CellContext(b.view).setPosition(a)),!e&&c&&(a&&a.record===c.record&&a.column===c.column&&a.view===c.view?a=null:b.onCellDeselect(b.selection,d)),a)return b.nextSelection=a,b.selecting=!0,b.onCellSelect(b.nextSelection,d),b.selecting=!1,b.selection=a},isCellSelected:function(d,e,c){var b,a=this.getPosition();if(a&&a.view===d)return(b=new Ext.grid.CellContext(d).setPosition({row:e,column:"number"==typeof c?d.getColumnManager().getColumns()[c]:c})).record===a.record&&b.column===a.column},onStoreRemove:function(b,e,d){var c=this,a=c.getPosition();c.callParent(arguments),a&&b.isMoving(a.record)||(a&&b.getCount()&&-1!==b.indexOf(a.record)?a.setRow(a.record):c.selection=null)},onStoreClear:function(){this.callParent(arguments),this.selection=null},onStoreAdd:function(){var b=this,a=b.getPosition();b.callParent(arguments),a?a.setRow(a.record):b.selection=null},onCellClick:function(f,e,c,d,g,a,b){-1!==a&&this.setPosition(b.position)},onCellSelect:function(a,b){a&&void 0!==a.rowIdx&&-1<a.rowIdx&&this.doSelect(a.record,!1,b)},onCellDeselect:function(a,b){a&&void 0!==a.rowIdx&&this.doDeselect(a.record,b)},onSelectChange:function(g,f,e,h){var a,c,d,b=this;c=f?(a=b.nextSelection,"select"):(a=b.selection,"deselect"),d=a.view||b.primaryView,!1!==(e||b.fireEvent("before"+c,b,g,a.rowIdx,a.colIdx))&&!1!==h()&&(f?d.onCellSelect(a):(d.onCellDeselect(a),delete b.selection),e||b.fireEvent(c,b,g,a.rowIdx,a.colIdx))},refresh:function(){var a,b=this.getPosition();b&&-1!==(a=this.store.indexOf(this.selected.last()))&&(b.rowIdx=a)},onColumnMove:function(b,d,c,e){var a=b.up("tablepanel");a&&this.onViewRefresh(a.view)},onUpdate:function(c){var b,a=this;a.isSelected(c)&&(b=a.selecting?a.nextSelection:a.selection,a.view.onCellSelect(b))},onViewRefresh:function(d){var g,e,a,f=this,b=f.getPosition(),c=d.headerCt;b&&b.view===d&&(e=b.record,(a=b.column).isDescendantOf(c)||(a=c.queryById(a.id)||c.down('[text="'+a.text+'"]')||c.down('[dataIndex="'+a.dataIndex+'"]')),b.record?a&&-1!==d.store.indexOfId(e.getId())&&(g=new Ext.grid.CellContext(d).setPosition({row:e,column:a}),f.setPosition(g)):f.selection=null)},selectByPosition:function(b,a){this.setPosition(b,a)}}),Ext.define("Ext.selection.RowModel",{extend:Ext.selection.DataViewModel,alias:"selection.rowmodel",enableKeyNav:!0,isRowModel:!0,deselectOnContainerClick:!1,onUpdate:function(b){var c,d=this,a=d.view;a&&d.isSelected(b)&&(c=a.indexOf(b),a.onRowSelect(c),b===d.lastFocused&&a.onRowFocus(c,!0))},onSelectChange:function(c,g,e,j){var f,d,a=this,i=a.views||[a.view],k=i.length,b=a.store.indexOf(c),h=g?"select":"deselect";if(!1!==(e||a.fireEvent("before"+h,a,c,b))&&!1!==j()){for(f=0;f<k;f++)b=(d=i[f]).indexOf(c),-1!==d.indexOf(c)&&(g?d.onRowSelect(b,e):d.onRowDeselect(b,e));e||a.fireEvent(h,a,c,b)}},getCurrentPosition:function(){var a=this.selected.getAt(0);if(a)return new Ext.grid.CellContext(this.view).setPosition(this.store.indexOf(a),0)},selectByPosition:function(a,b){a.isCellContext||(a=new Ext.grid.CellContext(this.view).setPosition(a.row,a.column)),this.select(a.record,b)},selectNext:function(f,e){var a=this,h=a.store,d=a.getSelection(),g=d[d.length-1],c=a.view.indexOf(g)+1;return c!==h.getCount()&&0!==c&&(a.doSelect(c,f,e),!0)},selectPrevious:function(e,d){var b=this,g=b.getSelection()[0],c=b.view.indexOf(g)-1;return!(c<0)&&(b.doSelect(c,e,d),!0)},isRowSelected:function(a){return this.isSelected(a)},isCellSelected:function(c,a,b){return this.isSelected(a)},vetoSelection:function(a){var b=this.view.getNavigationModel(),c=a.getKey();return(c===a.RIGHT||c===a.LEFT)&&b.previousRecord===b.record||this.callParent([a])}}),Ext.define("Ext.selection.CheckboxModel",{alias:"selection.checkboxmodel",extend:Ext.selection.RowModel,mode:"MULTI",injectCheckbox:0,checkOnly:!1,showHeaderCheckbox:void 0,checkSelector:"."+Ext.baseCSSPrefix+"grid-row-checker",allowDeselect:!0,headerWidth:24,checkerOnCls:Ext.baseCSSPrefix+"grid-hd-checker-on",tdCls:Ext.baseCSSPrefix+"grid-cell-special "+Ext.baseCSSPrefix+"grid-cell-row-checker",constructor:function(){var a=this;a.callParent(arguments),"SINGLE"===a.mode&&(a.showHeaderCheckbox=!1)},beforeViewRender:function(c){var b,a=this;a.callParent(arguments),a.hasLockedHeader()&&!c.headerCt.lockedCt||(a.addCheckbox(c,!0),b=c.ownerCt,c.headerCt.lockedCt&&(b=b.ownerCt),a.mon(b,"reconfigure",a.onReconfigure,a))},bindComponent:function(a){this.sortable=!1,this.callParent(arguments)},hasLockedHeader:function(){var a,b=this.views,c=b.length;for(a=0;a<c;a++)if(b[a].headerCt.lockedCt)return!0;return!1},addCheckbox:function(c,e){var b=this,a=b.injectCheckbox,d=c.headerCt;!1!==a&&("first"===a?a=0:"last"===a&&(a=d.getColumnCount()),Ext.suspendLayouts(),c.getStore().isBufferedStore&&(b.showHeaderCheckbox=!1),b.column=d.add(a,b.getHeaderConfig()),Ext.resumeLayouts()),!0!==e&&c.refresh()},onReconfigure:function(c,b,a){a&&this.addCheckbox(this.views[0])},toggleUiHeader:function(c){var a=this.views[0].headerCt.child("gridcolumn[isCheckerHd]"),b=this.checkerOnCls;a&&(c?a.addCls(b):a.removeCls(b))},onHeaderClick:function(e,c,d){var a=this;c===a.column&&"SINGLE"!==a.mode&&(d.stopEvent(),c.el.hasCls(Ext.baseCSSPrefix+"grid-hd-checker-on")?a.deselectAll():a.selectAll())},getHeaderConfig:function(){var a=this,b=!1!==a.showHeaderCheckbox;return{xtype:"gridcolumn",ignoreExport:!0,isCheckerHd:b,text:"&#160;",clickTargetName:"el",width:a.headerWidth,sortable:!1,draggable:!1,resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:"",tdCls:a.tdCls,cls:b?Ext.baseCSSPrefix+"column-header-checkbox ":"",defaultRenderer:a.renderer.bind(a),editRenderer:a.editRenderer||a.renderEmpty,locked:a.hasLockedHeader(),processEvent:a.processColumnEvent}},processColumnEvent:function(h,b,g,d,f,a,e,i){var c=b.getNavigationModel();"keydown"===a.type&&b.actionableMode&&a.getKey()===a.SPACE&&c.fireEvent("navigate",{view:b,navigationModel:c,keyEvent:a,position:a.position,recordIndex:d,record:e,item:a.item,cell:a.position.cellElement,columnIndex:a.position.colIdx,column:a.position.column})},renderEmpty:function(){return"&#160;"},refresh:function(){this.callParent(arguments),this.updateHeaderState()},renderer:function(f,b,d,c,a,e,g){return'<div class="'+Ext.baseCSSPrefix+'grid-row-checker" role="button" tabIndex="0">&#160;</div>'},selectByPosition:function(a,b){a.isCellContext||(a=new Ext.grid.CellContext(this.view).setPosition(a.row,a.column)),this.checkOnly&&a.column!==this.column||this.callParent([a,b])},onSelectChange:function(){this.callParent(arguments),this.suspendChange||this.updateHeaderState()},onStoreLoad:function(){this.callParent(arguments),this.updateHeaderState()},onStoreAdd:function(){this.callParent(arguments),this.updateHeaderState()},onStoreRemove:function(){this.callParent(arguments),this.updateHeaderState()},onStoreRefresh:function(){this.callParent(arguments),this.updateHeaderState()},maybeFireSelectionChange:function(a){a&&!this.suspendChange&&this.updateHeaderState(),this.callParent(arguments)},resumeChanges:function(){this.callParent(),this.suspendChange||this.updateHeaderState()},updateHeaderState:function(){var d,i,b,a=this,e=a.store,g=e.getCount(),h=a.views,c=!1,f=0;if(!e.isBufferedStore&&0<g){for(c=!0,b=0,i=(d=a.selected).getCount();b<i&&-1!==e.indexOfId(d.getAt(b).id);++b)++f;c=g===f}h&&h.length&&a.toggleUiHeader(c)},vetoSelection:function(a){var e,c,d,b=this,f=b.column;return b.checkOnly&&(c="click"===a.type&&a.getTarget(b.checkSelector),d=a.getKey()===a.SPACE&&a.position.column===f,e=!(c||d)),e||b.callParent([a])},destroy:function(){this.column=null,this.callParent()},privates:{onBeforeNavigate:function(b){var a=b.keyEvent;"SINGLE"!==this.selectionMode&&(b.ctrlKey=b.ctrlKey||a.ctrlKey||"click"===a.type&&!a.shiftKey||a.getKey()===a.SPACE)},selectWithEventMulti:function(c,b,d){var a=this;b.shiftKey||b.ctrlKey||!b.getTarget(a.checkSelector)?a.callParent([c,b,d]):d?a.doDeselect(c):a.doSelect(c,!0)}}}),Ext.define("Ext.theme.triton.selection.CheckboxModel",{override:"Ext.selection.CheckboxModel",headerWidth:32}),Ext.define("Ext.selection.TreeModel",{extend:Ext.selection.RowModel,alias:"selection.treemodel",selectOnExpanderClick:!1,constructor:function(b){var a=this;a.callParent([b]),a.pruneRemoved&&(a.pruneRemoved=!1,a.pruneRemovedNodes=!0)},getStoreListeners:function(){var a=this.callParent();return a.noderemove=this.onNodeRemove,a},onNodeRemove:function(d,c,b){if(!b){var a=[];this.gatherSelected(c,a),a.length&&this.deselect(a)}},pruneRemovedOnRefresh:function(){return this.pruneRemovedNodes},vetoSelection:function(b){var a=this.view;return!this.selectOnExpanderClick&&"click"===b.type&&b.getTarget(a.expanderSelector||a.lockingPartner&&a.lockingPartner.expanderSelector)||this.callParent([b])},privates:{gatherSelected:function(c,d){var a,f,e,b=c.childNodes;if(this.selected.containsKey(c.id)&&d.push(c),b)for(a=0,f=b.length;a<f;++a)e=b[a],this.gatherSelected(e,d)}}}),Ext.define("Ext.slider.Thumb",{overCls:Ext.baseCSSPrefix+"slider-thumb-over",constructor:function(a){Ext.apply(this,a||{},{cls:Ext.baseCSSPrefix+"slider-thumb",constrain:!1}),this.callParent([a])},render:function(){var a=this;a.el=a.slider.innerEl.insertFirst(a.getElConfig()),a.onRender()},onRender:function(){this.disabled&&this.disable(),this.initEvents()},getElConfig:function(){var a=this.slider,b={};return b[a.vertical?"bottom":a.horizontalProp]=a.calculateThumbPosition(a.normalizeValue(this.value))+"%",{style:b,id:this.id,cls:this.cls,role:"presentation"}},move:function(h,d){var g,e,c,a=this,f=a.el,i=a.slider,b=i.vertical?"bottom":i.horizontalProp;h+="%",d?((g={})[b]=h,Ext.supports.GetPositionPercentage||((e={})[b]=f.dom.style[b]),c={target:f,duration:350,from:e,to:g,scope:a,callback:a.onAnimComplete},!0!==d&&Ext.apply(c,d),a.anim=new Ext.fx.Anim(c)):f.dom.style[b]=h},onAnimComplete:function(){this.anim=null},enable:function(){var a=this.el;this.disabled=!1,a&&a.removeCls(this.slider.disabledCls)},disable:function(){var a=this.el;this.disabled=!0,a&&a.addCls(this.slider.disabledCls)},initEvents:function(){var a=this;a.tracker=new Ext.dd.DragTracker({el:a.el,onBeforeStart:a.onBeforeDragStart.bind(a),onStart:a.onDragStart.bind(a),onDrag:a.onDrag.bind(a),onEnd:a.onDragEnd.bind(a),tolerance:3,autoStart:300}),a.el.hover(a.addOverCls,a.removeOverCls,a)},addOverCls:function(){var a=this;a.disabled||a.el.addCls(a.overCls)},removeOverCls:function(){this.el.removeCls(this.overCls)},onBeforeDragStart:function(e){var a=this,b=a.el,c=a.tracker.getXY(),d=a.pointerOffset=b.getXY();return!a.disabled&&(d[0]+=Math.floor(b.getWidth()/2)-c[0],d[1]+=Math.floor(b.getHeight()/2)-c[1],a.slider.promoteThumb(a),!0)},onDragStart:function(c){var a=this,b=a.slider;b.onDragStart(a,c),a.el.addCls(Ext.baseCSSPrefix+"slider-thumb-drag"),a.dragging=a.slider.dragging=!0,a.dragStartValue=a.value,b.fireEvent("dragstart",b,c,a)},onDrag:function(g){var d,e,c=this,b=c.slider,f=c.index,a=c.getValueFromTracker();void 0!==a&&(c.constrain&&(d=b.thumbs[f+1],void 0!==(e=b.thumbs[f-1])&&a<=e.value&&(a=e.value),void 0!==d&&a>=d.value&&(a=d.value)),b.setValue(f,a,!1),b.fireEvent("drag",b,g,c))},getValueFromTracker:function(){var a,c=this.slider,b=this.tracker.getXY();if(b[0]+=this.pointerOffset[0],b[1]+=this.pointerOffset[1],void 0!==(a=c.getTrackpoint(b)))return c.reversePixelValue(a)},onDragEnd:function(d){var a=this,b=a.slider,c=a.value;b.onDragEnd(a,d),a.el.removeCls(Ext.baseCSSPrefix+"slider-thumb-drag"),a.dragging=b.dragging=!1,b.fireEvent("dragend",b,d),a.dragStartValue!==c&&b.fireEvent("changecomplete",b,c,a)},destroy:function(){var a=this,b=this.anim;b&&b.end(),a.el=a.tracker=a.anim=Ext.destroy(a.el,a.tracker),a.callParent()}}),Ext.define("Ext.slider.Tip",{extend:Ext.tip.Tip,minWidth:10,alias:"widget.slidertip",offsets:null,align:null,position:"",defaultVerticalPosition:"left",defaultHorizontalPosition:"top",isSliderTip:!0,init:function(d){var c,b,a=this;switch(a.position||(a.position=d.vertical?a.defaultVerticalPosition:a.defaultHorizontalPosition),a.position){case"top":b=[0,-10],c="b-t?";break;case"bottom":b=[0,10],c="t-b?";break;case"left":b=[-10,0],c="r-l?";break;case"right":b=[10,0],c="l-r?"}a.align||(a.align=c),a.offsets||(a.offsets=b),d.on({scope:a,dragstart:a.onSlide,drag:a.onSlide,dragend:a.hide,destroy:a.destroy})},onSlide:function(c,d,b){var a=this;a.show(),a.update(a.getText(b)),a.el.alignTo(b.el,a.align,a.offsets)},getText:function(a){return String(a.value)}}),Ext.define("Ext.slider.Multi",{extend:Ext.form.field.Base,alias:"widget.multislider",alternateClassName:"Ext.slider.MultiSlider",vertical:!1,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,pageSize:10,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,dragging:!1,constrainThumbs:!0,useTips:!0,tipText:null,defaultBindProperty:"values",ariaRole:"slider",focusable:!0,needArrowKeys:!0,tabIndex:0,focusCls:"slider-focus",childEls:["endEl","innerEl"],fieldSubTpl:['<div id="{id}" data-ref="inputEl" {inputAttrTpl}',' class="',Ext.baseCSSPrefix,"slider {fieldCls} {vertical}",'{childElCls}"','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',">",'<div id="{cmpId}-endEl" data-ref="endEl" class="'+Ext.baseCSSPrefix+'slider-end" role="presentation">','<div id="{cmpId}-innerEl" data-ref="innerEl" class="'+Ext.baseCSSPrefix+'slider-inner" role="presentation">',"{%this.renderThumbs(out, values)%}","</div>","</div>","</div>",{renderThumbs:function(h,f){for(var b,e=f.$comp,a=0,c=e.thumbs,g=c.length;a<g;a++)(b=c[a].getElConfig()).id=e.id+"-thumb-"+a,Ext.DomHelper.generateMarkup(b,h)},disableFormats:!0}],horizontalProp:"left",initValue:function(){var a=this,b=Ext.valueFrom,c=b(a.values,[b(a.value,b(a.minValue,0))]),d=0,e=c.length;for(a.originalValue=c;d<e;d++)a.addThumb(a.normalizeValue(c[d]))},initComponent:function(){var d,e,b,f,c,a=this;if(a.thumbs=[],a.keyIncrement=Math.max(a.increment,a.keyIncrement),a.extraFieldBodyCls=Ext.baseCSSPrefix+"slider-ct-"+(a.vertical?"vert":"horz"),a.callParent(),a.useTips){for(d=Ext.isObject(a.useTips)?Ext.apply({},a.useTips):a.tipText?{getText:a.tipText}:{},f=(c=a.plugins=a.plugins||[]).length,b=0;b<f;b++)if(c[b].isSliderTip){e=!0;break}e||a.plugins.push(new Ext.slider.Tip(d))}},addThumb:function(c){var a=this,b=new Ext.slider.Thumb({ownerCt:a,value:c,slider:a,index:a.thumbs.length,constrain:a.constrainThumbs,disabled:!!a.readOnly});return a.thumbs.push(b),a.rendered&&b.render(),b},promoteThumb:function(c){var b,a=this.thumbStack||(this.thumbStack=Ext.Array.slice(this.thumbs)),e=a.length,d=1e4;for(a[0]!==c&&(Ext.Array.remove(a,c),a.unshift(c)),b=0;b<e;b++)a[b].el.setStyle("zIndex",d),d-=1e3},getSubTplData:function(d){var c,b,a=this;return(b=(c=Ext.apply(a.callParent([d]),{$comp:a,vertical:a.vertical?Ext.baseCSSPrefix+"slider-vert":Ext.baseCSSPrefix+"slider-horz",minValue:a.minValue,maxValue:a.maxValue,value:a.value,tabIdx:a.tabIndex,childElCls:""})).inputElAriaAttributes)&&(b["aria-orientation"]=a.vertical?"vertical":"horizontal",b["aria-valuemin"]=a.minValue,b["aria-valuemax"]=a.maxValue,b["aria-valuenow"]=a.value),c},onRender:function(){var c,b=this,d=b.thumbs,e=d.length,a=0;for(b.callParent(arguments),a=0;a<e;a++)(c=d[a]).el=b.el.getById(b.id+"-thumb-"+a),c.onRender()},initEvents:function(){var a=this;a.callParent(),a.mon(a.el,{scope:a,mousedown:a.onMouseDown,keydown:a.onKeyDown})},onDragStart:Ext.emptyFn,onDragEnd:Ext.emptyFn,getTrackpoint:function(f){var a,e,c,b=this,g=b.vertical,d=b.innerEl;return a=g?(c="top",d.getHeight()):(c=b.horizontalProp,d.getWidth()),f=b.transformTrackPoints(d.translatePoints(f)),e=Ext.Number.constrain(f[c],0,a),g?a-e:e},transformTrackPoints:Ext.identityFn,checkChange:Ext.emptyFn,onMouseDown:function(f){var c,a=this,b=!1,d=0,e=a.thumbs,g=e.length;if(!a.disabled){for(;!b&&d<g;d++)b=b||f.target===e[d].el.dom;a.focus(),a.clickToChange&&!b&&void 0!==(c=a.getTrackpoint(f.getXY()))&&a.onClickChange(c)}},onClickChange:function(c){var b,d,a=this;(b=a.getNearest(c)).disabled||(d=b.index,a.setValue(d,Ext.util.Format.round(a.reversePixelValue(c),a.decimalPrecision),void 0,!0))},getNearest:function(i){for(var b,c,e,d=this,h=d.reversePixelValue(i),g=d.getRange()+5,a=null,f=0,k=d.thumbs.length;f<k;f++)if(c=(b=d.thumbs[f]).value,e=Math.abs(c-h),Math.abs(e)<=g){if(a&&a.value==c&&h<c&&b.index>a.index)continue;a=b,g=e}return a},onKeyDown:function(b){var d,c,a=this,e=a.ariaEl.dom;if(d=b.getKey(),a.disabled||1!==a.thumbs.length)d!==b.TAB&&b.preventDefault();else{switch(d){case b.UP:case b.RIGHT:c=b.ctrlKey?a.maxValue:a.getValue(0)+a.keyIncrement;break;case b.DOWN:case b.LEFT:c=b.ctrlKey?a.minValue:a.getValue(0)-a.keyIncrement;break;case b.HOME:c=a.minValue;break;case b.END:c=a.maxValue;break;case b.PAGE_UP:c=a.getValue(0)+a.pageSize;break;case b.PAGE_DOWN:c=a.getValue(0)-a.pageSize}void 0!==c&&(b.stopEvent(),c=a.normalizeValue(c),a.setValue(0,c,void 0,!0),e&&e.setAttribute("aria-valuenow",c))}},normalizeValue:function(b){var a=this,c=a.zeroBasedSnapping?"snap":"snapInRange";return b=Ext.Number[c](b,a.increment,a.minValue,a.maxValue),b=Ext.util.Format.round(b,a.decimalPrecision),b=Ext.Number.constrain(b,a.minValue,a.maxValue)},setMinValue:function(c){var b,a=this,e=a.thumbs,g=e.length,d=a.ariaEl.dom;for(a.minValue=c,b=0;b<g;++b)e[b].value<c&&a.setValue(b,c,!1);d&&d.setAttribute("aria-valuemin",c),a.syncThumbs()},setMaxValue:function(c){var b,a=this,e=a.thumbs,g=e.length,d=a.ariaEl.dom;for(a.maxValue=c,b=0;b<g;++b)e[b].value>c&&a.setValue(b,c,!1);d&&d.setAttribute("aria-valuemax",c),a.syncThumbs()},setValue:function(f,c,d,j){var b,i,e,g,a=this,k=a.thumbs,h=a.ariaEl.dom;if(Ext.isArray(f)){for(d=c,e=0,i=(g=f).length;e<i;++e)(b=k[e])&&a.setValue(e,g[e],d);return a}return b=a.thumbs[f],(c=a.normalizeValue(c))!==b.value&&!1!==a.fireEvent("beforechange",a,c,b.value,b)&&(b.value=c,a.rendered&&(d=Ext.isDefined(d)?!1!==d&&d:a.animate,b.move(a.calculateThumbPosition(c),d),0===f&&h&&h.setAttribute("aria-valuenow",c),a.fireEvent("change",a,c,b),a.checkDirty(),j&&a.fireEvent("changecomplete",a,c,b))),a},calculateThumbPosition:function(d){var a=(d-this.minValue)/this.getRange()*100;return isNaN(a)&&(a=0),a},getRatio:function(){var a=this,d=a.innerEl,b=a.vertical?d.getHeight():d.getWidth(),c=a.getRange();return 0===c?b:b/c},getRange:function(){return this.maxValue-this.minValue},reversePixelValue:function(a){return this.minValue+a/this.getRatio()},reversePercentageValue:function(a){return this.minValue+this.getRange()*(a/100)},onDisable:function(){var b,c,f,a=this,d=0,e=a.thumbs,g=e.length;for(a.callParent();d<g;d++)c=(b=e[d]).el,b.disable(),Ext.isIE&&(f=c.getXY(),c.hide(),a.innerEl.addCls(a.disabledCls).dom.disabled=!0,a.thumbHolder||(a.thumbHolder=a.endEl.createChild({role:"presentation",cls:Ext.baseCSSPrefix+"slider-thumb "+a.disabledCls})),a.thumbHolder.show().setXY(f))},onEnable:function(){var b,e,a=this,c=0,d=a.thumbs,f=d.length;for(this.callParent();c<f;c++)e=(b=d[c]).el,b.enable(),Ext.isIE&&(a.innerEl.removeCls(a.disabledCls).dom.disabled=!1,a.thumbHolder&&a.thumbHolder.hide(),e.show(),a.syncThumbs())},syncThumbs:function(){if(this.rendered)for(var b=this.thumbs,c=b.length,a=0;a<c;a++)b[a].move(this.calculateThumbPosition(b[a].value))},getValue:function(a){return Ext.isNumber(a)?this.thumbs[a].value:this.getValues()},getValues:function(){for(var c=[],a=0,b=this.thumbs,d=b.length;a<d;a++)c.push(b[a].value);return c},getSubmitValue:function(){var a=this;return a.disabled||!a.submitValue?null:a.getValue()},reset:function(){for(var d,a=this,c=[].concat(a.originalValue),b=0,e=c.length;b<e;b++)d=c[b],a.setValue(b,d);a.clearInvalid(),delete a.wasValid},setReadOnly:function(d){var c=this,b=c.thumbs,e=b.length,a=0;for(c.callParent(arguments),d=c.readOnly;a<e;++a)d?b[a].disable():b[a].enable()},beforeDestroy:function(){var d,a=this,c=a.thumbs,b=0,e=c.length;if(a.rendered)for(;b<e;b++)d=c[b],Ext.destroy(d);a.callParent()}}),Ext.define("Ext.slider.Single",{extend:Ext.slider.Multi,alias:["widget.slider","widget.sliderfield"],alternateClassName:["Ext.Slider","Ext.form.SliderField","Ext.slider.SingleSlider","Ext.slider.Slider"],defaultBindProperty:"value",initComponent:function(){this.publishOnComplete&&(this.valuePublishEvent="changecomplete"),this.callParent()},publishOnComplete:!0,getValue:function(){return this.callParent([0])},setValue:function(d,c){var a=arguments,b=a.length;return(1===b||b<=3&&"number"!=typeof a[1])&&(a=Ext.toArray(a)).unshift(0),this.callParent(a)},getNearest:function(){return this.thumbs[0]}}),Ext.define("Ext.state.CookieProvider",{extend:Ext.state.Provider,constructor:function(b){var a=this;a.path="/",a.expires=new Date(Ext.Date.now()+6048e5),a.domain=null,a.secure=!1,a.callParent(arguments),a.state=a.readCookies()},set:function(c,a){var b=this;null!=a?(b.setCookie(c,a),b.callParent(arguments)):b.clear(c)},clear:function(a){this.clearCookie(a),this.callParent(arguments)},readCookies:function(){for(var b,a,e,c={},h=document.cookie+";",g=/\s?(.*?)=(.*?);/g,d=this.prefix,f=d.length;null!=(b=g.exec(h));)a=b[1],e=b[2],a&&a.substring(0,f)===d&&(c[a.substr(f)]=this.decodeValue(e));return c},setCookie:function(c,b){var a=this;document.cookie=a.prefix+c+"="+a.encodeValue(b)+(null==a.expires?"":"; expires="+a.expires.toUTCString())+(null==a.path?"":"; path="+a.path)+(null==a.domain?"":"; domain="+a.domain)+(a.secure?"; secure":"")},clearCookie:function(b){var a=this;document.cookie=a.prefix+b+"=null; expires=Thu, 01-Jan-1970 00:00:01 GMT"+(null==a.path?"":"; path="+a.path)+(null==a.domain?"":"; domain="+a.domain)+(a.secure?"; secure":"")}}),Ext.define("Ext.state.LocalStorageProvider",{extend:Ext.state.Provider,alias:"state.localstorage",constructor:function(){var a=this;a.callParent(arguments),a.store=a.getStorageObject(),a.store?a.state=a.readLocalStorage():a.state={}},readLocalStorage:function(){for(var a,b=this.store,c={},d=b.getKeys(),e=d.length;e--;)c[a=d[e]]=this.decodeValue(b.getItem(a));return c},set:function(c,b){var a=this;a.clear(c),null!=b&&(a.store.setItem(c,a.encodeValue(b)),a.callParent(arguments))},clear:function(a){this.store.removeItem(a),this.callParent(arguments)},getStorageObject:function(){var b=this.prefix,a=b,c=a.length-1;return"-"===a.charAt(c)&&(a=a.substring(0,c)),new Ext.util.LocalStorage({id:a,prefix:b})}}),Ext.define("Ext.toolbar.Fill",{extend:Ext.Component,alias:"widget.tbfill",alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:!0,flex:1}),Ext.define("Ext.tree.Column",{extend:Ext.grid.column.Column,alias:"widget.treecolumn",tdCls:Ext.baseCSSPrefix+"grid-cell-treecolumn",autoLock:!0,lockable:!1,draggable:!1,hideable:!1,iconCls:Ext.baseCSSPrefix+"tree-icon",checkboxCls:Ext.baseCSSPrefix+"tree-checkbox",elbowCls:Ext.baseCSSPrefix+"tree-elbow",expanderCls:Ext.baseCSSPrefix+"tree-expander",textCls:Ext.baseCSSPrefix+"tree-node-text",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-treecolumn",customIconCls:Ext.baseCSSPrefix+"tree-icon-custom",isTreeColumn:!0,cellTpl:['<tpl for="lines">','<div class="{parent.childCls} {parent.elbowCls}-img ','{parent.elbowCls}-<tpl if=".">line<tpl else>empty</tpl>" role="presentation"></div>',"</tpl>",'<div class="{childCls} {elbowCls}-img {elbowCls}','<tpl if="isLast">-end</tpl><tpl if="expandable">-plus {expanderCls}</tpl>" role="presentation"></div>','<tpl if="checked !== null">','<div role="button" {ariaCellCheckboxAttr}',' class="{childCls} {checkboxCls}<tpl if="checked"> {checkboxCls}-checked</tpl>"></div>',"</tpl>",'<tpl if="icon"><img src="{blankUrl}"<tpl else><div</tpl>',' role="presentation" class="{childCls} {baseIconCls} {customIconCls} ','{baseIconCls}-<tpl if="leaf">leaf<tpl else><tpl if="expanded">parent-expanded<tpl else>parent</tpl></tpl> {iconCls}" ','<tpl if="icon">style="background-image:url({icon})"/><tpl else>></div></tpl>','<tpl if="href">','<a href="{href}" role="link" target="{hrefTarget}" class="{textCls} {childCls}">{value}</a>',"<tpl else>",'<span class="{textCls} {childCls}">{value}</span>',"</tpl>"],uiFields:{checked:1,icon:1,iconCls:1},rowFields:{expanded:1,loaded:1,expandable:1,leaf:1,loading:1,qtip:1,qtitle:1,cls:1},initComponent:function(){var a=this;a.rendererScope=a.scope,a.setupRenderer(),a.innerRenderer=a.renderer,a.renderer=a.treeRenderer,a.callParent(),(a.scope=a).hasCustomRenderer=a.innerRenderer&&1<a.innerRenderer.length},treeRenderer:function(i,a,c,g,f,h,j){var b,d=c.get("cls");return a&&d&&(a.tdCls+=" "+d),b=this.initTemplateRendererData(i,a,c,g,f,h,j),this.getTpl("cellTpl").apply(b)},initTemplateRendererData:function(j,i,d,m,l,n,k){for(var e,a=this,f=a.innerRenderer,b=d.data,c=d.parentNode,g=k.rootVisible,h=[];c&&(g||0<c.data.depth);)e=c.data,h[g?e.depth:e.depth-1]=e.isLast?0:1,c=c.parentNode;return{record:d,baseIconCls:a.iconCls,customIconCls:b.icon||b.iconCls?a.customIconCls:"",iconCls:b.iconCls,icon:b.icon,checkboxCls:a.checkboxCls,checked:b.checked,elbowCls:a.elbowCls,expanderCls:a.expanderCls,textCls:a.textCls,leaf:b.leaf,expandable:d.isExpandable(),expanded:b.expanded,isLast:d.isLastVisible(),blankUrl:Ext.BLANK_IMAGE_URL,href:b.href,hrefTarget:b.hrefTarget,lines:h,metaData:i,childCls:a.getChildCls?a.getChildCls()+" ":"",value:f?f.apply(a.rendererScope,arguments):j}},shouldUpdateCell:function(f,a){var e,b,c=this,d=0;if(a)for(e=a.length;d<e;++d){if(b=a[d],c.rowFields[b])return 1;if(c.uiFields[b])return 2}return c.callParent([f,a])}}),Ext.define("Ext.tree.NavigationModel",{extend:Ext.grid.NavigationModel,alias:"view.navigation.tree",initKeyNav:function(e){var d,b,a=this,c=a.view.ownerGrid.columns;for(a.isTreeGrid=c&&1<c.length,a.callParent([e]),b=0,d=a.keyNav.length;b<d;b++)a.keyNav[b].map.addBinding([{key:"8",shift:!0,handler:a.onAsterisk,scope:a},{key:Ext.event.Event.NUM_MULTIPLY,handler:a.onAsterisk,scope:a}]);a.view.grid.on({columnschanged:a.onColumnsChanged,scope:a})},onColumnsChanged:function(){this.isTreeGrid=1<this.view.ownerGrid.getVisibleColumnManager().getColumns().length},onCellClick:function(f,e,c,d,g,b,a){return this.callParent([f,e,c,d,g,b,a]),!a.nodeToggled},onKeyLeft:function(b){var c=this,d=b.view,a=c.record;if(c.isTreeGrid&&!b.ctrlKey)return c.callParent([b]);b.position.column.isTreeColumn&&a.isExpanded()?d.collapse(a):!(a=a.parentNode)||a.isRoot()&&!d.rootVisible||c.setPosition(a,null,b)},onKeyRight:function(b){var c=this,a=c.record;if(c.isTreeGrid&&!b.ctrlKey)return c.callParent([b]);a.isLeaf()||(b.position.column.isTreeColumn&&!a.isExpanded()?b.view.expand(a):a.isExpanded()&&(a=a.childNodes[0])&&c.setPosition(a))},onKeyEnter:function(a){null!=this.record.data.checked?this.toggleCheck(a):this.callParent([a])},onKeySpace:function(a){null!=this.record.data.checked?this.toggleCheck(a):this.callParent([a])},toggleCheck:function(a){this.view.onCheckChange(a)},onAsterisk:function(a){this.view.ownerCt.expandAll()}}),Ext.define("Ext.tree.View",{extend:Ext.view.Table,alias:"widget.treeview",config:{selectionModel:{type:"treemodel"}},isTreeView:!0,loadingCls:Ext.baseCSSPrefix+"grid-tree-loading",expandedCls:Ext.baseCSSPrefix+"grid-tree-node-expanded",leafCls:Ext.baseCSSPrefix+"grid-tree-node-leaf",expanderSelector:"."+Ext.baseCSSPrefix+"tree-expander",checkboxSelector:"."+Ext.baseCSSPrefix+"tree-checkbox",expanderIconOverCls:Ext.baseCSSPrefix+"tree-expander-over",nodeAnimWrapCls:Ext.baseCSSPrefix+"tree-animator-wrap",ariaRole:"tree",loadMask:!1,rootVisible:!0,expandDuration:250,collapseDuration:250,toggleOnDblClick:!0,stripeRows:!1,treeRowTpl:["{%","this.processRowValues(values);","this.nextTpl.applyOut(values, out, parent);","%}",{priority:10,processRowValues:function(a){var b=a.record,c=a.view;a.rowAttr["data-qtip"]=b.get("qtip")||"",a.rowAttr["data-qtitle"]=b.get("qtitle")||"",b.isExpanded()&&a.rowClasses.push(c.expandedCls),b.isLeaf()&&a.rowClasses.push(c.leafCls),b.isLoading()&&a.rowClasses.push(c.loadingCls)}}],initComponent:function(){var a=this;a.bufferedRenderer?a.animate=!1:void 0===a.initialConfig.animate&&(a.animate=Ext.enableFx),a.store=a.panel.getStore(),a.onRootChange(a.store.getRoot()),a.animQueue={},a.animWraps={},a.callParent(),a.store.setRootVisible(a.rootVisible),a.addRowTpl(Ext.XTemplate.getTpl(a,"treeRowTpl"))},onFillComplete:function(f,d,b){var a=this,c=a.store.indexOf(b[0]);d.triggerUIUpdate(),b.length&&-1!==c&&(a.onAdd(a.store,b,c),a.refreshPartner())},refreshPartner:function(){var a=this.lockingPartner;a&&a.refresh()},afterComponentLayout:function(e,d,c,b){var a=this.getScrollable();this.callParent([e,d,c,b]),a&&!this.bufferedRenderer&&a.refresh()},processUIEvent:function(a){return!a.getTarget("."+this.nodeAnimWrapCls,this.el)&&this.callParent([a])},setRootNode:function(a){this.node=a},getChecked:function(){var a=[];return this.node.cascadeBy(function(b){b.get("checked")&&a.push(b)}),a},isItemChecked:function(a){return a.get("checked")},createAnimWrap:function(b,e){var a,c=this.getNode(b);return{record:b,node:c,el:a=Ext.fly(c).insertSibling({role:"presentation",tag:"div",cls:this.nodeAnimWrapCls},"after"),expanding:!1,collapsing:!1,animateEl:a,targetEl:a}},getAnimWrap:function(a,d){if(!this.animate)return null;var c=this.animWraps,b=c[a.internalId];if(!1!==d)for(;!b&&a;)(a=a.parentNode)&&(b=c[a.internalId]);return b},doAdd:function(h,d){var e,g,f,k,j,c,a=this,i=h[0].parentNode,m=a.all,b=a.getAnimWrap(i);return b&&b.expanding?(c=(j=a.bufferRender(h,d,!0)).children,i=b.record,k=(f=(g=b.targetEl).dom.childNodes).length,e=d-a.indexInStore(i)-1,!k||k<=e?g.appendChild(j.fragment,!0):Ext.fly(f[e]).insertSibling(c,"before",!0),m.insert(d,c),c):a.callParent([h,d])},onRemove:function(h,c,b){var g,d,f,a=this,e=a.hasListeners.remove;if(a.viewReady){if(g=0===a.store.getCount(),a.bufferedRenderer)return a.callParent([h,c,b]);if(e&&(f=this.all.slice(b,b+c.length)),g)a.refresh();else{for(b+=d=c.length-1;0<=d;--d,--b)a.doRemove(c[d],b);a.refreshSizePending=!0}e&&a.fireEvent("itemremove",c,b,f,a)}},doRemove:function(d,b){var c=this,g=c.all,a=c.getAnimWrap(d),e=g.item(b),f=e?e.dom:null;if(!f||!a||!a.collapsing)return c.callParent([d,b]);a.targetEl.dom.insertBefore(f,a.targetEl.dom.firstChild),g.removeElement(b)},onBeforeExpand:function(c,d,e){var a,b=this;b.rendered&&b.all.getCount()&&b.animate&&b.getNode(c)&&((a=b.getAnimWrap(c,!1))?a.collapsing&&a.targetEl.select(b.itemSelector).destroy():(a=b.animWraps[c.internalId]=b.createAnimWrap(c)).animateEl.setHeight(0),a.expanding=!0,a.collapsing=!1)},onExpand:function(b){var c,d,e,a=this,h=a.animQueue,i=b.getId(),f=a.getNode(b),g=f?a.indexOf(f):-1;if(a.singleExpand&&a.ensureSingleExpand(b),-1!==g){if(!(c=a.getAnimWrap(b,!1)))return b.isExpandingOrCollapsing=!1,void a.fireEvent("afteritemexpand",b,g,f);d=c.animateEl,e=c.targetEl,d.stopAnimation(),h[i]=!0,Ext.on("idle",function(){d.dom.style.height="0px"},null,{single:!0}),d.animate({from:{height:0},to:{height:e.dom.scrollHeight},duration:a.expandDuration,listeners:{afteranimate:function(){var d=e.dom.childNodes,b=Ext.Element.getActiveElement();d.length&&(e.contains(b)||(b=null),c.el.insertSibling(d,"before",!0),b&&Ext.fly(b).focus()),c.el.destroy(),a.animWraps[c.record.internalId]=h[i]=null}},callback:function(){b.isExpandingOrCollapsing=!1,a.destroyed||a.refreshSize(!0),a.fireEvent("afteritemexpand",b,g,f)}})}},onBeforeCollapse:function(c,g,f,d,e){var a,b=this;b.rendered&&b.all.getCount()&&(b.animate?c.isVisible()&&((a=b.getAnimWrap(c))?a.expanding&&a.targetEl.select(this.itemSelector).destroy():a=b.animWraps[c.internalId]=b.createAnimWrap(c,f),a.expanding=!1,a.collapsing=!0,a.callback=d,a.scope=e):(b.onCollapseCallback=d,b.onCollapseScope=e))},onCollapse:function(c){var e,a=this,g=a.animQueue,h=c.getId(),d=a.getNode(c),f=d?a.indexOf(d):-1,b=a.getAnimWrap(c);if(a.all.getCount()&&c.isVisible()){if(!b)return c.isExpandingOrCollapsing=!1,a.fireEvent("afteritemcollapse",c,f,d),Ext.callback(a.onCollapseCallback,a.onCollapseScope),void(a.onCollapseCallback=a.onCollapseScope=null);e=b.animateEl,g[h]=!0,e.stopAnimation(),e.animate({to:{height:0},duration:a.collapseDuration,listeners:{afteranimate:function(){b.el.destroy(),a.animWraps[b.record.internalId]=g[h]=null}},callback:function(){c.isExpandingOrCollapsing=!1,a.destroyed||a.refreshSize(!0),a.fireEvent("afteritemcollapse",c,f,d),Ext.callback(b.callback,b.scope),b.callback=b.scope=null}})}},isAnimating:function(a){return!!this.animQueue[a.getId()]},expand:function(a,f,d,e){var c,b=!!this.animate;if(!b||!a.isExpandingOrCollapsing)return a.isLeaf()||(a.isExpandingOrCollapsing=b),Ext.suspendLayouts(),c=a.expand(f,d,e),Ext.resumeLayouts(!0),c},collapse:function(a,e,c,d){var b=!!this.animate;if(!b||!a.isExpandingOrCollapsing)return a.isLeaf()||(a.isExpandingOrCollapsing=b),a.collapse(e,c,d)},toggle:function(a,d,b,c){a.isExpanded()?this.collapse(a,d,b,c):this.expand(a,d,b,c)},onItemDblClick:function(b,e,d,f){var a=this,c=a.editingPlugin;a.callParent([b,e,d,f]),!a.toggleOnDblClick||!b.isExpandable()||c&&2===c.clicksToEdit||a.toggle(b)},onCellClick:function(d,g,c,i,h,a){var e,b=this,f=a.position.column;if(f.isTreeColumn)return a.getTarget(b.checkboxSelector,d)&&Ext.isBoolean(e=c.get("checked"))&&!1!==b.fireEvent("beforecheckchange",c,e,a)?(b.onCheckChange(a),f.stopSelection&&(a.stopSelection=!0)):a.getTarget(b.expanderSelector,d)&&c.isExpandable()&&(b.getNavigationModel().setPosition(a.position),b.toggle(c,a.ctrlKey),a.nodeToggled=!0),b.callParent([d,g,c,i,h,a])},onCheckChange:function(c){var a=c.record,b=!a.get("checked");a.set("checked",b),this.fireEvent("checkchange",a,b,c)},onItemMouseOver:function(c,b,d,a){a.getTarget(this.expanderSelector,b)&&a.getTarget(this.cellSelector,null,!0).addCls(this.expanderIconOverCls)},onItemMouseOut:function(c,b,d,a){a.getTarget(this.expanderSelector,b)&&a.getTarget(this.cellSelector,null,!0).removeCls(this.expanderIconOverCls)},getStoreListeners:function(){return Ext.apply(this.callParent(),{rootchange:this.onRootChange,fillcomplete:this.onFillComplete})},onBindStore:function(b,f,e,a){var d=a&&a.getRootNode(),c=b&&b.getRootNode();this.callParent([b,f,e,a]),c!==d&&this.onRootChange(c,d)},onRootChange:function(b,c){var a=this,d=a.grid;c&&(a.rootListeners.destroy(),a.rootListeners=null),b&&(a.rootListeners=b.on({beforeexpand:a.onBeforeExpand,expand:a.onExpand,beforecollapse:a.onBeforeCollapse,collapse:a.onCollapse,destroyable:!0,scope:a}),d.addRelayers(b))},ensureSingleExpand:function(b){var a=b.parentNode;a&&a.eachChild(function(a){a!==b&&a.isExpanded()&&a.collapse()})}}),Ext.define("Ext.tree.Panel",{extend:Ext.panel.Table,alias:"widget.treepanel",alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],viewType:"treeview",treeCls:Ext.baseCSSPrefix+"tree-panel",rowLines:!1,lines:!0,useArrows:!1,singleExpand:!1,ddConfig:{enableDrag:!0,enableDrop:!0},rootVisible:!0,displayField:"text",root:null,normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],isTree:!0,arrowCls:Ext.baseCSSPrefix+"tree-arrows",linesCls:Ext.baseCSSPrefix+"tree-lines",noLinesCls:Ext.baseCSSPrefix+"tree-no-lines",autoWidthCls:Ext.baseCSSPrefix+"autowidth-table",constructor:function(a){void 0===(a=a||{}).animate&&(a.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx),this.enableAnimations=a.animate,delete a.animate,this.callParent([a])},initComponent:function(){var b,d,a=this,c=[a.treeCls];a.useArrows&&(c.push(a.arrowCls),a.lines=!1),a.lines?c.push(a.linesCls):a.useArrows||c.push(a.noLinesCls),(b=a.applyStore(a.store)).getRoot()||b.setRoot({}),b.setRootVisible(a.rootVisible),a.viewConfig=Ext.apply({rootVisible:a.rootVisible,animate:a.enableAnimations,singleExpand:a.singleExpand,node:b.getRoot(),hideHeaders:a.hideHeaders,navigationModel:"tree"},a.viewConfig),a.columns||(void 0===a.initialConfig.hideHeaders&&(a.hideHeaders=!0),a.addCls(a.autoWidthCls),a.columns=[{xtype:"treecolumn",text:"Name",flex:1,dataIndex:a.displayField}]),a.cls&&c.push(a.cls),a.cls=c.join(" "),a.callParent(),d=a.getView(),a.relayEvents(d,["beforecheckchange","checkchange","afteritemexpand","afteritemcollapse"])},applyStore:function(a){var b=this;return Ext.isString(a)?a=b.store=Ext.StoreMgr.lookup(a):a&&a.isStore?b.root&&((a=b.store=Ext.data.StoreManager.lookup(a)).setRoot(b.root),void 0!==b.folderSort&&(a.folderSort=b.folderSort,a.sort())):(a=Ext.apply({type:"tree",proxy:"memory"},a),b.root&&(a.root=b.root),b.fields?a.fields=b.fields:b.model&&(a.model=b.model),b.folderSort&&(a.folderSort=b.folderSort),a=b.store=Ext.StoreMgr.lookup(a)),a},setStore:function(a){var b=this;(a=b.applyStore(a)).getRoot()||a.setRoot({}),a.setRootVisible(b.rootVisible),b.view&&b.view.setRootNode(a.getRootNode()),b.bindStore(a)},bindStore:function(b,e){var a=this,c=b.getRoot(),d=a.bufferedRenderer;a.callParent(arguments),d&&d.store&&d.bindStore(b),b.singleExpand=a.singleExpand,a.storeListeners=a.mon(b,{destroyable:!0,rootchange:a.onRootChange,scope:a}),a.storeRelayers=a.relayEvents(b,["beforeload","load"]),a.rootVisible||b.autoLoad||c.isExpanded()||c.isLoading()||(c.isLoaded()?(c.data.expanded=!0,b.onNodeExpand(c,c.childNodes)):!1!==b.autoLoad&&(c.data.expanded=!1,c.expand())),b.ownerTree=a,e||a.view.setRootNode(c)},addRelayers:function(b){var a=this;a.rootRelayers&&(a.rootRelayers.destroy(),a.rootRelayers=null),a.rootRelayers=a.mon(b,{destroyable:!0,append:a.createRelayer("itemappend"),remove:a.createRelayer("itemremove"),move:a.createRelayer("itemmove",[0,4]),insert:a.createRelayer("iteminsert"),beforeappend:a.createRelayer("beforeitemappend"),beforeremove:a.createRelayer("beforeitemremove"),beforemove:a.createRelayer("beforeitemmove"),beforeinsert:a.createRelayer("beforeiteminsert"),expand:a.createRelayer("itemexpand",[0,1]),collapse:a.createRelayer("itemcollapse",[0,1]),beforeexpand:a.createRelayer("beforeitemexpand",[0,1]),beforecollapse:a.createRelayer("beforeitemcollapse",[0,1]),scope:a})},unbindStore:function(){var a=this,b=a.store;b&&(a.callParent(),Ext.destroy(a.storeListeners,a.storeRelayers,a.rootRelayers),delete b.ownerTree,b.singleExpand=null)},setRootNode:function(){return this.store.setRoot.apply(this.store,arguments)},getRootNode:function(){return this.store.getRoot()},onRootChange:function(a){this.view.setRootNode(a)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(a){return a.get("checked")},expandNode:function(b,d,a,c){return this.getView().expand(b,d,a,c||this)},collapseNode:function(b,d,a,c){return this.getView().collapse(b,d,a,c||this)},expandAll:function(c,d){var a=this.getRootNode();a&&(Ext.suspendLayouts(),a.expand(!0,c,d||this),Ext.resumeLayouts(!0))},collapseAll:function(d,a){var c=this,b=c.getRootNode(),e=c.getView();b&&(Ext.suspendLayouts(),a=a||c,e.rootVisible?b.collapse(!0,d,a):b.collapseChildren(!0,d,a),Ext.resumeLayouts(!0))},expandPath:function(p,a){var o,n,c,e,d,h,f,m,l,i=arguments,b=this,j=b.view,g=a&&a.field||b.store.model.idProperty,k=a&&a.separator||"/";return a&&"object"==typeof a?(g=a.field||b.store.model.idProperty,k=a.separator||"/",c=a.callback,e=a.scope,o=a.select,n=a.focus):(g=i[1]||b.store.model.idProperty,k=i[2]||"/",c=i[3],e=i[4]),Ext.isEmpty(p)?Ext.callback(c,e||b,[!1,null]):(m=!(f=p.split(k))[0],h=m?(d=b.getRootNode(),1):(d=b.store.findNode(g,f[0]),0),!d||m&&d.get(g)!==f[1]?Ext.callback(c,e||b,[!1,d]):(l=function(k){var m,i,d,a=this;if(++h===f.length)return o&&j.getSelectionModel().select(a),n&&j.getNavigationModel().setPosition(a,0),Ext.callback(c,e||b,[!0,a,j.getNode(a)]);for(i=0,m=k?k.length:0;i<m;i++)if(!(d=(a=k[i]).get(g))&&0!==d||(d=d.toString()),d===f[h])return a.expand(!1,l);a=this,Ext.callback(c,e||b,[!1,a,j.getNode(a)])},void d.expand(!1,l)))},ensureVisible:function(f,a){if(f.isEntity||"number"==typeof f)return this.callParent([f,a]);function l(e,d,f,b){!b&&e&&d&&(b=d.findChild(i,k)),b?c.doEnsureVisible(b,a):Ext.callback(h,j||c,[!1,d])}var h,j,b,m,k,e,d,c=this,i=a&&a.field||c.store.model.idProperty,g=a&&a.separator||"/";a&&(h=a.callback,j=a.scope),m=!(b=f.split(g))[0],k=b.pop(),!b.length||m&&1===b.length?(e=c.store.findNode(i,k))?((d=e.parentNode)&&!d.isExpanded()&&d.expand(),l(!0,null,0,e)):Ext.callback(h,j||c,[!1,null]):c.expandPath(b.join(g),i,g,l)},selectPath:function(e,c,a,b,d){this.ensureVisible(e,{field:c,separator:a,select:!0,callback:b,scope:d})}}),Ext.define("Ext.view.DragZone",{extend:Ext.dd.DragZone,containerScroll:!1,constructor:function(e){var c,b,d,a=this;Ext.apply(a,e),a.ddGroup||(a.ddGroup="view-dd-zone-"+a.view.id),d=(b=(c=a.view).ownerCt)?b.getTargetEl().dom:c.el.dom.parentNode,a.callParent([d]),a.ddel=document.createElement("div"),a.ddel.className=Ext.baseCSSPrefix+"grid-dd-wrap"},init:function(e,d,c){var a=this,b={itemmousedown:a.onItemMouseDown,scope:a};Ext.supports.touchScroll&&(b.itemlongpress=a.onItemMouseDown),a.initTarget(e,d,c),a.view.mon(a.view,b)},onValidDrop:function(a,c,b){this.callParent([a,c,b]),a.el.focus()},onItemMouseDown:function(f,d,e,c,a){var b;"touch"===a.pointerType&&"longpress"!==a.type||a.position&&a.position.isEqual(a.view.actionPosition)||this.isPreventDrag(a,d,e,c)||(b=f.getNavigationModel(),a.position?b.setPosition(a.position):b.setPosition(c),this.handleMouseDown(a))},isPreventDrag:function(d,a,c,b){return!1},getDragData:function(c){var a=this.view,b=c.getTarget(a.getItemSelector());if(b)return{copy:a.copy||a.allowCopy&&c.ctrlKey,event:c,view:a,ddel:this.ddel,item:b,records:a.getSelectionModel().getSelection(),fromPosition:Ext.fly(b).getXY()}},onInitDrag:function(f,g){var a=this,c=a.dragData,e=c.view,b=e.getSelectionModel(),d=e.getRecord(c.item);return b.isSelected(d)||b.selectWithEvent(d,a.DDMInstance.mousedownEvent),c.records=b.getSelection(),Ext.fly(a.ddel).setHtml(a.getDragText()),a.proxy.update(a.ddel),a.onStartDrag(f,g),!0},getDragText:function(){var a=this.dragData.records.length;return Ext.String.format(this.dragText,a,1===a?"":"s")},getRepairXY:function(b,a){return!!a&&a.fromPosition}}),Ext.define("Ext.tree.ViewDragZone",{extend:Ext.view.DragZone,isPreventDrag:function(b,a){return!1===a.get("allowDrag")||!!b.getTarget(this.view.expanderSelector)},getDragText:function(){var c=this.dragData.records,e=c.length,a=c[0].get(this.displayField),d="s",b=this.dragText;return/\{\d+\}/.test(b)&&1===e&&a?a:(a||(d=""),Ext.String.format(b,e,d))},afterRepair:function(){var d,a,b=this,c=b.view,f=c.selectedItemCls,g=b.dragData.records,h=g.length,e=Ext.fly;if(Ext.enableFx&&b.repairHighlight)for(d=0;d<h;d++)a=c.getNode(g[d]),e(a.firstChild).highlight(b.repairHighlightColor,{listeners:{beforeanimate:function(){c.isSelected(a)&&e(a).removeCls(f)},afteranimate:function(){c.isSelected(a)&&e(a).addCls(f)}}});b.dragging=!1}}),Ext.define("Ext.tree.ViewDropZone",{extend:Ext.view.DropZone,allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,expandDelay:500,indicatorCls:Ext.baseCSSPrefix+"tree-ddindicator",expandNode:function(a){var b=this.view;this.expandProcId=!1,a.isLeaf()||a.isExpanded()||(b.expand(a),this.expandProcId=!1)},queueExpand:function(a){this.expandProcId=Ext.Function.defer(this.expandNode,this.expandDelay,this,[a])},cancelExpand:function(){this.expandProcId&&(clearTimeout(this.expandProcId),this.expandProcId=!1)},getPosition:function(i,g){var d,b=this.view.getRecord(g),c=i.getY(),e=b.isLeaf(),f=!1,a=Ext.fly(g).getRegion();return b.isRoot()?"append":this.appendOnly?!e&&"append":(this.allowParentInserts||(f=b.hasChildNodes()&&b.isExpanded()),d=(a.bottom-a.top)/(e?2:3),c>=a.top&&c<a.top+d?"before":!f&&(e||c>=a.bottom-d&&c<=a.bottom)?"after":"append")},isValidDropPoint:function(g,c,l,k,f){if(!g||!f.item)return!1;var d,e,h=this.view,a=h.getRecord(g),b=f.records,i=b.length,j=b.length;if(!(a&&c&&i))return!1;for(d=0;d<j;d++)if((e=b[d]).isNode&&e.contains(a))return!1;return("append"!==c||!1!==a.get("allowDrop"))&&(("append"===c||!1!==a.parentNode.get("allowDrop"))&&(!Ext.Array.contains(b,a)&&!1!==h.fireEvent("nodedragover",a,c,f,k)))},onNodeOver:function(b,h,j,i){var e=this.getPosition(j,b),d=this.dropNotAllowed,g=this.view,a=g.getRecord(b),f=this.getIndicator(),c=0;return this.cancelExpand(),"append"!==e||this.expandProcId||Ext.Array.contains(i.records,a)||a.isLeaf()||a.isExpanded()||this.queueExpand(a),this.isValidDropPoint(b,e,h,j,i)?(this.valid=!0,this.currentPosition=e,this.overRecord=a,f.setWidth(Ext.fly(b).getWidth()),c=Ext.fly(b).getY()-Ext.fly(g.el).getY()-1,2===g.touchScroll&&(c+=g.getScrollY()),"before"===e?(d=a.isFirst()?Ext.baseCSSPrefix+"tree-drop-ok-above":Ext.baseCSSPrefix+"tree-drop-ok-between",f.showAt(0,c),h.proxy.show()):"after"===e?(d=a.isLast()?Ext.baseCSSPrefix+"tree-drop-ok-below":Ext.baseCSSPrefix+"tree-drop-ok-between",c+=Ext.fly(b).getHeight(),f.showAt(0,c),h.proxy.show()):(d=Ext.baseCSSPrefix+"tree-drop-ok-append",f.hide())):this.valid=!1,this.currentCls=d},onNodeOut:function(d,b,c,a){this.valid=!1,this.getIndicator().hide()},onContainerOver:function(c,a,b){return this.allowContainerDrops?this.dropAllowed:a.getTarget("."+this.indicatorCls)?this.currentCls:this.dropNotAllowed},onContainerDrop:function(a,c,b){this.allowContainerDrops&&(this.valid=!0,this.currentPosition="append",this.overRecord=this.view.store.getRoot(),this.onNodeDrop(this.overRecord,a,c,b))},notifyOut:function(){this.callParent(arguments),this.cancelExpand()},handleNodeDrop:function(d,b,o){var l,c,i,a,f,e,n,k,j=this,h=j.view,g=b?b.parentNode:h.panel.getRootNode(),m=h.store.getModel();if(d.copy)for(l=d.records,d.records=[],c=0,i=l.length;c<i;c++)(a=l[c]).isNode?d.records.push(a.copy()):d.records.push(new m(Ext.apply({},a.data)));j.cancelExpand(),"before"===o?(f=g.insertBefore,e=[null,b],b=g):"after"===o?(e=b.nextSibling?(f=g.insertBefore,[null,b.nextSibling]):(f=g.appendChild,[null]),b=g):(b.isExpanded()||b.isLoading()||(n=!0),f=b.appendChild,e=[null]),k=function(){var k,g;for(Ext.suspendLayouts(),c=0,i=d.records.length;c<i;c++)(a=d.records[c]).isNode||(a=a.isModel?new m(a.data,a.getId()):new m(a),d.records[c]=a),e[0]=a,f.apply(b,e);if(j.sortOnDrop&&b.sort(b.getOwnerTree().store.getSorters().sortFn),Ext.resumeLayouts(!0),a=d.records[0],h.ownerGrid.ensureVisible(a),h.getNavigationModel().setPosition(a),Ext.enableFx&&j.dropHighlight)for(k=j.dropHighlightColor,c=0;c<i;c++)(g=h.getNode(d.records[c]))&&Ext.fly(g).highlight(k)},n?b.expand(!1,k):b.isLoading()?b.on({expand:k,delay:1,single:!0}):k()}}),Ext.define("Ext.tree.plugin.TreeViewDragDrop",{extend:Ext.plugin.Abstract,alias:"plugin.treeviewdragdrop",dragText:"{0} selected node{1}",allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,ddGroup:"TreeDD",containerScroll:!1,expandDelay:1e3,enableDrop:!0,enableDrag:!0,nodeHighlightColor:"c3daf9",nodeHighlightOnDrop:Ext.enableFx,displayField:"text",init:function(a){Ext.applyIf(a,{copy:this.copy,allowCopy:this.allowCopy}),a.on("render",this.onViewRender,this,{single:!0})},destroy:function(){var a=this;a.dragZone=a.dropZone=Ext.destroy(a.dragZone,a.dropZone),a.callParent()},onViewRender:function(b){var c,a=this;(b.ownerCt.ownerGrid||b.ownerCt).relayEvents(b,["beforedrop","drop"]),a.enableDrag&&(a.containerScroll&&(c=b.getEl()),a.dragZone=new Ext.tree.ViewDragZone(Ext.apply({view:b,ddGroup:a.dragGroup||a.ddGroup,dragText:a.dragText,displayField:a.displayField,repairHighlightColor:a.nodeHighlightColor,repairHighlight:a.nodeHighlightOnRepair,scrollEl:c},a.dragZone))),a.enableDrop&&(a.dropZone=new Ext.tree.ViewDropZone(Ext.apply({view:b,ddGroup:a.dropGroup||a.ddGroup,allowContainerDrops:a.allowContainerDrops,appendOnly:a.appendOnly,allowParentInserts:a.allowParentInserts,expandDelay:a.expandDelay,dropHighlightColor:a.nodeHighlightColor,dropHighlight:a.nodeHighlightOnDrop,sortOnDrop:a.sortOnDrop,containerScroll:a.containerScroll},a.dropZone)))}},function(){var a=this.prototype;a.nodeHighlightOnDrop=a.nodeHighlightOnRepair=Ext.enableFx}),Ext.define("Ext.util.CSS",function(){function d(b,a){return a.charAt(1).toUpperCase()}var a,b=null,c=document,e=/(-[a-z])/gi;return{singleton:!0,rules:b,initialized:!1,constructor:function(){a=this},createStyleSheet:function(e,g){var d,f=c.getElementsByTagName("head")[0],b=c.createElement("style");return b.setAttribute("type","text/css"),g&&b.setAttribute("id",g),(d=b.styleSheet)?(f.appendChild(b),d.cssText=e):(b.appendChild(c.createTextNode(e)),f.appendChild(b),d=b.sheet),a.cacheStyleSheet(d),d},removeStyleSheet:function(b){var a=c.getElementById(b);a&&a.parentNode.removeChild(a)},swapStyleSheet:function(d,e){var b;a.removeStyleSheet(d),(b=c.createElement("link")).setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("id",d),b.setAttribute("href",e),c.getElementsByTagName("head")[0].appendChild(b)},cacheStyleSheet:function(d){b=b||(a.rules={});try{var c,e,h=d.cssRules||d.rules,g=h.length-1,f=d.imports,i=f?f.length:0;for(e=0;e<i;++e)a.cacheStyleSheet(f[e]);for(;0<=g;--g)(c=h[g]).styleSheet&&a.cacheStyleSheet(c.styleSheet),a.cacheRule(c,d)}catch(j){}},cacheRule:function(d,g){if(d.styleSheet)return a.cacheStyleSheet(d.styleSheet);var f,e,c=d.selectorText;if(c)for(f=(c=c.split(",")).length,e=0;e<f;e++)b[Ext.String.trim(c[e]).toLowerCase()]={parentStyleSheet:g,cssRule:d}},getRules:function(e){var c,d={};for(c in null!==b&&!e||a.refreshCache(),b)d[c]=b[c].cssRule;return d},refreshCache:function(){var e=c.styleSheets,d=0,f=e.length;for(b=a.rules={};d<f;d++)try{e[d].disabled||a.cacheStyleSheet(e[d])}catch(g){}},getRule:function(c,g,f){var d,e;if(b&&!g||a.refreshCache(),!Ext.isArray(c))return(e=b[c.toLowerCase()])&&!f&&(e=e.cssRule),e||null;for(d=0;d<c.length;d++)if(b[c[d]])return f?b[c[d].toLowerCase()]:b[c[d].toLowerCase()].cssRule;return null},createRule:function(b,c,d){var f,e=b.cssRules||b.rules,g=e.length;return b.insertRule?b.insertRule(c+" {"+d+"}",g):b.addRule(c,d||" "),a.cacheRule(f=e[g],b),f},updateRule:function(c,b,i){var f,g,h;if(Ext.isArray(c)){for(g=0;g<c.length;g++)if(a.updateRule(c[g],b,i))return!0}else if(f=a.getRule(c)){if(2===arguments.length)for(b in h=Ext.Element.parseStyles(b))f.style[b.replace(e,d)]=h[b];else f.style[b.replace(e,d)]=i;return!0}return!1},deleteRule:function(f){var c,d,e=a.getRule(f,!1,!0);e&&(c=e.parentStyleSheet,d=Ext.Array.indexOf(c.cssRules||c.rules,e.cssRule),c.deleteRule?c.deleteRule(d):c.removeRule(d),delete b[f])}}}),Ext.define("Ext.window.Toast",{extend:Ext.window.Window,xtype:"toast",isToast:!0,cls:Ext.baseCSSPrefix+"toast",bodyPadding:10,autoClose:!0,plain:!1,draggable:!1,resizable:!1,shadow:!1,focus:Ext.emptyFn,anchor:null,useXAxis:!1,align:"br",animate:!0,spacing:6,paddingX:30,paddingY:10,slideInAnimation:"easeIn",slideBackAnimation:"bounceOut",slideInDuration:500,slideBackDuration:500,hideDuration:500,autoCloseDelay:3e3,stickOnClick:!0,stickWhileHover:!0,closeOnMouseDown:!1,closable:!1,isHiding:!1,isFading:!1,destroyAfterHide:!1,closeOnMouseOut:!1,xPos:0,yPos:0,initComponent:function(){var a=this;a.autoClose&&!a.hasOwnProperty("closable")&&(a.closable=!1),a.updateAlignment(a.align),a.setAnchor(a.anchor),a.callParent()},onRender:function(){var a=this;a.callParent(arguments),a.el.hover(a.onMouseEnter,a.onMouseLeave,a),a.closeOnMouseDown&&Ext.getDoc().on("mousedown",a.onDocumentMousedown,a)},alignmentProps:{br:{paddingFactorX:-1,paddingFactorY:-1,siblingAlignment:"br-br",anchorAlign:"tr-br"},bl:{paddingFactorX:1,paddingFactorY:-1,siblingAlignment:"bl-bl",anchorAlign:"tl-bl"},tr:{paddingFactorX:-1,paddingFactorY:1,siblingAlignment:"tr-tr",anchorAlign:"br-tr"},tl:{paddingFactorX:1,paddingFactorY:1,siblingAlignment:"tl-tl",anchorAlign:"bl-tl"},b:{paddingFactorX:0,paddingFactorY:-1,siblingAlignment:"b-b",useXAxis:0,anchorAlign:"t-b"},t:{paddingFactorX:0,paddingFactorY:1,siblingAlignment:"t-t",useXAxis:0,anchorAlign:"b-t"},l:{paddingFactorX:1,paddingFactorY:0,siblingAlignment:"l-l",useXAxis:1,anchorAlign:"r-l"},r:{paddingFactorX:-1,paddingFactorY:0,siblingAlignment:"r-r",useXAxis:1,anchorAlign:"l-r"},x:{br:{anchorAlign:"bl-br"},bl:{anchorAlign:"br-bl"},tr:{anchorAlign:"tl-tr"},tl:{anchorAlign:"tr-tl"}}},updateAlignment:function(d){var a=this,b=a.alignmentProps,e=b[d],c=b.x[d];c&&a.useXAxis&&Ext.applyIf(a,c),Ext.applyIf(a,e)},getXposAlignedToAnchor:function(){var b=this,d=b.align,e=b.anchor,c=e&&e.el,f=b.el,a=0;return c&&c.dom&&(b.useXAxis?"br"===d||"tr"===d||"r"===d?(a+=c.getAnchorXY("r")[0],a-=f.getWidth()+b.paddingX):(a+=c.getAnchorXY("l")[0],a+=b.paddingX):a=f.getLeft()),a},getYposAlignedToAnchor:function(){var b=this,d=b.align,e=b.anchor,c=e&&e.el,f=b.el,a=0;return c&&c.dom&&(b.useXAxis?a=f.getTop():"br"===d||"bl"===d||"b"===d?(a+=c.getAnchorXY("b")[1],a-=f.getHeight()+b.paddingY):(a+=c.getAnchorXY("t")[1],a+=b.paddingY)),a},getXposAlignedToSibling:function(a){var c=this,d=c.align,e=c.el;return c.useXAxis?"tl"===d||"bl"===d||"l"===d?a.xPos+a.el.getWidth()+a.spacing:a.xPos-e.getWidth()-c.spacing:e.getLeft()},getYposAlignedToSibling:function(a){var d=this,c=d.align,e=d.el;return d.useXAxis?e.getTop():"tr"===c||"tl"===c||"t"===c?a.yPos+a.el.getHeight()+a.spacing:a.yPos-e.getHeight()-a.spacing},getToasts:function(){var c=this.anchor,b=this.anchorAlign,a=c.activeToasts||(c.activeToasts={});return a[b]||(a[b]=[])},setAnchor:function(a){var b;this.anchor=a="string"==typeof a?Ext.getCmp(a):a,a||(b=Ext.window.Toast,this.anchor=b.bodyAnchor||(b.bodyAnchor={el:Ext.getBody()}))},beforeShow:function(){var a=this;a.stickOnClick&&a.body.on("click",function(){a.cancelAutoClose()}),a.autoClose&&(a.closeTask||(a.closeTask=new Ext.util.DelayedTask(a.doAutoClose,a))),a.el.setX(-1e4),a.el.setOpacity(1)},afterShow:function(){var c,b,e,f,a=this,d=a.el;a.callParent(arguments),(b=(e=(c=a.getToasts()).length)&&c[e-1])?(d.alignTo(b.el,a.siblingAlignment,[0,0]),a.xPos=a.getXposAlignedToSibling(b),a.yPos=a.getYposAlignedToSibling(b)):(d.alignTo(a.anchor.el,a.anchorAlign,[a.paddingX*a.paddingFactorX,a.paddingY*a.paddingFactorY],!1),a.xPos=a.getXposAlignedToAnchor(),a.yPos=a.getYposAlignedToAnchor()),Ext.Array.include(c,a),a.animate?(f=d.getXY(),d.animate({from:{x:f[0],y:f[1]},to:{x:a.xPos,y:a.yPos,opacity:1},easing:a.slideInAnimation,duration:a.slideInDuration,dynamic:!0,callback:a.afterPositioned,scope:a})):(a.setLocalXY(a.xPos,a.yPos),a.afterPositioned())},afterPositioned:function(){this.autoClose&&this.closeTask.delay(this.autoCloseDelay)},onDocumentMousedown:function(a){this.isVisible()&&!this.owns(a.getTarget())&&this.hide()},slideBack:function(){var a=this,f=a.anchor,e=f&&f.el,d=a.el,b=a.getToasts(),c=Ext.Array.indexOf(b,a);!a.isHiding&&d&&d.dom&&e&&e.isVisible()&&(c?(a.xPos=a.getXposAlignedToSibling(b[c-1]),a.yPos=a.getYposAlignedToSibling(b[c-1])):(a.xPos=a.getXposAlignedToAnchor(),a.yPos=a.getYposAlignedToAnchor()),a.stopAnimation(),a.animate&&d.animate({to:{x:a.xPos,y:a.yPos},easing:a.slideBackAnimation,duration:a.slideBackDuration,dynamic:!0}))},update:function(){var a=this;a.isVisible()&&(a.isHiding=!0,a.hide()),a.callParent(arguments),a.show()},cancelAutoClose:function(){var a=this.closeTask;a&&a.cancel()},doAutoClose:function(){var a=this;a.stickWhileHover&&a.mouseIsOver?a.closeOnMouseOut=!0:a.close()},onMouseEnter:function(){this.mouseIsOver=!0},onMouseLeave:function(){var a=this;a.mouseIsOver=!1,a.closeOnMouseOut&&(a.closeOnMouseOut=!1,a.close())},removeFromAnchor:function(){var b,a,c=this;if(c.anchor&&(b=c.getToasts(),-1!==(a=Ext.Array.indexOf(b,c))))for(Ext.Array.erase(b,a,1);a<b.length;a++)b[a].slideBack()},getFocusEl:Ext.emptyFn,hide:function(){var a=this,b=a.el;return a.cancelAutoClose(),a.isHiding?a.isFading||(a.callParent(arguments),a.removeFromAnchor(),a.isHiding=!1):(a.isHiding=!0,a.isFading=!0,a.cancelAutoClose(),b&&(a.animate?b.fadeOut({opacity:0,easing:"easeIn",duration:a.hideDuration,listeners:{afteranimate:function(){a.isFading=!1,a.hide(a.animateTarget,a.doClose,a)}}}):(a.isFading=!1,a.hide(a.animateTarget,a.doClose,a)))),a}},function(a){Ext.toast=function(b,g,e,f){var d,c=b;return Ext.isString(b)&&(c={title:g,html:b,iconCls:f},e&&(c.align=e)),(d=new a(c)).show(),d}}),Ext.define("Siesta.Project.Browser.UI.AboutWindow",{extend:Ext.Window,id:"aboutwindow",bodyPadding:20,modal:!0,width:500,height:380,closeAction:"destroy",bodyStyle:"background: #fff",autoScroll:!0,initComponent:function(){this.title=Siesta.Resource("Siesta.Project.Browser.UI.AboutWindow","titleText").replace("{VERSION}",Siesta.meta.VERSION||"1.0.0"),this.html=Siesta.Resource("Siesta.Project.Browser.UI.AboutWindow","bodyText"),this.buttons={padding:"10 13",style:"background: transparent",items:[{hidden:Siesta.Project.Browser.isStandardPackage(),text:Siesta.Resource("Siesta.Project.Browser.UI.AboutWindow","upgradeText"),handler:function(){window.open("https://bryntum.com/store/siesta")}},{text:Siesta.Resource("Siesta.Project.Browser.UI.AboutWindow","closeText"),handler:function(){this.up("window").close()}}]},this.callParent(arguments)}}),Ext.define("Siesta.Project.Browser.UI.CanFillAssertionsStore",{processNewResult:function(c,f,a,d){var e={id:a.id,result:a,loaded:!0,leaf:!(a instanceof Siesta.Result.SubTest),expanded:a instanceof Siesta.Result.SubTest&&"it"!=a.test.specType},b=c.getNodeById(a.id);b?b.triggerUIUpdate():(Ext.suspendLayouts(),b=(c.getNodeById(d.id)||c.getRootNode()).appendChild(e),Ext.resumeLayouts()),(a.isPassed&&!a.isPassed()||a.isWarning)&&b.ensureVisible(),b.updateFolderStatus()},processEveryTestEnd:function(b,c){var a=b.getNodeById(c.getResults().id);a&&a.updateFolderStatus()}}),Ext.define("Sch.data.mixin.FilterableTreeStore",{isFilteredFlag:!1,isHiddenFlag:!1,lastTreeFilter:null,lastTreeHiding:null,allowExpandCollapseWhileFiltered:!0,reApplyFilterOnDataChange:!0,suspendIncrementalFilterRefresh:0,filterGeneration:0,currentFilterGeneration:null,dataChangeListeners:null,monitoringDataChange:!1,filterer:null,onClassMixedIn:function(a){a.override(Sch.data.mixin.FilterableTreeStore.prototype.inheritables()||{})},initTreeFiltering:function(){this.filterer=new Siesta.Util.TreeStoreFilterer({isLeaf:function(a){return a.data.leaf},idProp:"internalId",childNodesProp:"childNodes",parentNodeProp:"parentNode"}),this.treeFilter=new Ext.util.Filter({filterFn:this.isNodeFilteredIn,scope:this}),this.dataChangeListeners={nodeappend:this.onNeedToUpdateFilter,nodeinsert:this.onNeedToUpdateFilter,scope:this}},startDataChangeMonitoring:function(){this.monitoringDataChange||(this.monitoringDataChange=!0,this.on(this.dataChangeListeners))},stopDataChangeMonitoring:function(){this.monitoringDataChange&&(this.monitoringDataChange=!1,this.un(this.dataChangeListeners))},onNeedToUpdateFilter:function(){this.reApplyFilterOnDataChange&&!this.suspendIncrementalFilterRefresh&&this.reApplyFilter()},clearTreeFilter:function(){this.isTreeFiltered()&&(this.currentFilterGeneration=null,this.isFilteredFlag=!1,this.lastTreeFilter=null,this.isTreeFiltered(!0)||this.stopDataChangeMonitoring(),this.refreshNodeStoreContent(),this.fireEvent("filter-clear",this))},reApplyFilter:function(){this.isHiddenFlag&&this.hideNodesBy.apply(this,this.lastTreeHiding.concat(this.isFilteredFlag)),this.isFilteredFlag&&this.filterTreeBy(this.lastTreeFilter)},refreshNodeStoreContent:function(){var a=this;a.getFilters().indexOf(a.treeFilter)<0?a.addFilter(a.treeFilter):this.getFilters().fireEvent("endupdate",this.getFilters())},getIndexInTotalDataset:function(a){var b=this.getRootNode(),e=-1,d=this.rootVisible;if(!d&&a==b)return-1;var g=this.isTreeFiltered(),f=this.currentFilterGeneration,c=function(h){if((g&&h.__filterGen!=f||h.hidden)&&h==a)return!1;if(!d&&h==b||e++,h==a)return!1;if(!h.data.leaf&&h.isExpanded())for(var j=h.childNodes,k=j.length,i=0;i<k;i++)if(!1===c(j[i]))return!1};return c(b),e},isTreeFiltered:function(a){return this.isFilteredFlag||a&&this.isHiddenFlag},markFilteredNodes:function(d){var e=this,c=this.currentFilterGeneration,a=this.getRootNode(),b=this.filterer.collectNodes(a,Ext.apply({rootVisible:this.rootVisible},d));a.cascadeBy(function(a){b[a.internalId]&&(a.__filterGen=c,e.allowExpandCollapseWhileFiltered&&!a.data.leaf&&a.expand())})},filterTreeBy:function(a,c){this.currentFilterGeneration=this.filterGeneration++,1==arguments.length&&Ext.isObject(a)?(c=a.scope,a.filter):a={filter:a,scope:c},this.fireEvent("nodestore-datachange-start",this),a=a||{},this.markFilteredNodes(a),this.startDataChangeMonitoring(),this.isFilteredFlag=!0,this.lastTreeFilter=a,this.refreshNodeStoreContent(),this.fireEvent("nodestore-datachange-end",this),this.fireEvent("filter-set",this)},isNodeFilteredIn:function(a){var c=this.isTreeFiltered(),b=this.currentFilterGeneration;return this.loading||!Boolean(c&&a.__filterGen!=b||a.hidden)},hasNativeFilters:function(){var a=this.getFilters(),b=a.getCount();return b&&1<b||a.indexOf(this.treeFilter)<0},hideNodesBy:function(c,b,d){var a=this;if(a.isFiltered()&&a.hasNativeFilters())throw new Error("Can't hide nodes of the filtered tree store");b=b||a,a.getRootNode().cascadeBy(function(d){d.hidden=Boolean(c.call(b,d,a))}),a.startDataChangeMonitoring(),a.isHiddenFlag=!0,a.lastTreeHiding=[c,b],d||a.refreshNodeStoreContent()},showAllNodes:function(a){this.getRootNode().cascadeBy(function(a){a.hidden=!1}),this.isHiddenFlag=!1,this.lastTreeHiding=null,this.isTreeFiltered(!0)||this.stopDataChangeMonitoring(),a||this.refreshNodeStoreContent()},inheritables:function(){return{onNodeExpand:function(a,c,b){if(!this.isTreeFiltered(!0)||a!=this.getRoot())return this.callParent(arguments);this.callParent(arguments),this.reApplyFilter()},onNodeCollapse:function(g,b,h,i,j){var a=this,c=a.data,e=c.contains,f=a.isTreeFiltered(),d=a.currentFilterGeneration;c.contains=function(){for(var h,c,j,k=a.indexOf(g)+1,l=!1,i=0;i<b.length;i++)if(!(b[i].hidden||f&&b[i].__filterGen!=d)&&e.call(this,b[i])){for(h=g;h.parentNode;){for(c=h;(c=c.nextSibling)&&(c.hidden||f&&c.__filterGen!=d););if(c){l=!0,j=a.indexOf(c);break}h=h.parentNode}l||(j=a.getCount()),a.removeAt(k,j-k);break}return!1},this.callParent(arguments),c.contains=e},handleNodeExpand:function(h,d,i){for(var a=[],g=this.isTreeFiltered(),f=this.currentFilterGeneration,c=0;c<d.length;c++){var b=d[c];g&&b.__filterGen!=f||b.hidden||(a[a.length]=b)}return this.callParent([h,a,i])},onNodeInsert:function(f,a,m){var e,c,l,i,d,k,j,h,g,b=this,n=a.raw||a.data;if(b.filterFn&&(h=b.filterFn(a),a.set("visible",h),h&&f.set("visible",b.filterFn(f))),b.registerNode(a,!0),b.beginUpdate(),b.isVisible(a)){if(0!==m&&a.previousSibling){for(c=a.previousSibling;c&&!c.get("visible");c=c.previousSibling);if(c){for(;c.isExpanded()&&c.lastChild;)c=c.lastChild;e=c}else e=f}else e=f;b.insert(b.indexOf(e)+1,a),!a.isLeaf()&&a.isExpanded()&&(a.isLoaded()?b.onNodeExpand(a,a.childNodes):b.fillCount||(a.set("expanded",!1),a.expand()))}else b.needsSync=b.needsSync||a.phantom||a.dirty;a.isLeaf()||a.isLoaded()||b.lazyFill||(l=b.getProxy().getReader(),(j=(k=(d=(i=a.getProxy())?i.getReader():null)&&d.initialConfig.rootProperty?d:l).getRoot(n))&&(g=a.childType,b.fillNode(a,k.extractData(j,g?{model:g}:void 0)))),b.endUpdate()},isFiltered:function(){return this.callParent(arguments)||this.isTreeFiltered()}}}}),Ext.define("Siesta.Project.Browser.Model.Assertion",{extend:Ext.data.Model,idProperty:"id",proxy:{type:"memory"},fields:["id",{name:"folderStatus",defaultValue:"yellow"},{name:"result"}],getResult:function(){return this.data.result},isAssertion:function(){return this.data.result instanceof Siesta.Result.Assertion},isDiagnostic:function(){return this.data.result instanceof Siesta.Result.Diagnostic},isSummary:function(){return this.data.result instanceof Siesta.Result.Summary},ensureVisible:function(){for(var a=this.parentNode;a&&!a.isRoot();)a.expand(),a=a.parentNode},isWaitingAssertion:function(){var a=this.data.result;return this.isAssertion()&&a.isWaiting&&!a.completed},updateFolderStatus:function(){this.isLeaf()||this.set("folderStatus",this.computeFolderStatus());var a=this.parentNode;a&&!a.isRoot()&&a.updateFolderStatus()},triggerUIUpdate:function(){this.callJoined("afterEdit",[])},computeFolderStatus:function(){if(!this.isLeaf()&&this.getResult().isWorking())return"working";if(!this.childNodes.length)return"yellow";var c=!1,b=!1,a=!0;return Joose.A.each(this.childNodes,function(d){var f=d.getResult();if(d.isLeaf()){if(d.isWaitingAssertion()&&(c=!0),d.isAssertion()&&!f.isPassed())return!(b=!(a=!1))}else{var e=d.computeFolderStatus();if("red"==e)return!(b=!(a=!1));if(f.isWorking()||"working"==e)return!(c=!0);"yellow"==e&&(a=!1)}}),c?"working":b?"red":a?"green":"yellow"}}),Ext.define("Siesta.Project.Browser.Model.AssertionTreeStore",{extend:Ext.data.TreeStore,model:"Siesta.Project.Browser.Model.Assertion",mixins:[Sch.data.mixin.FilterableTreeStore],constructor:function(){this.callParent(arguments),this.initTreeFiltering()},removeAll:function(){this.setRootNode({id:"__ROOT__",expanded:!0,loaded:!0})},add:function(a){this.getRootNode().appendChild(a)}}),Ext.define("Sch.mixin.FilterableTreeView",{filterableTreeStore:null,treeStoreFilteringListeners:null,initTreeFiltering:function(){this.treeStoreFilteringListeners={"nodestore-datachange-start":this.onFilterChangeStart,"nodestore-datachange-end":this.onFilterChangeEnd,"filter-clear":this.onFilterCleared,"filter-set":this.onFilterSet,forcedrefresh:this.onForcedRefresh,scope:this};var a=function(){var a=this.up("tablepanel").store;this.bindFilterableTreeStore(a)};this.rendered?a.call(this):this.on("beforerender",a,this,{single:!0})},bindFilterableTreeStore:function(a){this.filterableTreeStore&&this.mun(this.filterableTreeStore,this.treeStoreFilteringListeners),(this.filterableTreeStore=a)&&this.mon(a,this.treeStoreFilteringListeners)},onForcedRefresh:function(){this.focusRow=function(){},this.refresh(),delete this.focusRow},onFilterChangeStart:function(){Ext.suspendLayouts()},onFilterChangeEnd:function(){Ext.resumeLayouts(!0)},onFilterCleared:function(){},onFilterSet:function(){}}),Ext.define("Siesta.Project.Browser.UI.FilterableTreeView",{extend:Ext.tree.View,alias:"widget.filterabletreeview",mixins:[Sch.mixin.FilterableTreeView],constructor:function(){this.callParent(arguments),this.initTreeFiltering()},bindStore:function(a,c,b){a instanceof Ext.data.TreeStore?(this.bindFilterableTreeStore(a),this.callParent([a.nodeStore||a,c,b])):this.callParent(arguments)}}),Ext.define("Siesta.Project.Browser.UI.AssertionTreeColumn",{extend:Ext.tree.Column,alias:"widget.assertiontreecolumn",imgWithOffsetText:'<img src="{1}" class="{0}" style="left:{2}px" />',tdCls:"tr-tree-column",resultTpl:null,dataIndex:"folderStatus",menuDisabled:!0,sortable:!1,width:500,descriptionTpl:'<span class="assertion-text">{text}</span>',initComponent:function(){this.descriptionTpl=this.descriptionTpl instanceof Ext.XTemplate?this.descriptionTpl:new Ext.XTemplate(this.descriptionTpl),Ext.apply(this,{scope:this}),this.callParent(arguments)},renderer:function(i,f,c,g,e,h){var d="",a=c.data.result,b=a.annotation;return a instanceof Siesta.Result.Summary?c.data.result.description.join("<br>"):(d=this.descriptionTpl.apply({text:Ext.String.htmlEncode(a.isWarning?"WARN: "+a.description:a.description)}),b&&(d+='<pre title="'+b.replace(/"/g,"'")+'" style="margin-left:'+16*c.data.depth+'px" class="tr-assert-row-annotation">'+Ext.String.htmlEncode(b).replace("[code]","<code>").replace("[/code]","</code>")),d)},treeRenderer:function(d,c,a){var b=a.getResult();return b instanceof Siesta.Result.Assertion?b.isWaitFor?a.data.iconCls=b.completed?"fa-clock-o":"fa-spinner fa-spin":b.isException?a.data.iconCls="fa-flag":a.data.iconCls=b.passed?"fa-check":"fa-bug":b instanceof Siesta.Result.SubTest&&("working"===a.get("folderStatus")?a.data.iconCls="fa-spinner fa-spin":a.data.iconCls=""),this.callParent(arguments)}}),Ext.define("Siesta.Project.Browser.UI.AssertionGrid",{alias:"widget.assertiongrid",extend:Ext.tree.Panel,mixins:[Siesta.Project.Browser.UI.CanFillAssertionsStore],cls:"siesta-assertion-grid",enableColumnHide:!1,enableColumnMove:!1,enableColumnResize:!1,sortableColumns:!1,useArrows:!0,border:!1,minWidth:100,trackMouseOver:!1,autoScrollToBottom:!0,hideHeaders:!0,rowLines:!1,rootVisible:!1,collapseDirection:"left",viewType:"filterabletreeview",lines:!1,disableSelection:!0,bufferedRenderer:!1,isStandalone:!1,test:null,testListeners:null,initComponent:function(){this.testListeners=[],this.store||(this.store=new Siesta.Project.Browser.Model.AssertionTreeStore({proxy:"memory",root:{id:"__ROOT__",expanded:!0,loaded:!0}})),Ext.apply(this,{columns:[this.assertionColumn=new Siesta.Project.Browser.UI.AssertionTreeColumn],viewConfig:{enableTextSelection:!0,stripeRows:!1,markDirty:!1,animate:!1,trackOver:!1,store:new Ext.data.Store({fields:[],data:[]}),deferInitialRefresh:!1,getRowClass:this.getRowClass},listeners:{itemexpand:this.adaptColumnSize,scope:this}}),this.callParent(arguments),this.getView().on("itemadd",this.onMyItemAdd,this)},onMyItemAdd:function(a){!this.test.isFinished()&&this.autoScrollToBottom&&this.ensureVisible(a[0])},getRowClass:function(c,e,d,f){var a=c.getResult(),b="";switch(a.meta.name){case"Siesta.Result.Diagnostic":return"tr-diagnostic-row "+(a.isWarning?"tr-warning-row":"");case"Siesta.Result.Summary":return"tr-summary-row "+(a.isFailed?" tr-summary-failure":"");case"Siesta.Result.SubTest":return b="tr-subtest-row tr-subtest-row-"+c.get("folderStatus"),"describe"==a.test.specType&&(b+=" tr-subtest-row-describe"),"it"==a.test.specType&&(b+=" tr-subtest-row-it"),b;case"Siesta.Result.Assertion":return b+="tr-assertion-row ",a.isWaitFor?b+="tr-waiting-row "+(a.completed?a.passed?"tr-waiting-row-passed":"tr-assertion-row-failed tr-waiting-row-failed":""):a.isException?b+=a.isTodo?"tr-exception-todo-row":"tr-exception-row":a.isTodo?b+=a.passed?"tr-todo-row-passed":"tr-todo-row-failed":b+=a.passed?"tr-assertion-row-passed":"tr-assertion-row-failed",b;default:throw"Unknown result class"}},showTest:function(a,b){this.test&&(Joose.A.each(this.testListeners,function(a){a.remove()}),this.testListeners=[]),this.test=a,this.testListeners=[].concat(this.isStandalone?[a.on("testupdate",this.onTestUpdate,this),a.on("testendbubbling",this.onEveryTestEnd,this),a.on("assertiondiscard",this.onAssertionDiscarded,this)]:[a.on("testfinalize",this.adaptColumnSize,this)]),Ext.suspendLayouts(),b?this.store!==b&&this.reconfigure(b):0<this.getStore().getRoot().childNodes.length&&this.store.removeAll(),Ext.resumeLayouts()},onTestUpdate:function(d,c,b,a){this.processNewResult(this.store,c,b,a)},adaptColumnSize:function(){this.getHeaderContainer();var a=this.getView().getMaxContentWidth(this.assertionColumn);this.assertionColumn.setWidth(Math.max(a,this.getWidth()))},onResize:function(){this.callParent(arguments),this.adaptColumnSize()},onEveryTestEnd:function(b,a){this.processEveryTestEnd(this.store,a)},onAssertionDiscarded:function(b,c,a){this.store.getNodeById(a.id).remove()},bindStore:function(a,b,c){this.callParent(arguments),(this.store=a)&&a.nodeStore&&(this.getView().dataSource=a.nodeStore,this.getView().bindStore(a,b,c))},destroy:function(){Joose.A.each(this.testListeners,function(a){a.remove()}),this.testListeners=[],this.test=null,this.callParent(arguments)},setInitializing:function(a){a?this.getView().addCls("siesta-test-initializing"):this.getView().removeCls("siesta-test-initializing")}}),Ext.define("Siesta.Project.Browser.UI.CanCopyToClipboard",{copyToClipboard:function(c){var a=this.getCopyToClipboardTextarea();a.value=c,a.focus(),a.select();try{var b=document.execCommand("copy")}catch(d){}return b},getCopyToClipboardTextarea:function(){var a=document.getElementById("fa-copy-to-clipboard");return a||((a=document.createElement("textarea")).id="fa-copy-to-clipboard",a.style.position="absolute",a.style.left="-10000px",a.style.top="-10000px",document.body.appendChild(a)),a}}),Ext.define("Siesta.Project.Browser.UI.ComponentInspector",{extend:Ext.util.Observable,inspectedComponent:null,inspectedComponentXType:null,boxIndicatorEl:null,active:!1,window:null,trackMouse:!0,showSelectorText:!0,bufferTime:30,injectIntoTestFrame:!1,getIndicatorEl:function(){return this.boxIndicatorEl},getExt:function(){return this.window.Ext},start:function(a,e){if(!(a=a||this.window))throw"Must provide a window context for the inspector";this.window=a;var c=this.getExt(),f=!this.injectIntoTestFrame&&e||a.document.body,b="box-sizing: border-box;-moz-box-sizing: border-box;-ms-box-sizing: border-box;-webkit-box-sizing: border-box;";this.boxIndicatorEl=this.boxIndicatorEl||Ext.fly(f).createChild({cls:"target-inspector-box",style:"position : absolute;left:0;top:0;pointer-events : none;z-index : 100001; border : 2px solid red;transition-property : transform,border-color;transition-duration : 0.3s;",children:[{tag:"div",style:"border:1px solid;border-color:inherit;width : 13px; height : 13px;position : absolute;margin-top : -8px;margin-left : -8px;border-radius:19px;transition-property : transform;transition-duration : 0.3s;"+b,cls:"target-inspector-coordinate",html:'<div style="border-left: 1px solid;border-color:inherit;position: absolute;top: -3px;left: 5px;height: 6px;'+b+'"></div><div style="border-left: 1px solid;border-color:inherit;position: absolute;bottom: -3px;left: 5px;height: 6px;'+b+'"></div><div style="border-top: 1px solid;border-color:inherit;position: absolute;top: 5px;left: -3px;width: 6px;'+b+'"></div><div style="border-top: 1px solid;border-color:inherit;position: absolute;top: 5px;right: -3px;width: 6px;'+b+'"></div>'}].concat(this.showSelectorText?{tag:"a",cls:"target-inspector-label",target:"_blank"}:[])}),this.trackMouse&&c&&c.getBody&&(this.toggleMouseMoveListener(!0),c.getBody().on("click",this.onInspectionClick,{me:this})),this.fireEvent("start",this),this.active=!0},stop:function(b){if(this.active){this.active=!1;var a=this.getExt();Ext.destroy(this.boxIndicatorEl),this.boxIndicatorEl=null,b||this.fireEvent("stop",this),a&&a.getBody&&(this.toggleMouseMoveListener(!1),a.getBody().un("click",this.onInspectionClick,{me:this})),this.inspectedComponent=this.inspectedComponentXType=null}},toggleMouseMoveListener:function(f){var b=this.getExt();if(b){var d=b.getBody().select("iframe"),e=f?"on":"un";b.getBody()[e]("mousemove",this.onMouseMove,{me:this},{buffer:this.bufferTime});for(var c=0;c<d.getCount();c++){var a=d.item(c).dom.contentWindow.Ext;a&&a.getBody&&a.getBody()[e]("mousemove",this.onMouseMove,{me:this},{buffer:this.bufferTime})}}},onInspectionClick:function(c,b){if(this.boxIndicatorEl){var a=this.me;a.toggleMouseMoveListener(!1),a.inspectedComponent&&a.findComponentByTarget(b)===a.inspectedComponent?a.fireEvent("targetselected",a,a.inspectedComponent,a.inspectedComponentXType):a.stop()}},onMouseMove:function(e,d){var a=this.me;if(a.boxIndicatorEl){var b=a.findComponentByTarget(d);if(b){if(b===a.inspectedComponent)return;var c=a.resolveComponentXtype(b);a.inspectedComponent=b,a.inspectedComponentXType=c,a.highlightTarget(b.el.dom),a.updateHighlightContent(b,c),a.fireEvent("targethover",a,a.inspectedComponent,a.inspectedComponentXType)}}},resolveComponentXtype:function(a){var b=a.getXType&&a.getXType()||a.xtype;if(!b)for(var d=0;d<10&&!b;d++)b=a.superclass.xtype;return b},updateHighlightContent:function(c,j){var a,b={tag:"a",cls:"target-inspector-label",href:"#"};if("string"==typeof c)a=c;else if(Ext.ClassManager){var e=Ext.ComponentQuery.query("recorderpanel")[0],f=c.el.dom.ownerDocument.defaultView,k=f&&f.Ext&&f.Ext.ComponentQuery;if(e&&e.isVisible()){var d;k&&e.recorder.extractor.findComponentQueryFor&&(d=(d=e.recorder.extractor.findComponentQueryFor(c))&&d.query||j),a=">>"+(d||j)}else{var h=this.findExtAncestorClassName(c);if(h){var g,l=Siesta.Resource("Siesta.Project.Browser.UI.DomContainer","docsUrlText");g=Ext.versions.touch?"touch":"extjs",b.target="_blank",b.href=Ext.String.format(l,g,h),b.title=Siesta.Resource("Siesta.Project.Browser.UI.DomContainer","viewDocsText")+h}a=j}}if(a){b.html=a;var i=this.boxIndicatorEl.down(".target-inspector-label",!0);i.href=b.href,i.title=b.title,i.innerHTML=a}},highlightTarget:function(a,h,c){var b=this.boxIndicatorEl.dom.style;if(this.active||this.start(),a){var i=this.getOffsets(a),f=Ext.fly(a).getX()-2+i[0],g=Ext.fly(a).getY()-2+i[1],k=(Ext.fly(a).getWidth()||parseInt(a.style.width.substring(0,a.style.width.length-2),10))+2,j=(Ext.fly(a).getHeight()||parseInt(a.style.height.substring(0,a.style.height.length-2),10))+2;this.injectIntoTestFrame&&(f+=this.window.document.body.scrollLeft,g+=this.window.document.body.scrollTop);var d=bowser.opera?"translate("+f+"px,"+g+"px)":"translate3d("+f+"px,"+g+"px, 0)";b.setProperty("transform",d),b.width=k+"px",b.height=j+"px",b["border-color"]="red",this.showSelectorText&&h&&this.updateHighlightContent(h)}else b["border-color"]="#ccc";var e=this.boxIndicatorEl.down(".target-inspector-coordinate",!0);c?(d=bowser.opera?"translate("+c[0]+"px,"+c[1]+"px)":"translate3d("+c[0]+"px, "+c[1]+"px, 0)",e.style.setProperty("display","block"),e.style.setProperty("transform",d)):e.style.setProperty("display","none")},findComponentByTarget:function(a){var b,c=this.getExt(),e=this.window.document;a.ownerDocument!==e&&(c=(a.ownerDocument.parentWindow||a.ownerDocument.defaultView).frameElement.contentWindow.Ext);for(;!b&&a&&"BODY"!==a.nodeName;)b=c.getCmp(a.id),a=a.parentNode;return b},getOffsets:function(a){var d=this.window.document,b=[0,0];if(a.ownerDocument!==d){var c=(a.ownerDocument.parentWindow||a.ownerDocument.defaultView).frameElement;(b=Ext.fly(c).getXY())[0]-=a.ownerDocument.body.scrollLeft,b[1]-=a.ownerDocument.body.scrollTop}return b},findExtAncestorClassName:function(a){for(;a;){var b=Ext.ClassManager.getName(a);if(b.match(/^Ext./))return b;a=a.superclass}return""}}),Ext.define("Siesta.Project.Browser.UI.TreeFilterField",{extend:Ext.form.field.Text,alias:"widget.treefilter",filterGroups:!1,cls:"filterfield",store:null,filterField:"text",hasAndCheck:null,andChecker:null,andCheckerScope:null,triggerLeafCls:"fa-file-o",triggerGroupCls:"fa-folder-o",tipText:null,constructor:function(b){var a=this;Ext.apply(b,{triggers:{clear:{cls:"fa-close",handler:function(){a.store.clearTreeFilter(),a.reset()}},leafOrGroup:{cls:a.triggerLeafCls,handler:function(){a.setFilterGroups(!a.getFilterGroups())}}},listeners:{change:{fn:this.onFilterChange,buffer:400,scope:this},specialkey:this.onFilterSpecialKey,scope:this}}),this.callParent(arguments)},afterRender:function(){this.callParent(arguments),this.tipText&&this.inputEl.set({title:this.tipText}),this.filterGroups&&(this.triggerEl.item(1).addCls(this.triggerGroupCls),this.triggerEl.item(1).removeCls(this.triggerLeafCls))},onFilterSpecialKey:function(b,a,c){a.keyCode===a.ESC&&(this.store.clearTreeFilter(),b.reset())},setFilterGroups:function(b){if(b!=this.filterGroups){if(this.filterGroups=b,this.rendered){var a=this.triggerEl.item(1);b?(a.addCls(this.triggerGroupCls),a.removeCls(this.triggerLeafCls)):(a.removeCls(this.triggerGroupCls),a.addCls(this.triggerLeafCls))}this.refreshFilter(),this.fireEvent("filter-group-change",this)}},getFilterGroups:function(){return this.filterGroups},refreshFilter:function(){this.onFilterChange(this,this.getValue())},onFilterChange:function(k,b){if(b||this.hasAndCheck&&this.hasAndCheck()){var a,d,c=this.store.filterer,i=this.filterField,e=this.filterGroups;if(e)a=c.splitTermByPipe(b);else{var g=c.parseFilterValue(b);a=g.testFilterRegexps,d=g.groupFilterRegexps}function j(a){return a.get(i)}var f=this.andChecker,h=this.andCheckerScope||this;this.store.filterTreeBy({filter:function(b){return!(f&&!f.call(h,b))&&c.checkCommonFilter(b,j,a,d)},fullMatchingParents:e})}else this.store.clearTreeFilter()}}),Ext.define("Siesta.Project.Browser.Model.FilterableTreeStore",{extend:Ext.data.TreeStore,mixins:[Sch.data.mixin.FilterableTreeStore],constructor:function(){this.callParent(arguments),this.initTreeFiltering()},forEach:function(b,a){this.getRootNode().cascadeBy(b,a)}}),Ext.define("Siesta.Project.Browser.UI.DomContainer",{extend:Ext.Panel,alias:"widget.domcontainer",cls:"siesta-domcontainer",header:!1,collapsible:!0,animCollapse:!1,padding:10,test:null,testListeners:null,scaleToFit:!0,scaleToFitMode:"full",maintainViewportSize:!0,canManageDOM:!0,suspendAfterLayoutAlign:!1,inspector:null,inspectorConfig:null,enableConsole:!0,trackMouse:!0,initComponent:function(){this.testListeners=[],this.title=Siesta.Resource("Siesta.Project.Browser.UI.DomContainer","title"),this.enableConsole&&Ext.apply(this,{dockedItems:this.consoleCt={xtype:"component",dock:"bottom",hidden:!0,height:20,cls:"domcontainer-console",renderTpl:'<div><input type="text" /></div>'}}),this.callParent(),this.on({afterlayout:this.onAfterLayout,expand:this.onExpand,collapse:this.onCollapse,scope:this}),this.inspector=new Siesta.Project.Browser.UI.ComponentInspector(this.inspectorConfig),this.trackMouse&&this.inspector.on({start:this.onInspectionStart,stop:this.onInspectionStop,scope:this}),this.relayEvents(this.inspector,["start","stop"],"inspection"),this.enableBubble("statechange")},afterRender:function(){if(this.callParent(arguments),this.enableConsole){var a=this.consoleInput=this.el.down(".domcontainer-console input");this.inspector.on("targethover",function(c,b){a.dom.value='Ext.getCmp("'+b.id+'").'}),this.inspector.on("targetselected",function(c,b){a.focus(!0)}),a.on({keyup:function(c,f){var b=a.dom.value;if(c.getKey()===c.ENTER&&b){var e=this.getIFrame();try{var d=e.contentWindow.eval(b);window.console&&console.log(d)}catch(g){window.console&&console.log(g.message)}}},scope:this})}},setScaleToFit:function(b,a){(this.scaleToFit!=b||a&&this.scaleToFitMode!=a)&&(this.scaleToFit=b,a&&(this.scaleToFitMode=a),b?this.doScaleToFit():this.undoScaleToFit(),this.fireEvent("statechange"))},doScaleToFit:function(p){var d=this.getIFrame();if(d){var c=this.scaleToFitMode,j=Ext.getScrollbarSize(),a=d.parentNode,g=a.parentNode,n=g.parentNode,i=this.body.dom.offsetWidth-("width"===c?j.width:0),h=this.body.dom.offsetHeight-("height"===c?j.height:0),f=d.offsetWidth,e=d.offsetHeight,m=i/f,l=h/e,b="width"===c?m:"height"===c?l:Math.min(m,l),q=i-b*f,o=h-b*e,r=Math.max(0,q/2),s=Math.max(0,o/2);a.style.transition=p?"none":"transform 0.3s",a.style.transform="translate("+r+"px, "+s+"px) scale("+b+") ",g.style.width=b*f+"px",g.style.height=b*e+"px",this.removeScaleToFitClasses(n),Ext.fly(n).addCls("scaleToFit"+Joose.S.uppercaseFirst(c)),this.scrollTo(0,0);var k=this.test.scopeProvider.minViewportSize;a.style.width=k.width+"px",a.style.height=k.height+"px"}},removeScaleToFitClasses:function(a){Ext.fly(a).removeCls("scaleToFitFull"),Ext.fly(a).removeCls("scaleToFitWidth"),Ext.fly(a).removeCls("scaleToFitHeight")},undoScaleToFit:function(){var b=this.getIFrame();if(b){var a=b.parentNode,c=a.parentNode;this.removeScaleToFitClasses(c.parentNode),a.style.transform="",a.style.width=b.style.width,a.style.height=b.style.height,a.style.left="",a.style.top="",c.style.width=b.style.width,c.style.height=b.style.height}},setCanManageDOM:function(a){(this.canManageDOM=a)&&!this.hidden&&this.alignIFrame()},getIFrameWrapper:function(b){var a=this.test;return a&&(this.canManageDOM||b)&&a.scopeProvider&&a.scopeProvider.wrapper||null},getIFrame:function(b){var a=this.test;return a&&(this.canManageDOM||b)&&a.scopeProvider&&a.scopeProvider.iframe||null},onAfterLayout:function(){this.suspendAfterLayoutAlign||this.alignIFrame()},alignIFrame:function(b,d){var a=this.getIFrameWrapper(b);if(this.isFrameVisible()&&a){Ext.fly(a).removeCls("tr-iframe-hidden"),Ext.fly(a).removeCls("tr-iframe-forced");var e=this.body.getBox();Ext.fly(a).setBox(e),this.maintainViewportSize||Ext.fly(this.getIFrame(b)).setSize(this.body.getSize()),this.scaleToFit?this.doScaleToFit(d):this.undoScaleToFit();var c=this.test;c&&c.fireEvent("testframeshow")}},onCollapse:function(){this.hideIFrame()},onExpand:function(){this.alignIFrame()},hideIFrame:function(){var a=this.getIFrameWrapper();a&&Ext.fly(a).setStyle({left:"-10000px",top:"-10000px"});var b=this.test;b&&b.fireEvent("testframehide")},isFrameVisible:function(){return!(this.hidden||this.collapsed)},showTest:function(a){this.stopInspection(),this.test&&(Joose.A.each(this.testListeners,function(a){a.remove()}),this.testListeners=[],this.hideIFrame()),this.test=a,this.testListeners=[a.on("testfinalize",this.onTestFinalize,this)],this.setCanManageDOM(!a.hasForcedIframe()),this.alignIFrame(!1,!0)},onTestFinalize:function(b,a){this.setCanManageDOM(!0),this.isFrameVisible()&&(a.forceDOMVisible=!1,a.isDOMForced=!1)},destroy:function(){Ext.destroy(this.boxIndicator),this.boxIndicator=null,this.hideIFrame(),Joose.A.each(this.testListeners,function(a){a.remove()}),this.test=null,this.callParent(arguments)},inspectedComponent:null,inspectedComponentXType:null,boxIndicator:null,inspecting:!1,toggleInspectionMode:function(a){this.test&&(a?this.startInspection():this.stopInspection())},startInspection:function(b){if(this.test&&this.test.global){var a=Ext.get(this.getIFrameWrapper());this.inspector.start(this.test.global,a.down(".tr-iframe-wrapper-inner",!0)),this.trackMouse&&(a.un("mouseout",this.onMouseLeave,this),a.on("mouseout",this.onMouseLeave,this)),this.enableConsole&&!1!==b&&(this.consoleCt instanceof Ext.Component||(this.consoleCt=Ext.widget(this.consoleCt)),this.consoleCt.show()),this.addCls("inspection-mode")}},stopInspection:function(){this.inspector.stop(),this.removeCls("inspection-mode"),this.enableConsole&&this.consoleCt.rendered&&this.consoleCt.hide()},onMouseLeave:function(a,b){this.el.contains(a.relatedTarget)||Ext.fly(this.getIFrameWrapper()).contains(a.relatedTarget)||this.stopInspection()},onInspectionStart:function(){var a=Ext.get(this.getIFrameWrapper());a&&a.on("mouseout",this.onMouseLeave,this)},onInspectionStop:function(){var a=Ext.get(this.getIFrameWrapper());a&&a.un("mouseout",this.onMouseLeave,this)},clearHighlight:function(){this.stopInspection()},highlightTarget:function(a,d,b){var c=a instanceof Array;this.inspector.active||this.startInspection(),c?(b=a,a=null):(a=this.test.normalizeElement(a,!0,!0,!1))&&(a.offsetWidth||a.offsetHeight?b=b&&this.test.normalizeOffset(b,$(a)):a=b=null),this.inspector.highlightTarget(a,d,b)}}),Ext.XTemplate.override({strict:!0}),Ext.data.Connection.override({parseStatus:function(b){var a=this.callOverridden(arguments);return 0===b&&(a.success=!0),a}}),function(){Ext.util.XTemplateCompiler.prototype.useEval=!1,Ext.Template.prototype.useEval=!1,window.$=window.jQuery;var a=Ext.data.schema.Schema.get("default").getProxy();a.apply=a.compile(a.template)}(),Ext.define("Siesta.Project.Browser.UI.SourcePanel",{extend:Ext.Panel,alias:"widget.sourcepanel",__filled__:!1,autoScroll:!0,cls:"test-source-ct",layout:"absolute",border:!1,bodyBorder:!1,setSource:function(d,b){var a=this.el;if(this.__filled__||(this.__filled__=!0,this.update(Ext.String.format('<pre class="brush: javascript;">{0}</pre>',d)),SyntaxHighlighter.defaults["quick-code"]=!1,SyntaxHighlighter.highlight(a)),a.select(".highlighted").removeCls("highlighted"),Ext.Array.each(b,function(b){a.select(".line.number"+b).addCls("highlighted")}),0<b.length){var c=a.down(".highlighted");c&&c.scrollIntoView(a)}},clear:function(){this.__filled__=!1}}),Ext.define("Siesta.Project.Browser.UI.ResultPanel",{extend:Ext.Panel,alias:"widget.resultpanel",slots:!0,test:null,testListeners:null,maintainViewportSize:!0,scaleToFit:!0,scaleToFitMode:"full",viewDOM:!1,border:!1,canManageDOM:!0,project:null,isStandalone:!1,showToolbar:!0,title:"Result panel",header:!1,minWidth:100,layout:"border",sourceButton:null,filterButton:null,inspectionButton:null,recorderPanel:null,recorderConfig:null,recorderPanelClass:"Siesta.Recorder.UI.RecorderPanel",domContainerRegion:"east",isReadOnlyReport:!1,initComponent:function(){var b=Siesta.Resource("Siesta.Project.Browser.UI.ResultPanel"),a=this.domContainerRegion||"east";Ext.apply(this,{cls:"tr-container",tbar:{cls:"resultpanel-toolbar",defaults:{tooltipType:"title",scope:this},items:this.getTopToolbarItems(b)},items:[{region:"center",slot:"cardContainer",xtype:"container",layout:{type:"card",deferredRender:!0},activeItem:0,minWidth:100,items:[{xtype:"assertiongrid",slot:"grid",isStandalone:this.isStandalone,listeners:{itemdblclick:this.onAssertionDoubleClick,scope:this}},{xtype:"sourcepanel",slot:"source",listeners:{render:function(a){a.getEl().appendChild({cls:"si-sourcepanel-close fa-close",style:"right:"+(Ext.getScrollbarSize().width+5)+"px"}).on("click",this.hideSource,this)},scope:this}}].concat(Ext.ClassManager.getByAlias("widget.coveragereport")?{xtype:"coveragereport",slot:"coverageReport",project:this.project}:[])},{xtype:"domcontainer",region:a,collapsible:!0,hidden:this.isReadOnlyReport,split:{size:7},bodyStyle:"text-align : center",slot:"domContainer",stateful:!0,id:this.id+"-domContainer",width:"east"==a||"west"==a?"50%":null,height:"south"==a||"north"==a?"50%":null,cls:"siesta-domcontainer",collapsed:!this.viewDOM,scaleToFit:this.scaleToFit,scaleToFitMode:this.scaleToFitMode}]}),this.callParent(),this.slots.domContainer&&this.slots.domContainer.on({expand:this.onDomContainerExpand,collapse:this.onDomContainerCollapse,inspectionstart:function(){this.inspectionButton.toggle(!0)},inspectionstop:function(){this.inspectionButton.toggle(!1)},scope:this})},onLoadReportFileChange:function(c){var b=this,d=c.fileInputEl.dom.files[0],a=new FileReader;a.onload=function(){try{var c=JSON.parse(a.result)}catch(e){Ext.Msg.alert("Error","Error parsing JSON")}c&&b.fireEvent("newjsonreport",b,c)},a.onerror=function(){Ext.Msg.alert("Error","Error loading file")},a.readAsText(d)},getTopToolbarItems:function(c){var e=this;if(!this.showToolbar)return null;var b=this.stateConfig,d=this.isReadOnlyReport,a=[];return d||a.push({text:c.get("rerunText"),cls:"rerun-button",glyph:61515,scale:"medium",handler:this.onRunTestClick}),a.push({xtype:"label",cls:"resultpanel-testtitle",itemId:"resultpanel-testtitle",margin:"0 0 0 10",height:48,text:" ",flex:1}),d&&window.FileReader&&a.push({xtype:"fileuploadfield",buttonOnly:!0,buttonText:"Load data file",listeners:{change:this.onLoadReportFileChange,scope:this}}),d||a.push({xtype:"label",cls:"speedlabel",margin:"0 20",text:"Mouse speed"},{xtype:"segmentedbutton",cls:"speed-button",scale:"small",margin:"0 30 0 0",items:[{text:"Slow",tooltip:"Slow and accurate mouse simulation",pressed:!b.speedRun&&!b.turboMode,option:"mouseSimSlow"},{text:"Fast",tooltip:"Fast, but still accurate mouse simulation",pressed:b.speedRun&&!b.turboMode,option:"mouseSimFast"},{text:"Turbo",pressed:b.turboMode,tooltip:"Turbo mode! Super fast with reduced mouse precision (read docs before using)",option:"mouseSimFastest"}],listeners:{toggle:function(b,a){e.fireEvent("optionchange",a,a.option,!0)}}},this.viewDomButton=new Ext.Button({tooltip:"Force native events simulation",cls:"testaction-button",action:"force-native",scale:"medium",glyph:62042,enableToggle:!0,scope:this,pressed:"native"==this.project.simulation,handler:function(a){this.project.simulation=a.pressed?"native":"synthetic"}}),this.viewDomButton=new Ext.Button({tooltip:c.get("toggleDomVisibleText"),cls:"testaction-button",action:"view-dom",scale:"medium",glyph:62060,enableToggle:!0,scope:this,pressed:this.viewDOM,handler:function(a){this.setViewDOM(a.pressed)}}),this.scaleToFitButton=new Ext.SplitButton({tooltip:"Scale to fit",cls:"testaction-button",action:"scale-to-fit",scale:"medium",glyph:61541,enableToggle:!0,pressed:Boolean(this.scaleToFit),menu:{items:[{glyph:61618,text:"Fit full",itemId:"full"},{glyph:61566,text:"Fit width",itemId:"width"},{glyph:61565,text:"Fit height",itemId:"height"}],listeners:{click:function(b,a){this.slots.domContainer.setScaleToFit(!0,a.itemId),this.scaleToFitButton.setPressed(!0)},scope:this}},scope:this,handler:function(a){this.slots.domContainer.setScaleToFit(a.pressed)}}),this.sourceButton=new Ext.Button({tooltip:c.get("viewSourceText"),action:"view-source",cls:"testaction-button",glyph:61686,scale:"medium",tooltipType:"title",disabled:!0,enableToggle:!0,scope:this,handler:function(a){a.pressed?this.showSource():this.hideSource()}}),this.filterButton=new Ext.Button({tooltip:c.get("showFailedOnlyText"),action:"show-failed-only",cls:"testaction-button",scale:"medium",glyph:61832,tooltipType:"title",scope:this,enableToggle:!0,handler:this.onAssertionFilterClick}),this.inspectionButton=new Ext.Button({glyph:61442,cls:"testaction-button cmp-inspector",action:"toggle-cmp-inspector",scale:"medium",tooltip:"Target highlighter",tooltipType:"title",handler:this.toggleComponentInspectionMode,scope:this,enableToggle:!0}),this.recorderButton=new Ext.Button({glyph:61501,action:"toggle-recorder",cls:"testaction-button",scale:"medium",disabled:!Siesta.Recorder||Ext.isIE9m,tooltip:c.get("eventRecorderText"),handler:this.onRecorderClick,margin:"0 30 0 0",scope:this,enableToggle:!0}),{xtype:"versionupdatebutton"},{xtype:"component",id:"siesta-logo"}),a},ensureLayout:function(){var a=this.getWidth(),e=this.slots.cardContainer,c=this.slots.domContainer,d=c.getWidth(),b=e.minWidth+20;a-d<b&&c.setWidth(Math.max(0,a-b))},showSource:function(f){var d=this.test;if(this.test){var a=[],c=this.slots,e=c.cardContainer,b=c.source;e.layout.setActiveItem(b),0===arguments.length?Ext.each(d.getFailedAssertions(),function(b){null!=b.sourceLine&&a.push(b.sourceLine)}):a=[f],b.setSource(d.getSource(),a)}},hideSource:function(){var a=this.slots,b=a.cardContainer;b.layout.getActiveItem()===a.source&&(this.sourceButton.setPressed(!1),b.layout.setActiveItem(a.grid))},setViewDOM:function(b){var a=this.slots.domContainer;b?a.expand(!1):a.collapse(null,!1)},onDomContainerCollapse:function(){this.viewDOM=!1,this.viewDomButton.toggle(!1),this.fireEvent("viewdomchange",this,!1)},onDomContainerExpand:function(){this.viewDOM=!0,this.viewDomButton.toggle(!0),this.fireEvent("viewdomchange",this,!0)},onRunTestClick:function(){this.fireEvent("runbuttonclick",this)},showTest:function(b,c){var a=this.slots.recorderPanel;this.slots.source.clear(),this.filterButton&&this.filterButton.toggle(!1),this.hideSource(),this.sourceButton&&this.sourceButton.enable();var d=b.url;Ext.suspendLayouts(),this.slots.grid.showTest(b,c),this.slots.domContainer.showTest(b,c),a&&(a.test&&b.url===a.test.url||(a.stop(),a.attachTo(b))),this.setTestTitle("/"===d?a.getRecordingName():d),Ext.resumeLayouts(),this.test=b},setTestTitle:function(a){this.testTitle.setText(a)},onAssertionFilterClick:function(c){var b=this.slots.grid,a=b.store;a.filterTreeBy&&(c.pressed?(b.addCls("assertiongrid-filtered"),a.filterTreeBy(function(b){var a=b.getResult();return!1===a.passed&&!a.isTodo})):(b.removeCls("assertiongrid-filtered"),a.clearTreeFilter()))},alignIFrame:function(){this.slots.domContainer.alignIFrame()},hideIFrame:function(){this.slots.domContainer.hideIFrame()},setInitializing:function(a){this.slots.grid.setInitializing(a)},onAssertionDoubleClick:function(c,b){var a=b.getResult();a instanceof Siesta.Result.Assertion&&!a.isPassed(!0)&&this.showSource(a.sourceLine)},toggleComponentInspectionMode:function(a){this.slots.domContainer.toggleInspectionMode(a.pressed)},onRecorderClick:function(){var a=this.slots.cardContainer;this.recorderPanel||(this.recorderPanel=Ext.create(this.recorderPanelClass,{slot:"recorderPanel",project:this.project,domContainer:this.slots.domContainer,recorderConfig:this.recorderConfig,closeButton:{text:Siesta.Resource("Siesta.Project.Browser.UI.ResultPanel","closeText"),cls:"recorder-tool",handler:function(){a.layout.setActiveItem(0)}},listeners:{startrecord:function(b,a){this.fireEvent("startrecord",b,a),this.showTest(a)},show:function(){this.recorderButton.toggle(!0)},play:function(b,a){this.showTest(a)},hide:function(){this.recorderButton.toggle(!1)},scope:this}}),this.slots.cardContainer.add(this.recorderPanel),this.relayEvents(this.recorderPanel,["startrecord","play"],"recorder"),this.test&&this.slots.recorderPanel.attachTo(this.test)),a.layout.getActiveItem()===this.recorderPanel?a.layout.setActiveItem(this.slots.grid):a.layout.setActiveItem(this.recorderPanel)},afterRender:function(){this.callParent(arguments);var a=this.child("bordersplitter");this.testTitle=this.down("#resultpanel-testtitle"),a&&(a.tracker.tolerance=0)}}),Ext.define("Siesta.Project.Browser.UI.TestGridController",{extend:Ext.app.ViewController,alias:"controller.testgrid",control:{"#tool-menu [option]":{click:"onMenuItemClick"},"[actionName^=run]":{click:"onRunBtnClicked"},"#aboutSiesta":{click:"onAboutSiesta"}},onRunBtnClicked:function(a){this.getView().fireEvent("buttonclick",this,a,a.actionName)},onMenuItemClick:function(a){this.getView().fireEvent("optionchange",this,a.option,a.checked)},onAboutSiesta:function(){(new Siesta.Project.Browser.UI.AboutWindow).show()}}),Ext.define("Siesta.Project.Browser.UI.TestNameColumn",{extend:Ext.tree.Column,xtype:"testnamecolumn",dataIndex:"title",sortable:!1,menuDisabled:!0,flex:1,tdCls:"test-name-cell",scope:this,project:null,filterGroups:null,store:null,initComponent:function(){var a=Siesta.Resource("Siesta.Project.Browser.UI.TestGrid");Ext.apply(this,{items:[{xtype:"treefilter",emptyText:a.get("filterTestsText"),margins:"0 0 0 10",itemId:"trigger",filterGroups:this.filterGroups,filterField:"title",store:this.store,tipText:a.get("filterFieldTooltip")}]}),this.callParent(arguments)},treeRenderer:function(g,e,b){e.tdCls="test-name-cell-"+(b.data.leaf?"leaf":"parent");var a="";if(b.isLeaf()){var c=b.get("test");a=c?b.get("isFailed")?"siesta-test-failed fa-flag":b.get("isRunning")&&!c.isFinished()?"fa-flash siesta-running-not-finished":c.isFinished()?c.isPassed()?"fa-check siesta-test-passed":"fa-bug siesta-test-failed":"fa-hourglass-o siesta-test-starting":b.get("isMissing")?"fa-close siesta-test-file-missing":b.get("isStarting")?"fa-hourglass-o siesta-test-starting":this.getTestIcon(b)+" siesta-test-file"}else{var d=b.get("folderStatus");a="working"==d?" fa-hourglass-o siesta-folder-running":"green"==d?" fa-check siesta-folder-pass":"red"==d?" fa-bug siesta-folder-fail":""}if(b.data.iconCls=a,b.isLeaf()){var f=b.get("tooltip")||g;e.tdAttr='title="'+f+'"'}return this.callParent(arguments)},getTestIcon:function(a){return this.project.getDescriptorConfig(a.get("descriptor"),"pageUrl")?"fa-desktop":"fa-file-o"},renderer:function(b,c,a){return b+(a.get("descriptor").referenceUrl?'<span style="padding-left: 3px; vertical-align: super; font-size: xx-small" class="fa fa-external-link" aria-hidden="true"></span>':"")}}),Ext.define("Siesta.Project.Browser.UI.TestGrid",{extend:Ext.tree.Panel,alias:"widget.testgrid",controller:"testgrid",stateful:!0,rootVisible:!1,header:!1,rowLines:!1,useArrows:!0,border:!1,cls:"tr-testgrid",iconCls:"tr-status-neutral-small",width:340,collapsible:!0,expanded:!0,viewType:"filterabletreeview",enableColumnMove:!1,project:null,lines:!1,filter:null,filterGroups:!1,resultSummary:null,stateConfig:null,showSizeControls:!1,isReadOnlyReport:!1,menuHideTimeout:!1,viewConfig:{enableTextSelection:!0,toggleOnDblClick:!1,markDirty:!1,trackOver:!1,getRowClass:function(a){if(a.get("descriptor").isSystemDescriptor)return"siesta-system-descriptor"},shouldUpdateCell:function(c,b,a){return("passCount"!==b.dataIndex||!a||Ext.Array.contains(a,"passCount")||Ext.Array.contains(a,"todoPassCount"))&&("failCount"!==b.dataIndex||!a||Ext.Array.contains(a,"failCount")||Ext.Array.contains(a,"todoFailCount"))?Ext.tree.View.prototype.shouldUpdateCell.apply(this,arguments):0}},initComponent:function(){var a=this,b=Siesta.Resource("Siesta.Project.Browser.UI.TestGrid"),c=this.stateConfig;Ext.apply(this,{title:b.get("title"),columns:{createFocusableContainerKeyNav:Ext.emptyFn,items:[{xtype:"testnamecolumn",store:this.store,project:this.project},{header:b.get("passText"),width:35,sortable:!1,tdCls:"x-unselectable result-cell",menuDisabled:!0,dataIndex:"passCount",align:"center",renderer:this.passedColumnRenderer,scope:this},{header:b.get("failText"),width:35,sortable:!1,tdCls:"x-unselectable result-cell",menuDisabled:!0,dataIndex:"failCount",align:"center",renderer:this.failedColumnRenderer,scope:this},{header:"Time",width:50,sortable:!1,dataIndex:"time",align:"center",renderer:function(b,c,a){return a.isLeaf()?b+"ms":""},hidden:!(this.project.showTestDurationColumn||this.isReadOnlyReport)}]},bbar:{xtype:"toolbar",cls:"main-bbar siesta-toolbar",border:!1,height:45,defaults:{scale:"large",width:30,tooltipType:"title"},items:this.getBottomBarItems(c,b)},dockedItems:this.showSizeControls?[{xtype:"toolbar",cls:"size-toolbar",border:!0,dock:"bottom",items:[{xtype:"slider",itemId:"framesizeSlider",width:130,value:3,increment:1,minValue:0,maxValue:this.viewportSizes.length-1,listeners:{change:this.onDimensionOrOrientationChange,scope:this}},{xtype:"label",cls:"size-label",itemId:"sizeLabel",width:65},{boxLabel:b.get("landscape"),itemId:"orientationCheckbox",xtype:"checkbox",checked:!0,listeners:{change:this.onDimensionOrOrientationChange,scope:this}}]}]:[]}),this.callParent(arguments),this.getView().on("beforerefresh",function(){var b=a.down("#trigger");return a.filterGroups&&b.setFilterGroups(a.filterGroups),a.filter&&b.setValue(a.filter),!a.filter},null,{single:!0}),this.on("viewready",this.onMyViewReady,this,{delay:10})},getBottomBarItems:function(b,a){var c=[];return this.isReadOnlyReport||c.push({glyph:61515,cls:"run-checked",text:'<span class="subicon fa-check"></span>',tooltip:a.get("runCheckedText"),actionName:"run-checked"},{glyph:61518,cls:"run-all",tooltip:a.get("runAllText"),actionName:"run-all"},{glyph:61515,cls:"run-failed",text:'<span class="subicon fa-bug"></span>',tooltip:a.get("runFailedText"),actionName:"run-failed"},{glyph:61459,tooltip:a.get("optionsText"),cls:"options",action:"options",listeners:{mouseover:this.onOptionsButtonMouseOver,mouseout:this.onOptionsButtonMouseOut,scope:this},menu:{itemId:"tool-menu",listeners:{mouseenter:{fn:this.onOptionsMenuMouseEnter,delay:100},mouseover:{fn:this.onOptionsMenuMouseEnter,delay:100},mouseleave:this.onOptionsMenuMouseLeave,scope:this},items:[{text:a.get("transparentExText"),option:"transparentEx",checked:b.transparentEx,tooltip:a.get("transparentExTooltip")},{text:a.get("breakOnFailText"),option:"breakOnFail",checked:b.breakOnFail,tooltip:a.get("breakOnFailTooltip")},{text:a.get("debuggerOnFailText"),option:"debuggerOnFail",checked:b.debuggerOnFail,tooltip:a.get("debuggerOnFailTooltip")},{itemId:"observerModeMenuItem",text:a.get("observerModeText"),option:"observerMode",checked:b.observerMode,tooltip:a.get("observerModeTooltip")},{text:a.get("autoLaunchText"),option:"autoRun",checked:b.autoRun,tooltip:a.get("autoLaunchTooltip")},{xtype:"menuseparator"},{text:a.get("aboutText"),itemId:"aboutSiesta"},{text:a.get("documentationText"),href:a.get("siestaDocsUrl"),hrefTarget:"_blank"}]}}),c.push("->",{xtype:"component",cls:"summary-bar",border:!1,width:55,itemId:"result-summary",data:{pass:0,fail:0},tpl:'<div><span class="total-pass">{pass}</span><span class="icon fa-check"></span></div><div><span class="total-fail">{fail}</span><span class="icon fa-bug"></span></div>'}),c},onHistoryChange:function(b){if(b){var a=this.store.getNodeById(b);a&&this.selectTestFile(a)}},onDimensionOrOrientationChange:function(c,d){var a=this.viewportSizes[this.framesizeSlider.getValue()],b=this.orientationCheckbox.getValue();this.sizeLabel.setText(a.join("x")),this.fireEvent("framesizechange",c,a[0],a[1],b)},getFilterValue:function(){return this.down("#trigger").getValue()},getFilterGroups:function(){return this.down("#trigger").getFilterGroups()},passedColumnRenderer:function(b,c,a){return a.isLeaf()?(0<a.data.todoPassCount&&(b+=' <span title="'+a.data.todoPassCount+" "+Siesta.Resource("Siesta.Project.Browser.UI.TestGrid","todoPassedText")+'" class="tr-test-todo tr-test-todo-pass">+ '+a.data.todoPassCount+"</span>"),b):""},failedColumnRenderer:function(b,c,a){return a.isLeaf()?(0<a.data.todoFailCount&&(b+=' <span title="'+a.data.todoFailCount+" "+Siesta.Resource("Siesta.Project.Browser.UI.TestGrid","todoFailedText")+'" class="tr-test-todo tr-test-todo-fail">+ '+a.data.todoFailCount+"</span>"),b):""},onOptionsButtonMouseOver:function(a){clearTimeout(this.menuHideTimeout),a.showMenu(),a.menu.hide=function(){},setTimeout(function(){delete a.menu.hide},1e3)},onOptionsButtonMouseOut:function(a){var b=this;this.menuHideTimeout||(this.menuHideTimeout=setTimeout(function(){delete a.menu.hide,a.hideMenu(),b.menuHideTimeout=null},500))},onOptionsMenuMouseEnter:function(a){clearTimeout(this.menuHideTimeout),this.menuHideTimeout=null},onOptionsMenuMouseLeave:function(){var b=this,a=this.down("#tool-menu");this.menuHideTimeout||(this.menuHideTimeout=setTimeout(function(){delete a.hide,a.hide(),b.menuHideTimeout=null},500))},afterRender:function(){if(this.callParent(arguments),this.summaryPassEl=this.el.down(".total-pass"),this.summaryFailEl=this.el.down(".total-fail"),this.showSizeControls){this.orientationCheckbox=this.down("#orientationCheckbox"),this.sizeLabel=this.down("#sizeLabel"),this.framesizeSlider=this.down("#framesizeSlider");var a=this.viewportSizes[this.framesizeSlider.getValue()];this.sizeLabel.setText(a.join("x"))}},onMyViewReady:function(){Ext.History.on("change",this.onHistoryChange,this);var a=window.location.hash;a&&this.onHistoryChange(a.substring(1))},updateStatus:function(b,a){this.summaryPassEl.update(String(b)),this.summaryFailEl.update(String(a))},setFilterValue:function(a){this.down("treefilter").setValue(a)},selectTestFile:function(a){a&&(a.bubble(function(a){a.expand()}),this.store.getById(a.id)&&0<=this.store.indexOf(a)&&(!this.getCollapsed()&&0<this.getView().getNodes().length&&this.ensureVisible(a),this.getSelectionModel().select(a)))}}),Ext.define("Siesta.Project.Browser.UI.TestGridContextMenu",{extend:Ext.menu.Menu,xtype:"testgridcontextmenu",items:[{itemId:"uncheckOthers",text:Siesta.Resource("Siesta.Project.Browser.UI.Viewport").get("uncheckOthersText")},{itemId:"uncheckAll",text:Siesta.Resource("Siesta.Project.Browser.UI.Viewport").get("uncheckAllText")},{itemId:"checkAll",text:Siesta.Resource("Siesta.Project.Browser.UI.Viewport").get("checkAllText")},{itemId:"runThis",text:Siesta.Resource("Siesta.Project.Browser.UI.Viewport").get("runThisText")},{itemId:"viewSource",text:Siesta.Resource("Siesta.Project.Browser.UI.Viewport").get("viewSource")},{text:"Link to this test",menu:[{itemId:"linkSelect",text:"Select only"},{itemId:"linkFilterAutoLaunch",text:"Filter and auto launch"}]},{xtype:"menuseparator"},{itemId:"expandAll",text:Siesta.Resource("Siesta.Project.Browser.UI.Viewport").get("expandAll")},{itemId:"collapseAll",text:Siesta.Resource("Siesta.Project.Browser.UI.Viewport").get("collapseAll")},{xtype:"menuseparator"},{itemId:"filterToCurrentGroup",text:Siesta.Resource("Siesta.Project.Browser.UI.Viewport").get("filterToCurrentGroup")},{itemId:"filterToFailed",text:Siesta.Resource("Siesta.Project.Browser.UI.Viewport").get("filterToFailed")}]}),Ext.define("Siesta.Project.Browser.UI.VersionUpdateButton",{extend:Ext.Button,xtype:"versionupdatebutton",text:Siesta.Resource("Siesta.Project.Browser.UI.VersionUpdateButton","newUpdateText"),action:"upgrade-siesta",hidden:!0,latestVersion:null,scale:"medium",constructor:function(){this.callParent(arguments),this.scope=this,Siesta.meta.VERSION&&!window.location.href.match("^https")&&this.fetchVersionInfo()},fetchVersionInfo:function(){Ext.data.JsonP.request({url:"https://bryntum.com/siesta_version",params:{v:Siesta.meta.VERSION},scope:this,callback:this.onRequestCompleted})},onRequestCompleted:function(b,a){b&&a&&a.name&&new Ext.Version(a.name).isGreaterThan(Siesta.meta.VERSION||"1.0.0")&&(this.latestVersion=a.name,this.show())},handler:function(){var a=Siesta.Resource("Siesta.Project.Browser.UI.VersionUpdateButton"),b=new Ext.Window({cls:"changelog-window",title:a.get("updateWindowTitleText")+(Siesta.meta.VERSION||"1.0.0"),modal:!0,width:500,height:380,closeAction:"destroy",plain:!0,autoScroll:!0,buttons:{padding:"10 13",style:"background: transparent",items:[{cls:"light-button",href:"https://www.npmjs.com/package/siesta-lite",hrefTarget:"_blank",scale:"medium",text:a.get("downloadText")+this.latestVersion+a.get("liteText")},{cls:"light-button",href:"https://customerzone.bryntum.com",hrefTarget:"_blank",scale:"medium",text:a.get("downloadText")+this.latestVersion+a.get("standardText")},{text:a.get("cancelText"),scale:"medium",handler:function(){b.close()}}]}});b.show(),b.body.mask(a.get("loadingChangelogText")),Ext.Ajax.request({useDefaultXhrHeader:!1,url:"https://bryntum.com/changelogs/_siesta.php",callback:function(d,c,a){b.body.unmask(),c&&a&&a.responseText?b.update(a.responseText):b.update(Siesta.Resource("Siesta.Project.Browser.UI.VersionUpdateButton","changelogLoadFailedText"))}})}}),Ext.define("Siesta.Project.Browser.UI.ViewportController",{extend:Ext.app.ViewController,alias:"controller.viewport",mixins:[Siesta.Project.Browser.UI.CanCopyToClipboard],control:{testgrid:{selectionchange:"onTestGridSelectionChange",checkchange:"onTestGridCheckChange",itemcontextmenu:"onTestFileContextMenu",itemdblclick:"onTestFileDoubleClick",itemclick:"onTestFileClick",resize:"onTestGridResize",optionchange:"onTestGridOptionChange",buttonclick:"onTestGridToolbarClick",framesizechange:"onFrameSizeChange"},"testnamecolumn treefilter":{change:{fn:"onFilterChange",buffer:300}},"testgridcontextmenu #uncheckOthers":{click:"uncheckOthers"},"testgridcontextmenu #runThis":{click:"runThisFile"},"testgridcontextmenu #uncheckAll":{click:"uncheckAll"},"testgridcontextmenu #checkAll":{click:"checkAll"},"testgridcontextmenu #expandAll":{click:"expandAll"},"testgridcontextmenu #collapseAll":{click:"collapseAll"},"testgridcontextmenu #filterToCurrentGroup":{click:"filterToCurrentGroup"},"testgridcontextmenu #filterToFailed":{click:"filterToFailed"},"testgridcontextmenu #viewSource":{click:"viewSource"},"testgridcontextmenu #linkSelect":{click:"linkSelect"},"testgridcontextmenu #linkFilterAutoLaunch":{click:"linkFilterAutoLaunch"},resultpanel:{optionchange:"onResultPanelOptionChange",viewdomchange:"onDomPanelVisibilityChange",runbuttonclick:"runTest"}},disableRunButtonTimeout:null,disableRunButtonInterval:150,onFilterChange:function(){this.getView().saveState()},filterToFailed:function(){var b=this.getView(),a=[];b.forEachTestFile(function(b){var c=b.get("test");c&&c.isFailed()&&a.push(b.get("title"))}),a.length&&b.slots.filesTree.setFilterValue(a.join(" | "))},filterToCurrentGroup:function(){var a=this.getView(),b=a.currentFile.get("descriptor");b.parent&&a.slots.filesTree.setFilterValue(b.parent.group+">")},onTestGridSelectionChange:function(e,c){if(c.length){var d=this.getView(),a=c[0],b=a.get("test");b&&(T=b,d.slots.resultPanel.showTest(b,a.get("assertionsStore"))),a.isLeaf()&&Ext.History.add(a.data.url)}},onTestGridCheckChange:function(a,c){this.getView().setNodeChecked(a,c)},onTestFileContextMenu:function(e,c,f,d,b){var a=this.getView();a.isReadOnlyReport||(a.currentFile=c,a.contextMenu||(a.contextMenu=new Siesta.Project.Browser.UI.TestGridContextMenu),a.contextMenu.showAt(b.getXY()),b.preventDefault())},onTestFileDoubleClick:function(e,a){var b=this.getView();if(!b.isReadOnlyReport){var c=b.testsStore;if(c.isTreeFiltered()&&!a.isLeaf()){var d=[];a.cascadeBy(function(b){b!=a&&b.isLeaf()&&c.isNodeFilteredIn(b)&&d.push(b.get("descriptor"))}),b.project.launch(d)}else b.launchTest(a)}},onTestFileClick:function(f,c,g,h,d){var b=this.getView();if(!b.isReadOnlyReport){var a=b.project.getDescriptorConfig(c.get("descriptor"),"referenceUrl");if(a&&d.ctrlKey)window.open(a,"_blank")||Ext.toast("Popups are disabled in the browser","Can't open new tab")}},onTestGridResize:function(){this.getView().slots.resultPanel.ensureLayout()},onTestGridOptionChange:function(d,c,b){var a=this.getView();a.setOption(c,b),a.saveState()},onResultPanelOptionChange:function(f,b,e){var c=this.getView(),d=c.slots.resultPanel.test;if(c.setOption(b,e),c.saveState(),d){var a;switch(b){case"mouseSimSlow":a="slow";break;case"mouseSimFast":a="speedRun";break;case"mouseSimFastest":a="turboMode";break;default:throw new Error("Wrong option name: "+b)}d.simulator.setSpeed(a)}},onTestGridToolbarClick:function(d,c,b){var a=this.getView();switch(b){case"run-checked":a.runChecked();break;case"run-failed":a.runFailed();break;case"run-all":a.runAll();break;case"stop":a.stopSuite(c)}},onFrameSizeChange:function(f,b,a,d){var c=this.getView();if(!d){var e=b;b=a,a=e}$(".tr-iframe").width(b),$(".tr-iframe").height(a),c.project.viewportHeight=a,c.project.viewportWidth=b},uncheckOthers:function(){var a=this.getView(),b=a.currentFile;a.uncheckAllExcept(b),a.setNodeChecked(b,!0)},linkFilterAutoLaunch:function(){var b=this.getView().currentFile,e=/([^\/]*)$/.exec(b.get("descriptor").url),a=location.protocol+"//"+location.host+location.pathname+"?filter="+encodeURIComponent(e[1])+"&autolaunch=1";this.copyToClipboard(a)?Ext.toast("Url copied to clipboard","Success"):Ext.Msg.show({message:"Please select & copy this url manually:<br>"+a,title:"Copy to clipboard failed",modal:!1})},linkSelect:function(){var b=this.getView().currentFile,a=location.protocol+"//"+location.host+location.pathname+"#"+b.get("descriptor").url;this.copyToClipboard(a)?Ext.toast("Url copied to clipboard","Success"):Ext.Msg.show({message:"Please select & copy this url manually:<br>"+a,title:"Copy to clipboard failed",modal:!1})},runThisFile:function(){var a=this.getView();a.project.launch([a.currentFile.get("descriptor")])},uncheckAll:function(){this.getView().uncheckAllExcept()},checkAll:function(){var a=this.getView();a.testsStore.forEach(function(b){a.setNodeChecked(b,!0,!0)})},expandAll:function(){this.getView().slots.filesTree.expandAll()},collapseAll:function(){this.getView().slots.filesTree.collapseAll()},viewSource:function(){var a=this.getView().currentFile,c=a.get("test"),d=window.open("","siesta-source"),e=d.document.documentElement.getElementsByTagName("head")[0],b=d.document.body;e.innerHTML="<title>"+a.get("title")+"</title>",c?b.innerHTML="<pre>"+c.getSource()+"</pre>":$.ajax(a.get("url"),{success:function(a){b.innerHTML="<pre>"+a+"</pre>"}})},onDomPanelVisibilityChange:function(c,b){var a=this.getView();a.setOption("viewDOM",b),a.saveState()},runTest:function(){var a=this;null==a.disableRunButtonTimeout&&(a.disableRunButtonTimeout=setTimeout(function(){a.disableRunButtonTimeout=null},a.disableRunButtonInterval),a.getView().runTest())}}),Ext.define("Siesta.Project.Browser.Model.TestFile",{extend:Ext.data.Model,idProperty:"id",fields:["id","url","title","tooltip",{name:"passCount",type:"int",defaultValue:0},{name:"failCount",type:"int",defaultValue:0},{name:"todoPassCount",type:"int",defaultValue:0},{name:"todoFailCount",type:"int",defaultValue:0},{name:"time",type:"int",defaultValue:0},{name:"checked",defaultValue:!1},{name:"folderStatus",defaultValue:"yellow"},"isStarting",{name:"isRunning",type:"boolean",defaultValue:!1},{name:"isMissing",type:"boolean",defaultValue:!1},{name:"isFailed",type:"boolean",defaultValue:!1},"assertionsStore","test","descriptor"],computeFolderStatus:function(){if(!this.childNodes.length)return"yellow";var b=!1,c=!1,a=!0;return Joose.A.each(this.childNodes,function(e){if(e.isLeaf()){var d=e.get("test");if(d&&d.isFailed())return!(c=!(a=!1));!d&&e.get("isStarting")&&(b=!0),d&&!d.isFinished()&&(b=!0),d&&!d.isPassed()&&(a=!1),d||(a=!1)}else{var f=e.computeFolderStatus();if("red"==f)return!(c=!(a=!1));if("working"==f)return!(b=!0);"yellow"==f&&(a=!1)}}),b?"working":c?"red":a?"green":"yellow"},updateFolderStatus:function(){this.set("folderStatus",this.computeFolderStatus());var a=this.parentNode;a&&!a.isRoot()&&a.updateFolderStatus()}}),Ext.supports&&Ext.supports.TouchEvents&&!Ext.supports.Touch&&(Ext.supports.Touch=!1,Ext.supports.touchScroll=!1),Ext.define("Siesta.Project.Browser.UI.Viewport",{extend:Ext.container.Viewport,mixins:[Siesta.Project.Browser.UI.CanFillAssertionsStore],controller:"viewport",title:null,project:null,stateful:!1,layout:"border",selection:null,filter:null,filterGroups:!1,testsStore:null,contextMenu:null,enableVersionCheck:!0,collapsedNodes:null,showSizeControls:!1,expectedExtJSVersion:"6.0.1.250",viewportSizes:[[640,480],[800,600],[1024,768],[1920,1080],[2048,1536]],idGenSequence:1,isReadOnlyReport:!1,dataUrl:"report-data.json",autoLaunch:!1,initComponent:function(){var a;this.isReadOnlyReport?((a=new Siesta.Project.Browser).configure({stateful:!1}),this.project=a):a=this.project,Ext.getBody().addCls("siesta"),Ext.getBody().on("keydown",this.onBodyKeyDown,this),Ext.setGlyphFontFamily("FontAwesome"),Ext.state.Manager.setProvider(Ext.supports.LocalStorage?new Ext.state.LocalStorageProvider:new Ext.state.CookieProvider),this.selection={};var b=this.filter;a.stateful&&this.applyState(this.loadState()),b&&(this.filter=b,this.filterGroups=!1);var e=this.buildTreeData({id:"root",group:"test suite"+this.title,items:a.descriptors}).children,d=this.testsStore=new Siesta.Project.Browser.Model.FilterableTreeStore({model:"Siesta.Project.Browser.Model.TestFile",sortOnLoad:!1,root:{expanded:!0,children:e},proxy:"memory",listeners:{nodecollapse:this.saveState,nodeexpand:this.saveState,scope:this}});if(Ext.apply(this,{slots:!0,items:[{region:"west",xtype:"testgrid",store:d,stateful:a.stateful,slot:"filesTree",id:a.id.replace(/\W/g,"_")+"-testTree",showSizeControls:this.showSizeControls,viewportSizes:this.viewportSizes,stateConfig:this.getState(),project:this.project,isReadOnlyReport:this.isReadOnlyReport,animate:!Ext.isIE,split:{size:7},filter:this.filter,filterGroups:this.filterGroups,listeners:{viewready:this.onFilterApplied,scope:this}},{xtype:"resultpanel",region:"center",slot:"resultPanel",cls:"resultPanel-panel",viewDOM:this.getOption("viewDOM"),scaleToFit:this.getOption("scaleToFit"),scaleToFitMode:this.getOption("scaleToFitMode"),stateConfig:this.getState(),id:a.id.replace(/\W/g,"_")+"-resultpanel",project:a,recorderConfig:a.recorderConfig,isReadOnlyReport:this.isReadOnlyReport,maintainViewportSize:a.maintainViewportSize,domContainerRegion:a.domContainerRegion,listeners:{newjsonreport:this.onNewJsonReport,scope:this}}]}),this.callParent(),this.slots.filesTree.store.on({"filter-set":this.saveState,"filter-clear":this.saveState,scope:this}),this.on("statechange",this.saveState,this),a.on("testendbubbling",this.onEveryTestEnd,this),a.on("testsuitelaunch",this.onTestSuiteLaunch,this),a.on("assertiondiscard",this.onAssertionDiscarded,this),!window.location.href.match("^file:///")||this.isReadOnlyReport&&Ext.browser.is("Firefox"))this.isReadOnlyReport&&this.fetchJsonReport();else{var c=Siesta.Resource("Siesta.Project.Browser.UI.Viewport");Ext.Msg.alert(c.get("httpWarningTitle"),c.get("httpWarningDesc"))}},onNewJsonReport:function(b,a){this.loadJsonReport(a)},buildTreeData:function(a){var b={id:a.id,title:a.group||a.title||a.name,descriptor:a,nodeType:1,cloneNode:function(){return this}};b.tooltip=a.desc||b.title;var d=this,c=b.id,f=this.collapsedNodes||{};if(a.group){var e=[];Ext.each(a.items,function(a){e.push(d.buildTreeData(a))}),Ext.apply(b,{expanded:null==f[c]&&!1!==a.expanded,checked:d.selection.hasOwnProperty(c)||!1,folderStatus:"yellow",children:e,leaf:!1})}else Ext.apply(b,{url:a.url,leaf:!0,checked:d.selection.hasOwnProperty(c)||!1,passCount:0,failCount:0,time:0,assertionsStore:new Siesta.Project.Browser.Model.AssertionTreeStore({model:"Siesta.Project.Browser.Model.Assertion",proxy:"memory",root:{id:"__ROOT__",expanded:!0}})});return b},onBodyKeyDown:function(a){if(a.ctrlKey){var c=this.project;if(a.getKey()==Ext.event.Event[c.rerunHotKey]&&(this.runTest(),a.preventDefault()),a.getKey()==Ext.event.Event[c.observerModeHotKey]){var d=!c.observerMode,b=this.down("#observerModeMenuItem");b.setChecked(d),b.fireEvent("click",b),a.preventDefault()}}},buildTreeDataFromJSONSReportNode:function(a){var c={id:this.idGenSequence++,title:a.group||a.name||a.url.replace(/(?:.*\/)?([^/]+)$/,"$1"),descriptor:a,nodeType:1,cloneNode:function(){return this}},e=this;if(a.group){var d=[];Ext.each(a.items,function(a){d.push(e.buildTreeDataFromJSONSReportNode(a))}),Ext.apply(c,{expanded:!0,checked:null,leaf:!1,folderStatus:"yellow",children:d})}else{var b=new Siesta.Test.Browser({project:this.project,url:a.url,name:a.name,startDate:new Date(a.startDate)});Ext.apply(c,{url:a.url,leaf:!0,checked:null,time:a.endDate-a.startDate,test:b,assertionsStore:new Siesta.Project.Browser.Model.AssertionTreeStore({model:"Siesta.Project.Browser.Model.Assertion",proxy:"memory",root:{id:"__ROOT__",expanded:!0,children:this.buildAssertionDataFromJSONSReportNode(a.assertions,b)}})}),b.endDate=new Date(a.endDate),Ext.apply(c,{passCount:b.getPassCount(),failCount:b.getFailCount(),todoPassCount:b.getTodoPassCount(),todoFailCount:b.getTodoFailCount()})}return c},buildAssertionDataFromJSONSReportNode:function(e,a){var d=this,c=Joose.A.map(e,function(b){var c,e="Siesta.Result.SubTest"==b.type,g={id:d.idGenSequence++,leaf:!e,expanded:e&&("it"!=b.bddSpecType||!b.passed)};if(e){var f=new Siesta.Test.Browser({trait:Siesta.Test.Sub,name:b.name,isTodo:b.isTodo,startDate:new Date(b.startDate),url:a.url,parent:a,specType:b.bddSpecType});g.children=d.buildAssertionDataFromJSONSReportNode(b.assertions,f),f.endDate=new Date(b.endDate),c=f.getResults()}else{c=new(Joose.S.strToClass(b.type))(b)}return a.addResult(c),g.result=c,g});if(!a.parent){var b=new Siesta.Result.Summary({isFailed:a.isFailed(),description:a.getSummaryMessage()});a.addResult(b),c.push({id:this.idGenSequence++,result:b,loaded:!0,leaf:!0,expanded:!1})}return c},loadJsonReport:function(a){this.title=a.testSuiteName||"",this.testsStore.setRootNode(this.buildTreeDataFromJSONSReportNode({group:"TOP",items:a.testCases})),this.testsStore.getRootNode().cascadeBy(function(a){a.parentNode&&!a.isLeaf()&&a.updateFolderStatus()}),this.updateStatusIndicator()},fetchJsonReport:function(){var b=this,a=new Ext.LoadMask({target:this,msg:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","loadingText")});a.show(),Ext.Ajax.request({url:this.dataUrl,success:function(c){a.hide(),b.loadJsonReport(Ext.JSON.decode(c.responseText))},failure:function(){a.hide(),Ext.Msg.show({title:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","loadingErrorText"),msg:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","loadingErrorMessageText")+b.dataUrl,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}})},onFilterApplied:function(){if(this.autoLaunch)this.runAll();else if(this.getOption("autoRun")){var a=this.getChecked();this.project.launch(a.length&&a||this.project.descriptors)}},setNodeChecked:function(a,b,e,f){var d=this,c=a.getId();b?this.selection[c]=1:delete this.selection[c],a.set("checked",b),!b&&a.parentNode&&d.setNodeChecked(a.parentNode,!1,!0,!0),a.isLeaf()||e||Ext.each(a.childNodes,function(a){d.setNodeChecked(a,b,!1,!0)}),f||this.saveState()},forEachTestFile:function(d,a){a=a||this;var b=this.testsStore,c=b.getRootNode();c.cascadeBy(function(e){var f=b.isNodeFilteredIn(e);return e!=c&&f&&d.call(a,e),f})},getChecked:function(){var a=[];return this.forEachTestFile(function(b){b.get("checked")&&b.isLeaf()&&a.push(b.get("descriptor"))}),a},runChecked:function(){0<this.getChecked().length&&this.project.launch(this.getChecked())},runFailed:function(){var a=[];this.forEachTestFile(function(b){var c=b.get("test");c&&c.isFailed()&&a.push(b.get("descriptor"))}),0<a.length&&this.project.launch(a)},runAll:function(){var a=[];this.forEachTestFile(function(b){b.isLeaf()&&a.push(b.get("descriptor"))}),0<a.length&&this.project.launch(a)},stopSuite:function(a){a.disable(),this.project.stopCurrentLaunch(),setTimeout(function(){a.enable()},1e3)},onTestSuiteStop:function(a){if(this.testsStore.forEach(function(a){a.get("isStarting")&&a.set("isStarting",!1)}),a){var b=this.testsStore.getNodeById(a.url);this.slots.filesTree.getSelectionModel().select(b)}},onBeforeScopePreload:function(b,a){this.testsStore.getNodeById(a)},isTestRunningVisible:function(b){if(!(b.scopeProvider instanceof Scope.Provider.IFrame))return!1;if(this.project.testOfForcedIFrame)return this.project.testOfForcedIFrame.isFromTheSameGeneration(b);var a=this.slots.resultPanel;return!(!a.test||!a.test.isFromTheSameGeneration(b))&&a.isFrameVisible()},resetDescriptors:function(a){var b=this.testsStore;Joose.A.each(this.project.flattenDescriptors(a),function(c){var a=b.getNodeById(c.id);a.get("assertionsStore").removeAll(!0),a.reject(),a.set("checked",this.selection.hasOwnProperty(c.id)||!1)},this)},onTestSuiteStart:function(c){Ext.getBody().addCls("testsuite-running");var b=this.slots.filesTree.getSelectionModel(),a=b.getLastSelected(),d=this.testsStore;this.resetDescriptors(c),a&&b.select(d.getNodeById(a.getId()))},onTestSuiteLaunch:function(d,b){var c=this.testsStore,a={};Joose.A.each(this.project.flattenDescriptors(b),function(e){var f=c.getNodeById(e.id);f.set({isMissing:e.isMissing,isStarting:!0});var b=f.parentNode;if(b&&!a[b.getId()]){for(var d=b;d;d=d.parentNode)a[d.getId()]=!0;b.updateFolderStatus()}})},onTestSuiteEnd:function(a){Ext.getBody().removeCls("testsuite-running"),this.updateStatusIndicator(),Ext.isChrome?window.focus():(document.body.tabIndex=-1,document.body.focus())},onTestStart:function(a){var b=this.testsStore.getNodeById(a.url);if(this.isTestUpdateActual(a,b)){b.beginEdit(),b.set({test:a,isRunning:!0}),b.endEdit();var c=this.slots.filesTree.getSelectionModel().getLastSelected();if(c&&c.getId()==a.url){var d=this.slots.resultPanel;d.showTest(a,b.get("assertionsStore")),d.setInitializing(!1),T=a}}},isTestUpdateActual:function(a,b){return a.launchId==this.project.currentLaunchId},onTestUpdate:function(a,d,c){var b=this.testsStore.getNodeById(a.url);this.isTestUpdateActual(a,b)&&this.processNewResult(b.get("assertionsStore"),a,d,c)},onAssertionDiscarded:function(e,b,d){var a=this.testsStore.getNodeById(b.url);this.isTestUpdateActual(b,a)&&a.get("assertionsStore").getNodeById(d.id).remove()},onTestEnd:function(a){var b=this.testsStore.getNodeById(a.url);this.isTestUpdateActual(a,b)&&(b.beginEdit(),b.set({passCount:a.getPassCount(),failCount:a.getFailCount(),todoPassCount:a.getTodoPassCount(),todoFailCount:a.getTodoFailCount(),time:a.getDuration()+"ms"}),b.endEdit(),b.parentNode&&b.parentNode.updateFolderStatus()),this.updateStatusIndicator()},onEveryTestEnd:function(c,a){var b=this.testsStore.getNodeById(a.url);this.isTestUpdateActual(a,b)&&this.processEveryTestEnd(b.get("assertionsStore"),a)},onTestFail:function(b,c,d){var a=this.testsStore.getNodeById(b.url);this.isTestUpdateActual(b,a)&&!b.isTodo&&(a.set("isFailed",!0),a.parentNode&&a.parentNode.updateFolderStatus())},getOption:function(a,c){switch(a){case"selection":return this.selection;default:var b=this.project;return c?b.hasOwnProperty(a)?b[a]:void 0:b[a]}},setOption:function(c,a){var b=this.project;switch(c){case"selection":return this.selection=a||{};case"collapsedNodes":return this.collapsedNodes=a;case"filter":return this.filter=a;case"filterGroups":return this.filterGroups=a;case"observerMode":b.setObserverMode(a);break;case"mouseSimSlow":a&&(b.speedRun=!1,b.turboMode=!1);break;case"mouseSimFast":a&&(b.speedRun=!0,b.turboMode=!1);break;case"mouseSimFastest":a&&(b.speedRun=!0,b.turboMode=!0);break;default:return b[c]=a}},getState:function(c){var a=this.slots&&this.down("domcontainer"),b={scaleToFit:a?a.scaleToFit:this.scaleToFit,scaleToFitMode:a?a.scaleToFitMode:this.scaleToFitMode,selection:this.getCheckedNodes(),collapsedNodes:this.getCollapsedFolders(),filter:this.slots?this.slots.filesTree.getFilterValue():this.filter,filterGroups:this.slots?this.slots.filesTree.getFilterGroups():this.filterGroups},d=this;return Joose.A.each(["autoRun","speedRun","turboMode","viewDOM","transparentEx","breakOnFail","debuggerOnFail","observerMode"],function(e){var a=d.getOption(e,c);c&&void 0===a||(b[e]=a)}),b},getCheckedNodes:function(){var a={};return this.testsStore.forEach(function(b){b.get("checked")&&(a[b.getId()]=1)}),a},getCollapsedFolders:function(){var a={};return this.testsStore.forEach(function(b){b.isLeaf()||b.isExpanded()||(a[b.getId()]=1)}),a},applyState:function(a){var b=this;a&&Joose.O.each(a,function(a,c){b.setOption(c,a)})},getStateId:function(){return"test-run-"+this.title},loadState:function(){var b=this.getStateId(),a=Ext.state.Manager.get(b);if(a)return a.collapsedNodes||(a.collapsedNodes=Ext.state.Manager.get(b+"-collapsed")),a.selection||(a.selection=Ext.state.Manager.get(b+"-selection")),a},saveState:function(){var b=this.getStateId(),a=this.getState(!0);Ext.state.Manager.set(b+"-collapsed",a.collapsedNodes),Ext.state.Manager.set(b+"-selection",a.selection),delete a.collapsedNodes,delete a.selection,Ext.state.Manager.set(b,a)},uncheckAllExcept:function(a){var b=this;this.testsStore.forEach(function(c){c!=a&&b.setNodeChecked(c,!1,!0)})},launchTest:function(a){if(!this.isReadOnlyReport){var c=this.slots.resultPanel,d=!(a instanceof Ext.data.Model)||a.data.leaf,b=a instanceof Siesta.Test?this.project.getScriptDescriptor(a):a.get("descriptor");d&&(Ext.History.add(b.url),c.setInitializing(!0)),this.project.launch([b])}},updateStatusIndicator:function(){var b=0,a=0;this.testsStore.forEach(function(d){var c=d.get("test");c&&c.isFinished()&&(b+=c.getPassCount(),a+=c.getFailCount())}),this.slots.filesTree.updateStatus(b,a)},runTest:function(){if(!this.isReadOnlyReport){var a=this.slots.filesTree.getSelectionModel().getSelection()[0]||this.slots.resultPanel.test;a&&this.launchTest(a)}},afterRender:function(){this.callParent(arguments),Ext.versions.extjs.isLessThan(this.expectedExtJSVersion)&&window.console&&console.log("Wrong Ext JS version detected.","Siesta expects that you use Ext JS version >= "+this.expectedExtJSVersion+". You may experience errors when using another version"),this.project.isAutomated||setTimeout(Ext.Function.bind(this.deferredSetup,this),1e3)},deferredSetup:function(){Ext.QuickTips&&Ext.QuickTips.init(),this.enableVersionCheck&&Siesta.Project.Browser.UI.VersionUpdateButton&&new Siesta.Project.Browser.UI.VersionUpdateButton},onManualCloseOfForcedIframe:function(b){var a=this.down("domcontainer");a&&a.test==b&&a.alignIFrame(!0)}}),void 0===Ext||window.Ext||(window.Ext=Ext),Class("Siesta.Util.Throttler",{has:{lastActivationTime:null,func:{required:!0},scope:{required:!0},buffer:null,throttle:null,bufferTimeoutId:null,args:null},methods:{tick:function(){var now=+new Date;this.args=arguments,null!=this.throttle&&(this.lastActivationTime||(this.lastActivationTime=now),now-this.lastActivationTime>this.throttle&&this.activate());if(null!=this.buffer){var me=this;this.bufferTimeoutId&&clearTimeout(this.bufferTimeoutId),this.bufferTimeoutId=setTimeout(function(){me.activate()},this.buffer)}},activate:function(){this.lastActivationTime=+new Date,this.bufferTimeoutId&&clearTimeout(this.bufferTimeoutId),this.bufferTimeoutId=null;var args=this.args;this.args=null,this.func.apply(this.scope,args)},cancel:function(){this.bufferTimeoutId&&clearTimeout(this.bufferTimeoutId),this.bufferTimeoutId=null,this.args=null},flush:function(){null!=this.bufferTimeoutId&&this.activate()}}}),Role("Siesta.Util.Role.CanCalculatePageScroll",{methods:{getElForPageScroll:function(win){var doc=(win=win||this.global).document;return doc.scrollingElement||(bowser.webkit||bowser.blink||bowser.msedge?doc.body:doc.documentElement)},getPageScrollX:function(win){(win=win||this.global).document;if(null!=window.pageXOffset)return win.pageXOffset;var scrollEl=this.getElForPageScroll();return scrollEl?scrollEl.scrollLeft:0},getPageScrollY:function(win){(win=win||this.global).document;if(null!=window.pageYOffset)return win.pageYOffset;var scrollEl=this.getElForPageScroll();return scrollEl?scrollEl.scrollTop:0},viewportXtoPageX:function(x,win){var docEl=(win=win||this.global).document.documentElement;return x+this.getPageScrollX(win)-docEl.clientLeft},viewportYtoPageY:function(y,win){var docEl=(win=win||this.global).document.documentElement;return y+this.getPageScrollY(win)-docEl.clientTop},pageXtoViewportX:function(x,win){var docEl=(win=win||this.global).document.documentElement;return x-this.getPageScrollX(win)+docEl.clientLeft},pageYtoViewportY:function(y,win){var docEl=(win=win||this.global).document.documentElement;return y-this.getPageScrollY(win)+docEl.clientTop},maintainScrollPositionDuring:function(func,scope){var parent=window.parent,isEmbedded=Boolean(parent),scrollLeftBefore=isEmbedded&&this.getPageScrollX(parent),scrollTopBefore=isEmbedded&&this.getPageScrollY(parent);if(func.call(scope||this),isEmbedded){var scrollEl=this.getElForPageScroll(parent);scrollLeftBefore!==this.getPageScrollX(parent)&&(scrollEl.scrollLeft=scrollLeftBefore),scrollTopBefore!==this.getPageScrollY(parent)&&(scrollEl.scrollTop=scrollTopBefore)}}}}),Role("Siesta.Util.Role.Dom",{does:[Siesta.Util.Role.CanCalculatePageScroll],has:{doesNotIncludeMarginInBodyOffset:!1},methods:{isCrossOriginWindow:function(win){try{var doc=win.document}catch(e){return!0}return!doc},closest:function(elem,selector,maxLevels){maxLevels=maxLevels||Number.MAX_VALUE;for(var docEl=elem.ownerDocument.documentElement,i=0;i<maxLevels&&elem&&elem!==docEl;elem=elem.parentNode){if(Siesta.Sizzle.matchesSelector(elem,selector))return elem;i++}return!1},contains:function(parentEl,childEl){if(!parentEl)return!1;if(parentEl.contains)return parentEl.contains(childEl);if(parentEl.compareDocumentPosition)return parentEl===childEl||Boolean(16&parentEl.compareDocumentPosition(childEl));throw new Error("Can't determine `contains` status")},matches:function(node,selector){return Siesta.Sizzle.matchesSelector(node,selector)},offset:function(elem){if(!elem)return null;var doc=elem.ownerDocument;if(!doc)return null;if(elem===doc.body)return this.bodyOffset(elem);var box=this.getBoundingClientRect(elem),win=doc.defaultView||doc.parentWindow;return box?{left:this.viewportXtoPageX(Math.floor(box.left),win),top:this.viewportYtoPageY(Math.floor(box.top),win)}:{left:0,top:0}},bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(this.initializeOffset(),this.doesNotIncludeMarginInBodyOffset){var style=getComputedStyle(body);top+=parseFloat(style.marginTop)||0,left+=parseFloat(style.marginLeft)||0}return{top:top,left:left}},initializeOffset:function(){var body=document.body,container=document.createElement("div"),bodyMarginTop=parseFloat(getComputedStyle(body).marginTop)||0,styles={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(var o in styles)container.style[o]=styles[o];container.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",body.insertBefore(container,body.firstChild);var innerDiv=container.firstChild,checkDiv=innerDiv.firstChild;innerDiv.nextSibling.firstChild.firstChild;checkDiv.style.position="fixed",checkDiv.style.top="20px",checkDiv.style.position=checkDiv.style.top="",innerDiv.style.overflow="hidden",innerDiv.style.position="relative",this.doesNotIncludeMarginInBodyOffset=body.offsetTop!==bodyMarginTop,body.removeChild(container),this.initializeOffset=function(){}},getElementWidth:function(el){return this.getBoundingClientRect(el).width},getElementHeight:function(el){return this.getBoundingClientRect(el).height},getWindowSize:function(win){var doc=win.document;return{width:win.innerWidth||doc.documentElement.clientWidth||doc.body.clientWidth,height:win.innerHeight||doc.documentElement.clientHeight||doc.body.clientHeight}},isPointWithinElement:function(x,y,el){var rect=this.getBoundingClientRect(el);return x>=rect.left&&x<=rect.right&&y>=rect.top&&y<=rect.bottom},isElementReachableAt:function(el,pageX,pageY,allowChild){allowChild=!1!==allowChild;var doc=el.ownerDocument,win=doc.defaultView||doc.parentWindow,foundEl=doc.elementFromPoint(this.pageXtoViewportX(pageX,win),this.pageYtoViewportY(pageY,win));return foundEl&&(foundEl===el||allowChild&&this.contains(el,foundEl))},isElementReachableAtCenter:function(el,allowChild){allowChild=!1!==allowChild;var offsets=this.offset(el);return this.isElementReachableAt(el,offsets.left+this.getElementWidth(el)/2,offsets.top+this.getElementHeight(el)/2,allowChild)},getBoundingClientRect:function(el){var svgEl=el.ownerSVGElement;if(svgEl&&(bowser.msie||bowser.msedge||bowser.gecko)){var elBox=el.getBBox(),svgRect=svgEl.getBoundingClientRect(),left=svgRect.left+elBox.x,top=svgRect.top+elBox.y;elBox.width;return{x:left,y:top,left:left,top:top,bottom:top+elBox.height,height:elBox.height,width:elBox.width}}return el.getBoundingClientRect()},nodeIsUnloaded:function(el){try{el&&el.tagName;var doc=el.ownerDocument,win=doc&&(doc.defaultView||doc.parentWindow);return!Boolean(win)}catch(e){return!(el=null)}},nodeIsOrphan:function(el){var doc=el.ownerDocument;return!(doc&&doc.body&&el.parentNode&&(el===doc.body||$.contains(doc.body,el)))},getNodeParents:function(node){node.ownerDocument;for(var nodes=[];node&&node.parentNode;node=node.parentNode)nodes.unshift(node);return nodes},getCommonAncestor:function(node1,node2){var parents1=this.getNodeParents(node1),parents2=this.getNodeParents(node2);if(parents1[0]!=parents2[0])return null;for(var i=0;i<parents1.length;i++)if(parents1[i]!==parents2[i])return parents1[i-1]}}}),Role("Siesta.Util.Role.CanParseOs",{methods:{parseOS:function(platform){return/Win/i.test(platform)?"Windows":/Mac/.test(platform)||/darwin/i.test(platform)?"MacOS":/Linux/i.test(platform)?"Linux":"unknown"}}}),Role("Siesta.Util.Role.CanGetType",{methods:{typeOf:function(object){return Object.prototype.toString.call(object).slice(8,-1)}}}),Role("Siesta.Util.Role.CanMergeArrayAttributeFromClassHierarchy",{methods:{mergeArrayAttributeFromClassHierarchy:function(name,cfg){for(var arrays=[],meta=this.meta;meta.hasAttribute(name);meta=meta.superClass.meta)arrays.push(meta.getAttribute(name).init());cfg.hasOwnProperty(name)&&this[name]&&arrays.unshift(this[name]);var result=[];return arrays.forEach(function(array){result.push.apply(result,array)}),result}}}),Role("Siesta.Recorder.Role.CanSwallowException",{does:[JooseX.Observable],has:{swallowExceptions:!1},methods:{safeBind:function(func,scope){var me=this;return scope=scope||me,me.swallowExceptions?function(){try{return func.apply(scope,arguments)}catch(e){me.fireEvent("exception",e)}}:func.bind(scope)}}}),Class("Siesta.Recorder.Target",{has:{targets:Joose.I.Array,activeTarget:null},methods:{initialize:function(){this.targets||(this.targets=[]);var firstTarget=this.targets[0];firstTarget&&!this.activeTarget&&(this.activeTarget=firstTarget.type)},clear:function(){this.targets=[]},getTargets:function(){var target=this.getTarget();return target&&target.targets||null},getTargetAsQueryString:function(){var target=this.getTarget();return"xy"==target.type?target.target:("cq"==target.type?">>":"")+target.target},getTarget:function(){return this.getTargetByType(this.activeTarget)},clearOffset:function(){this.setOffset(null)},setOffset:function(value){var target=this.getTarget();target&&(value?target.offset=value:delete target.offset)},getOffset:function(){var target=this.getTarget();if(target)return target.offset},getTargetByType:function(type){var targetByType;return Joose.A.each(this.targets,function(target){if(target.type==type)return targetByType=target,!1}),targetByType},setUserTarget:function(value,offset){var userTarget=this.getTargetByType("user");if(userTarget)userTarget.target=value,offset?userTarget.offset=offset:delete userTarget.offset;else{var target={type:"user",target:value};offset&&(target.offset=offset),this.targets.unshift(target)}this.activeTarget="user"},isTooGeneric:function(){var targets=this.targets;if(!targets||0===targets.length)return!0;if(1===targets.length&&"xy"==targets[0].type)return!0;if(2===targets.length){var xy=this.getTargetByType("xy"),css=this.getTargetByType("css");if(xy&&css&&"body"==css.target)return!0}return!1}}}),function(){var ID=1;Class("Siesta.Recorder.Event",{has:{id:function(){return ID++},type:null,timestamp:function(){return Date.now()},options:null,x:null,y:null,target:null,charCode:null,keyCode:null,button:null,deltaX:null,deltaY:null,deltaZ:null,rawEvent:null},methods:{},my:{has:{HOST:null},methods:{fromDomEvent:function(e){var options={};["altKey","ctrlKey","metaKey","shiftKey"].forEach(function(id){e[id]&&(options[id]=!0)});var target=e.target,config={type:e.type,target:target,options:options,rawEvent:e};if("wheel"===e.type&&(config.deltaX=e.deltaX,config.deltaY=e.deltaY,config.deltaZ=e.deltaZ),e.type.match(/^key/))config.charCode=e.charCode||e.keyCode,config.keyCode=e.keyCode;else if("number"==typeof e.clientX){var ownerDoc=target&&target.ownerDocument,docEl=ownerDoc&&ownerDoc.documentElement,bodyEl=ownerDoc&&ownerDoc.body,pageX=bodyEl?e.clientX+(bodyEl.scrollLeft||docEl.scrollLeft):e.pageX,pageY=bodyEl?e.clientY+(bodyEl.scrollTop||docEl.scrollTop):e.pageY;config.x=pageX,config.y=pageY,config.button=e.button}return new this.HOST(config)}}}})}(),function(){var ID=1;Class("Siesta.Recorder.Action",{has:{id:function(){return ID++},action:null,value:null,target:null,toTarget:null,by:null,waitForPageLoad:!1,options:null,sourceEvent:null,sourceEventTargetReachableAtCenter:!1,timestamp:function(){return(new Date).getTime()}},methods:{initialize:function(){var target=this.target;!target||target instanceof Siesta.Recorder.Target||(this.target=new Siesta.Recorder.Target({targets:target}));var toTarget=this.toTarget;!toTarget||toTarget instanceof Siesta.Recorder.Target||(this.toTarget=new Siesta.Recorder.Target({targets:toTarget}))},setAction:function(newAction){this.action=newAction,this.hasTarget()||(this.target&&this.target.clear(),this.toTarget&&this.toTarget.clear())},hasTarget:function(){var action=this.action||"";return this.isMouseAction()||"selectText"==action},getTarget:function(asInstance){var target=this.target;return asInstance?target:target&&target.getTarget()},getTimestamp:function(){return this.sourceEvent&&this.sourceEvent.timestamp||this.timestamp},isMouseAction:function(){return(this.action||"").toLowerCase()in{click:1,contextmenu:1,dblclick:1,drag:1,mousedown:1,mouseup:1,movecursorto:1,wheel:1}},resetValues:function(){this.target=null,this.value=null,this.toTarget=null,this.by=null,this.options=null,this.sourceEvent=null,this.waitForPageLoad=!1},parseOffset:function(offsetString){var values=offsetString.split(",");if(!(values.length<2)&&(values[0].match("%")||(values[0]=parseInt(values[0],10),!isNaN(values[0])))&&(values[1].match("%")||(values[1]=parseInt(values[1],10),!isNaN(values[1]))))return values},clearTargetOffset:function(keepOld){this.setTargetOffset(null,keepOld)},restoreTargetOffset:function(){var target=this.target;target&&target.__SAVED_OFFSET__&&(target.setOffset(target.__SAVED_OFFSET__),delete target.__SAVED_OFFSET__)},setTargetOffset:function(value,keepOld){var target=this.target;if(target){if(keepOld){var targetDesc=target.getTarget();target.__SAVED_OFFSET__=targetDesc.offset}target.setOffset(value)}},getTargetOffset:function(){var target=this.target;if(target)return target.getOffset()},objectToSource:function(obj){function convertFn(key,value){return(value=value||obj[key])instanceof Array?key+" : "+JSON.stringify(value):value&&"object"==typeof value?key+" : "+me.objectToSource(value):key+" : "+("string"==typeof value?'"'+value+'"':value)}var prependComma,me=this,result="";"type"==obj.action?(result=convertFn("type",obj.text),prependComma=!0,delete obj.action,delete obj.text):obj.target&&(result=convertFn(obj.action,obj.target),prependComma=!0,delete obj.target,delete obj.action);var keys=Object.keys(obj);return 0<keys.length&&(result=result+(prependComma?", ":"")+keys.map(function(key){return convertFn(key)}).join(", ")),"{ "+result+" }"},asCode:function(){var step=this.asStep();return step?"function"==typeof step?step:this.objectToSource(step):null},asStep:function(test){var actionName=this.action;if(!actionName)return null;var step={action:this.action},target=this.getTarget(),value=this.value,hasTarget=this.hasTarget();if(hasTarget||"type"==actionName||"scrollTo"==actionName){if(target)if("cq"==target.type){var splitPos=target.target.indexOf("->");step.target=0<splitPos?target.target.split("->").splice(1,0,">>").join():">>"+target.target}else step.target=target.target;else step.target="";target&&target.offset&&(step.offset=target.offset.slice())}if(this.options&&!Joose.O.isEmpty(this.options)&&(step.options=this.options),actionName.match(/^waitFor/))switch(actionName){case"waitForFn":if(test)var t=test;return{waitFor:eval("(function() {\n        "+value.replace(/\n/g,"\n        ")+"\n    })")};case"waitForMs":var val=parseInt(value,10);return{waitForMs:val};default:var obj={};return obj[actionName]=value||[],obj}else switch(actionName){case"click":case"dblclick":case"contextmenu":case"mousedown":case"mouseup":case"moveCursorTo":case"wheel":break;case"scrollTo":return{scrollTo:[step.target,value[0],value[1]]};case"moveCursorAlongPath":case"moveMouseAlongPath":var step={};return step[actionName]=[value],step;case"screenshot":step={screenshot:value};break;case"moveCursorBy":var by=this.value.split(",");by[0]=parseInt(by[0],10),by[1]=parseInt(by[1],10),step={action:"moveCursor",by:by};break;case"type":step.text=value;break;case"drag":var toTarget=this.toTarget;if(toTarget&&!toTarget.isTooGeneric()){step.to=toTarget.target,toTarget.offset&&(step.toOffset=toTarget.offset);break}step.by=this.by;break;case"fn":if(test)var t=test;return eval("(function(next) {\n        "+value.replace(/\n/g,"\n        ")+"\n        next();\n    })");default:var step={};return step[actionName]=value,step}return this.waitForPageLoad?{waitForPageLoad:[],trigger:step}:step}}})}(),Role("Ariadne.QueryFinder.TreeWalker",{methods:{getParent:function(el){throw new Error("Abstract method called: `getParent`")},contains:function(parentEl,childEl){throw new Error("Abstract method called: `contains`")}}}),Class("Ariadne.QueryFinder.Identifier",{does:Siesta.Util.Role.CanMergeArrayAttributeFromClassHierarchy,has:{finder:{required:!0},priority:100},methods:{identify:function(target,root,maze){return[]}}}),Class("Ariadne.QueryFinder.Combinator",{has:{elements:{required:!0},currentCombLen:null,combination:null},methods:{forAllCombinations:function(func){for(var elemLength=this.elements.length,combination=this.combination,combLen=combination?combination.length:1;combLen<=elemLength;combLen++)if(combination=this.forAllCombinationsOfLength(combLen,func,combination),this.combination=combination)return!1},forAllCombinationsOfLength:function(combLen,func,combination){var elements=this.elements,elemLength=elements.length;if(!(elemLength<combLen)){if(!combination){combination=new Array(combLen);for(var i=0;i<combLen;i++)combination[i]={current:i,max:elemLength-combLen+i}}if(combination.length!=combLen)throw new Error("Wrong combination state");var shouldStop;do{for(var collected=[],k=0;k<combLen;k++)collected.push(elements[combination[k].current]);if(!1===func(collected))return combination;shouldStop=!0;for(i=combLen-1;0<=i;i--){var combAt=combination[i];if(combAt.current<combAt.max){combAt.current++,shouldStop=!1;for(var j=i+1;j<combLen;j++)combination[j].current=combination[j-1].current+1;break}}}while(!shouldStop)}}}}),Role("Ariadne.QueryFinder.PathFinder",{has:{weightOptions:Joose.I.Array,weightOptionsByWeight:Joose.I.Object},methods:{extendPathVariants:function(pathVariants,variants,onlyWithIndex){0==pathVariants.length&&(pathVariants=[{segmentsById:{},hash:"",weight:0,ids:[]}]);for(var pathLen=pathVariants.length,varLen=variants.length,extendedPaths=[],pathsHashes={},i=0;i<pathLen;i++)for(var pathVariant=pathVariants[i],v=0;v<varLen;v++){var variant=variants[v];if(null==onlyWithIndex||variant.indicies[onlyWithIndex]){for(var segments=variant.variant,newPathVariant=pathVariant,hasNewSegment=!1,s=0;s<segments.length;s++){var segment=segments[s];newPathVariant.segmentsById[segment.id]||(hasNewSegment||(hasNewSegment=!0,newPathVariant=this.clonePathVariant(pathVariant)),newPathVariant.segmentsById[segment.id]=segment,newPathVariant.weight+=segment.weight,newPathVariant.ids.push(segment.id))}hasNewSegment&&(newPathVariant.ids.sort(function(a,b){return a-b}),newPathVariant.hash=newPathVariant.ids.join("")),pathsHashes[newPathVariant.hash]||(pathsHashes[newPathVariant.hash]=!0,extendedPaths.push(newPathVariant))}}return extendedPaths},clonePathVariant:function(pathVariant){var clone=Object.assign?Object.assign({},pathVariant):Joose.O.copy(pathVariant);return clone.segmentsById=Object.assign?Object.assign({},clone.segmentsById):Joose.O.copy(clone.segmentsById),clone.ids=clone.ids.slice(),clone},collectAllSimplePathsOfWeight:function(weight,paths,isDirectChild){for(var pathsLen=(paths=paths?paths.slice():[""]).length,i=0;i<pathsLen;i++)paths[i]+=(isDirectChild?"_+":"_")+this.index;var weightOption=this.weightOptionsByWeight[weight];if(!weightOption)throw new Error("Incorrect path weight");var minFromEdgesById=weightOption.minFromEdgesById;if(Joose.O.isEmpty(minFromEdgesById))return paths;var allPaths=[];for(var id in minFromEdgesById){var edge=minFromEdgesById[id];allPaths.push.apply(allPaths,edge.fromNode.collectAllSimplePathsOfWeight(weight-edge.weight,paths,edge.isDirectChild))}return allPaths},collectFullSimplePathCollection:function(){for(var simplePaths=[],i=0;i<this.weightOptions.length;i++){var weightOption=this.weightOptions[i];simplePaths.push({weight:weightOption.weight,simplePaths:this.collectAllSimplePathsOfWeight(weightOption.weight)})}return simplePaths}}}),Class("Ariadne.QueryFinder.Edge",{does:Siesta.Util.Role.HasUniqueGeneratedId,has:{finder:{required:!0},maze:{required:!0},fromNode:{required:!0},toNode:{required:!0},segmentVariants:Joose.I.Array,segmentVariantsHashes:Joose.I.Object,isDirectChild:!1,weight:1/0},methods:{register:function(){var fromNode=this.fromNode,toNode=this.toNode;if(fromNode.edgesToByIndex[toNode.index])throw new Error("Edge already exists");if(toNode.edgesFromByIndex[fromNode.index])throw new Error("Edge already exists");fromNode.edgesToByIndex[toNode.index]=this,toNode.edgesFromByIndex[fromNode.index]=this},consumeVariant:function(segments,segmentsCombInfo){1==arguments.length&&(segmentsCombInfo=this.finder.combineSegments(segments));var weight=segmentsCombInfo.weight,hash=segmentsCombInfo.hash;if(this.weight>weight&&(this.weight=weight,this.segmentVariants=[],this.segmentVariantsHashes={}),this.weight==weight&&!this.segmentVariantsHashes[hash]){var indicies={};return indicies[segments[0].index]=!0,this.segmentVariantsHashes[hash]=!0,this.segmentVariants.push({variant:segments,hash:hash,indicies:indicies}),!0}},relax:function(){var fromNode=this.fromNode,toNode=this.toNode;if(fromNode.isReachedWithDirectChildEdge()){for(var index=fromNode.index,segmentVariants=this.segmentVariants,hasVariantWithOwnSegments=!1,i=0;i<segmentVariants.length;i++)if(segmentVariants[i].indicies[index]){hasVariantWithOwnSegments=!0;break}if(!hasVariantWithOwnSegments)return!1}var possibleWeight=this.weight+fromNode.weightOptions[0].weight,existingWeightOption=toNode.weightOptionsByWeight[possibleWeight];if(existingWeightOption&&!existingWeightOption.minFromEdgesById[this.id])return existingWeightOption.minFromEdgesById[this.id]=this,!0;if(!existingWeightOption){var minFromEdgesById={};minFromEdgesById[this.id]=this;var weightOption={weight:possibleWeight,minFromEdgesById:minFromEdgesById};toNode.weightOptionsByWeight[possibleWeight]=weightOption;var weightOptions=toNode.weightOptions;for(i=0;i<weightOptions.length;i++)if(possibleWeight<weightOptions[i].weight)return weightOptions.splice(i,0,weightOption),!0;return weightOptions.push(weightOption),!0}}}}),Class("Ariadne.QueryFinder.Node",{does:[Siesta.Util.Role.HasUniqueGeneratedId,Ariadne.QueryFinder.PathFinder],has:{finder:{required:!0},maze:{required:!0},el:{required:!0},index:null,segments:null,combinator:null,upNode:null,downNode:null,queryCache:Joose.I.Object,edgesToByIndex:Joose.I.Object,edgesFromByIndex:Joose.I.Object,directChildUpEdge:null},methods:{contains:function(node){return this.finder.contains(this.el,node.el)},setSegments:function(value){var me=this;value.sort(function(s1,s2){return s1.weight-s2.weight}),value.forEach(function(segment){me.adoptSegment(segment)}),this.segments=value,this.combinator=new Ariadne.QueryFinder.Combinator({elements:value})},adoptSegment:function(segment){segment.index=this.index,segment.id=this.maze.segmentsIdGen++},isReachedWithDirectChildEdge:function(){var minFromEdgesById=this.weightOptions[0].minFromEdgesById;for(var id in minFromEdgesById){if(minFromEdgesById[id].isDirectChild)return!0}return!1},addEdgeTo:function(toNode,segments,segmentsCombInfo){2==arguments.length&&(segmentsCombInfo=this.finder.combineSegments(segments));var edge=this.edgesToByIndex[toNode.index];if(edge||(edge=new Ariadne.QueryFinder.Edge({finder:this.finder,maze:this.maze,fromNode:this,toNode:toNode})).register(),edge.weight>=segmentsCombInfo.weight)return edge.consumeVariant(segments,segmentsCombInfo)},addAllEdgesTo:function(toNode,segments,segmentsCombInfo){if(toNode==this||this.contains(toNode))throw new Error("Invalid nodes for edge");2==arguments.length&&(segmentsCombInfo=this.finder.combineSegments(segments));for(var from=this;from&&from!=toNode;from=from.upNode)for(var to=from.upNode;to&&to!=toNode.upNode;to=to.upNode)from.addEdgeTo(to,segments,segmentsCombInfo)},buildEdges3:function(maxSegments){var me=this,el=this.el,finder=this.finder,maze=this.maze,root=maze.getRoot(),foundUniqueId=!1;return this.combinator.forAllCombinationsOfLength(maxSegments,function(segments){var segmentsCombInfo=finder.combineSegments(segments);if(segmentsCombInfo)for(var query=segmentsCombInfo.query,rootNode=root;rootNode&&rootNode!=me;){var existingEdge=me.edgesToByIndex[rootNode.index];if(existingEdge&&segmentsCombInfo.weight>existingEdge.weight)rootNode=rootNode.downNode;else{var queryRes=maze.doQuery(query,rootNode);if(1==queryRes.length&&queryRes[0]==el){if(me.addAllEdgesTo(rootNode,segments,segmentsCombInfo),rootNode==root&&segmentsCombInfo.hasId)return!(foundUniqueId=!0);break}if(0<queryRes.length){for(var commonContainer=rootNode.downNode,lowestCommonContainer=null;commonContainer&&commonContainer!=me;){for(var containsAll=!0,i=0;i<queryRes.length;i++)if(commonContainer.el==queryRes[i]||!finder.contains(commonContainer.el,queryRes[i])){containsAll=!1;break}if(!containsAll)break;commonContainer=(lowestCommonContainer=commonContainer).downNode}lowestCommonContainer&&(lowestCommonContainer.addAllEdgesTo(rootNode,segments,segmentsCombInfo),rootNode=lowestCommonContainer)}rootNode=rootNode.downNode}}}),!foundUniqueId}}}),Class("Ariadne.QueryFinder.Maze",{does:[Siesta.Util.Role.CanGetType],has:{finder:{required:!0},nodes:Joose.I.Array,segmentsIdGen:1,encounteredMandatoryId:!1},methods:{getRoot:function(){return this.nodes[this.nodes.length-1]},doQuery:function(query,rootNode){var queryCache=rootNode.queryCache;return queryCache[query]?queryCache[query]:queryCache[query]=this.finder.doQuery(query,rootNode.el)},buildVertices:function(target,root){for(var prevNode,nodes=this.nodes=[],currentEl=target,finder=this.finder,identifiers=finder.identifiers,directChildIdentifier=finder.directChildIdentifier;currentEl;){var node=new Ariadne.QueryFinder.Node({finder:finder,maze:this,el:currentEl,index:nodes.length});if(prevNode&&((prevNode.upNode=node).downNode=prevNode,directChildIdentifier)){var segment=directChildIdentifier.identify(prevNode.el,root,this);if(segment){segment=this.normalizeIdentifierResult(segment)[0];var directChildUpEdge=new Ariadne.QueryFinder.Edge({finder:finder,maze:this,isDirectChild:!0,fromNode:prevNode,toNode:node});prevNode.directChildUpEdge=directChildUpEdge,prevNode.adoptSegment(segment),directChildUpEdge.consumeVariant([segment],finder.combineSegments([segment],!0))}}if(prevNode=node,nodes.push(node),currentEl==root)break;for(var segments=[],j=0;j<identifiers.length;j++){var compSegments=identifiers[j].identify(currentEl,root,this);compSegments&&segments.push.apply(segments,this.normalizeIdentifierResult(compSegments))}node.setSegments(segments),currentEl=finder.getParent(currentEl)}nodes[0].weightOptions=[{weight:0,minFromEdgesById:{}}],nodes[0].weightOptionsByWeight[0]=nodes[0].weightOptions[0]},normalizeIdentifierResult:function(segments){var me=this;return"Array"!=this.typeOf(segments)&&(segments=[segments]),segments.map(function(segment){return"String"==me.typeOf(segment)?{query:segment,weight:1e3}:(segment.hasOwnProperty("weight")||(segment.weight=1e3),segment)})},computePath:function(prevUpdatedNodes){var nodes=this.nodes,iteration=(this.getRoot(),0);prevUpdatedNodes||((prevUpdatedNodes={})[nodes[0].id]=nodes[0]);do{iteration++;var updatedNodes={},somethingUpdated=!1;for(var id in prevUpdatedNodes){var fromNode=prevUpdatedNodes[id];if(0!==fromNode.weightOptions.length){for(var toIndex in fromNode.edgesToByIndex){var edge=fromNode.edgesToByIndex[toIndex],toNode=edge.toNode;edge.relax()&&(updatedNodes[toNode.id]=toNode,somethingUpdated=!0)}var directChildUpEdge=fromNode.directChildUpEdge;if(directChildUpEdge&&directChildUpEdge.relax())updatedNodes[(toNode=directChildUpEdge.toNode).id]=toNode,somethingUpdated=!0}}prevUpdatedNodes=updatedNodes}while(somethingUpdated&&iteration<nodes.length)},buildEdges:function(){for(var recognizers=this.finder.recognizers,j=0;j<recognizers.length;j++)recognizers[j].recognize(this);for(var nodes=this.nodes,i=0;i<nodes.length-1&&!1!==nodes[i].buildEdges3(1);i++)nodes[i].buildEdges3(2),nodes[i].buildEdges3(3)},expandSimplePaths:function(paths){for(var nodes=this.nodes,pathsHashes={},pathVariants=[],i=0;i<paths.length;i++){for(var path=paths[i].split("_"),variants=[],j=path.length-1;1<j;j--){var isDirectChildEdge="+"==path[j][0],onlyWithOwnIndex=j<path.length-1&&"+"==path[j+1][0],fromNode=nodes[Number(path[j])],edge=isDirectChildEdge?fromNode.directChildUpEdge:fromNode.edgesToByIndex[Number(path[j-1])];variants=fromNode.extendPathVariants(variants,edge.segmentVariants,onlyWithOwnIndex?fromNode.index:null)}for(var k=0;k<variants.length;k++){var pathVariant=variants[k];pathsHashes[pathVariant.hash]||(pathVariants.push(pathVariant),pathsHashes[pathVariant.hash]=!0)}}return pathVariants.sort(function(a,b){return a.weight-b.weight}),pathVariants},findAllPaths:function(options){this.computePath();for(var simplePathsCollection=this.getRoot().collectFullSimplePathCollection(),i=0;i<simplePathsCollection.length;i++){var simplePaths=simplePathsCollection[i].simplePaths,queryInfos=this.verifySimplePathGroup(simplePaths,options);if(queryInfos.length)return options&&options.detailed?queryInfos:queryInfos.map(function(queryInfo){return queryInfo.query})}return[]},verifySimplePathGroup:function(simplePaths,options){for(var root=this.getRoot(),finder=this.finder,pathVariants=this.expandSimplePaths(simplePaths),queryInfos=[],targetEl=this.nodes[0].el,rootEl=root.el,i=0;i<pathVariants.length;i++){var variant=pathVariants[i],segments=[];for(var id in variant.segmentsById)segments.push(variant.segmentsById[id]);var queryInfo=finder.combineSegments(segments);if(queryInfo&&finder.verifyQuery(queryInfo.query,targetEl,rootEl)&&(queryInfos.push(queryInfo),options&&options.singleOnly))return queryInfos}return queryInfos},countEdges:function(log){var counter=0;return this.nodes.forEach(function(node){for(var index in node.edgesToByIndex){var edge=node.edgesToByIndex[index];counter+=edge.segmentVariants.length,log&&edge.segmentVariants.forEach(function(variant){console.log("Edge from: "+edge.fromNode.index+"["+edge.fromNode.el.tagName+"] to "+edge.toNode.index+"["+edge.toNode.el.tagName+"] query: "+edge.finder.combineSegments(variant.variant).query)})}}),counter}}}),Class("Ariadne.QueryFinder",{does:[Ariadne.QueryFinder.TreeWalker],has:{recognizers:Joose.I.Array,identifiers:Joose.I.Array,directChildIdentifier:null,enableMandatoryId:!0},methods:{initialize:function(){this.initRecognizers(),this.initIdentifiers(),this.recognizers.sort(function(r1,r2){return r2.priority-r1.priority}),this.identifiers.sort(function(r1,r2){return r2.priority-r1.priority})},addRecognizer:function(instance){return this.recognizers.push(instance),instance},addIdentifier:function(instance){return this.identifiers.push(instance),instance},initRecognizers:function(){},initIdentifiers:function(){},findQuery:function(target,root){return this.findQueries(target,root,{singleOnly:!0})[0]},findQueries:function(target,root,options){if(!target)throw new Error("No target");if(!root)throw new Error("No root");if(target==root)throw new Error("Can't find query - target and root are the same");if(this.contains(target,root))throw new Error("Can't find query - root is contained within target, need to swap the arguments?");var maze=new Ariadne.QueryFinder.Maze({finder:this});return maze.buildVertices(target,root),maze.buildEdges(),maze.findAllPaths(options)},forAllCombinations:function(segments,func){return new Ariadne.QueryFinder.Combinator({elements:segments}).forAllCombinations(func)},bisect:function(leftIndex,rightIndex,func){for(;leftIndex<=rightIndex;){var middleIndex=Math.round((leftIndex+rightIndex)/2),res=func(middleIndex);if(!1===res)return!1;if(leftIndex==rightIndex)return;if(null==res)throw new Error("Unknown bisect direction");res<0&&(rightIndex=middleIndex-1),0<res&&(leftIndex=middleIndex+1)}},combineSegments:function(segments,allowDanglingDirectChild){for(var queryComponents=[],totalWeight=0,ids=[],processed={},hasId=!1,i=0;i<segments.length;i++){var segment=segments[i],segmentId=segment.id;if(!processed[segmentId]){processed[segmentId]=!0,ids.push(segmentId);var index=segment.index;if(queryComponent=(queryComponent=queryComponents[index])||(queryComponents[index]={segments:[],hasLeading:!1,child:!1}),totalWeight+=segment.weight,segment.leading){if(queryComponent.hasLeading)return null;queryComponent.hasLeading=!0,queryComponent.segments.unshift(segment.query)}else queryComponent.segments.push(segment.query);segment.child&&(queryComponent.child=!0),segment.isId&&(hasId=!0)}}var query="";for(i=queryComponents.length-1;0<=i;i--){var queryComponent;if(queryComponent=queryComponents[i]){if(!allowDanglingDirectChild&&queryComponent.child&&(i==queryComponents.length-1||!queryComponents[i+1]))throw new Error("Invalid direct child component");var component=queryComponent.segments.join("");query?query+=(queryComponent.child?" > ":" ")+component:query=component}}return ids.sort(function(a,b){return a-b}),{query:query,weight:totalWeight,hasId:hasId,hash:ids.join("")}},doQuery:function(query,root){throw new Error("Abstract method called: `doQuery`")},verifyQuery:function(query,target,root){var queryRes=this.doQuery(query,root);return 1==queryRes.length&&queryRes[0]==target}}}),Role("Ariadne.DomQueryFinder.Role.DomHelper",{does:[Siesta.Util.Role.CanGetType],methods:{ignoreCssClass:function(cls,dom){return!1},getCssClasses:function(dom){var classes="String"==this.typeOf(dom.className)?dom.className.trim():"",significantClasses=[],index={};classes=classes&&classes.split(/\s+/)||[];for(var i=0;i<classes.length;i++){var cssClass=classes[i];index[cssClass]||(this.ignoreCssClass(cssClass,dom)||significantClasses.push(cssClass),index[cssClass]=!0)}return significantClasses},escapeDomSelector:function(selector,asId){return asId?Siesta.Sizzle.escape(selector):Siesta.Sizzle.escape("L"+selector).substring(1).replace(/\\ /g," ")},unEscapeDomSelector:function(selector){return Siesta.Sizzle.unescape(selector)}}}),Role("Ariadne.DomQueryFinder.TreeWalker",{methods:{getParent:function(el){return el.parentNode},contains:function(parentEl,childEl){if(parentEl.contains)return parentEl.contains(childEl);if(parentEl.compareDocumentPosition)return parentEl===childEl||Boolean(16&parentEl.compareDocumentPosition(childEl));throw new Error("Can't determine `contains` status")}}}),Class("Ariadne.DomQueryFinder.Identifier.AttributeValue",{isa:Ariadne.QueryFinder.Identifier,does:Ariadne.DomQueryFinder.Role.DomHelper,has:{attributes:function(){return["name","title"]}},methods:{initialize:function(cfg){this.attributes=this.mergeArrayAttributeFromClassHierarchy("attributes",cfg)},ignoreAttribute:function(target,attributeName){return!1},identify:function(target,root,maze){for(var attributes=this.attributes,segments=[],i=0;i<attributes.length;i++){var attribute=attributes[i];target.hasAttribute(attribute)&&!this.ignoreAttribute(target,attribute)&&segments.push("["+attribute+"='"+this.escapeDomSelector(target.getAttribute(attribute))+"']")}return segments}}}),Class("Ariadne.DomQueryFinder.Identifier.TagName",{isa:Ariadne.QueryFinder.Identifier,does:Ariadne.DomQueryFinder.Role.DomHelper,methods:{identify:function(target,root,maze){var doc=target.ownerDocument,isUnique=!(maze.nodes.length&&target!=maze.nodes[0].el||target!=doc.body&&target!=doc.documentElement);return{query:this.escapeDomSelector(target.tagName.toLowerCase()),leading:!0,weight:isUnique?900:1e3}}}}),Class("Ariadne.DomQueryFinder.Identifier.Contains",{isa:Ariadne.QueryFinder.Identifier,does:Ariadne.DomQueryFinder.Role.DomHelper,has:{maxCharsForContainsSelector:30},methods:{identify:function(target,root,maze){this.attributes;var children=target.children||target.childNodes;if(0==children.length||1==children.length&&!children[0].innerHTML){var text=target.textContent.trim();if(1<text.length)return text.length<=this.maxCharsForContainsSelector?{query:":textEquals("+this.escapeDomSelector(text)+")"}:{query:":contains("+this.escapeDomSelector(text.substr(0,this.maxCharsForContainsSelector))+")"}}return null}}}),Class("Ariadne.DomQueryFinder.Identifier.CssClass",{isa:Ariadne.QueryFinder.Identifier,does:Ariadne.DomQueryFinder.Role.DomHelper,has:{ignoreCssClasses:function(){return["^null$","^undefined$"]},ignoreCssClassesRegExp:null},methods:{initialize:function(cfg){var ignoreCssClasses=this.mergeArrayAttributeFromClassHierarchy("ignoreCssClasses",cfg);this.ignoreCssClassesRegExp=ignoreCssClasses.length?new RegExp(ignoreCssClasses.join("|")):/\0/},identify:function(target,root,maze){for(var classes=this.processCssClasses(this.getCssClasses(target),target),segments=[],i=0;i<classes.length;i++)segments.push({query:"."+this.escapeDomSelector(classes[i],!0),weight:this.getWeightForCssClass(classes[i],target)});return segments},getWeightForCssClass:function(cls,target){return 1e3},ignoreCssClass:function(cls,dom){return this.ignoreCssClassesRegExp.test(cls)},processCssClasses:function(classes,target){return classes}}}),Class("Ariadne.DomQueryFinder.Identifier.Id",{isa:Ariadne.QueryFinder.Identifier,does:Ariadne.DomQueryFinder.Role.DomHelper,has:{uniqueDomNodeProperty:null,shouldIgnoreDomElementId:null},methods:{identify:function(target,root,maze){var idProperty=this.uniqueDomNodeProperty||"id",id=target.getAttribute(idProperty),shouldIgnoreDomElementId=this.shouldIgnoreDomElementId;if(!id||this.ignoreDomId(id,target)||shouldIgnoreDomElementId&&shouldIgnoreDomElementId(id,target))return null;var weight=maze.encounteredMandatoryId||!this.finder.enableMandatoryId?1e3:-1e5;return maze.encounteredMandatoryId=!0,{query:"id"==idProperty?"#"+this.escapeDomSelector(id,!0):"["+idProperty+"='"+this.escapeDomSelector(id)+"']",weight:weight,isId:!0}},ignoreDomId:function(){return!1}}}),Class("Ariadne.DomQueryFinder.Identifier.NthOfType",{isa:Ariadne.QueryFinder.Identifier,methods:{identify:function(target,root,maze){var parentElement=target.parentElement;if(!parentElement)return null;for(var siblings=parentElement.children||parentElement.childNodes,counter=0,tagName=target.tagName.toLowerCase(),i=0;i<siblings.length&&(siblings[i].tagName.toLowerCase()!=tagName||(counter++,siblings[i]!=target));i++);return{query:":nth-of-type("+counter+")",weight:1e6}}}}),Class("Ariadne.DomQueryFinder.Identifier.DirectChild",{isa:Ariadne.DomQueryFinder.Identifier.NthOfType,methods:{identify:function(target,root,maze){if(!target.parentElement||target.parentElement==root)return null;var segment=this.SUPERARG(arguments);return segment.query=target.tagName.toLowerCase()+segment.query,segment.leading=!0,segment.child=!0,segment.weight*=10,segment}}}),Class("Ariadne.DomQueryFinder",{isa:Ariadne.QueryFinder,does:Ariadne.DomQueryFinder.TreeWalker,has:{uniqueDomNodeProperty:null,shouldIgnoreDomElementId:null,ignoreCssClasses:null},methods:{initRecognizers:function(){},initIdentifiers:function(){this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.Id({uniqueDomNodeProperty:this.uniqueDomNodeProperty,shouldIgnoreDomElementId:this.shouldIgnoreDomElementId,finder:this,priority:1e4})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.CssClass({ignoreCssClasses:this.ignoreCssClasses,finder:this,priority:1e3})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.Contains({finder:this,priority:1e3})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.AttributeValue({finder:this,priority:1e3})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.TagName({finder:this,priority:100})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.NthOfType({finder:this,priority:10})),this.directChildIdentifier=new Ariadne.DomQueryFinder.Identifier.DirectChild({finder:this})},doQuery:function(query,root){return/:contains\(/.test(query)||/:textEquals\(/.test(query)||/:nth-of-type\(\d/.test(query)?Siesta.Sizzle(query,root):(root||document).querySelectorAll(query)},findQueries:function(target,root,options){if(!target)throw new Error("No target");return root=root||target.ownerDocument,this.SUPER(target,root,options)}}}),Class("Siesta.Recorder.TargetExtractor",{does:[Siesta.Util.Role.Dom,Siesta.Recorder.Role.CanSwallowException],has:{ariadneDomFinder:null,shouldIgnoreDomElementId:null,ignoreCssClasses:null,uniqueDomNodeProperty:"id",recorder:null},methods:{initialize:function(){this.ariadneDomFinder=new Ariadne.DomQueryFinder({uniqueDomNodeProperty:this.uniqueDomNodeProperty,shouldIgnoreDomElementId:this.shouldIgnoreDomElementId,ignoreCssClasses:this.ignoreCssClasses}),this.swallowExceptions&&(this.findDomQueryFor=this.safeBind(this.findDomQueryFor))},getBubbleTarget:function(){return this.recorder},findOffset:function(pageX,pageY,relativeTo){var offset=this.offset(relativeTo);return offset.left=offset.left,offset.top=offset.top,[pageX-offset.left,pageY-offset.top]},findDomQueryFor:function(target,root){return this.ariadneDomFinder.findQuery(target,root)},getTargets:function(event,saveOffset,targetOverride,onlyXY){var cssQuery,result=[],target=targetOverride||event.target,hasCoordinates=null!=event.x&&null!=event.y;if(onlyXY&&!hasCoordinates)return result;if(!(onlyXY||target==target.ownerDocument.body&&hasCoordinates)&&(cssQuery=this.findDomQueryFor(target))){var data={type:"css",target:cssQuery};!hasCoordinates||!saveOffset&&this.isElementReachableAtCenter(target,!1)||(data.offset=this.findOffset(event.x,event.y,target)),result.push(data)}return hasCoordinates&&result.push({type:"xy",target:[event.x,event.y]}),result}}}),Role("Siesta.Recorder.Role.CanRecordMouseMove",{does:[Siesta.Util.Role.CanCalculatePageScroll,Siesta.Recorder.Role.CanSwallowException],has:{recordMouseMove:!0,cursorPosition:Joose.I.Array,lastMoveTimestamp:null,lastMouseMoveEvent:null},override:{initialize:function(){this.SUPERARG(arguments),this.onBodyMouseMove=this.safeBind(this.onBodyMouseMove),this.onBodyMouseOver=this.safeBind(this.onBodyMouseOver),this.onBodyMouseOut=this.safeBind(this.onBodyMouseOut)},onStart:function(){this.SUPERARG(arguments);var body=this.window.document.body;this.recordMouseMove&&(body.addEventListener("mouseover",this.onBodyMouseOver,!0),body.addEventListener("mouseout",this.onBodyMouseOut,!0),body.addEventListener("mousemove",this.onBodyMouseMove,!0))},onStop:function(){this.SUPERARG(arguments);var body=this.window.document.body;this.recordMouseMove&&(body.removeEventListener("mouseover",this.onBodyMouseOver,!0),body.removeEventListener("mouseout",this.onBodyMouseOut,!0),body.removeEventListener("mousemove",this.onBodyMouseMove,!0),this.lastMouseMoveEvent=null)}},methods:{saveMouseMoveData:function(event){var me=this;me.lastMoveTimestamp=+new Date,me.cursorPosition[0]=me.viewportXtoPageX(event.clientX,me.window),me.cursorPosition[1]=me.viewportYtoPageY(event.clientY,me.window),me.lastMouseMoveEvent=event},onBodyMouseMove:function(e){this.ignoreSynthetic&&e.synthetic||e.target.ownerDocument!==this.window.document||(this.saveMouseMoveData(e),this.processBodyMouseMove(e))},processBodyMouseMove:function(e){},onBodyMouseOver:function(e){this.ignoreSynthetic&&e.synthetic||e.target.ownerDocument!==this.window.document||(this.saveMouseMoveData(e),this.processBodyMouseOver(e))},processBodyMouseOver:function(e){},onBodyMouseOut:function(e){this.ignoreSynthetic&&e.synthetic||e.target.ownerDocument!==this.window.document||(this.saveMouseMoveData(e),this.processBodyMouseOut(e))},processBodyMouseOut:function(e){},targetToPathPoint:function(target){var pathPoint=[target.getTargetAsQueryString()];return target.getTarget().offset&&pathPoint.push.apply(pathPoint,target.getTarget().offset),pathPoint.xy=target.getTargetByType("xy").target,pathPoint},addPathPoint:function(pathPoints,newPathPoint){if(3!==newPathPoint.length){var lastPathPoint=pathPoints[pathPoints.length-1];if(1===newPathPoint.length&&"Array"==this.typeOf(newPathPoint[0])){var relativePoint=[newPathPoint[0][0]-lastPathPoint.xy[0],newPathPoint[0][1]-lastPathPoint.xy[1]];if(0===relativePoint[0]&&0===relativePoint[1])return;relativePoint.xy=newPathPoint[0],pathPoints.push(relativePoint)}else pathPoints.push(newPathPoint)}else pathPoints.push(newPathPoint)},addMoveCursorAction:function(event,targetOverride,useXY){event instanceof Siesta.Recorder.Event||(event=Siesta.Recorder.Event.fromDomEvent(event));var lastAction=this.getLastAction(),isMouseMove=lastAction&&("moveCursorTo"==lastAction.action||"moveCursorAlongPath"==lastAction.action);if(lastAction&&isMouseMove&&this.recordMouseMovePath){var target=new Siesta.Recorder.Target({targets:this.getPossibleTargets(event,!0,targetOverride,useXY)});"moveCursorTo"==lastAction.action&&(lastAction.action="moveCursorAlongPath",lastAction.value=[this.targetToPathPoint(lastAction.target)],lastAction.target=null),this.addPathPoint(lastAction.value,this.targetToPathPoint(target)),this.fireEvent("actionupdate",lastAction)}else{if(lastAction&&lastAction.hasTarget()&&lastAction.target){var xy=lastAction.target.getTargetByType("xy");if(xy&&(xy=xy.target,event.x==xy[0]&&event.y==xy[1]))return}var targetOptions=this.getPossibleTargets(event,!0,targetOverride,useXY);this.addAction({action:"moveCursorTo",target:targetOptions,sourceEvent:event,options:event.options})}}}}),Role("Siesta.Recorder.Role.CanRecordMouseMoveOnIdle",{has:{idleTimeout:3e3,recordMouseMoveOnIdle:!0,idleMouseMoveThrottler:null},override:{initialize:function(){this.recordMouseMoveOnIdle&&(this.recordMouseMove=!0),this.SUPERARG(arguments),this.recordMouseMoveOnIdle&&(this.idleMouseMoveThrottler=new Siesta.Util.Throttler({func:this.onBodyMouseMoveIdle,scope:this,buffer:this.idleTimeout}),this.resetMouseMoveListener=this.resetMouseMoveListener.bind(this))},onDomEvent:function(e){this.SUPERARG(arguments),this.resetMouseMoveListener()},clear:function(){this.recordMouseMoveOnIdle&&this.resetMouseMoveListener(),this.SUPERARG(arguments)},onStart:function(){this.SUPERARG(arguments);var body=this.window.document.body;this.recordMouseMoveOnIdle&&body.addEventListener("mouseleave",this.resetMouseMoveListener)},onStop:function(){this.SUPERARG(arguments);var body=this.window.document.body;this.recordMouseMoveOnIdle&&(body.removeEventListener("mouseleave",this.resetMouseMoveListener),this.resetMouseMoveListener())},processBodyMouseMove:function(e){this.SUPERARG(arguments),this.recordMouseMoveOnIdle&&this.idleMouseMoveThrottler.tick(e)}},methods:{resetMouseMoveListener:function(){this.idleMouseMoveThrottler&&this.idleMouseMoveThrottler.cancel()},onBodyMouseMoveIdle:function(e){this.addMoveCursorAction(e)}}}),Role("Siesta.Recorder.Role.CanRecordPointOfInterest",{does:Siesta.Util.Role.CanMergeArrayAttributeFromClassHierarchy,has:{moveCursorToSelectors:Joose.I.Array,pointOfInterestSelector:null,recordPointsOfInterest:!0,lastPointOfInterestEl:null},override:{initialize:function(cfg){this.moveCursorToSelectors=this.mergeArrayAttributeFromClassHierarchy("moveCursorToSelectors",cfg),this.pointOfInterestSelector=this.recordPointsOfInterest?this.moveCursorToSelectors.join(","):null,this.pointOfInterestSelector&&(this.recordMouseMove=!0),this.SUPERARG(arguments)},onStart:function(){this.SUPERARG(arguments),this.pointOfInterestSelector&&(this.lastPointOfInterestEl=null)},onStop:function(){this.SUPERARG(arguments),this.pointOfInterestSelector&&(this.lastPointOfInterestEl=null)},processBodyMouseOver:function(e){this.SUPERARG(arguments);var pointOfInterestSelector=this.pointOfInterestSelector;if(pointOfInterestSelector){var pointOfInterestEl=e.target;(this.matches(pointOfInterestEl,pointOfInterestSelector)||(pointOfInterestEl=this.closest(e.target,pointOfInterestSelector,10)))&&pointOfInterestEl!==this.lastPointOfInterestEl&&(this.lastPointOfInterestEl=pointOfInterestEl,this.addMoveCursorAction(e))}},processBodyMouseOut:function(e){this.SUPERARG(arguments),this.pointOfInterestSelector&&this.lastPointOfInterestEl&&(this.contains(this.lastPointOfInterestEl,e.target)||(this.lastPointOfInterestEl=null))}}}),Role("Siesta.Recorder.Role.CanRecordWindowResize",{requires:["getWindowSize"],does:[Siesta.Recorder.Role.CanSwallowException],has:{recordWindowResize:!0,recordInitialWindowSize:!1},override:{initialize:function(){this.SUPERARG(arguments),this.onWindowResize=this.safeBind(this.onWindowResize)},onStart:function(){this.SUPERARG(arguments);var win=this.window;if(this.recordWindowResize&&win.addEventListener("resize",this.onWindowResize),this.recordInitialWindowSize){this.recordInitialWindowSize=!1;var size=this.getWindowSize(this.window);this.addAction({action:"setWindowSize",value:[size.width,size.height]})}},onStop:function(){this.SUPERARG(arguments);var win=this.window;this.recordWindowResize&&win.removeEventListener("resize",this.onWindowResize)}},methods:{onWindowResize:function(nativeEvent){var size=this.getWindowSize(this.window),lastAction=this.getLastAction();lastAction&&"setWindowSize"==lastAction.action?(lastAction.value=[size.width,size.height],this.fireEvent("actionupdate",lastAction)):this.addAction({action:"setWindowSize",value:[size.width,size.height],sourceEvent:Siesta.Recorder.Event.fromDomEvent(nativeEvent)})}}}),Role("Siesta.Recorder.Role.CanRecordMouseMovePath",{has:{recordMouseMovePath:!1,lastMouseOutTarget:null},after:{onStart:function(){this.lastMouseOutTarget=null},onStop:function(){this.lastMouseOutTarget=null}},override:{initialize:function(){this.recordMouseMovePath&&(this.recordPointsOfInterest=!1,this.recordMouseMoveOnIdle=!1),this.SUPERARG(arguments),!0===this.recordMouseMovePath&&(this.recordMouseMovePath="coordinate")},processBodyMouseOver:function(e){this.SUPERARG(arguments),this.recordMouseMovePath&&e.target!=this.lastMouseOutTarget&&this.addMoveCursorAction(e,null,"coordinate"==this.recordMouseMovePath||"down"==this.mouseState),this.lastMouseOutTarget=null},processBodyMouseOut:function(e){this.SUPERARG(arguments),this.lastMouseOutTarget=e.relatedTarget,this.recordMouseMovePath&&this.addMoveCursorAction(e,e.relatedTarget,"coordinate"==this.recordMouseMovePath||"down"==this.mouseState)}}}),Role("Siesta.Recorder.Role.CanRecordMouseDownUp",{has:{mouseState:"up",eventNameMap:{lazy:"this.buildEventNameMap"},needToCaptureInitialMouseState:!0},override:{initialize:function(){this.SUPERARG(arguments),this.onDocMouseDown=this.safeBind(this.onDocMouseDown),this.onDocMouseUp=this.safeBind(this.onDocMouseUp),this.onInitialMouseMove=this.safeBind(this.onInitialMouseMove)},onStart:function(){this.SUPERARG(arguments);var eventNameMap=this.getEventNameMap(),doc=this.window.document;doc.addEventListener(eventNameMap.mousedown,this.onDocMouseDown,!0),doc.addEventListener(eventNameMap.mouseup,this.onDocMouseUp,!0),doc.body.addEventListener("mousemove",this.onInitialMouseMove,!0),this.needToCaptureInitialMouseState=!0},onStop:function(){this.SUPERARG(arguments);var eventNameMap=this.getEventNameMap(),doc=this.window.document;doc.removeEventListener(eventNameMap.mousedown,this.onDocMouseDown,!0),doc.removeEventListener(eventNameMap.mouseup,this.onDocMouseUp,!0),this.needToCaptureInitialMouseState&&this.onInitialStateCaptured()}},methods:{onInitialMouseMove:function(e){null!=e.buttons&&1&e.buttons&&(this.mouseState="down"),this.onInitialStateCaptured()},onInitialStateCaptured:function(){this.window.document.body.removeEventListener("mousemove",this.onInitialMouseMove,!0),this.needToCaptureInitialMouseState=!1},onDocMouseDown:function(e){this.ignoreSynthetic&&e.synthetic||e.target.ownerDocument!==this.window.document||(this.needToCaptureInitialMouseState&&this.onInitialStateCaptured(),this.processDocMouseDown(e))},processDocMouseDown:function(e){this.mouseState="down"},onDocMouseUp:function(e){this.ignoreSynthetic&&e.synthetic||e.target.ownerDocument!==this.window.document||(this.needToCaptureInitialMouseState&&this.onInitialStateCaptured(),this.processDocMouseUp(e))},processDocMouseUp:function(e){this.mouseState="up"},isPointerDownEvent:function(event){return/(ms)?(pointer|mouse)down/i.test(event.type)},isPointerUpEvent:function(event){return/(ms)?(pointer|mouse)up/i.test(event.type)},buildEventNameMap:function(){var events={};return window.PointerEvent?(events.mousedown="pointerdown",events.mouseup="pointerup"):window.MSPointerEvent?(events.mousedown="MSPointerDown",events.mouseup="MSPointerUp"):(events.mousedown="mousedown",events.mouseup="mouseup"),events}}}),Role("Siesta.Recorder.Role.CanRecordScroll",{has:{recordScroll:!1},override:{initialize:function(){this.SUPERARG(arguments),this.onScrollEvent=this.onScrollEvent.bind(this)},onStart:function(){this.SUPERARG(arguments);var doc=this.window.document;this.recordScroll&&doc.addEventListener("scroll",this.onScrollEvent,!0)},onStop:function(){this.SUPERARG(arguments);var doc=this.window.document;this.recordScroll&&doc.removeEventListener("scroll",this.onScrollEvent,!0)},onScrollEvent:function(scrollEvent){var target=scrollEvent.target,win=this.window,doc=win.document,lastAction=this.getLastAction();if(lastAction&&"scrollTo"==lastAction.action&&target==lastAction.sourceEvent.target)target===doc&&(target=this.getElForPageScroll(win)),lastAction.value=[target.scrollLeft,target.scrollTop],this.fireEvent("actionupdate",lastAction);else{var isPageScroll;target===doc&&(isPageScroll=!0,target=this.getElForPageScroll(win));var cursorPosition=this.cursorPosition;if(2===cursorPosition.length&&!isPageScroll){var viewportX=this.pageXtoViewportX(cursorPosition[0],win),viewportY=this.pageYtoViewportY(cursorPosition[1],win);if(!this.isPointWithinElement(viewportX,viewportY,target))return}this.addAction({action:"scrollTo",target:this.getPossibleTargets(scrollEvent,!1,target),value:[target.scrollLeft,target.scrollTop],sourceEvent:Siesta.Recorder.Event.fromDomEvent(scrollEvent)})}}}}),Role("Siesta.Recorder.Role.CanRecordWheel",{has:{recordWheel:!0,wheelEventBuffer:200,skipIfNoModifierKeysPressed:!1},override:{initialize:function(){this.SUPERARG(arguments),this.onWheelEvent=this.onWheelEvent.bind(this)},onStart:function(){this.SUPERARG(arguments);var doc=this.window.document;this.recordWheel&&doc.addEventListener("wheel",this.onWheelEvent,!0)},onStop:function(){this.SUPERARG(arguments);var doc=this.window.document;this.recordWheel&&doc.removeEventListener("wheel",this.onWheelEvent,!0)},sign:Math.sign||function(x){return(0<x)-(x<0)||+x},isSameWheelAxisAndDirection:function(event1,event2){return this.sign(event1.deltaX)===this.sign(event2.deltaX)&&this.sign(event1.deltaY)===this.sign(event2.deltaY)&&this.sign(event1.deltaZ)===this.sign(event2.deltaZ)},onWheelEvent:function(wheelEvent){var lastAction=this.getLastAction();if(!this.skipIfNoModifierKeysPressed||wheelEvent.ctrlKey||wheelEvent.altKey||wheelEvent.metaKey||wheelEvent.shiftKey){if(lastAction&&"wheel"===lastAction.action&&wheelEvent.target===lastAction.sourceEvent.target){var lastEvent=lastAction.sourceEvent;if(this.isSameWheelAxisAndDirection(wheelEvent,lastEvent.rawEvent)&&Date.now()-lastAction.timestamp<this.wheelEventBuffer)return lastAction.options.deltaX+=wheelEvent.deltaX,lastAction.options.deltaY+=wheelEvent.deltaY,lastAction.options.deltaZ+=wheelEvent.deltaZ,void this.fireEvent("actionupdate",lastAction)}this.onDomEvent(wheelEvent)}}}}),Class("Siesta.Recorder.Recorder",{does:[JooseX.Observable,Siesta.Util.Role.Dom,Siesta.Util.Role.CanParseOs,Siesta.Util.Role.CanGetType,Siesta.Recorder.Role.CanSwallowException,Siesta.Recorder.Role.CanRecordMouseDownUp,Siesta.Recorder.Role.CanRecordMouseMove,Siesta.Recorder.Role.CanRecordMouseMoveOnIdle,Siesta.Recorder.Role.CanRecordPointOfInterest,Siesta.Recorder.Role.CanRecordWindowResize,Siesta.Recorder.Role.CanRecordScroll,Siesta.Recorder.Role.CanRecordWheel,Siesta.Recorder.Role.CanRecordMouseMovePath],has:{active:null,extractor:null,extractorClass:Siesta.Recorder.TargetExtractor,extractorConfig:null,uniqueComponentProperty:null,uniqueDomNodeProperty:"id",shouldIgnoreDomElementId:null,ignoreCssClasses:Joose.I.Array,recordOffsets:!1,ignoreSynthetic:!0,window:null,clickMergeThreshold:200,debugMode:!1,eventsToRecord:{lazy:"this.buildEventsToRecord"},events:Joose.I.Array,processingEvent:null,actions:Joose.I.Array,actionsByEventId:Joose.I.Object,dragPixelThreshold:3,actionClass:Siesta.Recorder.Action,warnAboutIframeMissingId:!0},methods:{buildEventsToRecord:function(){var events=["keydown","keypress","keyup","click","dblclick","contextmenu"];return window.PointerEvent?events.push("pointerdown","pointerup"):window.MSPointerEvent?events.push("MSPointerDown","MSPointerUp"):events.push("mousedown","mouseup"),events},initialize:function(){this.onUnload=this.onUnload.bind(this),this.onFrameLoad=this.onFrameLoad.bind(this),this.onDomEvent=this.safeBind(this.onDomEvent);var extractorConfig=this.extractorConfig||{};extractorConfig.recorder=this,extractorConfig.uniqueComponentProperty=extractorConfig.uniqueComponentProperty||this.uniqueComponentProperty,extractorConfig.uniqueDomNodeProperty=extractorConfig.uniqueDomNodeProperty||this.uniqueDomNodeProperty,extractorConfig.swallowExceptions=this.swallowExceptions,extractorConfig.shouldIgnoreDomElementId=this.shouldIgnoreDomElementId,extractorConfig.ignoreCssClasses=this.ignoreCssClasses,this.extractor=new this.extractorClass(extractorConfig)},isSamePoint:function(event1,event2){return Math.abs(Math.round(event1.x)-Math.round(event2.x))<=this.dragPixelThreshold&&Math.abs(Math.round(event1.y)-Math.round(event2.y))<=this.dragPixelThreshold},isSameTarget:function(event1,event2){return event1.target==event2.target||this.contains(event1.target,event2.target)||this.contains(event2.target,event1.target)},clear:function(){var me=this;me.events=[],me.actions=[],me.actionsByEventId={},me.fireEvent("clear",me)},onUnload:function(){var actions=this.actions,last=actions.length&&actions[actions.length-1];last&&last.target&&(last.waitForPageLoad=!0),this.stop(!0)},onFrameLoad:function(event){try{var win=event.target.contentWindow;win.location.href}catch(e){win=null}win&&(this.attach(win),this.start())},attach:function(window){this.window!==window&&this.stop(),this.events=[],this.window=window},start:function(){this.active||(this.ignoreSynthetic||this.hasOwnProperty("clickMergeThreshold")||(this.clickMergeThreshold=1/0),this.stop(),this.active=Date.now(),this.onStart(),this.fireEvent("start",this))},stop:function(keepOnLoadListenerOnIframe){this.active&&(this.active=null,this.onStop(keepOnLoadListenerOnIframe),this.fireEvent("stop",this))},getRecordedEvents:function(){return this.events},getRecordedActions:function(){return this.actions},getRecordedActionsAsSteps:function(){return Joose.A.map(this.actions,function(action){return action.asStep()})},onDomEvent:function(e){var target=e.target;if(this.processingEvent=e,this.debugMode&&this.window.console&&"function"==typeof this.window.console.log&&console.log("[EVENT] : ",e.type,target,e.keyIdentifier||e.key),target&&(!this.ignoreSynthetic||!e.synthetic&&e.isTrusted)){var event=Siesta.Recorder.Event.fromDomEvent(e);this.convertToAction(event),this.events.push(event),10<this.events.length&&this.events.shift(),this.fireEvent("domevent",event)}},eventToAction:function(event,onlyXY){var actionName,type=event.type,options=event.options;if("wheel"===type){var rawEvent=event.rawEvent;actionName="wheel",options=Joose.O.extend({deltaX:rawEvent.deltaX||0,deltaY:rawEvent.deltaY||0,deltaZ:rawEvent.deltaZ||0,deltaMode:rawEvent.deltaMode||0},options)}else actionName=type.match(/^key/)?"type":this.isPointerDownEvent(event)?"mousedown":this.isPointerUpEvent(event)?"mouseup":type;var config={action:actionName,target:this.getPossibleTargets(event,"wheel"!==type,null,onlyXY),options:options,sourceEvent:event,sourceEventTargetReachableAtCenter:this.isElementReachableAtCenter(event.target,!1)},win=event.target.ownerDocument.defaultView;if(win!==this.window&&!onlyXY){if(!win.frameElement.id&&this.warnAboutIframeMissingId)throw new Error('To record events in a nested iframe, please set an "id" property on your frames');config.target=config.target.filter(function(actionTarget){return"string"==typeof actionTarget.target&&(actionTarget.target="#"+win.frameElement.id+" -> "+actionTarget.target,!0)})}return new this.actionClass(config)},recordAsAction:function(event,omitTarget){var action=this.eventToAction(event,omitTarget);if(action)return this.addAction(action),action},addAction:function(action){action instanceof this.actionClass||(action=new this.actionClass(action)),this.beforeAddAction(action),this.actions.push(action),action.sourceEvent&&(this.actionsByEventId[action.sourceEvent.id]=action),this.debugMode&&this.window.console&&"function"==typeof this.window.console.log&&console.log("[ACTION] : "+action.action,action.getTarget()&&action.asStep().target||"",action),this.fireEvent("actionadd",action)},removeAction:function(actionToRemove){for(var actions=this.actions,i=0;i<actions.length;i++){var action=actions[i];if(action==actionToRemove){actions.splice(i,1),action.sourceEvent&&delete this.actionsByEventId[action.sourceEvent.id],this.fireEvent("actionremove",actionToRemove);break}}},removeActionByEventId:function(eventId){this.removeAction(this.getActionByEventId(eventId))},removeActionByEvent:function(event){this.removeAction(this.getActionByEventId(event.id))},getActionByEvent:function(event){return this.actionsByEventId[event.id]},getActionByEventId:function(eventId){return this.actionsByEventId[eventId]},getLastAction:function(){return this.actions[this.actions.length-1]},getLastEvent:function(){return this.events[this.events.length-1]},canCombineTypeActions:function(prevOptions,curOptions){return prevOptions.ctrlKey==curOptions.ctrlKey&&prevOptions.metaKey==curOptions.metaKey&&prevOptions.shiftKey==curOptions.shiftKey&&prevOptions.altKey==curOptions.altKey},finalizeDragAction:function(mouseUpEvent,mouseDownEvent){var action=this.eventToAction(mouseUpEvent,!0);action.target=new Siesta.Recorder.Target({targets:[{target:[mouseUpEvent.x,mouseUpEvent.y],type:"xy"}]}),this.addAction(action)},convertToAction:function(event){var type=event.type,events=this.getRecordedEvents(),length=events.length,tail=this.getLastEvent(),tailPrev=2<=length?events[length-2]:null;if(!this.shouldIgnoreEvent(event,tail,tailPrev))if("wheel"!==type)if("keypress"!==type&&"keyup"!==type&&"keydown"!==type)if(length){if("dblclick"===type)return 1<this.getRecordedActions().length&&this.removeAction(this.getLastAction()),this.getLastAction().action="dblclick",void this.fireEvent("actionupdate",this.getLastAction());if(this.isPointerDownEvent(tail)&&this.isPointerUpEvent(event)&&event.button==tail.button&&!this.isSamePoint(event,tail))this.finalizeDragAction(event,tail);else if(tail&&this.isPointerUpEvent(event)&&this.isPointerDownEvent(tail)&&event.button==tail.button&&this.isSamePoint(event,tail)&&!bowser.gecko)this.recordAsAction(event,!0);else{var isFF57BrokenOnWindows=bowser.gecko&&bowser.windows;if(tailPrev&&"click"===type){if(this.isPointerUpEvent(tail)&&event.button==tail.button&&event.button==tailPrev.button&&this.isSamePoint(event,tail)&&this.isPointerDownEvent(tailPrev)&&this.isSameTarget(event,tail)&&this.isSameTarget(event,tailPrev)&&this.isSamePoint(event,tailPrev)){var mouseDownAction=this.getActionByEvent(tailPrev);return void(Date.now()-mouseDownAction.getTimestamp()>this.clickMergeThreshold||(this.removeActionByEvent(tail),event.target==tail.target&&tail.target==tailPrev.target&&!this.recordOffsets&&mouseDownAction.sourceEventTargetReachableAtCenter&&mouseDownAction.clearTargetOffset(isFF57BrokenOnWindows),mouseDownAction.action="click",this.fireEvent("actionupdate",mouseDownAction)))}}else{if("contextmenu"===type){var lastAction=this.getLastAction();if(isFF57BrokenOnWindows&&"click"==tail.type&&"click"==lastAction.action)return lastAction.action="contextmenu",lastAction.restoreTargetOffset(),void this.fireEvent("actionupdate",lastAction);(this.isPointerUpEvent(tail)||this.isPointerDownEvent(tail))&&event.button==tail.button&&this.isSamePoint(event,tail)&&this.removeActionByEvent(tail),this.isPointerUpEvent(tail)&&this.isPointerDownEvent(tailPrev)&&this.isSameTarget(event,tail)&&this.isSameTarget(event,tailPrev)&&this.isSamePoint(event,tailPrev)&&this.removeActionByEvent(tailPrev)}this.recordAsAction(event)}}}else this.recordAsAction(event);else this.convertKeyEventToAction(event);else this.recordAsAction(event)},shouldIgnoreEvent:function(event,tail,tailPrev){var isKeyEvent=event.type.match(/^key/),keyCode=event.keyCode,keys=Siesta.Test.UserAgent.KeyCodes().keys;return!(!isKeyEvent||keyCode!==keys.SHIFT&&keyCode!==keys.CTRL&&keyCode!==keys.ALT&&keyCode!==keys.CMD)||(!(!this.isPointerUpEvent(event)||!tail||"contextmenu"!==tail.type)||(!!("keypress"==event.type&&tail&&"keydown"==tail.type&&tailPrev&&"keydown"==tailPrev.type&&event.rawEvent.key==tail.rawEvent.key&&"Control"==tailPrev.rawEvent.key&&event.rawEvent.timeStamp-tail.rawEvent.timeStamp<3)||(!("click"!=event.type||!tail||"click"!=tail.type||"label"!==tail.target.nodeName.toLowerCase())||void 0)))},convertKeyEventToAction:function(event){var type=event.type,tail=this.getLastEvent(),KC=Siesta.Test.UserAgent.KeyCodes(),isSpecial="keydown"==type&&(KC.isSpecial(event.keyCode)||KC.isNav(event.keyCode)),isModifier=KC.isModifier(event.keyCode),options=event.options,prevType=tail&&tail.type,prevSpecial="keypress"==type&&"keydown"==prevType&&(KC.isSpecial(tail.keyCode)||KC.isNav(tail.keyCode)),isMac=(this.parseOS(navigator.platform),"MacOS"===this.parseOS(navigator.platform));if("keypress"==type&&!isSpecial&&!prevSpecial||"keydown"==type&&(isSpecial||isModifier||!isMac&&options.ctrlKey||isMac&&options.metaKey)){var lastAction=this.getLastAction(),text=event.rawEvent.key?event.rawEvent.key:isSpecial?KC.fromCharCode(event.charCode,!0):String.fromCharCode(event.charCode);return text=isSpecial?"["+text.toUpperCase()+"]":text,void(lastAction&&"type"===lastAction.action&&this.canCombineTypeActions(lastAction.options,event.options)?KC.isModifier(event.keyCode)||(lastAction.value+=text,this.fireEvent("actionupdate",lastAction)):this.addAction({action:"type",target:this.getPossibleTargets(event),value:text,sourceEvent:event,options:event.options}))}},onStart:function(){var me=this,window=me.window,frameWindows=(window.document.body,this.getNestedFrames().map(function(frame){return frame.contentWindow}));[window].concat(frameWindows).forEach(function(win){me.registerWindowListeners(win)}),window.frameElement&&window.frameElement.addEventListener("load",this.onFrameLoad),window.addEventListener("unload",this.onUnload),window.focus()},onStop:function(keepOnLoadListenerOnIframe){var me=this,window=me.window,frameWindows=(window.document.body,this.getNestedFrames().map(function(frame){return frame.contentWindow}));[window].concat(frameWindows).forEach(function(win){me.deregisterWindowListeners(win)}),keepOnLoadListenerOnIframe||window.frameElement&&window.frameElement.removeEventListener("load",me.onFrameLoad),window.removeEventListener("unload",this.onUnload)},registerWindowListeners:function(win){if(!this.isCrossOriginWindow(win)){var me=this;me.getEventsToRecord().forEach(function(name){win.document.addEventListener(name,me.onDomEvent,!0)})}},deregisterWindowListeners:function(win){if(!this.isCrossOriginWindow(win)){var me=this;me.getEventsToRecord().forEach(function(name){win.document.removeEventListener(name,me.onDomEvent,!0)})}},getNestedFrames:function(){var me=this;return Array.prototype.slice.apply(this.window.document.getElementsByTagName("iframe")).filter(function(frame){return!me.isCrossOriginWindow(frame.contentWindow)})},beforeAddAction:function(action){},getPossibleTargets:function(event,recordOffsets,targetOverride,onlyXY){return"HTMLDocument"==this.typeOf(event.target)&&(event.target=event.target.body),this.extractor.getTargets(event,recordOffsets,targetOverride,onlyXY)}}}),Role("Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper",{methods:{getComponentOfDomElement:function(el){var doc=el.ownerDocument,body=doc.body,Ext=(doc.defaultView||doc.parentWindow).Ext;if(!Ext||!Ext.getCmp)return null;for(;el&&el!=body;){var elId=el.getAttribute("id");if(elId&&Ext.getCmp(elId))return Ext.getCmp(elId);el=el.parentElement}return null},getExtByDomElement:function(el){var doc=el.ownerDocument;return(doc.defaultView||doc.parentWindow).Ext},getExtCssClassPrefixRegexp:function(el){var Ext=this.getExtByDomElement(el);if(!Ext)return null;var baseCSSPrefix=Ext.baseCSSPrefix||"x";return new RegExp("^"+baseCSSPrefix)},valueIsAutoGeneratedByComponent:function(comp,value){if(!comp.up)return!1;value=String(value);var componentsToCheck=comp.autoGenId?[comp]:[],parentWithAutoId=comp.up("[autoGenId=true]");parentWithAutoId&&componentsToCheck.push(parentWithAutoId);var childrenWithAutoId=parentWithAutoId&&parentWithAutoId.query&&parentWithAutoId.query("[autoGenId=true]");return childrenWithAutoId&&componentsToCheck.push.apply(componentsToCheck,childrenWithAutoId),componentsToCheck.some(function(comp){return 0<=value.indexOf(comp.id)})},componentHasAutoGeneratedId:function(component,Ext){var id=component.id;return!!/^ext-gen\d+|^ext-comp\d+/.test(id)||(!(!Ext||!this.idIsGeneratedByExtDotIdCall(id,Ext))||(component.isWidget?id.replace(/\d+$/,"")==component.identifiablePrefix:component.autoGenId||this.valueIsAutoGeneratedByComponent(component,id)))},idIsGeneratedByExtDotIdCall:function(id,Ext,el){if(!(Ext=Ext||this.getExtByDomElement(el)))return!1;var match=/^(.+?)\d+$/.exec(id);return Boolean(match&&match[1]==Ext.idPrefix)},domElementHasAutoGeneratedId:function(el){var id=el.getAttribute("id")||"";if(/^ext-/.test(id)||this.idIsGeneratedByExtDotIdCall(id,null,el))return!0;var comp=this.getComponentOfDomElement(el);return!(!comp||!(id!==comp.id&&-1<id.indexOf(comp.id)||this.componentHasAutoGeneratedId(comp)))}}}),Class("Ariadne.ExtJSDomQueryFinder.Identifier.CssClass",{isa:Ariadne.DomQueryFinder.Identifier.CssClass,does:Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper,has:{ignoreCssClasses:function(){return["-focus$","-focused$","-over$","-hover$","-selected$","-active$","-default$","x-form-dirty","x-grid-dirty-cell","x-unselectable","-toolbar-item$","-item-disabled","x-form-empty-field","x-grid-item-alt"]},lessRelevantCssClasses:function(){return["x-form-field","x-form-required-field","-layout","-inner$","-default$","-box-","^x-tree-elbow"]}},methods:{initialize:function(){this.SUPERARG(arguments);var lessRelevantCssClasses=this.lessRelevantCssClasses;lessRelevantCssClasses.forEach(function(cls,index){lessRelevantCssClasses[index]=new RegExp(cls)})},getWeightForCssClass:function(cls,target){var prefix=this.getExtCssClassPrefixRegexp(target);return this.lessRelevantCssClasses.some(function(lessRelevantClsRegExp){return lessRelevantClsRegExp.test(cls)})?1e3:!prefix||prefix.test(cls)?995:950},ignoreCssClass:function(cls,dom){var cmp=this.getComponentOfDomElement(dom);return!(!cmp||!this.valueIsAutoGeneratedByComponent(cmp,cls))||this.SUPER(cls,dom)},processCssClasses:function(classes,target){var prefix=this.getExtCssClassPrefixRegexp(target);return prefix&&classes.sort(function(cls1,cls2){var test1=prefix.test(cls1),test2=prefix.test(cls2);return test1&&!test2?1:!test1&&test2?-1:0}),classes}}}),Class("Ariadne.ExtJSDomQueryFinder.Identifier.Id",{isa:Ariadne.DomQueryFinder.Identifier.Id,does:Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper,methods:{ignoreDomId:function(id,target){return this.domElementHasAutoGeneratedId(target)}}}),Class("Ariadne.ExtJSDomQueryFinder.Identifier.AttributeValue",{isa:Ariadne.DomQueryFinder.Identifier.AttributeValue,does:Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper,has:{attributes:function(){return["data-ref","aria-label"]}},methods:{ignoreAttribute:function(target,attributeName){var value=target.getAttribute(attributeName),cmp=this.getComponentOfDomElement(target);return!(!cmp||!this.valueIsAutoGeneratedByComponent(cmp,value))||this.SUPERARG(arguments)}}}),Class("Ariadne.ExtJSDomQueryFinder",{isa:Ariadne.DomQueryFinder,has:{},methods:{initIdentifiers:function(){this.addIdentifier(new Ariadne.ExtJSDomQueryFinder.Identifier.Id({shouldIgnoreDomElementId:this.shouldIgnoreDomElementId,uniqueDomNodeProperty:this.uniqueDomNodeProperty,finder:this,priority:1e6})),this.addIdentifier(new Ariadne.ExtJSDomQueryFinder.Identifier.CssClass({finder:this,priority:1e5})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.Contains({finder:this,priority:1e4})),this.addIdentifier(new Ariadne.ExtJSDomQueryFinder.Identifier.AttributeValue({finder:this,priority:1e3})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.TagName({finder:this,priority:100})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.NthOfType({finder:this,priority:10})),this.directChildIdentifier=new Ariadne.DomQueryFinder.Identifier.DirectChild({finder:this})},findQueries:function(target,root,options){return target&&target.dom&&target.dom.tagName&&(target=target.dom),this.SUPER(target,root,options)}}}),Role("Ariadne.ExtJSComponentQueryFinder.Role.ExtJSComponentHelper",{does:Ariadne.DomQueryFinder.Role.DomHelper,has:{},methods:{getComponentXType:function(cmp){var xtype=this.getComponentOwnXType(cmp);return xtype||((xtype=cmp.getXTypes&&cmp.getXTypes())?(xtype=xtype.split("/"))[xtype.length-1]:null)},getComponentOwnXType:function(cmp){return cmp.getXType&&cmp.getXType()||cmp.xtype||cmp.xtypes[0]},escapeCQSelector:function(selector){return this.escapeDomSelector(selector)},getExt4ProofXtype:function(cmp,Ext){var xtype=this.getComponentXType(cmp),escaped=this.escapeCQSelector(xtype),extVersion=Ext.getVersion("ext");return extVersion&&4==extVersion.major&&xtype!=escaped?{query:"[xtype="+escaped+"]",leading:!1}:{query:escaped,leading:!0}}}}),Role("Ariadne.ExtJSComponentQueryFinder.TreeWalker",{methods:{getParent:function(cmp){return cmp.getRefOwner&&cmp.getRefOwner()||cmp.ownerCt||this.Ext.ComponentQuery},contains:function(parentCmp,childCmp){var CQ=this.Ext.ComponentQuery;if(parentCmp==CQ)return!0;if(childCmp==CQ)return!1;for(;childCmp&&childCmp!=CQ;){if(childCmp==parentCmp)return!0;childCmp=this.getParent(childCmp)}return!1}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.XType",{isa:Ariadne.QueryFinder.Identifier,does:[Ariadne.ExtJSComponentQueryFinder.Role.ExtJSComponentHelper],methods:{identify:function(cmp,root,maze){var xtype=this.getComponentXType(cmp),escaped=this.escapeCQSelector(xtype);return[this.getExt4ProofXtype(cmp,this.finder.Ext),{query:escaped+"(true)",leading:!0,weight:1010}]}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.NthChild",{isa:Ariadne.QueryFinder.Identifier,does:[Ariadne.ExtJSComponentQueryFinder.Role.ExtJSComponentHelper],methods:{identify:function(cmp,root,maze){var container=this.finder.getParent(cmp);if(!container||container==root)return null;if(!container.items)return null;var index=container.items.indexOf(cmp);if(-1==index){var refItems=container.getRefItems&&container.getRefItems();if(!refItems)return null;for(var len=refItems.length,i=0;i<len;i++)if(refItems[i]===cmp){index=i;break}if(len<=i)return null}return{query:":ariadne-nth-child("+(index+1)+")",weight:1e6}}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.DirectChild",{isa:Ariadne.ExtJSComponentQueryFinder.Identifier.NthChild,methods:{identify:function(cmp,root,maze){var container=this.finder.getParent(cmp);if(container&&container!=root||!root.query){var segment=this.SUPERARG(arguments);return segment&&(segment.child=!0),segment}var safeXtype=this.getExt4ProofXtype(cmp,this.finder.Ext),query=safeXtype.query+(safeXtype.leading?"(true)":""),index=root.query(query+":root").indexOf(cmp);if(0<=index)return{query:query+":root("+(index+1)+")",leading:safeXtype.leading,weight:1e7}}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.PropertyValue",{isa:Ariadne.QueryFinder.Identifier,does:[Ariadne.ExtJSComponentQueryFinder.Role.ExtJSComponentHelper,Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper],has:{properties:function(){return["name","text","dataIndex","iconCls","type","title","inputType","boxLabel","fieldLabel"]}},methods:{initialize:function(cfg){this.properties=this.mergeArrayAttributeFromClassHierarchy("properties",cfg)},ignoreProperty:function(target,property){return this.valueIsAutoGeneratedByComponent(target,target[property])},identify:function(target,root,maze){for(var Ext=this.finder.Ext,properties=this.properties,segments=[],safeXtype=this.getExt4ProofXtype(target,Ext),i=0;i<properties.length;i++){var property=properties[i],value=target[property];value&&"string"==typeof value&&!(this.ignoreProperty(target,property)||"inputType"==property&&Ext.slider&&Ext.slider.Multi&&target instanceof Ext.slider.Multi||"inputType"==property&&Ext.form&&Ext.form.field&&Ext.form.field.ComboBox&&target instanceof Ext.form.field.ComboBox||"&#160;"==value)&&segments.push({query:safeXtype.query+"["+property+"="+this.escapeCQSelector(value)+"]",leading:safeXtype.leading})}return segments}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.Id",{isa:Ariadne.QueryFinder.Identifier,does:[Ariadne.ExtJSComponentQueryFinder.Role.ExtJSComponentHelper,Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper],methods:{identify:function(target,root,maze){var id=target.id;if(!id||this.ignoreComponentId(id,target,maze.finder.Ext))return null;var weight=maze.encounteredMandatoryId||!this.finder.enableMandatoryId?1e3:-1e5;return maze.encounteredMandatoryId=!0,{query:"#"+this.escapeCQSelector(id),weight:weight,isId:!0}},ignoreComponentId:function(id,comp,Ext){return this.componentHasAutoGeneratedId(comp,Ext)}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.ItemId",{isa:Ariadne.QueryFinder.Identifier,methods:{identify:function(target,root,maze){var itemId=target.itemId;if(itemId)return{query:"#"+itemId,weight:-1e3}}}}),Class("Ariadne.ExtJSComponentQueryFinder",{isa:Ariadne.QueryFinder,does:[Siesta.Util.Role.CanInstallCQRootPseudo,Ariadne.ExtJSComponentQueryFinder.TreeWalker,Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper],has:{Ext:null,uniqueComponentProperty:null},methods:{setExtByDomElement:function(dom){this.Ext=this.getExtByDomElement(dom)},setExt:function(Ext){this.Ext=Ext},initRecognizers:function(){},initIdentifiers:function(){this.addIdentifier(new Ariadne.ExtJSComponentQueryFinder.Identifier.Id({finder:this,priority:1e4})),this.addIdentifier(new Ariadne.ExtJSComponentQueryFinder.Identifier.ItemId({finder:this,priority:1e4})),this.addIdentifier(new Ariadne.ExtJSComponentQueryFinder.Identifier.PropertyValue({properties:this.uniqueComponentProperty,finder:this,priority:1e3})),this.addIdentifier(new Ariadne.ExtJSComponentQueryFinder.Identifier.XType({finder:this,priority:100})),this.addIdentifier(new Ariadne.ExtJSComponentQueryFinder.Identifier.NthChild({finder:this,priority:10})),this.directChildIdentifier=new Ariadne.ExtJSComponentQueryFinder.Identifier.DirectChild({finder:this})},doQuery:function(query,root){var CQ=this.Ext.ComponentQuery;return root==CQ&&(root=null),CQ.query(query,root)},findQueries:function(target,root,options){if(!target)throw new Error("No target");var Ext=this.Ext;if(!Ext||!Ext.ComponentQuery)return[];var CQ=Ext.ComponentQuery;this.installRootPseudoCQ(Ext),root=root||CQ;var parent=this.getParent(target);if(parent!=root&&!parent.items){var parentQueries=this.SUPER(parent,root,options),childQueries=this.SUPER(target,parent,options);if(parentQueries.length&&childQueries.length){var result=[];return parentQueries.forEach(function(parentQuery){childQueries.forEach(function(childQuery){result.push(parentQuery+" "+childQuery)})}),result}}return this.SUPER(target,root,options)}}}),Class("Siesta.Recorder.TargetExtractor.ExtJS",{isa:Siesta.Recorder.TargetExtractor,does:[Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper],has:{Ext:null,skipDomQuery:!1,uniqueComponentProperty:null},methods:{initialize:function(){this.SUPER(),this.ariadneDomFinder=new Ariadne.ExtJSDomQueryFinder({uniqueDomNodeProperty:this.uniqueDomNodeProperty,shouldIgnoreDomElementId:this.shouldIgnoreDomElementId});var properties=this.uniqueComponentProperty;properties=properties&&(properties instanceof Array?properties:[properties]),this.ariadneCQFinder=new Ariadne.ExtJSComponentQueryFinder({uniqueComponentProperty:properties}),this.swallowExceptions&&(this.findComponentQueryFor=this.safeBind(this.findComponentQueryFor),this.findCompositeQueryFor=this.safeBind(this.findCompositeQueryFor))},setExt:function(node){var doc=node.ownerDocument;this.Ext=(doc.defaultView||doc.parentWindow).Ext,this.ariadneCQFinder.setExt(this.Ext)},getTargets:function(event,saveOffset,targetOverride,onlyXY){if(onlyXY)return this.SUPER(event,saveOffset,targetOverride,onlyXY);var component,target=targetOverride||event.target;this.setExt(target);var hasCQ=this.Ext&&this.Ext.ComponentQuery&&this.Ext.versions&&!this.Ext.versions.touch;hasCQ&&(component=this.getComponentOfDomElement(target));var compEl=component&&(component.el||component.element);if(compEl=compEl&&compEl.dom,!hasCQ||compEl&&!compEl.contains(target))return this.SUPER(event,saveOffset,targetOverride);var result=[],hasCoordinates=null!=event.x&&null!=event.y;if(component){var componentQuery=this.findComponentQueryFor(component);if(componentQuery&&(result.unshift({type:"cq",target:componentQuery,offset:!hasCoordinates||!saveOffset&&this.isElementReachableAtCenter(compEl,!1)?null:this.findOffset(event.x,event.y,compEl)}),compEl!=target)){var compositeQuery=this.findCompositeQueryFor(target,componentQuery,component);compositeQuery&&result.unshift({type:"csq",target:compositeQuery,offset:!hasCoordinates||!saveOffset&&this.isElementReachableAtCenter(target,!1)?null:this.findOffset(event.x,event.y,target)})}}return result.concat(this.SUPER(event,saveOffset,targetOverride,this.skipDomQuery&&result.length))},findCompositeQueryFor:function(node,componentQuery,component){if(!componentQuery){if(!(component=this.getComponentOfDomElement(node)))return null;if(!(componentQuery=this.findComponentQueryFor(component)))return null}var root=(component.el||component.element).dom;if(node==root||!root.contains(node))return null;var compositeDomQuery=this.findDomQueryFor(node,root);return compositeDomQuery?componentQuery+" => "+compositeDomQuery:null},findComponentQueryFor:function(comp,root){return this.ariadneCQFinder.findQuery(comp,root)}}}),Class("Siesta.Recorder.ExtJS",{isa:Siesta.Recorder.Recorder,has:{extractorClass:Siesta.Recorder.TargetExtractor.ExtJS,moveCursorToSelectors:function(){return[".x-menu-item:not(.x-menu-item-separator)",".x-column-header"]}},methods:{addMoveCursorAction:function(event){event.target&&this.closest(event.target,"[class*=-dd-drag-proxy]",10)?this.addAction({action:"moveCursorTo",target:[{type:"xy",target:[event.x,event.y]}],sourceEvent:event,options:event.options}):this.SUPERARG(arguments)}}}),void 0!==Ext&&Ext.getVersion&&"6.0.1.250"==Ext.getVersion("ext")){var CodeMirror=function(){function CodeMirror(place,givenOptions){var options={},defaults=CodeMirror.defaults;for(var opt in defaults)defaults.hasOwnProperty(opt)&&(options[opt]=(givenOptions&&givenOptions.hasOwnProperty(opt)?givenOptions:defaults)[opt]);var wrapper=document.createElement("div");wrapper.className="CodeMirror"+(options.lineWrapping?" CodeMirror-wrap":""),wrapper.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;"></div><pre class="CodeMirror-cursor">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>',place.appendChild?place.appendChild(wrapper):place(wrapper);var inputDiv=wrapper.firstChild,input=inputDiv.firstChild,scroller=wrapper.lastChild,code=scroller.firstChild,mover=code.firstChild,gutter=mover.firstChild,gutterText=gutter.firstChild,lineSpace=gutter.nextSibling.firstChild,measure=lineSpace.firstChild,cursor=measure.nextSibling,selectionDiv=cursor.nextSibling,lineDiv=selectionDiv.nextSibling;themeChanged(),ios&&(input.style.width="0px"),webkit||(lineSpace.draggable=!0),lineSpace.style.outline="none",null!=options.tabindex&&(input.tabIndex=options.tabindex),options.autofocus&&focusInput(),options.gutter||options.lineNumbers||(gutter.style.display="none"),khtml&&(inputDiv.style.height="1px",inputDiv.style.position="absolute");try{stringWidth("x")}catch(e){throw e.message.match(/runtime/i)&&(e=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),e}var blinker,mode,work,focused,poll=new Delayed,highlight=new Delayed,doc=new BranchChunk([new LeafChunk([new Line("")])]);loadMode();var shiftSelecting,lastClick,lastDoubleClick,draggingText,updateInput,userSelChange,changes,textChanged,selectionChanged,leaveInputAlone,gutterDirty,callbacks,bracketHighlighted,maxWidth,sel={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},lastScrollPos=0,overwrite=!1,suppressEdits=!1,displayOffset=0,showingFrom=0,showingTo=0,lastSizeC=0,maxLine="",tabCache={};operation(function(){setValue(options.value||""),updateInput=!1})();var hasFocus,history=new History;if(connect(scroller,"mousedown",operation(function(e){setShift(e_prop(e,"shiftKey"));for(var n=e_target(e);n!=wrapper;n=n.parentNode)if(n.parentNode==code&&n!=mover)return;for(n=e_target(e);n!=wrapper;n=n.parentNode)if(n.parentNode==gutterText)return options.onGutterClick&&options.onGutterClick(instance,indexOf(gutterText.childNodes,n)+showingFrom,e),e_preventDefault(e);var start=posFromMouse(e);switch(e_button(e)){case 3:return void(gecko&&!mac&&onContextMenu(e));case 2:return void(start&&setCursor(start.line,start.ch,!0))}if(!start)return void(e_target(e)==scroller&&e_preventDefault(e));focused||onFocus();var now=+new Date;{if(lastDoubleClick&&lastDoubleClick.time>now-400&&posEq(lastDoubleClick.pos,start))return e_preventDefault(e),setTimeout(focusInput,20),function(line){setSelectionUser({line:line,ch:0},clipPos({line:line+1,ch:0}))}(start.line);if(lastClick&&lastClick.time>now-400&&posEq(lastClick.pos,start))return lastDoubleClick={time:now,pos:start},e_preventDefault(e),selectWordAt(start);lastClick={time:now,pos:start}}var going,last=start;if(options.dragDrop&&dragAndDrop&&!options.readOnly&&!posEq(sel.from,sel.to)&&!posLess(start,sel.from)&&!posLess(sel.to,start)){function dragEnd(e2){webkit&&(lineSpace.draggable=!1),draggingText=!1,up(),drop(),Math.abs(e.clientX-e2.clientX)+Math.abs(e.clientY-e2.clientY)<10&&(e_preventDefault(e2),setCursor(start.line,start.ch,!0),focusInput())}webkit&&(lineSpace.draggable=!0);var up=connect(document,"mouseup",operation(dragEnd),!0),drop=connect(scroller,"drop",operation(dragEnd),!0);return draggingText=!0,void(lineSpace.dragDrop&&lineSpace.dragDrop())}function done(e){clearTimeout(going);var cur=posFromMouse(e);cur&&setSelectionUser(start,cur),e_preventDefault(e),focusInput(),updateInput=!0,move(),up()}e_preventDefault(e),setCursor(start.line,start.ch,!0);var move=connect(document,"mousemove",operation(function(e){clearTimeout(going),e_preventDefault(e),(ie||e_button(e)?function extend(e){var cur=posFromMouse(e,!0);if(cur&&!posEq(cur,last)){focused||onFocus(),setSelectionUser(start,last=cur),updateInput=!1;var visible=visibleLines();(cur.line>=visible.to||cur.line<visible.from)&&(going=setTimeout(operation(function(){extend(e)}),150))}}:done)(e)}),!0);up=connect(document,"mouseup",operation(done),!0)})),connect(scroller,"dblclick",operation(function(e){for(var n=e_target(e);n!=wrapper;n=n.parentNode)if(n.parentNode==gutterText)return e_preventDefault(e);var start=posFromMouse(e);if(!start)return;lastDoubleClick={time:+new Date,pos:start},e_preventDefault(e),selectWordAt(start)})),connect(lineSpace,"selectstart",e_preventDefault),gecko||connect(scroller,"contextmenu",onContextMenu),connect(scroller,"scroll",function(){lastScrollPos=scroller.scrollTop,updateDisplay([]),options.fixedGutter&&(gutter.style.left=scroller.scrollLeft+"px"),options.onScroll&&options.onScroll(instance)}),connect(window,"resize",function(){updateDisplay(!0)}),connect(input,"keyup",operation(function(e){if(options.onKeyEvent&&options.onKeyEvent(instance,addStop(e)))return;16==e_prop(e,"keyCode")&&(shiftSelecting=null)})),connect(input,"input",fastPoll),connect(input,"keydown",operation(onKeyDown)),connect(input,"keypress",operation(function(e){pollingFast&&readInput();if(options.onKeyEvent&&options.onKeyEvent(instance,addStop(e)))return;var keyCode=e_prop(e,"keyCode"),charCode=e_prop(e,"charCode");if(window.opera&&keyCode==lastStoppedKey)return lastStoppedKey=null,void e_preventDefault(e);if((window.opera&&!e.which||khtml)&&handleKeyBinding(e))return;var ch=String.fromCharCode(null==charCode?keyCode:charCode);options.electricChars&&mode.electricChars&&options.smartIndent&&!options.readOnly&&-1<mode.electricChars.indexOf(ch)&&setTimeout(operation(function(){indentLine(sel.to.line,"smart")}),75);if(function(e,ch){var handled=lookupKey("'"+ch+"'",options.extraKeys,options.keyMap,function(b){return doHandleBinding(b,!0)});handled&&e_preventDefault(e);return handled}(e,ch))return;fastPoll()})),connect(input,"focus",onFocus),connect(input,"blur",onBlur),options.dragDrop){function drag_(e){options.onDragEvent&&options.onDragEvent(instance,addStop(e))||e_stop(e)}connect(lineSpace,"dragstart",function(e){var txt=getSelection();if(e.dataTransfer.setData("Text",txt),gecko||chrome){var img=document.createElement("img");img.scr="data:image/gif;base64,R0lGODdhAgACAIAAAAAAAP///ywAAAAAAgACAAACAoRRADs=",e.dataTransfer.setDragImage(img,0,0)}}),connect(scroller,"dragenter",drag_),connect(scroller,"dragover",drag_),connect(scroller,"drop",operation(function(e){if(options.onDragEvent&&options.onDragEvent(instance,addStop(e)))return;e.preventDefault();var pos=posFromMouse(e,!0),files=e.dataTransfer.files;if(!pos||options.readOnly)return;if(files&&files.length&&window.FileReader&&window.File){function loadFile(file,i){var reader=new FileReader;reader.onload=function(){text[i]=reader.result,++read==n&&(pos=clipPos(pos),operation(function(){var end=replaceRange(text.join(""),pos,pos);setSelectionUser(pos,end)})())},reader.readAsText(file)}for(var n=files.length,text=Array(n),read=0,i=0;i<n;++i)loadFile(files[i],i)}else try{(text=e.dataTransfer.getData("Text"))&&compoundChange(function(){var curFrom=sel.from,curTo=sel.to;setSelectionUser(pos,pos),draggingText&&replaceRange("",curFrom,curTo),replaceSelection(text),focusInput()})}catch(e){}}))}connect(scroller,"paste",function(){focusInput(),fastPoll()}),connect(input,"paste",fastPoll),connect(input,"cut",operation(function(){options.readOnly||replaceSelection("")})),khtml&&connect(code,"mouseup",function(){document.activeElement==input&&input.blur(),focusInput()});try{hasFocus=document.activeElement==input}catch(e){}function isLine(l){return 0<=l&&l<doc.size}hasFocus||options.autofocus?setTimeout(onFocus,20):onBlur();var instance=wrapper.CodeMirror={getValue:function(){var text=[];return doc.iter(0,doc.size,function(line){text.push(line.text)}),text.join("\n")},setValue:operation(setValue),getSelection:getSelection,replaceSelection:operation(replaceSelection),focus:function(){window.focus(),focusInput(),onFocus(),fastPoll()},setOption:function(option,value){var visible,oldVal=options[option];options[option]=value,"mode"==option||"indentUnit"==option?loadMode():"readOnly"==option&&"nocursor"==value?(onBlur(),input.blur()):"readOnly"!=option||value?"theme"==option?themeChanged():"lineWrapping"==option&&oldVal!=value?operation(wrappingChanged)():"tabSize"==option&&updateDisplay(!0):resetInput(!0),"lineNumbers"!=option&&"gutter"!=option&&"firstLineNumber"!=option&&"theme"!=option||(visible=options.gutter||options.lineNumbers,gutter.style.display=visible?"":"none",visible?gutterDirty=!0:lineDiv.parentNode.style.marginLeft=0,updateDisplay(!0))},getOption:function(option){return options[option]},undo:operation(function(){unredoHelper(history.done,history.undone)}),redo:operation(function(){unredoHelper(history.undone,history.done)}),indentLine:operation(function(n,dir){"string"!=typeof dir&&(dir=null==dir?options.smartIndent?"smart":"prev":dir?"add":"subtract"),isLine(n)&&indentLine(n,dir)}),indentSelection:operation(function(mode){if(posEq(sel.from,sel.to))return indentLine(sel.from.line,mode);for(var e=sel.to.line-(sel.to.ch?0:1),i=sel.from.line;i<=e;++i)indentLine(i,mode)}),historySize:function(){return{undo:history.done.length,redo:history.undone.length}},clearHistory:function(){history=new History},matchBrackets:operation(function(){matchBrackets(!0)}),getTokenAt:operation(function(pos){return getLine((pos=clipPos(pos)).line).getTokenAt(mode,getStateBefore(pos.line),pos.ch)}),getStateAfter:function(line){return getStateBefore((line=clipLine(null==line?doc.size-1:line))+1)},cursorCoords:function(start,mode){return null==start&&(start=sel.inverted),this.charCoords(start?sel.from:sel.to,mode)},charCoords:function(pos,mode){return pos=clipPos(pos),"local"==mode?localCoords(pos,!1):"div"==mode?localCoords(pos,!0):function(pos){var local=localCoords(pos,!0),off=eltOffset(lineSpace);return{x:off.left+local.x,y:off.top+local.y,yBot:off.top+local.yBot}}(pos)},coordsChar:function(coords){var off=eltOffset(lineSpace);return coordsChar(coords.x-off.left,coords.y-off.top)},markText:operation(markText),setBookmark:function(pos){var bm=new Bookmark((pos=clipPos(pos)).ch);return getLine(pos.line).addMark(bm),bm},findMarksAt:function(pos){pos=clipPos(pos);var markers=[],marked=getLine(pos.line).marked;if(!marked)return markers;for(var i=0,e=marked.length;i<e;++i){var m=marked[i];(null==m.from||m.from<=pos.ch)&&(null==m.to||m.to>=pos.ch)&&markers.push(m.marker||m)}return markers},setMarker:operation(function(line,text,className){"number"==typeof line&&(line=getLine(clipLine(line)));return line.gutterMarker={text:text,style:className},gutterDirty=!0,line}),clearMarker:operation(function(line){"number"==typeof line&&(line=getLine(clipLine(line)));line.gutterMarker=null,gutterDirty=!0}),setLineClass:operation(function(handle,className,bgClassName){return changeLine(handle,function(line){return(line.className!=className||line.bgClassName!=bgClassName)&&(line.className=className,line.bgClassName=bgClassName,1)})}),hideLine:operation(function(h){return setLineHidden(h,!0)}),showLine:operation(function(h){return setLineHidden(h,!1)}),onDeleteLine:function(line,f){if("number"==typeof line){if(!isLine(line))return null;line=getLine(line)}return(line.handlers||(line.handlers=[])).push(f),line},lineInfo:function(line){if("number"==typeof line){if(!isLine(line))return null;var n=line;if(!(line=getLine(line)))return null}else{if(null==(n=lineNo(line)))return null}var marker=line.gutterMarker;return{line:n,handle:line,text:line.text,markerText:marker&&marker.text,markerClass:marker&&marker.style,lineClass:line.className,bgClass:line.bgClassName}},addWidget:function(pos,node,scroll,vert,horiz){var top=(pos=localCoords(clipPos(pos))).yBot,left=pos.x;if(node.style.position="absolute",code.appendChild(node),"over"==vert)top=pos.y;else if("near"==vert){var vspace=Math.max(scroller.offsetHeight,doc.height*textHeight()),hspace=Math.max(code.clientWidth,lineSpace.clientWidth)-paddingLeft();pos.yBot+node.offsetHeight>vspace&&pos.y>node.offsetHeight&&(top=pos.y-node.offsetHeight),left+node.offsetWidth>hspace&&(left=hspace-node.offsetWidth)}node.style.top=top+paddingTop()+"px",node.style.left=node.style.right="","right"==horiz?(left=code.clientWidth-node.offsetWidth,node.style.right="0px"):("left"==horiz?left=0:"middle"==horiz&&(left=(code.clientWidth-node.offsetWidth)/2),node.style.left=left+paddingLeft()+"px"),scroll&&scrollIntoView(left,top,left+node.offsetWidth,top+node.offsetHeight)},lineCount:function(){return doc.size},clipPos:clipPos,getCursor:function(start){return null==start&&(start=sel.inverted),{line:(x=start?sel.from:sel.to).line,ch:x.ch};var x},somethingSelected:function(){return!posEq(sel.from,sel.to)},setCursor:operation(function(line,ch,user){null==ch&&"number"==typeof line.line?setCursor(line.line,line.ch,user):setCursor(line,ch,user)}),setSelection:operation(function(from,to,user){(user?setSelectionUser:setSelection)(clipPos(from),clipPos(to||from))}),getLine:function(line){if(isLine(line))return getLine(line).text},getLineHandle:function(line){if(isLine(line))return getLine(line)},setLine:operation(function(line,text){isLine(line)&&replaceRange(text,{line:line,ch:0},{line:line,ch:getLine(line).text.length})}),removeLine:operation(function(line){isLine(line)&&replaceRange("",{line:line,ch:0},clipPos({line:line+1,ch:0}))}),replaceRange:operation(replaceRange),getRange:function(from,to){return getRange(clipPos(from),clipPos(to))},triggerOnKeyDown:operation(onKeyDown),execCommand:function(cmd){return commands[cmd](instance)},moveH:operation(function(dir,unit){var pos=dir<0?sel.from:sel.to;(shiftSelecting||posEq(sel.from,sel.to))&&(pos=findPosH(dir,unit));setCursor(pos.line,pos.ch,!0)}),deleteH:operation(function(dir,unit){posEq(sel.from,sel.to)?dir<0?replaceRange("",findPosH(dir,unit),sel.to):replaceRange("",sel.from,findPosH(dir,unit)):replaceRange("",sel.from,sel.to);userSelChange=!0}),moveV:operation(function(dir,unit){var dist=0,pos=localCoords(sel.inverted?sel.from:sel.to,!0);null!=goalColumn&&(pos.x=goalColumn);"page"==unit?dist=Math.min(scroller.clientHeight,window.innerHeight||document.documentElement.clientHeight):"line"==unit&&(dist=textHeight());var target=coordsChar(pos.x,pos.y+dist*dir+2);"page"==unit&&(scroller.scrollTop+=localCoords(target,!0).y-pos.y);setCursor(target.line,target.ch,!0),goalColumn=pos.x}),toggleOverwrite:function(){overwrite?(overwrite=!1,cursor.className=cursor.className.replace(" CodeMirror-overwrite","")):(overwrite=!0,cursor.className+=" CodeMirror-overwrite")},posFromIndex:function(off){var ch,lineNo=0;return doc.iter(0,doc.size,function(line){var sz=line.text.length+1;if(off<sz)return ch=off,!0;off-=sz,++lineNo}),clipPos({line:lineNo,ch:ch})},indexFromPos:function(coords){if(coords.line<0||coords.ch<0)return 0;var index=coords.ch;return doc.iter(0,coords.line,function(line){index+=line.text.length+1}),index},scrollTo:function(x,y){null!=x&&(scroller.scrollLeft=x),null!=y&&(scroller.scrollTop=y),updateDisplay([])},operation:function(f){return operation(f)()},compoundChange:function(f){return compoundChange(f)},refresh:function(){updateDisplay(!0),scroller.scrollHeight>lastScrollPos&&(scroller.scrollTop=lastScrollPos)},getInputField:function(){return input},getWrapperElement:function(){return wrapper},getScrollerElement:function(){return scroller},getGutterElement:function(){return gutter}};function getLine(n){return function(chunk,n){for(;!chunk.lines;)for(var i=0;;++i){var child=chunk.children[i],sz=child.chunkSize();if(n<sz){chunk=child;break}n-=sz}return chunk.lines[n]}(doc,n)}function updateLineHeight(line,height){gutterDirty=!0;for(var diff=height-line.height,n=line;n;n=n.parent)n.height+=diff}function setValue(code){var top={line:0,ch:0};updateLines(top,{line:doc.size-1,ch:getLine(doc.size-1).text.length},splitLines(code),top,top),updateInput=!0}function doHandleBinding(bound,dropShift){if("string"==typeof bound&&!(bound=commands[bound]))return!1;var prevShift=shiftSelecting;try{options.readOnly&&(suppressEdits=!0),dropShift&&(shiftSelecting=null),bound(instance)}catch(e){if(e!=Pass)throw e;return!1}finally{shiftSelecting=prevShift,suppressEdits=!1}return!0}function handleKeyBinding(e){var startMap=getKeyMap(options.keyMap),next=startMap.auto;clearTimeout(maybeTransition),next&&!function(event){var name=keyNames[e_prop(event,"keyCode")];return"Ctrl"==name||"Alt"==name||"Shift"==name||"Mod"==name}(e)&&(maybeTransition=setTimeout(function(){getKeyMap(options.keyMap)==startMap&&(options.keyMap=next.call?next.call(null,instance):next)},50));var name=keyNames[e_prop(e,"keyCode")],handled=!1;if(null==name||e.altGraphKey)return!1;e_prop(e,"altKey")&&(name="Alt-"+name),e_prop(e,"ctrlKey")&&(name="Ctrl-"+name),e_prop(e,"metaKey")&&(name="Cmd-"+name);var stopped=!1;function stop(){stopped=!0}return handled=e_prop(e,"shiftKey")?lookupKey("Shift-"+name,options.extraKeys,options.keyMap,function(b){return doHandleBinding(b,!0)},stop)||lookupKey(name,options.extraKeys,options.keyMap,function(b){return"string"==typeof b&&/^go[A-Z]/.test(b)&&doHandleBinding(b)},stop):lookupKey(name,options.extraKeys,options.keyMap,doHandleBinding,stop),stopped&&(handled=!1),handled&&(e_preventDefault(e),ie&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),handled}var maybeTransition,lastStoppedKey=null;function onKeyDown(e){if(focused||onFocus(),ie&&27==e.keyCode&&(e.returnValue=!1),pollingFast&&readInput()&&(pollingFast=!1),!options.onKeyEvent||!options.onKeyEvent(instance,addStop(e))){var code=e_prop(e,"keyCode");setShift(16==code||e_prop(e,"shiftKey"));var handled=handleKeyBinding(e);window.opera&&(lastStoppedKey=handled?code:null,!handled&&88==code&&e_prop(e,mac?"metaKey":"ctrlKey")&&replaceSelection(""))}}function onFocus(){"nocursor"!=options.readOnly&&(focused||(options.onFocus&&options.onFocus(instance),focused=!0,-1==wrapper.className.search(/\bCodeMirror-focused\b/)&&(wrapper.className+=" CodeMirror-focused"),leaveInputAlone||resetInput(!0)),slowPoll(),restartBlink())}function onBlur(e){focused&&(options.onBlur&&options.onBlur(instance,e),focused=!1,bracketHighlighted&&operation(function(){bracketHighlighted&&(bracketHighlighted(),bracketHighlighted=null)})(),wrapper.className=wrapper.className.replace(" CodeMirror-focused","")),clearInterval(blinker),setTimeout(function(){focused||(shiftSelecting=null)},150)}function updateLines(from,to,newText,selFrom,selTo){if(!suppressEdits){if(history){var old=[];for(doc.iter(from.line,to.line+1,function(line){old.push(line.text)}),history.addChange(from.line,newText.length,old);history.done.length>options.undoDepth;)history.done.shift()}updateLinesNoUndo(from,to,newText,selFrom,selTo)}}function unredoHelper(from,to){if(from.length){for(var set=from.pop(),out=[],i=set.length-1;0<=i;--i){var change=set[i],replaced=[],end=change.start+change.added;doc.iter(change.start,end,function(line){replaced.push(line.text)}),out.push({start:change.start,added:change.old.length,old:replaced});var pos=clipPos({line:change.start+change.old.length-1,ch:editEnd(replaced[replaced.length-1],change.old[change.old.length-1])});updateLinesNoUndo({line:change.start,ch:0},{line:end-1,ch:getLine(end-1).text.length},change.old,pos,pos)}updateInput=!0,to.push(out)}}function updateLinesNoUndo(from,to,newText,selFrom,selTo){if(!suppressEdits){var recomputeMaxLength=!1,maxLineLength=maxLine.length;options.lineWrapping||doc.iter(from.line,to.line+1,function(line){if(line.text.length==maxLineLength)return recomputeMaxLength=!0}),(from.line!=to.line||1<newText.length)&&(gutterDirty=!0);var nlines=to.line-from.line,firstLine=getLine(from.line),lastLine=getLine(to.line);if(0==from.ch&&0==to.ch&&""==newText[newText.length-1]){var added=[],prevLine=null;from.line?(prevLine=getLine(from.line-1)).fixMarkEnds(lastLine):lastLine.fixMarkStarts();for(var i=0,e=newText.length-1;i<e;++i)added.push(Line.inheritMarks(newText[i],prevLine));nlines&&doc.remove(from.line,nlines,callbacks),added.length&&doc.insert(from.line,added)}else if(firstLine==lastLine)if(1==newText.length)firstLine.replace(from.ch,to.ch,newText[0]);else{lastLine=firstLine.split(to.ch,newText[newText.length-1]),firstLine.replace(from.ch,null,newText[0]),firstLine.fixMarkEnds(lastLine);for(added=[],i=1,e=newText.length-1;i<e;++i)added.push(Line.inheritMarks(newText[i],firstLine));added.push(lastLine),doc.insert(from.line+1,added)}else if(1==newText.length)firstLine.replace(from.ch,null,newText[0]),lastLine.replace(null,to.ch,""),firstLine.append(lastLine),doc.remove(from.line+1,nlines,callbacks);else{added=[];firstLine.replace(from.ch,null,newText[0]),lastLine.replace(null,to.ch,newText[newText.length-1]),firstLine.fixMarkEnds(lastLine);for(i=1,e=newText.length-1;i<e;++i)added.push(Line.inheritMarks(newText[i],firstLine));1<nlines&&doc.remove(from.line+1,nlines-1,callbacks),doc.insert(from.line+1,added)}if(options.lineWrapping){var perLine=Math.max(5,scroller.clientWidth/charWidth()-3);doc.iter(from.line,from.line+newText.length,function(line){if(!line.hidden){var guess=Math.ceil(line.text.length/perLine)||1;guess!=line.height&&updateLineHeight(line,guess)}})}else doc.iter(from.line,from.line+newText.length,function(line){var l=line.text;l.length>maxLineLength&&(maxLineLength=(maxLine=l).length,maxWidth=null,recomputeMaxLength=!1)}),recomputeMaxLength&&(maxLineLength=0,maxLine="",maxWidth=null,doc.iter(0,doc.size,function(line){var l=line.text;l.length>maxLineLength&&(maxLineLength=l.length,maxLine=l)}));for(var newWork=[],lendiff=newText.length-nlines-1,l=(i=0,work.length);i<l;++i){var task=work[i];task<from.line?newWork.push(task):task>to.line&&newWork.push(task+lendiff)}var start,end,state,hlEnd=from.line+Math.min(newText.length,500);start=from.line,end=hlEnd,state=getStateBefore(start),doc.iter(start,end,function(line){line.highlight(mode,state,options.tabSize),line.stateAfter=copyState(mode,state)}),newWork.push(hlEnd),work=newWork,startWorker(100),changes.push({from:from.line,to:to.line+1,diff:lendiff});var changeObj={from:from,to:to,text:newText};if(textChanged){for(var cur=textChanged;cur.next;cur=cur.next);cur.next=changeObj}else textChanged=changeObj;setSelection(selFrom,selTo,updateLine(sel.from.line),updateLine(sel.to.line)),scroller.clientHeight&&(code.style.height=doc.height*textHeight()+2*paddingTop()+"px")}function updateLine(n){return n<=Math.min(to.line,to.line+lendiff)?n:n+lendiff}}function replaceRange(code,from,to){function adjustPos(pos){if(posLess(pos,from))return pos;if(!posLess(to,pos))return end;var line=pos.line+code.length-(to.line-from.line)-1,ch=pos.ch;return pos.line==to.line&&(ch+=code[code.length-1].length-(to.ch-(to.line==from.line?from.ch:0))),{line:line,ch:ch}}var end;return from=clipPos(from),to=to?clipPos(to):from,replaceRange1(code=splitLines(code),from,to,function(end1){return end=end1,{from:adjustPos(sel.from),to:adjustPos(sel.to)}}),end}function replaceSelection(code,collapse){replaceRange1(splitLines(code),sel.from,sel.to,function(end){return"end"==collapse?{from:end,to:end}:"start"==collapse?{from:sel.from,to:sel.from}:{from:sel.from,to:end}})}function replaceRange1(code,from,to,computeSel){var endch=1==code.length?code[0].length+from.ch:code[code.length-1].length,newSel=computeSel({line:from.line+code.length-1,ch:endch});updateLines(from,to,code,newSel.from,newSel.to)}function getRange(from,to){var l1=from.line,l2=to.line;if(l1==l2)return getLine(l1).text.slice(from.ch,to.ch);var code=[getLine(l1).text.slice(from.ch)];return doc.iter(l1+1,l2,function(line){code.push(line.text)}),code.push(getLine(l2).text.slice(0,to.ch)),code.join("\n")}function getSelection(){return getRange(sel.from,sel.to)}var pollingFast=!1;function slowPoll(){pollingFast||poll.set(options.pollInterval,function(){startOperation(),readInput(),focused&&slowPoll(),endOperation()})}function fastPoll(){var missed=!1;pollingFast=!0,poll.set(20,function p(){startOperation(),readInput()||missed?(pollingFast=!1,slowPoll()):(missed=!0,poll.set(60,p)),endOperation()})}var prevInput="";function readInput(){if(leaveInputAlone||!focused||hasSelection(input)||options.readOnly)return!1;var text=input.value;if(text==prevInput)return!1;shiftSelecting=null;for(var same=0,l=Math.min(prevInput.length,text.length);same<l&&prevInput[same]==text[same];)++same;return same<prevInput.length?sel.from={line:sel.from.line,ch:sel.from.ch-(prevInput.length-same)}:overwrite&&posEq(sel.from,sel.to)&&(sel.to={line:sel.to.line,ch:Math.min(getLine(sel.to.line).text.length,sel.to.ch+(text.length-same))}),replaceSelection(text.slice(same),"end"),prevInput=text,!0}function resetInput(user){posEq(sel.from,sel.to)?user&&(prevInput=input.value=""):(prevInput="",input.value=getSelection(),selectInput(input))}function focusInput(){"nocursor"!=options.readOnly&&input.focus()}function scrollCursorIntoView(){var cursor=localCoords(sel.inverted?sel.from:sel.to),x=options.lineWrapping?Math.min(cursor.x,lineSpace.offsetWidth):cursor.x;return scrollIntoView(x,cursor.y,x,cursor.yBot)}function scrollIntoView(x1,y1,x2,y2){var pl=paddingLeft(),pt=paddingTop();y1+=pt,y2+=pt,x1+=pl,x2+=pl;var screen=scroller.clientHeight,screentop=scroller.scrollTop,scrolled=!1,result=!0;y1<screentop?(scroller.scrollTop=Math.max(0,y1),scrolled=!0):screentop+screen<y2&&(scroller.scrollTop=y2-screen,scrolled=!0);var screenw=scroller.clientWidth,screenleft=scroller.scrollLeft,gutterw=options.fixedGutter?gutter.clientWidth:0,atLeft=x1<gutterw+pl+10;return x1<screenleft+gutterw||atLeft?(atLeft&&(x1=0),scroller.scrollLeft=Math.max(0,x1-10-gutterw),scrolled=!0):screenw+screenleft-3<x2&&(scroller.scrollLeft=x2+10-screenw,scrolled=!0,x2>code.clientWidth&&(result=!1)),scrolled&&options.onScroll&&options.onScroll(instance),result}function visibleLines(){var lh=textHeight(),top=scroller.scrollTop-paddingTop(),fromHeight=Math.max(0,Math.floor(top/lh)),toHeight=Math.ceil((top+scroller.clientHeight)/lh);return{from:lineAtHeight(doc,fromHeight),to:lineAtHeight(doc,toHeight)}}function updateDisplay(changes,suppressCallback){if(scroller.clientWidth){var visible=visibleLines();if(!(!0!==changes&&0==changes.length&&visible.from>showingFrom&&visible.to<showingTo)){var from=Math.max(visible.from-100,0),to=Math.min(doc.size,visible.to+100);showingFrom<from&&from-showingFrom<20&&(from=showingFrom),to<showingTo&&showingTo-to<20&&(to=Math.min(doc.size,showingTo));for(var intact=!0===changes?[]:function(intact,changes){for(var i=0,l=changes.length||0;i<l;++i){for(var change=changes[i],intact2=[],diff=change.diff||0,j=0,l2=intact.length;j<l2;++j){var range=intact[j];change.to<=range.from&&change.diff?intact2.push({from:range.from+diff,to:range.to+diff,domStart:range.domStart}):change.to<=range.from||change.from>=range.to?intact2.push(range):(change.from>range.from&&intact2.push({from:range.from,to:change.from,domStart:range.domStart}),change.to<range.to&&intact2.push({from:change.to+diff,to:range.to+diff,domStart:range.domStart+(change.to-range.from)}))}intact=intact2}return intact}([{from:showingFrom,to:showingTo,domStart:0}],changes),intactLines=0,i=0;i<intact.length;++i){var range=intact[i];range.from<from&&(range.domStart+=from-range.from,range.from=from),range.to>to&&(range.to=to),range.from>=range.to?intact.splice(i--,1):intactLines+=range.to-range.from}if(intactLines!=to-from||from!=showingFrom||to!=showingTo){intact.sort(function(a,b){return a.domStart-b.domStart});var th=textHeight(),gutterDisplay=gutter.style.display;lineDiv.style.display="none",function(from,to,intact){if(intact.length){function killNode(node){var tmp=node.nextSibling;return node.parentNode.removeChild(node),tmp}for(var domPos=0,curNode=lineDiv.firstChild,i=0;i<intact.length;++i){for(var cur=intact[i];cur.domStart>domPos;)curNode=killNode(curNode),domPos++;for(var j=0,e=cur.to-cur.from;j<e;++j)curNode=curNode.nextSibling,domPos++}for(;curNode;)curNode=killNode(curNode)}else lineDiv.innerHTML="";var nextIntact=intact.shift(),scratch=(curNode=lineDiv.firstChild,j=from,document.createElement("div"));doc.iter(from,to,function(line){if(nextIntact&&nextIntact.to==j&&(nextIntact=intact.shift()),!nextIntact||nextIntact.from>j){if(line.hidden)var html=scratch.innerHTML="<pre></pre>";else{html="<pre"+(line.className?' class="'+line.className+'"':"")+">"+line.getHTML(makeTab)+"</pre>";line.bgClassName&&(html='<div style="position: relative"><pre class="'+line.bgClassName+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+html+"</div>")}scratch.innerHTML=html,lineDiv.insertBefore(scratch.firstChild,curNode)}else curNode=curNode.nextSibling;++j})}(from,to,intact),lineDiv.style.display=gutter.style.display="";var different=from!=showingFrom||to!=showingTo||lastSizeC!=scroller.clientHeight+th;if(different&&(lastSizeC=scroller.clientHeight+th),showingTo=to,displayOffset=heightAtLine(doc,showingFrom=from),mover.style.top=displayOffset*th+"px",scroller.clientHeight&&(code.style.height=doc.height*th+2*paddingTop()+"px"),lineDiv.childNodes.length!=showingTo-showingFrom)throw new Error("BAD PATCH! "+JSON.stringify(intact)+" size="+(showingTo-showingFrom)+" nodes="+lineDiv.childNodes.length);return options.lineWrapping?checkHeights():(null==maxWidth&&(maxWidth=stringWidth(maxLine)),maxWidth>scroller.clientWidth?(lineSpace.style.width=maxWidth+"px",code.style.width="",code.style.width=scroller.scrollWidth+"px"):lineSpace.style.width=code.style.width=""),gutter.style.display=gutterDisplay,(different||gutterDirty)&&updateGutter()&&options.lineWrapping&&checkHeights()&&updateGutter(),updateSelection(),!suppressCallback&&options.onUpdate&&options.onUpdate(instance),!0}}}else showingFrom=showingTo=displayOffset=0;function checkHeights(){maxWidth=scroller.clientWidth;var curNode=lineDiv.firstChild,heightChanged=!1;return doc.iter(showingFrom,showingTo,function(line){if(!line.hidden){var height=Math.round(curNode.offsetHeight/th)||1;line.height!=height&&(updateLineHeight(line,height),gutterDirty=heightChanged=!0)}curNode=curNode.nextSibling}),heightChanged&&(code.style.height=doc.height*th+2*paddingTop()+"px"),heightChanged}}function updateGutter(){if(options.gutter||options.lineNumbers){var hText=mover.offsetHeight,hEditor=scroller.clientHeight;gutter.style.height=(hText-hEditor<2?hEditor:hText)+"px";var normalNode,html=[],i=showingFrom;if(doc.iter(showingFrom,Math.max(showingTo,showingFrom+1),function(line){if(line.hidden)html.push("<pre></pre>");else{var marker=line.gutterMarker,text=options.lineNumbers?i+options.firstLineNumber:null;marker&&marker.text?text=marker.text.replace("%N%",null!=text?text:""):null==text&&(text=" "),html.push(marker&&marker.style?'<pre class="'+marker.style+'">':"<pre>",text);for(var j=1;j<line.height;++j)html.push("<br/>&#160;");html.push("</pre>"),marker||(normalNode=i)}++i}),gutter.style.display="none",gutterText.innerHTML=html.join(""),null!=normalNode){for(var node=gutterText.childNodes[normalNode-showingFrom],minwidth=String(doc.size).length,val=function(node){return node.textContent||node.innerText||node.nodeValue||""}(node),pad="";val.length+pad.length<minwidth;)pad+=" ";pad&&node.insertBefore(document.createTextNode(pad),node.firstChild)}gutter.style.display="";var resized=2<Math.abs((parseInt(lineSpace.style.marginLeft)||0)-gutter.offsetWidth);return lineSpace.style.marginLeft=gutter.offsetWidth+"px",gutterDirty=!1,resized}}function updateSelection(){var collapsed=posEq(sel.from,sel.to),fromPos=localCoords(sel.from,!0),toPos=collapsed?fromPos:localCoords(sel.to,!0),headPos=sel.inverted?fromPos:toPos,th=textHeight(),wrapOff=eltOffset(wrapper),lineOff=eltOffset(lineDiv);if(inputDiv.style.top=Math.max(0,Math.min(scroller.offsetHeight,headPos.y+lineOff.top-wrapOff.top))+"px",inputDiv.style.left=Math.max(0,Math.min(scroller.offsetWidth,headPos.x+lineOff.left-wrapOff.left))+"px",collapsed)cursor.style.top=headPos.y+"px",cursor.style.left=(options.lineWrapping?Math.min(headPos.x,lineSpace.offsetWidth):headPos.x)+"px",cursor.style.display="",selectionDiv.style.display="none";else{var sameLine=fromPos.y==toPos.y,html="",clientWidth=lineSpace.clientWidth||lineSpace.offsetWidth,clientHeight=lineSpace.clientHeight||lineSpace.offsetHeight;function add(left,top,right,height){html+='<div class="CodeMirror-selected" style="position: absolute; left: '+left+"px; top: "+top+"px; "+(quirksMode?"width: "+(right?clientWidth-right-left:clientWidth)+"px":"right: "+right+"px")+"; height: "+height+'px"></div>'}if(sel.from.ch&&0<=fromPos.y){var right=sameLine?clientWidth-toPos.x:0;add(fromPos.x,fromPos.y,right,th)}var middleStart=Math.max(0,fromPos.y+(sel.from.ch?th:0)),middleHeight=Math.min(toPos.y,clientHeight)-middleStart;.2*th<middleHeight&&add(0,middleStart,0,middleHeight),sameLine&&sel.from.ch||!(toPos.y<clientHeight-.5*th)||add(0,toPos.y,clientWidth-toPos.x,th),selectionDiv.innerHTML=html,cursor.style.display="none",selectionDiv.style.display=""}}function setShift(val){shiftSelecting=val?shiftSelecting||(sel.inverted?sel.to:sel.from):null}function setSelectionUser(from,to){var sh=shiftSelecting&&clipPos(shiftSelecting);sh&&(posLess(sh,from)?from=sh:posLess(to,sh)&&(to=sh)),setSelection(from,to),userSelChange=!0}function setSelection(from,to,oldFrom,oldTo){if((goalColumn=null)==oldFrom&&(oldFrom=sel.from.line,oldTo=sel.to.line),!posEq(sel.from,from)||!posEq(sel.to,to)){if(posLess(to,from)){var tmp=to;to=from,from=tmp}if(from.line!=oldFrom){var from1=skipHidden(from,oldFrom,sel.from.ch);from1?from=from1:setLineHidden(from.line,!1)}if(to.line!=oldTo&&(to=skipHidden(to,oldTo,sel.to.ch)),posEq(from,to)||posEq(from,sel.to)?sel.inverted=!1:posEq(to,sel.from)&&(sel.inverted=!0),options.autoClearEmptyLines&&posEq(sel.from,sel.to))if((sel.inverted?from:to).line!=sel.from.line&&sel.from.line<doc.size){var oldLine=getLine(sel.from.line);/^\s+$/.test(oldLine.text)&&setTimeout(operation(function(){if(oldLine.parent&&/^\s+$/.test(oldLine.text)){var no=lineNo(oldLine);replaceRange("",{line:no,ch:0},{line:no,ch:oldLine.text.length})}}))}sel.from=from,sel.to=to,selectionChanged=!0}}function skipHidden(pos,oldLine,oldCh){function getNonHidden(dir){for(var lNo=pos.line+dir,end=1==dir?doc.size:-1;lNo!=end;){var line=getLine(lNo);if(!line.hidden){var ch=pos.ch;return(toEnd||oldCh<ch||ch>line.text.length)&&(ch=line.text.length),{line:lNo,ch:ch}}lNo+=dir}}var line=getLine(pos.line),toEnd=pos.ch==line.text.length&&pos.ch!=oldCh;return line.hidden?pos.line>=oldLine?getNonHidden(1)||getNonHidden(-1):getNonHidden(-1)||getNonHidden(1):pos}function setCursor(line,ch,user){var pos=clipPos({line:line,ch:ch||0});(user?setSelectionUser:setSelection)(pos,pos)}function clipLine(n){return Math.max(0,Math.min(n,doc.size-1))}function clipPos(pos){if(pos.line<0)return{line:0,ch:0};if(pos.line>=doc.size)return{line:doc.size-1,ch:getLine(doc.size-1).text.length};var ch=pos.ch,linelen=getLine(pos.line).text.length;return null==ch||linelen<ch?{line:pos.line,ch:linelen}:ch<0?{line:pos.line,ch:0}:pos}function findPosH(dir,unit){var end=sel.inverted?sel.from:sel.to,line=end.line,ch=end.ch,lineObj=getLine(line);function moveOnce(boundToLine){if(ch==(dir<0?0:lineObj.text.length)){if(boundToLine||!function(){for(var l=line+dir,e=dir<0?-1:doc.size;l!=e;l+=dir){var lo=getLine(l);if(!lo.hidden)return line=l,lineObj=lo,1}}())return;ch=dir<0?lineObj.text.length:0}else ch+=dir;return 1}if("char"==unit)moveOnce();else if("column"==unit)moveOnce(!0);else if("word"==unit)for(var sawWord=!1;!(dir<0)||moveOnce();){if(isWordChar(lineObj.text.charAt(ch)))sawWord=!0;else if(sawWord){dir<0&&(dir=1,moveOnce());break}if(0<dir&&!moveOnce())break}return{line:line,ch:ch}}var goalColumn=null;function selectWordAt(pos){for(var line=getLine(pos.line).text,start=pos.ch,end=pos.ch;0<start&&isWordChar(line.charAt(start-1));)--start;for(;end<line.length&&isWordChar(line.charAt(end));)++end;setSelectionUser({line:pos.line,ch:start},{line:pos.line,ch:end})}function indentLine(n,how){if("smart"==(how=how||"add"))if(mode.indent)var state=getStateBefore(n);else how="prev";var indentation,line=getLine(n),curSpace=line.indentation(options.tabSize),curSpaceString=line.text.match(/^\s*/)[0];if("prev"==how?indentation=n?getLine(n-1).indentation(options.tabSize):0:"smart"==how?indentation=mode.indent(state,line.text.slice(curSpaceString.length),line.text):"add"==how?indentation=curSpace+options.indentUnit:"subtract"==how&&(indentation=curSpace-options.indentUnit),(indentation=Math.max(0,indentation))-curSpace){indentString="";var pos=0;if(options.indentWithTabs)for(var i=Math.floor(indentation/options.tabSize);i;--i)pos+=options.tabSize,indentString+="\t";for(;pos<indentation;)++pos,indentString+=" "}else{if(sel.from.line!=n&&sel.to.line!=n)return;var indentString=curSpaceString}replaceRange(indentString,{line:n,ch:0},{line:n,ch:curSpaceString.length})}function loadMode(){mode=CodeMirror.getMode(options,options.mode),doc.iter(0,doc.size,function(line){line.stateAfter=null}),work=[0],startWorker()}function wrappingChanged(from,to){if(options.lineWrapping){wrapper.className+=" CodeMirror-wrap";var perLine=scroller.clientWidth/charWidth()-3;doc.iter(0,doc.size,function(line){if(!line.hidden){var guess=Math.ceil(line.text.length/perLine)||1;1!=guess&&updateLineHeight(line,guess)}}),lineSpace.style.width=code.style.width=""}else wrapper.className=wrapper.className.replace(" CodeMirror-wrap",""),maxWidth=null,maxLine="",doc.iter(0,doc.size,function(line){1==line.height||line.hidden||updateLineHeight(line,1),line.text.length>maxLine.length&&(maxLine=line.text)});changes.push({from:0,to:doc.size})}function makeTab(col){var w=options.tabSize-col%options.tabSize,cached=tabCache[w];if(cached)return cached;for(var str='<span class="cm-tab">',i=0;i<w;++i)str+=" ";return tabCache[w]={html:str+"</span>",width:w}}function themeChanged(){scroller.className=scroller.className.replace(/\s*cm-s-\S+/g,"")+options.theme.replace(/(^|\s)\s*/g," cm-s-")}function TextMarker(){this.set=[]}function markText(from,to,className){from=clipPos(from),to=clipPos(to);var tm=new TextMarker;if(!posLess(from,to))return tm;function add(line,from,to,className){getLine(line).addMark(new MarkedText(from,to,className,tm))}if(from.line==to.line)add(from.line,from.ch,to.ch,className);else{add(from.line,from.ch,null,className);for(var i=from.line+1,e=to.line;i<e;++i)add(i,null,null,className);add(to.line,null,to.ch,className)}return changes.push({from:from.line,to:to.line+1}),tm}function changeLine(handle,op){var no=handle,line=handle;return"number"==typeof handle?line=getLine(clipLine(handle)):no=lineNo(handle),null!=no&&op(line,no)?(changes.push({from:no,to:no+1}),line):null}function setLineHidden(handle,hidden){return changeLine(handle,function(line,no){if(line.hidden!=hidden){line.hidden=hidden,updateLineHeight(line,hidden?0:1);var fline=sel.from.line,tline=sel.to.line;if(hidden&&(fline==no||tline==no)){var from=fline==no?skipHidden({line:fline,ch:0},fline,0):sel.from,to=tline==no?skipHidden({line:tline,ch:0},tline,0):sel.to;if(!to)return;setSelection(from,to)}return gutterDirty=!0}})}function stringWidth(str){return measure.innerHTML="<pre><span>x</span></pre>",measure.firstChild.firstChild.firstChild.nodeValue=str,measure.firstChild.firstChild.offsetWidth||10}TextMarker.prototype.clear=operation(function(){for(var min=1/0,max=-1/0,i=0,e=this.set.length;i<e;++i){var line=this.set[i],mk=line.marked;if(mk&&line.parent){var lineN=lineNo(line);min=Math.min(min,lineN),max=Math.max(max,lineN);for(var j=0;j<mk.length;++j)mk[j].marker==this&&mk.splice(j--,1)}}min!=1/0&&changes.push({from:min,to:max+1})}),TextMarker.prototype.find=function(){for(var from,to,i=0,e=this.set.length;i<e;++i)for(var line=this.set[i],mk=line.marked,j=0;j<mk.length;++j){var mark=mk[j];if(mark.marker==this&&(null!=mark.from||null!=mark.to)){var found=lineNo(line);null!=found&&(null!=mark.from&&(from={line:found,ch:mark.from}),null!=mark.to&&(to={line:found,ch:mark.to}))}}return{from:from,to:to}};var cachedHeight,cachedHeightFor,measureText,tempId="CodeMirror-temp-"+Math.floor(16777215*Math.random()).toString(16);function measureLine(line,ch){if(0==ch)return{top:0,left:0};var wbr=options.lineWrapping&&ch<line.text.length&&spanAffectsWrapping.test(line.text.slice(ch-1,ch+1));measure.innerHTML="<pre>"+line.getHTML(makeTab,ch,tempId,wbr)+"</pre>";var elt=document.getElementById(tempId),top=elt.offsetTop,left=elt.offsetLeft;if(ie&&0==top&&0==left){var backup=document.createElement("span");backup.innerHTML="x",elt.parentNode.insertBefore(backup,elt.nextSibling),top=backup.offsetTop}return{top:top,left:left}}function localCoords(pos,inLineWrap){var x,lh=textHeight(),y=lh*(heightAtLine(doc,pos.line)-(inLineWrap?displayOffset:0));if(0==pos.ch)x=0;else{var sp=measureLine(getLine(pos.line),pos.ch);x=sp.left,options.lineWrapping&&(y+=Math.max(0,sp.top))}return{x:x,y:y,yBot:y+lh}}function coordsChar(x,y){y<0&&(y=0);var th=textHeight(),cw=charWidth(),heightPos=displayOffset+Math.floor(y/th),lineNo=lineAtHeight(doc,heightPos);if(lineNo>=doc.size)return{line:doc.size-1,ch:getLine(doc.size-1).text.length};var lineObj=getLine(lineNo),text=lineObj.text,tw=options.lineWrapping,innerOff=tw?heightPos-heightAtLine(doc,lineNo):0;if(x<=0&&0==innerOff)return{line:lineNo,ch:0};function getX(len){var sp=measureLine(lineObj,len);if(tw){var off=Math.round(sp.top/th);return Math.max(0,sp.left+(off-innerOff)*scroller.clientWidth)}return sp.left}for(var toX,from=0,fromX=0,to=text.length,estimated=Math.min(to,Math.ceil((x+innerOff*scroller.clientWidth*.9)/cw));;){var estX=getX(estimated);if(!(estX<=x&&estimated<to)){toX=estX,to=estimated;break}estimated=Math.min(to,Math.ceil(1.2*estimated))}if(toX<x)return{line:lineNo,ch:to};for((estX=getX(estimated=Math.floor(.8*to)))<x&&(from=estimated,fromX=estX);;){if(to-from<=1)return{line:lineNo,ch:x-fromX<toX-x?from:to};var middle=Math.ceil((from+to)/2),middleX=getX(middle);x<middleX?(to=middle,toX=middleX):(from=middle,fromX=middleX)}}function textHeight(){if(null==measureText){measureText="<pre>";for(var i=0;i<49;++i)measureText+="x<br/>";measureText+="x</pre>"}var offsetHeight=lineDiv.clientHeight;return offsetHeight==cachedHeightFor||(cachedHeightFor=offsetHeight,measure.innerHTML=measureText,cachedHeight=measure.firstChild.offsetHeight/50||1,measure.innerHTML=""),cachedHeight}var cachedWidth,cachedWidthFor=0;function charWidth(){return scroller.clientWidth==cachedWidthFor?cachedWidth:(cachedWidthFor=scroller.clientWidth,cachedWidth=stringWidth("x"))}function paddingTop(){return lineSpace.offsetTop}function paddingLeft(){return lineSpace.offsetLeft}function posFromMouse(e,liberal){var x,y,offW=eltOffset(scroller,!0);try{x=e.clientX,y=e.clientY}catch(e){return null}if(!liberal&&(x-offW.left>scroller.clientWidth||y-offW.top>scroller.clientHeight))return null;var offL=eltOffset(lineSpace,!0);return coordsChar(x-offL.left,y-offL.top)}function onContextMenu(e){var pos=posFromMouse(e),scrollPos=scroller.scrollTop;if(pos&&!window.opera){!posEq(sel.from,sel.to)&&!posLess(pos,sel.from)&&posLess(pos,sel.to)||operation(setCursor)(pos.line,pos.ch);var oldCSS=input.style.cssText;inputDiv.style.position="absolute",input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",leaveInputAlone=!0;var val=input.value=getSelection();if(focusInput(),selectInput(input),gecko){e_stop(e);var mouseup=connect(window,"mouseup",function(){mouseup(),setTimeout(rehide,20)},!0)}else setTimeout(rehide,50)}function rehide(){var newVal=splitLines(input.value).join("\n");newVal!=val&&operation(replaceSelection)(newVal,"end"),inputDiv.style.position="relative",input.style.cssText=oldCSS,ie_lt9&&(scroller.scrollTop=scrollPos),resetInput(!(leaveInputAlone=!1)),slowPoll()}}function restartBlink(){clearInterval(blinker);var on=!0;cursor.style.visibility="",blinker=setInterval(function(){cursor.style.visibility=(on=!on)?"":"hidden"},650)}var matching={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function matchBrackets(autoclear){var head=sel.inverted?sel.from:sel.to,line=getLine(head.line),pos=head.ch-1,match=0<=pos&&matching[line.text.charAt(pos)]||matching[line.text.charAt(++pos)];if(match){match.charAt(0);for(var forward=">"==match.charAt(1),d=forward?1:-1,st=line.styles,off=pos+1,i=0,e=st.length;i<e;i+=2)if((off-=st[i].length)<=0){var style=st[i+1];break}var stack=[line.text.charAt(pos)],re=/[(){}[\]]/;for(i=head.line,e=forward?Math.min(i+100,doc.size):Math.max(-1,i-100);i!=e;i+=d){line=getLine(i);var first=i==head.line,found=scan(line,first&&forward?pos+1:0,first&&!forward?pos:line.text.length);if(found)break}style=(found=found||{pos:null,match:!1}).match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var one=markText({line:head.line,ch:pos},{line:head.line,ch:pos+1},style),two=null!=found.pos&&markText({line:i,ch:found.pos},{line:i,ch:found.pos+1},style),clear=operation(function(){one.clear(),two&&two.clear()});autoclear?setTimeout(clear,800):bracketHighlighted=clear}function scan(line,from,to){if(line.text)for(var cur,st=line.styles,pos=forward?0:line.text.length-1,i=forward?0:st.length-2,e=forward?st.length:-2;i!=e;i+=2*d){var text=st[i];if(null==st[i+1]||st[i+1]==style){for(var j=forward?0:text.length-1,te=forward?text.length:-1;j!=te;j+=d,pos+=d)if(from<=pos&&pos<to&&re.test(cur=text.charAt(j))){var match=matching[cur];if(">"==match.charAt(1)==forward)stack.push(cur);else{if(stack.pop()!=match.charAt(0))return{pos:pos,match:!1};if(!stack.length)return{pos:pos,match:!0}}}}else pos+=d*text.length}}}function findStartLine(n){for(var minindent,minline,search=n,lim=n-40;lim<search;--search){if(0==search)return 0;var line=getLine(search-1);if(line.stateAfter)return search;var indented=line.indentation(options.tabSize);(null==minline||indented<minindent)&&(minline=search-1,minindent=indented)}return minline}function getStateBefore(n){var start=findStartLine(n),state=start&&getLine(start-1).stateAfter;return state=state?copyState(mode,state):startState(mode),doc.iter(start,n,function(line){line.highlight(mode,state,options.tabSize),line.stateAfter=copyState(mode,state)}),start<n&&changes.push({from:start,to:n}),n<doc.size&&!getLine(n).stateAfter&&work.push(n),state}function highlightWorker(){for(var end=+new Date+options.workTime,foundWork=work.length;work.length;){if(getLine(showingFrom).stateAfter)task=work.pop();else var task=showingFrom;if(!(task>=doc.size)){var start=findStartLine(task),state=start&&getLine(start-1).stateAfter;state=state?copyState(mode,state):startState(mode);var unchanged=0,compare=mode.compareStates,realChange=!1,i=start,bail=!1;if(doc.iter(i,doc.size,function(line){var hadState=line.stateAfter;if(+new Date>end)return work.push(i),startWorker(options.workDelay),realChange&&changes.push({from:task,to:i+1}),bail=!0;var changed=line.highlight(mode,state,options.tabSize);changed&&(realChange=!0),line.stateAfter=copyState(mode,state);var done=null;if(compare){var same=hadState&&compare(hadState,state);same!=Pass&&(done=!!same)}if(null==done&&(!1===changed&&hadState?3<++unchanged&&(!mode.indent||mode.indent(hadState,"")==mode.indent(state,""))&&(done=!0):unchanged=0),done)return!0;++i}),bail)return;realChange&&changes.push({from:task,to:i+1})}}foundWork&&options.onHighlightComplete&&options.onHighlightComplete(instance)}function startWorker(time){work.length&&highlight.set(time,operation(highlightWorker))}function startOperation(){updateInput=userSelChange=textChanged=null,selectionChanged=!(changes=[]),callbacks=[]}function endOperation(){var updated,reScroll=!1;selectionChanged&&(reScroll=!scrollCursorIntoView()),changes.length?updated=updateDisplay(changes,!0):(selectionChanged&&updateSelection(),gutterDirty&&updateGutter()),reScroll&&scrollCursorIntoView(),selectionChanged&&(function(){if(cursor.getBoundingClientRect){var rect=cursor.getBoundingClientRect();if(!ie||rect.top!=rect.bottom){var winH=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(rect.top<0||rect.bottom>winH)&&cursor.scrollIntoView()}}}(),restartBlink()),focused&&!leaveInputAlone&&(!0===updateInput||!1!==updateInput&&selectionChanged)&&resetInput(userSelChange),selectionChanged&&options.matchBrackets&&setTimeout(operation(function(){bracketHighlighted&&(bracketHighlighted(),bracketHighlighted=null),posEq(sel.from,sel.to)&&matchBrackets(!1)}),20);var tc=textChanged,cbs=callbacks;selectionChanged&&options.onCursorActivity&&options.onCursorActivity(instance),tc&&options.onChange&&instance&&options.onChange(instance,tc);for(var i=0;i<cbs.length;++i)cbs[i](instance);updated&&options.onUpdate&&options.onUpdate(instance)}var nestedOperation=0;function operation(f){return function(){nestedOperation++||startOperation();try{var result=f.apply(this,arguments)}finally{--nestedOperation||endOperation()}return result}}function compoundChange(f){history.startCompound();try{return f()}finally{history.endCompound()}}for(var ext in extensions)extensions.propertyIsEnumerable(ext)&&!instance.propertyIsEnumerable(ext)&&(instance[ext]=extensions[ext]);return instance}CodeMirror.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null};var ios=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),mac=ios||/Mac/.test(navigator.platform),modes=(/Win/.test(navigator.platform),CodeMirror.modes={}),mimeModes=CodeMirror.mimeModes={};CodeMirror.defineMode=function(name,mode){if(CodeMirror.defaults.mode||"null"==name||(CodeMirror.defaults.mode=name),2<arguments.length){mode.dependencies=[];for(var i=2;i<arguments.length;++i)mode.dependencies.push(arguments[i])}modes[name]=mode},CodeMirror.defineMIME=function(mime,spec){mimeModes[mime]=spec},CodeMirror.resolveMode=function(spec){if("string"==typeof spec&&mimeModes.hasOwnProperty(spec))spec=mimeModes[spec];else if("string"==typeof spec&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec))return CodeMirror.resolveMode("application/xml");return"string"==typeof spec?{name:spec}:spec||{name:"null"}},CodeMirror.getMode=function(options,spec){spec=CodeMirror.resolveMode(spec);var mfactory=modes[spec.name];return mfactory?mfactory(options,spec):CodeMirror.getMode(options,"text/plain")},CodeMirror.listModes=function(){var list=[];for(var m in modes)modes.propertyIsEnumerable(m)&&list.push(m);return list},CodeMirror.listMIMEs=function(){var list=[];for(var m in mimeModes)mimeModes.propertyIsEnumerable(m)&&list.push({mime:m,mode:mimeModes[m]});return list};var extensions=CodeMirror.extensions={};CodeMirror.defineExtension=function(name,func){extensions[name]=func};var commands=CodeMirror.commands={selectAll:function(cm){cm.setSelection({line:0,ch:0},{line:cm.lineCount()-1})},killLine:function(cm){var from=cm.getCursor(!0),to=cm.getCursor(!1),sel=!posEq(from,to);sel||cm.getLine(from.line).length!=from.ch?cm.replaceRange("",from,sel?to:{line:from.line}):cm.replaceRange("",from,{line:from.line+1,ch:0})},deleteLine:function(cm){var l=cm.getCursor().line;cm.replaceRange("",{line:l,ch:0},{line:l})},undo:function(cm){cm.undo()},redo:function(cm){cm.redo()},goDocStart:function(cm){cm.setCursor(0,0,!0)},goDocEnd:function(cm){cm.setSelection({line:cm.lineCount()-1},null,!0)},goLineStart:function(cm){cm.setCursor(cm.getCursor().line,0,!0)},goLineStartSmart:function(cm){var cur=cm.getCursor(),text=cm.getLine(cur.line),firstNonWS=Math.max(0,text.search(/\S/));cm.setCursor(cur.line,cur.ch<=firstNonWS&&cur.ch?0:firstNonWS,!0)},goLineEnd:function(cm){cm.setSelection({line:cm.getCursor().line},null,!0)},goLineUp:function(cm){cm.moveV(-1,"line")},goLineDown:function(cm){cm.moveV(1,"line")},goPageUp:function(cm){cm.moveV(-1,"page")},goPageDown:function(cm){cm.moveV(1,"page")},goCharLeft:function(cm){cm.moveH(-1,"char")},goCharRight:function(cm){cm.moveH(1,"char")},goColumnLeft:function(cm){cm.moveH(-1,"column")},goColumnRight:function(cm){cm.moveH(1,"column")},goWordLeft:function(cm){cm.moveH(-1,"word")},goWordRight:function(cm){cm.moveH(1,"word")},delCharLeft:function(cm){cm.deleteH(-1,"char")},delCharRight:function(cm){cm.deleteH(1,"char")},delWordLeft:function(cm){cm.deleteH(-1,"word")},delWordRight:function(cm){cm.deleteH(1,"word")},indentAuto:function(cm){cm.indentSelection("smart")},indentMore:function(cm){cm.indentSelection("add")},indentLess:function(cm){cm.indentSelection("subtract")},insertTab:function(cm){cm.replaceSelection("\t","end")},transposeChars:function(cm){var cur=cm.getCursor(),line=cm.getLine(cur.line);0<cur.ch&&cur.ch<line.length-1&&cm.replaceRange(line.charAt(cur.ch)+line.charAt(cur.ch-1),{line:cur.line,ch:cur.ch-1},{line:cur.line,ch:cur.ch+1})},newlineAndIndent:function(cm){cm.replaceSelection("\n","end"),cm.indentLine(cm.getCursor().line)},toggleOverwrite:function(cm){cm.toggleOverwrite()}},keyMap=CodeMirror.keyMap={};function getKeyMap(val){return"string"==typeof val?keyMap[val]:val}function lookupKey(name,extraMap,map,handle,stop){function lookup(map){var found=(map=getKeyMap(map))[name];if(null!=found&&handle(found))return!0;if(map.nofallthrough)return stop&&stop(),!0;var fallthrough=map.fallthrough;if(null==fallthrough)return!1;if("[object Array]"!=Object.prototype.toString.call(fallthrough))return lookup(fallthrough);for(var i=0,e=fallthrough.length;i<e;++i)if(lookup(fallthrough[i]))return!0;return!1}return!(!extraMap||!lookup(extraMap))||lookup(map)}function copyState(mode,state){if(!0===state)return state;if(mode.copyState)return mode.copyState(state);var nstate={};for(var n in state){var val=state[n];val instanceof Array&&(val=val.concat([])),nstate[n]=val}return nstate}function startState(mode,a1,a2){return!mode.startState||mode.startState(a1,a2)}function StringStream(string,tabSize){this.pos=this.start=0,this.string=string,this.tabSize=tabSize||8}function MarkedText(from,to,className,marker){this.from=from,this.to=to,this.style=className,this.marker=marker}function Bookmark(pos){this.from=pos,this.to=pos,this.line=null}function Line(text,styles){this.styles=styles||[text,null],this.text=text,this.height=1,this.marked=this.gutterMarker=this.className=this.bgClassName=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function copyStyles(from,to,source,dest){for(var i=0,pos=0,state=0;pos<to;i+=2){var part=source[i],end=pos+part.length;0==state?(from<end&&dest.push(part.slice(from-pos,Math.min(part.length,to-pos)),source[i+1]),from<=end&&(state=1)):1==state&&(to<end?dest.push(part.slice(0,to-pos),source[i+1]):dest.push(part,source[i+1])),pos=end}}function LeafChunk(lines){this.lines=lines,this.parent=null;for(var i=0,e=lines.length,height=0;i<e;++i)lines[i].parent=this,height+=lines[i].height;this.height=height}function BranchChunk(children){for(var size=0,height=0,i=0,e=(this.children=children).length;i<e;++i){var ch=children[i];size+=ch.chunkSize(),height+=ch.height,ch.parent=this}this.size=size,this.height=height,this.parent=null}function lineNo(line){if(null==line.parent)return null;for(var cur=line.parent,no=indexOf(cur.lines,line),chunk=cur.parent;chunk;chunk=(cur=chunk).parent){var i=0;for(chunk.children.length;chunk.children[i]!=cur;++i)no+=chunk.children[i].chunkSize()}return no}function lineAtHeight(chunk,h){var n=0;outer:do{for(var i=0,e=chunk.children.length;i<e;++i){var child=chunk.children[i],ch=child.height;if(h<ch){chunk=child;continue outer}h-=ch,n+=child.chunkSize()}return n}while(!chunk.lines);for(i=0,e=chunk.lines.length;i<e;++i){var lh=chunk.lines[i].height;if(h<lh)break;h-=lh}return n+i}function heightAtLine(chunk,n){var h=0;outer:do{for(var i=0,e=chunk.children.length;i<e;++i){var child=chunk.children[i],sz=child.chunkSize();if(n<sz){chunk=child;continue outer}n-=sz,h+=child.height}return h}while(!chunk.lines);for(i=0;i<n;++i)h+=chunk.lines[i].height;return h}function History(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function stopMethod(){e_stop(this)}function addStop(event){return event.stop||(event.stop=stopMethod),event}function e_preventDefault(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function e_stopPropagation(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function e_stop(e){e_preventDefault(e),e_stopPropagation(e)}function e_target(e){return e.target||e.srcElement}function e_button(e){return e.which?e.which:1&e.button?1:2&e.button?3:4&e.button?2:void 0}function e_prop(e,prop){return e.override&&e.override.hasOwnProperty(prop)?e.override[prop]:e[prop]}function connect(node,type,handler,disconnect){if("function"==typeof node.addEventListener){if(node.addEventListener(type,handler,!1),disconnect)return function(){node.removeEventListener(type,handler,!1)}}else{function wrapHandler(event){handler(event||window.event)}if(node.attachEvent("on"+type,wrapHandler),disconnect)return function(){node.detachEvent("on"+type,wrapHandler)}}}function Delayed(){this.id=null}keyMap.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"insertTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},keyMap.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},keyMap.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},keyMap.default=mac?keyMap.macDefault:keyMap.pcDefault,keyMap.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},CodeMirror.fromTextArea=function(textarea,options){function save(){textarea.value=instance.getValue()}if((options=options||{}).value=textarea.value,!options.tabindex&&textarea.tabindex&&(options.tabindex=textarea.tabindex),null==options.autofocus&&null!=textarea.getAttribute("autofocus")&&(options.autofocus=!0),textarea.form){var rmSubmit=connect(textarea.form,"submit",save,!0);if("function"==typeof textarea.form.submit){var realSubmit=textarea.form.submit;textarea.form.submit=function wrappedSubmit(){save(),textarea.form.submit=realSubmit,textarea.form.submit(),textarea.form.submit=wrappedSubmit}}}textarea.style.display="none";var instance=CodeMirror(function(node){textarea.parentNode.insertBefore(node,textarea.nextSibling)},options);return instance.save=save,instance.getTextArea=function(){return textarea},instance.toTextArea=function(){save(),textarea.parentNode.removeChild(instance.getWrapperElement()),textarea.style.display="",textarea.form&&(rmSubmit(),"function"==typeof textarea.form.submit&&(textarea.form.submit=realSubmit))},instance},CodeMirror.copyState=copyState,CodeMirror.startState=startState,StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(match){var ch=this.string.charAt(this.pos);if("string"==typeof match)var ok=ch==match;else ok=ch&&(match.test?match.test(ch):match(ch));if(ok)return++this.pos,ch},eatWhile:function(match){for(var start=this.pos;this.eat(match););return this.pos>start},eatSpace:function(){for(var start=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>start},skipToEnd:function(){this.pos=this.string.length},skipTo:function(ch){var found=this.string.indexOf(ch,this.pos);if(-1<found)return this.pos=found,!0},backUp:function(n){this.pos-=n},column:function(){return countColumn(this.string,this.start,this.tabSize)},indentation:function(){return countColumn(this.string,null,this.tabSize)},match:function(pattern,consume,caseInsensitive){if("string"!=typeof pattern){var match=this.string.slice(this.pos).match(pattern);return match&&!1!==consume&&(this.pos+=match[0].length),match}function cased(str){return caseInsensitive?str.toLowerCase():str}if(cased(this.string).indexOf(cased(pattern),this.pos)==this.pos)return!1!==consume&&(this.pos+=pattern.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},CodeMirror.StringStream=StringStream,MarkedText.prototype={attach:function(line){this.marker.set.push(line)},detach:function(line){var ix=indexOf(this.marker.set,line);-1<ix&&this.marker.set.splice(ix,1)},split:function(pos,lenBefore){return this.to<=pos&&null!=this.to?null:new MarkedText(this.from<pos||null==this.from?null:this.from-pos+lenBefore,null==this.to?null:this.to-pos+lenBefore,this.style,this.marker)},dup:function(){return new MarkedText(null,null,this.style,this.marker)},clipTo:function(fromOpen,from,toOpen,to,diff){fromOpen&&to>this.from&&(to<this.to||null==this.to)?this.from=null:null!=this.from&&this.from>=from&&(this.from=Math.max(to,this.from)+diff),toOpen&&(from<this.to||null==this.to)&&(from>this.from||null==this.from)?this.to=null:null!=this.to&&this.to>from&&(this.to=to<this.to?this.to+diff:from)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(x){return this.marker==x.marker}},Bookmark.prototype={attach:function(line){this.line=line},detach:function(line){this.line==line&&(this.line=null)},split:function(pos,lenBefore){if(pos<this.from)return this.from=this.to=this.from-pos+lenBefore,this},isDead:function(){return this.from>this.to},clipTo:function(fromOpen,from,toOpen,to,diff){(fromOpen||from<this.from)&&(toOpen||to>this.to)?(this.from=0,this.to=-1):this.from>from&&(this.from=this.to=Math.max(to,this.from)+diff)},sameSet:function(x){return!1},find:function(){return this.line&&this.line.parent?{line:lineNo(this.line),ch:this.from}:null},clear:function(){if(this.line){var found=indexOf(this.line.marked,this);-1!=found&&this.line.marked.splice(found,1),this.line=null}}},Line.inheritMarks=function(text,orig){var ln=new Line(text),mk=orig&&orig.marked;if(mk)for(var i=0;i<mk.length;++i)if(null==mk[i].to&&mk[i].style){var newmk=ln.marked||(ln.marked=[]),nmark=mk[i].dup();newmk.push(nmark),nmark.attach(ln)}return ln},Line.prototype={replace:function(from,to_,text){var st=[],mk=this.marked,to=null==to_?this.text.length:to_;if(copyStyles(0,from,this.styles,st),text&&st.push(text,null),copyStyles(to,this.text.length,this.styles,st),this.styles=st,this.text=this.text.slice(0,from)+text+this.text.slice(to),this.stateAfter=null,mk)for(var diff=text.length-(to-from),i=0;i<mk.length;++i){var mark=mk[i];mark.clipTo(null==from,from||0,null==to_,to,diff),mark.isDead()&&(mark.detach(this),mk.splice(i--,1))}},split:function(pos,textBefore){var st=[textBefore,null],mk=this.marked;copyStyles(pos,this.text.length,this.styles,st);var taken=new Line(textBefore+this.text.slice(pos),st);if(mk)for(var i=0;i<mk.length;++i){var mark=mk[i],newmark=mark.split(pos,textBefore.length);newmark&&(taken.marked||(taken.marked=[]),taken.marked.push(newmark),newmark.attach(taken),newmark==mark&&mk.splice(i--,1))}return taken},append:function(line){var mylen=this.text.length,mk=line.marked,mymk=this.marked;if(this.text+=line.text,copyStyles(0,line.text.length,line.styles,this.styles),mymk)for(var i=0;i<mymk.length;++i)null==mymk[i].to&&(mymk[i].to=mylen);if(mk&&mk.length){mymk||(this.marked=mymk=[]);outer:for(i=0;i<mk.length;++i){var mark=mk[i];if(!mark.from)for(var j=0;j<mymk.length;++j){var mymark=mymk[j];if(mymark.to==mylen&&mymark.sameSet(mark)){mymark.to=null==mark.to?null:mark.to+mylen,mymark.isDead()&&(mymark.detach(this),mk.splice(i--,1));continue outer}}mymk.push(mark),mark.attach(this),mark.from+=mylen,null!=mark.to&&(mark.to+=mylen)}}},fixMarkEnds:function(other){var mk=this.marked,omk=other.marked;if(mk)for(var i=0;i<mk.length;++i){var mark=mk[i],close=null==mark.to;if(close&&omk)for(var j=0;j<omk.length;++j)if(omk[j].sameSet(mark)){close=!1;break}close&&(mark.to=this.text.length)}},fixMarkStarts:function(){var mk=this.marked;if(mk)for(var i=0;i<mk.length;++i)null==mk[i].from&&(mk[i].from=0)},addMark:function(mark){mark.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(mark),this.marked.sort(function(a,b){return(a.from||0)-(b.from||0)})},highlight:function(mode,state,tabSize){var prevWord,stream=new StringStream(this.text,tabSize),st=this.styles,pos=0,changed=!1,curWord=st[0];for(""==this.text&&mode.blankLine&&mode.blankLine(state);!stream.eol();){var style=mode.token(stream,state),substr=this.text.slice(stream.start,stream.pos);if(stream.start=stream.pos,pos&&st[pos-1]==style?st[pos-2]+=substr:substr&&(!changed&&(st[pos+1]!=style||pos&&st[pos-2]!=prevWord)&&(changed=!0),st[pos++]=substr,st[pos++]=style,prevWord=curWord,curWord=st[pos]),5e3<stream.pos){st[pos++]=this.text.slice(stream.pos),st[pos++]=null;break}}return st.length!=pos&&(st.length=pos,changed=!0),pos&&st[pos-2]!=prevWord&&(changed=!0),changed||st.length<5&&this.text.length<10&&null},getTokenAt:function(mode,state,ch){for(var stream=new StringStream(this.text);stream.pos<ch&&!stream.eol();){stream.start=stream.pos;var style=mode.token(stream,state)}return{start:stream.start,end:stream.pos,string:stream.current(),className:style||null,state:state}},indentation:function(tabSize){return countColumn(this.text,null,tabSize)},getHTML:function(makeTab,wrapAt,wrapId,wrapWBR){var html=[],first=!0,col=0;function span_(text,style){if(text){if(first&&ie&&" "==text.charAt(0)&&(text=" "+text.slice(1)),first=!1,-1==text.indexOf("\t")){col+=text.length;var escaped=htmlEscape(text)}else{escaped="";for(var pos=0;;){var idx=text.indexOf("\t",pos);if(-1==idx){escaped+=htmlEscape(text.slice(pos)),col+=text.length-pos;break}var tab=makeTab(col+=idx-pos);escaped+=htmlEscape(text.slice(pos,idx))+tab.html,col+=tab.width,pos=idx+1}}style?html.push('<span class="',style,'">',escaped,"</span>"):html.push(escaped)}}var span=span_;if(null!=wrapAt){var outPos=0,open='<span id="'+wrapId+'">';span=function(text,style){var l=text.length;outPos<=wrapAt&&wrapAt<outPos+l?(outPos<wrapAt&&(span_(text.slice(0,wrapAt-outPos),style),wrapWBR&&html.push("<wbr>")),html.push(open),span_(text.slice(wrapAt-outPos),style),html.push("</span>"),wrapAt--,outPos+=l):(outPos+=l,span_(text,style),outPos==wrapAt&&outPos==len?html.push(open+"</span>"):wrapAt+10<outPos&&/\s/.test(text)&&(span=function(){}))}}var st=this.styles,allText=this.text,marked=this.marked,len=allText.length;function styleToClass(style){return style?"cm-"+style.replace(/ +/g," cm-"):null}if(allText||null!=wrapAt)if(marked&&marked.length){var pos=0,text=(i=0,""),nextChange=marked[0].from||0,marks=[],markpos=0;function advanceMarks(){for(var m;markpos<marked.length&&((m=marked[markpos]).from==pos||null==m.from);)null!=m.style&&marks.push(m),++markpos;nextChange=markpos<marked.length?marked[markpos].from:1/0;for(var i=0;i<marks.length;++i){var to=marks[i].to||1/0;to==pos?marks.splice(i--,1):nextChange=Math.min(to,nextChange)}}for(;pos<len;){nextChange==pos&&advanceMarks();for(var upto=Math.min(len,nextChange);;){if(text){for(var end=pos+text.length,appliedStyle=style,j=0;j<marks.length;++j)appliedStyle=(appliedStyle?appliedStyle+" ":"")+marks[j].style;if(span(upto<end?text.slice(0,upto-pos):text,appliedStyle),upto<=end){text=text.slice(upto-pos),pos=upto;break}pos=end}text=st[i++],style=styleToClass(st[i++])}}}else for(var i=0,ch=0;ch<len;i+=2){var str=st[i],style=st[i+1],l=str.length;len<ch+l&&(str=str.slice(0,len-ch)),ch+=l,span(str,styleToClass(style))}else span(" ");return html.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var i=0,e=this.marked.length;i<e;++i)this.marked[i].detach(this)}},LeafChunk.prototype={chunkSize:function(){return this.lines.length},remove:function(at,n,callbacks){for(var i=at,e=at+n;i<e;++i){var line=this.lines[i];if(this.height-=line.height,line.cleanUp(),line.handlers)for(var j=0;j<line.handlers.length;++j)callbacks.push(line.handlers[j])}this.lines.splice(at,n)},collapse:function(lines){lines.splice.apply(lines,[lines.length,0].concat(this.lines))},insertHeight:function(at,lines,height){this.height+=height,ie?this.lines=this.lines.slice(0,at).concat(lines).concat(this.lines.slice(at)):this.lines.splice.apply(this.lines,[at,0].concat(lines));for(var i=0,e=lines.length;i<e;++i)lines[i].parent=this},iterN:function(at,n,op){for(var e=at+n;at<e;++at)if(op(this.lines[at]))return!0}},BranchChunk.prototype={chunkSize:function(){return this.size},remove:function(at,n,callbacks){this.size-=n;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),oldHeight=child.height;if(child.remove(at,rm,callbacks),this.height-=oldHeight-child.height,sz==rm&&(this.children.splice(i--,1),child.parent=null),0==(n-=rm))break;at=0}else at-=sz}if(this.size-n<25){var lines=[];this.collapse(lines),this.children=[new LeafChunk(lines)],this.children[0].parent=this}},collapse:function(lines){for(var i=0,e=this.children.length;i<e;++i)this.children[i].collapse(lines)},insert:function(at,lines){for(var height=0,i=0,e=lines.length;i<e;++i)height+=lines[i].height;this.insertHeight(at,lines,height)},insertHeight:function(at,lines,height){this.size+=lines.length,this.height+=height;for(var i=0,e=this.children.length;i<e;++i){var child=this.children[i],sz=child.chunkSize();if(at<=sz){if(child.insertHeight(at,lines,height),child.lines&&50<child.lines.length){for(;50<child.lines.length;){var newleaf=new LeafChunk(child.lines.splice(child.lines.length-25,25));child.height-=newleaf.height,this.children.splice(i+1,0,newleaf),newleaf.parent=this}this.maybeSpill()}break}at-=sz}},maybeSpill:function(){if(!(this.children.length<=10)){var me=this;do{var sibling=new BranchChunk(me.children.splice(me.children.length-5,5));if(me.parent){me.size-=sibling.size,me.height-=sibling.height;var myIndex=indexOf(me.parent.children,me);me.parent.children.splice(myIndex+1,0,sibling)}else{var copy=new BranchChunk(me.children);(copy.parent=me).children=[copy,sibling],me=copy}sibling.parent=me.parent}while(10<me.children.length);me.parent.maybeSpill()}},iter:function(from,to,op){this.iterN(from,to-from,op)},iterN:function(at,n,op){for(var i=0,e=this.children.length;i<e;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var used=Math.min(n,sz-at);if(child.iterN(at,used,op))return!0;if(0==(n-=used))break;at=0}else at-=sz}}},History.prototype={addChange:function(start,added,old){this.undone.length=0;var time=+new Date,cur=this.done[this.done.length-1],last=cur&&cur[cur.length-1],dtime=time-this.time;if(this.compound&&cur&&!this.closed)cur.push({start:start,added:added,old:old});else if(400<dtime||!last||this.closed||last.start>start+old.length||last.start+last.added<start)this.done.push([{start:start,added:added,old:old}]),this.closed=!1;else{for(var startBefore=Math.max(0,last.start-start),endAfter=Math.max(0,start+old.length-(last.start+last.added)),i=startBefore;0<i;--i)last.old.unshift(old[i-1]);for(i=endAfter;0<i;--i)last.old.push(old[old.length-i]);startBefore&&(last.start=start),last.added+=added-(old.length-startBefore-endAfter)}this.time=time},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},CodeMirror.e_stop=e_stop,CodeMirror.e_preventDefault=e_preventDefault,CodeMirror.e_stopPropagation=e_stopPropagation,CodeMirror.connect=connect,Delayed.prototype={set:function(ms,f){clearTimeout(this.id),this.id=setTimeout(f,ms)}};var te,Pass=CodeMirror.Pass={toString:function(){return"CodeMirror.Pass"}},gecko=/gecko\/\d{7}/i.test(navigator.userAgent),ie=/MSIE \d/.test(navigator.userAgent),ie_lt9=/MSIE [1-8]\b/.test(navigator.userAgent),quirksMode=ie&&5==document.documentMode,webkit=/WebKit\//.test(navigator.userAgent),chrome=/Chrome\//.test(navigator.userAgent),safari=/Apple Computer/.test(navigator.vendor),khtml=/KHTML\//.test(navigator.userAgent),dragAndDrop=function(){if(ie_lt9)return!1;var div=document.createElement("div");return"draggable"in div||"dragDrop"in div}(),spanAffectsWrapping=((te=document.createElement("textarea")).value="foo\nbar",te.value.indexOf("\r"),/^$/);function countColumn(string,end,tabSize){null==end&&-1==(end=string.search(/[^\s\u00a0]/))&&(end=string.length);for(var i=0,n=0;i<end;++i)"\t"==string.charAt(i)?n+=tabSize-n%tabSize:++n;return n}function eltOffset(node,screen){for(var elt,bod=node.ownerDocument.body,x=0,y=0,skipBody=!1,n=node;n;n=n.offsetParent){var ol=n.offsetLeft,ot=n.offsetTop;n==bod?(x+=Math.abs(ol),y+=Math.abs(ot)):(x+=ol,y+=ot),screen&&"fixed"==((elt=n).currentStyle?elt.currentStyle:window.getComputedStyle(elt,null)).position&&(skipBody=!0)}var e=screen&&!skipBody?null:bod;for(n=node.parentNode;n!=e;n=n.parentNode)null!=n.scrollLeft&&(x-=n.scrollLeft,y-=n.scrollTop);return{left:x,top:y}}function selectInput(node){ios?(node.selectionStart=0,node.selectionEnd=node.value.length):node.select()}function posEq(a,b){return a.line==b.line&&a.ch==b.ch}function posLess(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}gecko?spanAffectsWrapping=/$'/:safari?spanAffectsWrapping=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:chrome&&(spanAffectsWrapping=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/),null!=document.documentElement.getBoundingClientRect&&(eltOffset=function(node,screen){try{var box=node.getBoundingClientRect();box={top:box.top,left:box.left}}catch(e){box={top:0,left:0}}if(!screen)if(null==window.pageYOffset){var t=document.documentElement||document.body.parentNode;null==t.scrollTop&&(t=document.body),box.top+=t.scrollTop,box.left+=t.scrollLeft}else box.top+=window.pageYOffset,box.left+=window.pageXOffset;return box});var escapeElement=document.createElement("pre");function htmlEscape(str){return escapeElement.textContent=str,escapeElement.innerHTML}function editEnd(from,to){if(!to)return 0;if(!from)return to.length;for(var i=from.length,j=to.length;0<=i&&0<=j&&from.charAt(i)==to.charAt(j);--i,--j);return j+1}function indexOf(collection,elt){if(collection.indexOf)return collection.indexOf(elt);for(var i=0,e=collection.length;i<e;++i)if(collection[i]==elt)return i;return-1}function isWordChar(ch){return/\w/.test(ch)||ch.toUpperCase()!=ch.toLowerCase()}"\na"==htmlEscape("a")?htmlEscape=function(str){return escapeElement.textContent=str,escapeElement.innerHTML.slice(1)}:"\t"!=htmlEscape("\t")&&(htmlEscape=function(str){return escapeElement.innerHTML="",escapeElement.appendChild(document.createTextNode(str)),escapeElement.innerHTML}),CodeMirror.htmlEscape=htmlEscape;var splitLines=3!="\n\nb".split(/\n/).length?function(string){for(var nl,pos=0,result=[];-1<(nl=string.indexOf("\n",pos));)result.push(string.slice(pos,"\r"==string.charAt(nl-1)?nl-1:nl)),pos=nl+1;return result.push(string.slice(pos)),result}:function(string){return string.split(/\r?\n/)};CodeMirror.splitLines=splitLines;var hasSelection=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd}catch(e){return!1}}:function(te){try{var range=te.ownerDocument.selection.createRange()}catch(e){}return!(!range||range.parentElement()!=te)&&0!=range.compareEndPoints("StartToEnd",range)};CodeMirror.defineMode("null",function(){return{token:function(stream){stream.skipToEnd()}}}),CodeMirror.defineMIME("text/plain","null");var keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return CodeMirror.keyNames=keyNames,function(){for(var i=0;i<10;i++)keyNames[i+48]=String(i);for(i=65;i<=90;i++)keyNames[i]=String.fromCharCode(i);for(i=1;i<=12;i++)keyNames[i+111]=keyNames[i+63235]="F"+i}(),CodeMirror}();!function(){var bogus=["Dangerous comment"],warnings=[["Expected '{'","Statement body should be inside '{ }' braces."]],errors=["Missing semicolon","Extra comma","Missing property name","Unmatched "," and instead saw"," is not defined","Unclosed string","Stopping, unable to continue"];function validator(options,text){JSHINT(text,options);var errors=JSHINT.data().errors,result=[];return errors&&function(errors,output){for(var i=0;i<errors.length;i++){var error=errors[i];if(error){var linetabpositions,index;if(linetabpositions=[],error.evidence){var tabpositions=linetabpositions[error.line];if(!tabpositions){var evidence=error.evidence;tabpositions=[],Array.prototype.forEach.call(evidence,function(item,index){"\t"===item&&tabpositions.push(index+1)}),linetabpositions[error.line]=tabpositions}if(0<tabpositions.length){var pos=error.character;tabpositions.forEach(function(tabposition){tabposition<pos&&--pos}),error.character=pos}}var start=error.character-1,end=1+start;error.evidence&&-1<(index=error.evidence.substring(start).search(/.\b/))&&(end+=index),error.description=error.reason,error.start=error.character,error.end=end,(error=cleanup(error))&&output.push({message:error.description,severity:error.severity,from:CodeMirror.Pos(error.line-1,start),to:CodeMirror.Pos(error.line-1,end)})}}}(errors,result),result}function cleanup(error){return fixWith(error,warnings,"warning",!0),fixWith(error,errors,"error"),function(error){for(var description=error.description,i=0;i<bogus.length;i++)if(-1!==description.indexOf(bogus[i]))return 1;return}(error)?null:error}function fixWith(error,fixes,severity,force){var description,fix,find,replace,found;description=error.description;for(var i=0;i<fixes.length;i++)find="string"==typeof(fix=fixes[i])?fix:fix[0],replace="string"==typeof fix?null:fix[1],found=-1!==description.indexOf(find),(force||found)&&(error.severity=severity),found&&replace&&(error.description=replace)}CodeMirror.javascriptValidatorWithOptions=function(options){return function(text){return validator(options,text)}},CodeMirror.javascriptValidator=CodeMirror.javascriptValidatorWithOptions(null)}(),CodeMirror.defineMode("javascript",function(config,parserConfig){var type,content,indentUnit=config.indentUnit,jsonMode=parserConfig.json,isTS=parserConfig.typescript,keywords=function(){function kw(type){return{type:type,style:"keyword"}}var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c"),operator=kw("operator"),atom={type:"atom",style:"atom"},jsKeywords={if:A,while:A,with:A,else:B,do:B,try:B,finally:B,return:C,break:C,continue:C,new:C,delete:C,throw:C,var:kw("var"),const:kw("var"),let:kw("var"),function:kw("function"),catch:kw("catch"),for:kw("for"),switch:kw("switch"),case:kw("case"),default:kw("default"),in:operator,typeof:operator,instanceof:operator,true:atom,false:atom,null:atom,undefined:atom,NaN:atom,Infinity:atom,this:kw("this")};if(isTS){var type={type:"variable",style:"variable-3"},tsKeywords={interface:kw("interface"),class:kw("class"),extends:kw("extends"),constructor:kw("constructor"),public:kw("public"),private:kw("private"),protected:kw("protected"),static:kw("static"),super:kw("super"),string:type,number:type,bool:type,any:type};for(var attr in tsKeywords)jsKeywords[attr]=tsKeywords[attr]}return jsKeywords}(),isOperatorChar=/[+\-*&%=<>!?|~^]/;function chain(stream,state,f){return(state.tokenize=f)(stream,state)}function nextUntilUnescaped(stream,end){for(var next,escaped=!1;null!=(next=stream.next());){if(next==end&&!escaped)return;escaped=!escaped&&"\\"==next}return escaped}function ret(tp,style,cont){return type=tp,content=cont,style}function jsTokenBase(stream,state){var ch=stream.next();if('"'==ch||"'"==ch)return chain(stream,state,(quote=ch,function(stream,state){return nextUntilUnescaped(stream,quote)||(state.tokenize=jsTokenBase),ret("string","string")}));if(/[\[\]{}\(\),;\:\.]/.test(ch))return ret(ch);if("0"==ch&&stream.eat(/x/i))return stream.eatWhile(/[\da-f]/i),ret("number","number");if(/\d/.test(ch)||"-"==ch&&stream.eat(/\d/))return stream.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),ret("number","number");if("/"==ch)return stream.eat("*")?chain(stream,state,jsTokenComment):stream.eat("/")?(stream.skipToEnd(),ret("comment","comment")):"operator"==state.lastType||"keyword c"==state.lastType||/^[\[{}\(,;:]$/.test(state.lastType)?(nextUntilUnescaped(stream,"/"),stream.eatWhile(/[gimy]/),ret("regexp","string-2")):(stream.eatWhile(isOperatorChar),ret("operator",null,stream.current()));if("#"==ch)return stream.skipToEnd(),ret("error","error");if(isOperatorChar.test(ch))return stream.eatWhile(isOperatorChar),ret("operator",null,stream.current());stream.eatWhile(/[\w\$_]/);var quote,word=stream.current(),known=keywords.propertyIsEnumerable(word)&&keywords[word];return known&&"."!=state.lastType?ret(known.type,known.style,word):ret("variable","variable",word)}function jsTokenComment(stream,state){for(var ch,maybeEnd=!1;ch=stream.next();){if("/"==ch&&maybeEnd){state.tokenize=jsTokenBase;break}maybeEnd="*"==ch}return ret("comment","comment")}var atomicTypes={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0};function JSLexical(indented,column,type,align,prev,info){this.indented=indented,this.column=column,this.type=type,this.prev=prev,this.info=info,null!=align&&(this.align=align)}function inScope(state,varname){for(var v=state.localVars;v;v=v.next)if(v.name==varname)return 1}var cx={state:null,column:null,marked:null,cc:null};function pass(){for(var i=arguments.length-1;0<=i;i--)cx.cc.push(arguments[i])}function cont(){return pass.apply(null,arguments),!0}function register(varname){function inList(list){for(var v=list;v;v=v.next)if(v.name==varname)return 1}var state=cx.state;if(state.context){if(cx.marked="def",inList(state.localVars))return;state.localVars={name:varname,next:state.localVars}}else{if(inList(state.globalVars))return;state.globalVars={name:varname,next:state.globalVars}}}var defaultVars={name:"this",next:{name:"arguments"}};function pushcontext(){cx.state.context={prev:cx.state.context,vars:cx.state.localVars},cx.state.localVars=defaultVars}function popcontext(){cx.state.localVars=cx.state.context.vars,cx.state.context=cx.state.context.prev}function pushlex(type,info){function result(){var state=cx.state;state.lexical=new JSLexical(state.indented,cx.stream.column(),type,null,state.lexical,info)}return result.lex=!0,result}function poplex(){var state=cx.state;state.lexical.prev&&(")"==state.lexical.type&&(state.indented=state.lexical.indented),state.lexical=state.lexical.prev)}function expect(wanted){return function(type){return type==wanted?cont():";"==wanted?pass():cont(arguments.callee)}}function statement(type){return"var"==type?cont(pushlex("vardef"),vardef1,expect(";"),poplex):"keyword a"==type?cont(pushlex("form"),expression,statement,poplex):"keyword b"==type?cont(pushlex("form"),statement,poplex):"{"==type?cont(pushlex("}"),block,poplex):";"==type?cont():"function"==type?cont(functiondef):"for"==type?cont(pushlex("form"),expect("("),pushlex(")"),forspec1,expect(")"),poplex,statement,poplex):"variable"==type?cont(pushlex("stat"),maybelabel):"switch"==type?cont(pushlex("form"),expression,pushlex("}","switch"),expect("{"),block,poplex,poplex):"case"==type?cont(expression,expect(":")):"default"==type?cont(expect(":")):"catch"==type?cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext):pass(pushlex("stat"),expression,expect(";"),poplex)}function expression(type){return atomicTypes.hasOwnProperty(type)?cont(maybeoperator):"function"==type?cont(functiondef):"keyword c"==type?cont(maybeexpression):"("==type?cont(pushlex(")"),maybeexpression,expect(")"),poplex,maybeoperator):"operator"==type?cont(expression):"["==type?cont(pushlex("]"),commasep(expression,"]"),poplex,maybeoperator):"{"==type?cont(pushlex("}"),commasep(objprop,"}"),poplex,maybeoperator):cont()}function maybeexpression(type){return type.match(/[;\}\)\],]/)?pass():pass(expression)}function maybeoperator(type,value){return"operator"==type?/\+\+|--/.test(value)?cont(maybeoperator):"?"==value?cont(expression,expect(":"),expression):cont(expression):";"!=type?"("==type?cont(pushlex(")"),commasep(expression,")"),poplex,maybeoperator):"."==type?cont(property,maybeoperator):"["==type?cont(pushlex("]"),expression,expect("]"),poplex,maybeoperator):void 0:void 0}function maybelabel(type){return":"==type?cont(poplex,statement):pass(maybeoperator,expect(";"),poplex)}function property(type){if("variable"==type)return cx.marked="property",cont()}function objprop(type,value){if("variable"==type){if(cx.marked="property","get"==value||"set"==value)return cont(getterSetter)}else"number"!=type&&"string"!=type||(cx.marked=type+" property");if(atomicTypes.hasOwnProperty(type))return cont(expect(":"),expression)}function getterSetter(type){return":"==type?cont(expression):"variable"!=type?cont(expect(":"),expression):(cx.marked="property",cont(functiondef))}function commasep(what,end){function proceed(type){return","==type?cont(what,proceed):type==end?cont():cont(expect(end))}return function(type){return type==end?cont():pass(what,proceed)}}function block(type){return"}"==type?cont():pass(statement,block)}function maybetype(type){return":"==type?cont(typedef):pass()}function typedef(type){return"variable"==type?(cx.marked="variable-3",cont()):pass()}function vardef1(type,value){return"variable"==type?(register(value),isTS?cont(maybetype,vardef2):cont(vardef2)):pass()}function vardef2(type,value){return"="==value?cont(expression,vardef2):","==type?cont(vardef1):void 0}function forspec1(type){return"var"==type?cont(vardef1,expect(";"),forspec2):cont(";"!=type&&"variable"==type?formaybein:forspec2)}function formaybein(_type,value){return"in"==value?cont(expression):cont(maybeoperator,forspec2)}function forspec2(type,value){return";"==type?cont(forspec3):"in"==value?cont(expression):cont(expression,expect(";"),forspec3)}function forspec3(type){")"!=type&&cont(expression)}function functiondef(type,value){return"variable"==type?(register(value),cont(functiondef)):"("==type?cont(pushlex(")"),pushcontext,commasep(funarg,")"),poplex,statement,popcontext):void 0}function funarg(type,value){if("variable"==type)return register(value),isTS?cont(maybetype):cont()}return poplex.lex=!0,{startState:function(basecolumn){return{tokenize:jsTokenBase,lastType:null,cc:[],lexical:new JSLexical((basecolumn||0)-indentUnit,0,"block",!1),localVars:parserConfig.localVars,globalVars:parserConfig.globalVars,context:parserConfig.localVars&&{vars:parserConfig.localVars},indented:0}},token:function(stream,state){if(stream.sol()&&(state.lexical.hasOwnProperty("align")||(state.lexical.align=!1),state.indented=stream.indentation()),stream.eatSpace())return null;var style=state.tokenize(stream,state);return"comment"==type?style:(state.lastType=type,function(state,style,type,content,stream){var cc=state.cc;for(cx.state=state,cx.stream=stream,cx.marked=null,cx.cc=cc,state.lexical.hasOwnProperty("align")||(state.lexical.align=!0);;){if((cc.length?cc.pop():jsonMode?expression:statement)(type,content)){for(;cc.length&&cc[cc.length-1].lex;)cc.pop()();return cx.marked?cx.marked:"variable"==type&&inScope(state,content)?"variable-2":style}}}(state,style,type,content,stream))},indent:function(state,textAfter){if(state.tokenize==jsTokenComment)return CodeMirror.Pass;if(state.tokenize!=jsTokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),lexical=state.lexical;"stat"==lexical.type&&"}"==firstChar&&(lexical=lexical.prev);var type=lexical.type,closing=firstChar==type;return"vardef"==type?lexical.indented+("operator"==state.lastType||","==state.lastType?4:0):"form"==type&&"{"==firstChar?lexical.indented:"form"==type?lexical.indented+indentUnit:"stat"==type?lexical.indented+("operator"==state.lastType||","==state.lastType?indentUnit:0):"switch"!=lexical.info||closing?lexical.align?lexical.column+(closing?0:1):lexical.indented+(closing?0:indentUnit):lexical.indented+(/^(?:case|default)\b/.test(textAfter)?indentUnit:2*indentUnit)},electricChars:":{}",jsonMode:jsonMode}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,a){if((a=a).get||a.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=a.value)},$jscomp.getGlobal=function(a){return("undefined"==typeof window||window!==a)&&"undefined"!=typeof global&&null!=global?global:a},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(i,f,j,k){if(f){for(var a=$jscomp.global,b=i.split("."),e=0;e<b.length-1;e++){var d=b[e];d in a||(a[d]={}),a=a[d]}var g=b[b.length-1],h=a[g],c=f(h);c!=h&&null!=c&&$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})}},$jscomp.polyfill("Array.prototype.copyWithin",function(a){if(a)return a;return function(c,b,a){var d=this.length;if(c=Number(c),b=Number(b),a=Number(null!=a?a:d),c<b)for(a=Math.min(a,d);b<a;)b in this?this[c++]=this[b++]:(delete this[c++],b++);else for(c+=(a=Math.min(a,d+b-c))-b;b<a;)--a in this?this[--c]=this[a]:delete this[c];return this}},"es6-impl","es3"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a=a||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};return a[$jscomp.global.Symbol.iterator]=function(){return this},a},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator(),a instanceof String&&(a+="");var c=0,b={next:function(){if(c<a.length){var e=c++;return{value:d(e,a[e]),done:!1}}return b.next=function(){return{done:!0,value:void 0}},b.next()}};return b[Symbol.iterator]=function(){return b},b},$jscomp.polyfill("Array.prototype.entries",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(a,b){return[a,b]})}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.fill",function(a){if(a)return a;return function(e,b,a){var c=this.length||0;b<0&&(b=Math.max(0,c+b)),(null==a||c<a)&&(a=c),(a=Number(a))<0&&(a=Math.max(0,c+a));for(var d=Number(b||0);d<a;d++)this[d]=e;return this}},"es6-impl","es3"),$jscomp.findInternal=function(a,d,e){a instanceof String&&(a=String(a));for(var f=a.length,b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a))return{i:b,v:c}}return{i:-1,v:void 0}},$jscomp.polyfill("Array.prototype.find",function(a){if(a)return a;return function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.findIndex",function(a){if(a)return a;return function(b,a){return $jscomp.findInternal(this,b,a).i}},"es6-impl","es3"),$jscomp.polyfill("Array.from",function(a){if(a)return a;return function(a,b,f){$jscomp.initSymbolIterator(),b=null!=b?b:function(a){return a};var g,c=[],e=a[Symbol.iterator];if("function"==typeof e)for(a=e.call(a);!(g=a.next()).done;)c.push(b.call(f,g.value));else for(var h=a.length,d=0;d<h;d++)c.push(b.call(f,a[d]));return c}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.keys",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3"),$jscomp.polyfill("Array.of",function(a){if(a)return a;return function(a){return Array.from(arguments)}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.values",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})}},"es6","es3"),$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a.throw(b)}return new Promise(function(b,c){!function handleGeneratorRecord(a){a.done?b(a.value):Promise.resolve(a.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}(a.next())})},$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)},$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)},$jscomp.polyfill("WeakMap",function(c){if(function(){if(c&&Object.seal)try{var b=Object.seal({}),d=Object.seal({}),a=new c([[b,2],[d,3]]);return 2!=a.get(b)||3!=a.get(d)?void 0:(a.delete(b),a.set(d,4),!a.has(b)&&4==a.get(d))}catch(e){return}}())return c;var a="$jscomp_hidden_"+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){$jscomp.defineProperty(b,a,{value:{}})}}function patch(a){var b=Object[a];b&&(Object[a]=function(a){return insert(a),b(a)})}patch("freeze"),patch("preventExtensions"),patch("seal");var d=0,b=function(a){if(this.id_=(d+=Math.random()+1).toString(),a){$jscomp.initSymbol(),$jscomp.initSymbolIterator();for(var b,e=$jscomp.makeIterator(a);!(b=e.next()).done;){var c=b.value;this.set(c[0],c[1])}}};return b.prototype.set=function(b,c){if(insert(b),!$jscomp.owns(b,a))throw new Error("WeakMap key fail: "+b);return b[a][this.id_]=c,this},b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:void 0},b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)},b.prototype.delete=function(b){return!(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_))&&delete b[a][this.id_]},b},"es6-impl","es3"),$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.polyfill("Map",function(b){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{b=b;var e=Object.seal({x:4}),c=new b($jscomp.makeIterator([[e,"s"]]));if("s"!=c.get(e)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),a=d.next();return a.done||a.value[0]!=e||"s"!=a.value[1]?!1:!((a=d.next()).done||4!=a.value[0].x||"t"!=a.value[1]||!d.next().done)}catch(k){return!1}}())return b;$jscomp.initSymbol(),$jscomp.initSymbolIterator();var f=new WeakMap,a=function(a){if(this.data_={},this.head_=g(),this.size=0,a)for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.set(c[0],c[1])}};a.prototype.set=function(c,b){var a=d(this,c);return a.list||(a.list=this.data_[a.id]=[]),a.entry?a.entry.value=b:(a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:b},a.list.push(a.entry),this.head_.previous.next=a.entry,this.head_.previous=a.entry,this.size++),this},a.prototype.delete=function(b){var a=d(this,b);return!(!a.entry||!a.list)&&(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0)},a.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=g(),this.size=0},a.prototype.has=function(a){return!!d(this,a).entry},a.prototype.get=function(b){var a=d(this,b).entry;return a&&a.value},a.prototype.entries=function(){return e(this,function(a){return[a.key,a.value]})},a.prototype.keys=function(){return e(this,function(a){return a.key})},a.prototype.values=function(){return e(this,function(a){return a.value})},a.prototype.forEach=function(d,c){for(var b,e=this.entries();!(b=e.next()).done;){var a=b.value;d.call(c,a[1],a[0],this)}},a.prototype[Symbol.iterator]=a.prototype.entries;var d=function(f,d){var e=j(d),a=f.data_[e];if(a&&$jscomp.owns(f.data_,e))for(var c=0;c<a.length;c++){var b=a[c];if(d!=d&&b.key!=b.key||d===b.key)return{id:e,list:a,index:c,entry:b}}return{id:e,list:a,index:-1,entry:void 0}},e=function(b,c){var a=b.head_;return $jscomp.iteratorPrototype(function(){if(a){for(;a.head!=b.head_;)a=a.previous;if(a.next!=a.head)return a=a.next,{done:!1,value:c(a)};a=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=a.next=a.head=a,a},i=0,j=function(a){var b=a&&typeof a;if("object"!=b&&"function"!=b)return"p_"+a;if(a=a,f.has(a))return f.get(a);var c=""+ ++i;return f.set(a,c),c};return a},"es6-impl","es3"),$jscomp.polyfill("Math.acosh",function(a){if(a)return a;return function(a){return a=Number(a),Math.log(a+Math.sqrt(a*a-1))}},"es6-impl","es3"),$jscomp.polyfill("Math.asinh",function(a){if(a)return a;return function(a){if(0===(a=Number(a)))return a;var b=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Math.log1p",function(a){if(a)return a;return function(a){if((a=Number(a))<.25&&-.25<a){for(var e=a,f=1,b=a,c=0,d=1;c!=b;)b=(c=b)+(d*=-1)*(e*=a)/++f;return b}return Math.log(1+a)}},"es6-impl","es3"),$jscomp.polyfill("Math.atanh",function(b){if(b)return b;var a=Math.log1p;return function(b){return b=Number(b),(a(b)-a(-b))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.cbrt",function(a){if(a)return a;return function(a){if(0===a)return a;a=Number(a);var b=Math.pow(Math.abs(a),1/3);return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Math.clz32",function(a){if(a)return a;return function(a){if(0===(a=Number(a)>>>0))return 32;var b=0;return 0==(4294901760&a)&&(a<<=16,b+=16),0==(4278190080&a)&&(a<<=8,b+=8),0==(4026531840&a)&&(a<<=4,b+=4),0==(3221225472&a)&&(a<<=2,b+=2),0==(2147483648&a)&&b++,b}},"es6-impl","es3"),$jscomp.polyfill("Math.cosh",function(a){if(a)return a;var b=Math.exp;return function(a){return a=Number(a),(b(a)+b(-a))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.expm1",function(a){if(a)return a;return function(a){if((a=Number(a))<.25&&-.25<a){for(var d=a,e=1,b=a,c=0;c!=b;)b=(c=b)+(d*=a/++e);return b}return Math.exp(a)-1}},"es6-impl","es3"),$jscomp.polyfill("Math.hypot",function(a){if(a)return a;return function(b,c,g){var a,f,e;b=Number(b),c=Number(c);var d=Math.max(Math.abs(b),Math.abs(c));for(a=2;a<arguments.length;a++)d=Math.max(d,Math.abs(arguments[a]));if(1e100<d||d<1e-100){for(e=(b/=d)*b+(c/=d)*c,a=2;a<arguments.length;a++)e+=(f=Number(arguments[a])/d)*f;return Math.sqrt(e)*d}for(e=b*b+c*c,a=2;a<arguments.length;a++)e+=(f=Number(arguments[a]))*f;return Math.sqrt(e)}},"es6-impl","es3"),$jscomp.polyfill("Math.imul",function(a){if(a)return a;return function(a,b){var c=65535&(a=Number(a)),d=65535&(b=Number(b));return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0}},"es6-impl","es3"),$jscomp.polyfill("Math.log10",function(a){if(a)return a;return function(a){return Math.log(a)/Math.LN10}},"es6-impl","es3"),$jscomp.polyfill("Math.log2",function(a){if(a)return a;return function(a){return Math.log(a)/Math.LN2}},"es6-impl","es3"),$jscomp.polyfill("Math.sign",function(a){if(a)return a;return function(a){return 0===(a=Number(a))||isNaN(a)?a:0<a?1:-1}},"es6-impl","es3"),$jscomp.polyfill("Math.sinh",function(a){if(a)return a;var b=Math.exp;return function(a){return 0===(a=Number(a))?a:(b(a)-b(-a))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.tanh",function(a){if(a)return a;return function(a){if(0===(a=Number(a)))return a;var b=Math.exp(-2*Math.abs(a)),c=(1-b)/(1+b);return a<0?-c:c}},"es6-impl","es3"),$jscomp.polyfill("Math.trunc",function(a){if(a)return a;return function(a){if(a=Number(a),isNaN(a)||a===1/0||a===-1/0||0===a)return a;var b=Math.floor(Math.abs(a));return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Number.EPSILON",function(a){return Math.pow(2,-52)},"es6-impl","es3"),$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6-impl","es3"),$jscomp.polyfill("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991},"es6-impl","es3"),$jscomp.polyfill("Number.isFinite",function(a){if(a)return a;return function(a){return"number"==typeof a&&(!isNaN(a)&&a!==1/0&&a!==-1/0)}},"es6-impl","es3"),$jscomp.polyfill("Number.isInteger",function(a){if(a)return a;return function(a){return!!Number.isFinite(a)&&a===Math.floor(a)}},"es6-impl","es3"),$jscomp.polyfill("Number.isNaN",function(a){if(a)return a;return function(a){return"number"==typeof a&&isNaN(a)}},"es6-impl","es3"),$jscomp.polyfill("Number.isSafeInteger",function(a){if(a)return a;return function(a){return Number.isInteger(a)&&Math.abs(a)<=Number.MAX_SAFE_INTEGER}},"es6-impl","es3"),$jscomp.polyfill("Object.assign",function(a){if(a)return a;return function(d,e){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(a)for(var b in a)$jscomp.owns(a,b)&&(d[b]=a[b])}return d}},"es6-impl","es3"),$jscomp.polyfill("Object.getOwnPropertySymbols",function(a){return a||function(){return[]}},"es6-impl","es5"),$jscomp.polyfill("Object.is",function(a){if(a)return a;return function(a,b){return a===b?0!==a||1/a==1/b:a!=a&&b!=b}},"es6-impl","es3"),$jscomp.polyfill("Object.setPrototypeOf",function(a){if(a)return a;if("object"!=typeof"".__proto__)return null;return function(a,b){if(a.__proto__=b,a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}},"es6","es5"),$jscomp.EXPOSE_ASYNC_EXECUTOR=!0,$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.polyfill("Promise",function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){return null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_()),this.batch_.push(a),this},AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global.setTimeout;AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)},AsyncExecutor.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var c=b[a];delete b[a];try{c()}catch(f){this.asyncThrow_(f)}}}this.batch_=null},AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b_PENDING=0,b_FULFILLED=1,b_REJECTED=2,a=function(c){this.state_=b_PENDING,this.result_=void 0,this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{c(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this,a=!1;function firstCallWins(c){return function(d){a||(a=!0,c.call(b,d))}}return{resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}},a.prototype.resolveTo_=function(b){b===this?this.reject_(new TypeError("A Promise cannot resolve to itself")):b instanceof a?this.settleSameAsPromise_(b):!function(a){switch(typeof a){case"object":return null!=a;case"function":return 1;default:return}}(b)?this.fulfill_(b):this.resolveToNonPromiseObj_(b)},a.prototype.resolveToNonPromiseObj_=function(b){var a=void 0;try{a=b.then}catch(f){return void this.reject_(f)}"function"==typeof a?this.settleSameAsThenable_(a,b):this.fulfill_(b)},a.prototype.reject_=function(a){this.settle_(b_REJECTED,a)},a.prototype.fulfill_=function(a){this.settle_(b_FULFILLED,a)},a.prototype.settle_=function(c,a){if(this.state_!=b_PENDING)throw new Error("Cannot settle("+c+", "+a|"): Promise already settled in state"+this.state_);this.state_=c,this.result_=a,this.executeOnSettledCallbacks_()},a.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=this.onSettledCallbacks_,a=0;a<b.length;++a)b[a].call(),b[a]=null;this.onSettledCallbacks_=null}};var d=new AsyncExecutor;return a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)},a.prototype.settleSameAsThenable_=function(b,c){var a=this.createResolveAndReject_();try{b.call(c,a.resolve,a.reject)}catch(f){a.reject(f)}},a.prototype.then=function(e,f){var b,c,d=new a(function(a,d){b=a,c=d});function createCallback(a,d){return"function"==typeof a?function(d){try{b(a(d))}catch(g){c(g)}}:d}return this.callWhenSettled_(createCallback(e,b),createCallback(f,c)),d},a.prototype.catch=function(a){return this.then(void 0,a)},a.prototype.callWhenSettled_=function(c,e){var a=this;function callback(){switch(a.state_){case b_FULFILLED:c(a.result_);break;case b_REJECTED:e(a.result_);break;default:throw new Error("Unexpected state: "+a.state_)}}null==this.onSettledCallbacks_?d.asyncExecute(callback):this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})},a.resolve=function(b){return b instanceof a?b:new a(function(a,c){a(b)})},a.reject=function(b){return new a(function(c,a){a(b)})},a.race=function(b){return new a(function(e,f){for(var d=$jscomp.makeIterator(b),c=d.next();!c.done;c=d.next())a.resolve(c.value).callWhenSettled_(e,f)})},a.all=function(d){var c=$jscomp.makeIterator(d),b=c.next();return b.done?a.resolve([]):new a(function(f,g){var d=[],e=0;function onFulfilled(a){return function(b){d[a]=b,0==--e&&f(d)}}for(;d.push(void 0),e++,a.resolve(b.value).callWhenSettled_(onFulfilled(d.length-1),g),!(b=c.next()).done;);})},$jscomp.EXPOSE_ASYNC_EXECUTOR&&(a.$jscomp$new$AsyncExecutor=function(){return new AsyncExecutor}),a},"es6-impl","es3"),$jscomp.polyfill("Reflect.apply",function(a){if(a)return a;var c=Function.prototype.apply;return function(d,b,a){return c.call(d,b,a)}},"es6","es3"),$jscomp.polyfill("Reflect.construct",function(a){if(a)return a;return function(b,d,a){void 0===a&&(a=b);var e=a.prototype||Object.prototype,c=Object.create(e);return Reflect.apply(b,c,d)||c}},"es6","es5"),$jscomp.polyfill("Reflect.defineProperty",function(a){if(a)return a;return function(d,c,b){try{Object.defineProperty(d,c,b);var a=Object.getOwnPropertyDescriptor(d,c);return a?a.configurable===(b.configurable||!1)&&a.enumerable===(b.enumerable||!1)&&("value"in a?a.value===b.value&&a.writable===(b.writable||!1):a.get===b.get&&a.set===b.set):!1}catch(e){return!1}}},"es6","es5"),$jscomp.polyfill("Reflect.deleteProperty",function(a){if(a)return a;return function(b,a){if(!$jscomp.owns(b,a))return!0;try{return delete b[a]}catch(c){return!1}}},"es6","es3"),$jscomp.polyfill("Reflect.getOwnPropertyDescriptor",function(a){return a||Object.getOwnPropertyDescriptor},"es6","es5"),$jscomp.polyfill("Reflect.getPrototypeOf",function(a){return a||Object.getPrototypeOf},"es6","es5"),$jscomp.findDescriptor=function(d,c){for(var a=d;a;){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b)return b;a=Reflect.getPrototypeOf(a)}},$jscomp.polyfill("Reflect.get",function(a){if(a)return a;return function(c,b,d){if(arguments.length<=2)return c[b];var a=$jscomp.findDescriptor(c,b);return a?a.get?a.get.call(d):a.value:void 0}},"es6","es5"),$jscomp.polyfill("Reflect.has",function(a){if(a)return a;return function(b,a){return a in b}},"es6","es3"),$jscomp.polyfill("Reflect.isExtensible",function(a){return a||("function"==typeof Object.isExtensible?Object.isExtensible:function(){return!0})},"es6","es3"),$jscomp.polyfill("Reflect.ownKeys",function(b){if(b)return b;var a="jscomp_symbol_";function isSymbol(b){return b.substring(0,a.length)==a}return function(d){for(var e=[],b=Object.getOwnPropertyNames(d),c=Object.getOwnPropertySymbols(d),a=0;a<b.length;a++)(isSymbol(b[a])?c:e).push(b[a]);return e.concat(c)}},"es6","es5"),$jscomp.polyfill("Reflect.preventExtensions",function(a){if(a)return a;if("function"!=typeof Object.preventExtensions)return function(){return!1};return function(a){return Object.preventExtensions(a),!Object.isExtensible(a)}},"es6","es3"),$jscomp.polyfill("Reflect.set",function(a){if(a)return a;return function(a,c,d,e){var b=$jscomp.findDescriptor(a,c);return b?b.set?(b.set.call(3<arguments.length?e:a,d),!0):!(!b.writable||Object.isFrozen(a))&&(a[c]=d,!0):!!Reflect.isExtensible(a)&&(a[c]=d,!0)}},"es6","es5"),$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if("object"!=typeof"".__proto__)return null;return function(a,b){try{return a.__proto__=b,a.__proto__===b}catch(c){return!1}}},"es6","es5"),$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.polyfill("Set",function(b){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{b=b;var d=Object.seal({x:4}),c=new b($jscomp.makeIterator([d]));if(!c.has(d)||1!=c.size||c.add(d)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var e=c.entries(),a=e.next();return a.done||a.value[0]!=d||a.value[1]!=d?!1:!(a=e.next()).done&&a.value[0]!=d&&4==a.value[0].x&&a.value[1]==a.value[0]&&e.next().done}catch(f){return!1}}())return b;$jscomp.initSymbol(),$jscomp.initSymbolIterator();var a=function(a){if(this.map_=new Map,a)for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.add(c)}this.size=this.map_.size};return a.prototype.add=function(a){return this.map_.set(a,a),this.size=this.map_.size,this},a.prototype.delete=function(b){var a=this.map_.delete(b);return this.size=this.map_.size,a},a.prototype.clear=function(){this.map_.clear(),this.size=0},a.prototype.has=function(a){return this.map_.has(a)},a.prototype.entries=function(){return this.map_.entries()},a.prototype.values=function(){return this.map_.values()},a.prototype[Symbol.iterator]=a.prototype.values,a.prototype.forEach=function(b,a){var c=this;this.map_.forEach(function(d){return b.call(a,d,d,c)})},a},"es6-impl","es3"),$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""},$jscomp.polyfill("String.prototype.codePointAt",function(a){if(a)return a;return function(a){var d=$jscomp.checkStringArgs(this,null,"codePointAt"),e=d.length;if(0<=(a=Number(a)||0)&&a<e){a|=0;var b=d.charCodeAt(a);if(b<55296||56319<b||a+1===e)return b;var c=d.charCodeAt(a+1);return c<56320||57343<c?b:1024*(b-55296)+c+9216}}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.endsWith",function(a){if(a)return a;return function(a,b){var c=$jscomp.checkStringArgs(this,a,"endsWith");a+="",void 0===b&&(b=c.length);for(var e=Math.max(0,Math.min(0|b,c.length)),d=a.length;0<d&&0<e;)if(c[--e]!=a[--d])return!1;return d<=0}},"es6-impl","es3"),$jscomp.polyfill("String.fromCodePoint",function(a){if(a)return a;return function(d){for(var b="",c=0;c<arguments.length;c++){var a=Number(arguments[c]);if(a<0||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);a<=65535?b+=String.fromCharCode(a):(a-=65536,b+=String.fromCharCode(a>>>10&1023|55296),b+=String.fromCharCode(1023&a|56320))}return b}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.includes",function(a){if(a)return a;return function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.repeat",function(a){if(a)return a;return function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(a<0||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var c="";a;)1&a&&(c+=b),(a>>>=1)&&(b+=b);return c}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.startsWith",function(a){if(a)return a;return function(a,f){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var g=b.length,d=a.length,e=Math.max(0,Math.min(0|f,b.length)),c=0;c<d&&e<g;)if(b[e++]!=a[c++])return!1;return d<=c}},"es6-impl","es3"),$jscomp.arrayFromIterator=function(c){for(var b,a=[];!(b=c.next()).done;)a.push(b.value);return a},$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))},$jscomp.inherits=function(a,b){function tempCtor(){}for(var c in tempCtor.prototype=b.prototype,a.prototype=new tempCtor,a.prototype.constructor=a,b)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]},$jscomp.polyfill("WeakSet",function(b){if(function(){if(b&&Object.seal)try{var c=Object.seal({}),d=Object.seal({}),a=new b([c]);return!a.has(c)||a.has(d)?void 0:(a.delete(c),a.add(d),!a.has(c)&&a.has(d))}catch(e){return}}())return b;var a=function(a){if(this.map_=new WeakMap,a){$jscomp.initSymbol(),$jscomp.initSymbolIterator();for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.add(c)}}};return a.prototype.add=function(a){return this.map_.set(a,!0),this},a.prototype.has=function(a){return this.map_.has(a)},a.prototype.delete=function(a){return this.map_.delete(a)},a},"es6-impl","es3");try{-1==Array.prototype.values.toString().indexOf("[native code]")&&delete Array.prototype.values}catch(a){}Ext.define("Siesta.Recorder.UI.Editor.ActionName",{extend:Ext.form.field.ComboBox,alias:"widget.typeeditor",displayField:"id",valueField:"id",queryMode:"local",matchFieldWidth:!1,forceSelection:!0,typeAhead:!0,selectOnFocus:!0,store:{fields:["id","type"]},actions:[{id:"group",type:"group"},{id:"click",type:"mouseinput"},{id:"dblclick",type:"mouseinput"},{id:"contextmenu",type:"mouseinput"},{id:"drag",type:"mouseinput"},{id:"fn",type:"fn"},{id:"moveCursorTo",type:"mouseinput"},{id:"moveCursorBy",type:"mouseinput"},{id:"mousedown",type:"mouseinput"},{id:"mouseup",type:"mouseinput"},{id:"type",type:"keyinput"},{id:"screenshot",type:"screenshot"},{id:"setUrl",type:"navigate"}],applyChanges:function(a){var b=this.getValue();a.setAction(b),a.set("leaf","group"!==b)},populate:function(c){var b=[];for(var a in c)a.match(/waitFor.+/)&&"function"==typeof c[a]&&b.push({id:a,type:"wait"});var d=this.actions.concat(b).sort(function(a,b){return a.id<b.id?-1:1});this.store.loadData(d)}}),Ext.define("Siesta.Recorder.UI.ActionColumn",{extend:Ext.tree.Column,alias:"widget.recorderactioncolumn",dataIndex:"action",width:100,sortable:!1,menuDisabled:!0,tdCls:"siesta-recorderpanel-typecolumn",editor:"typeeditor",constructor:function(){var a=Siesta.Resource("Siesta.Recorder.UI.RecorderPanel");this.text=a.get("actionColumnHeader"),this.callParent(arguments)},renderer:function(b,c,a){return c.tdCls=" action-level-"+(a.parentNode.data.root?"0":"1"),a.isLeaf()?b:a.data.name}}),Ext.define("Siesta.Recorder.UI.ActionIconColumn",{extend:Ext.grid.Column,alias:"widget.recorderactioniconcolumn",dataIndex:"action",width:28,sortable:!1,menuDisabled:!0,align:"center",tdCls:"siesta-recorderpanel-action-icon-column",constructor:function(){(this.scope=this).callParent(arguments)},renderer:function(a,d,b){if(a&&b.get("leaf"))return'<span class="action-icon fa '+this.getCssByActionType(a)+'"></span>'},getCssByActionType:function(a){return a.match("^wait")?"fa-clock-o":a.match("^move")?"fa-arrows":"type"===a||"setValue"===a?"fa-keyboard-o":"screenshot"===a?"fa-camera":"fn"===a?"fa-code":"fa-mouse-pointer"}}),Ext.define("Siesta.Recorder.UI.Editor.Array",{extend:Ext.form.field.Text,alias:"widget.arrayeditor",getValue:function(){var a=this.callParent(arguments);return"string"==typeof a&&a.match(/\d*,\d*/)&&((a=a.split(","))[0]=parseInt(a[0],10),a[1]=parseInt(a[1],10)),a}}),Ext.define("Siesta.Recorder.UI.Editor.Target",{extend:Ext.form.field.ComboBox,alias:"widget.targeteditor",enableKeyEvents:!0,queryMode:"local",valueField:"type",displayField:"value",cls:"siesta-targeteditor",targetProperty:"target",store:{proxy:"memory",fields:["type","value","target"]},getTarget:function(){var a=this.getValue();if(a&&/^!!(.+)/.exec(a)){var b=this.store.findRecord("type",a);return b?b.get("target"):null}return a?{type:"user",target:a}:null},setValue:function(a){a instanceof Siesta.Recorder.Target?a.getTarget()?this.callParent(["!!"+a.getTarget().type]):this.callParent([""]):this.callParent(arguments)},getEditorValue:function(a){return a.data[this.targetProperty]},applyChanges:function(c){var d,a=this.getValue(),b=c.data[this.targetProperty];"string"==typeof a&&a.match(/\d*,\d*/)&&((a=a.split(","))[0]=parseInt(a[0],10),a[1]=parseInt(a[1],10)),a&&!b&&(b=c.data[this.targetProperty]=new Siesta.Recorder.Target({targets:[{type:"user",target:a}]})),b&&(a&&(d=/^!!(.+)/.exec(a))?b.activeTarget=d[1]:b.setUserTarget(a))},populate:function(b){var a=[];b&&b.targets.forEach(function(b){var c=b.type;if(value=b.target,"cq"===c){var d=b.target.indexOf("->");value=0<d?b.target.split("->").splice(1,0,">>").join():">>"+b.target}a.push({type:"!!"+c,value:value,target:b})}),this.store.loadData(a)}}),Ext.define("Siesta.Recorder.UI.Editor.DragTarget",{extend:Ext.form.field.Picker,alias:"widget.drageditor",editable:!1,hideTrigger:!0,minWidth:300,sourceEditor:null,targetEditor:null,record:null,onTargetChange:null,listeners:{focus:function(a,c,b){a.expand()}},cancelEdit:function(){this.fireEvent("blur"),this.collapse()},applyValues:function(){var b=this,d=b.picker.getForm().getValues(),a=b.up("tablepanel").editing.activeRecord;this.sourceEditor.applyChanges(a),this.targetEditor.applyChanges(a);var c=d.by;a.set("by",c&&a.parseOffset(c)||c),b.fireEvent("blur"),b.collapse()},applyChanges:function(){},collapseIf:function(a){if(!a.getTarget(".x-layer"))return this.callParent(arguments)},valueToRaw:function(){return""},createPicker:function(){var a=Siesta.Resource("Siesta.Recorder.UI.Editor.DragTarget"),b=this,c={select:this.onTargetChange,keyup:this.onTargetChange,focus:this.onTargetChange,buffer:50,scope:this};return new Ext.form.Panel({floating:!0,bodyPadding:5,title:a.get("dragVariantTitle"),items:[this.sourceEditor=new Siesta.Recorder.UI.Editor.Target({fieldLabel:a.get("targetLabel")+":",anchor:"100%",name:"target",labelWidth:60,listeners:c}),this.targetEditor=new Siesta.Recorder.UI.Editor.Target({targetProperty:"toTarget",fieldLabel:a.get("toLabel")+":",name:"toTarget",anchor:"100%",labelWidth:60,listeners:c}),{xtype:"textfield",name:"by",fieldLabel:a.get("byLabel")+":",labelWidth:60,width:200}],listeners:{afterrender:function(c,d){var a=b.record;b.sourceEditor.populate(a.get("target")),b.targetEditor.populate(a.get("toTarget")),c.getForm().setValues(a.data)}},buttons:[{name:"cancel",text:a.get("cancelButtonText"),handler:function(c,d,a){b.cancelEdit()}},"->",{name:"save",text:a.get("saveButtonText"),handler:function(c,d,a){b.applyValues()}}]})}}),Ext.define("Ext.ux.form.field.CodeMirror",{extend:Ext.Component,alias:"widget.jseditor",alternateClassName:"Ext.form.CodeMirror",width:"100%",mode:"text/javascript",showLineNumbers:!0,enableMatchBrackets:!0,enableElectricChars:!1,enableIndentWithTabs:!0,enableSmartIndent:!0,enableLineWrapping:!1,enableLineNumbers:!0,enableFixedGutter:!1,firstLineNumber:1,readOnly:!1,pollInterval:100,indentUnit:4,tabSize:4,theme:"default",scriptsLoaded:[],lastMode:"",initComponent:function(){var a=this;a.callParent(arguments),a.on("resize",function(){a.editor&&a.editor.refresh()},a)},resetOriginalValue:Ext.emptyFn,isValid:function(){return 0===(this.getErrors()||[]).length},afterRender:function(){this.callParent(arguments),this.initEditor()},initEditor:function(){var b,a=this;a.editor=CodeMirror(a.el.dom,{matchBrackets:a.enableMatchBrackets,electricChars:a.enableElectricChars,autoClearEmptyLines:!0,indentUnit:a.indentUnit,smartIndent:a.enableSmartIndent,indentWithTabs:a.indentWithTabs,pollInterval:a.pollInterval,lineNumbers:a.enableLineNumbers,lineWrapping:a.enableLineWrapping,firstLineNumber:a.firstLineNumber,tabSize:a.tabSize,gutters:["CodeMirror-lint-markers"],fixedGutter:a.enableFixedGutter,theme:a.theme,mode:"javascript",lintWith:CodeMirror.javascriptValidatorWithOptions({onecase:!0,asi:!0,expr:!0,loopfunc:!0,laxbreak:!0,debug:!0,laxcomma:!0,smarttabs:!0}),onChange:function(b,c){a.checkValid()},onCursorActivity:function(b){a.fireEvent("cursoractivity",a)},onGutterClick:function(d,c,b){a.fireEvent("gutterclick",a,c,b)},onFocus:function(b){a.fireEvent("activate",a)},onBlur:function(c,b){a.fireEvent("deactivate",a),a.onBlur(b)},onScroll:function(b){a.fireEvent("scroll",a)},onHighlightComplete:function(b){a.fireEvent("highlightcomplete",a)},onUpdate:function(b){a.fireEvent("update",a)},onKeyEvent:function(c,b){b.cancelBubble=!0,a.fireEvent("keyevent",a,b)}}),a.setReadOnly(a.readOnly),a.fireEvent("initialize",a),(b=Ext.util.CSS.getRule(".CodeMirror"))&&(b.style.height="100%",b.style.position="relative",b.style.overflow="hidden"),(b=Ext.util.CSS.getRule(".CodeMirror-Scroll"))&&(b.style.height="100%")},checkValid:function(){0<(this.getErrors()||[]).length?this.addCls("siesta-invalid-syntax"):this.removeCls("siesta-invalid-syntax")},getErrors:function(){},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(a){Ext.defer(function(){var b=this;switch(b.editor.focus(),a){case"justifycenter":CodeMirror.extensions.autoIndentRange?b.doIndentSelection():b.loadDependencies(b.extensions.format,b.pathExtensions,b.doIndentSelection,b);break;case"insertorderedlist":b.doChangeLineNumbers()}},10,this)},doChangeLineNumbers:function(){var a=this;a.enableLineNumbers=!a.enableLineNumbers,a.editor.setOption("lineNumbers",a.enableLineNumbers)},doIndentSelection:function(){var a=this;a.reloadExtentions();try{var b={from:a.editor.getCursor(!0),to:a.editor.getCursor(!1)};a.editor.autoIndentRange(b.from,b.to)}catch(c){}},setReadOnly:function(b){this.editor&&this.editor.setOption("readOnly",b)},onDisable:function(){this.bodyEl.mask(),this.callParent(arguments)},onEnable:function(){this.bodyEl.unmask(),this.callParent(arguments)},setValue:function(a){a=a||"";var b=this;return b.editor&&b.editor.setValue(a),b},getSubmitValue:function(){return this.getValue()},getRawValue:function(){return this.getValue()},getValue:function(){return this.editor&&this.editor.getValue()||""},onDestroy:function(){var a=this;if(a.rendered){for(var b in a.editor)a.editor.hasOwnProperty(b)&&delete a.editor[b];Ext.destroyMembers("tb","toolbarWrap","editorEl")}a.callParent()},commentLine:function(){var b=this.editor,c=b.getCursor(!0),d=b.getCursor(!1),e=c.line,f=!1;function toggleCommented(c){(a=b.getLine(c)).match(/^\s*\/\/\s*/)?(a=a.replace(/\s*\/\/\s*/,""),f=!0):a=a.substr(0,a.indexOf(Ext.String.trim(a)))+"// "+Ext.String.trim(a),b.setLine(c,a)}if(c.line===d.line&&c.ch===d.ch)toggleCommented(c.line);else if(0==c.character){for(;e!=d.line;)toggleCommented(e),e=b.getLine(++e);b.selectLines(c.line,c.ch,d.line,d.ch)}else{var a=b.getSelection();a.match(/^\/\*/)&&a.match(/^\/\*/)?(a=a.substring(2,a.length-2),f=!0):a="/*"+a+"*/",b.replaceSelection(a)}f&&b.autoIndentRange({line:0},{line:b.lineCount()})}}),Ext.define("Siesta.Recorder.UI.Editor.Code",{extend:Ext.ux.form.field.CodeMirror,xtype:"codeeditor",height:100,cls:"siesta-recorder-codeeditor",applyChanges:function(a){a.set("value",this.getValue())},getEditorValue:function(a){return a.get("value")},getErrors:function(){var a=this.getValue();if(a)try{new Function(a)}catch(b){return[Siesta.Resource("Siesta.Recorder.UI.Editor.Code","invalidSyntax")]}return this.callParent(arguments)}}),Ext.define("Siesta.Recorder.UI.TargetColumn",{extend:Ext.grid.Column,alias:"widget.targetcolumn",header:Siesta.Resource("Siesta.Recorder.UI.TargetColumn","headerText"),dataIndex:"target",flex:1,sortable:!1,menuDisabled:!0,field:{},tdCls:"eventview-targetcolumn",highlightTarget:null,renderer:function(a,e,b){a="";var h=(b.data.action||"").toLowerCase();if(b.hasTarget()){var c=b.getTarget();if(c){var g=Siesta.Resource("Siesta.Recorder.UI.TargetColumn");if(a=c.target,c&&"cq"==c.type&&(a=">>"+a),"drag"===h){var d=b.data.toTarget,f=b.data.by;!d||!d.targets.length||d.isTooGeneric()&&f?f&&(a+=" "+g.get("by")+": ["+f+"]"):a+=" "+g.get("to")+": "+d.getTarget().target}e.tdCls="eventview-target-"+c.type,"xy"===c.type&&(e.tdAttr="title='"+g.get("coordinateTargetWarning")+"'"),a=Ext.String.htmlEncode(a)}}else if("movecursoralongpath"==h)a=Ext.String.htmlEncode(JSON.stringify(b.$action.value));else{a=b.get("value");var i=b.data.options;null!=a&&i&&(a=b.getReadableStringWithModifierKeys(a,i))}return e.tdAttr||(e.tdAttr='title="'+Ext.util.Format.stripTags(a)+'"'),a},setTargetEditor:function(b){var a=this.getTargetEditor(b);if(!a)return!1;this.setEditor(a)},getTargetEditor:function(c){var b,d=this,a=c.get("action");if(a.match(/^waitFor/)){if("waitForAnimations"===a)return null;b="waitForFn"===a?new Siesta.Recorder.UI.Editor.Code:(this.dataIndex="value","waitForMs"===a?new Ext.form.field.Number:new Ext.form.field.Text)}else"drag"===a?(this.dataIndex="target",b=new Siesta.Recorder.UI.Editor.DragTarget({onTargetChange:function(){d.onTargetChange.apply(d,arguments)},listeners:{collapse:function(){d.up("tablepanel").editing.cancelEdit()}}})):"fn"===a?(this.dataIndex="value",b=new Siesta.Recorder.UI.Editor.Code):"type"===a||"moveCursorBy"===a||"screenshot"===a||"setUrl"===a?(this.dataIndex="value",b=new Ext.form.field.Text):"setWindowSize"===a?(this.dataIndex="value",b=new Siesta.Recorder.UI.Editor.Array):(this.dataIndex="target",(b=new Siesta.Recorder.UI.Editor.Target({listeners:{select:this.onTargetChange,keyup:this.onTargetChange,focus:this.onTargetChange,buffer:50,scope:this}})).populate(c.data.target));return b.record=c,b},onTargetChange:function(c){var a=c.getTarget();if(a){var b=a.target;if("cq"==a.type&&(b=">>"+b),this.highlightTarget){var d=this.highlightTarget(b,a.offset);d.success?c.clearInvalid():c.markInvalid(d.message)}}}}),Ext.define("Siesta.Recorder.UI.ContextMenu",{extend:Ext.menu.Menu,alias:"widget.recordercontextmenu",panel:null,width:300,plain:!0,initComponent:function(){Ext.apply(this,{items:[{xtype:"textfield",itemId:"newGroupName",fieldLabel:"Create group",width:80,enableKeyEvents:!0,listeners:{specialkey:this.onCreateGroupKeyUp,scope:this}}]}),this.panel.on({rowcontextmenu:this.onActivate,scope:this}),this.callParent(arguments),this.nameField=this.down("#newGroupName")},onActivate:function(d,c,e,b,a){this.showAt(a.getXY()),this.nameField.reset(),a.stopEvent()},onCreateGroupKeyUp:function(f,c){if(c.getKey()===c.ENTER){var b=this.nameField.getValue();if(b){var e=this.panel.getStore(),a=this.panel.getSelectionModel().getSelected().items,d=Math.min.apply(Math,a.map(function(a){return a.data.index}));e.getRootNode().insertChild(d,{action:"group",value:b,expanded:!0,children:a}),this.hide()}}}}),Ext.define("Siesta.Recorder.UI.Model.Action",{extend:Ext.data.TreeModel,fields:Object.keys?Object.keys(Siesta.Recorder.Action.meta.getAttributes().properties):[],actionClass:Siesta.Recorder.Action,$action:null,formatStringHelper:null,constructor:function(a){if(a.children||"leaf"in a||a.root||(a.leaf=!0),this.callParent([a]),a&&!a.root){var b=a;b instanceof this.actionClass||(b=new this.actionClass(b)),this.$action=b,Ext.applyIf(b,this.data),this.data=b}},getReadableStringWithModifierKeys:function(c,b){var a="",e=/CTRL|CMD|SHIFT|ALT/,g=(b=b||{}).ctrlKey,h=b.metaKey&&Ext.isMac,f=b.shiftKey;b.altKey&&(a="[ALT]"),g&&(a="[CTRL]"),h&&(a+="[CMD]"),f&&(a+="[SHIFT]"),a&&(c=this.formatStringHelper.extractKeysAndSpecialKeys(c).map(function(b){return e.test(b)?"":"<span class='modifierkeys'>"+a+"</span>"+Ext.String.htmlEncode(b)}).join(""));return c}},function(){var a=this.prototype,b=Class({does:Siesta.Util.Role.CanFormatStrings});a.formatStringHelper=new b,Joose.A.each(["getTargetOffset","isMouseAction","parseOffset","getTarget","getTargets","hasTarget","asStep","asCode"],function(b){a[b]=function(){return this.$action[b].apply(this.$action,arguments)}}),Joose.O.each({clearTargetOffset:["target"],setTargetOffset:["target"],resetValues:["target","value"],setAction:["action","target"]},function(c,b){a[b]=function(){return this.$action[b].apply(this.$action,arguments)}})}),Ext.define("Siesta.Recorder.UI.Store.Action",{extend:Ext.data.TreeStore,alias:"store.actionstore",model:"Siesta.Recorder.UI.Model.Action",proxy:"memory",root:{expanded:!0},tabSize:4,generateCode:function(c){var b=this.getRootNode(),a="",d=this.doesRecordingNavigatePages();return 0<b.childNodes.length&&(a=b.firstChild.isLeaf()?this.generateChain(b):b.childNodes.map(this.generateCodeForNode,this).join("\n\n")),d?'describe({\n    name : "'+c+'",\n    enablePageRedirect : true\n}, function(t) {\n'+a+"\n});":'describe("'+c+'", function(t) {\n'+a+"\n});"},doesRecordingNavigatePages:function(){var a=!1;return this.getRoot().cascadeBy(function(b){if(b.get("waitForPageLoad"))return!(a=!0)}),a},generateCodeForNode:function(a){return a.isLeaf()?this.getIndent(a.data.depth+1)+a.asCode():"group"===a.get("action")?this.generateIt(a):void 0},generateIt:function(a){var b=this.getIndent(a.data.depth),c="\n"+b+"});";return b+'t.it("'+(a.get("value")||"should...")+'", function(t) {\n'+this.generateChain(a)+c},generateChain:function(b){var f=this,a=this.getIndent(b.data.depth+1),d="\n"+a+");";return a+"t.chain(\n"+b.childNodes.map(function(a){return f.generateCodeForNode(a)}).join(",\n\n")+d},getIndent:function(a){return new Array(this.tabSize*a+1).join(" ")}}),Ext.define("Siesta.Recorder.UI.RecorderPanel",{extend:Ext.tree.Panel,alias:"widget.recorderpanel",mixins:[Siesta.Project.Browser.UI.CanCopyToClipboard],buttonAlign:"left",border:!1,cls:"siesta-recorderpanel",selModel:{mode:"MULTI"},store:{type:"actionstore"},rootVisible:!1,viewConfig:{markDirty:!1,stripeRows:!1,allowCopy:!0,plugins:{ptype:"treeviewdragdrop"}},newActionDefaults:{action:"click"},lines:!1,test:null,recorder:null,project:null,domContainer:null,recorderConfig:null,editing:null,bufferedRenderer:!1,enableColumnMove:!1,enableContextMenu:!0,enableEditing:!0,showToolbars:!0,playbackOnly:!1,initComponent:function(){var a=this,e=Siesta.Resource("Siesta.Recorder.UI.RecorderPanel"),d=this.recorderConfig||{};if(!this.playbackOnly){var c=this.project&&this.project.recorderClass||d.recorderClass||Siesta.Recorder.ExtJS;"string"==typeof c&&(c=Joose.S.strToClass(c));var b=a.recorder=a.recorder||new c(d);b.on("actionadd",this.onActionAdded,this),b.on("actionremove",this.onActionRemoved,this),b.on("actionupdate",this.onActionUpdated,this),b.on("clear",this.onRecorderClear,this),b.on("start",this.onRecorderStart,this),b.on("stop",this.onRecorderStop,this)}this.enableEditing&&(a.plugins=a.plugins?[].concat(a.plugins):[],a.editing=a.editing||new Ext.grid.plugin.CellEditing({clicksToEdit:1}),a.editing.on({beforeedit:a.onBeforeEdit,validateedit:a.onValidateEdit,edit:a.afterEdit,canceledit:a.afterEdit,scope:a}),this.relayEvents(a.editing,["beforeedit","afteredit","validateedit"]),a.plugins.push(a.editing),this.on("hide",function(){this.editing&&this.editing.completeEdit()}),this.on({afteredit:this.onAfterEdit,validateedit:this.onAfterEdit,canceledit:this.onAfterEdit,scope:this,buffer:200})),Ext.applyIf(a,{columns:[{xtype:"recorderactioniconcolumn"},{xtype:"recorderactioncolumn"},{xtype:"targetcolumn",highlightTarget:this.highlightTarget.bind(this)}].concat({header:e.get("offsetColumnHeader"),dataIndex:"__offset__",width:60,sortable:!1,menuDisabled:!0,tdCls:"siesta-recorderpanel-offsetcolumn",renderer:function(c,d,b){var a=b.getTarget();if(a&&a.offset)return a.offset+'<div class="siesta-recorderpanel-clearoffset fa fa-close"></div>'},editor:"textfield"}).concat({xtype:"actioncolumn",width:55,align:"center",sortable:!1,menuDisabled:!0,tdCls:"siesta-recorderpanel-actioncolumn",items:[{iconCls:"step-icon fa fa-close icon-delete-row",tooltip:"Delete this action",handler:this.onDeleteStepClick,scope:this},{iconCls:"step-icon fa fa-play icon-play-row",tooltip:"Play this action",handler:this.onPlaySingleStepClick,scope:this},{iconCls:"step-icon fa fa-forward icon-play-from-row",tooltip:"Play from this action",handler:this.onPlayFromStepClick,scope:this}]})}),this.showToolbars&&a.createToolbars(),a.callParent(),this.mon(Ext.getBody(),"mousedown",this.onBodyMouseDown,this,{delegate:".target-inspector-label"}),this.enableContextMenu&&(this.contextMenu=new Siesta.Recorder.UI.ContextMenu({panel:this}))},onAfterEdit:function(){this.editing.editing||this.hideHighlighter()},onBodyMouseDown:function(b,c){var a=document.activeElement;Ext.fly(a).up(".siesta-targeteditor")&&(b.stopEvent(),b.preventDefault(),a.value=Ext.htmlDecode(c.innerHTML))},onRecorderStart:function(){this.fireEvent("startrecord",this,this.test),this.addCls("recorder-recording")},onRecorderStop:function(){this.fireEvent("stoprecord",this),this.removeCls("recorder-recording")},hideHighlighter:function(){this.test&&this.domContainer&&this.domContainer.clearHighlight()},highlightTarget:function(a,h){if(a){var f=this.test;if(!f)return this.hideHighlighter(),{success:!0};var d,c,e=Siesta.Resource("Siesta.Recorder.UI.RecorderPanel");try{c=(d=this.test.normalizeElement(a,!0,!0,!0)).el}catch(i){}finally{if(!c)return{success:!1,warning:e.get("queryMatchesNothing")}}var b=d.matchingMultiple?e.get("queryMatchesMultiple"):"";if(f.isElementVisible(c)&&this.domContainer){var g=Ext.isArray(a)?a:h||["50%","50%"];this.domContainer.highlightTarget(c,'<span class="target-inspector-label">'+a+"</span>",g)}else b=b||e.get("noVisibleElsFound");return{success:!b,message:b}}this.hideHighlighter()},createToolbars:function(){var a=this,b=Siesta.Resource("Siesta.Recorder.UI.RecorderPanel");a.dockedItems=[{xtype:"toolbar",padding:"3 5",cls:"siesta-toolbar recorder-toolbar",dock:"top",height:45,style:"border-color:transparent",items:[{xtype:"textfield",itemId:"recording-name",fieldLabel:"Name",height:30,width:200,labelWidth:50,value:b.get("newRecording")},{xtype:"textfield",itemId:"pageUrl",height:30,flex:1,labelWidth:70,fieldLabel:b.get("pageUrl"),enableKeyEvents:!0,listeners:{keyup:function(b,a){a.getKey()==a.ENTER&&this.onPageUrlFieldEnterKey()},scope:this}}]},{xtype:"toolbar",cls:"siesta-toolbar siesta-recorder-button-toolbar",dock:"top",height:45,defaults:{scale:"medium",tooltipType:"title",scope:a},items:[{iconCls:"fa fa-circle icon-record",action:"recorder-start",cls:"recorder-tool",whenIdle:!0,tooltip:b.get("recordTooltip"),handler:a.onRecordClick},{iconCls:"fa fa-square",cls:"recorder-tool",action:"recorder-stop",handler:a.stop,tooltip:b.get("stopTooltip")},{iconCls:"fa fa-play",action:"recorder-play",cls:"recorder-tool",handler:a.onPlayClick,tooltip:b.get("playTooltip")},{iconCls:"fa fa-close",action:"recorder-remove-all",cls:"recorder-tool icon-clear",handler:function(){var a=this;0!==a.store.getCount()&&Ext.Msg.confirm(b.get("removeAllPromptTitle"),b.get("removeAllPromptMessage"),function(b){"yes"==b&&a.clear()})},tooltip:b.get("clearTooltip")},{iconCls:"fa fa-plus",action:"recorder-add-step",tooltip:b.get("addNewTooltip"),cls:"recorder-tool",tooltipType:"title",scope:a,handler:function(){var d=a.store,b=a.getSelectionModel().selected.first(),c=new d.model(Ext.apply({},this.newActionDefaults));b&&b.isVisible()?b.parentNode.insertChild(b.get("index")+1,c):d.getRootNode().appendChild(c),a.editing.startEdit(c,1)}},"->",{xtype:"splitbutton",text:"Show source",cls:"recorder-tool",action:"recorder-generate-code",handler:this.onGenerateCodeClick,scope:this,menu:{items:[{text:b.get("showSourceInNewWindow"),scope:this,handler:function(){var b=window.open(null).document.body,a=this.getRecordingName(),c=this.store.generateCode(a);b.innerHTML="<pre>"+c+"</pre>"}}]}},window.document.queryCommandSupported("copy")?{iconCls:"fa fa-clipboard",cls:"recorder-tool",action:"recorder-copy-to-clipboard",handler:a.onCopyToClipboard,tooltip:"Copy generated code to clipboard"}:null,a.closeButton]}],a.bbar={xtype:"component",cls:"cheatsheet",html:this.getCheatSheetText()}},getCheatSheetText:function(){var a='<table><tr><td class="cheatsheet-type">CSS Query:</td><td class="cheatsheet-sample"> .x-btn</td></tr>';return this.recorder instanceof Siesta.Recorder.ExtJS&&(a+='<tr><td class="cheatsheet-type">Component Query:</td><td class="cheatsheet-sample"> &gt;&gt;toolbar button</td></tr><tr><td class="cheatsheet-type">Composite Query:</td><td class="cheatsheet-sample"> toolbar =&gt; .x-btn</td></tr>'),a+="</table>"},attachTo:function(a,d){var b=this,e=b.test&&b.test.url!==a.url;this.recorder;this.setTest(a);var c=d&&d.contentWindow||a.scopeProvider&&a.scopeProvider.scope;c&&b.recorder.attach(c),e&&b.clear()},onPageUrlFieldEnterKey:function(){var a=this.getRecorderTestDescriptor();a&&(a.hostPageUrl||a.pageUrl)&&(this.domContainer.expand(),this.project.startSingle(a),this.project.on("teststart",function(c,b){b.url===a.url&&this.fireEvent("play",this,b,0)},this,{single:!0}))},onRecordClick:function(){var a=this.test;if(a){var f=Siesta.Resource("Siesta.Recorder.UI.RecorderPanel"),b=this.getRecorderTestDescriptor();if(b)if(this.isRecording())this.stop();else{var c=this.project,e=this.down("#pageUrl").getValue();a=c.getTestByURL(a.url)||a,this.setTest(a);var d=a.scopeProvider;!d||e&&d.sourceURL!==e?(c.on("teststart",function(c,a){a.url===b.url&&(this.attachTo(a),this.recorder.start())},this,{single:!0}),c.startSingle(b)):a&&a.global&&(this.attachTo(a),this.recorder.start())}else Ext.Msg.alert("Error",f.get("noTestStarted"))}},onPlayClick:function(){var a=this,b=this.getRecorderTestDescriptor();if(b){a.stop();var d=function(c,b){a.setTest(b),a.playSteps()},c=a.project;c.on("teststart",function(c,a){a.url===b.url&&a.on("beforetestfinalizeearly",d,null,{single:!0})},null,{single:!0}),0<this.store.getCount()&&this.scrollRecordIntoView(this.store.getAt(0)),c.startSingle(b)}},onCopyToClipboard:function(c){var a=this.getRecordingName(),b=this.copyToClipboard(this.store.generateCode(a));Ext.Msg.show({animateTarget:c.getEl(),message:b?"Code copied successfully":"Something went wrong, code was not copied",title:"Copy to clipboard",modal:!1}),setTimeout(function(){Ext.Msg.hide()},800)},stop:function(){this.recorder.stop()},clear:function(){this.recorder.clear()},onRecorderClear:function(){this.store.getRootNode().removeAll()},getRecorderTestDescriptor:function(){var d=this.project,b=this.down("#pageUrl").getValue(),c=this.test,a=c&&d.getScriptDescriptor(c.url),e=a&&d.getDescriptorConfig(a,"pageUrl");return b&&e!==b?{url:"/",enablePageRedirect:!0,testCode:"StartTest(function(t) {})",pageUrl:b}:c?a:null},setTest:function(a){if(this.test&&this.test.un("beforechainstep",this.onBeforeActionExecute,this),this.test=a){a.on("beforechainstep",this.onBeforeActionExecute,this);var b=this.down("#pageUrl");b&&a.scopeProvider&&b.setValue(a.scopeProvider.sourceURL||""),a.on("testfinalize",function(){a.scopeProvider&&a.scopeProvider.crossOriginFailed&&Ext.Msg.alert("Error","Recorder attached to the page from different origin - can't record anything")})}},generateSteps:function(a){var b=this,c=b.test;return(a||this.store.getRange()).map(function(d,e){if(d.isLeaf()){var f=d.asStep(c);return d.getTarget()&&(f.waitForTarget=!a||0<e),[function(g){e=a?b.store.indexOf(d):e,c.fireEvent("beforechainstep",c,e,f),g()},f]}return b.generateSteps(d.childNodes)})},onBeforeActionExecute:function(c,e,a,d){var b=this.store.getCount();this.getSelectionModel().select(a),a<b-2&&this.scrollRecordIntoView(this.store.getAt(a+2))},onActionAdded:function(e,d){var a=this.store.getRootNode(),c=(a.lastChild&&a.lastChild.parentNode||a).appendChild(d);this.scrollRecordIntoView(c)},onActionRemoved:function(b,a){this.store.getNodeById(a.id).remove()},onActionUpdated:function(c,a){this.store.getNodeById(a.id).callJoined("afterEdit",[["target","action","__offset__"]])},getActions:function(b){var a=this.store.getRange();return b?Ext.Array.pluck(a,"data"):a},onDestroy:function(){this.recorder&&this.recorder.stop(),this.callParent(arguments)},scrollRecordIntoView:function(a){this.view.rendered&&this.ensureVisible(a,{animate:{duration:100}})},onBeforeEdit:function(d,a){var c,b=a.column;return"targetcolumn"===b.xtype?(d.completeEdit(),b.setTargetEditor(a.record),a.value=a.record.get(b.dataIndex)):"typeeditor"===(c=a.column.getEditor()).xtype&&c.populate(this.test),"target"===a.column.dataIndex&&this.domContainer&&this.domContainer.startInspection(!1),"__offset__"!==a.field||a.record.isMouseAction()},afterEdit:function(c,a){if("action"===a.field){var b=a.column.field.store;b.clearFilter(),b.getById(a.value).get("type")!==b.getById(a.originalValue).get("type")&&a.record.resetValues()}},onValidateEdit:function(d,a){var b=a.value;if("action"===a.field&&!b)return!1;if("__offset__"===a.field)if(a.cancel=!0,b){var c=a.record.parseOffset(b);c&&a.record.setTargetOffset(c)}else a.record.clearTargetOffset();else a.column.getEditor().applyChanges&&(a.cancel=!0,a.column.getEditor().applyChanges(a.record));a.cancel&&(this.afterEdit(d,a),this.getView().refreshNode(a.record))},afterRender:function(){this.callParent(arguments);var a=this.getView();a.el.on({mousedown:function(c,d){var b=a.getRecord(a.findItemByChild(d));b.clearTargetOffset(),a.refreshNode(b),c.stopEvent()},delegate:".siesta-recorderpanel-clearoffset"})},isRecording:function(){return this.recorder.active},onGenerateCodeClick:function(){var e=Siesta.Resource("Siesta.Recorder.UI.RecorderPanel"),a=new Ext.Window({title:e.get("codeWindowTitle"),layout:"fit",id:"codeWindow",itemId:"codeWindow",cls:"si-recorder-sourcewindow",height:400,width:600,autoScroll:!0,autoShow:!0,constrain:!0,modal:!0,closeAction:"destroy",stateful:!0,items:{xtype:"jseditor",mode:"text/javascript"}}).items.first(),b=this.getRecordingName(),c=this.store.generateCode(b);a.setValue(c),a.editor.focus()},getRecordingName:function(){return this.down("#recording-name").getValue()},onDeleteStepClick:function(d,c,b,e,f,a){this.editing&&this.editing.completeEdit(),a.remove()},onPlaySingleStepClick:function(b,a){this.playSingle(a)},onPlayFromStepClick:function(b,a){this.playFromStep(a)},playSingle:function(b){if(this.test){var a=this.store.getAt(b),c=this.generateSteps([a]);this.playSteps(c)}},playFromStep:function(a){this.test&&this.playRange(a)},playRange:function(a,b){if(this.test){var c=this.generateSteps(this.store.getRange(a,b));this.playSteps(c)}},playSteps:function(a){var b=this.test;if(b){var c=this;a=(a=a||this.generateSteps())instanceof Array?a:[a],b.chain(function(a){c.fireEvent("play",c,b),a()},a,function(a){c.fireEvent("stop",c,b),a()})}},getRecorder:function(){return this.recorder}})}