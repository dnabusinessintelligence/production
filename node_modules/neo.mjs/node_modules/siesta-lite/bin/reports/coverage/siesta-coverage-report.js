/*

Siesta 5.3.2
Copyright(c) 2009-2020 Bryntum AB
https://bryntum.com/contact
https://bryntum.com/products/siesta/license

*/
"undefined"==typeof Joose&&function(){var Joose={};Joose.C="undefined"!=typeof JOOSE_CFG?JOOSE_CFG:{},Joose.is_IE=!1,Joose.is_NodeJS=Boolean("undefined"!=typeof process&&process.pid),Joose.top=Joose.is_NodeJS&&global||this,Joose.stub=function(){return function(){throw new Error("Modules can not be instantiated")}},Joose.VERSION="3.50.1","undefined"!=typeof module&&(module.exports=Joose),(this.Joose=Joose).A={each:function(array,func,scope){scope=scope||this;for(var i=0,len=array.length;i<len;i++)if(!1===func.call(scope,array[i],i))return!1},eachR:function(array,func,scope){scope=scope||this;for(var i=array.length-1;0<=i;i--)if(!1===func.call(scope,array[i],i))return!1},exists:function(array,value){for(var i=0,len=array.length;i<len;i++)if(array[i]==value)return!0;return!1},map:function(array,func,scope){scope=scope||this;for(var res=[],i=0,len=array.length;i<len;i++)res.push(func.call(scope,array[i],i));return res},grep:function(array,func){var a=[];return Joose.A.each(array,function(t){func(t)&&a.push(t)}),a},remove:function(array,removeEle){var a=[];return Joose.A.each(array,function(t){t!==removeEle&&a.push(t)}),a}},Joose.S={saneSplit:function(str,delimeter){var res=(str||"").split(delimeter);return 1!=res.length||res[0]||res.shift(),res},uppercaseFirst:function(string){return string.substr(0,1).toUpperCase()+string.substr(1,string.length-1)},strToClass:function(name,top){var current=top||Joose.top;return Joose.A.each(name.split("."),function(segment){if(!current)return!1;current=current[segment]}),current}};function baseFunc(){}var enumProps=["hasOwnProperty","valueOf","toString","constructor"],manualEnum=!0;for(var i in{toString:1})manualEnum=!1;Joose.O={each:function(object,func,scope){for(var i in scope=scope||this,object)if(!1===func.call(scope,object[i],i))return!1;if(manualEnum)return Joose.A.each(enumProps,function(el){if(object.hasOwnProperty(el))return func.call(scope,object[el],el)})},eachOwn:function(object,func,scope){return scope=scope||this,Joose.O.each(object,function(value,name){if(object.hasOwnProperty(name))return func.call(scope,value,name)},scope)},copy:function(source,target){return target=target||{},Joose.O.each(source,function(value,name){target[name]=value}),target},copyOwn:function(source,target){return target=target||{},Joose.O.eachOwn(source,function(value,name){target[name]=value}),target},getMutableCopy:function(object){return baseFunc.prototype=object,new baseFunc},extend:function(target,source){return Joose.O.copy(source,target)},isEmpty:function(object){for(var i in object)if(object.hasOwnProperty(i))return!1;return!0},isInstance:function(obj){return obj&&obj.meta&&obj.constructor==obj.meta.c},isClass:function(obj){return obj&&obj.meta&&obj.meta.c==obj},wantArray:function(obj){return obj instanceof Array?obj:[obj]},isFunction:function(obj){return"function"==typeof obj&&obj.constructor!=/ /.constructor}},Joose.I={Array:function(){return[]},Object:function(){return{}},Function:function(){return arguments.callee},Now:function(){return new Date}},Joose.Proto=Joose.stub(),Joose.Proto.Empty=Joose.stub(),Joose.Proto.Empty.meta={},function(){Joose.Proto.Object=Joose.stub();var SUPER=function(){var self=SUPER.caller;if(self==SUPERARG&&(self=self.caller),!self.SUPER)throw"Invalid call to SUPER";return self.SUPER[self.methodName].apply(this,arguments)},SUPERARG=function(){return this.SUPER.apply(this,arguments[0])};Joose.Proto.Object.prototype={SUPERARG:SUPERARG,SUPER:SUPER,INNER:function(){throw"Invalid call to INNER"},BUILD:function(config){return 1==arguments.length&&"object"==typeof config&&config||{}},initialize:function(){},toString:function(){return"a "+this.meta.name}},Joose.Proto.Object.meta={constructor:Joose.Proto.Object,methods:Joose.O.copy(Joose.Proto.Object.prototype),attributes:{}},Joose.Proto.Object.prototype.meta=Joose.Proto.Object.meta}(),function(){Joose.Proto.Class=function(){return this.initialize(this.BUILD.apply(this,arguments))||this};var bootstrap={VERSION:null,AUTHORITY:null,constructor:Joose.Proto.Class,superClass:null,name:null,attributes:null,methods:null,meta:null,c:null,defaultSuperClass:Joose.Proto.Object,BUILD:function(name,extend){return this.name=name,{__extend__:extend||{}}},initialize:function(props){var extend=props.__extend__;this.VERSION=extend.VERSION,this.AUTHORITY=extend.AUTHORITY,delete extend.VERSION,delete extend.AUTHORITY,this.c=this.extractConstructor(extend),this.adaptConstructor(this.c),extend.constructorOnly?delete extend.constructorOnly:this.construct(extend)},construct:function(extend){if(this.prepareProps(extend)){var superClass=this.superClass=this.extractSuperClass(extend);this.processSuperClass(superClass),this.adaptPrototype(this.c.prototype),this.finalize(extend)}},finalize:function(extend){this.processStem(extend),this.extend(extend)},prepareProps:function(extend){return!0},extractConstructor:function(extend){var res=extend.hasOwnProperty("constructor")?extend.constructor:this.defaultConstructor();return delete extend.constructor,res},extractSuperClass:function(extend){if(extend.hasOwnProperty("isa")&&!extend.isa)throw new Error("Attempt to inherit from undefined superclass ["+this.name+"]");var res=extend.isa||this.defaultSuperClass;return delete extend.isa,res},processStem:function(){var superMeta=this.superClass.meta;this.methods=Joose.O.getMutableCopy(superMeta.methods||{}),this.attributes=Joose.O.getMutableCopy(superMeta.attributes||{})},initInstance:function(instance,props){Joose.O.copyOwn(props,instance)},defaultConstructor:function(){return function(arg){var BUILD=this.BUILD,args=BUILD&&BUILD.apply(this,arguments)||arg||{},thisMeta=this.meta;return thisMeta.initInstance(this,args),thisMeta.hasMethod("initialize")&&this.initialize(args)||this}},processSuperClass:function(superClass){var superProto=superClass.prototype;if(!superClass.meta){var extend=Joose.O.copy(superProto);extend.isa=Joose.Proto.Empty,delete extend.constructor;var meta=new this.defaultSuperClass.meta.constructor(null,extend);superClass.meta=superProto.meta=meta,meta.c=superClass}this.c.prototype=Joose.O.getMutableCopy(superProto),this.c.superClass=superProto},adaptConstructor:function(c){c.meta=this,c.hasOwnProperty("toString")||(c.toString=function(){return this.meta.name})},adaptPrototype:function(proto){proto.constructor=this.c,proto.meta=this},addMethod:function(name,func){func.SUPER=this.superClass.prototype,func.methodName=name,this.methods[name]=func,this.c.prototype[name]=func},addAttribute:function(name,init){this.attributes[name]=init,this.c.prototype[name]=init},removeMethod:function(name){delete this.methods[name],delete this.c.prototype[name]},removeAttribute:function(name){delete this.attributes[name],delete this.c.prototype[name]},hasMethod:function(name){return Boolean(this.methods[name])},hasAttribute:function(name){return void 0!==this.attributes[name]},hasOwnMethod:function(name){return this.hasMethod(name)&&this.methods.hasOwnProperty(name)},hasOwnAttribute:function(name){return this.hasAttribute(name)&&this.attributes.hasOwnProperty(name)},extend:function(props){Joose.O.eachOwn(props,function(value,name){"meta"!=name&&"constructor"!=name&&(Joose.O.isFunction(value)&&!value.meta?this.addMethod(name,value):this.addAttribute(name,value))},this)},subClassOf:function(classObject,extend){return this.subClass(extend,null,classObject)},subClass:function(extend,name,classObject){return(extend=extend||{}).isa=classObject||this.c,new this.constructor(name,extend).c},instantiate:function(){function f(){}f.prototype=this.c.prototype;var obj=new f;return this.c.apply(obj,arguments)||obj}};Joose.Proto.Class.prototype=Joose.O.getMutableCopy(Joose.Proto.Object.prototype),Joose.O.extend(Joose.Proto.Class.prototype,bootstrap),Joose.Proto.Class.prototype.meta=new Joose.Proto.Class("Joose.Proto.Class",bootstrap),Joose.Proto.Class.meta.addMethod("isa",function(someClass){function f(){}return f.prototype=this.c.prototype,new f instanceof someClass})}(),Joose.Managed=Joose.stub(),Joose.Managed.Property=new Joose.Proto.Class("Joose.Managed.Property",{name:null,init:null,value:null,definedIn:null,initialize:function(props){Joose.Managed.Property.superClass.initialize.call(this,props),this.computeValue()},computeValue:function(){this.value=this.init},preApply:function(targetClass){},postUnApply:function(targetClass){},apply:function(target){target[this.name]=this.value},isAppliedTo:function(target){return target[this.name]==this.value},unapply:function(from){if(!this.isAppliedTo(from))throw"Unapply of property ["+this.name+"] from ["+from+"] failed";delete from[this.name]},cloneProps:function(){return{name:this.name,init:this.init,definedIn:this.definedIn}},clone:function(name){var props=this.cloneProps();return props.name=name||props.name,new this.constructor(props)}}).c,Joose.Managed.Property.ConflictMarker=new Joose.Proto.Class("Joose.Managed.Property.ConflictMarker",{isa:Joose.Managed.Property,apply:function(target){throw new Error("Attempt to apply ConflictMarker ["+this.name+"] to ["+target+"]")}}).c,Joose.Managed.Property.Requirement=new Joose.Proto.Class("Joose.Managed.Property.Requirement",{isa:Joose.Managed.Property,apply:function(target){if(!target.meta.hasMethod(this.name))throw new Error("Requirement ["+this.name+"], defined in ["+this.definedIn.definedIn.name+"] is not satisfied for class ["+target+"]")},unapply:function(from){}}).c,Joose.Managed.Property.Attribute=new Joose.Proto.Class("Joose.Managed.Property.Attribute",{isa:Joose.Managed.Property,slot:null,initialize:function(){Joose.Managed.Property.Attribute.superClass.initialize.apply(this,arguments),this.slot=this.name},apply:function(target){target.prototype[this.slot]=this.value},isAppliedTo:function(target){return target.prototype[this.slot]==this.value},unapply:function(from){if(!this.isAppliedTo(from))throw"Unapply of property ["+this.name+"] from ["+from+"] failed";delete from.prototype[this.slot]},clearValue:function(instance){delete instance[this.slot]},hasValue:function(instance){return instance.hasOwnProperty(this.slot)},getRawValueFrom:function(instance){return instance[this.slot]},setRawValueTo:function(instance,value){return instance[this.slot]=value,this}}).c,Joose.Managed.Property.MethodModifier=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier",{isa:Joose.Managed.Property,prepareWrapper:function(){throw"Abstract method [prepareWrapper] of "+this+" was called"},apply:function(target){var name=this.name,targetProto=target.prototype,isOwn=targetProto.hasOwnProperty(name),original=targetProto[name],superProto=target.meta.superClass.prototype,originalCall=isOwn?original:function(){return superProto[name].apply(this,arguments)},methodWrapper=this.prepareWrapper({name:name,modifier:this.value,isOwn:isOwn,originalCall:originalCall,superProto:superProto,target:target});isOwn&&(methodWrapper.__ORIGINAL__=original),methodWrapper.__CONTAIN__=this.value,(methodWrapper.__METHOD__=this).value.displayName=this.getDisplayName(target),methodWrapper.displayName="internal wrapper",targetProto[name]=methodWrapper},getDisplayName:function(target){return target.meta.name+"["+this.name+"]"},isAppliedTo:function(target){var targetCont=target.prototype[this.name];return targetCont&&targetCont.__CONTAIN__==this.value},unapply:function(from){var name=this.name,fromProto=from.prototype,original=fromProto[name].__ORIGINAL__;if(!this.isAppliedTo(from))throw"Unapply of method ["+name+"] from class ["+from+"] failed";original?fromProto[name]=original:delete fromProto[name]}}).c,Joose.Managed.Property.MethodModifier.Override=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.Override",{isa:Joose.Managed.Property.MethodModifier,prepareWrapper:function(params){var modifier=params.modifier,originalCall=params.originalCall,superProto=params.superProto,superMetaConst=superProto.meta.constructor,isCallToProto=!(superMetaConst!=Joose.Proto.Class&&superMetaConst!=Joose.Proto.Object||params.isOwn&&originalCall.IS_OVERRIDE),original=originalCall;isCallToProto&&(original=function(){var beforeSUPER=this.SUPER;this.SUPER=superProto.SUPER;var res=originalCall.apply(this,arguments);return this.SUPER=beforeSUPER,res});function override(){var beforeSUPER=this.SUPER;this.SUPER=original;var res=modifier.apply(this,arguments);return this.SUPER=beforeSUPER,res}return override.IS_OVERRIDE=!0,override},getDisplayName:function(target){return target.meta.name+"[override "+this.name+"]"}}).c,Joose.Managed.Property.MethodModifier.Put=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.Put",{isa:Joose.Managed.Property.MethodModifier.Override,prepareWrapper:function(params){if(params.isOwn)throw"Method ["+params.name+"] is applying over something ["+params.originalCall+"] in class ["+params.target+"]";return Joose.Managed.Property.MethodModifier.Put.superClass.prepareWrapper.call(this,params)},getDisplayName:function(target){return target.meta.name+"["+this.name+"]"}}).c,Joose.Managed.Property.MethodModifier.After=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.After",{isa:Joose.Managed.Property.MethodModifier,prepareWrapper:function(params){var modifier=params.modifier,originalCall=params.originalCall;return function(){var res=originalCall.apply(this,arguments);return modifier.apply(this,arguments),res}},getDisplayName:function(target){return target.meta.name+"[after "+this.name+"]"}}).c,Joose.Managed.Property.MethodModifier.Before=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.Before",{isa:Joose.Managed.Property.MethodModifier,prepareWrapper:function(params){var modifier=params.modifier,originalCall=params.originalCall;return function(){return modifier.apply(this,arguments),originalCall.apply(this,arguments)}},getDisplayName:function(target){return target.meta.name+"[before "+this.name+"]"}}).c,Joose.Managed.Property.MethodModifier.Around=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.Around",{isa:Joose.Managed.Property.MethodModifier,prepareWrapper:function(params){function bound(){return originalCall.apply(me,arguments)}var me,modifier=params.modifier,originalCall=params.originalCall;return function(){me=this;var boundArr=[bound];return boundArr.push.apply(boundArr,arguments),modifier.apply(this,boundArr)}},getDisplayName:function(target){return target.meta.name+"[around "+this.name+"]"}}).c,Joose.Managed.Property.MethodModifier.Augment=new Joose.Proto.Class("Joose.Managed.Property.MethodModifier.Augment",{isa:Joose.Managed.Property.MethodModifier,prepareWrapper:function(params){var AUGMENT=function(){for(var callstack=[],self=AUGMENT;callstack.push(self.IS_AUGMENT?self.__CONTAIN__:self),self=self.IS_AUGMENT&&(self.__ORIGINAL__||self.SUPER[self.methodName]););var beforeINNER=this.INNER;this.INNER=function(){var innerCall=callstack.pop();return innerCall?innerCall.apply(this,arguments):void 0};var res=this.INNER.apply(this,arguments);return this.INNER=beforeINNER,res};return AUGMENT.methodName=params.name,AUGMENT.SUPER=params.superProto,AUGMENT.IS_AUGMENT=!0,AUGMENT},getDisplayName:function(target){return target.meta.name+"[augment "+this.name+"]"}}).c,Joose.Managed.PropertySet=new Joose.Proto.Class("Joose.Managed.PropertySet",{isa:Joose.Managed.Property,properties:null,propertyMetaClass:Joose.Managed.Property,initialize:function(props){Joose.Managed.PropertySet.superClass.initialize.call(this,props),this.properties=props.properties||{}},addProperty:function(name,props){var metaClass=props.meta||this.propertyMetaClass;return delete props.meta,props.definedIn=this,props.name=name,this.properties[name]=new metaClass(props)},addPropertyObject:function(object){return this.properties[object.name]=object},removeProperty:function(name){var prop=this.properties[name];return delete this.properties[name],prop},haveProperty:function(name){return null!=this.properties[name]},haveOwnProperty:function(name){return this.haveProperty(name)&&this.properties.hasOwnProperty(name)},getProperty:function(name){return this.properties[name]},each:function(func,scope){Joose.O.each(this.properties,func,scope||this)},eachOwn:function(func,scope){Joose.O.eachOwn(this.properties,func,scope||this)},eachAll:function(func,scope){this.each(func,scope)},cloneProps:function(){var props=Joose.Managed.PropertySet.superClass.cloneProps.call(this);return props.propertyMetaClass=this.propertyMetaClass,props},clone:function(name){var clone=this.cleanClone(name);return clone.properties=Joose.O.copyOwn(this.properties),clone},cleanClone:function(name){var props=this.cloneProps();return props.name=name||props.name,new this.constructor(props)},alias:function(what){var props=this.properties;Joose.O.each(what,function(aliasName,originalName){var original=props[originalName];original&&this.addPropertyObject(original.clone(aliasName))},this)},exclude:function(what){var props=this.properties;Joose.A.each(what,function(name){delete props[name]})},beforeConsumedBy:function(){},flattenTo:function(target){var targetProps=target.properties;this.eachOwn(function(property,name){var targetProperty=targetProps[name];targetProperty instanceof Joose.Managed.Property.ConflictMarker||(targetProps.hasOwnProperty(name)&&null!=targetProperty?targetProperty!=property&&(target.removeProperty(name),target.addProperty(name,{meta:Joose.Managed.Property.ConflictMarker})):target.addPropertyObject(property))},this)},composeTo:function(target){this.eachOwn(function(property,name){target.haveOwnProperty(name)||target.addPropertyObject(property)})},composeFrom:function(){if(arguments.length){var flattening=this.cleanClone();Joose.A.each(arguments,function(arg){var isDescriptor=!(arg instanceof Joose.Managed.PropertySet),propSet=isDescriptor?arg.propertySet:arg;propSet.beforeConsumedBy(this,flattening),isDescriptor&&((arg.alias||arg.exclude)&&(propSet=propSet.clone()),arg.alias&&propSet.alias(arg.alias),arg.exclude&&propSet.exclude(arg.exclude)),propSet.flattenTo(flattening)},this),flattening.composeTo(this)}},preApply:function(target){this.eachOwn(function(property){property.preApply(target)})},apply:function(target){this.eachOwn(function(property){property.apply(target)})},unapply:function(from){this.eachOwn(function(property){property.unapply(from)})},postUnApply:function(target){this.eachOwn(function(property){property.postUnApply(target)})}}).c;var __ID__=1;Joose.Managed.PropertySet.Mutable=new Joose.Proto.Class("Joose.Managed.PropertySet.Mutable",{isa:Joose.Managed.PropertySet,ID:null,derivatives:null,opened:null,composedFrom:null,initialize:function(props){Joose.Managed.PropertySet.Mutable.superClass.initialize.call(this,props),this.opened=1,this.derivatives={},this.ID=__ID__++,this.composedFrom=[]},addComposeInfo:function(){this.ensureOpen(),Joose.A.each(arguments,function(arg){this.composedFrom.push(arg),(arg instanceof Joose.Managed.PropertySet?arg:arg.propertySet).derivatives[this.ID]=this},this)},removeComposeInfo:function(){this.ensureOpen(),Joose.A.each(arguments,function(arg){for(var i=0;i<this.composedFrom.length;){var propSet=this.composedFrom[i];arg==(propSet=propSet instanceof Joose.Managed.PropertySet?propSet:propSet.propertySet)?(delete propSet.derivatives[this.ID],this.composedFrom.splice(i,1)):i++}},this)},ensureOpen:function(){if(!this.opened)throw"Mutation of closed property set: ["+this.name+"]"},addProperty:function(name,props){return this.ensureOpen(),Joose.Managed.PropertySet.Mutable.superClass.addProperty.call(this,name,props)},addPropertyObject:function(object){return this.ensureOpen(),Joose.Managed.PropertySet.Mutable.superClass.addPropertyObject.call(this,object)},removeProperty:function(name){return this.ensureOpen(),Joose.Managed.PropertySet.Mutable.superClass.removeProperty.call(this,name)},composeFrom:function(){return this.ensureOpen(),Joose.Managed.PropertySet.Mutable.superClass.composeFrom.apply(this,this.composedFrom)},open:function(){this.opened++,1==this.opened&&(Joose.O.each(this.derivatives,function(propSet){propSet.open()}),this.deCompose())},close:function(){if(!this.opened)throw"Unmatched 'close' operation on property set: ["+this.name+"]";1==this.opened&&(this.reCompose(),Joose.O.each(this.derivatives,function(propSet){propSet.close()})),this.opened--},reCompose:function(){this.composeFrom()},deCompose:function(){this.eachOwn(function(property,name){property.definedIn!=this&&this.removeProperty(name)},this)}}).c,Joose.Managed.StemElement=function(){throw"Modules may not be instantiated."},Joose.Managed.StemElement.Attributes=new Joose.Proto.Class("Joose.Managed.StemElement.Attributes",{isa:Joose.Managed.PropertySet.Mutable,propertyMetaClass:Joose.Managed.Property.Attribute}).c,Joose.Managed.StemElement.Methods=new Joose.Proto.Class("Joose.Managed.StemElement.Methods",{isa:Joose.Managed.PropertySet.Mutable,propertyMetaClass:Joose.Managed.Property.MethodModifier.Put,preApply:function(){},postUnApply:function(){}}).c,Joose.Managed.StemElement.Requirements=new Joose.Proto.Class("Joose.Managed.StemElement.Requirements",{isa:Joose.Managed.PropertySet.Mutable,propertyMetaClass:Joose.Managed.Property.Requirement,alias:function(){},exclude:function(){},flattenTo:function(target){this.each(function(property,name){target.haveProperty(name)||target.addPropertyObject(property)})},composeTo:function(target){this.flattenTo(target)},preApply:function(){},postUnApply:function(){}}).c,Joose.Managed.StemElement.MethodModifiers=new Joose.Proto.Class("Joose.Managed.StemElement.MethodModifiers",{isa:Joose.Managed.PropertySet.Mutable,propertyMetaClass:null,addProperty:function(name,props){var metaClass=props.meta;delete props.meta,props.definedIn=this,props.name=name;var modifier=new metaClass(props),properties=this.properties;return properties[name]||(properties[name]=[]),properties[name].push(modifier),modifier},addPropertyObject:function(object){var name=object.name,properties=this.properties;return properties[name]||(properties[name]=[]),properties[name].push(object),object},removeProperty:function(name){if(this.haveProperty(name)){var properties=this.properties,modifier=properties[name].pop();return properties[name].length||Joose.Managed.StemElement.MethodModifiers.superClass.removeProperty.call(this,name),modifier}},alias:function(){},exclude:function(){},flattenTo:function(target){var targetProps=target.properties;this.each(function(modifiersArr,name){var targetModifiersArr=targetProps[name];null==targetModifiersArr&&(targetModifiersArr=targetProps[name]=[]),Joose.A.each(modifiersArr,function(modifier){Joose.A.exists(targetModifiersArr,modifier)||targetModifiersArr.push(modifier)})})},composeTo:function(target){this.flattenTo(target)},deCompose:function(){this.each(function(modifiersArr,name){for(var i=0;i<modifiersArr.length;)modifiersArr[i].definedIn!=this?modifiersArr.splice(i,1):i++})},preApply:function(target){},postUnApply:function(target){},apply:function(target){this.each(function(modifiersArr,name){Joose.A.each(modifiersArr,function(modifier){modifier.apply(target)})})},unapply:function(from){this.each(function(modifiersArr,name){for(var i=modifiersArr.length-1;0<=i;i--)modifiersArr[i].unapply(from)})}}).c,Joose.Managed.PropertySet.Composition=new Joose.Proto.Class("Joose.Managed.PropertySet.Composition",{isa:Joose.Managed.PropertySet.Mutable,propertyMetaClass:Joose.Managed.PropertySet.Mutable,processOrder:null,each:function(func,scope){var props=this.properties;scope=scope||this;Joose.A.each(this.processOrder,function(name){func.call(scope,props[name],name)})},eachR:function(func,scope){var props=this.properties;scope=scope||this;Joose.A.eachR(this.processOrder,function(name){func.call(scope,props[name],name)})},clone:function(name){var clone=this.cleanClone(name);return this.each(function(property){clone.addPropertyObject(property.clone())}),clone},alias:function(what){this.each(function(property){property.alias(what)})},exclude:function(what){this.each(function(property){property.exclude(what)})},flattenTo:function(target){var targetProps=target.properties;this.each(function(property,name){var subTarget=targetProps[name]||target.addProperty(name,{meta:property.constructor});property.flattenTo(subTarget)})},composeTo:function(target){var targetProps=target.properties;this.each(function(property,name){var subTarget=targetProps[name]||target.addProperty(name,{meta:property.constructor});property.composeTo(subTarget)})},deCompose:function(){this.eachR(function(property){property.open()}),Joose.Managed.PropertySet.Composition.superClass.deCompose.call(this)},reCompose:function(){Joose.Managed.PropertySet.Composition.superClass.reCompose.call(this),this.each(function(property){property.close()})},unapply:function(from){this.eachR(function(property){property.unapply(from)})}}).c,Joose.Managed.Stem=new Joose.Proto.Class("Joose.Managed.Stem",{isa:Joose.Managed.PropertySet.Composition,targetMeta:null,attributesMC:Joose.Managed.StemElement.Attributes,methodsMC:Joose.Managed.StemElement.Methods,requirementsMC:Joose.Managed.StemElement.Requirements,methodsModifiersMC:Joose.Managed.StemElement.MethodModifiers,processOrder:["attributes","methods","requirements","methodsModifiers"],initialize:function(props){Joose.Managed.Stem.superClass.initialize.call(this,props);var targetMeta=this.targetMeta;this.addProperty("attributes",{meta:this.attributesMC,properties:targetMeta?targetMeta.attributes:{}}),this.addProperty("methods",{meta:this.methodsMC,properties:targetMeta?targetMeta.methods:{}}),this.addProperty("requirements",{meta:this.requirementsMC}),this.addProperty("methodsModifiers",{meta:this.methodsModifiersMC})},reCompose:function(){var c=this.targetMeta.c;this.preApply(c),Joose.Managed.Stem.superClass.reCompose.call(this),this.apply(c)},deCompose:function(){var c=this.targetMeta.c;this.unapply(c),Joose.Managed.Stem.superClass.deCompose.call(this),this.postUnApply(c)}}).c,Joose.Managed.Builder=new Joose.Proto.Class("Joose.Managed.Builder",{targetMeta:null,_buildStart:function(targetMeta,props){targetMeta.stem.open(),Joose.A.each(["trait","traits","removeTrait","removeTraits","does","doesnot","doesnt"],function(builder){props[builder]&&(this[builder](targetMeta,props[builder]),delete props[builder])},this)},_extend:function(props){if(!Joose.O.isEmpty(props)){var targetMeta=this.targetMeta;this._buildStart(targetMeta,props),Joose.O.eachOwn(props,function(value,name){var handler=this[name];if(!handler)throw new Error("Unknown builder ["+name+"] was used during extending of ["+targetMeta.c+"]");handler.call(this,targetMeta,value)},this),this._buildComplete(targetMeta,props)}},_buildComplete:function(targetMeta,props){targetMeta.stem.close()},methods:function(targetMeta,info){Joose.O.eachOwn(info,function(value,name){targetMeta.addMethod(name,value)})},removeMethods:function(targetMeta,info){Joose.A.each(info,function(name){targetMeta.removeMethod(name)})},have:function(targetMeta,info){Joose.O.eachOwn(info,function(value,name){targetMeta.addAttribute(name,value)})},havenot:function(targetMeta,info){Joose.A.each(info,function(name){targetMeta.removeAttribute(name)})},havent:function(targetMeta,info){this.havenot(targetMeta,info)},after:function(targetMeta,info){Joose.O.each(info,function(value,name){targetMeta.addMethodModifier(name,value,Joose.Managed.Property.MethodModifier.After)})},before:function(targetMeta,info){Joose.O.each(info,function(value,name){targetMeta.addMethodModifier(name,value,Joose.Managed.Property.MethodModifier.Before)})},override:function(targetMeta,info){Joose.O.each(info,function(value,name){targetMeta.addMethodModifier(name,value,Joose.Managed.Property.MethodModifier.Override)})},around:function(targetMeta,info){Joose.O.each(info,function(value,name){targetMeta.addMethodModifier(name,value,Joose.Managed.Property.MethodModifier.Around)})},augment:function(targetMeta,info){Joose.O.each(info,function(value,name){targetMeta.addMethodModifier(name,value,Joose.Managed.Property.MethodModifier.Augment)})},removeModifier:function(targetMeta,info){Joose.A.each(info,function(name){targetMeta.removeMethodModifier(name)})},does:function(targetMeta,info){Joose.A.each(Joose.O.wantArray(info),function(desc){targetMeta.addRole(desc)})},doesnot:function(targetMeta,info){Joose.A.each(Joose.O.wantArray(info),function(desc){targetMeta.removeRole(desc)})},doesnt:function(targetMeta,info){this.doesnot(targetMeta,info)},trait:function(){this.traits.apply(this,arguments)},traits:function(targetMeta,info){if(!targetMeta.firstPass){if(!targetMeta.meta.isDetached)throw"Can't apply trait to not detached class";targetMeta.meta.extend({does:info})}},removeTrait:function(){this.removeTraits.apply(this,arguments)},removeTraits:function(targetMeta,info){if(!targetMeta.meta.isDetached)throw"Can't remove trait from not detached class";targetMeta.meta.extend({doesnot:info})},name:function(targetMeta,name){targetMeta.name=name}}).c,Joose.Managed.Class=new Joose.Proto.Class("Joose.Managed.Class",{isa:Joose.Proto.Class,stem:null,stemClass:Joose.Managed.Stem,stemClassCreated:!1,builder:null,builderClass:Joose.Managed.Builder,builderClassCreated:!1,isDetached:!1,firstPass:!0,skipTraitsAnchor:{},BUILD:function(){var sup=Joose.Managed.Class.superClass.BUILD.apply(this,arguments),props=sup.__extend__,traits=Joose.O.wantArray(props.trait||props.traits||[]);return delete props.trait,delete props.traits,Joose.A.each(Joose.O.wantArray(props.does||[]),function(arg){var role=arg.meta instanceof Joose.Managed.Class?arg:arg.role;role.meta.meta.isDetached&&traits.push(role.meta.constructor)}),traits.length&&(props.traits=traits),sup},initInstance:function(instance,props){Joose.O.each(this.attributes,function(attribute,name){attribute instanceof Joose.Managed.Attribute?attribute.initFromConfig(instance,props):props.hasOwnProperty(name)&&(instance[name]=props[name])})},defaultConstructor:function(){return function(skipTraitsAnchor,params){var thisMeta=this.meta,skipTraits=skipTraitsAnchor==thisMeta.skipTraitsAnchor,BUILD=this.BUILD,props=BUILD&&BUILD.apply(this,skipTraits?params:arguments)||(skipTraits?params[0]:skipTraitsAnchor)||{},extend=props.__extend__||props,traits=extend.trait||extend.traits;if(!traits&&!extend.detached||(delete extend.trait,delete extend.traits,delete extend.detached,skipTraits))return thisMeta.initInstance(this,props),thisMeta.hasMethod("initialize")&&this.initialize(props)||this;var meta=thisMeta.subClass({does:traits||[]},thisMeta.name).meta;return meta.isDetached=!0,meta.instantiate(thisMeta.skipTraitsAnchor,arguments)}},finalize:function(extend){Joose.Managed.Class.superClass.finalize.call(this,extend),this.stem.close(),this.afterMutate()},processStem:function(){Joose.Managed.Class.superClass.processStem.call(this),this.builder=new this.builderClass({targetMeta:this}),this.stem=new this.stemClass({name:this.name,targetMeta:this});var builderClass=this.getClassInAttribute("builderClass");builderClass&&(this.builderClassCreated=!0,this.addAttribute("builderClass",this.subClassOf(builderClass)));var stemClass=this.getClassInAttribute("stemClass");stemClass&&(this.stemClassCreated=!0,this.addAttribute("stemClass",this.subClassOf(stemClass)))},extend:function(props){props.builder&&(this.getBuilderTarget().meta.extend(props.builder),delete props.builder),props.stem&&(this.getStemTarget().meta.extend(props.stem),delete props.stem),this.builder._extend(props),this.firstPass=!1,this.stem.opened||this.afterMutate()},getBuilderTarget:function(){var builderClass=this.getClassInAttribute("builderClass");if(!builderClass)throw"Attempt to extend a builder on non-meta class";return builderClass},getStemTarget:function(){var stemClass=this.getClassInAttribute("stemClass");if(!stemClass)throw"Attempt to extend a stem on non-meta class";return stemClass},getClassInAttribute:function(attributeName){var attrClass=this.getAttribute(attributeName);return attrClass instanceof Joose.Managed.Property.Attribute&&(attrClass=attrClass.value),attrClass},addMethodModifier:function(name,func,type){var props={};return props.init=func,props.meta=type,this.stem.properties.methodsModifiers.addProperty(name,props)},removeMethodModifier:function(name){return this.stem.properties.methodsModifiers.removeProperty(name)},addMethod:function(name,func,props){return(props=props||{}).init=func,this.stem.properties.methods.addProperty(name,props)},addAttribute:function(name,init,props){return(props=props||{}).init=init,this.stem.properties.attributes.addProperty(name,props)},removeMethod:function(name){return this.stem.properties.methods.removeProperty(name)},removeAttribute:function(name){return this.stem.properties.attributes.removeProperty(name)},hasMethod:function(name){return this.stem.properties.methods.haveProperty(name)},hasAttribute:function(name){return this.stem.properties.attributes.haveProperty(name)},hasMethodModifiersFor:function(name){return this.stem.properties.methodsModifiers.haveProperty(name)},hasOwnMethod:function(name){return this.stem.properties.methods.haveOwnProperty(name)},hasOwnAttribute:function(name){return this.stem.properties.attributes.haveOwnProperty(name)},getMethod:function(name){return this.stem.properties.methods.getProperty(name)},getAttribute:function(name){return this.stem.properties.attributes.getProperty(name)},eachRole:function(roles,func,scope){Joose.A.each(roles,function(arg,index){var role=arg.meta instanceof Joose.Managed.Class?arg:arg.role;func.call(scope||this,arg,role,index)},this)},addRole:function(){this.eachRole(arguments,function(arg,role){this.beforeRoleAdd(role);var desc=arg;role!=arg?(desc.propertySet=role.meta.stem,delete desc.role):desc=desc.meta.stem,this.stem.addComposeInfo(desc)},this)},beforeRoleAdd:function(role){var roleMeta=role.meta;roleMeta.builderClassCreated&&this.getBuilderTarget().meta.extend({does:[roleMeta.getBuilderTarget()]}),roleMeta.stemClassCreated&&this.getStemTarget().meta.extend({does:[roleMeta.getStemTarget()]}),roleMeta.meta.isDetached&&!this.firstPass&&this.builder.traits(this,roleMeta.constructor)},beforeRoleRemove:function(role){var roleMeta=role.meta;roleMeta.builderClassCreated&&this.getBuilderTarget().meta.extend({doesnt:[roleMeta.getBuilderTarget()]}),roleMeta.stemClassCreated&&this.getStemTarget().meta.extend({doesnt:[roleMeta.getStemTarget()]}),roleMeta.meta.isDetached&&!this.firstPass&&this.builder.removeTraits(this,roleMeta.constructor)},removeRole:function(){this.eachRole(arguments,function(arg,role){this.beforeRoleRemove(role),this.stem.removeComposeInfo(role.meta.stem)},this)},getRoles:function(){return Joose.A.map(this.stem.composedFrom,function(composeDesc){return composeDesc instanceof Joose.Managed.PropertySet?composeDesc.targetMeta.c:composeDesc.propertySet})},does:function(role){for(var myRoles=this.getRoles(),i=0;i<myRoles.length;i++)if(role==myRoles[i])return!0;for(i=0;i<myRoles.length;i++)if(myRoles[i].meta.does(role))return!0;var superMeta=this.superClass.meta;return!!(this.superClass!=Joose.Proto.Empty&&superMeta&&superMeta.meta&&superMeta.meta.hasMethod("does"))&&superMeta.does(role)},getMethods:function(){return this.stem.properties.methods},getAttributes:function(){return this.stem.properties.attributes},afterMutate:function(){},getCurrentMethod:function(){for(var wrapper=arguments.callee.caller,count=0;wrapper&&count<5;wrapper=wrapper.caller,count++)if(wrapper.__METHOD__)return wrapper.__METHOD__;return null}}).c,Joose.Managed.Role=new Joose.Managed.Class("Joose.Managed.Role",{isa:Joose.Managed.Class,have:{defaultSuperClass:Joose.Proto.Empty,builderRole:null,stemRole:null},methods:{defaultConstructor:function(){return function(){throw new Error("Roles cant be instantiated")}},processSuperClass:function(){if(this.superClass!=this.defaultSuperClass)throw new Error("Roles can't inherit from anything")},getBuilderTarget:function(){return this.builderRole||(this.builderRole=(new this.constructor).c,this.builderClassCreated=!0),this.builderRole},getStemTarget:function(){return this.stemRole||(this.stemRole=(new this.constructor).c,this.stemClassCreated=!0),this.stemRole},addRequirement:function(methodName){this.stem.properties.requirements.addProperty(methodName,{})}},stem:{methods:{apply:function(){},unapply:function(){}}},builder:{methods:{requires:function(targetClassMeta,info){Joose.A.each(Joose.O.wantArray(info),function(methodName){targetClassMeta.addRequirement(methodName)},this)}}}}).c,Joose.Managed.Attribute=new Joose.Managed.Class("Joose.Managed.Attribute",{isa:Joose.Managed.Property.Attribute,have:{is:null,builder:null,isPrivate:!1,role:null,publicName:null,setterName:null,getterName:null,readable:!1,writeable:!1,hasGetter:!1,hasSetter:!1,required:!1,canInlineSetRaw:!0,canInlineGetRaw:!0},after:{initialize:function(){var name=this.name;this.publicName=name.replace(/^_+/,""),this.slot=this.isPrivate?"$"+name:name,this.setterName=this.setterName||this.getSetterName(),this.getterName=this.getterName||this.getGetterName(),this.readable=this.hasGetter=/^r/i.test(this.is),this.writeable=this.hasSetter=/^.w/i.test(this.is)}},override:{computeValue:function(){var init=this.init;!Joose.O.isClass(init)&&Joose.O.isFunction(init)||this.SUPER()},preApply:function(targetClass){targetClass.meta.extend({methods:this.getAccessorsFor(targetClass)})},postUnApply:function(from){from.meta.extend({removeMethods:this.getAccessorsFrom(from)})}},methods:{getAccessorsFor:function(targetClass){var targetMeta=targetClass.meta,setterName=this.setterName,getterName=this.getterName,methods={};return this.hasSetter&&!targetMeta.hasMethod(setterName)&&(methods[setterName]=this.getSetter(),methods[setterName].ACCESSOR_FROM=this),this.hasGetter&&!targetMeta.hasMethod(getterName)&&(methods[getterName]=this.getGetter(),methods[getterName].ACCESSOR_FROM=this),methods},getAccessorsFrom:function(from){var targetMeta=from.meta,setterName=this.setterName,getterName=this.getterName,setter=this.hasSetter&&targetMeta.getMethod(setterName),getter=this.hasGetter&&targetMeta.getMethod(getterName),removeMethods=[];return setter&&setter.value.ACCESSOR_FROM==this&&removeMethods.push(setterName),getter&&getter.value.ACCESSOR_FROM==this&&removeMethods.push(getterName),removeMethods},getGetterName:function(){return"get"+Joose.S.uppercaseFirst(this.publicName)},getSetterName:function(){return"set"+Joose.S.uppercaseFirst(this.publicName)},getSetter:function(){var me=this,slot=me.slot;return me.canInlineSetRaw?function(value){return this[slot]=value,this}:function(){return me.setRawValueTo.apply(this,arguments)}},getGetter:function(){var me=this,slot=me.slot;return me.canInlineGetRaw?function(value){return this[slot]}:function(){return me.getRawValueFrom.apply(this,arguments)}},getValueFrom:function(instance){var getterName=this.getterName;return this.readable&&instance.meta.hasMethod(getterName)?instance[getterName]():this.getRawValueFrom(instance)},setValueTo:function(instance,value){var setterName=this.setterName;this.writeable&&instance.meta.hasMethod(setterName)?instance[setterName](value):this.setRawValueTo(instance,value)},initFromConfig:function(instance,config){var value,name=this.name,isSet=!1;if(config.hasOwnProperty(name))value=config[name],isSet=!0;else{var init=this.init;Joose.O.isFunction(init)&&!Joose.O.isClass(init)?(value=init.call(instance,config,name),isSet=!0):this.builder&&(value=instance[this.builder.replace(/^this\./,"")](config,name),isSet=!0)}if(isSet)this.setRawValueTo(instance,value);else if(this.required)throw new Error("Required attribute ["+name+"] is missed during initialization of "+instance)}}}).c,Joose.Managed.Attribute.Builder=new Joose.Managed.Role("Joose.Managed.Attribute.Builder",{have:{defaultAttributeClass:Joose.Managed.Attribute},builder:{methods:{has:function(targetClassMeta,info){Joose.O.eachOwn(info,function(props,name){"object"==typeof props&&null!=props&&props.constructor!=/ /.constructor||(props={init:props}),props.meta=props.meta||targetClassMeta.defaultAttributeClass,/^__/.test(name)&&(name=name.replace(/^_+/,""),props.isPrivate=!0),targetClassMeta.addAttribute(name,props.init,props)},this)},hasnot:function(targetClassMeta,info){this.havenot(targetClassMeta,info)},hasnt:function(targetClassMeta,info){this.hasnot(targetClassMeta,info)}}}}).c,Joose.Managed.My=new Joose.Managed.Role("Joose.Managed.My",{have:{myClass:null,needToReAlias:!1},methods:{createMy:function(extend){this.meta;var isRole=this instanceof Joose.Managed.Role,myExtend=extend.my||{};delete extend.my;var superClassMy=this.superClass.meta.myClass;isRole||myExtend.isa||!superClassMy||(myExtend.isa=superClassMy),myExtend.meta||myExtend.isa||(myExtend.meta=this.constructor),myExtend.name=this.name+".my";var createdClass=this.myClass=Class(myExtend),c=this.c;c.prototype.my=c.my=isRole?createdClass:new createdClass({HOST:c}),this.needToReAlias=!0},aliasStaticMethods:function(){this.needToReAlias=!1;var c=this.c,myProto=this.myClass.prototype;Joose.O.eachOwn(c,function(property,name){property.IS_ALIAS&&delete c[name]}),this.myClass.meta.stem.properties.methods.each(function(method,name){c[name]||((c[name]=function(){return myProto[name].apply(c.my,arguments)}).IS_ALIAS=!0)})}},override:{extend:function(props){var myClass=this.myClass;!myClass&&this.superClass.meta.myClass&&this.createMy(props),props.my&&(myClass?(this.needToReAlias=!0,myClass.meta.extend(props.my),delete props.my):this.createMy(props)),this.SUPER(props),!this.needToReAlias||this instanceof Joose.Managed.Role||this.aliasStaticMethods()}},before:{addRole:function(){var myStem;Joose.A.each(arguments,function(arg){if(!arg)throw new Error("Attempt to consume an undefined Role into ["+this.name+"]");var role=arg.meta instanceof Joose.Managed.Class?arg:arg.role;if(role.meta.meta.hasAttribute("myClass")&&role.meta.myClass){if(!this.myClass)return void this.createMy({my:{does:role.meta.myClass}});(myStem=this.myClass.meta.stem).opened||myStem.open(),myStem.addComposeInfo(role.my.meta.stem)}},this),myStem&&(myStem.close(),this.needToReAlias=!0)},removeRole:function(){if(this.myClass){var myStem=this.myClass.meta.stem;myStem.open(),Joose.A.each(arguments,function(role){role.meta.meta.hasAttribute("myClass")&&role.meta.myClass&&(myStem.removeComposeInfo(role.my.meta.stem),this.needToReAlias=!0)},this),myStem.close()}}}}).c,Joose.Namespace=Joose.stub(),Joose.Namespace.Able=new Joose.Managed.Role("Joose.Namespace.Able",{have:{bodyFunc:null},before:{extend:function(extend){extend.body&&(this.bodyFunc=extend.body,delete extend.body)}},after:{afterMutate:function(){var bodyFunc=this.bodyFunc;delete this.bodyFunc,bodyFunc&&Joose.Namespace.Manager.my.executeIn(this.c,bodyFunc)}}}).c,Joose.Managed.Bootstrap=new Joose.Managed.Role("Joose.Managed.Bootstrap",{does:[Joose.Namespace.Able,Joose.Managed.My,Joose.Managed.Attribute.Builder]}).c,Joose.Meta=Joose.stub(),Joose.Meta.Object=new Joose.Proto.Class("Joose.Meta.Object",{isa:Joose.Proto.Object}).c,Joose.Meta.Class=new Joose.Managed.Class("Joose.Meta.Class",{isa:Joose.Managed.Class,does:Joose.Managed.Bootstrap,have:{defaultSuperClass:Joose.Meta.Object}}).c,Joose.Meta.Role=new Joose.Meta.Class("Joose.Meta.Role",{isa:Joose.Managed.Role,does:Joose.Managed.Bootstrap}).c,Joose.Namespace.Keeper=new Joose.Meta.Class("Joose.Namespace.Keeper",{isa:Joose.Meta.Class,have:{externalConstructor:null},methods:{defaultConstructor:function(){return function(){var thisMeta=arguments.callee.meta;if(thisMeta instanceof Joose.Namespace.Keeper)throw new Error("Module ["+thisMeta.c+"] may not be instantiated. Forgot to 'use' the class with the same name?");var externalConstructor=thisMeta.externalConstructor;if("function"==typeof externalConstructor)return externalConstructor.meta=thisMeta,externalConstructor.apply(this,arguments);throw"NamespaceKeeper of ["+thisMeta.name+"] was planted incorrectly."}},plant:function(withClass){var keeper=this.c;keeper.meta=withClass.meta,(keeper.meta.c=keeper).meta.externalConstructor=withClass}}}).c,Joose.Namespace.Manager=new Joose.Managed.Class("Joose.Namespace.Manager",{have:{current:null},methods:{initialize:function(){this.current=[Joose.top]},getCurrent:function(){return this.current[0]},executeIn:function(ns,func){var current=this.current;current.unshift(ns);var res=func.call(ns,ns);return current.shift(),res},earlyCreate:function(name,metaClass,props){return props.constructorOnly=!0,new metaClass(name,props).c},create:function(nsName,metaClass,extend){if(!nsName)return new metaClass(nsName,extend).c;var me=this;if(/^\./.test(nsName))return this.executeIn(Joose.top,function(){return me.create(nsName.replace(/^\./,""),metaClass,extend)});for(var props=extend||{},parts=Joose.S.saneSplit(nsName,"."),object=this.getCurrent(),soFar=object==Joose.top?[]:Joose.S.saneSplit(object.meta.name,"."),i=0;i<parts.length;i++){var part=parts[i],isLast=i==parts.length-1;if("meta"==part||"my"==part||!part)throw"Module name ["+nsName+"] may not include a part called 'meta' or 'my' or empty part.";var cur=object[part];soFar.push(part);var nsKeeper,soFarName=soFar.join("."),needFinalize=!1;if(void 0===cur)isLast?(nsKeeper=this.earlyCreate(soFarName,metaClass,props),needFinalize=!0):nsKeeper=new Joose.Namespace.Keeper(soFarName).c,cur=object[part]=nsKeeper;else if(isLast&&cur&&cur.meta){var currentMeta=cur.meta;if(metaClass==Joose.Namespace.Keeper)currentMeta.extend(props);else if(currentMeta instanceof Joose.Namespace.Keeper)currentMeta.plant(this.earlyCreate(soFarName,metaClass,props)),needFinalize=!0;else if(!Joose.C.ignoreRepeatedDeclarations)throw new Error("Double declaration of ["+soFarName+"]")}else if(isLast&&!(cur&&cur.meta&&cur.meta.meta))throw"Trying to setup module "+soFarName+" failed. There is already something: "+cur;isLast&&this.prepareMeta(cur.meta),needFinalize&&cur.meta.construct(props),object=cur}return object},prepareMeta:function(){},prepareProperties:function(name,props,defaultMeta,callback){var meta;return name&&"string"!=typeof name&&(props=name,name=null),props&&props.meta&&(meta=props.meta,delete props.meta),meta=meta||(props&&"function"==typeof props.isa&&props.isa.meta?props.isa.meta.constructor:defaultMeta),callback.call(this,name,meta,props)},getDefaultHelperFor:function(metaClass){var me=this;return function(name,props){return me.prepareProperties(name,props,metaClass,function(name,meta,props){return me.create(name,meta,props)})}},register:function(helperName,metaClass,func){var me=this;if(this.meta.hasMethod(helperName)){function helper(){return me[helperName].apply(me,arguments)}Joose.top[helperName]||(Joose.top[helperName]=helper),Joose[helperName]||(Joose[helperName]=helper),Joose.is_NodeJS&&"undefined"!=typeof exports&&(exports[helperName]=helper)}else{var methods={};methods[helperName]=func||this.getDefaultHelperFor(metaClass),this.meta.extend({methods:methods}),this.register(helperName)}},Module:function(name,props){return this.prepareProperties(name,props,Joose.Namespace.Keeper,function(name,meta,props){return"function"==typeof props&&(props={body:props}),this.create(name,meta,props)})}}}).c,Joose.Namespace.Manager.my=new Joose.Namespace.Manager,Joose.Namespace.Manager.my.register("Class",Joose.Meta.Class),Joose.Namespace.Manager.my.register("Role",Joose.Meta.Role),Joose.Namespace.Manager.my.register("Module");var Class=Joose.Class,Role=Joose.Role;Role("Joose.Attribute.Delegate",{have:{handles:null},override:{eachDelegate:function(handles,func,scope){return"string"==typeof handles?func.call(scope,handles,handles):handles instanceof Array?Joose.A.each(handles,function(delegateTo){func.call(scope,delegateTo,delegateTo)}):void(handles===Object(handles)&&Joose.O.eachOwn(handles,function(delegateTo,handleAs){func.call(scope,handleAs,delegateTo)}))},getAccessorsFor:function(targetClass){var targetMeta=targetClass.meta,methods=this.SUPER(targetClass),me=this;return this.eachDelegate(this.handles,function(handleAs,delegateTo){targetMeta.hasMethod(handleAs)||((methods[handleAs]=function(){var attrValue=me.getValueFrom(this);return attrValue[delegateTo].apply(attrValue,arguments)}).ACCESSOR_FROM=me)}),methods},getAccessorsFrom:function(from){var methods=this.SUPER(from),me=this,targetMeta=from.meta;return this.eachDelegate(this.handles,function(handleAs){var handler=targetMeta.getMethod(handleAs);handler&&handler.value.ACCESSOR_FROM==me&&methods.push(handleAs)}),methods}}}),Role("Joose.Attribute.Trigger",{have:{trigger:null},after:{initialize:function(){if(this.trigger){if(!this.writeable)throw new Error("Can't use `trigger` for read-only attributes");this.hasSetter=!0}}},override:{getSetter:function(){var original=this.SUPER(),trigger=this.trigger;if(!trigger)return original;var me=this,init=Joose.O.isFunction(me.init)?null:me.init;return function(){var oldValue=me.hasValue(this)?me.getValueFrom(this):init,res=original.apply(this,arguments);return trigger.call(this,me.getValueFrom(this),oldValue),res}}}}),Role("Joose.Attribute.Lazy",{have:{lazy:null},before:{computeValue:function(){"function"==typeof this.init&&this.lazy&&(this.lazy=this.init,delete this.init)}},after:{initialize:function(){this.lazy&&(this.readable=this.hasGetter=!0)}},override:{getGetter:function(){var original=this.SUPER(),lazy=this.lazy;if(!lazy)return original;var me=this;return function(){if(!me.hasValue(this)){var initializer="function"==typeof lazy?lazy:this[lazy.replace(/^this\./,"")];me.setValueTo(this,initializer.apply(this,arguments))}return original.call(this)}}}}),Role("Joose.Attribute.Accessor.Combined",{have:{isCombined:!1},after:{initialize:function(){this.isCombined=this.isCombined||/..c/i.test(this.is),this.isCombined&&(this.slot="$$"+this.name,this.hasGetter=!0,this.hasSetter=!1,this.setterName=this.getterName=this.publicName)}},override:{getGetter:function(){var getter=this.SUPER();if(!this.isCombined)return getter;var setter=this.getSetter(),me=this;return function(){if(!arguments.length){if(me.readable)return getter.call(this);throw new Error("Call to getter of unreadable attribute: ["+me.name+"]")}if(me.writeable)return setter.apply(this,arguments);throw new Error("Call to setter of read-only attribute: ["+me.name+"]")}}}}),Joose.Managed.Attribute.meta.extend({does:[Joose.Attribute.Delegate,Joose.Attribute.Trigger,Joose.Attribute.Lazy,Joose.Attribute.Accessor.Combined]}),Role("Joose.Meta.Singleton",{has:{forceInstance:Joose.I.Object,instance:null},override:{defaultConstructor:function(){var meta=this,previous=this.SUPER();return this.adaptConstructor(previous),function(forceInstance,params){if(forceInstance==meta.forceInstance)return previous.apply(this,params)||this;var instance=meta.instance;return instance=instance||(meta.instance=new meta.c(meta.forceInstance,arguments)),meta.hasMethod("configure")&&instance.configure.apply(instance,arguments),instance}}}}),Joose.Namespace.Manager.my.register("Singleton",Class({isa:Joose.Meta.Class,meta:Joose.Meta.Class,does:Joose.Meta.Singleton}))}(),Role("Siesta.Util.Role.CanFormatStrings",{has:{serializeFormatingPlaceholders:!0},methods:{formatString:function(string,data){if(!data)return string;for(var match,variables=[],isRaw=[],regexp=/\{(\!)?((?:\w|-|_)+?)\}/g;match=regexp.exec(string);)isRaw.push(match[1]),variables.push(match[2]);var result=string;return Joose.A.each(variables,function(variable,index){var varIsRaw=isRaw[index];result=result.replace(new RegExp("\\{"+(varIsRaw?"!":"")+variable+"\\}","g"),data.hasOwnProperty(variable)?varIsRaw||!this.serializeFormatingPlaceholders?data[variable]+"":Siesta.Util.Serializer.stringify(data[variable]):"")},this),result},extractKeysAndSpecialKeys:function(string){var KeyCodes=Siesta.Test.UserAgent.KeyCodes().keys,me=this,res=[],tokens=string.match(/(\[\[(?:\w|-){1,11}\]\])|(\[(?:\w|-){1,11}\])|([\s\S])/g)||[];return Joose.A.each(tokens,function(token,index){if(1<token.length){var isDouble=/\[\[/.test(token),specialKey=token.substring(isDouble?2:1,token.length-(isDouble?2:1)),normalText=void 0===KeyCodes[specialKey.toUpperCase()];normalText||isDouble?(res.push("["),normalText&&isDouble&&res.push("["),res.push.apply(res,me.extractKeysAndSpecialKeys(specialKey)),res.push("]"),normalText&&isDouble&&res.push("]")):res.push(token)}else res.push(token)}),res}}}),Role("Siesta.Util.Role.CanEscapeRegExp",{methods:{escapeRegExp:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}}),Class("Siesta.Util.TreeStoreFilterer",{has:{idProp:{required:!0},childNodesProp:{required:!0},parentNodeProp:{required:!0},isLeaf:{required:!0}},does:[Siesta.Util.Role.CanEscapeRegExp],methods:{parseFilterValue:function(filterValue){var parts=filterValue.split(/\s*\>\s*/),groupFilter=1<parts.length?parts[0]:"",leafFilter=1<parts.length?parts[1]:parts[0];return{testFilterRegexps:this.splitTermByPipe(leafFilter),groupFilterRegexps:groupFilter?this.splitTermByPipe(groupFilter):null}},checkCommonFilter:function(node,getTitle,testFilterRegexps,groupFilterRegexps){if(groupFilterRegexps){for(var currentNode=node,isInGroup=!1;currentNode&&currentNode[this.parentNodeProp];){var parent=currentNode[this.parentNodeProp];if(this.matchAnyOfRegExps(getTitle(parent),groupFilterRegexps)){isInGroup=!0;break}currentNode=parent}if(!isInGroup)return!1}return!!this.matchAnyOfRegExps(getTitle(node),testFilterRegexps)||!testFilterRegexps.length},splitTermByPipe:function(term){for(var parts=term.split(/\s*\|\s*/),regexps=[],me=this,i=0;i<parts.length;i++)parts[i]&&regexps.push(Joose.A.map(parts[i].split(/\s+/),function(token){return new RegExp(me.escapeRegExp(token),"i")}));return regexps},matchAnyOfRegExps:function(string,regexps){for(var p=0;p<regexps.length;p++){for(var groupMatch=!0,len=regexps[p].length,i=0;i<len;i++)if(!regexps[p][i].test(string)){groupMatch=!1;break}if(groupMatch)return!0}return!1},collectNodes:function(root,params){var filter=params.filter,scope=params.scope||this,shallowScan=params.shallow,checkParents=params.checkParents||shallowScan,fullMatchingParents=params.fullMatchingParents,onlyParents=params.onlyParents||fullMatchingParents;if(onlyParents&&checkParents)throw new Error("Can't combine `onlyParents` and `checkParents` options");function includeNodeInResults(node){visibleNodes[node[idProp]]=!0;for(var parent=node[parentNodeProp];parent&&!visibleNodes[parent[idProp]];)visibleNodes[parent[idProp]]=!0,parent=parent[parentNodeProp]}var idProp=this.idProp,parentNodeProp=this.parentNodeProp,childNodesProp=this.childNodesProp,isLeaf=this.isLeaf,rootVisible=params.rootVisible,visibleNodes={},cascadeNode=function(node,func){func(node);for(var childNodes=node[childNodesProp],length=childNodes.length,k=0;k<length;k++)isLeaf(node)?func(node):cascadeNode(childNodes[k],func)};rootVisible&&(visibleNodes[root[idProp]]=!0);var collectNodes=function(node){var nodeMatches,childNodes,length,k;if(!node.hidden)if(isLeaf(node))filter.call(scope,node,visibleNodes)&&includeNodeInResults(node);else if(onlyParents){if((nodeMatches=filter.call(scope,node))&&(includeNodeInResults(node),fullMatchingParents))return void cascadeNode(node,function(currentNode){visibleNodes[currentNode[idProp]]=!0});for(length=(childNodes=node[childNodesProp]).length,k=0;k<length;k++)nodeMatches&&isLeaf(childNodes[k])?visibleNodes[childNodes[k][idProp]]=!0:isLeaf(childNodes[k])||collectNodes(childNodes[k])}else if(checkParents&&(nodeMatches=filter.call(scope,node,visibleNodes))&&includeNodeInResults(node),!checkParents||!shallowScan||shallowScan&&(nodeMatches||node==root&&!rootVisible))for(length=(childNodes=node[childNodesProp]).length,k=0;k<length;k++)collectNodes(childNodes[k])};return collectNodes(root),visibleNodes}}}),Siesta.Resource=function(){var cacheByNamespace={},Resource=Class({does:Siesta.Util.Role.CanFormatStrings,has:{dict:null},methods:{get:function(key,data){var text=this.dict[key];return text?this.formatString(text,data):(window.console&&console.error&&window.top.console.error("TEXT_NOT_DEFINED: "+key),"TEXT_NOT_DEFINED: "+key)}}});return function(namespace,key,data){var dictionary=Siesta.CurrentLocale[namespace];if(!dictionary)throw"Missing dictionary for namespace: "+namespace;var resource=cacheByNamespace[namespace];return resource=resource||(cacheByNamespace[namespace]=new Resource({dict:dictionary,serializeFormatingPlaceholders:!1})),key?resource.get(key,data):resource}}(),Siesta.CurrentLocale=Siesta.CurrentLocale||{"Siesta.Project":{preloadHasFailed:"Preload of {url} has failed",preloadHasFailedForTest:"Preload of {url} has failed for test {test}",staticDeprecationWarning:"You are calling static method `{methodName}` of the project class {projectClass}. Such usage is deprecated now, please switch to creation of the project class instance: `var project = new {projectClass}()`",resourceFailedToLoad:"Loading of a {nodeName} resource failed",crossOriginFailed:"Failed to access cross-origin page: {url}. \nIn general tests should reside on the same domain as the app itself,\nbut you can try to disable web security:\nhttps://www.bryntum.com/blog/testing-x-domain-websites-with-siesta-in-chrome/"},"Siesta.Project.Browser.UI.AboutWindow":{upgradeText:"Upgrade to Siesta Standard",closeText:"Close",titleText:"ABOUT SIESTA (v{VERSION})",bodyText:'<img height="35" src="https://www.bryntum.com/bryntum-logo.png"/><p>Siesta is a JavaScript unit and functional test tool made by <a target="_blank" href="https://www.bryntum.com">Bryntum</a>. You can test any web page or JavaScript code, including Ext JS, jQuery or NodeJS. Siesta comes in two versions: <strong>Lite</strong> and <strong>Standard</strong>. With Lite, you can launch your tests in the browser UI. With the Standard version, you can also automate your tests and use the automation scripts together with tools like Puppeteer or Selenium WebDriver. </p>Siesta would not be possible without these awesome products & libraries: <br><ul style="padding:0 0 0 30px"><li><a href="http://sencha.com/extjs">Ext JS</a></li><li><a href="http://jquery.com">jQuery</a></li><li><a href="http://http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter</a></li><li><a href="http://joose.it/">Joose</a></li><li><a href="https://github.com/gotwarlost/istanbul">Istanbul</a></li></ul>'},"Siesta.Project.Browser.UI.AssertionGrid":{initializingText:"Initializing test..."},"Siesta.Project.Browser.UI.CoverageReport":{closeText:"Close",showText:"Show: ",lowText:"Low",mediumText:"Med",highText:"High",statementsText:"Statements",branchesText:"Branches",functionsText:"Functions",linesText:"Lines",loadingText:"Loading coverage data...",loadingErrorText:"Loading error",loadingErrorMessageText:"Could not load the report data from this url: ",globalNamespaceText:"[Global namespace]"},"Siesta.Project.Browser.UI.DomContainer":{title:"DOM Panel",viewDocsText:"View documentation for ",docsUrlText:"http://docs.sencha.com/{0}/apidocs/#!/api/{1}"},"Siesta.Project.Browser.UI.ResultPanel":{rerunText:"Run test",toggleDomVisibleText:"Toggle DOM visible",viewSourceText:"View source",showFailedOnlyText:"Show failed only",componentInspectorText:"Toggle Ext Component Inspector",eventRecorderText:"Event Recorder",closeText:"Close"},"Siesta.Project.Browser.UI.TestGrid":{mouseSimulation:"Mouse simulation",title:"Test list",nameText:"Name",filterTestsText:"Filter tests",expandCollapseAllText:"Expand / Collapse all",runCheckedText:"Run checked",runFailedText:"Run failed",runAllText:"Run all",observerModeText:"Observer mode",observerModeTooltip:"Sets the `forceDOMVisible` and `runCore=sequential` globally",passText:"Pass",failText:"Fail",optionsText:"Options...",todoPassedText:"todo assertion(s) passed",todoFailedText:"todo assertion(s) failed",viewDomText:"View DOM",transparentExText:"Transparent exceptions",transparentExTooltip:"Disable internal try/catch for any exceptions from tests. Useful for debugging.",cachePreloadsText:"Cache preloads",autoLaunchText:"Auto launch",autoLaunchTooltip:"Launch the test suite immediately after project page load.",speedRunText:"Fast (still accurate)",speedRunTooltip:"Reduce mouse cursor visualization quality to run tests faster",turboMode:"Very fast, but inaccurate",turboModeTooltip:"Sets the `mouseMovePrecision` option to `Infinity`. Read the docs before using.",breakOnFailText:"Break on fail",breakOnFailTooltip:"Stop the test suite on first failed assertion",debuggerOnFailText:"Debugger on fail",debuggerOnFailTooltip:"Issue a `debugger` statement on any failed assertion. Useful for debugging",aboutText:"About Siesta",documentationText:"Siesta Documentation",siestaDocsUrl:"https://bryntum.com/docs/siesta",filterFieldTooltip:["Supported patterns for tests filtering:\n","WORD - any word, will match with the test file name (no directory part)\n","WORD | WORD - any of the alternative patterns\n","GROUP > TEST - first match GROUP with the group name, then TEST with tests inside that group\n","GROUP1 | GROUP2 > TEST1 | TEST2 - alternation support for groups too\n"].join(""),landscape:"Landscape"},"Siesta.Project.Browser.UI.VersionUpdateButton":{newUpdateText:"New Update Available...",updateWindowTitleText:"New version available for download! Current version: ",cancelText:"Cancel",changelogLoadFailedText:"Bummer! Failed to fetch changelog.",downloadText:"Download ",liteText:" (Lite)",standardText:" (Standard)",loadingChangelogText:"Loading changelog..."},"Siesta.Project.Browser.UI.Viewport":{apiLinkText:"API Documentation",apiLinkUrl:"https://bryntum.com/docs/siesta",uncheckOthersText:"Uncheck others (and check this)",uncheckAllText:"Uncheck all",checkAllText:"Check all",runThisText:"Run this",expandAll:"Expand all",collapseAll:"Collapse all",filterToCurrentGroup:"Filter to current group",filterToFailed:"Filter to failed",httpWarningTitle:"You must use a web server",httpWarningDesc:"You must run Siesta in a web server context, and not using the file:/// protocol",viewSource:"View source"},"Siesta.Project.Browser":{codeCoverageWarningText:"Can not enable code coverage - did you forget to include the `siesta-coverage-all.js` on the project page?",noJasmine:"No `jasmine` object found on spec runner page",noJasmineSiestaReporter:"Can't find SiestaReporter in Jasmine. \nDid you add the `siesta/bin/jasmine-siesta-reporter.js` file to your spec runner page?"},"Siesta.Result.Assertion":{todoText:"TODO: ",passText:"ok",failText:"fail"},"Siesta.Role.ConsoleReporter":{passText:"PASS",failText:"FAIL",warnText:"WARN",errorText:"ERROR",missingFileText:"Test file [{URL}] not found.",allTestsPassedText:"All tests passed",failuresFoundText:"There are failures"},"Siesta.Test.Action.Drag":{byOrToMissingText:'Either "to" or "by" configuration option is required for "drag" step',byAndToDefinedText:'Exactly one of "to" or "by" configuration options is required for "drag" step, not both'},"Siesta.Test.Action.Eval":{invalidMethodNameText:"Invalid method name: ",wrongFormatText:"Wrong format of the action string: ",parseErrorText:"Can't parse arguments: "},"Siesta.Test.Action.Wait":{missingMethodText:"Could not find a waitFor method named "},"Siesta.Test.BDD.Expectation":{expectText:"Expect",needNotText:"Need not",needText:"Need",needMatchingText:"Need matching",needNotMatchingText:"Need not matching",needStringNotContainingText:"Need string not containing",needStringContainingText:"Need string containing",needArrayNotContainingText:"Need array not containing",needArrayContainingText:"Need array containing",needGreaterEqualThanText:"Need value greater or equal than",needGreaterThanText:"Need value greater than",needLessThanText:"Need value less than",needLessEqualThanText:"Need value less or equal than",needValueNotCloseToText:"Need value not close to",needValueCloseToText:"Need value close to",toBeText:"to be",toBeDefinedText:"to be defined",toBeUndefinedText:"to be undefined",toBeEqualToText:"to be equal to",toBeTruthyText:"to be truthy",toBeFalsyText:"to be falsy",toMatchText:"to match",toContainText:"to contain",toBeLessThanText:"to be less than",toBeGreaterThanText:"to be greater than",toBeCloseToText:"to be close to",toThrowText:"to throw exception",thresholdIsText:"Threshold is ",exactMatchText:"Exact match text",thrownExceptionText:"Thrown exception",noExceptionThrownText:"No exception thrown",wrongSpy:"Incorrect spy instance",toHaveBeenCalledDescTpl:"Expect method {methodName} to have been called {!need} times",actualNbrOfCalls:"Actual number of calls",expectedNbrOfCalls:"Expected number of calls",toHaveBeenCalledWithDescTpl:"Expect method {methodName} to have been called at least once with the specified arguments"},"Siesta.Test.ExtJS.Ajax":{ajaxIsLoading:"An Ajax call is currently loading",allAjaxRequestsToComplete:"all ajax requests to complete",ajaxRequest:"ajax request",toComplete:"to complete"},"Siesta.Test.ExtJS.Component":{badInputText:"Expected an Ext.Component, got",toBeVisible:"to be visible",toNotBeVisible:"to not be visible",component:"component",Component:"Component",componentQuery:"componentQuery",compositeQuery:"composite query",toReturnEmptyArray:"to return an empty array",toReturnEmpty:"to return empty",toReturnAVisibleComponent:"to return a visible component",toReturnHiddenCmp:"to return a hidden/missing component",invalidDestroysOkInput:"No components provided, or component query returned empty result",exception:"Exception",exceptionAnnotation:'Exception thrown while calling "destroy" method of',destroyFailed:"was not destroyed (probably destroy was canceled in the `beforedestroy` listener)",destroyPassed:"All passed components were destroyed ok"},"Siesta.Test.ExtJS.DataView":{view:"view",toRender:"to render"},"Siesta.Test.ExtJS.Element":{top:"top",left:"left",bottom:"bottom",right:"right"},"Siesta.Test.ExtJS.Grid":{waitForRowsVisible:"rows to show for panel with id",waitForCellEmpty:"cell to be empty"},"Siesta.Test.ExtJS.Observable":{hasListenerInvalid:"1st argument for `t.hasListener` should be an observable instance",hasListenerPass:"Observable has listener for {eventName}",hasListenerFail:"Provided observable has no listeners for event",isFiredWithSignatureNotFired:"event was not fired during the test",observableFired:"Observable fired",correctSignature:"with correct signature",incorrectSignature:"with incorrect signature"},"Siesta.Test.ExtJS.Store":{storesToLoad:"stores to load",failedToLoadStore:"Failed to load the store",URL:"URL"},"Siesta.Test.Action":{missingTestAction:"Action [{0}] requires `{1}` method in your test class"},"Siesta.Test.BDD":{codeBodyMissing:"Code body is not provided for",codeBodyOf:"Code body of",missingFirstArg:"does not declare a test instance as 1st argument",iitFound:"t.iit should only be used during debugging",noObject:"No object to spy on"},"Siesta.Test.BDD.Spy":{spyingNotOnFunction:"Trying to create a spy over a non-function property"},"Siesta.Test.Browser":{popupsDisabled:"Failed to open the popup for url: {url}. Enable the popups in the browser settings.",noDomElementFound:"No DOM element found for CSS selector",noActionTargetFound:"No action target found for",waitForEvent:"observable to fire its",event:"event",wrongFormat:"Wrong format for expected number of events",unrecognizedSignature:"Unrecognized signature for `firesOk`",observableFired:"Observable fired",observableFiredOk:"Observable fired expected number of",actualNbrEvents:"Actual number of events",expectedNbrEvents:"Expected number of events",events:"events",noElementFound:"Could not find any element at",targetElementOfAction:"Target element of action",targetElementOfSomeAction:"Target element of some action",isNotVisible:"is not visible or not reachable",text:"text",toBePresent:"to be present",toNotBePresent:"to not be present",target:"target",toAppear:"to appear",targetMoved:"Moving target detected, retargeting initiated",alertMethodNotCalled:"Expected a call to alert()",focusLostWarning:"Focus has left the test window {url}",focusLostWarningLauncher:"Focus has left the test window {url}, it will be restarted. This behavior is controled with the --restart-on-blur option."},"Siesta.Test.Date":{isEqualTo:"is equal to",Got:"Got"},"Siesta.Test.Element":{elementContent:"element content",toAppear:"to appear",toDisappear:"to disappear",toAppearAt:"to appear at",monkeyException:"Monkey testing action did not complete properly - probably an exception was thrown",monkeyNoExceptions:"No exceptions thrown during monkey test",monkeyActionLog:"Monkey action log",elementHasClass:"Element has the CSS class",elementHasNoClass:"Element has no CSS class",elementClasses:"Classes of element",needClass:"Need CSS class",hasStyleDescTpl:"Element has correct {value} for CSS style {property}",elementStyles:"Styles of element",needStyle:"Need style",hasNotStyleDescTpl:"Element does not have: {value} for CSS style {property}",hasTheStyle:"Element has the style",element:"element",toBeTopEl:"to be the top element at its position",toNotBeTopEl:"to not be the top element at its position",selector:"selector",selectors:"selectors",noCssSelector:"A CSS selector must be supplied",waitForSelectorsBadInput:"An array of CSS selectors must be supplied",Position:"Position",noElementAtPosition:"No element found at the specified position",elementIsAtDescTpl:"DOM element or its child is at [ {x}, {y} ] coordinates",topElement:"Top element",elementIsAtPassTpl:"DOM element is at [ {x}, {y} ] coordinates",allowChildrenDesc:"Need exactly this or its child",allowChildrenAnnotation:"Passed element is not the top-most one and not the child of one",shouldBe:"Should be",noChildrenFailAnnotation:"Passed element is not the top-most one",topLeft:"(t-l)",bottomLeft:"(b-l)",topRight:"(t-r)",bottomRight:"(b-r)",elementIsNotTopElementPassTpl:"Element is not the top element on the screen",selectorIsAtPassTpl:"Found element matching CSS selector {selector} at [ {xy} ]",elementMatching:"Element matching",selectorIsAtFailAnnotation:"Passed selector does not match any selector at",selectorExistsFailTpl:"No element matching the passed selector found",selectorExistsPassTpl:"Found DOM element(s) matching CSS selector {selector}",selectorNotExistsFailTpl:"Elements found matching the passed selector",selectorNotExistsPassTpl:"Did not find any DOM element(s) matching CSS selector {selector}",toChangeForElement:"to change for element",selectorCountIsPassTpl:"Found exactly {count} elements matching {selector}",selectorCountIsFailTpl:"Found {got} elements matching the selector {selector}, expected {need}",isInViewPassTpl:"Passed element is within the visible viewport",toAppearInTheViewport:"to appear in the viewport",elementIsEmptyPassTpl:"Passed element is empty",elementIsNotEmptyPassTpl:"Passed element is not empty",elementToBeEmpty:"element to be empty",elementToNotBeEmpty:"element to not be empty"},"Siesta.Test.ExtJS":{bundleUrlNotFound:"Cannot find Ext JS bundle url",assertNoGlobalExtOverridesInvalid:"Was not able to find the Ext JS bundle URL in the `assertNoGlobalExtOverrides` assertion",assertNoGlobalExtOverridesPassTpl:"No global Ext overrides found",assertNoGlobalExtOverridesGotDesc:"Number of overrides found",foundOverridesFor:"Found overrides for",animationsToFinalize:"animations to finalize",extOverridesInvalid:"Was not able to find the ExtJS bundle URL in the `assertMaxNumberOfGlobalExtOverrides` assertion)",foundLessOrEqualThan:"Found less or equal than",nbrOverridesFound:"Number of overrides found",globalOverrides:"Ext JS global overrides"},"Siesta.Test.ExtJSCore":{waitedForRequires:"Waiting for required classes took too long - \nCheck the `Net` tab in Firebug and the `loaderPath` config",waitedForExt:"Waiting for Ext.onReady took too long - probably some dependency could not be loaded. \nCheck the `Net` tab in Firebug and the `loaderPath` config",waitedForApp:"Waiting for MVC application launch took too long - no MVC application on test page? \nYou may need to disable the `waitForAppReady` config option",noComponentMatch:'Your component query: "{component}" returned no components',multipleComponentMatch:'Your component query: "{component}" returned more than 1 component',noComponentFound:"No component found for CQ",knownBugIn:"Known bug in",Class:"Class",wasLoaded:"was loaded",wasNotLoaded:"was not loaded",invalidCompositeQuery:"Invalid composite query selector",ComponentQuery:"ComponentQuery",CompositeQuery:"CompositeQuery",matchedNoCmp:"matched no Ext.Component",messageBoxVisible:"Message box is visible",messageBoxHidden:"Message box is hidden",waitedForComponentQuery:"Waiting too long for Ext.ComponentQuery"},"Siesta.Test.Function":{Need:"need",atLeast:"at least",exactly:"exactly",methodCalledExactly:"method was called exactly {n} times",exceptionEvalutingClass:"Exception [{e}] caught while evaluating the class name"},"Siesta.Test.More":{isGreaterPassTpl:"`{value1}` is greater than `{value2}`",isLessPassTpl:"`{value1}` is less than `{value2}`",isGreaterEqualPassTpl:"`{value1}` is greater or equal to`{value2}`",isLessEqualPassTpl:"`{value1}` is less or equal to`{value2}`",isApproxToPassTpl:"`{value1}` is approximately equal to `{value2}`",needGreaterThan:"Need greater than",needGreaterEqualTo:"Need greater or equal to",needLessThan:"Need less than",needLessEqualTo:"Need less or equal to",exactMatch:"Exact match",withinThreshold:"Match within treshhold",needApprox:"Need approx",thresholdIs:"Threshold is",stringMatchesRe:"`{string}` matches regexp {regex}",stringNotMatchesRe:"`{string}` does not match regexp {regex}",needStringMatching:"Need string matching",needStringNotMatching:"Need string not matching",needStringContaining:"Need string containing",needStringNotContaining:"Need string not containing",stringHasSubstring:"`{string}` has a substring: `{regex}`",stringHasNoSubstring:"`{string}` does not have a substring: `{regex}`",throwsOkInvalid:"throws_ok accepts a function as 1st argument",didntThrow:"Function did not throw an exception",exMatchesRe:"Function throws exception matching to {expected}",exceptionStringifiesTo:"Exception stringifies to",exContainsSubstring:"Function throws exception containing a substring: {expected}",fnDoesntThrow:"Function does not throw any exceptions",fnThrew:"Function threw an exception",isInstanceOfPass:"Object is an instance of the specified class",needInstanceOf:"Need instance of",isAString:"{value} is a string",aStringValue:"AStringValue",isAnObject:"{value} is an object",anObject:"An object value",isAnArray:"{value} is an array",anArrayValue:"An array value",isANumber:"{value} is a number",aNumberValue:"a number value",isABoolean:"{value} is a boolean",aBooleanValue:"a number value",isADate:"{value} is a date",aDateValue:"a date value",isARe:"{value} is a regular expression",aReValue:"a regular expression",isAFunction:"{value} is a function",aFunctionValue:"a function",isDeeplyPassTpl:"{obj1} is deeply equal to {obj2}",isDeeplyStrictPassTpl:"{obj1} is strictly deeply equal to {obj2}",globalCheckNotSupported:"Testing leakage of global variables is not supported on this platform",globalVariables:"Global Variables",noGlobalsFound:"No unexpected global variables found",globalFound:"Unexpected global found",globalName:"Global name",value:"value",conditionToBeFulfilled:"condition to be fulfilled",pageToLoad:"page to load",ms:"ms",waitingFor:"Waiting for",waitedTooLong:"Waited too long for",conditionNotFulfilled:"Condition was not fullfilled during",waitingAborted:"Waiting aborted",Waited:"Waited",checkerException:"checker threw an exception",Exception:"Exception",msFor:"ms for",forcedWaitFinalization:"Forced finalization of waiting for",chainStepNotCompleted:"The step in `t.chain()` call did not complete within required timeframe, chain can not proceed",stepNumber:"Step number",oneBased:"(1-based)",atLine:"At line",chainStepEx:"Chain step threw an exception",stepFn:"Step function",notUsingNext:'does not use the provided "next" function anywhere',calledMoreThanOnce:"The `next` callback of {num} step (1-based) of `t.chain()` call at line {line} is called more than once.",tooManyDifferences:"Showing {num} of {total} differences"},"Siesta.Test.SenchaTouch":{STSetupFailed:"Waiting for Ext.setup took too long - some dependency could not be loaded? Check the `Net` tab in Firebug",invalidSwipeDir:"Invalid swipe direction",moveFingerByInvalidInput:"Trying to call moveFingerBy without relative distances",scrollUntilFailed:"scrollUntil failed to achieve its mission",scrollUntilElementVisibleInvalid:"scrollUntilElementVisible: target or scrollable not provided",scrollerReachPos:"scroller to reach position"},"Siesta.Test":{noCodeProvidedToTest:"No code provided to test",addingAssertionsAfterDone:"Adding assertions after the test has finished",testFailedAndAborted:"Assertion failed, test execution aborted",atLine:"at line",of:"of",character:"character",isTruthy:'`{value}` is a "truthy" value',needTruthy:'Need "truthy" value',isFalsy:'`{value}` is a "falsy" value',needFalsy:'Need "falsy" value',isEqualTo:"`{got}` is equal to `{expected}`",isNotEqualTo:"`{got}` is not equal to `{expected}`",needNot:"Need not",isStrictlyEqual:"`{got}` is strictly equal to `{expected}`",needStrictly:"Need strictly",isStrictlyNotEqual:"`{got}` is strictly not equal to `{expected}`",needStrictlyNot:"Need strictly not",alreadyWaiting:"Already waiting with title",noOngoingWait:"There is no ongoing `wait` action with title",noMatchingEndAsync:"No matching `endAsync` call within {time}ms",endAsyncMisuse:"Calls to endAsync without argument should only be performed if you have single beginAsync statement",codeBodyMissingForSubTest:"Code body is not provided for sub test [{name}]",codeBodyMissingTestArg:"Code body of sub test [{name}] does not declare a test instance as 1st argument",Subtest:"Subtest",Test:"Test",failedToFinishWithin:"Subtest {name} failed to finish within {timeout}ms",threwException:"threw an exception",testAlreadyStarted:"Test has already been started",setupTookTooLong:"`setup` method took too long to complete",errorBeforeTestStarted:"Error happened before the test started",testStillRunning:"Your test is still considered to be running, if this is unexpected please see console for more information",testNotFinalized:'Your test [{url}] has not finalized, most likely since a timer (setTimeout) is still active. If this is the expected behavior, try setting "overrideSetTimeout : false" on your Harness configuration.',missingDoneCall:"Test has completed, but there was no `t.done()` call. Add it at the bottom, or use `t.beginAsync()` for asynchronous code",allTestsPassed:"All tests passed","Snoozed until":"Snoozed until",testTearDownTimeout:"Test's tear down process has timeout out"},"Siesta.Recorder.UI.Editor.Code":{invalidSyntax:"Invalid syntax"},"Siesta.Recorder.UI.Editor.DragTarget":{targetLabel:"Target",toLabel:"To",byLabel:"By",cancelButtonText:"Cancel",saveButtonText:"Save",dragVariantTitle:"Edit `drag` action",moveCursorVariantTitle:"Edit `moveCursor` action"},"Siesta.Recorder.UI.RecorderPanel":{actionColumnHeader:"Action",offsetColumnHeader:"Offset",queryMatchesNothing:"Query matches no DOM elements or components",queryMatchesMultiple:"Query matches multiple components",noVisibleElsFound:"No visible elements found for target",noTestDetected:"No test detected",noTestStarted:"You need to run a test first, or provide a Page URL",recordTooltip:"Record",stopTooltip:"Stop",playTooltip:"Play",clearTooltip:"Clear all",codeWindowTitle:"Code",addNewTooltip:"Add a new step",removeAllPromptTitle:"Remove all?",removeAllPromptMessage:"Do you want to clear the recorded events?",Error:"Error",showSource:"Show source",showSourceInNewWindow:"Show source in new window",newRecording:"New recording...",pageUrl:"Page URL"},"Siesta.Recorder.UI.TargetColumn":{headerText:"Target / Value",by:"by",to:"to",coordinateTargetWarning:"Siesta was unable to find a stable selector for this target. Using coordinates as locator is not recommended."}};var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,a){if((a=a).get||a.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=a.value)},$jscomp.getGlobal=function(a){return("undefined"==typeof window||window!==a)&&"undefined"!=typeof global&&null!=global?global:a},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(i,f,j,k){if(f){for(var a=$jscomp.global,b=i.split("."),e=0;e<b.length-1;e++){var d=b[e];d in a||(a[d]={}),a=a[d]}var g=b[b.length-1],h=a[g],c=f(h);c!=h&&null!=c&&$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})}},$jscomp.polyfill("Array.prototype.copyWithin",function(a){if(a)return a;return function(c,b,a){var d=this.length;if(c=Number(c),b=Number(b),a=Number(null!=a?a:d),c<b)for(a=Math.min(a,d);b<a;)b in this?this[c++]=this[b++]:(delete this[c++],b++);else for(c+=(a=Math.min(a,d+b-c))-b;b<a;)--a in this?this[--c]=this[a]:delete this[c];return this}},"es6-impl","es3"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a=a||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};return a[$jscomp.global.Symbol.iterator]=function(){return this},a},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator(),a instanceof String&&(a+="");var c=0,b={next:function(){if(c<a.length){var e=c++;return{value:d(e,a[e]),done:!1}}return b.next=function(){return{done:!0,value:void 0}},b.next()}};return b[Symbol.iterator]=function(){return b},b},$jscomp.polyfill("Array.prototype.entries",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(a,b){return[a,b]})}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.fill",function(a){if(a)return a;return function(e,b,a){var c=this.length||0;b<0&&(b=Math.max(0,c+b)),(null==a||c<a)&&(a=c),(a=Number(a))<0&&(a=Math.max(0,c+a));for(var d=Number(b||0);d<a;d++)this[d]=e;return this}},"es6-impl","es3"),$jscomp.findInternal=function(a,d,e){a instanceof String&&(a=String(a));for(var f=a.length,b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a))return{i:b,v:c}}return{i:-1,v:void 0}},$jscomp.polyfill("Array.prototype.find",function(a){if(a)return a;return function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.findIndex",function(a){if(a)return a;return function(b,a){return $jscomp.findInternal(this,b,a).i}},"es6-impl","es3"),$jscomp.polyfill("Array.from",function(a){if(a)return a;return function(a,b,f){$jscomp.initSymbolIterator(),b=null!=b?b:function(a){return a};var g,c=[],e=a[Symbol.iterator];if("function"==typeof e)for(a=e.call(a);!(g=a.next()).done;)c.push(b.call(f,g.value));else for(var h=a.length,d=0;d<h;d++)c.push(b.call(f,a[d]));return c}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.keys",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3"),$jscomp.polyfill("Array.of",function(a){if(a)return a;return function(a){return Array.from(arguments)}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.values",function(a){if(a)return a;return function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})}},"es6","es3"),$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a.throw(b)}return new Promise(function(b,c){!function handleGeneratorRecord(a){a.done?b(a.value):Promise.resolve(a.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}(a.next())})},$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)},$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)},$jscomp.polyfill("WeakMap",function(c){if(function(){if(c&&Object.seal)try{var b=Object.seal({}),d=Object.seal({}),a=new c([[b,2],[d,3]]);return 2!=a.get(b)||3!=a.get(d)?void 0:(a.delete(b),a.set(d,4),!a.has(b)&&4==a.get(d))}catch(e){return}}())return c;var a="$jscomp_hidden_"+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){$jscomp.defineProperty(b,a,{value:{}})}}function patch(a){var b=Object[a];b&&(Object[a]=function(a){return insert(a),b(a)})}patch("freeze"),patch("preventExtensions"),patch("seal");var d=0,b=function(a){if(this.id_=(d+=Math.random()+1).toString(),a){$jscomp.initSymbol(),$jscomp.initSymbolIterator();for(var b,e=$jscomp.makeIterator(a);!(b=e.next()).done;){var c=b.value;this.set(c[0],c[1])}}};return b.prototype.set=function(b,c){if(insert(b),!$jscomp.owns(b,a))throw new Error("WeakMap key fail: "+b);return b[a][this.id_]=c,this},b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:void 0},b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)},b.prototype.delete=function(b){return!(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_))&&delete b[a][this.id_]},b},"es6-impl","es3"),$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.polyfill("Map",function(b){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{b=b;var e=Object.seal({x:4}),c=new b($jscomp.makeIterator([[e,"s"]]));if("s"!=c.get(e)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),a=d.next();return a.done||a.value[0]!=e||"s"!=a.value[1]?!1:!((a=d.next()).done||4!=a.value[0].x||"t"!=a.value[1]||!d.next().done)}catch(k){return!1}}())return b;$jscomp.initSymbol(),$jscomp.initSymbolIterator();var f=new WeakMap,a=function(a){if(this.data_={},this.head_=g(),this.size=0,a)for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.set(c[0],c[1])}};a.prototype.set=function(c,b){var a=d(this,c);return a.list||(a.list=this.data_[a.id]=[]),a.entry?a.entry.value=b:(a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:b},a.list.push(a.entry),this.head_.previous.next=a.entry,this.head_.previous=a.entry,this.size++),this},a.prototype.delete=function(b){var a=d(this,b);return!(!a.entry||!a.list)&&(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0)},a.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=g(),this.size=0},a.prototype.has=function(a){return!!d(this,a).entry},a.prototype.get=function(b){var a=d(this,b).entry;return a&&a.value},a.prototype.entries=function(){return e(this,function(a){return[a.key,a.value]})},a.prototype.keys=function(){return e(this,function(a){return a.key})},a.prototype.values=function(){return e(this,function(a){return a.value})},a.prototype.forEach=function(d,c){for(var b,e=this.entries();!(b=e.next()).done;){var a=b.value;d.call(c,a[1],a[0],this)}},a.prototype[Symbol.iterator]=a.prototype.entries;var d=function(f,d){var e=j(d),a=f.data_[e];if(a&&$jscomp.owns(f.data_,e))for(var c=0;c<a.length;c++){var b=a[c];if(d!=d&&b.key!=b.key||d===b.key)return{id:e,list:a,index:c,entry:b}}return{id:e,list:a,index:-1,entry:void 0}},e=function(b,c){var a=b.head_;return $jscomp.iteratorPrototype(function(){if(a){for(;a.head!=b.head_;)a=a.previous;if(a.next!=a.head)return a=a.next,{done:!1,value:c(a)};a=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=a.next=a.head=a,a},i=0,j=function(a){var b=a&&typeof a;if("object"!=b&&"function"!=b)return"p_"+a;if(a=a,f.has(a))return f.get(a);var c=""+ ++i;return f.set(a,c),c};return a},"es6-impl","es3"),$jscomp.polyfill("Math.acosh",function(a){if(a)return a;return function(a){return a=Number(a),Math.log(a+Math.sqrt(a*a-1))}},"es6-impl","es3"),$jscomp.polyfill("Math.asinh",function(a){if(a)return a;return function(a){if(0===(a=Number(a)))return a;var b=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Math.log1p",function(a){if(a)return a;return function(a){if((a=Number(a))<.25&&-.25<a){for(var e=a,f=1,b=a,c=0,d=1;c!=b;)b=(c=b)+(d*=-1)*(e*=a)/++f;return b}return Math.log(1+a)}},"es6-impl","es3"),$jscomp.polyfill("Math.atanh",function(b){if(b)return b;var a=Math.log1p;return function(b){return b=Number(b),(a(b)-a(-b))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.cbrt",function(a){if(a)return a;return function(a){if(0===a)return a;a=Number(a);var b=Math.pow(Math.abs(a),1/3);return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Math.clz32",function(a){if(a)return a;return function(a){if(0===(a=Number(a)>>>0))return 32;var b=0;return 0==(4294901760&a)&&(a<<=16,b+=16),0==(4278190080&a)&&(a<<=8,b+=8),0==(4026531840&a)&&(a<<=4,b+=4),0==(3221225472&a)&&(a<<=2,b+=2),0==(2147483648&a)&&b++,b}},"es6-impl","es3"),$jscomp.polyfill("Math.cosh",function(a){if(a)return a;var b=Math.exp;return function(a){return a=Number(a),(b(a)+b(-a))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.expm1",function(a){if(a)return a;return function(a){if((a=Number(a))<.25&&-.25<a){for(var d=a,e=1,b=a,c=0;c!=b;)b=(c=b)+(d*=a/++e);return b}return Math.exp(a)-1}},"es6-impl","es3"),$jscomp.polyfill("Math.hypot",function(a){if(a)return a;return function(b,c,g){var a,f,e;b=Number(b),c=Number(c);var d=Math.max(Math.abs(b),Math.abs(c));for(a=2;a<arguments.length;a++)d=Math.max(d,Math.abs(arguments[a]));if(1e100<d||d<1e-100){for(e=(b/=d)*b+(c/=d)*c,a=2;a<arguments.length;a++)e+=(f=Number(arguments[a])/d)*f;return Math.sqrt(e)*d}for(e=b*b+c*c,a=2;a<arguments.length;a++)e+=(f=Number(arguments[a]))*f;return Math.sqrt(e)}},"es6-impl","es3"),$jscomp.polyfill("Math.imul",function(a){if(a)return a;return function(a,b){var c=65535&(a=Number(a)),d=65535&(b=Number(b));return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0}},"es6-impl","es3"),$jscomp.polyfill("Math.log10",function(a){if(a)return a;return function(a){return Math.log(a)/Math.LN10}},"es6-impl","es3"),$jscomp.polyfill("Math.log2",function(a){if(a)return a;return function(a){return Math.log(a)/Math.LN2}},"es6-impl","es3"),$jscomp.polyfill("Math.sign",function(a){if(a)return a;return function(a){return 0===(a=Number(a))||isNaN(a)?a:0<a?1:-1}},"es6-impl","es3"),$jscomp.polyfill("Math.sinh",function(a){if(a)return a;var b=Math.exp;return function(a){return 0===(a=Number(a))?a:(b(a)-b(-a))/2}},"es6-impl","es3"),$jscomp.polyfill("Math.tanh",function(a){if(a)return a;return function(a){if(0===(a=Number(a)))return a;var b=Math.exp(-2*Math.abs(a)),c=(1-b)/(1+b);return a<0?-c:c}},"es6-impl","es3"),$jscomp.polyfill("Math.trunc",function(a){if(a)return a;return function(a){if(a=Number(a),isNaN(a)||a===1/0||a===-1/0||0===a)return a;var b=Math.floor(Math.abs(a));return a<0?-b:b}},"es6-impl","es3"),$jscomp.polyfill("Number.EPSILON",function(a){return Math.pow(2,-52)},"es6-impl","es3"),$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6-impl","es3"),$jscomp.polyfill("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991},"es6-impl","es3"),$jscomp.polyfill("Number.isFinite",function(a){if(a)return a;return function(a){return"number"==typeof a&&(!isNaN(a)&&a!==1/0&&a!==-1/0)}},"es6-impl","es3"),$jscomp.polyfill("Number.isInteger",function(a){if(a)return a;return function(a){return!!Number.isFinite(a)&&a===Math.floor(a)}},"es6-impl","es3"),$jscomp.polyfill("Number.isNaN",function(a){if(a)return a;return function(a){return"number"==typeof a&&isNaN(a)}},"es6-impl","es3"),$jscomp.polyfill("Number.isSafeInteger",function(a){if(a)return a;return function(a){return Number.isInteger(a)&&Math.abs(a)<=Number.MAX_SAFE_INTEGER}},"es6-impl","es3"),$jscomp.polyfill("Object.assign",function(a){if(a)return a;return function(d,e){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(a)for(var b in a)$jscomp.owns(a,b)&&(d[b]=a[b])}return d}},"es6-impl","es3"),$jscomp.polyfill("Object.getOwnPropertySymbols",function(a){return a||function(){return[]}},"es6-impl","es5"),$jscomp.polyfill("Object.is",function(a){if(a)return a;return function(a,b){return a===b?0!==a||1/a==1/b:a!=a&&b!=b}},"es6-impl","es3"),$jscomp.polyfill("Object.setPrototypeOf",function(a){if(a)return a;if("object"!=typeof"".__proto__)return null;return function(a,b){if(a.__proto__=b,a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}},"es6","es5"),$jscomp.EXPOSE_ASYNC_EXECUTOR=!0,$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.polyfill("Promise",function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){return null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_()),this.batch_.push(a),this},AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global.setTimeout;AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)},AsyncExecutor.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var c=b[a];delete b[a];try{c()}catch(f){this.asyncThrow_(f)}}}this.batch_=null},AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b_PENDING=0,b_FULFILLED=1,b_REJECTED=2,a=function(c){this.state_=b_PENDING,this.result_=void 0,this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{c(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this,a=!1;function firstCallWins(c){return function(d){a||(a=!0,c.call(b,d))}}return{resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}},a.prototype.resolveTo_=function(b){b===this?this.reject_(new TypeError("A Promise cannot resolve to itself")):b instanceof a?this.settleSameAsPromise_(b):!function(a){switch(typeof a){case"object":return null!=a;case"function":return 1;default:return}}(b)?this.fulfill_(b):this.resolveToNonPromiseObj_(b)},a.prototype.resolveToNonPromiseObj_=function(b){var a=void 0;try{a=b.then}catch(f){return void this.reject_(f)}"function"==typeof a?this.settleSameAsThenable_(a,b):this.fulfill_(b)},a.prototype.reject_=function(a){this.settle_(b_REJECTED,a)},a.prototype.fulfill_=function(a){this.settle_(b_FULFILLED,a)},a.prototype.settle_=function(c,a){if(this.state_!=b_PENDING)throw new Error("Cannot settle("+c+", "+a|"): Promise already settled in state"+this.state_);this.state_=c,this.result_=a,this.executeOnSettledCallbacks_()},a.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=this.onSettledCallbacks_,a=0;a<b.length;++a)b[a].call(),b[a]=null;this.onSettledCallbacks_=null}};var d=new AsyncExecutor;return a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)},a.prototype.settleSameAsThenable_=function(b,c){var a=this.createResolveAndReject_();try{b.call(c,a.resolve,a.reject)}catch(f){a.reject(f)}},a.prototype.then=function(e,f){var b,c,d=new a(function(a,d){b=a,c=d});function createCallback(a,d){return"function"==typeof a?function(d){try{b(a(d))}catch(g){c(g)}}:d}return this.callWhenSettled_(createCallback(e,b),createCallback(f,c)),d},a.prototype.catch=function(a){return this.then(void 0,a)},a.prototype.callWhenSettled_=function(c,e){var a=this;function callback(){switch(a.state_){case b_FULFILLED:c(a.result_);break;case b_REJECTED:e(a.result_);break;default:throw new Error("Unexpected state: "+a.state_)}}null==this.onSettledCallbacks_?d.asyncExecute(callback):this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})},a.resolve=function(b){return b instanceof a?b:new a(function(a,c){a(b)})},a.reject=function(b){return new a(function(c,a){a(b)})},a.race=function(b){return new a(function(e,f){for(var d=$jscomp.makeIterator(b),c=d.next();!c.done;c=d.next())a.resolve(c.value).callWhenSettled_(e,f)})},a.all=function(d){var c=$jscomp.makeIterator(d),b=c.next();return b.done?a.resolve([]):new a(function(f,g){var d=[],e=0;function onFulfilled(a){return function(b){d[a]=b,0==--e&&f(d)}}for(;d.push(void 0),e++,a.resolve(b.value).callWhenSettled_(onFulfilled(d.length-1),g),!(b=c.next()).done;);})},$jscomp.EXPOSE_ASYNC_EXECUTOR&&(a.$jscomp$new$AsyncExecutor=function(){return new AsyncExecutor}),a},"es6-impl","es3"),$jscomp.polyfill("Reflect.apply",function(a){if(a)return a;var c=Function.prototype.apply;return function(d,b,a){return c.call(d,b,a)}},"es6","es3"),$jscomp.polyfill("Reflect.construct",function(a){if(a)return a;return function(b,d,a){void 0===a&&(a=b);var e=a.prototype||Object.prototype,c=Object.create(e);return Reflect.apply(b,c,d)||c}},"es6","es5"),$jscomp.polyfill("Reflect.defineProperty",function(a){if(a)return a;return function(d,c,b){try{Object.defineProperty(d,c,b);var a=Object.getOwnPropertyDescriptor(d,c);return a?a.configurable===(b.configurable||!1)&&a.enumerable===(b.enumerable||!1)&&("value"in a?a.value===b.value&&a.writable===(b.writable||!1):a.get===b.get&&a.set===b.set):!1}catch(e){return!1}}},"es6","es5"),$jscomp.polyfill("Reflect.deleteProperty",function(a){if(a)return a;return function(b,a){if(!$jscomp.owns(b,a))return!0;try{return delete b[a]}catch(c){return!1}}},"es6","es3"),$jscomp.polyfill("Reflect.getOwnPropertyDescriptor",function(a){return a||Object.getOwnPropertyDescriptor},"es6","es5"),$jscomp.polyfill("Reflect.getPrototypeOf",function(a){return a||Object.getPrototypeOf},"es6","es5"),$jscomp.findDescriptor=function(d,c){for(var a=d;a;){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b)return b;a=Reflect.getPrototypeOf(a)}},$jscomp.polyfill("Reflect.get",function(a){if(a)return a;return function(c,b,d){if(arguments.length<=2)return c[b];var a=$jscomp.findDescriptor(c,b);return a?a.get?a.get.call(d):a.value:void 0}},"es6","es5"),$jscomp.polyfill("Reflect.has",function(a){if(a)return a;return function(b,a){return a in b}},"es6","es3"),$jscomp.polyfill("Reflect.isExtensible",function(a){return a||("function"==typeof Object.isExtensible?Object.isExtensible:function(){return!0})},"es6","es3"),$jscomp.polyfill("Reflect.ownKeys",function(b){if(b)return b;var a="jscomp_symbol_";function isSymbol(b){return b.substring(0,a.length)==a}return function(d){for(var e=[],b=Object.getOwnPropertyNames(d),c=Object.getOwnPropertySymbols(d),a=0;a<b.length;a++)(isSymbol(b[a])?c:e).push(b[a]);return e.concat(c)}},"es6","es5"),$jscomp.polyfill("Reflect.preventExtensions",function(a){if(a)return a;if("function"!=typeof Object.preventExtensions)return function(){return!1};return function(a){return Object.preventExtensions(a),!Object.isExtensible(a)}},"es6","es3"),$jscomp.polyfill("Reflect.set",function(a){if(a)return a;return function(a,c,d,e){var b=$jscomp.findDescriptor(a,c);return b?b.set?(b.set.call(3<arguments.length?e:a,d),!0):!(!b.writable||Object.isFrozen(a))&&(a[c]=d,!0):!!Reflect.isExtensible(a)&&(a[c]=d,!0)}},"es6","es5"),$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if("object"!=typeof"".__proto__)return null;return function(a,b){try{return a.__proto__=b,a.__proto__===b}catch(c){return!1}}},"es6","es5"),$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.polyfill("Set",function(b){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{b=b;var d=Object.seal({x:4}),c=new b($jscomp.makeIterator([d]));if(!c.has(d)||1!=c.size||c.add(d)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var e=c.entries(),a=e.next();return a.done||a.value[0]!=d||a.value[1]!=d?!1:!(a=e.next()).done&&a.value[0]!=d&&4==a.value[0].x&&a.value[1]==a.value[0]&&e.next().done}catch(f){return!1}}())return b;$jscomp.initSymbol(),$jscomp.initSymbolIterator();var a=function(a){if(this.map_=new Map,a)for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.add(c)}this.size=this.map_.size};return a.prototype.add=function(a){return this.map_.set(a,a),this.size=this.map_.size,this},a.prototype.delete=function(b){var a=this.map_.delete(b);return this.size=this.map_.size,a},a.prototype.clear=function(){this.map_.clear(),this.size=0},a.prototype.has=function(a){return this.map_.has(a)},a.prototype.entries=function(){return this.map_.entries()},a.prototype.values=function(){return this.map_.values()},a.prototype[Symbol.iterator]=a.prototype.values,a.prototype.forEach=function(b,a){var c=this;this.map_.forEach(function(d){return b.call(a,d,d,c)})},a},"es6-impl","es3"),$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""},$jscomp.polyfill("String.prototype.codePointAt",function(a){if(a)return a;return function(a){var d=$jscomp.checkStringArgs(this,null,"codePointAt"),e=d.length;if(0<=(a=Number(a)||0)&&a<e){a|=0;var b=d.charCodeAt(a);if(b<55296||56319<b||a+1===e)return b;var c=d.charCodeAt(a+1);return c<56320||57343<c?b:1024*(b-55296)+c+9216}}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.endsWith",function(a){if(a)return a;return function(a,b){var c=$jscomp.checkStringArgs(this,a,"endsWith");a+="",void 0===b&&(b=c.length);for(var e=Math.max(0,Math.min(0|b,c.length)),d=a.length;0<d&&0<e;)if(c[--e]!=a[--d])return!1;return d<=0}},"es6-impl","es3"),$jscomp.polyfill("String.fromCodePoint",function(a){if(a)return a;return function(d){for(var b="",c=0;c<arguments.length;c++){var a=Number(arguments[c]);if(a<0||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);a<=65535?b+=String.fromCharCode(a):(a-=65536,b+=String.fromCharCode(a>>>10&1023|55296),b+=String.fromCharCode(1023&a|56320))}return b}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.includes",function(a){if(a)return a;return function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.repeat",function(a){if(a)return a;return function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(a<0||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var c="";a;)1&a&&(c+=b),(a>>>=1)&&(b+=b);return c}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.startsWith",function(a){if(a)return a;return function(a,f){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var g=b.length,d=a.length,e=Math.max(0,Math.min(0|f,b.length)),c=0;c<d&&e<g;)if(b[e++]!=a[c++])return!1;return d<=c}},"es6-impl","es3"),$jscomp.arrayFromIterator=function(c){for(var b,a=[];!(b=c.next()).done;)a.push(b.value);return a},$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))},$jscomp.inherits=function(a,b){function tempCtor(){}for(var c in tempCtor.prototype=b.prototype,a.prototype=new tempCtor,a.prototype.constructor=a,b)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]},$jscomp.polyfill("WeakSet",function(b){if(function(){if(b&&Object.seal)try{var c=Object.seal({}),d=Object.seal({}),a=new b([c]);return!a.has(c)||a.has(d)?void 0:(a.delete(c),a.add(d),!a.has(c)&&a.has(d))}catch(e){return}}())return b;var a=function(a){if(this.map_=new WeakMap,a){$jscomp.initSymbol(),$jscomp.initSymbolIterator();for(var b,d=$jscomp.makeIterator(a);!(b=d.next()).done;){var c=b.value;this.add(c)}}};return a.prototype.add=function(a){return this.map_.set(a,!0),this},a.prototype.has=function(a){return this.map_.has(a)},a.prototype.delete=function(a){return this.map_.delete(a)},a},"es6-impl","es3");try{-1==Array.prototype.values.toString().indexOf("[native code]")&&delete Array.prototype.values}catch(a){}var Ext=Ext||{};Ext.Boot=Ext.Boot||function(m){function k(){var a,c,e,b,d=!1,f=Array.prototype.shift.call(arguments);for("boolean"==typeof arguments[arguments.length-1]&&(d=Array.prototype.pop.call(arguments)),e=arguments.length,a=0;a<e;a++)if("object"==typeof(b=arguments[a]))for(c in b)f[d?c.toLowerCase():c]=b[c];return f}var c=document,f=[],j={disableCaching:!(/[?&](?:cache|disableCacheBuster)\b/i.test(location.search)||!/http[s]?\:/i.test(location.href)||/(^|[ ;])ext-cache=1/.test(c.cookie)),disableCachingParam:"_dc",loadDelay:!1,preserveScripts:!0,charset:"UTF-8"},n=/\.css(?:\?|$)/i,h=c.createElement("a"),i="undefined"!=typeof window,e={browser:i,node:!i&&"function"==typeof require,phantom:window&&(window._phantom||window.callPhantom)||/PhantomJS/.test(window.navigator.userAgent)},b=Ext.platformTags={},d=function(b,a,c){if(c&&d(b,c),b&&a&&"object"==typeof a)for(var e in a)b[e]=a[e];return b},g="function"==typeof Object.keys?function(a){return a?Object.keys(a):[]}:function(b){var a,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(a);return c},a={loading:0,loaded:0,apply:d,env:e,config:j,assetConfig:{},scripts:{},currentFile:null,suspendedQueue:[],currentRequest:null,syncMode:!1,useElements:!0,listeners:[],Request:Request,Entry:Entry,allowMultipleBrowsers:!1,browserNames:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",dolfin:"Dolfin",edge:"Edge",webosbrowser:"webOSBrowser",chromeMobile:"ChromeMobile",chromeiOS:"ChromeiOS",silk:"Silk",other:"Other"},osNames:{ios:"iOS",android:"Android",windowsPhone:"WindowsPhone",webos:"webOS",blackberry:"BlackBerry",rimTablet:"RIMTablet",mac:"MacOS",win:"Windows",tizen:"Tizen",linux:"Linux",bada:"Bada",chromeOS:"ChromeOS",other:"Other"},browserPrefixes:{ie:"MSIE ",edge:"Edge/",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"OPR/",dolfin:"Dolfin/",webosbrowser:"wOSBrowser/",chromeMobile:"CrMo/",chromeiOS:"CriOS/",silk:"Silk/"},browserPriority:["edge","opera","dolfin","webosbrowser","silk","chromeiOS","chromeMobile","ie","firefox","safari","chrome"],osPrefixes:{tizen:"(Tizen )",ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",windowsPhone:"Windows Phone ",blackberry:"(?:BlackBerry|BB)(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/",chromeOS:"CrOS "},fallbackOSPrefixes:{windows:"win",mac:"mac",linux:"linux"},devicePrefixes:{iPhone:"iPhone",iPod:"iPod",iPad:"iPad"},maxIEVersion:12,detectPlatformTags:function(){var c=this,e=navigator.userAgent,h=/Mobile(\/|\s)/.test(e),d=document.createElement("div"),n=function(){var i,f,k,h,b,m,g,a,j,d={};for(m=c.browserPriority.length,b=0;b<m;b++)h=c.browserPriority[b],j?a=0:(k=c.browserPrefixes[h],(a=(g=e.match(new RegExp("("+k+")([\\w\\._]+)")))&&1<g.length?parseInt(g[2]):0)&&(j=!0)),d[h]=a;if(d.ie){var l=document.documentMode;8<=l&&(d.ie=l)}for(a=d.ie||!1,i=Math.max(a,c.maxIEVersion),b=8;b<=i;++b)d[(f="ie"+b)+"m"]=a?a<=b:0,d[f]=a?a===b:0,d[f+"p"]=a?b<=a:0;return d}(),p=function(){var k,d,f,b,l,a,h,j,m,i={};for(l=(f=g(c.osPrefixes)).length,m=b=0;b<l;b++)d=f[b],k=c.osPrefixes[d],(j=!(h=(a=e.match(new RegExp("("+k+")([^\\s;]+)")))?a[1]:null)||"HTC_"!==h&&"Silk/"!==h?a&&1<a.length?parseFloat(a[a.length-1]):0:2.3)&&m++,i[d]=j;for(l=(f=g(c.fallbackOSPrefixes)).length,b=0;b<l;b++)d=f[b],0===m?(k=c.fallbackOSPrefixes[d],a=e.toLowerCase().match(new RegExp(k)),i[d]=!!a||0):i[d]=0;return i}(),o=function(){var i,d,b,a,j,h,f={};for(j=(b=g(c.devicePrefixes)).length,a=0;a<j;a++)d=b[a],i=c.devicePrefixes[d],h=e.match(new RegExp(i)),f[d]=!!h||0;return f}(),f=a.loadPlatformsParam();k(b,n,p,o,f,!0),b.phone=b.iphone||b.ipod||!b.silk&&b.android&&(b.android<3||h)||b.blackberry&&h||b.windowsphone,b.tablet=!b.phone&&(b.ipad||b.android||b.silk||b.rimtablet||b.ie10&&/; Touch/.test(e)),b.touch=function(e,c){void 0===c&&(c=window);var a="on"+e.toLowerCase(),b=a in d;return b||d.setAttribute&&d.removeAttribute&&(d.setAttribute(a,""),b="function"==typeof d[a],void 0!==d[a]&&(d[a]=void 0),d.removeAttribute(a)),b}("touchend")||navigator.maxTouchPoints||navigator.msMaxTouchPoints,b.desktop=!b.phone&&!b.tablet,b.cordova=b.phonegap=!!(window.PhoneGap||window.Cordova||window.cordova),b.webview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(e),b.androidstock=b.android<=4.3&&(b.safari||b.silk),k(b,f,!0)},loadPlatformsParam:function(){var a,b,h,d,i,c,f=window.location.search.substr(1).split("&"),e={},g={};for(a=0;a<f.length;a++)e[(b=f[a].split("="))[0]]=b[1];if(e.platformTags)for(h=(b=e.platformTags.split(",")).length,a=0;a<h;a++)i=(d=b[a].split(":"))[0],c=!0,1<d.length&&("false"!==(c=d[1])&&"0"!==c||(c=!1)),g[i]=c;return g},filterPlatform:function(e,d){e=f.concat(e||f),d=f.concat(d||f);var a,g,i=e.length,h=d.length,c=!i&&h;for(a=0;a<i&&!c;a++)g=e[a],c=!!b[g];for(a=0;a<h&&c;a++)g=d[a],c=!b[g];return c},init:function(){var b,e,g,d,j,h,i,f=c.getElementsByTagName("script"),l=f.length,m=/\/ext(\-[a-z\-]+)?\.js$/;for(h=0;h<l;h++)(e=(b=f[h]).src)&&(g=b.readyState||null,d||m.test(e)&&(a.hasReadyState="readyState"in b,a.hasAsync="async"in b||!a.hasReadyState,d=e),a.scripts[j=a.canonicalUrl(e)]||new Entry({key:j,url:e,done:null===g||"loaded"===g||"complete"===g,el:b,prop:"src"}));d||(d=(b=f[f.length-1]).src,a.hasReadyState="readyState"in b,a.hasAsync="async"in b||!a.hasReadyState),a.baseUrl=d.substring(0,d.lastIndexOf("/")+1),i=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),a.origin=i,a.detectPlatformTags(),Ext.filterPlatform=a.filterPlatform},canonicalUrl:function(f){h.href=f;var d,a,b=h.href,e=j.disableCachingParam,c=e?b.indexOf(e+"="):-1;return 0<c&&("?"===(d=b.charAt(c-1))||"&"===d)&&((a=(a=b.indexOf("&",c))<0?"":b.substring(a))&&"?"===d&&(++c,a=a.substring(1)),b=b.substring(0,c-1)+a),b},getConfig:function(b){return b?a.config[b]:a.config},setConfig:function(b,d){if("string"==typeof b)a.config[b]=d;else for(var c in b)a.setConfig(c,b[c]);return a},getHead:function(){return a.docHead||(a.docHead=c.head||c.getElementsByTagName("head")[0])},create:function(e,c,d){var b=d||{};return b.url=e,b.key=c,a.scripts[c]=new Entry(b)},getEntry:function(d,e){var c=a.canonicalUrl(d),b=a.scripts[c];return b=b||a.create(d,c,e)},registerContent:function(e,c,b){var d={content:b,loaded:!0,css:"css"===c};return a.getEntry(e,d)},processRequest:function(a,b){a.loadEntries(b)},load:function(b){return(b=new Request(b)).sync||a.syncMode?a.loadSync(b):(a.currentRequest?(b.getEntries(),a.suspendedQueue.push(b)):(a.currentRequest=b,a.processRequest(b,!1)),a)},loadSync:function(b){b=new Request(b);return a.syncMode++,a.processRequest(b,!0),a.syncMode--,a},loadBasePrefix:function(b){return(b=new Request(b)).prependBaseUrl=!0,a.load(b)},loadSyncBasePrefix:function(b){return(b=new Request(b)).prependBaseUrl=!0,a.loadSync(b)},requestComplete:function(c){var b;if(a.currentRequest===c)for(a.currentRequest=null;0<a.suspendedQueue.length;)if(!(b=a.suspendedQueue.shift()).done){a.load(b);break}a.currentRequest||0!=a.suspendedQueue.length||a.fireListeners()},isLoading:function(){return!a.currentRequest&&0==a.suspendedQueue.length},fireListeners:function(){for(var b;a.isLoading()&&(b=a.listeners.shift());)b()},onBootReady:function(b){a.isLoading()?a.listeners.push(b):b()},getPathsFromIndexes:function(b,a){return Request.prototype.getPathsFromIndexes(b,a)},createLoadOrderMap:function(a){return Request.prototype.createLoadOrderMap(a)},fetch:function(j,e,i,b){b=void 0===b?!!e:b;function d(){a&&4==a.readyState&&(h=1223===a.status?204:0!==a.status||"file:"!==(self.location||{}).protocol&&"ionp:"!==(self.location||{}).protocol?a.status:200,g=a.responseText,c={content:g,status:h,exception:f},e&&e.call(i,c),a=null)}var c,h,g,a=new XMLHttpRequest,f=!1;b&&(a.onreadystatechange=d);try{a.open("GET",j,b),a.send(null)}catch(o){return f=o,d(),c}return b||d(),c},notifyAll:function(a){a.notifyRequests()}};function Request(b){if(b.$isRequest)return b;var c=(b=b.url?b:{url:b}).url,f=c.charAt?[c]:c,e=b.charset||a.config.charset;d(b,{urls:f,charset:e}),d(this,b)}function Entry(b){if(b.$isEntry)return b;var c,i=b.charset||a.config.charset,h=Ext.manifest,f=h&&h.loader,e=void 0!==b.cache?b.cache:f&&f.cache;a.config.disableCaching&&(void 0===e&&(e=!a.config.disableCaching),!1===e?c=+new Date:!0!==e&&(c=e),c=c&&(f&&f.cacheParam||a.config.disableCachingParam)+"="+c),d(b,{charset:i,buster:c,requests:[]}),d(this,b)}return Entry.prototype={$isEntry:!0,done:!(Request.prototype={$isRequest:!0,createLoadOrderMap:function(d){var a,b,e=d.length,c={};for(a=0;a<e;a++)c[(b=d[a]).path]=b;return c},getLoadIndexes:function(h,b,l,o,p){var m,e,d,g,j,f,k,i,n,c=l[h];if(b[h])return b;for(j=!(b[h]=!0);!j;){for(k in f=!1,b)if(b.hasOwnProperty(k)){if(!(c=l[k]))continue;if(n=this.prepareUrl(c.path),g=a.getEntry(n),!p||!g||!g.done)for(d=c.requires,o&&c.uses&&(d=d.concat(c.uses)),m=d.length,e=0;e<m;e++)b[i=d[e]]||(f=b[i]=!0)}f||(j=!0)}return b},getPathsFromIndexes:function(d,g){var b,f,c,a=[],e=[];for(b in d)d.hasOwnProperty(b)&&d[b]&&a.push(b);for(a.sort(function(a,b){return a-b}),f=a.length,c=0;c<f;c++)e.push(g[a[c]].path);return e},expandUrl:function(a,f,i,j){"string"==typeof a&&(a=[a]);var b=this,e=b.loadOrder,d=b.loadOrderMap;if(e){d=d||b.createLoadOrderMap(e),b.loadOrderMap=d,f=f||{};var c,g,k=a.length,h=[];for(c=0;c<k;c++)(g=d[a[c]])?b.getLoadIndexes(g.idx,f,e,i,j):h.push(a[c]);return b.getPathsFromIndexes(f,e).concat(h)}return a},expandUrls:function(a,i){"string"==typeof a&&(a=[a]);var f,d,e,h,c,b=[],g={},j=a.length;for(d=0;d<j;d++)for(e=0,h=(f=this.expandUrl(a[d],{},i,!0)).length;e<h;e++)g[c=f[e]]||(g[c]=!0,b.push(c));return 0==b.length&&(b=a),b},expandLoadOrder:function(){var b,a=this,c=a.urls;return a.expanded?b=c:(b=this.expandUrls(c,!0),a.expanded=!0),a.urls=b,c.length!=b.length&&(a.sequential=!0),a},getUrls:function(){return this.expandLoadOrder(),this.urls},prepareUrl:function(b){return this.prependBaseUrl?a.baseUrl+b:b},getEntries:function(){var d,e,f,g,b=this,c=b.entries;if(!c){for(c=[],f=b.getUrls(),d=0;d<f.length;d++)g=b.prepareUrl(f[d]),(e=a.getEntry(g,{buster:b.buster,charset:b.charset})).requests.push(b),c.push(e);b.entries=c}return c},loadEntries:function(f){var e,b,a=this,d=a.getEntries(),g=d.length,h=a.loadStart||0;for(void 0!==f&&(a.sync=f),a.loaded=a.loaded||0,a.loading=a.loading||g,b=h;b<g;b++)if(!(!!(e=d[b]).loaded||d[b].load(a.sync))){a.loadStart=b,e.onDone(function(){a.loadEntries(f)});break}a.processLoadedEntries()},processLoadedEntries:function(){var c,b,a=this,d=a.getEntries(),f=d.length,e=a.startIndex||0;if(!a.done){for(c=e;c<f;c++){if(!(b=d[c]).loaded)return void(a.startIndex=c);b.evaluated||b.evaluate(),b.error&&(a.error=!0)}a.notify()}},notify:function(){var b=this;if(!b.done){var e=b.error,d=b[e?"failure":"success"],c="delay"in b?b.delay:e?1:a.config.chainDelay,f=b.scope||b;b.done=!0,d&&(0===c||0<c?setTimeout(function(){d.call(f,b)},c):d.call(f,b)),b.fireListeners(),a.requestComplete(b)}},onDone:function(b){var a=this,c=a.listeners||(a.listeners=[]);a.done?b(a):c.push(b)},fireListeners:function(){var b,a=this.listeners;if(a)for(;b=a.shift();)b(this)}}),evaluated:!1,loaded:!1,isCrossDomain:function(){var b=this;return void 0===b.crossDomain&&(b.crossDomain=0!==b.getLoadUrl().indexOf(a.origin)),b.crossDomain},isCss:function(){var b=this;if(void 0===b.css)if(b.url){var c=a.assetConfig[b.url];b.css=c?"css"===c.type:n.test(b.url)}else b.css=!1;return this.css},getElement:function(e){var d=this,b=d.el;return b||(d.isCss()?(e=e||"link",b=c.createElement(e),"link"==e?(b.rel="stylesheet",d.prop="href"):d.prop="textContent",b.type="text/css"):(e=e||"script",(b=c.createElement(e)).type="text/javascript",d.prop="src",d.charset&&(b.charset=d.charset),a.hasAsync&&(b.async=!1)),d.el=b),b},getLoadUrl:function(){var b=this,c=a.canonicalUrl(b.url);return b.loadUrl||(b.loadUrl=b.buster?c+(-1===c.indexOf("?")?"?":"&")+b.buster:c),b.loadUrl},fetch:function(b){var e=this.getLoadUrl(),d=!!b.async,c=b.complete;a.fetch(e,c,this,d)},onContentLoaded:function(c){var a=this,b=c.status,d=c.content,f=c.exception;this.getLoadUrl();a.loaded=!0,(!f&&0!==b||e.phantom)&&(200<=b&&b<300||304===b||e.phantom||0===b&&0<d.length)?a.content=d:(a.error=!0,a.evaluated=!0)},createLoadElement:function(b){var c=this,d=c.getElement();c.preserve=!0,d.onerror=function(){c.error=!0,b&&b()},a.hasReadyState?d.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||b&&b()}:d.onload=b,d[c.prop]=c.getLoadUrl()},onLoadElementReady:function(){a.getHead().appendChild(this.getElement()),this.evaluated=!0},inject:function(g,l){var b,e,j,i,f=this,d=a.getHead(),k=f.url,h=f.key;return f.isCss()?(f.preserve=!0,i=h.substring(0,h.lastIndexOf("/")+1),(b=c.createElement("base")).href=i,d.firstChild?d.insertBefore(b,d.firstChild):d.appendChild(b),b.href=b.href,k&&(g+="\n/*# sourceURL="+h+" */"),j="styleSheet"in(e=f.getElement("style")),d.appendChild(b),j?(d.appendChild(e),e.styleSheet.cssText=g):(e.textContent=g,d.appendChild(e)),d.removeChild(b)):(k&&(g+="\n//# sourceURL="+h),Ext.globalEval(g)),f},loadCrossDomain:function(){var a=this;return a.createLoadElement(function(){a.loaded=a.evaluated=a.done=!0,a.notifyRequests()}),a.evaluateLoadElement(),!1},loadElement:function(){var a=this;return a.createLoadElement(function(){a.loaded=a.evaluated=a.done=!0,a.notifyRequests()}),a.evaluateLoadElement(),!0},loadSync:function(){var a=this;a.fetch({async:!1,complete:function(b){a.onContentLoaded(b)}}),a.evaluate(),a.notifyRequests()},load:function(c){var b=this;if(!b.loaded){if(b.loading)return!1;if(b.loading=!0,c)b.loadSync();else{if(b.isCrossDomain())return b.loadCrossDomain();if(!b.isCss()&&a.hasReadyState)b.createLoadElement(function(){b.loaded=!0,b.notifyRequests()});else{if(!(!a.useElements||b.isCss()&&e.phantom))return b.loadElement();b.fetch({async:!c,complete:function(a){b.onContentLoaded(a),b.notifyRequests()}})}}}return!0},evaluateContent:function(){this.inject(this.content),this.content=null},evaluateLoadElement:function(){a.getHead().appendChild(this.getElement())},evaluate:function(){var a=this;if(!a.evaluated){if(a.evaluating)return;a.evaluating=!0,void 0!==a.content?a.evaluateContent():a.error||a.evaluateLoadElement(),a.evaluated=a.done=!0,a.cleanup()}},cleanup:function(){var b,c=this,a=c.el;if(a){if(!c.preserve)for(b in c.el=null,a.parentNode.removeChild(a),a)try{b!==c.prop&&(a[b]=null),delete a[b]}catch(o){}a.onload=a.onerror=a.onreadystatechange=m}},notifyRequests:function(){var a,b=this.requests,d=b.length;for(a=0;a<d;a++)b[a].processLoadedEntries();this.done&&this.fireListeners()},onDone:function(b){var a=this,c=a.listeners||(a.listeners=[]);a.done?b(a):c.push(b)},fireListeners:function(){var b,a=this.listeners;if(a&&0<a.length)for(;b=a.shift();)b(this)}},Ext.disableCacheBuster=function(b,d){var a=new Date;a.setTime(a.getTime()+24*(b?3650:-1)*60*60*1e3),a=a.toGMTString(),c.cookie="ext-cache=1; expires="+a+"; path="+(d||"/")},a.init(),a}(function(){}),Ext.globalEval=Ext.globalEval||(this.execScript?function(a){execScript(a)}:function(a){eval.call(window,a)}),Function.prototype.bind||function(){var a=Array.prototype.slice,b=function(d){var b=a.call(arguments,1),c=this;return b.length?function(){var e=arguments;return c.apply(d,e.length?b.concat(a.call(e)):b)}:(b=null,function(){return c.apply(d,arguments)})};(Function.prototype.bind=b).$extjs=!0}(),Ext.setResourcePath=function(b,d){var a=Ext.manifest||(Ext.manifest={}),c=a.resources||(a.resources={});a&&("string"!=typeof b?Ext.apply(c,b):c[b]=d,a.resources=c)},Ext.getResourcePath=function(b,f,d){"string"!=typeof b&&(f=b.pool,d=b.packageName,b=b.path);var e=Ext.manifest,g=e&&e.resources,a=g[f],c=[];return null==a&&null==(a=g.path)&&(a="resources"),a&&c.push(a),d&&c.push(d),c.push(b),c.join("/")};var Ext=Ext||{};!function(){function a(){}function f(){}function e(a){return a}var l,d=this,c=Object.prototype.toString,b=["valueOf","toLocaleString","toString","constructor"],g=function(){var a=g.caller.caller;return a.$owner.prototype[a.$name].apply(this,arguments)},k=Ext.manifest||{},i=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,j=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;for(l in Ext.global=d,Ext.now=Date.now||(Date.now=function(){return+new Date}),Ext.ticks=d.performance&&d.performance.now?function(){return performance.now()}:Ext.now,Ext._startTime=Ext.ticks(),a.$nullFn=e.$nullFn=a.$emptyFn=e.$identityFn=f.$nullFn=!0,f.$privacy="framework",Ext.suspendLayouts=Ext.resumeLayouts=a,{toString:1})b=null;function addInstanceOverrides(d,e,c){var a,b;for(a in c)c.hasOwnProperty(a)&&("function"==typeof(b=c[a])&&(b.$name=a,b.$owner=e,b.$previous=d.hasOwnProperty(a)?d[a]:g),d[a]=b)}Ext.enumerables=b,Ext.apply=function(c,a,g){if(g&&Ext.apply(c,g),c&&a&&"object"==typeof a){var e,f,d;for(e in a)c[e]=a[e];if(b)for(f=b.length;f--;)d=b[f],a.hasOwnProperty(d)&&(c[d]=a[d])}return c},Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{}),Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:!1,enableListenerCollection:!0,name:Ext.sandboxName||"Ext",privateFn:f,emptyFn:a,identityFn:e,frameStartTime:Ext.now(),manifest:k,enableAria:!0,enableAriaButtons:!0,enableAriaPanels:!0,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",makeIdSelector:function(a){return"#"+a},id:function(a,c){if(a&&a.id)return a.id;var b=(c||Ext.idPrefix)+ ++Ext.idSeed;return a&&(a.id=b),b},returnId:function(a){return a.getId()},returnTrue:function(){return!0},emptyString:new String,baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(Moz.+|MS.+|webkit.+)/,canonicalEventName:function(a){return Ext.$eventNameMap[a]||(Ext.$eventNameMap[a]=Ext.$vendorEventRe.test(a)?a:a.toLowerCase())},applyIf:function(b,c){var a;if(b)for(a in c)void 0===b[a]&&(b[a]=c[a]);return b},destroy:function(){var b,a,c=arguments.length;for(b=0;b<c;b++)(a=arguments[b])&&(Ext.isArray(a)?this.destroy.apply(this,a):Ext.isFunction(a.destroy)&&a.destroy());return null},destroyMembers:function(c){for(var a,d,b=1,e=arguments,f=e.length;b<f;b++)null!=(a=c[d=e[b]])&&(c[d]=Ext.destroy(a))},override:function(a,b){if(a.$isClass)a.override(b);else if("function"==typeof a)Ext.apply(a.prototype,b);else{var d,c=a.self;c&&c.$isClass?((d=b.privates)&&(delete(b=Ext.apply({},b)).privates,addInstanceOverrides(a,c,d)),addInstanceOverrides(a,c,b)):Ext.apply(a,b)}return a},valueFrom:function(a,b,c){return Ext.isEmpty(a,c)?b:a},isEmpty:function(a,b){return null==a||!b&&""===a||Ext.isArray(a)&&0===a.length},isArray:"isArray"in Array?Array.isArray:function(a){return"[object Array]"===c.call(a)},isDate:function(a){return"[object Date]"===c.call(a)},isMSDate:function(a){return!!Ext.isString(a)&&j.test(a)},isObject:"[object Object]"===c.call(null)?function(a){return null!=a&&"[object Object]"===c.call(a)&&void 0===a.ownerDocument}:function(a){return"[object Object]"===c.call(a)},isSimpleObject:function(a){return a instanceof Object&&a.constructor===Object},isPrimitive:function(b){var a=typeof b;return"string"==a||"number"==a||"boolean"==a},isFunction:"undefined"!=typeof document&&"function"==typeof document.getElementsByTagName("body")?function(a){return!!a&&"[object Function]"===c.call(a)}:function(a){return!!a&&"function"==typeof a},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isString:function(a){return"string"==typeof a},isBoolean:function(a){return"boolean"==typeof a},isElement:function(a){return!!a&&1===a.nodeType},isTextNode:function(a){return!!a&&"#text"===a.nodeName},isDefined:function(a){return void 0!==a},isIterable:function(a){return!(!a||"number"!=typeof a.length||"string"==typeof a||Ext.isFunction(a))&&(a.propertyIsEnumerable?!(!a.hasOwnProperty("length")||a.propertyIsEnumerable("length"))||i.test(c.call(a)):!!a.item)},isDebugEnabled:a,clone:function(a){if(null==a)return a;if(a.nodeType&&a.cloneNode)return a.cloneNode(!0);var e,i,f,d,h,g=c.call(a);if("[object Date]"===g)return new Date(a.getTime());if("[object Array]"===g)for(e=a.length,d=[];e--;)d[e]=Ext.clone(a[e]);else if("[object Object]"===g&&a.constructor===Object){for(h in d={},a)d[h]=Ext.clone(a[h]);if(b)for(i=b.length;i--;)f=b[i],a.hasOwnProperty(f)&&(d[f]=a[f])}return d||a},getUniqueGlobalNamespace:function(){var b,a=this.uniqueGlobalNamespace;if(void 0===a){for(b=0;a="ExtBox"+ ++b,void 0!==d[a];);d[a]=Ext,this.uniqueGlobalNamespace=a}return a},functionFactoryCache:{},cacheableFunctionFactory:function(){var d,b,c,a=Array.prototype.slice.call(arguments),e=this.functionFactoryCache;return Ext.isSandboxed&&0<(c=a.length)&&(a[--c]="var Ext=window."+Ext.name+";"+a[c]),(b=e[d=a.join("")])||(b=Function.prototype.constructor.apply(Function.prototype,a),e[d]=b),b},functionFactory:function(){var a,b=Array.prototype.slice.call(arguments);return Ext.isSandboxed&&0<(a=b.length)&&(b[--a]="var Ext=window."+Ext.name+";"+b[a]),Function.prototype.constructor.apply(Function.prototype,b)},Logger:{log:function(b,a){b&&d.console&&(a&&a in d.console||(a="log"),b="["+a.toUpperCase()+"] "+b,d.console[a](b))},verbose:function(a){this.log(a,"verbose")},info:function(a){this.log(a,"info")},warn:function(a){this.log(a,"warn")},error:function(a){throw new Error(a)},deprecate:function(a){this.log(a,"warn")}},getElementById:function(a){return document.getElementById(a)},splitAndUnescape:function(){var a={};return function(e,c){if(!e)return[];if(!c)return[e];var d,b,g=a[c]||(a[c]=new RegExp("\\\\"+c,"g")),f=[];for(d=e.split(c);void 0!==(b=d.shift());){for(;"\\"===b.charAt(b.length-1)&&0<d.length;)b=b+c+d.shift();b=b.replace(g,c),f.push(b)}return f}}()}),Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=!0}(),function(){function toString(){var d=this,b=d.sourceClass,a=d.sourceMethod,c=d.msg;return a&&(c?(a+="(): ",a+=c):a+="()"),b&&(a=a?b+"."+a:b),a||c||""}Ext.Error=function(b){Ext.isString(b)&&(b={msg:b});var a=new Error;return Ext.apply(a,b),a.message=a.message||a.msg,a.toString=toString,a},Ext.apply(Ext.Error,{ignore:!1,raise:function(a){a=a||{},Ext.isString(a)&&(a={msg:a});var c,b=this.raise.caller;if(b===Ext.raise&&(b=b.caller),b&&(!a.sourceMethod&&(c=b.$name)&&(a.sourceMethod=c),!a.sourceClass&&(c=b.$owner)&&(c=c.$className)&&(a.sourceClass=c)),!0!==this.handle(a))throw toString.call(a),new Ext.Error(a)},handle:function(){return this.ignore}})}(),Ext.deprecated=function(a){return Ext.emptyFn},Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)},Ext.Array=function(){var c=Array.prototype,b=c.slice,f=function(){var b,a=[],c=20;if(!a.splice)return!1;for(;c--;)a.push("A");return a.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F"),b=a.length,a.splice(13,0,"XXX"),b+1===a.length}(),i="indexOf"in c,h=!0;try{"undefined"!=typeof document&&b.call(document.getElementsByTagName("body"))}catch(q){h=!1}function g(b,a){return a<0?Math.max(0,b.length+a):Math.min(b.length,a)}var e=function(a,n,m,d){var e=d?d.length:0,i=a.length,f=g(a,n);if(f===i)e&&a.push.apply(a,d);else{var b,k=Math.min(m,i-f),c=f+k,h=c+e-k,l=i-c,j=i-k;if(h<c)for(b=0;b<l;++b)a[h+b]=a[c+b];else if(c<h)for(b=l;b--;)a[h+b]=a[c+b];if(e&&f===j)a.length=j,a.push.apply(a,d);else for(a.length=j+e,b=0;b<e;++b)a[f+b]=d[b]}return a},d=f?function(a,c,b){return a.splice(c,b),a}:function(b,c,a){return e(b,c,a)},j=f?function(a,c,d,b){return b&&b.length?0!==c||d?c<a.length?a.splice.apply(a,[c,d].concat(b)):a.push.apply(a,b):a.unshift.apply(a,b):a.splice(c,d),a}:e,p=f?function(a){return a.splice.apply(a,b.call(arguments,1))}:function(a,f,c){var d=g(a,f),h=a.slice(f,g(a,d+c));return arguments.length<4?e(a,d,c):e(a,d,c,b.call(arguments,3)),h},a={binarySearch:function(h,i,c,b,d){var e,f,g=h.length;for(c instanceof Function?(d=c,c=0,b=g):b instanceof Function?(d=b,b=g):(void 0===c&&(c=0),void 0===b&&(b=g),d=d||a.lexicalCompare),--b;c<=b;)0<=(f=d(i,h[e=c+b>>1]))?c=1+e:f<0&&(b=e-1);return c},defaultCompare:function(a,b){return a<b?-1:b<a?1:0},lexicalCompare:function(a,b){return(a=String(a))<(b=String(b))?-1:b<a?1:0},each:function(c,e,d,g){var b,f=(c=a.from(c)).length;if(!0!==g){for(b=0;b<f;b++)if(!1===e.call(d||c[b],c[b],b,c))return b}else for(b=f-1;-1<b;b--)if(!1===e.call(d||c[b],c[b],b,c))return b;return!0},forEach:"forEach"in c?function(a,c,b){return a.forEach(c,b)}:function(b,d,c){for(var a=0,e=b.length;a<e;a++)d.call(c,b[a],a,b)},indexOf:i?function(a,d,b){return c.indexOf.call(a,d,b)}:function(d,e,b){var a,c=d.length;for(a=b<0?Math.max(0,c+b):b||0;a<c;a++)if(d[a]===e)return a;return-1},contains:i?function(a,b){return-1!==c.indexOf.call(a,b)}:function(b,d){var a,c;for(a=0,c=b.length;a<c;a++)if(b[a]===d)return!0;return!1},toArray:function(a,d,c){if(!a||!a.length)return[];if("string"==typeof a&&(a=a.split("")),h)return b.call(a,d||0,c||a.length);var e,f=[];for(d=d||0,c=c?c<0?a.length+c:c:a.length,e=d;e<c;e++)f.push(a[e]);return f},pluck:function(b,f){var a,e,c,d=[];for(a=0,e=b.length;a<e;a++)c=b[a],d.push(c[f]);return d},map:"map"in c?function(a,c,b){return a.map(c,b)}:function(b,f,d){var a,c=[],e=b.length;for(a=0;a<e;a++)c[a]=f.call(d,b[a],a,b);return c},every:"every"in c?function(a,c,b){return a.every(c,b)}:function(b,d,c){for(var a=0,e=b.length;a<e;++a)if(!d.call(c,b[a],a,b))return!1;return!0},some:"some"in c?function(a,c,b){return a.some(c,b)}:function(b,d,c){for(var a=0,e=b.length;a<e;++a)if(d.call(c,b[a],a,b))return!0;return!1},equals:function(b,c){var a,d=b.length,e=c.length;if(b===c)return!0;if(d!==e)return!1;for(a=0;a<d;++a)if(b[a]!==c[a])return!1;return!0},clean:function(d){for(var a,c=[],b=0,e=d.length;b<e;b++)a=d[b],Ext.isEmpty(a)||c.push(a);return c},unique:function(e){for(var c,b=[],d=0,f=e.length;d<f;d++)c=e[d],-1===a.indexOf(b,c)&&b.push(c);return b},filter:"filter"in c?function(a,c,b){return a.filter(c,b)}:function(b,e,d){for(var c=[],a=0,f=b.length;a<f;a++)e.call(d,b[a],a,b)&&c.push(b[a]);return c},findBy:function(b,e,c){for(var a=0,d=b.length;a<d;a++)if(e.call(c||b,b[a],a))return b[a];return null},from:function(c,e){if(null==c)return[];if(Ext.isArray(c))return e?b.call(c):c;var d=typeof c;return!c||void 0===c.length||"string"==d||"function"==d&&c.apply?[c]:a.toArray(c)},remove:function(b,e){var c=a.indexOf(b,e);return-1!==c&&d(b,c,1),b},removeAt:function(c,b,a){var e=c.length;return 0<=b&&b<e&&(a=a||1,a=Math.min(a,e-b),d(c,b,a)),c},include:function(b,c){a.contains(b,c)||b.push(c)},clone:function(a){return b.call(a)},merge:function(){var c,f,e=b.call(arguments),d=[];for(c=0,f=e.length;c<f;c++)d=d.concat(e[c]);return a.unique(d)},intersect:function(){var g,o,r,e,k,j,q,n,l,c,h,i,m=[],f=b.call(arguments);if(!f.length)return m;for(g=f.length,c=k=0;c<g;c++)j=f[c],(!e||j.length<e.length)&&(e=j,k=c);for(e=a.unique(e),d(f,k,1),q=e.length,g=f.length,c=0;c<q;c++){for(n=e[c],h=l=0;h<g;h++)for(r=(o=f[h]).length,i=0;i<r;i++)if(n===o[i]){l++;break}l===g&&m.push(n)}return m},difference:function(i,f){var e,a,g,c=b.call(i),h=c.length;for(e=0,g=f.length;e<g;e++)for(a=0;a<h;a++)c[a]===f[e]&&(d(c,a,1),a--,h--);return c},reduce:Array.prototype.reduce?function(b,a,c){return 3===arguments.length?Array.prototype.reduce.call(b,a,c):Array.prototype.reduce.call(b,a)}:function(a,f,e){var b=0,d=(a=Object(a)).length>>>0,c=e;if(arguments.length<3)for(;;){if(b in a){c=a[b++];break}if(++b>=d)throw new TypeError("Reduce of empty array with no initial value")}for(;b<d;++b)b in a&&(c=f(c,a[b],b,a));return c},slice:[1,2].slice(1,void 0).length?function(a,c,d){return b.call(a,c,d)}:function(a,c,d){return void 0===c?b.call(a):void 0===d?b.call(a,c):b.call(a,c,d)},sort:function(c,b){return function(b,e){var a,d=b.length,c=new Array(d);for(a=0;a<d;a++)c[a]=a;for(c.sort(function(a,c){return e(b[a],b[c])||a-c}),a=0;a<d;a++)c[a]=b[c[a]];for(a=0;a<d;a++)b[a]=c[a];return b}(c,b||a.lexicalCompare)},flatten:function(b){var a=[];return function rFlatten(e){var b,d,c;for(b=0,d=e.length;b<d;b++)c=e[b],Ext.isArray(c)?rFlatten(c):a.push(c);return a}(b)},min:function(d,e){var c,f,a,b=d[0];for(c=0,f=d.length;c<f;c++)a=d[c],e?1===e(b,a)&&(b=a):a<b&&(b=a);return b},max:function(d,e){var c,f,a,b=d[0];for(c=0,f=d.length;c<f;c++)a=d[c],e?-1===e(b,a)&&(b=a):b<a&&(b=a);return b},mean:function(b){return 0<b.length?a.sum(b)/b.length:void 0},sum:function(b){var a,e,d=0;for(a=0,e=b.length;a<e;a++)d+=b[a];return d},toMap:function(c,b,e){var d={},a=c.length;if(b)if("string"==typeof b)for(;a--;)d[c[a][b]]=a+1;else for(;a--;)d[b.call(e,c[a])]=a+1;else for(;a--;)d[c[a]]=a+1;return d},toValueMap:function(g,d,k,f){var j,i,h,l,c,a,b={},e=g.length;if(d)for((l="string"!=typeof d)||(f=k),i=1===f,j=2===f;e--;)a=g[e],c=l?d.call(k,a):a[d],i?c in b?b[c].push(a):b[c]=[a]:j&&c in b?(h=b[c])instanceof Array?h.push(a):b[c]=[h,a]:b[c]=a;else for(;e--;)b[a=g[e]]=a;return b},erase:d,insert:function(a,b,c){return j(a,b,0,c)},move:function(c,b,d){if(d!==b){var a,f=c[b],e=b<d?1:-1;for(a=b;a!=d;a+=e)c[a]=c[a+e];c[d]=f}},replace:j,splice:p,push:function(a){var b,d=arguments.length,c=1;for(void 0===a?a=[]:Ext.isArray(a)||(a=[a]);c<d;c++)b=arguments[c],Array.prototype.push[Ext.isIterable(b)?"apply":"call"](a,b);return a},numericSortFn:function(a,b){return a-b}};return Ext.each=a.each,a.union=a.merge,Ext.min=a.min,Ext.max=a.max,Ext.sum=a.sum,Ext.mean=a.mean,Ext.flatten=a.flatten,Ext.clean=a.clean,Ext.unique=a.unique,Ext.pluck=a.pluck,Ext.toArray=function(){return a.toArray.apply(a,arguments)},a}(),Ext.String=function(){function h(b,a){return c[a]}function g(c,b){return b in a?a[b]:String.fromCharCode(parseInt(b.substr(2),10))}function e(b,a){return null!=b&&null!=a&&a.length<=b.length}var c,a,b,d,f,m=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,n=/('|\\)/g,i=/([-.*+?\^${}()|\[\]\/\\])/g,k=/^\s+|\s+$/g,j=/\s+/,l=/(^[^a-z]*|[^\w])/gi;return f={insert:function(b,c,a){if(!b)return c;if(!c)return b;var d=b.length;return a||0===a||(a=d),a<0&&(a=d<=(a*=-1)?0:d-a),0===a?b=c+b:a>=b.length?b+=c:b=b.substr(0,a)+c+b.substr(a),b},startsWith:function(b,a,d){var c=e(b,a);return c&&(d&&(b=b.toLowerCase(),a=a.toLowerCase()),c=0===b.lastIndexOf(a,0)),c},endsWith:function(b,a,d){var c=e(b,a);return c&&(d&&(b=b.toLowerCase(),a=a.toLowerCase()),c=-1!==b.indexOf(a,b.length-a.length)),c},createVarName:function(a){return a.replace(l,"")},htmlEncode:function(a){return a?String(a).replace(b,h):a},htmlDecode:function(a){return a?String(a).replace(d,g):a},hasHtmlCharacters:function(a){return b.test(a)},addCharacterEntities:function(g){var e,f,i=[],h=[];for(e in g)f=g[e],a[e]=f,c[f]=e,i.push(f),h.push(e);b=new RegExp("("+i.join("|")+")","g"),d=new RegExp("("+h.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){c={},a={},this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(a,b){return Ext.isEmpty(b)?a:a+(-1===a.indexOf("?")?"?":"&")+b},trim:function(a){return(a=a&&a.replace(m,""))||""},capitalize:function(a){return(a=a&&a.charAt(0).toUpperCase()+a.substr(1))||""},uncapitalize:function(a){return(a=a&&a.charAt(0).toLowerCase()+a.substr(1))||""},ellipsis:function(a,c,e){if(a&&a.length>c){if(e){var b=a.substr(0,c-2),d=Math.max(b.lastIndexOf(" "),b.lastIndexOf("."),b.lastIndexOf("!"),b.lastIndexOf("?"));if(-1!==d&&c-15<=d)return b.substr(0,d)+"..."}return a.substr(0,c-3)+"..."}return a},escapeRegex:function(a){return a.replace(i,"\\$1")},createRegex:function(b,d,e,c){var a=b;return null==b||b.exec||(a=f.escapeRegex(String(b)),!1!==d&&(a="^"+a),!1!==e&&(a+="$"),a=new RegExp(a,!1!==c?"i":"")),a},escape:function(a){return a.replace(n,"\\$1")},toggle:function(b,a,c){return b===a?c:a},leftPad:function(c,d,b){var a=String(c);for(b=b||" ";a.length<d;)a=b+a;return a},repeat:function(c,a,d){a<1&&(a=0);for(var b=[],e=a;e--;)b.push(c);return b.join(d||"")},splitWords:function(a){return a&&"string"==typeof a?a.replace(k,"").split(j):a||[]}}}(),Ext.String.resetCharacterEntities(),Ext.htmlEncode=Ext.String.htmlEncode,Ext.htmlDecode=Ext.String.htmlDecode,Ext.urlAppend=Ext.String.urlAppend,Ext.Date=function(){var a,b=Date,d=/(\\.)/g,h=/([gGhHisucUOPZ]|MS)/,g=/([djzmnYycU]|MS)/,i=/\\/gi,e=/\{(\d+)\}/g,f=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),c=Ext.String.leftPad,j=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return (v != null) ? v : null;"].join("\n");function xf(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(e,function(c,a){return b[a]})}return Date.prototype.toISOString||(Date.prototype.toISOString=function(){var a=this;return c(a.getUTCFullYear(),4,"0")+"-"+c(a.getUTCMonth()+1,2,"0")+"-"+c(a.getUTCDate(),2,"0")+"T"+c(a.getUTCHours(),2,"0")+":"+c(a.getUTCMinutes(),2,"0")+":"+c(a.getUTCSeconds(),2,"0")+"."+c(a.getUTCMilliseconds(),3,"0")+"Z"}),a={now:b.now,toString:function(a){return(a=a||new b).getFullYear()+"-"+c(a.getMonth()+1,2,"0")+"-"+c(a.getDate(),2,"0")+"T"+c(a.getHours(),2,"0")+":"+c(a.getMinutes(),2,"0")+":"+c(a.getSeconds(),2,"0")},getElapsed:function(b,c){return Math.abs(b-(c||a.now()))},useStrict:!1,formatCodeToRegex:function(c,d){var b=a.parseCodes[c];return b&&(b="function"==typeof b?b():b,a.parseCodes[c]=b),b?Ext.applyIf({c:b.c?xf(b.c,d||"{0}"):b.c},b):{g:0,c:null,s:Ext.String.escapeRegex(c)}},parseFunctions:{MS:function(c,d){var a=(c||"").match(f);return a?new b(+((a[1]||"")+a[2])):null},time:function(c,d){var a=parseInt(c,10);return a||0===a?new b(a):null},timestamp:function(c,d){var a=parseInt(c,10);return a||0===a?new b(1e3*a):null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return a.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(b){return a.monthNames[b].substring(0,3)},getShortDayName:function(b){return a.dayNames[b].substring(0,3)},getMonthNumber:function(b){return a.monthNumbers[b.substring(0,1).toUpperCase()+b.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(a){return h.test(a.replace(d,""))},formatContainsDateInfo:function(a){return g.test(a.replace(d,""))},unescapeFormat:function(a){return a.replace(i,"")},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(m.getDay())",j:"m.getDate()",l:"Ext.Date.dayNames[m.getDay()]",N:"(m.getDay() ? m.getDay() : 7)",S:"Ext.Date.getSuffix(m)",w:"m.getDay()",z:"Ext.Date.getDayOfYear(m)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:"Ext.Date.monthNames[m.getMonth()]",m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(m.getMonth())",n:"(m.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(m)",L:"(Ext.Date.isLeapYear(m) ? 1 : 0)",o:"(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:"((m.getHours() % 12) ? m.getHours() % 12 : 12)",G:"m.getHours()",h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(m)",P:"Ext.Date.getGMTOffset(m, true)",T:"Ext.Date.getTimezone(m)",Z:"(m.getTimezoneOffset() * -60)",c:function(){var b,c,e="Y-m-dTH:i:sP",d=[],f=e.length;for(b=0;b<f;++b)c=e.charAt(b),d.push("T"===c?"'T'":a.getFormatCode(c));return d.join(" + ")},C:function(){return"m.toISOString()"},U:"Math.round(m.getTime() / 1000)"},isValid:function(d,j,i,f,g,h,e){f=f||0,g=g||0,h=h||0,e=e||0;var c=a.add(new b(d<100?100:d,j-1,i,f,g,h,e),a.YEAR,d<100?d-100:0);return d===c.getFullYear()&&j===c.getMonth()+1&&i===c.getDate()&&f===c.getHours()&&g===c.getMinutes()&&h===c.getSeconds()&&e===c.getMilliseconds()},parse:function(e,b,c){var d=a.parseFunctions;return null==d[b]&&a.createParser(b),d[b].call(a,e,Ext.isDefined(c)?c:a.useStrict)},parseDate:function(d,b,c){return a.parse(d,b,c)},getFormatCode:function(c){var b=a.formatCodes[c];return b&&(b="function"==typeof b?b():b,a.formatCodes[c]=b),b||"'"+Ext.String.escape(c)+"'"},createFormat:function(f){var e,d=[],c=!1,b="";for(e=0;e<f.length;++e)b=f.charAt(e),c||"\\"!==b?c?(c=!1,d.push("'"+Ext.String.escape(b)+"'")):"\n"===b?d.push("'\\n'"):d.push(a.getFormatCode(b)):c=!0;a.formatFunctions[f]=Ext.functionFactory("var m=this;return "+d.join("+"))},createParser:function(f){for(var b,k=a.parseRegexes.length,i=1,d=[],g=[],c=!1,e="",h=0,m=f.length,l=[];h<m;++h)e=f.charAt(h),c||"\\"!==e?c?(c=!1,g.push(Ext.String.escape(e))):(i+=(b=a.formatCodeToRegex(e,i)).g,g.push(b.s),b.g&&b.c&&(b.calcAtEnd?l.push(b.c):d.push(b.c))):c=!0;d=d.concat(l),a.parseRegexes[k]=new RegExp("^"+g.join("")+"$","i"),a.parseFunctions[f]=Ext.functionFactory("input","strict",xf(j,k,d.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var c=[],b=0;b<7;c.push(a.getShortDayName(b)),++b);return{g:0,c:null,s:"(?:"+c.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+a.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+a.monthNames.join("|")+")"}},M:function(){for(var c=[],b=0;b<12;c.push(a.getShortMonthName(b)),++b);return Ext.applyIf({s:"("+c.join("|")+")"},a.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:!0},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:!0},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var c,e,d=[],b=[a.formatCodeToRegex("Y",1),a.formatCodeToRegex("m",2),a.formatCodeToRegex("d",3),a.formatCodeToRegex("H",4),a.formatCodeToRegex("i",5),a.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",a.formatCodeToRegex("P",8).c,"}else{",a.formatCodeToRegex("O",8).c,"}","}"].join("\n")}];for(c=0,e=b.length;c<e;++c)d.push(b[c].c);return{g:1,c:d.join(""),s:[b[0].s,"(?:","-",b[1].s,"(?:","-",b[2].s,"(?:","(?:T| )?",b[3].s,":",b[4].s,"(?::",b[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(c,b){return a.format(c,b)},isEqual:function(a,b){return a&&b?a.getTime()===b.getTime():!(a||b)},format:function(d,b){var c=a.formatFunctions;return Ext.isDate(d)?(null==c[b]&&a.createFormat(b),c[b].call(d)+""):""},getTimezone:function(a){return a.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(c,b){var a=c.getTimezoneOffset();return(0<a?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(a)/60),2,"0")+(b?":":"")+Ext.String.leftPad(Math.abs(a%60),2,"0")},getDayOfYear:function(c){var d,e=0,b=a.clone(c),f=c.getMonth();for(d=0,b.setDate(1),b.setMonth(0);d<f;b.setMonth(++d))e+=a.getDaysInMonth(b);return e+c.getDate()-1},getWeekOfYear:function(){var c=6048e5;return function(d){var f=b.UTC(d.getFullYear(),d.getMonth(),d.getDate()+3)/864e5,e=Math.floor(f/7),g=new b(e*c).getUTCFullYear();return e-Math.floor(b.UTC(g,0,7)/c)+1}}(),isLeapYear:function(b){var a=b.getFullYear();return!(0!=(3&a)||!(a%100||a%400==0&&a))},getFirstDayOfMonth:function(b){var a=(b.getDay()-(b.getDate()-1))%7;return a<0?7+a:a},getLastDayOfMonth:function(b){return a.getLastDateOfMonth(b).getDay()},getFirstDateOfMonth:function(a){return new b(a.getFullYear(),a.getMonth(),1)},getLastDateOfMonth:function(c){return new b(c.getFullYear(),c.getMonth(),a.getDaysInMonth(c))},getDaysInMonth:function(){var b=[31,28,31,30,31,30,31,31,30,31,30,31];return function(c){var d=c.getMonth();return 1===d&&a.isLeapYear(c)?29:b[d]}}(),getSuffix:function(a){switch(a.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(a){return new b(a.getTime())},isDST:function(a){return new b(a.getFullYear(),0,1).getTimezoneOffset()!==a.getTimezoneOffset()},clearTime:function(b,f){if(isNaN(b.getTime()))return b;if(f)return a.clearTime(a.clone(b));var c,d,e=b.getDate();if(b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0),b.getDate()!==e){for(c=1,d=a.add(b,a.HOUR,c);d.getDate()!==e;c++,d=a.add(b,a.HOUR,c));b.setDate(e),b.setHours(d.getHours())}return b},add:function(f,h,c){var d,g,b=a.clone(f),e=0;if(!h||0===c)return b;if(g=c-parseInt(c,10),c=parseInt(c,10))switch(h.toLowerCase()){case a.MILLI:b.setTime(b.getTime()+c);break;case a.SECOND:b.setTime(b.getTime()+1e3*c);break;case a.MINUTE:b.setTime(b.getTime()+60*c*1e3);break;case a.HOUR:b.setTime(b.getTime()+60*c*60*1e3);break;case a.DAY:b.setDate(b.getDate()+c);break;case a.MONTH:28<(d=f.getDate())&&(d=Math.min(d,a.getLastDateOfMonth(a.add(a.getFirstDateOfMonth(f),a.MONTH,c)).getDate())),b.setDate(d),b.setMonth(f.getMonth()+c);break;case a.YEAR:28<(d=f.getDate())&&(d=Math.min(d,a.getLastDateOfMonth(a.add(a.getFirstDateOfMonth(f),a.YEAR,c)).getDate())),b.setDate(d),b.setFullYear(f.getFullYear()+c)}if(g){switch(h.toLowerCase()){case a.MILLI:e=1;break;case a.SECOND:e=1e3;break;case a.MINUTE:e=6e4;break;case a.HOUR:e=36e5;break;case a.DAY:e=864e5;break;case a.MONTH:e=864e5*(d=a.getDaysInMonth(b));break;case a.YEAR:e=864e5*(d=a.isLeapYear(b)?366:365)}e&&b.setTime(b.getTime()+e*g)}return b},subtract:function(d,b,c){return a.add(d,b,-c)},between:function(c,b,d){var a=c.getTime();return b.getTime()<=a&&a<=d.getTime()},compat:function(){var c,f,e,d,g=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],h=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],j=g.length,i=h.length;for(d=0;d<j;d++)b[f=g[d]]=a[f];for(c=0;c<i;c++)e=h[c],b.prototype[e]=function(){var b=Array.prototype.slice.call(arguments);return b.unshift(this),a[e].apply(a,b)}},diff:function(e,d,f){var b,c=d-e;switch(f){case a.MILLI:return c;case a.SECOND:return Math.floor(c/1e3);case a.MINUTE:return Math.floor(c/6e4);case a.HOUR:return Math.floor(c/36e5);case a.DAY:return Math.floor(c/864e5);case"w":return Math.floor(c/6048e5);case a.MONTH:return b=12*d.getFullYear()+d.getMonth()-(12*e.getFullYear()+e.getMonth()),a.add(e,f,b)>d?b-1:b;case a.YEAR:return b=d.getFullYear()-e.getFullYear(),a.add(e,f,b)>d?b-1:b}},align:function(e,f,d){var c=new b(+e);switch(f.toLowerCase()){case a.MILLI:return c;case a.SECOND:return c.setUTCSeconds(c.getUTCSeconds()-c.getUTCSeconds()%d),c.setUTCMilliseconds(0),c;case a.MINUTE:return c.setUTCMinutes(c.getUTCMinutes()-c.getUTCMinutes()%d),c.setUTCSeconds(0),c.setUTCMilliseconds(0),c;case a.HOUR:return c.setUTCHours(c.getUTCHours()-c.getUTCHours()%d),c.setUTCMinutes(0),c.setUTCSeconds(0),c.setUTCMilliseconds(0),c;case a.DAY:return 7!==d&&14!==d||c.setUTCDate(c.getUTCDate()-c.getUTCDay()+1),c.setUTCHours(0),c.setUTCMinutes(0),c.setUTCSeconds(0),c.setUTCMilliseconds(0),c;case a.MONTH:return c.setUTCMonth(c.getUTCMonth()-(c.getUTCMonth()-1)%d,1),c.setUTCHours(0),c.setUTCMinutes(0),c.setUTCSeconds(0),c.setUTCMilliseconds(0),c;case a.YEAR:return c.setUTCFullYear(c.getUTCFullYear()-c.getUTCFullYear()%d,1,1),c.setUTCHours(0),c.setUTCMinutes(0),c.setUTCSeconds(0),c.setUTCMilliseconds(0),e}}}}(),function(){function b(){}var d=/^\?/,f=/(\[):?([^\]]*)\]/g,e=/^([^\[]+)/,c=/\+/g,a=Ext.Object={chain:Object.create||function(a){b.prototype=a;var c=new b;return b.prototype=null,c},clear:function(a){for(var b in a)delete a[b];return a},freeze:Object.freeze?function(b,c){if(b&&"object"==typeof b&&!Object.isFrozen(b)&&(Object.freeze(b),c))for(var d in b)a.freeze(b[d],c);return b}:Ext.identityFn,toQueryObjects:function(e,c,f){var b,h,g=a.toQueryObjects,d=[];if(Ext.isArray(c))for(b=0,h=c.length;b<h;b++)f?d=d.concat(g(e+"["+b+"]",c[b],!0)):d.push({name:e,value:c[b]});else if(Ext.isObject(c))for(b in c)c.hasOwnProperty(b)&&(f?d=d.concat(g(e+"["+b+"]",c[b],!0)):d.push({name:e,value:c[b]}));else d.push({name:e,value:c});return d},toQueryString:function(g,j){var d,e,i,f,b,c=[],h=[];for(d in g)g.hasOwnProperty(d)&&(c=c.concat(a.toQueryObjects(d,g[d],j)));for(e=0,i=c.length;e<i;e++)b=(f=c[e]).value,Ext.isEmpty(b)?b="":Ext.isDate(b)&&(b=Ext.Date.toString(b)),h.push(encodeURIComponent(f.name)+"="+encodeURIComponent(String(b)));return h.join("&")},fromQueryString:function(u,v){var j,o,a,g,n,t,q,h,l,m,k,b,p,s=u.replace(d,"").split("&"),i={};for(n=0,t=s.length;n<t;n++)if(0<(q=s[n]).length)if(a=(a=(o=q.split("="))[0]).replace(c,"%20"),a=decodeURIComponent(a),g=void 0!==(g=o[1])?(g=g.replace(c,"%20"),decodeURIComponent(g)):"",v){if(m=a.match(f),a=a.match(e)[0],k=[],null===m){i[a]=g;continue}for(h=0,l=m.length;h<l;h++)b=2===(b=m[h]).length?"":b.substring(1,b.length-1),k.push(b);for(k.unshift(a),j=i,h=0,l=k.length;h<l;h++)b=k[h],h===l-1?Ext.isArray(j)&&""===b?j.push(g):j[b]=g:(void 0!==j[b]&&"string"!=typeof j[b]||(p=k[h+1],j[b]=Ext.isNumeric(p)||""===p?[]:{}),j=j[b])}else i.hasOwnProperty(a)?(Ext.isArray(i[a])||(i[a]=[i[a]]),i[a].push(g)):i[a]=g;return i},each:function(a,f,c){var e,b,d=Ext.enumerables;if(a){for(b in c=c||a,a)if(a.hasOwnProperty(b)&&!1===f.call(c,b,a[b],a))return;if(d)for(e=d.length;e--;)if(a.hasOwnProperty(b=d[e])&&!1===f.call(c,b,a[b],a))return}},eachValue:function(a,f,c){var e,b,d=Ext.enumerables;for(b in c=c||a,a)if(a.hasOwnProperty(b)&&!1===f.call(c,a[b]))return;if(d)for(e=d.length;e--;)if(a.hasOwnProperty(b=d[e])&&!1===f.call(c,a[b]))return},merge:function(d){for(var f,c,b,e,g=1,j=arguments.length,i=a.merge,h=Ext.clone;g<j;g++)for(c in f=arguments[g])(b=f[c])&&b.constructor===Object?(e=d[c])&&e.constructor===Object?i(e,b):d[c]=h(b):d[c]=b;return d},mergeIf:function(c){for(var d,b,a,e=1,g=arguments.length,f=Ext.clone;e<g;e++)for(b in d=arguments[e])b in c||((a=d[b])&&a.constructor===Object?c[b]=f(a):c[b]=a);return c},getAllKeys:function(c){var a,b=[];for(a in c)b.push(a);return b},getKey:function(b,c){for(var a in b)if(b.hasOwnProperty(a)&&b[a]===c)return a;return null},getValues:function(b){var a,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(b[a]);return c},getKeys:"function"==typeof Object.keys?function(a){return a?Object.keys(a):[]}:function(b){var a,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(a);return c},getSize:function(b){var a,c=0;for(a in b)b.hasOwnProperty(a)&&c++;return c},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},equals:function(){var a=function(b,c){var a;for(a in b)if(b.hasOwnProperty(a)&&b[a]!==c[a])return!1;return!0};return function(b,c){return b===c||(b&&c?a(b,c)&&a(c,b):!b&&!c&&b===c)}}(),fork:function(c){var d,e,b;if(c&&c.constructor===Object)for(e in d=a.chain(c),c)(b=c[e])&&(b.constructor===Object?d[e]=a.fork(b):b instanceof Array&&(d[e]=Ext.Array.clone(b)));else d=c;return d},defineProperty:"defineProperty"in Object?Object.defineProperty:function(b,c,a){Object.prototype.__defineGetter__&&(a.get&&b.__defineGetter__(c,a.get),a.set&&b.__defineSetter__(c,a.set))},classify:function(c){function g(){for(var a,b=0,c=e.length;b<c;b++)this[a=e[b]]=new f[a]}var b,d,h=c,e=[],f={};for(b in c)c.hasOwnProperty(b)&&(d=c[b])&&d.constructor===Object&&(e.push(b),f[b]=a.classify(d));return g.prototype=h,g}};Ext.merge=Ext.Object.merge,Ext.mergeIf=Ext.Object.mergeIf}(),function(){var a,b=[""],c=/([^\d\.])/,f=/[^\d]/g,g=/[\-+]/g,h=/\s/g,e=/_/g,d={classic:1,modern:1};Ext.Version=a=function(k,p){var o,m,d,h,j,l,i,b=this,n=b.padModes;k.isVersion&&(k=k.version),b.version=i=String(k).toLowerCase().replace(e,".").replace(g,""),d=(o=i.charAt(0))in n?(i=i.substring(1),n[o]):p?n[p]:0,b.pad=d,l=i.search(c),b.shortVersion=i,-1!==l&&(b.release=j=i.substr(l,k.length),b.shortVersion=i.substr(0,l),j=a.releaseValueMap[j]||j),b.releaseValue=j||d,b.shortVersion=b.shortVersion.replace(f,""),b.parts=h=i.split(".");for(m=h.length;m--;)h[m]=parseInt(h[m],10);return d===1/0&&h.push(d),b.major=h[0]||d,b.minor=h[1]||d,b.patch=h[2]||d,b.build=h[3]||d,b},a.prototype={isVersion:!0,padModes:{"~":NaN,"^":1/0},release:"",compareTo:function(f){var b,c,d,g=this,m=g.pad,j=g.parts,h=j.length,e=f.isVersion?f:new a(f),n=e.pad,k=e.parts,i=k.length,l=Math.max(h,i);for(b=0;b<l;b++){if((c=b<h?j[b]:m)<(d=b<i?k[b]:n))return-1;if(d<c)return 1}return(c=g.releaseValue)<(d=e.releaseValue)?-1:d<c?1:0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(a){return 0<this.compareTo(a)},isGreaterThanOrEqual:function(a){return 0<=this.compareTo(a)},isLessThan:function(a){return this.compareTo(a)<0},isLessThanOrEqual:function(a){return this.compareTo(a)<=0},equals:function(a){return 0===this.compareTo(a)},match:function(a){return a=String(a),this.version.substr(0,a.length)===a},toArray:function(){var a=this;return[a.getMajor(),a.getMinor(),a.getPatch(),a.getBuild(),a.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(a){return 0<this.compareTo(a)},lt:function(a){return this.compareTo(a)<0},gtEq:function(a){return 0<=this.compareTo(a)},ltEq:function(a){return this.compareTo(a)<=0}},Ext.apply(a,{aliases:{from:{extjs:"ext",core:"core",touch:"modern"},to:{ext:["extjs"],core:["core"],modern:["touch"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(a){return a?isNaN(a)?this.releaseValueMap[a]||a:parseInt(a,10):0},compare:function(b,c){return(b.isVersion?b:new a(b)).compareTo(c)},set:function(g,f,c){var e,b=a.aliases.to[f],d=c.isVersion?c:new a(c);if(g[f]=d,b)for(e=b.length;0<e--;)g[b[e]]=d;return d}}),Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(b){var c=Ext.compatVersions;return(b?c[a.aliases.from[b]||b]:c.ext||c.touch||c.core)||Ext.getVersion(b)},setCompatVersion:function(b,c){a.set(Ext.compatVersions,b,c)},setVersion:function(b,c){return b in d&&(Ext.toolkit=b),Ext.lastRegisteredVersion=a.set(Ext.versions,b,c),this},getVersion:function(c){var b=Ext.versions;return c?b[a.aliases.from[c]||c]:b.ext||b.touch||b.core},checkVersion:function(o,j){var l,c,f,i,g,m,d,e,k,p=Ext.isArray(o),s=a.aliases.from,q=p?o:b,t=q.length,n=Ext.versions,r=n.ext||n.touch;for(p||(b[0]=o),l=0;l<t;++l){if(Ext.isString(d=q[l])){if(0<=d.indexOf(" ")&&(d=d.replace(h,"")),(c=d.indexOf("@"))<0)e=d,k=r;else{if(!(k=n[s[m=d.substring(0,c)]||m])){if(j)return!1;continue}e=d.substring(c+1)}(c=e.indexOf("-"))<0?"+"===e.charAt(c=e.length-1)?(i=e.substring(0,c),g=null):i=g=e:g=(i=0<c?e.substring(0,c):null,e.substring(c+1)),f=!0,i&&(f=(i=new a(i,"~")).ltEq(k)),f&&g&&(f=(g=new a(g,"~")).gtEq(k))}else f=Ext.checkVersion(d.and||d.or,!d.or),d.not&&(f=!f);if(f){if(!j)return!0}else if(j)return!1}return!!j},deprecate:function(b,e,c,d){a.compare(Ext.getVersion(b),e)<1&&c.call(d)}})}(),function(c){var a,e,d=c&&c.packages||{},b=c&&c.compatibility;for(a in d)e=d[a],Ext.setVersion(a,e.version);if(b)if(Ext.isString(b))Ext.setCompatVersion("core",b);else for(a in b)Ext.setCompatVersion(a,b[a]);d.ext||d.touch||(Ext.setVersion("ext","6.0.1.250"),Ext.setVersion("core","6.0.1.250"))}(Ext.manifest),(Ext.env||(Ext.env={})).Browser=function(e,r){var d,o,b,h,u,n=this,s=Ext.Boot.browserPrefixes,j=Ext.Boot.browserNames,t=n.enginePrefixes,k=n.engineNames,i=e.match(new RegExp("((?:"+Ext.Object.getValues(s).join(")|(?:")+"))([\\w\\._]+)")),p=e.match(new RegExp("((?:"+Ext.Object.getValues(t).join(")|(?:")+"))([\\w\\._]+)")),c=j.other,g=k.other,f="",l="",a="",q=!1;if(n.userAgent=e,/Edge\//.test(e)&&(i=e.match(/(Edge\/)([\w.]+)/)),i&&("Safari"===(c=j[Ext.Object.getKey(s,i[1])])&&/^Opera/.test(e)&&(c="Opera"),f=new Ext.Version(i[2])),p&&(g=k[Ext.Object.getKey(t,p[1])],l=new Ext.Version(p[2])),"Trident"===g&&"IE"!==c){c="IE";var m=e.match(/.*rv:(\d+.\d+)/);m&&m.length&&(m=m[1],f=new Ext.Version(m))}if(c&&f&&Ext.setVersion(c,f),e.match(/FB/)&&"Other"===c&&(c=j.safari,g=k.webkit),e.match(/Android.*Chrome/g)&&(c="ChromeMobile"),e.match(/OPR/)&&(c="Opera",i=e.match(/OPR\/(\d+.\d+)/),f=new Ext.Version(i[1])),Ext.apply(this,{engineName:g,engineVersion:l,name:c,version:f}),this.setFlag(c,!0,r),f){if(a=f.getMajor()||"",n.is.IE)for(a=parseInt(a,10),7===(b=document.documentMode)||7===a&&8!==b&&9!==b&&10!==b?a=7:8===b||8===a&&8!==b&&9!==b&&10!==b?a=8:9===b||9===a&&7!==b&&8!==b&&10!==b?a=9:10===b||10===a&&7!==b&&8!==b&&9!==b?a=10:(11===b||11===a&&7!==b&&8!==b&&9!==b&&10!==b)&&(a=11),u=Math.max(a,Ext.Boot.maxIEVersion),d=7;d<=u;++d)o="isIE"+d,a<=d&&(Ext[o+"m"]=!0),a===d&&(Ext[o]=!0),d<=a&&(Ext[o+"p"]=!0);n.is.Opera&&parseInt(a,10)<=12&&(Ext.isOpera12m=!0),Ext.chromeVersion=Ext.isChrome?a:0,Ext.firefoxVersion=Ext.isFirefox?a:0,Ext.ieVersion=Ext.isIE?a:0,Ext.operaVersion=Ext.isOpera?a:0,Ext.safariVersion=Ext.isSafari?a:0,Ext.webKitVersion=Ext.isWebKit?a:0,this.setFlag(c+a,!0,r),this.setFlag(c+f.getShortVersion())}for(d in j)j.hasOwnProperty(d)&&(h=j[d],this.setFlag(h,c===h));for(d in this.setFlag(h),l&&(this.setFlag(g+(l.getMajor()||"")),this.setFlag(g+l.getShortVersion())),k)k.hasOwnProperty(d)&&(h=k[d],this.setFlag(h,g===h,r));this.setFlag("Standalone",!!navigator.standalone),this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(window.top.ripple)),this.setFlag("WebWorks",!!window.blackberry),void 0===window.PhoneGap&&void 0===window.Cordova&&void 0===window.cordova||(q=!0,this.setFlag("PhoneGap"),this.setFlag("Cordova")),/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(e)&&(q=!0),this.setFlag("WebView",q),this.isStrict=Ext.isStrict="CSS1Compat"===document.compatMode,this.isSecure=Ext.isSecure,this.identity=c+a+(this.isStrict?"Strict":"Quirks")},Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},is:function(a){return!!this.is[a]},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(b,a,c){return void 0===a&&(a=!0),this.is[b]=a,this.is[b.toLowerCase()]=a,c&&(Ext["is"+b]=a),this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(b){var a=this.propertyPrefixes[this.engineName];return 0<a.length?a+Ext.String.capitalize(b):b},getPreferredTranslationMethod:function(a){return"object"==typeof a&&"translationMethod"in a&&"auto"!==a.translationMethod?a.translationMethod:"csstransform"}},function(a){Ext.browser=new Ext.env.Browser(a,!0),Ext.userAgent=a.toLowerCase(),Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank"}(Ext.global.navigator.userAgent),Ext.env.OS=function(j,k,b){var a,d,l,f,i,e,g=Ext.Boot.osNames,h=Ext.Boot.osPrefixes,c="",m=this.is;for(d in b=b||Ext.browser,h)if(h.hasOwnProperty(d)&&(l=h[d],f=j.match(new RegExp("(?:"+l+")([^\\s;]+)")))){a=g[d],c=(e=f[1])&&"HTC_"===e||e&&"Silk/"===e?new Ext.Version("2.3"):new Ext.Version(f[f.length-1]);break}for(d in a||(a=g[(j.toLowerCase().match(/mac|win|linux/)||["other"])[0]],c=new Ext.Version("")),this.name=a,this.version=c,k&&this.setFlag(k.replace(/ simulator$/i,"")),this.setFlag(a),c&&(this.setFlag(a+(c.getMajor()||"")),this.setFlag(a+c.getShortVersion())),g)g.hasOwnProperty(d)&&(i=g[d],m.hasOwnProperty(a)||this.setFlag(i,a===i));"iOS"===this.name&&568===window.screen.height&&this.setFlag("iPhone5"),(b.is.Safari||b.is.Silk)&&((this.is.Android2||this.is.Android3||501===b.version.shortVersion)&&b.setFlag("AndroidStock"),this.is.Android4&&(b.setFlag("AndroidStock"),b.setFlag("AndroidStock4")))},Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(a){return!!this[a]},name:null,version:null,setFlag:function(b,a){return void 0===a&&(a=!0),this.flags&&(this.flags[b]=a),this.is[b]=a,this.is[b.toLowerCase()]=a,this}},function(){var a,c,b,h=Ext.global.navigator,i=h.userAgent,e=Ext.env.OS,f=Ext.is||(Ext.is={});e.prototype.flags=f,Ext.os=a=new e(i,h.platform),c=a.name,Ext["is"+c]=!0,Ext.isMac=f.Mac=f.MacOS;var d=window.location.search.match(/deviceType=(Tablet|Phone)/),g=window.deviceType;d&&d[1]?b=d[1]:"iPhone"===g?b="Phone":"iPad"===g?b="Tablet":a.is.Android||a.is.iOS||a.is.WindowsPhone||!/Windows|Linux|MacOS/.test(c)?b=a.is.iPad||a.is.RIMTablet||a.is.Android3||Ext.browser.is.Silk||a.is.Android&&-1===i.search(/mobile/i)?"Tablet":"Phone":(b="Desktop",Ext.browser.is.WebView=!!Ext.browser.is.Ripple),a.setFlag(b,!0),a.deviceType=b,delete e.prototype.flags}(),Ext.feature={has:function(a){return!!this.has[a]},testElements:{},getTestElement:function(a,b){if(void 0===a)a="div";else if("string"!=typeof a)return a;return b?document.createElement(a):(this.testElements[a]||(this.testElements[a]=document.createElement(a)),this.testElements[a])},isStyleSupported:function(a,d){var b=this.getTestElement(d).style,c=Ext.String.capitalize(a);return void 0!==b[a]||void 0!==b[Ext.browser.getStylePrefix(a)+c]},isStyleSupportedWithoutPrefix:function(b,c){return void 0!==this.getTestElement(c).style[b]},isEventSupported:function(e,d){void 0===d&&(d=window);var a=this.getTestElement(d),b="on"+e.toLowerCase(),c=b in a;return c||a.setAttribute&&a.removeAttribute&&(a.setAttribute(b,""),c="function"==typeof a[b],void 0!==a[b]&&(a[b]=void 0),a.removeAttribute(b)),c},getStyle:function(a,c){var b=a.ownerDocument.defaultView;return((b?b.getComputedStyle(a,null):a.currentStyle)||a.style)[c]},getSupportedPropertyName:function(c,a){var b=Ext.browser.getVendorProperyName(a);return b in c?b:a in c?a:null},detect:function(h){var a,e,b,l,d,c=this,g=document,m=c.toRun||c.tests,i=m.length,f=g.createElement("div"),k=[],j=Ext.supports,n=c.has;for(f.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>',h&&g.body.appendChild(f),l=c.preDetected[Ext.browser.identity]||[];i--;){if(b=m[i],d=l[i],a=b.name,e=b.names,void 0===d){if(!h&&b.ready){k.push(b);continue}d=b.fn.call(c,g,f)}if(a)j[a]=n[a]=d;else if(e)for(;e.length;)j[a=e.pop()]=n[a]=d}h&&g.body.removeChild(f),c.toRun=k},report:function(){var a,b=[],c=this.tests.length;for(a=0;a<c;++a)b.push(this.has[this.tests[a].name]?1:0);Ext.log(Ext.browser.identity+": ["+b.join(",")+"]")},preDetected:{},tests:[{name:"CloneNodeCopiesExpando",fn:function(){var a=document.createElement("div");return a.expandoProp={},a.cloneNode().expandoProp===a.expandoProp}},{name:"CSSPointerEvents",fn:function(a){return"pointerEvents"in a.documentElement.style}},{name:"CSS3BoxShadow",fn:function(a){return"boxShadow"in a.documentElement.style||"WebkitBoxShadow"in a.documentElement.style||"MozBoxShadow"in a.documentElement.style}},{name:"CSS3NegationSelector",fn:function(a){try{a.querySelectorAll("foo:not(bar)")}catch(b){return!1}return!0}},{name:"ClassList",fn:function(a){return!!a.documentElement.classList}},{name:"Canvas",fn:function(){var a=this.getTestElement("canvas");return!!(a&&a.getContext&&a.getContext("2d"))}},{name:"Svg",fn:function(a){return!(!a.createElementNS||!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var b,a=this.getTestElement();return a.innerHTML="\x3c!--[if vml]><br><![endif]--\x3e",b=1===a.childNodes.length,a.innerHTML="",b}},{name:"touchScroll",fn:function(){var a=0;return Ext.os.is.Desktop&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)?a=1:Ext.supports.Touch&&(a=2),a}},{name:"Touch",fn:function(){var a=navigator.msMaxTouchPoints||navigator.maxTouchPoints;return Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)?Ext.supports.TouchEvents&&1!==a||1<a:Ext.supports.TouchEvents||0<a}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"PointerEvents",fn:function(){return navigator.pointerEnabled}},{name:"MSPointerEvents",fn:function(){return navigator.msPointerEnabled}},{name:"Orientation",fn:function(){return"orientation"in window&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation"in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase"in window}},{name:"WebSockets",fn:function(){return"WebSocket"in window}},{name:"Range",fn:function(){return!!document.createRange}},{name:"CreateContextualFragment",fn:function(){var a=!!document.createRange&&document.createRange();return a&&!!a.createContextualFragment}},{name:"History",fn:function(){return"history"in window&&"pushState"in window.history}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return!!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return!!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage"in window&&null!==window.localStorage)return localStorage.setItem("sencha-localstorage-test","test success"),localStorage.removeItem("sencha-localstorage-test"),!0}catch(b){}return!1}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}},{name:"XHRUploadProgress",fn:function(){if(!window.XMLHttpRequest||Ext.browser.is.AndroidStock)return!1;var a=new XMLHttpRequest;return a&&"upload"in a&&"onprogress"in a.upload}},{name:"NumericInputPlaceHolder",fn:function(){return!(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"matchesSelector",fn:function(){var a=document.documentElement,d="matches",e="webkitMatchesSelector",b="msMatchesSelector",c="mozMatchesSelector";return a[d]?d:a[e]?e:a[b]?b:a[c]?c:null}},{name:"RightMargin",ready:!0,fn:function(c,b){var a=c.defaultView;return!(a&&"0px"!==a.getComputedStyle(b.firstChild.firstChild,null).marginRight)}},{name:"DisplayChangeInputSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{name:"TransparentColor",ready:!0,fn:function(c,b,a){return!((a=c.defaultView)&&"transparent"!==a.getComputedStyle(b.lastChild,null).backgroundColor)}},{name:"ComputedStyle",ready:!0,fn:function(b,c,a){return(a=b.defaultView)&&a.getComputedStyle}},{name:"Float",fn:function(a){return"cssFloat"in a.documentElement.style}},{name:"CSS3BorderRadius",ready:!0,fn:function(d){var a,b=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],c=!1;for(a=0;a<b.length;a++)void 0!==d.documentElement.style[b[a]]&&(c=!0);return c&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(i,c){var a="background-image:",b="linear-gradient(left top, black, white)",d=[a+"-webkit-gradient(linear, left top, right bottom, from(black), to(white))",a+b,a+"-moz-linear-gradient(left top, black, white)",a+"-ms-linear-gradient(left top, black, white)",a+"-o-linear-gradient(left top, black, white)"];return c.style.cssText=d.join(";"),-1!==(""+c.style.backgroundImage).indexOf("gradient")&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(a){return"onmouseenter"in a.documentElement&&"onmouseleave"in a.documentElement}},{name:"MouseWheel",fn:function(a){return"onmousewheel"in a.documentElement}},{name:"Opacity",fn:function(b,a){return!Ext.isIE8&&(a.firstChild.style.cssText="opacity:0.73","0.73"==a.firstChild.style.opacity)}},{name:"Placeholder",fn:function(a){return"placeholder"in a.createElement("input")}},{name:"Direct2DBug",fn:function(a){return Ext.isString(a.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(a){return"getBoundingClientRect"in a.documentElement}},{name:"RotatedBoundingClientRect",ready:!0,fn:function(e){var d=e.body,c=!1,b=e.createElement("div"),a=b.style;return b.getBoundingClientRect&&(a.position="absolute",a.top="0",a.WebkitTransform=a.MozTransform=a.msTransform=a.OTransform=a.transform="rotate(90deg)",a.width="100px",a.height="30px",d.appendChild(b),c=100!==b.getBoundingClientRect().height,d.removeChild(b)),c}},{name:"ChildContentClearedWhenSettingInnerHTML",ready:!0,fn:function(){var b,a=this.getTestElement();return a.innerHTML="<div>a</div>",b=a.firstChild,a.innerHTML="<div>b</div>","a"!==b.innerHTML}},{name:"IncludePaddingInWidthCalculation",ready:!0,fn:function(b,a){return 210===a.childNodes[1].firstChild.offsetWidth}},{name:"IncludePaddingInHeightCalculation",ready:!0,fn:function(b,a){return 210===a.childNodes[1].firstChild.offsetHeight}},{name:"TextAreaMaxLength",fn:function(a){return"maxlength"in a.createElement("textarea")}},{name:"GetPositionPercentage",ready:!0,fn:function(b,a){return"10%"===Ext.feature.getStyle(a.childNodes[2],"left")}},{name:"PercentageHeightOverflowBug",ready:!0,fn:function(d){var b,a,c=!1;return Ext.getScrollbarSize().height&&((b=(a=this.getTestElement()).style).height="50px",b.width="50px",b.overflow="auto",b.position="absolute",a.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join(""),d.body.appendChild(a),50===a.firstChild.offsetHeight&&(c=!0),d.body.removeChild(a)),c}},{name:"xOriginBug",ready:!0,fn:function(e,b){b.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var a=document.getElementById("b1").getBoundingClientRect(),c=document.getElementById("b2").getBoundingClientRect(),d=document.getElementById("b3").getBoundingClientRect();return c.left!==a.left&&d.right!==a.right}},{name:"ScrollWidthInlinePaddingBug",ready:!0,fn:function(c){var a,b,d=!1;return(a=(b=c.createElement("div")).style).height="50px",a.width="50px",a.padding="10px",a.overflow="hidden",a.position="absolute",b.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>',c.body.appendChild(b),70===b.scrollWidth&&(d=!0),c.body.removeChild(b),d}},{name:"rtlVertScrollbarOnRight",ready:!0,fn:function(d,c){c.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var a=c.firstChild,b=a.firstChild;return b.offsetLeft+b.offsetWidth!==a.offsetLeft+a.offsetWidth}},{name:"rtlVertScrollbarOverflowBug",ready:!0,fn:function(c,b){b.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var a=b.firstChild;return a.clientHeight===a.offsetHeight}},{identity:"defineProperty",fn:function(){return!Ext.isIE8m||(Ext.Object.defineProperty=Ext.emptyFn,!1)}},{identify:"nativeXhr",fn:function(){return"undefined"!=typeof XMLHttpRequest||!(XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){return null}})}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?525<=parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10):!(Ext.isGecko&&!Ext.isWindows||Ext.isOpera&&Ext.operaVersion<12)}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var a=document.documentMode;return"onhashchange"in window&&(void 0===a||7<a)}},{name:"FixedTableWidthBug",ready:!0,fn:function(){if(Ext.isIE8)return!1;var c,a=document.createElement("div"),b=document.createElement("div");return a.setAttribute("style","display:table;table-layout:fixed;"),b.setAttribute("style","display:table-cell;min-width:50px;"),a.appendChild(b),document.body.appendChild(a),a.offsetWidth,a.style.width="25px",c=a.offsetWidth,document.body.removeChild(a),50===c}},{name:"FocusinFocusoutEvents",fn:function(){return!Ext.isGecko}},{name:"AsyncFocusEvents",fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:"accessibility",ready:!0,fn:function(f){var b,c,a,e,d,g=f.body;function getColor(a){var f,b,c=[],e=0;-1!==a.indexOf("rgb(")?c=a.replace("rgb(","").replace(")","").split(", "):-1!==a.indexOf("#")&&(f=7===a.length?/^#(\S\S)(\S\S)(\S\S)$/:/^#(\S)(\S)(\S)$/,(b=a.match(f))&&(c=["0x"+b[1],"0x"+b[2],"0x"+b[3]]));for(var d=0;d<c.length;d++)e+=parseInt(c[d]);return e}return b=f.createElement("div"),c=f.createElement("img"),a=b.style,Ext.apply(a,{width:"2px",position:"absolute",clip:"rect(1px,1px,1px,1px)",borderWidth:"1px",borderStyle:"solid",borderTopTolor:"#f00",borderRightColor:"#ff0",backgroundColor:"#fff",backgroundImage:"url("+Ext.BLANK_IMAGE_URL+")"}),c.alt="",c.src=Ext.BLANK_IMAGE_URL,b.appendChild(c),g.appendChild(b),d=(a=b.currentStyle||b.style).backgroundImage,e={Images:1===c.offsetWidth&&"uninitialized"!==c.readyState,BackgroundImages:!(null!==d&&("none"===d||"url(invalid-url:)"===d)),BorderColors:a.borderTopColor!==a.borderRightColor,LightOnDark:0<getColor(a.color)-getColor(a.backgroundColor)},Ext.supports.HighContrastMode=!e.BackgroundImages,g.removeChild(b),b=c=null,e}},0]},Ext.feature.tests.pop(),Ext.supports={},Ext.feature.detect(),Ext.Function=function(){function j(){Ext.elevateFunction(g)}var f,i=0,c=[],l=[],m=0,e={},d=window,b=Ext.global,h=!(!b.setImmediate||!b.clearImmediate),k=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||function(c){var b=Ext.now(),a=Math.max(0,16-(b-i)),e=d.setTimeout(function(){c(b+a)},a);return i=b+a,e},g=function(){var g,d,a,h=c.length;for(f=null,d=0;d<h;d++)g=(a=c[d])[3],e[g]&&(a[0].apply(a[1]||b,a[2]||l),delete e[g]);c=c.slice(h)},a={flexSetter:function(a){return function(b,e){var c,d;if(null!==b)if("string"!=typeof b){for(c in b)b.hasOwnProperty(c)&&a.call(this,c,b[c]);if(Ext.enumerables)for(d=Ext.enumerables.length;d--;)c=Ext.enumerables[d],b.hasOwnProperty(c)&&a.call(this,c,b[c])}else a.call(this,b,e);return this}},bind:function(f,d,c,a){if(2===arguments.length)return function(){return f.apply(d,arguments)};var g=f,e=Array.prototype.slice;return function(){var f=c||arguments;return!0===a?f=(f=e.call(arguments,0)).concat(c):"number"==typeof a&&(f=e.call(arguments,0),Ext.Array.insert(f,a,c)),g.apply(d||b,f)}},bindCallback:function(b,e,a,d,c){return function(){var f=Ext.Array.slice(arguments);return Ext.callback(b,e,a?a.concat(f):f,d,c)}},pass:function(c,a,b){return Ext.isArray(a)||(a=Ext.isIterable(a)?Ext.Array.clone(a):void 0!==a?[a]:[]),function(){var d=a.slice();return d.push.apply(d,arguments),c.apply(b||this,d)}},alias:function(a,b){return function(){return a[b].apply(a,arguments)}},clone:function(a){return function(){return a.apply(this,arguments)}},createInterceptor:function(c,d,e,a){return Ext.isFunction(d)?(a=Ext.isDefined(a)?a:null,function(){var f=arguments;return!1!==d.apply(e||this||b,f)?c.apply(this||b,f):a}):c},createDelayed:function(a,e,b,c,d){return(b||c)&&(a=Ext.Function.bind(a,b,c,d)),function(){var c=this,b=Array.prototype.slice.call(arguments);setTimeout(function(){Ext.elevateFunction?Ext.elevateFunction(a,c,b):a.apply(c,b)},e)}},defer:function(a,b,d,e,c){return a=Ext.Function.bind(a,d,e,c),0<b?setTimeout(function(){Ext.elevateFunction?Ext.elevateFunction(a):a()},b):(a(),0)},interval:function(a,c,d,e,b){return a=Ext.Function.bind(a,d,e,b),setInterval(function(){Ext.elevateFunction?Ext.elevateFunction(a):a()},c)},createSequence:function(a,b,c){return b?function(){var d=a.apply(this,arguments);return b.apply(c||this,arguments),d}:a},createBuffered:function(b,c,d,e){var a;return function(){var f=e||Array.prototype.slice.call(arguments,0),g=d||this;a&&clearTimeout(a),a=setTimeout(function(){Ext.elevateFunction?Ext.elevateFunction(b,g,f):b.apply(g,f)},c)}},createAnimationFrame:function(f,d,e,c){var b;return c=c||3,function(){var g=e||Array.prototype.slice.call(arguments,0);d=d||this,3===c&&b&&a.cancelAnimationFrame(b),(1&c||!b)&&(b=a.requestAnimationFrame(function(){b=null,f.apply(d,g)}))}},requestAnimationFrame:function(i,d,h){var a=++m,b=Array.prototype.slice.call(arguments,0);return b[3]=a,e[a]=1,c.push(b),f=f||k(Ext.elevateFunction?j:g),a},cancelAnimationFrame:function(a){delete e[a]},createThrottled:function(h,f,a){function g(){Ext.elevateFunction?Ext.elevateFunction(h,a,c):h.apply(a,c),e=Ext.now(),b=null}var d,c,b,e=0;return function(){a=a||this,d=Ext.now()-e,c=arguments,f<=d?(clearTimeout(b),g()):b=b||Ext.defer(g,f-d)}},createBarrier:function(a,c,b){return function(){--a||c.apply(b,arguments)}},interceptBefore:function(b,a,e,d){var c=b[a]||Ext.emptyFn;return b[a]=function(){var a=e.apply(d||this,arguments);return c.apply(this,arguments),a}},interceptAfter:function(b,a,e,d){var c=b[a]||Ext.emptyFn;return b[a]=function(){return c.apply(this,arguments),e.apply(d||this,arguments)}},makeCallback:function(b,a){return function(){return a[b].apply(a,arguments)}},memoize:function(e,c,a){var b={},d=a&&Ext.isFunction(a);return function(g){var f=d?a.apply(c,arguments):g;return f in b||(b[f]=e.apply(c,arguments)),b[f]}}};return Ext.asap=h?function(b,d,c){return null==d&&null==c||(b=a.bind(b,d,c)),setImmediate(function(){Ext.elevateFunction?Ext.elevateFunction(b):b()})}:function(b,d,c){return null==d&&null==c||(b=a.bind(b,d,c)),setTimeout(function(){Ext.elevateFunction?Ext.elevateFunction(b):b()},0,!0)},Ext.asapCancel=h?function(a){clearImmediate(a)}:function(a){clearTimeout(a)},Ext.defer=a.defer,Ext.interval=a.interval,Ext.pass=a.pass,Ext.bind=a.bind,Ext.deferCallback=a.requestAnimationFrame,a}(),Ext.Number=new function(){var b=this,d="1"!==.9.toFixed(),c=Math,a={count:!1,inclusive:!1,wrap:!0};Ext.apply(b,{Clip:{DEFAULT:a,COUNT:Ext.applyIf({count:!0},a),INCLUSIVE:Ext.applyIf({inclusive:!0},a),NOWRAP:Ext.applyIf({wrap:!1},a)},clipIndices:function(d,c,f){var g,b,e,h=0,i=(f=f||a).wrap;for(c=c||[],e=0;e<2;++e)g=b,b=null==(b=c[e])?h:e&&f.count?d<(b+=g)?d:b:(i&&(b=b<0?d+b:b),e&&f.inclusive&&++b,b<0?0:d<b?d:b),h=d;return c[0]=g,c[1]=b<g?g:b,c},constrain:function(c,b,a){var d=parseFloat(c);return null===b&&(b=c),null===a&&(a=c),d<b?b:a<d?a:d},snap:function(a,c,e,f){var d;return void 0===a||a<e?e||0:(c&&0!=(d=a%c)&&(a-=d,c<=2*d?a+=c:2*d<-c&&(a-=c)),b.constrain(a,e,f))},snapInRange:function(a,d,c,e){var f;return c=c||0,void 0===a||a<c?c:(d&&(f=(a-c)%d)&&(a-=f,d<=(f*=2)&&(a+=d)),void 0!==e&&a>(e=b.snapInRange(e,d,c))&&(a=e),a)},sign:function(a){return 0===(a=+a)||isNaN(a)?a:0<a?1:-1},toFixed:d?function(d,a){a=a||0;var b=c.pow(10,a);return(c.round(d*b)/b).toFixed(a)}:function(b,a){return b.toFixed(a)},from:function(a,b){return isFinite(a)&&(a=parseFloat(a)),isNaN(a)?b:a},randomInt:function(a,b){return c.floor(c.random()*(b-a+1)+a)},correctFloat:function(a){return parseFloat(a.toPrecision(14))}}),Ext.num=function(){return b.from.apply(this,arguments)}},Ext.apply(Ext,{_namedScopes:{this:{isThis:1},controller:{isController:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},escapeId:function(){function d(b,a){return"\\"+a}var c=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,e=/([\W]{1})/g,a=/^(\d)/g,b=function(b,a){return"\\00"+a.charCodeAt(0).toString(16)+" "};return function(f){return c.test(f)?f:f.replace(e,d).replace(a,b)}}(),callback:function(b,a,d,h,c,g){if(b){var e,f=a in Ext._namedScopes;return b.charAt?(a&&!f||!c||(a=c.resolveListenerScope(f?a:g)),b=a[b]):a=f?g||c:a||c,b&&Ext.isFunction(b)&&(a=a||Ext.global,h?Ext.defer(b,h,a,d):e=Ext.elevateFunction?Ext.elevateFunction(b,a,d):d?b.apply(a,d):b.call(a)),e}},coerce:function(a,e){var d=Ext.typeOf(a),c=Ext.typeOf(e),b="string"==typeof a;if(d!==c)switch(c){case"string":return String(a);case"number":return Number(a);case"boolean":return!(b&&(!a||"false"===a))&&Boolean(a);case"null":return!b||a&&"null"!==a?a:null;case"undefined":return!b||a&&"undefined"!==a?a:void 0;case"date":return b&&isNaN(a)?Ext.Date.parse(a,Ext.Date.defaultFormat):Date(Number(a))}return a},copyTo:function(e,d,a,f){"string"==typeof a&&(a=a.split(Ext.propertyNameSplitRe));for(var b,c=0,g=a?a.length:0;c<g;c++)b=a[c],(f||d.hasOwnProperty(b))&&(e[b]=d[b]);return e},copy:function(e,c,a,f){"string"==typeof a&&(a=a.split(Ext.propertyNameSplitRe));for(var b,d=0,g=a?a.length:0;d<g;d++)b=a[d],(c.hasOwnProperty(b)||f&&b in c)&&(e[b]=c[b]);return e},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(c,e,a){"string"==typeof a&&(a=a.split(Ext.propertyNameSplitRe));for(var b,d=0,f=a?a.length:0;d<f;d++)void 0===c[b=a[d]]&&(c[b]=e[b]);return c},copyIf:function(c,e,a){"string"==typeof a&&(a=a.split(Ext.propertyNameSplitRe));for(var b,d=0,f=a?a.length:0;d<f;d++)!((b=a[d])in c)&&b in e&&(c[b]=e[b]);return c},extend:function(){var a=Object.prototype.constructor,b=function(b){for(var a in b)b.hasOwnProperty(a)&&(this[a]=b[a])};return function(c,d,g){Ext.isObject(d)&&(g=d,d=c,c=g.constructor!==a?g.constructor:function(){d.apply(this,arguments)});function h(){}var e,f=d.prototype;return h.prototype=f,(((e=c.prototype=new h).constructor=c).superclass=f).constructor===a&&(f.constructor=d),c.override=function(a){Ext.override(c,a)},e.override=b,e.proto=e,c.override(g),c.extend=function(a){return Ext.extend(c,a)},c}}(),iterate:function(a,c,b){Ext.isEmpty(a)||(void 0===b&&(b=a),Ext.isIterable(a)?Ext.Array.each.call(Ext.Array,a,c,b):Ext.Object.each.call(Ext.Object,a,c,b))},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(b){var a,c=b;return b&&"<"===b.charAt(0)&&(a=Ext._resourcePoolRe.exec(b))&&(c=Ext.getResourcePath(a[3],a[1],a[2])),c},urlEncode:function(){var a=Ext.Array.from(arguments),b="";return Ext.isString(a[1])&&(b=a[1]+"&",a[1]=!1),b+Ext.Object.toQueryString.apply(Ext.Object,a)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(d){var b=Ext._scrollbarSize;if(d||!b){var c=document.body,a=document.createElement("div");a.style.width=a.style.height="100px",a.style.overflow="scroll",a.style.position="absolute",c.appendChild(a),Ext._scrollbarSize=b={width:a.offsetWidth-a.clientWidth,height:a.offsetHeight-a.clientHeight},c.removeChild(a)}return b},typeOf:function(){var a=/\S/,d=Object.prototype.toString,c={number:1,string:1,boolean:1,undefined:1},b={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(e){if(null===e)return"null";var h,f=typeof e;return c[f]?f:b[h=d.call(e)]||("function"==f?"function":"object"==f?void 0!==e.nodeType?3===e.nodeType?a.test(e.nodeValue)?"textnode":"whitespace":"element":"object":h)}}(),factory:function(a,f,b,d){var c,e=Ext.ClassManager;if(!a||a.isInstance)return b&&b!==a&&b.destroy(),a;if(d){if("string"==typeof a)return e.instantiateByAlias(d+"."+a);if(Ext.isObject(a)&&"type"in a)return e.instantiateByAlias(d+"."+a.type,a)}return!0===a?b||Ext.create(f):("xtype"in a?c=e.instantiateByAlias("widget."+a.xtype,a):"xclass"in a&&(c=Ext.create(a.xclass,a)),c?(b&&b.destroy(),c):b?b.setConfig(a):Ext.create(f,a))},log:function(){function a(){}return a.info=a.warn=a.error=Ext.emptyFn,a}()}),Ext.Config=function(b){var c=this,a=b.charAt(0).toUpperCase()+b.substr(1);c.name=b,c.names={internal:"_"+b,initializing:"is"+a+"Initializing",apply:"apply"+a,update:"update"+a,get:"get"+a,set:"set"+a,initGet:"initGet"+a,changeEvent:b.toLowerCase()+"change"},c.root=c},Ext.Config.map={},Ext.Config.get=function(a){var b=Ext.Config.map;return b[a]||(b[a]=new Ext.Config(a))},Ext.Config.prototype={self:Ext.Config,isConfig:!0,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(a){return a.$configPrefixed?this.names.internal:this.name},mergeNew:function(b,d,f,e){var a,c;if(d)if(b)for(c in a=Ext.Object.chain(d),b)e&&c in a||(a[c]=b[c]);else a=d;else a=b;return a},mergeSets:function(a,f,e){var c,d,b=f?Ext.Object.chain(f):{};if(a instanceof Array)for(c=a.length;c--;)d=a[c],e&&d in b||(b[d]=!0);else if(a)if(a.constructor===Object)for(c in a)d=a[c],e&&c in b||(b[c]=d);else e&&a in b||(b[a]=!0);return b},makeGetter:function(){var b=this.name,a=this.names.internal;return function(){return this[this.$configPrefixed?a:b]}},makeInitGetter:function(){var e=this.name,a=this.names,d=a.set,c=a.get,b=a.initializing;return function(){var a=this;return a[b]=!0,delete a[c],a[d](a.config[e]),delete a[b],a[c].apply(a,arguments)}},makeSetter:function(){var b,g=this.name,a=this.names,e=a.internal,f=a.get,d=a.apply,c=a.update;return(b=function(b){var a=this,h=a.$configPrefixed?e:g,i=a[h];return delete a[f],a[d]&&void 0===(b=a[d](b,i))||b!==(i=a[h])&&(a[h]=b,a[c]&&a[c](b,i)),a}).$isDefault=!0,b},makeEventedSetter:function(){function g(a,c,e,d){a[d]=c,a[b]&&a[b](c,e)}var c,i=this.name,a=this.names,f=a.internal,h=a.get,d=a.apply,b=a.update,e=a.changeEvent;return(c=function(c){var a=this,k=a.$configPrefixed?f:i,j=a[k];return delete a[h],a[d]&&void 0===(c=a[d](c,j))||c!==(j=a[k])&&(a.isConfiguring?(a[k]=c,a[b]&&a[b](c,j)):a.fireEventedAction(e,[a,c,j],g,a,[a,c,j,k])),a}).$isDefault=!0,c}},function(){var c=Ext.Config,b=c.map,a=Ext.Object;Ext.Configurator=function(d){var b=this,e=d.prototype,c=d.superclass?d.superclass.self.$config:null;b.cls=d,(b.superCfg=c)?(b.configs=a.chain(c.configs),b.cachedConfigs=a.chain(c.cachedConfigs),b.initMap=a.chain(c.initMap),b.values=a.chain(c.values),b.needsFork=c.needsFork):(b.configs={},b.cachedConfigs={},b.initMap={},b.values={}),e.config=e.defaultConfig=b.values,d.$config=b},Ext.Configurator.prototype={self:Ext.Configurator,needsFork:!1,initList:null,add:function(t,l){var m,f,s,h,b,j,e,q,o,d,i=this,n=i.cls,k=i.configs,v=i.cachedConfigs,p=i.initMap,g=n.prototype,r=l&&l.$config.configs,u=i.values;for(e in t){if((f=(m=(d=t[e])&&d.constructor===Object)&&"$value"in d?d:null)&&(s=!!f.cached,m=(d=f.$value)&&d.constructor===Object),h=f&&f.merge,b=k[e]){if(l){if(!(h=b.merge))continue;f=null}else h=h||b.merge;j=u[e],h?d=h.call(b,d,j,n,l):m&&j&&j.constructor===Object&&(d=a.merge({},j,d))}else r?(b=r[e],f=null):b=c.get(e),((k[e]=b).cached||s)&&(v[e]=!0),g[o=(q=b.names).get]||(g[o]=b.getter||b.getGetter()),g[o=q.set]||(g[o]=f&&f.evented?b.eventedSetter||b.getEventedSetter():b.setter||b.getSetter());f&&(b.owner!==n&&(k[e]=b=Ext.Object.chain(b),b.owner=n),Ext.apply(b,f),delete b.$value),!i.needsFork&&d&&(d.constructor===Object||d instanceof Array)&&(i.needsFork=!0),null!==d?p[e]=!0:(g.$configPrefixed?g[k[e].names.internal]=null:g[k[e].name]=null,e in p&&(p[e]=!1)),u[e]=d}},configure:function(c,h){var n,b,m,w,d,p,l,f,e,g,t,s,k=this,u=k.configs,x=k.initMap,q=k.initListMap,o=k.initList,j=k.cls.prototype,i=k.values,r=0,v=!o;if(i=k.needsFork?a.fork(i):a.chain(i),c.isConfiguring=!0,v)for(e in k.initList=o=[],k.initListMap=q={},c.isFirstInstance=!0,x)w=x[e],t=(b=u[e]).cached,w?(f=b.names,g=i[e],!j[f.set].$isDefault||j[f.apply]||j[f.update]||"object"==typeof g?(t?(n=n||[]).push(b):(o.push(b),q[e]=!0),c[f.get]=b.initGetter||b.getInitGetter()):j[b.getInternalName(j)]=g):t&&(j[b.getInternalName(j)]=void 0);if(l=n&&n.length){for(d=0;d<l;++d)c[p=n[d].getInternalName(j)]=null;for(d=0;d<l;++d)m=(f=(b=n[d]).names).get,c.hasOwnProperty(m)&&(c[f.set](i[b.name]),delete c[m]);for(d=0;d<l;++d)j[p=n[d].getInternalName(j)]=c[p],delete c[p]}for(h&&h.platformConfig&&(h=k.resolvePlatformConfig(c,h)),v&&c.afterCachedConfig&&!c.afterCachedConfig.$nullFn&&c.afterCachedConfig(h),c.config=i,d=0,l=o.length;d<l;++d)c[(b=o[d]).names.get]=b.initGetter||b.getInitGetter();if(c.transformInstanceConfig&&(h=c.transformInstanceConfig(h)),h)for(e in h)g=h[e],(b=u[e])?(b.lazy||++r,q[e]||(c[b.names.get]=b.initGetter||b.getInitGetter()),b.merge?g=b.merge(g,i[e],c):g&&g.constructor===Object&&(g=(s=i[e])&&s.constructor===Object?a.merge(i[e],g):Ext.clone(g))):c[e]=g,i[e]=g;if(!c.beforeInitConfig||c.beforeInitConfig.$nullFn||!1!==c.beforeInitConfig(h)){if(h)for(e in h){if(!r)break;(b=u[e])&&!b.lazy&&(--r,m=(f=b.names).get,c.hasOwnProperty(m)&&(c[f.set](i[e]),delete c[f.get]))}for(d=0,l=o.length;d<l;++d)m=(f=(b=o[d]).names).get,!b.lazy&&c.hasOwnProperty(m)&&(c[f.set](i[b.name]),delete c[m]);delete c.isConfiguring}},getCurrentConfig:function(c){var a,e=c.defaultConfig,d={};for(a in e)d[a]=c[b[a].names.get]();return d},merge:function(g,c,f){var b,a,d,e,h=this.configs;for(b in f)a=f[b],(e=h[b])&&(e.merge?a=e.merge(a,c[b],g):a&&a.constructor===Object&&(a=(d=c[b])&&d.constructor===Object?Ext.Object.merge(d,a):Ext.clone(a))),c[b]=a;return c},reconfigure:function(c,f,g){var d,j,h,m,a,e,k,n=c.config,i=[],p=c.$configStrict&&!(g&&!1===g.strict),l=this.configs,o=g&&g.defaults;for(a in f)if(!o||!c.hasOwnProperty(a)){if(n[a]=f[a],d=l[a])c[d.names.get]=d.initGetter||d.getInitGetter();else if(k=c.self.prototype[a],p&&"function"==typeof k&&!k.$nullFn)continue;i.push(a)}for(h=0,m=i.length;h<m;h++)(d=l[a=i[h]])?(j=(e=d.names).get,c.hasOwnProperty(j)&&(c[e.set](f[a]),delete c[j])):c[(e=(d=b[a]||Ext.Config.get(a)).names).set]?c[e.set](f[a]):c[a]=f[a]},resolvePlatformConfig:function(g,e){var c,a,d,f=e&&e.platformConfig,b=e;if(f&&(d=(a=Ext.getPlatformConfigKeys(f)).length))for(b=Ext.merge({},b),c=0,d=a.length;c<d;++c)this.merge(g,b,f[a[c]]);return b}}}(),Ext.Base=function(j){function i(a){return function(){return this[a].apply(this,arguments)}}function a(){}var d,c=[],g=[],l=Ext.Version,h=/^\d/,f={},e={},b=a.prototype;for(d in Ext.apply(a,{$className:"Ext.Base",$isClass:!0,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(n){var c,g,q,e,j,o,f,k,b,a,p,d,r=this,m=[],s=Ext.getCompatVersion(n.name);for(g in n)h.test(g)&&((d=new Ext.Version(g)).deprecations=n[g],m.push(d));for(m.sort(l.compare),q=m.length;q--&&(c=(d=m[q]).deprecations,e=r.prototype,p=c.statics,j=s&&s.lt(d));)for(;c;){if(k=c.methods)for(b in k)f=null,(a=k[b])&&(Ext.isString(a)?j&&(f=i(a)):((a.message||a.fn)&&(a=a.fn),o=e.hasOwnProperty(b)&&e[b],j&&a&&(a.$owner=r,a.$name=b,o&&(a.$previous=o),f=a))),f&&(e[b]=f);c=p,p=null,e=r}},extend:function(e){var d,a,i,g,f,c=this,h=e.prototype;if(((d=c.prototype=Ext.Object.chain(h)).self=c).superclass=d.superclass=h,!e.$isClass)for(a in b)a in d&&(d[a]=b[a]);if(f=h.$inheritableStatics)for(a=0,i=f.length;a<i;a++)g=f[a],c.hasOwnProperty(g)||(c[g]=e[g]);e.$onExtended&&(c.$onExtended=e.$onExtended.slice()),c.getConfigurator()},$onExtended:[],triggerExtended:function(){var a,b,c=this.$onExtended,d=c.length;if(0<d)for(a=0;a<d;a++)(b=c[a]).fn.apply(b.scope||this,arguments)},onExtended:function(b,a){return this.$onExtended.push({fn:b,scope:a}),this},addStatics:function(a){return this.addMembers(a,!0),this},addInheritableStatics:function(e){var c,b,a,f,d=this.prototype;for(a in c=d.$inheritableStatics,b=d.$hasInheritableStatics,c||(c=d.$inheritableStatics=[],b=d.$hasInheritableStatics={}),e)e.hasOwnProperty(a)&&(f=e[a],this[a]=f,b[a]||(b[a]=!0,c.push(a)));return this},addMembers:function(d,f,p){var h,i,o,a,b,n,j,e=this,l=Ext.Function.clone,c=f?e:e.prototype,m=!f&&c.defaultConfig,k=Ext.enumerables,g=d.privates;for(b in g&&(delete d.privates,f||(j=g.statics,delete g.statics),e.addMembers(g,f,n),j&&e.addMembers(j,!0,n)),d)if(d.hasOwnProperty(b)){if("function"!=typeof(a=d[b])||a.$isClass||a.$nullFn){if(m&&b in m&&!c.config.hasOwnProperty(b)){(h=h||{})[b]=a;continue}}else a.$owner&&(a=l(a)),c.hasOwnProperty(b)&&(a.$previous=c[b]),a.$owner=e,a.$name=b;c[b]=a}if(h&&e.addConfig(h),k)for(i=0,o=k.length;i<o;++i)d.hasOwnProperty(b=k[i])&&((a=d[b])&&!a.$nullFn&&(a.$owner&&(a=l(a)),a.$owner=e,a.$name=b,c.hasOwnProperty(b)&&(a.$previous=c[b])),c[b]=a);return this},addMember:function(a,b){return f[a]=b,this.addMembers(f),delete f[a],this},borrow:function(f,a){var b,e,c,g=f.prototype,d={};for(b=0,e=(a=Ext.Array.from(a)).length;b<e;b++)d[c=a[b]]=g[c];return this.addMembers(d)},override:function(a){var b=this,d=a.statics,c=a.inheritableStatics,e=a.config,g=a.mixins,f=a.cachedConfig;return(d||c||e)&&(a=Ext.apply({},a)),d&&(b.addMembers(d,!0),delete a.statics),c&&(b.addInheritableStatics(c),delete a.inheritableStatics),e&&(b.addConfig(e),delete a.config),f&&(b.addCachedConfig(f),delete a.cachedConfig),delete a.mixins,b.addMembers(a),g&&b.mixin(g),b},callParent:function(b){var a;return(a=this.callParent.caller)&&(a.$previous||(a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,b||c)},callSuper:function(b){var a;return(a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,b||c)},mixin:function(l,g){var a,b,e,i,d,j,h,k,f,c=this;if("string"==typeof l){for(e in a=g.prototype,b=c.prototype,a.onClassMixedIn&&a.onClassMixedIn.call(g,c),b.hasOwnProperty("mixins")||(b.mixins="mixins"in b?Ext.Object.chain(b.mixins):{}),a)k=a[e],"mixins"===e?Ext.applyIf(b.mixins,k):"mixinId"!==e&&"config"!==e&&void 0===b[e]&&(b[e]=k);if(i=a.$inheritableStatics)for(d=0,j=i.length;d<j;d++)h=i[d],c.hasOwnProperty(h)||(c[h]=g[h]);return"config"in a&&c.addConfig(a.config,g),(b.mixins[l]=a).afterClassMixedIn&&a.afterClassMixedIn.call(g,c),c}if((f=l)instanceof Array)for(d=0,j=f.length;d<j;d++)a=f[d],c.mixin(a.prototype.mixinId||a.$className,a);else for(var m in f)c.mixin(m,f[m])},addConfig:function(b,a){(this.$config||this.getConfigurator()).add(b,a)},addCachedConfig:function(c,d){var a,b={};for(a in c)b[a]={cached:!0,$value:c[a]};this.addConfig(b,d)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:j(function(a,b){e[a]=function(){return this[b].apply(this,arguments)},this.override(e),delete e[a]})}),a)a.hasOwnProperty(d)&&g.push(d);return a.$staticMembers=g,a.getConfigurator(),a.addMembers({$className:"Ext.Base",isInstance:!0,$configPrefixed:!0,$configStrict:!0,isConfiguring:!1,isFirstInstance:!1,destroyed:!1,statics:function(){var a=this.statics.caller,b=this.self;return a?a.$owner:b},callParent:function(d){var a;return((a=this.callParent.caller)&&(a.$previous||(a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name])).apply(this,d||c)},callSuper:function(d){var a;return((a=this.callSuper.caller)&&(a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]).apply(this,d||c)},self:a,constructor:function(){return this},getConfigurator:function(){return this.$config||this.self.getConfigurator()},initConfig:function(b){var a=this,c=a.getConfigurator();return a.initConfig=Ext.emptyFn,a.initialConfig=b||{},c.configure(a,b),a},beforeInitConfig:Ext.emptyFn,getConfig:function(d,f){var c,b=this;return d?(c=Ext.Config.map[d].names.get,f&&b.hasOwnProperty(c)?b.config[d]:b[c]()):b.getCurrentConfig()},setConfig:function(b,e,d){var a,c=this;return b&&("string"==typeof b?(a={})[b]=e:a=b,c.getConfigurator().reconfigure(c,a,d)),c},getCurrentConfig:function(){return this.getConfigurator().getCurrentConfig(this)},hasConfig:function(a){return a in this.defaultConfig},getInitialConfig:function(b){var a=this.config;return b?a[b]:a},$links:null,link:function(c,b){var a=this;return(a.$links||(a.$links={}))[c]=!0,a[c]=b},unlink:function(e){var b,f,c,a,d=this;for(b=0,f=e.length;b<f;b++)(a=d[c=e[b]])&&(a.isInstance&&!a.destroyed?a.destroy():a.parentNode&&"nodeType"in a&&a.parentNode.removeChild(a)),d[c]=null;return d},destroy:function(){var a=this,b=a.$links;a.initialConfig=a.config=null,a.destroy=Ext.emptyFn,a.isDestroyed=a.destroyed=!0,b&&(a.$links=null,a.unlink(Ext.Object.getKeys(b)))}}),b.callOverridden=b.callParent,a}(Ext.Function.flexSetter),function(b,a){(Ext.util||(Ext.util={})).Cache=b=function(c){var a,b=this;c&&Ext.apply(b,c),b.head=a={key:null,value:null},b.map={},a.next=a.prev=a},b.prototype=a={maxSize:100,count:0,clear:function(){var c=this,b=c.head,a=b.next;if(b.next=b.prev=b,!c.evict.$nullFn)for(;a!==b;a=a.next)c.evict(a.key,a.value);c.count=0},each:function(d,b){b=b||this;for(var c=this.head,a=c.next;a!==c&&!d.call(b,a.key,a.value);a=a.next);},get:function(c){var a=this,d=a.head,e=a.map,b=e[c];if(b)b.prev!==d&&(a.unlinkEntry(b),a.linkEntry(b));else for(e[c]=b={key:c,value:a.miss.apply(a,arguments)},a.linkEntry(b),++a.count;a.count>a.maxSize;)a.unlinkEntry(d.prev,!0),--a.count;return b.value},evict:Ext.emptyFn,linkEntry:function(a){var b=this.head,c=b.next;a.next=c,(a.prev=b).next=a,c.prev=a},unlinkEntry:function(a,d){var b=a.next,c=a.prev;(c.next=b).prev=c,d&&this.evict(a.key,a.value)}},a.destroy=a.clear}(),function(){function c(a,b){return a.length-b.length||(a<b?-1:b<a?1:0)}var a,d=Ext.Base,b=d.$staticMembers;function makeCtor(a){return function(){return this.constructor.apply(this,arguments)||null}}Ext.Class=a=function(b,c,d){return"function"!=typeof b&&(d=c,c=b,b=null),c=c||{},b=a.create(b,c),a.process(b,c,d),b},Ext.apply(a,{makeCtor:makeCtor,onBeforeCreated:function(a,c,b){a.addMembers(c),b.onCreated.call(a,a)},create:function(a,f){var c,e=b.length;for(a=a||makeCtor();e--;)a[c=b[e]]=d[c];return a},process:function(l,f,k){var b,c,g,n,h,m,i,j=f.preprocessors||a.defaultPreprocessors,o=this.preprocessors,e={onBeforeCreated:this.onBeforeCreated},d=[];for(delete f.preprocessors,l._classHooks=e,g=0,n=j.length;g<n;g++)if("string"==typeof(b=j[g])){if(!0===(c=(b=o[b]).properties))d.push(b.fn);else if(c)for(h=0,m=c.length;h<m;h++)if(i=c[h],f.hasOwnProperty(i)){d.push(b.fn);break}}else d.push(b);e.onCreated=k||Ext.emptyFn,e.preprocessors=d,this.doProcess(l,f,e)},doProcess:function(f,g,b){for(var c=this,d=b.preprocessors,a=d.shift(),e=c.doProcess;a;a=d.shift())if(!1===a.call(c,f,g,b,e))return;b.onBeforeCreated.apply(c,arguments)},preprocessors:{},registerPreprocessor:function(a,e,b,c,d){return c=c||"last",b=b||[a],this.preprocessors[a]={name:a,properties:b||!1,fn:e},this.setDefaultPreprocessorPosition(a,c,d),this},getPreprocessor:function(a){return this.preprocessors[a]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(a){return this.defaultPreprocessors=Ext.Array.from(a),this},setDefaultPreprocessorPosition:function(d,a,e){var c,b=this.defaultPreprocessors;if("string"==typeof a){if("first"===a)return b.unshift(d),this;if("last"===a)return b.push(d),this;a="after"===a?1:-1}return-1!==(c=Ext.Array.indexOf(b,e))&&Ext.Array.splice(b,Math.max(0,c+a),0,d),this}}),a.registerPreprocessor("extend",function(b,c,i){var a,e,d,h=Ext.Base,g=h.prototype,f=c.extend;if(delete c.extend,e=(a=f&&f!==Object?f:h).prototype,!a.$isClass)for(d in g)e[d]||(e[d]=g[d]);b.extend(a),b.triggerExtended.apply(b,arguments),c.onClassExtended&&(b.onExtended(c.onClassExtended,b),delete c.onClassExtended)},!0),a.registerPreprocessor("privates",function(d,e){var a=e.privates,c=a.statics,b=a.privacy||!0;delete e.privates,delete a.statics,d.addMembers(a,!1,b),c&&d.addMembers(c,!0,b)}),a.registerPreprocessor("statics",function(b,a){b.addStatics(a.statics),delete a.statics}),a.registerPreprocessor("inheritableStatics",function(b,a){b.addInheritableStatics(a.inheritableStatics),delete a.inheritableStatics}),Ext.createRuleFn=function(a){return new Function("$c","with($c) { return ("+a+"); }")},Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn}),Ext.ruleKeySortFn=c,Ext.getPlatformConfigKeys=function(e){var a,b=[];for(a in e)Ext.expressionCache.get(a)(Ext.platformTags)&&b.push(a);return b.sort(c),b},a.registerPreprocessor("platformConfig",function(n,g,o){var b,l,i,d,c,j,a,f,h,m,k=g.platformConfig,e=g.config;for(delete g.platformConfig,l=(d=n.getConfigurator()).configs,h=0,m=(j=Ext.getPlatformConfigKeys(k)).length;h<m;++h){for(a in c=b=null,i=k[j[h]])f=i[a],e&&a in e?((b=b||{})[a]=f,(c=c||{})[a]=e[a],delete e[a]):a in l?(b=b||{})[a]=f:g[a]=f;c&&d.add(c),b&&d.add(b)}}),a.registerPreprocessor("config",function(b,a){a.hasOwnProperty("$configPrefixed")&&(b.prototype.$configPrefixed=a.$configPrefixed),b.addConfig(a.config),delete a.config}),a.registerPreprocessor("cachedConfig",function(b,a){a.hasOwnProperty("$configPrefixed")&&(b.prototype.$configPrefixed=a.$configPrefixed),b.addCachedConfig(a.cachedConfig),delete a.cachedConfig}),a.registerPreprocessor("mixins",function(e,b,a){var d=b.mixins,c=a.onCreated;delete b.mixins,a.onCreated=function(){return a.onCreated=c,e.mixin(d),a.onCreated.apply(this,arguments)}}),Ext.extend=function(d,c,b){var e;if(2===arguments.length&&Ext.isObject(c)&&(b=c,c=d,d=null),!c)throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.");return b.extend=c,b.preprocessors=["extend","statics","inheritableStatics","mixins","platformConfig","config"],d?(e=new a(d,b)).prototype.constructor=d:e=new a(b),e.prototype.override=function(b){for(var a in b)b.hasOwnProperty(a)&&(this[a]=b[a])},e}}(),Ext.Inventory=function(){var a=this;a.names=[],a.paths={},a.alternateToName={},a.aliasToName={},a.nameToAliases={},a.nameToAlternates={}},Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(a,c,b){return this.addMapping(a,c,this.aliasToName,this.nameToAliases,b)},addAlternate:function(b,a){return this.addMapping(b,a,this.alternateToName,this.nameToAlternates)},addMapping:function(h,m,k,j,n){var d,a,b,e,i,g,f=h.$className||h,c=f,l=this._array1;for(b in Ext.isString(f)&&((c={})[f]=m),c)for(a=c[b],Ext.isString(a)&&(l[0]=a,a=l),i=a.length,g=j[b]||(j[b]=[]),e=0;e<i;++e)(d=a[e])&&k[d]!==b&&(k[d]=b,g.push(d))},getAliasesByName:function(a){return this.nameToAliases[a]||null},getAlternatesByName:function(a){return this.nameToAlternates[a]||null},getNameByAlias:function(a){return this.aliasToName[a]||""},getNameByAlternate:function(a){return this.alternateToName[a]||""},getNamesByExpression:function(k,e,r){var f,j,c,b,d,a,h,g=this,q=g.aliasToName,p=g.alternateToName,m=g.nameToAliases,o=g.nameToAlternates,i=r?e:{},l=[],n=Ext.isString(k)?[k]:k,t=n.length,s=g.wildcardRe;for(j=0;j<t;++j)if((f=n[j]).indexOf("*")<0)(a=q[f])||(a=p[f])||(a=f),a in i||e&&a in e||(i[a]=1,l.push(a));else for(a in h=new RegExp("^"+f.replace(s,"(.*?)")+"$"),m)if(!(a in i||e&&a in e)){if(!(b=h.test(a))){for(d=(c=m[a]).length;!b&&0<d--;)b=h.test(c[d]);if((c=o[a])&&!b)for(d=c.length;!b&&0<d--;)b=h.test(c[d])}b&&(i[a]=1,l.push(a))}return l},getPath:function(a){var c,e=this,d=e.paths,b="";return a in d?b=d[a]:((c=e.getPrefix(a))&&(a=a.substring(c.length+1),(b=d[c])&&(b+="/")),b+=a.replace(e.dotRe,"/")+".js"),b},getPrefix:function(a){if(a in this.paths)return a;for(var b,c,d=this.getPrefixes(),e=d.length;0<e--;)if((b=(c=d[e]).length)<a.length&&"."===a.charAt(b)&&c===a.substring(0,b))return c;return""},getPrefixes:function(){var b=this,a=b.prefixes;return a||(b.prefixes=a=b.names.slice(0),a.sort(b._compareNames)),a},removeName:function(a){var b,d,c=this,j=c.aliasToName,i=c.alternateToName,h=c.nameToAliases,g=c.nameToAlternates,f=h[a],e=g[a];if(delete h[a],delete g[a],f)for(b=f.length;b--;)a===(d=f[b])&&delete j[d];if(e)for(b=e.length;b--;)a===(d=e[b])&&delete i[d]},resolveName:function(a){var b,c=this;return a in c.nameToAliases||(b=c.aliasToName[a])||(b=c.alternateToName[a]),b||a},select:function(b,f){var c,e=this,a={},d={excludes:a,exclude:function(){return e.getNamesByExpression(arguments,a,!0),this}};for(c in b)d[c]=e.selectMethod(a,b[c],f||b);return d},selectMethod:function(a,c,b){var d=this;return function(f){var e=Ext.Array.slice(arguments,1);return e.unshift(d.getNamesByExpression(f,a)),c.apply(b,e)}},setPath:Ext.Function.flexSetter(function(b,c){var a=this;return a.paths[b]=c,a.names.push(b),a.prefixes=null,a}),_compareNames:function(b,c){var a=b.length-c.length;return a=a||(b<c?-1:1)}},Ext.ClassManager=function(n,e,o,g,r){var q=Ext.Class.makeCtor,i=[],b={Ext:{name:"Ext",value:Ext}},a=Ext.apply(new Ext.Inventory,{classes:{},classState:{},existCache:{},instantiators:[],isCreated:function(b){return!(!a.classes[b]&&!a.existCache[b])||!!a.lookupName(b,!1)&&(a.triggerCreated(b),!0)},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(b,c){a.existCache[b]=c||1,a.classState[b]+=40,a.notify(b,a.createdListeners,a.nameCreatedListeners)},onCreated:function(d,c,b){a.addListener(d,c,b,a.createdListeners,a.nameCreatedListeners)},notify:function(i,c,k){var b,g,h,l,d,f,j=a.getAlternatesByName(i),e=[i];for(b=0,g=c.length;b<g;b++)(d=c[b]).fn.call(d.scope,i);for(;e;){for(b=0,g=e.length;b<g;b++)if(c=k[f=e[b]]){for(h=0,l=c.length;h<l;h++)(d=c[h]).fn.call(d.scope,f);delete k[f]}e=j,j=null}},addListener:function(b,e,a,f,c){if(Ext.isArray(a))for(b=Ext.Function.createBarrier(a.length,b,e),d=0;d<a.length;d++)this.addListener(b,null,a[d],f,c);else{var d,g={fn:b,scope:e};if(a){if(this.isCreated(a))return void b.call(e,a);c[a]||(c[a]=[]),c[a].push(g)}else f.push(g)}},$namespaceCache:b,addRootNamespaces:function(c){for(var a in c)b[a]={name:a,value:c[a]}},clearNamespaceCache:function(){for(var a in i.length=0,b)b[a].value||delete b[a]},getNamespaceEntry:function(c){if("string"!=typeof c)return c;var e,d=b[c];return d||(d=(e=c.lastIndexOf("."))<0?{name:c}:{name:c.substring(e+1),parent:a.getNamespaceEntry(c.substring(0,e))},b[c]=d),d},lookupName:function(g,f){var b,e,h=a.getNamespaceEntry(g),c=Ext.global,d=0;for(b=h;b;b=b.parent)i[d++]=b;for(;c&&0<d--;)e=c,!(c=(b=i[d]).value||c[b.name])&&f&&(e[b.name]=c={});return c},setNamespace:function(e,d){var b=a.getNamespaceEntry(e),c=Ext.global;return b.parent&&(c=a.lookupName(b.parent,!0)),c[b.name]=d},setXType:function(g,d){var e=g.$className,b=(e?g:a.get(e=g)).prototype,h=b.xtypes,c=b.xtypesChain,f=b.xtypesMap;b.hasOwnProperty("xtypes")||(b.xtypes=h=[],b.xtypesChain=c=c?c.slice(0):[],b.xtypesMap=f=Ext.apply({},f)),a.addAlias(e,"widget."+d,!0),h.push(d),c.push(d),f[d]=!0},set:function(b,d){var c=a.getName(d);return a.classes[b]=a.setNamespace(b,d),c&&c!==b&&a.addAlternate(c,b),a},get:function(b){return a.classes[b]||a.lookupName(b,!1)},addNameAliasMappings:function(b){a.addAlias(b)},addNameAlternateMappings:function(b){a.addAlternate(b)},getByAlias:function(b){return a.get(a.getNameByAlias(b))},getByConfig:function(c,d){var b,e=c.xclass;return b=e||((b=c.xtype)?d="widget.":b=c.type,a.getNameByAlias(d+b)),a.get(b)},getName:function(a){return a&&a.$className||""},getClass:function(a){return a&&a.self||null},create:function(c,b,e){var d=q(c);return"function"==typeof b&&(b=b(d)),b.$className=c,new n(d,b,function(){var d,h,m,i,l,f,j,k=b.postprocessors||a.defaultPostprocessors,n=a.postprocessors,g=[];for(delete b.postprocessors,h=0,m=k.length;h<m;h++)if("string"==typeof(d=k[h])){if(!0===(f=(d=n[d]).properties))g.push(d.fn);else if(f)for(i=0,l=f.length;i<l;i++)if(j=f[i],b.hasOwnProperty(j)){g.push(d.fn);break}}else g.push(d);b.postprocessors=g,b.createdFn=e,a.processCreate(c,this,b)})},processCreate:function(a,b,d){var c=this,e=d.postprocessors.shift(),f=d.createdFn;if(!e)return a&&c.set(a,b),delete b._classHooks,f&&f.call(b,b),void(a&&c.triggerCreated(a));!1!==e.call(c,a,b,d,c.processCreate)&&c.processCreate(a,b,d)},createOverride:function(f,c,k){var i,h,d=this,g=c.override,l=c.requires,m=c.uses,b=c.mixins,e=1,j=function(){var a,n,e,o,p;if(!h){if(n=l?l.slice(0):[],b)if(i=b instanceof Array)for(e=0,p=b.length;e<p;++e)Ext.isString(a=b[e])&&n.push(a);else for(o in b)Ext.isString(a=b[o])&&n.push(a);if(h=!0,n.length)return void Ext.require(n,j)}if(i)for(e=0,p=b.length;e<p;++e)Ext.isString(a=b[e])&&(b[e]=Ext.ClassManager.get(a));else if(b)for(o in b)Ext.isString(a=b[o])&&(b[o]=Ext.ClassManager.get(a));a=d.get(g),delete c.override,delete c.compatibility,delete c.requires,delete c.uses,Ext.override(a,c),Ext.Loader.history.push(f),m&&Ext.Loader.addUsedClasses(m),k&&k.call(a,a)};return a.overrideMap[f]=!0,"compatibility"in c&&Ext.isString(e=c.compatibility)&&(e=Ext.checkVersion(e)),e&&d.onCreated(j,d,g),d.triggerCreated(f,2),d},instantiateByAlias:function(){var c=arguments[0],a=o.call(arguments),b=this.getNameByAlias(c);return a[0]=b,Ext.create.apply(Ext,a)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(b,a){return(a=g(a,!0)).unshift(b),Ext.create.apply(Ext,a)},getInstantiator:function(c){var b,a,d,e=this.instantiators;if(!(b=e[c])){for(a=c,d=[],a=0;a<c;a++)d.push("a["+a+"]");b=e[c]=new Function("c","a","return new c("+d.join(",")+")")}return b},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(a,e,b,c,d){return c=c||"last",b=b||[a],this.postprocessors[a]={name:a,properties:b||!1,fn:e},this.setDefaultPostprocessorPosition(a,c,d),this},setDefaultPostprocessors:function(a){return this.defaultPostprocessors=g(a),this},setDefaultPostprocessorPosition:function(d,a,e){var c,b=this.defaultPostprocessors;if("string"==typeof a){if("first"===a)return b.unshift(d),this;if("last"===a)return b.push(d),this;a="after"===a?1:-1}return-1!==(c=Ext.Array.indexOf(b,e))&&Ext.Array.splice(b,Math.max(0,c+a),0,d),this}});if(a.registerPostprocessor("alias",function(g,f,d){var a,c,b=Ext.Array.from(d.alias);for(a=0,c=b.length;a<c;a++)e=b[a],this.addAlias(f,e)},["xtype","alias"]),a.registerPostprocessor("singleton",function(b,c,a,d){return!a.singleton||(d.call(this,b,new c,a),!1)}),a.registerPostprocessor("alternateClassName",function(g,f,e){var b,d,c,a=e.alternateClassName;for(a instanceof Array||(a=[a]),b=0,d=a.length;b<d;b++)c=a[b],this.set(c,f)}),a.registerPostprocessor("debugHooks",function(d,a,c){delete(a.isInstance?a.self:a).prototype.debugHooks}),a.registerPostprocessor("deprecated",function(d,a,c){var b=a.isInstance?a.self:a;b.addDeprecations(c.deprecated),delete b.prototype.deprecated}),Ext.apply(Ext,{create:function(){var d,b=arguments[0],e=typeof b,c=o.call(arguments,1);return(d="function"==e?b:("string"!=e&&0===c.length&&(c=[b],(b=b.xclass)||(b=(b=c[0].xtype)&&"widget."+b)),b=a.resolveName(b),a.get(b)))||(Ext.syncRequire(b),d=a.get(b)),a.getInstantiator(c.length)(d,c)},widget:function(g,b){var d,c,f,e=g;return"string"!=typeof e?(e=(b=g).xtype,c=b.xclass):b=b||{},b.isComponent?b:(c||(d="widget."+e,c=a.getNameByAlias(d)),c&&(f=a.get(c)),f?new f(b):Ext.create(c||d,b))},createByAlias:e(a,"instantiateByAlias"),define:function(b,c,d){return c.override?(a.classState[b]=20,a.createOverride.apply(a,arguments)):(a.classState[b]=10,a.create.apply(a,arguments))},undefine:function(b){delete a.classes[b],delete a.existCache[b],delete a.classState[b],a.removeName(b);var c=a.getNamespaceEntry(b),d=c.parent?a.lookupName(c.parent,!1):Ext.global;if(d)try{delete d[c.name]}catch(t){d[c.name]=void 0}},getClassName:e(a,"getName"),getDisplayName:function(a){if(a){if(a.displayName)return a.displayName;if(a.$name&&a.$class)return Ext.getClassName(a.$class)+"#"+a.$name;if(a.$className)return a.$className}return"Anonymous"},getClass:e(a,"getClass"),namespace:function(){var b,c=r;for(b=arguments.length;0<b--;)c=a.lookupName(arguments[b],!0);return c}}),Ext.addRootNamespaces=a.addRootNamespaces,Ext.createWidget=Ext.widget,Ext.ns=Ext.namespace,n.registerPreprocessor("className",function(b,a){"$className"in a&&(b.$className=a.$className)},!0,"first"),n.registerPreprocessor("alias",function(n,d){var a,e,l,b,k=n.prototype,c=g(d.xtype),h=g(d.alias),i="widget.",m=i.length,j=Array.prototype.slice.call(k.xtypesChain||[]),f=Ext.merge({},k.xtypesMap||{});for(a=0,e=h.length;a<e;a++)(l=h[a]).substring(0,m)===i&&(b=l.substring(m),Ext.Array.include(c,b));for(n.xtype=d.xtype=c[0],d.xtypes=c,a=0,e=c.length;a<e;a++)b=c[a],f[b]||(f[b]=!0,j.push(b));for(d.xtypesChain=j,d.xtypesMap=f,Ext.Function.interceptAfter(d,"onClassCreated",function(){var g,h,d=k.mixins;for(g in d)if(d.hasOwnProperty(g)&&(h=d[g],c=h.xtypes))for(a=0,e=c.length;a<e;a++)b=c[a],f[b]||(f[b]=!0,j.push(b))}),a=0,e=c.length;a<e;a++)b=c[a],Ext.Array.include(h,i+b);d.alias=h},["xtype","alias"]),Ext.manifest){var c,f,h,p,k=Ext.manifest,m=k.classes,d=k.paths,l={},j={};if(d){if(k.bootRelative)for(h in p=Ext.Boot.baseUrl,d)d.hasOwnProperty(h)&&(d[h]=p+d[h]);a.setPath(d)}if(m)for(c in m)j[c]=[],l[c]=[],(f=m[c]).alias&&(l[c]=f.alias),f.alternates&&(j[c]=f.alternates);a.addAlias(l),a.addAlternate(j)}return a}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global),Ext.env.Ready={blocks:0<(location.search||"").indexOf("ext-pauseReadyFire")?1:0,bound:0,delay:1,firing:!1,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var a=Ext.env.Ready,b=document;a.bound||("complete"===b.readyState?a.onReadyEvent({type:b.readyState||"body"}):(a.bound=1,Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop&&(a.bound=2,b.addEventListener("deviceready",a.onReadyEvent,!1)),b.addEventListener("DOMContentLoaded",a.onReadyEvent,!1),window.addEventListener("load",a.onReadyEvent,!1)))},block:function(){++this.blocks,Ext.isReady=!1},fireReady:function(){var a=Ext.env.Ready;a.state||(Ext._readyTime=Ext.ticks(),Ext.isDomReady=!0,a.state=1,Ext.feature.detect(!0),a.delay?navigator.standalone?a.timer=Ext.defer(function(){a.timer=null,a.handleReadySoon()},1):a.handleReadySoon():a.handleReady())},handleReady:function(){var a=this;1===a.state&&(a.state=2,Ext._beforeReadyTime=Ext.ticks(),a.invokeAll(),Ext._afterReadyTime=Ext.ticks())},handleReadySoon:function(b){var a=this;a.timer||(a.timer=Ext.defer(function(){a.timer=null,a.handleReady()},b||a.delay))},invoke:function(a){var b=a.delay;b?Ext.defer(a.fn,b,a.scope):Ext.elevateFunction?Ext.elevateFunction(a.fn,a.scope):a.fn.call(a.scope)},invokeAll:function(){Ext.elevateFunction?Ext.elevateFunction(this.doInvokeAll,this):this.doInvokeAll()},doInvokeAll:function(){var c,a=this,b=a.listeners;for(a.blocks||(Ext.isReady=!0),a.firing=!0;b.length;){if(a.sortGeneration!==a.generation&&(a.sortGeneration=a.generation,b.sort(a.sortFn)),c=b.pop(),a.blocks&&!c.dom){b.push(c);break}a.invoke(c)}a.firing=!1},makeListener:function(d,c,b){var a={fn:d,id:++this.nextId,scope:c,dom:!1,priority:0};return b&&Ext.apply(a,b),a.phase=a.dom?0:1,a},on:function(e,d,c){var a=Ext.env.Ready,b=a.makeListener(e,d,c);2!==a.state||a.firing||!b.dom&&a.blocks?(a.listeners.push(b),++a.generation,a.bound||a.bind()):a.invoke(b)},onReadyEvent:function(b){var a=Ext.env.Ready;Ext.elevateFunction?Ext.elevateFunction(a.doReadyEvent,a,arguments):a.doReadyEvent(b)},doReadyEvent:function(b){var a=this;0<a.bound&&(a.unbind(),a.bound=-1),a.state||a.fireReady()},sortFn:function(a,b){return-(a.phase-b.phase||b.priority-a.priority||a.id-b.id)},unblock:function(){var a=this;a.blocks&&(--a.blocks||2!==a.state||a.firing||a.invokeAll())},unbind:function(){var a=this,b=document;1<a.bound&&b.removeEventListener("deviceready",a.onReadyEvent,!1),b.removeEventListener("DOMContentLoaded",a.onReadyEvent,!1),window.removeEventListener("load",a.onReadyEvent,!1)}},function(){var a=Ext.env.Ready;Ext.isIE9m&&Ext.apply(a,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var b=!0;try{document.documentElement.doScroll("left")}catch(c){b=!1}return b&&document.body?a.onReadyEvent({type:"doScroll"}):a.scrollTimer=Ext.defer(a.pollScroll,20),b},bind:function(){if(!a.bound){var c,b=document;try{c=void 0===window.frameElement}catch(d){}if(c&&b.documentElement.doScroll){if(a.pollScroll())return}else a.pollScroll=Ext.emptyFn;"complete"===b.readyState?a.onReadyEvent({type:"already "+(b.readyState||"body")}):(b.attachEvent("onreadystatechange",a.onReadyStateChange),window.attachEvent("onload",a.onReadyEvent),a.bound=1)}},unbind:function(){document.detachEvent("onreadystatechange",a.onReadyStateChange),window.detachEvent("onload",a.onReadyEvent),Ext.isNumber(a.scrollTimer)&&(clearTimeout(a.scrollTimer),a.scrollTimer=null)},onReadyStateChange:function(){var b=document.readyState;a.readyStatesRe.test(b)&&a.onReadyEvent({type:b})}}),Ext.onDocumentReady=function(e,d,b){var c={dom:!0};b&&Ext.apply(c,b),a.on(e,d,c)},Ext.onReady=function(d,c,b){a.on(d,c,b)},Ext.onInternalReady=function(d,c,b){a.on(d,c,Ext.apply({priority:1e3},b))},a.bind()}(),Ext.Loader=new function(){var a=this,b=Ext.ClassManager,i=Ext.Boot,o=Ext.Class,c=Ext.env.Ready,k=Ext.Function.alias,h=["extend","mixins","requires"],j={},m=[],f=[],g=[],l={},d={},e={enabled:!0,scriptChainDelay:!1,disableCaching:!0,disableCachingParam:"_dc",paths:b.paths,preserveScripts:!0,scriptCharset:void 0},n={disableCaching:!0,disableCachingParam:!0,preserveScripts:!0,scriptChainDelay:"loadDelay"};Ext.apply(a,{isInHistory:j,isLoading:!1,history:m,config:e,readyListeners:f,optionalRequires:g,requiresMap:l,hasFileLoadError:!1,scriptsLoading:0,syncModeEnabled:!1,missingQueue:d,init:function(){var d,i,j,e,f,k=document.getElementsByTagName("script"),m=k[k.length-1].src,n=m.substring(0,m.lastIndexOf("/")+1),l=Ext._classPathMetadata,h=Ext.Microloader,g=Ext.manifest;if(b.getPath("Ext")||b.setPath("Ext",n+"src"),l&&(Ext._classPathMetadata=null,a.addClassPathMappings(l)),g&&(d=g.loadOrder,i=Ext.Boot.baseUrl,d&&g.bootRelative))for(j=d.length,e=0;e<j;e++)(f=d[e]).path=i+f.path;h&&(c.block(),h.onMicroloaderReady(function(){c.unblock()}))},setConfig:Ext.Function.flexSetter(function(b,d){if("paths"===b)a.setPath(d);else{e[b]=d;var c=n[b];c&&i.setConfig(!0===c?b:c,d)}return a}),getConfig:function(a){return a?e[a]:e},setPath:function(){return b.setPath.apply(b,arguments),a},addClassPathMappings:function(c){return b.setPath(c),a},addBaseUrlClassPathMappings:function(a){for(var b in a)a[b]=i.baseUrl+a[b];Ext.Loader.addClassPathMappings(a)},getPath:function(a){return b.getPath(a)},require:function(c,f,e,d){if(d)return a.exclude(d).require(c,f,e);var g=b.getNamesByExpression(c);return a.load(g,f,e)},syncRequire:function(){var b=a.syncModeEnabled;a.syncModeEnabled=!0;var c=a.require.apply(a,arguments);return a.syncModeEnabled=b,c},exclude:function(d){var c=b.select({require:function(b,d,c){return a.load(b,d,c)},syncRequire:function(b,f,d){var c=a.syncModeEnabled;a.syncModeEnabled=!0;var e=a.load(b,f,d);return a.syncModeEnabled=c,e}});return c.exclude(d),c},load:function(h,c,k){c&&(c.length&&(c=a.makeLoadCallback(h,c)),c=c.bind(k||Ext.global));var f,i,j,g=[],m=h.length,l=[],n=b.classState;for(i=0;i<m;++i)f=b.resolveName(h[i]),b.isCreated(f)||(g.push(f),d[f]=a.getPath(f),n[f]||l.push(d[f]));return(j=g.length)?(a.missingCount+=j,b.onCreated(function(){c&&Ext.callback(c,k,arguments),a.checkReady()},a,g),e.enabled||Ext.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+(1<g.length?"es":"")+": "+g.join(", ")),l.length?a.loadScripts({url:l,_classNames:g}):a.checkReady()):(c&&c.call(k),a.checkReady()),a.syncModeEnabled&&1===m?b.get(h[0]):a},makeLoadCallback:function(a,c){return function(){for(var e=[],d=a.length;0<d--;)e[d]=b.get(a[d]);return c.apply(this,e)}},onLoadFailure:function(){var b=this,c=b.onError;a.hasFileLoadError=!0,--a.scriptsLoading,c&&c.call(b.userScope,b),a.checkReady()},onLoadSuccess:function(){var b=this,c=b.onLoad;--a.scriptsLoading,c&&c.call(b.userScope,b),a.checkReady()},onReady:function(g,e,h,d){if(h)c.on(g,e,d);else{var b=c.makeListener(g,e,d);a.isLoading?f.push(b):c.invoke(b)}},addUsedClasses:function(b){var c,d,e;if(b)for(d=0,e=(b="string"==typeof b?[b]:b).length;d<e;d++)"string"!=typeof(c=b[d])||Ext.Array.contains(g,c)||g.push(c);return a},triggerReady:function(){var d,b=g;if(a.isLoading&&b.length)g=[],a.require(b);else{for(a.isLoading=!1,f.sort(c.sortFn);f.length&&!a.isLoading;)d=f.pop(),c.invoke(d);c.unblock()}},historyPush:function(c){return!c||j[c]||b.overrideMap[c]||(j[c]=!0,m.push(c)),a},loadScripts:function(g){var b,c=Ext.manifest,f=c&&c.loadOrder,d=c&&c.loadOrderMap;++a.scriptsLoading,f&&!d&&(c.loadOrderMap=d=i.createLoadOrderMap(f)),a.checkReady(),(b=Ext.apply({loadOrder:f,loadOrderMap:d,charset:e.scriptCharset,success:a.onLoadSuccess,failure:a.onLoadFailure,sync:a.syncModeEnabled,_classNames:[]},g)).userScope=b.scope,b.scope=b,i.load(b)},loadScriptsSync:function(c){var b=a.syncModeEnabled;a.syncModeEnabled=!0,a.loadScripts({url:c}),a.syncModeEnabled=b},loadScriptsSyncBasePrefix:function(c){var b=a.syncModeEnabled;a.syncModeEnabled=!0,a.loadScripts({url:c,prependBaseUrl:!0}),a.syncModeEnabled=b},loadScript:function(b){var c=!(b instanceof Array)&&!("string"==typeof b),j=c?b.url:b,f=c&&b.onError,h=c&&b.onLoad,g={url:j,scope:c&&b.scope,onLoad:h,onError:f,_classNames:[]};a.loadScripts(g)},flushMissingQueue:function(){var a,c=0;for(a in d)d[a],b.isCreated(a)||2===b.existCache[a]?delete d[a]:++c;this.missingCount=c},checkReady:function(){var b,d=a.isLoading;a.flushMissingQueue(),(b=a.missingCount+a.scriptsLoading)&&!d?(c.block(),a.isLoading=!!b):!b&&d&&a.triggerReady()}}),Ext.require=k(a,"require"),Ext.syncRequire=k(a,"syncRequire"),Ext.exclude=k(a,"exclude"),o.registerPreprocessor("loader",function(o,g,q,p){var i,e,n,m,d,f,c,r=this,j=[],k=b.getName(o);for(i=0,n=h.length;i<n;i++)if(f=h[i],g.hasOwnProperty(f))if("string"==typeof(c=g[f]))j.push(c);else if(c instanceof Array)for(e=0,m=c.length;e<m;e++)"string"==typeof(d=c[e])&&j.push(d);else if("function"!=typeof c)for(e in c)c.hasOwnProperty(e)&&"string"==typeof(d=c[e])&&j.push(d);if(0!==j.length)return k&&(l[k]=j),(k?a.exclude(k):a).require(j,function(){for(i=0,n=h.length;i<n;i++)if(f=h[i],g.hasOwnProperty(f))if("string"==typeof(c=g[f]))g[f]=b.get(c);else if(c instanceof Array)for(e=0,m=c.length;e<m;e++)"string"==typeof(d=c[e])&&(g[f][e]=b.get(d));else if("function"!=typeof c)for(var a in c)c.hasOwnProperty(a)&&"string"==typeof(d=c[a])&&(g[f][a]=b.get(d));p.call(r,o,g,q)}),!1},!0,"after","className"),b.registerPostprocessor("uses",function(l,m,h){var b,g,j,c,f,d=Ext.manifest,e=d&&d.loadOrder,k=d&&d.classes;if(e&&(g=k[l])&&!isNaN(c=g.idx)){for(f={},j=(b=e[c].uses).length,c=0;c<j;c++)f[b[c]]=!0;0<(b=Ext.Boot.getPathsFromIndexes(f,e,!0)).length&&a.loadScripts({url:b,sequential:!0})}h.uses&&(b=h.uses,a.addUsedClasses(b))}),b.onCreated(a.historyPush),a.init()},Ext._endTime=Ext.ticks(),Ext._beforereadyhandler&&Ext._beforereadyhandler(),Ext.define("Ext.Mixin",function(Mixin){return{statics:{addHook:function(hookFn,targetClass,methodName,mixinClassPrototype){function hook(){var a=arguments,fn=isFunc?hookFn:mixinClassPrototype[hookFn],result=this.callParent(a);return fn.apply(this,a),result}var isFunc=Ext.isFunction(hookFn),existingFn=targetClass.hasOwnProperty(methodName)&&targetClass[methodName];isFunc&&(hookFn.$previous=Ext.emptyFn),hook.$name=methodName,hook.$owner=targetClass.self,existingFn?(hook.$previous=existingFn.$previous,existingFn.$previous=hook):targetClass[methodName]=hook}},onClassExtended:function(cls,data){var parentMixinConfig,befores,afters,extended,mixinConfig=data.mixinConfig,hooks=data.xhooks,superclass=cls.superclass,onClassMixedIn=data.onClassMixedIn;hooks&&(delete data.xhooks,(mixinConfig||(data.mixinConfig=mixinConfig={})).on=hooks),mixinConfig&&((parentMixinConfig=superclass.mixinConfig)&&(data.mixinConfig=mixinConfig=Ext.merge({},parentMixinConfig,mixinConfig)),data.mixinId=mixinConfig.id,befores=mixinConfig.before,afters=mixinConfig.after,hooks=mixinConfig.on,extended=mixinConfig.extended),(befores||afters||hooks||extended)&&(data.onClassMixedIn=function(targetClass){var key,mixin=this.prototype,targetProto=targetClass.prototype;if(befores&&Ext.Object.each(befores,function(key,value){targetClass.addMember(key,function(){if(!1!==mixin[value].apply(this,arguments))return this.callParent(arguments)})}),afters&&Ext.Object.each(afters,function(key,value){targetClass.addMember(key,function(){var ret=this.callParent(arguments);return mixin[value].apply(this,arguments),ret})}),hooks)for(key in hooks)Mixin.addHook(hooks[key],targetProto,key,mixin);extended&&targetClass.onExtended(function(){var args=Ext.Array.slice(arguments,0);return args.unshift(targetClass),extended.apply(this,args)},this),onClassMixedIn&&onClassMixedIn.apply(this,arguments)})}}}),Ext.util=Ext.util||{},Ext.util.DelayedTask=function(fn,scope,args,cancelOnDelay,fireIdleEvent){function call(){var globalEvents=Ext.GlobalEvents;clearInterval(me.id),me.id=null,fn.apply(scope,args||[]),!1!==fireIdleEvent&&globalEvents.hasListeners.idle&&globalEvents.fireEvent("idle")}var delay,me=this;cancelOnDelay="boolean"!=typeof cancelOnDelay||cancelOnDelay,me.id=null,me.delay=function(newDelay,newFn,newScope,newArgs){cancelOnDelay&&me.cancel(),"number"==typeof newDelay&&(delay=newDelay),fn=newFn||fn,scope=newScope||scope,args=newArgs||args,me.id||(me.id=Ext.interval(call,delay))},me.cancel=function(){me.id&&(clearInterval(me.id),me.id=null)}},Ext.define("Ext.util.Event",function(){var arraySlice=Array.prototype.slice,arrayInsert=Ext.Array.insert,toArray=Ext.Array.toArray,fireArgs={};return{isEvent:!0,suspended:0,noOptions:{},constructor:function(observable,name){this.name=name,this.observable=observable,this.listeners=[]},addListener:function(fn,scope,options,caller,manager){var listeners,listener,priority,isNegativePriority,highestNegativePriorityIndex,hasNegativePriorityIndex,length,index,i,me=this,added=!1,observable=me.observable,eventName=me.name;if(-1===me.findListener(fn,scope)){if(listener=me.createListener(fn,scope,options,caller,manager),me.firing&&(me.listeners=me.listeners.slice(0)),index=length=(listeners=me.listeners).length,priority=options&&options.priority,hasNegativePriorityIndex=void 0!==(highestNegativePriorityIndex=me._highestNegativePriorityIndex),priority)if(!(isNegativePriority=priority<0)||hasNegativePriorityIndex){for(i=isNegativePriority?highestNegativePriorityIndex:0;i<length;i++)if((listeners[i].o&&listeners[i].o.priority||0)<priority){index=i;break}}else me._highestNegativePriorityIndex=index;else hasNegativePriorityIndex&&(index=highestNegativePriorityIndex);!isNegativePriority&&index<=highestNegativePriorityIndex&&me._highestNegativePriorityIndex++,index===length?listeners[length]=listener:arrayInsert(listeners,index,[listener]),observable.isElement&&observable._getPublisher(eventName).subscribe(observable,eventName,!1!==options.delegated,options.capture),added=!0}return added},createListener:function(fn,scope,o,caller,manager){var type,me=this,namedScope=Ext._namedScopes[scope],listener={fn:fn,scope:scope,ev:me,caller:caller,manager:manager,namedScope:namedScope,defaultScope:namedScope?scope||me.observable:void 0,lateBound:"string"==typeof fn},handler=fn,wrapped=!1;return o&&((listener.o=o).single&&(handler=me.createSingle(handler,listener,o,scope),wrapped=!0),o.target&&(handler=me.createTargeted(handler,listener,o,scope,wrapped),wrapped=!0),o.delay&&(handler=me.createDelayed(handler,listener,o,scope,wrapped),wrapped=!0),o.buffer&&(handler=me.createBuffered(handler,listener,o,scope,wrapped),wrapped=!0),me.observable.isElement&&(type=o.type)&&(listener.type=type)),listener.fireFn=handler,listener.wrapped=wrapped,listener},findListener:function(fn,scope){for(var listener,listeners=this.listeners,i=listeners.length;i--;)if((listener=listeners[i])&&listener.fn===fn&&listener.scope==scope)return i;return-1},removeListener:function(fn,scope,index){var listener,highestNegativePriorityIndex,options,k,manager,managedListeners,managedListener,i,me=this,removed=!1,observable=me.observable,eventName=me.name;if(-1!=(index=index||me.findListener(fn,scope))){if(options=(listener=me.listeners[index]).o,highestNegativePriorityIndex=me._highestNegativePriorityIndex,me.firing&&(me.listeners=me.listeners.slice(0)),listener.task&&(listener.task.cancel(),delete listener.task),k=listener.tasks&&listener.tasks.length){for(;k--;)listener.tasks[k].cancel();delete listener.tasks}if(me.listeners.splice(index,1),(manager=listener.manager)&&(managedListeners=manager.managedListeners))for(i=managedListeners.length;i--;)(managedListener=managedListeners[i]).item===me.observable&&managedListener.ename===eventName&&managedListener.fn===fn&&managedListener.scope===scope&&managedListeners.splice(i,1);highestNegativePriorityIndex&&(index<highestNegativePriorityIndex?me._highestNegativePriorityIndex--:index===highestNegativePriorityIndex&&index===me.listeners.length&&delete me._highestNegativePriorityIndex),observable.isElement&&observable._getPublisher(eventName).unsubscribe(observable,eventName,!1!==options.delegated,options.capture),removed=!0}return removed},clearListeners:function(){for(var listener,listeners=this.listeners,i=listeners.length;i--;)listener=listeners[i],this.removeListener(listener.fn,listener.scope)},suspend:function(){++this.suspended},resume:function(){this.suspended&&--this.suspended},isSuspended:function(){return 0<this.suspended},fireDelegated:function(firingObservable,args){return this.firingObservable=firingObservable,this.fire.apply(this,args)},fire:function(){var options,delegate,fireInfo,i,args,listener,len,delegateEl,currentTarget,type,chained,firingArgs,e,fireFn,fireScope,me=this,listeners=me.listeners,count=listeners.length,observable=me.observable,isElement=observable.isElement,isComponent=observable.isComponent,firingObservable=me.firingObservable;if(!me.suspended&&0<count)for(me.firing=!0,len=(args=arguments.length?arraySlice.call(arguments,0):[]).length,isElement&&(e=args[0]),i=0;i<count;i++){if(options=(listener=listeners[i]).o,isElement&&(currentTarget&&e.setCurrentTarget(currentTarget),(type=listener.type)&&(chained=e,e=args[0]=chained.chain({type:type})),Ext.EventObject=e),firingArgs=args,options){if(delegate=options.delegate)if(isElement){if(!(delegateEl=e.getTarget("#"+e.currentTarget.id+" "+delegate)))continue;args[1]=delegateEl,currentTarget=e.currentTarget,e.setCurrentTarget(delegateEl)}else if(isComponent&&!firingObservable.is("#"+observable.id+" "+options.delegate))continue;isElement&&(options.preventDefault&&e.preventDefault(),options.stopPropagation&&e.stopPropagation(),options.stopEvent&&e.stopEvent()),(args[len]=options).args&&(firingArgs=options.args.concat(args))}if(fireFn=(fireInfo=me.getFireInfo(listener)).fn,fireScope=fireInfo.scope,fireInfo.fn=fireInfo.scope=null,!1===fireFn.apply(fireScope,firingArgs))return Ext.EventObject=null,me.firing=!1;chained&&(e=args[0]=chained,chained=null),Ext.EventObject=null}return!(me.firing=!1)},getFireInfo:function(listener,fromWrapped){var fn,observable=this.observable,fireFn=listener.fireFn,scope=listener.scope,namedScope=listener.namedScope;return!fromWrapped&&listener.wrapped?fireArgs.fn=fireFn:(fn=fromWrapped?listener.fn:fireFn,listener.lateBound?(scope&&!namedScope||(scope=(listener.caller||observable).resolveListenerScope(listener.defaultScope)),fn=scope[fn]):namedScope&&namedScope.isController?scope=(listener.caller||observable).resolveListenerScope(listener.defaultScope):scope&&!namedScope||(scope=observable),fireArgs.fn=fn,fireArgs.scope=scope),fireArgs},createTargeted:function(handler,listener,o,scope,wrapped){return function(){var fireInfo;if(o.target===arguments[0])return wrapped||(fireInfo=listener.ev.getFireInfo(listener,!0),handler=fireInfo.fn,scope=fireInfo.scope,fireInfo.fn=fireInfo.scope=null),handler.apply(scope,arguments)}},createBuffered:function(handler,listener,o,scope,wrapped){return listener.task=new Ext.util.DelayedTask,function(){var fireInfo;wrapped||(fireInfo=listener.ev.getFireInfo(listener,!0),handler=fireInfo.fn,scope=fireInfo.scope,fireInfo.fn=fireInfo.scope=null),listener.task.delay(o.buffer,handler,scope,toArray(arguments))}},createDelayed:function(handler,listener,o,scope,wrapped){return function(){var fireInfo,task=new Ext.util.DelayedTask;wrapped||(fireInfo=listener.ev.getFireInfo(listener,!0),handler=fireInfo.fn,scope=fireInfo.scope,fireInfo.fn=fireInfo.scope=null),listener.tasks||(listener.tasks=[]),listener.tasks.push(task),task.delay(o.delay||10,handler,scope,toArray(arguments))}},createSingle:function(handler,listener,o,scope,wrapped){return function(){var fireInfo,event=listener.ev;return event.removeListener(listener.fn,scope)&&event.observable&&event.observable.hasListeners[event.name]--,wrapped||(fireInfo=event.getFireInfo(listener,!0),handler=fireInfo.fn,scope=fireInfo.scope,fireInfo.fn=fireInfo.scope=null),handler.apply(scope,arguments)}}}}),Ext.define("Ext.mixin.Identifiable",{statics:{uniqueIds:{}},isIdentifiable:!0,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:function(){var prototype,separator,xtype,uniqueIds,prefix,id=this.id;return id||0===id||(prototype=this.self.prototype,separator=this.defaultIdSeparator,uniqueIds=Ext.mixin.Identifiable.uniqueIds,prototype.hasOwnProperty("identifiablePrefix")||(prefix=(xtype=this.xtype)?this.defaultIdPrefix+xtype.replace(this.idCleanRegex,separator)+separator:(prefix=prototype.$className)?prefix.replace(this.idCleanRegex,separator).toLowerCase()+separator:this.defaultIdPrefix+"anonymous"+separator,prototype.identifiablePrefix=prefix),prefix=this.identifiablePrefix,uniqueIds.hasOwnProperty(prefix)||(uniqueIds[prefix]=0),id=this.id=this.id=prefix+ ++uniqueIds[prefix]),this.getUniqueId=this.getOptimizedId,id},setId:function(id){this.id=this.id=id},getId:function(){var id=this.id;return id=id||this.getUniqueId(),this.getId=this.getOptimizedId,id}}),Ext.define("Ext.mixin.Observable",function(Observable){var emptyFn=Ext.emptyFn,emptyArray=[],arraySlice=Array.prototype.slice,ListenerRemover=function(observable){if(observable instanceof ListenerRemover)return observable;this.observable=observable,arguments[1].isObservable&&(this.managedListeners=!0),this.args=arraySlice.call(arguments,1)};return ListenerRemover.prototype.destroy=function(){this.destroy=Ext.emptyFn;var observable=this.observable;observable[this.managedListeners?"mun":"un"].apply(observable,this.args)},{extend:Ext.Mixin,mixinConfig:{id:"observable",after:{destroy:"clearListeners"}},mixins:[Ext.mixin.Identifiable],statics:{releaseCapture:function(o){o.fireEventArgs=this.prototype.fireEventArgs},capture:function(o,fn,scope){this.captureArgs(o,function(eventName,args){return fn.apply(scope,[eventName].concat(args))},scope)},captureArgs:function(o,fn,scope){o.fireEventArgs=Ext.Function.createInterceptor(o.fireEventArgs,fn,scope)},observe:function(cls,listeners){return cls&&(cls.isObservable||(Ext.applyIf(cls,new this),this.captureArgs(cls.prototype,cls.fireEventArgs,cls)),Ext.isObject(listeners)&&cls.on(listeners)),cls},prepareClass:function(T,mixin,data){var scope,namedScope,listeners=T.listeners=[],target=data||T.prototype,targetListeners=target.listeners,superListeners=mixin?mixin.listeners:T.superclass.self.listeners;if(superListeners&&listeners.push(superListeners),targetListeners&&((scope=targetListeners.scope)?(namedScope=Ext._namedScopes[scope])&&namedScope.isController&&(targetListeners.scope="self.controller"):targetListeners.scope="self",listeners.push(targetListeners),target.listeners=null),!T.HasListeners){function HasListeners(){}var SuperHL=T.superclass.HasListeners||mixin&&mixin.HasListeners||Observable.HasListeners;T.prototype.HasListeners=T.HasListeners=HasListeners,HasListeners.prototype=T.hasListeners=new SuperHL}}},isObservable:!0,eventsSuspended:0,constructor:function(config){var declaredListeners,listeners,bubbleEvents,len,i,me=this,self=me.self;if(!me.$observableInitialized){if(me.$observableInitialized=!0,me.hasListeners=new me.HasListeners,me.eventedBeforeEventNames={},me.events=me.events||{},(declaredListeners=self.listeners)&&!me._addDeclaredListeners(declaredListeners)&&(self.listeners=null),listeners=config&&config.listeners||me.listeners)if(listeners instanceof Array)for(i=0,len=listeners.length;i<len;++i)me.addListener(listeners[i]);else me.addListener(listeners);(bubbleEvents=config&&config.bubbleEvents||me.bubbleEvents)&&me.enableBubble(bubbleEvents),me.$applyConfigs?config&&Ext.apply(me,config):me.initConfig(config),listeners&&(me.listeners=null)}},onClassExtended:function(T,data){T.HasListeners||Observable.prepareClass(T,T.prototype.$observableMixedIn?void 0:data)},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(listeners){var me=this;return listeners instanceof Array?Ext.each(listeners,me._addDeclaredListeners,me):(me._addedDeclaredListeners=!0,me.addListener(listeners)),me._addedDeclaredListeners},addManagedListener:function(item,ename,fn,scope,options,noDestroy){var config,passedOptions,me=this;me.managedListeners=me.managedListeners||[];if("string"!=typeof ename){for(ename in passedOptions=4<arguments.length?options:ename,options=ename)options.hasOwnProperty(ename)&&(config=options[ename],item.$eventOptions[ename]||me.addManagedListener(item,ename,config.fn||config,config.scope||options.scope||scope,config.fn?config:passedOptions,!0));if(options&&options.destroyable)return new ListenerRemover(me,item,options)}else if(fn!==emptyFn&&(item.doAddListener(ename,fn,scope,options,null,me,me),!noDestroy&&options&&options.destroyable))return new ListenerRemover(me,item,ename,fn,scope)},removeManagedListener:function(item,ename,fn,scope){var options,config,managedListeners,length,i;if("string"!=typeof ename)for(ename in options=ename)options.hasOwnProperty(ename)&&(config=options[ename],item.$eventOptions[ename]||this.removeManagedListener(item,ename,config.fn||config,config.scope||options.scope||scope));else for(managedListeners=this.managedListeners?this.managedListeners.slice():[],ename=Ext.canonicalEventName(ename),i=0,length=managedListeners.length;i<length;i++)this.removeManagedListenerItem(!1,managedListeners[i],item,ename,fn,scope)},fireEvent:function(eventName){return this.fireEventArgs(eventName,arraySlice.call(arguments,1))},resolveListenerScope:function(defaultScope){var namedScope=Ext._namedScopes[defaultScope];return namedScope&&(namedScope.isSelf||namedScope.isThis)&&(defaultScope=null),defaultScope||this},fireEventArgs:function(eventName,args){eventName=Ext.canonicalEventName(eventName);var events=this.events,event=events&&events[eventName],ret=!0;return this.hasListeners[eventName]&&(ret=this.doFireEvent(eventName,args||emptyArray,!!event&&event.bubble)),ret},fireAction:function(eventName,args,fn,scope,options,order){"string"!=typeof fn||scope||(fn=this[fn]),(options=options?Ext.Object.chain(options):{}).single=!0,options.priority="after"===order?-99.5:99.5,this.doAddListener(eventName,fn,scope,options),this.fireEventArgs(eventName,args)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var args,ret,me=this,fn=me.fn,scope=me.scope,fnArgs=me.fnArgs;me.owner;if(!--me._paused){if(fn&&(args=Ext.Array.slice(fnArgs||me.args),!1===fnArgs&&args.shift(),me.fn=null,args.push(me),Ext.isFunction(fn)?ret=fn.apply(scope,args):scope&&Ext.isString(fn)&&Ext.isFunction(scope[fn])&&(ret=scope[fn].apply(scope,args)),!1===ret))return!1;if(!me._paused)return me.owner.fireEventArgs(me.eventName,me.args)}}},fireEventedAction:function(eventName,args,fn,scope,fnArgs){var value,eventedBeforeEventNames=this.eventedBeforeEventNames,beforeEventName=eventedBeforeEventNames[eventName]||(eventedBeforeEventNames[eventName]="before"+eventName),controller=Ext.apply({owner:this,eventName:eventName,fn:fn,scope:scope,fnArgs:fnArgs,args:args},this.$eventedController);return args.push(controller),value=this.fireEventArgs(beforeEventName,args),args.pop(),!1!==value&&controller.resume()},doFireEvent:function(eventName,args,bubbles){var queue,event,target=this,ret=!0;do{if(target.eventsSuspended)return(queue=target.eventQueue)&&queue.push([eventName,args]),ret;if((event=target.events&&target.events[eventName])&&!0!==event&&!1===(ret=event.fire.apply(event,args)))break}while(bubbles&&(target=target.getBubbleParent()));return ret},getBubbleParent:function(){var parent=this.getBubbleTarget&&this.getBubbleTarget();return parent&&parent.isObservable?parent:null},addListener:function(ename,fn,scope,options,order,caller){var config,namedScope,isClassListener,innerScope,eventOptions,me=this,namedScopes=Ext._namedScopes;if("string"!=typeof ename){for(ename in isClassListener=(namedScope=(scope=(options=ename).scope)&&namedScopes[scope])&&namedScope.isSelf,eventOptions=(me.isComponent||me.isWidget)&&options.element?me.$elementEventOptions:me.$eventOptions,options)config=options[ename],eventOptions[ename]||((innerScope=config.scope)&&isClassListener&&(namedScope=namedScopes[innerScope])&&namedScope.isController&&(innerScope="self.controller"),me.doAddListener(ename,config.fn||config,innerScope||scope,config.fn?config:options,order,caller));if(options&&options.destroyable)return new ListenerRemover(me,options)}else if(me.doAddListener(ename,fn,scope,options,order,caller),options&&options.destroyable)return new ListenerRemover(me,ename,fn,scope,options);return me},removeListener:function(ename,fn,scope,eventOptions){var config,options,me=this;if("string"!=typeof ename)for(ename in options=ename,eventOptions=eventOptions||me.$eventOptions,options)options.hasOwnProperty(ename)&&(config=options[ename],me.$eventOptions[ename]||me.doRemoveListener(ename,config.fn||config,config.scope||options.scope));else me.doRemoveListener(ename,fn,scope);return me},onBefore:function(eventName,fn,scope,options){return this.addListener(eventName,fn,scope,options,"before")},onAfter:function(eventName,fn,scope,options){return this.addListener(eventName,fn,scope,options,"after")},unBefore:function(eventName,fn,scope,options){return this.removeListener(eventName,fn,scope,options,"before")},unAfter:function(eventName,fn,scope,options){return this.removeListener(eventName,fn,scope,options,"after")},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var event,key,events=this.events,hasListeners=this.hasListeners;if(events){for(key in events)events.hasOwnProperty(key)&&(event=events[key]).isEvent&&(delete hasListeners[key],event.clearListeners());this.events=null}this.clearManagedListeners()},clearManagedListeners:function(){for(var managedListeners=this.managedListeners?this.managedListeners.slice():[],i=0,len=managedListeners.length;i<len;i++)this.removeManagedListenerItem(!0,managedListeners[i]);this.managedListeners=[]},removeManagedListenerItem:function(isClear,managedListener,item,ename,fn,scope){!isClear&&(managedListener.item!==item||managedListener.ename!==ename||fn&&managedListener.fn!==fn||scope&&managedListener.scope!==scope)||(managedListener.item.doRemoveListener(managedListener.ename,managedListener.fn,managedListener.scope,managedListener.options),isClear||Ext.Array.remove(this.managedListeners,managedListener))},hasListener:function(ename){return ename=Ext.canonicalEventName(ename),!!this.hasListeners[ename]},isSuspended:function(event){var suspended=0<this.eventsSuspended,events=this.events;return!suspended&&event&&events&&(event=events[event])&&event.isEvent?event.isSuspended():suspended},suspendEvents:function(queueSuspended){++this.eventsSuspended,queueSuspended&&!this.eventQueue&&(this.eventQueue=[])},suspendEvent:function(){var i,event,ename,events=this.events,len=arguments.length;for(i=0;i<len;i++)ename=arguments[i],(event=events[ename=Ext.canonicalEventName(ename)])&&event.isEvent||(event=this._initEvent(ename)),event.suspend()},resumeEvent:function(){var i,event,events=this.events||0,len=events&&arguments.length;for(i=0;i<len;i++)(event=events[arguments[i]])&&event.resume&&event.resume()},resumeEvents:function(discardQueue){var qLen,q,me=this,queued=me.eventQueue;if(me.eventsSuspended&&!--me.eventsSuspended&&(delete me.eventQueue,!discardQueue&&queued))for(qLen=queued.length,q=0;q<qLen;q++)me.fireEventArgs.apply(me,queued[q])},relayEvents:function(origin,events,prefix){var oldName,newName,len=events.length,i=0,relayers={};if(Ext.isObject(events))for(i in events)newName=events[i],relayers[i]=this.createRelayer(newName);else for(;i<len;i++)relayers[oldName=events[i]]=this.createRelayer(prefix?prefix+oldName:oldName);return this.mon(origin,relayers,null,null,void 0),new ListenerRemover(this,origin,relayers)},createRelayer:function(newName,beginEnd){var me=this;return function(){return me.fireEventArgs.call(me,newName,beginEnd?arraySlice.apply(arguments,beginEnd):arguments)}},enableBubble:function(eventNames){if(eventNames){var ename,event,i,names="string"==typeof eventNames?arguments:eventNames,events=this.events,length=events&&names.length;for(i=0;i<length;++i)ename=names[i],(event=events[ename=Ext.canonicalEventName(ename)])&&event.isEvent||(event=this._initEvent(ename)),this.hasListeners._incr_(ename),event.bubble=!0}},destroy:function(){this.clearListeners(),this.callParent()},privates:{doAddListener:function(ename,fn,scope,options,order,caller,manager){var event,me=this;(order=order||options&&options.order)&&(options&&options.priority||((options=options?Ext.Object.chain(options):{}).priority=me.$orderToPriority[order])),ename=Ext.canonicalEventName(ename),!manager&&scope&&scope.isObservable&&scope!==me&&(manager=scope),manager&&(manager.managedListeners=manager.managedListeners||[]).push({item:me,ename:ename,fn:fn,scope:scope,options:options}),(event=(me.events||(me.events={}))[ename])&&event.isEvent||(event=me._initEvent(ename)),fn!==emptyFn&&event.addListener(fn,scope,options,caller,manager)&&me.hasListeners._incr_(ename)},doRemoveListener:function(ename,fn,scope){var event,events=this.events;ename=Ext.canonicalEventName(ename),(event=events&&events[ename])&&event.isEvent&&event.removeListener(fn,scope)&&this.hasListeners._decr_(ename)},_initEvent:function(eventName){return this.events[eventName]=new Ext.util.Event(this,eventName)}},deprecated:{"5.0":{methods:{addEvents:null}}}}},function(){function HasListeners(){}var Observable=this,proto=Observable.prototype,prepareMixin=function(T){if(!T.HasListeners){var proto=T.prototype;proto.$observableMixedIn=1,Observable.prepareClass(T,this),T.onExtended(function(U,data){Observable.prepareClass(U,null,data)}),proto.onClassMixedIn?Ext.override(T,{onClassMixedIn:function(U){prepareMixin.call(this,U),this.callParent(arguments)}}):proto.onClassMixedIn=function(U){prepareMixin.call(this,U)}}superOnClassMixedIn.call(this,T)},superOnClassMixedIn=proto.onClassMixedIn;function getMethodEvent(method){var returnValue,v,cancel,makeCall,e=(this.methodEvents=this.methodEvents||{})[method],obj=this;return e||(this.methodEvents[method]=e={},e.originalFn=this[method],e.methodName=method,e.before=[],e.after=[],makeCall=function(fn,scope,args){void 0!==(v=fn.apply(scope||obj,args))&&("object"==typeof v?(returnValue=void 0!==v.returnValue?v.returnValue:v,cancel=!!v.cancel):!1===v?cancel=!0:returnValue=v)},this[method]=function(){var b,i,len,args=Array.prototype.slice.call(arguments,0);for(returnValue=v=void 0,cancel=!1,i=0,len=e.before.length;i<len;i++)if(b=e.before[i],makeCall(b.fn,b.scope,args),cancel)return returnValue;for(void 0!==(v=e.originalFn.apply(obj,args))&&(returnValue=v),i=0,len=e.after.length;i<len;i++)if(b=e.after[i],makeCall(b.fn,b.scope,args),cancel)return returnValue;return returnValue}),e}HasListeners.prototype={_decr_:function(ev,count){null==count&&(count=1),(this[ev]-=count)||delete this[ev]},_incr_:function(ev){this.hasOwnProperty(ev)?++this[ev]:this[ev]=1}},proto.HasListeners=Observable.HasListeners=HasListeners,Observable.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener",setListeners:"addListener"}),Observable.observeClass=Observable.observe,Ext.apply(proto,{onClassMixedIn:prepareMixin,beforeMethod:function(method,fn,scope){getMethodEvent.call(this,method).before.push({fn:fn,scope:scope})},afterMethod:function(method,fn,scope){getMethodEvent.call(this,method).after.push({fn:fn,scope:scope})},removeMethodListener:function(method,fn,scope){var i,len,e=this.getMethodEvent(method);for(i=0,len=e.before.length;i<len;i++)if(e.before[i].fn==fn&&e.before[i].scope==scope)return void Ext.Array.erase(e.before,i,1);for(i=0,len=e.after.length;i<len;i++)if(e.after[i].fn==fn&&e.after[i].scope==scope)return void Ext.Array.erase(e.after,i,1)},toggleEventLogging:function(toggle){Ext.util.Observable[toggle?"capture":"releaseCapture"](this,function(en){Ext.isDefined(Ext.global.console)&&Ext.global.console.log(en,arguments)})}})}),Ext.define("Ext.util.HashMap",{mixins:[Ext.mixin.Observable],generation:0,config:{keyFn:null},constructor:function(config){var fn,me=this;me.mixins.observable.constructor.call(me,config),me.clear(!0),(fn=me.getKeyFn())&&(me.getKey=fn)},getCount:function(){return this.length},getData:function(key,value){return void 0===value&&(value=key,key=this.getKey(value)),[key,value]},getKey:function(o){return o.id},add:function(key,value){var me=this;return 1===arguments.length&&(value=key,key=me.getKey(value)),me.containsKey(key)?me.replace(key,value):(me.map[key]=value,++me.length,me.generation++,me.hasListeners.add&&me.fireEvent("add",me,key,value),value)},replace:function(key,value){var old,me=this,map=me.map;return 1===arguments.length&&(value=key,key=me.getKey(value)),me.containsKey(key)||me.add(key,value),old=map[key],map[key]=value,me.generation++,me.hasListeners.replace&&me.fireEvent("replace",me,key,value,old),value},remove:function(o){var key=this.findKey(o);return void 0!==key&&this.removeAtKey(key)},removeAtKey:function(key){var value,me=this;return!!me.containsKey(key)&&(value=me.map[key],delete me.map[key],--me.length,me.generation++,me.hasListeners.remove&&me.fireEvent("remove",me,key,value),!0)},get:function(key){var map=this.map;return map.hasOwnProperty(key)?map[key]:void 0},clear:function(initial){var me=this;return(initial||me.generation)&&(me.map={},me.length=0,me.generation=initial?0:me.generation+1),!0!==initial&&me.hasListeners.clear&&me.fireEvent("clear",me),me},containsKey:function(key){var map=this.map;return map.hasOwnProperty(key)&&void 0!==map[key]},contains:function(value){return this.containsKey(this.findKey(value))},getKeys:function(){return this.getArray(!0)},getValues:function(){return this.getArray(!1)},getArray:function(isKey){var key,arr=[],map=this.map;for(key in map)map.hasOwnProperty(key)&&arr.push(isKey?key:map[key]);return arr},each:function(fn,scope){var key,items=Ext.apply({},this.map),length=this.length;for(key in scope=scope||this,items)if(items.hasOwnProperty(key)&&!1===fn.call(scope,key,items[key],length))break;return this},clone:function(){var key,hash=new this.self(this.initialConfig),map=this.map;for(key in hash.suspendEvents(),map)map.hasOwnProperty(key)&&hash.add(key,map[key]);return hash.resumeEvents(),hash},findKey:function(value){var key,map=this.map;for(key in map)if(map.hasOwnProperty(key)&&map[key]===value)return key},destroy:function(){this.callParent(),this.map=null}},function(HashMap){var prototype=HashMap.prototype;prototype.removeByKey=prototype.removeAtKey}),Ext.define("Ext.promise.Consequence",function(Consequence){return{promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(onFulfilled,onRejected,onProgress){var me=this;me.onFulfilled=onFulfilled,me.onRejected=onRejected,me.onProgress=onProgress,me.deferred=new Ext.promise.Deferred,me.promise=me.deferred.promise},trigger:function(action,value){var me=this,deferred=me.deferred;switch(action){case"fulfill":me.propagate(value,me.onFulfilled,deferred,deferred.resolve);break;case"reject":me.propagate(value,me.onRejected,deferred,deferred.reject)}},update:function(progress){Ext.isFunction(this.onProgress)&&(progress=this.onProgress(progress)),this.deferred.update(progress)},propagate:function(value,callback,deferred,deferredMethod){Ext.isFunction(callback)?this.schedule(function(){try{deferred.resolve(callback(value))}catch(e){deferred.reject(e)}}):deferredMethod.call(this.deferred,value)},schedule:function(callback){var n=Consequence.queueSize++;Consequence.queue[n]=callback,n||Ext.asap(Consequence.dispatch)},statics:{queue:new Array(1e4),queueSize:0,dispatch:function(){var fn,i,queue=Consequence.queue;for(i=0;i<Consequence.queueSize;++i)fn=queue[i],queue[i]=null,fn();Consequence.queueSize=0}}}}),Ext.define("Ext.promise.Deferred",{promise:null,consequences:[],completed:!1,completionAction:null,completionValue:null,constructor:function(){var me=this;me.promise=new Ext.promise.Promise(me),me.consequences=[],me.completed=!1,me.completionAction=null,me.completionValue=null},then:function(onFulfilled,onRejected,onProgress){var consequence=new Ext.promise.Consequence(onFulfilled,onRejected,onProgress);return this.completed?consequence.trigger(this.completionAction,this.completionValue):this.consequences.push(consequence),consequence.promise},resolve:function(value){var isHandled,thenFn,me=this;if(!me.completed)try{if(value===me.promise)throw new TypeError("A Promise cannot be resolved with itself.");if((Ext.isObject(value)||Ext.isFunction(value))&&Ext.isFunction(thenFn=value.then)){isHandled=!1;try{thenFn.call(value,function(value){isHandled||(isHandled=!0,me.resolve(value))},function(error){isHandled||(isHandled=!0,me.reject(error))})}catch(e){isHandled||me.reject(e)}}else me.complete("fulfill",value)}catch(e){me.reject(e)}},reject:function(reason){this.completed||this.complete("reject",reason)},update:function(progress){var i,len,consequences=this.consequences;if(!this.completed)for(i=0,len=consequences.length;i<len;i++)consequences[i].update(progress)},complete:function(action,value){var i,len,me=this,consequences=me.consequences;for(me.completionAction=action,me.completionValue=value,me.completed=!0,i=0,len=consequences.length;i<len;i++)consequences[i].trigger(me.completionAction,me.completionValue);me.consequences=null}}),Ext.define("Ext.promise.Promise",function(ExtPromise){var Deferred;return{statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){Deferred=Ext.promise.Deferred},all:function(promisesOrValues){return ExtPromise.when(promisesOrValues).then(function(promisesOrValues){var index,promiseOrValue,resolve,i,len,deferred=new Deferred,remainingToResolve=promisesOrValues.length,results=new Array(remainingToResolve);if(remainingToResolve)for(resolve=function(item,index){return ExtPromise.when(item).then(function(value){return results[index]=value,--remainingToResolve||deferred.resolve(results),value},function(reason){return deferred.reject(reason)})},index=i=0,len=promisesOrValues.length;i<len;index=++i)promiseOrValue=promisesOrValues[index],index in promisesOrValues?resolve(promiseOrValue,index):remainingToResolve--;else deferred.resolve(results);return deferred.promise})},is:function(value){return(Ext.isObject(value)||Ext.isFunction(value))&&Ext.isFunction(value.then)},rethrowError:function(error){Ext.asap(function(){throw error})},when:function(value){var deferred=new Ext.promise.Deferred;return deferred.resolve(value),deferred.promise}},owner:null,constructor:function(owner){this.owner=owner},then:function(onFulfilled,onRejected,onProgress,scope){var ref;return 1===arguments.length&&Ext.isObject(onFulfilled)&&(onFulfilled=(ref=onFulfilled).success,onRejected=ref.failure,onProgress=ref.progress,scope=ref.scope),scope&&(onFulfilled=onFulfilled&&Ext.Function.bind(onFulfilled,scope),onRejected=onRejected&&Ext.Function.bind(onRejected,scope),onProgress=onProgress&&Ext.Function.bind(onProgress,scope)),this.owner.then(onFulfilled,onRejected,onProgress)},otherwise:function(onRejected,scope){var ref;return 1===arguments.length&&Ext.isObject(onRejected)&&(onRejected=(ref=onRejected).fn,scope=ref.scope),null!=scope&&(onRejected=Ext.Function.bind(onRejected,scope)),this.owner.then(null,onRejected)},always:function(onCompleted,scope){var ref;return 1===arguments.length&&Ext.isObject(onCompleted)&&(onCompleted=(ref=onCompleted).fn,scope=ref.scope),null!=scope&&(onCompleted=Ext.Function.bind(onCompleted,scope)),this.owner.then(function(value){try{onCompleted()}catch(e){ExtPromise.rethrowError(e)}return value},function(reason){try{onCompleted()}catch(e){ExtPromise.rethrowError(e)}throw reason})},done:function(){this.owner.then(null,ExtPromise.rethrowError)},cancel:function(reason){null==reason&&(reason=null),this.owner.reject(new this.self.CancellationError(reason))},log:function(identifier){return null==identifier&&(identifier=""),this._owner.then(function(value){return Ext.log((identifier||"Promise")+" resolved with value: "+value),value},function(reason){throw Ext.log((identifier||"Promise")+" rejected with reason: "+reason),reason})}}},function(ExtPromise){ExtPromise._ready()}),Ext.define("Ext.Promise",function(){var Polyfiller;return{statics:{_ready:function(){Polyfiller=Ext.promise.Promise},all:function(){return Polyfiller.all.apply(Polyfiller,arguments)},race:function(){},reject:function(reason){var deferred=new Ext.promise.Deferred;return deferred.reject(reason),deferred.promise},resolve:function(value){var deferred=new Ext.promise.Deferred;return deferred.resolve(value),deferred.promise}},constructor:function(action){var deferred=new Ext.promise.Deferred;return action(deferred.resolve.bind(deferred),deferred.reject.bind(deferred)),deferred.promise}}},function(ExtPromise){var P=Ext.global.Promise;P&&P.resolve?Ext.Promise=P:ExtPromise._ready()}),Ext.define("Ext.Deferred",function(Deferred){var ExtPromise;return{extend:Ext.promise.Deferred,statics:{_ready:function(){ExtPromise=Ext.promise.Promise,Ext.Promise.resolve},all:function(){return ExtPromise.all.apply(ExtPromise,arguments)},any:function(promisesOrValues){return Deferred.some(promisesOrValues,1).then(function(array){return array[0]},function(error){if(!(error instanceof Error&&"Too few Promises were resolved."===error.message))throw error;Ext.raise("No Promises were resolved.")})},delay:function(promiseOrValue,milliseconds){var deferred;return 1===arguments.length&&(milliseconds=promiseOrValue,promiseOrValue=void 0),milliseconds=Math.max(milliseconds,0),deferred=new Deferred,setTimeout(function(){deferred.resolve(promiseOrValue)},milliseconds),deferred.promise},map:function(promisesOrValues,mapFn){return Deferred.resolved(promisesOrValues).then(function(promisesOrValues){var deferred,index,promiseOrValue,remainingToResolve,resolve,results,i,len;if(remainingToResolve=promisesOrValues.length,results=new Array(promisesOrValues.length),deferred=new Deferred,remainingToResolve)for(resolve=function(item,index){return Deferred.resolved(item).then(function(value){return mapFn(value,index,results)}).then(function(value){return results[index]=value,--remainingToResolve||deferred.resolve(results),value},function(reason){return deferred.reject(reason)})},index=i=0,len=promisesOrValues.length;i<len;index=++i)promiseOrValue=promisesOrValues[index],index in promisesOrValues?resolve(promiseOrValue,index):remainingToResolve--;else deferred.resolve(results);return deferred.promise})},memoize:function(fn,scope,hashFn){var memoizedFn=Ext.Function.memoize(fn,scope,hashFn);return function(){return Deferred.all(Ext.Array.slice(arguments)).then(function(values){return memoizedFn.apply(scope,values)})}},parallel:function(fns,scope){null==scope&&(scope=null);var args=Ext.Array.slice(arguments,2);return Deferred.map(fns,function(fn){if(!Ext.isFunction(fn))throw new Error("Invalid parameter: expected a function.");return fn.apply(scope,args)})},pipeline:function(fns,initialValue,scope){return null==scope&&(scope=null),Deferred.reduce(fns,function(value,fn){if(!Ext.isFunction(fn))throw new Error("Invalid parameter: expected a function.");return fn.call(scope,value)},initialValue)},reduce:function(values,reduceFn,initialValue){var initialValueSpecified=3===arguments.length;return Deferred.resolved(values).then(function(promisesOrValues){var reduceArguments=[promisesOrValues,function(previousValueOrPromise,currentValueOrPromise,currentIndex){return Deferred.resolved(previousValueOrPromise).then(function(previousValue){return Deferred.resolved(currentValueOrPromise).then(function(currentValue){return reduceFn(previousValue,currentValue,currentIndex,promisesOrValues)})})}];return initialValueSpecified&&reduceArguments.push(initialValue),Ext.Array.reduce.apply(Ext.Array,reduceArguments)})},rejected:function(reason){var deferred=new Ext.Deferred;return deferred.reject(reason),deferred.promise},resolved:function(value){var deferred=new Ext.Deferred;return deferred.resolve(value),deferred.promise},sequence:function(fns,scope){null==scope&&(scope=null);var args=Ext.Array.slice(arguments,2);return Deferred.reduce(fns,function(results,fn){if(!Ext.isFunction(fn))throw new Error("Invalid parameter: expected a function.");return Deferred.resolved(fn.apply(scope,args)).then(function(result){return results.push(result),results})},[])},some:function(promisesOrValues,howMany){return Deferred.resolved(promisesOrValues).then(function(promisesOrValues){var deferred,index,onReject,onResolve,promiseOrValue,remainingToReject,remainingToResolve,values,i,len;if(values=[],remainingToResolve=howMany,remainingToReject=promisesOrValues.length-remainingToResolve+1,deferred=new Deferred,promisesOrValues.length<howMany)deferred.reject(new Error("Too few Promises were resolved."));else for(onResolve=function(value){return 0<remainingToResolve&&values.push(value),0===--remainingToResolve&&deferred.resolve(values),value},onReject=function(reason){return 0===--remainingToReject&&deferred.reject(new Error("Too few Promises were resolved.")),reason},index=i=0,len=promisesOrValues.length;i<len;index=++i)promiseOrValue=promisesOrValues[index],index in promisesOrValues&&Deferred.resolved(promiseOrValue).then(onResolve,onReject);return deferred.promise})},timeout:function(promiseOrValue,milliseconds){var timeoutId,deferred=new Deferred;return timeoutId=setTimeout(function(){timeoutId&&deferred.reject(new Error("Promise timed out."))},milliseconds),Deferred.resolved(promiseOrValue).then(function(value){clearTimeout(timeoutId),timeoutId=null,deferred.resolve(value)},function(reason){clearTimeout(timeoutId),timeoutId=null,deferred.reject(reason)}),deferred.promise}}}},function(Deferred){Deferred._ready()}),Ext.Factory=function(type){var me=this;me.aliasPrefix=type+".",me.cache={},me.name=type.replace(me.fixNameRe,me.fixNameFn),me.type=type},Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",create:function(config,defaultType){var alias,className,klass,suffix,me=this,Manager=Ext.ClassManager,cache=me.cache;if(config){if(config[me.instanceProp])return config;"string"==typeof config&&(suffix=config,(config={})[me.defaultProperty]=suffix),className=config.xclass,suffix=config.type}if(className){if(!(klass=Manager.get(className)))return Manager.instantiate(className,config)}else if((suffix=suffix||defaultType||me.defaultType)||(klass=me.defaultClass),!klass&&!(klass=cache[suffix])){if(alias=me.aliasPrefix+suffix,!(klass=(className=Manager.getNameByAlias(alias))&&Manager.get(className)))return Manager.instantiateByAlias(alias,config);cache[suffix]=klass}return klass.isInstance?klass:new klass(config)},fixNameRe:/\.[a-z]/gi,fixNameFn:function(match){return match.substring(1).toUpperCase()},clearCache:function(){this.cache={}}},Ext.Factory.define=function(type,config){var defaultClass,factory,fn,Factory=Ext.Factory;return type.constructor===Object?Ext.Object.each(type,Factory.define,Factory):(factory=new Ext.Factory(type),config&&(config.constructor===Object?(Ext.apply(factory,config),"string"==typeof(defaultClass=factory.xclass)&&(factory.defaultClass=Ext.ClassManager.get(defaultClass))):factory.defaultType=config),Factory[factory.name]=fn=factory.create.bind(factory),fn.instance=factory),fn},Ext.define("Ext.mixin.Factoryable",{mixinId:"factoryable",onClassMixedIn:function(targetClass){var dot,createFn,proto=targetClass.prototype,factoryConfig=proto.factoryConfig,alias=proto.alias,config={};(alias=alias&&alias.length&&alias[0])&&0<(dot=alias.lastIndexOf("."))&&(config.type=alias.substring(0,dot),config.defaultType=alias.substring(dot+1)),factoryConfig&&(delete proto.factoryConfig,Ext.apply(config,factoryConfig)),createFn=Ext.Factory.define(config.type,config),targetClass.create===Ext.Base.create&&(targetClass.create=createFn)}}),Ext.define("Ext.data.request.Base",{mixins:[Ext.mixin.Factoryable],factoryConfig:{type:"request",defaultType:"ajax"},result:null,success:null,timer:null,constructor:function(config){var me=this;Ext.apply(me,config.options||{},config.ownerConfig),me.id=++Ext.data.Connection.requestId,me.owner=config.owner,me.options=config.options,me.requestOptions=config.requestOptions},start:function(){var me=this,timeout=me.getTimeout();timeout&&me.async&&(me.timer=Ext.defer(me.onTimeout,timeout,me))},abort:function(){this.clearTimer(),this.timedout||(this.aborted=!0),this.abort=Ext.emptyFn},createDeferred:function(){return this.deferred=new Ext.Deferred},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var promise=this.getPromise();return promise.then.apply(promise,arguments)},onComplete:function(){var deferred=this.deferred,result=this.result;this.clearTimer(),deferred&&(this.success?deferred.resolve(result):deferred.reject(result))},onTimeout:function(){this.timedout=!0,this.timer=null,this.abort(!0)},getTimeout:function(){return this.timeout},clearTimer:function(){var timer=this.timer;timer&&(clearTimeout(timer),this.timer=null)},destroy:function(){var me=this;me.abort(),me.owner=me.options=me.requestOptions=me.result=null,me.callParent()},privates:{createException:function(){var result,me=this;return result={request:me,requestId:me.id,status:me.aborted?-1:0,statusText:me.aborted?"transaction aborted":"communication failure",getResponseHeader:me._getHeader,getAllResponseHeaders:me._getHeaders},me.aborted&&(result.aborted=!0),me.timedout&&(result.timedout=!0),result},_getHeader:function(name){var headers=this.headers;return headers&&headers[name.toLowerCase()]},_getHeaders:function(){return this.headers}}}),Ext.define("Ext.data.request.Ajax",{extend:Ext.data.request.Base,alias:"request.ajax",statics:{parseStatus:function(status){var success=200<=(status=1223==status?204:status)&&status<300||304==status,isException=!1;if(!success)switch(status){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:isException=!0}return{success:success,isException:isException}}},start:function(data){var xhr,me=this,options=me.options,requestOptions=me.requestOptions,isXdr=me.isXdr;return xhr=me.xhr=me.openRequest(options,requestOptions,me.async,me.username,me.password),isXdr||me.setupHeaders(xhr,options,requestOptions.data,requestOptions.params),me.async&&(isXdr||(xhr.onreadystatechange=Ext.Function.bind(me.onStateChange,me))),isXdr&&me.processXdrRequest(me,xhr),me.callParent([data]),xhr.send(data),me.async?me:me.onComplete()},abort:function(force){var me=this,xhr=me.xhr;if(force||me.isLoading()){try{xhr.onreadystatechange=null}catch(e){xhr.onreadystatechange=Ext.emptyFn}xhr.abort(),me.callParent([force]),me.onComplete(),me.cleanup()}},cleanup:function(){this.xhr=null,delete this.xhr},isLoading:function(){var xhr=this.xhr,state=xhr&&xhr.readyState,C=Ext.data.flash&&Ext.data.flash.BinaryXhr;return!(!xhr||this.aborted||this.timedout)&&((C&&xhr instanceof C||0!==state)&&4!==state)},openRequest:function(options,requestOptions,async,username,password){var xhr=this.newRequest(options);return username?xhr.open(requestOptions.method,requestOptions.url,async,username,password):this.isXdr?xhr.open(requestOptions.method,requestOptions.url):xhr.open(requestOptions.method,requestOptions.url,async),(options.binary||this.binary)&&(window.Uint8Array?xhr.responseType="arraybuffer":xhr.overrideMimeType&&xhr.overrideMimeType("text/plain; charset=x-user-defined")),(options.withCredentials||this.withCredentials)&&(xhr.withCredentials=!0),xhr},newRequest:function(options){var xhr,me=this;return options.binaryData?xhr=window.Uint8Array?me.getXhrInstance():new Ext.data.flash.BinaryXhr:me.cors&&Ext.isIE9m?(xhr=me.getXdrInstance(),me.isXdr=!0):(xhr=me.getXhrInstance(),me.isXdr=!1),xhr},setupHeaders:function(xhr,options,data,params){var key,header,me=this,headers=Ext.apply({},options.headers||{},me.defaultHeaders),contentType=me.defaultPostHeader,jsonData=options.jsonData,xmlData=options.xmlData,type="Content-Type",useHeader=me.useDefaultXhrHeader;headers.hasOwnProperty(type)||!data&&!params||(data&&(options.rawData?contentType="text/plain":xmlData&&Ext.isDefined(xmlData)?contentType="text/xml":jsonData&&Ext.isDefined(jsonData)&&(contentType="application/json")),headers[type]=contentType),useHeader&&!headers["X-Requested-With"]&&(headers["X-Requested-With"]=me.defaultXhrHeader),void 0!==headers[type]&&null!==headers[type]||delete headers[type];try{for(key in headers)headers.hasOwnProperty(key)&&(header=headers[key],xhr.setRequestHeader(key,header))}catch(e){me.owner.fireEvent("exception",key,header)}return headers},getXdrInstance:function(){var xdr;return 8<=Ext.ieVersion?xdr=new XDomainRequest:Ext.raise({msg:"Your browser does not support CORS"}),xdr},getXhrInstance:function(){for(var xhr,options=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],i=0,len=options.length;i<len;++i)try{(xhr=options[i])();break}catch(e){}return xhr}(),processXdrRequest:function(request,xhr){var me=this;delete request.headers,request.contentType=request.options.contentType||me.defaultXdrContentType,xhr.onload=Ext.Function.bind(me.onStateChange,me,[!0]),xhr.onerror=xhr.ontimeout=Ext.Function.bind(me.onStateChange,me,[!1])},processXdrResponse:function(response,xhr){response.getAllResponseHeaders=function(){return[]},response.getResponseHeader=function(){return""},response.contentType=xhr.contentType||this.defaultXdrContentType},onStateChange:function(xdrResult){var me=this,xhr=me.xhr,globalEvents=Ext.GlobalEvents;(xhr&&4==xhr.readyState||me.isXdr)&&(me.clearTimer(),me.onComplete(xdrResult),me.cleanup(),globalEvents.hasListeners.idle&&globalEvents.fireEvent("idle"))},onComplete:function(xdrResult){var result,success,response,me=this,owner=me.owner,options=me.options,xhr=me.xhr,failure={success:!1,isException:!1};if(!xhr||me.destroyed)return me.result=failure;try{(result=Ext.data.request.Ajax.parseStatus(xhr.status)).success&&(result.success=4===xhr.readyState)}catch(e){result=failure}return(success=me.success=me.isXdr?xdrResult:result.success)?(response=me.createResponse(xhr),owner.fireEvent("requestcomplete",owner,response,options),Ext.callback(options.success,options.scope,[response,options])):(response=result.isException||me.aborted||me.timedout?me.createException(xhr):me.createResponse(xhr),owner.fireEvent("requestexception",owner,response,options),Ext.callback(options.failure,options.scope,[response,options])),me.result=response,Ext.callback(options.callback,options.scope,[options,success,response]),owner.onRequestComplete(me),me.callParent([xdrResult]),response},createResponse:function(xhr){for(var line,index,key,response,me=this,isXdr=me.isXdr,headers={},lines=isXdr?[]:xhr.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),count=lines.length;count--;)0<=(index=(line=lines[count]).indexOf(":"))&&(key=line.substr(0,index).toLowerCase()," "==line.charAt(index+1)&&++index,headers[key]=line.substr(index+1));return response={request:me,requestId:me.id,status:xhr.status,statusText:xhr.statusText,getResponseHeader:function(header){return headers[header.toLowerCase()]},getAllResponseHeaders:function(){return headers}},isXdr&&me.processXdrResponse(response,xhr),me.binary?response.responseBytes=me.getByteArray(xhr):(response.responseText=xhr.responseText,response.responseXML=xhr.responseXML),response},destroy:function(){this.xhr=null,this.callParent()},privates:{getByteArray:function(xhr){var byteArray,responseText,len,i,response=xhr.response,responseBody=xhr.responseBody;if(xhr instanceof(Ext.data.flash&&Ext.data.flash.BinaryXhr))byteArray=xhr.responseBytes;else if(window.Uint8Array)byteArray=response?new Uint8Array(response):[];else if(Ext.isIE9p)try{byteArray=new VBArray(responseBody).toArray()}catch(e){byteArray=[]}else if(Ext.isIE)this.self.vbScriptInjected||this.injectVBScript(),getIEByteArray(xhr.responseBody,byteArray=[]);else for(byteArray=[],len=(responseText=xhr.responseText).length,i=0;i<len;i++)byteArray.push(255&responseText.charCodeAt(i));return byteArray},injectVBScript:function(){var scriptTag=document.createElement("script");scriptTag.type="text/vbscript",scriptTag.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n"),Ext.getHead().dom.appendChild(scriptTag),this.self.vbScriptInjected=!0}}}),Ext.define("Ext.data.request.Form",{extend:Ext.data.request.Base,alias:"request.form",start:function(data){var me=this,options=me.options,requestOptions=me.requestOptions;return me.callParent([data]),me.form=me.upload(options.form,requestOptions.url,requestOptions.data,options),me},abort:function(force){var frame,me=this;if(me.isLoading())try{(frame=me.frame.dom).stop?frame.stop():frame.document.execCommand("Stop")}catch(e){}me.callParent([force]),me.onComplete(),me.cleanup()},cleanup:function(){var me=this,frame=me.frame;frame&&(frame.un("load",me.onComplete,me),Ext.removeNode(frame)),me.frame=me.form=null},isLoading:function(){return!!this.frame},upload:function(form,url,params,options){form=Ext.getDom(form);function addField(name,value){hiddenItem=document.createElement("input"),Ext.fly(hiddenItem).set({type:"hidden",value:value,name:name}),form.appendChild(hiddenItem),hiddens.push(hiddenItem)}var hiddenItem,obj,value,name,vLen,v,hLen,h,frameDom=document.createElement("iframe"),frame=Ext.get(frameDom),id=frame.id,hiddens=[],buf={target:form.target,method:form.method,encoding:form.encoding,enctype:form.enctype,action:form.action};if(frame.set({name:id,cls:Ext.baseCSSPrefix+"hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1}),document.body.appendChild(frameDom),document.frames&&(document.frames[id].name=id),Ext.fly(form).set({target:id,method:"POST",enctype:"multipart/form-data",encoding:"multipart/form-data",action:url||buf.action}),params)for(name in obj=Ext.Object.fromQueryString(params)||{})if(obj.hasOwnProperty(name))if(value=obj[name],Ext.isArray(value))for(vLen=value.length,v=0;v<vLen;v++)addField(name,value[v]);else addField(name,value);for((this.frame=frame).on({load:this.onComplete,scope:this,single:!Ext.isOpera}),form.submit(),Ext.fly(form).set(buf),hLen=hiddens.length,h=0;h<hLen;h++)Ext.removeNode(hiddens[h]);return form},getDoc:function(){var frame=this.frame.dom;return frame&&(frame.contentWindow.document||frame.contentDocument)||(window.frames[frame.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var callback,doc,success,contentNode,response,me=this,frame=me.frame,owner=me.owner,options=me.options;if(frame){if(me.aborted||me.timedout)me.result=response=me.createException(),response.responseXML=null,response.responseText='{success:false,message:"'+Ext.String.trim(response.statusText)+'"}',callback=options.failure,success=!1;else try{if(doc=me.getDoc(),me.result=response={responseText:"",responseXML:null},doc){if(Ext.isOpera&&doc.location==Ext.SSL_SECURE_URL)return;doc.body&&((contentNode=doc.body.firstChild)&&/pre/i.test(contentNode.tagName)?response.responseText=contentNode.textContent||contentNode.innerText:(contentNode=doc.getElementsByTagName("textarea")[0])?response.responseText=contentNode.value:response.responseText=doc.body.textContent||doc.body.innerText),response.responseXML=doc.XMLDocument||doc,callback=options.success,success=!0,response.status=200}else Ext.raise("Could not acquire a suitable connection for the file upload service.")}catch(e){me.result=response=me.createException(),response.status=400,response.statusText=(e.message||e.description)+"",response.responseText='{success:false,message:"'+Ext.String.trim(response.statusText)+'"}',response.responseXML=null,callback=options.failure,success=!1}me.frame=null,me.success=success,owner.fireEvent(success?"requestcomplete":"requestexception",owner,response,options),Ext.callback(callback,options.scope,[response,options]),Ext.callback(options.callback,options.scope,[options,success,response]),owner.onRequestComplete(me),Ext.asap(frame.destroy,frame),me.callParent()}},destroy:function(){this.cleanup(),this.callParent()}}),Ext.define("Ext.data.Connection",{mixins:{observable:Ext.mixin.Observable},statics:{requestId:0},enctypeRe:/multipart\/form-data/i,config:{url:null,async:!0,username:"",password:"",disableCaching:!0,withCredentials:!1,binary:!1,cors:!1,isXdr:!1,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:3e4,extraParams:null,autoAbort:!1,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest"},constructor:function(config){this.mixins.observable.constructor.call(this,config),this.requests={}},request:function(options){options=options||{};var requestOptions;return!1!==this.fireEvent("beforerequest",this,options)?(requestOptions=this.setOptions(options,options.scope||Ext.global),this.createRequest(options,requestOptions).start(requestOptions.data)):(Ext.callback(options.callback,options.scope,[options,void 0,void 0]),Ext.Deferred.rejected([options,void 0,void 0]))},createRequest:function(options,requestOptions){var request,me=this,type=options.type||requestOptions.type;return type=type||(me.isFormUpload(options)?"form":"ajax"),(options.autoAbort||me.getAutoAbort())&&me.abort(),request=Ext.Factory.request({type:type,owner:me,options:options,requestOptions:requestOptions,ownerConfig:me.getConfig()}),me.requests[request.id]=request,me.latestId=request.id,request},isFormUpload:function(options){var form=this.getForm(options);return!!form&&(options.isUpload||this.enctypeRe.test(form.getAttribute("enctype")))},getForm:function(options){return Ext.getDom(options.form)},setOptions:function(options,scope){var method,disableCache,data,me=this,params=options.params||{},extraParams=me.getExtraParams(),urlParams=options.urlParams,url=options.url||me.getUrl(),cors=options.cors,jsonData=options.jsonData;return void 0!==cors&&me.setCors(cors),Ext.isFunction(params)&&(params=params.call(scope,options)),Ext.isFunction(url)&&(url=url.call(scope,options)),url=this.setupUrl(options,url),data=options.rawData||options.binaryData||options.xmlData||jsonData||null,jsonData&&!Ext.isPrimitive(jsonData)&&(data=Ext.encode(data)),options.binaryData&&me.nativeBinaryPostSupport()&&(data=new Uint8Array(options.binaryData),(Ext.isChrome&&Ext.chromeVersion<22||Ext.isSafari||Ext.isGecko)&&(data=data.buffer)),Ext.isObject(params)&&(params=Ext.Object.toQueryString(params)),Ext.isObject(extraParams)&&(extraParams=Ext.Object.toQueryString(extraParams)),params+=extraParams?(params?"&":"")+extraParams:"",urlParams=Ext.isObject(urlParams)?Ext.Object.toQueryString(urlParams):urlParams,params=this.setupParams(options,params),method=(options.method||me.getMethod()||(params||data?"POST":"GET")).toUpperCase(),this.setupMethod(options,method),disableCache=!1!==options.disableCaching&&(options.disableCaching||me.getDisableCaching()),"GET"===method&&disableCache&&(url=Ext.urlAppend(url,(options.disableCachingParam||me.getDisableCachingParam())+"="+(new Date).getTime())),("GET"==method||data)&&params&&(url=Ext.urlAppend(url,params),params=null),urlParams&&(url=Ext.urlAppend(url,urlParams)),{url:url,method:method,data:data||params||null}},setupUrl:function(options,url){var form=this.getForm(options);return form&&(url=url||form.action),url},setupParams:function(options,params){var serializedForm,form=this.getForm(options);return form&&!this.isFormUpload(options)&&(serializedForm=Ext.Element.serializeForm(form),params=params?params+"&"+serializedForm:serializedForm),params},setupMethod:function(options,method){return this.isFormUpload(options)?"POST":method},isLoading:function(request){return!!(request=request||this.getLatest())&&request.isLoading()},abort:function(request){(request=request||this.getLatest())&&request.isLoading()&&request.abort()},abortAll:function(){var id,requests=this.requests;for(id in requests)this.abort(requests[id])},getLatest:function(){var request,id=this.latestId;return id&&(request=this.requests[id]),request||null},clearTimeout:function(request){(request=request||this.getLatest())&&request.clearTimer()},onRequestComplete:function(request){delete this.requests[request.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||Ext.isSafari&&Ext.isDefined(window.Uint8Array)||Ext.isGecko&&Ext.isDefined(window.Uint8Array)}}),Ext.define("Ext.Ajax",{extend:Ext.data.Connection,singleton:!0,autoAbort:!1}),Ext.define("Ext.AnimationQueue",{singleton:!0,constructor:function(){var me=this;me.queue=[],me.taskQueue=[],me.runningQueue=[],me.idleQueue=[],me.isRunning=!1,me.isIdle=!0,me.run=Ext.Function.bind(me.run,me),Ext.os.is.iOS&&Ext.interval(me.watch,500,me)},start:function(fn,scope,args){var me=this;me.queue.push(arguments),me.isRunning||(me.hasOwnProperty("idleTimer")&&(clearTimeout(me.idleTimer),delete me.idleTimer),me.hasOwnProperty("idleQueueTimer")&&(clearTimeout(me.idleQueueTimer),delete me.idleQueueTimer),me.isIdle=!1,me.isRunning=!0,me.doStart())},watch:function(){this.isRunning&&500<=Ext.now()-this.lastRunTime&&this.run()},run:function(){var me=this;if(me.isRunning){var i,ln,queue=me.runningQueue,now=Ext.now();for(me.lastRunTime=now,me.frameStartTime=now,queue.push.apply(queue,me.queue),i=0,ln=queue.length;i<ln;i++)me.invoke(queue[i]);queue.length=0,me.doIterate()}},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run),this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(fn,scope,args){var me=this;if(me.isRunning){var i,item,queue=me.queue,ln=queue.length;for(i=0;i<ln;i++)(item=queue[i])[0]===fn&&item[1]===scope&&item[2]===args&&(queue.splice(i,1),i--,ln--);0===ln&&(me.doStop(),me.isRunning=!1,me.idleTimer=Ext.defer(me.whenIdle,100,me))}},onIdle:function(fn,scope,args){var i,ln,listener,listeners=this.idleQueue;for(i=0,ln=listeners.length;i<ln;i++)if(fn===(listener=listeners[i])[0]&&scope===listener[1]&&args===listener[2])return;listeners.push(arguments),this.isIdle&&this.processIdleQueue()},unIdle:function(fn,scope,args){var i,ln,listener,listeners=this.idleQueue;for(i=0,ln=listeners.length;i<ln;i++)if(fn===(listener=listeners[i])[0]&&scope===listener[1]&&args===listener[2])return listeners.splice(i,1),!0;return!1},queueTask:function(fn,scope,args){this.taskQueue.push(arguments),this.processTaskQueue()},dequeueTask:function(fn,scope,args){var i,ln,listener,listeners=this.taskQueue;for(i=0,ln=listeners.length;i<ln;i++)fn===(listener=listeners[i])[0]&&scope===listener[1]&&args===listener[2]&&(listeners.splice(i,1),i--,ln--)},invoke:function(listener){var fn=listener[0],scope=listener[1],args=listener[2];fn="string"==typeof fn?scope[fn]:fn,Ext.isArray(args)?fn.apply(scope,args):fn.call(scope,args)},whenIdle:function(){this.isIdle=!0,this.processIdleQueue()},processIdleQueue:function(){this.hasOwnProperty("idleQueueTimer")||(this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this))},processIdleQueueItem:function(){if(delete this.idleQueueTimer,this.isIdle){var listener,listeners=this.idleQueue;0<listeners.length&&(listener=listeners.shift(),this.invoke(listener),this.processIdleQueue())}},processTaskQueue:function(){this.hasOwnProperty("taskQueueTimer")||(this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this))},processTaskQueueItem:function(){delete this.taskQueueTimer;var listener,listeners=this.taskQueue;0<listeners.length&&(listener=listeners.shift(),this.invoke(listener),this.processTaskQueue())}}),Ext.define("Ext.ComponentManager",{alternateClassName:"Ext.ComponentMgr",singleton:!0,count:0,typeName:"xtype",constructor:function(config){Ext.apply(this,config||{}),this.all={},this.references={},this.onAvailableCallbacks={}},create:function(config,defaultType){return"string"==typeof config?Ext.widget(config):config.isComponent?config:"xclass"in config?Ext.create(config.xclass,config):Ext.widget(config.xtype||defaultType,config)},get:function(id){return this.all[id]},register:function(component){var me=this,all=me.all,key=component.getId(),onAvailableCallbacks=me.onAvailableCallbacks;(all[key]=component).getReference&&component.getReference()&&(me.references[key]=component),++me.count,me.hasFocusListener||(Ext.on("focus",me.onGlobalFocus,me),me.hasFocusListener=!0),(onAvailableCallbacks=onAvailableCallbacks&&onAvailableCallbacks[key])&&onAvailableCallbacks.length&&me.notifyAvailable(component)},unregister:function(component){var id=component.getId();component.getReference&&component.getReference()&&(this.references[id]=null,delete this.references[id]),this.all[id]=null,delete this.all[id],this.count--},markReferencesDirty:function(){this.referencesDirty=!0},fixReferences:function(){var key,references=this.references;if(this.referencesDirty){for(key in references)references.hasOwnProperty(key)&&references[key].fixReference();this.referencesDirty=!1}},onAvailable:function(id,fn,scope){var item,callbacks=this.onAvailableCallbacks,all=this.all;id in all?(item=all[id],fn.call(scope||item,item)):id&&(Ext.isArray(callbacks[id])||(callbacks[id]=[]),callbacks[id].push(function(item){fn.call(scope||item,item)}))},notifyAvailable:function(item){for(var callbacks=this.onAvailableCallbacks[item&&item.getId()]||[];callbacks.length;)callbacks.shift()(item)},each:function(fn,scope){return Ext.Object.each(this.all,fn,scope)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.fromElement(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(e){var commonAncestor,targetComponent,toElement=e.toElement,fromElement=e.fromElement,toComponent=Ext.Component.fromElement(toElement),fromComponent=Ext.Component.fromElement(fromElement);if(toComponent!==fromComponent){if(commonAncestor=this.getCommonAncestor(fromComponent,toComponent),fromComponent&&!fromComponent.destroyed&&!fromComponent.destroying)for(fromComponent.handleBlurEvent&&fromComponent.handleBlurEvent(e),targetComponent=fromComponent;targetComponent&&targetComponent!==commonAncestor;targetComponent=targetComponent.getRefOwner())targetComponent.destroyed||targetComponent.destroying||targetComponent.onFocusLeave({event:e.event,type:"focusleave",target:fromElement,relatedTarget:toElement,fromComponent:fromComponent,toComponent:toComponent});if(toComponent&&!toComponent.destroyed)for(toComponent.handleFocusEvent&&toComponent.handleFocusEvent(e),targetComponent=toComponent;targetComponent&&targetComponent!==commonAncestor;targetComponent=targetComponent.getRefOwner())targetComponent.onFocusEnter({event:e.event,type:"focusenter",relatedTarget:fromElement,target:toElement,fromComponent:fromComponent,toComponent:toComponent})}},getCommonAncestor:function(compA,compB){if(compA===compB)return compA;for(;compA&&!compA.isAncestor(compB)&&compA!==compB;)compA=compA.getRefOwner();return compA},privates:{clearAll:function(){this.all={},this.references={},this.onAvailableCallbacks={}},fromElement:function(node,limit,selector){var topmost,cmpId,cmp,target=Ext.getDom(node),cache=this.all,depth=0;for("number"!=typeof limit&&(topmost=Ext.getDom(limit),limit=Number.MAX_VALUE);target&&1===target.nodeType&&depth<limit&&target!==topmost;){if(cmpId=target.getAttribute("data-componentid")||target.id){if((cmp=cache[cmpId])&&(!selector||Ext.ComponentQuery.is(cmp,selector)))return cmp;depth++}target=target.parentNode}return null}},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},function(){Ext.getCmp=function(id){return Ext.ComponentManager.get(id)}}),Ext.ns("Ext.util").Operators={"=":function(a,v){return a==v},"!=":function(a,v){return a!=v},"^=":function(a,v){return a&&a.substr(0,v.length)==v},"$=":function(a,v){return a&&a.substr(a.length-v.length)==v},"*=":function(a,v){return a&&-1!==a.indexOf(v)},"%=":function(a,v){return a%v==0},"|=":function(a,v){return a&&(a==v||a.substr(0,v.length+1)==v+"-")},"~=":function(a,v){return a&&-1!=(" "+a+" ").indexOf(" "+v+" ")}},Ext.define("Ext.util.LruCache",{extend:Ext.util.HashMap,config:{maxSize:null},add:function(key,newValue){var entry,last,me=this;return me.removeAtKey(key),entry={prev:last=me.last,next:null,key:key,value:newValue},last?last.next=entry:me.first=entry,me.last=entry,me.callParent([key,entry]),me.prune(),newValue},insertBefore:function(key,newValue,sibling){var existingKey,entry,me=this;return(sibling=this.map[this.findKey(sibling)])?((existingKey=me.findKey(newValue))?me.unlinkEntry(entry=me.map[existingKey]):entry={prev:sibling.prev,next:sibling,key:key,value:newValue},sibling.prev?entry.prev.next=entry:me.first=entry,(entry.next=sibling).prev=entry,me.prune(),newValue):me.add(key,newValue)},get:function(key){var entry=this.map[key];if(entry)return entry.next&&this.moveToEnd(entry),entry.value},removeAtKey:function(key){return this.unlinkEntry(this.map[key]),this.callParent(arguments)},clear:function(initial){return this.first=this.last=null,this.callParent([initial])},unlinkEntry:function(entry){entry&&(entry.next?entry.next.prev=entry.prev:this.last=entry.prev,entry.prev?entry.prev.next=entry.next:this.first=entry.next,entry.prev=entry.next=null)},moveToEnd:function(entry){this.unlinkEntry(entry),(entry.prev=this.last)?this.last.next=entry:this.first=entry,this.last=entry},getArray:function(isKey){for(var arr=[],entry=this.first;entry;)arr.push(isKey?entry.key:entry.value),entry=entry.next;return arr},each:function(fn,scope,reverse){var me=this,entry=reverse?me.last:me.first,length=me.length;for(scope=scope||me;entry&&!1!==fn.call(scope,entry.key,entry.value,length);)entry=reverse?entry.prev:entry.next;return me},findKey:function(value){var key,map=this.map;for(key in map)if(map.hasOwnProperty(key)&&map[key].value===value)return key},clone:function(){var key,newCache=new this.self(this.initialConfig),map=this.map;for(key in newCache.suspendEvents(),map)map.hasOwnProperty(key)&&newCache.add(key,map[key].value);return newCache.resumeEvents(),newCache},prune:function(){var me=this,max=me.getMaxSize(),purgeCount=max?me.length-max:0;if(0<purgeCount)for(;me.first&&purgeCount;purgeCount--)me.removeAtKey(me.first.key)},destroy:function(){this.first=this.last=null,this.callParent()}}),Ext.define("Ext.ComponentQuery",{singleton:!0},function(){function filterItems(items,operation){return operation.method.apply(this,[items].concat(operation.args))}function getItems(items,mode){for(var candidate,result=[],i=0,length=items.length,deep=">"!==mode;i<length;i++)(candidate=items[i]).getRefItems&&(result=result.concat(candidate.getRefItems(deep)));return result}function getAncestors(items){for(var candidate,result=[],i=0,length=items.length;i<length;i++)for(candidate=items[i];candidate=candidate.getRefOwner();)result.push(candidate);return result}function filterByXType(items,xtype,shallow){if("*"===xtype)return items.slice();for(var candidate,result=[],i=0,length=items.length;i<length;i++)(candidate=items[i]).isXType(xtype,shallow)&&result.push(candidate);return result}function filterById(items,id){for(var candidate,result=[],i=0,length=items.length;i<length;i++)(candidate=items[i]).getItemId()===id&&result.push(candidate);return result}var cq=this,queryOperators=Ext.util.Operators,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,stripLeadingSpaceRe=/^(\s)+/,unescapeRe=/\\(.)/g,regexCache=new Ext.util.LruCache({maxSize:100}),filterFnPattern=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),modeRe=/^(\s?([>\^])\s?|\s|$)/,tokenRe=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,matchers=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:filterByXType,argTransform:function(args){return void 0!==args[1]&&(args[1]=args[1].replace(unescapeRe,"$1")),args.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:function(items,property,operator,compareTo){var mustBeOwnProperty,presenceOnly,candidate,propValue,j,propLen,config,result=[],i=0,length=items.length;for("@"===property.charAt(0)&&(mustBeOwnProperty=!0,property=property.substr(1)),"?"===property.charAt(0)&&(presenceOnly=mustBeOwnProperty=!0,property=property.substr(1));i<length;i++){if(config=(candidate=items[i]).getConfigurator&&candidate.self.$config.configs[property])propValue=candidate[config.names.get]();else{if(mustBeOwnProperty&&!candidate.hasOwnProperty(property))continue;propValue=candidate[property]}if(presenceOnly)result.push(candidate);else if("~="===operator){if(propValue)for(Ext.isArray(propValue)||(propValue=propValue.split(" ")),j=0,propLen=propValue.length;j<propLen;j++)if(queryOperators[operator](Ext.coerce(propValue[j],compareTo),compareTo)){result.push(candidate);break}}else"/="===operator?null!=propValue&&compareTo.test(propValue)&&result.push(candidate):(compareTo?queryOperators[operator](Ext.coerce(propValue,compareTo),compareTo):candidate[property])&&result.push(candidate)}return result},argTransform:function(args){args[0];var property=args[1],operator=args[2],compareTo=args[4];return void 0!==compareTo&&(compareTo=compareTo.replace(unescapeRe,"$1")),"/="===operator&&(compareTo=regexCache.get(compareTo)||regexCache.add(compareTo,new RegExp(compareTo))),[property,operator,compareTo]}},{re:/^#((?:\\\.|[\w\-])+)/,method:filterById},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:function(items,name,value){return cq.pseudos[name](items,value)},argTransform:function(args){return void 0!==args[2]&&(args[2]=args[2].replace(unescapeRe,"$1")),args.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:filterFnPattern}];cq.Query=Ext.extend(Object,{constructor:function(cfg){cfg=cfg||{},Ext.apply(this,cfg)},execute:function(root){var op,i,len,operations=this.operations,result=[];for(i=0,len=operations.length;i<len;i++)op=operations[i],result=result.concat(this._execute(root,op));return result},_execute:function(root,operations){var operation,workingItems,i=0,length=operations.length;for(root?Ext.isIterable(root)?workingItems=root:root.isMixedCollection&&(workingItems=root.items):workingItems=Ext.ComponentManager.getAll();i<length;i++)if(workingItems="^"===(operation=operations[i]).mode?getAncestors(workingItems||[root]):operation.mode?getItems(workingItems||[root],operation.mode):filterItems(workingItems||getItems([root]),operation),i===length-1)return workingItems;return[]},is:function(component){var op,i,operations=this.operations,result=!1,len=operations.length;if(0===len)return!0;for(i=0;i<len;i++)if(op=operations[i],result=this._is(component,op))return result;return!1},_is:function(component,operations){var operation,i,j,mode,items,item,len=operations.length,active=[component];for(i=len-1;0<=i;--i)if(mode=(operation=operations[i]).mode){if("^"===mode)active=getItems(active," ");else if(">"===mode){for(items=[],j=0,len=active.length;j<len;++j)(item=active[j].getRefOwner())&&items.push(item);active=items}else active=getAncestors(active);if(0===active.length)return!1}else if(0===(active=filterItems(active,operation)).length)return!1;return!0},getMatches:function(components,operations){var i,len=operations.length;for(i=0;i<len&&0!==(components=filterItems(components,operations[i])).length;++i);return components},isMultiMatch:function(){return 1<this.operations.length}}),Ext.apply(cq,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(components,selector){for(var component,i=0,length=components.length,results=[],index=-1;i<length;++i)component=components[i],cq.is(component,selector)||(results[++index]=component);return results},first:function(components){var ret=[];return 0<components.length&&ret.push(components[0]),ret},last:function(components){var len=components.length,ret=[];return 0<len&&ret.push(components[len-1]),ret},focusable:function(cmps){for(var c,len=cmps.length,results=[],i=0;i<len;i++)(c=cmps[i]).isFocusable&&c.isFocusable()&&results.push(c);return results},"nth-child":function(c,a){var i,n,nodeIndex,result=[],m=nthRe.exec(("even"===a?"2n":"odd"===a&&"2n+1")||!nthRe2.test(a)&&"n+"+a||a),f=+(m[1]||1),len=+m[2];for(i=0;n=c[i];i++)nodeIndex=i+1,1==f?0!=len&&nodeIndex!==len||result.push(n):(nodeIndex+len)%f==0&&result.push(n);return result},scrollable:function(cmps){for(var c,len=cmps.length,results=[],i=0;i<len;i++)((c=cmps[i]).scrollable||c._scrollable)&&results.push(c);return results}},query:function(selector,root){if(!selector)return Ext.ComponentManager.all.getArray();var resultsLn,cmp,i,results=[],noDupResults=[],dupMatcher={},query=cq.cache.get(selector);if(results=(query=query||cq.cache.add(selector,cq.parse(selector))).execute(root),query.isMultiMatch()){for(resultsLn=results.length,i=0;i<resultsLn;i++)dupMatcher[(cmp=results[i]).id]||(noDupResults.push(cmp),dupMatcher[cmp.id]=!0);results=noDupResults}return results},visitPreOrder:function(selector,root,fn,scope,extraArgs){cq._visit(!0,selector,root,fn,scope,extraArgs)},visitPostOrder:function(selector,root,fn,scope,extraArgs){cq._visit(!1,selector,root,fn,scope,extraArgs)},_visit:function(preOrder,selector,root,fn,scope,extraArgs){var children,i,rootMatch,query=cq.cache.get(selector),callArgs=[root],len=0;if(rootMatch=(query=query||cq.cache.add(selector,cq.parse(selector))).is(root),root.getRefItems&&(len=(children=root.getRefItems()).length),extraArgs&&Ext.Array.push(callArgs,extraArgs),preOrder&&rootMatch&&!1===fn.apply(scope||root,callArgs))return!1;for(i=0;i<len;i++)if(!1===cq._visit.call(cq,preOrder,selector,children[i],fn,scope,extraArgs))return!1;return!(!preOrder&&rootMatch&&!1===fn.apply(scope||root,callArgs))&&void 0},is:function(component,selector){if(!selector)return!0;var query=cq.cache.get(selector);return(query=query||cq.cache.add(selector,cq.parse(selector))).is(component)},parse:function(selector){var selectors,sel,i,len,operations=[];for(i=0,len=(selectors=Ext.splitAndUnescape(selector,",")).length;i<len;i++)sel=Ext.String.trim(selectors[i]),operations.push(cq._parse(sel));return new cq.Query({operations:operations})},_parse:function(selector){for(var lastSelector,tokenMatch,token,matchedChar,modeMatch,selectorMatch,transform,i,matcher,method,args,operations=[],trim=Ext.String.trim,length=matchers.length;selector&&lastSelector!==selector;){for((tokenMatch=(lastSelector=selector).match(tokenRe))&&(matchedChar=tokenMatch[1],token=trim(tokenMatch[2]).replace(unescapeRe,"$1"),"#"===matchedChar?operations.push({method:filterById,args:[token]}):operations.push({method:filterByXType,args:[token,Boolean(tokenMatch[3])]}),selector=selector.replace(tokenMatch[0],"").replace(stripLeadingSpaceRe,"$1"));!(modeMatch=selector.match(modeRe));)for(i=0;selector&&i<length;i++){if(matcher=matchers[i],selectorMatch=selector.match(matcher.re),method=matcher.method,transform=matcher.argTransform,selectorMatch){args=transform?transform(selectorMatch):selectorMatch.slice(1),operations.push({method:Ext.isString(matcher.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[method].concat(selectorMatch.slice(1)))):matcher.method,args:args}),selector=selector.replace(selectorMatch[0],"").replace(stripLeadingSpaceRe,"$1");break}i===length-1&&Ext.raise('Invalid ComponentQuery selector: "'+selector+'"')}modeMatch[1]&&(operations.push({mode:modeMatch[2]||modeMatch[1]}),selector=selector.replace(modeMatch[0],"").replace(stripLeadingSpaceRe,""))}return operations}}),Ext.all=function(){return cq.query.apply(cq,arguments)},Ext.first=function(){var matches=cq.query.apply(cq,arguments);return matches&&matches[0]||null}}),Ext.define("Ext.Evented",{alternateClassName:"Ext.EventedBase",mixins:[Ext.mixin.Observable],initialized:!1,constructor:function(config){this.mixins.observable.constructor.call(this,config),this.initialized=!0},onClassExtended:function(cls,data){if(data.hasOwnProperty("eventedConfig")){var name,cfg,config=data.config,eventedConfig=data.eventedConfig;for(name in config?Ext.applyIf(config,eventedConfig):cls.addConfig(eventedConfig),eventedConfig)eventedConfig.hasOwnProperty(name)&&(data[(cfg=Ext.Config.get(name)).names.set]=cfg.eventedSetter||cfg.getEventedSetter())}}}),Ext.define("Ext.util.Positionable",{mixinId:"positionable",_positionTopLeft:["position","top","left"],_alignRe:/^([a-z]+)-([a-z]+)([?!])?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(xy,parent){var vector=this.getConstrainVector(parent,xy);return vector&&(xy[0]+=vector[0],xy[1]+=vector[1]),xy},alignTo:function(element,position,offsets,animate){var el=this.el;return this.setXY(this.getAlignToXY(element,position,offsets),!(!el.anim||!animate)&&el.anim(animate))},calculateAnchorXY:function(anchor,extraX,extraY,mySize){var xy,myWidth,myHeight,el=this.el,doc=document,isViewport=el.dom===doc.body||el.dom===doc,round=Math.round;switch(anchor=(anchor||"tl").toLowerCase(),myWidth=(mySize=mySize||{}).width||(isViewport?Ext.Element.getViewportWidth():this.getWidth()),myHeight=mySize.height||(isViewport?Ext.Element.getViewportHeight():this.getHeight()),anchor){case"tl":xy=[0,0];break;case"bl":xy=[0,myHeight];break;case"tr":xy=[myWidth,0];break;case"c":xy=[round(.5*myWidth),round(.5*myHeight)];break;case"t":xy=[round(.5*myWidth),0];break;case"l":xy=[0,round(.5*myHeight)];break;case"r":xy=[myWidth,round(.5*myHeight)];break;case"b":xy=[round(.5*myWidth),myHeight];break;case"tc":xy=[round(.5*myWidth),0];break;case"bc":xy=[round(.5*myWidth),myHeight];break;case"br":xy=[myWidth,myHeight]}return[xy[0]+extraX,xy[1]+extraY]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(alignToEl,posSpec,offset){var constrainToEl,constrainTo,alignMatch,myPosition,alignToElPosition,myWidth,myHeight,alignToElRegion,swapY,swapX,constrain,align1,align2,p1y,p1x,p2y,p2x,x,y,me=this;return(alignToEl=Ext.get(alignToEl.el||alignToEl))&&alignToEl.dom,offset=offset||[0,0],posSpec=(posSpec&&"?"!==posSpec?/-/.test(posSpec)||""===posSpec?posSpec||"tl-bl":"tl-"+posSpec:"tl-bl?").toLowerCase(),align1=(alignMatch=(posSpec=me.convertPositionSpec(posSpec)).match(me._alignRe))[1],align2=alignMatch[2],constrain=!!alignMatch[3],myPosition=me.getAnchorXY(align1,!0),x=(alignToElPosition=me.getAnchorToXY(alignToEl,align2,!1))[0]-myPosition[0]+offset[0],y=alignToElPosition[1]-myPosition[1]+offset[1],constrain&&(constrainToEl="!"===alignMatch[3]?alignToEl:me.constrainTo||me.container||me.el.parent(),(constrainTo=(constrainToEl=Ext.get(constrainToEl.el||constrainToEl)).getConstrainRegion()).right=constrainTo.left+constrainToEl.el.dom.clientWidth,myWidth=me.getWidth(),myHeight=me.getHeight(),alignToElRegion=alignToEl.getRegion(),p1y=align1.charAt(0),p1x=align1.charAt(align1.length-1),p2y=align2.charAt(0),p2x=align2.charAt(align2.length-1),swapY=x<alignToElRegion.right&&x+myWidth>=alignToElRegion.left&&("t"==p1y&&"b"==p2y||"b"==p1y&&"t"==p2y),swapX=y<alignToElRegion.bottom&&y+myHeight>=alignToElRegion.top&&("r"==p1x&&"l"==p2x||"l"==p1x&&"r"==p2x),x+myWidth>constrainTo.right&&(swapX?(x=alignToElRegion.left-myWidth,swapX=!1):x=constrainTo.right-myWidth),x<constrainTo.left&&(x=swapX?alignToElRegion.right:constrainTo.left),y+myHeight>constrainTo.bottom&&(swapY?(y=alignToElRegion.top-myHeight,swapY=!1):y=constrainTo.bottom-myHeight),y<constrainTo.top&&(y=swapY?alignToElRegion.bottom:constrainTo.top)),[x,y]},getAnchorXY:function(anchor,local,mySize){var myPos=this.getXY(),el=this.el,doc=document,isViewport=el.dom==doc.body||el.dom==doc,scroll=el.getScroll(),extraX=isViewport?scroll.left:local?0:myPos[0],extraY=isViewport?scroll.top:local?0:myPos[1];return this.calculateAnchorXY(anchor,extraX,extraY,mySize)},getBox:function(contentBox,local){var borderPadding,beforeX,beforeY,me=this,xy=local?me.getLocalXY():me.getXY(),x=xy[0],y=xy[1],w=me.getWidth(),h=me.getHeight();return contentBox&&(x+=beforeX=(borderPadding=me.getBorderPadding()).beforeX,y+=beforeY=borderPadding.beforeY,w-=beforeX+borderPadding.afterX,h-=beforeY+borderPadding.afterY),{x:x,left:x,0:x,y:y,top:y,1:y,width:w,height:h,right:x+w,bottom:y+h}},calculateConstrainedPosition:function(constrainTo,proposedPosition,local,proposedSize){var vector,parentOffset,borderPadding,proposedConstrainPosition,me=this,fp=me.floatParent,parentNode=fp?fp.getTargetEl():null,xy=!1;return local&&fp?(parentOffset=parentNode.getXY(),borderPadding=parentNode.getBorderPadding(),parentOffset[0]+=borderPadding.beforeX,parentOffset[1]+=borderPadding.beforeY,proposedPosition&&(proposedConstrainPosition=[proposedPosition[0]+parentOffset[0],proposedPosition[1]+parentOffset[1]])):proposedConstrainPosition=proposedPosition,constrainTo=constrainTo||me.constrainTo||parentNode||me.container||me.el.parent(),local&&proposedConstrainPosition&&(proposedConstrainPosition=me.reverseTranslateXY(proposedConstrainPosition)),(vector=(me.constrainHeader&&me.header.rendered?me.header:me).getConstrainVector(constrainTo,proposedConstrainPosition,proposedSize))&&((xy=proposedPosition||me.getPosition(local))[0]+=vector[0],xy[1]+=vector[1]),xy},getConstrainRegion:function(){var scroll,width,height,el=this.el,isBody="BODY"===el.dom.nodeName,dom=el.dom,borders=el.getBorders(),pos=el.getXY(),left=pos[0]+borders.beforeX,top=pos[1]+borders.beforeY;return height=isBody?(left=(scroll=el.getScroll()).left,top=scroll.top,width=Ext.Element.getViewportWidth(),Ext.Element.getViewportHeight()):(width=dom.clientWidth,dom.clientHeight),new Ext.util.Region(top,left+width,top+height,left)},getConstrainVector:function(constrainTo,proposedPosition,proposedSize){var constrainSize,thisRegion=this.getRegion(),vector=[0,0],shadowSize=this.shadow&&this.constrainShadow&&!this.shadowDisabled?this.shadow.getShadowSize():void 0,overflowed=!1,constraintInsets=this.constraintInsets;return constrainTo instanceof Ext.util.Region||(constrainSize=(constrainTo=Ext.get(constrainTo.el||constrainTo)).getViewSize(),(constrainTo=constrainTo.getConstrainRegion()).right=constrainTo.left+constrainSize.width,constrainTo.bottom=constrainTo.top+constrainSize.height),constraintInsets&&(constraintInsets=Ext.isObject(constraintInsets)?constraintInsets:Ext.Element.parseBox(constraintInsets),constrainTo.adjust(constraintInsets.top,constraintInsets.right,constraintInsets.bottom,constraintInsets.left)),proposedPosition&&thisRegion.translateBy(proposedPosition[0]-thisRegion.x,proposedPosition[1]-thisRegion.y),proposedSize&&(thisRegion.right=thisRegion.left+proposedSize[0],thisRegion.bottom=thisRegion.top+proposedSize[1]),shadowSize&&constrainTo.adjust(shadowSize[0],-shadowSize[1],-shadowSize[2],shadowSize[3]),thisRegion.right>constrainTo.right&&(overflowed=!0,vector[0]=constrainTo.right-thisRegion.right),thisRegion.left+vector[0]<constrainTo.left&&(overflowed=!0,vector[0]=constrainTo.left-thisRegion.left),thisRegion.bottom>constrainTo.bottom&&(overflowed=!0,vector[1]=constrainTo.bottom-thisRegion.bottom),thisRegion.top+vector[1]<constrainTo.top&&(overflowed=!0,vector[1]=constrainTo.top-thisRegion.top),!!overflowed&&vector},getOffsetsTo:function(offsetsTo){var o=this.getXY(),e=Ext.fly(offsetsTo.el||offsetsTo).getXY();return[o[0]-e[0],o[1]-e[1]]},getRegion:function(){var box=this.getBox();return new Ext.util.Region(box.top,box.right,box.bottom,box.left)},getClientRegion:function(){var scrollbarSize,viewContentBox=this.getBox(),myDom=this.dom;return(scrollbarSize=myDom.offsetWidth-myDom.clientWidth)&&("rtl"===this.getStyle("direction")?viewContentBox.left+=scrollbarSize:viewContentBox.right-=scrollbarSize),(scrollbarSize=myDom.offsetHeight-myDom.clientHeight)&&(viewContentBox.bottom-=scrollbarSize),new Ext.util.Region(viewContentBox.top,viewContentBox.right,viewContentBox.bottom,viewContentBox.left)},getViewRegion:function(){var borderPadding,scroll,pos,top,left,width,height,me=this,el=me.el;return height="BODY"===el.dom.nodeName?(left=(scroll=el.getScroll()).left,top=scroll.top,width=Ext.Element.getViewportWidth(),Ext.Element.getViewportHeight()):(borderPadding=me.getBorderPadding(),left=(pos=me.getXY())[0]+borderPadding.beforeX,top=pos[1]+borderPadding.beforeY,width=me.getWidth(!0),me.getHeight(!0)),new Ext.util.Region(top,left+width,top+height,left)},move:function(direction,distance,animate){var xy=this.getXY(),x=xy[0],y=xy[1],left=[x-distance,y],right=[x+distance,y],top=[x,y-distance],bottom=[x,y+distance],hash={l:left,left:left,r:right,right:right,t:top,top:top,up:top,b:bottom,bottom:bottom,down:bottom};direction=direction.toLowerCase(),this.setXY([hash[direction][0],hash[direction][1]],animate)},setBox:function(box){var x,y,me=this;return box.isRegion&&(box={x:box.left,y:box.top,width:box.right-box.left,height:box.bottom-box.top}),me.constrainBox(box),x=box.x,y=box.y,me.setXY([x,y]),me.setSize(box.width,box.height),me.afterSetPosition(x,y),me},constrainBox:function(box){var constrainedPos,x,y;(this.constrain||this.constrainHeader)&&(x="x"in box?box.x:box.left,y="y"in box?box.y:box.top,(constrainedPos=this.calculateConstrainedPosition(null,[x,y],!1,[box.width,box.height]))&&(box.x=constrainedPos[0],box.y=constrainedPos[1]))},translatePoints:function(x,y){var pos=this.translateXY(x,y);return{left:pos.x,top:pos.y}},translateXY:function(x,y){var el=this.el,styles=el.getStyle(this._positionTopLeft),relative="relative"===styles.position,left=parseFloat(styles.left),top=parseFloat(styles.top),xy=this.getXY();return Ext.isArray(x)&&(y=x[1],x=x[0]),isNaN(left)&&(left=relative?0:el.dom.offsetLeft),isNaN(top)&&(top=relative?0:el.dom.offsetTop),{x:left="number"==typeof x?x-xy[0]+left:void 0,y:top="number"==typeof y?y-xy[1]+top:void 0}},reverseTranslateXY:function(xy){var relative,offsetParentXY,x,y,coords=xy,el=this.el,offsetParent=el.dom.offsetParent;return offsetParent&&(relative=el.isStyle("position","relative"),offsetParentXY=Ext.fly(offsetParent).getXY(),x=xy[0]+offsetParentXY[0]+offsetParent.clientLeft,y=xy[1]+offsetParentXY[1]+offsetParent.clientTop,relative&&(x+=el.getPadding("l"),y+=el.getPadding("t")),coords=[x,y]),coords}}),Ext.define("Ext.overrides.util.Positionable",{override:"Ext.util.Positionable",anchorTo:function(anchorToEl,alignment,offsets,animate,monitorScroll,callback){function action(){me.alignTo(anchorToEl,alignment,offsets,animate),Ext.callback(callback,me)}var me=this,scroll=!Ext.isEmpty(monitorScroll),anchor=me.getAnchor();return me.removeAnchor(),Ext.apply(anchor,{fn:action,scroll:scroll}),Ext.on("resize",action,null),scroll&&Ext.getWin().on("scroll",action,null,{buffer:isNaN(monitorScroll)?50:monitorScroll}),action(),me},getAnchor:function(){var data,el=this.el;if(el.dom)return(data=el.getData())._anchor||(data._anchor={})},removeAnchor:function(){var anchor=this.getAnchor();return anchor&&anchor.fn&&(Ext.un("resize",anchor.fn),anchor.scroll&&Ext.getWin().on("scroll",anchor.fn),delete anchor.fn),this},setBox:function(box,animate){var me=this;return box.isRegion&&(box={x:box.left,y:box.top,width:box.right-box.left,height:box.bottom-box.top}),animate?(me.constrainBox(box),me.animate(Ext.applyIf({to:box,listeners:{afteranimate:Ext.Function.bind(me.afterSetPosition,me,[box.x,box.y])}},animate))):me.callParent([box]),me}}),Ext.define("Ext.dom.UnderlayPool",{constructor:function(elementConfig){this.elementConfig=elementConfig,this.cache=[]},checkOut:function(){var el=this.cache.shift();return el||(el=Ext.Element.create(this.elementConfig)).setVisibilityMode(2),el},checkIn:function(el){this.cache.push(el)},reset:function(){for(var cache=this.cache,i=cache.length;i--;)cache[i].destroy();this.cache=[]}}),Ext.define("Ext.dom.Underlay",{constructor:function(config){Ext.apply(this,config)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var el=this.el;el&&(el.hide(),this.getPool().checkIn(el),this.el=null,this.hidden=!0)},realign:function(x,y,width,height){var el=this.el,target=this.target,offsets=this.offsets,max=Math.max;el&&(null==x&&(x=target.getX()),null==y&&(y=target.getY()),null==width&&(width=target.getWidth()),null==height&&(height=target.getHeight()),offsets&&(x+=offsets.x,y+=offsets.y,width=max(width+offsets.w,0),height=max(height+offsets.h,0)),el.setXY([x,y]),el.setSize(width,height))},setZIndex:function(zIndex){this.zIndex=zIndex,this.el&&this.el.setStyle("z-index",zIndex)},show:function(){var dom,me=this,target=me.target,zIndex=me.zIndex,el=me.el,insertionTarget=me.getInsertionTarget().dom;el=el||(me.el=me.getPool().checkOut()),me.beforeShow(),null==zIndex&&(zIndex=parseInt(target.getStyle("z-index"),10)),zIndex&&el.setStyle("z-index",zIndex),el.setStyle("position",me.fixed?"fixed":""),(dom=el.dom).nextSibling!==insertionTarget&&target.dom.parentNode.insertBefore(dom,insertionTarget),el.show(),me.realign(),me.hidden=!1}}),Ext.define("Ext.dom.Shadow",{extend:Ext.dom.Underlay,alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:Ext.baseCSSPrefix+(Ext.supports.CSS3BoxShadow?"css":"ie")+"-shadow",constructor:function(config){var outerOffsets,offsets,offset,rad,me=this;switch(me.callParent([config]),me.elementConfig={cls:me.cls,role:"presentation"},offset=me.offset,rad=Math.floor(offset/2),me.opacity=50,me.mode.toLowerCase()){case"drop":outerOffsets={x:0,y:0,w:offset,h:offset},offsets=Ext.supports.CSS3BoxShadow?{x:offset,y:offset,h:-offset,w:-offset}:{x:-rad,y:-rad,h:-rad,w:-rad};break;case"sides":outerOffsets={x:-offset,y:0,w:2*offset,h:offset},offsets=Ext.supports.CSS3BoxShadow?{x:0,y:offset,h:-offset,w:0}:{x:1+rad-2*offset,y:-(1+rad),h:-1,w:rad-1};break;case"frame":outerOffsets={x:-offset,y:-offset,w:2*offset,h:2*offset},offsets=Ext.supports.CSS3BoxShadow?{x:0,y:0,h:0,w:0}:{x:1+rad-2*offset,y:1+rad-2*offset,h:offset-rad-1,w:offset-rad-1};break;case"bottom":outerOffsets={x:-offset,y:0,w:2*offset,h:offset},offsets=Ext.supports.CSS3BoxShadow?{x:0,y:offset,h:-offset,w:0}:{x:0,y:offset,h:0,w:0}}me.offsets=offsets,me.outerOffsets=outerOffsets},getShadowSize:function(){var offset=this.el?this.offset:0,result=[offset,offset,offset,offset],mode=this.mode.toLowerCase();return this.el&&"frame"!==mode&&(result[0]=0,"drop"==mode&&(result[3]=0)),result},boxShadowProperty:function(){var property="boxShadow",style=document.documentElement.style;return"boxShadow"in style||("WebkitBoxShadow"in style?property="WebkitBoxShadow":"MozBoxShadow"in style&&(property="MozBoxShadow")),property}(),beforeShow:function(){var me=this,style=me.el.dom.style,shim=me.shim;Ext.supports.CSS3BoxShadow?style[me.boxShadowProperty]="0 0 "+(me.offset+2)+"px #888":style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+me.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+me.offset+")",shim&&shim.realign()},setOpacity:function(opacity){var el=this.el;el&&(Ext.isIE&&!Ext.supports.CSS3BoxShadow&&(opacity=Math.floor(100*opacity/2)/100),this.opacity=opacity,el.setOpacity(opacity))}}),Ext.define("Ext.dom.Shim",{extend:Ext.dom.Underlay,cls:Ext.baseCSSPrefix+"shim",constructor:function(config){this.callParent([config]),this.elementConfig={tag:"iframe",cls:this.cls,role:"presentation",frameBorder:"0",src:Ext.SSL_SECURE_URL,tabindex:"-1"}},getInsertionTarget:function(){var shadow=this.shadow;return shadow&&shadow.el||this.target}}),Ext.define("Ext.dom.ElementEvent",{extend:Ext.util.Event,addListener:function(fn,scope,options,caller,manager){var me=this,name=me.name;return!1===(options=options||{}).delegated||Ext.event.publisher.Dom.instance.directEvents[name]?options.capture?(me.directCaptures||(me.directCaptures=new Ext.util.Event(me.observable,name))).addListener(fn,scope,options,caller,manager):(me.directs||(me.directs=new Ext.util.Event(me.observable,name))).addListener(fn,scope,options,caller,manager):options.capture?(me.captures||(me.captures=new Ext.util.Event(me.observable,name))).addListener(fn,scope,options,caller,manager):me.callParent([fn,scope,options,caller,manager])},removeListener:function(fn,scope){var me=this,captures=me.captures,directs=me.directs,directCaptures=me.directCaptures,removed=!1,index=me.findListener(fn,scope);return-1!==index?removed=me.callParent([fn,scope,index]):(directs&&(index=directs.findListener(fn,scope)),-1!==index?removed=directs.removeListener(fn,scope,index):(captures&&(index=captures.findListener(fn,scope)),-1!==index?removed=captures.removeListener(fn,scope,index):directCaptures&&-1!==(index=directCaptures.findListener(fn,scope))&&(removed=directCaptures.removeListener(fn,scope,index)))),removed},clearListeners:function(){var directCaptures=this.directCaptures,directs=this.directs,captures=this.captures;directCaptures&&directCaptures.clearListeners(),directs&&directs.clearListeners(),captures&&captures.clearListeners(),this.callParent()},suspend:function(){var directCaptures=this.directCaptures,directs=this.directs,captures=this.captures;directCaptures&&directCaptures.suspend(),directs&&directs.suspend(),captures&&captures.suspend(),this.callParent()},resume:function(){var directCaptures=this.directCaptures,directs=this.directs,captures=this.captures;directCaptures&&directCaptures.resume(),directs&&directs.resume(),captures&&captures.resume(),this.callParent()}}),Ext.define("Ext.event.publisher.Publisher",{handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var type=this.type;this.handles={},this.registerEvents(),Ext.event.publisher.Publisher.publishers[type]=this},registerEvents:function(events){var eventName,i,publishersByEvent=Ext.event.publisher.Publisher.publishersByEvent,handledEvents=events||this.handledEvents,ln=handledEvents.length;for(i=0;i<ln;i++)eventName=handledEvents[i],this.handles[eventName]=1,publishersByEvent[eventName]=this},fire:function(element,eventName,args){var event;element.hasListeners[eventName]&&(event=element.events[eventName])&&event.fire.apply(event,args)}}),Ext.define("Ext.util.Offset",{statics:{fromObject:function(obj){return new this(obj.x,obj.y)}},constructor:function(x,y){return this.x=null==x||isNaN(x)?0:x,this.y=null==y||isNaN(y)?0:y,this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(p){this.x=p.x,this.y=p.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(offset){return this.x==offset.x&&this.y==offset.y},round:function(to){if(isNaN(to))this.x=Math.round(this.x),this.y=Math.round(this.y);else{var factor=Math.pow(10,to);this.x=Math.round(this.x*factor)/factor,this.y=Math.round(this.y*factor)/factor}},isZero:function(){return 0==this.x&&0==this.y}}),Ext.define("Ext.util.Region",{isRegion:!0,statics:{getRegion:function(el){return Ext.fly(el).getRegion()},from:function(o){return new this(o.top,o.right,o.bottom,o.left)}},constructor:function(top,right,bottom,left){var me=this;me.y=me.top=me[1]=top,me.right=right,me.bottom=bottom,me.x=me.left=me[0]=left},contains:function(region){return region.x>=this.x&&region.right<=this.right&&region.y>=this.y&&region.bottom<=this.bottom},intersect:function(region){var t=Math.max(this.y,region.y),r=Math.min(this.right,region.right),b=Math.min(this.bottom,region.bottom),l=Math.max(this.x,region.x);return t<b&&l<r&&new this.self(t,r,b,l)},union:function(region){var t=Math.min(this.y,region.y),r=Math.max(this.right,region.right),b=Math.max(this.bottom,region.bottom),l=Math.min(this.x,region.x);return new this.self(t,r,b,l)},constrainTo:function(r){var me=this,constrain=Ext.Number.constrain;return me.top=me.y=constrain(me.top,r.y,r.bottom),me.bottom=constrain(me.bottom,r.y,r.bottom),me.left=me.x=constrain(me.left,r.x,r.right),me.right=constrain(me.right,r.x,r.right),me},adjust:function(top,right,bottom,left){var me=this;return me.top=me.y+=top,me.left=me.x+=left,me.right+=right,me.bottom+=bottom,me},getOutOfBoundOffset:function(axis,p){if(Ext.isObject(axis)){p=axis;var d=new Ext.util.Offset;return d.x=this.getOutOfBoundOffsetX(p.x),d.y=this.getOutOfBoundOffsetY(p.y),d}return"x"==axis?this.getOutOfBoundOffsetX(p):this.getOutOfBoundOffsetY(p)},getOutOfBoundOffsetX:function(p){return p<=this.x?this.x-p:p>=this.right?this.right-p:0},getOutOfBoundOffsetY:function(p){return p<=this.y?this.y-p:p>=this.bottom?this.bottom-p:0},isOutOfBound:function(axis,p){return Ext.isObject(axis)?(p=axis,this.isOutOfBoundX(p.x)||this.isOutOfBoundY(p.y)):"x"==axis?this.isOutOfBoundX(p):this.isOutOfBoundY(p)},isOutOfBoundX:function(p){return p<this.x||p>this.right},isOutOfBoundY:function(p){return p<this.y||p>this.bottom},restrict:function(axis,p,factor){var newP;return Ext.isObject(axis)?(factor=p,(newP=(p=axis).copy?p.copy():{x:p.x,y:p.y}).x=this.restrictX(p.x,factor),newP.y=this.restrictY(p.y,factor),newP):"x"==axis?this.restrictX(p,factor):this.restrictY(p,factor)},restrictX:function(p,factor){return factor=factor||1,p<=this.x?p-=(p-this.x)*factor:p>=this.right&&(p-=(p-this.right)*factor),p},restrictY:function(p,factor){return factor=factor||1,p<=this.y?p-=(p-this.y)*factor:p>=this.bottom&&(p-=(p-this.bottom)*factor),p},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(p){var me=this;return me.top=me.y=me[1]=p.y,me.right=p.right,me.bottom=p.bottom,me.left=me.x=me[0]=p.x,this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(x,y){1==arguments.length&&(y=x.y,x=x.x);var me=this;return me.top=me.y+=y,me.right+=x,me.bottom+=y,me.left=me.x+=x,me},round:function(){var me=this;return me.top=me.y=Math.round(me.y),me.right=Math.round(me.right),me.bottom=Math.round(me.bottom),me.left=me.x=Math.round(me.x),me},equals:function(region){return this.top===region.top&&this.right===region.right&&this.bottom===region.bottom&&this.left===region.left}}),Ext.define("Ext.util.Point",{extend:Ext.util.Region,radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(e){var changedTouches=e.changedTouches,touch=changedTouches&&0<changedTouches.length?changedTouches[0]:e;return this.fromTouch(touch)},fromTouch:function(touch){return new this(touch.pageX,touch.pageY)},from:function(object){return object?object instanceof this?object:new this(object.x,object.y):new this(0,0)}},constructor:function(x,y){null==x&&(x=0),null==y&&(y=0),this.callParent([y,x,y,x])},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(point){return this.x=point.x,this.y=point.y,this},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(point){return this.x===point.x&&this.y===point.y},isCloseTo:function(point,threshold){if("number"==typeof threshold)return this.getDistanceTo(point)<=threshold;var x=point.x,y=point.y,thresholdX=threshold.x,thresholdY=threshold.y;return this.x<=x+thresholdX&&this.x>=x-thresholdX&&this.y<=y+thresholdY&&this.y>=y-thresholdY},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(region){return region instanceof Ext.util.Region||(region=Ext.get(region.el||region).getRegion()),region.contains(this)},roundedEquals:function(point){return point&&"object"==typeof point||(point=this.origin),Math.round(this.x)===Math.round(point.x)&&Math.round(this.y)===Math.round(point.y)},getDistanceTo:function(point){point&&"object"==typeof point||(point=this.origin);var deltaX=this.x-point.x,deltaY=this.y-point.y;return Math.sqrt(deltaX*deltaX+deltaY*deltaY)},getAngleTo:function(point){point&&"object"==typeof point||(point=this.origin);var deltaX=this.x-point.x,deltaY=this.y-point.y;return Math.atan2(deltaY,deltaX)*this.radianToDegreeConstant}},function(){this.prototype.translate=this.prototype.translateBy}),Ext.define("Ext.event.Event",{alternateClassName:"Ext.EventObjectImpl",isStopped:!1,defaultPrevented:!1,isEvent:!0,statics:{resolveTextNode:function(node){return node&&3===node.nodeType?node.parentNode:node},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypes:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"}},constructor:function(event){var pointerType,relatedTarget,me=this,self=me.self,resolveTextNode=me.self.resolveTextNode,changedTouches=event.changedTouches,coordinateOwner=changedTouches?changedTouches[0]:event,type=event.type;me.pageX=coordinateOwner.pageX,me.pageY=coordinateOwner.pageY,me.target=me.delegatedTarget=resolveTextNode(event.target),(relatedTarget=event.relatedTarget)&&(me.relatedTarget=resolveTextNode(relatedTarget)),me.browserEvent=me.event=event,me.type=type,me.button=event.button||0,me.shiftKey=event.shiftKey,me.ctrlKey=event.ctrlKey||event.metaKey||!1,me.altKey=event.altKey,me.charCode=event.charCode,me.keyCode=event.keyCode,me.buttons=event.buttons,0===me.button&&0===me.buttons&&(me.buttons=1),void 0!==self.forwardTab&&self.focusEvents[type]&&(me.forwardTab=self.forwardTab),self.mouseEvents[type]||self.clickEvents[type]?pointerType="mouse":self.pointerEvents[type]?pointerType=self.pointerTypes[event.pointerType]:self.touchEvents[type]&&(pointerType="touch"),pointerType&&(me.pointerType=pointerType),me.timeStamp=me.time=+(event.timeStamp||new Date)},chain:function(props){var e=Ext.Object.chain(this);return e.parentEvent=this,Ext.apply(e,props)},correctWheelDelta:function(delta){var scale=this.WHEEL_SCALE,ret=Math.round(delta/scale);return!ret&&delta&&(ret=delta<0?-1:1),ret},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return this.keyCodes[this.keyCode]},getPoint:function(){var xy=this.getXY();return new Ext.util.Point(xy[0],xy[1])},getRelatedTarget:function(selector,maxDepth,returnEl){var relatedTarget=this.relatedTarget,target=null;return relatedTarget&&(target=selector?Ext.fly(relatedTarget).findParent(selector,maxDepth,returnEl):returnEl?Ext.get(relatedTarget):relatedTarget),target},getTarget:function(selector,maxDepth,returnEl){return selector?Ext.fly(this.target).findParent(selector,maxDepth,returnEl):returnEl?Ext.get(this.target):this.target},getTime:function(){return this.time},getWheelDelta:function(){return this.getWheelDeltas().y},getWheelDeltas:function(){var event=this.browserEvent,dx=0,dy=0;return Ext.isDefined(event.wheelDeltaX)?(dx=event.wheelDeltaX,dy=event.wheelDeltaY):event.wheelDelta?dy=event.wheelDelta:event.detail&&(100<(dy=-event.detail)?dy=3:dy<-100&&(dy=-3),Ext.isDefined(event.axis)&&event.axis===event.HORIZONTAL_AXIS&&(dx=dy,dy=0)),{x:this.correctWheelDelta(dx),y:this.correctWheelDelta(dy)}},getX:function(){return this.getXY()[0]},getXY:function(){var me=this,xy=me.xy;if(!xy){var browserEvent,doc,docEl,body,x=(xy=me.xy=[me.pageX,me.pageY])[0];x||0===x||(browserEvent=me.browserEvent,docEl=(doc=document).documentElement,body=doc.body,xy[0]=browserEvent.clientX+(docEl&&docEl.scrollLeft||body&&body.scrollLeft||0)-(docEl&&docEl.clientLeft||body&&body.clientLeft||0),xy[1]=browserEvent.clientY+(docEl&&docEl.scrollTop||body&&body.scrollTop||0)-(docEl&&docEl.clientTop||body&&body.clientTop||0))}return xy},getY:function(){return this.getXY()[1]},hasModifier:function(){return!!(this.ctrlKey||this.altKey||this.shiftKey||this.metaKey)},isNavKeyPress:function(scrollableOnly){var me=this,k=me.keyCode;return(!("keypress"===me.type)||Ext.isGecko)&&33<=k&&k<=40||!scrollableOnly&&(k===me.RETURN||k===me.TAB||k===me.ESC)},isSpecialKey:function(){var me=this,k=me.keyCode,isGecko=Ext.isGecko,isKeyPress="keypress"===me.type;return isGecko&&isKeyPress&&0===me.charCode||this.isNavKeyPress()||k===me.BACKSPACE||k===me.ENTER||16<=k&&k<=20||(!isKeyPress||isGecko)&&44<=k&&k<=46},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var parentEvent=this.parentEvent;return this.defaultPrevented=!0,parentEvent&&(parentEvent.defaultPrevented=!0),this.browserEvent.preventDefault(),this},setCurrentTarget:function(target){this.currentTarget=this.delegatedTarget=target},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var me=this,browserEvent=me.browserEvent,parentEvent=me.parentEvent;return me.isStopped=!0,parentEvent&&(parentEvent.isStopped=!0),browserEvent.stopPropagation?browserEvent.stopPropagation():browserEvent.cancelBubble=!0,me},within:function(el,related,allowEl){var t;return el&&(t=related?this.getRelatedTarget():this.getTarget()),!!t&&(Ext.fly(el).contains(t)||!(!allowEl||t!==Ext.getDom(el)))},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},function(Event){var keyName,scale,prototype=Event.prototype,constants={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:(Ext.isGecko?scale=3:Ext.isMac?(scale=Ext.isSafari&&532<=Ext.webKitVersion?120:12,scale*=3):scale=120,scale)},keyCodes={};for(keyName in Ext.apply(Event,constants),Ext.apply(prototype,constants),delete constants.WHEEL_SCALE,delete constants.RETURN,constants)keyCodes[constants[keyName]]=keyName;prototype.keyCodes=keyCodes,prototype.getTrueXY=prototype.getXY}),Ext.define("Ext.overrides.event.Event",{override:"Ext.event.Event",mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},injectEvent:function(){var API,crazyIEButtons,dispatchers={};function cannotInject(target,srcEvent){}return!Ext.isIE9m&&document.createEvent?API={createHtmlEvent:function(doc,type,bubbles,cancelable){var event=doc.createEvent("HTMLEvents");return event.initEvent(type,bubbles,cancelable),event},createMouseEvent:function(doc,type,bubbles,cancelable,detail,clientX,clientY,ctrlKey,altKey,shiftKey,metaKey,button,relatedTarget){var event=doc.createEvent("MouseEvents"),view=doc.defaultView||window;return event.initMouseEvent?event.initMouseEvent(type,bubbles,cancelable,view,detail,clientX,clientY,clientX,clientY,ctrlKey,altKey,shiftKey,metaKey,button,relatedTarget):((event=doc.createEvent("UIEvents")).initEvent(type,bubbles,cancelable),event.view=view,event.detail=detail,event.screenX=clientX,event.screenY=clientY,event.clientX=clientX,event.clientY=clientY,event.ctrlKey=ctrlKey,event.altKey=altKey,event.metaKey=metaKey,event.shiftKey=shiftKey,event.button=button,event.relatedTarget=relatedTarget),event},createUIEvent:function(doc,type,bubbles,cancelable,detail){var event=doc.createEvent("UIEvents"),view=doc.defaultView||window;return event.initUIEvent(type,bubbles,cancelable,view,detail),event},fireEvent:function(target,type,event){target.dispatchEvent(event)}}:document.createEventObject&&(crazyIEButtons={0:1,1:4,2:2},API={createHtmlEvent:function(doc,type,bubbles,cancelable){var event=doc.createEventObject();return event.bubbles=bubbles,event.cancelable=cancelable,event},createMouseEvent:function(doc,type,bubbles,cancelable,detail,clientX,clientY,ctrlKey,altKey,shiftKey,metaKey,button,relatedTarget){var event=doc.createEventObject();return event.bubbles=bubbles,event.cancelable=cancelable,event.detail=detail,event.screenX=clientX,event.screenY=clientY,event.clientX=clientX,event.clientY=clientY,event.ctrlKey=ctrlKey,event.altKey=altKey,event.shiftKey=shiftKey,event.metaKey=metaKey,event.button=crazyIEButtons[button]||button,event.relatedTarget=relatedTarget,event},createUIEvent:function(doc,type,bubbles,cancelable,detail){var event=doc.createEventObject();return event.bubbles=bubbles,event.cancelable=cancelable,event},fireEvent:function(target,type,event){target.fireEvent("on"+type,event)}}),Ext.Object.each({load:[!1,!1],unload:[!1,!1],select:[!0,!1],change:[!0,!1],submit:[!0,!0],reset:[!0,!1],resize:[!0,!1],scroll:[!0,!1]},function(name,value){var bubbles=value[0],cancelable=value[1];dispatchers[name]=function(targetEl,srcEvent){var e=API.createHtmlEvent(name,bubbles,cancelable);API.fireEvent(targetEl,name,e)}}),Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(eventName){var type,detail,cancelable;dispatchers[eventName]=(detail=1,cancelable="mousemove"!==(type=eventName),function(targetEl,srcEvent){var xy=srcEvent.getXY(),e=API.createMouseEvent(targetEl.ownerDocument,type,!0,cancelable,detail,xy[0],xy[1],srcEvent.ctrlKey,srcEvent.altKey,srcEvent.shiftKey,srcEvent.metaKey,srcEvent.button,srcEvent.relatedTarget);API.fireEvent(targetEl,type,e)})}),Ext.Object.each({focusin:[!0,!1],focusout:[!0,!1],activate:[!0,!0],focus:[!1,!1],blur:[!1,!1]},function(name,value){var bubbles=value[0],cancelable=value[1];dispatchers[name]=function(targetEl,srcEvent){var e=API.createUIEvent(targetEl.ownerDocument,name,bubbles,cancelable,1);API.fireEvent(targetEl,name,e)}}),API||(dispatchers={},API={}),function(target){(dispatchers[this.type]||cannotInject)(target?target.dom||target:this.getTarget(),this)}}(),preventDefault:function(){var unselectable,target,event=this.browserEvent,parentEvent=this.parentEvent;return"unknown"!=typeof event.type&&(this.defaultPrevented=!0,parentEvent&&(parentEvent.defaultPrevented=!0),event.preventDefault?event.preventDefault():("mousedown"===event.type&&(target=event.target,"on"!==(unselectable=target.getAttribute("unselectable"))&&(target.setAttribute("unselectable","on"),Ext.defer(function(){target.setAttribute("unselectable",unselectable)},1))),event.returnValue=!1,(event.ctrlKey||111<event.keyCode&&event.keyCode<124)&&(event.keyCode=-1))),this},stopPropagation:function(){var me=this;return"unknown"!=typeof me.browserEvent.type&&(me.mousedownEvents[me.type]&&Ext.GlobalEvents.fireMouseDown(me),me.callParent()),me},deprecated:{"5.0":{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){function onKeyDown(e){9===e.keyCode&&(Event.forwardTab=!e.shiftKey)}function onKeyUp(e){9===e.keyCode&&delete Event.forwardTab}var btnMap,Event=this;Ext.isIE9m?(btnMap={0:0,1:0,4:1,2:2},Event.override({statics:{enableIEAsync:function(browserEvent){var name,fakeEvent={};for(name in browserEvent)fakeEvent[name]=browserEvent[name];return fakeEvent}},constructor:function(event,info,touchesMap,identifiers){var me=this;me.callParent([event,info,touchesMap,identifiers]),me.button=btnMap[event.button],"contextmenu"===event.type&&(me.button=2),me.toElement=event.toElement,me.fromElement=event.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(browserEvent){this.browserEvent=this.self.enableIEAsync(browserEvent)},getRelatedTarget:function(selector,maxDepth,returnEl){var type,target,me=this;return me.relatedTarget||(type=me.type,me.mouseLeaveRe.test(type)?target=me.toElement:me.mouseEnterRe.test(type)&&(target=me.fromElement),target&&(me.relatedTarget=me.self.resolveTextNode(target))),me.callParent([selector,maxDepth,returnEl])}}),document.attachEvent("onkeydown",onKeyDown),document.attachEvent("onkeyup",onKeyUp),window.attachEvent("onunload",function(){document.detachEvent("onkeydown",onKeyDown),document.detachEvent("onkeyup",onKeyUp)})):document.addEventListener&&(document.addEventListener("keydown",onKeyDown,!0),document.addEventListener("keyup",onKeyUp,!0))}),Ext.define("Ext.event.publisher.Dom",{extend:Ext.event.publisher.Publisher,type:"dom",handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1,scroll:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var me=this;me.bubbleSubscribers={},me.captureSubscribers={},me.directSubscribers={},me.directCaptureSubscribers={},me.delegatedListeners={},me.initHandlers(),Ext.onInternalReady(me.onReady,me),me.callParent()},registerEvents:function(){for(var eventName,publishersByEvent=Ext.event.publisher.Publisher.publishersByEvent,domEvents=this.handledDomEvents,ln=domEvents.length,i=0;i<ln;i++)eventName=domEvents[i],this.handles[eventName]=1,publishersByEvent[eventName]=this;this.callParent()},onReady:function(){var ln,i,domEvents=this.handledDomEvents;if(domEvents)for(i=0,ln=domEvents.length;i<ln;i++)this.addDelegatedListener(domEvents[i]);Ext.getWin().on("unload",this.destroy,this)},initHandlers:function(){var me=this;me.onDelegatedEvent=Ext.bind(me.onDelegatedEvent,me),me.onDirectEvent=Ext.bind(me.onDirectEvent,me),me.onDirectCaptureEvent=Ext.bind(me.onDirectCaptureEvent,me)},addDelegatedListener:function(eventName){this.delegatedListeners[eventName]=1,this.target.addEventListener(eventName,this.onDelegatedEvent,!!this.captureEvents[eventName])},removeDelegatedListener:function(eventName){delete this.delegatedListeners[eventName],this.target.removeEventListener(eventName,this.onDelegatedEvent,!!this.captureEvents[eventName])},addDirectListener:function(eventName,element,capture){element.dom.addEventListener(eventName,capture?this.onDirectCaptureEvent:this.onDirectEvent,capture)},removeDirectListener:function(eventName,element,capture){element.dom.removeEventListener(eventName,capture?this.onDirectCaptureEvent:this.onDirectEvent,capture)},subscribe:function(element,eventName,delegated,capture){var subscribers,id,me=this;delegated&&!me.directEvents[eventName]?(subscribers=capture?me.captureSubscribers:me.bubbleSubscribers,me.handles[eventName]||me.delegatedListeners[eventName]||me.addDelegatedListener(eventName),subscribers[eventName]?++subscribers[eventName]:subscribers[eventName]=1):(subscribers=capture?me.directCaptureSubscribers:me.directSubscribers,id=element.id,(subscribers=subscribers[eventName]||(subscribers[eventName]={}))[id]?++subscribers[id]:(subscribers[id]=1,me.addDirectListener(eventName,element,capture)))},unsubscribe:function(element,eventName,delegated,capture){var captureSubscribers,bubbleSubscribers,subscribers,id,me=this;delegated&&!me.directEvents[eventName]?(captureSubscribers=me.captureSubscribers,bubbleSubscribers=me.bubbleSubscribers,(subscribers=capture?captureSubscribers:bubbleSubscribers)[eventName]&&--subscribers[eventName],me.handles[eventName]||bubbleSubscribers[eventName]||captureSubscribers[eventName]||this.removeDelegatedListener(eventName)):(subscribers=capture?me.directCaptureSubscribers:me.directSubscribers,id=element.id,(subscribers=subscribers[eventName])[id]&&--subscribers[id],subscribers[id]||(delete subscribers[id],me.removeDirectListener(eventName,element,capture)))},getPropagatingTargets:function(target){for(var currentNode=target,targets=[];currentNode;)targets.push(currentNode),currentNode=currentNode.parentNode||currentNode.defaultView;return targets},publish:function(eventName,target,e){var targets,el,i,ln,me=this;if(ln=(targets=Ext.isArray(target)?target:me.captureEvents[eventName]?(el=Ext.cache[target.id])?[el]:[]:me.getPropagatingTargets(target)).length,me.captureSubscribers[eventName])for(i=ln;i--&&(!(el=Ext.cache[targets[i].id])||(me.fire(el,eventName,e,!1,!0),!e.isStopped)););if(!e.isStopped&&me.bubbleSubscribers[eventName])for(i=0;i<ln&&(!(el=Ext.cache[targets[i].id])||(me.fire(el,eventName,e,!1,!1),!e.isStopped));i++);},fire:function(element,eventName,e,direct,capture){var event;element.hasListeners[eventName]&&(event=element.events[eventName])&&(capture&&direct?event=event.directCaptures:capture?event=event.captures:direct&&(event=event.directs),event&&(e.setCurrentTarget(element.dom),event.fire(e,e.target)))},onDelegatedEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDelegatedEvent,this,[e]):this.doDelegatedEvent(e)},doDelegatedEvent:function(e,invokeAfter){var me=this,timeStamp=e.timeStamp;return e=new Ext.event.Event(e),!me.isEventBlocked(e)&&(me.beforeEvent(e),Ext.frameStartTime=timeStamp,me.reEnterCount++,me.publish(e.type,e.target,e),me.reEnterCount--,!1!==invokeAfter&&me.afterEvent(e),e)},onDirectEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDirectEvent,this,[e,!1]):this.doDirectEvent(e,!1)},onDirectCaptureEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDirectEvent,this,[e,!0]):this.doDirectEvent(e,!0)},doDirectEvent:function(e,capture){var el,me=this,currentTarget=e.currentTarget,timeStamp=e.timeStamp;e=new Ext.event.Event(e),me.isEventBlocked(e)||(me.beforeEvent(e),Ext.frameStartTime=timeStamp,(el=Ext.cache[currentTarget.id])&&(me.reEnterCount++,me.fire(el,e.type,e,!0,capture),me.reEnterCount--),me.afterEvent(e))},beforeEvent:function(e){var touches,touch,browserEvent=e.browserEvent,self=Ext.event.publisher.Dom;"touchstart"===browserEvent.type&&1===(touches=browserEvent.touches).length&&(touch=touches[0],self.lastTouchStartX=touch.pageX,self.lastTouchStartY=touch.pageY)},afterEvent:function(e){var type=e.browserEvent.type,self=Ext.event.publisher.Dom,GlobalEvents=Ext.GlobalEvents;e.self.pointerEvents[type]&&"mouse"!==e.pointerType&&(self.lastScreenPointerEventTime=Ext.now()),"touchend"===type&&(self.lastTouchEndTime=Ext.now()),this.reEnterCount||!GlobalEvents.hasListeners.idle||GlobalEvents.idleEventMask[type]||GlobalEvents.fireEvent("idle")},isEventBlocked:function(e){var type=e.type,self=Ext.event.publisher.Dom,now=Ext.now();return!(!Ext.isGecko||"click"!==e.type||2!==e.button)||(this.blockedPointerEvents[type]&&"mouse"!==e.pointerType||this.blockedCompatibilityMouseEvents[type]&&now-self.lastScreenPointerEventTime<1e3||Ext.supports.TouchEvents&&e.self.mouseEvents[e.type]&&Math.abs(e.pageX-self.lastTouchStartX)<15&&Math.abs(e.pageY-self.lastTouchStartY)<15&&Ext.now()-self.lastTouchEndTime<1e3)},destroy:function(){var eventName;for(eventName in this.delegatedListeners)this.removeDelegatedListener(eventName);this.callParent()},reset:function(){var self=Ext.event.publisher.Dom;self.lastScreenPointerEventTime=self.lastTouchEndTime=self.lastTouchStartX=self.lastTouchStartY=void 0}},function(Dom){var doc=document,defaultView=doc.defaultView,prototype=Dom.prototype;Ext.os.is.iOS&&Ext.os.version.getMajor()<5||Ext.browser.is.AndroidStock||!defaultView||!defaultView.addEventListener?prototype.target=doc:prototype.target=defaultView,Dom.instance=new Dom}),Ext.define("Ext.overrides.event.publisher.Dom",{override:"Ext.event.publisher.Dom"},function(DomPublisher){if(Ext.isIE9m){var onDirectEvent,docElement=document.documentElement,docBody=document.body,prototype=DomPublisher.prototype;prototype.target=document,prototype.directBoundListeners={},onDirectEvent=function(e,publisher,capture){e.target=e.srcElement||window,e.currentTarget=this,capture?publisher.onDirectCaptureEvent(e):publisher.onDirectEvent(e)},DomPublisher.override({addDelegatedListener:function(eventName){this.delegatedListeners[eventName]=1,this.target.attachEvent("on"+eventName,this.onDelegatedEvent)},removeDelegatedListener:function(eventName){delete this.delegatedListeners[eventName],this.target.detachEvent("on"+eventName,this.onDelegatedEvent)},addDirectListener:function(eventName,element,capture){var dom=element.dom,boundFn=Ext.Function.bind(onDirectEvent,dom,[this,capture],!0),directBoundListeners=this.directBoundListeners;(directBoundListeners[eventName]||(directBoundListeners[eventName]={}))[dom.id]=boundFn,dom.attachEvent?dom.attachEvent("on"+eventName,boundFn):this.callParent(arguments)},removeDirectListener:function(eventName,element){var dom=element.dom;dom.detachEvent?dom.detachEvent("on"+eventName,this.directBoundListeners[eventName][dom.id]):this.callParent(arguments)},doDelegatedEvent:function(e,invokeAfter){return e.target=e.srcElement||window,"focusin"===e.type?e.relatedTarget=e.fromElement===docBody||e.fromElement===docElement?null:e.fromElement:"focusout"===e.type&&(e.relatedTarget=e.toElement===docBody||e.toElement===docElement?null:e.toElement),this.callParent([e,invokeAfter])}}),Ext.apply(prototype.directEvents,prototype.captureEvents),Ext.apply(prototype.directEvents,{change:1,input:1,paste:1}),prototype.captureEvents={}}}),Ext.define("Ext.event.publisher.Gesture",{extend:Ext.event.publisher.Dom,type:"gesture",config:{async:!0},isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},handledEvents:[],handledDomEvents:[],constructor:function(config){var me=this,handledDomEvents=me.handledDomEvents,supports=Ext.supports,supportsTouchEvents=supports.TouchEvents,Fn=Ext.Function,onTouchStart=me.onTouchStart,onTouchMove=me.onTouchMove,onTouchEnd=me.onTouchEnd,asyncTouchStart=Fn.createAnimationFrame(me.onTouchStart,me,null,1),asyncTouchMove=Fn.createAnimationFrame(me.onTouchMove,me),asyncTouchEnd=Fn.createAnimationFrame(me.onTouchEnd,me,null,1);return me._handlers={touchstart:onTouchStart,touchmove:onTouchMove,touchend:onTouchEnd,touchcancel:onTouchEnd,pointerdown:onTouchStart,pointermove:onTouchMove,pointerup:onTouchEnd,pointercancel:onTouchEnd,MSPointerDown:onTouchStart,MSPointerMove:onTouchMove,MSPointerUp:onTouchEnd,MSPointerCancel:onTouchEnd,mousedown:onTouchStart,mousemove:onTouchMove,mouseup:onTouchEnd},me._asyncHandlers={touchstart:asyncTouchStart,touchmove:asyncTouchMove,touchend:asyncTouchEnd,touchcancel:asyncTouchEnd,pointerdown:asyncTouchStart,pointermove:asyncTouchMove,pointerup:asyncTouchEnd,pointercancel:asyncTouchEnd,MSPointerDown:asyncTouchStart,MSPointerMove:asyncTouchMove,MSPointerUp:asyncTouchEnd,MSPointerCancel:asyncTouchEnd,mousedown:asyncTouchStart,mousemove:asyncTouchMove,mouseup:asyncTouchEnd},me.activeTouchesMap={},me.activeTouches=[],me.changedTouches=[],me.recognizers=[],supportsTouchEvents&&(me.onTargetTouchMove=me.onTargetTouchMove.bind(me),me.onTargetTouchEnd=me.onTargetTouchEnd.bind(me)),supports.PointerEvents?(handledDomEvents.push("pointerdown","pointermove","pointerup","pointercancel"),me.mousePointerType="mouse"):supports.MSPointerEvents?(handledDomEvents.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"),me.mousePointerType=4):supportsTouchEvents&&handledDomEvents.push("touchstart","touchmove","touchend","touchcancel"),(!handledDomEvents.length||supportsTouchEvents&&Ext.isWebKit&&Ext.os.is.Desktop)&&handledDomEvents.push("mousedown","mousemove","mouseup"),me.initConfig(config),me.callParent()},onReady:function(){this.callParent(),Ext.Array.sort(this.recognizers,function(recognizerA,recognizerB){var a=recognizerA.priority,b=recognizerB.priority;return b<a?1:a<b?-1:0})},registerRecognizer:function(recognizer){var i,me=this,handledEvents=recognizer.handledEvents,ln=handledEvents.length;for(recognizer.setOnRecognized(me.onRecognized),recognizer.setCallbackScope(me),i=0;i<ln;i++)me.handledEvents.push(handledEvents[i]);me.registerEvents(handledEvents),me.recognizers.push(recognizer)},onRecognized:function(eventName,e,info){var targetGroups,targets,i,touch,changedTouches=e.changedTouches,ln=changedTouches.length;if((info=info||{}).type=eventName,info.target=changedTouches[0].target,info.isStopped=!1,e=e.chain(info),1<ln){for(targetGroups=[],i=0;i<ln;i++)touch=changedTouches[i],targetGroups.push(touch.targets);targets=this.getCommonTargets(targetGroups)}else targets=changedTouches[0].targets;this.publish(eventName,targets,e)},getCommonTargets:function(targetGroups){var firstTargetGroup=targetGroups[0],ln=targetGroups.length;if(1===ln)return firstTargetGroup;for(var target,targets,j,commonTargets=[],i=1;;){if(!(target=firstTargetGroup[firstTargetGroup.length-i]))return commonTargets;for(j=1;j<ln;j++)if((targets=targetGroups[j])[targets.length-i]!==target)return commonTargets;commonTargets.unshift(target),i++}return commonTargets},invokeRecognizers:function(methodName,e){var i,recognizer,recognizers=this.recognizers,ln=recognizers.length;if("onStart"===methodName)for(i=0;i<ln;i++)recognizers[i].isActive=!0;for(i=0;i<ln;i++)(recognizer=recognizers[i]).isActive&&!1===recognizer[methodName].call(recognizer,e)&&(recognizer.isActive=!1)},updateTouches:function(e,isEnd){var touchSource,identifier,touch,target,i,ln,x,y,browserEvent=e.browserEvent,touchSources=browserEvent.changedTouches||[browserEvent],activeTouches=this.activeTouches,activeTouchesMap=this.activeTouchesMap,changedTouches=[];for(i=0,ln=touchSources.length;i<ln;i++)(touch=activeTouchesMap[identifier="identifier"in(touchSource=touchSources[i])?touchSource.identifier:"pointerId"in touchSource?touchSource.pointerId:1])||(target=Ext.event.Event.resolveTextNode(touchSource.target),touch=activeTouchesMap[identifier]={identifier:identifier,target:target,targets:this.getPropagatingTargets(target)},activeTouches.push(touch)),isEnd&&(delete activeTouchesMap[identifier],Ext.Array.remove(activeTouches,touch)),x=touchSource.pageX,y=touchSource.pageY,touch.pageX=x,touch.pageY=y,touch.point=new Ext.util.Point(x,y),changedTouches.push(touch);e.touches=Ext.Array.clone(activeTouches),e.changedTouches=changedTouches},doDelegatedEvent:function(e){(e=this.callParent([e,!1]))&&((!e.button||e.button<1)&&this.handlers[e.type].call(this,e),this.afterEvent(e))},onTouchStart:function(e){var me=this,target=e.target,touches=e.browserEvent.touches;"touchstart"===e.browserEvent.type&&(target.addEventListener("touchmove",me.onTargetTouchMove),target.addEventListener("touchend",me.onTargetTouchEnd),target.addEventListener("touchcancel",me.onTargetTouchEnd)),touches&&touches.length<=me.activeTouches.length&&me.removeGhostTouches(touches),me.updateTouches(e),me.isStarted||(me.isStarted=!0,me.invokeRecognizers("onStart",e),Ext.enableGarbageCollector&&Ext.dom.GarbageCollector.pause()),me.invokeRecognizers("onTouchStart",e)},onTouchMove:function(e){var me=this,mousePointerType=me.mousePointerType;if(me.isStarted){if(mousePointerType&&e.browserEvent.pointerType===mousePointerType&&0===e.buttons)return e.type=Ext.dom.Element.prototype.eventMap.touchend,e.button=0,void me.onTouchEnd(e);me.updateTouches(e),0<e.changedTouches.length&&me.invokeRecognizers("onTouchMove",e)}},onTouchEnd:function(e){var me=this;me.isStarted&&(me.updateTouches(e,!0),me.invokeRecognizers(me.isCancelEvent[e.type]?"onTouchCancel":"onTouchEnd",e),me.activeTouches.length||(me.isStarted=!1,me.invokeRecognizers("onEnd",e),Ext.enableGarbageCollector&&Ext.dom.GarbageCollector.resume()))},onTargetTouchMove:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doTargetTouchMove,this,[e]):this.doTargetTouchMove(e)},doTargetTouchMove:function(e){Ext.getBody().contains(e.target)||this.onTouchMove(new Ext.event.Event(e))},onTargetTouchEnd:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doTargetTouchEnd,this,[e]):this.doTargetTouchEnd(e)},doTargetTouchEnd:function(e){var target=e.target;target.removeEventListener("touchmove",this.onTargetTouchMove),target.removeEventListener("touchend",this.onTargetTouchEnd),target.removeEventListener("touchcancel",this.onTargetTouchEnd),Ext.getBody().contains(target)||this.onTouchEnd(new Ext.event.Event(e))},updateAsync:function(async){this.handlers=async?this._asyncHandlers:this._handlers},reset:function(){var i,recognizer,me=this,recognizers=me.recognizers,ln=recognizers.length;for(me.activeTouchesMap={},me.activeTouches=[],me.changedTouches=[],me.isStarted=!1,i=0;i<ln;i++)(recognizer=recognizers[i]).reset(),recognizer.isActive=!1;this.callParent()},privates:{removeGhostTouches:function(touches){var i,id,touch,ids={},len=touches.length,activeTouches=this.activeTouches,map=this.activeTouchesMap;for(i=0;i<len;++i)ids[touches[i].identifier]=!0;for(i=activeTouches.length;i--;)touches[id=(touch=activeTouches[i]).identifier]||(Ext.Array.remove(activeTouches,touch),delete map[id])}}},function(Gesture){Gesture.instance=new Gesture}),Ext.define("Ext.overrides.event.publisher.Gesture",{override:"Ext.event.publisher.Gesture"},function(){Ext.isIE9m&&this.override({updateTouches:function(e,isEnd){var browserEvent=e.browserEvent,xy=e.getXY();browserEvent.pageX=xy[0],browserEvent.pageY=xy[1],this.callParent([e,isEnd])},doDelegatedEvent:function(e){this.callParent([Ext.event.Event.enableIEAsync(e)])}})}),Ext.define("Ext.mixin.Templatable",{extend:Ext.Mixin,mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:function(){return{reference:"element"}},getElementTemplate:function(){var elementTemplate=document.createDocumentFragment();return elementTemplate.appendChild(Ext.Element.create(this.getElementConfig(),!0)),elementTemplate},initElement:function(){var prototype=this.self.prototype;prototype.elementTemplate=this.getElementTemplate(),prototype.initElement=prototype.doInitElement,this.initElement.apply(this,arguments)},linkElement:function(reference,node){this.link(reference,node)},doInitElement:function(){var referenceNodes,i,ln,referenceNode,reference,referenceAttributeName=this.referenceAttributeName;for(i=0,ln=(referenceNodes=this.elementTemplate.cloneNode(!0).querySelectorAll(this.referenceSelector)).length;i<ln;i++)reference=(referenceNode=referenceNodes[i]).getAttribute(referenceAttributeName),referenceNode.removeAttribute(referenceAttributeName),this.linkElement(reference,referenceNode)}}),Ext.define("Ext.TaskQueue",{singleton:!0,pending:!1,mode:!0,constructor:function(){this.readQueue=[],this.writeQueue=[],this.run=Ext.Function.bind(this.run,this),Ext.os.is.iOS&&Ext.interval(this.watch,500,this)},requestRead:function(fn,scope,args){this.request(!0),this.readQueue.push(arguments)},requestWrite:function(fn,scope,args){this.request(!1),this.writeQueue.push(arguments)},request:function(mode){this.pending||(this.pendingTime=Date.now(),this.pending=!0,(this.mode=mode)?Ext.defer(this.run,1,this):Ext.Function.requestAnimationFrame(this.run))},watch:function(){this.pending&&500<=Date.now()-this.pendingTime&&this.run()},run:function(){this.pending=!1;var queue,readQueue=this.readQueue,writeQueue=this.writeQueue,request=null;this.mode?(queue=readQueue,0<writeQueue.length&&(request=!1)):(queue=writeQueue,0<readQueue.length&&(request=!0));var i,ln,task,fn,scope,tasks=queue.slice();for(i=queue.length=0,ln=tasks.length;i<ln;i++)fn=(task=tasks[i])[0],scope=task[1],"string"==typeof fn&&(fn=scope[fn]),2<task.length?fn.apply(scope,task[2]):fn.call(scope);tasks.length=0,null!==request&&this.request(request)}}),Ext.define("Ext.util.sizemonitor.Abstract",{mixins:[Ext.mixin.Templatable],config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:0,height:0,contentWidth:0,contentHeight:0,constructor:function(config){this.refresh=Ext.Function.bind(this.refresh,this),this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0},this.initElement(),this.initConfig(config),this.bindListeners(!0)},bindListeners:Ext.emptyFn,applyElement:function(element){if(element)return Ext.get(element)},updateElement:function(element){element.append(this.detectorsContainer),element.addCls(Ext.baseCSSPrefix+"size-monitored")},applyArgs:function(args){return args.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.offsetWidth},getContentHeight:function(){return this.detectorsContainer.offsetHeight},refreshSize:function(){var element=this.getElement();if(!element||element.destroyed)return!1;var flag,width=element.getWidth(),height=element.getHeight(),contentWidth=this.getContentWidth(),contentHeight=this.getContentHeight(),currentContentWidth=this.contentWidth,currentContentHeight=this.contentHeight,info=this.info,resized=!1;return this.width=width,this.height=height,0<(flag=(currentContentWidth!==(this.contentWidth=contentWidth)?1:0)+(currentContentHeight!==(this.contentHeight=contentHeight)?2:0))&&(info.width=width,info.height=height,info.contentWidth=contentWidth,info.contentHeight=contentHeight,info.flag=flag,resized=!0,this.getCallback().apply(this.getScope(),this.getArgs())),resized},refresh:function(force){(this.refreshSize()||force)&&Ext.TaskQueue.requestWrite("refreshMonitors",this)},destroy:function(){var element=this.getElement();this.bindListeners(!1),element&&!element.destroyed&&element.removeCls(Ext.baseCSSPrefix+"size-monitored"),delete this._element,this.callParent()}}),Ext.define("Ext.util.sizemonitor.Scroll",{extend:Ext.util.sizemonitor.Abstract,getElementConfig:function(){return{reference:"detectorsContainer",classList:[Ext.baseCSSPrefix+"size-monitors","scroll"],children:[{reference:"expandMonitor",className:"expand"},{reference:"shrinkMonitor",className:"shrink"}]}},constructor:function(config){this.onScroll=Ext.Function.bind(this.onScroll,this),this.callParent(arguments)},bindListeners:function(bind){var method=bind?"addEventListener":"removeEventListener";this.expandMonitor[method]("scroll",this.onScroll,!0),this.shrinkMonitor[method]("scroll",this.onScroll,!0)},forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this,[!0])},onScroll:function(){Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var expandMonitor=this.expandMonitor,shrinkMonitor=this.shrinkMonitor;expandMonitor&&!expandMonitor.destroyed&&(expandMonitor.scrollLeft=1e6,expandMonitor.scrollTop=1e6),shrinkMonitor&&!shrinkMonitor.destroyed&&(shrinkMonitor.scrollLeft=1e6,shrinkMonitor.scrollTop=1e6)}}),Ext.define("Ext.util.sizemonitor.OverflowChange",{extend:Ext.util.sizemonitor.Abstract,constructor:function(config){this.onExpand=Ext.Function.bind(this.onExpand,this),this.onShrink=Ext.Function.bind(this.onShrink,this),this.callParent(arguments)},getElementConfig:function(){return{reference:"detectorsContainer",classList:[Ext.baseCSSPrefix+"size-monitors","overflowchanged"],children:[{reference:"expandMonitor",className:"expand",children:[{reference:"expandHelper"}]},{reference:"shrinkMonitor",className:"shrink",children:[{reference:"shrinkHelper"}]}]}},bindListeners:function(bind){var method=bind?"addEventListener":"removeEventListener";this.expandMonitor[method](Ext.browser.is.Firefox?"underflow":"overflowchanged",this.onExpand,!0),this.shrinkMonitor[method](Ext.browser.is.Firefox?"overflow":"overflowchanged",this.onShrink,!0)},onExpand:function(e){Ext.browser.is.Webkit&&e.horizontalOverflow&&e.verticalOverflow||Ext.TaskQueue.requestRead("refresh",this)},onShrink:function(e){Ext.browser.is.Webkit&&!e.horizontalOverflow&&!e.verticalOverflow||Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){if(!this.destroyed){var style,expandHelper=this.expandHelper,shrinkHelper=this.shrinkHelper,contentBounds=this.getContentBounds(),width=contentBounds.width,height=contentBounds.height;expandHelper&&!expandHelper.destroyed&&((style=expandHelper.style).width=width+1+"px",style.height=height+1+"px"),shrinkHelper&&!shrinkHelper.destroyed&&((style=shrinkHelper.style).width=width+"px",style.height=height+"px"),Ext.TaskQueue.requestRead("refresh",this)}}}),Ext.define("Ext.util.SizeMonitor",{constructor:function(config){var namespace=Ext.util.sizemonitor;return Ext.browser.is.Firefox?new namespace.OverflowChange(config):new namespace.Scroll(config)}}),Ext.define("Ext.event.publisher.ElementSize",{extend:Ext.event.publisher.Publisher,type:"size",handledEvents:["resize"],constructor:function(){this.monitors={},this.subscribers={},this.callParent(arguments)},subscribe:function(element){var id=element.id,subscribers=this.subscribers,monitors=this.monitors;return subscribers[id]?++subscribers[id]:(subscribers[id]=1,monitors[id]=new Ext.util.SizeMonitor({element:element,callback:this.onElementResize,scope:this,args:[element]})),element.on("painted","forceRefresh",monitors[id]),!0},unsubscribe:function(element){var sizeMonitor,id=element.id,subscribers=this.subscribers,monitors=this.monitors;subscribers[id]&&!--subscribers[id]&&(delete subscribers[id],sizeMonitor=monitors[id],element.un("painted","forceRefresh",sizeMonitor),sizeMonitor.destroy(),delete monitors[id])},onElementResize:function(element,info){Ext.TaskQueue.requestRead("fire",this,[element,"resize",[element,info]])}},function(ElementSize){ElementSize.instance=new ElementSize}),Ext.define("Ext.util.paintmonitor.Abstract",{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:function(config){this.onElementPainted=Ext.Function.bind(this.onElementPainted,this),this.initConfig(config)},bindListeners:function(bind){this.monitorElement[bind?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,!0)},applyElement:function(element){if(element)return Ext.get(element)},updateElement:function(element){this.monitorElement=Ext.Element.create({classList:[Ext.baseCSSPrefix+"paint-monitor",this.monitorClass]},!0),element.appendChild(this.monitorElement),element.addCls(Ext.baseCSSPrefix+"paint-monitored"),this.bindListeners(!0)},onElementPainted:function(){},destroy:function(){var me=this,monitorElement=me.monitorElement,parentNode=monitorElement.parentNode,element=me.getElement();me.bindListeners(!1),delete me.monitorElement,element&&!element.destroyed&&(element.removeCls(Ext.baseCSSPrefix+"paint-monitored"),delete me._element),parentNode&&parentNode.removeChild(monitorElement),me.callParent()}}),Ext.define("Ext.util.paintmonitor.CssAnimation",{extend:Ext.util.paintmonitor.Abstract,eventName:Ext.browser.is.WebKit?"webkitAnimationEnd":"animationend",monitorClass:"cssanimation",onElementPainted:function(e){e.animationName===Ext.baseCSSPrefix+"paint-monitor-helper"&&this.getCallback().apply(this.getScope(),this.getArgs())}}),Ext.define("Ext.util.PaintMonitor",{constructor:function(config){return new Ext.util.paintmonitor.CssAnimation(config)}}),Ext.define("Ext.event.publisher.ElementPaint",{extend:Ext.event.publisher.Publisher,type:"paint",handledEvents:["painted"],constructor:function(){this.monitors={},this.subscribers={},this.callParent(arguments)},subscribe:function(element){var id=element.id,subscribers=this.subscribers;subscribers[id]?++subscribers[id]:(subscribers[id]=1,this.monitors[id]=new Ext.util.PaintMonitor({element:element,callback:this.onElementPainted,scope:this,args:[element]}))},unsubscribe:function(element){var id=element.id,subscribers=this.subscribers,monitors=this.monitors;subscribers[id]&&!--subscribers[id]&&(delete subscribers[id],monitors[id].destroy(),delete monitors[id])},onElementPainted:function(element){Ext.TaskQueue.requestRead("fire",this,[element,"painted",[element]])}},function(ElementPaint){ElementPaint.instance=new ElementPaint}),Ext.define("Ext.dom.Element",function(Element){function camelReplaceFn(m,a){return a.charAt(1).toUpperCase()}var visFly,scrollFly,caFly,transformStyleName,hash,allMargins,WIN=window,DOC=document,wordsRe=/\w/g,spacesRe=/\s+/,classNameSplitRegex=/[\s]+/,transparentRe=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,adjustDirect2DTableRe=/table-row|table-.*-group/,topRe=/top/i,borders={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},paddings={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},margins={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},paddingsTLRB=[paddings.l,paddings.r,paddings.t,paddings.b],bordersTLRB=[borders.l,borders.r,borders.t,borders.b],numberRe=/\d+$/,unitRe=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,camelRe=/(-[a-z])/gi,cssRe=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,pxRe=/^\d+(?:\.\d*)?px$/i,propertyCache={},clearData=function(node,deep){var childNodes,i,len;if(1===node.nodeType&&(node._extData=null,deep))for(i=0,len=(childNodes=node.childNodes).length;i<len;++i)clearData(childNodes[i],deep)},visibilityCls=Ext.baseCSSPrefix+"hidden-visibility",displayCls=Ext.baseCSSPrefix+"hidden-display",offsetsCls=Ext.baseCSSPrefix+"hidden-offsets",clipCls=Ext.baseCSSPrefix+"hidden-clip",sizedCls=Ext.baseCSSPrefix+"sized",unsizedCls=Ext.baseCSSPrefix+"unsized",stretchedCls=Ext.baseCSSPrefix+"stretched",noTouchScrollCls=Ext.baseCSSPrefix+"no-touch-scroll",CREATE_ATTRIBUTES_style="style",CREATE_ATTRIBUTES_className="className",CREATE_ATTRIBUTES_cls="cls",CREATE_ATTRIBUTES_classList="classList",CREATE_ATTRIBUTES_text="text",CREATE_ATTRIBUTES_hidden="hidden",CREATE_ATTRIBUTES_html="html",CREATE_ATTRIBUTES_children="children",lastFocusChange=0,lastKeyboardClose=0,editableHasFocus=!1,isVirtualKeyboardOpen=!1;return{alternateClassName:["Ext.Element"],mixins:[Ext.util.Positionable,Ext.mixin.Observable],observableType:"element",isElement:!0,skipGarbageCollection:!0,$applyConfigs:!0,identifiablePrefix:"ext-element-",styleHooks:{},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(dom){var id,me=this;if("string"==typeof dom&&(dom=DOC.getElementById(dom)),!dom)return null;(id=(me.dom=dom).id)?me.id=id:id=dom.id=me.getUniqueId(),me.el=me,(Ext.cache[id]=me).mixins.observable.constructor.call(me)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,minKeyboardHeight:100,unitRe:unitRe,useDelegatedEvents:!0,validNodeTypes:{1:1,9:1},addUnits:function(size,units){return"number"==typeof size?size+(units||"px"):""===size||"auto"===size||null==size?size||"":numberRe.test(size)?size+(units||"px"):unitRe.test(size)?size:size||""},create:function(attributes,domNode){var element,elementStyle,tag,value,name,i,ln,className,hidden=CREATE_ATTRIBUTES_hidden;if((attributes=attributes||{}).isElement)return domNode?attributes.dom:attributes;if("nodeType"in attributes)return domNode?attributes:Ext.get(attributes);if("string"==typeof attributes)return DOC.createTextNode(attributes);for(name in tag=(tag=attributes.tag)||"div",elementStyle=(element=attributes.namespace?DOC.createElementNS(attributes.namespace,tag):DOC.createElement(tag)).style,attributes[hidden]&&(className=null==(className=attributes.className)?"":className+" ",attributes.className=className+displayCls,delete attributes[hidden]),attributes)if("tag"!==name)switch(value=attributes[name],name){case CREATE_ATTRIBUTES_style:if("string"==typeof value)element.setAttribute(name,value);else for(i in value)value.hasOwnProperty(i)&&(elementStyle[i]=value[i]);break;case CREATE_ATTRIBUTES_className:case CREATE_ATTRIBUTES_cls:element.className=value;break;case CREATE_ATTRIBUTES_classList:element.className=value.join(" ");break;case CREATE_ATTRIBUTES_text:element.textContent=value;break;case CREATE_ATTRIBUTES_html:element.innerHTML=value;break;case CREATE_ATTRIBUTES_children:for(i=0,ln=value.length;i<ln;i++)element.appendChild(this.create(value[i],!0));break;default:null!=value&&element.setAttribute(name,value)}return domNode?element:this.get(element)},detach:function(){var dom=this.dom;return dom&&dom.parentNode&&"BODY"!==dom.tagName&&dom.parentNode.removeChild(dom),this},fly:function(dom,named){return Ext.fly(dom,named)},fromPoint:function(x,y){return Ext.get(DOC.elementFromPoint(x,y))},get:function(el){var nodeType,dom,id,entry,isDoc,isWin,isValidNodeType,cache=Ext.cache;if(!el)return null;if(el.isFly&&(el=el.dom),"string"==typeof el){if(id=el,cache.hasOwnProperty(id)){if((entry=cache[id]).skipGarbageCollection||!Ext.isGarbage(entry.dom))return entry;entry.destroy()}if("ext-window"===id)return Element.get(WIN);if("ext-document"===id)return Element.get(DOC);if(dom=Ext.getElementById?Ext.getElementById(id):DOC.getElementById(id))return new Element(dom)}if((nodeType=el.nodeType)?(isDoc=9===nodeType,isValidNodeType=this.validNodeTypes[nodeType]):isWin=el.window==el,isValidNodeType||isWin){if(id=el.id,cache.hasOwnProperty(id)){if((entry=cache[id]).skipGarbageCollection||el===entry.dom||!Ext.isGarbage(entry.dom))return entry;entry.destroy()}return el===DOC&&(el.id="ext-document"),el==WIN&&(el.id="ext-window"),el=new Element(el),(isWin||isDoc)&&(el.skipGarbageCollection=!0),el}return el.isElement||el.isComposite?el:Ext.isIterable(el)?this.select(el):null},getActiveElement:function(asElement){var active=DOC.activeElement;return active&&active.focus||(active=DOC.body),asElement?Ext.get(active):active},getDocumentHeight:function(){return Math.max(Ext.isStrict?DOC.documentElement.scrollHeight:DOC.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(Ext.isStrict?DOC.documentElement.scrollWidth:DOC.body.scrollWidth,this.getViewportWidth())},getOrientation:function(){return Ext.supports.OrientationChange?0==WIN.orientation?"portrait":"landscape":WIN.innerHeight>WIN.innerWidth?"portrait":"landscape"},getViewportHeight:function(){var viewportHeight=Element._viewportHeight;return Ext.isIE9m?DOC.documentElement.clientHeight:null!=viewportHeight?viewportHeight:WIN.innerHeight},getViewportWidth:function(){var viewportWidth=Element._viewportWidth;return Ext.isIE9m?DOC.documentElement.clientWidth:null!=viewportWidth?viewportWidth:WIN.innerWidth},getViewSize:function(){return{width:Element.getViewportWidth(),height:Element.getViewportHeight()}},normalize:function(prop){return propertyCache[prop]||(propertyCache[prop]=prop.replace(camelRe,camelReplaceFn))},_onWindowFocusChange:function(e){Ext.fly(e.target).is(Element.editableSelector)&&(lastFocusChange=new Date,editableHasFocus="focusin"===e.type||"pointerup"===e.type)},_onWindowResize:function(){var deltaX,deltaY,windowWidth=window.innerWidth,windowHeight=window.innerHeight,now=new Date;deltaX=windowWidth-Element._windowWidth,deltaY=windowHeight-Element._windowHeight,Element._windowWidth=windowWidth,Element._windowHeight=windowHeight,(now-lastFocusChange<1e3||now-lastKeyboardClose<1e3)&&0==deltaX&&editableHasFocus&&deltaY<=-Element.minKeyboardHeight?isVirtualKeyboardOpen=!0:(isVirtualKeyboardOpen&&0==deltaX&&deltaY>=Element.minKeyboardHeight&&(isVirtualKeyboardOpen=!1,lastKeyboardClose=new Date),isVirtualKeyboardOpen||(Element._viewportWidth=windowWidth,Element._viewportHeight=windowHeight))},parseBox:function(box){var parts,ln,type=typeof(box=box||0);return"number"==type?{top:box,right:box,bottom:box,left:box}:"string"!=type?box:(1===(ln=(parts=box.split(" ")).length)?parts[1]=parts[2]=parts[3]=parts[0]:2===ln?(parts[2]=parts[0],parts[3]=parts[1]):3===ln&&(parts[3]=parts[1]),{top:parseFloat(parts[0])||0,right:parseFloat(parts[1])||0,bottom:parseFloat(parts[2])||0,left:parseFloat(parts[3])||0})},parseStyles:function(styles){var matches,out={};if(styles)for(cssRe.lastIndex=0;matches=cssRe.exec(styles);)out[matches[1]]=matches[2]||"";return out},select:function(selector,composite,root){return Ext.fly(root||DOC).select(selector,composite)},query:function(selector,asDom,root){return Ext.fly(root||DOC).query(selector,asDom)},unitizeBox:function(box,units){var me=this;return box=me.parseBox(box),me.addUnits(box.top,units)+" "+me.addUnits(box.right,units)+" "+me.addUnits(box.bottom,units)+" "+me.addUnits(box.left,units)},serializeForm:function(form){var element,name,type,options,hasValue,e,o,oLen,opt,fElements=form.elements||(DOC.forms[form]||Ext.getDom(form)).elements,hasSubmit=!1,encoder=encodeURIComponent,data="",eLen=fElements.length;for(e=0;e<eLen;e++)if(name=(element=fElements[e]).name,type=element.type,options=element.options,!element.disabled&&name)if(/select-(one|multiple)/i.test(type))for(oLen=options.length,o=0;o<oLen;o++)(opt=options[o]).selected&&(hasValue=opt.hasAttribute("value"),data+=Ext.String.format("{0}={1}&",encoder(name),encoder(hasValue?opt.value:opt.text)));else/file|undefined|reset|button/i.test(type)||/radio|checkbox/i.test(type)&&!element.checked||"submit"==type&&hasSubmit||(data+=encoder(name)+"="+encoder(element.value)+"&",hasSubmit=/submit/i.test(type));return data.substr(0,data.length-1)},getCommonAncestor:function(nodeA,nodeB,returnDom){for((caFly=caFly||new Ext.dom.Fly).attach(Ext.getDom(nodeA));!caFly.isAncestor(nodeB);){if(!caFly.dom.parentNode){caFly.attach(document.body);break}caFly.attach(caFly.dom.parentNode)}return returnDom?caFly.dom:Ext.get(caFly)}},addCls:function(names,prefix,suffix){var hasNewCls,dom,map,classList,i,ln,name,me=this,elementData=me.getData();if(!names)return me;for(elementData.isSynchronized||me.synchronize(),dom=me.dom,map=elementData.classMap,classList=elementData.classList,prefix=prefix?prefix+"-":"",suffix=suffix?"-"+suffix:"","string"==typeof names&&(names=names.split(spacesRe)),i=0,ln=names.length;i<ln;i++)(name=names[i])&&(map[name=prefix+name+suffix]||(map[name]=!0,classList.push(name),hasNewCls=!0));return hasNewCls&&(dom.className=classList.join(" ")),me},addStyles:function(sides,styles){var i,side,totalSize=0,sidesArr=(sides||"").match(wordsRe),len=sidesArr.length,styleSides=[];if(1===len)totalSize=Math.abs(parseFloat(this.getStyle(styles[sidesArr[0]]))||0);else if(len){for(i=0;i<len;i++)side=sidesArr[i],styleSides.push(styles[side]);for(styleSides=this.getStyle(styleSides),i=0;i<len;i++)side=sidesArr[i],totalSize+=parseFloat(styleSides[styles[side]])||0}return totalSize},addUnits:function(size,units){return Element.addUnits(size,units)},adjustDirect2DDimension:function(dimension){var floating,dom=this.dom,display=this.getStyle("display"),inlineDisplay=dom.style.display,inlinePosition=dom.style.position,originIndex="width"===dimension?0:1,currentStyle=dom.currentStyle;return"inline"===display&&(dom.style.display="inline-block"),dom.style.position=display.match(adjustDirect2DTableRe)?"absolute":"static",floating=(parseFloat(currentStyle[dimension])||2*parseFloat(currentStyle.msTransformOrigin.split(" ")[originIndex]))%1,dom.style.position=inlinePosition,"inline"===display&&(dom.style.display=inlineDisplay),floating},animate:function(animation){return(animation=new Ext.fx.Animation(animation)).setElement(this),(this._activeAnimation=animation).on({animationend:this._onAnimationEnd}),Ext.Animator.run(animation),animation},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(el,returnDom){var insertEl,eLen,e;if(el.nodeType||el.dom||"string"==typeof el)return el=Ext.getDom(el),this.dom.appendChild(el),returnDom?el:Ext.get(el);if(el.length){for(insertEl=Ext.fly(document.createDocumentFragment()),eLen=el.length,e=0;e<eLen;e++)insertEl.appendChild(el[e],returnDom);return this.dom.appendChild(insertEl.dom),returnDom?insertEl.dom:insertEl}return this.createChild(el,null,returnDom)},appendTo:function(el){return Ext.getDom(el).appendChild(this.dom),this},applyStyles:function(styles){return styles&&("function"==typeof styles&&(styles=styles.call()),"string"==typeof styles&&(styles=Element.parseStyles(styles)),"object"==typeof styles&&this.setStyle(styles)),this},blur:function(){var dom=this.dom;if(dom===DOC.body)return this.focus(void 0,dom);try{dom.blur()}catch(e){}return this},cacheScrollValues:function(){var descendants,descendant,i,len,scrollValues=[],scrolledDescendants=[];for(scrollFly=scrollFly||new Ext.dom.Fly,i=0,len=(descendants=this.query("*")).length;i<len;i++)(0<(descendant=descendants[i]).scrollTop||0!==descendant.scrollLeft)&&(scrolledDescendants.push(descendant),scrollValues.push(scrollFly.attach(descendant).getScroll()));return function(){var scroll,i,len;for(i=0,len=scrolledDescendants.length;i<len;i++)scroll=scrollValues[i],scrollFly.attach(scrolledDescendants[i]),scrollFly.setScrollLeft(scroll.left),scrollFly.setScrollTop(scroll.top)}},center:function(centerIn){return this.alignTo(centerIn||DOC,"c-c")},child:function(selector,returnDom){var id=Ext.get(this).id;return this.selectNode(Ext.makeIdSelector(id)+" > "+selector,!!returnDom)},clone:function(deep,returnDom){var clone=this.dom.cloneNode(deep);return Ext.supports.CloneNodeCopiesExpando&&clearData(clone,deep),returnDom?clone:Ext.get(clone)},constrainScrollLeft:function(left){var dom=this.dom;return Math.max(Math.min(left,dom.scrollWidth-dom.clientWidth),0)},constrainScrollTop:function(top){var dom=this.dom;return Math.max(Math.min(top,dom.scrollHeight-dom.clientHeight),0)},createChild:function(config,insertBefore,returnDom){return config=config||{tag:"div"},insertBefore?Ext.DomHelper.insertBefore(insertBefore,config,!0!==returnDom):Ext.DomHelper.append(this.dom,config,!0!==returnDom)},contains:function(element){if(!element)return!1;var dom=Ext.getDom(element);return dom===this.dom||this.isAncestor(dom)},destroy:function(){var dom=this.dom;dom&&dom.parentNode&&dom.parentNode.removeChild(dom),this.collect(),this.isFly||this.callParent()},detach:function(){var dom=this.dom;return dom&&dom.parentNode&&"BODY"!==dom.tagName&&dom.parentNode.removeChild(dom),this},disableShadow:function(){var shadow=this.shadow;shadow&&(shadow.hide(),shadow.disabled=!0)},disableShim:function(){var shim=this.shim;shim&&(shim.hide(),shim.disabled=!0)},disableTouchContextMenu:function(){this._contextMenuListenerRemover=this.on({MSHoldVisual:function(e){e.preventDefault()},destroyable:!0,delegated:!1})},disableTouchScroll:function(){this.addCls(noTouchScrollCls),this.on({touchmove:function(e){e.preventDefault()},translate:!1})},doReplaceWith:function(element){var dom=this.dom;dom.parentNode.replaceChild(Ext.getDom(element),dom)},doScrollIntoView:function(container,hscroll,animate,highlight,getScrollX,scrollTo){scrollFly=scrollFly||new Ext.dom.Fly;var dom=this.dom,scrollX=scrollFly.attach(container)[getScrollX](),scrollY=container.scrollTop,position=this.getScrollIntoViewXY(container,scrollX,scrollY),newScrollX=position.x,newScrollY=position.y;return highlight&&(animate?animate=Ext.apply({listeners:{afteranimate:function(){scrollFly.attach(dom).highlight()}}},animate):scrollFly.attach(dom).highlight()),newScrollY!==scrollY&&scrollFly.attach(container).scrollTo("top",newScrollY,animate),!1!==hscroll&&newScrollX!==scrollX&&scrollFly.attach(container)[scrollTo]("left",newScrollX,animate),this},down:function(selector,returnDom){return this.selectNode(selector,!!returnDom)},enableShadow:function(options,isVisible){var me=this,shadow=me.shadow||(me.shadow=new Ext.dom.Shadow(Ext.apply({target:me},options))),shim=me.shim;shim&&(shim.offsets=shadow.outerOffsets,(shim.shadow=shadow).shim=shim),!0===isVisible||!1!==isVisible&&me.isVisible()?shadow.show():shadow.hide(),shadow.disabled=!1},enableShim:function(options,isVisible){var me=this,shim=me.shim||(me.shim=new Ext.dom.Shim(Ext.apply({target:me},options))),shadow=me.shadow;shadow&&(shim.offsets=shadow.outerOffsets,(shim.shadow=shadow).shim=shim),!0===isVisible||!1!==isVisible&&me.isVisible()?shim.show():shim.hide(),shim.disabled=!1},findParent:function(simpleSelector,limit,returnEl){var target=this.dom,topmost=DOC.documentElement,depth=0;for(limit||0===limit?"number"!=typeof limit&&(topmost=Ext.getDom(limit),limit=Number.MAX_VALUE):limit=50;target&&1===target.nodeType&&depth<limit&&target!==topmost;){if(Ext.fly(target).is(simpleSelector))return returnEl?Ext.get(target):target;depth++,target=target.parentNode}return null},findParentNode:function(simpleSelector,limit,returnEl){var p=Ext.fly(this.dom.parentNode);return p?p.findParent(simpleSelector,limit,returnEl):null},first:function(selector,returnDom){return this.matchNode("nextSibling","firstChild",selector,returnDom)},focus:function(defer,dom){return dom=dom||this.dom,Number(defer)?Ext.defer(this.focus,defer,this,[null,dom]):(Ext.GlobalEvents.fireEvent("beforefocus",dom),dom.focus()),this},collect:function(){var me=this,dom=me.dom,shadow=me.shadow,shim=me.shim;me.isFly||(me.mixins.observable.destroy.call(me),delete Ext.cache[me.id],me.destroyed=!0,me.el=null),dom&&(dom._extData=me.dom=null),shadow&&(shadow.hide(),me.shadow=null),shim&&(shim.hide(),me.shim=null)},getAnchorToXY:function(el,anchor,local,mySize){return el.getAnchorXY(anchor,local,mySize)},getAttribute:function(name,namespace){var dom=this.dom;return namespace?dom.getAttributeNS(namespace,name)||dom.getAttribute(namespace+":"+name):dom.getAttribute(name)||dom[name]||null},getAttributes:function(){var attr,i,len,attributes=this.dom.attributes,result={};for(i=0,len=attributes.length;i<len;i++)result[(attr=attributes[i]).name]=attr.value;return result},getBottom:function(local){return(local?this.getLocalY():this.getY())+this.getHeight()},getById:function(id,asDom){var dom=DOC.getElementById(id)||this.dom.querySelector(Ext.makeIdSelector(id));return asDom?dom:dom?Ext.get(dom):null},getBorderPadding:function(){var paddingWidth=this.getStyle(paddingsTLRB),bordersWidth=this.getStyle(bordersTLRB);return{beforeX:(parseFloat(bordersWidth[borders.l])||0)+(parseFloat(paddingWidth[paddings.l])||0),afterX:(parseFloat(bordersWidth[borders.r])||0)+(parseFloat(paddingWidth[paddings.r])||0),beforeY:(parseFloat(bordersWidth[borders.t])||0)+(parseFloat(paddingWidth[paddings.t])||0),afterY:(parseFloat(bordersWidth[borders.b])||0)+(parseFloat(paddingWidth[paddings.b])||0)}},getBorders:function(){var bordersWidth=this.getStyle(bordersTLRB);return{beforeX:parseFloat(bordersWidth[borders.l])||0,afterX:parseFloat(bordersWidth[borders.r])||0,beforeY:parseFloat(bordersWidth[borders.t])||0,afterY:parseFloat(bordersWidth[borders.b])||0}},getBorderWidth:function(side){return this.addStyles(side,borders)},getData:function(preventCreate){var data,dom=this.dom;return dom&&((data=dom._extData)||preventCreate||(dom._extData=data={})),data},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(contentHeight,preciseHeight){var height,floating,me=this;return me.isStyle("display","none")?0:(height=me.dom.offsetHeight,Ext.supports.Direct2DBug&&(floating=me.adjustDirect2DDimension("height"),preciseHeight?height+=floating:0<floating&&floating<.5&&height++),contentHeight&&(height-=me.getBorderWidth("tb")+me.getPadding("tb")),height<0?0:height)},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(local){return local?this.getLocalX():this.getX()},getLocalX:function(){var offsetParent,x=this.getStyle("left");return x&&"auto"!==x?pxRe.test(x)?x=parseFloat(x):(x=this.getX(),(offsetParent=this.dom.offsetParent)&&(x-=Ext.fly(offsetParent).getX())):x=0,x},getLocalXY:function(){var offsetParent,me=this,style=me.getStyle(["left","top"]),x=style.left,y=style.top;return x&&"auto"!==x?pxRe.test(x)?x=parseFloat(x):(x=me.getX(),(offsetParent=me.dom.offsetParent)&&(x-=Ext.fly(offsetParent).getX())):x=0,y&&"auto"!==y?pxRe.test(y)?y=parseFloat(y):(y=me.getY(),(offsetParent=me.dom.offsetParent)&&(y-=Ext.fly(offsetParent).getY())):y=0,[x,y]},getLocalY:function(){var offsetParent,y=this.getStyle("top");return y&&"auto"!==y?pxRe.test(y)?y=parseFloat(y):(y=this.getY(),(offsetParent=this.dom.offsetParent)&&(y-=Ext.fly(offsetParent).getY())):y=0,y},getMargin:(hash={t:"top",l:"left",r:"right",b:"bottom"},allMargins=["margin-top","margin-left","margin-right","margin-bottom"],function(side){var style,key,o;if(side)o=this.addStyles(side,margins);else if(o={},(style=this.getStyle(allMargins))&&"object"==typeof style)for(key in o={},margins)o[key]=o[hash[key]]=parseFloat(style[margins[key]])||0;return o}),getPadding:function(side){return this.addStyles(side,paddings)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(local){return(local?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var left,top,dom=this.dom,docElement=DOC.documentElement,body=document.body;return top=dom===DOC||dom===body?(left=docElement.scrollLeft||(body?body.scrollLeft:0),docElement.scrollTop||(body?body.scrollTop:0)):(left=dom.scrollLeft,dom.scrollTop),{left:left,top:top}},getScrollIntoViewXY:function(container,scrollX,scrollY){var dom=this.dom,ct=Ext.getDom(container),offsets=this.getOffsetsTo(ct),width=dom.offsetWidth,height=dom.offsetHeight,left=offsets[0]+scrollX,top=offsets[1]+scrollY,bottom=top+height,right=left+width,viewHeight=ct.clientHeight,viewWidth=ct.clientWidth,viewLeft=scrollX,viewTop=scrollY;return viewHeight<height||top<viewTop?scrollY=top:viewTop+viewHeight<bottom&&(scrollY=bottom-viewHeight),viewWidth<width||left<viewLeft?scrollX=left:viewLeft+viewWidth<right&&(scrollX=right-viewWidth),{x:scrollX,y:scrollY}},getScrollLeft:function(){var dom=this.dom;return dom===DOC||dom===document.body?this.getScroll().left:dom.scrollLeft},getScrollTop:function(){var dom=this.dom;return dom===DOC||dom===document.body?this.getScroll().top:dom.scrollTop},getSize:function(contentSize){return{width:this.getWidth(contentSize),height:this.getHeight(contentSize)}},getStyle:function(property,inline){var domStyle,values,hook,out,style,i,dom=this.dom,multiple="string"!=typeof property,hooks=this.styleHooks,prop=property,props=prop,len=1;if(multiple&&(values={},prop=props[0],i=0,!(len=props.length)))return values;if(!dom||dom.documentElement)return values||"";domStyle=dom.style,inline?style=domStyle:(style=dom.ownerDocument.defaultView.getComputedStyle(dom,null))||(inline=!0,style=domStyle);do{if((hook=hooks[prop])||(hooks[prop]=hook={name:Element.normalize(prop)}),out=hook.get?hook.get(dom,this,inline,style):style[hook.name],!multiple)return out;values[prop]=out,prop=props[++i]}while(i<len);return values},getStyleValue:function(name){return this.dom.style.getPropertyValue(name)},getTop:function(local){return local?this.getLocalY():this.getY()},getValue:function(asNumber){var value=this.dom.value;return asNumber?parseInt(value,10):value},getViewSize:function(){var dom=this.dom;return dom===DOC||dom===DOC.body?{width:Element.getViewportWidth(),height:Element.getViewportHeight()}:{width:dom.clientWidth,height:dom.clientHeight}},getVisibilityMode:function(){var data=this.getData(),mode=data.visibilityMode;return void 0===mode&&(data.visibilityMode=mode=Element.DISPLAY),mode},getWidth:function(contentWidth,preciseWidth){var rect,width,floating,me=this,dom=me.dom;return me.isStyle("display","none")?0:(width=Ext.supports.BoundingClientRect?(rect=dom.getBoundingClientRect(),width=me.vertical&&!Ext.supports.RotatedBoundingClientRect?rect.bottom-rect.top:rect.right-rect.left,preciseWidth?width:Math.ceil(width)):dom.offsetWidth,Ext.supports.Direct2DBug&&!me.vertical&&(floating=me.adjustDirect2DDimension("width"),preciseWidth?width+=floating:0<floating&&floating<.5&&width++),contentWidth&&(width-=me.getBorderWidth("lr")+me.getPadding("lr")),width<0?0:width)},getX:function(){return this.getXY()[0]},getXY:function(){var box,scroll,round=Math.round,dom=this.dom,x=0,y=0;if(dom!==DOC&&dom!==DOC.body){try{box=dom.getBoundingClientRect()}catch(ex){box={left:0,top:0}}x=round(box.left),y=round(box.top),x+=(scroll=Ext.getDoc().getScroll()).left,y+=scroll.top}return[x,y]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},hasCls:function(name){var elementData=this.getData();return elementData.isSynchronized||this.synchronize(),elementData.classMap.hasOwnProperty(name)},hide:function(){return this.setVisible(!1),this},insertAfter:function(el){return(el=Ext.getDom(el)).parentNode.insertBefore(this.dom,el.nextSibling),this},insertBefore:function(el){return(el=Ext.getDom(el)).parentNode.insertBefore(this.dom,el),this},insertFirst:function(el,returnDom){return(el=el||{}).nodeType||el.dom||"string"==typeof el?(el=Ext.getDom(el),this.dom.insertBefore(el,this.dom.firstChild),returnDom?el:Ext.get(el)):this.createChild(el,this.dom.firstChild,returnDom)},insertHtml:function(where,html,returnEl){var el=Ext.DomHelper.insertHtml(where,this.dom,html);return returnEl?Ext.get(el):el},insertSibling:function(el,where,returnDom){var rt,insertEl,eLen,e,me=this,DomHelper=Ext.DomHelper,isAfter="after"===(where||"before").toLowerCase();if(Ext.isIterable(el)){if(eLen=el.length,insertEl=Ext.fly(document.createDocumentFragment()),Ext.isArray(el))for(e=0;e<eLen;e++)rt=insertEl.appendChild(el[e],returnDom);else{for(e=0;e<eLen;e++)insertEl.dom.appendChild(rt=el[0]);!1===returnDom&&(rt=Ext.get(rt))}return me.dom.parentNode.insertBefore(insertEl.dom,isAfter?me.dom.nextSibling:me.dom),rt}return(el=el||{}).nodeType||el.dom?(rt=me.dom.parentNode.insertBefore(Ext.getDom(el),isAfter?me.dom.nextSibling:me.dom),returnDom||(rt=Ext.get(rt))):rt=isAfter&&!me.dom.nextSibling?DomHelper.append(me.dom.parentNode,el,!returnDom):DomHelper[isAfter?"insertAfter":"insertBefore"](me.dom,el,!returnDom),rt},is:function(selector){var dom=this.dom;return!selector||!!dom.tagName&&(Ext.isFunction(selector)?selector(dom):dom[Ext.supports.matchesSelector](selector))},isAncestor:function(el){var ret=!1,dom=this.dom,child=Ext.getDom(el);if(dom&&child){if(dom.contains)return dom.contains(child);if(dom.compareDocumentPosition)return!!(16&dom.compareDocumentPosition(child));for(;child=child.parentNode;)ret=child===dom||ret}return ret},isPainted:Ext.browser.is.IE?function(){var dom=this.dom;return Boolean(dom&&0!==dom.offsetHeight&&0!==dom.offsetWidth)}:function(){var dom=this.dom;return Boolean(dom&&dom.offsetParent)},isScrollable:function(){var dom=this.dom;return dom.scrollHeight>dom.clientHeight||dom.scrollWidth>dom.clientWidth},isStyle:function(style,val){return this.getStyle(style)===val},isVisible:function(deep){var end,dom=this.dom;if(!dom)return!1;for(visFly=visFly||new Ext.dom.Fly,end=dom.ownerDocument.documentElement;dom!==end;dom=dom.parentNode){if(!dom||11===dom.nodeType||visFly.attach(dom).isStyle("visibility","hidden")||visFly.isStyle("display","none"))return!1;if(!deep)break}return!0},last:function(selector,returnDom){return this.matchNode("previousSibling","lastChild",selector,returnDom)},maskIframes:function(){var iframes=document.getElementsByTagName("iframe");Ext.each(iframes,function(iframe){Ext.fly(iframe.parentNode).mask().setStyle("background-color","transparent")})},matchNode:function(dir,start,selector,returnDom){var n,dom=this.dom;if(!dom)return null;for(n=dom[start];n;){if(1===n.nodeType&&(!selector||Ext.fly(n,"_matchNode").is(selector)))return returnDom?n:Ext.get(n);n=n[dir]}return null},next:function(selector,returnDom){return this.matchNode("nextSibling","nextSibling",selector,returnDom)},parent:function(selector,returnDom){return this.matchNode("parentNode","parentNode",selector,returnDom)},position:function(pos,zIndex,x,y){var me=this;"BODY"!==me.dom.tagName&&(!pos&&me.isStyle("position","static")?me.setStyle("position","relative"):pos&&me.setStyle("position",pos),zIndex&&me.setStyle("z-index",zIndex),(x||y)&&me.setXY([x||!1,y||!1]))},prev:function(selector,returnDom){return this.matchNode("previousSibling","previousSibling",selector,returnDom)},query:function(selector,asDom,single){var results,len,nlen,node,nodes,i,j,dom=this.dom;if(!dom)return null;for(asDom=!1!==asDom,single||(results=[]),i=0,len=(selector=selector.split(",")).length;i<len;i++)if("string"==typeof selector[i]){if(single)return node=dom.querySelector(selector[i]),asDom?node:Ext.get(node);for(j=0,nlen=(nodes=dom.querySelectorAll(selector[i])).length;j<nlen;j++)results.push(asDom?nodes[j]:Ext.get(nodes[j]))}return results},radioCls:function(className){var v,cn=this.dom.parentNode.childNodes;className=Ext.isArray(className)?className:[className];for(var i=0,len=cn.length;i<len;i++)(v=cn[i])&&1===v.nodeType&&Ext.fly(v).removeCls(className);return this.addCls(className)},redraw:function(){var dom=this.dom,domStyle=dom.style;domStyle.display="none",dom.offsetHeight,domStyle.display=""},remove:function(){this.destroy()},removeChild:function(element){return this.dom.removeChild(Ext.getDom(element)),this},removeCls:function(names,prefix,suffix){var hasNewCls,dom,map,classList,i,ln,name,me=this,elementData=me.getData();if(!names)return me;for(elementData.isSynchronized||me.synchronize(),dom=me.dom,map=elementData.classMap,classList=elementData.classList,prefix=prefix?prefix+"-":"",suffix=suffix?"-"+suffix:"","string"==typeof names&&(names=names.split(spacesRe)),i=0,ln=names.length;i<ln;i++)(name=names[i])&&map[name=prefix+name+suffix]&&(delete map[name],Ext.Array.remove(classList,name),hasNewCls=!0);return hasNewCls&&(dom.className=classList.join(" ")),me},repaint:function(){var me=this;return me.addCls(Ext.baseCSSPrefix+"repaint"),Ext.defer(function(){me.dom&&Ext.fly(me.dom).removeCls(Ext.baseCSSPrefix+"repaint")},1),me},replace:function(el,destroy){var parentNode=(el=Ext.getDom(el)).parentNode,id=el.id,dom=this.dom;return!1!==destroy&&id&&Ext.cache[id]?(parentNode.insertBefore(dom,el),Ext.get(el).destroy()):parentNode.replaceChild(dom,el),this},replaceCls:function(oldName,newName,prefix,suffix){var dom,map,classList,i,ln,name,change,me=this,elementData=me.getData();if(!oldName&&!newName)return me;for(oldName=oldName||[],newName=newName||[],elementData.isSynchronized||me.synchronize(),suffix=suffix||"",dom=me.dom,map=elementData.classMap,classList=elementData.classList,prefix=prefix?prefix+"-":"",suffix=suffix?"-"+suffix:"","string"==typeof oldName&&(oldName=oldName.split(spacesRe)),"string"==typeof newName&&(newName=newName.split(spacesRe)),i=0,ln=oldName.length;i<ln;i++)map[name=prefix+oldName[i]+suffix]&&(delete map[name],change=!0);for(i=0,ln=newName.length;i<ln;i++)map[name=prefix+newName[i]+suffix]||(change=map[name]=!0);return change&&(elementData.classList=classList=Ext.Object.getKeys(map),dom.className=classList.join(" ")),me},replaceWith:function(el){var newDom,me=this,dom=me.dom,parent=dom.parentNode,cache=Ext.cache;return me.clearListeners(),newDom=el.nodeType||el.dom||"string"==typeof el?(el=Ext.get(el),parent.insertBefore(el.dom,dom)):Ext.DomHelper.insertBefore(dom,el),parent.removeChild(dom),me.dom=newDom,me.isFly||(delete cache[me.id],cache[me.id=Ext.id(newDom)]=me),me},resolveListenerScope:function(defaultScope){var component=this.component;return component?component.resolveListenerScope(defaultScope):this},scroll:function(direction,distance,animate){if(!this.isScrollable())return!1;direction=direction.charAt(0);var currentScroll,constrainedScroll,dom=this.dom,side="r"===direction||"l"===direction?"left":"top",scrolled=!1;return"l"!==direction&&"t"!==direction&&"u"!==direction||(distance=-distance),(constrainedScroll="left"==side?(currentScroll=dom.scrollLeft,this.constrainScrollLeft(currentScroll+distance)):(currentScroll=dom.scrollTop,this.constrainScrollTop(currentScroll+distance)))!==currentScroll&&(this.scrollTo(side,constrainedScroll,animate),scrolled=!0),scrolled},scrollBy:function(deltaX,deltaY,animate){var me=this,dom=me.dom;return deltaX.length?(animate=deltaY,deltaY=deltaX[1],deltaX=deltaX[0]):"number"!=typeof deltaX&&(animate=deltaY,deltaY=deltaX.y,deltaX=deltaX.x),deltaX&&me.scrollTo("left",me.constrainScrollLeft(dom.scrollLeft+deltaX),animate),deltaY&&me.scrollTo("top",me.constrainScrollTop(dom.scrollTop+deltaY),animate),me},scrollChildIntoView:function(child,hscroll){Ext.fly(child).scrollIntoView(this,hscroll)},scrollIntoView:function(container,hscroll,animate,highlight){return container=Ext.getDom(container)||Ext.getBody().dom,this.doScrollIntoView(container,hscroll,animate,highlight,"getScrollLeft","scrollTo")},scrollTo:function(side,value,animate){var animCfg,prop=topRe.test(side)?"scrollTop":"scrollLeft",dom=this.dom;return animate&&this.anim?((animCfg={to:{}}).to[prop]=value,Ext.isObject(animate)&&Ext.applyIf(animCfg,animate),this.animate(animCfg)):(dom[prop]=value,dom[prop]=value),this},select:function(selector,composite){var isElementArray,elements;return"string"==typeof selector?elements=this.query(selector,!composite):(elements=selector,isElementArray=!0),composite?new Ext.CompositeElement(elements,!isElementArray):new Ext.CompositeElementLite(elements,!0)},selectNode:function(selector,asDom){return this.query(selector,asDom,!0)},set:function(attributes,useSet){var attribute,value,dom=this.dom;for(attribute in attributes)attributes.hasOwnProperty(attribute)&&(value=attributes[attribute],"style"===attribute?this.applyStyles(value):"cls"===attribute?dom.className=value:!1!==useSet?void 0===value?dom.removeAttribute(attribute):dom.setAttribute(attribute,value):dom[attribute]=value);return this},setBottom:function(bottom){return this.dom.style.bottom=Element.addUnits(bottom),this},setCls:function(className){var i,ln,map,classList,elementData=this.getData();for(elementData.isSynchronized||this.synchronize(),"string"==typeof className&&(className=className.split(spacesRe)),elementData.classList=classList=className.slice(),elementData.classMap=map={},i=0,ln=classList.length;i<ln;i++)map[classList[i]]=!0;this.dom.className=classList.join(" ")},setDisplayed:function(value){var me=this;return"boolean"==typeof value&&(value=value?me._getDisplay():"none"),me.setStyle("display",value),(me.shadow||me.shim)&&me.setUnderlaysVisible("none"!==value),me},setHeight:function(height){var me=this;return me.dom.style.height=Element.addUnits(height),(me.shadow||me.shim)&&me.syncUnderlays(),me},setHtml:function(html){return this.dom&&(this.dom.innerHTML=html),this},setId:function(id){var me=this,currentId=me.id,cache=Ext.cache;return currentId&&delete cache[currentId],me.dom.id=id,cache[me.id=id]=me},setLeft:function(left){var me=this;return me.dom.style.left=Element.addUnits(left),(me.shadow||me.shim)&&me.syncUnderlays(),me},setLocalX:function(x){var me=this,style=me.dom.style;return style.right="auto",style.left=null===x?"auto":x+"px",(me.shadow||me.shim)&&me.syncUnderlays(),me},setLocalXY:function(x,y){var me=this,style=me.dom.style;return style.right="auto",x&&x.length&&(y=x[1],x=x[0]),null===x?style.left="auto":void 0!==x&&(style.left=x+"px"),null===y?style.top="auto":void 0!==y&&(style.top=y+"px"),(me.shadow||me.shim)&&me.syncUnderlays(),me},setLocalY:function(y){var me=this;return me.dom.style.top=null===y?"auto":y+"px",(me.shadow||me.shim)&&me.syncUnderlays(),me},setMargin:function(margin){var domStyle=this.dom.style;margin||0===margin?(margin=this.self.unitizeBox(!0===margin?5:margin),domStyle.setProperty("margin",margin,"important")):(domStyle.removeProperty("margin-top"),domStyle.removeProperty("margin-right"),domStyle.removeProperty("margin-bottom"),domStyle.removeProperty("margin-left"))},setMaxHeight:function(height){return this.dom.style["max-height"]=Element.addUnits(height),this},setMaxWidth:function(width){return this.dom.style["max-width"]=Element.addUnits(width),this},setMinHeight:function(height){return this.dom.style["min-height"]=Element.addUnits(height),this},setMinWidth:function(width){return this.dom.style["min-width"]=Element.addUnits(width),this},setOpacity:function(opacity){return this.dom&&this.setStyle("opacity",opacity),this},setPadding:function(padding){var domStyle=this.dom.style;padding||0===padding?(padding=this.self.unitizeBox(!0===padding?5:padding),domStyle.setProperty("padding",padding,"important")):(domStyle.removeProperty("padding-top"),domStyle.removeProperty("padding-right"),domStyle.removeProperty("padding-bottom"),domStyle.removeProperty("padding-left"))},setRight:function(right){return this.dom.style.right=Element.addUnits(right),this},setScrollLeft:function(left){return this.dom.scrollLeft=left,this},setScrollTop:function(top){return this.dom.scrollTop=top,this},setSize:function(width,height){var me=this,style=me.dom.style;return Ext.isObject(width)&&(height=width.height,width=width.width),style.width=Element.addUnits(width),style.height=Element.addUnits(height),(me.shadow||me.shim)&&me.syncUnderlays(),me},setSizeState:function(state){var add,remove;return remove=!0===state?(add=sizedCls,[unsizedCls,stretchedCls]):!1===state?(add=unsizedCls,[sizedCls,stretchedCls]):null===state?(add=stretchedCls,[sizedCls,unsizedCls]):[sizedCls,unsizedCls,stretchedCls],add&&this.addCls(add),this.removeCls(remove),this},setStyle:function(prop,value){var hook,me=this,dom=me.dom,hooks=me.styleHooks,style=dom.style,name=prop;if("string"==typeof name)(hook=hooks[name])||(hooks[name]=hook={name:Element.normalize(name)}),value=null==value?"":value,hook.set?hook.set(dom,value,me):style[hook.name]=value,hook.afterSet&&hook.afterSet(dom,value,me);else for(name in prop)prop.hasOwnProperty(name)&&((hook=hooks[name])||(hooks[name]=hook={name:Element.normalize(name)}),value=null==(value=prop[name])?"":value,hook.set?hook.set(dom,value,me):style[hook.name]=value,hook.afterSet&&hook.afterSet(dom,value,me));return me},setText:function(text){this.dom.textContent=text},setTop:function(top){var me=this;return me.dom.style.top=Element.addUnits(top),(me.shadow||me.shim)&&me.syncUnderlays(),me},setUnderlaysVisible:function(visible){var shadow=this.shadow,shim=this.shim;shadow&&!shadow.disabled&&(visible?shadow.show():shadow.hide()),shim&&!shim.disabled&&(visible?shim.show():shim.hide())},setVisibility:function(isVisible){var domStyle=this.dom.style;isVisible?domStyle.removeProperty("visibility"):domStyle.setProperty("visibility","hidden","important")},setVisibilityMode:function(mode){return this.getData().visibilityMode=mode,this},setVisible:function(visible){var me=this,addOrRemove=visible?"removeCls":"addCls";switch(me.getVisibilityMode()){case Element.DISPLAY:me.removeCls([visibilityCls,offsetsCls,clipCls]),me[addOrRemove](displayCls);break;case Element.VISIBILITY:me.removeCls([displayCls,offsetsCls,clipCls]),me[addOrRemove](visibilityCls);break;case Element.OFFSETS:me.removeCls([visibilityCls,displayCls,clipCls]),me[addOrRemove](offsetsCls);break;case Element.CLIP:me.removeCls([visibilityCls,displayCls,offsetsCls]),me[addOrRemove](clipCls)}return(me.shadow||me.shim)&&me.setUnderlaysVisible(visible),me},setWidth:function(width){var me=this;return me.dom.style.width=Element.addUnits(width),(me.shadow||me.shim)&&me.syncUnderlays(),me},setX:function(x){return this.setXY([x,!1])},setXY:function(xy){var pos,me=this,pts=me.translatePoints(xy),style=me.dom.style;for(pos in me.position(),style.right="auto",pts)isNaN(pts[pos])||(style[pos]=pts[pos]+"px");return(me.shadow||me.shim)&&me.syncUnderlays(),me},setY:function(y){return this.setXY([!1,y])},setZIndex:function(zindex){var me=this;return me.shadow&&me.shadow.setZIndex(zindex),me.shim&&me.shim.setZIndex(zindex),me.setStyle("z-index",zindex)},show:function(){return this.setVisible(!0),this},swapCls:function(firstClass,secondClass,flag,prefix){void 0===flag&&(flag=!0);var addedClass=flag?firstClass:secondClass,removedClass=flag?secondClass:firstClass;return removedClass&&this.removeCls(prefix?prefix+"-"+removedClass:removedClass),addedClass&&this.addCls(prefix?prefix+"-"+addedClass:addedClass),this},synchronize:function(){var classList,i,ln,dom=this.dom,hasClassMap={},className=dom.className,elementData=this.getData();if(className&&0<className.length)for(i=0,ln=(classList=dom.className.split(classNameSplitRegex)).length;i<ln;i++)hasClassMap[classList[i]]=!0;else classList=[];return elementData.classList=classList,elementData.classMap=hasClassMap,elementData.isSynchronized=!0,this},syncUnderlays:function(){var xy,x,y,w,h,me=this,shadow=me.shadow,shim=me.shim,dom=me.dom;me.isVisible()&&(x=(xy=me.getXY())[0],y=xy[1],w=dom.offsetWidth,h=dom.offsetHeight,shadow&&!shadow.hidden&&shadow.realign(x,y,w,h),shim&&!shim.hidden&&shim.realign(x,y,w,h))},toggleCls:function(className,state){return"boolean"!=typeof state&&(state=!this.hasCls(className)),state?this.addCls(className):this.removeCls(className)},toggle:function(){return this.setVisible(!this.isVisible()),this},translate:(transformStyleName="webkitTransform"in DOC.createElement("div").style?"webkitTransform":"transform",function(x,y,z){this.dom.style[transformStyleName]="translate3d("+(x||0)+"px, "+(y||0)+"px, "+(z||0)+"px)"}),unmaskIframes:function(){var iframes=document.getElementsByTagName("iframe");Ext.each(iframes,function(iframe){Ext.fly(iframe.parentNode).unmask()})},unwrap:function(){var grandparentNode,cached,resumeFocus,grannyFly,tabIndex,dom=this.dom,parentNode=dom.parentNode,activeElement=Ext.fly(Ext.Element.getActiveElement());return(cached=Ext.cache[activeElement.id])&&(activeElement=cached),this.contains(activeElement)&&(cached&&cached.suspendFocusEvents(),resumeFocus=!0),parentNode?(grandparentNode=parentNode.parentNode,resumeFocus&&(tabIndex=grandparentNode.getAttribute("tabIndex"),(grannyFly=Ext.fly(grandparentNode)).set({tabIndex:-1}),grannyFly.suspendFocusEvents(),grannyFly.focus()),grandparentNode.insertBefore(dom,parentNode),grandparentNode.removeChild(parentNode)):(grandparentNode=document.createDocumentFragment()).appendChild(dom),resumeFocus&&(cached?(cached.focus(),cached.resumeFocusEvents()):Ext.fly(activeElement).focus(),grannyFly&&(grannyFly.resumeFocusEvents(),grannyFly.set({tabIndex:tabIndex}))),this},up:function(simpleSelector,limit,returnDom){return this.findParentNode(simpleSelector,limit,!returnDom)},update:function(html){return this.setHtml(html)},wrap:function(config,returnDom,selector){var cached,resumeFocus,tabIndex,dom=this.dom,newEl=Ext.DomHelper.insertBefore(dom,config||{tag:"div"},!returnDom),target=newEl,activeElement=Ext.Element.getActiveElement();return(cached=Ext.cache[activeElement.id])&&(activeElement=cached),selector&&(target=newEl.selectNode(selector,returnDom)),this.contains(activeElement)&&(cached&&cached.suspendFocusEvents(),tabIndex=newEl.dom.getAttribute("tabIndex"),newEl.set({tabIndex:-1}),newEl.suspendFocusEvents(),newEl.focus(),resumeFocus=!0),target.appendChild(dom),resumeFocus&&(cached?(cached.focus(),cached.resumeFocusEvents()):Ext.fly(activeElement).focus(),newEl.resumeFocusEvents(),newEl.set({tabIndex:tabIndex})),newEl},privates:{doAddListener:function(eventName,fn,scope,options,order,caller,manager){var observableDoAddListener,additiveEventName,translatedEventName,me=this;eventName=Ext.canonicalEventName(eventName),me.blockedEvents[eventName]||(observableDoAddListener=me.mixins.observable.doAddListener,options=options||{},me.longpressEvents[eventName]&&me.disableTouchContextMenu(),!1===Element.useDelegatedEvents&&(options.delegated=options.delegated||!1),!1!==options.translate&&((additiveEventName=me.additiveEvents[eventName])&&(options.type=eventName,eventName=additiveEventName,observableDoAddListener.call(me,eventName,fn,scope,options,order,caller,manager)),(translatedEventName=me.eventMap[eventName])&&(options.type=options.type||eventName,eventName=translatedEventName)),observableDoAddListener.call(me,eventName,fn,scope,options,order,caller,manager),delete options.type)},doRemoveListener:function(eventName,fn,scope){var observableDoRemoveListener,translatedEventName,additiveEventName,contextMenuListenerRemover,me=this;me.blockedEvents[eventName]||(observableDoRemoveListener=me.mixins.observable.doRemoveListener,me.longpressEvents[eventName]&&(contextMenuListenerRemover=this._contextMenuListenerRemover)&&contextMenuListenerRemover.destroy(),(additiveEventName=me.additiveEvents[eventName])&&(eventName=additiveEventName,observableDoRemoveListener.call(me,eventName,fn,scope)),(translatedEventName=me.eventMap[eventName])&&observableDoRemoveListener.call(me,translatedEventName,fn,scope),observableDoRemoveListener.call(me,eventName,fn,scope))},_initEvent:function(eventName){return this.events[eventName]=new Ext.dom.ElementEvent(this,eventName)},_getDisplay:function(){var data=this.getData(),display=data.originalDisplay;return void 0===display&&(data.originalDisplay=display=""),display},_getPublisher:function(eventName){var Publisher=Ext.event.publisher.Publisher,publisher=Publisher.publishersByEvent[eventName];return publisher&&(this.dom!==window||"resize"!==eventName)||(publisher=Publisher.publishers.dom),publisher},isFocusSuspended:function(){return!!this.getData().suspendFocusEvents},suspendFocusEvents:function(){this.isFly||this.suspendEvent("focus","blur"),this.getData().suspendFocusEvents=!0},resumeFocusEvents:function(){function resumeFn(){var data;this.destroyed||((data=this.getData())&&(data.suspendFocusEvents=!1),this.isFly||this.resumeEvent("focus","blur"))}!this.destroyed&&this.getData().suspendFocusEvents&&(Ext.isIE?Ext.asap(resumeFn,this):resumeFn.call(this))}},deprecated:{"5.0":{methods:{cssTranslate:null,getHTML:"getHtml",getOuterHeight:null,getOuterWidth:null,getPageBox:function(getRegion){var dom=this.dom,isDoc="BODY"===dom.nodeName,w=isDoc?Element.getViewportWidth():dom.offsetWidth,h=isDoc?Element.getViewportHeight():dom.offsetHeight,xy=this.getXY(),t=xy[1],r=xy[0]+w,b=xy[1]+h,l=xy[0];return getRegion?new Ext.util.Region(t,r,b,l):{left:l,top:t,width:w,height:h,right:r,bottom:b}},getScrollParent:null,isDescendent:null,isTransparent:function(prop){var value=this.getStyle(prop);return!!value&&transparentRe.test(value)},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml",setTopLeft:null}}}}},function(Element){var eventOptions,DOC=document,prototype=Element.prototype,supports=Ext.supports,mouseup="mouseup",eventMap=prototype.eventMap={},additiveEvents=prototype.additiveEvents={},oldId=Ext.id;Ext.id=function(obj,prefix){var id,el=Ext.getDom(obj,!0);return el?(id=el.id)||(id=oldId(null,prefix||Element.prototype.identifiablePrefix),Ext.isSandboxed&&(id=(Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-"))+id),el.id=id):id=oldId(obj,prefix),id},supports.PointerEvents?(eventMap.mousedown="pointerdown",eventMap.mousemove="pointermove",eventMap.mouseup="pointerup",eventMap.touchstart="pointerdown",eventMap.touchmove="pointermove",eventMap.touchend="pointerup",eventMap.touchcancel="pointercancel",eventMap.click="tap",eventMap.dblclick="doubletap",eventMap.mouseover="pointerover",eventMap.mouseout="pointerout",eventMap.mouseenter="pointerenter",eventMap.mouseleave="pointerleave"):supports.MSPointerEvents?(eventMap.pointerdown="MSPointerDown",eventMap.pointermove="MSPointerMove",eventMap.pointerup="MSPointerUp",eventMap.pointercancel="MSPointerCancel",eventMap.mousedown="MSPointerDown",eventMap.mousemove="MSPointerMove",eventMap.mouseup="MSPointerUp",eventMap.touchstart="MSPointerDown",eventMap.touchmove="MSPointerMove",eventMap.touchend="MSPointerUp",eventMap.touchcancel="MSPointerCancel",eventMap.click="tap",eventMap.dblclick="doubletap",eventMap.mouseover="MSPointerOver",eventMap.mouseout="MSPointerOut"):supports.TouchEvents?(eventMap.pointerdown="touchstart",eventMap.pointermove="touchmove",eventMap.pointerup="touchend",eventMap.pointercancel="touchcancel",eventMap.mousedown="touchstart",eventMap.mousemove="touchmove",eventMap.mouseup="touchend",eventMap.click="tap",eventMap.dblclick="doubletap",Ext.isWebKit&&Ext.os.is.Desktop&&(eventMap.touchstart="mousedown",eventMap.touchmove="mousemove",eventMap.touchend=mouseup,eventMap.touchcancel=mouseup,additiveEvents.mousedown="mousedown",additiveEvents.mousemove="mousemove",additiveEvents.mouseup=mouseup,additiveEvents.touchstart="touchstart",additiveEvents.touchmove="touchmove",additiveEvents.touchend="touchend",additiveEvents.touchcancel="touchcancel",additiveEvents.pointerdown="mousedown",additiveEvents.pointermove="mousemove",additiveEvents.pointerup=mouseup,additiveEvents.pointercancel=mouseup)):(eventMap.pointerdown="mousedown",eventMap.pointermove="mousemove",eventMap.pointerup=mouseup,eventMap.pointercancel=mouseup,eventMap.touchstart="mousedown",eventMap.touchmove="mousemove",eventMap.touchend=mouseup,eventMap.touchcancel=mouseup),Ext.isWebKit&&(eventMap.transitionend=Ext.browser.getVendorProperyName("transitionEnd"),eventMap.animationstart=Ext.browser.getVendorProperyName("animationStart"),eventMap.animationend=Ext.browser.getVendorProperyName("animationEnd")),Ext.supports.MouseWheel||Ext.isOpera||(eventMap.mousewheel="DOMMouseScroll"),(eventOptions=prototype.$eventOptions=Ext.Object.chain(prototype.$eventOptions)).translate=eventOptions.capture=eventOptions.delegate=eventOptions.delegated=eventOptions.stopEvent=eventOptions.preventDefault=eventOptions.stopPropagation=eventOptions.element=1,prototype.styleHooks.opacity={name:"opacity",afterSet:function(dom,value,el){var shadow=el.shadow;shadow&&shadow.setOpacity(value)}},prototype.getTrueXY=prototype.getXY,Ext.select=Element.select,Ext.query=Element.query,Ext.apply(Ext,{get:function(element){return Element.get(element)},getDom:function(el){return el&&DOC?"string"==typeof el?Ext.getElementById(el):"dom"in el?el.dom:el:null},getBody:function(){if(!Ext._bodyEl){if(!DOC.body)throw new Error("[Ext.getBody] document.body does not yet exist");Ext._bodyEl=Ext.get(DOC.body)}return Ext._bodyEl},getHead:function(){return Ext._headEl||(Ext._headEl=Ext.get(DOC.head||DOC.getElementsByTagName("head")[0])),Ext._headEl},getDoc:function(){return Ext._docEl||(Ext._docEl=Ext.get(DOC)),Ext._docEl},getWin:function(){return Ext._winEl||(Ext._winEl=Ext.get(window)),Ext._winEl},removeNode:function(node){var parent,id=(node=node.dom||node)&&node.id,el=Ext.cache[id];el?el.destroy():!node||3!==node.nodeType&&"BODY"===node.tagName.toUpperCase()||(parent=node.parentNode)&&parent.removeChild(node)}}),Ext.isGarbage=function(dom){return dom&&1===dom.nodeType&&"BODY"!==dom.tagName&&"HTML"!==dom.tagName&&(!dom.parentNode||!dom.offsetParent&&(Ext.isIE8?DOC.all[dom.id]:DOC.getElementById(dom.id))!==dom&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(dom)))},(Ext.os.is.Android||Ext.os.is.Windows&&Ext.supports.Touch)&&Ext.onReady(function(){var win=Ext.getWin();Element._windowWidth=Element._viewportWidth=window.innerWidth,Element._windowHeight=Element._viewportHeight=window.innerHeight,win.on({focusin:"_onWindowFocusChange",focusout:"_onWindowFocusChange",pointerup:"_onWindowFocusChange",capture:!0,delegated:!1,delay:1,scope:Element}),win.on({resize:"_onWindowResize",priority:2e3,scope:Element})})}),Ext.define("Ext.dom.Fly",{extend:Ext.dom.Element,alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:!0,constructor:function(dom){this.dom=dom,this.el=this},attach:function(dom){return dom?(this.dom=dom,Ext.cache[dom.id]||(this.getData().isSynchronized=!1),this):this.detach()},detach:function(){this.dom=null},addListener:null,removeListener:null},function(Fly){var flyweights={};Fly.cache=flyweights,Ext.fly=function(dom,named){var nodeType,data,fly=null,fn=Ext.fly;return named=named||fn.caller&&fn.caller.$name||"_global",(dom=Ext.getDom(dom))&&(nodeType=dom.nodeType,(Fly.prototype.validNodeTypes[nodeType]||!nodeType&&dom.window==dom)&&((fly=Ext.cache[dom.id])&&fly.dom===dom||((fly=flyweights[named]||(flyweights[named]=new Fly)).dom=dom,(data=fly.getData(!0))&&(data.isSynchronized=!1)))),fly}}),Ext.define("Ext.dom.CompositeElementLite",{alternateClassName:["Ext.CompositeElementLite"],isComposite:!0,isLite:!0,statics:{importElementMethods:function(){var Element=Ext.dom.Element,prototype=this.prototype;Ext.Object.each(Element.prototype,function(name,member){"function"!=typeof member||prototype[name]||(prototype[name]=function(){return this.invoke(name,arguments)})})}},constructor:function(elements,skipValidation){skipValidation?this.elements=elements||[]:(this.elements=[],this.add(elements))},getElement:function(el){return(this._fly||(this._fly=new Ext.dom.Fly)).attach(el)},transformElement:function(el){return Ext.getDom(el)},getCount:function(){return this.elements.length},add:function(els,root){var i,ln,elements=this.elements;if(!els)return this;for("string"==typeof els?els=Ext.fly(root||document).query(els):els.isComposite?els=els.elements:Ext.isIterable(els)||(els=[els]),i=0,ln=els.length;i<ln;++i)elements.push(this.transformElement(els[i]));return this},invoke:function(fn,args){var prototype,element,i,elements=this.elements,ln=elements.length;if(0!==i)for(prototype=(this.isLite?Ext.dom.Fly:Ext.dom.Element).prototype,i=0;i<ln;i++)(element=elements[i])&&prototype[fn].apply(this.getElement(element),args);return this},item:function(index){var el=this.elements[index],out=null;return el&&(out=this.getElement(el)),out},slice:function(start,end){return Ext.Array.slice(this.elements,start,end)},each:function(fn,scope){var i,e,els=this.elements,len=els.length;for(i=0;i<len&&(!(e=els[i])||(e=this.getElement(e),!1!==fn.call(scope||e,e,this,i)));i++);return this},fill:function(els){return this.elements=[],this.add(els),this},insert:function(index,nodes){Ext.Array.insert(this.elements,index,nodes)},filter:function(selector){for(var el,me=this,els=me.elements,len=els.length,out=[],i=0,isFunc="function"==typeof selector;i<len;i++)(el=els[i])&&(el=me.getElement(el),(isFunc?!1!==selector.call(el,el,me,i):el.is(selector))&&out.push(me.transformElement(el)));return me.elements=out,me},indexOf:function(el){return Ext.Array.indexOf(this.elements,this.transformElement(el))},replaceElement:function(el,replacement,domReplace){var d,index=isNaN(el)?this.indexOf(el):el;return-1<index&&(replacement=Ext.getDom(replacement),domReplace&&((d=this.elements[index]).parentNode.insertBefore(replacement,d),Ext.removeNode(d)),Ext.Array.splice(this.elements,index,1,replacement)),this},clear:function(removeDom){var els=this.elements,i=els.length-1;if(removeDom)for(;0<=i;i--)Ext.removeNode(els[i]);this.elements=[]},addElements:function(els,root){if(!els)return this;"string"==typeof els&&(els=Ext.dom.Element.selectorFunction(els,root));var e,yels=this.elements,eLen=els.length;for(e=0;e<eLen;e++)yels.push(Ext.get(els[e]));return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(el){return-1!=this.indexOf(el)},removeElement:function(keys,removeDom){keys=[].concat(keys);var val,el,k,elements=this.elements,kLen=keys.length;for(k=0;k<kLen;k++)(el=elements[val=keys[k]]||elements[val=this.indexOf(val)])&&(removeDom&&(el.dom?el.destroy():Ext.removeNode(el)),Ext.Array.erase(elements,val,1));return this},destroy:function(){return this.invoke("destroy",arguments)}},function(CompositeElementLite){var prototype=CompositeElementLite.prototype;CompositeElementLite.importElementMethods(),prototype.on=prototype.addListener}),Ext.define("Ext.util.Filter",{isFilter:!0,config:{property:null,value:null,filterFn:null,id:null,anyMatch:!1,exactMatch:!1,caseSensitive:!1,disabled:!1,disableOnEmpty:!1,operator:null,root:null,serializer:null,convert:null},scope:null,$configStrict:!1,statics:{createFilterFn:function(filters){return filters?function(candidate){var i,filter,items=filters.isCollection?filters.items:filters,length=items.length,match=!0;for(i=0;match&&i<length;i++)(filter=items[i]).getDisabled()||(match=filter.filter(candidate));return match}:Ext.returnTrue},isInvalid:function(cfg){if(!cfg.filterFn){if(!cfg.property)return"A Filter requires either a property or a filterFn to be set";if(!cfg.hasOwnProperty("value")&&!cfg.operator)return"A Filter requires either a property and value, or a filterFn to be set"}return!1}},constructor:function(config){this.initConfig(config)},preventConvert:{in:1,notin:1},filter:function(item){var me=this,filterFn=me._filterFn||me.getFilterFn(),convert=me.getConvert(),value=me._value;return me._filterValue=value,me.isDateValue=Ext.isDate(value),me.isDateValue&&(me.dateValue=value.getTime()),convert&&!me.preventConvert[me.getOperator()]&&(me._filterValue=convert.call(me.scope||me,value)),filterFn.call(me.scope||me,item)},getId:function(){var id=this._id;return id||(id=(id=this.getProperty())||Ext.id(null,"ext-filter-"),this._id=id),id},getFilterFn:function(){var operator,me=this,filterFn=me._filterFn;return filterFn||(filterFn=(operator=me.getOperator())?me.operatorFns[operator]:me.createRegexFilter(),me._filterFn=filterFn),filterFn},createRegexFilter:function(){var me=this,anyMatch=!!me.getAnyMatch(),exact=!!me.getExactMatch(),value=me.getValue(),matcher=Ext.String.createRegex(value,!anyMatch,!anyMatch&&exact,!me.getCaseSensitive());return function(item){var val=me.getPropertyValue(item);return matcher?matcher.test(val):null==val}},getPropertyValue:function(item){var root=this._root;return(null==root?item:item[root])[this._property]},getState:function(){var name,config=this.getInitialConfig(),result={};for(name in config)config.hasOwnProperty(name)&&(result[name]=config[name]);return delete result.root,result.value=this.getValue(),result},getScope:function(){return this.scope},serialize:function(){var result=this.getState(),serializer=this.getSerializer();return delete result.id,delete result.serializer,serializer&&serializer.call(this,result),result},updateOperator:function(){this._filterFn=null},updateValue:function(value){this._filterFn=null,this.getDisableOnEmpty()&&this.setDisabled(Ext.isEmpty(value))},updateDisableOnEmpty:function(disableOnEmpty){var disabled=!1;disableOnEmpty&&(disabled=Ext.isEmpty(this.getValue())),this.setDisabled(disabled)},privates:{getCandidateValue:function(candidate,v,preventCoerce){var convert=this._convert,result=this.getPropertyValue(candidate);return convert?result=convert.call(this.scope||this,result):preventCoerce||(result=Ext.coerce(result,v)),result}}},function(){var operatorFns=this.prototype.operatorFns={"<":function(candidate){var v=this._filterValue;return this.getCandidateValue(candidate,v)<v},"<=":function(candidate){var v=this._filterValue;return this.getCandidateValue(candidate,v)<=v},"=":function(candidate){var v=this._filterValue;return candidate=this.getCandidateValue(candidate,v),this.isDateValue&&candidate instanceof Date&&(candidate=candidate.getTime(),v=this.dateValue),candidate==v},"===":function(candidate){var v=this._filterValue;return candidate=this.getCandidateValue(candidate,v,!0),this.isDateValue&&candidate instanceof Date&&(candidate=candidate.getTime(),v=this.dateValue),candidate===v},">=":function(candidate){var v=this._filterValue;return this.getCandidateValue(candidate,v)>=v},">":function(candidate){var v=this._filterValue;return this.getCandidateValue(candidate,v)>v},"!=":function(candidate){var v=this._filterValue;return candidate=this.getCandidateValue(candidate,v),this.isDateValue&&candidate instanceof Date&&(candidate=candidate.getTime(),v=this.dateValue),candidate!=v},"!==":function(candidate){var v=this._filterValue;return candidate=this.getCandidateValue(candidate,v,!0),this.isDateValue&&candidate instanceof Date&&(candidate=candidate.getTime(),v=this.dateValue),candidate!==v},in:function(candidate){var v=this._filterValue;return Ext.Array.contains(v,this.getCandidateValue(candidate,v))},notin:function(candidate){var v=this._filterValue;return!Ext.Array.contains(v,this.getCandidateValue(candidate,v))},like:function(candidate){var v=this._filterValue;return v&&-1<this.getCandidateValue(candidate,v).toLowerCase().indexOf(v.toLowerCase())}};operatorFns["=="]=operatorFns["="],operatorFns.gt=operatorFns[">"],operatorFns.ge=operatorFns[">="],operatorFns.lt=operatorFns["<"],operatorFns.le=operatorFns["<="],operatorFns.eq=operatorFns["="],operatorFns.ne=operatorFns["!="]}),Ext.define("Ext.util.Observable",{extend:Ext.mixin.Observable,$applyConfigs:!0},function(Observable){var Super=Ext.mixin.Observable;Observable.releaseCapture=Super.releaseCapture,Observable.capture=Super.capture,Observable.captureArgs=Super.captureArgs,Observable.observe=Observable.observeClass=Super.observe}),Ext.define("Ext.util.AbstractMixedCollection",{mixins:{observable:Ext.util.Observable},isMixedCollection:!0,generation:0,indexGeneration:0,constructor:function(allowFunctions,keyFn){var me=this;1===arguments.length&&Ext.isObject(allowFunctions)?(me.initialConfig=allowFunctions,Ext.apply(me,allowFunctions)):(me.allowFunctions=!0===allowFunctions,keyFn&&(me.getKey=keyFn),me.initialConfig={allowFunctions:me.allowFunctions,getKey:me.getKey}),me.items=[],me.map={},me.keys=[],me.indexMap={},me.length=0,me.mixins.observable.constructor.call(me)},destroy:function(){var me=this;me.items=me.map=me.keys=me.indexMap=null,me.callParent()},allowFunctions:!1,add:function(key,obj){var len=this.length;return 1===arguments.length?this.insert(len,key):this.insert(len,key,obj)},getKey:function(o){return o.id},replace:function(key,o){var old,index,me=this;return 1==arguments.length&&(o=key,key=me.getKey(o)),old=me.map[key],null==key||void 0===old?me.add(key,o):(me.generation++,index=me.indexOfKey(key),me.items[index]=o,me.map[key]=o,me.hasListeners.replace&&me.fireEvent("replace",key,old,o),o)},reorder:function(mapping){var oldIndex,me=this,items=me.items,index=0,length=items.length,order=[],remaining=[];for(oldIndex in me.suspendEvents(),mapping)order[mapping[oldIndex]]=items[oldIndex];for(index=0;index<length;index++)null==mapping[index]&&remaining.push(items[index]);for(index=0;index<length;index++)null==order[index]&&(order[index]=remaining.shift());me.clear(),me.addAll(order),me.resumeEvents()},updateKey:function(oldKey,newKey){var item,me=this,map=me.map,index=me.indexOfKey(oldKey),indexMap=me.indexMap;-1<index&&(item=map[oldKey],delete map[oldKey],delete indexMap[oldKey],map[newKey]=item,indexMap[newKey]=index,me.keys[index]=newKey,me.indexGeneration=++me.generation)},addAll:function(objs){var key;if(1<arguments.length||Ext.isArray(objs))this.insert(this.length,1<arguments.length?arguments:objs);else for(key in objs)objs.hasOwnProperty(key)&&(!this.allowFunctions&&"function"==typeof objs[key]||this.add(key,objs[key]))},each:function(fn,scope){for(var item,items=Ext.Array.push([],this.items),i=0,len=items.length;i<len&&(item=items[i],!1!==fn.call(scope||item,item,i,len));i++);},eachKey:function(fn,scope){for(var keys=this.keys,items=this.items,i=0,len=keys.length;i<len;i++)fn.call(scope||window,keys[i],items[i],i,len)},findBy:function(fn,scope){for(var keys=this.keys,items=this.items,i=0,len=items.length;i<len;i++)if(fn.call(scope||window,items[i],keys[i]))return items[i];return null},find:function(){return Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.util.MixedCollection: find has been deprecated. Use findBy instead."),this.findBy.apply(this,arguments)},insert:function(index,key,obj){return Ext.isIterable(key)?this.doInsert(index,key,obj):(2<arguments.length?this.doInsert(index,[key],[obj]):this.doInsert(index,[key]))[0]},doInsert:function(index,keys,objects){var itemKey,removeIndex,i,syncIndices,passedDuplicates,oldKeys,oldObjects,me=this,len=keys.length,deDupedLen=len,fireAdd=me.hasListeners.add,newKeys={};if(null!=objects)me.useLinearSearch=!0;else for(objects=keys,keys=new Array(len),i=0;i<len;i++)keys[i]=this.getKey(objects[i]);for(me.suspendEvents(),i=0;i<len;i++)itemKey=keys[i],-1!==(removeIndex=me.indexOfKey(itemKey))&&(removeIndex<index&&index--,me.removeAt(removeIndex)),null!=itemKey&&(null!=newKeys[itemKey]&&(passedDuplicates=!0,deDupedLen--),newKeys[itemKey]=i);if(me.resumeEvents(),passedDuplicates){for(itemKey in oldKeys=keys,oldObjects=objects,keys=new Array(deDupedLen),objects=new Array(deDupedLen),i=0,newKeys)keys[i]=oldKeys[newKeys[itemKey]],objects[i]=oldObjects[newKeys[itemKey]],i++;len=deDupedLen}for(syncIndices=index===me.length&&me.indexGeneration===me.generation,Ext.Array.insert(me.items,index,objects),Ext.Array.insert(me.keys,index,keys),me.length+=len,me.generation++,syncIndices&&(me.indexGeneration=me.generation),i=0;i<len;i++,index++)null!=(itemKey=keys[i])&&(me.map[itemKey]=objects[i],syncIndices&&(me.indexMap[itemKey]=index)),fireAdd&&me.fireEvent("add",index,objects[i],itemKey);return objects},remove:function(o){var removeKey,index,me=this;return-1!==(index=!me.useLinearSearch&&(removeKey=me.getKey(o))?me.indexOfKey(removeKey):Ext.Array.indexOf(me.items,o))&&me.removeAt(index)},removeAll:function(items){var i,me=this;if(items||me.hasListeners.remove)if(items)for(i=items.length-1;0<=i;--i)me.remove(items[i]);else for(;me.length;)me.removeAt(0);else me.length=me.items.length=me.keys.length=0,me.map={},me.indexMap={},me.generation++,me.indexGeneration=me.generation},removeAt:function(index){var o,key,me=this;return index<me.length&&0<=index&&(me.length--,o=me.items[index],Ext.Array.erase(me.items,index,1),void 0!==(key=me.keys[index])&&delete me.map[key],Ext.Array.erase(me.keys,index,1),me.hasListeners.remove&&me.fireEvent("remove",o,key),me.generation++,o)},removeRange:function(index,removeCount){var o,key,i,limit,syncIndices,trimming,me=this;if(index<me.length&&0<=index){for(removeCount=removeCount||1,removeCount=(limit=Math.min(index+removeCount,me.length))-index,syncIndices=(trimming=limit===me.length)&&me.indexGeneration===me.generation,i=index;i<limit;i++)null!=(key=me.keys[i])&&(delete me.map[key],syncIndices&&delete me.indexMap[key]);return o=me.items[i-1],me.length-=removeCount,me.generation++,syncIndices&&(me.indexGeneration=me.generation),trimming?me.items.length=me.keys.length=me.length:(me.items.splice(index,removeCount),me.keys.splice(index,removeCount)),o}return!1},removeAtKey:function(key){var i,keys=this.keys;if(null!=key)return this.removeAt(this.indexOfKey(key));for(i=keys.length-1;0<=i;i--)null==keys[i]&&this.removeAt(i)},getCount:function(){return this.length},indexOf:function(o){var key;return null!=o?!this.useLinearSearch&&(key=this.getKey(o))?this.indexOfKey(key):Ext.Array.indexOf(this.items,o):-1},indexOfKey:function(key){return this.map.hasOwnProperty(key)?(this.indexGeneration!==this.generation&&this.rebuildIndexMap(),this.indexMap[key]):-1},rebuildIndexMap:function(){var i,indexMap=this.indexMap={},keys=this.keys,len=keys.length;for(i=0;i<len;i++)indexMap[keys[i]]=i;this.indexGeneration=this.generation},get:function(key){var mk=this.map[key],item=void 0!==mk?mk:"number"==typeof key?this.items[key]:void 0;return"function"!=typeof item||this.allowFunctions?item:null},getAt:function(index){return this.items[index]},getByKey:function(key){return this.map[key]},contains:function(o){var key;return null!=o&&(!this.useLinearSearch&&(key=this.getKey(o))?null!=this.map[key]:-1!==Ext.Array.indexOf(this.items,o))},containsKey:function(key){return this.map.hasOwnProperty(key)},clear:function(){var me=this;me.generation&&(me.length=0,me.items=[],me.keys=[],me.map={},me.indexMap={},me.generation++,me.indexGeneration=me.generation),me.hasListeners.clear&&me.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(property,root,start,end){var i,values=this.extractValues(property,root),length=values.length,sum=0;for(end=end||0===end?end:length-1,i=start=start||0;i<=end;i++)sum+=values[i];return sum},collect:function(property,root,allowNull){var value,strValue,i,values=this.extractValues(property,root),length=values.length,hits={},unique=[];for(i=0;i<length;i++)value=values[i],strValue=String(value),!allowNull&&Ext.isEmpty(value)||hits[strValue]||(hits[strValue]=!0,unique.push(value));return unique},extractValues:function(property,root){var values=this.items;return root&&(values=Ext.Array.pluck(values,root)),Ext.Array.pluck(values,property)},hasRange:function(start,end){return end<this.length},getRange:function(start,end){var tmp,reverse,items=this.items,range=[],len=items.length;return len<1||(end<start&&(reverse=!0,tmp=start,start=end,end=tmp),start<0&&(start=0),(null==end||len<=end)&&(end=len-1),range=items.slice(start,end+1),reverse&&range.length&&range.reverse()),range},filter:function(property,value,anyMatch,caseSensitive){var filters=[];return Ext.isString(property)?filters.push(new Ext.util.Filter({property:property,value:value,anyMatch:anyMatch,caseSensitive:caseSensitive})):(Ext.isArray(property)||property instanceof Ext.util.Filter)&&(filters=filters.concat(property)),this.filterBy(Ext.util.Filter.createFilterFn(filters))},filterBy:function(fn,scope){var i,me=this,newMC=new me.self(me.initialConfig),keys=me.keys,items=me.items,length=items.length;for(newMC.getKey=me.getKey,i=0;i<length;i++)fn.call(scope||me,items[i],keys[i])&&newMC.add(keys[i],items[i]);return newMC.useLinearSearch=me.useLinearSearch,newMC},findIndex:function(property,value,start,anyMatch,caseSensitive){return Ext.isEmpty(value,!1)?-1:(value=this.createValueMatcher(value,anyMatch,caseSensitive),this.findIndexBy(function(o){return o&&value.test(o[property])},null,start))},findIndexBy:function(fn,scope,start){for(var keys=this.keys,items=this.items,i=start||0,len=items.length;i<len;i++)if(fn.call(scope||this,items[i],keys[i]))return i;return-1},createValueMatcher:function(value,anyMatch,caseSensitive,exactMatch){if(!value.exec){var er=Ext.String.escapeRegex;value=String(value),!0===anyMatch?value=er(value):(value="^"+er(value),!0===exactMatch&&(value+="$")),value=new RegExp(value,caseSensitive?"":"i")}return value},clone:function(){var me=this,copy=new me.self(me.initialConfig);return copy.add(me.keys,me.items),copy.useLinearSearch=me.useLinearSearch,copy}}),Ext.define("Ext.util.Sorter",{isSorter:!0,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:void 0},statics:{createComparator:function(sorters,nextFn){return nextFn=nextFn||0,function(lhs,rhs){var comp,i,items=sorters.isCollection?sorters.items:sorters,n=items.length;for(i=0;i<n;++i)if(comp=items[i].sort(lhs,rhs))return comp;return nextFn&&nextFn(lhs,rhs)}}},multiplier:1,constructor:function(config){this.initConfig(config)},getId:function(){var id=this._id;return id||(id=(id=this.getProperty())||Ext.id(null,"ext-sorter-"),this._id=id),id},sort:function(lhs,rhs){return this.multiplier*this.sortFn(lhs,rhs)},sortFn:function(item1,item2){var lhs,rhs,transform=this._transform,root=this._root,property=this._property;return root&&(item1=item1[root],item2=item2[root]),lhs=item1[property],rhs=item2[property],transform&&(lhs=transform(lhs),rhs=transform(rhs)),rhs<lhs?1:lhs<rhs?-1:0},applyDirection:function(direction){return direction||"ASC"},updateDirection:function(direction){this.multiplier="DESC"===direction.toUpperCase()?-1:1},updateProperty:function(property){property&&delete this.sortFn},updateSorterFn:function(sorterFn){this.sortFn=sorterFn},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){var me=this,result={root:me.getRoot(),property:me.getProperty(),direction:me.getDirection()};return me._id&&(result.id=me._id),result},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}}),Ext.define("Ext.util.Sortable",{isSortable:!0,$configPrefixed:!1,$configStrict:!1,config:{sorters:null},defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(sorters){return sorters&&sorters.length?function(r1,r2){for(var result=sorters[0].sort(r1,r2),length=sorters.length,i=1;!result&&i<length;i++)result=sorters[i].sort.call(sorters[i],r1,r2);return result}:function(){return 0}}},applySorters:function(sorters){var sortersCollection=this.getSorters()||new Ext.util.MixedCollection(!1,Ext.returnId);return sorters&&sortersCollection.addAll(this.decodeSorters(sorters)),sortersCollection},sort:function(sorters,direction,insertionPosition,doSort){var sorter,overFlow,me=this,currentSorters=me.getSorters();if(currentSorters||(me.setSorters(null),currentSorters=me.getSorters()),Ext.isArray(sorters)?(doSort=insertionPosition,insertionPosition=direction):Ext.isObject(sorters)?(sorters=[sorters],doSort=insertionPosition,insertionPosition=direction):Ext.isString(sorters)&&((sorter=currentSorters.get(sorters))?null==direction?sorter.toggle():sorter.setDirection(direction):sorter={property:sorters,direction:direction},sorters=[sorter]),sorters&&sorters.length)switch(sorters=me.decodeSorters(sorters),insertionPosition){case"multi":currentSorters.insert(0,sorters[0]),0<(overFlow=currentSorters.getCount()-me.multiSortLimit)&&currentSorters.removeRange(me.multiSortLimit,overFlow);break;case"prepend":currentSorters.insert(0,sorters);break;case"append":currentSorters.addAll(sorters);break;case void 0:case null:case"replace":currentSorters.clear(),currentSorters.addAll(sorters)}return!1!==doSort&&(me.fireEvent("beforesort",me,sorters),me.onBeforeSort(sorters),me.getSorterCount()&&me.doSort(me.generateComparator())),sorters},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var sorters=this.getSorters().getRange();return sorters.length?this.createComparator(sorters):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(sorters){Ext.isArray(sorters)||(sorters=void 0===sorters?[]:[sorters]);var field,config,i,length=sorters.length,Sorter=Ext.util.Sorter,model=this.getModel?this.getModel():this.model;for(i=0;i<length;i++)(config=sorters[i])instanceof Sorter||(Ext.isString(config)&&(config={property:config}),Ext.applyIf(config,{root:this.sortRoot,direction:"ASC"}),config.fn&&(config.sorterFn=config.fn),"function"==typeof config&&(config={sorterFn:config}),model&&!config.transform&&(field=model.getField(config.property),config.transform=field&&field.sortType!==Ext.identityFn?field.sortType:void 0),sorters[i]=new Ext.util.Sorter(config));return sorters},getFirstSorter:function(){for(var sorter,sorters=this.getSorters().items,len=sorters.length,i=0;i<len;++i)if(!(sorter=sorters[i]).isGrouper)return sorter;return null}},function(){this.prototype.createComparator=this.createComparator}),Ext.define("Ext.util.MixedCollection",{extend:Ext.util.AbstractMixedCollection,mixins:{sortable:Ext.util.Sortable},constructor:function(){this.initConfig(),this.callParent(arguments)},doSort:function(sorterFn){this.sortBy(sorterFn)},_sort:function(property,dir,fn){var i,len,o,me=this,dsc="DESC"==String(dir).toUpperCase()?-1:1,c=[],keys=me.keys,items=me.items;for(fn=fn||function(a,b){return a-b},i=0,len=items.length;i<len;i++)c[c.length]={key:keys[i],value:items[i],index:i};for(Ext.Array.sort(c,function(a,b){return fn(a[property],b[property])*dsc||(a.index<b.index?-1:1)}),i=0,len=c.length;i<len;i++)o=c[i],items[i]=o.value,keys[i]=o.key,me.indexMap[o.key]=i;me.generation++,me.indexGeneration=me.generation,me.fireEvent("sort",me)},sortBy:function(sorterFn){var item,key,i,me=this,items=me.items,keys=me.keys,length=items.length;for(i=0;i<length;i++)items[i].$extCollectionIndex=i;for(Ext.Array.sort(items,function(a,b){return sorterFn(a,b)||(a.$extCollectionIndex<b.$extCollectionIndex?-1:1)}),i=0;i<length;i++)item=items[i],key=me.getKey(item),keys[i]=key,me.indexMap[key]=i,delete items.$extCollectionIndex;me.generation++,me.indexGeneration=me.generation,me.fireEvent("sort",me,items,keys)},findInsertionIndex:function(newItem,sorterFn){var middle,comparison,items=this.items,start=0,end=items.length-1;for(sorterFn=sorterFn||this.generateComparator();start<=end;)0<=(comparison=sorterFn(newItem,items[middle=start+end>>1]))?start=1+middle:comparison<0&&(end=middle-1);return start},reorder:function(mapping){this.callParent([mapping]),this.fireEvent("sort",this)},sortByKey:function(dir,fn){this._sort("key",dir,fn||function(a,b){var v1=String(a).toUpperCase(),v2=String(b).toUpperCase();return v2<v1?1:v1<v2?-1:0})}}),Ext.define("Ext.util.TaskRunner",{interval:10,timerId:null,constructor:function(interval){var me=this;"number"==typeof interval?me.interval=interval:interval&&Ext.apply(me,interval),me.tasks=[],me.timerFn=Ext.Function.bind(me.onTick,me)},newTask:function(config){var task=new Ext.util.TaskRunner.Task(config);return task.manager=this,task},start:function(task){var now=Ext.Date.now();return task.pending||(this.tasks.push(task),task.pending=!0),task.stopped=!1,task.taskStartTime=now,task.taskRunTime=!1!==task.fireOnStart?0:task.taskStartTime,task.taskRunCount=0,this.firing||(!1!==task.fireOnStart?this.startTimer(0,now):this.startTimer(task.interval,now)),task},stop:function(task){return task.stopped||(task.stopped=!0,task.onStop&&task.onStop.call(task.scope||task,task)),task},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:!1,nextExpires:1e99,onTick:function(){var expires,newTasks,i,task,rt,remove,fireIdleEvent,me=this,tasks=me.tasks,now=Ext.Date.now(),nextExpires=1e99,len=tasks.length,globalEvents=Ext.GlobalEvents;for(me.timerId=null,me.firing=!0,i=0;i<len||i<(len=tasks.length);++i){if(!(remove=(task=tasks[i]).stopped)){if((expires=task.taskRunTime+task.interval)<=now){rt=1,fireIdleEvent=task.hasOwnProperty("fireIdleEvent")?task.fireIdleEvent:me.fireIdleEvent;try{rt=task.run.apply(task.scope||task,task.args||[++task.taskRunCount])}catch(taskError){try{task.onError&&(rt=task.onError.call(task.scope||task,task,taskError))}catch(ignore){}}task.taskRunTime=now,!1===rt||task.taskRunCount===task.repeat?(me.stop(task),remove=!0):(remove=task.stopped,expires=now+task.interval)}!remove&&task.duration&&task.duration<=now-task.taskStartTime&&(me.stop(task),remove=!0)}remove?(task.pending=!1,newTasks=newTasks||tasks.slice(0,i)):(newTasks&&newTasks.push(task),expires<nextExpires&&(nextExpires=expires))}newTasks&&(me.tasks=newTasks),me.firing=!1,me.tasks.length&&me.startTimer(nextExpires-now,Ext.Date.now()),!1!==fireIdleEvent&&globalEvents.hasListeners.idle&&globalEvents.fireEvent("idle")},startTimer:function(timeout,now){var me=this,expires=now+timeout,timerId=me.timerId;timerId&&me.nextExpires-expires>me.interval&&(clearTimeout(timerId),timerId=null),timerId||(timeout<me.interval&&(timeout=me.interval),me.timerId=Ext.defer(me.timerFn,timeout),me.nextExpires=expires)}},function(){var proto=this.prototype;proto.destroy=proto.stopAll,this.Task=new Ext.Class({isTask:!0,stopped:!0,fireOnStart:!1,constructor:function(config){Ext.apply(this,config)},restart:function(interval){void 0!==interval&&(this.interval=interval),this.manager.start(this)},start:function(interval){this.stopped&&this.restart(interval)},stop:function(){this.manager.stop(this)}}),(proto=this.Task.prototype).destroy=proto.stop}),Ext.define("Ext.fx.target.Target",{isAnimTarget:!0,constructor:function(target){this.target=target,this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}}),Ext.define("Ext.fx.target.Element",{extend:Ext.fx.target.Target,type:"element",getElVal:function(el,attr,val){return void 0===val&&(val="x"===attr?el.getX():"y"===attr?el.getY():"scrollTop"===attr?el.getScroll().top:"scrollLeft"===attr?el.getScroll().left:"height"===attr?el.getHeight():"width"===attr?el.getWidth():el.getStyle(attr)),val},getAttr:function(attr,val){var el=this.target;return[[el,this.getElVal(el,attr,val)]]},setAttr:function(targetData){var attrs,attr,o,i,j,ln2,ln=targetData.length;for(i=0;i<ln;i++)for(attr in attrs=targetData[i].attrs)if(attrs.hasOwnProperty(attr))for(ln2=attrs[attr].length,j=0;j<ln2;j++)o=attrs[attr][j],this.setElVal(o[0],attr,o[1])},setElVal:function(element,attr,value){"x"===attr?element.setX(value):"y"===attr?element.setY(value):"scrollTop"===attr?element.scrollTo("top",value):"scrollLeft"===attr?element.scrollTo("left",value):"width"===attr?element.setWidth(value):"height"===attr?element.setHeight(value):element.setStyle(attr,value)}}),Ext.define("Ext.fx.target.ElementCSS",{extend:Ext.fx.target.Element,setAttr:function(targetData,isFirstFrame){function cleanerFn(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)}var attributes,attrs,attr,easing,duration,o,i,j,ln2,cssArr={attrs:[],duration:[],easing:[]},ln=targetData.length,single={single:!0};for(i=0;i<ln;i++)for(attr in duration=(attrs=targetData[i]).duration,easing=attrs.easing,attrs=attrs.attrs)-1==Ext.Array.indexOf(cssArr.attrs,attr)&&(cssArr.attrs.push(attr.replace(/[A-Z]/g,function(v){return"-"+v.toLowerCase()})),cssArr.duration.push(duration+"ms"),cssArr.easing.push(easing));for(attributes=cssArr.attrs.join(","),duration=cssArr.duration.join(","),easing=cssArr.easing.join(", "),i=0;i<ln;i++)for(attr in attrs=targetData[i].attrs)for(ln2=attrs[attr].length,j=0;j<ln2;j++)(o=attrs[attr][j])[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",isFirstFrame?"":attributes),o[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",isFirstFrame?"":duration),o[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",isFirstFrame?"":easing),o[0].setStyle(attr,o[1]),isFirstFrame?o=o[0].dom.offsetWidth:o[0].on(Ext.supports.CSS3TransitionEnd,cleanerFn,o[0],single)}}),Ext.define("Ext.fx.target.CompositeElement",{extend:Ext.fx.target.Element,isComposite:!0,constructor:function(target){target.id=target.id||Ext.id(null,"ext-composite-"),this.callParent([target])},getAttr:function(attr,val){var i,el,out=[],target=this.target,elements=target.elements,length=elements.length;for(i=0;i<length;i++)(el=elements[i])&&(el=target.getElement(el),out.push([el,this.getElVal(el,attr,val)]));return out},setAttr:function(targetData){var value,k,attrs,attr,el,i,j,ln2,target=this.target,ln=targetData.length,elements=target.elements,ln3=elements.length;for(i=0;i<ln;i++)for(attr in attrs=targetData[i].attrs)if(attrs.hasOwnProperty(attr))for(ln2=attrs[attr].length,j=0;j<ln2;j++)for(value=attrs[attr][j][1],k=0;k<ln3;++k)(el=elements[k])&&(el=target.getElement(el),this.setElVal(el,attr,value))},remove:function(){this.target.destroy()}}),Ext.define("Ext.fx.target.CompositeElementCSS",{extend:Ext.fx.target.CompositeElement,setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}}),Ext.define("Ext.fx.target.Sprite",{extend:Ext.fx.target.Target,type:"draw",getFromPrim:function(sprite,attr){var obj;switch(attr){case"rotate":case"rotation":return{x:(obj=sprite.attr.rotation).x||0,y:obj.y||0,degrees:obj.degrees||0};case"scale":case"scaling":return{x:(obj=sprite.attr.scaling).x||1,y:obj.y||1,cx:obj.cx||0,cy:obj.cy||0};case"translate":case"translation":return{x:(obj=sprite.attr.translation).x||0,y:obj.y||0};default:return sprite.attr[attr]}},getAttr:function(attr,val){return[[this.target,void 0!==val?val:this.getFromPrim(this.target,attr)]]},setAttr:function(targetData){var attrsConf,attr,attrArr,attrs,sprite,idx,value,i,j,x,y,ln2,ln=targetData.length,spriteArr=[];for(i=0;i<ln;i++)for(attr in attrsConf=targetData[i].attrs)for(ln2=(attrArr=attrsConf[attr]).length,j=0;j<ln2;j++)sprite=attrArr[j][0],attrs=attrArr[j][1],value="translate"===attr||"translation"===attr?{x:attrs.x,y:attrs.y}:"rotate"===attr||"rotation"===attr?(x=attrs.x,isNaN(x)&&(x=null),y=attrs.y,isNaN(y)&&(y=null),{degrees:attrs.degrees,x:x,y:y}):"scale"===attr||"scaling"===attr?(x=attrs.x,isNaN(x)&&(x=null),y=attrs.y,isNaN(y)&&(y=null),{x:x,y:y,cx:attrs.cx,cy:attrs.cy}):"width"===attr||"height"===attr||"x"===attr||"y"===attr?parseFloat(attrs):attrs,-1===(idx=Ext.Array.indexOf(spriteArr,sprite))&&(spriteArr.push([sprite,{}]),idx=spriteArr.length-1),spriteArr[idx][1][attr]=value;for(ln=spriteArr.length,i=0;i<ln;i++)spriteArr[i][0].setAttributes(spriteArr[i][1]);this.target.redraw()}}),Ext.define("Ext.fx.target.CompositeSprite",{extend:Ext.fx.target.Sprite,getAttr:function(attr,val){var i,sprite,out=[],sprites=[].concat(this.target.items),length=sprites.length;for(i=0;i<length;i++)sprite=sprites[i],out.push([sprite,void 0!==val?val:this.getFromPrim(sprite,attr)]);return out}}),Ext.define("Ext.fx.target.Component",{extend:Ext.fx.target.Target,type:"component",getPropMethod:{top:function(){return this.getPosition(!0)[1]},left:function(){return this.getPosition(!0)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(attr,val){return[[this.target,void 0!==val?val:this.getPropMethod[attr].call(this.target)]]},setAttr:function(targetData,isFirstFrame,isLastFrame){var attrs,attr,o,i,j,targets,left,top,w,h,methodProps,ln=targetData.length,methodsToCall={};for(i=0;i<ln;i++){for(attr in attrs=targetData[i].attrs)for(targets=attrs[attr].length,j=0;j<targets;j++)o=attrs[attr][j],(methodProps=methodsToCall[this.setMethods[attr]]||(methodsToCall[this.setMethods[attr]]={})).target=o[0],methodProps[attr]=o[1];methodsToCall.setPosition&&(left=void 0===(o=methodsToCall.setPosition).left?void 0:parseFloat(o.left),top=void 0===o.top?void 0:parseFloat(o.top),o.target.setPosition(left,top)),methodsToCall.setPagePosition&&(o=methodsToCall.setPagePosition).target.setPagePosition(o.x,o.y),methodsToCall.setSize&&(w=void 0===(o=methodsToCall.setSize).width?o.target.getWidth():parseFloat(o.width),h=void 0===o.height?o.target.getHeight():parseFloat(o.height),o.target.el.setSize(w,h),(isLastFrame||this.dynamic)&&Ext.GlobalEvents.on({idle:Ext.Function.bind(o.target.setSize,o.target,[w,h]),single:!0})),methodsToCall.setOpacity&&(o=methodsToCall.setOpacity).target.el.setStyle("opacity",o.opacity)}}}),Ext.define("Ext.fx.Queue",{constructor:function(){this.targets=new Ext.util.HashMap,this.fxQueue={}},getFxDefaults:function(targetId){var target=this.targets.get(targetId);return target?target.fxDefaults:{}},setFxDefaults:function(targetId,obj){var target=this.targets.get(targetId);target&&(target.fxDefaults=Ext.apply(target.fxDefaults||{},obj))},stopAnimation:function(targetId){for(var item,queue=this.getFxQueue(targetId),ln=queue.length;ln;)(item=queue[ln-1])&&item.end(),ln--},getActiveAnimation:function(targetId){var queue=this.getFxQueue(targetId);return!(!queue||!queue.length)&&queue[0]},hasFxBlock:function(targetId){var queue=this.getFxQueue(targetId);return queue&&queue[0]&&queue[0].block},getFxQueue:function(targetId){if(!targetId)return!1;var me=this,queue=me.fxQueue[targetId],target=me.targets.get(targetId);return!!target&&(queue||(me.fxQueue[targetId]=[],"element"!==target.type&&target.target.on("destroy",function(){me.fxQueue[targetId]=[]})),me.fxQueue[targetId])},queueFx:function(anim){var queue,ln,me=this,target=anim.target;target&&(!(ln=(queue=me.getFxQueue(target.getId())).length)||anim.concurrent?anim.paused=!1:queue[ln-1].on("afteranimate",function(){anim.paused=!1}),anim.on("afteranimate",function(){if(Ext.Array.remove(queue,anim),0===queue.length&&me.targets.remove(anim.target),anim.remove&&"element"===target.type){var el=Ext.get(target.id);el&&el.destroy()}},me,{single:!0}),queue.push(anim))}}),Ext.define("Ext.fx.Manager",{singleton:!0,mixins:{queue:Ext.fx.Queue},constructor:function(){var me=this;me.items=new Ext.util.MixedCollection,me.targetArr={},me.mixins.queue.constructor.call(me),me.taskRunner=new Ext.util.TaskRunner},interval:16,forceJS:!0,createTarget:function(target){var targetObj,useCSS3=!this.forceJS&&Ext.supports.Transitions;if(this.useCSS3=useCSS3,target){if(target.tagName||Ext.isString(target)||target.isFly)target=Ext.get(target),targetObj=new Ext.fx.target["Element"+(useCSS3?"CSS":"")](target);else if(target.dom)targetObj=new Ext.fx.target["Element"+(useCSS3?"CSS":"")](target);else if(target.isComposite)targetObj=new Ext.fx.target["CompositeElement"+(useCSS3?"CSS":"")](target);else if(target.isSprite)targetObj=new Ext.fx.target.Sprite(target);else if(target.isCompositeSprite)targetObj=new Ext.fx.target.CompositeSprite(target);else{if(!target.isComponent)return target.isAnimTarget?target:null;targetObj=new Ext.fx.target.Component(target)}return this.targets.add(targetObj),targetObj}return null},addAnim:function(anim){var me=this,items=me.items,task=me.task;items.add(anim.id,anim),!task&&items.length&&(task=me.task={run:me.runner,interval:me.interval,scope:me},me.taskRunner.start(task))},removeAnim:function(anim){var items=this.items,task=this.task;items.removeAtKey(anim.id),task&&!items.length&&(this.taskRunner.stop(task),delete this.task)},runner:function(){var anim,me=this,items=me.items.getRange(),i=0,len=items.length;for(me.targetArr={},me.timestamp=new Date;i<len;i++)(anim=items[i]).isReady()&&me.startAnim(anim);for(i=0;i<len;i++)(anim=items[i]).isRunning()&&me.runAnim(anim);me.applyPendingAttrs(),me.targetArr=null},startAnim:function(anim){anim.start(this.timestamp)},runAnim:function(anim,forceEnd){if(anim){var target,o,useCSS3=this.useCSS3&&"element"===anim.target.type,elapsedTime=this.timestamp-anim.startTime,lastFrame=elapsedTime>=anim.duration;return forceEnd&&(elapsedTime=anim.duration,lastFrame=!0),target=this.collectTargetData(anim,elapsedTime,useCSS3,lastFrame),useCSS3&&(anim.target.setAttr(target.anims[anim.id].attributes,!0),this.collectTargetData(anim,anim.duration,useCSS3,lastFrame),anim.paused=!0,target=anim.target.target,anim.target.isComposite&&(target=anim.target.target.last()),(o={})[Ext.supports.CSS3TransitionEnd]=anim.lastFrame,o.scope=anim,o.single=!0,target.on(o)),target}},jumpToEnd:function(anim){var target,clear,me=this;me.targetArr||(me.targetArr={},clear=!0),target=me.runAnim(anim,!0),me.applyAnimAttrs(target,target.anims[anim.id]),clear&&(me.targetArr=null)},collectTargetData:function(anim,elapsedTime,useCSS3,isLastFrame){var targetId=anim.target.getId(),target=this.targetArr[targetId];return(target=target||(this.targetArr[targetId]={id:targetId,el:anim.target,anims:{}})).anims[anim.id]={id:anim.id,anim:anim,elapsed:elapsedTime,isLastFrame:isLastFrame,attributes:[{duration:anim.duration,easing:useCSS3&&anim.reverse?anim.easingFn.reverse().toCSS3():anim.easing,attrs:anim.runAnim(elapsedTime)}]},target},applyAnimAttrs:function(target,animWrap){var anim=animWrap.anim;animWrap.attributes&&anim.isRunning()&&(target.el.setAttr(animWrap.attributes,!1,animWrap.isLastFrame),animWrap.isLastFrame&&anim.lastFrame())},applyPendingAttrs:function(){var target,targetId,animWrap,anim,animId,targetArr=this.targetArr;for(targetId in targetArr)if(targetArr.hasOwnProperty(targetId))for(animId in(target=targetArr[targetId]).anims)target.anims.hasOwnProperty(animId)&&(anim=(animWrap=target.anims[animId]).anim,animWrap.attributes&&anim.isRunning()&&(target.el.setAttr(animWrap.attributes,!1,animWrap.isLastFrame),animWrap.isLastFrame&&anim.lastFrame()))}}),Ext.define("Ext.fx.Animator",{mixins:{observable:Ext.util.Observable},isAnimator:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",running:!1,paused:!1,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(config){var me=this;config=Ext.apply(me,config||{}),me.config=config,me.id=Ext.id(null,"ext-animator-"),me.mixins.observable.constructor.call(me,config),me.timeline=[],me.createTimeline(me.keyframes),me.target&&(me.applyAnimator(me.target),Ext.fx.Manager.addAnim(me))},sorter:function(a,b){return a.pct-b.pct},createTimeline:function(keyframes){var prevMs,ms,i,ln,pct,attr,me=this,attrs=[],to=me.to||{},duration=me.duration;for(pct in keyframes)keyframes.hasOwnProperty(pct)&&me.animKeyFramesRE.test(pct)&&(attr={attrs:Ext.apply(keyframes[pct],to)},"from"===pct?pct=0:"to"===pct&&(pct=100),attr.pct=parseInt(pct,10),attrs.push(attr));for(Ext.Array.sort(attrs,me.sorter),ln=attrs.length,i=0;i<ln;i++)prevMs=attrs[i-1]?duration*(attrs[i-1].pct/100):0,ms=duration*(attrs[i].pct/100),me.timeline.push({duration:ms-prevMs,attrs:attrs[i].attrs})},applyAnimator:function(target){var anim,easing,damper,attrs,i,me=this,anims=[],timeline=me.timeline,ln=timeline.length;if(!1!==me.fireEvent("beforeanimate",me)){for(i=0;i<ln;i++)easing=(attrs=(anim=timeline[i]).attrs).easing||me.easing,damper=attrs.damper||me.damper,delete attrs.easing,delete attrs.damper,anim=new Ext.fx.Anim({target:target,easing:easing,damper:damper,duration:anim.duration,paused:!0,to:attrs}),anims.push(anim);for(me.animations=anims,me.target=anim.target,i=0;i<ln-1;i++)(anim=anims[i]).nextAnim=anims[i+1],anim.on("afteranimate",function(){this.nextAnim.paused=!1}),anim.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},me);anims[ln-1].on("afteranimate",function(){this.lastFrame()},me)}},start:function(startTime){var me=this,delay=me.delay,delayStart=me.delayStart;if(delay){if(!delayStart)return void(me.delayStart=startTime);if(startTime-delayStart<delay)return;startTime=new Date(delayStart.getTime()+delay)}!1!==me.fireEvent("beforeanimate",me)&&(me.startTime=startTime,me.running=!0,me.animations[me.keyframeStep].paused=!1)},lastFrame:function(){var me=this,iter=me.iterations,iterCount=me.currentIteration;++iterCount<iter?(me.startTime=new Date,me.currentIteration=iterCount,me.keyframeStep=0,me.applyAnimator(me.target),me.animations[me.keyframeStep].paused=!1):(me.currentIteration=0,me.end())},end:function(){this.fireEvent("afteranimate",this,this.startTime,new Date-this.startTime)},isReady:function(){return!1===this.paused&&!1===this.running&&0<this.iterations},isRunning:function(){return!1}}),Ext.define("Ext.fx.CubicBezier",{singleton:!0,cubicBezierAtTime:function(t,p1x,p1y,p2x,p2y,duration){var cx=3*p1x,bx=3*(p2x-p1x)-cx,ax=1-cx-bx,cy=3*p1y,by=3*(p2y-p1y)-cy,ay=1-cy-by;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}return function(x,epsilon){var t=function(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){if(x2=sampleCurveX(t2)-x,Math.abs(x2)<epsilon)return t2;if(d2=(3*ax*t2+2*bx)*t2+cx,Math.abs(d2)<1e-6)break;t2-=x2/d2}if(t1=1,(t2=x)<(t0=0))return t0;if(t1<t2)return t1;for(;t0<t1;){if(x2=sampleCurveX(t2),Math.abs(x2-x)<epsilon)return t2;x2<x?t0=t2:t1=t2,t2=(t1-t0)/2+t0}return t2}(x,epsilon);return((ay*t+by)*t+cy)*t}(t,1/(200*duration))},cubicBezier:function(x1,y1,x2,y2){function fn(pos){return Ext.fx.CubicBezier.cubicBezierAtTime(pos,x1,y1,x2,y2,1)}return fn.toCSS3=function(){return"cubic-bezier("+[x1,y1,x2,y2].join(",")+")"},fn.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-x2,1-y2,1-x1,1-y1)},fn}}),Ext.define("Ext.fx.Easing",function(){var math=Math,pi=math.PI,pow=math.pow,sin=math.sin,sqrt=math.sqrt,abs=math.abs;return{singleton:!0,linear:Ext.identityFn,ease:function(n){var q=.07813-n/2,Q=sqrt(.0066+q*q),x=Q-q,y=-Q-q,t=pow(abs(x),1/3)*(x<0?-1:1)+pow(abs(y),1/3)*(y<0?-1:1)+.25;return 3*pow(1-t,2)*t*.1+3*(1-t)*t*t+t*t*t},easeIn:function(n){return pow(n,1.7)},easeOut:function(n){return pow(n,.48)},easeInOut:function(n){var q=.48-n/1.04,Q=sqrt(.1734+q*q),x=Q-q,y=-Q-q,t=pow(abs(x),1/3)*(x<0?-1:1)+pow(abs(y),1/3)*(y<0?-1:1)+.5;return 3*(1-t)*t*t+t*t*t},backIn:function(n){return n*n*(2.70158*n-1.70158)},backOut:function(n){return--n*n*(2.70158*n+1.70158)+1},elasticIn:function(n){if(0===n||1===n)return n;return pow(2,-10*n)*sin(2*pi*(n-.075)/.3)+1},elasticOut:function(n){return 1-Ext.fx.Easing.elasticIn(1-n)},bounceIn:function(n){return 1-Ext.fx.Easing.bounceOut(1-n)},bounceOut:function(n){var s=7.5625,p=2.75;return n<1/p?s*n*n:n<2/p?s*(n-=1.5/p)*n+.75:n<2.5/p?s*(n-=2.25/p)*n+.9375:s*(n-=2.625/p)*n+.984375}}},function(me){var Easing=me.self,proto=Easing.prototype;Easing.addMembers({"back-in":proto.backIn,"back-out":proto.backOut,"ease-in":proto.easeIn,"ease-out":proto.easeOut,"elastic-in":proto.elasticIn,"elastic-out":proto.elasticOut,"bounce-in":proto.bounceIn,"bounce-out":proto.bounceOut,"ease-in-out":proto.easeInOut})}),Ext.define("Ext.fx.DrawPath",{singleton:!0,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(o,type){return"object"==(type=String(type).toLowerCase())&&o===Object(o)||"undefined"==type&&typeof o==type||"null"==type&&null===o||"array"==type&&Array.isArray&&Array.isArray(o)||Object.prototype.toString.call(o).toLowerCase().slice(8,-1)==type},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(arrayPath){return arrayPath.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(pathString){if(!pathString)return null;var paramCounts={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},data=[],me=this;return me.is(pathString,"array")&&me.is(pathString[0],"array")&&(data=me.pathClone(pathString)),data.length||String(pathString).replace(me.pathCommandRE,function(a,b,c){var params=[],name=b.toLowerCase();for(c.replace(me.pathValuesRE,function(a,b){b&&params.push(+b)}),"m"==name&&2<params.length&&(data.push([b].concat(Ext.Array.splice(params,0,2))),name="l",b="m"==b?"l":"L");params.length>=paramCounts[name]&&(data.push([b].concat(Ext.Array.splice(params,0,paramCounts[name]))),paramCounts[name]););}),data.toString=me.path2string,data},pathClone:function(pathArray){var j,jj,i,ii,res=[];for(this.is(pathArray,"array")&&this.is(pathArray&&pathArray[0],"array")||(pathArray=this.parsePathString(pathArray)),i=0,ii=pathArray.length;i<ii;i++)for(res[i]=[],j=0,jj=pathArray[i].length;j<jj;j++)res[i][j]=pathArray[i][j];return res.toString=this.path2string,res},pathToAbsolute:function(pathArray){this.is(pathArray,"array")&&this.is(pathArray&&pathArray[0],"array")||(pathArray=this.parsePathString(pathArray));var r,pathSegment,j,ln2,res=[],x=0,y=0,mx=0,my=0,i=0,ln=pathArray.length;for(ln&&"M"==pathArray[0][0]&&(mx=x=+pathArray[0][1],my=y=+pathArray[0][2],i++,res[0]=["M",x,y]);i<ln;i++){if(r=res[i]=[],(pathSegment=pathArray[i])[0]!=pathSegment[0].toUpperCase())switch(r[0]=pathSegment[0].toUpperCase(),r[0]){case"A":r[1]=pathSegment[1],r[2]=pathSegment[2],r[3]=pathSegment[3],r[4]=pathSegment[4],r[5]=pathSegment[5],r[6]=+(pathSegment[6]+x),r[7]=+(pathSegment[7]+y);break;case"V":r[1]=+pathSegment[1]+y;break;case"H":r[1]=+pathSegment[1]+x;break;case"M":mx=+pathSegment[1]+x,my=+pathSegment[2]+y;default:for(j=1,ln2=pathSegment.length;j<ln2;j++)r[j]=+pathSegment[j]+(j%2?x:y)}else for(j=0,ln2=pathSegment.length;j<ln2;j++)res[i][j]=pathSegment[j];switch(r[0]){case"Z":x=mx,y=my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=(pathSegment=res[i])[(ln2=pathSegment.length)-2],my=pathSegment[ln2-1];default:x=(pathSegment=res[i])[(ln2=pathSegment.length)-2],y=pathSegment[ln2-1]}}return res.toString=this.path2string,res},interpolatePaths:function(path,path2){function fixArc(pp,i){if(7<pp[i].length){pp[i].shift();for(var pi=pp[i];pi.length;)Ext.Array.splice(pp,i++,0,["C"].concat(Ext.Array.splice(pi,0,6)));Ext.Array.erase(pp,i,1),ii=Math.max(p.length,p2.length||0)}}function fixM(path1,path2,a1,a2,i){path1&&path2&&"M"==path1[i][0]&&"M"!=path2[i][0]&&(Ext.Array.splice(path2,i,0,["M",a2.x,a2.y]),a1.bx=0,a1.by=0,a1.x=path1[i][1],a1.y=path1[i][2],ii=Math.max(p.length,p2.length||0))}var i,ii,seg,seg2,seglen,seg2len,p=this.pathToAbsolute(path),p2=this.pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};for(i=0,ii=Math.max(p.length,p2.length||0);i<ii;i++)p[i]=this.command2curve(p[i],attrs),fixArc(p,i),p2[i]=this.command2curve(p2[i],attrs2),fixArc(p2,i),fixM(p,p2,attrs,attrs2,i),fixM(p2,p,attrs2,attrs,i),seg=p[i],seg2=p2[i],seglen=seg.length,seg2len=seg2.length,attrs.x=seg[seglen-2],attrs.y=seg[seglen-1],attrs.bx=parseFloat(seg[seglen-4])||attrs.x,attrs.by=parseFloat(seg[seglen-3])||attrs.y,attrs2.bx=parseFloat(seg2[seg2len-4])||attrs2.x,attrs2.by=parseFloat(seg2[seg2len-3])||attrs2.y,attrs2.x=seg2[seg2len-2],attrs2.y=seg2[seg2len-1];return[p,p2]},command2curve:function(pathCommand,d){if(!pathCommand)return["C",d.x,d.y,d.x,d.y,d.x,d.y];switch("T"!=pathCommand[0]&&"Q"!=pathCommand[0]&&(d.qx=d.qy=null),pathCommand[0]){case"M":d.X=pathCommand[1],d.Y=pathCommand[2];break;case"A":pathCommand=["C"].concat(this.arc2curve.apply(this,[d.x,d.y].concat(pathCommand.slice(1))));break;case"S":pathCommand=["C",d.x+(d.x-(d.bx||d.x)),d.y+(d.y-(d.by||d.y))].concat(pathCommand.slice(1));break;case"T":d.qx=d.x+(d.x-(d.qx||d.x)),d.qy=d.y+(d.y-(d.qy||d.y)),pathCommand=["C"].concat(this.quadratic2curve(d.x,d.y,d.qx,d.qy,pathCommand[1],pathCommand[2]));break;case"Q":d.qx=pathCommand[1],d.qy=pathCommand[2],pathCommand=["C"].concat(this.quadratic2curve(d.x,d.y,pathCommand[1],pathCommand[2],pathCommand[3],pathCommand[4]));break;case"L":pathCommand=["C"].concat(d.x,d.y,pathCommand[1],pathCommand[2],pathCommand[1],pathCommand[2]);break;case"H":pathCommand=["C"].concat(d.x,d.y,pathCommand[1],d.y,pathCommand[1],d.y);break;case"V":pathCommand=["C"].concat(d.x,d.y,d.x,pathCommand[1],d.x,pathCommand[1]);break;case"Z":pathCommand=["C"].concat(d.x,d.y,d.X,d.Y,d.X,d.Y)}return pathCommand},quadratic2curve:function(x1,y1,ax,ay,x2,y2){return[1/3*x1+2/3*ax,1/3*y1+2/3*ay,1/3*x2+2/3*ax,1/3*y2+2/3*ay,x2,y2]},rotate:function(x,y,rad){var cos=Math.cos(rad),sin=Math.sin(rad);return{x:x*cos-y*sin,y:x*sin+y*cos}},arc2curve:function(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var xy,x,y,h,rx2,ry2,k,cx,cy,f1,f2,df,c1,s1,c2,s2,t,hx,hy,m1,m2,m3,m4,newres,i,ln,f2old,x2old,y2old,me=this,PI=Math.PI,_120=120*PI/180,rad=me.radian*(+angle||0),res=[],math=Math,mcos=math.cos,msin=math.sin,msqrt=math.sqrt,mabs=math.abs,masin=math.asin;if(recursive?(f1=recursive[0],f2=recursive[1],cx=recursive[2],cy=recursive[3]):(x1=(xy=me.rotate(x1,y1,-rad)).x,y1=xy.y,1<(h=(x=(x1-(x2=(xy=me.rotate(x2,y2,-rad)).x))/2)*x/(rx*rx)+(y=(y1-(y2=xy.y))/2)*y/(ry*ry))&&(rx*=h=msqrt(h),ry*=h),cx=(k=(large_arc_flag==sweep_flag?-1:1)*msqrt(mabs(((rx2=rx*rx)*(ry2=ry*ry)-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x))))*rx*y/ry+(x1+x2)/2,f1=masin(((y1-(cy=k*-ry*x/rx+(y1+y2)/2))/ry).toFixed(7)),f2=masin(((y2-cy)/ry).toFixed(7)),(f1=x1<cx?PI-f1:f1)<0&&(f1=2*PI+f1),(f2=x2<cx?PI-f2:f2)<0&&(f2=2*PI+f2),sweep_flag&&f2<f1&&(f1-=2*PI),!sweep_flag&&f1<f2&&(f2-=2*PI)),mabs(df=f2-f1)>_120&&(f2old=f2,x2old=x2,y2old=y2,x2=cx+rx*mcos(f2=f1+_120*(sweep_flag&&f1<f2?1:-1)),y2=cy+ry*msin(f2),res=me.arc2curve(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy])),df=f2-f1,c1=mcos(f1),s1=msin(f1),c2=mcos(f2),s2=msin(f2),m3=[x2+(hx=4/3*rx*(t=math.tan(df/4)))*s2,y2-(hy=4/3*ry*t)*c2],m4=[x2,y2],(m2=[x1+hx*s1,y1-hy*c1])[0]=2*(m1=[x1,y1])[0]-m2[0],m2[1]=2*m1[1]-m2[1],recursive)return[m2,m3,m4].concat(res);for(newres=[],ln=(res=[m2,m3,m4].concat(res).join().split(",")).length,i=0;i<ln;i++)newres[i]=i%2?me.rotate(res[i-1],res[i],rad).y:me.rotate(res[i],res[i+1],rad).x;return newres}}),Ext.define("Ext.fx.PropertyHandler",{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(from,end,damper,initial,attr){damper="number"==typeof damper?damper:1;var units,unitRE=this.unitRE,match=unitRE.exec(from);return match&&(from=match[1],units=match[2],this.scrollRE.test(attr)||units||!this.pixelDefaultsRE.test(attr)||(units="px")),from=+from||0,(match=unitRE.exec(end))&&(end=match[1],units=match[2]||units),{from:from,delta:((end=+end||0)-(null!=initial?initial:from))*damper,units:units}},get:function(from,end,damper,initialFrom,attr){var i,initial,res,j,len,ln=from.length,out=[];for(i=0;i<ln;i++)if(initialFrom&&(initial=initialFrom[i][1].from),Ext.isArray(from[i][1])&&Ext.isArray(end)){for(res=[],j=0,len=from[i][1].length;j<len;j++)res.push(this.computeDelta(from[i][1][j],end[j],damper,initial,attr));out.push([from[i][0],res])}else out.push([from[i][0],this.computeDelta(from[i][1],end,damper,initial,attr)]);return out},set:function(values,easing){var i,val,res,len,j,ln=values.length,out=[];for(i=0;i<ln;i++)if(val=values[i][1],Ext.isArray(val)){for(res=[],j=0,len=val.length;j<len;j++)res.push(val[j].from+val[j].delta*easing+(val[j].units||0));out.push([values[i][0],res])}else out.push([values[i][0],val.from+val.delta*easing+(val.units||0)]);return out}},stringHandler:{computeDelta:function(from,end,damper,initial,attr){return{from:from,delta:end}},get:function(from,end,damper,initialFrom,attr){var i,ln=from.length,out=[];for(i=0;i<ln;i++)out.push([from[i][0],this.computeDelta(from[i][1],end,damper,void 0,attr)]);return out},set:function(values,easing){var i,val,ln=values.length,out=[];for(i=0;i<ln;i++)val=values[i][1],out.push([values[i][0],val.delta]);return out}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(color,damper){var match,base,i,out=!1,reList=[this.hexRE,this.rgbRE,this.hex3RE],length=reList.length;for(i=0;i<length;i++)if(base=i%2==0?16:10,(match=reList[i].exec(color))&&4===match.length){2===i&&(match[1]+=match[1],match[2]+=match[2],match[3]+=match[3]),out={red:parseInt(match[1],base),green:parseInt(match[2],base),blue:parseInt(match[3],base)};break}return out||color},computeDelta:function(from,end,damper,initial){from=this.parseColor(from);var start=initial||from,tfrom=typeof start,tend=typeof(end=this.parseColor(end,damper));return"string"==tfrom||"undefined"==tfrom||"string"==tend||"undefined"==tend?end||start:{from:from,delta:{red:Math.round((end.red-start.red)*damper),green:Math.round((end.green-start.green)*damper),blue:Math.round((end.blue-start.blue)*damper)}}},get:function(start,end,damper,initialFrom){var i,initial,ln=start.length,out=[];for(i=0;i<ln;i++)initialFrom&&(initial=initialFrom[i][1].from),out.push([start[i][0],this.computeDelta(start[i][1],end,damper,initial)]);return out},set:function(values,easing){var i,val,parsedString,from,delta,ln=values.length,out=[];for(i=0;i<ln;i++)if(val=values[i][1]){if(from=val.from,delta=val.delta,void 0===(val="object"==typeof(val="object"==typeof val&&"red"in val?"rgb("+val.red+", "+val.green+", "+val.blue+")":val)&&val.length?val[0]:val))return[];parsedString="string"==typeof val?val:"rgb("+[(from.red+Math.round(delta.red*easing))%256,(from.green+Math.round(delta.green*easing))%256,(from.blue+Math.round(delta.blue*easing))%256].join(",")+")",out.push([values[i][0],parsedString])}return out}},object:{interpolate:function(prop,damper){damper="number"==typeof damper?damper:1;var p,out={};for(p in prop)out[p]=parseFloat(prop[p])*damper;return out},computeDelta:function(from,end,damper,initial){from=this.interpolate(from),end=this.interpolate(end,damper);var p,start=initial||from,delta={};for(p in end)delta[p]=end[p]-start[p];return{from:from,delta:delta}},get:function(start,end,damper,initialFrom){var i,initial,ln=start.length,out=[];for(i=0;i<ln;i++)initialFrom&&(initial=initialFrom[i][1].from),out.push([start[i][0],this.computeDelta(start[i][1],end,damper,initial)]);return out},set:function(values,easing){var i,from,delta,val,p,ln=values.length,out=[],outObject={};for(i=0;i<ln;i++){for(p in from=(val=values[i][1]).from,delta=val.delta,from)outObject[p]=from[p]+delta[p]*easing;out.push([values[i][0],outObject])}return out}},path:{computeDelta:function(from,end,damper,initial){return{from:from=+from||0,delta:((end=+end||0)-(null!=initial?initial:from))*(damper="number"==typeof damper?damper:1)}},forcePath:function(path){return Ext.isArray(path)||Ext.isArray(path[0])||(path=Ext.fx.DrawPath.parsePathString(path)),path},get:function(start,end,damper,initialFrom){var startPathLn,pointsLn,i,deltaPath,initial,j,k,path,startPath,endPath=this.forcePath(end),out=[],startLn=start.length;for(i=0;i<startLn;i++){for(startPath=this.forcePath(start[i][1]),startPath=(deltaPath=Ext.fx.DrawPath.interpolatePaths(startPath,endPath))[0],endPath=deltaPath[1],startPathLn=startPath.length,path=[],j=0;j<startPathLn;j++){for(deltaPath=[startPath[j][0]],pointsLn=startPath[j].length,k=1;k<pointsLn;k++)initial=initialFrom&&initialFrom[0][1][j][k].from,deltaPath.push(this.computeDelta(startPath[j][k],endPath[j][k],damper,initial));path.push(deltaPath)}out.push([start[i][0],path])}return out},set:function(values,easing){var i,j,k,newPath,calcPath,deltaPath,deltaPathLn,pointsLn,ln=values.length,out=[];for(i=0;i<ln;i++){for(newPath=[],deltaPathLn=(deltaPath=values[i][1]).length,j=0;j<deltaPathLn;j++){for(calcPath=[deltaPath[j][0]],pointsLn=deltaPath[j].length,k=1;k<pointsLn;k++)calcPath.push(deltaPath[j][k].from+deltaPath[j][k].delta*easing);newPath.push(calcPath.join(","))}out.push([values[i][0],newPath.join(",")])}return out}}}},function(){for(var props=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],length=props.length,i=0;i<length;i++)this[props[i]]=this.color;for(length=(props=["cursor"]).length,i=0;i<length;i++)this[props[i]]=this.stringHandler}),Ext.define("Ext.fx.Anim",{mixins:{observable:Ext.util.Observable},isAnimation:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:!1,running:!1,paused:!1,iterations:1,autoEnd:!1,alternate:!1,currentIteration:0,startTime:0,frameCount:0,constructor:function(config){var curve,me=this;if((config=config||{}).keyframes)return new Ext.fx.Animator(config);Ext.apply(me,config),void 0===me.from&&(me.from={}),me.propHandlers={},me.config=config,me.target=Ext.fx.Manager.createTarget(me.target),me.easingFn=Ext.fx.Easing[me.easing],me.target.dynamic=me.dynamic,me.easingFn||(me.easingFn=String(me.easing).match(me.bezierRE),me.easingFn&&5===me.easingFn.length&&(curve=me.easingFn,me.easingFn=Ext.fx.CubicBezier.cubicBezier(+curve[1],+curve[2],+curve[3],+curve[4]))),me.id=Ext.id(null,"ext-anim-"),me.mixins.observable.constructor.call(me),Ext.fx.Manager.addAnim(me),config.autoEnd&&(me.running=!0,me.jumpToEnd())},setAttr:function(attr,value){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,attr,value)},initAttrs:function(){var start,end,propHandler,attr,me=this,from=me.from,to=me.to,initialFrom=me.initialFrom||{},out={};for(attr in to)to.hasOwnProperty(attr)&&(start=me.target.getAttr(attr,from[attr]),end=to[attr],propHandler=Ext.fx.PropertyHandler[attr]?me.propHandlers[attr]=Ext.fx.PropertyHandler[attr]:Ext.isObject(end)?me.propHandlers[attr]=Ext.fx.PropertyHandler.object:me.propHandlers[attr]=Ext.fx.PropertyHandler.defaultHandler,out[attr]=propHandler.get(start,end,me.damper,initialFrom[attr],attr));me.currentAttrs=out},start:function(startTime){var me=this,delay=me.delay,delayStart=me.delayStart;if(delay){if(!delayStart)return void(me.delayStart=startTime);if(startTime-delayStart<delay)return;startTime=new Date(delayStart.getTime()+delay)}!1!==me.fireEvent("beforeanimate",me)&&(me.startTime=startTime,me.paused||me.currentAttrs||me.initAttrs(),me.running=!0,me.frameCount=0)},jumpToEnd:function(){var me=this;me.endWasCalled||(me.currentAttrs||me.initAttrs(),Ext.fx.Manager.jumpToEnd(me),me.end())},runAnim:function(elapsedTime){var easing,values,attr,lastFrame,me=this,attrs=me.currentAttrs,duration=me.duration,easingFn=me.easingFn,propHandlers=me.propHandlers,ret={};for(attr in duration<=elapsedTime&&(elapsedTime=duration,lastFrame=!0),me.reverse&&(elapsedTime=duration-elapsedTime),attrs)attrs.hasOwnProperty(attr)&&(values=attrs[attr],easing=lastFrame?1:easingFn(elapsedTime/duration),ret[attr]=propHandlers[attr].set(values,easing));return me.frameCount++,ret},lastFrame:function(){var me=this,iter=me.iterations,iterCount=me.currentIteration;++iterCount<iter?(me.alternate&&(me.reverse=!me.reverse),me.startTime=new Date,me.currentIteration=iterCount,me.paused=!1):(me.currentIteration=0,me.end(),me.fireEvent("lastframe",me,me.startTime))},endWasCalled:0,end:function(){var me=this;me.endWasCalled++||(me.startTime=0,me.paused=!1,me.running=!1,Ext.fx.Manager.removeAnim(me),me.fireEvent("afteranimate",me,me.startTime),Ext.callback(me.callback,me.scope,[me,me.startTime]),me.remove&&me.target.destroy())},isReady:function(){return!1===this.paused&&!1===this.running&&0<this.iterations},isRunning:function(){return!1===this.paused&&!0===this.running&&!0!==this.isAnimator}}),Ext.enableFx=!0,Ext.define("Ext.util.Animate",{mixinId:"animate",isAnimate:!0,animate:function(animObj){return Ext.fx.Manager.hasFxBlock(this.id)||Ext.fx.Manager.queueFx(new Ext.fx.Anim(this.anim(animObj))),this},anim:function(config){if(!Ext.isObject(config))return!!config&&{};return config.stopAnimation&&this.stopAnimation(),Ext.applyIf(config,Ext.fx.Manager.getFxDefaults(this.id)),Ext.apply({target:this,paused:!0},config)},getAnimationProps:function(){var layout=this.layout;return layout&&layout.animate?layout.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){return Ext.fx.Manager.stopAnimation(this.id),this},syncFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!0}),this},sequenceFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!1}),this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}}),Ext.define("Ext.overrides.dom.Element",function(){function camelReplaceFn(m,a){return a.charAt(1).toUpperCase()}var Element,WIN=window,DOC=document,OFFSETCLASS=Ext.baseCSSPrefix+"hidden-offsets",CLIPCLASS=Ext.baseCSSPrefix+"hidden-clip",boxMarkup=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join(""),scriptTagRe=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/gi,replaceScriptTagRe=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,srcRe=/\ssrc=([\'\"])(.*?)\1/i,nonSpaceRe=/\S/,typeRe=/\stype=([\'\"])(.*?)\1/i,msRe=/^-ms-/,camelRe=/(-[a-z])/gi,XMASKED=Ext.baseCSSPrefix+"masked",XMASKEDRELATIVE=Ext.baseCSSPrefix+"masked-relative",EXTELMASKMSG=Ext.baseCSSPrefix+"mask-msg",bodyRe=/^body/i,propertyCache={},emptyRange=DOC.createRange?DOC.createRange():null,inputTags={INPUT:!0,TEXTAREA:!0};if(Ext.isIE8)var garbageBin=DOC.createElement("div"),destroyQueue=[],clearGarbage=Ext.Function.createBuffered(function(){var i,len=destroyQueue.length;for(i=0;i<len;i++)garbageBin.appendChild(destroyQueue[i]);garbageBin.innerHTML="",destroyQueue.length=0},10);return{override:"Ext.dom.Element",mixins:[Ext.util.Animate],skipGarbageCollection:!1,_init:function(E){(Element=E).tabbableSelector+=",["+E.tabbableSavedCounterAttribute+"]"},statics:{selectableCls:Ext.baseCSSPrefix+"selectable",unselectableCls:Ext.baseCSSPrefix+"unselectable",tabbableSelector:Ext.supports.CSS3NegationSelector?'a[href],button,iframe,input,select,textarea,[tabindex]:not([tabindex="-1"]),[contenteditable="true"]':'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:!0,IFRAME:!0,EMBED:!0,INPUT:!0,OBJECT:!0,SELECT:!0,TEXTAREA:!0,HTML:!!Ext.isIE},naturallyTabbableTags:{BUTTON:!0,IFRAME:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,OBJECT:!!Ext.isIE8m},tabbableSavedCounterAttribute:"data-tabindex-counter",tabbableSavedValueAttribute:"data-tabindex-value",normalize:function(prop){return"float"===prop&&(prop=Ext.supports.Float?"cssFloat":"styleFloat"),propertyCache[prop]||(propertyCache[prop]=prop.replace(msRe,"ms-").replace(camelRe,camelReplaceFn))}},addClsOnClick:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);return me.on("mousedown",function(){if(hasTest&&!1===testFn.call(scope||me,me))return!1;Ext.fly(dom).addCls(className);var d=Ext.getDoc(),fn=function(){Ext.fly(dom).removeCls(className),d.removeListener("mouseup",fn)};d.on("mouseup",fn)}),me},addClsOnFocus:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);return me.on("focus",function(){if(hasTest&&!1===testFn.call(scope||me,me))return!1;Ext.fly(dom).addCls(className)}),me.on("blur",function(){Ext.fly(dom).removeCls(className)}),me},addClsOnOver:function(className,testFn,scope){var me=this,dom=me.dom,hasTest=Ext.isFunction(testFn);return me.hover(function(){hasTest&&!1===testFn.call(scope||me,me)||Ext.fly(dom).addCls(className)},function(){Ext.fly(dom).removeCls(className)}),me},addKeyListener:function(key,fn,scope){var config;return config="object"!=typeof key||Ext.isArray(key)?{target:this,key:key,fn:fn,scope:scope}:{target:this,key:key.key,shift:key.shift,ctrl:key.ctrl,alt:key.alt,fn:fn,scope:scope},new Ext.util.KeyMap(config)},addKeyMap:function(config){return new Ext.util.KeyMap(Ext.apply({target:this},config))},afterAnimate:function(){var shadow=this.shadow;!shadow||shadow.disabled||shadow.animate||shadow.show()},anchorAnimX:function(anchor){var xName="l"===anchor?"right":"left";this.dom.style[xName]="0px"},anim:function(config){if(!Ext.isObject(config))return!!config&&{};var animConfig,duration=config.duration||Ext.fx.Anim.prototype.duration,easing=config.easing||"ease";return config.stopAnimation&&this.stopAnimation(),Ext.applyIf(config,Ext.fx.Manager.getFxDefaults(this.id)),Ext.fx.Manager.setFxDefaults(this.id,{delay:0}),animConfig={target:this.dom,remove:config.remove,alternate:config.alternate||!1,duration:duration,easing:easing,callback:config.callback,listeners:config.listeners,iterations:config.iterations||1,scope:config.scope,block:config.block,concurrent:config.concurrent,delay:config.delay||0,paused:!0,keyframes:config.keyframes,from:config.from||{},to:Ext.apply({},config),userConfig:config},Ext.apply(animConfig.to,config.to),delete animConfig.to.to,delete animConfig.to.from,delete animConfig.to.remove,delete animConfig.to.alternate,delete animConfig.to.keyframes,delete animConfig.to.iterations,delete animConfig.to.listeners,delete animConfig.to.target,delete animConfig.to.paused,delete animConfig.to.callback,delete animConfig.to.scope,delete animConfig.to.duration,delete animConfig.to.easing,delete animConfig.to.concurrent,delete animConfig.to.block,delete animConfig.to.stopAnimation,delete animConfig.to.delay,animConfig},animate:function(config){return this.addAnimation(config),this},addAnimation:function(config){var listeners,anim,end,animId=this.dom.id||Ext.id(this.dom);return Ext.fx.Manager.hasFxBlock(animId)||(config.listeners&&(listeners=config.listeners,delete config.listeners),config.internalListeners&&(config.listeners=config.internalListeners,delete config.internalListeners),end=config.autoEnd,delete config.autoEnd,(anim=new Ext.fx.Anim(this.anim(config))).on({afteranimate:"afterAnimate",beforeanimate:"beforeAnimate",scope:this,single:!0}),listeners&&anim.on(listeners),Ext.fx.Manager.queueFx(anim),end&&anim.jumpToEnd()),anim},beforeAnimate:function(){var shadow=this.shadow;!shadow||shadow.disabled||shadow.animate||shadow.hide()},boxWrap:function(cls){cls=cls||Ext.baseCSSPrefix+"box";var el=Ext.get(this.insertHtml("beforeBegin","<div class='"+cls+"' role='presentation'>"+Ext.String.format(boxMarkup,cls)+"</div>"));return el.selectNode("."+cls+"-mc").appendChild(this.dom),el},clean:function(forceReclean){var nx,dom=this.dom,data=this.getData(),n=dom.firstChild,ni=-1;if(data.isCleaned&&!0!==forceReclean)return this;for(;n;)nx=n.nextSibling,3===n.nodeType?nonSpaceRe.test(n.nodeValue)?nx&&3===nx.nodeType&&(n.appendData(Ext.String.trim(nx.data)),dom.removeChild(nx),nx=n.nextSibling,n.nodeIndex=++ni):dom.removeChild(n):(Ext.fly(n,"_clean").clean(),n.nodeIndex=++ni),n=nx;return data.isCleaned=!0,this},empty:emptyRange?function(){var dom=this.dom;dom.firstChild&&(emptyRange.setStartBefore(dom.firstChild),emptyRange.setEndAfter(dom.lastChild),emptyRange.deleteContents())}:function(){for(var dom=this.dom;dom.lastChild;)dom.removeChild(dom.lastChild)},clearListeners:function(){this.removeAnchor(),this.callParent()},clearPositioning:function(value){return value=value||"",this.setStyle({left:value,right:value,top:value,bottom:value,"z-index":"",position:"static"})},createProxy:function(config,renderTo,matchBox){config="object"==typeof config?config:{tag:"div",role:"presentation",cls:config};var proxy=renderTo?Ext.DomHelper.append(renderTo,config,!0):Ext.DomHelper.insertBefore(this.dom,config,!0);return proxy.setVisibilityMode(Element.DISPLAY),proxy.hide(),matchBox&&this.setBox&&this.getBox&&proxy.setBox(this.getBox()),proxy},clearOpacity:function(){return this.setOpacity("")},clip:function(){var style,me=this,data=me.getData();return data.isClipped||(data.isClipped=!0,style=me.getStyle(["overflow","overflow-x","overflow-y"]),data.originalClip={o:style.overflow,x:style["overflow-x"],y:style["overflow-y"]},me.setStyle("overflow","hidden"),me.setStyle("overflow-x","hidden"),me.setStyle("overflow-y","hidden")),me},destroy:function(){var maskEl,maskMsg,me=this,dom=me.dom,data=me.getData();dom&&me.isAnimate&&me.stopAnimation(),me.callParent(),dom&&Ext.isIE8&&dom.window!=dom&&9!==dom.nodeType&&"BODY"!==dom.tagName&&"HTML"!==dom.tagName&&(destroyQueue[destroyQueue.length]=dom,clearGarbage()),data&&(maskEl=data.maskEl,maskMsg=data.maskMsg,maskEl&&maskEl.destroy(),maskMsg&&maskMsg.destroy())},enableDisplayMode:function(display){return this.setVisibilityMode(Element.DISPLAY),void 0!==display&&(this.getData().originalDisplay=display),this},fadeIn:function(o){var dom=this.dom;return this.animate(Ext.apply({},o,{opacity:1,internalListeners:{beforeanimate:function(anim){var el=Ext.fly(dom,"_anim");el.isStyle("display","none")?el.setDisplayed(""):el.show()}}})),this},fadeOut:function(o){var dom=this.dom;return o=Ext.apply({opacity:0,internalListeners:{afteranimate:function(anim){if(dom&&0===anim.to.opacity){var el=Ext.fly(dom,"_anim");o.useDisplay?el.setDisplayed(!1):el.hide()}}}},o),this.animate(o),this},fixDisplay:function(){var me=this;me.isStyle("display","none")&&(me.setStyle("visibility","hidden"),me.setStyle("display",me._getDisplay()),me.isStyle("display","none")&&me.setStyle("display","block"))},frame:function(color,count,obj){var beforeAnim,dom=this.dom;return color=color||"#C3DAF9",count=count||1,obj=obj||{},beforeAnim=function(){var box,proxy,el=Ext.fly(dom,"_anim"),animScope=this;el.show(),box=el.getBox(),proxy=Ext.getBody().createChild({role:"presentation",id:el.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35e3,border:"0px solid "+color}}),new Ext.fx.Anim({target:proxy,duration:obj.duration||1e3,iterations:count,from:{top:box.y,left:box.x,borderWidth:0,opacity:1,height:box.height,width:box.width},to:{top:box.y-20,left:box.x-20,borderWidth:10,opacity:0,height:box.height+40,width:box.width+40}}).on("afteranimate",function(){proxy.destroy(),animScope.end()})},this.animate({duration:2*Math.max(obj.duration,500)||2e3,listeners:{beforeanimate:{fn:beforeAnim}},callback:obj.callback,scope:obj.scope}),this},getColor:function(attr,defaultValue,prefix){var h,len,v=this.getStyle(attr),color=prefix||""===prefix?prefix:"#",i=0;if(!v||/transparent|inherit/.test(v))return defaultValue;if(/^r/.test(v))for(len=(v=v.slice(4,v.length-1).split(",")).length;i<len;i++)color+=((h=parseInt(v[i],10))<16?"0":"")+h.toString(16);else color+=3===(v=v.replace("#","")).length?v.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):v;return 5<color.length?color.toLowerCase():defaultValue},getLoader:function(){var data=this.getData(),loader=data.loader;return loader||(data.loader=loader=new Ext.ElementLoader({target:this})),loader},getPositioning:function(autoPx){var styles=this.getStyle(["left","top","position","z-index"]),dom=this.dom;return autoPx&&("auto"===styles.left&&(styles.left=dom.offsetLeft+"px"),"auto"===styles.top&&(styles.top=dom.offsetTop+"px")),styles},ghost:function(anchor,obj){var beforeAnim,dom=this.dom;return anchor=anchor||"b",beforeAnim=function(){var el=Ext.fly(dom,"_anim"),width=el.getWidth(),height=el.getHeight(),xy=el.getXY(),position=el.getPositioning(),to={opacity:0};switch(anchor){case"t":to.y=xy[1]-height;break;case"l":to.x=xy[0]-width;break;case"r":to.x=xy[0]+width;break;case"b":to.y=xy[1]+height;break;case"tl":to.x=xy[0]-width,to.y=xy[1]-height;break;case"bl":to.x=xy[0]-width,to.y=xy[1]+height;break;case"br":to.x=xy[0]+width,to.y=xy[1]+height;break;case"tr":to.x=xy[0]+width,to.y=xy[1]-height}this.to=to,this.on("afteranimate",function(){var el=Ext.fly(dom,"_anim");el&&(el.hide(),el.clearOpacity(),el.setPositioning(position))})},this.animate(Ext.applyIf(obj||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:beforeAnim}})),this},hide:function(animate){return"string"==typeof animate?this.setVisible(!1,animate):this.setVisible(!1,this.anim(animate)),this},highlight:function(color,o){var restore,to,attr,lns,event,dom=this.dom,from={};return lns=(o=o||{}).listeners||{},from[attr=o.attr||"backgroundColor"]=color||"ffff9c",o.to?to=o.to:(to={})[attr]=o.endColor||this.getColor(attr,"ffffff",""),o.listeners=Ext.apply(Ext.apply({},lns),{beforeanimate:function(){restore=dom.style[attr];var el=Ext.fly(dom,"_anim");if(el.clearOpacity(),el.show(),event=lns.beforeanimate)return(event.fn||event).apply(event.scope||lns.scope||WIN,arguments)},afteranimate:function(){dom&&(dom.style[attr]=restore),(event=lns.afteranimate)&&(event.fn||event).apply(event.scope||lns.scope||WIN,arguments)}}),this.animate(Ext.apply({},o,{duration:1e3,easing:"ease-in",from:from,to:to})),this},hover:function(overFn,outFn,scope,options){var me=this;return me.on("mouseenter",overFn,scope||me.dom,options),me.on("mouseleave",outFn,scope||me.dom,options),me},initDD:function(group,config,overrides){var dd=new Ext.dd.DD(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDProxy:function(group,config,overrides){var dd=new Ext.dd.DDProxy(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDTarget:function(group,config,overrides){var dd=new Ext.dd.DDTarget(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},isFocusable:function(){var nodeName,dom=this.dom,focusable=!1;return dom&&!dom.disabled&&(nodeName=dom.nodeName,focusable=!!Ext.Element.naturallyFocusableTags[nodeName]||("A"===nodeName||"LINK"===nodeName)&&!!dom.href||null!=dom.getAttribute("tabIndex")||"true"===dom.contentEditable,Ext.isIE8&&"INPUT"===nodeName&&"hidden"===dom.type&&(focusable=!1),focusable=focusable&&this.isVisible(!0)),focusable},isInputField:function(){var dom=this.dom,contentEditable=dom.contentEditable;return!!(inputTags[dom.tagName]&&"button"!==dom.type||""===contentEditable||"true"===contentEditable)},isTabbable:function(includeHidden){var nodeName,hasIndex,tabIndex,dom=this.dom,tabbable=!1;return dom&&!dom.disabled&&(nodeName=dom.nodeName,hasIndex=null!=(tabIndex=dom.getAttribute("tabIndex")),tabIndex-=0,"A"===nodeName||"LINK"===nodeName?tabbable=dom.href?!(hasIndex&&tabIndex<0):"true"===dom.contentEditable&&!hasIndex||hasIndex&&0<=tabIndex:"true"===dom.contentEditable||Ext.Element.naturallyTabbableTags[nodeName]?tabbable=!(hasIndex&&tabIndex<0):hasIndex&&0<=tabIndex&&(tabbable=!0),Ext.isIE8&&"INPUT"===nodeName&&"hidden"===dom.type&&(tabbable=!1),tabbable=tabbable&&(includeHidden||(!this.component||this.component.isVisible(!0))&&this.isVisible(!0))),tabbable},isMasked:function(deep){var parent,data=this.getData(),maskEl=data.maskEl,maskMsg=data.maskMsg,hasMask=!1;if(maskEl&&maskEl.isVisible())maskMsg&&maskMsg.center(this),hasMask=!0;else if(deep&&(parent=this.findParentNode()))return Ext.fly(parent).isMasked(deep);return hasMask},load:function(options){return this.getLoader().load(options),this},mask:function(msg,msgCls,elHeight){var maskMsg,me=this,dom=me.dom,data=me.getData(),maskEl=data.maskEl;return bodyRe.test(dom.tagName)&&"static"===me.getStyle("position")||me.addCls(XMASKEDRELATIVE),maskEl&&maskEl.destroy(),maskEl=Ext.DomHelper.append(dom,{role:"presentation",cls:Ext.baseCSSPrefix+"mask "+Ext.baseCSSPrefix+"border-box",children:{role:"presentation",cls:msgCls?EXTELMASKMSG+" "+msgCls:EXTELMASKMSG,cn:{tag:"div",role:"presentation",cls:Ext.baseCSSPrefix+"mask-msg-inner",cn:{tag:"div",role:"presentation",cls:Ext.baseCSSPrefix+"mask-msg-text",html:msg||""}}}},!0),maskMsg=Ext.get(maskEl.dom.firstChild),data.maskEl=maskEl,me.addCls(XMASKED),maskEl.setDisplayed(!0),"string"==typeof msg?(maskMsg.setDisplayed(!0),maskMsg.center(me)):maskMsg.setDisplayed(!1),dom===DOC.body&&maskEl.addCls(Ext.baseCSSPrefix+"mask-fixed"),me.saveTabbableState({skipSelf:dom===DOC.body}),Ext.isIE9m&&dom!==DOC.body&&me.isStyle("height","auto")&&maskEl.setSize(void 0,elHeight||me.getHeight()),maskEl},monitorMouseLeave:function(delay,handler,scope){var timer,me=this,listeners={mouseleave:function(e){Ext.isIE9m&&e.enableIEAsync(),timer=Ext.defer(handler,delay,scope||me,[e])},mouseenter:function(){clearTimeout(timer)}};return me.on(listeners),listeners},puff:function(obj){var beforeAnim,me=this,dom=me.dom,box=me.getBox(),originalStyles=me.getStyle(["width","height","left","right","top","bottom","position","z-index","font-size","opacity"],!0);return obj=Ext.applyIf(obj||{},{easing:"ease-out",duration:500,useDisplay:!1}),beforeAnim=function(){var el=Ext.fly(dom,"_anim");el.clearOpacity(),el.show(),this.to={width:2*box.width,height:2*box.height,x:box.x-box.width/2,y:box.y-box.height/2,opacity:0,fontSize:"200%"},this.on("afteranimate",function(){var el=Ext.fly(dom,"_anim");el&&(obj.useDisplay?el.setDisplayed(!1):el.hide(),el.setStyle(originalStyles),Ext.callback(obj.callback,obj.scope))})},me.animate({duration:obj.duration,easing:obj.easing,listeners:{beforeanimate:{fn:beforeAnim}}}),me},selectable:function(){return this.dom.unselectable="",this.removeCls(Element.unselectableCls),this.addCls(Element.selectableCls),this},setCapture:function(){var dom=this.dom;Ext.isIE9m&&dom.setCapture&&dom.setCapture()},setHeight:function(height,animate){return animate&&this.anim?(Ext.isObject(animate)||(animate={}),this.animate(Ext.applyIf({to:{height:height}},animate))):this.callParent(arguments),this},setHorizontal:function(){var me=this,cls=me.verticalCls;delete me.vertical,cls&&(delete me.verticalCls,me.removeCls(cls)),delete me.setWidth,delete me.setHeight,Ext.isIE8||(delete me.getWidth,delete me.getHeight),delete me.styleHooks},updateText:function(text){},setHtml:function(html,loadScripts,callback,scope){var id,dom,interval,me=this;return me.dom?(html=html||"",dom=me.dom,!0!==loadScripts?(dom.innerHTML=html,Ext.callback(callback,me)):(id=Ext.id(),html+='<span id="'+id+'" role="presentation"></span>',interval=Ext.interval(function(){var hd,match,attrs,srcMatch,typeMatch,el,s;if(!(el=DOC.getElementById(id)))return!1;for(clearInterval(interval),Ext.removeNode(el),hd=Ext.getHead().dom;match=scriptTagRe.exec(html);)(srcMatch=!!(attrs=match[1])&&attrs.match(srcRe))&&srcMatch[2]?((s=DOC.createElement("script")).src=srcMatch[2],(typeMatch=attrs.match(typeRe))&&typeMatch[2]&&(s.type=typeMatch[2]),hd.appendChild(s)):match[2]&&0<match[2].length&&(scope?Ext.functionFactory(match[2]).call(scope):Ext.globalEval(match[2]));Ext.callback(callback,scope||me)},20),dom.innerHTML=html.replace(replaceScriptTagRe,"")),me):me},setOpacity:function(opacity,animate){var me=this;return me.dom&&(animate&&me.anim?("object"!=typeof animate&&(animate={duration:350,easing:"ease-in"}),me.animate(Ext.applyIf({to:{opacity:opacity}},animate))):me.setStyle("opacity",opacity)),me},setPositioning:function(pc){return this.setStyle(pc)},setVertical:function(angle,cls){var me=this,proto=Element.prototype;me.vertical=!0,cls&&me.addCls(me.verticalCls=cls),me.setWidth=proto.setHeight,me.setHeight=proto.setWidth,Ext.isIE8||(me.getWidth=proto.getHeight,me.getHeight=proto.getWidth),me.styleHooks=270===angle?proto.verticalStyleHooks270:proto.verticalStyleHooks90},setSize:function(width,height,animate){var me=this;return Ext.isObject(width)&&(animate=height,height=width.height,width=width.width),animate&&me.anim?(!0===animate&&(animate={}),me.animate(Ext.applyIf({to:{width:width,height:height}},animate))):(me.dom.style.width=Element.addUnits(width),me.dom.style.height=Element.addUnits(height),(me.shadow||me.shim)&&me.syncUnderlays()),me},setVisible:function(visible,animate){var me=this,dom=me.dom,visMode=function(el){var data=el.getData(),visMode=data.visibilityMode;return void 0===visMode&&(data.visibilityMode=visMode=Element.VISIBILITY),visMode}(me);if("string"==typeof animate){switch(animate){case"display":visMode=Element.DISPLAY;break;case"visibility":visMode=Element.VISIBILITY;break;case"offsets":visMode=Element.OFFSETS;break;case"clip":visMode=Element.CLIP}me.setVisibilityMode(visMode),animate=!1}if(animate&&me.anim)visible&&(me.setOpacity(.01),me.setVisible(!0)),Ext.isObject(animate)||(animate={duration:350,easing:"ease-in"}),me.animate(Ext.applyIf({callback:function(){visible||Ext.fly(dom).setVisible(!1).setOpacity(1)},to:{opacity:visible?1:0}},animate));else{if(visMode===Element.DISPLAY)return me.setDisplayed(visible);visMode===Element.OFFSETS?me[visible?"removeCls":"addCls"](OFFSETCLASS):visMode===Element.CLIP?me[visible?"removeCls":"addCls"](CLIPCLASS):visMode===Element.VISIBILITY&&(me.fixDisplay(),dom.style.visibility=visible?"":"hidden")}return me.getData().isVisible=visible,(me.shadow||me.shim)&&me.setUnderlaysVisible(visible),me},setWidth:function(width,animate){return animate&&this.anim?(Ext.isObject(animate)||(animate={}),this.animate(Ext.applyIf({to:{width:width}},animate))):this.callParent(arguments),this},setX:function(x,animate){return this.setXY([x,this.getY()],animate)},setXY:function(xy,animate){return animate&&this.anim?(Ext.isObject(animate)||(animate={}),this.animate(Ext.applyIf({to:{x:xy[0],y:xy[1]}},animate))):this.callParent([xy]),this},setY:function(y,animate){return this.setXY([this.getX(),y],animate)},show:function(animate){return"string"==typeof animate?this.setVisible(!0,animate):this.setVisible(!0,this.anim(animate)),this},slideIn:function(anchor,obj,slideOut){var beforeAnim,wrapAnim,restoreScroll,wrapDomParentNode,me=this,dom=me.dom,elStyle=dom.style;return anchor=anchor||"t",obj=obj||{},beforeAnim=function(){var box,originalStyles,anim,wrap,animScope=this,listeners=obj.listeners,el=Ext.fly(dom,"_anim");switch(slideOut||el.fixDisplay(),box=el.getBox(),"t"!=anchor&&"b"!=anchor||0!==box.height?"l"!=anchor&&"r"!=anchor||0!==box.width||(box.width=dom.scrollWidth):box.height=dom.scrollHeight,originalStyles=el.getStyle(["width","height","left","right","top","bottom","position","z-index"],!0),el.setSize(box.width,box.height),obj.preserveScroll&&(restoreScroll=el.cacheScrollValues()),wrap=el.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+el.dom.id,style:{visibility:slideOut?"visible":"hidden"}}),wrapDomParentNode=wrap.dom.parentNode,wrap.setPositioning(el.getPositioning()),wrap.isStyle("position","static")&&wrap.position("relative"),el.clearPositioning("auto"),wrap.clip(),restoreScroll&&restoreScroll(),el.setStyle({visibility:"",position:"absolute"}),slideOut&&wrap.setSize(box.width,box.height),anchor){case"t":anim={from:{width:box.width+"px",height:"0px"},to:{width:box.width+"px",height:box.height+"px"}},elStyle.bottom="0px";break;case"l":anim={from:{width:"0px",height:box.height+"px"},to:{width:box.width+"px",height:box.height+"px"}},me.anchorAnimX(anchor);break;case"r":anim={from:{x:box.x+box.width,width:"0px",height:box.height+"px"},to:{x:box.x,width:box.width+"px",height:box.height+"px"}},me.anchorAnimX(anchor);break;case"b":anim={from:{y:box.y+box.height,width:box.width+"px",height:"0px"},to:{y:box.y,width:box.width+"px",height:box.height+"px"}};break;case"tl":anim={from:{x:box.x,y:box.y,width:"0px",height:"0px"},to:{width:box.width+"px",height:box.height+"px"}},elStyle.bottom="0px",me.anchorAnimX("l");break;case"bl":anim={from:{y:box.y+box.height,width:"0px",height:"0px"},to:{y:box.y,width:box.width+"px",height:box.height+"px"}},me.anchorAnimX("l");break;case"br":anim={from:{x:box.x+box.width,y:box.y+box.height,width:"0px",height:"0px"},to:{x:box.x,y:box.y,width:box.width+"px",height:box.height+"px"}},me.anchorAnimX("r");break;case"tr":anim={from:{x:box.x+box.width,width:"0px",height:"0px"},to:{x:box.x,width:box.width+"px",height:box.height+"px"}},elStyle.bottom="0px",me.anchorAnimX("r")}wrap.show(),delete(wrapAnim=Ext.apply({},obj)).listeners,(wrapAnim=new Ext.fx.Anim(Ext.applyIf(wrapAnim,{target:wrap,duration:500,easing:"ease-out",from:slideOut?anim.to:anim.from,to:slideOut?anim.from:anim.to}))).on("afteranimate",function(){var el=Ext.fly(dom,"_anim");el.setStyle(originalStyles),slideOut&&(obj.useDisplay?el.setDisplayed(!1):el.hide()),wrap.dom&&(wrap.dom.parentNode?wrap.dom.parentNode.insertBefore(el.dom,wrap.dom):wrapDomParentNode.appendChild(el.dom),wrap.destroy()),restoreScroll&&restoreScroll(),animScope.end()}),listeners&&wrapAnim.on(listeners)},me.animate({duration:obj.duration?2*Math.max(obj.duration,500):1e3,listeners:{beforeanimate:beforeAnim}}),me},slideOut:function(anchor,o){return this.slideIn(anchor,o,!0)},swallowEvent:function(eventName,preventDefault){function fn(e){e.stopPropagation(),preventDefault&&e.preventDefault()}var e,eLen;if(Ext.isArray(eventName)){for(eLen=eventName.length,e=0;e<eLen;e++)this.on(eventName[e],fn);return this}return this.on(eventName,fn),this},switchOff:function(obj){var beforeAnim,dom=this.dom;return obj=Ext.applyIf(obj||{},{easing:"ease-in",duration:500,remove:!1,useDisplay:!1}),beforeAnim=function(){var position,el=Ext.fly(dom,"_anim"),animScope=this,size=el.getSize(),xy=el.getXY();el.clearOpacity(),el.clip(),position=el.getPositioning(),new Ext.fx.Animator({target:dom,duration:obj.duration,easing:obj.easing,keyframes:{33:{opacity:.3},66:{height:1,y:xy[1]+size.height/2},100:{width:1,x:xy[0]+size.width/2}}}).on("afteranimate",function(){var el=Ext.fly(dom,"_anim");obj.useDisplay?el.setDisplayed(!1):el.hide(),el.clearOpacity(),el.setPositioning(position),el.setSize(size),animScope.end()})},this.animate({duration:2*Math.max(obj.duration,500),listeners:{beforeanimate:{fn:beforeAnim}},callback:obj.callback,scope:obj.scope}),this},syncContent:function(source){var i,destNode,sourceNode,nodeType,newAttrs,attLen,attName,sourceNodes=(source=Ext.getDom(source)).childNodes,sourceLen=sourceNodes.length,dest=this.dom,destNodes=dest.childNodes,destLen=destNodes.length,elData=dest._extData;if(Ext.isIE9m&&dest.mergeAttributes)dest.mergeAttributes(source,!0),dest.src=source.src;else for(attLen=(newAttrs=source.attributes).length,i=0;i<attLen;i++)"id"!==(attName=newAttrs[i].name)&&dest.setAttribute(attName,newAttrs[i].value);if(elData&&(elData.isSynchronized=!1),sourceLen===destLen)for(i=0;i<sourceLen;i++){if(sourceNode=sourceNodes[i],destNode=destNodes[i],(nodeType=sourceNode.nodeType)!==destNode.nodeType||1===nodeType&&sourceNode.tagName!==destNode.tagName)return void(dest.innerHTML=source.innerHTML);3===nodeType?destNode.data=sourceNode.data:(sourceNode.id&&destNode.id!==sourceNode.id&&(destNode.id=sourceNode.id),destNode.style.cssText=sourceNode.style.cssText,destNode.className=sourceNode.className,Ext.fly(destNode,"_syncContent").syncContent(sourceNode))}else dest.innerHTML=source.innerHTML},toggle:function(animate){return this.setVisible(!this.isVisible(),this.anim(animate)),this},unmask:function(){var style,data=this.getData(),maskEl=data.maskEl;maskEl&&((style=maskEl.dom.style).clearExpression&&(style.clearExpression("width"),style.clearExpression("height")),maskEl&&(maskEl.destroy(),delete data.maskEl),this.removeCls([XMASKED,XMASKEDRELATIVE])),this.restoreTabbableState(this.dom===DOC.body)},unclip:function(){var clip,me=this,data=me.getData();return data.isClipped&&(data.isClipped=!1,(clip=data.originalClip).o&&me.setStyle("overflow",clip.o),clip.x&&me.setStyle("overflow-x",clip.x),clip.y&&me.setStyle("overflow-y",clip.y)),me},translate:function(x,y,z){Ext.supports.CssTransforms&&!Ext.isIE9m?this.callParent(arguments):(null!=x&&(this.dom.style.left=x+"px"),null!=y&&(this.dom.style.top=y+"px"))},unselectable:function(){return Ext.isOpera&&(this.dom.unselectable="on"),this.removeCls(Element.selectableCls),this.addCls(Element.unselectableCls),this},privates:{findTabbableElements:function(options){var skipSelf,skipChildren,excludeRoot,includeSaved,includeHidden,nodes,node,fly,i,len,tabIndex,dom=this.dom,cAttr=Ext.Element.tabbableSavedCounterAttribute,selection=[],idx=0;if(!dom)return selection;if(options&&(skipSelf=options.skipSelf,skipChildren=options.skipChildren,excludeRoot=options.excludeRoot,includeSaved=options.includeSaved,includeHidden=options.includeHidden),(excludeRoot=excludeRoot&&Ext.getDom(excludeRoot))&&excludeRoot.contains(dom))return selection;if(!skipSelf&&(includeSaved&&dom.hasAttribute(cAttr)||this.isTabbable(includeHidden))&&(selection[idx++]=dom),skipChildren)return selection;if(!(len=(nodes=dom.querySelectorAll(Ext.Element.tabbableSelector)).length))return selection;for(fly=new Ext.dom.Fly,i=0;i<len;i++)tabIndex=+(node=nodes[i]).getAttribute("tabIndex"),!(includeSaved&&node.hasAttribute(cAttr)||!(tabIndex<0)&&fly.attach(node).isTabbable(includeHidden))||excludeRoot&&(excludeRoot===node||excludeRoot.contains(node))||(selection[idx++]=node);return selection},saveTabbableState:function(options){var counter,nodes,node,i,len,counterAttr=Ext.Element.tabbableSavedCounterAttribute,savedAttr=Ext.Element.tabbableSavedValueAttribute;for(options&&null!=options.includeSaved||((options=Ext.Object.chain(options||null)).includeSaved=!0),i=0,len=(nodes=this.findTabbableElements(options)).length;i<len;i++)0<(counter=+(node=nodes[i]).getAttribute(counterAttr))?node.setAttribute(counterAttr,++counter):(node.hasAttribute("tabIndex")?node.setAttribute(savedAttr,node.getAttribute("tabIndex")):node.setAttribute(savedAttr,"none"),node.setAttribute("tabIndex","-1"),node.setAttribute(counterAttr,"1"));return nodes},restoreTabbableState:function(skipSelf,skipChildren){var idx,counter,node,i,len,dom=this.dom,counterAttr=Ext.Element.tabbableSavedCounterAttribute,savedAttr=Ext.Element.tabbableSavedValueAttribute,nodes=[];if(!dom)return this;for(skipChildren||(nodes=Ext.Array.from(dom.querySelectorAll("["+counterAttr+"]"))),skipSelf||nodes.unshift(dom),i=0,len=nodes.length;i<len;i++)(node=nodes[i]).hasAttribute(counterAttr)&&node.hasAttribute(savedAttr)&&(1<(counter=+node.getAttribute(counterAttr))?node.setAttribute(counterAttr,--counter):("none"===(idx=node.getAttribute(savedAttr))?node.removeAttribute("tabIndex"):node.setAttribute("tabIndex",idx),node.removeAttribute(savedAttr),node.removeAttribute(counterAttr)));return nodes}},deprecated:{"4.0":{methods:{pause:function(ms){return Ext.fx.Manager.setFxDefaults(this.id,{delay:ms}),this},scale:function(w,h,o){return this.animate(Ext.apply({},o,{width:w,height:h})),this},shift:function(config){return this.animate(config),this}}},4.2:{methods:{moveTo:function(x,y,animate){return this.setXY([x,y],animate)},setBounds:function(x,y,width,height,animate){return this.setBox({x:x,y:y,width:width,height:height},animate)},setLeftTop:function(left,top){var me=this,style=me.dom.style;return style.left=Element.addUnits(left),style.top=Element.addUnits(top),(me.shadow||me.shim)&&me.syncUnderlays(),me},setLocation:function(x,y,animate){return this.setXY([x,y],animate)}}},"5.0":{methods:{getAttributeNS:function(namespace,name){return this.getAttribute(name,namespace)},getCenterXY:function(){return this.getAlignToXY(DOC,"c-c")},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle("height"))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle("width"))||0},getStyleSize:function(){var s,w,h,d=this.dom;return d===DOC||d===DOC.body?{width:Element.getViewportWidth(),height:Element.getViewportHeight()}:((s=this.getStyle(["height","width"],!0)).width&&"auto"!==s.width&&(w=parseFloat(s.width)),s.height&&"auto"!==s.height&&(h=parseFloat(s.height)),{width:w||this.getWidth(!0),height:h||this.getHeight(!0)})},isBorderBox:function(){return!0},isDisplayed:function(){return!this.isStyle("display","none")},focusable:"isFocusable"}}}}}(),function(){var verticalStyleHooks90,verticalStyleHooks270,edges,k,edge,borderWidth,getBorderWidth,Element=Ext.dom.Element,proto=Element.prototype,useDocForId=!Ext.isIE8,DOC=document,view=DOC.defaultView,opacityRe=/alpha\(opacity=(.*)\)/i,trimRe=/^\s+|\s+$/g,styleHooks=proto.styleHooks,supports=Ext.supports;if(proto._init(Element),delete proto._init,Ext.plainTableCls=Ext.baseCSSPrefix+"table-plain",Ext.plainListCls=Ext.baseCSSPrefix+"list-plain",Ext.CompositeElementLite&&Ext.CompositeElementLite.importElementMethods(),!supports.Opacity&&Ext.isIE&&Ext.apply(styleHooks.opacity,{get:function(dom){var match,opacity,filter=dom.style.filter;return filter.match&&(match=filter.match(opacityRe))&&(opacity=parseFloat(match[1]),!isNaN(opacity))?opacity?opacity/100:0:1},set:function(dom,value){var style=dom.style,val=style.filter.replace(opacityRe,"").replace(trimRe,"");style.zoom=1,"number"==typeof value&&0<=value&&value<1?(value*=100,style.filter=val+(val.length?" ":"")+"alpha(opacity="+value+")"):style.filter=val}}),!supports.matchesSelector){var fragment,simpleSelectorRe=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,dashRe=/\-/g,cache={};proto.matcherCache=cache,proto.is=function(selector){if(!selector)return!0;var cls,match,testFn,root,isOrphan,is,tag,dom=this.dom;if(1!==dom.nodeType)return!1;if(!(testFn=Ext.isFunction(selector)?selector:cache[selector])){if(!(match=selector.match(simpleSelectorRe)))return(root=dom.parentNode)||(isOrphan=!0,root=fragment=fragment||DOC.createDocumentFragment(),fragment.appendChild(dom)),is=-1!==Ext.Array.indexOf(Ext.fly(root,"_is").query(selector),dom),isOrphan&&fragment.removeChild(dom),is;tag=match[1],cls=match[2],cache[selector]=testFn=cls?function(tag,cls){var classRe=new RegExp("(?:^|\\s+)"+cls.replace(dashRe,"\\-")+"(?:\\s+|$)");return tag&&"*"!==tag?(tag=tag.toUpperCase(),function(el){return el.tagName===tag&&classRe.test(el.className)}):function(el){return classRe.test(el.className)}}(tag,cls):function(tag){return tag=tag.toUpperCase(),function(el){return el.tagName===tag}}(tag)}return testFn(dom)}}if(view&&view.getComputedStyle||(proto.getStyle=function(property,inline){var domStyle,values,hook,out,style,i,dom=this.dom,multiple="string"!=typeof property,prop=property,props=prop,len=1,isInline=inline,styleHooks=this.styleHooks;if(multiple&&(values={},prop=props[0],i=0,!(len=props.length)))return values;if(!dom||dom.documentElement)return values||"";domStyle=dom.style,inline?style=domStyle:(style=dom.currentStyle)||(isInline=!0,style=domStyle);do{if((hook=styleHooks[prop])||(styleHooks[prop]=hook={name:Element.normalize(prop)}),out=hook.get?hook.get(dom,this,isInline,style):style[hook.name],!multiple)return out;values[prop]=out,prop=props[++i]}while(i<len);return values}),Ext.isIE8){for(getBorderWidth=function(dom,el,inline,style){return"none"===style[this.styleName]?"0px":style[this.name]},k=(edges=["Top","Right","Bottom","Left"]).length;k--;)borderWidth="border"+(edge=edges[k])+"Width",styleHooks["border-"+edge.toLowerCase()+"-width"]=styleHooks[borderWidth]={name:borderWidth,styleName:"border"+edge+"Style",get:getBorderWidth};var syncRepaintCls=Ext.baseCSSPrefix+"sync-repaint";proto.syncRepaint=function(){this.addCls(syncRepaintCls),this.getWidth(),this.removeCls(syncRepaintCls)}}Ext.isIE10m&&Ext.override(Element,{focus:function(defer,dom){var ex;if(dom=dom||this.dom,Number(defer))Ext.defer(this.focus,defer,this,[null,dom]);else{Ext.GlobalEvents.fireEvent("beforefocus",dom),!dom||"INPUT"!==dom.tagName&&"TEXTAREA"!==dom.tagname||(Ext.synchronouslyFocusing=document.activeElement);try{dom.focus()}catch(xcpt){ex=xcpt}Ext.synchronouslyFocusing&&document.activeElement!==dom&&!ex&&dom.focus(),Ext.synchronouslyFocusing=null}return this}}),Ext.apply(Ext,{enableGarbageCollector:!0,isBorderBox:!0,useShims:!1,getDetachedBody:function(){var detachedEl=Ext.detachedBodyEl;return detachedEl||(detachedEl=DOC.createElement("div"),Ext.detachedBodyEl=detachedEl=new Ext.dom.Fly(detachedEl),detachedEl.isDetachedBody=!0),detachedEl},getElementById:function(id){var detachedBodyEl,el=DOC.getElementById(id);return!el&&(detachedBodyEl=Ext.detachedBodyEl)&&(el=detachedBodyEl.dom.querySelector(Ext.makeIdSelector(id))),el},addBehaviors:function(o){if(Ext.isReady){var parts,b,s,cache={};for(b in o)(parts=b.split("@"))[1]&&(cache[s=parts[0]]||(cache[s]=Ext.fly(document).select(s,!0)),cache[s].on(parts[1],o[b]));cache=null}else Ext.onInternalReady(function(){Ext.addBehaviors(o)})}}),Ext.isIE9m?(Ext.getElementById=function(id){var detachedBodyEl,el=DOC.getElementById(id);return!el&&(detachedBodyEl=Ext.detachedBodyEl)&&(el=detachedBodyEl.dom.all[id]),el},proto.getById=function(id,asDom){var entry,el,dom=this.dom,ret=null;return dom&&(el=useDocForId&&DOC.getElementById(id)||dom.all[id])&&(ret=asDom?el:((entry=Ext.cache[id])&&(entry.skipGarbageCollection||!Ext.isGarbage(entry.dom)?ret=entry:entry.destroy()),ret||new Ext.Element(el))),ret}):DOC.querySelector||(Ext.getDetachedBody=Ext.getBody,Ext.getElementById=function(id){return DOC.getElementById(id)},proto.getById=function(id,asDom){var dom=DOC.getElementById(id);return asDom?dom:dom?Ext.get(dom):null}),!Ext.isIE||Ext.isIE9p&&9<=DOC.documentMode||(proto.getAttribute=function(name,ns){var type,d=this.dom;return ns?"undefined"!=(type=typeof d[ns+":"+name])&&"unknown"!=type&&d[ns+":"+name]||null:("for"===name&&(name="htmlFor"),d[name]||null)}),Ext.onInternalReady(function(){var colorStyles,i,name,camel,transparentRe=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,bodyCls=[],origSetWidth=proto.setWidth,origSetHeight=proto.setHeight,origSetSize=proto.setSize,pxRe=/^\d+(?:\.\d*)?px$/i;function fixTransparent(dom,el,inline,style){var value=style[this.name]||"";return transparentRe.test(value)?"transparent":value}if(supports.FixedTableWidthBug&&(styleHooks.width={name:"width",set:function(dom,value,el){var style=dom.style,needsFix=el._needsTableWidthFix,origDisplay=style.display;needsFix&&(style.display="none"),style.width=value,needsFix&&(dom.scrollWidth,style.display=origDisplay)}},proto.setWidth=function(width,animate){var dom=this.dom,style=dom.style,needsFix=this._needsTableWidthFix,origDisplay=style.display;return needsFix&&!animate&&(style.display="none"),origSetWidth.call(this,width,animate),needsFix&&!animate&&(dom.scrollWidth,style.display=origDisplay),this},proto.setSize=function(width,height,animate){var dom=this.dom,style=dom.style,needsFix=this._needsTableWidthFix,origDisplay=style.display;return needsFix&&!animate&&(style.display="none"),origSetSize.call(this,width,height,animate),needsFix&&!animate&&(dom.scrollWidth,style.display=origDisplay),this}),Ext.isIE8&&(styleHooks.height={name:"height",set:function(dom,value,el){var frameInfo,frameBodyStyle,component=el.component;component&&component._syncFrameHeight&&el===component.el&&(frameBodyStyle=component.frameBody.dom.style,pxRe.test(value)?(frameInfo=component.getFrameInfo())&&(frameBodyStyle.height=parseInt(value,10)-frameInfo.height+"px"):value&&"auto"!==value||(frameBodyStyle.height="")),dom.style.height=value}},proto.setHeight=function(height,animate){var frameInfo,frameBodyStyle,component=this.component;return component&&component._syncFrameHeight&&this===component.el&&(frameBodyStyle=component.frameBody.dom.style,height&&"auto"!==height?(frameInfo=component.getFrameInfo())&&(frameBodyStyle.height=height-frameInfo.height+"px"):frameBodyStyle.height=""),origSetHeight.call(this,height,animate)},proto.setSize=function(width,height,animate){var frameInfo,frameBodyStyle,component=this.component;return component&&component._syncFrameHeight&&this===component.el&&(frameBodyStyle=component.frameBody.dom.style,height&&"auto"!==height?(frameInfo=component.getFrameInfo())&&(frameBodyStyle.height=height-frameInfo.height+"px"):frameBodyStyle.height=""),origSetSize.call(this,width,height,animate)}),Ext.getDoc().on("selectstart",function(ev,dom){var selectableCls=Element.selectableCls,unselectableCls=Element.unselectableCls,tagName=dom&&dom.tagName;if("input"!==(tagName=tagName&&tagName.toLowerCase())&&"textarea"!==tagName)for(;dom&&1===dom.nodeType&&dom!==DOC.documentElement;){var el=Ext.fly(dom);if(el.hasCls(selectableCls))return;if(el.hasCls(unselectableCls))return void ev.stopEvent();dom=dom.parentNode}}),supports.RightMargin||(styleHooks.marginRight=styleHooks["margin-right"]={name:"marginRight",get:supports.DisplayChangeInputSelectionBug||supports.DisplayChangeTextAreaSelectionBug?function(dom,el,inline,style){var domStyle,cleaner,display,target,activeEl,tag,start,end,hasInputBug,hasTextAreaBug,result=style.marginRight;return"0px"!==result&&(domStyle=dom.style,target=dom,hasInputBug=supports.DisplayChangeInputSelectionBug,hasTextAreaBug=supports.DisplayChangeTextAreaSelectionBug,cleaner=(hasInputBug||hasTextAreaBug)&&(tag=(activeEl=Element.getActiveElement())&&activeEl.tagName,(hasTextAreaBug&&"TEXTAREA"===tag||hasInputBug&&"INPUT"===tag&&"text"===activeEl.type)&&Ext.fly(target).isAncestor(activeEl)&&(start=activeEl.selectionStart,end=activeEl.selectionEnd,Ext.isNumber(start)&&Ext.isNumber(end)))?function(activeEl,start,end){return function(){activeEl.selectionStart=start,activeEl.selectionEnd=end}}(activeEl,start,end):Ext.emptyFn,display=domStyle.display,domStyle.display="inline-block",result=(inline?style:dom.ownerDocument.defaultView.getComputedStyle(dom,"")).marginRight,domStyle.display=display,cleaner()),result}:function(dom,el,inline,style){var domStyle,display,result=style.marginRight;return"0px"!==result&&(display=(domStyle=dom.style).display,domStyle.display="inline-block",result=(inline?style:dom.ownerDocument.defaultView.getComputedStyle(dom,null)).marginRight,domStyle.display=display),result}}),!supports.TransparentColor)for(i=(colorStyles=["background-color","border-color","color","outline-color"]).length;i--;)name=colorStyles[i],camel=Element.normalize(name),styleHooks[name]=styleHooks[camel]={name:camel,get:fixTransparent};proto.verticalStyleHooks90=verticalStyleHooks90=Ext.Object.chain(styleHooks),proto.verticalStyleHooks270=verticalStyleHooks270=Ext.Object.chain(styleHooks),verticalStyleHooks90.width=styleHooks.height||{name:"height"},verticalStyleHooks90.height=styleHooks.width||{name:"width"},verticalStyleHooks90["margin-top"]={name:"marginLeft"},verticalStyleHooks90["margin-right"]={name:"marginTop"},verticalStyleHooks90["margin-bottom"]={name:"marginRight"},verticalStyleHooks90["margin-left"]={name:"marginBottom"},verticalStyleHooks90["padding-top"]={name:"paddingLeft"},verticalStyleHooks90["padding-right"]={name:"paddingTop"},verticalStyleHooks90["padding-bottom"]={name:"paddingRight"},verticalStyleHooks90["padding-left"]={name:"paddingBottom"},verticalStyleHooks90["border-top"]={name:"borderLeft"},verticalStyleHooks90["border-right"]={name:"borderTop"},verticalStyleHooks90["border-bottom"]={name:"borderRight"},verticalStyleHooks90["border-left"]={name:"borderBottom"},verticalStyleHooks270.width=styleHooks.height||{name:"height"},verticalStyleHooks270.height=styleHooks.width||{name:"width"},verticalStyleHooks270["margin-top"]={name:"marginRight"},verticalStyleHooks270["margin-right"]={name:"marginBottom"},verticalStyleHooks270["margin-bottom"]={name:"marginLeft"},verticalStyleHooks270["margin-left"]={name:"marginTop"},verticalStyleHooks270["padding-top"]={name:"paddingRight"},verticalStyleHooks270["padding-right"]={name:"paddingBottom"},verticalStyleHooks270["padding-bottom"]={name:"paddingLeft"},verticalStyleHooks270["padding-left"]={name:"paddingTop"},verticalStyleHooks270["border-top"]={name:"borderRight"},verticalStyleHooks270["border-right"]={name:"borderBottom"},verticalStyleHooks270["border-bottom"]={name:"borderLeft"},verticalStyleHooks270["border-left"]={name:"borderTop"},Ext.scopeCss||bodyCls.push(Ext.baseCSSPrefix+"body"),supports.Touch&&bodyCls.push(Ext.baseCSSPrefix+"touch"),Ext.isIE&&Ext.isIE9m&&(bodyCls.push(Ext.baseCSSPrefix+"ie",Ext.baseCSSPrefix+"ie9m"),bodyCls.push(Ext.baseCSSPrefix+"ie8p"),Ext.isIE8?bodyCls.push(Ext.baseCSSPrefix+"ie8"):bodyCls.push(Ext.baseCSSPrefix+"ie9",Ext.baseCSSPrefix+"ie9p"),Ext.isIE8m&&bodyCls.push(Ext.baseCSSPrefix+"ie8m")),Ext.isIE10&&bodyCls.push(Ext.baseCSSPrefix+"ie10"),Ext.isIE10p&&bodyCls.push(Ext.baseCSSPrefix+"ie10p"),Ext.isIE11&&bodyCls.push(Ext.baseCSSPrefix+"ie11"),Ext.isGecko&&bodyCls.push(Ext.baseCSSPrefix+"gecko"),Ext.isOpera&&bodyCls.push(Ext.baseCSSPrefix+"opera"),Ext.isOpera12m&&bodyCls.push(Ext.baseCSSPrefix+"opera12m"),Ext.isWebKit&&bodyCls.push(Ext.baseCSSPrefix+"webkit"),Ext.isSafari&&bodyCls.push(Ext.baseCSSPrefix+"safari"),Ext.isChrome&&bodyCls.push(Ext.baseCSSPrefix+"chrome"),Ext.isMac&&bodyCls.push(Ext.baseCSSPrefix+"mac"),Ext.isLinux&&bodyCls.push(Ext.baseCSSPrefix+"linux"),supports.CSS3BorderRadius||bodyCls.push(Ext.baseCSSPrefix+"nbr"),supports.CSS3LinearGradient||bodyCls.push(Ext.baseCSSPrefix+"nlg"),supports.Touch&&bodyCls.push(Ext.baseCSSPrefix+"touch"),Ext.getBody().addCls(bodyCls)},null,{priority:1500})}),Ext.define("Ext.GlobalEvents",{extend:Ext.mixin.Observable,alternateClassName:"Ext.globalEvents",observableType:"global",singleton:!0,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var me=this;me.callParent(),Ext.onInternalReady(function(){me.attachListeners()})},attachListeners:function(){Ext.get(window).on("resize",this.fireResize,this,{buffer:this.resizeBuffer}),Ext.getDoc().on("mousedown",this.fireMouseDown,this)},fireMouseDown:function(e){this.fireEvent("mousedown",e)},fireResize:function(){var me=this,Element=Ext.Element,w=Element.getViewportWidth(),h=Element.getViewportHeight();me.curHeight===h&&me.curWidth===w||(me.curHeight=h,me.curWidth=w,me.fireEvent("resize",w,h))}},function(GlobalEvents){Ext.on=function(){return GlobalEvents.addListener.apply(GlobalEvents,arguments)},Ext.un=function(){return GlobalEvents.removeListener.apply(GlobalEvents,arguments)}}),Ext.define("Ext.overrides.GlobalEvents",{override:"Ext.GlobalEvents",deprecated:{5:{methods:{addListener:function(ename,fn,scope,options,order,caller,eventOptions){var name,readyFn;if("ready"===ename)readyFn=fn;else if("string"!=typeof ename)for(name in ename)"ready"===name&&(readyFn=ename[name]);readyFn&&Ext.onReady(readyFn),this.callParent([ename,fn,scope,options,order,caller,eventOptions])}}}}}),Ext.USE_NATIVE_JSON=!1,Ext.JSON=new function(){var me=this,hasNative=window.JSON&&"[object JSON]"===JSON.toString(),useHasOwn=!!{}.hasOwnProperty,pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o,newline){return null==o?"null":Ext.isDate(o)?me.encodeDate(o):Ext.isString(o)?Ext.isMSDate(o)?me.encodeMSDate(o):me.encodeString(o):"number"==typeof o?isFinite(o)?String(o):"null":Ext.isBoolean(o)?String(o):o.toJSON?o.toJSON():Ext.isArray(o)?encodeArray(o,newline):Ext.isObject(o)?encodeObject(o,newline):"function"==typeof o?"null":"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\v":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(o){return'"'+o+'"'},encodeArrayPretty=function(o,newline){var i,len=o.length,cnewline=newline+"   ",sep=","+cnewline,a=["[",cnewline];for(i=0;i<len;i+=1)a.push(me.encodeValue(o[i],cnewline),sep);return a[a.length-1]=newline+"]",a.join("")},encodeObjectPretty=function(o,newline){var i,val,cnewline=newline+"   ",sep=","+cnewline,a=["{",cnewline];for(i in o)if(val=o[i],!useHasOwn||o.hasOwnProperty(i)){if("function"==typeof val||void 0===val)continue;a.push(me.encodeValue(i)+": "+me.encodeValue(val,cnewline),sep)}return a[a.length-1]=newline+"}",a.join("")},encodeArray=function(o,newline){if(newline)return encodeArrayPretty(o,newline);var i,a=["[",""],len=o.length;for(i=0;i<len;i+=1)a.push(me.encodeValue(o[i]),",");return a[a.length-1]="]",a.join("")},encodeObject=function(o,newline){if(newline)return encodeObjectPretty(o,newline);var i,val,a=["{",""];for(i in o)if(val=o[i],!useHasOwn||o.hasOwnProperty(i)){if("function"==typeof val||void 0===val)continue;a.push(me.encodeValue(i),":",me.encodeValue(val),",")}return a[a.length-1]="}",a.join("")};me.encodeString=encodeString,me.encodeValue=doEncode,me.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'},me.encode=function(o){return hasNative&&Ext.USE_NATIVE_JSON?JSON.stringify(o):me.encodeValue(o)},me.decode=function(json,safe){try{return hasNative&&Ext.USE_NATIVE_JSON?JSON.parse(json):doDecode(json)}catch(e){if(safe)return null;Ext.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+json})}},me.encodeMSDate=encodeMSDate,Ext.util||(Ext.util={}),Ext.util.JSON=me,Ext.encode=me.encode,Ext.decode=me.decode},Ext.define("Ext.mixin.Inheritable",{extend:Ext.Mixin,mixinConfig:{id:"inheritable"},getInherited:function(inner){var parent,inheritedStateInner,getInner,ownerLayout,me=this,inheritedState=inner&&me.inheritedStateInner||me.inheritedState,ownerCt=me.getRefOwner(),isContainer=me.isContainer;return inheritedState&&!inheritedState.invalid||(parent=me.getRefOwner(),ownerLayout=me.ownerLayout,ownerCt&&(getInner=!ownerLayout||ownerLayout===ownerCt.layout),me.inheritedState=inheritedState=Ext.Object.chain(parent?parent.getInherited(getInner):Ext.rootInheritedState),isContainer&&(me.inheritedStateInner=inheritedStateInner=Ext.Object.chain(inheritedState)),me.initInheritedState(inheritedState,inheritedStateInner),inheritedState=isContainer&&inner?me.inheritedStateInner:me.inheritedState),inheritedState},getInheritedConfig:function(property,skipThis){var old,ret,state=this.inheritedState;return state&&!state.invalid||(state=this.getInherited()),ret=state[property],skipThis&&state.hasOwnProperty(property)&&(old=ret,delete state[property],ret=state[property],state[property]=old),ret},resolveListenerScope:function(defaultScope,skipThis){var ret,me=this,hasSkipThis="boolean"==typeof skipThis,namedScope=Ext._namedScopes[defaultScope];return namedScope?namedScope.isController?ret=me.getInheritedConfig("controller",hasSkipThis?skipThis:!namedScope.isSelf):namedScope.isSelf?ret=me.getInheritedConfig("defaultListenerScope",hasSkipThis&&skipThis)||me:namedScope.isThis&&(ret=me):ret=me.getInheritedConfig("defaultListenerScope",!hasSkipThis||skipThis)||defaultScope||me,ret||null},resolveSatelliteListenerScope:function(satellite,defaultScope){var ret,namedScope=Ext._namedScopes[defaultScope];return namedScope?namedScope.isController?ret=this.getInheritedConfig("controller"):namedScope.isSelf?ret=this.getInheritedConfig("defaultListenerScope")||satellite:namedScope.isThis&&(ret=satellite):ret=this.getInheritedConfig("defaultListenerScope")||defaultScope||this,ret||null},lookupReferenceHolder:function(skipThis){return this.getInheritedConfig("referenceHolder",!1!==skipThis)||null},getRefOwner:function(){var me=this;return me.ownerCt||me.parent||me.$initParent||me.ownerCmp||me.floatParent},invalidateInheritedState:function(){var inheritedState=this.inheritedState;inheritedState&&(inheritedState.invalid=!0,delete this.inheritedState)},privates:{fixReference:function(){var refHolder;this.getReference()&&(refHolder=this.lookupReferenceHolder())&&refHolder.attachReference(this)},onInheritedAdd:function(parent,instanced){this.inheritedState&&instanced&&this.invalidateInheritedState(),this.getReference()&&Ext.ComponentManager.markReferencesDirty()},onInheritedRemove:function(destroying){var refHolder,me=this;me.getReference()&&(refHolder=me.lookupReferenceHolder())&&refHolder.clearReference(me),me.inheritedState&&!destroying&&me.invalidateInheritedState()}}},function(){Ext.rootInheritedState={}}),Ext.define("Ext.mixin.Bindable",{mixinId:"bindable",config:{bind:{$value:null,lazy:!0},controller:null,defaultListenerScope:!1,publishes:{$value:null,lazy:!0,merge:function(newValue,oldValue){return this.mergeSets(newValue,oldValue)}},reference:null,session:{$value:null,lazy:!0},twoWayBindable:{$value:null,lazy:!0,merge:function(newValue,oldValue){return this.mergeSets(newValue,oldValue)}},viewModel:{$value:null,lazy:!0}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(inheritedState){var me=this,reference=me.getReference(),controller=me.getController(),viewModel=me.getConfig("viewModel",!0),session=me.getConfig("session",!0),defaultListenerScope=me.getDefaultListenerScope();controller&&(inheritedState.controller=controller),defaultListenerScope?inheritedState.defaultListenerScope=me:controller&&(inheritedState.defaultListenerScope=controller),viewModel&&(viewModel.isViewModel||(viewModel=me),inheritedState.viewModel=viewModel),session&&(session.isSession||(session=me),inheritedState.session=session),reference&&(me.referenceKey=(inheritedState.referencePath||"")+reference,me.viewModelKey=(inheritedState.viewModelPath||"")+reference)},lookupController:function(skipThis){return this.getInheritedConfig("controller",skipThis)||null},lookupSession:function(skipThis){var ret=skipThis?null:this.getSession();return ret||(ret=this.getInheritedConfig("session",skipThis))&&!ret.isSession&&(ret=ret.getInherited().session=ret.getSession()),ret||null},lookupViewModel:function(skipThis){var ret=skipThis?null:this.getViewModel();return ret||(ret=this.getInheritedConfig("viewModel",skipThis))&&!ret.isViewModel&&(ret=ret.getInherited().viewModel=ret.getViewModel()),ret||null},publishState:function(property,value){var name,publishes,vm,path,me=this,state=me.publishedState,binds=me.getBind(),binding=binds&&property&&binds[property],count=0;if(!binding||binding.syncing||binding.isReadOnly()||(0!==binding.calls||null!=value&&value!==me.getInitialConfig()[property])&&binding.setValue(value),(publishes=me.getPublishes())&&(vm=me.lookupViewModel())&&(path=me.viewModelKey)){if(property&&state){if(!publishes[property])return;if(!(value&&value.constructor===Object||value instanceof Array)&&state[property]===value)return;path+=".",path+=property}else{for(name in state=state||(me.publishedState={}),publishes)++count,state[name]=name===property?value:me[name];if(!count)return;value=state}vm.set(path,value)}},privates:{addBindableUpdater:function(property){var updateName,cfg=this.self.$config.configs[property];cfg&&!this.hasOwnProperty(updateName=cfg.names.update)&&(this[updateName]=cfg.bindableUpdater||(cfg.root.bindableUpdater=this.makeBindableUpdater(cfg)))},applyBind:function(binds,currentBindings){if(!binds)return binds;var b,property,descriptor,me=this,viewModel=me.lookupViewModel(),twoWayable=me.getTwoWayBindable(),getBindTemplateScope=me._getBindTemplateScope;for(property in currentBindings&&"string"!=typeof currentBindings||(currentBindings={}),Ext.isString(binds)&&(b=binds,(binds={})[me.defaultBindProperty]=b),binds)descriptor=binds[property],(b=currentBindings[property])&&"string"!=typeof b&&(b.destroy(),b=null),descriptor&&((b=viewModel.bind(descriptor,me.onBindNotify,me))._config=Ext.Config.get(property),b.getTemplateScope=getBindTemplateScope),currentBindings[property]=b,twoWayable&&twoWayable[property]&&!b.isReadOnly()&&me.addBindableUpdater(property);return currentBindings},applyController:function(controller){return controller&&(controller=Ext.Factory.controller(controller)).setView(this),controller},applyPublishes:function(all){if(this.lookupViewModel())for(var property in all)this.addBindableUpdater(property);return all},applySession:function(session){if(!session)return null;if(!session.isSession){var parentSession=this.lookupSession(!0),config=!0===session?{}:session;session=parentSession?parentSession.spawn(config):new Ext.data.Session(config)}return session},applyViewModel:function(viewModel){var config;return viewModel?(viewModel.isViewModel||((config={parent:this.lookupViewModel(!0)}).session=this.getSession(),config.parent||(config.session=this.lookupSession()),viewModel&&(viewModel.constructor===Object?Ext.apply(config,viewModel):"string"==typeof viewModel&&(config.type=viewModel)),viewModel=Ext.Factory.viewModel(config)),viewModel):null},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},destroyBindable:function(){var me=this,viewModel=me.getConfig("viewModel",!0),session=me.getConfig("session",!0),controller=me.getController();viewModel&&viewModel.isViewModel&&(viewModel.destroy(),me.setViewModel(null)),session&&session.isSession&&(session.getAutoDestroy()&&session.destroy(),me.setSession(null)),controller&&(me.setController(null),controller.destroy())},initBindable:function(){this.initBindable=Ext.emptyFn,this.getBind(),this.getPublishes()},makeBindableUpdater:function(cfg){var updateName=cfg.names.update;return function(newValue,oldValue){var updater=this.self.prototype[updateName];updater&&updater.call(this,newValue,oldValue),this.publishState(cfg.name,newValue)}},isSyncing:function(name){var binding,bindings=this.getBind(),ret=!1;return bindings&&(binding=bindings[name])&&(ret=0<binding.syncing),ret},onBindNotify:function(value,oldValue,binding){binding.syncing=binding.syncing+1||1,this[binding._config.names.set](value),--binding.syncing},removeBindings:function(){var bindings,key,binding;if(!this.destroying&&(bindings=this.getBind())&&"string"!=typeof bindings)for(key in bindings)(binding=bindings[key]).destroy(),binding._config=binding.getTemplateScope=null;this.setBind(null)},updateSession:function(session){var state=this.getInherited();session?state.session=session:delete state.session},updateViewModel:function(viewModel){var state=this.getInherited(),controller=this.getController();viewModel?((state.viewModel=viewModel).setView(this),controller&&controller.initViewModel(viewModel)):delete state.viewModel}}}),Ext.define("Ext.mixin.ComponentDelegation",{extend:Ext.Mixin,mixinConfig:{id:"componentDelegation"},privates:{addDelegatedListener:function(eventName,fn,scope,options,order,caller,manager){var delegatedEvents,me=this;(order=order||options.order)&&(options&&options.priority||((options=options?Ext.Object.chain(options):{}).priority=me.$orderToPriority[order])),((delegatedEvents=me.$delegatedEvents||(me.$delegatedEvents={}))[eventName]||(delegatedEvents[eventName]=new Ext.util.Event(me,eventName))).addListener(fn,scope,options,caller,manager)&&me.$hasDelegatedListeners._incr_(eventName)},clearDelegatedListeners:function(){var eventName,event,listenerCount,delegatedEvents=this.$delegatedEvents;if(delegatedEvents)for(eventName in delegatedEvents)listenerCount=(event=delegatedEvents[eventName]).listeners.length,event.clearListeners(),this.$hasDelegatedListeners._decr_(eventName,listenerCount),delete delegatedEvents[eventName]},doFireDelegatedEvent:function(eventName,args){var owner,delegatedEvents,event,ret=!0;if(this.$hasDelegatedListeners[eventName])for(owner=this.getRefOwner();owner&&(!(delegatedEvents=owner.$delegatedEvents)||!(event=delegatedEvents[eventName])||!1!==(ret=event.fireDelegated(this,args)));)owner=owner.getRefOwner();return ret},removeDelegatedListener:function(eventName,fn,scope){var event,delegatedEvents=this.$delegatedEvents;delegatedEvents&&(event=delegatedEvents[eventName])&&event.removeListener(fn,scope)&&(this.$hasDelegatedListeners._decr_(eventName),0===event.listeners.length&&delete delegatedEvents[eventName])}},onClassMixedIn:function(T){function HasListeners(){}T.prototype.HasListeners=T.HasListeners=HasListeners,HasListeners.prototype=T.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners}},function(ComponentDelegation){function HasDelegatedListeners(){}(ComponentDelegation.HasDelegatedListeners=HasDelegatedListeners).prototype=ComponentDelegation.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners}),Ext.define("Ext.Widget",{extend:Ext.Evented,xtype:"widget",mixins:[Ext.mixin.Inheritable,Ext.mixin.Bindable,Ext.mixin.ComponentDelegation],isWidget:!0,element:{reference:"element"},observableType:"component",cachedConfig:{style:null},config:{userCls:null},eventedConfig:{width:null,height:null},template:[],constructor:function(config){var controller,me=this;me.initId(config),me.initElement(),me.mixins.observable.constructor.call(me,config),Ext.ComponentManager.register(me),(controller=me.getController())&&controller.init(me)},afterCachedConfig:function(){var renderTemplate,i,ln,elements,prototype=this.self.prototype,referenceList=this.referenceList,renderElement=this.renderElement;for(prototype.renderTemplate=renderTemplate=document.createDocumentFragment(),renderTemplate.appendChild(renderElement.clone(!0,!0)),i=0,ln=(elements=renderTemplate.querySelectorAll("[id]")).length;i<ln;i++)elements[i].removeAttribute("id");for(i=0,ln=referenceList.length;i<ln;i++)this[referenceList[i]].dom.removeAttribute("reference")},addCls:function(cls){this.el.addCls(cls)},applyWidth:function(width){return this.filterLengthValue(width)},applyHeight:function(height){return this.filterLengthValue(height)},clearListeners:function(){this.mixins.observable.clearListeners.call(this),this.mixins.componentDelegation.clearDelegatedListeners.call(this)},destroy:function(){var i,ln,reference,me=this,referenceList=me.referenceList;for(i=0,ln=referenceList.length;i<ln;i++)reference=referenceList[i],me.hasOwnProperty(reference)&&(me[reference].destroy(),me[reference]=null);me.destroyBindable(),me.callParent(),Ext.ComponentManager.unregister(me)},doFireEvent:function(eventName,args,bubbles){var ret=this.mixins.observable.doFireEvent.call(this,eventName,args,bubbles);return!1!==ret&&(ret=this.mixins.componentDelegation.doFireDelegatedEvent.call(this,eventName,args)),ret},getElementConfig:function(){var el=this.element;return"children"in el||(el=Ext.apply({children:this.getTemplate()},el)),el},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var renderTemplate,renderElement,element,referenceNodes,i,ln,referenceNode,reference,me=this,prototype=me.self.prototype,id=me.getId(),referenceList=me.referenceList=me.referenceList=[],cleanAttributes=!0;for(prototype.hasOwnProperty("renderTemplate")?renderElement=(renderTemplate=me.renderTemplate.cloneNode(!0)).firstChild:(cleanAttributes=!1,renderTemplate=document.createDocumentFragment(),renderElement=Ext.Element.create(me.processElementConfig.call(prototype),!0),renderTemplate.appendChild(renderElement)),i=0,ln=(referenceNodes=renderTemplate.querySelectorAll("[reference]")).length;i<ln;i++)reference=(referenceNode=referenceNodes[i]).getAttribute("reference"),cleanAttributes&&referenceNode.removeAttribute("reference"),"element"===reference?(referenceNode.id=id,(element=me.el=me.addElementReference(reference,referenceNode)).dom.setAttribute("data-componentid",id)):me.addElementReferenceOnDemand(reference,referenceNode),referenceList.push(reference);renderElement===element.dom?me.renderElement=element:me.addElementReferenceOnDemand("renderElement",renderElement)},is:function(selector){return Ext.ComponentQuery.is(this,selector)},isXType:function(xtype,shallow){return shallow?-1!==Ext.Array.indexOf(this.xtypes,xtype):!!this.xtypesMap[xtype]},removeCls:function(cls){this.el.removeCls(cls)},toggleCls:function(cls,state){this.element.toggleCls(cls,state)},resolveListenerScope:function(defaultScope,skipThis){return this.mixins.inheritable.resolveListenerScope.call(this,defaultScope,skipThis)},setSize:function(width,height){void 0!==width&&this.setWidth(width),void 0!==height&&this.setHeight(height)},applyStyle:function(style,oldStyle){return oldStyle&&style===oldStyle&&Ext.isObject(oldStyle)&&(style=Ext.apply({},style)),style},updateStyle:function(style){this.element.applyStyles(style)},updateWidth:function(width){this.element.setWidth(width)},updateHeight:function(height){this.element.setHeight(height)},onFocusEnter:Ext.emptyFn,onFocusLeave:Ext.emptyFn,isAncestor:function(){return!1},privates:{addElementReferenceOnDemand:function(name,domNode){this._elementListeners[name]?this.addElementReference(name,domNode):Ext.Object.defineProperty(this,name,{get:function(){return delete this[name],this.addElementReference(name,domNode)},configurable:!0})},addElementReference:function(name,domNode){var eventName,listener,me=this,referenceEl=me[name]=Ext.get(domNode),listeners=me._elementListeners[name];if(referenceEl.skipGarbageCollection=!0,referenceEl.component=me,listeners){for(eventName in listeners=Ext.clone(listeners))"object"==typeof(listener=listeners[eventName])&&(listener.scope=me);listeners.scope=me,referenceEl.on(listeners)}return referenceEl},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element),this.isDetached=!0},doAddListener:function(name,fn,scope,options,order,caller,manager){var me=this;options&&"element"in options&&me[options.element].doAddListener(name,fn,scope||me,options,order),options&&options.delegate?me.mixins.componentDelegation.addDelegatedListener.call(me,name,fn,scope,options,order,caller,manager):me.callParent([name,fn,scope,options,order,caller,manager])},doRemoveListener:function(eventName,fn,scope){this.mixins.observable.doRemoveListener.call(this,eventName,fn,scope),this.mixins.componentDelegation.removeDelegatedListener.call(this,eventName,fn,scope)},filterLengthValue:function(value){return"auto"===value||!value&&0!==value?null:value},getFocusEl:function(){return this.element},initElementListeners:function(elementConfig){var elementListeners,listeners,superListeners,ln,i,superElementListeners=this.self.superclass._elementListeners,reference=elementConfig.reference,children=elementConfig.children;if(elementListeners=this.hasOwnProperty("_elementListeners")?this._elementListeners:this._elementListeners=superElementListeners?Ext.Object.chain(superElementListeners):{},reference&&(listeners=elementConfig.listeners)&&(superElementListeners&&(superListeners=superElementListeners[reference])&&(listeners=Ext.Object.chain(superListeners),Ext.apply(listeners,elementConfig.listeners)),elementListeners[reference]=listeners,elementConfig.listeners=null),children)for(i=0,ln=children.length;i<ln;i++)this.initElementListeners(children[i])},initId:function(config){var defaultConfig=this.config,id=config&&config.id||defaultConfig&&defaultConfig.id;id?(this.setId(id),this.id=id):this.getId()},processElementConfig:function(){var elementConfig,superPrototype=this.self.superclass;return this.hasOwnProperty("_elementConfig")?elementConfig=this._elementConfig:(elementConfig=this._elementConfig=this.getElementConfig(),superPrototype.isWidget&&this.processElementConfig.call(superPrototype),this.initElementListeners(elementConfig)),elementConfig},reattachToBody:function(){this.isDetached=!1},updateUserCls:function(newCls,oldCls){this.element.replaceCls(oldCls,newCls)}}},function(Widget){var prototype=Widget.prototype;(prototype.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1,(prototype.$eventOptions=Ext.Object.chain(prototype.$eventOptions)).delegate=1}),Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",$configStrict:!1,isComponent:!0,liquidLayout:!0,rendered:!0,rendering:!0,config:{renderTo:null},cachedConfig:{baseCls:Ext.baseCSSPrefix+"widget"},constructor:function(config){var renderTo;this.callParent([config]),this.getComponentLayout(),(renderTo=this.getRenderTo())&&this.render(renderTo)},addClsWithUI:function(cls){this.el.addCls(cls)},afterComponentLayout:Ext.emptyFn,updateLayout:function(){var owner=this.getRefOwner();owner&&owner.updateLayout()},destroy:function(){var ownerCt=this.ownerCt;ownerCt&&ownerCt.remove&&ownerCt.remove(this,!1),this.callParent()},finishRender:function(){this.rendering=!1,this.initBindable()},getAnimationProps:function(){return{}},getComponentLayout:function(){var layout=this.componentLayout;return layout||(layout=this.componentLayout=new Ext.layout.component.Auto).setOwner(this),layout},getEl:function(){return this.element},getTdCls:function(){return Ext.baseCSSPrefix+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(container,pos,instanced){this.inheritedState;this.ownerCt=container,this.onInheritedAdd(this,instanced)},onRemoved:function(destroying){destroying||this.removeBindings(),this.onInheritedRemove(destroying),this.ownerCt=this.ownerLayout=null},parseBox:function(box){return Ext.Element.parseBox(box)},removeClsWithUI:function(cls){this.el.removeCls(cls)},render:function(container,position){var nextSibling,element=this.element,proto=Ext.Component.prototype;this.ownerCt&&!this.floating||(Ext.scopeCss&&element.addCls(proto.rootCls),element.addCls(proto.borderBoxCls)),position&&(nextSibling=container.childNodes[position])?Ext.fly(container).insertBefore(element,nextSibling):Ext.fly(container).appendChild(element)},setPosition:function(x,y){this.el.setLocalXY(x,y)},up:function(){return Ext.Component.prototype.up.apply(this,arguments)},isAncestor:function(){return Ext.Component.prototype.isAncestor.apply(this,arguments)},onFocusEnter:function(){return Ext.Component.prototype.onFocusEnter.apply(this,arguments)},onFocusLeave:function(){return Ext.Component.prototype.onFocusLeave.apply(this,arguments)},isLayoutChild:function(candidate){var ownerCt=this.ownerCt;return!!ownerCt&&(ownerCt===candidate||ownerCt.isLayoutChild(candidate))}},function(Cls){var prototype=Cls.prototype;Ext.isIE9m&&(prototype.addElementReferenceOnDemand=prototype.addElementReference)}),Ext.define("Ext.ProgressBase",{mixinId:"progressbase",config:{value:0,textTpl:null},applyTextTpl:function(textTpl){return textTpl.isTemplate||(textTpl=new Ext.XTemplate(textTpl)),textTpl},applyValue:function(value){return value||0}}),Ext.define("Ext.util.Format",function(){var me,fns;return{singleton:!0,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",percentSign:"%",currencyAtEnd:!1,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){me=this},undef:function(value){return void 0!==value?value:""},defaultValue:function(value,defaultValue){return void 0!==value&&""!==value?value:defaultValue},substr:"b"!="ab".substr(-1)?function(value,start,length){var str=String(value);return start<0?str.substr(Math.max(str.length+start,0),length):str.substr(start,length)}:function(value,start,length){return String(value).substr(start,length)},lowercase:function(value){return String(value).toLowerCase()},uppercase:function(value){return String(value).toUpperCase()},usMoney:function(v){return me.currency(v,"$",2)},currency:function(v,currencySign,decimals,end){var negativeSign="",format=",0",i=0;for((v=+v)<0&&(v=-v,negativeSign="-"),format+=0<(decimals=Ext.isDefined(decimals)?decimals:me.currencyPrecision)?".":"";i<decimals;i++)format+="0";return v=me.number(v,format),!0===(end||me.currencyAtEnd)?Ext.String.format("{0}{1}{2}",negativeSign,v,currencySign||me.currencySign):Ext.String.format("{0}{1}{2}",negativeSign,currencySign||me.currencySign,v)},date:function(v,format){return v?(Ext.isDate(v)||(v=new Date(Date.parse(v))),Ext.Date.dateFormat(v,format||Ext.Date.defaultFormat)):""},dateRenderer:function(format){return function(v){return me.date(v,format)}},hex:function(value,digits){var s=parseInt(value||0,10).toString(16);if(digits)for(digits<0&&(digits=-digits,s.length>digits&&(s=s.substring(s.length-digits)));s.length<digits;)s="0"+s;return s},or:function(value,orValue){return value||orValue},pick:function(value,firstValue,secondValue){if(Ext.isNumber(value)){var ret=arguments[value+1];if(ret)return ret}return value?secondValue:firstValue},stripTags:function(v){return v?String(v).replace(me.stripTagsRe,""):v},stripScripts:function(v){return v?String(v).replace(me.stripScriptsRe,""):v},fileSize:function(size){return size<1024?1===size?"1 byte":size+" bytes":size<1048576?Math.round(10*size/1024)/10+" KB":size<1073741824?Math.round(10*size/1048576)/10+" MB":Math.round(10*size/1073741824)/10+" GB"},math:(fns={},function(v,a){return fns[a]||(fns[a]=Ext.functionFactory("v","return v "+a+";")),fns[a](v)}),round:function(value,precision){var result=Number(value);return"number"==typeof precision?(precision=Math.pow(10,precision),result=Math.round(value*precision)/precision):void 0===precision&&(result=Math.round(result)),result},number:function(v,formatString){if(!formatString)return v;if(isNaN(v))return"";var formatFn=me.formatFns[formatString];if(!formatFn){var hasComma,splitFormat,extraChars,trimTrailingZeroes,code,originalFormatString=formatString,comma=me.thousandSeparator,decimalSeparator=me.decimalSeparator,precision=0,trimPart="";splitFormat="/i"===formatString.substr(formatString.length-2)?(me.I18NFormatCleanRe&&me.lastDecimalSeparator===decimalSeparator||(me.I18NFormatCleanRe=new RegExp("[^\\d\\"+decimalSeparator+"#]","g"),me.lastDecimalSeparator=decimalSeparator),hasComma=-1!==(formatString=formatString.substr(0,formatString.length-2)).indexOf(comma),formatString.replace(me.I18NFormatCleanRe,"").split(decimalSeparator)):(hasComma=-1!==formatString.indexOf(","),formatString.replace(me.formatCleanRe,"").split(".")),extraChars=formatString.replace(me.formatPattern,""),2<splitFormat.length||2===splitFormat.length&&(precision=splitFormat[1].length,(trimTrailingZeroes=splitFormat[1].match(me.hashRe))&&(trimPart='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+trimTrailingZeroes[0].length+'}$")')),code=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(hasComma?",thousandSeparator,thousands=[],j,n,i":"")+(extraChars?',formatString="'+formatString+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+precision+");",trimPart,";"],hasComma?(precision&&(code[code.length]='parts=fnum.split(".");',code[code.length]="fnum=parts[0];"),code[code.length]="if(absVal>=1000) {",code[code.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}",precision&&(code[code.length]="fnum += utilFormat.decimalSeparator+parts[1];")):precision&&(code[code.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'),code[code.length]='if(neg&&fnum!=="'+(precision?"0."+Ext.String.repeat("0",precision):"0")+'") { fnum="-"+fnum; }',trimTrailingZeroes&&(code[code.length]='fnum=fnum.replace(trailingZeroes,"");'),code[code.length]="return ",code[code.length]=extraChars?"formatString.replace(formatPattern, fnum);":"fnum;",code[code.length]="};",formatFn=me.formatFns[originalFormatString]=Ext.functionFactory("Ext",code.join(""))(Ext)}return formatFn(v)},numberRenderer:function(format){return function(v){return me.number(v,format)}},percent:function(value,formatString){return me.number(100*value,formatString||"0")+me.percentSign},attributes:function(attributes){if("object"==typeof attributes){var name,result=[];for(name in attributes)attributes.hasOwnProperty(name)&&result.push(name,'="',"style"===name?Ext.DomHelper.generateStyles(attributes[name],null,!0):Ext.htmlEncode(attributes[name]),'" ');attributes=result.join("")}return attributes||""},plural:function(v,s,p){return v+" "+(1===v?s:p||s+"s")},nl2br:function(v){return Ext.isEmpty(v)?"":v.replace(me.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(box){if("number"==typeof(box=box||0))return{top:box,right:box,bottom:box,left:box};var parts=box.split(" "),ln=parts.length;return 1===ln?parts[1]=parts[2]=parts[3]=parts[0]:2===ln?(parts[2]=parts[0],parts[3]=parts[1]):3===ln&&(parts[3]=parts[1]),{top:parseInt(parts[0],10)||0,right:parseInt(parts[1],10)||0,bottom:parseInt(parts[2],10)||0,left:parseInt(parts[3],10)||0}}}}),Ext.define("Ext.Template",{inheritableStatics:{from:function(el,config){return new this((el=Ext.getDom(el)).value||el.innerHTML,config||"")}},useEval:Ext.isGecko,constructor:function(html){var i,value,args=arguments,buffer=[],length=args.length;if(this.initialConfig={},1===length&&Ext.isArray(html)&&(length=(args=html).length),1<length)for(i=0;i<length;i++)"object"==typeof(value=args[i])?(Ext.apply(this.initialConfig,value),Ext.apply(this,value)):buffer.push(value);else buffer.push(html);this.html=buffer.join("")},isTemplate:!0,disableFormats:!1,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(values){var me=this;return me.compiled?(me.fn||me.compile(),me.fn(values).join("")):me.evaluate(values)},evaluate:function(values){var useFormat=!this.disableFormats,fm=Ext.util.Format,tpl=this;return this.html.replace(this.tokenRe,function(match,index,name,formatFn,args){return null!=name&&""!==name||(name=index),formatFn&&useFormat?(args=args?[values[name]].concat(Ext.functionFactory("return ["+args+"];")()):[values[name]],"this."===formatFn.substr(0,5)?tpl[formatFn.substr(5)].apply(tpl,args):fm[formatFn]?fm[formatFn].apply(fm,args):match):void 0!==values[name]?values[name]:""})},applyOut:function(values,out){var me=this;return me.compiled?(me.fn||me.compile(),out.push.apply(out,me.fn(values))):out.push(me.apply(values)),out},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(html,compile){return this.html=html,this.compiled=!!compile,this.fn=null,this},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var code,me=this;return code=me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.tokenRe,me.regexReplaceFn.bind(me)),code=(!0!==this.disableFormats?"var fm=Ext.util.Format;":"")+(me.useEval?"$=":"return")+" function(v){return ['"+code+"'];};",me.fn=me.useEval?me.evalCompiled(code):new Function("Ext",code)(Ext),me.compiled=!0,me},evalCompiled:function($){return eval($),$},regexReplaceFn:function(match,index,name,formatFn,args){if(null==index||""===index?index='"'+name+'"':this.stringFormat&&(index=parseInt(index)+1),formatFn&&!0!==this.disableFormats){if(args=args?","+args:"","this."===formatFn.substr(0,5))formatFn+="(";else{if(!Ext.util.Format[formatFn])return match;formatFn="fm."+formatFn+"("}return"',"+formatFn+"v["+index+"]"+args+"),'"}return"',v["+index+"] == undefined ? '' : v["+index+"],'"},insertFirst:function(el,values,returnElement){return this.doInsert("afterBegin",el,values,returnElement)},insertBefore:function(el,values,returnElement){return this.doInsert("beforeBegin",el,values,returnElement)},insertAfter:function(el,values,returnElement){return this.doInsert("afterEnd",el,values,returnElement)},append:function(el,values,returnElement){return this.doInsert("beforeEnd",el,values,returnElement)},doInsert:function(where,el,values,returnElement){var newNode=Ext.DomHelper.insertHtml(where,Ext.getDom(el),this.apply(values));return returnElement?Ext.get(newNode):newNode},overwrite:function(el,values,returnElement){var newNode=Ext.DomHelper.overwrite(Ext.getDom(el),this.apply(values));return returnElement?Ext.get(newNode):newNode}},function(Template){var formatRe=/\{\d+\}/,formatTplConfig={useFormat:!1,compiled:!0,stringFormat:!0},formatFns={};Ext.String.format=Ext.util.Format.format=function(format){return(formatFns[format]||(formatFns[format]=function(format){return formatRe.test(format)?(format=new Template(format,formatTplConfig),function(){return format.apply(arguments)}):function(){return format}}(format))).apply(this,arguments)},Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}}),Ext.define("Ext.util.XTemplateParser",{constructor:function(config){Ext.apply(this,config)},doTpl:Ext.emptyFn,parse:function(str){var index,stack,s,m,t,prev,frame,subMatch,begin,end,actions,prop,expectTplNext,me=this,len=str.length,aliases={elseif:"elif"},topRe=me.topRe,actionsRe=me.actionsRe;for(me.level=0,me.stack=stack=[],index=0;index<len;index=end){if(topRe.lastIndex=index,!(m=topRe.exec(str))){me.doText(str.substring(index,len));break}if(begin=m.index,end=topRe.lastIndex,index<begin&&(s=str.substring(index,begin),expectTplNext&&""===Ext.String.trim(s)||me.doText(s)),expectTplNext=!1,m[1])end=str.indexOf("%}",begin+2),me.doEval(str.substring(begin+2,end)),end+=2;else if(m[2])end=str.indexOf("]}",begin+2),me.doExpr(str.substring(begin+2,end)),end+=2;else if(m[3])me.doTag(m[3]);else if(m[4]){for(actions=null;null!==(subMatch=actionsRe.exec(m[4]));)(s=subMatch[2]||subMatch[3])&&(s=Ext.String.htmlDecode(s),"string"==typeof(prev=(actions=actions||{})[t=aliases[t=subMatch[1]]||t])?actions[t]=[prev,s]:prev?actions[t].push(s):actions[t]=s);actions?actions.if?(me.doIf(actions.if,actions),stack.push({type:"if"})):actions.switch?(me.doSwitch(actions.switch,actions),stack.push({type:"switch"}),expectTplNext=!0):actions.case?me.doCase(actions.case,actions):actions.elif?me.doElseIf(actions.elif,actions):actions.for?(++me.level,(prop=me.propRe.exec(m[4]))&&(actions.propName=prop[1]||prop[2]),me.doFor(actions.for,actions),stack.push({type:"for",actions:actions})):actions.foreach?(++me.level,(prop=me.propRe.exec(m[4]))&&(actions.propName=prop[1]||prop[2]),me.doForEach(actions.foreach,actions),stack.push({type:"foreach",actions:actions})):actions.exec&&(me.doExec(actions.exec,actions),stack.push({type:"exec",actions:actions})):me.elseRe.test(m[4])?me.doElse():me.defaultRe.test(m[4])?me.doDefault():(me.doTpl(),stack.push({type:"tpl"}))}else 5===m[0].length?stack.push({type:"tpl"}):(frame=stack.pop(),me.doEnd(frame.type,frame.actions),"for"!=frame.type&&"foreach"!=frame.type||--me.level)}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/}),Ext.define("Ext.util.XTemplateCompiler",{extend:Ext.util.XTemplateParser,useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:!0,propNameRe:/^[\w\d\$]*$/,compile:function(tpl){var code=this.generate(tpl);return this.useEval?this.evalTpl(code):new Function("Ext",code)(Ext)},generate:function(tpl){var code,me=this,definitions="var fm=Ext.util.Format,ts=Object.prototype.toString;";return me.maxLevel=0,me.body=["var c0=values, a0="+me.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"],me.definitions?"string"==typeof me.definitions?me.definitions=[me.definitions,definitions]:me.definitions.push(definitions):me.definitions=[definitions],me.switches=[],me.parse(tpl),me.definitions.push((me.useEval?"$=":"return")+" function ("+me.fnArgs+") {",me.body.join(""),"}"),code=me.definitions.join("\n"),me.definitions.length=me.body.length=me.switches.length=0,delete me.definitions,delete me.body,delete me.switches,code},doText:function(text){var out=this.body;text=text.replace(this.aposRe,"\\'").replace(this.newLineRe,"\\n"),this.useIndex?out.push("out[out.length]='",text,"'\n"):out.push("out.push('",text,"')\n")},doExpr:function(expr){var out=this.body;out.push("if ((v="+expr+") != null) out"),this.useIndex?out.push("[out.length]=v+''\n"):out.push(".push(v+'')\n")},doTag:function(tag){var expr=this.parseTag(tag);expr?this.doExpr(expr):this.doText("{"+tag+"}")},doElse:function(){this.body.push("} else {\n")},doEval:function(text){this.body.push(text,"\n")},doIf:function(action,actions){var me=this;"."===action?me.body.push("if (values) {\n"):me.propNameRe.test(action)?me.body.push("if (",me.parseTag(action),") {\n"):me.body.push("if (",me.addFn(action),me.callFn,") {\n"),actions.exec&&me.doExec(actions.exec)},doElseIf:function(action,actions){var me=this;"."===action?me.body.push("else if (values) {\n"):me.propNameRe.test(action)?me.body.push("} else if (",me.parseTag(action),") {\n"):me.body.push("} else if (",me.addFn(action),me.callFn,") {\n"),actions.exec&&me.doExec(actions.exec)},doSwitch:function(action){var key,me=this;"."===action||"#"===action?(key="."===action?"values":"xindex",me.body.push("switch (",key,") {\n")):me.propNameRe.test(action)?me.body.push("switch (",me.parseTag(action),") {\n"):me.body.push("switch (",me.addFn(action),me.callFn,") {\n"),me.switches.push(0)},doCase:function(action){var match,i,me=this,cases=Ext.isArray(action)?action:[action],n=me.switches.length-1;for(me.switches[n]?me.body.push("break;\n"):me.switches[n]++,i=0,n=cases.length;i<n;++i)match=me.intRe.exec(cases[i]),cases[i]=match?match[1]:"'"+cases[i].replace(me.aposRe,"\\'")+"'";me.body.push("case ",cases.join(": case "),":\n")},doDefault:function(){var me=this,n=me.switches.length-1;me.switches[n]?me.body.push("break;\n"):me.switches[n]++,me.body.push("default:\n")},doEnd:function(type,actions){var me=this,L=me.level-1;"for"==type||"foreach"==type?(actions.exec&&me.doExec(actions.exec),me.body.push("}\n"),me.body.push("parent=p",L,";values=r",1+L,";xcount=n"+L+";xindex=i",L,"+1;xkey=k",L,";\n")):"if"!=type&&"switch"!=type||me.body.push("}\n")},doFor:function(action,actions){var s,parentAssignment,me=this,L=me.level,up=L-1;s="."===action?"values":me.propNameRe.test(action)?me.parseTag(action):me.addFn(action)+me.callFn,me.maxLevel<L&&(me.maxLevel=L,me.body.push("var ")),parentAssignment="."==action?"c"+L:"a"+up+"?c"+up+"[i"+up+"]:c"+up,me.body.push("i",L,"=0,n",L,"=0,c",L,"=",s,",a",L,"=",me.createArrayTest(L),",r",L,"=values,p",L,",k",L,";\n","p",L,"=parent=",parentAssignment,"\n","if (c",L,"){if(a",L,"){n",L,"=c",L,".length;}else if (c",L,".isMixedCollection){c",L,"=c",L,".items;n",L,"=c",L,".length;}else if(c",L,".isStore){c",L,"=c",L,".data.items;n",L,"=c",L,".length;}else{c",L,"=[c",L,"];n",L,"=1;}}\n","for (xcount=n",L,";i",L,"<n"+L+";++i",L,"){\n","values=c",L,"[i",L,"]"),actions.propName&&me.body.push(".",actions.propName),me.body.push("\n","xindex=i",L,"+1\n"),actions.between&&me.body.push('if(xindex>1){ out.push("',actions.between,'"); } \n')},doForEach:function(action,actions){var s,parentAssignment,me=this,L=me.level,up=L-1;s="."===action?"values":me.propNameRe.test(action)?me.parseTag(action):me.addFn(action)+me.callFn,me.maxLevel<L&&(me.maxLevel=L,me.body.push("var ")),parentAssignment="."==action?"c"+L:"a"+up+"?c"+up+"[i"+up+"]:c"+up,me.body.push("i",L,"=-1,n",L,"=0,c",L,"=",s,",a",L,"=",me.createArrayTest(L),",r",L,"=values,p",L,",k",L,";\n","p",L,"=parent=",parentAssignment,"\n","for(k",L," in c",L,"){\n","xindex=++i",L,"+1;\n","xkey=k",L,";\n","values=c",L,"[k",L,"];"),actions.propName&&me.body.push(".",actions.propName),actions.between&&me.body.push('if(xindex>1){ out.push("',actions.between,'"); } \n')},createArrayTest:"isArray"in Array?function(L){return"Array.isArray(c"+L+")"}:function(L){return"ts.call(c"+L+')==="[object Array]"'},doExec:function(action,actions){var me=this,name="f"+me.definitions.length,guards=me.guards[me.strict?0:1];me.definitions.push("function "+name+"("+me.fnArgs+") {",guards.doTry," var $v = values; with($v) {","  "+action," }",guards.doCatch,"}"),me.body.push(name+me.callFn+"\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:" } catch(e) {\n}"}],addFn:function(body){var me=this,name="f"+me.definitions.length,guards=me.guards[me.strict?0:1];return"."===body?me.definitions.push("function "+name+"("+me.fnArgs+") {"," return values","}"):".."===body?me.definitions.push("function "+name+"("+me.fnArgs+") {"," return parent","}"):me.definitions.push("function "+name+"("+me.fnArgs+") {",guards.doTry," var $v = values; with($v) {","  return("+body+")"," }",guards.doCatch,"}"),name},parseTag:function(tag){var name,format,args,math,v,me=this,m=me.tagRe.exec(tag);return m?(name=m[1],format=m[2],args=m[3],math=m[4],v="."==name?(me.validTypes||(me.definitions.push("var validTypes={string:1,number:1,boolean:1};"),me.validTypes=!0),'validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'):"#"==name?"xindex":"$"==name?"xkey":"parent."==name.substr(0,7)?name:isNaN(name)&&-1==name.indexOf("-")&&-1!=name.indexOf(".")?"values."+name:"values['"+name+"']",math&&(v="("+v+math+")"),format&&me.useFormat?(args=args?","+args:"","this."!=format.substr(0,5)?format="fm."+format+"(":format+="(",format+v+args+")"):v):null},evalTpl:function($){return eval($),$},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},function(){var proto=this.prototype;proto.fnArgs="out,values,parent,xindex,xcount,xkey",proto.callFn=".call(this,"+proto.fnArgs+")"}),Ext.define("Ext.XTemplate",{extend:Ext.Template,isXTemplate:!0,emptyObj:{},fn:null,strict:!1,apply:function(values,parent,xindex,xcount){return this.applyOut(values,[],parent,xindex,xcount).join("")},applyOut:function(values,out,parent,xindex,xcount){var compiler,me=this;if(me.fn||(compiler=new Ext.util.XTemplateCompiler({useFormat:!0!==me.disableFormats,definitions:me.definitions,strict:me.strict}),me.fn=compiler.compile(me.html)),xindex=xindex||1,xcount=xcount||1,me.strict)me.fn(out,values,parent||me.emptyObj,xindex,xcount);else try{me.fn(out,values,parent||me.emptyObj,xindex,xcount)}catch(e){}return out},compile:function(){return this},statics:{getTpl:function(instance,name){var owner,tpl=instance[name];if(tpl&&!tpl.isTemplate){if(tpl=Ext.ClassManager.dynInstantiate("Ext.XTemplate",tpl),instance.hasOwnProperty(name))owner=instance;else for(owner=instance.self.prototype;owner&&!owner.hasOwnProperty(name);owner=owner.superclass);(owner[name]=tpl).owner=owner}return tpl||null}}}),Ext.define("Ext.util.ProtoElement",function(){var splitWords=Ext.String.splitWords,toMap=Ext.Array.toMap;return{isProtoEl:!0,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:!1,constructor:function(config){var cls,style,me=this;config&&(Ext.apply(me,config),cls=me.cls,style=me.style,delete me.cls),me.classList=cls?splitWords(cls):[],me.classMap=cls?toMap(me.classList):{},style&&("string"==typeof style?me.style=Ext.Element.parseStyles(style):Ext.isFunction(style)?(me.styleFn=style,delete me.style):me.style=Ext.apply({},style))},flush:function(){this.flushClassList=[],this.removedClasses={},delete this.style,delete this.unselectableAttr},addCls:function(cls){if(!cls)return this;for(var c,me=this,add="string"==typeof cls?splitWords(cls):cls,length=add.length,list=me.classList,map=me.classMap,flushList=me.flushClassList,i=0;i<length;++i)map[c=add[i]]||(map[c]=!0,list.push(c),flushList&&(flushList.push(c),delete me.removedClasses[c]));return me},hasCls:function(cls){return cls in this.classMap},removeCls:function(cls){var i,c,me=this,list=me.classList,newList=me.classList=[],remove=toMap(splitWords(cls)),length=list.length,map=me.classMap,removedClasses=me.removedClasses;for(i=0;i<length;++i)remove[c=list[i]]?(removedClasses&&map[c]&&(removedClasses[c]=!0,Ext.Array.remove(me.flushClassList,c)),delete map[c]):newList.push(c);return me},setStyle:function(prop,value){var style=this.style||(this.style={});return"string"==typeof prop?1===arguments.length?this.setStyle(Ext.Element.parseStyles(prop)):style[prop]=value:Ext.apply(style,prop),this},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls),Ext.isOpera&&(this.unselectableAttr=!0)},writeTo:function(to){var style,me=this,classList=me.flushClassList||me.classList,removedClasses=me.removedClasses;return me.styleFn?(style=Ext.apply({},me.styleFn()),Ext.apply(style,me.style)):style=me.style,to[me.clsProp]=classList.join(" "),style&&(to[me.styleProp]=me.styleIsText?Ext.DomHelper.generateStyles(style,null,!0):style),removedClasses&&(removedClasses=Ext.Object.getKeys(removedClasses)).length&&(to[me.removedProp]=removedClasses.join(" ")),me.unselectableAttr&&(to.unselectable="on"),to}}}),Ext.define("Ext.dom.CompositeElement",{alternateClassName:"Ext.CompositeElement",extend:Ext.dom.CompositeElementLite,isLite:!1,getElement:function(el){return el},transformElement:function(el){return Ext.get(el)}}),Ext.define("Ext.scroll.Scroller",{extend:Ext.Evented,alias:"scroller.scroller",mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:"dom"},isScroller:!0,_spacerCls:Ext.baseCSSPrefix+"domscroller-spacer",config:{direction:void 0,directionLock:!1,disabled:null,element:void 0,indicators:null,maxPosition:{x:0,y:0},maxUserPosition:{x:0,y:0},minPosition:{x:0,y:0},minUserPosition:{x:0,y:0},momentumEasing:null,size:null,slotSnapSize:{x:0,y:0},x:!0,y:!0,spacerXY:null},statics:{create:function(config){return Ext.Factory.scroller(config,Ext.supports.Touch?"touch":"dom")}},constructor:function(config){var me=this;me.position={x:0,y:0},me.callParent([config]),me.onDomScrollEnd=Ext.Function.createBuffered(me.onDomScrollEnd,100,me)},destroy:function(){var me=this;me.setX(Ext.emptyString),me.setY(Ext.emptyString),me.setElement(null),me.onDomScrollEnd=me._partners=me.component=null,me.callParent()},addPartner:function(partner,axis){var partners=this._partners||(this._partners={}),otherPartners=partner._partners||(partner._partners={});partners[partner.getId()]={scroller:partner,axis:axis},otherPartners[this.getId()]={scroller:this,axis:axis}},applyElement:function(element,oldElement){var el,eventSource;if(oldElement&&this.scrollListener.destroy(),element)return eventSource=(el=element.isElement?element:Ext.get(element)).dom===document.body?(el=Ext.get(document.scrollingElement||(Ext.isWebKit?document.body:document.documentElement)),Ext.get(Ext.isIE9m?window:document)):el,this.scrollListener=eventSource.on({scroll:this.onDomScroll,scope:this,destroyable:!0}),el},getClientSize:function(){var dom=this.getElement().dom;return{x:dom.clientWidth,y:dom.clientHeight}},getScrollbarSize:function(){var element,dom,x,y,hasXScroll,hasYScroll,scrollbarSize,width=0,height=0;return!this.isDomScroller&&1!==Ext.supports.touchScroll||!(element=this.getElement())||element.destroyed||(x=this.getX(),y=this.getY(),dom=element.dom,(x||y)&&(scrollbarSize=Ext.getScrollbarSize()),"scroll"===x?hasXScroll=!0:x&&(hasXScroll=dom.scrollWidth>dom.clientWidth),"scroll"===y?hasYScroll=!0:y&&(hasYScroll=dom.scrollHeight>dom.clientHeight),hasXScroll&&(height=scrollbarSize.height),hasYScroll&&(width=scrollbarSize.width)),{width:width,height:height}},getPosition:function(){return this.position},updateDirectionLock:Ext.emptyFn,updateDisabled:Ext.emptyFn,updateIndicators:Ext.emptyFn,updateMaxPosition:Ext.emptyFn,updateMaxUserPosition:Ext.emptyFn,updateMinPosition:Ext.emptyFn,updateMinUserPosition:Ext.emptyFn,updateMomenumEasing:Ext.emptyFn,updateX:Ext.emptyFn,updateY:Ext.emptyFn,onPartnerScrollStart:Ext.emptyFn,onPartnerScrollEnd:Ext.emptyFn,refresh:function(){return this.fireEvent("refresh",this),this},removePartner:function(partner){var partners=this._partners,otherPartners=partner._partners;partners&&delete partners[partner.getId()],otherPartners&&delete otherPartners[this.getId()]},scrollBy:function(deltaX,deltaY,animate){var position=this.getPosition();return deltaX&&(deltaX.length?(animate=deltaY,deltaY=deltaX[1],deltaX=deltaX[0]):"number"!=typeof deltaX&&(animate=deltaY,deltaY=deltaX.y,deltaX=deltaX.x)),deltaX="number"==typeof deltaX?deltaX+position.x:null,deltaY="number"==typeof deltaY?deltaY+position.y:null,this.doScrollTo(deltaX,deltaY,animate)},scrollIntoView:function(el,hscroll,animate,highlight){var newPosition,newX,newY,me=this,position=me.getPosition(),myEl=me.getElement();el&&(newPosition=Ext.fly(el).getScrollIntoViewXY(myEl,position.x,position.y),newX=!1===hscroll?position.x:newPosition.x,newY=newPosition.y,highlight&&me.on({scrollend:"doHighlight",scope:me,single:!0,args:[el,highlight]}),me.doScrollTo(newX,newY,animate))},isInView:function(el){var elRegion,myElRegion,result={x:!1,y:!1},myEl=this.getElement();return el&&myEl.contains(el)&&(myElRegion=myEl.getRegion(),elRegion=Ext.fly(el).getRegion(),result.x=elRegion.right>myElRegion.left&&elRegion.left<myElRegion.right,result.y=elRegion.bottom>myElRegion.top&&elRegion.top<myElRegion.bottom),result},scrollTo:function(x,y,animate){var maxPosition;x&&(x.length?(animate=y,y=x[1],x=x[0]):"number"!=typeof x&&(animate=y,y=x.y,x=x.x)),(x<0||y<0)&&(maxPosition=this.getMaxPosition(),x<0&&(x+=maxPosition.x),y<0&&(y+=maxPosition.y)),this.doScrollTo(x,y,animate)},updateDirection:function(direction){var x,y,me=this;direction?("auto"===direction?y=x=!0:"vertical"===direction?y=!(x=!1):"horizontal"===direction?y=!(x=!0):"both"===direction&&(y=x="scroll"),me.setX(x),me.setY(y)):(x=me.getX(),y=me.getY(),x&&y?direction="scroll"===y&&"scroll"===x?"both":"auto":y?direction="vertical":x&&(direction="horizontal"),me._direction=direction)},updateSize:function(size){var spacer,x,y;this.getElement()&&(spacer=this.getSpacer(),null==size?spacer.hide():(y="number"==typeof size?x=size:(x=size.x||0,size.y||0),0<x&&--x,0<y&&--y,this.setSpacerXY({x:x,y:y}),spacer.show()))},deprecated:{5:{methods:{getScroller:function(){return this}}},"5.1.0":{methods:{scrollToTop:function(animate){return this.scrollTo(0,0,animate)},scrollToEnd:function(animate){return this.scrollTo(1/0,1/0,animate)}}}},privates:{getSpacer:function(){var element,spacer=this._spacer;return spacer||(element=this.getElement(),(spacer=this._spacer=element.createChild({cls:this._spacerCls,role:"presentation"})).setVisibilityMode(2),element.position()),spacer},applySpacerXY:function(pos,oldPos){return oldPos&&pos.x===oldPos.x&&pos.y===oldPos.y&&(pos=void 0),pos},updateSpacerXY:function(pos){this.getSpacer().setLocalXY(pos.x,pos.y)},convertX:function(x){return x},doHighlight:function(el,highlight){!0!==highlight?Ext.fly(el).highlight(highlight):Ext.fly(el).highlight()},fireScrollStart:function(x,y){var me=this,component=me.component;me.invokePartners("onPartnerScrollStart",x,y),me.hasListeners.scrollstart&&me.fireEvent("scrollstart",me,x,y),component&&component.onScrollStart&&component.onScrollStart(x,y),Ext.GlobalEvents.fireEvent("scrollstart",me,x,y)},fireScroll:function(x,y){var me=this,component=me.component;me.invokePartners("onPartnerScroll",x,y),me.hasListeners.scroll&&me.fireEvent("scroll",me,x,y),component&&component.onScrollMove&&component.onScrollMove(x,y),Ext.GlobalEvents.fireEvent("scroll",me,x,y)},fireScrollEnd:function(x,y){var me=this,component=me.component;me.invokePartners("onPartnerScrollEnd",x,y),me.hasListeners.scrollend&&me.fireEvent("scrollend",me,x,y),component&&component.onScrollEnd&&component.onScrollEnd(x,y),Ext.GlobalEvents.fireEvent("scrollend",me,x,y)},initXStyle:function(){var element=this.getElement(),x=this.getX();element&&element.dom&&(x?!0===x&&(x="auto"):x="hidden",element.setStyle("overflow-x",x))},initYStyle:function(){var element=this.getElement(),y=this.getY();element&&element.dom&&(y?!0===y&&(y="auto"):y="hidden",element.setStyle("overflow-y",y))},invokePartners:function(method,x,y){var partner,id,partners=this._partners,isEnd="onPartnerScrollEnd"===method;if(!this.suspendSync&!this.isReflecting)for(id in partners)(partner=partners[id].scroller).isReflecting=!0,partner[method](this,x,y),isEnd&&(partner.isReflecting=!1)},clearReflecting:function(){this.isReflecting=!1},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(){this.suspendSync&&this.suspendSync--},updateDomScrollPosition:function(){var elScroll,element=this.getElement(),position=this.position;return element&&!element.destroyed&&(elScroll=this.getElementScroll(element),position.x=elScroll.left,position.y=elScroll.top),this.positionDirty=!1,position},getElementScroll:function(element){return element.getScroll()},onDomScroll:function(){var position,x,y,el,me=this;me.isTouchScroller&&2===Ext.supports.touchScroll?(el=me.getElement().dom).scrollTop=el.scrollLeft=0:(x=(position=me.updateDomScrollPosition()).x,y=position.y,me.isScrolling||(me.isScrolling=Ext.isScrolling=!0,me.fireScrollStart(x,y)),me.fireScroll(x,y),me.onDomScrollEnd())},onDomScrollEnd:function(){var me=this,position=me.getPosition(),x=position.x,y=position.y;me.isScrolling=Ext.isScrolling=!1,me.trackingScrollLeft=x,me.trackingScrollTop=y,me.fireScrollEnd(x,y)},onPartnerScroll:function(partner,x,y){var axis=partner._partners[this.getId()].axis;axis&&("x"===axis?y=null:"y"===axis&&(x=null)),this.doScrollTo(x,y,!1,!0)},restoreState:function(){var dom,el=this.getElement();el&&(dom=el.dom,void 0!==this.trackingScrollTop&&(dom.scrollTop=this.trackingScrollTop,dom.scrollLeft=this.trackingScrollLeft))}}}),Ext.define("Ext.fx.easing.Abstract",{config:{startTime:0,startValue:0},isEasing:!0,isEnded:!1,constructor:function(config){return this.initConfig(config),this},applyStartTime:function(startTime){return startTime=startTime||Ext.Date.now()},updateStartTime:function(startTime){this.reset()},reset:function(){this.isEnded=!1},getValue:Ext.emptyFn}),Ext.define("Ext.fx.easing.Momentum",{extend:Ext.fx.easing.Abstract,config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(friction){var theta=Math.log(1-friction/10);this.theta=theta,this.alpha=theta/this.getAcceleration()},updateStartVelocity:function(velocity){this.velocity=velocity*this.getAcceleration()},updateAcceleration:function(acceleration){this.velocity=this.getStartVelocity()*acceleration,this.alpha=this.theta/acceleration},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var deltaTime=Ext.Date.now()-this.getStartTime();return Math.exp(deltaTime*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}}),Ext.define("Ext.fx.easing.Bounce",{extend:Ext.fx.easing.Abstract,config:{springTension:.3,acceleration:30,startVelocity:0},getValue:function(){var theta=(Ext.Date.now()-this.getStartTime())/this.getAcceleration(),powTime=theta*Math.pow(Math.E,-this.getSpringTension()*theta);return this.getStartValue()+this.getStartVelocity()*powTime}}),Ext.define("Ext.fx.easing.BoundMomentum",{extend:Ext.fx.easing.Abstract,config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:.01,startVelocity:0},applyMomentum:function(config,currentEasing){return Ext.factory(config,Ext.fx.easing.Momentum,currentEasing)},applyBounce:function(config,currentEasing){return Ext.factory(config,Ext.fx.easing.Bounce,currentEasing)},updateStartTime:function(startTime){this.getMomentum().setStartTime(startTime),this.callParent(arguments)},updateStartVelocity:function(startVelocity){this.getMomentum().setStartVelocity(startVelocity)},updateStartValue:function(startValue){this.getMomentum().setStartValue(startValue)},reset:function(){return this.lastValue=null,this.isBouncingBack=!1,this.isOutOfBound=!1,this.callParent(arguments)},getValue:function(){var value,velocity,momentum=this.getMomentum(),bounce=this.getBounce(),startVelocity=momentum.getStartVelocity(),direction=0<startVelocity?1:-1,minValue=this.getMinMomentumValue(),maxValue=this.getMaxMomentumValue(),boundedValue=1==direction?maxValue:minValue,lastValue=this.lastValue;if(0===startVelocity)return this.getStartValue();if(!this.isOutOfBound){if(value=momentum.getValue(),velocity=momentum.getVelocity(),Math.abs(velocity)<this.getMinVelocity()&&(this.isEnded=!0),minValue<=value&&value<=maxValue)return value;this.isOutOfBound=!0,bounce.setStartTime(Ext.Date.now()).setStartVelocity(velocity).setStartValue(boundedValue)}return value=bounce.getValue(),this.isEnded||(this.isBouncingBack?Math.round(value)==boundedValue&&(this.isEnded=!0):null!==lastValue&&(1==direction&&value<lastValue||-1==direction&&lastValue<value)&&(this.isBouncingBack=!0)),this.lastValue=value}}),Ext.define("Ext.fx.easing.Linear",{extend:Ext.fx.easing.Abstract,alias:"easing.linear",config:{duration:0,endValue:0},updateStartValue:function(startValue){this.distance=this.getEndValue()-startValue},updateEndValue:function(endValue){this.distance=endValue-this.getStartValue()},getValue:function(){var deltaTime=Ext.Date.now()-this.getStartTime(),duration=this.getDuration();return duration<deltaTime?(this.isEnded=!0,this.getEndValue()):this.getStartValue()+deltaTime/duration*this.distance}}),Ext.define("Ext.fx.easing.EaseOut",{extend:Ext.fx.easing.Linear,alias:"easing.ease-out",config:{exponent:4,duration:1500},getValue:function(){var deltaTime=Ext.Date.now()-this.getStartTime(),duration=this.getDuration(),startValue=this.getStartValue(),endValue=this.getEndValue(),distance=this.distance,thetaC=1-deltaTime/duration,currentValue=startValue+(1-Math.pow(thetaC,this.getExponent()))*distance;return duration<=deltaTime?(this.isEnded=!0,endValue):currentValue}}),Ext.define("Ext.util.translatable.Abstract",{extend:Ext.Evented,config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:!1,isTranslatable:!0,constructor:function(config){this.mixins.observable.constructor.call(this,config),this.position={x:0,y:0}},factoryEasing:function(easing){return Ext.factory(easing,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(easing){this.getEasingX()||this.setEasingX(this.factoryEasing(easing)),this.getEasingY()||this.setEasingY(this.factoryEasing(easing))},applyEasingX:function(easing){return this.factoryEasing(easing)},applyEasingY:function(easing){return this.factoryEasing(easing)},doTranslate:Ext.emptyFn,translate:function(x,y,animation){if(animation)return this.translateAnimated(x,y,animation);this.isAnimating&&this.stopAnimation(),isNaN(x)||"number"!=typeof x||(this.x=x),isNaN(y)||"number"!=typeof y||(this.y=y),this.doTranslate(x,y)},translateAxis:function(axis,value,animation){var x,y;return"x"==axis?x=value:y=value,this.translate(x,y,animation)},getPosition:function(){var position=this.position;return position.x=-this.x,position.y=-this.y,position},animate:function(easingX,easingY){return this.activeEasingX=easingX,this.activeEasingY=easingY,this.isAnimating=!0,this.lastX=null,this.lastY=null,Ext.AnimationQueue.start(this.doAnimationFrame,this),this.fireEvent("animationstart",this,this.x,this.y),this},translateAnimated:function(x,y,animation){var me=this;Ext.isObject(animation)||(animation={}),me.isAnimating&&me.stopAnimation(),me.callback=animation.callback,me.callbackScope=animation.scope;var now=Ext.Date.now(),easing=animation.easing,easingX="number"==typeof x?animation.easingX||easing||me.getEasingX()||!0:null,easingY="number"==typeof y?animation.easingY||easing||me.getEasingY()||!0:null;return easingX&&((easingX=me.factoryEasing(easingX)).setStartTime(now),easingX.setStartValue(me.x),easingX.setEndValue(x),"duration"in animation&&easingX.setDuration(animation.duration)),easingY&&((easingY=me.factoryEasing(easingY)).setStartTime(now),easingY.setStartValue(me.y),easingY.setEndValue(y),"duration"in animation&&easingY.setDuration(animation.duration)),me.animate(easingX,easingY)},doAnimationFrame:function(){var x,y,me=this,easingX=me.activeEasingX,easingY=me.activeEasingY,now=Date.now();me.isAnimating&&(me.lastRun=now,null!==easingX||null!==easingY?(null!==easingX?(me.x=x=Math.round(easingX.getValue()),easingX.isEnded&&(me.activeEasingX=null,me.fireEvent("axisanimationend",me,"x",x))):x=me.x,null!==easingY?(me.y=y=Math.round(easingY.getValue()),easingY.isEnded&&(me.activeEasingY=null,me.fireEvent("axisanimationend",me,"y",y))):y=me.y,me.lastX===x&&me.lastY===y||(me.doTranslate(x,y),me.lastX=x,me.lastY=y),me.fireEvent("animationframe",me,x,y)):me.stopAnimation())},stopAnimation:function(){var me=this;me.isAnimating&&(me.activeEasingX=null,me.activeEasingY=null,me.isAnimating=!1,Ext.AnimationQueue.stop(me.doAnimationFrame,me),me.fireEvent("animationend",me,me.x,me.y),me.callback&&(me.callback.call(me.callbackScope),me.callback=null))},refresh:function(){this.translate(this.x,this.y)},destroy:function(){this.isAnimating&&this.stopAnimation(),this.callParent()}}),Ext.define("Ext.util.translatable.Dom",{extend:Ext.util.translatable.Abstract,config:{element:null},applyElement:function(element){if(element)return Ext.get(element)},updateElement:function(){this.refresh()}}),Ext.define("Ext.util.translatable.CssTransform",{extend:Ext.util.translatable.Dom,doTranslate:function(x,y){var element=this.getElement();this.destroyed||element.destroyed||element.translate(x,y)},destroy:function(){var element=this.getElement();element&&!element.destroyed&&(element.dom.style.webkitTransform=null),this.callParent()}}),Ext.define("Ext.util.translatable.ScrollPosition",{extend:Ext.util.translatable.Dom,type:"scrollposition",config:{useWrapper:!0},getWrapper:function(){var container,wrapper=this.wrapper,element=this.getElement();if(!wrapper){if(!(container=element.getParent()))return null;container.hasCls(Ext.baseCSSPrefix+"translatable-hboxfix")&&(container=container.getParent()),wrapper=this.getUseWrapper()?element.wrap():container,element.addCls(Ext.baseCSSPrefix+"translatable"),wrapper.addCls(Ext.baseCSSPrefix+"translatable-container"),(this.wrapper=wrapper).on("painted",function(){this.isAnimating||this.refresh()},this),this.refresh()}return wrapper},doTranslate:function(x,y){var dom,wrapper=this.getWrapper();wrapper&&(dom=wrapper.dom,"number"==typeof x&&(dom.scrollLeft=5e5-x),"number"==typeof y&&(dom.scrollTop=5e5-y))},destroy:function(){var me=this,element=me.getElement(),wrapper=me.wrapper;wrapper&&(element.destroyed||(me.getUseWrapper()&&wrapper.doReplaceWith(element),element.removeCls(Ext.baseCSSPrefix+"translatable")),wrapper.destroyed||(wrapper.removeCls(Ext.baseCSSPrefix+"translatable-container"),wrapper.un("painted","refresh",me)),delete me.wrapper,delete me._element),me.callParent()}}),Ext.define("Ext.util.translatable.ScrollParent",{extend:Ext.util.translatable.Dom,isScrollParent:!0,applyElement:function(element){var el=Ext.get(element);return el&&(this.parent=el.parent()),el},doTranslate:function(x,y){var parent=this.parent;parent.setScrollLeft(Math.round(-x)),parent.setScrollTop(Math.round(-y))},getPosition:function(){var position=this.position,parent=this.parent;return position.x=parent.getScrollLeft(),position.y=parent.getScrollTop(),position}}),Ext.define("Ext.util.translatable.CssPosition",{extend:Ext.util.translatable.Dom,doTranslate:function(x,y){var domStyle=this.getElement().dom.style;"number"==typeof x&&(domStyle.left=x+"px"),"number"==typeof y&&(domStyle.top=y+"px")},destroy:function(){var domStyle=this.getElement().dom.style;domStyle.left=null,domStyle.top=null,this.callParent()}}),Ext.define("Ext.util.Translatable",{constructor:function(config){var namespace=Ext.util.translatable;switch(Ext.browser.getPreferredTranslationMethod(config)){case"scrollposition":return new namespace.ScrollPosition(config);case"scrollparent":return new namespace.ScrollParent(config);case"csstransform":return new namespace.CssTransform(config);case"cssposition":return new namespace.CssPosition(config)}}}),Ext.define("Ext.scroll.Indicator",{extend:Ext.Widget,xtype:"scrollindicator",config:{axis:null,hideAnimation:!0,hideDelay:0,scroller:null,minLength:24},defaultHideAnimation:{to:{opacity:0},duration:300},names:{x:{side:"l",getSize:"getHeight",setLength:"setWidth",translate:"translateX"},y:{side:"t",getSize:"getWidth",setLength:"setHeight",translate:"translateY"}},oppositeAxis:{x:"y",y:"x"},cls:Ext.baseCSSPrefix+"scroll-indicator",applyHideAnimation:function(hideAnimation){return hideAnimation=hideAnimation&&Ext.mergeIf({onEnd:this.onHideAnimationEnd,scope:this},this.defaultHideAnimation,hideAnimation)},constructor:function(config){var axis,me=this;me.callParent([config]),axis=me.getAxis(),me.names=me.names[axis],me.element.addCls(me.cls+" "+me.cls+"-"+axis)},hide:function(){var me=this,delay=me.getHideDelay();delay?me._hideTimer=Ext.defer(me.doHide,delay,me):me.doHide()},setValue:function(value){var position,me=this,el=me.element,names=me.names,axis=me.getAxis(),scroller=me.getScroller(),maxScrollPosition=scroller.getMaxUserPosition()[axis],elementSize=scroller.getElementSize()[axis],baseLength=me.length,minLength=me.getMinLength(),length=baseLength,maxPosition=elementSize-baseLength-me.sizeAdjust,round=Math.round,max=Math.max;position=value<0?(length=round(max(baseLength+baseLength*value/elementSize,minLength)),0):maxScrollPosition<value?maxPosition+baseLength-(length=round(max(baseLength-baseLength*(value-maxScrollPosition)/elementSize,minLength))):round(value/maxScrollPosition*maxPosition),me[names.translate](position),el[names.setLength](length)},show:function(){var me=this,el=me.element,anim=el.getActiveAnimation();anim&&anim.end(),me._inDom||(me.getScroller().getElement().appendChild(el),me._inDom=!0,me.size||me.cacheStyles()),me.refreshLength(),clearTimeout(me._hideTimer),el.setStyle("opacity","")},privates:{cacheStyles:function(){var el=this.element,names=this.names;this.size=el[names.getSize](),this.margin=el.getMargin(names.side)},doHide:function(){var animation=this.getHideAnimation(),el=this.element;animation?el.animate(animation):el.setStyle("opacity",0)},hasOpposite:function(){return this.getScroller().isAxisEnabled(this.oppositeAxis[this.getAxis()])},onHideAnimationEnd:function(){this.element.setStyle("opacity","0")},refreshLength:function(){var me=this,names=me.names,axis=me.getAxis(),scroller=me.getScroller(),scrollSize=scroller.getSize()[axis],elementSize=scroller.getElementSize()[axis],ratio=elementSize/scrollSize,baseSizeAdjust=2*me.margin,sizeAdjust=me.hasOpposite()?baseSizeAdjust+me.size:baseSizeAdjust,length=Math.max(Math.round((elementSize-sizeAdjust)*ratio),me.getMinLength());me.sizeAdjust=sizeAdjust,me.length=length,me.element[names.setLength](length)},translateX:function(value){this.element.translate(value)},translateY:function(value){this.element.translate(0,value)}}}),Ext.define("Ext.scroll.TouchScroller",{extend:Ext.scroll.Scroller,alias:"scroller.touch",isTouchScroller:!0,config:{autoRefresh:!0,bounceEasing:{duration:400},elementSize:void 0,indicators:!0,fps:"auto",maxAbsoluteVelocity:6,momentumEasing:{momentum:{acceleration:30,friction:.5},bounce:{acceleration:30,springTension:.3},minVelocity:1},outOfBoundRestrictFactor:.5,innerElement:null,size:void 0,slotSnapEasing:{duration:150},slotSnapOffset:{x:0,y:0},startMomentumResetTime:300,translatable:{translationMethod:"auto",useWrapper:!1}},cls:Ext.baseCSSPrefix+"scroll-container",scrollerCls:Ext.baseCSSPrefix+"scroll-scroller",dragStartTime:0,dragEndTime:0,isDragging:!1,isAnimating:!1,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},listenerMap:{touchstart:"onTouchStart",touchmove:"onTouchMove",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"},refreshCounter:0,constructor:function(config){var me=this;me.elementListeners={touchstart:"onEvent",touchmove:"onEvent",dragstart:"onEvent",drag:"onEvent",dragend:"onEvent",scope:me},me.minPosition={x:0,y:0},me.startPosition={x:0,y:0},me.velocity={x:0,y:0},me.isAxisEnabledFlags={x:!1,y:!1},me.flickStartPosition={x:0,y:0},me.flickStartTime={x:0,y:0},me.lastDragPosition={x:0,y:0},me.dragDirection={x:0,y:0},me.callParent([config]),me.refreshAxes(),me.scheduleRefresh={idle:me.doRefresh,scope:me,single:!0,destroyable:!0}},applyBounceEasing:function(easing){var defaultClass=Ext.fx.easing.EaseOut;return{x:Ext.factory(easing,defaultClass),y:Ext.factory(easing,defaultClass)}},applyElementSize:function(size){var dom,x,y,el=this.getElement();return el?(dom=el.dom)?(y=null==size?(x=dom.clientWidth,dom.clientHeight):(x=size.x,size.y),{x:x,y:y}):void 0:null},applyIndicators:function(indicators,oldIndicators){var xIndicator,yIndicator,x,y;return indicators?(!0===indicators?xIndicator=yIndicator={}:(x=indicators.x,y=indicators.y,x||y?(xIndicator=null==x||!0===x?{}:x,yIndicator=null==x||!0===y?{}:y):xIndicator=yIndicator=indicators),oldIndicators?(xIndicator?oldIndicators.x.setConfig(xIndicator):(oldIndicators.x.destroy(),oldIndicators.x=null),yIndicator?oldIndicators.y.setConfig(yIndicator):(oldIndicators.y.destroy(),oldIndicators.y=null),indicators=oldIndicators):(indicators={x:null,y:null},xIndicator&&(indicators.x=new Ext.scroll.Indicator(Ext.applyIf({axis:"x",scroller:this},xIndicator))),yIndicator&&(indicators.y=new Ext.scroll.Indicator(Ext.applyIf({axis:"y",scroller:this},yIndicator))))):oldIndicators&&(oldIndicators.x&&oldIndicators.x.destroy(),oldIndicators.y&&oldIndicators.y.destroy(),oldIndicators.x=oldIndicators.y=null),indicators},applyMomentumEasing:function(easing){var defaultClass=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(easing,defaultClass),y:Ext.factory(easing,defaultClass)}},applyInnerElement:function(innerElement){return innerElement&&!innerElement.isElement&&(innerElement=Ext.get(innerElement)),innerElement},applyMaxPosition:function(maxPosition,oldMaxPosition){if(!oldMaxPosition||maxPosition.x!==oldMaxPosition.x||maxPosition.y!==oldMaxPosition.y){var yEasing,translatable=this.getTranslatable();return translatable.isAnimating&&(yEasing=translatable.activeEasingY)&&yEasing.getStartVelocity&&yEasing.getStartVelocity()<0&&maxPosition.y<oldMaxPosition.y&&yEasing.setMinMomentumValue(-maxPosition.y),maxPosition}},applyMaxUserPosition:function(maxUserPosition,oldMaxUserPosition){if(!oldMaxUserPosition||maxUserPosition.x!==oldMaxUserPosition.x||maxUserPosition.y!==oldMaxUserPosition.y)return maxUserPosition},applySize:function(size){var dom,scrollerDom,x,y,el=this.getElement();return"number"==typeof size?y=x=size:size&&(x=size.x,y=size.y),!el||null!=x&&null!=y||(dom=el.dom,scrollerDom=this.getInnerElement().dom,null==x&&(x=Math.max(scrollerDom.scrollWidth,dom.clientWidth)),null==y&&(y=Math.max(scrollerDom.scrollHeight,dom.clientHeight))),{x:x,y:y}},applySlotSnapOffset:function(snapOffset){return"number"==typeof snapOffset&&(snapOffset={x:snapOffset,y:snapOffset}),snapOffset},applySlotSnapSize:function(snapSize){return"number"==typeof snapSize&&(snapSize={x:snapSize,y:snapSize}),snapSize},applySlotSnapEasing:function(easing){var defaultClass=Ext.fx.easing.EaseOut;return{x:Ext.factory(easing,defaultClass),y:Ext.factory(easing,defaultClass)}},applyTranslatable:function(config,translatable){return Ext.factory(config,Ext.util.Translatable,translatable)},destroy:function(){var me=this,element=me.getElement(),innerElement=me.getInnerElement(),sizeMonitors=me.sizeMonitors;sizeMonitors&&(sizeMonitors.element.destroy(),sizeMonitors.container.destroy()),element&&!element.destroyed&&element.removeCls(me.cls),innerElement&&!innerElement.destroyed&&innerElement.removeCls(me.scrollerCls),me._isWrapped&&(element.destroyed||me.unwrapContent(),innerElement.destroy()),me.setElement(null),me.setInnerElement(null),me.setIndicators(null),Ext.destroy(me.getTranslatable()),me.callParent()},refresh:function(immediate,options){var me=this;++me.refreshCounter,immediate?me.doRefresh(options):me.refreshScheduled||(me.scheduleRefresh.args=[options],me.refreshScheduled=Ext.on(me.scheduleRefresh))},updateAutoRefresh:function(autoRefresh){this.toggleResizeListeners(autoRefresh)},updateBounceEasing:function(easing){this.getTranslatable().setEasingX(easing.x).setEasingY(easing.y)},updateElementSize:function(){this.isConfiguring||this.refreshAxes()},updateDisabled:function(disabled){this.isConfiguring||(disabled?this.detachListeners():this.attachListeners())},updateElement:function(element,oldElement){var listeners,autoRefresh,me=this,innerElement=me.getInnerElement();innerElement||((innerElement=element.dom.firstChild)&&1===innerElement.nodeType&&Ext.fly(innerElement).hasCls(me.scrollerCls)||(innerElement=me.wrapContent(element)),me.setInnerElement(innerElement)),element.addCls(me.cls),me.isConfiguring&&(me.getTranslatable().isScrollParent||(element.dom.style.overflowX=element.dom.style.overflowY="",(listeners=me.elementListeners).mousewheel="onMouseWheel",listeners.scroll={fn:"onElementScroll",delegated:!1,scope:me})),me.getDisabled()||me.attachListeners(),me.isConfiguring||!1!==(autoRefresh=me.getAutoRefresh())&&(me.toggleResizeListeners(autoRefresh),autoRefresh?me.refresh():null===autoRefresh&&me.setElementSize(null))},updateFps:function(fps){"auto"!==fps&&this.getTranslatable().setFps(fps)},updateMaxUserPosition:function(){this.snapToBoundary()},updateMinUserPosition:function(){this.snapToBoundary()},updateInnerElement:function(innerElement){innerElement&&innerElement.addCls(this.scrollerCls),this.getTranslatable().setElement(innerElement)},updateSize:function(size){this.isConfiguring||(1===Ext.supports.touchScroll&&this.callParent([size]),this.refreshAxes())},updateTranslatable:function(translatable){translatable.setElement(this.getInnerElement()),translatable.isScrollParent||translatable.on({animationframe:"onAnimationFrame",animationend:"onAnimationEnd",scope:this})},updateX:function(){this.isConfiguring||this.refreshAxes()},updateY:function(){this.isConfiguring||this.refreshAxes()},privates:{attachListeners:function(){this.getElement().on(this.elementListeners)},constrainX:function(x){return Math.min(this.getMaxPosition().x,Math.max(x,0))},constrainY:function(y){return Math.min(this.getMaxPosition().y,Math.max(y,0))},convertEasingConfig:function(config){return config},detachListeners:function(){this.getElement().un(this.elementListeners)},doRefresh:function(options){var size,elementSize,me=this;me.refreshScheduled&&(me.refreshScheduled=me.refreshScheduled.destroy()),me.refreshCounter&&me.getElement()&&(me.stopAnimation(),me.getTranslatable().refresh(),options&&(size=options.size,elementSize=options.elementSize),me.setSize(size),me.setElementSize(elementSize),me.fireEvent("refresh",me),me.refreshCounter=0)},doScrollTo:function(x,y,animation,allowOverscroll){var me=this,isDragging=me.isDragging,DOMScrolling=me.getTranslatable().isScrollParent,fireStartEnd=!me.isReflecting&&!DOMScrolling;if(me.destroyed||!me.getElement())return me;allowOverscroll=allowOverscroll||me.isDragging;var translationX,translationY,translatable=me.getTranslatable(),position=me.position,positionChanged=!1;return isDragging&&!me.isAxisEnabled("x")||(isNaN(x)||"number"!=typeof x?x=position.x:(allowOverscroll||(x=me.constrainX(x)),position.x!==x&&(position.x=x,positionChanged=!0)),translationX=me.convertX(-x)),isDragging&&!me.isAxisEnabled("y")||(isNaN(y)||"number"!=typeof y?y=position.y:(allowOverscroll||(y=me.constrainY(y)),position.y!==y&&(position.y=y,positionChanged=!0)),translationY=-y),positionChanged?(fireStartEnd&&me.onScrollStart(),animation?translatable.translateAnimated(translationX,translationY,animation):(DOMScrolling||me.onScroll(),translatable.translate(translationX,translationY),fireStartEnd&&me.onScrollEnd())):animation&&animation.callback&&animation.callback(),me},getAnimationEasing:function(axis,e){if(!this.isAxisEnabled(axis))return null;var easingConfig,easing,me=this,currentPosition=me.position[axis],minPosition=me.getMinUserPosition()[axis],maxPosition=me.getMaxUserPosition()[axis],maxAbsVelocity=me.getMaxAbsoluteVelocity(),boundValue=null,dragEndTime=me.dragEndTime,velocity=e.flick.velocity[axis],isX="x"===axis;return currentPosition<minPosition?boundValue=minPosition:maxPosition<currentPosition&&(boundValue=maxPosition),isX&&(currentPosition=me.convertX(currentPosition),boundValue=me.convertX(boundValue)),null!==boundValue?((easing=me.getBounceEasing()[axis]).setConfig({startTime:dragEndTime,startValue:-currentPosition,endValue:-boundValue}),easing):0===velocity?null:(velocity<-maxAbsVelocity?velocity=-maxAbsVelocity:maxAbsVelocity<velocity&&(velocity=maxAbsVelocity),easing=me.getMomentumEasing()[axis],easingConfig={startTime:dragEndTime,startValue:-currentPosition,startVelocity:1.5*velocity,minMomentumValue:-maxPosition,maxMomentumValue:0},isX&&me.convertEasingConfig(easingConfig),easing.setConfig(easingConfig),easing)},getSnapPosition:function(axis){var position,snapOffset,maxPosition,mod,me=this,snapSize=me.getSlotSnapSize()[axis],snapPosition=null;return 0!==snapSize&&me.isAxisEnabled(axis)&&(position=me.position[axis],snapOffset=me.getSlotSnapOffset()[axis],maxPosition=me.getMaxUserPosition()[axis],0!==(mod=Math.floor((position-snapOffset)%snapSize))&&(snapPosition=position!==maxPosition&&Math.abs(mod)>snapSize/2?Math.min(maxPosition,position+(0<mod?snapSize-mod:mod-snapSize)):position-mod)),snapPosition},hideIndicators:function(){var xIndicator,yIndicator,indicators=this.getIndicators();indicators&&(this.isAxisEnabled("x")&&(xIndicator=indicators.x)&&xIndicator.hide(),this.isAxisEnabled("y")&&(yIndicator=indicators.y)&&yIndicator.hide())},isAxisEnabled:function(axis){return this.getX(),this.getY(),this.isAxisEnabledFlags[axis]},onAnimationEnd:function(){this.snapToBoundary(),this.onScrollEnd()},onAnimationFrame:function(translatable,x,y){var position=this.position;position.x=this.convertX(-x),position.y=-y,this.onScroll()},onAxisDrag:function(axis,delta){if(delta&&this.isAxisEnabled(axis)){var me=this,flickStartPosition=me.flickStartPosition,flickStartTime=me.flickStartTime,lastDragPosition=me.lastDragPosition,dragDirection=me.dragDirection,old=me.position[axis],min=me.getMinUserPosition()[axis],max=me.getMaxUserPosition()[axis],start=me.startPosition[axis],last=lastDragPosition[axis],current=start-delta,lastDirection=dragDirection[axis],restrictFactor=me.getOutOfBoundRestrictFactor(),startMomentumResetTime=me.getStartMomentumResetTime(),now=Ext.Date.now();return current<min?current*=restrictFactor:max<current&&(current=max+(current-max)*restrictFactor),last<current?dragDirection[axis]=1:current<last&&(dragDirection[axis]=-1),(0!==lastDirection&&dragDirection[axis]!==lastDirection||now-flickStartTime[axis]>startMomentumResetTime)&&(flickStartPosition[axis]=old,flickStartTime[axis]=now),lastDragPosition[axis]=current,!0}},onDomScroll:function(){var dom,position;this.getTranslatable().isScrollParent&&(dom=this.getElement().dom,(position=this.position).x=dom.scrollLeft,position.y=dom.scrollTop),this.callParent()},onDrag:function(e){var me=this,lastDragPosition=me.lastDragPosition;me.isDragging&&me.onAxisDrag("x",me.convertX(e.deltaX))|me.onAxisDrag("y",e.deltaY)&&me.doScrollTo(lastDragPosition.x,lastDragPosition.y)},onDragEnd:function(e){var easingX,easingY,me=this;me.isDragging&&(me.dragEndTime=Ext.Date.now(),me.onDrag(e),me.isDragging=!1,easingX=me.getAnimationEasing("x",e),easingY=me.getAnimationEasing("y",e),easingX||easingY?me.getTranslatable().animate(easingX,easingY):me.onScrollEnd())},onDragStart:function(e){var me=this,direction=me.getDirection(),absDeltaX=e.absDeltaX,absDeltaY=e.absDeltaY,directionLock=me.getDirectionLock(),startPosition=me.startPosition,flickStartPosition=me.flickStartPosition,flickStartTime=me.flickStartTime,lastDragPosition=me.lastDragPosition,currentPosition=me.position,dragDirection=me.dragDirection,x=currentPosition.x,y=currentPosition.y,now=Ext.Date.now();if(directionLock&&"both"!==direction){if(!("horizontal"===direction&&absDeltaY<absDeltaX||"vertical"===direction&&absDeltaX<absDeltaY))return;e.stopPropagation()}lastDragPosition.x=x,lastDragPosition.y=y,flickStartPosition.x=x,flickStartPosition.y=y,startPosition.x=x,startPosition.y=y,flickStartTime.x=now,flickStartTime.y=now,dragDirection.x=0,dragDirection.y=0,me.dragStartTime=now,me.isDragging=!0,me.isScrolling||me.onScrollStart()},onElementResize:function(element,info){this.refresh(!0,{elementSize:{x:info.contentWidth,y:info.contentHeight},size:this.getAutoRefresh()?null:this.getSize()})},onElementScroll:function(event,targetEl){targetEl.scrollTop=targetEl.scrollLeft=0},onEvent:function(e){var me=this,browserEvent=e.browserEvent;me.self.isTouching&&!me.isTouching||me.getTranslatable().isScrollParent&&(me.isMouseEvent[browserEvent.type]||"mouse"===browserEvent.pointerType)||!me.getY()&&!me.getX()||me[me.listenerMap[e.type]](e)},onInnerElementResize:function(element,info){this.refresh(!0,{size:{x:info.width,y:info.height}})},onMouseWheel:function(e){var me=this,delta=e.getWheelDeltas(),deltaX=-delta.x,deltaY=-delta.y,position=me.position,maxPosition=me.getMaxUserPosition(),minPosition=me.getMinUserPosition(),max=Math.max,min=Math.min,positionX=max(min(position.x+deltaX,maxPosition.x),minPosition.x),positionY=max(min(position.y+deltaY,maxPosition.y),minPosition.y);deltaX=positionX-position.x,deltaY=positionY-position.y,(deltaX||deltaY)&&(e.stopEvent(),me.onScrollStart(),me.scrollBy(deltaX,deltaY),me.onScroll(),me.onScrollEnd())},onPartnerScrollEnd:function(x,y){var me=this;me.getTranslatable().isScrollParent||me.fireScrollEnd(x,y),me.callParent([x,y]),me.isScrolling=!1,me.hideIndicators()},onPartnerScrollStart:function(x,y){this.isScrolling=!0,this.getTranslatable().isScrollParent||this.fireScrollStart(x,y),this.showIndicators()},onScroll:function(){var xIndicator,yIndicator,me=this,position=me.position,x=position.x,y=position.y,indicators=me.getIndicators();indicators&&(me.isAxisEnabled("x")&&(xIndicator=indicators.x)&&xIndicator.setValue(x),me.isAxisEnabled("y")&&(yIndicator=indicators.y)&&yIndicator.setValue(y)),me.fireScroll(x,y)},onScrollEnd:function(){var me=this,position=me.position;!me.isScrolling||me.isTouching||me.snapToSlot()||(me.hideIndicators(),me.isScrolling=Ext.isScrolling=!1,me.fireScrollEnd(position.x,position.y))},onScrollStart:function(){var me=this,position=me.position;me.isScrolling||(me.showIndicators(),me.isScrolling=Ext.isScrolling=!0,me.fireScrollStart(position.x,position.y))},onTouchEnd:function(){var me=this;me.isTouching=me.self.isTouching=!1,!me.isDragging&&me.snapToSlot()&&me.onScrollStart()},onTouchMove:function(e){e.preventDefault()},onTouchStart:function(){this.isTouching=this.self.isTouching=!0,Ext.getDoc().on({touchend:"onTouchEnd",scope:this,single:!0}),this.stopAnimation()},refreshAxes:function(){var maxX,maxY,x,y,xIndicator,yIndicator,me=this,flags=me.isAxisEnabledFlags,size=me.getSize(),elementSize=me.getElementSize(),indicators=me.getIndicators();size&&elementSize&&(maxX=Math.max(0,size.x-elementSize.x),maxY=Math.max(0,size.y-elementSize.y),x=me.getX(),y=me.getY(),me.setMaxPosition({x:maxX,y:maxY}),!0===x||"auto"===x?flags.x=!!maxX:!1===x?(flags.x=!1,(xIndicator=indicators&&indicators.x)&&xIndicator.hide()):"scroll"===x&&(flags.x=!0),!0===y||"auto"===y?flags.y=!!maxY:!1===y?(flags.y=!1,(yIndicator=indicators&&indicators.y)&&yIndicator.hide()):"scroll"===y&&(flags.y=!0),me.setMaxUserPosition({x:flags.x?maxX:0,y:flags.y?maxY:0}),1===Ext.supports.touchScroll&&(me.initXStyle(),me.initYStyle()))},showIndicators:function(){var xIndicator,yIndicator,indicators=this.getIndicators();indicators&&(this.isAxisEnabled("x")&&(xIndicator=indicators.x)&&xIndicator.show(),this.isAxisEnabled("y")&&(yIndicator=indicators.y)&&yIndicator.show())},snapToBoundary:function(){var me=this,position=me.getPosition();if(!me.isConfiguring&&(position.x||position.y)){var minPosition=me.getMinUserPosition(),maxPosition=me.getMaxUserPosition(),minX=minPosition.x,minY=minPosition.y,maxX=maxPosition.x,maxY=maxPosition.y,x=Math.round(position.x),y=Math.round(position.y);x<minX?x=minX:maxX<x&&(x=maxX),y<minY?y=minY:maxY<y&&(y=maxY),me.doScrollTo(x,y)}},snapToSlot:function(){var snapX=this.getSnapPosition("x"),snapY=this.getSnapPosition("y"),easing=this.getSlotSnapEasing();return(null!==snapX||null!==snapY)&&(this.doScrollTo(snapX,snapY,{easingX:easing.x,easingY:easing.y}),!0)},stopAnimation:function(){this.getTranslatable().stopAnimation()},toggleResizeListeners:function(autoRefresh){var method,innerMethod,innerElement,element=this.getElement();element&&(innerElement=this.getInnerElement(),autoRefresh?method=innerMethod="on":null===autoRefresh?(method="on",innerMethod="un"):method=innerMethod="un",element[method]("resize","onElementResize",this),innerElement[innerMethod]("resize","onInnerElementResize",this))},unwrapContent:function(){for(var child,innerDom=this.getInnerElement().dom,dom=this.getElement().dom;child=innerDom.firstChild;)dom.insertBefore(child,innerDom)},wrapContent:function(element){for(var child,wrap=document.createElement("div"),dom=element.dom;child=dom.lastChild;)wrap.insertBefore(child,wrap.firstChild);return dom.appendChild(wrap),this.setInnerElement(wrap),this._isWrapped=!0,this.getInnerElement()}}}),Ext.define("Ext.scroll.DomScroller",{extend:Ext.scroll.Scroller,alias:"scroller.dom",isDomScroller:!0,getMaxPosition:function(){var dom,element=this.getElement(),x=0,y=0;return element&&!element.destroyed&&(x=(dom=element.dom).scrollWidth-dom.clientWidth,y=dom.scrollHeight-dom.clientHeight),{x:x,y:y}},getMaxUserPosition:function(){var dom,element=this.getElement(),x=0,y=0;return element&&!element.destroyed&&(dom=element.dom,this.getX()&&(x=dom.scrollWidth-dom.clientWidth),this.getY()&&(y=dom.scrollHeight-dom.clientHeight)),{x:x,y:y}},getPosition:function(){return this.positionDirty&&this.updateDomScrollPosition(),this.position},getSize:function(){var dom,element=this.getElement();return element&&!element.destroyed?{x:(dom=element.dom).scrollWidth,y:dom.scrollHeight}:{x:0,y:0}},updateElement:function(element,oldElement){this.initXStyle(),this.initYStyle()},updateX:function(x){this.initXStyle()},updateY:function(y){this.initYStyle()},privates:{doScrollTo:function(x,y,animate){var maxPosition,dom,to,xInf,yInf,element=this.getElement();element&&!element.destroyed&&(dom=element.dom,yInf=y===1/0,((xInf=x===1/0)||yInf)&&(maxPosition=this.getMaxPosition(),xInf&&(x=maxPosition.x),yInf&&(y=maxPosition.y)),x=this.convertX(x),animate?(to={},null!=y&&(to.scrollTop=y),null!=x&&(to.scrollLeft=x),element.animate(Ext.mergeIf({to:{scrollTop:y,scrollLeft:x}},animate))):(null!=y&&(dom.scrollTop=y),null!=x&&(dom.scrollLeft=x,Ext.isIE8&&(dom.scrollLeft,dom.scrollLeft=x))),this.positionDirty=!0)},getElementScroll:function(element){return element.getScroll()},stopAnimation:function(){var anim=this.getElement().getActiveAnimation();anim&&anim.end()}}},function(DomScroller){Ext.onDocumentReady(function(){DomScroller.document=new DomScroller({x:!0,y:!0,element:document.body})})}),Ext.define("Ext.util.Floating",{mixinId:"floating",focusOnToFront:!0,shadow:"sides",animateShadow:!1,constrain:!1,config:{activeCounter:0,alwaysOnTop:!1},preventDefaultAlign:!1,_visModeMap:{visibility:1,display:2,offsets:3},constructor:function(){var shadowOffset,shadowConfig,me=this,el=me.el,shadow=me.shadow;shadow&&(shadowConfig={mode:!0===shadow?"sides":shadow},(shadowOffset=me.shadowOffset)&&(shadowConfig.offset=shadowOffset),shadowConfig.animate=me.animateShadow,shadowConfig.fixed=me.fixed,el.enableShadow(shadowConfig,!1)),(me.shim||Ext.useShims)&&el.enableShim({fixed:me.fixed},!1),el.setVisibilityMode(me._visModeMap[me.hideMode]),me.el.on({mousedown:me.onMouseDown,scope:me,capture:!0}),me.registerWithOwnerCt(),me.initHierarchyEvents()},alignTo:function(alignTarget,position,offsets,animate){var alignEl,me=this;Ext.un("scroll",me.onAlignToScroll,me),(alignEl=alignTarget.isComponent?alignTarget.el:alignTarget.nodeType?Ext.fly(alignTarget):alignTarget).contains(me.el)||Ext.on("scroll",me.onAlignToScroll,me),me._lastAlignTarget=alignTarget,me._lastAlignToPos=position,me.mixins.positionable.alignTo.call(me,alignEl,position,offsets,animate)},initFloatConstrain:function(){var me=this,floatParent=me.floatParent;!me.constrain&&!me.constrainHeader||me.constrainTo||(me.constrainTo=floatParent?floatParent.getTargetEl():me.container)},initHierarchyEvents:function(){var syncHidden=this.syncHidden;this.hasHierarchyEventListeners||(this.mon(Ext.GlobalEvents,{hide:syncHidden,collapse:syncHidden,show:syncHidden,expand:syncHidden,added:syncHidden,scope:this}),this.hasHierarchyEventListeners=!0)},registerWithOwnerCt:function(){var me=this,ownerCt=me.ownerCt,zip=me.zIndexParent;zip&&zip.unregisterFloatingItem(me),zip=me.zIndexParent=me.up("[floating]"),me.floatParent=ownerCt||zip,me.initFloatConstrain(),delete me.ownerCt,zip?zip.registerFloatingItem(me):Ext.WindowManager.register(me)},onMouseDown:function(e){var target,dom,me=this,focusTask=me.focusTask,preventFocus="touch"===e.pointerType;if(me.floating&&(!focusTask||!focusTask.id)){for(target=e.target,dom=me.el.dom;!preventFocus&&target&&target!==dom;)Ext.fly(target).isFocusable()&&(preventFocus=!0),target=target.parentNode;Ext.WindowManager.getActive()===me&&(target===dom||preventFocus)||me.toFront(preventFocus)}},onBeforeFloatLayout:function(){this.el.preventSync=!0},onAfterFloatLayout:function(){var el=this.el;(el.shadow||el.shim)&&(el.setUnderlaysVisible(!0),el.syncUnderlays())},syncHidden:function(){var me=this,hidden=me.hidden||!me.rendered,hierarchicallyHidden=me.hierarchicallyHidden=me.isHierarchicallyHidden(),pendingShow=me.pendingShow;hidden!==hierarchicallyHidden&&(hierarchicallyHidden?(me.hide(),me.pendingShow=!0):pendingShow&&(delete me.pendingShow,pendingShow.length?me.show.apply(me,pendingShow):me.show()))},setZIndex:function(index){return this.el.setZIndex(index),index+=10,this.floatingDescendants&&(index=100*Math.floor(this.floatingDescendants.setBase(index)/100)+1e4),index},doConstrain:function(constrainTo){var xy=this.calculateConstrainedPosition(constrainTo,null,!0);xy&&this.setPosition(xy)},updateActiveCounter:function(activeCounter){var zim=this.zIndexParent;zim&&!1!==this.bringParentToFront&&zim.setActiveCounter(++Ext.ZIndexManager.activeCounter),(zim=this.zIndexManager)&&zim.onComponentUpdate(this)},updateAlwaysOnTop:function(alwaysOnTop){var z=this.zIndexManager;z&&z.onComponentUpdate(this)},toFront:function(preventFocus){var me=this;return me.zIndexManager.bringToFront(me,preventFocus||!me.focusOnToFront)&&me.hasListeners.tofront&&me.fireEvent("tofront",me,me.el.getZIndex()),me},setActive:function(active,doFocus){var activeCmp,me=this;active?(me.el.shadow&&!me.maximized&&me.el.enableShadow(null,!0),doFocus&&((activeCmp=Ext.ComponentManager.getActiveComponent())&&activeCmp.up(me)||me.focus()),me.fireEvent("activate",me)):me.fireEvent("deactivate",me)},toBack:function(){return this.zIndexManager.sendToBack(this),this},center:function(){var xy,me=this;return me.isVisible()?(xy=me.getAlignToXY(me.container,"c-c"),me.setPagePosition(xy)):me.needsCenter=!0,me},onFloatShow:function(){this.needsCenter&&this.center(),delete this.needsCenter,this.toFrontOnShow&&this.toFront()},fitContainer:function(animate){var parent=this.floatParent,container=parent?parent.getTargetEl():this.container,newBox=container.getViewSize(),newPosition=parent||container.dom!==document.body?[0,0]:container.getXY();newBox.x=newPosition[0],newBox.y=newPosition[1],this.setBox(newBox,animate)},privates:{onFloatDestroy:function(){this.clearAlignEl()},clearAlignEl:function(){var me=this;me._lastAlignTarget&&(Ext.un("scroll",me.onAlignToScroll,me),me._lastAlignPos=me._lastAlignTarget=null)},onAlignToScroll:function(scroller){var destroyed,dom,me=this,alignEl=me._lastAlignTarget,alignedToFloater=alignEl.isFloating;alignEl&&(alignEl.isComponent?(destroyed=alignEl.destroyed,alignEl=alignEl.el):(alignEl.nodeType&&(alignEl=Ext.fly(alignEl)),destroyed=!(dom=alignEl.dom)||Ext.isGarbage(dom)),destroyed?me.clearAlignEl():!scroller.getElement().contains(alignEl)&&!alignedToFloater||scroller.getElement().contains(me.el)||me.alignTo(alignEl,me._lastAlignToPos))}}}),Ext.define("Ext.util.ElementContainer",{mixinId:"elementCt",config:{childEls:{$value:{},cached:!0,lazy:!0,merge:function(newValue,oldValue,target,mixinClass){var i,val,childEls=oldValue?Ext.Object.chain(oldValue):{};if(newValue instanceof Array)for(i=newValue.length;i--;)val=newValue[i],mixinClass&&val in childEls||("string"==typeof val?childEls[val]={name:val,itemId:val}:childEls[val.name]=val);else if(newValue)if(newValue.constructor===Object)for(i in newValue)mixinClass&&i in childEls||(!0===(val=newValue[i])?childEls[i]={itemId:i}:"string"==typeof val?childEls[i]={itemId:val}:"itemId"in(childEls[i]=val)||(val.itemId=i),childEls[i].name=i);else mixinClass&&newValue in childEls||(childEls[newValue]={name:newValue,itemId:newValue});return childEls}}},destroy:function(){var child,childName,childEls=this.getChildEls();for(childName in childEls)(child=this[childName])&&(child.destroy&&(child.component=null,child.destroy()),this[childName]=null)},privates:{addChildEl:function(childEl){var childEls=this.getChildEls();this.hasOwnProperty("childEls")||(this.childEls=childEls=Ext.Object.chain(childEls)),"string"==typeof childEl&&(childEl={name:childEl,itemId:childEl}),childEls[childEl.name]=childEl},afterClassMixedIn:function(targetClass){var proto=targetClass.prototype,childEls=proto.childEls;childEls&&(delete proto.childEls,targetClass.getConfigurator().add({childEls:childEls}))},attachChildEls:function(el,owner){var childName,elements,entry,k,selector,value,id,childEls=this.getChildEls(),comp=owner||this,baseId=comp.id+"-",unframed=!comp.frame;for(childName in childEls)if(entry=childEls[childName],!unframed||!entry.frame){if(value=(selector=entry.select)?el.select(selector,!0):(selector=entry.selectNode)?el.selectNode(selector,!1):(id=entry.id)?Ext.cache[id]||el.getById(id):(id=baseId+entry.itemId,Ext.cache[id]))if(value.isElement)value.component=comp;else if(value.isComposite&&!value.isLite)for(k=(elements=value.elements).length;k--;)elements[k].component=comp;this[childName]=value||null}}}}),Ext.define("Ext.util.Renderable",{mixinId:"renderable",frameCls:Ext.baseCSSPrefix+"frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ',Ext.baseCSSPrefix+'table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],_renderState:0,ariaEl:"el",_layerCls:Ext.baseCSSPrefix+"layer",_fixedLayerCls:Ext.baseCSSPrefix+"fixed-layer",ariaStaticRoles:{presentation:!0,article:!0,definition:!0,directory:!0,document:!0,img:!0,heading:!0,math:!0,note:!0,banner:!0,complementary:!0,contentinfo:!0,navigation:!0,search:!0,undefined:!0,null:!0},statics:{makeRenderSetter:function(cfg,renderState){var name=cfg.name;return function(value){var me=this,bucket=me.renderConfigs||(me.renderConfigs={}),pending=bucket[renderState];return me._renderState>=renderState?(cfg.setter||cfg.getSetter()).call(me,value):(pending||(bucket[renderState]=pending={}),name in pending||(pending[name]=me[name]),me[name]=value),me}},processRenderConfig:function(source,configName,state){var cachedSetter,cfg,name,setterName,proto=this.prototype,configurator=this.getConfigurator(),makeSetter=Ext.util.Renderable.makeRenderSetter,renderConfig=source[configName];for(name in renderConfig)proto[setterName=(cfg=Ext.Config.get(name)).names.set]||(cachedSetter=cfg.renderSetter||(cfg.renderSetter={}),proto[setterName]=cachedSetter[state]||(cachedSetter[state]=makeSetter(cfg,state)));delete source[configName],configurator.add(renderConfig)}},onClassMixedIn:function(targetClass){function processOverride(body){body.beforeRenderConfig&&this.processRenderConfig(body,"beforeRenderConfig",1),body.renderConfig&&this.processRenderConfig(body,"renderConfig",3),override.call(this,body)}function processClass(theClass,classBody){theClass.override=processOverride,theClass.processRenderConfig=processRenderConfig,classBody.beforeRenderConfig&&theClass.processRenderConfig(classBody,"beforeRenderConfig",1),classBody.renderConfig&&theClass.processRenderConfig(classBody,"renderConfig",3)}var override=targetClass.override,processRenderConfig=this.processRenderConfig;processClass(targetClass,targetClass.prototype),targetClass.onExtended(processClass)},afterRender:function(){var controller,item,pre,hidden,contentEl,me=this,data={},protoEl=me.protoEl,target=me.el;me.finishRenderChildren(),me._renderState=4,me.contentEl&&(hidden=(pre=Ext.baseCSSPrefix)+"hidden-",(contentEl=me.contentEl=Ext.get(me.contentEl)).component=me,contentEl.removeCls([pre+"hidden",hidden+"display",hidden+"offsets"]),me.getContentTarget().appendChild(contentEl.dom)),protoEl.writeTo(data),(item=data.removed)&&target.removeCls(item),(item=data.cls).length&&target.addCls(item),(item=data.style)&&target.setStyle(item),me.protoEl=null,me.ownerCt||me.skipLayout||me.updateLayout(),me.x&&me.y||!me.pageX&&!me.pageY||me.setPagePosition(me.pageX,me.pageY),me.disableOnRender&&me.onDisable(),(controller=me.controller)&&controller.afterRender&&controller.afterRender(me)},afterFirstLayout:function(width,height){var controller,hasX,hasY,pos,xy,me=this,x=me.x,y=me.y,alignSpec=me.defaultAlign,alignOffset=me.alignOffset;me.ownerLayout||(hasX=void 0!==x,hasY=void 0!==y),!me.floating||me.preventDefaultAlign||hasX&&hasY||(me.floatParent?(pos=me.floatParent.getTargetEl().getViewRegion(),xy=me.el.getAlignToXY(me.alignTarget||me.floatParent.getTargetEl(),alignSpec,alignOffset),pos.x=xy[0]-pos.x,pos.y=xy[1]-pos.y):(xy=me.el.getAlignToXY(me.alignTarget||me.container,alignSpec,alignOffset),pos=me.el.translateXY(xy[0],xy[1])),x=hasX?x:pos.x,y=hasY?y:pos.y,hasX=hasY=!0),(hasX||hasY)&&me.setPosition(x,y),me.onBoxReady(width,height),(controller=me.controller)&&controller.boxReady&&controller.boxReady(me)},beforeRender:function(){var controller,me=this,floating=me.floating,layout=me.getComponentLayout(),cls=me.userCls;me._renderState=1,me.ariaUsesMainElement="el"===me.ariaEl,(controller=me.controller)&&controller.beforeRender&&controller.beforeRender(me),me.initBindable(),me.renderConfigs&&me.flushRenderConfigs(),me.reference&&me.publishState(),cls&&me.addCls(cls),floating&&(me.addCls(me.fixed?me._fixedLayerCls:me._layerCls),(cls=floating.cls)&&me.addCls(cls)),me.frame=me.frame||me.alwaysFramed,layout.initialized||layout.initLayout(),me.initOverflow(),me.setUI(me.ui)},doApplyRenderTpl:function(out,values){var me=values.$comp;me.rendered||me.initRenderTpl().applyOut(values.renderData,out)},getElConfig:function(){var frameData,me=this,autoEl=me.autoEl,frameInfo=me.getFrameInfo(),config={tag:"div",tpl:frameInfo?me.initFramingTpl(frameInfo.table):me.initRenderTpl()},layoutTargetCls=me.layoutTargetCls,protoEl=me.protoEl,ariaRole=me.ariaRole;return me.initStyles(protoEl),layoutTargetCls&&!frameInfo&&protoEl.addCls(layoutTargetCls),protoEl.writeTo(config),protoEl.flush(),autoEl&&(Ext.isString(autoEl)?config.tag=autoEl:Ext.apply(config,autoEl)),ariaRole&&me.ariaUsesMainElement&&(config.role=ariaRole,me.ariaStaticRoles[ariaRole]||(config["aria-hidden"]=!!me.hidden,config["aria-disabled"]=!!me.disabled,me.ariaLabel&&!me.ariaLabelledBy&&(config["aria-label"]=me.ariaLabel),me.collapsible&&(config["aria-expanded"]=!me.collapsed),me.ariaRenderAttributes&&Ext.apply(config,me.ariaRenderAttributes),me.config.ariaAttributes&&Ext.apply(config,me.getAriaAttributes()))),config.id=me.id,config.tpl&&(frameInfo?(config.tplData=frameData=me.getFrameRenderData(),frameData.renderData=me.initRenderData()):config.tplData=me.initRenderData()),me.ariaRenderAttributes=null,config},getInsertPosition:function(position){return void 0!==position&&(position=Ext.isNumber(position)?this.container.dom.childNodes[position]:Ext.getDom(position)),position},getRenderTree:function(){var me=this,ret=null;return me.hasListeners.beforerender&&!1===me.fireEvent("beforerender",me)||(me._renderState=1,me.beforeRender(),me.rendering=!0,me._renderState=2,ret=me.getElConfig(),me.el&&(ret.id=me.$pid=Ext.id(null,me.el.identifiablePrefix))),ret},initRenderData:function(){var data,ariaAttr,me=this,ariaRole=me.ariaRole;return data=Ext.apply({$comp:me,id:me.id,ui:me.ui,uiCls:me.uiCls,baseCls:me.baseCls,componentCls:me.componentCls,frame:me.frame,renderScroller:me.touchScroll,scrollerCls:me.scrollerCls,childElCls:""},me.renderData),ariaRole&&!me.ariaUsesMainElement&&(ariaAttr={role:ariaRole},me.ariaStaticRoles[ariaRole]||(ariaAttr["aria-hidden"]=!!me.hidden,ariaAttr["aria-disabled"]=!!me.disabled,me.ariaLabel&&!me.ariaLabelledBy&&(ariaAttr["aria-label"]=me.ariaLabel),me.collapsible&&(ariaAttr["aria-expanded"]=!me.collapsed),me.ariaRenderAttributes&&Ext.apply(ariaAttr,me.ariaRenderAttributes),me.config.ariaAttributes&&Ext.apply(ariaAttr,me.getAriaAttributes())),data.ariaAttributes=ariaAttr),data},onRender:function(parentNode,containerIdx){var width,height,me=this,x=me.x,y=me.y,lastBox=null,el=me.el;me.applyRenderSelectors(),me.rendering=null,me.rendered=!0,me._renderState=3,me.renderConfigs&&me.flushRenderConfigs(),null!=x&&(lastBox={x:x}),null!=y&&((lastBox=lastBox||{}).y=y),me.getFrameInfo()||(width=me.width,height=me.height,"number"==typeof width&&((lastBox=lastBox||{}).width=width),"number"==typeof height&&((lastBox=lastBox||{}).height=height)),1===me.touchScroll&&me.getOverflowEl().disableTouchScroll(),me.lastBox=el.lastBox=lastBox},render:function(container,position){var vetoed,tree,nextSibling,me=this,el=me.el,ownerLayout=me.ownerLayout;el&&!el.isElement&&(me.wrapPrimaryEl(el),el=me.el),me.skipLayout||Ext.suspendLayouts(),container=me.initContainer(container),nextSibling=me.getInsertPosition(position),el?me.hasListeners.beforerender&&!1===me.fireEvent("beforerender",me)?vetoed=!0:(me.beforeRender(),me.needsRenderTpl=me.rendering=!0,me._renderState=2,me.initStyles(el),!1!==me.allowDomMove&&(nextSibling?container.dom.insertBefore(el.dom,nextSibling):container.dom.appendChild(el.dom))):(tree=me.getRenderTree(),ownerLayout&&ownerLayout.transformItemRenderTree&&(tree=ownerLayout.transformItemRenderTree(tree)),tree&&(el=nextSibling?Ext.DomHelper.insertBefore(nextSibling,tree):Ext.DomHelper.append(container,tree),me.wrapPrimaryEl(el),me.cacheRefEls(el))),el&&!vetoed&&me.finishRender(position),me.skipLayout||Ext.resumeLayouts(!me.hidden&&!container.isDetachedBody)},ensureAttachedToBody:function(runLayout){for(var body,comp=this;comp.ownerCt;)comp=comp.ownerCt;comp.container.isDetachedBody&&(comp.container=body=Ext.getBody(),body.appendChild(comp.el.dom),runLayout&&comp.updateLayout(),"number"!=typeof comp.x&&"number"!=typeof comp.y||comp.setPosition(comp.x,comp.y))},privates:{applyRenderSelectors:function(){var query,selector,me=this,selectors=me.renderSelectors,el=me.el;if(me.attachChildEls(el),me.ariaEl=me[me.ariaEl]||me.el,selectors)for(selector in selectors)(query=selectors[selector])&&(me[selector]=el.selectNode(query,!1))},cacheRefEls:function(el){el=el||this.el;var ref,i,cache=Ext.cache,El=Ext.dom.Element,refs=(el.isElement?el.dom:el).querySelectorAll("[data-ref]"),len=refs.length;for(i=0;i<len;i++)cache[(ref=refs[i]).id]||new El(ref)},doAutoRender:function(){var me=this;me.rendered||(me.floating?me.render(me.renderTo||document.body):me.render(Ext.isBoolean(me.autoRender)?Ext.getBody():me.autoRender))},doRenderContent:function(out,renderData){var me=renderData.$comp,data=me.data;me.html&&(Ext.DomHelper.generateMarkup(me.html,out),delete me.html),me.tpl&&(me.tpl.isTemplate||(me.tpl=new Ext.XTemplate(me.tpl)),data&&(me.data=data=data.isEntity?data.getData(!0):data,me.tpl.applyOut(data,out)))},doRenderFramingDockedItems:function(out,renderData,after){var me=renderData.$comp;!me.rendered&&me.doRenderDockedItems&&(renderData.renderData.$skipDockedItems=!0,me.doRenderDockedItems.call(this,out,renderData,after))},flushRenderConfigs:function(){var bucket,i,name,newConfigs,value,me=this,configs=me.renderConfigs,state=me._renderState;if(configs){for(i=0;i<=state;++i)if(bucket=configs[i])for(name in configs[i]=null,bucket)value=bucket[name],(newConfigs=newConfigs||{})[name]=me[name],me[name]=value;newConfigs&&me.setConfig(newConfigs)}},finishRender:function(containerIdx){var proxy,first,id,tpl,data,dom,el,me=this,cache=Ext.cache;if(!me.el||me.$pid)if(dom=me.container?(el=cache[me.id])?el.dom:me.container.getById(me.id,!0):(el=cache[id=me.$pid||me.id])?el.dom:Ext.getDom(id),me.el){for(delete me.$pid,me.el.dom||me.wrapPrimaryEl(me.el),dom.parentNode.insertBefore(me.el.dom,dom),proxy=dom,first=(dom=me.el.dom).firstChild;proxy.firstChild;)dom.insertBefore(proxy.firstChild,first);me.el.addCls(proxy.className),Ext.removeNode(proxy)}else me.wrapPrimaryEl(dom);else me.needsRenderTpl&&((tpl=me.initRenderTpl())&&(data=me.initRenderData(),tpl.insertFirst(me.getTargetEl(),data)),me.cacheRefEls());(me.el.component=me).container||(me.container=Ext.get(me.el.dom.parentNode)),me.ctCls&&me.container.addCls(me.ctCls),me.onRender(me.container,containerIdx),me.overflowInited||me.initOverflow(),me.el.setVisibilityMode(Ext.Element[me.hideMode.toUpperCase()]),me.overCls&&me.el.hover(me.addOverCls,me.removeOverCls,me),me.hasListeners.render&&me.fireEvent("render",me),me.afterRender(),me.hasListeners.afterrender&&me.fireEvent("afterrender",me),me.initEvents(),me.hidden&&me.el.hide()},finishRenderChildren:function(){this.getComponentLayout().finishRender()},getFrameRenderData:function(){var me=this,frameInfo=me.frameSize,mcStyle="";return me._syncFrameHeight&&me.height&&(mcStyle="height:"+(me.height-frameInfo.height)+"px"),{$comp:me,id:me.id,fgid:me.id+"-frame",ui:me.ui,uiCls:me.uiCls,frameCls:me.frameCls,frameBodyCls:me.layoutTargetCls||"",baseCls:me.baseCls,top:!!frameInfo.top,left:!!frameInfo.left,right:!!frameInfo.right,bottom:!!frameInfo.bottom,mcStyle:mcStyle,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame)return!1;var info,frameTop,frameRight,frameBottom,frameLeft,borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth,paddingTop,paddingRight,paddingBottom,paddingLeft,me=this,frameInfoCache=me.frameInfoCache,cls=me.getFramingInfoCls()+"-frameInfo",frameInfo=frameInfoCache[cls];return null==frameInfo&&(frameInfo=!!(info=Ext.fly(me.getStyleProxy(cls),"frame-style-el").getStyle("font-family"))&&(info=info.split("-"),frameTop=parseInt(info[1],10),frameRight=parseInt(info[2],10),frameBottom=parseInt(info[3],10),frameLeft=parseInt(info[4],10),borderTopWidth=parseInt(info[5],10),borderRightWidth=parseInt(info[6],10),borderBottomWidth=parseInt(info[7],10),borderLeftWidth=parseInt(info[8],10),paddingTop=parseInt(info[9],10),paddingRight=parseInt(info[10],10),paddingBottom=parseInt(info[11],10),paddingLeft=parseInt(info[12],10),{table:"t"===info[0].charAt(0),vertical:"v"===info[0].charAt(1),top:frameTop,right:frameRight,bottom:frameBottom,left:frameLeft,width:frameLeft+frameRight,height:frameTop+frameBottom,border:{top:borderTopWidth,right:borderRightWidth,bottom:borderBottomWidth,left:borderLeftWidth,width:borderLeftWidth+borderRightWidth,height:borderTopWidth+borderBottomWidth},padding:{top:paddingTop,right:paddingRight,bottom:paddingBottom,left:paddingLeft,width:paddingLeft+paddingRight,height:paddingTop+paddingBottom}}),frameInfoCache[cls]=frameInfo),me.frame=!!frameInfo,me.frameSize=frameInfo},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(cls){var result=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,!0));return result.className=cls,result},getFrameTpl:function(table){return this.getTpl(table?"frameTableTpl":"frameTpl")},initContainer:function(container){var me=this;return!container&&me.el&&(container=me.el.dom.parentNode,me.allowDomMove=!1),me.container=container.dom?container:Ext.get(container),me.container},initOverflow:function(){var me=this,overflowStyle=me.getOverflowStyle(),scrollFlags=me.scrollFlags,overflowEl=me.getOverflowEl(),hasOverflow=scrollFlags.y||scrollFlags.x,touchScroll=me.touchScroll=hasOverflow&&Ext.supports.touchScroll;hasOverflow&&overflowEl&&overflowEl.isElement&&(me.overflowInited=!0,2===touchScroll?overflowEl.setStyle("overflow","hidden"):overflowEl.setStyle(overflowStyle))},doRenderPadding:function(out,renderData){var me=renderData.$comp;me.touchScroll&&out.push("padding:",me.unitizeBox(me.padding))},initFramingTpl:function(table){var tpl=this.getFrameTpl(table);return tpl&&!tpl.applyRenderTpl&&this.setupFramingTpl(tpl),tpl},initRenderTpl:function(){var tpl=this.getTpl("renderTpl");return tpl&&!tpl.renderContent&&this.setupRenderTpl(tpl),tpl},setupFramingTpl:function(frameTpl){frameTpl.applyRenderTpl=this.doApplyRenderTpl,frameTpl.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(renderTpl){renderTpl.renderBody=renderTpl.renderContent=this.doRenderContent,renderTpl.renderPadding=this.doRenderPadding},updateFrame:function(){if(!Ext.supports.CSS3BorderRadius&&this.frame){var childEls,childElName,div,el,first,frameData,frameDom,i,newBody,newFrameEls,me=this,dom=me.el.dom,frameTable=me.frameTable,oldFrameBody=me.frameBody,oldFrameBodyDom=oldFrameBody.dom,frameInfo=me.getFrameInfo();for(div=document.createElement("div"),frameData=me.getFrameRenderData(),me.getFrameTpl(frameInfo.table).insertFirst(div,frameData),newFrameEls=div.querySelectorAll("[data-ref]"),newBody=div.querySelector('[data-ref="frameBody"]'),first=oldFrameBodyDom;first.parentNode!==dom;)first=first.parentNode;for(;div.firstChild;)dom.insertBefore(div.firstChild,first);for(childElName in newBody.parentNode.replaceChild(oldFrameBodyDom,newBody),oldFrameBodyDom.className=newBody.className,oldFrameBody.setSize(),childEls=me.getChildEls(),frameTable&&(frameTable.destroy(),me.frameTable=null),childEls)childEls[childElName].frame&&(el=me[childElName])&&el!==oldFrameBody&&(el.destroy(),me[childElName]=null);for(i=newFrameEls.length;i--;)"frameBody"!==(childElName=(frameDom=newFrameEls[i]).getAttribute("data-ref"))&&(me[childElName]=new Ext.dom.Element(frameDom))}},frameInfoCache:{}}}),Ext.define("Ext.state.Provider",{mixins:{observable:Ext.util.Observable},prefix:"ext-",constructor:function(config){Ext.apply(this,config),this.state={},this.mixins.observable.constructor.call(this)},get:function(name,defaultValue){var ret=this.state[name];return void 0===ret?defaultValue:ret},clear:function(name){delete this.state[name],this.fireEvent("statechange",this,name,null)},set:function(name,value){this.state[name]=value,this.fireEvent("statechange",this,name,value)},decodeValue:function(value){var all,type,keyValue,values,vLen,v,matches=/^(a|n|d|b|s|o|e)\:(.*)$/.exec(unescape(value));if(matches&&matches[1])switch(type=matches[1],value=matches[2],type){case"e":return null;case"n":return parseFloat(value);case"d":return new Date(Date.parse(value));case"b":return"1"===value;case"a":if(all=[],value)for(vLen=(values=value.split("^")).length,v=0;v<vLen;v++)value=values[v],all.push(this.decodeValue(value));return all;case"o":if(all={},value)for(vLen=(values=value.split("^")).length,v=0;v<vLen;v++)all[(keyValue=(value=values[v]).split("="))[0]]=this.decodeValue(keyValue[1]);return all;default:return value}},encodeValue:function(value){var enc,len,key,flat="",i=0;if(null==value)return"e:1";if("number"==typeof value)enc="n:"+value;else if("boolean"==typeof value)enc="b:"+(value?"1":"0");else if(Ext.isDate(value))enc="d:"+value.toUTCString();else if(Ext.isArray(value)){for(len=value.length;i<len;i++)flat+=this.encodeValue(value[i]),i!==len-1&&(flat+="^");enc="a:"+flat}else if("object"==typeof value){for(key in value)"function"!=typeof value[key]&&void 0!==value[key]&&(flat+=key+"="+this.encodeValue(value[key])+"^");enc="o:"+flat.substring(0,flat.length-1)}else enc="s:"+value;return escape(enc)}}),Ext.define("Ext.state.Manager",{singleton:!0,constructor:function(){this.provider=new Ext.state.Provider},setProvider:function(stateProvider){this.provider=stateProvider},get:function(key,defaultValue){return this.provider.get(key,defaultValue)},set:function(key,value){this.provider.set(key,value)},clear:function(key){this.provider.clear(key)},getProvider:function(){return this.provider}}),Ext.define("Ext.state.Stateful",{mixinId:"state",stateful:!1,saveDelay:100,constructor:function(){var me=this;me.stateEvents||(me.stateEvents=[]),!1!==me.stateful&&(me.addStateEvents(me.stateEvents),me.initState())},addStateEvents:function(events){var i,event,stateEventsByName,eventArray,me=this;if(me.stateful&&me.getStateId())for(eventArray="string"==typeof events?arguments:events,stateEventsByName=me.stateEventsByName||(me.stateEventsByName={}),i=eventArray.length;i--;)(event=eventArray[i])&&!stateEventsByName[event]&&(stateEventsByName[event]=1,me.on(event,me.onStateChange,me))},onStateChange:function(){var statics,runner,me=this,delay=me.saveDelay;me.stateful&&(delay?(me.stateTask||(runner=(statics=Ext.state.Stateful).runner||(statics.runner=new Ext.util.TaskRunner),me.stateTask=runner.newTask({run:me.saveState,scope:me,interval:delay,repeat:1,fireIdleEvent:!1})),me.stateTask.start()):me.saveState())},saveState:function(){var plugins,plugin,i,len,state,pluginState,me=this,id=me.stateful&&me.getStateId(),hasListeners=me.hasListeners;if(id){for(state=me.getState()||{},i=0,len=(plugins=me.getPlugins()||[]).length;i<len;i++)(plugin=plugins[i])&&plugin.getState&&(pluginState=plugin.getState(state))&&!state[plugin.ptype]&&(state[plugin.ptype]=pluginState);hasListeners.beforestatesave&&!1===me.fireEvent("beforestatesave",me,state)||(Ext.state.Manager.set(id,state),hasListeners.statesave&&me.fireEvent("statesave",me,state))}},getState:function(){return null},applyState:function(state){state&&Ext.apply(this,state)},getStateId:function(){return this.stateId||(this.autoGenId?null:this.id)},initState:function(){var state,combinedState,i,len,plugins,plugin,pluginType,me=this,id=me.stateful&&me.getStateId(),hasListeners=me.hasListeners;if(id&&(combinedState=Ext.state.Manager.get(id))&&(state=Ext.apply({},combinedState),!hasListeners.beforestaterestore||!1!==me.fireEvent("beforestaterestore",me,combinedState))){for(i=0,len=(plugins=me.getPlugins()||[]).length;i<len;i++)(plugin=plugins[i])&&(pluginType=plugin.ptype,plugin.applyState&&plugin.applyState(state[pluginType],combinedState),delete state[pluginType]);me.applyState(state),hasListeners.staterestore&&me.fireEvent("staterestore",me,combinedState)}},savePropToState:function(propName,state,stateName){var value=this[propName],config=this.initialConfig;return!(!this.hasOwnProperty(propName)||config&&config[propName]===value)&&(state&&(state[stateName||propName]=value),!0)},savePropsToState:function(propNames,state){var i,n;if("string"==typeof propNames)this.savePropToState(propNames,state);else for(i=0,n=propNames.length;i<n;++i)this.savePropToState(propNames[i],state);return state},destroy:function(){var task=this.stateTask;task&&(task.destroy(),this.stateTask=null),this.clearListeners()}}),Ext.define("Ext.util.Focusable",{mixinId:"focusable",hasFocus:!1,focusable:!1,focusCls:"focus",initFocusable:Ext.emptyFn,initFocusableEvents:function(){this.initFocusableElement()},getFocusClsEl:function(){return this.getFocusEl()},getFocusEl:function(){return this.element||this.el},destroyFocusable:function(){var me=this;Ext.destroy(me.focusListeners),me.focusListeners=me.focusEnterEvent=me.focusTask=null,me.focusEl=me.ariaEl=null},enableFocusable:Ext.emptyFn,disableFocusable:function(){var focusTarget,focusClsEl,me=this,focusCls=me.focusCls;me.hasFocus&&(focusTarget=me.findFocusTarget())&&focusTarget.focus(),focusClsEl=me.getFocusClsEl(),focusCls&&focusClsEl&&focusClsEl.removeCls(me.removeClsWithUI(focusCls,!0))},isFocusable:function(deep){var focusEl;return!!(this.focusable||this.isContainer&&deep)&&(!(!(focusEl=this.getFocusEl())||!this.canFocus())&&focusEl.isFocusable(deep))},canFocus:function(skipVisibility,includeFocusTarget){var me=this;return(me.isContainer||me.focusable)&&me.rendered&&!me.destroying&&!me.destroyed&&!me.disabled&&(skipVisibility||me.isVisible(!0))||includeFocusTarget&&!!me.findFocusTarget()},focus:function(selectText,delay,callback,scope){var focusTarget,focusElDom,containerScrollTop,me=this;if((me.focusable||me.isContainer)&&!me.destroyed&&!me.destroying){if(delay)return me.getFocusTask().delay(Ext.isNumber(delay)?delay:10,me.focus,me,[selectText,!1,callback,scope]),me;if(me.cancelFocus(),me.canFocus()){if(focusTarget=me.getFocusEl()){if(focusTarget.isComponent)return focusTarget.focus(selectText,delay,callback,scope);(focusElDom=focusTarget.dom)&&(me.floating&&(containerScrollTop=me.container.dom.scrollTop),focusTarget.focus(),selectText&&(Ext.isArray(selectText)?me.selectText&&me.selectText.apply(me,selectText):focusElDom.select?focusElDom.select():me.selectText&&me.selectText()),Ext.callback(callback,scope)),me.floating&&void 0!==containerScrollTop&&(me.container.dom.scrollTop=containerScrollTop)}}else if(focusTarget=me.findFocusTarget())return focusTarget.focus(selectText,delay,callback,scope);return me}},cancelFocus:function(){var task=this.getFocusTask();task&&task.cancel()},beforeBlur:Ext.emptyFn,onBlur:function(e){var focusClsEl,me=this,container=me.focusableContainer,focusCls=me.focusCls;me.focusable&&!me.destroying&&(me.beforeBlur(e),container&&container.beforeFocusableChildBlur(me,e),focusClsEl=me.getFocusClsEl(),focusCls&&focusClsEl&&focusClsEl.removeCls(me.removeClsWithUI(focusCls,!0)),me.validateOnBlur&&me.validate(),me.hasFocus=!1,me.fireEvent("blur",me,e),me.postBlur(e),container&&container.afterFocusableChildBlur(me,e))},postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,onFocus:function(e){var focusClsEl,me=this,container=me.focusableContainer,focusCls=me.focusCls;me.focusable&&me.canFocus()&&(me.beforeFocus(e),container&&container.beforeFocusableChildFocus(me,e),focusClsEl=me.getFocusClsEl(),focusCls&&focusClsEl&&focusClsEl.addCls(me.addClsWithUI(focusCls,!0)),me.hasFocus||(me.hasFocus=!0,me.fireEvent("focus",me,e)),me.postFocus(e),container&&container.afterFocusableChildFocus(me,e))},postFocus:Ext.emptyFn,getTabIndex:function(){var el,index,me=this;if(me.focusable){if(el=me.rendered&&me.getFocusEl()){if(el.isComponent)index=el.getTabIndex();else{if(!el.isElement)return;index=el.getAttribute("tabIndex")}me.tabIndex=index}else index=me.tabIndex;return+index}},setTabIndex:function(newTabIndex,focusEl){var el;this.focusable&&(this.tabIndex=newTabIndex,this.rendered&&(el=focusEl||this.getFocusEl())&&(el.isComponent?el.setTabIndex(newTabIndex):el.isElement&&el.set({tabIndex:newTabIndex})))},onFocusEnter:function(e){var me=this;me.floating&&me!==me.zIndexManager.getActive()&&me.toFront(!0),me.focusEnterEvent=e,me.containsFocus=!0,me.fireEvent("focusenter",me,e)},onFocusLeave:function(e){this.focusEnterEvent=null,this.containsFocus=!1,this.fireEvent("focusleave",this,e)},privates:{revertFocus:function(){var focusTarget,me=this,previousFocus=me.previousFocus,focusEvent=me.focusEnterEvent;if(me.previousFocus=null,!me.preventRefocus&&me.el.contains(Ext.Element.getActiveElement())){if(focusTarget=previousFocus||focusEvent&&focusEvent.fromComponent){if(focusTarget.canFocus&&focusTarget.canFocus(!1,!0))return void focusTarget.focus();if(focusTarget.nodeType&&(focusTarget=Ext.fly(focusTarget)),focusTarget.isFocusable&&focusTarget.isFocusable())return void focusTarget.focus()}focusEvent&&(focusTarget=Ext.fly(focusEvent.relatedTarget),(Ext.isIE8||focusTarget.isFocusable&&focusTarget.isFocusable())&&focusTarget.focus())}},findFocusTarget:function(){var owner,focusTargets;for(owner=this.up(":not([disabled])");owner;owner=owner.up(":not([disabled])")){if((focusTargets=Ext.ComponentQuery.query(":focusable:not([hasFocus])",owner)).length)return focusTargets[0];if(owner.isFocusable&&owner.isFocusable())return owner}},initFocusableElement:function(){var me=this,tabIndex=me.tabIndex,focusEl=me.getFocusEl();focusEl&&!focusEl.isComponent&&(me.focusEl=focusEl,null!=tabIndex&&me.canFocus(!0)&&me.setTabIndex(tabIndex,focusEl),focusEl.dom.setAttribute("data-componentid",me.id),me.config.keyHandlers&&me.initKeyHandlers(focusEl))},getFocusTask:function(){return this.focusTask||(this.focusTask=Ext.focusTask),this.focusTask},handleFocusEvent:function(e){var event;this.isFocusing(e)&&((event=new Ext.event.Event(e.event)).type="focus",event.relatedTarget=e.fromElement,event.target=e.toElement,this.onFocus(event))},handleBlurEvent:function(e){var event;this.isBlurring(e)&&((event=new Ext.event.Event(e.event)).type="blur",event.target=e.fromElement,event.relatedTarget=e.toElement,this.onBlur(event))},isFocusing:function(e){var focusEl,from=e.fromElement,to=e.toElement;return!(!this.focusable||!(focusEl=this.getFocusEl()))&&(focusEl.isComponent?focusEl.isFocusing(from,to):to===focusEl.dom&&from!==to)},isBlurring:function(e){var focusEl,from=e.fromElement,to=e.toElement;return!(!this.focusable||!(focusEl=this.getFocusEl()))&&(focusEl.isComponent?focusEl.isBlurring(from,to):from===focusEl.dom&&from!==to)},blur:function(){var focusEl,me=this;if(me.focusable&&me.canFocus())return(focusEl=me.getFocusEl())&&(me.blurring=!0,focusEl.blur(),delete me.blurring),me},disableTabbing:function(){var focusEl,el=this.el;el&&el.saveTabbableState(),(focusEl=this.getFocusEl())&&(focusEl.isComponent?focusEl.disableTabbing():focusEl.isElement&&el&&!el.contains(focusEl)&&focusEl.saveTabbableState())},enableTabbing:function(){var focusEl,el=this.el;(focusEl=this.getFocusEl())&&(focusEl.isComponent?focusEl.enableTabbing():focusEl.isElement&&el&&!el.contains(focusEl)&&focusEl.restoreTabbableState()),el&&el.restoreTabbableState()}}},function(){Ext.focusTask||(Ext.focusTask=new Ext.util.DelayedTask)}),Ext.define("Ext.mixin.Accessible",{extend:Ext.Mixin,mixinConfig:{id:"accessible"},config:{ariaAttributes:{$value:null,lazy:!0}},privates:{getAriaLabelEl:function(selector){var refHolder,i,len,cmp,ids=[];if(selector){if(Ext.isFunction(selector))return selector.call(this);if(Ext.isArray(selector)||(selector=[selector]),refHolder=this.lookupReferenceHolder())for(i=0,len=selector.length;i<len;i++)(cmp=refHolder.lookupReference(selector[i]))&&ids.push(cmp.ariaEl.id)}return ids.length?ids.join(" "):null}}}),Ext.define("Ext.util.KeyboardInteractive",{extend:Ext.Mixin,mixinConfig:{id:"keyboardinteractive"},config:{keyHandlers:{$value:null,lazy:!0}},initKeyHandlers:function(focusEl){var handler,handlers=this.getKeyHandlers();for(handler in handlers){focusEl.on("keydown",this.handleKeydown,this),this.keydownListenerAttached=!0;break}},applyKeyHandlers:function(config){var focusEl,keyName,handlerName,me=this,handlers={};if(config){for(keyName in config)handlerName=config[keyName],handlers[keyName]="function"==typeof handlerName?handlerName:me[handlerName];me.focusable&&me.rendered&&!me.destroyed&&!me.destroying&&(focusEl=me.getFocusEl())&&!me.keydownListenerAttached&&(focusEl.on("keydown",me.handleKeydown,me),me.keydownListenerAttached=!0)}return handlers},handleKeydown:function(e){var keyName,handlerFn;(keyName=e.getKeyName())&&(handlerFn=this.getKeyHandlers()[keyName])&&handlerFn.call(this,e)}}),Ext.define("Ext.Component",{alternateClassName:"Ext.AbstractComponent",xtype:["component","box"],mixins:[Ext.mixin.Inheritable,Ext.util.Floating,Ext.util.Positionable,Ext.util.Observable,Ext.mixin.ComponentDelegation,Ext.mixin.Bindable,Ext.util.Animate,Ext.util.ElementContainer,Ext.util.Renderable,Ext.state.Stateful,Ext.util.Focusable,Ext.mixin.Accessible,Ext.util.KeyboardInteractive],statics:{AUTO_ID:1e3,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g,ariaHighContrastModeCls:Ext.baseCSSPrefix+"aria-highcontrast",cancelLayout:function(comp,isDestroying){var context=this.runningLayoutContext||this.pendingLayouts;context&&context.cancelComponent(comp,!1,isDestroying)},fromElement:function(node,limit,selector){return Ext.ComponentManager.fromElement(node,limit,selector)},flushLayouts:function(){var me=this,context=me.pendingLayouts;context&&context.invalidQueue.length&&(me.pendingLayouts=null,me.runningLayoutContext=context,Ext.override(context,{runComplete:function(){me.runningLayoutContext=null;var result=this.callParent();return Ext.GlobalEvents.hasListeners.afterlayout&&Ext.GlobalEvents.fireEvent("afterlayout"),result}}),context.run())},resumeLayouts:function(flush){this.layoutSuspendCount&&!--this.layoutSuspendCount&&(flush&&this.flushLayouts(),Ext.GlobalEvents.hasListeners.resumelayouts&&Ext.GlobalEvents.fireEvent("resumelayouts"))},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(comp,defer){var me=this,running=me.runningLayoutContext;running?running.queueInvalidate(comp):((me.pendingLayouts||(me.pendingLayouts=new Ext.layout.Context)).queueInvalidate(comp),defer||me.layoutSuspendCount||comp.isLayoutSuspended()||me.flushLayouts())}},$configPrefixed:!1,$configStrict:!1,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,scrollable:null},defaultBindProperty:"html",alignTarget:null,autoRender:!1,autoShow:!1,baseCls:Ext.baseCSSPrefix+"component",childEls:{frameTable:{frame:!0},frameTL:{frame:"tl"},frameTC:{frame:"tc"},frameTR:{frame:"tr"},frameML:{frame:"ml"},frameBody:{frame:"mc"},frameMR:{frame:"mr"},frameBL:{frame:"bl"},frameBC:{frame:"bc"},frameBR:{frame:"br"}},componentLayout:"autocomponent",defaultAlign:"c-c",disabled:!1,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:function(){var re=["input","select","textarea","optgroup","option","table"];return!Ext.isIE9m||Ext.isIE9&&!Ext.isIEQuirks||re.push("p"),new RegExp("^(?:"+re.join("|")+")$","i")}(),disabledCls:Ext.baseCSSPrefix+"item-disabled",draggable:!1,floating:!1,hidden:!1,hideMode:"display",maskElement:null,renderTpl:['<tpl if="renderScroller">','<div class="{scrollerCls}" style="{%this.renderPadding(out, values)%}">',"</tpl>","{%this.renderContent(out,values)%}",'<tpl if="renderScroller"></div></tpl>'],resizeHandles:"all",shrinkWrap:2,toFrontOnShow:!0,synthetic:!1,tplWriteMode:"overwrite",ui:"default",uiCls:[],userCls:null,weight:null,allowDomMove:!0,autoGenId:!1,borderBoxCls:Ext.baseCSSPrefix+"border-box",componentLayoutCounter:0,contentPaddingProperty:"padding",deferLayouts:!1,frameSize:null,horizontalPosProp:"left",isComponent:!0,_isLayoutRoot:!1,layoutSuspendCount:0,liquidLayout:!1,maskOnDisable:!0,offsetsCls:Ext.baseCSSPrefix+"hidden-offsets",rendered:!1,rootCls:Ext.baseCSSPrefix+"body",scrollerCls:Ext.baseCSSPrefix+"scroll-scroller",scrollerSelector:"."+Ext.baseCSSPrefix+"scroll-scroller",_scrollFlags:{auto:{auto:{overflowX:"auto",overflowY:"auto",x:!0,y:!0,both:!0},false:{overflowX:"auto",overflowY:"hidden",x:!0,y:!1,both:!1},scroll:{overflowX:"auto",overflowY:"scroll",x:!0,y:!0,both:!0}},false:{auto:{overflowX:"hidden",overflowY:"auto",x:!1,y:!0,both:!1},false:{overflowX:"hidden",overflowY:"hidden",x:!1,y:!1,both:!1},scroll:{overflowX:"hidden",overflowY:"scroll",x:!1,y:!0,both:!1}},scroll:{auto:{overflowX:"scroll",overflowY:"auto",x:!0,y:!0,both:!0},false:{overflowX:"scroll",overflowY:"hidden",x:!0,y:!1,both:!1},scroll:{overflowX:"scroll",overflowY:"scroll",x:!0,y:!0,both:!0}},none:{overflowX:"",overflowY:"",x:!1,y:!1,both:!1}},_scrollableCfg:{x:{x:!0,y:!1},y:{x:!1,y:!0},horizontal:{x:!0,y:!1},vertical:{x:!1,y:!0},both:{x:!0,y:!0},true:{x:!0,y:!0}},validIdRe:Ext.validIdRe,constructor:function(config){var i,len,xhooks,controller,autoScroll,overflowX,overflowY,scrollable,me=this;if((config=config||{}).initialConfig?(config.isAction&&(me.baseAction=config),config=config.initialConfig):(config.tagName||config.dom||Ext.isString(config))&&(config={applyTo:config,id:config.id||config}),me.initialConfig=config,me.getId(),me.protoEl=new Ext.util.ProtoElement,me.initConfig(config),null==me.scrollable&&((autoScroll=me.autoScroll)?scrollable=!!autoScroll:(overflowX=me.overflowX,overflowY=me.overflowY,(overflowX||overflowY)&&(scrollable={x:!(!overflowX||"hidden"===overflowX)&&overflowX,y:!(!overflowY||"hidden"===overflowY)&&overflowY})),scrollable&&me.setScrollable(scrollable)),(xhooks=me.xhooks)&&(delete me.xhooks,Ext.override(me,xhooks)),me.mixins.elementCt.constructor.call(me),me.setupProtoEl(),me.cls&&(me.initialCls=me.cls,me.protoEl.addCls(me.cls)),me.style&&(me.initialStyle=me.style,me.protoEl.setStyle(me.style)),me.renderData=me.renderData||{},me.initComponent(),me.preventRegister||Ext.ComponentManager.register(me),me.mixins.state.constructor.call(me),me.addStateEvents("resize"),(controller=me.getController())&&controller.init(me),me.plugins)for(i=0,len=me.plugins.length;i<len;i++)me.plugins[i]=me.initPlugin(me.plugins[i]);me.loader=me.getLoader(),me.disabled&&(me.disabled=!1,me.disable(!0)),me.renderTo&&me.render(me.renderTo),me.autoShow&&!me.$initParent&&me.show(),me.baseAction&&me.baseAction.addComponent(me)},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(cls){var el=this.rendered?this.el:this.protoEl;return el.addCls.apply(el,arguments),this},addClsWithUI:function(classes,skip){var length,cls,me=this,clsArray=[],i=0,uiCls=me.uiCls=Ext.Array.clone(me.uiCls),activeUI=me.activeUI;for("string"==typeof classes&&(classes=classes.indexOf(" ")<0?[classes]:Ext.String.splitWords(classes)),length=classes.length;i<length;i++)(cls=classes[i])&&!me.hasUICls(cls)&&(uiCls.push(cls),activeUI&&(clsArray=clsArray.concat(me.addUIClsToElement(cls))));return!0!==skip&&activeUI&&me.addCls(clsArray),clsArray},afterComponentLayout:function(width,height,oldWidth,oldHeight){var scroller,me=this;1==++me.componentLayoutCounter&&((scroller=me.scrollable)&&(me.touchScroll&&scroller.isTouchScroller&&scroller.setInnerElement(me.getScrollerEl()),scroller.setElement(me.getOverflowEl()),Ext.isIE&&Ext.on("show",me.onGlobalShow,me)),me.afterFirstLayout(width,height)),width===oldWidth&&height===oldHeight||me.onResize(width,height,oldWidth,oldHeight),me.floating&&me.onAfterFloatLayout()},addPlugin:function(plugin){var me=this;return plugin=me.constructPlugin(plugin),me.plugins?me.plugins.push(plugin):me.plugins=[plugin],me.pluginsInitialized&&me.initPlugin(plugin),plugin},addPropertyToState:function(state,propName,value){var len=arguments.length;return 3!==len&&!this.hasOwnProperty(propName)||(len<3&&(value=this[propName]),value!==this.initialConfig[propName]&&((state=state||{})[propName]=value)),state},addUIClsToElement:function(uiCls){var childEls,childElName,el,suffix,me=this,baseClsUI=me.baseCls+"-"+me.ui+"-"+uiCls,result=[Ext.baseCSSPrefix+uiCls,me.baseCls+"-"+uiCls,baseClsUI];if(me.rendered&&me.frame&&!Ext.supports.CSS3BorderRadius)for(childElName in baseClsUI+="-",childEls=me.getChildEls())(suffix=childEls[childElName].frame)&&!0!==suffix&&(el=me[childElName])&&el.addCls(baseClsUI+suffix);return result},removeUIClsFromElement:function(uiCls){var childEls,childElName,el,suffix,me=this,baseClsUI=me.baseCls+"-"+me.ui+"-"+uiCls,result=[Ext.baseCSSPrefix+uiCls,me.baseCls+"-"+uiCls,baseClsUI];if(me.rendered&&me.frame&&!Ext.supports.CSS3BorderRadius)for(childElName in baseClsUI+="-",childEls=me.getChildEls())(suffix=childEls[childElName].frame)&&!0!==suffix&&(el=me[childElName])&&el.removeCls(baseClsUI+suffix);return result},adjustPosition:function(x,y){var floatParentBox;return this.isContainedFloater()&&(x+=(floatParentBox=this.floatParent.getTargetEl().getViewRegion()).left,y+=floatParentBox.top),{x:x,y:y}},afterHide:function(cb,scope){var me=this,container=me.focusableContainer;me.hiddenByLayout=null,this.ownerLayout&&this.updateLayout({isRoot:!1}),Ext.callback(cb,scope||me),me.fireHierarchyEvent("hide"),me.fireEvent("hide",me),container&&container.onFocusableChildHide(me)},afterSetPosition:function(x,y){this.onPosition(x,y),this.hasListeners.move&&this.fireEvent("move",this,x,y)},afterShow:function(animateTarget,cb,scope){var fromBox,toBox,ghostPanel,me=this,myEl=me.el;animateTarget=me.getAnimateTarget(animateTarget),me.ghost||(animateTarget=null),animateTarget?(toBox={x:myEl.getX(),y:myEl.getY(),width:myEl.dom.offsetWidth,height:myEl.dom.offsetHeight},fromBox={x:animateTarget.getX(),y:animateTarget.getY(),width:animateTarget.dom.offsetWidth,height:animateTarget.dom.offsetHeight},myEl.addCls(me.offsetsCls),(ghostPanel=me.ghost()).el.stopAnimation(),ghostPanel.setX(-1e4),me.ghostBox=toBox,ghostPanel.el.animate({from:fromBox,to:toBox,listeners:{afteranimate:function(){delete ghostPanel.componentLayout.lastComponentSize,me.unghost(),delete me.ghostBox,myEl.removeCls(me.offsetsCls),me.onShowComplete(cb,scope)}}})):me.onShowComplete(cb,scope),me.fireHierarchyEvent("show")},animate:function(animObj){var hasToWidth,hasToHeight,toHeight,toWidth,to,clearWidth,clearHeight,curWidth,w,curHeight,h,isExpanding,wasConstrained,wasConstrainedHeader,passedCallback,oldOverflow,me=this;return to=(animObj=animObj||{}).to||{},Ext.fx.Manager.hasFxBlock(me.id)?me:((hasToWidth=Ext.isDefined(to.width))&&(toWidth=Ext.Number.constrain(to.width,me.minWidth,me.maxWidth)),(hasToHeight=Ext.isDefined(to.height))&&(toHeight=Ext.Number.constrain(to.height,me.minHeight,me.maxHeight)),animObj.dynamic||!hasToWidth&&!hasToHeight||(w=curWidth=(animObj.from?animObj.from.width:void 0)||me.getWidth(),h=curHeight=(animObj.from?animObj.from.height:void 0)||me.getHeight(),isExpanding=!1,hasToHeight&&curHeight<toHeight&&(h=toHeight,isExpanding=!0),hasToWidth&&curWidth<toWidth&&(w=toWidth,isExpanding=!0),(hasToHeight||hasToWidth)&&"hidden"!==(oldOverflow=me.el.getStyle("overflow"))&&me.el.setStyle("overflow","hidden"),isExpanding&&(clearWidth=!Ext.isNumber(me.width),clearHeight=!Ext.isNumber(me.height),me.setSize(w,h),me.el.setSize(curWidth,curHeight),clearWidth&&delete me.width,clearHeight&&delete me.height),hasToWidth&&(to.width=toWidth),hasToHeight&&(to.height=toHeight)),wasConstrained=me.constrain,wasConstrainedHeader=me.constrainHeader,(wasConstrained||wasConstrainedHeader)&&(me.constrain=me.constrainHeader=!1,passedCallback=animObj.callback,animObj.callback=function(){me.constrain=wasConstrained,me.constrainHeader=wasConstrainedHeader,passedCallback&&passedCallback.call(animObj.scope||me,arguments),"hidden"!==oldOverflow&&me.el.setStyle("overflow",oldOverflow)}),me.mixins.animate.animate.apply(me,arguments))},applyScrollable:function(scrollable,oldScrollable){var innerEl,me=this,rendered=me.rendered;return scrollable?(!0!==scrollable&&"string"!=typeof scrollable||(scrollable=me._scrollableCfg[scrollable]),oldScrollable?(oldScrollable.setConfig(scrollable),scrollable=oldScrollable):(scrollable=Ext.Object.chain(scrollable),rendered&&(scrollable.element=me.getOverflowEl(),(innerEl=me.getScrollerEl())&&(scrollable.innerElement=innerEl)),scrollable.autoRefresh=!1,1===Ext.supports.touchScroll&&(scrollable.translatable={translationMethod:"scrollparent"},scrollable.indicators=!1),(scrollable=Ext.scroll.Scroller.create(scrollable)).component=me)):oldScrollable&&(oldScrollable.setConfig({x:!1,y:!1}),oldScrollable.destroy(),scrollable=null),!me.rendered||me.destroying||me.destroyed||(scrollable?me.getOverflowStyle():me.scrollFlags=me._scrollFlags.none,me.updateLayout()),scrollable},beforeComponentLayout:function(){return!0},beforeDestroy:Ext.emptyFn,beforeLayout:function(){this.floating&&this.onBeforeFloatLayout()},beforeSetPosition:function(x,y,animate){var x0,hasX,hasY,adj,me=this,pos=null;return x&&(Ext.isNumber(x0=x[0])?(animate=y,y=x[1],x=x0):void 0!==(x0=x.x)&&(animate=y,y=x.y,x=x0)),(me.constrain||me.constrainHeader)&&(pos=me.calculateConstrainedPosition(null,[x,y],!0))&&(x=pos[0],y=pos[1]),hasY=void 0!==y,((hasX=void 0!==x)||hasY)&&(me.x=x,me.y=y,pos={x:(adj=me.adjustPosition(x,y)).x,y:adj.y,anim:animate,hasX:hasX,hasY:hasY}),pos},beforeShow:Ext.emptyFn,bubble:function(fn,scope,args){for(var p=this;p&&!1!==fn.apply(scope||p,args||[p]);)p=p.getBubbleTarget();return this},clearListeners:function(){this.mixins.observable.clearListeners.call(this),this.mixins.componentDelegation.clearDelegatedListeners.call(this)},cloneConfig:function(overrides){var id=(overrides=overrides||{}).id||Ext.id(),cfg=Ext.applyIf(overrides,this.initialConfig);return cfg.id=id,new(Ext.getClass(this))(cfg)},destroy:function(){var selector,ownerCt,el,me=this,selectors=me.renderSelectors;me.getConfig("viewModel",!0),me.getConfig("session",!0);if(!me.hasListeners.beforedestroy||!1!==me.fireEvent("beforedestroy",me)){if(me.isDestroying=me.destroying=!0,ownerCt=me.floatParent||me.ownerCt,me.floating&&(delete me.floatParent,me.zIndexManager&&(me.zIndexManager.unregister(me),me.zIndexManager=null)),me.removeBindings(),me.beforeDestroy(),me.destroyBindable(),ownerCt&&ownerCt.remove&&ownerCt.remove(me,!1),me.stopAnimation(),me.onDestroy(),Ext.destroy(me.plugins),me.rendered&&Ext.Component.cancelLayout(me,!0),me.componentLayout=null,me.hasListeners.destroy&&me.fireEvent("destroy",me),me.preventRegister||Ext.ComponentManager.unregister(me),me.mixins.state.destroy.call(me),me.floating&&me.onFloatDestroy(),me.clearListeners(),me.rendered){if(me.preserveElOnDestroy||me.el.destroy(),me.el.component=null,me.mixins.elementCt.destroy.call(me),selectors)for(selector in selectors)selectors.hasOwnProperty(selector)&&(el=me[selector])&&(delete me[selector],el.destroy());me.data=me.el=me.frameBody=me.rendered=me.afterRenderEvents=null,me.tpl=me.renderTpl=me.renderData=null,me.focusableContainer=me.container=me.scrollable=null}me.isDestroying=me.destroying=!1,me.callParent()}},disable:function(silent,fromParent){var me=this,container=me.focusableContainer,inherited=me.getInherited();return fromParent||(inherited.disabled=!0,me.savedDisabled=!0),me.maskOnDisable&&(inherited.disableMask=!0),me.disabled||(container&&container.beforeFocusableChildDisable(me),me.addCls(me.disabledCls),me.rendered?me.onDisable():me.disableOnRender=!0,(me.disabled=!0)!==silent&&me.fireEvent("disable",me),container&&container.onFocusableChildDisable(me)),me},doFireEvent:function(eventName,args,bubbles){var ret=this.mixins.observable.doFireEvent.call(this,eventName,args,bubbles);return!1!==ret&&(ret=this.mixins.componentDelegation.doFireDelegatedEvent.call(this,eventName,args)),ret},enable:function(silent,fromParent){var me=this,container=me.focusableContainer,inherited=me.getInherited();return fromParent||(delete me.getInherited().disabled,me.savedDisabled=!1),me.maskOnDisable&&delete inherited.disableMask,me.disabled&&(fromParent&&inherited.hasOwnProperty("disabled")||(container&&container.beforeFocusableChildEnable(me),me.disableOnRender=!1,me.removeCls(me.disabledCls),me.rendered&&me.onEnable(),!(me.disabled=!1)!==silent&&me.fireEvent("enable",me),container&&container.onFocusableChildEnable(me))),me},findParentBy:function(fn){var p;for(p=this.getRefOwner();p&&!fn(p,this);p=p.getRefOwner());return p||null},findParentByType:function(xtype){return Ext.isFunction(xtype)?this.findParentBy(function(p){return p.constructor===xtype}):this.up(xtype)},findPlugin:function(ptype){var i,plugins=this.plugins,ln=plugins&&plugins.length;for(i=0;i<ln;i++)if(plugins[i].ptype===ptype)return plugins[i]},getAnimateTarget:function(target){return(target=(target=target||this.animateTarget)&&(target.isComponent?target.getEl():Ext.get(target)))||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var me=this;return me.componentLayout&&me.componentLayout.isLayout||me.setComponentLayout(Ext.layout.Layout.create(me.componentLayout,"autocomponent")),me.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(inheritedState){var me=this,layout=me.componentLayout;me.hidden&&(inheritedState.hidden=!0),me.collapseImmune&&(inheritedState.collapseImmune=!0),void 0!==me.modelValidation&&(inheritedState.modelValidation=me.modelValidation),me.savedDisabled&&(inheritedState.disabled=!0),me.mixins.bindable.initInheritedState.call(me,inheritedState),layout&&layout.initInheritedState&&layout.initInheritedState(inheritedState)},getId:function(){var xtype,me=this;return me.id||(me.id=me.initialConfig.id)||(xtype=(xtype=me.getXType())?xtype.replace(Ext.Component.INVALID_ID_CHARS_Re,"-"):Ext.name.toLowerCase()+"-comp",me.id=xtype+"-"+me.getAutoId()),me.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var me=this,loader=me.loader;return loader?(loader.isLoader?loader.setTarget(me):me.loader=new Ext.ComponentLoader(Ext.apply({target:me},loader)),me.loader):null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(pluginId){var i,plugins=this.plugins,ln=plugins&&plugins.length;for(i=0;i<ln;i++)if(plugins[i].pluginId===pluginId)return plugins[i];return null},getPosition:function(local){var xy,floatParentBox,me=this,isContainedFloater=me.isContainedFloater();return!0!==local||isContainedFloater?(xy=me.getXY(),!0===local&&isContainedFloater&&(floatParentBox=me.floatParent.getTargetEl().getViewRegion(),xy[0]-=floatParentBox.left,xy[1]-=floatParentBox.top),xy):[me.getLocalX(),me.getLocalY()]},getScrollX:function(){var scroller=this.getScrollable();return scroller?scroller.getPosition().x:0},getScrollY:function(){var scroller=this.getScrollable();return scroller?scroller.getPosition().y:0},getSize:function(contentSize){return this.el.getSize(contentSize)},getSizeModel:function(ownerCtSizeModel){var typeofWidth,typeofHeight,hasPixelWidth,hasPixelHeight,heightModel,ownerLayout,policy,shrinkWrap,topLevel,widthModel,me=this,models=Ext.layout.SizeModel,ownerContext=me.componentLayout.ownerContext,width=me.width,height=me.height,isFloating=me.floating||me.floated;return ownerContext&&(widthModel=ownerContext.widthModel,heightModel=ownerContext.heightModel),widthModel&&heightModel||(hasPixelWidth="number"==(typeofWidth=typeof width),hasPixelHeight="number"==(typeofHeight=typeof height),(topLevel=isFloating||!(ownerLayout=me.ownerLayout))?(policy=Ext.layout.Layout.prototype.autoSizePolicy,shrinkWrap=isFloating?3:me.shrinkWrap,hasPixelWidth&&(widthModel=models.configured),hasPixelHeight&&(heightModel=models.configured)):(policy=ownerLayout.getItemSizePolicy(me,ownerCtSizeModel),shrinkWrap=ownerLayout.isItemShrinkWrap(me)),ownerContext&&(ownerContext.ownerSizePolicy=policy),shrinkWrap=!0===shrinkWrap?3:shrinkWrap||0,topLevel&&shrinkWrap&&(width&&"string"==typeofWidth&&(shrinkWrap&=2),height&&"string"==typeofHeight&&(shrinkWrap&=1)),3!==shrinkWrap&&(ownerCtSizeModel=ownerCtSizeModel||me.ownerCt&&me.ownerCt.getSizeModel())&&(shrinkWrap|=(ownerCtSizeModel.width.shrinkWrap?1:0)|(ownerCtSizeModel.height.shrinkWrap?2:0)),widthModel=widthModel||(policy.setsWidth?policy.readsWidth?hasPixelWidth?models.calculatedFromConfigured:1&shrinkWrap?models.calculatedFromShrinkWrap:models.calculatedFromNatural:models.calculated:hasPixelWidth?models.configured:1&shrinkWrap?models.shrinkWrap:models.natural),heightModel=heightModel||(policy.setsHeight?policy.readsHeight?hasPixelHeight?models.calculatedFromConfigured:2&shrinkWrap?models.calculatedFromShrinkWrap:models.calculatedFromNatural:models.calculated:hasPixelHeight?models.configured:2&shrinkWrap?models.shrinkWrap:models.natural)),widthModel.pairsByHeightOrdinal[heightModel.ordinal]},getState:function(){var state=null,sizeModel=this.getSizeModel();return sizeModel.width.configured&&(state=this.addPropertyToState(state,"width")),sizeModel.height.configured&&(state=this.addPropertyToState(state,"height")),state},getUserCls:function(){return this.userCls},setUserCls:function(cls){var was=this.userCls;return cls!==was&&(this.userCls=cls,this.rendered&&this.el.replaceCls(was,cls)),was},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var xtypes,parentPrototype,parentXtypes,self=this.self;if(!self.xtypes){for(xtypes=[],parentPrototype=this;parentPrototype;)void 0!==(parentXtypes=parentPrototype.xtypes)&&xtypes.unshift.apply(xtypes,parentXtypes),parentPrototype=parentPrototype.superclass;self.xtypeChain=xtypes,self.xtypes=xtypes.join("/")}return self.xtypes},hasCls:function(cls){var el=this.rendered?this.el:this.protoEl;return el.hasCls.apply(el,arguments)},hasUICls:function(cls){var uiCls=this.uiCls||[];return Ext.Array.contains(uiCls,cls)},hide:function(animateTarget,cb,scope){var me=this;return me.pendingShow&&(me.pendingShow=!1),me.rendered&&!me.isVisible()||me.hasListeners.beforehide&&!1===me.fireEvent("beforehide",me)&&!me.hierarchicallyHidden||(me.getInherited().hidden=me.hidden=!0,me.fireHierarchyEvent("beforehide"),me.rendered&&me.onHide.apply(me,arguments)),me},initComponent:function(){var me=this,width=me.width,height=me.height;me.plugins&&!me.plugins.processed&&(me.plugins=me.constructPlugins()),me.pluginsInitialized=!0,null==width&&null==height||me.setSize(width,height),me.listeners&&(me.on(me.listeners),me.listeners=null),me.focusable&&me.initFocusable()},initEvents:function(){var afterRenderEvent,el,property,index,len,me=this,afterRenderEvents=me.afterRenderEvents;if(afterRenderEvents)for(property in afterRenderEvents)if((el=me[property])&&el.on)for(index=0,len=(afterRenderEvent=afterRenderEvents[property]).length;index<len;++index)me.mon(el,afterRenderEvent[index]);me.focusable&&me.initFocusableEvents()},is:function(selector){return Ext.ComponentQuery.is(this,selector)},isDescendantOf:function(ancestor){var p;for(p=this.getRefOwner();p&&p!==ancestor;p=p.getRefOwner());return p||null},isAncestor:function(possibleDescendant){for(;possibleDescendant;){if(possibleDescendant.getRefOwner()===this)return!0;possibleDescendant=possibleDescendant.getRefOwner()}},isDisabled:function(){return this.disabled},isDraggable:function(){return!!this.draggable},isDroppable:function(){return!!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},isHierarchicallyHidden:function(){for(var parent,parentInheritedState,child=this,hidden=!1;parent=child.ownerCt||child.floatParent;child=parent){if((parentInheritedState=parent.getInherited()).hidden){hidden=!0;break}if(!child.getInherited().collapseImmune){hidden=!!parentInheritedState.collapsed;break}if(parent.collapsed&&!child.collapseImmune){hidden=!0;break}}return hidden},isLayoutChild:function(ownerCandidate){return!this.floating&&!!this.up(ownerCandidate)},isLayoutRoot:function(){var ownerLayout=this.ownerLayout;return!(ownerLayout&&!this._isLayoutRoot&&!this.floating)||ownerLayout.isItemLayoutRoot(this)},isLayoutSuspended:function(){for(var ownerLayout,comp=this;comp;){if(comp.layoutSuspendCount||comp.suspendLayout)return!0;if(!(ownerLayout=comp.ownerLayout))break;comp=ownerLayout.owner}return!1},isVisible:function(deep){var hidden;return this.hidden||!this.rendered||this.destroyed?hidden=!0:deep&&(hidden=this.isHierarchicallyHidden()),!hidden},isXType:function(xtype,shallow){return shallow?-1!==Ext.Array.indexOf(this.xtypes,xtype):!!this.xtypesMap[xtype]},isMasked:function(deep){return!!(this.masked||this.loadMask&&this.loadMask.isVisible()||deep&&this.getInherited().masked)},setMasked:function(isMasked){var me=this,container=me.focusableContainer;return isMasked?(me.masked=!0,me.getInherited().masked=isMasked):(me.masked=!1,delete me.getInherited().masked),container&&container.onFocusableChildMasked(me,isMasked),me},mask:function(msg,msgCls,elHeight){var box=this.lastBox,target=this.getMaskTarget()||this.el;box&&(elHeight=box.height),target.mask(msg,msgCls,elHeight),this.setMasked(!0)},nextNode:function(selector,includeSelf){var result,it,len,i,sib,ownerCt=this.ownerCt;if(includeSelf&&this.is(selector))return this;if(ownerCt){for(it=ownerCt.items.items,i=Ext.Array.indexOf(it,this)+1,len=it.length;i<len;i++){if((sib=it[i]).is(selector))return sib;if(sib.down&&(result=sib.down(selector)))return result}return ownerCt.nextNode(selector)}return null},nextSibling:function(selector){var it,last,idx,c,o=this.ownerCt;if(o&&(idx=(it=o.items).indexOf(this)+1))if(selector){for(last=it.getCount();idx<last;idx++)if((c=it.getAt(idx)).is(selector))return c}else if(idx<it.getCount())return it.getAt(idx);return null},onAdded:function(container,pos,instanced){var me=this;me.ownerCt=container,me.onInheritedAdd(me,instanced),me.hasListeners&&me.hasListeners.added&&me.fireEvent("added",me,container,pos),Ext.GlobalEvents.hasListeners.added&&me.fireHierarchyEvent("added")},onRemoved:function(destroying){var me=this;Ext.GlobalEvents.hasListeners.removed&&me.fireHierarchyEvent("removed"),me.hasListeners.removed&&me.fireEvent("removed",me,me.ownerCt),destroying||me.removeBindings(),me.onInheritedRemove(destroying),me.ownerCt=me.ownerLayout=null},onBoxReady:function(width,height){var label,me=this;(me.ariaLabelledBy||me.ariaDescribedBy)&&(me.ariaLabelledBy&&(label=me.getAriaLabelEl(me.ariaLabelledBy))&&me.ariaEl.dom.setAttribute("aria-labelledby",label),me.ariaDescribedBy&&(label=me.getAriaLabelEl(me.ariaDescribedBy))&&me.ariaEl.dom.setAttribute("aria-describedby",label)),me.resizable&&me.initResizable(me.resizable),me.draggable&&me.initDraggable(),me.hasListeners.boxready&&me.fireEvent("boxready",me,width,height)},onDestroy:function(){var me=this,container=me.focusableContainer;me.rendered&&Ext.destroy(me.dd,me.resizer,me.proxy,me.proxyWrap,me.resizerComponent,me.scrollable,me.contentEl),container&&container.onFocusableChildDestroy(me),me.focusable&&me.destroyFocusable(),Ext.destroy(me.componentLayout,me.loadMask,me.floatingDescendants)},onDisable:function(){var dom,nodeName,me=this;me.focusable&&me.disableFocusable(),me.ariaStaticRoles[me.ariaRole]||me.ariaEl.dom.setAttribute("aria-disabled",!0),me.maskOnDisable&&!me.getInheritedConfig("disableMask",!0)&&(nodeName=(dom=me.el.dom).nodeName,me.disabledRe.test(nodeName)&&(dom.disabled=!0),me.nonMaskableRe.test(nodeName)||me.mask())},onEnable:function(){var dom,nodeName,me=this;me.focusable&&me.enableFocusable(),me.ariaStaticRoles[me.ariaRole]||me.ariaEl.dom.setAttribute("aria-disabled",!1),me.maskOnDisable&&me.getInherited().hasOwnProperty("masked")&&(nodeName=(dom=me.el.dom).nodeName,me.disabledRe.test(nodeName)&&(dom.disabled=!1),me.nonMaskableRe.test(nodeName)||me.unmask())},onGlobalShow:function(c){this.up(c)&&this.getScrollable().restoreState()},onHide:function(animateTarget,cb,scope){var ghostPanel,fromSize,toBox,me=this;me.ariaStaticRoles[me.ariaRole]||me.ariaEl.dom.setAttribute("aria-hidden",!0),me.revertFocus(),animateTarget=me.getAnimateTarget(animateTarget),me.ghost||(animateTarget=null),animateTarget&&(toBox={x:animateTarget.getX(),y:animateTarget.getY(),width:animateTarget.dom.offsetWidth,height:animateTarget.dom.offsetHeight},(ghostPanel=me.ghost()).el.stopAnimation(),fromSize=me.getSize(),ghostPanel.el.animate({to:toBox,listeners:{afteranimate:function(){delete ghostPanel.componentLayout.lastComponentSize,ghostPanel.el.hide(),ghostPanel.setHiddenState(!0),ghostPanel.el.setSize(fromSize),me.afterHide(cb,scope)}}})),me.el.hide(),animateTarget||me.afterHide(cb,scope)},onPosition:Ext.emptyFn,onResize:function(width,height,oldWidth,oldHeight){var me=this;me.floating&&me.constrain&&me.doConstrain(),me.refreshScroll(),me.hasListeners.resize&&me.fireEvent("resize",me,width,height,oldWidth,oldHeight)},onShow:function(){var me=this;me.ariaStaticRoles[me.ariaRole]||me.ariaEl.dom.setAttribute("aria-hidden",!1),me.el.show(),me.updateLayout({isRoot:!1}),me.floating&&(me.maximized?me.fitContainer():me.constrain&&me.doConstrain())},onShowComplete:function(cb,scope){var me=this,container=me.focusableContainer;me.floating&&me.onFloatShow(),Ext.callback(cb,scope||me),me.fireEvent("show",me),container&&container.onFocusableChildShow(me),delete me.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(selector,includeSelf){var result,it,i,sib,ownerCt=this.ownerCt;if(includeSelf&&this.is(selector))return this;if(ownerCt){for(it=ownerCt.items.items,i=Ext.Array.indexOf(it,this)-1;-1<i;i--){if((sib=it[i]).query&&(result=(result=sib.query(selector))[result.length-1]))return result;if(sib.is(selector))return sib}return ownerCt.previousNode(selector,!0)}return null},previousSibling:function(selector){var it,idx,c,o=this.ownerCt;if(o&&-1!==(idx=(it=o.items).indexOf(this)))if(selector){for(--idx;0<=idx;idx--)if((c=it.getAt(idx)).is(selector))return c}else if(idx)return it.getAt(--idx);return null},registerFloatingItem:function(cmp){this.floatingDescendants||(this.floatingDescendants=new Ext.ZIndexManager(this)),this.floatingDescendants.register(cmp)},removeCls:function(cls){var el=this.rendered?this.el:this.protoEl;return el.removeCls.apply(el,arguments),this},removeClsWithUI:function(classes,skip){var length,cls,me=this,clsArray=[],i=0,extArray=Ext.Array,remove=extArray.remove,uiCls=me.uiCls=extArray.clone(me.uiCls),activeUI=me.activeUI;for("string"==typeof classes&&(classes=classes.indexOf(" ")<0?[classes]:Ext.String.splitWords(classes)),length=classes.length,i=0;i<length;i++)(cls=classes[i])&&me.hasUICls(cls)&&(remove(uiCls,cls),activeUI&&(clsArray=clsArray.concat(me.removeUIClsFromElement(cls))));return!0!==skip&&activeUI&&me.removeCls(clsArray),clsArray},resumeLayouts:function(flushOptions){var me=this;me.rendered&&me.layoutSuspendCount&&!--me.layoutSuspendCount&&(me.suspendLayout=!1,flushOptions&&!me.isLayoutSuspended()&&me.updateLayout(flushOptions))},scrollBy:function(deltaX,deltaY,animate){var scroller=this.getScrollable();scroller&&scroller.scrollBy(deltaX,deltaY,animate)},scrollTo:function(x,y,animate){var scroller=this.getScrollable();scroller&&scroller.scrollTo(x,y,animate)},setAutoScroll:function(scroll){return this.setScrollable(!!scroll),this},setBorder:function(border,targetEl){var initial=!!targetEl;(this.rendered||initial)&&(initial||(targetEl=this.el),border=border?!0===border?"1px":this.unitizeBox(border):0,targetEl.setStyle("border-width",border),initial||this.updateLayout()),this.border=border},setDock:function(dock){var me=this,ownerCt=me.ownerCt;return dock!==me.dock&&(ownerCt&&ownerCt.moveDocked?ownerCt.moveDocked(me,dock):me.dock=dock),me},setDisabled:function(disabled){return this[disabled?"disable":"enable"]()},setFlex:function(flex){this.flex=flex},setHeight:function(height){return this.setSize(void 0,height)},setLoading:function(load,targetEl){var me=this,config={target:me};return me.rendered&&(!1!==load?(Ext.isString(load)?config.msg=load:Ext.apply(config,load),me.loadMask&&me.loadMask.isLoadMask?Ext.apply(me.loadMask,config):(targetEl&&null==config.useTargetEl&&(config.useTargetEl=!0),me.loadMask=new Ext.LoadMask(config)),me.loadMask.isVisible()?me.loadMask.syncMaskState():me.loadMask.show()):me.loadMask&&me.loadMask.isLoadMask&&me.loadMask.hide()),me.loadMask},setMargin:function(margin,preventLayout){var me=this;me.rendered?(margin=margin||0===margin?(!0===margin&&(margin=5),this.unitizeBox(margin)):"",me.margin=margin,me.margin$=null,me.getEl().setStyle("margin",margin),preventLayout||me.updateLayout(me._notAsLayoutRoot)):me.margin=margin},setOverflowXY:function(overflowX,overflowY){return this.setScrollable({x:!(!overflowX||"hidden"===overflowX)&&overflowX,y:!(!overflowY||"hidden"===overflowY)&&overflowY}),this},setPagePosition:function(x,y,animate){var p,floatParentBox,me=this;return Ext.isArray(x)&&(y=x[1],x=x[0]),me.pageX=x,me.pageY=y,me.floating?(me.isContainedFloater()?(floatParentBox=me.floatParent.getTargetEl().getViewRegion(),Ext.isNumber(x)&&Ext.isNumber(floatParentBox.left)&&(x-=floatParentBox.left),Ext.isNumber(y)&&Ext.isNumber(floatParentBox.top)&&(y-=floatParentBox.top)):(x=(p=me.el.translateXY(x,y)).x,y=p.y),me.setPosition(x,y,animate)):(p=me.el.translateXY(x,y),me.setPosition(p.x,p.y,animate)),me},setPosition:function(x,y,animate){var me=this,pos=me.beforeSetPosition.apply(me,arguments);return pos&&me.rendered&&(x=pos.x,y=pos.y,animate?x===me.getLocalX()&&y===me.getLocalY()||(me.stopAnimation(),me.animate(Ext.apply({duration:1e3,listeners:{afteranimate:Ext.Function.bind(me.afterSetPosition,me,[x,y])},to:{left:x,top:y}},animate))):(me.setLocalXY(x,y),me.afterSetPosition(x,y))),me},setScrollX:function(x,animate){var scroller=this.getScrollable();scroller&&scroller.scrollTo(x,null,animate)},setScrollY:function(y,animate){var scroller=this.getScrollable();scroller&&scroller.scrollTo(null,y,animate)},setSize:function(width,height){var widthIsString,heightIsString,me=this,oldWidth=me.width,oldHeight=me.height;return width&&"object"==typeof width&&(height=width.height,width=width.width),"number"==typeof width?me.width=Ext.Number.constrain(width,me.minWidth,me.maxWidth):null===width?delete me.width:"string"==typeof width&&(widthIsString=!0,me.width=width),"number"==typeof height?me.height=Ext.Number.constrain(height,me.minHeight,me.maxHeight):null===height?delete me.height:"string"==typeof height&&(heightIsString=!0,me.height=height),me.rendered&&me.isVisible()&&(oldWidth===me.width&&oldHeight===me.height||((me.liquidLayout||widthIsString||heightIsString)&&me.el.setSize(me.width,me.height),me.updateLayout(me._notAsLayoutRoot))),me},setStyle:function(prop,value){return(this.el||this.protoEl).setStyle(prop,value),this},setUI:function(ui){var classes,me=this,uiCls=me.uiCls,activeUI=me.activeUI;ui!==activeUI&&(activeUI?((classes=me.removeClsWithUI(uiCls,!0)).length&&me.removeCls(classes),me.removeUIFromElement()):me.uiCls=[],me.ui=ui,me.activeUI=ui,me.addUIToElement(),(classes=me.addClsWithUI(uiCls,!0)).length&&me.addCls(classes),me.rendered&&me.updateLayout())},setVisible:function(visible){return this[visible?"show":"hide"]()},setHidden:function(hidden){return this.setVisible(!hidden)},setWidth:function(width){return this.setSize(width)},show:function(animateTarget,cb,scope){var me=this,rendered=me.rendered;return me.hierarchicallyHidden||me.floating&&!rendered&&me.isHierarchicallyHidden()?(rendered||me.initHierarchyEvents(),1<arguments.length?(animateTarget=null,me.pendingShow=arguments):me.pendingShow=!0):rendered&&me.isVisible()?me.floating&&me.onFloatShow():!1!==me.fireEvent("beforeshow",me)?(me.hidden=!1,delete this.getInherited().hidden,Ext.suspendLayouts(),rendered||!me.autoRender&&!me.floating||(me.doAutoRender(),rendered=me.rendered),rendered?(me.beforeShow(),Ext.resumeLayouts(),me.onShow.apply(me,arguments),me.afterShow.apply(me,arguments)):Ext.resumeLayouts(!0)):me.onShowVeto(),me},showAt:function(x,y,animate){var me=this;return me.rendered||!me.autoRender&&!me.floating?me.floating?me.setPosition(x,y,animate):me.setPagePosition(x,y,animate):(me.x=x,me.y=y),me.show()},showBy:function(cmp,pos,off){var me=this;return me.floating&&cmp&&(me.alignTarget=cmp,pos&&(me.defaultAlign=pos),off&&(me.alignOffset=off),me.show(),me.hidden||me.alignTo(cmp,pos||me.defaultAlign,off||me.alignOffset)),me},suspendLayouts:function(){this.rendered&&1==++this.layoutSuspendCount&&(this.suspendLayout=!0)},unitizeBox:function(box){return Ext.Element.unitizeBox(box)},unmask:function(){(this.getMaskTarget()||this.el).unmask(),this.setMasked(!1)},unregisterFloatingItem:function(cmp){this.floatingDescendants&&this.floatingDescendants.unregister(cmp)},up:function(selector,limit){var result=this.getRefOwner(),limitSelector="string"==typeof limit,limitCount="number"==typeof limit,limitComponent=limit&&limit.isComponent,steps=0;if(selector)for(;result;result=result.getRefOwner()){if(steps++,selector.isComponent){if(result===selector)return result}else if(Ext.ComponentQuery.is(result,selector))return result;if(limitSelector&&result.is(limit))return;if(limitCount&&steps===limit)return;if(limitComponent&&result===limit)return}return result},update:function(htmlOrData,loadScripts,callback,scriptScope){var sizeModel,doLayout,el,me=this,isData=me.tpl&&!Ext.isString(htmlOrData),scroller=me.getScrollable(),container=me.focusableContainer;isData?me.data=htmlOrData&&htmlOrData.isEntity?htmlOrData.getData(!0):htmlOrData:me.html=Ext.isObject(htmlOrData)?Ext.DomHelper.markup(htmlOrData):htmlOrData,me.rendered&&(doLayout=(sizeModel=me.getSizeModel()).width.shrinkWrap||sizeModel.height.shrinkWrap,me.isContainer?(el=me.layout.getRenderTarget(),doLayout=doLayout||0<me.items.items.length):el=me.touchScroll?me.getScrollerEl():me.getTargetEl(),isData?me.tpl[me.tplWriteMode](el,me.data||{}):el.setHtml(me.html,loadScripts,callback,scriptScope||me),doLayout&&me.updateLayout(),scroller&&scroller.refresh(!0),container&&container.onFocusableChildUpdate(me))},setHtml:function(html,loadScripts,scriptScope){this.update(html,loadScripts,null,scriptScope)},applyData:function(data){this.update(data)},updateBox:function(box){return this.setSize(box.width,box.height),this.setPagePosition(box.x,box.y),this},_asLayoutRoot:{isRoot:!0},_notAsLayoutRoot:{isRoot:!1},updateLayout:function(options){var defer,me=this,lastBox=me.lastBox,isRoot=options&&options.isRoot;lastBox&&(lastBox.invalid=!0),!me.rendered||me.layoutSuspendCount||me.suspendLayout||(me.hidden?Ext.Component.cancelLayout(me):"boolean"!=typeof isRoot&&(isRoot=me.isLayoutRoot()),!isRoot&&me.ownerLayout&&me.ownerLayout.onContentChange(me)||me.isLayoutSuspended()||(defer=options&&options.hasOwnProperty("defer")?options.defer:me.deferLayouts,Ext.Component.updateLayout(me,defer)))},updateMaxHeight:function(maxHeight,oldMaxHeight){this.changeConstraint(maxHeight,oldMaxHeight,"min","max-height","height")},updateMaxWidth:function(maxWidth,oldMaxWidth){this.changeConstraint(maxWidth,oldMaxWidth,"min","max-width","width")},updateMinHeight:function(minHeight,oldMinHeight){this.changeConstraint(minHeight,oldMinHeight,"max","min-height","height")},updateMinWidth:function(minWidth,oldMinWidth){this.changeConstraint(minWidth,oldMinWidth,"max","min-width","width")},getAnchorToXY:function(el,anchor,local,mySize){return el.getAnchorXY(anchor,local,mySize)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(x){this.el.setLocalX(x)},setLocalXY:function(x,y){this.el.setLocalXY(x,y)},setLocalY:function(y){this.el.setLocalY(y)},setX:function(x,animate){this.el.setX(x,animate)},setXY:function(xy,animate){this.el.setXY(xy,animate)},setY:function(y,animate){this.el.setY(y,animate)},privates:{addOverCls:function(){this.disabled||this.el.addCls(this.overCls)},addUIToElement:function(){var childEls,childElName,el,suffix,me=this,baseClsUI=me.baseCls+"-"+me.ui;if(me.addCls(baseClsUI),me.rendered&&me.frame&&!Ext.supports.CSS3BorderRadius)for(childElName in baseClsUI+="-",childEls=me.getChildEls())(suffix=childEls[childElName].frame)&&!0!==suffix&&(el=me[childElName])&&el.addCls(baseClsUI+suffix)},changeConstraint:function(newValue,oldValue,constrainMethod,styleName,sizeName){var me=this,size=me[sizeName];null!=newValue&&"number"==typeof size&&(me[sizeName]=Math[constrainMethod](size,newValue)),me.liquidLayout&&(null!=newValue?me.setStyle(styleName,newValue+"px"):oldValue&&me.setStyle(styleName,"")),me.rendered&&me.updateLayout()},constructPlugin:function(plugin){return plugin="string"==typeof plugin?Ext.PluginManager.create({},plugin,this):Ext.PluginManager.create(plugin,null,this)},constructPlugins:function(){var result,i,len,plugins=this.plugins;if(plugins)for((result=[]).processed=!0,Ext.isArray(plugins)||(plugins=[plugins]),i=0,len=plugins.length;i<len;i++)result[i]=this.constructPlugin(plugins[i]);return this.pluginsInitialized=!0,result},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.el),Ext.Component.cancelLayout(this),this.isDetached=!0},doAddListener:function(ename,fn,scope,options,order,caller,manager){var listeners,option,eventOptions,elementName,element,me=this;if(Ext.isObject(fn)||options&&options.element){if(options.element)for(option in elementName=options.element,(listeners={})[ename]=fn,scope&&(listeners.scope=scope),eventOptions=me.$elementEventOptions,options)eventOptions[option]&&(listeners[option]=options[option]);else listeners=fn,elementName=ename;(element=me[elementName])&&element.isObservable?me.mon(element,listeners):(me.afterRenderEvents=me.afterRenderEvents||{},me.afterRenderEvents[elementName]||(me.afterRenderEvents[elementName]=[]),me.afterRenderEvents[elementName].push(listeners))}else options&&options.delegate?me.mixins.componentDelegation.addDelegatedListener.call(me,ename,fn,scope,options,order,caller,manager):me.mixins.observable.doAddListener.call(me,ename,fn,scope,options,order,caller,manager)},doRemoveListener:function(eventName,fn,scope){this.mixins.observable.doRemoveListener.call(this,eventName,fn,scope),this.mixins.componentDelegation.removeDelegatedListener.call(this,eventName,fn,scope)},fireHierarchyEvent:function(eventName){var globalEvents=Ext.GlobalEvents;globalEvents.hasListeners[eventName]&&globalEvents.fireEvent(eventName,this)},getActionEl:function(){return this.el},getAutoId:function(){return this.autoGenId=!0,++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var x,y,scrollFlags,scroller=this.getScrollable(),flags=this._scrollFlags;return scrollFlags=scroller?(!0===(x=scroller.getX())&&(x="auto"),!0===(y=scroller.getY())&&(y="auto"),flags[x][y]):flags.none,{overflowX:(this.scrollFlags=scrollFlags).overflowX,overflowY:scrollFlags.overflowY}},getPlugins:function(){var plugins=this.plugins;return(plugins=plugins&&plugins.processed?plugins:this.constructPlugins())||null},getProxy:function(){var target;return this.proxy||(target=Ext.getBody(),this.proxy=this.el.createProxy(Ext.baseCSSPrefix+"proxy-el",target,!0)),this.proxy},getScrollerEl:function(){var me=this;return me.scrollerEl||(me.scrollerEl=me.componentLayout.getScrollerEl()||me.getOverflowEl().child(me.scrollerSelector))},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return Ext.baseCSSPrefix+this.getTdType()+"-"+this.ui+"-cell"},getTdType:function(){return this.xtype},getTpl:function(name){return Ext.XTemplate.getTpl(this,name)},initCls:function(){var me=this,cls=[me.baseCls],targetCls=me.getComponentLayout().targetCls;return targetCls&&cls.push(targetCls),Ext.isDefined(me.cmpCls)&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.Component: cmpCls has been deprecated. Please use componentCls."),me.componentCls=me.cmpCls,delete me.cmpCls),me.componentCls?cls.push(me.componentCls):me.componentCls=me.baseCls,cls},initDraggable:function(){var me=this,dragTarget=me.resizer&&me.resizer.el!==me.el?me.resizerComponent=new Ext.Component({el:me.resizer.el,rendered:!0,container:me.container}):me,ddConfig=Ext.applyIf({el:dragTarget.getDragEl(),constrainTo:me.constrain||me.draggable.constrain?me.constrainTo||(me.floatParent?me.floatParent.getTargetEl():me.container):void 0},me.draggable);(me.constrain||me.constrainDelegate)&&(ddConfig.constrain=me.constrain,ddConfig.constrainDelegate=me.constrainDelegate),me.dd=new Ext.util.ComponentDragger(dragTarget,ddConfig)},initPadding:function(targetEl){var me=this,padding=me.padding;null!=padding&&(me.touchScroll||me.layout&&me.layout.managePadding&&"padding"===me.contentPaddingProperty?targetEl.setStyle("padding",0):targetEl.setStyle("padding",this.unitizeBox(!0===padding?5:padding)))},initPlugin:function(plugin){return plugin.init(this),plugin},initResizable:function(resizable){var me=this;((resizable=Ext.apply({target:me,dynamic:!1,constrainTo:me.constrain||resizable&&resizable.constrain?me.constrainTo||(me.floatParent?me.floatParent.getTargetEl():me.container):void 0,handles:me.resizeHandles},resizable)).target=me).resizer=new Ext.resizer.Resizer(resizable)},initStyles:function(targetEl){var width,height,me=this,margin=me.margin,border=me.border,cls=me.cls,style=me.style,x=me.x,y=me.y,liquidLayout=me.liquidLayout;me.initPadding(targetEl),null!=margin&&targetEl.setStyle("margin",this.unitizeBox(!0===margin?5:margin)),null!=border&&me.setBorder(border,targetEl),cls&&cls!==me.initialCls&&(targetEl.addCls(cls),me.cls=me.initialCls=null),style&&style!==me.initialStyle&&(targetEl.setStyle(style),me.style=me.initialStyle=null),null!=x&&targetEl.setStyle(me.horizontalPosProp,"number"==typeof x?x+"px":x),null!=y&&targetEl.setStyle("top","number"==typeof y?y+"px":y),me.ownerCt&&!me.floating||(Ext.scopeCss&&targetEl.addCls(me.rootCls),targetEl.addCls(me.borderBoxCls)),!liquidLayout&&me.getFrameInfo()||(width=me.width,height=me.height,null!=width&&("number"==typeof width?targetEl.setStyle("width",width+"px"):targetEl.setStyle("width",width)),null!=height&&("number"==typeof height?targetEl.setStyle("height",height+"px"):targetEl.setStyle("height",height)))},isContainedFloater:function(){return this.floating&&this.floatParent},isDescendant:function(ancestor){if(ancestor.isContainer)for(var c=this.ownerCt;c;c=c.ownerCt)if(c===ancestor)return!0;return!1},owns:function(element){var cmp,result=!1;return element.isEvent?element=element.target:element.isElement&&(element=element.dom),(cmp=Ext.Component.fromElement(element))&&(result=cmp===this||!!cmp.up(this)),result},parseBox:function(box){return Ext.Element.parseBox(box)},reattachToBody:function(){this.isDetached=!1},refreshScroll:function(){var scroller=this.getScrollable();scroller&&scroller.refresh()},removeManagedListenerItem:function(isClear,managedListener,item,ename,fn,scope){var element=managedListener.options?managedListener.options.element:null;if(!element)return this.mixins.observable.removeManagedListenerItem.apply(this,arguments);(element=this[element])&&element.un&&(!isClear&&(managedListener.item!==item||managedListener.ename!==ename||fn&&managedListener.fn!==fn||scope&&managedListener.scope!==scope)||(element.un(managedListener.ename,managedListener.fn,managedListener.scope),isClear||Ext.Array.remove(this.managedListeners,managedListener)))},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(plugin){Ext.Array.remove(this.plugins,plugin),plugin.destroy()},removeUIFromElement:function(){var childEls,childElName,el,suffix,me=this,baseClsUI=me.baseCls+"-"+me.ui;if(me.removeCls(baseClsUI),me.rendered&&me.frame&&!Ext.supports.CSS3BorderRadius)for(childElName in baseClsUI+="-",childEls=me.getChildEls())(suffix=childEls[childElName].frame)&&!0!==suffix&&(el=me[childElName])&&el.removeCls(baseClsUI+suffix)},setComponentLayout:function(layout){var currentLayout=this.componentLayout;currentLayout&&currentLayout.isLayout&&currentLayout!==layout&&currentLayout.setOwner(null),(this.componentLayout=layout).setOwner(this)},setHiddenState:function(hidden){var inheritedState=this.getInherited(),zIndexManager=this.zIndexManager;(this.hidden=hidden)?inheritedState.hidden=!0:delete inheritedState.hidden,zIndexManager&&zIndexManager.onComponentShowHide(this)},setupProtoEl:function(){var cls=this.initCls();this.protoEl.addCls(cls)},wrapPrimaryEl:function(dom){var el=this.el;el&&el.isElement||(this.el=Ext.get(dom)),this.floating&&this.mixins.floating.constructor.call(this)}},deprecated:{5:{methods:{addClass:"addCls",doComponentLayout:function(){return this.updateLayout(),this},removeClass:"removeCls",forceComponentLayout:"updateLayout",setDocked:"setDock"}}}},function(Component){var prototype=Component.prototype;(prototype.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1,(prototype.$eventOptions=Ext.Object.chain(prototype.$eventOptions)).delegate=1,Component.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"}),Ext.resumeLayouts=function(flush){Component.resumeLayouts(flush)},Ext.suspendLayouts=function(){Component.suspendLayouts()},Ext.batchLayouts=function(fn,scope){Component.suspendLayouts(),fn.call(scope),Component.resumeLayouts(!0)},Ext.setGlyphFontFamily=function(fontFamily){Ext._glyphFontFamily=fontFamily},Component.hierarchyEventSource=prototype.hierarchyEventSource=Ext.GlobalEvents,Ext.onReady(function(){Ext.supports.HighContrastMode&&Ext.getBody().addCls(Component.ariaHighContrastModeCls)})}),Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var me=this;me._borderRegionInited||(me._borderRegionInited=!0,me.addStateEvents(["changeregion","changeweight"]),Ext.override(me,{getState:function(){var state=me.callParent();return state=me.addPropertyToState(state,"region"),state=me.addPropertyToState(state,"weight")}}))},getOwningBorderContainer:function(){var layout=this.getOwningBorderLayout();return layout&&layout.owner},getOwningBorderLayout:function(){var layout=this.ownerLayout;return layout&&layout.isBorderLayout?layout:null},setRegion:function(region){var borderLayout,me=this,old=me.region;if(region!==old)if(borderLayout=me.getOwningBorderLayout()){var delta,items,index,regionFlags=borderLayout.regionFlags[region],placeholder=me.placeholder,splitter=me.splitter,owner=borderLayout.owner,regionMeta=borderLayout.regionMeta,collapsed=me.collapsed||me.floated;if(!1===me.fireEventArgs("beforechangeregion",[me,region]))return old;Ext.suspendLayouts(),me.region=region,Ext.apply(me,regionFlags),me.updateCollapseTool&&me.updateCollapseTool(),splitter&&(Ext.apply(splitter,regionFlags),splitter.updateOrientation(),0<=(index=(items=owner.items).indexOf(me))&&(delta=regionMeta[region].splitterDelta,items.getAt(index+delta)!==splitter&&(items.remove(splitter),index=items.indexOf(me),0<delta&&++index,items.insert(index,splitter)))),placeholder&&(collapsed&&me.expand(!1),owner.remove(placeholder),me.placeholder=null,collapsed&&me.collapse(null,!1)),owner.updateLayout(),Ext.resumeLayouts(!0),me.fireEventArgs("changeregion",[me,old])}else me.region=region;return old},setWeight:function(weight){var me=this,ownerCt=me.getOwningBorderContainer(),placeholder=me.placeholder,old=me.weight;return weight!==old&&!1!==me.fireEventArgs("beforechangeweight",[me,weight])&&(me.weight=weight,placeholder&&(placeholder.weight=weight),ownerCt&&ownerCt.updateLayout(),me.fireEventArgs("changeweight",[me,old])),old}},function(Component){var proto=Component.prototype;proto.setBorderRegion=proto.setRegion,proto.setRegionWeight=proto.setWeight}),Ext.define("Ext.util.CollectionKey",{mixins:[Ext.mixin.Identifiable],isCollectionKey:!0,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:!0},generation:0,map:null,mapRebuilds:0,constructor:function(config){this.initConfig(config)},get:function(key){return(this.map||this.getMap())[key]||null},clear:function(){this.map=null},getRootProperty:function(){var root=this.callParent();return null!==root?root:this.getCollection().getRootProperty()},indexOf:function(key,startAt){var i,index,items,n,item=(this.map||this.getMap())[key],collection=this.getCollection(),length=collection.length;if(!item)return-1;if(void 0===startAt&&(startAt=-1),item instanceof Array){for(index=length,n=(items=item).length;0<n--;)(i=collection.indexOf(items[n]))<index&&startAt<i&&(index=i);if(index===length)return-1}else index=collection.indexOf(item);return startAt<index?index:-1},updateKey:function(item,oldKey){var bucket,index,map=this.map;map&&((bucket=map[oldKey])instanceof Array?0<=(index=Ext.Array.indexOf(bucket,item))&&(2<bucket.length?bucket.splice(index,1):map[oldKey]=bucket[1-index]):bucket&&delete map[oldKey],this.add([item]))},onCollectionAdd:function(collection,add){this.map&&this.add(add.items)},onCollectionItemChange:function(collection,details){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(collection,remove){var i,map=this.map,items=remove.items,length=items.length;if(map)if(this.getUnique()&&length<collection.length/2)for(i=0;i<length;++i)delete map[this.getKey(items[i])];else this.map=null},add:function(items){var bucket,i,item,key,length,unique,map=this.map;for(length=items.length,unique=this.getUnique(),i=0;i<length;++i)key=this.getKey(item=items[i]),!unique&&key in map?((bucket=map[key])instanceof Array||(map[key]=bucket=[bucket]),bucket.push(item)):map[key]=item},applyKeyFn:function(keyFn){Ext.isString(keyFn)?this.getKey=function(item){return item[keyFn]()}:this.getKey=keyFn},updateProperty:function(property){var root=this.getRootProperty();this.getKey=function(item){return(root?item[root]:item)[property]}},getMap:function(){var me=this,map=me.map;return map||(me.map=map={},me.keysByItemKey={},++me.mapRebuilds,me.add(me.getCollection().items)),map},updateCollection:function(collection){collection.addObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())}}),Ext.define("Ext.util.Grouper",{extend:Ext.util.Sorter,isGrouper:!0,config:{groupFn:null,sortProperty:null},constructor:function(config){this.callParent(arguments)},getGroupString:function(item){var group=this._groupFn(item);return null!=group?String(group):""},sortFn:function(item1,item2){var me=this,lhs=me._groupFn(item1),rhs=me._groupFn(item2),property=me._sortProperty,root=me._root,sorterFn=me._sorterFn,transform=me._transform;if(lhs===rhs)return 0;if(property||sorterFn){if(sorterFn)return sorterFn.call(this,item1,item2);root&&(item1=item1[root],item2=item2[root]),lhs=item1[property],rhs=item2[property],transform&&(lhs=transform(lhs),rhs=transform(rhs))}return rhs<lhs?1:lhs<rhs?-1:0},standardGroupFn:function(item){var root=this._root;return(root?item[root]:item)[this._property]},updateSorterFn:function(){},updateProperty:function(){this.getGroupFn()||this.setGroupFn(this.standardGroupFn)}}),Ext.define("Ext.util.Collection",{mixins:[Ext.mixin.Observable],isCollection:!0,config:{autoFilter:!0,autoSort:!0,autoGroup:!0,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null,trackGroups:!0},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:!1,sorted:!1,filtered:!1,$endUpdatePriority:1001,constructor:function(config){var me=this;me.items=[],me.map={},me.length=0,config&&config.keyFn&&(me.getKey=config.keyFn),me.mixins.observable.constructor.call(me,config)},destroy:function(){var me=this,filters=me._filters,sorters=me._sorters,groups=me._groups;filters&&(filters.destroy(),me._filters=null),sorters&&(sorters.destroy(),me._sorters=null),groups&&(groups.destroy(),me._groups=null),me.setSource(null),me.observers=me.items=me.map=null,me.callParent()},add:function(item){var me=this,items=me.decodeItems(arguments,0),ret=items;return items.length&&(me.requestedIndex=me.length,me.splice(me.length,0,items),delete me.requestedIndex,ret=1===items.length?items[0]:items),ret},replaceAll:function(){var ret,items;return(ret=items=this.decodeItems(arguments,0)).length?(this.splice(0,this.length,items),ret=1===items.length?items[0]:items):this.removeAll(),ret},aggregate:function(property,operation,begin,end,scope){var args=Ext.Array.slice(arguments);return args.unshift(this.items),this.aggregateItems.apply(this,args)},aggregateByGroup:function(property,operation,scope){var groups=this.getGroups();return this.aggregateGroups(groups,property,operation,scope)},aggregateItems:function(items,property,operation,begin,end,scope){var i,j,root,value,values,valueItems,me=this,range=Ext.Number.clipIndices(items.length,[begin,end]),subsetRequested=0!==begin&&end!==items.length;if(begin=range[0],end=range[1],!Ext.isFunction(operation))return(operation=me._aggregators[operation]).call(me,items,begin,end,property,me.getRootProperty());for(root=me.getRootProperty(),values=new Array(void 0),valueItems=subsetRequested?new Array(void 0):items,i=begin,j=0;i<end;++i,j++)subsetRequested&&(valueItems[j]=value=items[i]),values[j]=(root?value[root]:value)[property];return operation.call(scope||me,items,values,0)},aggregateGroups:function(groups,property,operation,scope){var i,group,result,items=groups.items,len=items.length,callDirect=!Ext.isFunction(operation),out={};for(i=0;i<len;++i)group=items[i],result=callDirect?group[operation](property):this.aggregateItems(group.items,property,operation,null,null,scope),out[group.getGroupKey()]=result;return out},beginUpdate:function(){this.updating++||this.notify("beginupdate")},clear:function(){var extraKeys,indexName,me=this,generation=me.generation,ret=generation?me.items:[];if(generation&&(me.items=[],me.length=0,me.map={},me.indices={},me.generation++,extraKeys=me.getExtraKeys()))for(indexName in extraKeys)extraKeys[indexName].clear();return ret},clone:function(){var copy=new this.self(this.initialConfig);return copy.add(this.items),copy},collect:function(property,root,allowNull){var i,strValue,value,items=this.items,length=items.length,map={},ret=[];for(i=0;i<length;++i)value=items[i],value=(root?value[root]:value)[property],strValue=String(value),!allowNull&&Ext.isEmpty(value)||map[strValue]||(map[strValue]=1,ret.push(value));return ret},contains:function(item){var key,ret=!1;return null!=item&&(key=this.getKey(item),ret=this.map[key]===item),ret},containsKey:function(key){return key in this.map},createFiltered:function(property,value,anyMatch,caseSensitive,exactMatch){var length,i,filters,fn,scope,me=this,ret=new me.self(me.initialConfig),root=me.getRootProperty(),items=me.items;if(Ext.isFunction(property))fn=property,scope=value;else{if(Ext.isString(property))filters=[new Ext.util.Filter({property:property,value:value,root:root,anyMatch:anyMatch,caseSensitive:caseSensitive,exactMatch:exactMatch})];else if(property instanceof Ext.util.Filter)filters=[property],property.setRoot(root);else if(Ext.isArray(property))for(i=0,length=(filters=property.slice(0)).length;i<length;++i)filters[i].setRoot(root);fn=Ext.util.Filter.createFilterFn(filters)}for(scope=scope||me,i=0,length=items.length;i<length;i++)fn.call(scope,items[i])&&ret.add(items[i]);return ret},filterBy:function(fn,scope){return this.createFiltered(fn,scope)},each:function(fn,scope){var i,ret,items=this.items,len=items.length;if(len)for(scope=scope||this,items=items.slice(0),i=0;i<len&&!1!==(ret=fn.call(scope,items[i],i,len));i++);return ret},eachKey:function(fn,scope){var i,item,key,ret,items=this.items,len=items.length;if(len)for(scope=scope||this,items=items.slice(0),i=0;i<len&&(key=this.getKey(item=items[i]),!1!==(ret=fn.call(scope,key,item,i,len)));i++);return ret},endUpdate:function(){--this.updating||this.notify("endupdate")},find:function(property,value,start,startsWith,endsWith,ignoreCase){if(Ext.isEmpty(value,!1))return null;var regex=Ext.String.createRegex(value,startsWith,endsWith,ignoreCase),root=this.getRootProperty();return this.findBy(function(item){return item&&regex.test((root?item[root]:item)[property])},null,start)},findBy:function(fn,scope,start){var i,item,key,items=this.items,len=items.length;for(scope=scope||this,i=start||0;i<len;i++)if(key=this.getKey(item=items[i]),fn.call(scope,item,key))return items[i];return null},findIndex:function(property,value,start,startsWith,endsWith,ignoreCase){var item=this.find(property,value,start,startsWith,endsWith,ignoreCase);return item?this.indexOf(item):-1},findIndexBy:function(fn,scope,start){var item=this.findBy(fn,scope,start);return item?this.indexOf(item):-1},first:function(grouped){var groups=grouped?this.getGroups():void 0;return groups?this.aggregateGroups(groups,null,"first"):this.items[0]},last:function(grouped){var groups=grouped?this.getGroups():void 0;return groups?this.aggregateGroups(groups,null,"last"):this.items[this.length-1]},get:function(key){return this.map[key]},getAt:function(index){return this.items[index]},getByKey:function(key){return this.map[key]},getCount:function(){return this.length},getKey:function(item){var id=item.id;return 0===id||id||0===(id=item._id)||id?id:item.getId()},getRange:function(begin,end){var range,items=this.items,length=items.length;return range=length?(range=Ext.Number.clipIndices(length,[begin,end]),items.slice(range[0],range[1])):[]},getValues:function(property,root,start,end){var i,value,items=this.items,range=Ext.Number.clipIndices(items.length,[start,end]),ret=[];for(i=range[0],end=range[1];i<end;++i)value=items[i],value=(root?value[root]:value)[property],ret.push(value);return ret},indexOf:function(item){if(!item)return-1;var key=this.getKey(item);return this.indexOfKey(key)},indexOfKey:function(key){var indices=this.indices;return key in this.map?(indices=indices||this.getIndices())[key]:-1},insert:function(index,item){var items=this.decodeItems(arguments,1),ret=items;return items.length&&(this.requestedIndex=index,this.splice(index,0,items),delete this.requestedIndex,ret=1===items.length?items[0]:items),ret},itemChanged:function(item,modified,oldKey,meta){var details,newKey,sortFn,toAdd,index,newIndex,me=this,keyChanged=0===oldKey||!!oldKey,filtered=me.filtered&&me.getAutoFilter(),filterChanged=!1,itemMovement=0,items=me.items,last=me.length-1,sorted=me.sorted&&0<last&&me.getAutoSort(),source=me.getSource(),toRemove=0,itemFiltered=!1,wasFiltered=!1;source&&!source.updating?source.itemChanged(item,modified,oldKey,meta):(newKey=me.getKey(item),filtered&&(filterChanged=(wasFiltered=(index=me.indexOfKey(keyChanged?oldKey:newKey))<0)!==(itemFiltered=me.isItemFiltered(item))),filterChanged?newIndex=itemFiltered?(toRemove=[item],-1):(toAdd=[item],me.length):sorted&&!itemFiltered&&(filtered||(index=me.indexOfKey(keyChanged?oldKey:newKey)),sortFn=me.getSortFn(),-1!==index&&(index&&0<sortFn(items[index-1],items[index])?(itemMovement=-1,newIndex=Ext.Array.binarySearch(items,item,0,index,sortFn)):index<last&&0<sortFn(items[index],items[index+1])&&(itemMovement=1,newIndex=Ext.Array.binarySearch(items,item,index+1,sortFn)),itemMovement&&(toAdd=[item]))),details={item:item,key:newKey,index:newIndex,filterChanged:filterChanged,keyChanged:keyChanged,indexChanged:!!itemMovement,filtered:itemFiltered,oldIndex:index,newIndex:newIndex,wasFiltered:wasFiltered,meta:meta},keyChanged&&(details.oldKey=oldKey),modified&&(details.modified=modified),me.beginUpdate(),me.notify("beforeitemchange",[details]),keyChanged&&me.updateKey(item,oldKey),(toAdd||toRemove)&&me.splice(newIndex,toRemove,toAdd),0<itemMovement?details.newIndex--:itemMovement<0&&details.oldIndex++,me.notify(itemFiltered?"filtereditemchange":"itemchange",[details]),me.endUpdate())},remove:function(item){var items=this.decodeRemoveItems(arguments,0),length=this.length;return this.splice(0,items),length-this.length},removeAll:function(){var length=this.length;return this.generation&&length&&this.splice(0,length),this},removeAt:function(index,count){var removed,length=this.length,Num=Ext.Number,range=Num.clipIndices(length,[index,void 0===count?1:count],Num.Clip.COUNT),n=range[0],removeCount=range[1]-n,item=1==removeCount&&this.getAt(n);return this.splice(n,removeCount),removed=this.length-length,item&&removed?item:removed},removeByKey:function(key){var item=this.getByKey(key);return!(!item||!this.remove(item))&&item},replace:function(item){var index=this.indexOf(item);-1===index?this.add(item):this.insert(index,item)},splice:function(index,toRemove,toAdd){var addItems,newItemsMap,removeMap,chunk,chunkItems,chunks,i,item,itemIndex,k,key,keys,n,duplicates,sorters,end,me=this,autoSort=me.sorted&&me.getAutoSort(),map=me.map,items=me.items,length=me.length,removeItems=toRemove instanceof Array?me.decodeRemoveItems(toRemove):null,isRemoveCount=!removeItems,Num=Ext.Number,range=Num.clipIndices(length,[index,isRemoveCount?toRemove:0],Num.Clip.COUNT),begin=range[0],removeCount=(end=range[1])-begin,newItems=me.decodeItems(arguments,2),newCount=newItems?newItems.length:0,insertAt=begin,indices=me.indices||(newCount||removeItems?me.getIndices():null),adds=null,removes=removeCount?[begin]:null,newKeys=null,source=me.getSource();if(source&&!source.updating){if(isRemoveCount)for(removeItems=[],i=0;i<removeCount;++i)removeItems.push(items[begin+i]);return i=begin<length?source.indexOf(items[begin]):source.length,source.splice(i,removeItems,newItems),me}if(newCount){for(addItems=newItems,newKeys=[],newItemsMap={},autoSort&&(sorters=me.getSorters(),1<newCount&&(addItems.$cloned||(newItems=addItems=addItems.slice(0)),me.sortData(addItems))),i=0;i<newCount;++i)void 0!==(k=newItemsMap[key=me.getKey(item=newItems[i])])?(duplicates=duplicates||{})[k]=1:((itemIndex=indices[key])<begin||end<=itemIndex)&&(removes=removes||[]).push(itemIndex),newItemsMap[key]=i,newKeys.push(key);if(duplicates){for(keys=newKeys,newKeys=[],(addItems=[]).$cloned=!0,i=0;i<newCount;++i)duplicates[i]||(item=newItems[i],addItems.push(item),newKeys.push(keys[i]));newCount=addItems.length}adds={items:addItems,keys:newKeys}}for(i=removeItems?removeItems.length:0;0<i--;)void 0!==(itemIndex=indices[key=me.getKey(removeItems[i])])&&(removes=removes||[]).push(itemIndex);if(!adds&&!removes)return me;if(me.beginUpdate(),removes){for(chunk=null,chunks=[],removeMap={},1<removes.length&&removes.sort(Ext.Array.numericSortFn),i=0,n=removes.length;i<n;++i)(key=me.getKey(item=items[itemIndex=removes[i]]))in map&&(delete map[key],(!chunk||itemIndex>chunk.at+chunkItems.length)&&(chunks.push(chunk={at:itemIndex,items:chunkItems=[],keys:keys=[],map:removeMap,next:chunk,replacement:adds}),adds&&(adds.replaced=chunk)),chunkItems.push(removeMap[key]=item),keys.push(key),itemIndex<insertAt&&--insertAt,1<removeCount&&itemIndex===begin&&(--removeCount,removes[i--]=++begin));for(adds&&(adds.at=insertAt),k=chunks.length;0<k--;){if((i=(chunk=chunks[k]).at)+(n=chunk.items.length)<length&&(me.indices=indices=null),me.length=length-=n,items.splice(i,n),indices)for(keys=chunk.keys,i=0;i<n;++i)delete indices[keys[i]];++me.generation,me.notify("remove",[chunk])}}if(adds)if(autoSort&&1<newCount&&length)me.spliceMerge(addItems,newKeys);else{if(autoSort&&(1<newCount?(insertAt=0,me.indices=indices=null):insertAt=sorters.findInsertionIndex(adds.items[0],items,me.getSortFn())),insertAt===length){for(end=insertAt,i=addItems.length-1;0<=i;--i)items[end+i]=addItems[i];if(indices=me.indices)for(i=0;i<newCount;++i)indices[newKeys[i]]=insertAt+i}else me.indices=null,Ext.Array.insert(items,insertAt,addItems);for(i=0;i<newCount;++i)map[newKeys[i]]=addItems[i];me.length+=newCount,adds.at=insertAt,adds.atItem=0===insertAt?null:items[insertAt-1],++me.generation,me.notify("add",[adds])}return me.endUpdate(),me},update:function(fn,scope){this.beginUpdate();try{return fn.call(scope||this,this)}catch(e){throw e}finally{this.endUpdate()}},updateKey:function(item,oldKey){var newKey,me=this,map=me.map,indices=me.indices,source=me.getSource();source&&!source.updating?source.updateKey(item,oldKey):(newKey=me.getKey(item))!==oldKey&&(map[oldKey]!==item||newKey in map||(delete map[oldKey],me.updating++,me.generation++,map[newKey]=item,indices&&(indices[newKey]=indices[oldKey],delete indices[oldKey]),me.notify("updatekey",[{item:item,newKey:newKey,oldKey:oldKey}]),me.updating--))},findInsertIndex:function(item){for(var sourceItem,index,source=this.getSource(),sourceItems=source.items,i=source.indexOf(item)-1;-1<i;){if(sourceItem=sourceItems[i],-1<(index=this.indexOf(sourceItem)))return index+1;--i}return 0},onCollectionAdd:function(source,details){var filtered,index,copy,i,item,n,me=this,atItem=details.atItem,items=details.items,requestedIndex=me.requestedIndex;if(me.sorted||(void 0!==requestedIndex?index=requestedIndex:atItem?-1===(index=me.indexOf(atItem))?index=me.findInsertIndex(items[0]):++index:index=0),me.getAutoFilter()&&me.filtered)for(i=0,n=items.length;i<n;++i)item=items[i],me.isItemFiltered(item)?(copy=copy||items.slice(0,i),(filtered=filtered||[]).push(item)):copy&&copy.push(item);me.splice(index<0?me.length:index,0,copy||items),filtered&&me.notify("filteradd",[filtered])},onCollectionBeforeItemChange:function(source,details){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(source,details){delete this.onCollectionUpdateKey,this.itemChanged(details.item,details.modified,details.oldKey,details.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(source){var i,item,items,key,length,me=this,map={},indices={};for(items=source.items,items=me.filtered&&me.getAutoFilter()?Ext.Array.filter(items,me.getFilterFn()):items.slice(0),me.sorted&&me.sortData(items),me.items=items,me.length=length=items.length,me.map=map,me.indices=indices,i=0;i<length;++i)map[key=me.getKey(item=items[i])]=item,indices[key]=i;me.notify("refresh")},onCollectionRemove:function(source,details){this.splice(0,details.items)},onCollectionUpdateKey:function(source,details){this.updateKey(details.item,details.oldKey)},_aggregators:{average:function(items,begin,end,property,root){var n=end-begin;return n&&this._aggregators.sum.call(this,items,begin,end,property,root)/n},bounds:function(items,begin,end,property,root){for(var value,max,min,i=begin;i<end;++i)value=items[i],(value=(root?value[root]:value)[property])<max||(max=value),min<value||(min=value);return[min,max]},count:function(items){return items.length},extremes:function(items,begin,end,property,root){var i,item,max,min,value,most=null,least=null;for(i=begin;i<end;++i)item=items[i],(value=(root?item[root]:item)[property])<max||(max=value,most=item),min<value||(min=value,least=item);return[least,most]},max:function(items,begin,end,property,root){return this._aggregators.bounds.call(this,items,begin,end,property,root)[1]},maxItem:function(items,begin,end,property,root){return this._aggregators.extremes.call(this,items,begin,end,property,root)[1]},min:function(items,begin,end,property,root){return this._aggregators.bounds.call(this,items,begin,end,property,root)[0]},minItem:function(items,begin,end,property,root){return this._aggregators.extremes.call(this,items,begin,end,property,root)[0]},sum:function(items,begin,end,property,root){for(var value,sum=0,i=begin;i<end;++i)value=items[i],sum+=value=(root?value[root]:value)[property];return sum}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(observer){var observers=this.observers;observers||(this.observers=observers=[]),observers.push(observer),1<observers.length&&Ext.Array.sort(observers,this.prioritySortFn)},prioritySortFn:function(o1,o2){return(o1.observerPriority||0)-(o2.observerPriority||0)},applyExtraKeys:function(extraKeys,oldExtraKeys){var config,name,value,ret=oldExtraKeys||{};for(name in extraKeys)(value=extraKeys[name]).isCollectionKey?value.setCollection(this):(config={collection:this},Ext.isString(value)?config.property=value:config=Ext.apply(config,value),value=new Ext.util.CollectionKey(config)),ret[name]=this[name]=value,value.name=name;return ret},applyGrouper:function(grouper){return grouper=grouper&&this.getSorters().decodeSorter(grouper,"Ext.util.Grouper")},decodeItems:function(args,index){var cloned,decoder,i,ret=void 0===index?args:args[index];if(!ret||!ret.$cloned){if((cloned=args.length>index+1||!Ext.isIterable(ret))&&1===(ret=Ext.Array.slice(args,index)).length&&void 0===ret[0]&&(ret.length=0),decoder=this.getDecoder())for(cloned||(ret=ret.slice(0),cloned=!0),i=ret.length;0<i--;)!1===(ret[i]=decoder.call(this,ret[i]))&&ret.splice(i,1);cloned&&(ret.$cloned=!0)}return ret},getIndices:function(){var i,me=this,indices=me.indices,items=me.items,n=items.length;if(!indices)for(me.indices=indices={},++me.indexRebuilds,i=0;i<n;++i)indices[me.getKey(items[i])]=i;return indices},notify:function(eventName,args){var index,length,method,observer,me=this,observers=me.observers,methodName=me._eventToMethodMap[eventName],added=0;if(args=args||[],observers&&methodName)for(index=0,length=observers.length;index<length;++index)(method=(observer=observers[index])[methodName])&&(added++||args.unshift(me),method.apply(observer,args));me.hasListeners&&me.hasListeners[eventName]&&(added||args.unshift(me),me.fireEventArgs(eventName,args))},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(autoCreate){var ret=this._filters;return ret||!1===autoCreate||(ret=new Ext.util.FilterCollection,this.setFilters(ret)),ret},isItemFiltered:function(item){return!this.getFilters().filterFn(item)},onFilterChange:function(filters){var extraKeys,newKeys,key,me=this,source=me.getSource();if(source)(source.length||me.length)&&me.onCollectionRefresh(source);else{if(extraKeys=me.getExtraKeys())for(key in newKeys={},extraKeys)newKeys[key]=extraKeys[key].clone(me);source=new Ext.util.Collection({keyFn:me.getKey,extraKeys:newKeys,rootProperty:me.getRootProperty()}),me.length&&source.add(me.items),me.setSource(source),me.autoSource=source}me.notify("filter")},applyFilters:function(filters,collection){return null==filters||filters&&filters.isFilterCollection?filters:(filters&&(collection=collection||this.getFilters()).splice(0,collection.length,filters),collection)},updateFilters:function(newFilters,oldFilters){var me=this;oldFilters&&oldFilters.un("endupdate","onEndUpdateFilters",me),newFilters&&(newFilters.on({endupdate:"onEndUpdateFilters",scope:me,priority:me.$endUpdatePriority}),newFilters.$filterable=me),me.onEndUpdateFilters(newFilters)},onEndUpdateFilters:function(filters){var was=this.filtered,is=!!filters&&0<filters.length;(was||is)&&(this.filtered=is,this.onFilterChange(filters))},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(autoCreate){var ret=this._sorters;return ret||!1===autoCreate||(ret=new Ext.util.SorterCollection,this.setSorters(ret)),ret},onSortChange:function(){this.sorted&&this.sortItems()},sort:function(property,direction,mode){var sorters=this.getSorters();return sorters.addSort.apply(sorters,arguments),this},sortData:function(data){return Ext.Array.sort(data,this.getSortFn()),data},sortItems:function(sortFn){var me=this;me.sorted&&(sortFn=me.getSortFn()),me.indices=null,me.notify("beforesort",[me.getSorters(!1)]),me.length&&Ext.Array.sort(me.items,sortFn),me.notify("sort")},sortBy:function(sortFn){return this.sortItems(sortFn)},findInsertionIndex:function(item,items,comparatorFn){return items=items||this.items,comparatorFn=comparatorFn||this.getSortFn(),Ext.Array.binarySearch(items,item,comparatorFn)},applySorters:function(sorters,collection){return null==sorters||sorters&&sorters.isSorterCollection?sorters:(sorters&&(collection=collection||this.getSorters()).splice(0,collection.length,sorters),collection)},createSortFn:function(){var grouper=this.getGrouper(),sorters=this.getSorters(!1),sorterFn=sorters?sorters.getSortFn():null;return grouper?function(lhs,rhs){var ret=grouper.sort(lhs,rhs);return!ret&&sorterFn&&(ret=sorterFn(lhs,rhs)),ret}:sorterFn},updateGrouper:function(grouper){var populate,me=this,groups=me.getGroups(),sorters=me.getSorters();me.onSorterChange(),me.grouped=!!grouper,grouper?me.getTrackGroups()&&(groups||((groups=new Ext.util.GroupCollection({itemRoot:me.getRootProperty()})).$groupable=me).setGroups(groups),groups.setGrouper(grouper),populate=!0):(groups&&(me.removeObserver(groups),groups.destroy()),me.setGroups(null)),sorters.updating||me.onEndUpdateSorters(sorters),populate&&groups.onCollectionRefresh(me)},updateSorters:function(newSorters,oldSorters){var me=this;oldSorters&&oldSorters.un("endupdate","onEndUpdateSorters",me),newSorters&&(newSorters.on({endupdate:"onEndUpdateSorters",scope:me,priority:me.$endUpdatePriority}),newSorters.$sortable=me),me.onSorterChange(),me.onEndUpdateSorters(newSorters)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(sorters){var me=this,was=me.sorted,is=me.grouped&&me.getAutoGroup()||sorters&&0<sorters.length;(was||is)&&(me.sorted=!!is,me.onSortChange(sorters))},removeObserver:function(observer){var observers=this.observers;observers&&Ext.Array.remove(observers,observer)},spliceMerge:function(newItems,newKeys){var addItems,end,i,newItem,oldItem,newIndex,me=this,map=me.map,newLength=newItems.length,oldIndex=0,oldItems=me.items,oldLength=oldItems.length,adds=[],count=0,items=[],sortFn=me.getSortFn();for(me.items=items,newIndex=0;newIndex<newLength;newIndex=end){for(newItem=newItems[newIndex];oldIndex<oldLength&&!(sortFn(newItem,oldItem=oldItems[oldIndex])<0);++oldIndex)items.push(oldItem);if(oldIndex===oldLength){for(adds[count++]={at:items.length,itemAt:items[items.length-1],items:addItems=[]},1<count&&(adds[count-2].next=adds[count-1]);newIndex<newLength;++newIndex)addItems.push(newItem=newItems[newIndex]),items.push(newItem);break}for(adds[count++]={at:items.length,itemAt:items[items.length-1],items:addItems=[newItem]},1<count&&(adds[count-2].next=adds[count-1]),items.push(newItem),end=newIndex+1;end<newLength&&!(0<=sortFn(newItem=newItems[end],oldItem));++end)items.push(newItem),addItems.push(newItem)}for(;oldIndex<oldLength;++oldIndex)items.push(oldItems[oldIndex]);for(i=0;i<newLength;++i)map[newKeys[i]]=newItems[i];for(me.length=items.length,++me.generation,me.indices=null,i=0;i<count;++i)me.notify("add",[adds[i]])},getGroups:function(){return this.callParent()||null},updateAutoGroup:function(autoGroup){var groups=this.getGroups();groups&&groups.setAutoGroup(autoGroup),this.onEndUpdateSorters(this._sorters)},updateGroups:function(newGroups,oldGroups){oldGroups&&this.removeObserver(oldGroups),newGroups&&this.addObserver(newGroups)},updateSource:function(newSource,oldSource){var auto=this.autoSource;oldSource&&(oldSource.removeObserver(this),oldSource===auto&&(auto.destroy(),this.autoSource=null)),newSource&&(newSource.addObserver(this),(newSource.length||this.length)&&this.onCollectionRefresh(newSource))}},function(){var prototype=this.prototype;prototype.removeAtKey=prototype.removeByKey,prototype.decodeRemoveItems=prototype.decodeItems,Ext.Object.each(prototype._aggregators,function(name){prototype[name]=function(property,begin,end){return this.aggregate(property,name,begin,end)},prototype[name+"ByGroup"]=function(property){return this.aggregateByGroup(property,name)}})}),Ext.define("Ext.util.ObjectTemplate",{isObjectTemplate:!0,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(template,options){return template.isObjectTemplate?template:new Ext.util.ObjectTemplate(template,options)}},constructor:function(template,options){Ext.apply(this,options),this.template=template},apply:function(context){var me=this;return delete me.apply,me.apply=me.compile(me.template),me.apply(context)},privates:{compile:function(template){var compiled,i,len,fn,exclude=this.excludeProperties;if(Ext.isString(template))fn=template.indexOf("{")<0?function(){return template}:this.valueRe.test(template)?(template=template.substring(1,template.length-1).split("."),function(context){for(var v=context,i=0;v&&i<template.length;++i)v=v[template[i]];return v}):(template=new Ext.XTemplate(template),function(context){return template.apply(context)});else if(!template||Ext.isPrimitive(template)||Ext.isFunction(template))fn=function(){return template};else if(template instanceof Array){for(compiled=[],i=0,len=template.length;i<len;++i)compiled[i]=this.compile(template[i]);fn=function(context){var i,ret=[];for(i=0;i<len;++i)ret[i]=compiled[i](context);return ret}}else{for(i in compiled={},template)exclude[i]||(compiled[i]=this.compile(template[i]));fn=function(context){var i,v,ret={};for(i in template)void 0!==(v=exclude[i]?template[i]:compiled[i](context))&&(ret[i]=v);return ret}}return fn}}}),Ext.define("Ext.data.schema.Role",{isRole:!0,left:!0,owner:!1,side:"left",isMany:!1,defaultReaderType:"json",_internalReadOptions:{recordsOnly:!0,asRoot:!0},constructor:function(association,config){var me=this,extra=config.extra;Ext.apply(me,config),extra&&(delete extra.type,Ext.apply(me,extra),delete me.extra),(me.association=association).owner===me.side&&((association.owner=me).owner=!0)},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(store,associatedEntity,records,session){return records},checkMembership:Ext.emptyFn,adoptAssociated:function(record,session){var other=this.getAssociatedItem(record);other&&session.adopt(other)},createAssociationStore:function(session,from,records,isComplete){var store,me=this,association=me.association,foreignKeyName=association.getFieldName(),isMany=association.isManyToMany,storeConfig=me.storeConfig,id=from.getId(),config={asynchronousLoad:!1,model:me.cls,role:me,session:session,associatedEntity:from,disableMetaChangeEvent:!0,pageSize:null,remoteFilter:!0,trackRemoved:!session};return isMany?config.filters=[{property:me.inverse.field,value:id,exactMatch:!0}]:foreignKeyName&&(config.filters=[{property:foreignKeyName,value:id,exactMatch:!0}],config.foreignKeyName=foreignKeyName),storeConfig&&Ext.apply(config,storeConfig),store=Ext.Factory.store(config),me.onStoreCreate(store,session,id),(foreignKeyName||isMany&&session)&&store.on({scope:me,add:"onAddToMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany"}),records&&(store.loadData(records),store.complete=!!isComplete),store},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(inverseRecord,options,scope,records,allowInfer){var hadSource,args,i,len,raw,rec,sourceStore,hadRecords,storeName=this.getStoreName(),store=inverseRecord[storeName],session=inverseRecord.session,load=options&&options.reload,source=inverseRecord.$source,isComplete=!1;if(!store){if(session){if(!records&&source&&(source=source[storeName])&&!source.isLoading()){for(records=[],i=0,len=(raw=(sourceStore=source).getData().items).length;i<len;++i)rec=raw[i],records.push(session.getRecord(rec.self,rec.id));isComplete=!!source.complete,hadSource=!0}hadSource||(hadRecords=!!records,records=this.findRecords(session,inverseRecord,records,allowInfer),hadRecords||records&&records.length||(records=null),isComplete=hadRecords)}else isComplete=!!(records&&0<records.length);(store=this.createAssociationStore(session,inverseRecord,records,isComplete)).$source=sourceStore,records||!this.autoLoad&&!options||(load=!0),inverseRecord[storeName]=store}return options&&(load||store.isLoading()?store.on("load",function(store,records,success,operation){args=[store,operation],scope=scope||options.scope||inverseRecord,success?Ext.callback(options.success,scope,args):Ext.callback(options.failure,scope,args),args.push(success),Ext.callback(options,scope,args),Ext.callback(options.callback,scope,args)},null,{single:!0}):(args=[store,null],scope=scope||options.scope||inverseRecord,Ext.callback(options.success,scope,args),args.push(!0),Ext.callback(options,scope,args),Ext.callback(options.callback,scope,args))),load&&!store.isLoading()&&store.load(),store},getAssociatedItem:function(rec){return rec[this.isMany?this.getStoreName():this.getInstanceName()]||null},onDrop:Ext.emptyFn,getReaderRoot:function(){return this.associationKey||(this.associationKey=this.association.schema.getNamer().readerRoot(this.role))},getReader:function(){var me=this,reader=me.reader,Model=me.cls,useSimpleAccessors=!me.associationKey,root=this.getReaderRoot();return reader&&!reader.isReader&&(Ext.isString(reader)&&(reader={type:reader}),Ext.applyIf(reader,{model:Model,rootProperty:root,useSimpleAccessors:useSimpleAccessors,type:me.defaultReaderType}),reader=me.reader=Ext.createByAlias("reader."+reader.type,reader)),reader},getInstanceName:function(){return this.instanceName||(this.instanceName=this.association.schema.getNamer().instanceName(this.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName="$old"+this.getInstanceName())},getStoreName:function(){return this.storeName||(this.storeName=this.association.schema.getNamer().storeName(this.role))},constructReader:function(fromReader){var proxyReader,proxy,me=this,reader=me.getReader(),Model=me.cls,useSimpleAccessors=!me.associationKey,root=me.getReaderRoot();return reader||((proxy=Model.getProxy())?((reader=new((proxyReader=proxy.getReader()).self)).copyFrom(proxyReader),reader.setRootProperty(root)):reader=new fromReader.self({model:Model,useSimpleAccessors:useSimpleAccessors,rootProperty:root}),me.reader=reader),reader},read:function(record,data,fromReader,readOptions){var reader=this.constructReader(fromReader),root=reader.getRoot(data);if(root)return reader.readRecords(root,readOptions,this._internalReadOptions)},getCallbackOptions:function(options,scope,defaultScope){return"function"==typeof options?options={callback:options,scope:scope||defaultScope}:options&&((options=Ext.apply({},options)).scope=scope||options.scope||defaultScope),options},doGetFK:function(leftRecord,options,scope){var foreignKeyId,args,cls=this.cls,foreignKey=this.association.getFieldName(),instanceName=this.getInstanceName(),rightRecord=leftRecord[instanceName],reload=options&&options.reload,done=void 0!==rightRecord&&!reload,session=leftRecord.session;return done?rightRecord&&(done=!rightRecord.isLoading()):session?(foreignKeyId=leftRecord.get(foreignKey))||0===foreignKeyId?(done=session.peekRecord(cls,foreignKeyId,!0)&&!reload,rightRecord=session.getRecord(cls,foreignKeyId,!1)):(done=!0,leftRecord[instanceName]=rightRecord=null):foreignKey?(foreignKeyId=leftRecord.get(foreignKey))||0===foreignKeyId?rightRecord=rightRecord||cls.createWithId(foreignKeyId):(done=!0,leftRecord[instanceName]=rightRecord=null):done=!0,done?options&&(args=[rightRecord,null],scope=scope||options.scope||leftRecord,Ext.callback(options.success,scope,args),args.push(!0),Ext.callback(options,scope,args),Ext.callback(options.callback,scope,args)):(leftRecord[instanceName]=rightRecord,options=this.getCallbackOptions(options,scope,leftRecord),rightRecord.load(options)),rightRecord},doSetFK:function(leftRecord,rightRecord,options,scope){var oldInstanceName,foreignKey=this.association.getFieldName(),instanceName=this.getInstanceName(),current=leftRecord[instanceName],inverse=this.inverse,inverseSetter=inverse.setterName;leftRecord.session;if(rightRecord&&rightRecord.isEntity?current!==rightRecord&&(leftRecord[oldInstanceName=this.getOldInstanceName()]=current,leftRecord[instanceName]=rightRecord,current&&current.isEntity&&(current[inverse.getInstanceName()]=void 0),foreignKey&&leftRecord.set(foreignKey,rightRecord.getId()),delete leftRecord[oldInstanceName],inverseSetter&&rightRecord[inverseSetter](leftRecord)):(leftRecord.changingKey&&!inverse.isMany||leftRecord.set(foreignKey,rightRecord))&&current&&current.isEntity&&!current.isEqual(current.getId(),rightRecord)&&(leftRecord[instanceName]=void 0,inverse.isMany||(current[inverse.getInstanceName()]=void 0)),options)return Ext.isFunction(options)&&(options={callback:options,scope:scope||leftRecord}),leftRecord.save(options)}}),Ext.define("Ext.data.schema.Association",{isOneToOne:!1,isManyToOne:!1,isManyToMany:!1,owner:null,field:null,constructor:function(config){var left,right,me=this;Ext.apply(me,config),me.left=left=new me.Left(me,me.left),me.right=right=new me.Right(me,me.right),(left.inverse=right).inverse=left},hasField:function(){return!!this.field},getFieldName:function(){var field=this.field;return field?field.name:""}}),Ext.define("Ext.util.Inflector",{singleton:!0,plurals:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat|potat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status|sex)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/^(p)erson$/i,"$1eople"],[/^(m)an$/i,"$1en"],[/(.*)(child)(ren)?$/i,"$1$2ren"],[/s$/i,"s"],[/$/,"s"]],singulars:[[/(address)$/i,"$1"],[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/(p)eople$/i,"$1erson"],[/s$/i,""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(matcher,replacer){this.singulars.unshift([matcher,replacer])},plural:function(matcher,replacer){this.plurals.unshift([matcher,replacer])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(word){return-1!=Ext.Array.indexOf(this.uncountable,word)},pluralize:function(word){if(this.isTransnumeral(word))return word;var tuple,regex,i,plurals=this.plurals,length=plurals.length;for(i=0;i<length;i++)if((regex=(tuple=plurals[i])[0])==word||regex.test&&regex.test(word))return word.replace(regex,tuple[1]);return word},singularize:function(word){if(this.isTransnumeral(word))return word;var tuple,regex,i,singulars=this.singulars,length=singulars.length;for(i=0;i<length;i++)if((regex=(tuple=singulars[i])[0])==word||regex.test&&regex.test(word))return word.replace(regex,tuple[1]);return word},classify:function(word){return Ext.String.capitalize(this.singularize(word))},ordinalize:function(number){var parsed=parseInt(number,10),mod100=parsed%100;if(11<=mod100&&mod100<=13)return number+"th";switch(parsed%10){case 1:return number+"st";case 2:return number+"nd";case 3:return number+"rd";default:return number+"th"}}},function(){var singular,irregulars={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"};for(singular in irregulars)irregulars.hasOwnProperty(singular)&&(this.plural(singular,irregulars[singular]),this.singular(irregulars[singular],singular))}),Ext.define("Ext.data.schema.Namer",{mixins:[Ext.mixin.Factoryable],alias:"namer.default",isNamer:!0,capitalize:function(name){return Ext.String.capitalize(name)},fieldRole:function(name){var match=name.match(this.endsWithIdRe,"");return match&&(name=name.substr(0,name.length-(match[1]||match[2]).length)),this.apply("uncapitalize",name)},idField:function(name){return this.apply("uncapitalize,singularize",name)+"Id"},instanceName:function(roleName){return this.apply("underscore",roleName)},multiRole:function(name){return this.apply("undotted,uncapitalize,pluralize",name)},pluralize:function(name){return Ext.util.Inflector.pluralize(name)},readerRoot:function(roleName){return this.apply("uncapitalize",roleName)},singularize:function(name){return Ext.util.Inflector.singularize(name)},storeName:function(roleName){return this.apply("underscore",roleName)},uncapitalize:function(name){return Ext.String.uncapitalize(name)},underscore:function(name){return"_"+name},uniRole:function(name){return this.apply("undotted,uncapitalize,singularize",name)},undotted:function(name){if(name.indexOf(".")<0)return name;for(var parts=name.split("."),index=parts.length;1<index--;)parts[index]=this.apply("capitalize",parts[index]);return parts.join("")},getterName:function(role){var name=role.role;return role&&role.isMany?name:"get"+this.apply("capitalize",name)},inverseFieldRole:function(leftType,unique,rightRole,rightType){var leftRole=this.apply(unique?"uniRole":"multiRole",leftType),s1=this.apply("pluralize",rightRole),s2=this.apply("undotted,pluralize",rightType);return s1.toLowerCase()!==s2.toLowerCase()&&(leftRole=rightRole+this.apply("capitalize",leftRole)),leftRole},manyToMany:function(relation,leftType,rightType){var ret=this.apply("undotted,capitalize,singularize",leftType)+this.apply("undotted,capitalize,pluralize",rightType);return relation&&(ret=this.apply("capitalize",relation+ret)),ret},manyToOne:function(leftType,leftRole,rightType,rightRole){return this.apply("capitalize,singularize",rightType)+this.apply("capitalize",leftRole)},matrixRole:function(relation,entityType){var ret=this.apply(relation?"multiRole,capitalize":"multiRole",entityType);return relation?relation+ret:ret},oneToOne:function(leftType,leftRole,rightType,rightRole){return this.apply("undotted,capitalize,singularize",rightType)+this.apply("capitalize",leftRole)},setterName:function(role){return"set"+this.apply("capitalize",role.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(operation,name){var i,length,operations,cache=this.cache,entry=cache[name]||(cache[name]={}),ret=entry[operation];if(!ret){if(operation.indexOf(",")<0)ret=this[operation](name);else for(length=(operations=operation.split(",")).length,ret=name,i=0;i<length;++i)ret=this.apply(operations[i],ret);entry[operation]=ret}return ret}}),Ext.define("Ext.data.schema.Schema",{mixins:[Ext.mixin.Factoryable],alias:"schema.default",aliasPrefix:"schema.",isSchema:!0,type:"default",statics:{instances:{},get:function(config){var instance,newConfig,cache=this.instances,id="default",isString=config&&Ext.isString(config);if(config){if(config.isSchema)return config;id=isString?config:config.id||id}return(instance=cache[id])?config&&!isString&&(newConfig=Ext.merge({},instance.config),Ext.merge(newConfig,config),instance.setConfig(newConfig),instance.config=newConfig):(cache[id]=instance=this.create(config),instance.id=id),instance},lookupEntity:function(entity){var match,name,ret=null,instances=this.instances;if(entity)if(entity.isEntity)ret=entity.self;else if(Ext.isFunction(entity))ret=entity;else if(Ext.isString(entity)){if(!(ret=Ext.ClassManager.get(entity))||ret.prototype&&ret.prototype.isEntity||(ret=null),!ret)for(name in instances)(match=instances[name].getEntity(entity))&&(ret&&Ext.raise('Ambiguous entity name "'+entity+'". Defined by schema "'+ret.schema.type+'" and "'+name+'"'),ret=match);ret||Ext.raise('No such Entity "'+entity+'".')}return ret}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(cls,data){var alias=data.alias;alias&&!data.type&&(Ext.isString(alias)||(alias=alias[0]),cls.prototype.type=alias.substring(this.prototype.aliasPrefix.length))},constructor:function(config){this.initConfig(config),this.clear()},applyDefaultIdentifier:function(identifier){return identifier&&Ext.Factory.dataIdentifier(identifier)},applyNamer:function(namer){var ret=Ext.data.schema.Namer.create(namer);return ret.schema=this,ret},applyNamespace:function(namespace){if(namespace){var end=namespace.length-1;"."!==namespace.charAt(end)&&(namespace+=".")}return namespace},applyProxy:function(proxy){return Ext.util.ObjectTemplate.create(proxy)},eachAssociation:function(fn,scope){var name,associations=this.associations;for(name in associations)if(associations.hasOwnProperty(name)&&!1===fn.call(scope,name,associations[name]))break},eachEntity:function(fn,scope){var name,entities=this.entities;for(name in entities)if(entities.hasOwnProperty(name)&&!1===fn.call(scope,name,entities[name].cls))break},getAssociation:function(name){return this.associations[name]||null},getEntity:function(name){var entry=this.entityClasses[name]||this.entities[name];return entry&&entry.cls||null},getEntityName:function(cls){var index,name,ns=this.getNamespace();if(name="string"==typeof cls?cls:cls.$className||null){if(ns&&(index=ns.length,name.substring(0,index)!==ns))return name;index&&(name=name.substring(index))}return name},hasAssociations:function(name){return name=name.entityName||name,!!this.associationEntityMap[name]},hasEntity:function(entity){var name=this.getEntityName(entity);return!(!this.entities[name]&&!this.entityClasses[name])},addMatrix:function(entityType,matrixName,relation,left,right){var matrix,leftEntry,rightEntry,me=this,namer=me.getNamer(),associations=me.associations,entities=me.entities,leftType=left.type,rightType=right.type,leftField=left.field||namer.apply("idField",leftType),rightField=right.field||namer.apply("idField",rightType),leftRole=left.role||namer.matrixRole(relation,leftType),rightRole=right.role||namer.matrixRole(relation,rightType);leftEntry=entities[leftType]||(entities[leftType]={cls:null,name:leftType,associations:{}}),rightEntry=entities[rightType]||(entities[rightType]={cls:null,name:rightType,associations:{}}),++me.assocCount,associations[matrixName]=matrix=new Ext.data.schema.ManyToMany({name:matrixName,schema:me,definedBy:entityType,left:{cls:leftEntry.cls,type:leftType,role:leftRole,field:leftField,associationKey:left.associationKey},right:{cls:rightEntry.cls,type:rightType,role:rightRole,field:rightField,associationKey:right.associationKey}}),leftEntry.associations[matrix.right.role]=matrix.right,rightEntry.associations[matrix.left.role]=matrix.left,leftEntry.cls&&(me.associationEntityMap[leftEntry.cls.entityName]=!0),rightEntry.cls&&(me.associationEntityMap[rightEntry.cls.entityName]=!0),me.decorateModel(matrix)},addReference:function(entityType,referenceField,descr,unique){var entry,me=this,namer=me.getNamer(),entities=me.entities,associations=me.associations,entityName=entityType.entityName,association=descr.association,legacy=!!descr.legacy,child=descr.child,parent=descr.parent,rightRole=descr.role,rightType=descr.type||parent||child,leftVal=descr.inverse,left=Ext.isString(leftVal)?{role:leftVal}:leftVal,leftRole=left&&left.role;rightRole=rightRole||(legacy?namer.apply("uncapitalize",rightType):namer.apply("fieldRole",referenceField.name)),leftRole=leftRole||namer.inverseFieldRole(entityName,unique,rightRole,rightType),association=association||(unique?namer.oneToOne(entityType,leftRole,rightType,rightRole):namer.manyToOne(entityType,leftRole,rightType,rightRole)),entry=entities[rightType]||(entities[rightType]={cls:null,name:rightType,associations:{}}),association=new(unique?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne)({name:association,owner:child?"left":parent?"right":null,definedBy:entityType,schema:me,field:referenceField,nullable:!referenceField||!!referenceField.allowBlank,legacy:descr.legacy,left:{cls:entityType,type:entityName,role:leftRole,extra:left},right:{cls:entry.cls,type:rightType,role:rightRole,extra:descr}}),entityType.associations[rightRole]=association.right,entry.associations[leftRole]=association.left,referenceField&&(referenceField.reference=association.right,entityType.references.push(referenceField)),++me.assocCount,me.associationEntityMap[entityName]=!0,entry.cls&&(me.associationEntityMap[entry.cls.entityName]=!0),(associations[association.name]=association).right.cls&&me.decorateModel(association)},privates:{addEntity:function(entityType){var associations,field,i,length,name,me=this,entities=me.entities,entityName=entityType.entityName,entry=entities[entityName],fields=entityType.fields;if(entry)for(name in associations=entry.associations)associations[name].inverse.cls=entityType,me.associationEntityMap[entityName]=!0,me.decorateModel(associations[name].association);else entities[entityName]=entry={name:entityName,associations:{}};for((entry.cls=entityType).prototype.associations=entityType.associations=entry.associations,me.entityClasses[entityType.$className]=entry,++me.entityCount,i=0,length=fields.length;i<length;++i)(field=fields[i]).reference&&me.addReferenceDescr(entityType,field)},addMatrices:function(entityType,matrices){var i,length,matrixName;if(Ext.isString(matrices))this.addMatrixDescr(entityType,null,matrices);else if(matrices[0])for(i=0,length=matrices.length;i<length;++i)this.addMatrixDescr(entityType,null,matrices[i]);else for(matrixName in matrices)this.addMatrixDescr(entityType,matrixName,matrices[matrixName])},addMatrixDescr:function(entityType,matrixName,matrixDef){var last,relation,entityName=entityType.entityName,associations=this.associations,namer=this.getNamer(),left=matrixDef.left,right=matrixDef.right;Ext.isString(matrixDef)?right="#"===matrixDef.charAt(0)?(left={type:entityName},{type:matrixDef.substring(1)}):"#"===matrixDef.charAt(last=matrixDef.length-1)?(left={type:matrixDef.substring(0,last)},{type:entityName}):namer.apply("multiRole",entityName)<namer.apply("multiRole",matrixDef)?(left={type:entityName},{type:matrixDef}):(left={type:matrixDef},{type:entityName}):(relation=matrixDef.relation,left||!right&&namer.apply("multiRole",entityName)<namer.apply("multiRole",matrixDef.type)?(left=left&&!0!==left?Ext.apply({type:entityName},left):{type:entityName},right=matrixDef):(right=right&&!0!==right?Ext.apply({type:entityName},right):{type:entityName},left=matrixDef)),(matrixName=matrixName||namer.manyToMany(relation,left.type,right.type))in associations||this.addMatrix(entityType,matrixName,relation,left,right)},addReferenceDescr:function(entityType,referenceField){var descr=referenceField.$reference;(descr=Ext.isString(descr)?{type:descr}:Ext.apply({},descr)).legacy?descr.single?this.addLegacySingle(entityType,descr):this.addLegacyHasMany(entityType,descr):this.addReference(entityType,referenceField,descr,referenceField.unique)},addPending:function(name,entityType,assoc,type){var pending=this.pending;pending[name]||(pending[name]=[]),pending[name].push([entityType,assoc,type])},addLegacyBelongsTo:function(entityType,assoc){this.addLegacySingle(entityType,assoc)},addLegacyHasOne:function(entityType,assoc){this.addLegacySingle(entityType,assoc)},addLegacySingle:function(entityType,assoc){var foreignKey,name,referenceField;(assoc=this.constructLegacyAssociation(entityType,assoc)).single=!0,name=assoc.type,foreignKey=assoc.foreignKey||name.toLowerCase()+"_id",(referenceField=entityType.getField(foreignKey))&&(referenceField.$reference=assoc),this.addReference(entityType,referenceField,assoc,!0)},addLegacyHasMany:function(entityType,assoc){var cls,name,referenceField,target,foreignKey,assocName,entities=this.entities,pending=this.pending,associationKey=assoc.associationKey;(target=entities[name=(assoc=this.constructLegacyAssociation(entityType,assoc)).type])&&target.cls?(assoc.type=entityType.entityName,foreignKey=assoc.foreignKey||assoc.type.toLowerCase()+"_id",referenceField=(cls=target.cls).getField(foreignKey),assoc.inverse=assoc||{},((assocName=assoc.name)||associationKey)&&(assocName&&(assoc.inverse.role=assocName),associationKey&&(assoc.inverse.associationKey=associationKey)),referenceField&&(referenceField.$reference=assoc),this.addReference(cls,referenceField,assoc,!1)):(pending[name]||(pending[name]=[]),pending[name].push([entityType,assoc]))},constructLegacyAssociation:function(entityType,assoc){Ext.isString(assoc)&&(assoc={model:assoc}),assoc.legacy=!0,assoc.type=this.getEntityName(assoc.model);var name=assoc.associatedName||assoc.name;return name&&(assoc.role=name),assoc},afterLegacyAssociations:function(cls){var i,len,pending=this.pending,name=cls.entityName,mine=pending[name];if(mine){for(i=0,len=mine.length;i<len;++i)this.addLegacyHasMany.apply(this,mine[i]);delete pending[name]}},clear:function(clearNamespace){var me=this,timer=me.timer;delete me.setConfig,timer&&(window.clearTimeout(timer),me.timer=null),me.associations={},me.associationEntityMap={},me.entities={},me.entityClasses={},me.pending={},me.assocCount=me.entityCount=0,clearNamespace&&me.setNamespace(null)},constructProxy:function(Model){var data=Ext.Object.chain(Model),proxy=this.getProxy();return data.schema=this,data.prefix=this.getUrlPrefix(),proxy.apply(data)},applyDecoration:function(role){var getterName,setterName,proto,cls=role.inverse.cls,namer=this.getNamer();cls&&!role.decorated&&(role.decorated=!0,proto=cls.prototype,(getterName=role.getterName)||(role.getterName=getterName=namer.getterName(role)),proto[getterName]=role.createGetter(),role.createSetter&&((setterName=role.setterName)||(role.setterName=setterName=namer.setterName(role)),proto[setterName]=role.createSetter()))},decorateModel:function(association){this.applyDecoration(association.left),this.applyDecoration(association.right)},processKeyChecks:function(processAll){var len,i,item,me=this,keyCheckQueue=me.keyCheckQueue,timer=me.timer;if(timer&&(window.clearTimeout(timer),me.timer=null),keyCheckQueue)do{for(keyCheckQueue=me.keyCheckQueue,me.keyCheckQueue=[],i=0,len=keyCheckQueue.length;i<len;++i)(item=keyCheckQueue[i]).role.checkKeyForDrop(item.record)}while(processAll&&me.keyCheckQueue.length)},queueKeyCheck:function(record,role){var me=this,keyCheckQueue=me.keyCheckQueue,timer=me.timer;keyCheckQueue||(me.keyCheckQueue=keyCheckQueue=[]),keyCheckQueue.push({record:record,role:role}),timer||(me.timer=timer=Ext.Function.defer(me.processKeyChecks,me.getKeyCheckDelay(),me))},rankEntities:function(){var entityType,i,entities=this.entities,entityNames=Ext.Object.getKeys(entities),length=entityNames.length;for(this.nextRank=1,entityNames.sort(),i=0;i<length;++i)(entityType=entities[entityNames[i]].cls).rank||this.rankEntity(entityType)},rankEntity:function(entityType){var associatedType,role,roleName,associations=entityType.associations;for(roleName in associations)!(role=associations[roleName]).left&&role.association.field&&((associatedType=role.cls).rank||this.rankEntity(associatedType));entityType.rank=this.nextRank++}}}),Ext.define("Ext.data.AbstractStore",{mixins:[Ext.mixin.Observable,Ext.mixin.Factoryable],factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:!1,$configStrict:!1,config:{filters:null,autoDestroy:void 0,storeId:null,statefulFilters:!1,sorters:null,remoteSort:{lazy:!0,$value:!1},remoteFilter:{lazy:!0,$value:!1},groupField:void 0,groupDir:"ASC",grouper:null,pageSize:25},currentPage:1,loading:!1,isStore:!0,updating:0,constructor:function(config){var storeId,me=this;me.isInitializing=!0,me.mixins.observable.constructor.call(me,config),me.isInitializing=!1,!(storeId=me.getStoreId())&&config&&config.id&&me.setStoreId(storeId=config.id),storeId&&Ext.data.StoreManager.register(me)},getCount:function(){return this.getData().getCount()},rangeCached:function(start,end){return this.getData().getCount()>=Math.max(start,end)},find:function(property,value,startIndex,anyMatch,caseSensitive,exactMatch){var startsWith=!anyMatch,endsWith=!(!startsWith||!exactMatch);return this.getData().findIndex(property,value,startIndex,startsWith,endsWith,!caseSensitive)},findRecord:function(){var index=this.find.apply(this,arguments);return-1!==index?this.getAt(index):null},findExact:function(property,value,start){return this.getData().findIndexBy(function(rec){return rec.isEqual(rec.get(property),value)},this,start)},findBy:function(fn,scope,start){return this.getData().findIndexBy(fn,scope,start)},getAt:function(index){return this.getData().getAt(index)||null},getRange:function(start,end,options){var result=this.getData().getRange(start,Ext.isNumber(end)?end+1:end);return options&&options.callback&&options.callback.call(options.scope||this,result,start,end,options),result},getFilters:function(autoCreate){var result=this.callParent();return result||!1===autoCreate||(this.setFilters([]),result=this.callParent()),result},applyFilters:function(filters,filtersCollection){var created;return filtersCollection||(filtersCollection=this.createFiltersCollection(),created=!0),filtersCollection.add(filters),created&&this.onRemoteFilterSet(filtersCollection,this.getRemoteFilter()),filtersCollection},getSorters:function(autoCreate){var result=this.callParent();return result||!1===autoCreate||(this.setSorters([]),result=this.callParent()),result},applySorters:function(sorters,sortersCollection){var created;return sortersCollection||(sortersCollection=this.createSortersCollection(),created=!0),sortersCollection.add(sorters),created&&this.onRemoteSortSet(sortersCollection,this.getRemoteSort()),sortersCollection},filter:function(filters,value,supressEvent){Ext.isString(filters)&&(filters={property:filters,value:value}),this.suppressNextFilter=!!supressEvent,this.getFilters().add(filters),this.suppressNextFilter=!1},removeFilter:function(filter,supressEvent){var filters=this.getFilters();this.suppressNextFilter=!!supressEvent,filter instanceof Ext.util.Filter?filters.remove(filter):filters.removeByKey(filter),this.suppressNextFilter=!1},updateRemoteSort:function(remoteSort){this.onRemoteSortSet(this.getSorters(!1),remoteSort)},updateRemoteFilter:function(remoteFilter){this.onRemoteFilterSet(this.getFilters(!1),remoteFilter)},addFilter:function(filters,supressEvent){this.suppressNextFilter=!!supressEvent,this.getFilters().add(filters),this.suppressNextFilter=!1},filterBy:function(fn,scope){this.getFilters().add({filterFn:fn,scope:scope||this})},clearFilter:function(supressEvent){var filters=this.getFilters(!1);filters&&0!==filters.getCount()&&(this.suppressNextFilter=!!supressEvent,filters.removeAll(),this.suppressNextFilter=!1)},isFiltered:function(){return 0<this.getFilters().getCount()},isSorted:function(){var sorters=this.getSorters(!1);return!!(sorters&&0<sorters.length)||this.isGrouped()},addFieldTransform:function(sorter){if(!sorter.getTransform()){var field,sortType,fieldName=sorter.getProperty(),Model=this.getModel();Model&&(sortType=(field=Model.getField(fieldName))?field.getSortType():null),sortType&&sortType!==Ext.identityFn&&sorter.setTransform(sortType)}},beginUpdate:function(){this.updating++||this.fireEvent("beginupdate")},endUpdate:function(){this.updating&&!--this.updating&&(this.fireEvent("endupdate"),this.onEndUpdate())},getState:function(){var filterState,hasState,result,me=this,sorters=[],filters=me.getFilters(),grouper=me.getGrouper();return me.getSorters().each(function(s){sorters[sorters.length]=s.getState(),hasState=!0}),me.statefulFilters&&me.saveStatefulFilters&&(hasState=!0,filterState=[],filters.each(function(f){filterState[filterState.length]=f.getState()})),grouper&&(hasState=!0),hasState&&(result={},sorters.length&&(result.sorters=sorters),filterState&&(result.filters=filterState),grouper&&(result.grouper=grouper.getState())),result},applyState:function(state){var stateSorters=state.sorters,stateFilters=state.filters,stateGrouper=state.grouper;stateSorters&&this.getSorters().replaceAll(stateSorters),stateFilters&&(this.saveStatefulFilters=!0,this.getFilters().replaceAll(stateFilters)),stateGrouper&&this.setGrouper(stateGrouper)},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){this.getStoreId()&&Ext.data.StoreManager.unregister(this),this.callParent(),this.onDestroy()},sort:function(field,direction,mode){0===arguments.length?this.getRemoteSort()?this.load():this.forceLocalSort():this.getSorters().addSort(field,direction,mode)},onBeforeCollectionSort:function(store,sorters){sorters&&this.fireEvent("beforesort",this,sorters.getRange())},onSorterEndUpdate:function(){var sorters,me=this;sorters=me.getSorters(!1),!me.settingGroups&&sorters&&((sorters=sorters.getRange()).length?me.getRemoteSort()?me.load({callback:function(){me.fireEvent("sort",me,sorters)}}):(me.fireEvent("datachanged",me),me.fireEvent("refresh",me),me.fireEvent("sort",me,sorters)):me.fireEvent("sort",me,sorters))},onFilterEndUpdate:function(){var me=this,suppressNext=me.suppressNextFilter;me.getRemoteFilter()?(me.currentPage=1,suppressNext||me.load()):suppressNext||(me.fireEvent("datachanged",me),me.fireEvent("refresh",me)),me.trackStateChanges&&(me.saveStatefulFilters=!0),me.fireEvent("filterchange",me,me.getFilters().getRange())},updateGroupField:function(field){field?this.setGrouper({property:field,direction:this.getGroupDir()}):this.setGrouper(null)},getGrouper:function(){return this.getData().getGrouper()},group:function(grouper,direction){var me=this,sorters=me.getSorters(!1),change=grouper||sorters&&sorters.length;grouper&&"string"==typeof grouper&&(grouper={property:grouper,direction:direction||me.getGroupDir()}),me.settingGroups=!0,me.getData().setGrouper(grouper),delete me.settingGroups,change?me.getRemoteSort()?me.load({scope:me,callback:me.fireGroupChange}):(me.fireEvent("datachanged",me),me.fireEvent("refresh",me),me.fireGroupChange()):me.fireGroupChange()},fireGroupChange:function(){this.destroyed||this.fireEvent("groupchange",this,this.getGrouper())},clearGrouping:function(){this.group(null)},getGroupField:function(){var grouper=this.getGrouper(),group="";return grouper&&(group=grouper.getProperty()),group},isGrouped:function(){return!!this.getGrouper()},applyGrouper:function(grouper){return this.group(grouper),this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(filters,remoteFilter){filters&&filters[remoteFilter?"on":"un"]("endupdate",this.onFilterEndUpdate,this)},onRemoteSortSet:function(sorters,remoteSort){var me=this;sorters&&(sorters[remoteSort?"on":"un"]("endupdate",me.onSorterEndUpdate,me),me.getData()[remoteSort?"un":"on"]("beforesort",me.onBeforeCollectionSort,me))}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}}),Ext.define("Ext.data.Error",{isError:!0,$configPrefixed:!1,config:{field:null,message:""},constructor:function(config){this.initConfig(config),this.msg=this.message}}),Ext.define("Ext.data.ErrorCollection",{extend:Ext.util.MixedCollection,alternateClassName:"Ext.data.Errors",init:function(record){var before,field,i,len,msg,val,name,me=this,fields=record.fields,data=record.data;for(i=0,len=fields.length;i<len;++i)val=data[name=(field=fields[i]).name],field.validate&&!field.validate.$nullFn&&(before=me.length,msg=field.validate(val,null,me,record),before===me.length&&!0!==msg&&me.add(name,msg));return me},add:function(key,value){var current,defaultMessage=Ext.data.field.Field.defaultInvalidMessage,obj=key;if(Ext.isString(key)?obj=new Ext.data.Error({field:key,message:value||defaultMessage}):(obj.isError||(obj=new Ext.data.Error({field:obj.field||obj.name,message:obj.error||obj.message||obj.msg||defaultMessage})),key=obj.field),current=this.get(key)){if(Ext.isArray(current))return current.push(obj),current;this.removeAtKey(key),(obj=[current,obj]).field=key,obj=[obj]}return this.callParent([obj])},getKey:function(item){return item.field},isValid:function(){return 0===this.length},getByField:function(fieldName){var values=this.get(fieldName);return values&&!Ext.isArray(values)&&(values=[values]),values||[]}}),Ext.define("Ext.data.operation.Operation",{alternateClassName:"Ext.data.Operation",isOperation:!0,config:{synchronous:!1,url:"",params:void 0,callback:void 0,scope:void 0,resultSet:null,response:null,request:null,records:null,id:void 0,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:!1,running:!1,complete:!1,success:void 0,exception:!1,error:void 0,idPrefix:"ext-operation-",constructor:function(config){var scope=config&&config.scope;this.initConfig(config),config&&(config.scope=scope),scope&&(this.setScope(scope),this.initialConfig.scope=scope),this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var request,me=this;return delete me.error,delete me.success,me.complete=me.exception=!1,me.setStarted(),me.request=request=me.doExecute(),request&&request.setOperation(me),request},doExecute:Ext.emptyFn,abort:function(){var request=this.request;this.running&&request&&(this.getProxy().abort(request),this.request=null)},process:function(resultSet,request,response,autoComplete){var me=this;autoComplete=!1!==autoComplete,me.setResponse(response),me.setResultSet(resultSet),resultSet.getSuccess()?(me.doProcess(resultSet,request,response),me.setSuccessful(autoComplete)):autoComplete&&me.setException(resultSet.getMessage())},_commitSetOptions:{convert:!0,commit:!0},doProcess:function(resultSet,request,response){var clientMap,serverRecord,clientRecord,i,commitSetOptions=this._commitSetOptions,clientRecords=this.getRecords(),clientLen=clientRecords.length,clientIdProperty=clientRecords[0].clientIdProperty,serverRecords=resultSet.getRecords(),serverLen=serverRecords?serverRecords.length:0;if(serverLen&&clientIdProperty){for(clientMap=Ext.Array.toValueMap(clientRecords,"id"),i=0;i<serverLen;++i)(clientRecord=clientMap[(serverRecord=serverRecords[i])[clientIdProperty]])&&(delete clientMap[clientRecord.id],delete serverRecord[clientIdProperty],clientRecord.set(serverRecord,commitSetOptions));for(i in clientMap)clientMap[i].commit()}else for(i=0;i<clientLen;++i)clientRecord=clientRecords[i],0!==serverLen&&(serverRecord=serverRecords[i])?clientRecord.set(serverRecord,commitSetOptions):clientRecord.commit()},setStarted:function(){this.started=this.running=!0},setCompleted:function(){var me=this,proxy=me.getProxy();me.complete=!0,me.running=!1,me.triggerCallbacks(),proxy&&proxy.completeOperation(me)},setSuccessful:function(complete){this.success=!0,complete&&this.setCompleted()},setException:function(error){var me=this;me.exception=!0,me.success=me.running=!1,me.error=error,me.setCompleted()},triggerCallbacks:function(){var me=this,callback=me.getInternalCallback();callback&&(callback.call(me.getInternalScope()||me,me),me.setInternalCallback(null),me.setInternalScope(null)),(callback=me.getCallback())&&(callback.call(me.getScope()||me,me.getRecords(),me,me.wasSuccessful()),me.setCallback(null),me.setScope(null))},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var resultSet;return this._records||((resultSet=this.getResultSet())?resultSet.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&!0===this.success},allowWrite:function(){return!0}}),Ext.define("Ext.data.operation.Create",{extend:Ext.data.operation.Operation,alias:"data.operation.create",action:"create",isCreateOperation:!0,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}}),Ext.define("Ext.data.operation.Destroy",{extend:Ext.data.operation.Operation,alias:"data.operation.destroy",action:"destroy",isDestroyOperation:!0,order:30,foreignKeyDirection:-1,doProcess:function(){var i,clientRecords=this.getRecords(),clientLen=clientRecords.length;for(i=0;i<clientLen;++i)clientRecords[i].setErased()},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(record,operation){var data={};return data[record.idField[this.getNameProperty()||"name"]]=record.id,data}}),Ext.define("Ext.data.operation.Read",{extend:Ext.data.operation.Operation,alias:"data.operation.read",action:"read",isReadOperation:!0,config:{filters:void 0,sorters:void 0,grouper:void 0,start:void 0,limit:void 0,page:void 0,addRecords:!1},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return!1}}),Ext.define("Ext.data.operation.Update",{extend:Ext.data.operation.Operation,alias:"data.operation.update",action:"update",isUpdateOperation:!0,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}}),Ext.define("Ext.data.SortTypes",{singleton:!0,none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(s){return null!=s?String(s).replace(this.stripTagsRe,""):"\0"},asUCText:function(s){return null!=s?String(s).toUpperCase().replace(this.stripTagsRe,""):"\0"},asUCString:function(s){return null!=s?String(s).toUpperCase():"\0"},asDate:function(s){return s?Ext.isDate(s)?s.getTime():Date.parse(String(s)):0},asFloat:function(s){var val=parseFloat(String(s).replace(this.stripCommasRe,""));return isNaN(val)?0:val},asInt:function(s){var val=parseInt(String(s).replace(this.stripCommasRe,""),10);return isNaN(val)?0:val}}),Ext.define("Ext.data.validator.Validator",{mixins:[Ext.mixin.Factoryable],alias:"data.validator.base",isValidator:!0,type:"base",statics:{all:{},register:function(name,cls){var all=this.all;all[name.toUpperCase()]=all[name.toLowerCase()]=all[name]=cls.prototype}},onClassExtended:function(cls,data){data.type&&Ext.data.validator.Validator.register(data.type,cls)},constructor:function(config){"function"==typeof config?(this.fnOnly=!0,this.validate=config):this.initConfig(config)},validate:function(){return!0},clone:function(){return this.fnOnly?new Ext.data.validator.Validator(this.validate):new this.self(this.getCurrentConfig())}},function(){this.register(this.prototype.type,this)}),Ext.define("Ext.data.field.Field",{mixins:[Ext.mixin.Factoryable],alternateClassName:"Ext.data.Field",alias:"data.field.auto",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:!0,isField:!0,allowBlank:!0,allowNull:!1,critical:!1,defaultInvalidMessage:"This field is invalid",defaultValue:void 0,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:void 0,persist:null,reference:null,unique:!1,rank:null,stripRe:/[\$,%]/g,calculated:!1,evil:!1,identifier:!1,onClassExtended:function(cls,data){var sortType=data.sortType,proto=cls.prototype,superValidators=proto.validators,validators=data.validators;sortType&&Ext.isString(sortType)&&(proto.sortType=Ext.data.SortTypes[sortType]),validators&&(Ext.isArray(validators)||(validators=[validators]),delete data.validators,superValidators&&(validators=superValidators.concat(validators)),proto.validators=validators)},argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(config){var calculate,calculated,defaultValue,sortType,depends,map,match,dataProp,str,fld,validators,me=this,calculateRe=me.calculateRe;if(config&&(Ext.isString(config)?me.name=config:((validators=config.validators)&&(delete config.validators,me.instanceValidators=validators),Ext.apply(me,config))),me.allowNull||(me.allowNull=!!me.reference),calculate=me.calculate,depends=me.depends,calculate&&(me.convert=me.doCalculate,!depends)){if(!(depends=calculate.$depends))for(map={},str=calculate.toString(),calculate.$depends=depends=[],dataProp=(match=me.argumentNamesRe.exec(str))?match[1]:"data";match=calculateRe.exec(str);)dataProp!==match[1]||map[fld=match[2]]||(map[fld]=1,depends.push(fld));me.depends=depends}defaultValue=me.defaultValue,me.convert&&(me.calculated=calculated=1<me.convert.length,me.evil=calculated&&!depends),null===me.persist&&(me.persist=!calculate),sortType=me.sortType,me.sortType?Ext.isString(sortType)&&(me.sortType=Ext.data.SortTypes[sortType]):me.sortType=Ext.data.SortTypes.none,depends&&"string"==typeof depends&&(me.depends=[depends]),me.cloneDefaultValue=void 0!==defaultValue&&(Ext.isDate(defaultValue)||Ext.isArray(defaultValue)||Ext.isObject(defaultValue))},setModelValidators:function(modelValidators){this._validators=null,this.modelValidators=modelValidators},compileValidators:function(){var me=this;me._validators=[],me.constructValidators(me.validators),me.constructValidators(me.modelValidators),me.constructValidators(me.instanceValidators)},constructValidators:function(validators){if(validators){validators instanceof Array||(validators=[validators]);var i,item,length=validators.length,all=this._validators;for(i=0;i<length;++i)(item=validators[i]).fn&&(item=item.fn),all.push(Ext.Factory.dataValidator(item))}},collate:function(value1,value2){var lhs=value1,rhs=value2;return this.sortType&&(lhs=this.sortType(lhs),rhs=this.sortType(rhs)),lhs===rhs?0:lhs<rhs?-1:1},compare:function(value1,value2){return value1===value2?0:value1<value2?-1:1},isEqual:function(value1,value2){return 0===this.compare(value1,value2)},convert:null,serialize:null,validate:function(value,separator,errors,record){var result,validators,length,i,me=this,ret="";for(me._validators||me.compileValidators(),i=0,length=(validators=me._validators).length;i<length;++i)if(!0!==(result=validators[i].validate(value,record)))if(result=result||me.defaultInvalidMessage,errors)errors.add(me.name,result),ret=ret||result;else{if(!separator){ret=result;break}ret&&(ret+=separator),ret+=result}return ret||!0},doCalculate:function(v,rec){return rec?this.calculate(rec.data):v},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var map=this.mapping;return!(!map&&0!==map)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getType:function(){return"auto"},deprecated:{5.1:{methods:{getSortDir:function(){return this.sortDir}}}}}),Ext.define("Ext.data.field.Boolean",{extend:Ext.data.field.Field,alias:["data.field.bool","data.field.boolean"],isBooleanField:!0,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(v){return"boolean"==typeof v?v:!this.allowNull||null!=v&&""!==v?this.trueRe.test(String(v)):null},getType:function(){return"bool"}}),Ext.define("Ext.data.field.Date",{extend:Ext.data.field.Field,alias:"data.field.date",sortType:"asDate",isDateField:!0,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(lhs,rhs){var result,lhsIsDate=lhs instanceof Date,rhsIsDate=rhs instanceof Date;return result=rhsIsDate&&lhsIsDate?0===(result=lhs.getTime()-rhs.getTime())?0:result<0?-1:1:lhsIsDate==rhsIsDate?0:lhsIsDate?1:-1},convert:function(v){if(!v)return null;if(v instanceof Date)return v;var parsed,dateFormat=this.dateReadFormat||this.dateFormat;return dateFormat?Ext.Date.parse(v,dateFormat):(parsed=Date.parse(v))?new Date(parsed):null},serialize:function(value){var format,result=null;return Ext.isDate(value)&&(result=(format=this.getDateWriteFormat())?Ext.Date.format(value,format):value),result},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var me=this;return me.hasOwnProperty("dateWriteFormat")?me.dateWriteFormat:me.hasOwnProperty("dateFormat")?me.dateFormat:me.dateWriteFormat||me.dateFormat||"timestamp"},getType:function(){return"date"}}),Ext.define("Ext.data.field.Integer",{extend:Ext.data.field.Field,alias:["data.field.int","data.field.integer"],isNumeric:!0,isIntegerField:!0,numericType:"int",convert:function(v){if("number"==typeof v)return this.getNumber(v);var out,empty=null==v||""===v,allowNull=this.allowNull;return empty?out=allowNull?null:0:(out=this.parse(v),allowNull&&isNaN(out)&&(out=null)),out},getNumber:function(v){return parseInt(v,10)},getType:function(){return this.numericType},parse:function(v){return parseInt(String(v).replace(this.stripRe,""),10)},sortType:function(s){return null==s&&(s=1/0),s}}),Ext.define("Ext.data.field.Number",{extend:Ext.data.field.Integer,alias:["data.field.float","data.field.number"],isIntegerField:!1,isNumberField:!0,numericType:"float",getNumber:Ext.identityFn,parse:function(v){return parseFloat(String(v).replace(this.stripRe,""))}}),Ext.define("Ext.data.field.String",{extend:Ext.data.field.Field,alias:"data.field.string",sortType:"asUCString",isStringField:!0,convert:function(v){var defaultValue=this.allowNull?null:"";return null==v?defaultValue:String(v)},getType:function(){return"string"}}),Ext.define("Ext.data.identifier.Generator",{abstract:!0,mixins:[Ext.mixin.Factoryable],alias:"data.identifier.default",factoryConfig:{defaultType:"sequential"},isGenerator:!0,config:{id:null},constructor:function(config){var id;this.initConfig(config),(id=this.getId())&&((config&&config.cache||Ext.data.identifier.Generator.all)[id]=this)},privates:{clone:function(config){var cfg=this.getInitialConfig();return cfg=config?Ext.apply({},config,cfg):cfg,new this.self(cfg)},statics:{all:{}}}},function(){var Generator=this,Factory=Ext.Factory,factory=Factory.dataIdentifier;Factory.dataIdentifier=function(config){var id=Ext.isString(config)?config:config&&config.id;return id&&(config&&config.cache||Generator.all)[id]||factory(config)}}),Ext.define("Ext.data.identifier.Sequential",{extend:Ext.data.identifier.Generator,alias:"data.identifier.sequential",config:{increment:1,prefix:null,seed:1},generate:function(){var seed=this._seed,prefix=this._prefix;return this._seed+=this._increment,null!==prefix?prefix+seed:seed}}),Ext.define("Ext.data.Model",{alternateClassName:"Ext.data.Record",isEntity:!0,isModel:!0,validIdRe:null,erasing:!1,observableType:"record",constructor:function(data,session){var array,id,initializeFn,internalId,len,i,fields,me=this,cls=me.self,identifier=cls.identifier,Model=Ext.data.Model,modelIdentifier=Model.identifier,idProperty=me.idField.name;if(me.data=me.data=data=data||{},me.session=session||null,me.internalId=internalId=modelIdentifier.generate(),(array=data)instanceof Array)for(me.data=data={},fields=me.getFields(),len=Math.min(fields.length,array.length),i=0;i<len;++i)data[fields[i].name]=array[i];(initializeFn=cls.initializeFn)||(cls.initializeFn=initializeFn=Model.makeInitializeFn(cls)),initializeFn.$nullFn||cls.initializeFn(me),(me.id=id=data[idProperty])||0===id||(id=session?(identifier=session.getIdentifier(cls)).generate():modelIdentifier===identifier?internalId:identifier.generate(),data[idProperty]=me.id=id,me.phantom=!0),session&&session.add(me),me.init&&Ext.isFunction(me.init)&&me.init()},editing:!1,dirty:!1,session:null,dropped:!1,erased:!1,clientIdProperty:null,evented:!1,phantom:!1,idProperty:"id",manyToMany:null,identifier:null,previousValues:void 0,proxy:void 0,schema:"default",versionProperty:null,generation:1,validationSeparator:null,convertOnSet:!0,beginEdit:function(){var me=this,modified=me.modified,previousValues=me.previousValues;me.editing||(me.editing=!0,me.editMemento={dirty:me.dirty,data:Ext.apply({},me.data),generation:me.generation,modified:modified&&Ext.apply({},modified),previousValues:previousValues&&Ext.apply({},previousValues)})},cancelEdit:function(){var editMemento=this.editMemento;editMemento&&(this.editing=!1,Ext.apply(this,editMemento),this.editMemento=null)},endEdit:function(silent,modifiedFieldNames){var me=this,editMemento=me.editMemento;editMemento&&(me.editing=!1,me.editMemento=null,me.previousValues=editMemento.previousValues,silent||(modifiedFieldNames=modifiedFieldNames||me.getModifiedFieldNames(editMemento.data),(me.dirty||modifiedFieldNames&&modifiedFieldNames.length)&&me.callJoined("afterEdit",[modifiedFieldNames])))},getField:function(name){return this.self.getField(name)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(id,options){this.set(this.idProperty,id,options)},getPrevious:function(fieldName){var previousValues=this.previousValues;return previousValues&&previousValues[fieldName]},isModified:function(fieldName){var modified=this.modified;return!(!modified||!modified.hasOwnProperty(fieldName))},getModified:function(fieldName){var out;return this.isModified(fieldName)&&(out=this.modified[fieldName]),out},get:function(fieldName){return this.data[fieldName]},_singleProp:{},_rejectOptions:{convert:!1,silent:!0},set:function(fieldName,newValue,options){var currentValue,field,idChanged,key,name,oldId,comparator,dep,dependents,i,numFields,newId,rankedFields,reference,value,values,me=this,cls=me.self,data=me.data,modified=me.modified,prevVals=me.previousValues,session=me.session,single=Ext.isString(fieldName),opt=single?options:newValue,convertOnSet=opt?!1!==opt.convert:me.convertOnSet,fieldsMap=me.fieldsMap,silent=opt&&opt.silent,commit=opt&&opt.commit,updateRefs=!(opt&&!1===opt.refs)&&session,dirty=!(opt&&!1===opt.dirty&&!commit),modifiedFieldNames=null,dirtyRank=0;for(single?(values=me._singleProp)[fieldName]=newValue:values=fieldName,(rankedFields=cls.rankedFields)||(rankedFields=cls.rankFields()),numFields=rankedFields.length;;){for(name in values)if(value=values[name],currentValue=data[name],comparator=me,reference=(field=fieldsMap[name])?(convertOnSet&&field.convert&&(value=field.convert(value,me)),(comparator=field).reference):null,!comparator.isEqual(currentValue,value)){for(data[name]=value,(modifiedFieldNames=modifiedFieldNames||[]).push(name),(prevVals||(me.previousValues=prevVals={}))[name]=currentValue,reference&&reference.cls&&(updateRefs&&session.updateReference(me,field,value,currentValue),reference.onValueChange(me,session,value,currentValue)),i=(dependents=field&&field.dependents)&&dependents.length;0<i--;)(dep=dependents[i]).dirty=!0,dirtyRank=dirtyRank?Math.min(dirtyRank,dep.rank):dep.rank;field&&!field.persist||(modified&&modified.hasOwnProperty(name)?dirty&&!comparator.isEqual(modified[name],value)||(delete modified[name],me.dirty=-1):dirty&&(modified||(me.modified=modified={}),me.dirty=!0,modified[name]=currentValue)),name===me.idField.name&&(idChanged=!0,oldId=currentValue,newId=value)}if(!dirtyRank)break;for((field=rankedFields[dirtyRank-1]).dirty=!1,single?delete values[fieldName]:(values=me._singleProp,single=!0),values[fieldName=field.name]=data[fieldName],convertOnSet=!0;dirtyRank<numFields&&!rankedFields[dirtyRank].dirty;++dirtyRank);dirtyRank<numFields?++dirtyRank:dirtyRank=0}if(me.dirty<0)for(key in me.dirty=!1,modified)if(modified.hasOwnProperty(key)){me.dirty=!0;break}return single&&delete values[fieldName],++me.generation,idChanged&&(me.id=newId,me.callJoined("onIdChanged",[oldId,newId])),commit?me.commit(silent,modifiedFieldNames):silent||me.editing||!modifiedFieldNames||me.callJoined("afterEdit",[modifiedFieldNames]),modifiedFieldNames},reject:function(silent){var me=this,modified=me.modified;modified&&me.set(modified,me._rejectOptions),me.dropped=!1,me.clearState(),silent||me.callJoined("afterReject")},commit:function(silent,modifiedFieldNames){var erased,me=this,versionProperty=me.versionProperty,data=me.data;me.clearState(),!versionProperty||me.phantom||isNaN(data[versionProperty])||++data[versionProperty],me.phantom=!1,me.dropped&&(me.erased=erased=!0),silent||(erased?me.callJoined("afterErase"):me.callJoined("afterCommit",[modifiedFieldNames]))},clearState:function(){this.dirty=this.editing=!1,this.editMemento=this.modified=null},drop:function(cascade){var roleName,me=this,associations=me.associations,session=me.session;if(!me.erased&&!me.dropped){if(me.dropped=!0,associations&&!1!==cascade)for(roleName in associations)associations[roleName].onDrop(me,session);me.callJoined("afterDrop"),me.phantom&&me.setErased()}},join:function(item){var joined=this.joined;joined?joined.length?Ext.Array.include(joined,item):joined[0]=item:joined=this.joined=[item],item.isStore&&!this.store&&(this.store=item)},unjoin:function(item){var i,joined=this.joined,len=joined&&joined.length,store=this.store;if(1===len&&joined[0]===item?joined.length=0:len&&Ext.Array.remove(joined,item),store===item){if(store=null,joined)for(i=0,len=joined.length;i<len;++i)if((item=joined[i]).isStore){store=item;break}this.store=store}},clone:function(session){var me=this,modified=me.modified,ret=me.copy(me.id,session);return modified&&(ret.modified=Ext.apply({},modified)),ret.dirty=me.dirty,ret.dropped=me.dropped,ret.phantom=me.phantom,ret},copy:function(newId,session){var data=Ext.apply({},this.data),idProperty=this.idProperty,T=this.self;return newId||0===newId?data[idProperty]=newId:null===newId&&delete data[idProperty],new T(data,session)},getProxy:function(){return this.self.getProxy()},getValidation:function(refresh){var ret=this.validation;return ret||(this.validation=ret=new Ext.data.Validation,ret.attach(this)),(!0===refresh||!1!==refresh&&ret.syncGeneration!==this.generation)&&ret.refresh(refresh),ret},validate:function(){return(new Ext.data.ErrorCollection).init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var pieces=this.$className.split(".");return pieces[pieces.length-1].toLowerCase()+"/"+this.getId()},erase:function(options){return this.erasing=!0,this.drop(),this.erasing=!1,this.save(options)},setErased:function(){this.erased=!0,this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var cls=this.self,ret=cls.criticalFields;return ret||(cls.rankFields(),ret=cls.criticalFields),ret},getAssociatedData:function(result,options){var deep,i,item,items,itemData,length,record,roleName,opts,clear,associated,me=this,associations=me.associations;for(roleName in result=result||{},me.$gathering=1,options=options&&Ext.Object.chain(options),associations)if((item=associations[roleName].getAssociatedItem(me))&&!item.$gathering){if(item.isStore){for(item.$gathering=1,length=(items=item.getData().items).length,itemData=[],i=0;i<length;++i)deep=!(record=items[i]).$gathering,record.$gathering=1,opts=options?(void 0===(associated=options.associated)?(options.associated=deep,clear=!0):deep||(clear=!(options.associated=!1)),options):deep?me._getAssociatedOptions:me._getNotAssociatedOptions,itemData.push(record.getData(opts)),clear&&(options.associated=associated,clear=!1),delete record.$gathering;delete item.$gathering}else opts=options||me._getAssociatedOptions,options&&void 0===options.associated&&(opts.associated=!0),itemData=item.getData(opts);result[roleName]=itemData}return delete me.$gathering,result},getData:function(options){var criticalFields,field,n,name,value,me=this,ret={},opts=!0===options?me._getAssociatedOptions:options||ret,data=me.data,associated=opts.associated,changes=opts.changes,critical=changes&&opts.critical,content=changes?me.modified:data,fieldsMap=me.fieldsMap,persist=opts.persist,serialize=opts.serialize;if(content)for(name in content){if(value=data[name],field=fieldsMap[name]){if(persist&&!field.persist)continue;serialize&&field.serialize&&(value=field.serialize(value,me))}ret[name]=value}if(critical)for(n=(criticalFields=me.self.criticalFields||me.getCriticalFields()).length;0<n--;)(name=(field=criticalFields[n]).name)in ret||(value=data[name],serialize&&field.serialize&&(value=field.serialize(value,me)),ret[name]=value);return associated&&me.getAssociatedData(ret,opts),ret},getTransientFields:function(){var cls=this.self,ret=cls.transientFields;return ret||(cls.rankFields(),ret=cls.transientFields),ret},isLoading:function(){return!!this.loadOperation},abort:function(){var operation=this.loadOperation;operation&&operation.abort()},load:function(options){options=Ext.apply({},options);var me=this,scope=options.scope||me,proxy=me.getProxy(),callback=options.callback,operation=me.loadOperation,id=me.getId();return operation?(operation.extraCalls||(operation.extraCalls=[])).push(options):(options.id=id,options.recordCreator=function(data,type,readOptions){var session=me.session;return readOptions&&(readOptions.recordCreator=session?session.recordCreator:null),me.set(data,me._commitOptions),me},options.internalCallback=function(operation){var i,len,success=operation.wasSuccessful()&&0<operation.getRecords().length,extras=me.loadOperation.extraCalls,successFailArgs=[me,operation],callbackArgs=[me,operation,success];if(me.loadOperation=null,success?Ext.callback(options.success,scope,successFailArgs):Ext.callback(options.failure,scope,successFailArgs),Ext.callback(callback,scope,callbackArgs),extras)for(i=0,len=extras.length;i<len;++i)options=extras[i],success?Ext.callback(options.success,scope,successFailArgs):Ext.callback(options.failure,scope,successFailArgs),Ext.callback(options.callback,scope,callbackArgs);me.callJoined("afterLoad")},delete options.callback,me.loadOperation=operation=proxy.createOperation("read",options),operation.execute()),operation},save:function(options){options=Ext.apply({},options);var operation,me=this,phantom=me.phantom,dropped=me.dropped,action=dropped?"destroy":phantom?"create":"update",scope=options.scope||me,callback=options.callback,proxy=me.getProxy();return options.records=[me],options.internalCallback=function(operation){var args=[me,operation],success=operation.wasSuccessful();success?Ext.callback(options.success,scope,args):Ext.callback(options.failure,scope,args),args.push(success),Ext.callback(callback,scope,args)},delete options.callback,operation=proxy.createOperation(action,options),dropped&&phantom?(operation.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet),me.setErased(),operation.setSuccessful(!0)):operation.execute(),operation},inheritableStatics:{addFields:function(newFields){this.replaceFields(newFields)},replaceFields:function(newFields,removeFields){var field,i,idField,len,name,ordinal,me=this,proto=me.prototype,Field=Ext.data.field.Field,fields=me.fields,fieldsMap=me.fieldsMap,ordinals=me.fieldOrdinals;if(!0===removeFields)fields.length=0,me.fieldsMap=fieldsMap={},me.fieldOrdinals=ordinals={};else if(removeFields){for(i=removeFields.length;0<i--;)(name=removeFields[i])in ordinals&&(delete ordinals[name],delete fieldsMap[name]);for(i=0,len=fields.length;i<len;++i)(name=(field=fields[i]).name)in ordinals?ordinals[name]=i:(fields.splice(i,1),--i,--len)}for(i=0,len=newFields?newFields.length:0;i<len;i++)(name=(field=newFields[i]).name)in ordinals||(ordinals[name]=ordinal=fields.length,fields.push(field=Field.create(field)),(fieldsMap[name]=field).ordinal=ordinal,field.definedBy=field.owner=this);me.idField=proto.idField=idField=fieldsMap[proto.idProperty],idField.allowNull=idField.critical=idField.identifier=!0,idField.defaultValue=null,me.initializeFn=me.rankedFields=me.transientFields=me.criticalFields=null},removeFields:function(removeFields){this.replaceFields(null,removeFields)},getIdFromData:function(data){var idField=this.idField;return idField.calculated?new this(data).id:data[idField.name]},createWithId:function(id,data,session){var d=data;return!id&&0!==id||(d={},data&&Ext.apply(d,data),d[this.idField.name]=id),new this(d,session)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(name){return this.fieldsMap[name]||null},getProxy:function(){var defaults,me=this,proxy=me.proxy,defaultProxy=me.defaultProxy;return proxy||(!(proxy=me.proxyConfig)&&defaultProxy&&(proxy=defaultProxy),proxy&&proxy.isProxy||("string"==typeof proxy&&(proxy={type:proxy}),defaults=me.schema.constructProxy(me),proxy=proxy?Ext.merge(defaults,proxy):defaults),proxy=me.setProxy(proxy)),proxy},setProxy:function(proxy){var model;return proxy&&(proxy.isProxy?(model=proxy.getModel())&&model!==this&&(proxy=proxy.clone()):proxy=Ext.Factory.proxy(proxy),proxy.setModel(this)),this.prototype.proxy=this.proxy=proxy},load:function(id,options,session){var rec,data={};return data[this.prototype.idProperty]=id,(rec=new this(data,session)).load(options),rec}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(callback,scope){var i,stores=this.stores,len=stores.length;for(i=0;i<len;++i)callback.call(scope,stores[i])},join:function(item){var me=this,stores=me.stores,joined=me.joined;joined?joined.push(item):joined=me.joined=[item],item.isStore&&(me.store=me.store||item,(stores=stores||(me.stores=[])).push(item))},unjoin:function(item){var stores=this.stores,joined=this.joined;1===joined.length?joined.length=0:Ext.Array.remove(joined,item),item.isStore&&(Ext.Array.remove(stores,item),this.store=stores[0]||null)}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:!0},_getChangesOptions:{changes:!0},_getAssociatedOptions:{associated:!0},_getNotAssociatedOptions:{associated:!1},copyFrom:function(sourceRecord){var myData,sourceData,name,value,me=this,fields=me.fields,fieldCount=fields.length,modifiedFieldNames=[],i=0,idProperty=me.idProperty;if(sourceRecord){for(myData=me.data,sourceData=sourceRecord.data;i<fieldCount;i++)(name=fields[i].name)!==idProperty&&(void 0===(value=sourceData[name])||me.isEqual(myData[name],value)||(myData[name]=value,modifiedFieldNames.push(name)));me.phantom&&!sourceRecord.phantom&&(me.beginEdit(),me.setId(sourceRecord.getId()),me.endEdit(!0),me.commit(!0))}return modifiedFieldNames},callJoined:function(funcName,args){var i,len,fn,item,joined=this.joined,session=this.session;if(joined||session){if(args?args.unshift(this):args=[this],joined)for(i=0,len=joined.length;i<len;++i)(item=joined[i])&&(fn=item[funcName])&&fn.apply(item,args);(fn=session&&session[funcName])&&fn.apply(session,args)}},setSession:function(session){(this.session=session)&&session.add(this)},getModifiedFieldNames:function(old){var key,data=this.data,modified=[],oldData=old||this.editMemento.data;for(key in data)data.hasOwnProperty(key)&&(this.isEqual(data[key],oldData[key],key)||modified.push(key));return modified},isEqual:function(lhs,rhs,field){var f;return field&&(f=field.isField?field:this.fieldsMap[field])?f.isEqual(lhs,rhs):lhs instanceof Date&&rhs instanceof Date?lhs.getTime()===rhs.getTime():lhs===rhs},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",defaultProxy:"memory",rankFields:function(){var evilFields,field,i,prototype=this.prototype,fields=this.fields,length=fields.length,rankedFields=[],criticalFields=[],transientFields=[];for(this.rankedFields=prototype.rankedFields=rankedFields,this.criticalFields=prototype.criticalFields=criticalFields,this.transientFields=prototype.transientFields=transientFields,i=0;i<length;++i)(field=fields[i]).critical&&criticalFields.push(field),field.persist||transientFields.push(field),field.evil?(evilFields=evilFields||[]).push(field):field.depends||(rankedFields.push(field),field.rank=rankedFields.length);for(i=0;i<length;++i)(field=fields[i]).rank||field.evil||this.topoAdd(field);if(evilFields)for(i=0,length=evilFields.length;i<length;++i)rankedFields.push(field=evilFields[i]),field.rank=rankedFields.length;return rankedFields},topoAdd:function(field){var i,targetField,dep=field.depends,dependsLength=dep?dep.length:0,rankedFields=this.rankedFields;for(i=0;i<dependsLength;++i)((targetField=this.fieldsMap[dep[i]]).dependents||(targetField.dependents=[])).push(field),targetField.rank||this.topoAdd(targetField);rankedFields.push(field),field.rank=rankedFields.length},initFields:function(data,cls,proto){var idField,field,i,length,name,ordinal,reference,superIdField,superIdFieldName,idDeclared,Field=Ext.data.field.Field,fieldDefs=data.fields,fields=[],fieldOrdinals={},fieldsMap={},superFields=proto.fields,versionProperty=data.versionProperty||proto.versionProperty,idProperty=cls.idProperty;if(cls.fields=proto.fields=fields,cls.fieldOrdinals=proto.fieldOrdinals=fieldOrdinals,cls.fieldsMap=proto.fieldsMap=fieldsMap,cls.references=proto.references=[],superFields)for(i=0,length=superFields.length;i<length;++i)fields[i]=field=Ext.Object.chain(superFields[i]),field.dependents=null,field.owner=cls,fieldOrdinals[name=field.name]=i,(fieldsMap[name]=field).rank=null,field.generated&&(superIdFieldName=(superIdField=field).name);if(fieldDefs)for(delete data.fields,i=0,length=fieldDefs.length;i<length;++i)(reference=(field=fieldDefs[i]).reference)&&"string"!=typeof reference&&(reference=Ext.merge({},reference)),field.$reference=reference,void 0===(ordinal=fieldOrdinals[name=(field=Field.create(fieldDefs[i])).name])&&(fieldOrdinals[name]=ordinal=fields.length),fieldsMap[name]=field,(fields[ordinal]=field).definedBy=field.owner=cls,field.ordinal=ordinal,name===idProperty&&(idDeclared=field);if(idField=fieldsMap[idProperty]){if(idDeclared&&superIdField&&superIdField.generated)for(Ext.Array.remove(fields,superIdField),delete fieldsMap[superIdFieldName],delete fieldOrdinals[superIdFieldName],fieldsMap[idProperty]=idDeclared,i=0,length=fields.length;i<length;++i)field=fields[i],fields.ordinal=i,fieldOrdinals[field.name]=i}else ordinal=superIdField&&superIdField.generated?superIdField.ordinal:fields.length,delete fieldsMap[superIdFieldName],delete fieldOrdinals[superIdFieldName],idField=new Field(idProperty),fields[ordinal]=idField,fieldOrdinals[idProperty]=ordinal,(fieldsMap[idProperty]=idField).definedBy=cls,idField.ordinal=ordinal,idField.generated=!0;idField.allowNull=idField.critical=idField.identifier=!0,idField.defaultValue=null,cls.idField=proto.idField=idField,versionProperty&&((field=fieldsMap[versionProperty])||(ordinal=fields.length,field=new Field({name:versionProperty,type:"int"}),fields[ordinal]=field,fieldOrdinals[versionProperty]=ordinal,(fieldsMap[versionProperty]=field).definedBy=cls,field.ordinal=ordinal,field.generated=!0),field.defaultValue=1,field.critical=!0)},initValidators:function(data,cls,proto){var validators,field,copy,validatorDefs,i,length,fieldValidator,name,validator,item,superValidators=proto.validators;if(superValidators)for(field in validators={},superValidators)validators[field]=Ext.Array.clone(superValidators[field]);if(validatorDefs=data.validators||data.validations){if(delete data.validators,validators=validators||{},Ext.isArray(validatorDefs)){for(copy={},i=0,length=validatorDefs.length;i<length;++i)copy[name=(item=validatorDefs[i]).field]||(copy[name]=[]),item=item.fn||item,copy[name].push(item);validatorDefs=copy}for(name in validatorDefs)fieldValidator=validatorDefs[name],Ext.isArray(fieldValidator)||(fieldValidator=[fieldValidator]),validator=validators[name],validators[name]?Ext.Array.push(validator,fieldValidator):validators[name]=fieldValidator}if(validators)for(name in validators)(field=cls.getField(name))&&field.setModelValidators(validators[name]);cls.validators=proto.validators=validators},initAssociations:function(schema,data,cls){var i,length,assoc,associations=data.associations,belongsTo=data.belongsTo,hasMany=data.hasMany,hasOne=data.hasOne,matrices=data.manyToMany;if(delete data.manyToMany,matrices&&schema.addMatrices(cls,matrices),delete data.associations,delete data.belongsTo,delete data.hasMany,delete data.hasOne,associations)for(i=0,length=(associations=Ext.isArray(associations)?associations:[associations]).length;i<length;++i)switch((assoc=associations[i]).type){case"belongsTo":schema.addLegacyBelongsTo(cls,assoc);break;case"hasMany":schema.addLegacyHasMany(cls,assoc);break;case"hasOne":schema.addLegacyHasOne(cls,assoc)}if(belongsTo)for(i=0,length=(belongsTo=Ext.isArray(belongsTo)?belongsTo:[belongsTo]).length;i<length;++i)schema.addLegacyBelongsTo(cls,belongsTo[i]);if(hasMany)for(i=0,length=(hasMany=Ext.isArray(hasMany)?hasMany:[hasMany]).length;i<length;++i)schema.addLegacyHasMany(cls,hasMany[i]);if(hasOne)for(i=0,length=(hasOne=Ext.isArray(hasOne)?hasOne:[hasOne]).length;i<length;++i)schema.addLegacyHasOne(cls,hasOne[i]);schema.afterLegacyAssociations(cls)},initIdentifier:function(data,cls,proto){var generatorPrefix,identifier=data.identifier||data.idgen,superIdent=proto.identifier||cls.schema._defaultIdentifier;identifier?(delete data.identifier,delete data.idgen,identifier=Ext.Factory.dataIdentifier(identifier)):superIdent&&(identifier=superIdent.clone&&!superIdent.getId()?superIdent.clone():superIdent.isGenerator?superIdent:Ext.Factory.dataIdentifier(superIdent)),cls.identifier=proto.identifier=identifier,identifier||(generatorPrefix=(generatorPrefix=cls.entityName)||Ext.id(null,"extModel"),cls.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:generatorPrefix+"-"}))},findValidator:function(validators,name,cfg){var len,i,item,type=cfg.type||cfg,field=validators[name];if(field)for(i=0,len=field.length;i<len;++i)if((item=field[i]).type===type)return item;return null},makeInitializeFn:function(cls){var bc,ec,convert,expr,field,fields,fs,hasDefValue,i,length,code=["var "],body=["\nreturn function (e) {\n    var data = e.data, v;\n"],fieldVars=[],work=0;for((fields=cls.rankedFields)||(fields=cls.rankFields()),i=0,length=fields.length;i<length;++i)field=fields[i],fieldVars[i]=fs="f"+i,convert=field.convert,i&&code.push(",  \n    "),code.push(fs," = $fields["+i+"]"),((hasDefValue=void 0!==field.defaultValue)||convert)&&(expr='data["'+field.name+'"]',++work,bc=ec="",field.cloneDefaultValue&&(bc="Ext.clone(",ec=")"),body.push("\n"),convert&&hasDefValue?body.push("    v = ",expr,";\n    if (v !== undefined) {\n        v = ",fs,".convert(v, e);\n    }\n    if (v === undefined) {\n        v = ",bc,fs,".defaultValue",ec,";\n    }\n    ",expr," = v;"):convert?body.push("    v = ",fs,".convert(",expr,",e);\n    if (v !== undefined) {\n        ",expr," = v;\n    }\n"):hasDefValue&&body.push("    if (",expr," === undefined) {\n        ",expr," = ",bc,fs,".defaultValue",ec,";\n    }\n"));return work?(code.push(";\n"),code.push.apply(code,body),code.push("}"),code=code.join(""),new Function("$fields","Ext",code)(fields,Ext)):Ext.emptyFn}}}},function(){var defaultSchema,Model=this,proto=Model.prototype,Schema=Ext.data.schema.Schema;Model.proxyConfig=proto.proxy,delete proto.proxy,Model.fields=[],Model.fieldsMap=proto.fieldsMap={},Model.schema=proto.schema=Schema.get(proto.schema),proto.idField=new Ext.data.field.Field(proto.idProperty),Model.identifier=new Ext.data.identifier.Sequential,Model.onExtended(function(cls,data){var schema,entityName,proxy,proto=cls.prototype,schemaName=data.schema,superCls=proto.superclass.self;cls.idProperty=data.idProperty||proto.idProperty,schemaName?(delete data.schema,schema=Schema.get(schemaName)):(schema=proto.schema)||(schema=defaultSchema=defaultSchema||Schema.get("default")),cls.rankFields=Model.rankFields,cls.topoAdd=Model.topoAdd,proto.schema=cls.schema=schema,(entityName=data.entityName)||(proto.entityName=entityName=schema.getEntityName(cls)),cls.entityName=entityName,cls.fieldExtractors={},Model.initIdentifier(data,cls,proto),Model.initFields(data,cls,proto),Model.initValidators(data,cls,proto),cls.fields.items=cls.fields,entityName&&(schema.addEntity(cls),Model.initAssociations(schema,data,cls)),(proxy=data.proxy)?delete data.proxy:superCls!==Model&&(proxy=superCls.proxyConfig||superCls.proxy),cls.proxyConfig=proxy})}),Ext.define("Ext.data.ResultSet",{isResultSet:!0,$configPrefixed:!1,config:{loaded:!0,count:null,total:null,success:!1,records:null,message:null},constructor:function(config){this.initConfig(config)},getCount:function(){var records,count=this.callParent();return count||(records=this.getRecords())&&(count=records.length),count}}),Ext.define("Ext.data.reader.Reader",{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],mixins:[Ext.mixin.Observable,Ext.mixin.Factoryable],alias:"reader.base",factoryConfig:{defaultType:null},config:{totalProperty:"total",successProperty:"success",rootProperty:"",messageProperty:"",typeProperty:"",implicitIncludes:!0,readRecordsOnFailure:!0,model:null,proxy:null,transform:null,keepRawData:null},isReader:!0,constructor:function(config){config&&config.hasOwnProperty("root")&&((config=Ext.apply({},config)).rootProperty=config.root,delete config.root);var me=this;me.duringInit=1,me.mixins.observable.constructor.call(me,config),--me.duringInit,me.buildExtractors()},applyModel:function(model){return Ext.data.schema.Schema.lookupEntity(model)},applyTransform:function(transform){return transform?(Ext.isFunction(transform)?transform={fn:transform}:transform.charAt&&(transform={fn:this[transform]}),transform.fn.bind(transform.scope||this)):transform},forceBuildExtractors:function(){this.duringInit||this.buildExtractors(!0)},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(response,readOptions){var data,result;if(response)if(response.responseText){if((result=this.getResponseData(response))&&result.__$isError)return new Ext.data.ResultSet({total:0,count:0,records:[],success:!1,message:result.msg});data=this.readRecords(result,readOptions)}else data=this.readRecords(response,readOptions);return data||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(msg){return{__$isError:!0,msg:msg}},readRecords:function(data,readOptions,internalReadOptions){var success,recordCount,records,root,total,value,message,transform,me=this,recordsOnly=internalReadOptions&&internalReadOptions.recordsOnly,asRoot=internalReadOptions&&internalReadOptions.asRoot;return(transform=this.getTransform())&&(data=transform(data)),me.buildExtractors(),me.getKeepRawData()&&(me.rawData=data),me.hasListeners.rawdata&&me.fireEventArgs("rawdata",[data]),data=me.getData(data),success=!0,recordCount=0,records=[],me.getSuccessProperty()&&(!1!==(value=me.getSuccess(data))&&"false"!==value||(success=!1)),me.getMessageProperty()&&(message=me.getMessage(data)),(success||me.getReadRecordsOnFailure())&&((root=asRoot||Ext.isArray(data)?data:me.getRoot(data))&&(total=root.length),me.getTotalProperty()&&(value=parseInt(me.getTotal(data),10),isNaN(value)||(total=value)),root&&(recordCount=(records=me.extractData(root,readOptions)).length)),recordsOnly?records:new Ext.data.ResultSet({total:total||recordCount,count:recordCount,records:records,success:success,message:message})},extractData:function(root,readOptions){var reader,node,nodeType,record,i,me=this,entityType=readOptions&&readOptions.model?Ext.data.schema.Schema.lookupEntity(readOptions.model):me.getModel(),schema=entityType.schema,includes=schema.hasAssociations(entityType)&&me.getImplicitIncludes(),fieldExtractorInfo=me.getFieldExtractorInfo(entityType.fieldExtractors),length=root.length,records=new Array(length),typeProperty=me.getTypeProperty();for(!length&&Ext.isObject(root)&&(root=[root],length=1),i=0;i<length;i++)(record=root[i]).isModel||(node=record,(record=typeProperty&&(nodeType=me.getChildType(schema,node,typeProperty))?(reader=nodeType.getProxy().getReader()).extractRecord(node,readOptions,nodeType,schema.hasAssociations(nodeType)&&reader.getImplicitIncludes(),reader.getFieldExtractorInfo(nodeType.fieldExtractors)):me.extractRecord(node,readOptions,entityType,includes,fieldExtractorInfo)).isModel&&record.isNode&&(record.raw=node)),record.onLoad&&record.onLoad(),records[i]=record;return records},getChildType:function(schema,rawNode,typeProperty){var namespace;switch(typeof typeProperty){case"string":return schema.getEntity(rawNode[typeProperty]);case"object":return namespace=typeProperty.namespace,schema.getEntity((namespace?namespace+".":"")+rawNode[typeProperty.name]);case"function":return schema.getEntity(typeProperty(rawNode))}},extractRecordData:function(node,readOptions){var entityType=readOptions&&readOptions.model?Ext.data.schema.Schema.lookupEntity(readOptions.model):this.getModel(),fieldExtractorInfo=this.getFieldExtractorInfo(entityType.fieldExtractors);return this.extractRecord(node,readOptions,entityType,!1,fieldExtractorInfo)},extractRecord:function(node,readOptions,entityType,includes,fieldExtractorInfo){var modelData,record,me=this,creatorFn=readOptions&&readOptions.recordCreator||me.defaultRecordCreator;return modelData=me.extractModelData(node,fieldExtractorInfo),record=creatorFn.call(me,modelData,entityType||me.getModel(),readOptions),includes&&record.isModel&&me.readAssociated(record,node,readOptions),record},getFieldExtractorInfo:function(extractors){if(extractors){var type=this.$className,extractor=extractors[type];return void 0===extractor&&(extractors[type]=extractor=this.buildFieldExtractors()),extractor}},buildFieldExtractors:function(){var field,name,i,extractor,fields=this.getFields(),len=fields.length,buffer=[],extractors=[],out=null,cnt=0;for(i=0;i<len;++i)field=fields[i],(extractor=this.createFieldAccessor(field))&&(name=field.name,buffer.push("val = extractors["+cnt+"](raw); if (val !== undefined) { data['"+name+"'] = val; }"),extractors.push(extractor),++cnt);return buffer.length&&(out={extractors:extractors,fn:new Function("raw","data","extractors","var val;"+buffer.join(""))}),out},defaultRecordCreator:function(data,Model){var record=new Model(data);return record.phantom=!1,record},getModelData:function(raw){return{}},extractModelData:function(raw,fieldExtractorInfo){var data=this.getModelData(raw);return fieldExtractorInfo&&(0,fieldExtractorInfo.fn)(raw,data,fieldExtractorInfo.extractors),data},readAssociated:function(record,data,readOptions){var key,role,roles=record.associations;for(key in roles)roles.hasOwnProperty(key)&&(role=roles[key]).cls&&role.read(record,data,this,readOptions)},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(response){},onMetaChange:function(meta){var model,newModel,clientIdProperty,proxy,me=this,fields=meta.fields;(me.metaData=meta).root&&me.setRootProperty(meta.root),meta.totalProperty&&me.setTotalProperty(meta.totalProperty),meta.successProperty&&me.setSuccessProperty(meta.successProperty),meta.messageProperty&&me.setMessageProperty(meta.messageProperty),clientIdProperty=meta.clientIdProperty,fields?(newModel=Ext.define(null,{extend:"Ext.data.Model",fields:fields,clientIdProperty:clientIdProperty}),me.setModel(newModel),(proxy=me.getProxy())&&proxy.setModel(newModel)):clientIdProperty&&(model=me.getModel())&&(model.self.prototype.clientIdProperty=clientIdProperty)},buildExtractors:function(force){var totalProp,successProp,messageProp,me=this;if(force||!me.hasExtractors)return totalProp=me.getTotalProperty(),successProp=me.getSuccessProperty(),messageProp=me.getMessageProperty(),totalProp&&(me.getTotal=me.getAccessor(totalProp)),successProp&&(me.getSuccess=me.getAccessor(successProp)),messageProp&&(me.getMessage=me.getAccessor(messageProp)),me.hasExtractors=!0},getAccessor:function(prop){var ret,key,cache=this.extractorCache;return"string"==typeof prop?(key=this.getAccessorKey(prop),(ret=cache.get(key))||(ret=this.createAccessor(prop),cache.add(key,ret))):ret=this.createAccessor(prop),ret},getAccessorKey:function(prop){return this.$className+prop},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var me=this;me.model=me.getTotal=me.getSuccess=me.getMessage=me.rawData=null,me.onMetaChange=null,me.transform=null,me.callParent()},privates:{copyFrom:function(reader){var me=this;reader.buildExtractors(),me.getTotal=reader.getTotal,me.getSuccess=reader.getSuccess,me.getMessage=reader.getMessage,++me.duringInit,me.setConfig(reader.getConfig()),--me.duringInit,me.hasExtractors=!0}}},function(Cls){var proto=Cls.prototype;Ext.apply(proto,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:!0,message:""})}),proto.extractorCache=new Ext.util.LruCache}),Ext.define("Ext.data.writer.Writer",{mixins:[Ext.mixin.Factoryable],alias:"writer.base",factoryConfig:{defaultType:null},alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{clientIdProperty:null,allDataOptions:{persist:!0},partialDataOptions:{changes:!0,critical:!0},writeAllFields:!1,dateFormat:null,nameProperty:"name",writeRecordId:!0,transform:null},isWriter:!0,constructor:function(config){this.initConfig(config)},applyTransform:function(transform){return transform?(Ext.isFunction(transform)&&(transform={fn:transform}),transform.fn.bind(transform.scope||this)):transform},write:function(request){var i,operation=request.getOperation(),records=operation.getRecords()||[],len=records.length,data=[];for(i=0;i<len;i++)data.push(this.getRecordData(records[i],operation));return this.writeRecords(request,data)},writeRecords:Ext.emptyFn,getRecordData:function(record,operation){var ret,dateFormat,phantom,options,clientIdProperty,fieldsMap,data,field,me=this,nameProperty=me.getNameProperty(),mapping="name"!==nameProperty,idField=record.self.idField,key=idField[nameProperty]||idField.name,value=record.id,writeAll=me.getWriteAllFields();if(idField.serialize&&(value=idField.serialize(value)),!writeAll&&operation&&operation.isDestroyOperation)(ret={})[key]=value;else for(key in dateFormat=me.getDateFormat(),options=(phantom=record.phantom)||writeAll?me.getAllDataOptions():me.getPartialDataOptions(),clientIdProperty=phantom&&me.getClientIdProperty(),fieldsMap=record.getFieldsMap(),options.serialize=!1,data=record.getData(options),ret=mapping?{}:data,clientIdProperty?(ret[clientIdProperty]=value,delete data[key]):me.getWriteRecordId()||delete data[key],data)value=data[key],(field=fieldsMap[key])?(field.isDateField&&dateFormat&&Ext.isDate(value)?value=Ext.Date.format(value,dateFormat):field.serialize&&(value=field.serialize(value,record)),mapping&&(key=field[nameProperty]||key),ret[key]=value):mapping&&(ret[key]=value);return ret}}),Ext.define("Ext.data.proxy.Proxy",{mixins:[Ext.mixin.Factoryable,Ext.mixin.Observable],$configPrefixed:!1,alias:"proxy.proxy",alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:!0,model:void 0,reader:{type:"json"},writer:{type:"json"}},isProxy:!0,isSynchronous:!1,constructor:function(config){this.mixins.observable.constructor.call(this,config),this.pendingOperations={}},applyModel:function(model){return Ext.data.schema.Schema.lookupEntity(model)},updateModel:function(model){if(model){var reader=this.getReader();reader&&!reader.getModel()&&reader.setModel(model)}},applyReader:function(reader){return this.isSynchronous&&((reader=reader||{}).keepRawData=!0),Ext.Factory.reader(reader)},updateReader:function(reader){if(reader){var model=this.getModel();model?reader.setModel(model):(model=reader.getModel())&&this.setModel(model),reader.onMetaChange&&(reader.onMetaChange=Ext.Function.createSequence(reader.onMetaChange,this.onMetaChange,this))}},applyWriter:function(writer){var reader=this.getReader();return(writer=Ext.Factory.writer(writer)).getRecord&&!writer.getRecord()&&reader&&reader.getRecord&&(reader=reader.getRecord())&&writer.setRecord(reader),writer},abort:Ext.emptyFn,onMetaChange:function(meta){this.fireEvent("metachange",this,meta)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(options,listeners){var batch,records,actions,aLen,action,a,r,rLen,record,me=this,useBatch=me.getBatchActions();for(void 0===options.operations&&(options={operations:options,listeners:listeners}),options.batch?Ext.isDefined(options.batch.runOperation)&&(batch=Ext.applyIf(options.batch,{proxy:me,listeners:{}})):options.batch={proxy:me,listeners:options.listeners||{}},(batch=batch||new Ext.data.Batch(options.batch)).on("complete",Ext.bind(me.onBatchComplete,me,[options],0)),aLen=(actions=me.getBatchOrder().split(",")).length,a=0;a<aLen;a++)if(action=actions[a],records=options.operations[action])if(useBatch)batch.add(me.createOperation(action,{records:records,params:options.params}));else for(rLen=records.length,r=0;r<rLen;r++)record=records[r],batch.add(me.createOperation(action,{records:[record],params:options.params}));return batch.start(),batch},onBatchComplete:function(batchOptions,batch){var scope=batchOptions.scope||this;batch.hasException()?Ext.isFunction(batchOptions.failure)&&Ext.callback(batchOptions.failure,scope,[batch,batchOptions]):Ext.isFunction(batchOptions.success)&&Ext.callback(batchOptions.success,scope,[batch,batchOptions]),Ext.isFunction(batchOptions.callback)&&Ext.callback(batchOptions.callback,scope,[batch,batchOptions])},createOperation:function(action,config){var operation=Ext.createByAlias("data.operation."+action,config);return operation.setProxy(this),this.pendingOperations[operation._internalId]=operation},completeOperation:function(operation){delete this.pendingOperations[operation._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var opId,op,ops=this.pendingOperations;for(opId in ops)(op=ops[opId])&&op.isRunning()&&op.abort();this.pendingOperations=null}}),Ext.define("Ext.data.proxy.Client",{extend:Ext.data.proxy.Proxy,alternateClassName:"Ext.data.ClientProxy",isSynchronous:!0,clear:function(){}}),Ext.define("Ext.data.proxy.Memory",{extend:Ext.data.proxy.Client,alias:"proxy.memory",alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:!0,config:{enablePaging:!1,data:{$value:null,merge:function(newValue,currentValue,target,mixinClass){return Ext.isArray(newValue)?Ext.Array.clone(newValue):Ext.clone(newValue)}}},finishOperation:function(operation){for(var i=0,recs=operation.getRecords(),len=recs.length;i<len;i++)recs[i].commit();operation.setSuccessful(!0)},create:function(operation){this.finishOperation(operation)},update:function(operation){this.finishOperation(operation)},erase:function(operation){this.finishOperation(operation)},read:function(operation){var resultSet=this.getReader().read(this.getData()),records=resultSet.getRecords(),sorters=operation.getSorters(),grouper=operation.getGrouper(),filters=operation.getFilters(),start=operation.getStart(),limit=operation.getLimit();!1!==operation.process(resultSet,null,null,!1)&&(filters&&filters.length&&(resultSet.setRecords(records=Ext.Array.filter(records,Ext.util.Filter.createFilterFn(filters))),resultSet.setTotal(records.length)),grouper&&(sorters=sorters?sorters.concat(grouper):sorters),sorters&&sorters.length&&resultSet.setRecords(records=Ext.Array.sort(records,Ext.util.Sortable.createComparator(sorters))),this.getEnablePaging()&&void 0!==start&&void 0!==limit&&(start>=resultSet.getTotal()?resultSet.setConfig({success:!1,records:[],total:0}):resultSet.setRecords(Ext.Array.slice(records,start,start+limit))),operation.setCompleted())},clear:Ext.emptyFn}),Ext.define("Ext.data.ProxyStore",{extend:Ext.data.AbstractStore,config:{model:void 0,fields:null,proxy:void 0,autoLoad:void 0,autoSync:!1,batchUpdateMode:"operation",sortOnLoad:!0,trackRemoved:!0,asynchronousLoad:void 0},onClassExtended:function(cls,data,hooks){var onBeforeClassCreated,model=data.model;"string"==typeof model&&(onBeforeClassCreated=hooks.onBeforeCreated,hooks.onBeforeCreated=function(){var me=this,args=arguments;Ext.require(model,function(){onBeforeClassCreated.apply(me,args)})})},implicitModel:"Ext.data.Model",autoSyncSuspended:0,constructor:function(config){this.removed=[],this.callParent(arguments),!1===this.getAsynchronousLoad()&&this.flushLoad()},applyAsynchronousLoad:function(asynchronousLoad){return null==asynchronousLoad&&(asynchronousLoad=!this.loadsSynchronously()),asynchronousLoad},updateAutoLoad:function(autoLoad){this.getData(),autoLoad&&this.load(Ext.isObject(autoLoad)?autoLoad:void 0)},getTotalCount:function(){return this.totalCount||0},applyFields:function(fields){fields&&this.createImplicitModel(fields)},applyModel:function(model){return model=model?Ext.data.schema.Schema.lookupEntity(model):(this.getFields(),this.getModel()||this.createImplicitModel())},applyProxy:function(proxy){var model=this.getModel();return null!==proxy&&(proxy?proxy.isProxy?proxy.setModel(model):(Ext.isString(proxy)?proxy={type:proxy,model:model}:proxy.model||(proxy=Ext.apply({model:model},proxy)),(proxy=Ext.createByAlias("proxy."+proxy.type,proxy)).autoCreated=!0):model&&(proxy=model.getProxy()),proxy||((proxy=Ext.createByAlias("proxy.memory")).autoCreated=!0)),proxy},applyState:function(state){this.callParent([state]),(this.getAutoLoad()||this.isLoaded())&&this.load()},updateProxy:function(proxy,oldProxy){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(track){this.cleanRemoved(),this.removed=track?[]:null},onMetaChange:function(proxy,meta){this.fireEvent("metachange",this,meta)},create:function(data,options){var instance=new(this.getModel())(data);return(options=Ext.apply({},options)).records||(options.records=[instance]),options.internalScope=this,options.internalCallback=this.onProxyWrite,this.createOperation("create",options).execute()},read:function(){return this.load.apply(this,arguments)},update:function(options){return(options=Ext.apply({},options)).records||(options.records=this.getUpdatedRecords()),options.internalScope=this,options.internalCallback=this.onProxyWrite,this.createOperation("update",options).execute()},onProxyWrite:function(operation){var me=this,success=operation.wasSuccessful(),records=operation.getRecords();switch(operation.getAction()){case"create":me.onCreateRecords(records,operation,success);break;case"update":me.onUpdateRecords(records,operation,success);break;case"destroy":me.onDestroyRecords(records,operation,success)}success&&(me.fireEvent("write",me,operation),me.fireEvent("datachanged",me))},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(records,operation,success){success&&this.cleanRemoved()},erase:function(options){return(options=Ext.apply({},options)).records||(options.records=this.getRemovedRecords()),options.internalScope=this,options.internalCallback=this.onProxyWrite,this.createOperation("destroy",options).execute()},onBatchOperationComplete:function(batch,operation){return this.onProxyWrite(operation)},onBatchComplete:function(batch,operation){var i,me=this,operations=batch.operations,length=operations.length;if("operation"!==me.batchUpdateMode){for(me.suspendEvents(),i=0;i<length;i++)me.onProxyWrite(operations[i]);me.resumeEvents()}me.isSyncing=!1,me.fireEvent("datachanged",me)},onBatchException:function(batch,operation){},filterNew:function(item){return!0===item.phantom&&item.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(item){return!0===item.dirty&&!0!==item.phantom&&item.isValid()},getRemovedRecords:function(){var removed=this.getRawRemovedRecords();return removed?Ext.Array.clone(removed):removed},sync:function(options){var me=this,operations={},toCreate=me.getNewRecords(),toUpdate=me.getUpdatedRecords(),toDestroy=me.getRemovedRecords(),needsSync=!1;return me.needsSync=!1,0<toCreate.length&&(operations.create=toCreate,needsSync=!0),0<toUpdate.length&&(operations.update=toUpdate,needsSync=!0),0<toDestroy.length&&(operations.destroy=toDestroy,needsSync=!0),needsSync&&!1!==me.fireEvent("beforesync",operations)&&(me.isSyncing=!0,options=options||{},me.proxy.batch(Ext.apply(options,{operations:operations,listeners:me.getBatchListeners()}))),me},getBatchListeners:function(){var me=this,listeners={scope:me,exception:me.onBatchException,complete:me.onBatchComplete};return"operation"===me.batchUpdateMode&&(listeners.operationcomplete=me.onBatchOperationComplete),listeners},save:function(){return this.sync.apply(this,arguments)},load:function(options){var me=this;return options="function"==typeof options?{callback:options}:options?Ext.Object.chain(options):{},me.pendingLoadOptions=options,me.getAsynchronousLoad()?me.loadTimer||(me.loadTimer=Ext.asap(me.flushLoad,me)):me.flushLoad(),me},flushLoad:function(){var operation,me=this,options=me.pendingLoadOptions;me.clearLoadTask(),options&&(me.setLoadOptions(options),me.getRemoteSort()&&options.sorters&&me.fireEvent("beforesort",me,options.sorters),operation=Ext.apply({internalScope:me,internalCallback:me.onProxyLoad,scope:me},options),me.lastOptions=operation,operation=me.createOperation("read",operation),!1!==me.fireEvent("beforeload",me,operation)&&(me.onBeforeLoad(operation),me.loading=!0,operation.execute()))},reload:function(options){var o=Ext.apply({},options,this.lastOptions);return this.load(o)},onEndUpdate:function(){this.needsSync&&this.autoSync&&!this.autoSyncSuspended&&this.sync()},afterReject:function(record){this.contains(record)&&(this.onUpdate(record,Ext.data.Model.REJECT,null),this.fireEvent("update",this,record,Ext.data.Model.REJECT,null))},afterCommit:function(record,modifiedFieldNames){modifiedFieldNames=modifiedFieldNames||null,this.contains(record)&&(this.onUpdate(record,Ext.data.Model.COMMIT,modifiedFieldNames),this.fireEvent("update",this,record,Ext.data.Model.COMMIT,modifiedFieldNames))},afterErase:function(record){this.onErase(record)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,onDestroy:function(){var me=this,proxy=me.getProxy();me.clearLoadTask(),me.getData().destroy(),me.data=null,me.setProxy(null),proxy.autoCreated&&proxy.destroy(),me.setModel(null)},hasPendingLoad:function(){return!!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return!!this.loading},isLoaded:function(){return 0<this.loadCount},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(syncNow){this.autoSyncSuspended&&!--this.autoSyncSuspended&&syncNow&&this.sync()},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){Ext.asapCancel(this.loadTimer),this.pendingLoadOptions=this.loadTimer=null},cleanRemoved:function(){var len,i,removed=this.getRawRemovedRecords();if(removed){for(i=0,len=removed.length;i<len;++i)removed[i].unjoin(this);removed.length=0}},createOperation:function(type,options){var listeners,me=this,proxy=me.getProxy();return me.proxyListeners||(listeners={scope:me,destroyable:!0,beginprocessresponse:me.beginUpdate,endprocessresponse:me.endUpdate},me.disableMetaChangeEvent||(listeners.metachange=me.onMetaChange),me.proxyListeners=proxy.on(listeners)),proxy.createOperation(type,options)},createImplicitModel:function(fields){var proxy,model,modelCfg={extend:this.implicitModel,statics:{defaultProxy:"memory"}};fields&&(modelCfg.fields=fields),model=Ext.define(null,modelCfg),this.setModel(model),(proxy=this.getProxy())?model.setProxy(proxy):this.setProxy(model.getProxy())},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(record){var removed=this.getRawRemovedRecords();removed&&(Ext.Array.remove(removed,record),record.unjoin(this))},setLoadOptions:function(options){var filters,sorters;this.getRemoteFilter()&&(filters=this.getFilters(!1))&&filters.getCount()&&(options.filters=filters.getRange()),this.getRemoteSort()&&(sorters=this.getSorters(!1))&&sorters.getCount()&&(options.sorters=sorters.getRange())}}}),Ext.define("Ext.data.LocalStore",{extend:Ext.Mixin,mixinConfig:{id:"localstore"},config:{extraKeys:null},applyExtraKeys:function(extraKeys){var indexName,data=this.getData();for(indexName in data.setExtraKeys(extraKeys),extraKeys=data.getExtraKeys())this[indexName]=extraKeys[indexName]},add:function(arg){return this.insert(this.getCount(),1===arguments.length?arg:arguments)},constructDataCollection:function(){return new Ext.util.Collection({rootProperty:"data"})},createModel:function(record){var session=this.getSession();return record.isModel||(record=new(this.getModel())(record,session)),record},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var sorters=this.getData().getSorters();return sorters.setSorterConfigure(this.addFieldTransform,this),sorters},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(record){return-1<this.indexOf(record)},each:function(fn,scope){var record,i,data=this.data.items,len=data.length;for(i=0;i<len&&(record=data[i],!1!==fn.call(scope||record,record,i,len));++i);},collect:function(dataIndex,allowNull,bypassFilter){var data=this.getData();return!0===bypassFilter&&data.filtered&&(data=data.getSource()),data.collect(dataIndex,"data",allowNull)},getById:function(id){var data=this.getData();return data.filtered&&(data=data.getSource()),data.get(id)||null},getByInternalId:function(internalId){var keyCfg,data=this.getData();return data.filtered&&(data.$hasExtraKeys||(keyCfg=this.makeInternalKeyCfg(),data.setExtraKeys(keyCfg),data.$hasExtraKeys=!0),data=data.getSource()),data.$hasExtraKeys||(data.setExtraKeys(keyCfg||this.makeInternalKeyCfg()),data.$hasExtraKeys=!0),data.byInternalId.get(internalId)||null},getDataSource:function(){var data=this.getData();return data.getSource()||data},indexOf:function(record){return this.getData().indexOf(record)},indexOfId:function(id){return this.indexOf(this.getById(id))},insert:function(index,records){var len,i;if(records&&(len=(records=Ext.isIterable(records)?Ext.Array.clone(records):[records]).length),!len)return[];for(i=0;i<len;++i)records[i]=this.createModel(records[i]);return this.getData().insert(index,records),records},queryBy:function(fn,scope){var data=this.getData();return(data.getSource()||data).createFiltered(fn,scope)},query:function(property,value,anyMatch,caseSensitive,exactMatch){var data=this.getData();return(data.getSource()||data).createFiltered(property,value,anyMatch,caseSensitive,exactMatch)},first:function(grouped){return this.getData().first(grouped)||null},last:function(grouped){return this.getData().last(grouped)||null},sum:function(field,grouped){var data=this.getData();return grouped&&this.isGrouped()?data.sumByGroup(field):data.sum(field)},count:function(grouped){var data=this.getData();return grouped&&this.isGrouped()?data.countByGroup():data.count()},min:function(field,grouped){var data=this.getData();return grouped&&this.isGrouped()?data.minByGroup(field):data.min(field)},max:function(field,grouped){var data=this.getData();return grouped&&this.isGrouped()?data.maxByGroup(field):data.max(field)},average:function(field,grouped){var data=this.getData();return grouped&&this.isGrouped()?data.averageByGroup(field):data.average(field)},aggregate:function(fn,scope,grouped,field){var groups,len,out,group,i,me=this;if(grouped&&me.isGrouped()){for(len=(groups=me.getGroups().items).length,out={},i=0;i<len;++i)out[(group=groups[i]).getGroupKey()]=me.getAggregate(fn,scope||me,group.items,field);return out}return me.getAggregate(fn,scope,me.getData().items,field)},getAggregate:function(fn,scope,records,field){var i,values=[],len=records.length;for(i=0;i<len;++i)values[i]=records[i].get(field);return fn.call(scope||this,records,values)},addObserver:function(observer){var observers=this.observers;observers||(this.observers=observers=new Ext.util.Collection),observers.add(observer)},removeObserver:function(observer){var observers=this.observers;observers&&observers.remove(observer)},callObservers:function(action,args){var len,items,i,methodName,item,observers=this.observers;if(observers)for(items=observers.items,args?args.unshift(this):args=[this],i=0,len=items.length;i<len;++i)(item=items[i])[methodName="onSource"+action]&&item[methodName].apply(item,args)},queryRecordsBy:function(fn,scope){var len,i,record,data=this.getData(),matches=[];for(scope=scope||this,i=0,len=(data=(data.getSource()||data).items).length;i<len;++i)record=data[i],!0===fn.call(scope,record)&&matches.push(record);return matches},queryRecords:function(field,value){var len,i,record,data=this.getData(),matches=[];for(i=0,len=(data=(data.getSource()||data).items).length;i<len;++i)(record=data[i]).get(field)===value&&matches.push(record);return matches},privates:{isLast:function(record){return record===this.last()},makeInternalKeyCfg:function(){return{byInternalId:{property:"internalId",rootProperty:""}}}}}),Ext.define("Ext.data.proxy.Server",{extend:Ext.data.proxy.Proxy,alias:"proxy.server",alternateClassName:"Ext.data.ServerProxy",isRemote:!0,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:!1,simpleGroupMode:!1,noCache:!0,cacheString:"_dc",timeout:3e4,api:{create:void 0,read:void 0,update:void 0,destroy:void 0},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(name,value){var extraParams=this.getExtraParams();extraParams[name]=value,this.fireEvent("extraparamschanged",extraParams)},updateExtraParams:function(newExtraParams,oldExtraParams){this.fireEvent("extraparamschanged",newExtraParams)},buildRequest:function(operation){var request,operationId,idParam,me=this,initialParams=Ext.apply({},operation.getParams()),params=Ext.applyIf(initialParams,me.getExtraParams()||{});return Ext.applyIf(params,me.getParams(operation)),operationId=operation.getId(),idParam=me.getIdParam(),void 0!==operationId&&void 0===params[idParam]&&(params[idParam]=operationId),(request=new Ext.data.Request({params:params,action:operation.getAction(),records:operation.getRecords(),url:operation.getUrl(),operation:operation,proxy:me})).setUrl(me.buildUrl(request)),operation.setRequest(request),request},processResponse:function(success,operation,request,response){var reader,resultSet,me=this;me.fireEvent("beginprocessresponse",me,response,operation),(!0===success?(reader=me.getReader(),resultSet=204===response.status?reader.getNullResultSet():reader.read(me.extractResponseData(response),{recordCreator:operation.getRecordCreator()}),operation.process(resultSet,request,response),operation.wasSuccessful()):(me.setException(operation,response),0))||me.fireEvent("exception",me,response,operation),me.afterRequest(request,success),me.fireEvent("endprocessresponse",me,response,operation)},setException:function(operation,response){operation.setException({status:response.status,statusText:response.statusText,response:response})},extractResponseData:Ext.identityFn,applyEncoding:function(value){return Ext.encode(value)},encodeSorters:function(sorters,preventArray){var i,out=[],length=sorters.length;for(i=0;i<length;i++)out[i]=sorters[i].serialize();return this.applyEncoding(preventArray?out[0]:out)},encodeFilters:function(filters){var i,out=[],length=filters.length;for(i=0;i<length;i++)out[i]=filters[i].serialize();return this.applyEncoding(out)},getParams:function(operation){if(!operation.isReadOperation)return{};var hasGroups,index,me=this,params={},grouper=operation.getGrouper(),sorters=operation.getSorters(),filters=operation.getFilters(),page=operation.getPage(),start=operation.getStart(),limit=operation.getLimit(),simpleSortMode=me.getSimpleSortMode(),simpleGroupMode=me.getSimpleGroupMode(),pageParam=me.getPageParam(),startParam=me.getStartParam(),limitParam=me.getLimitParam(),groupParam=me.getGroupParam(),groupDirectionParam=me.getGroupDirectionParam(),sortParam=me.getSortParam(),filterParam=me.getFilterParam(),directionParam=me.getDirectionParam();return pageParam&&page&&(params[pageParam]=page),startParam&&(start||0===start)&&(params[startParam]=start),limitParam&&limit&&(params[limitParam]=limit),(hasGroups=groupParam&&grouper)&&(simpleGroupMode?(params[groupParam]=grouper.getProperty(),params[groupDirectionParam]=grouper.getDirection()):params[groupParam]=me.encodeSorters([grouper],!0)),sortParam&&sorters&&0<sorters.length&&(simpleSortMode?(index=0,1<sorters.length&&hasGroups&&(index=1),params[sortParam]=sorters[index].getProperty(),params[directionParam]=sorters[index].getDirection()):params[sortParam]=me.encodeSorters(sorters)),filterParam&&filters&&0<filters.length&&(params[filterParam]=me.encodeFilters(filters)),params},buildUrl:function(request){var url=this.getUrl(request);return this.getNoCache()&&(url=Ext.urlAppend(url,Ext.String.format("{0}={1}",this.getCacheString(),Ext.Date.now()))),url},getUrl:function(request){var url;return request&&(url=request.getUrl()||this.getApi()[request.getAction()]),url||this.callParent()},doRequest:function(operation){},afterRequest:Ext.emptyFn,destroy:function(){this.callParent(),Ext.destroy(this.getReader(),this.getWriter()),this.reader=this.writer=null}}),Ext.define("Ext.data.proxy.Ajax",{extend:Ext.data.proxy.Server,alias:"proxy.ajax",alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],isAjaxProxy:!0,defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:!1,headers:void 0,paramsAsJson:!1,withCredentials:!1,useDefaultXhrHeader:!0,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(operation){var jsonData,params,me=this,writer=me.getWriter(),request=me.buildRequest(operation),method=me.getMethod(request);return writer&&operation.allowWrite()&&(request=writer.write(request)),request.setConfig({binary:me.getBinary(),headers:me.getHeaders(),timeout:me.getTimeout(),scope:me,callback:me.createRequestCallback(request,operation),method:method,useDefaultXhrHeader:me.getUseDefaultXhrHeader(),disableCaching:!1}),"GET"!==method.toUpperCase()&&me.getParamsAsJson()&&(params=request.getParams())&&(jsonData=(jsonData=request.getJsonData())?Ext.Object.merge({},jsonData,params):params,request.setJsonData(jsonData),request.setParams(void 0)),me.getWithCredentials()&&(request.setWithCredentials(!0),request.setUsername(me.getUsername()),request.setPassword(me.getPassword())),me.sendRequest(request)},sendRequest:function(request){return request.setRawRequest(Ext.Ajax.request(request.getCurrentConfig())),this.lastRequest=request},abort:function(request){(request=request||this.lastRequest)&&Ext.Ajax.abort(request.getRawRequest())},getMethod:function(request){var method,actions=this.getActionMethods(),action=request.getAction();return actions&&(method=actions[action]),method||this.defaultActionMethods[action]},createRequestCallback:function(request,operation){var me=this;return function(options,success,response){request===me.lastRequest&&(me.lastRequest=null),me.processResponse(success,operation,request,response)}},destroy:function(){this.lastRequest=null,this.callParent()}}),Ext.define("Ext.data.reader.Json",{extend:Ext.data.reader.Reader,alternateClassName:"Ext.data.JsonReader",alias:"reader.json",config:{record:null,metaProperty:"metaData",useSimpleAccessors:!1,preserveRawData:!1},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},readRecords:function(data,readOptions,internalReadOptions){var meta,me=this;return me.getMeta?(meta=me.getMeta(data))&&me.onMetaChange(meta):data.metaData&&me.onMetaChange(data.metaData),me.callParent([data,readOptions,internalReadOptions])},getResponseData:function(response){var error;try{return Ext.decode(response.responseText)}catch(ex){return error=this.createReadError(ex.message),Ext.Logger.warn("Unable to parse the JSON returned by the server"),this.fireEvent("exception",this,response,error),error}},buildExtractors:function(){var metaProp,rootProp,me=this;me.callParent(arguments)&&(metaProp=me.getMetaProperty(),rootProp=me.getRootProperty(),me.getRoot=rootProp?me.getAccessor(rootProp):Ext.identityFn,metaProp&&(me.getMeta=me.getAccessor(metaProp)))},extractData:function(root,readOptions){var length,i,recordName=this.getRecord(),data=[];if(recordName)for(!(length=root.length)&&Ext.isObject(root)&&(length=1,root=[root]),i=0;i<length;i++)data[i]=root[i][recordName];else data=root;return this.callParent([data,readOptions])},getModelData:function(raw){return this.getPreserveRawData()?Ext.apply({},raw):raw},createAccessor:function(){var re=/[\[\.]/;return function(expr){var operatorIndex,result,current,parts,part,inExpr,isLeft,isRight,special,c,i,bracketed,len,simple=this.getUseSimpleAccessors();if(expr||0===expr){if("function"==typeof expr)return expr;if(simple||(operatorIndex=String(expr).search(re)),!0===simple||operatorIndex<0)result=function(raw){return raw[expr]};else{for(current="raw",parts=[],part="",inExpr=0,len=expr.length,i=0;i<=len;++i)isLeft="["===(c=expr[i]),isRight="]"===c,!(special="."===c||isLeft||isRight||!c)||1<inExpr||inExpr&&!isRight?part+=c:special&&(bracketed=!1,isLeft?++inExpr:isRight&&(--inExpr,bracketed=!0),part&&(current+=part=bracketed?"["+part+"]":"."+part,parts.push(""+current),part=""));result=parts.join(" && "),result=Ext.functionFactory("raw","return "+result)}return result}}}(),createFieldAccessor:function(field){var me=this,mapping=field.mapping,hasMap=mapping||0===mapping,map=hasMap?mapping:field.name;if(hasMap)return"function"==typeof map?function(raw){return field.mapping(raw,me)}:me.createAccessor(map)},getAccessorKey:function(prop){var simple=this.getUseSimpleAccessors()?"simple":"";return this.$className+simple+prop},privates:{copyFrom:function(reader){this.callParent([reader]),this.getRoot=reader.getRoot}}}),Ext.define("Ext.data.writer.Json",{extend:Ext.data.writer.Writer,alternateClassName:"Ext.data.JsonWriter",alias:"writer.json",config:{rootProperty:void 0,encode:!1,allowSingle:!0,expandData:!1},getExpandedData:function(data){for(var item,prop,nameParts,j,tempObj,name,o,dataLength=data.length,i=0;i<dataLength;i++)for(prop in item=data[i])if(item.hasOwnProperty(prop)&&0<(j=(nameParts=prop.split(".")).length-1)){for(tempObj=item[prop];0<j;j--)name=nameParts[j],o=void 0,(o={})[name]=tempObj,tempObj=o;item[nameParts[0]]=item[nameParts[0]]||{},Ext.Object.merge(item[nameParts[0]],tempObj),delete item[prop]}return data},writeRecords:function(request,data){var json,single,transform,me=this,root=me.getRootProperty();return me.getExpandData()&&(data=me.getExpandedData(data)),me.getAllowSingle()&&1===data.length&&(data=data[0],single=!0),(transform=this.getTransform())&&(data=transform(data,request)),me.getEncode()?root&&request.setParam(root,Ext.encode(data)):(single||data&&data.length)&&(json=request.getJsonData()||{},root?json[root]=data:json=data,request.setJsonData(json)),request}}),Ext.define("Ext.util.Group",{extend:Ext.util.Collection,config:{groupKey:null},$endUpdatePriority:2001}),Ext.define("Ext.util.SorterCollection",{extend:Ext.util.Collection,isSorterCollection:!0,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(config){var me=this;me.sortFn=Ext.util.Sorter.createComparator(me),me.callParent([config]),me.setDecoder(me.decodeSorter)},addSort:function(property,direction,mode){var count,index,limit,options,primary,sorter,sorters,me=this;property?(options=me.getOptions(),property instanceof Array?(sorters=property,mode=direction,direction=null):Ext.isString(property)?sorters=(sorter=me.get(property))?[sorter]:[{property:property,direction:direction||options.getDefaultSortDirection()}]:Ext.isFunction(property)?sorters=[{sorterFn:property,direction:direction||options.getDefaultSortDirection()}]:(sorters=[property],mode=direction,direction=null),mode=me._sortModes[mode||"replace"],primary=me.getAt(0),count=me.length,index=mode.append?count:0,me.beginUpdate(),me.splice(index,mode.replace?count:0,sorters),mode.multi&&(count=me.length,(limit=options.getMultiSortLimit())<count&&me.removeAt(limit,count)),sorter&&direction?sorter.setDirection(direction):0===index&&primary&&primary===me.getAt(0)&&primary.toggle()):me.beginUpdate(),me.endUpdate()},clear:function(){this.beginUpdate(),this.callParent(),this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(prop){var i,item,items=this.items,len=items.length;for(i=0;i<len;++i)if((item=items[i]).getProperty()===prop)return item;return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(sorter,xclass){var currentSorter,sorterConfig,type,me=this,options=me.getOptions(),root=options.getRootProperty(),sorterOptionsFn=me.getSorterOptionsFn();if(sorter.isSorter)sorter.getRoot()||sorter.setRoot(root);else{if(sorterConfig={direction:options.getDefaultSortDirection(),root:root},"string"==(type=typeof sorter)){if(currentSorter=me.get(sorter))return currentSorter;sorterConfig.property=sorter}else"function"==type?sorterConfig.sorterFn=sorter:(sorterConfig=Ext.apply(sorterConfig,sorter)).fn&&(sorterConfig.sorterFn=sorterConfig.fn,delete sorterConfig.fn);sorter=Ext.create(xclass||"Ext.util.Sorter",sorterConfig)}return sorterOptionsFn&&sorterOptionsFn.call(me.getSorterOptionsScope()||me,sorter),sorter},setSorterConfigure:function(fn,scope){this.setSorterOptionsFn(fn),this.setSorterOptionsScope(scope)},decodeRemoveItems:function(args,index){var ret=void 0===index?args:args[index];if(!ret||!ret.$cloned){(args.length>index+1||!Ext.isIterable(ret))&&(ret=Ext.Array.slice(args,index));var i,item,n,sorter,type,currentSorters=this.items,ln=ret.length,remove=[];for(i=0;i<ln;i++)if((sorter=ret[i])&&sorter.isSorter)remove.push(sorter);else if("string"==(type=typeof sorter))(sorter=this.get(sorter))&&remove.push(sorter);else if("function"==type)for(n=currentSorters.length;0<n--;)(item=currentSorters[n]).getSorterFn()===sorter&&remove.push(item);(ret=remove).$cloned=!0}return ret},getOptions:function(){return this.$sortable||this}}),Ext.define("Ext.util.FilterCollection",{extend:Ext.util.Collection,isFilterCollection:!0,$filterable:null,filterFn:null,constructor:function(config){var me=this;me.filterFn=Ext.util.Filter.createFilterFn(me),me.callParent([config]),me.setDecoder(me.decodeFilter)},filterData:function(data){return this.filtered?Ext.Array.filter(data,this.filterFn):data},getFilterFn:function(){return this.filterFn},isItemFiltered:function(item){return!this.filterFn(item)},decodeFilter:function(filter){var filterConfig,filterRoot=this.getOptions().getRootProperty();if(filter.isFilter)filter.getRoot()||filter.setRoot(filterRoot);else{if(filterConfig={root:filterRoot},Ext.isFunction(filter))filterConfig.filterFn=filter;else if((filterConfig=Ext.apply(filterConfig,filter)).fn&&(filterConfig.filterFn=filterConfig.fn,delete filterConfig.fn),Ext.util.Filter.isInvalid(filterConfig))return!1;filter=new Ext.util.Filter(filterConfig)}return filter},decodeRemoveItems:function(args,index){var ret=void 0===index?args:args[index];if(!ret.$cloned){(args.length>index+1||!Ext.isIterable(ret))&&(ret=Ext.Array.slice(args,index));var filter,i,isFunction,isProp,isString,item,match,n,type,currentFilters=this.items,ln=ret.length,remove=[];for(i=0;i<ln;i++)if((filter=ret[i])&&filter.isFilter)remove.push(filter);else for(isFunction="function"==(type=typeof filter),isProp=void 0!==filter.property&&void 0!==filter.value,isString="string"==type,n=currentFilters.length;0<n--;)item=currentFilters[n],match=!1,isString?match=item.getProperty()===filter:isFunction?match=item.getFilterFn()===filter:isProp&&(match=item.getProperty()===filter.property&&item.getValue()===filter.value),match&&remove.push(item);(ret=remove).$cloned=!0}return ret},getOptions:function(){return this.$filterable||this}}),Ext.define("Ext.util.GroupCollection",{extend:Ext.util.Collection,isGroupCollection:!0,config:{grouper:null,itemRoot:null},observerPriority:-100,onCollectionAdd:function(source,details){this.addItemsToGroups(source,details.items)},onCollectionBeforeItemChange:function(source,details){this.changeDetails=details},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(source,details){var item=details.item;details.indexChanged||this.syncItemGrouping(source,item,source.getKey(item),details.oldKey,details.oldIndex),this.changeDetails=null},onCollectionRefresh:function(source){this.removeAll(),this.addItemsToGroups(source,source.items)},onCollectionRemove:function(source,details){var entries,entry,group,i,n,removeGroups,item,changeDetails=this.changeDetails;for(changeDetails?(item=changeDetails.item,entries=[],(group=this.findGroupForItem(item))&&entries.push({group:group,items:[item]})):entries=this.groupItems(source,details.items,!1),i=0,n=entries.length;i<n;++i)(group=(entry=entries[i]).group)&&(group.remove(entry.items),group.length||(removeGroups=removeGroups||[]).push(group));removeGroups&&this.remove(removeGroups)},onCollectionSort:function(source){var items,length,i,group,sorters=source.getSorters(!1);if(sorters)for(items=this.items,length=this.length,i=0;i<length;++i)(group=items[i]).getSorters()!==sorters&&group.setSorters(sorters)},onCollectionUpdateKey:function(source,details){var index=details.index,item=details.item;details.indexChanged||(index=source.indexOf(item),this.syncItemGrouping(source,item,details.newKey,details.oldKey,index))},addItemsToGroups:function(source,items){this.groupItems(source,items,!0)},groupItems:function(source,items,adding){var entry,group,groupKey,i,item,itemKey,len,newGroups,me=this,byGroup={},entries=[],grouper=source.getGrouper(),groupKeys=me.itemGroupKeys;for(i=0,len=items.length;i<len;++i)groupKey=grouper.getGroupString(item=items[i]),itemKey=source.getKey(item),adding?(groupKeys||(me.itemGroupKeys=groupKeys={}))[itemKey]=groupKey:groupKeys&&delete groupKeys[itemKey],(entry=byGroup[groupKey])||(!(group=me.getByKey(groupKey))&&adding&&(newGroups=newGroups||[]).push(group=me.createGroup(source,groupKey)),entries.push(byGroup[groupKey]=entry={group:group,items:[]})),entry.items.push(item);for(i=0,len=entries.length;i<len;++i)(entry=entries[i]).group.add(entry.items);return newGroups&&me.add(newGroups),entries},syncItemGrouping:function(source,item,itemKey,oldKey,itemIndex){var addGroups,group,oldGroup,oldGroupKey,firstIndex,me=this,itemGroupKeys=me.itemGroupKeys||(me.itemGroupKeys={}),groupKey=source.getGrouper().getGroupString(item),removeGroups=0,index=-1;oldKey?(oldGroupKey=itemGroupKeys[oldKey],delete itemGroupKeys[oldKey]):oldGroupKey=itemGroupKeys[itemKey],itemGroupKeys[itemKey]=groupKey,(group=me.get(groupKey))||(addGroups=[group=me.createGroup(source,groupKey)]),group.get(itemKey)!==item?(0<group.getCount()&&0===source.getSorters().getCount()&&(index=itemIndex<(firstIndex=source.indexOf(group.items[0]))?0:itemIndex-firstIndex),-1===index?group.add(item):group.insert(index,item)):group.itemChanged(item),groupKey===oldGroupKey||0!==oldGroupKey&&!oldGroupKey||(oldGroup=me.get(oldGroupKey))&&(oldGroup.remove(item),oldGroup.length||(removeGroups=[oldGroup])),addGroups?me.splice(0,removeGroups,addGroups):removeGroups&&me.splice(0,removeGroups)},createGroup:function(source,key){return new Ext.util.Group({groupKey:key,rootProperty:this.getItemRoot(),sorters:source.getSorters()})},getKey:function(item){return item.getGroupKey()},createSortFn:function(){var grouper=this.getGrouper(),sorterFn=this.getSorters().getSortFn();return grouper?function(lhs,rhs){return grouper.sort(lhs.items[0],rhs.items[0])||sorterFn(lhs,rhs)}:sorterFn},updateGrouper:function(grouper){var me=this;me.grouped=!(!grouper||!me.$groupable.getAutoGroup()),me.onSorterChange(),me.onEndUpdateSorters(me.getSorters())},destroy:function(){this.$groupable=null,this.callParent()},privates:{findGroupForItem:function(item){var i,group,items=this.items,len=items.length;for(i=0;i<len;++i)if((group=items[i]).contains(item))return group}}}),Ext.define("Ext.data.Store",{extend:Ext.data.ProxyStore,alias:"store.store",mixins:[Ext.data.LocalStore],config:{data:0,clearRemovedOnLoad:!0,clearOnPageLoad:!0,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:!0},loadCount:0,complete:!1,moveMapCount:0,constructor:function(config){var data,me=this;if(config&&config.buffered)return new Ext.data.BufferedStore(config);me.callParent([config]),me.getData().addObserver(me),(data=me.inlineData)&&(delete me.inlineData,me.loadInlineData(data))},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},applyData:function(data,dataCollection){var me=this;return me.getFields(),me.getModel(),data&&data.isCollection?dataCollection=data:(dataCollection=dataCollection||me.constructDataCollection(),data&&(me.isInitializing?me.inlineData=data:me.loadData(data))),dataCollection},loadInlineData:function(data){var me=this,proxy=me.getProxy();proxy&&proxy.isMemoryProxy?(proxy.setData(data),me.suspendEvents(),me.read()):(me.removeAll(!0),me.suspendEvents(),me.loadData(data)),me.resumeEvents()},onCollectionAdd:function(collection,info){this.onCollectionAddItems(collection,info.items,info)},onCollectionFilterAdd:function(collection,items){this.onCollectionAddItems(collection,items)},onCollectionAddItems:function(collection,records,info){var i,sync,record,replacedItems,me=this,len=records.length,lastChunk=!!info&&!info.next,removed=me.removed,ignoreAdd=me.ignoreCollectionAdd,session=me.getSession(),replaced=info&&info.replaced;for(i=0;i<len;++i)record=records[i],session&&session.adopt(record),ignoreAdd||(record.join(me),removed&&removed.length&&Ext.Array.remove(removed,record),sync=sync||record.phantom||record.dirty);if(!ignoreAdd){if(replaced){for(replacedItems=[];Ext.Array.push(replacedItems,replaced.items),replaced=replaced.next;);me.setMoving(replacedItems,!0)}info&&(info.replaced?lastChunk&&me.fireEvent("refresh",me):(me.fireEvent("add",me,records,info.at),lastChunk&&me.fireEvent("datachanged",me))),replacedItems&&me.setMoving(replacedItems,!1),me.needsSync=me.needsSync||sync}},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(collection,info){var record=info.item,modifiedFieldNames=info.modified||null,type=info.meta;this.fireChangeEvent(record)&&(this.onUpdate(record,type,modifiedFieldNames,info),this.fireEvent("update",this,record,type,modifiedFieldNames,info))},fireChangeEvent:function(record){return this.getDataSource().contains(record)},afterChange:function(record,modifiedFieldNames,type){this.getData().itemChanged(record,modifiedFieldNames||null,void 0,type)},afterCommit:function(record,modifiedFieldNames){this.afterChange(record,modifiedFieldNames,Ext.data.Model.COMMIT)},afterEdit:function(record,modifiedFieldNames){this.needsSync=this.needsSync||record.dirty,this.afterChange(record,modifiedFieldNames,Ext.data.Model.EDIT)},afterReject:function(record){this.afterChange(record,null,Ext.data.Model.REJECT)},afterDrop:function(record){this.getData().remove(record)},afterErase:function(record){this.removeFromRemoved(record)},addSorted:function(record){var index,remote=this.getRemoteSort(),data=this.getData();return remote&&data.setSorters(this.getSorters()),index=data.findInsertionIndex(record),remote&&data.setSorters(null),this.insert(index,record)},remove:function(records,isMove,silent){var len,i,toRemove,record,data=this.getDataSource();if(records)if(records.isModel)len=-1<data.indexOf(records)?(toRemove=[records],1):0;else{for(toRemove=[],i=0,len=records.length;i<len;++i){if((record=records[i])&&record.isEntity){if(!data.contains(record))continue}else if(!(record=data.getAt(record)))continue;toRemove.push(record)}len=toRemove.length}return len?(this.removeIsMove=!0===isMove,this.removeIsSilent=silent,data.remove(toRemove),this.removeIsSilent=!1,toRemove):[]},onCollectionRemove:function(collection,info){var i,record,me=this,removed=me.removed,records=info.items,len=records.length,index=info.at,replacement=info.replacement,isMove=me.removeIsMove||replacement&&Ext.Array.equals(records,replacement.items),silent=me.removeIsSilent,lastChunk=!info.next,data=me.getDataSource();if(!me.ignoreCollectionRemove){for(replacement&&me.setMoving(replacement.items,!0),i=0;i<len;++i)record=records[i],data.contains(record)||(!removed||isMove||record.phantom||record.erasing?record.unjoin(me):(record.removedFrom=index+i,removed.push(record),me.needsSync=!0));silent||replacement&&replacement.items.length||(me.fireEvent("remove",me,records,index,isMove),lastChunk&&me.fireEvent("datachanged",me)),replacement&&me.setMoving(replacement.items,!1)}},onFilterEndUpdate:function(){this.callParent(arguments),this.callObservers("Filter")},removeAt:function(index,count){var data=this.getData();if((index=Math.max(index,0))<data.length){if(1===arguments.length)count=1;else if(!count)return;data.removeAt(index,count)}},removeAll:function(silent){var me=this,data=me.getData(),records=(me.hasListeners.clear,data.getRange());return data.length&&(me.removeIsSilent=!0,me.callObservers("BeforeRemoveAll"),data.removeAll(),me.removeIsSilent=!1,silent||(me.fireEvent("clear",me,records),me.fireEvent("datachanged",me)),me.callObservers("AfterRemoveAll",[!!silent])),records},setRecords:function(records){var count=this.getCount();++this.loadCount,count?this.getData().splice(0,count,records):this.add(records)},splice:function(index,toRemove,toAdd){return this.getData().splice(index,toRemove,toAdd)},onProxyLoad:function(operation){var me=this,resultSet=operation.getResultSet(),records=operation.getRecords(),successful=operation.wasSuccessful();me.destroyed||(resultSet&&(me.totalCount=resultSet.getTotal()),successful?(records=me.processAssociation(records),me.loadRecords(records,operation.getAddRecords()?{addRecords:!0}:void 0)):me.loading=!1,me.hasListeners.load&&me.fireEvent("load",me,records,successful,operation),me.callObservers("AfterLoad",[records,successful,operation]))},filterDataSource:function(fn){var i,source=this.getDataSource(),items=source.items,len=items.length,ret=[];for(i=0;i<len;i++)fn.call(source,items[i])&&ret.push(items[i]);return ret},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(data,append){var i,length=data.length,newData=[];for(i=0;i<length;i++)newData.push(this.createModel(data[i]));newData=this.processAssociation(newData),this.loadRecords(newData,append?this.addRecordsOptions:void 0)},loadRawData:function(data,append){var me=this,session=me.getSession(),result=me.getProxy().getReader().read(data,session?{recordCreator:session.recordCreator}:void 0),records=result.getRecords(),success=result.getSuccess();return success&&(me.totalCount=result.getTotal(),me.loadRecords(records,append?me.addRecordsOptions:void 0)),success},loadRecords:function(records,options){var addRecords,i,skipSort,me=this,length=records.length,data=me.getData();for(options&&(addRecords=options.addRecords),me.getRemoteSort()||me.getSortOnLoad()||(skipSort=!0,data.setAutoSort(!1)),addRecords||me.clearData(!0),me.loading=!1,me.ignoreCollectionAdd=!0,me.callObservers("BeforePopulate"),data.add(records),me.ignoreCollectionAdd=!1,skipSort&&data.setAutoSort(!0),i=0;i<length;i++)records[i].join(me);++me.loadCount,me.complete=!0,me.fireEvent("datachanged",me),me.fireEvent("refresh",me),me.callObservers("AfterPopulate")},loadPage:function(page,options){var size=this.getPageSize();this.currentPage=page,options=Ext.apply({page:page,start:(page-1)*size,limit:size,addRecords:!this.getClearOnPageLoad()},options),this.read(options)},nextPage:function(options){this.loadPage(this.currentPage+1,options)},previousPage:function(options){this.loadPage(this.currentPage-1,options)},clearData:function(isLoad){var records,record,i,len,me=this,removed=me.removed,data=me.getDataSource(),clearRemovedOnLoad=me.getClearRemovedOnLoad(),needsUnjoinCheck=removed&&isLoad&&!clearRemovedOnLoad;if(data){for(i=0,len=(records=data.items).length;i<len;++i)record=records[i],needsUnjoinCheck&&Ext.Array.contains(removed,record)||record.unjoin(me);me.ignoreCollectionRemove=!0,me.callObservers("BeforeClear"),data.removeAll(),me.ignoreCollectionRemove=!1,me.callObservers("AfterClear")}!removed||isLoad&&!clearRemovedOnLoad||(removed.length=0)},onIdChanged:function(rec,oldId,newId){this.getData().updateKey(rec,oldId),this.fireEvent("idchanged",this,rec,oldId,newId)},commitChanges:function(){var recs=this.getModifiedRecords(),len=recs.length,i=0;for(Ext.suspendLayouts(),this.beginUpdate();i<len;i++)recs[i].commit();this.cleanRemoved(),this.endUpdate(),Ext.resumeLayouts(!0)},filterNewOnly:function(item){return!0===item.phantom},filterRejects:function(item){return item.phantom||item.dirty},rejectChanges:function(){var i,rec,toRemove,sorted,data,currentAutoSort,me=this,recs=me.getRejectRecords(),len=recs.length;for(Ext.suspendLayouts(),me.beginUpdate(),i=0;i<len;i++)(rec=recs[i]).phantom?(toRemove=toRemove||[]).push(rec):rec.reject();if(toRemove)for(me.remove(toRemove),i=0,len=toRemove.length;i<len;++i)toRemove[i].reject();if(recs=me.getRawRemovedRecords()){for(len=recs.length,(sorted=!me.getRemoteSort()&&me.isSorted())&&(currentAutoSort=(data=me.getData()).getAutoSort(),data.setAutoSort(!1)),i=len-1;0<=i;i--)(rec=recs[i]).reject(),sorted||me.insert(rec.removedFrom||0,rec);sorted&&(data.setAutoSort(currentAutoSort),me.add(recs)),recs.length=0}me.endUpdate(),Ext.resumeLayouts(!0)},onDestroy:function(){var me=this,task=me.loadTask,source=me.getData().getSource();me.clearData(),me.callParent(),me.setSession(null),me.observers=null,task&&(task.cancel(),me.loadTask=null),source&&source.destroy()},privates:{fetch:function(options){options=Ext.apply({},options),this.setLoadOptions(options),this.createOperation("read",options).execute()},onBeforeLoad:function(operation){this.callObservers("BeforeLoad",[operation])},onRemoteFilterSet:function(filters,remoteFilter){filters&&this.getData().setFilters(remoteFilter?null:filters),this.callParent([filters,remoteFilter])},onRemoteSortSet:function(sorters,remoteSort){var data=this.getData();sorters&&data.setSorters(remoteSort?null:sorters),data.setAutoGroup(!remoteSort),this.callParent([sorters,remoteSort])},isMoving:function(records,getMap){var len,i,map=this.moveMap,moving=0;if(map)if(records)if(Ext.isArray(records))for(i=0,len=records.length;i<len;++i)moving+=map[records[i].id]?1:0;else map[records.id]&&++moving;else moving=getMap?map:this.moveMapCount;return moving},setLoadOptions:function(options){var session,grouper,me=this,pageSize=me.getPageSize();me.getRemoteSort()&&!options.grouper&&(grouper=me.getGrouper())&&(options.grouper=grouper),(pageSize||"start"in options||"limit"in options||"page"in options)&&(options.page=null!=options.page?options.page:me.currentPage,options.start=void 0!==options.start?options.start:(options.page-1)*pageSize,options.limit=null!=options.limit?options.limit:pageSize,me.currentPage=options.page),options.addRecords=options.addRecords||!1,options.recordCreator||(session=me.getSession())&&(options.recordCreator=session.recordCreator),me.callParent([options])},setMoving:function(records,isMoving){var i,id,me=this,map=me.moveMap||(me.moveMap={}),len=records.length;for(i=0;i<len;++i)id=records[i].id,isMoving?map[id]?++map[id]:(map[id]=1,++me.moveMapCount):0==--map[id]&&(delete map[id],--me.moveMapCount);0===me.moveMapCount&&(me.moveMap=null)},processAssociation:function(records){var associatedEntity=this.getAssociatedEntity();return associatedEntity&&(records=this.getRole().processLoad(this,associatedEntity,records,this.getSession())),records}}}),Ext.define("Ext.data.reader.Array",{extend:Ext.data.reader.Json,alternateClassName:"Ext.data.ArrayReader",alias:"reader.array",config:{totalProperty:void 0,successProperty:void 0},createFieldAccessor:function(field){var result,oldMap=field.mapping,index=field.hasMapping()?oldMap:field.ordinal;return field.mapping=index,result=this.callParent(arguments),field.mapping=oldMap,result},getModelData:function(raw){return{}}}),Ext.define("Ext.data.ArrayStore",{extend:Ext.data.Store,alias:"store.array",alternateClassName:["Ext.data.SimpleStore"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(data,append){if(this.expandData){for(var r=[],i=0,ln=data.length;i<ln;i++)r[r.length]=[data[i]];data=r}this.callParent([data,append])}}),Ext.define("Ext.data.StoreManager",{extend:Ext.util.MixedCollection,alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:!0,register:function(){for(var s,i=0;s=arguments[i];i++)this.add(s)},unregister:function(){for(var s,i=0;s=arguments[i];i++)this.remove(this.lookup(s))},lookup:function(store,defaultType){if(Ext.isArray(store)){var i,len,fields=["field1"],expand=!Ext.isArray(store[0]),data=store;if(expand)for(data=[],i=0,len=store.length;i<len;++i)data.push([store[i]]);else for(i=2,len=store[0].length;i<=len;++i)fields.push("field"+i);return new Ext.data.ArrayStore({data:data,fields:fields,autoDestroy:!0,autoCreated:!0,expanded:expand})}return Ext.isString(store)?this.get(store):Ext.Factory.store(store,defaultType)},getKey:function(o){return o.storeId}},function(){Ext.regStore=function(name,config){var store;if(Ext.isObject(name))config=name;else{if(Ext.data.StoreManager.containsKey(name))return Ext.data.StoreManager.lookup(name);config.storeId=name}return store=config instanceof Ext.data.Store?config:new Ext.data.Store(config),Ext.data.StoreManager.register(store),store},Ext.getStore=function(name){return Ext.data.StoreManager.lookup(name)},Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:!1}).isEmptyStore=!0}),Ext.define("Ext.data.Batch",{mixins:{observable:Ext.mixin.Observable},config:{pauseOnException:!1},current:-1,total:0,running:!1,complete:!1,exception:!1,constructor:function(config){this.mixins.observable.constructor.call(this,config),this.operations=[],this.exceptions=[]},add:function(operation){var i,len,me=this;if(Ext.isArray(operation))for(i=0,len=operation.length;i<len;++i)me.add(operation[i]);else me.total++,operation.setBatch(me),me.operations.push(operation);return me},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(operation1,operation2){var ret=operation1.order-operation2.order;if(ret)return ret;var rank,entityType1=operation1.entityType,entityType2=operation2.entityType;return entityType1&&entityType2?((rank=entityType1.rank)||(entityType1.schema.rankEntities(),rank=entityType1.rank),(rank-entityType2.rank)*operation1.foreignKeyDirection):0},start:function(index){var me=this;return!me.operations.length||me.running?me:(me.exceptions.length=0,me.exception=!1,me.running=!0,me.runOperation(Ext.isDefined(index)?index:me.current+1))},retry:function(){return this.start(this.current)},runNextOperation:function(){return this.running&&this.runOperation(this.current+1),this},pause:function(){return this.running=!1,this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var out=null,current=this.current;return-1===current||this.complete||(out=this.operations[current]),out},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(index){var me=this,operations=me.operations,operation=operations[index];return void 0===operation?(me.running=!1,me.complete=!0,me.fireEvent("complete",me,operations[operations.length-1])):(me.current=index,operation.setInternalCallback(me.onOperationComplete),operation.setInternalScope(me),operation.execute()),me},onOperationComplete:function(operation){var me=this,exception=operation.hasException();exception&&(me.exception=!0,me.exceptions.push(operation),me.fireEvent("exception",me,operation)),exception&&me.getPauseOnException()?me.pause():(me.fireEvent("operationcomplete",me,operation),me.runNextOperation())}}),Ext.define("Ext.app.bind.Template",{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(text){var name,initters=this._initters;for(name in this.text=text,initters)this[name]=initters[name]},_initters:{apply:function(values,scope){return this.parse().apply(values,scope)},getTokens:function(){return this.parse().getTokens()}},apply:function(values,scope){var i,slot,value,slots=this.slots,buffer=this.buffer,length=slots.length;for(i=0;i<length;++i)(slot=slots[i])&&(null==(value=values[slot.pos])&&(value=""),slot.not&&(value=!value),slot.format&&(value=slot.format(value,scope)),buffer[i]=value);return buffer.join("")},getTokens:function(){return this.tokens},parse:function(){var fmt,i,length,match,s,slot,token,me=this,text=me.text,buffer=[],slots=[],tokens=[],tokenMap={},last=0,tokenRe=me.tokenRe,pos=0;for(i in me._initters)delete me[i];for(me.buffer=buffer,me.slots=slots,me.tokens=tokens;match=tokenRe.exec(text);)(length=match.index-last)&&(buffer[pos++]=text.substring(last,last+length),last+=length),last+=(s=match[0]).length,(token=(slot={fmt:fmt=match[3]||null,index:match[1]?parseInt(match[1],10):null,not:"!"===s.charAt(1),token:match[2]||null}).token||String(slot.index))in tokenMap?slot.pos=tokenMap[token]:(tokenMap[token]=slot.pos=tokens.length,tokens.push(token)),fmt&&("this."===fmt.substring(0,5)?slot.fmt=fmt.substring(5):slot.scope=Ext.util.Format,me.parseArgs(match[4],slot)),slots[pos++]=slot;return last<text.length&&(buffer[pos++]=text.substring(last)),me},parseArgs:function(argsString,slot){var arg,args,i,length,numberRe=this.numberRe,stringRe=this.stringRe;for(slot=slot||{},length=(args=argsString?argsString.indexOf(",")<0?[argsString]:argsString.split(","):[]).length,slot.args=args,i=0;i<length;++i)if("true"===(arg=args[i]))args[i]=!0;else if("false"===arg)args[i]=!1;else if("null"===arg)args[i]=null;else if(numberRe.test(arg))args[i]=parseFloat(arg);else{if(!stringRe.test(arg)){slot.fn=Ext.functionFactory("return ["+argsString+"];"),slot.format=this._formatEval;break}args[i]=arg.substring(1,arg.length-1)}return slot.format||(args.unshift(0),slot.format=this._formatArgs),slot},parseFormat:function(fmt){var args,match=this.formatRe.exec(fmt),slot={fmt:fmt,scope:Ext.util.Format};return(args=match[2])?(slot.fmt=match[1],this.parseArgs(args,slot)):(slot.args=[0],slot.format=this._formatArgs),slot},_formatArgs:function(value,scope){return scope=this.scope||scope,this.args[0]=value,scope[this.fmt].apply(scope,this.args)},_formatEval:function(value,scope){var args=this.fn();return args.unshift(value),(scope=this.scope||scope)[this.fmt].apply(scope,args)}}),Ext.define("Ext.data.PageMap",{extend:Ext.util.LruCache,config:{store:null,pageSize:0,rootProperty:""},clear:function(initial){this.pageMapGeneration=(this.pageMapGeneration||0)+1,this.indexMap={},this.callParent([initial])},forEach:function(fn,scope){var i,j,pageNumber,page,len,pageNumbers=Ext.Object.getKeys(this.map),pageCount=pageNumbers.length,pageSize=this.getPageSize();for(i=0;i<pageCount;i++)pageNumbers[i]=+pageNumbers[i];for(Ext.Array.sort(pageNumbers,Ext.Array.numericSortFn),scope=scope||this,i=0;i<pageCount;i++)for(pageNumber=pageNumbers[i],len=(page=this.getPage(pageNumber)).length,j=0;j<len;j++)if(!1===fn.call(scope,page[j],(pageNumber-1)*pageSize+j))return},findBy:function(fn,scope){var result=null;return scope=scope||this,this.forEach(function(rec,index){if(fn.call(scope,rec,index))return result=rec,!1}),result},findIndexBy:function(fn,scope){var result=-1;return scope=scope||this,this.forEach(function(rec,index){if(fn.call(scope,rec))return result=index,!1}),result},find:function(property,value,start,startsWith,endsWith,ignoreCase){if(Ext.isEmpty(value,!1))return null;var regex=Ext.String.createRegex(value,startsWith,endsWith,ignoreCase),root=this.getRootProperty();return this.findBy(function(item){return item&&regex.test((root?item[root]:item)[property])},null,start)},findIndex:function(property,value,start,startsWith,endsWith,ignoreCase){if(Ext.isEmpty(value,!1))return null;var regex=Ext.String.createRegex(value,startsWith,endsWith,ignoreCase),root=this.getRootProperty();return this.findIndexBy(function(item){return item&&regex.test((root?item[root]:item)[property])},null,start)},getPageFromRecordIndex:function(index){return Math.floor(index/this.getPageSize())+1},addAll:function(records){this.addPage(1,records)},addPage:function(pageNumber,records){var page,i,len,startIdx,me=this,pageSize=me.getPageSize(),lastPage=pageNumber+Math.floor((records.length-1)/pageSize),storeIndex=(pageNumber-1)*pageSize,indexMap=me.indexMap;for(startIdx=0;pageNumber<=lastPage;pageNumber++,startIdx+=pageSize){for(i=0,len=(page=Ext.Array.slice(records,startIdx,startIdx+pageSize)).length;i<len;i++)indexMap[page[i].internalId]=storeIndex++;me.add(pageNumber,page),me.fireEvent("pageadd",me,pageNumber,page)}},getCount:function(){var result=this.callParent();return result=result&&(result-1)*this.getPageSize()+this.last.value.length},getByInternalId:function(internalId){var index=this.indexMap[internalId];if(null!=index)return this.getAt(index)},indexOf:function(record){var result=-1;return record&&null==(result=this.indexMap[record.internalId])&&(result=-1),result},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(page){var len,i,result,me=this,thePage=me.getPage(page);if(thePage&&!1!==me.fireEvent("beforepageremove",me,page,thePage)){for(len=thePage.length,i=0;i<len;i++)delete me.indexMap[thePage[i].internalId];result=me.callParent(arguments),me.fireEvent("pageremove",me,page,thePage),thePage.length=0}return result},getPage:function(pageNumber){return this.get(pageNumber)},hasRange:function(start,end){for(var me=this,pageNumber=me.getPageFromRecordIndex(start),endPageNumber=me.getPageFromRecordIndex(end);pageNumber<=endPageNumber;pageNumber++)if(!me.hasPage(pageNumber))return!1;return(endPageNumber-1)*me._pageSize+me.getPage(endPageNumber).length>end},hasPage:function(pageNumber){return!!this.get(pageNumber)},peekPage:function(pageNumber){return this.map[pageNumber]},getAt:function(index){return this.getRange(index,index+1)[0]},getRange:function(start,end){end--,this.hasRange(start,end)||Ext.raise("PageMap asked for range which it does not have");for(var sliceBegin,sliceEnd,doSlice,me=this,Array=Ext.Array,pageSize=me.getPageSize(),startPageNumber=me.getPageFromRecordIndex(start),endPageNumber=me.getPageFromRecordIndex(end),dataStart=(startPageNumber-1)*pageSize,dataEnd=endPageNumber*pageSize-1,pageNumber=startPageNumber,result=[];pageNumber<=endPageNumber;pageNumber++)doSlice=pageNumber===startPageNumber?0<(sliceBegin=start-dataStart):(sliceBegin=0,!1),pageNumber===endPageNumber&&(sliceEnd=pageSize-(dataEnd-end),doSlice=doSlice||sliceEnd<pageSize),doSlice?Array.push(result,Array.slice(me.getPage(pageNumber),sliceBegin,sliceEnd)):Array.push(result,me.getPage(pageNumber));return result},destroy:function(){this.callParent(),this.indexMap={}}}),Ext.define("Ext.data.BufferedStore",{extend:Ext.data.ProxyStore,alias:"store.buffered",isBufferedStore:!0,buffered:!0,config:{data:0,pageSize:25,remoteSort:!0,remoteFilter:!0,sortOnLoad:!1,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0,trackRemoved:!1},applyData:function(data){return this.data||(this.data=this.createDataCollection())},applyProxy:function(proxy){return(proxy=this.callParent([proxy]))&&proxy.setEnablePaging&&proxy.setEnablePaging(!0),proxy},createFiltersCollection:function(){return new Ext.util.FilterCollection},createSortersCollection:function(){return new Ext.util.SorterCollection},updateGroupField:function(field){this.group(field)},getGrouper:function(){return this.grouper},isGrouped:function(){return!!this.grouper},createDataCollection:function(){var me=this,result=new Ext.data.PageMap({store:me,rootProperty:"data",pageSize:me.getPageSize(),maxSize:me.getPurgePageCount(),listeners:{clear:me.onPageMapClear,scope:me}});return me.relayEvents(result,["beforepageremove","pageadd","pageremove"]),me.pageRequests={},result},removeAll:function(silent){var data=this.getData();data&&(silent&&this.suspendEvent("clear"),data.clear(),silent&&this.resumeEvent("clear"))},flushLoad:function(){var me=this,options=me.pendingLoadOptions;if(me.clearLoadTask(),options)return me.getData().clear(),options.page=1,options.start=0,options.limit=me.getViewSize()||me.getDefaultViewSize(),options.loadCallback=options.callback,options.callback=null,me.loadToPrefetch(options)},reload:function(options){var startIdx,endIdx,startPage,endPage,i,waitForReload,bufferZone,records,me=this,data=me.getData(),lastTotal=Number.MAX_VALUE;if(options=options||{},!me.loading&&!1!==me.fireEvent("beforeload",me,options))for(waitForReload=function(){var newCount=me.totalCount,oldRequestSize=endIdx-startIdx;newCount<=endIdx&&(endIdx=newCount-1,startIdx=Math.max(endIdx-oldRequestSize,0)),me.rangeCached(startIdx,Math.min(endIdx,me.totalCount))&&(me.loading=!1,data.un("pageadd",waitForReload),records=data.getRange(startIdx,endIdx+1),me.fireEvent("load",me,records,!0),me.fireEvent("refresh",me))},bufferZone=Math.ceil((me.getLeadingBufferZone()+me.getTrailingBufferZone())/2),me.lastRequestStart&&me.preserveScrollOnReload?(startIdx=me.lastRequestStart,endIdx=me.lastRequestEnd,lastTotal=me.getTotalCount()):(startIdx=options.start||0,endIdx=startIdx+(options.count||me.getPageSize())-1),data.clear(!0),delete me.totalCount,startIdx=Math.max(startIdx-bufferZone,0),endIdx=Math.min(endIdx+bufferZone,lastTotal),startPage=me.getPageFromRecordIndex(startIdx),endPage=me.getPageFromRecordIndex(endIdx),me.loading=!0,options.waitForReload=waitForReload,data.on("pageadd",waitForReload),i=startPage;i<=endPage;i++)me.prefetchPage(i,options)},filter:function(){this.callParent(arguments)},filterBy:function(fn,scope){},loadData:function(data,append){},loadPage:function(page,options){var me=this;return(options=options||{}).page=me.currentPage=page,options.start=(page-1)*me.getPageSize(),options.limit=me.getViewSize()||me.getDefaultViewSize(),options.loadCallback=options.callback,options.callback=null,me.loadToPrefetch(options)},clearData:function(isLoad){var data=this.getData();data&&data.clear()},getCount:function(){return this.totalCount||0},getRange:function(start,end,options){var pageAddHandler,requiredStart,requiredEnd,requiredStartPage,requiredEndPage,me=this,maxIndex=me.totalCount-1,lastRequestStart=me.lastRequestStart,result=[],data=me.getData();return options=Ext.apply({prefetchStart:start,prefetchEnd:end},options),end=end>=me.totalCount?maxIndex:end,requiredStart=0===start?0:start-1,requiredEnd=end===maxIndex?end:end+1,me.lastRequestStart=start,me.lastRequestEnd=end,me.rangeCached(requiredStart,requiredEnd)?(me.onRangeAvailable(options),result=data.getRange(start,end+1)):(me.fireEvent("cachemiss",me,start,end),requiredStartPage=me.getPageFromRecordIndex(requiredStart),requiredEndPage=me.getPageFromRecordIndex(requiredEnd),pageAddHandler=function(pageMap,page,records){requiredStartPage<=page&&page<=requiredEndPage&&me.rangeCached(requiredStart,requiredEnd)&&(me.fireEvent("cachefilled",me,start,end),data.un("pageadd",pageAddHandler),me.onRangeAvailable(options))},data.on("pageadd",pageAddHandler),me.prefetchRange(start,end)),me.primeCache(start,end,start<lastRequestStart?-1:1),result},getById:function(id){return this.data.findBy(function(record){return record.getId()===id})},getAt:function(index){var data=this.getData();if(data.hasRange(index,index))return data.getAt(index)},getByInternalId:function(internalId){return this.data.getByInternalId(internalId)},contains:function(record){return-1<this.indexOf(record)},indexOf:function(record){return this.getData().indexOf(record)},indexOfId:function(id){return this.indexOf(this.getById(id))},group:function(grouper,direction){var oldGrouper,me=this;grouper&&"string"==typeof grouper?(oldGrouper=me.grouper)?void 0===direction?oldGrouper.toggle():oldGrouper.setDirection(direction):me.grouper=new Ext.util.Grouper({property:grouper,direction:direction||"ASC",root:"data"}):me.grouper=grouper?me.getSorters().decodeSorter(grouper,"Ext.util.Grouper"):null,me.getData().clear(),me.loadPage(1,{callback:function(){me.fireEvent("groupchange",me,me.getGrouper())}})},getPageFromRecordIndex:function(index){return Math.floor(index/this.getPageSize())+1},calculatePageCacheSize:function(rangeSizeRequested){var me=this,purgePageCount=me.getPurgePageCount();return purgePageCount?Math.max(me.getData().getMaxSize()||0,2*Math.ceil((rangeSizeRequested+me.getTrailingBufferZone()+me.getLeadingBufferZone())/me.getPageSize())+purgePageCount):0},loadToPrefetch:function(options){function callbackFn(){records=records||[],options.loadCallback&&options.loadCallback.call(options.scope||me,records,operation,!0),options.callback&&options.callback.call(options.scope||me,records,startIdx||0,endIdx||0,options)}function fireEventsFn(){me.fireEvent("datachanged",me),me.fireEvent("refresh",me),me.fireEvent("load",me,records,!0)}var i,records,dataSetSize,operation,me=this,prefetchOptions=options,startIdx=options.start,endIdx=options.start+options.limit-1,rangeSizeRequested=me.getViewSize()||options.limit,loadEndIdx=Math.min(endIdx,options.start+rangeSizeRequested-1),startPage=me.getPageFromRecordIndex(Math.max(startIdx-me.getTrailingBufferZone(),0)),endPage=me.getPageFromRecordIndex(endIdx+me.getLeadingBufferZone()),data=me.getData(),waitForRequestedRange=function(){me.rangeCached(startIdx,loadEndIdx)&&(me.loading=!1,records=data.getRange(startIdx,loadEndIdx+1),data.un("pageadd",waitForRequestedRange),me.hasListeners.guaranteedrange&&me.guaranteeRange(startIdx,loadEndIdx,options.callback,options.scope),callbackFn(),fireEventsFn())};data.setMaxSize(me.calculatePageCacheSize(rangeSizeRequested)),!1!==me.fireEvent("beforeload",me,options)&&(delete me.totalCount,me.loading=!0,options.callback&&delete(prefetchOptions=Ext.apply({},options)).callback,me.on("prefetch",function(store,records,successful,op){if(operation=op,successful)if(dataSetSize=me.getTotalCount())for(data.on("pageadd",waitForRequestedRange),loadEndIdx=Math.min(loadEndIdx,dataSetSize-1),endPage=me.getPageFromRecordIndex(Math.min(loadEndIdx+me.getLeadingBufferZone(),dataSetSize-1)),i=startPage+1;i<=endPage;++i)me.prefetchPage(i,prefetchOptions);else callbackFn(),fireEventsFn();else me.loading=!1,callbackFn(),me.fireEvent("load",me,records,!1)},null,{single:!0}),me.prefetchPage(startPage,prefetchOptions))},prefetch:function(options){var operation,existingPageRequest,me=this,pageSize=me.getPageSize(),data=me.getData();return pageSize?(me.lastPageSize&&pageSize!=me.lastPageSize&&Ext.raise("pageSize cannot be dynamically altered"),data.getPageSize()||data.setPageSize(pageSize)):me.pageSize=data.setPageSize(pageSize=options.limit),me.lastPageSize=pageSize,options.page||(options.page=me.getPageFromRecordIndex(options.start),options.start=(options.page-1)*pageSize,options.limit=Math.ceil(options.limit/pageSize)*pageSize),(existingPageRequest=me.pageRequests[options.page])&&existingPageRequest.getOperation().pageMapGeneration===data.pageMapGeneration||(options=Ext.apply({action:"read",filters:me.getFilters().items,sorters:me.getSorters().items,grouper:me.getGrouper(),internalCallback:me.onProxyPrefetch,internalScope:me},options),(operation=me.createOperation("read",options)).pageMapGeneration=data.pageMapGeneration,!1!==me.fireEvent("beforeprefetch",me,operation)&&(me.pageRequests[options.page]=operation.execute(),me.getProxy().isSynchronous&&delete me.pageRequests[options.page])),me},onPageMapClear:function(){var page,me=this,loadingFlag=me.wasLoading,reqs=me.pageRequests,data=me.getData();for(page in data.clearListeners(),data.on("clear",me.onPageMapClear,me),me.relayEvents(data,["beforepageremove","pageadd","pageremove"]),me.loading=!0,me.totalCount=0,reqs)reqs.hasOwnProperty(page)&&reqs[page].getOperation().abort();me.fireEvent("clear",me),me.loading=loadingFlag},prefetchPage:function(page,options){var pageSize=this.getPageSize(),start=(page-1)*pageSize,total=this.totalCount;void 0!==total&&this.data.getCount()===total||this.prefetch(Ext.applyIf({page:page,start:start,limit:pageSize},options))},onProxyPrefetch:function(operation){if(!this.destroyed){var key,op,me=this,resultSet=operation.getResultSet(),records=operation.getRecords(),successful=operation.wasSuccessful(),page=operation.getPage(),waitForReload=operation.waitForReload,oldTotal=me.totalCount,requests=me.pageRequests;if(operation.pageMapGeneration===me.getData().pageMapGeneration){if(resultSet&&(me.totalCount=resultSet.getTotal(),me.totalCount!==oldTotal&&me.fireEvent("totalcountchange",me.totalCount)),void 0!==page&&delete me.pageRequests[page],me.loading=!1,me.fireEvent("prefetch",me,records,successful,operation),successful)if(0===me.totalCount){if(waitForReload){for(key in requests)(op=requests[key].getOperation()).waitForReload===waitForReload&&delete op.waitForReload;me.getData().un("pageadd",waitForReload),me.fireEvent("load",me,[],!0),me.fireEvent("refresh",me)}}else me.cachePage(records,operation.getPage());Ext.callback(operation.getCallback(),operation.getScope()||me,[records,operation,successful])}}},cachePage:function(records,page){var i,me=this,len=records.length;for(Ext.isDefined(me.totalCount)||(me.totalCount=records.length,me.fireEvent("totalcountchange",me.totalCount)),i=0;i<len;i++)records[i].join(me);me.getData().addPage(page,records)},rangeCached:function(start,end){return this.getData().hasRange(start,end)},pageCached:function(page){return this.getData().hasPage(page)},pagePending:function(page){return!!this.pageRequests[page]},rangeSatisfied:function(start,end){return this.rangeCached(start,end)},onRangeAvailable:function(options){var range,totalCount=this.getTotalCount(),start=options.prefetchStart,end=options.prefetchEnd>totalCount-1?totalCount-1:options.prefetchEnd;end=Math.max(0,end),range=this.getData().getRange(start,end+1),!1!==options.fireEvent&&this.fireEvent("guaranteedrange",range,start,end,options),options.callback&&options.callback.call(options.scope||this,range,start,end,options)},guaranteeRange:function(start,end,callback,scope,options){options=Ext.apply({callback:callback,scope:scope},options),this.getRange(start,end+1,options)},prefetchRange:function(start,end){var startPage,endPage,page,me=this,data=me.getData();if(!me.rangeCached(start,end))for(startPage=me.getPageFromRecordIndex(start),endPage=me.getPageFromRecordIndex(end),data.setMaxSize(me.calculatePageCacheSize(end-start+1)),page=startPage;page<=endPage;page++)me.pageCached(page)||me.prefetchPage(page)},primeCache:function(start,end,direction){var me=this,leadingBufferZone=me.getLeadingBufferZone(),trailingBufferZone=me.getTrailingBufferZone(),pageSize=me.getPageSize(),totalCount=me.totalCount;end=-1===direction?(start=Math.max(start-leadingBufferZone,0),Math.min(end+trailingBufferZone,totalCount-1)):1===direction?(start=Math.max(Math.min(start-trailingBufferZone,totalCount-pageSize),0),Math.min(end+leadingBufferZone,totalCount-1)):(start=Math.min(Math.max(Math.floor(start-(leadingBufferZone+trailingBufferZone)/2),0),totalCount-me.pageSize),Math.min(Math.max(Math.ceil(end+(leadingBufferZone+trailingBufferZone)/2),0),totalCount-1)),me.prefetchRange(start,end)},sort:function(field,direction,mode){0===arguments.length?this.clearAndLoad():this.getSorters().addSort(field,direction,mode)},onSorterEndUpdate:function(){var me=this,sorters=me.getSorters().getRange();sorters.length?(me.fireEvent("beforesort",me,sorters),me.clearAndLoad({callback:function(){me.fireEvent("sort",me,sorters)}})):me.fireEvent("sort",me,sorters)},clearAndLoad:function(options){this.getData().clear(),this.loadPage(1,options)},privates:{isLast:function(record){return this.indexOf(record)===this.getTotalCount()-1},isMoving:function(){return!1}}}),Ext.define("Ext.data.NodeInterface",{statics:{decorate:function(modelClass){var idName,idField,idType,model=Ext.data.schema.Schema.lookupEntity(modelClass),proto=model.prototype;model.prototype.isObservable||model.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable),proto.isNode||(idName=proto.idProperty,idType=(idField=model.getField(idName)).type,model.override(this.getPrototypeBody()),model.addFields([{name:"parentId",type:idType,defaultValue:null,allowNull:idField.allowNull},{name:"index",type:"int",defaultValue:-1,persist:!1,convert:null},{name:"depth",type:"int",defaultValue:0,persist:!1,convert:null},{name:"expanded",type:"bool",defaultValue:!1,persist:!1,convert:null},{name:"expandable",type:"bool",defaultValue:!0,persist:!1,convert:null},{name:"checked",type:"auto",defaultValue:null,persist:!1,convert:null},{name:"leaf",type:"bool",defaultValue:!1},{name:"cls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"iconCls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"icon",type:"string",defaultValue:"",persist:!1,convert:null},{name:"root",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isLast",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isFirst",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"allowDrop",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"allowDrag",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"loaded",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"loading",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"href",type:"string",defaultValue:"",persist:!1,convert:null},{name:"hrefTarget",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtip",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtitle",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qshowDelay",type:"int",defaultValue:0,persist:!1,convert:null},{name:"children",type:"auto",defaultValue:null,persist:!1,convert:null},{name:"visible",type:"boolean",defaultValue:!0,persist:!1},{name:"text",type:"string",persist:!1}]))},getPrototypeBody:function(){var bubbledEvents={idchanged:!0,append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0,expand:!0,collapse:!0,beforeexpand:!0,beforecollapse:!0,sort:!0},silently={silent:!0};return{isNode:!0,firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,constructor:function(){var me=this;return me.mixins.observable.constructor.call(me),me.callParent(arguments),me.childNodes=[],me},createNode:function(node){var store,storeReader,nodeProxy,nodeReader,reader,typeProperty,me=this,childType=me.childType,T=me.self;return node.isModel||(childType?T=me.schema.getEntity(childType):(storeReader=(store=me.getTreeStore())&&store.getProxy().getReader(),nodeReader=(nodeProxy=me.getProxy())?nodeProxy.getReader():null,(reader=!storeReader||nodeReader&&nodeReader.initialConfig.typeProperty?nodeReader:storeReader)&&(typeProperty=reader.getTypeProperty())&&(T=reader.getChildType(me.schema,node,typeProperty))),node=new T(node)),node.childNodes||(node.firstChild=node.lastChild=node.parentNode=node.previousSibling=node.nextSibling=null,node.childNodes=[]),node},isLeaf:function(){return!0===this.get("leaf")},setFirstChild:function(node){this.firstChild=node},setLastChild:function(node){this.lastChild=node},updateInfo:function(commit,info){var propName,newValue,field,currentValue,key,settingIndexInNewParent,persistentField,i,me=this,dataObject=me.data,oldDepth=dataObject.depth,childInfo={},children=me.childNodes,childCount=children.length,phantom=me.phantom,fields=me.fields,modified=me.modified||(me.modified={}),newParentId=info.parentId;for(propName in info)if(field=fields[me.fieldOrdinals[propName]],newValue=info[propName],persistentField=field&&field.persist,currentValue=dataObject[propName],((settingIndexInNewParent=persistentField&&"index"===propName&&-1!==currentValue&&newParentId&&newParentId!==modified.parentId)||!me.isEqual(currentValue,newValue))&&(dataObject[propName]=newValue,persistentField))if(!settingIndexInNewParent&&modified.hasOwnProperty(propName)){if(me.isEqual(modified[propName],newValue))for(key in delete modified[propName],me.dirty=!1,modified)if(modified.hasOwnProperty(key)){me.dirty=!0;break}}else me.dirty=!0,modified[propName]=currentValue;if(commit&&(me.commit(),me.phantom=phantom),me.data.depth!==oldDepth)for(childInfo={depth:me.data.depth+1},i=0;i<childCount;i++)children[i].updateInfo(commit,childInfo)},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return!this.isLeaf()&&0<this.childNodes.length},isExpandable:function(){var me=this;return!!me.get("expandable")&&!(me.isLeaf()||me.isLoaded()&&!me.phantom&&!me.hasChildNodes())},triggerUIUpdate:function(){this.callJoined("afterEdit",[])},appendChild:function(node,suppressEvents,commit){var i,ln,index,oldParent,previousSibling,result,me=this,childInfo={isLast:!0,parentId:me.getId(),depth:(me.data.depth||0)+1},treeStore=me.getTreeStore(),bulkUpdate=treeStore&&treeStore.bulkUpdate;if(Ext.suspendLayouts(),Ext.isArray(node)){for(ln=node.length,result=new Array(ln),me.callTreeStore("beginFill"),i=0;i<ln;i++)result[i]=me.appendChild(node[i],suppressEvents,commit);me.callTreeStore("endFill",[result])}else{if(node=me.createNode(node),!0!==suppressEvents&&!1===me.fireEventArgs("beforeappend",[me,node]))return Ext.resumeLayouts(!0),!1;if(index=me.childNodes.length,oldParent=node.parentNode){if(!0!==suppressEvents&&!1===node.fireEventArgs("beforemove",[node,oldParent,me,index]))return Ext.resumeLayouts(!0),!1;if(!1===oldParent.removeChild(node,!1,suppressEvents,oldParent.getTreeStore()===treeStore))return Ext.resumeLayouts(!0),!1}treeStore&&treeStore.beginUpdate(),0===(index=me.childNodes.length)&&me.setFirstChild(node),(me.childNodes[index]=node).parentNode=me,node.nextSibling=null,me.setLastChild(node),(previousSibling=me.childNodes[index-1])?((node.previousSibling=previousSibling).nextSibling=node,previousSibling.updateInfo(commit,{isLast:!1}),bulkUpdate||previousSibling.triggerUIUpdate()):node.previousSibling=null,childInfo.isFirst=0===index,childInfo.index=index,node.updateInfo(commit,childInfo),me.isLeaf()&&me.set("leaf",!1),me.isLoaded()?1!==me.childNodes.length||bulkUpdate||me.triggerUIUpdate():bulkUpdate?me.data.loaded=!0:me.set("loaded",!0),index&&me.childNodes[index-1].isExpanded()&&!bulkUpdate&&me.childNodes[index-1].cascadeBy(me.triggerUIUpdate),treeStore&&(treeStore.registerNode(me,!bulkUpdate),bulkUpdate&&treeStore.registerNode(node)),!0!==suppressEvents&&(me.fireEventArgs("append",[me,node,index]),oldParent&&node.fireEventArgs("move",[node,oldParent,me,index])),me.callTreeStore("onNodeAppend",[node,index]),result=node,treeStore&&treeStore.endUpdate()}return Ext.resumeLayouts(!0),result},getOwnerTree:function(){var store=this.getTreeStore();if(store)return store.ownerTree},getTreeStore:function(){for(var root=this;root&&!root.treeStore;)root=root.parentNode;return root&&root.treeStore},removeChild:function(node,erase,suppressEvents,isMove){var i,childCount,previousSibling,removeContext,me=this,index=me.indexOf(node),treeStore=me.getTreeStore(),bulkUpdate=treeStore&&treeStore.bulkUpdate;if(-1===index||!0!==suppressEvents&&!1===me.fireEventArgs("beforeremove",[me,node,!!isMove]))return!1;if(Ext.suspendLayouts(),treeStore&&treeStore.beginUpdate(),Ext.Array.erase(me.childNodes,index,1),me.firstChild===node&&me.setFirstChild(node.nextSibling),me.lastChild===node&&me.setLastChild(node.previousSibling),(previousSibling=node.previousSibling)&&(node.previousSibling.nextSibling=node.nextSibling),node.nextSibling)for(node.nextSibling.previousSibling=node.previousSibling,0===index&&node.nextSibling.updateInfo(!1,{isFirst:!0}),i=index,childCount=me.childNodes.length;i<childCount;i++)me.childNodes[i].updateInfo(!1,{index:i});else previousSibling&&(previousSibling.updateInfo(!1,{isLast:!0}),bulkUpdate||(previousSibling.isExpanded()?previousSibling.cascadeBy(me.triggerUIUpdate):previousSibling.triggerUIUpdate()));return me.childNodes.length||bulkUpdate||me.triggerUIUpdate(),Ext.resumeLayouts(!0),!0!==suppressEvents&&(removeContext={parentNode:node.parentNode,previousSibling:node.previousSibling,nextSibling:node.nextSibling},me.callTreeStore("beforeNodeRemove",[[node],!!isMove]),node.previousSibling=node.nextSibling=node.parentNode=null,me.fireEventArgs("remove",[me,node,!!isMove,removeContext]),me.callTreeStore("onNodeRemove",[[node],!!isMove])),erase?node.erase(!0):node.clear(),isMove||node.set({parentId:null,lastParentId:me.getId()},silently),treeStore&&treeStore.endUpdate(),node},copy:function(newId,deep){var i,result=this.callParent([newId]),len=this.childNodes?this.childNodes.length:0;if(deep)for(i=0;i<len;i++)result.appendChild(this.childNodes[i].copy(void 0,!0));return result},clear:function(erase){var me=this;me.parentNode=me.previousSibling=me.nextSibling=null,erase&&(me.firstChild=me.lastChild=me.childNodes=null)},drop:function(){var i,node,treeStore,me=this,childNodes=me.childNodes,parentNode=me.parentNode,len=childNodes?childNodes.length:0;for(me.callParent(),parentNode?(treeStore=me.getTreeStore(),parentNode.removeChild(me)):me.get("root")&&(treeStore=me.getTreeStore()).setRoot(null),treeStore&&treeStore.beginUpdate(),i=0;i<len;i++)(node=childNodes[i]).clear(),node.drop();treeStore&&treeStore.endUpdate()},erase:function(options){var i,node,childNodes=this.childNodes,len=childNodes&&childNodes.length;for(this.remove(),this.clear(!0),this.callParent([options]),i=0;i<len;i++)(node=childNodes[i]).parentNode=null,node.erase(options)},insertBefore:function(node,refNode,suppressEvents){var childCount,previousSibling,i,me=this,index=me.indexOf(refNode),oldParent=node.parentNode,refIndex=index,treeStore=me.getTreeStore(),bulkUpdate=treeStore&&treeStore.bulkUpdate;if(!refNode)return me.appendChild(node);if(node===refNode)return!1;if(node=me.createNode(node),!0!==suppressEvents&&!1===me.fireEventArgs("beforeinsert",[me,node,refNode]))return!1;if(oldParent===me&&me.indexOf(node)<index&&refIndex--,oldParent){if(!0!==suppressEvents&&!1===node.fireEventArgs("beforemove",[node,oldParent,me,index,refNode]))return!1;if(!1===oldParent.removeChild(node,!1,suppressEvents,oldParent.getTreeStore()===treeStore))return!1}for(treeStore&&treeStore.beginUpdate(),0===refIndex&&me.setFirstChild(node),Ext.Array.splice(me.childNodes,refIndex,0,node),node.parentNode=me,(node.nextSibling=refNode).previousSibling=node,(previousSibling=me.childNodes[refIndex-1])?(node.previousSibling=previousSibling).nextSibling=node:node.previousSibling=null,node.updateInfo(!1,{parentId:me.getId(),index:refIndex,isFirst:0===refIndex,isLast:!1,depth:(me.data.depth||0)+1}),i=refIndex+1,childCount=me.childNodes.length;i<childCount;i++)me.childNodes[i].updateInfo(!1,{index:i});return me.isLoaded()?1!==me.childNodes.length||bulkUpdate||me.triggerUIUpdate():bulkUpdate?me.data.loaded=!0:me.set("loaded",!0),treeStore&&treeStore.registerNode(me,!bulkUpdate),!0!==suppressEvents&&(me.fireEventArgs("insert",[me,node,refNode]),oldParent&&node.fireEventArgs("move",[node,oldParent,me,refIndex,refNode])),me.callTreeStore("onNodeInsert",[node,refIndex]),treeStore&&treeStore.endUpdate(),node},insertChild:function(index,node){var sibling=this.childNodes[index];return sibling?this.insertBefore(node,sibling):this.appendChild(node)},isLastVisible:function(){var result=this.data.isLast,next=this.nextSibling;if(result||!this.getTreeStore().isFiltered())return result;for(;next;){if(next.data.visible)return!1;next=next.nextSibling}return!0},remove:function(erase,suppressEvents){var parentNode=this.parentNode;return parentNode?parentNode.removeChild(this,erase,suppressEvents):erase&&this.erase(!0),this},removeAll:function(erase,suppressEvents,fromParent){var node,treeStore,i,me=this,childNodes=me.childNodes,len=childNodes.length;if(len){for(fromParent||(treeStore=me.getTreeStore())&&(treeStore.beginUpdate(),treeStore.suspendEvent("remove"),me.callTreeStore("beforeNodeRemove",[childNodes,!1])),i=0;i<len;++i)(node=childNodes[i]).previousSibling=node.nextSibling=node.parentNode=null,me.fireEventArgs("remove",[me,node,!1]),erase?node.erase(!0):node.removeAll(!1,suppressEvents,!0);return!fromParent&&treeStore&&(treeStore.resumeEvent("remove"),me.callTreeStore("onNodeRemove",[childNodes,!1]),treeStore.endUpdate()),me.firstChild=me.lastChild=null,childNodes.length=0,fromParent||me.triggerUIUpdate(),me}},getChildAt:function(index){return this.childNodes[index]},replaceChild:function(newChild,oldChild,suppressEvents){var s=oldChild?oldChild.nextSibling:null;return this.removeChild(oldChild,!1,suppressEvents),this.insertBefore(newChild,s,suppressEvents),oldChild},indexOf:function(child){return Ext.Array.indexOf(this.childNodes,child)},indexOfId:function(id){for(var childNodes=this.childNodes,len=childNodes.length,i=0;i<len;++i)if(childNodes[i].getId()===id)return i;return-1},getPath:function(field,separator){field=field||this.idProperty,separator=separator||"/";for(var path=[this.get(field)],parent=this.parentNode;parent;)path.unshift(parent.get(field)),parent=parent.parentNode;return separator+path.join(separator)},getDepth:function(){return this.get("depth")},bubble:function(fn,scope,args){for(var p=this;p&&!1!==fn.apply(scope||p,args||[p]);)p=p.parentNode},cascade:function(){return Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.data.Node: cascade has been deprecated. Please use cascadeBy instead."),this.cascadeBy.apply(this,arguments)},cascadeBy:function(before,scope,args,after){var me=this;if(1!==arguments.length||Ext.isFunction(before)||(after=before.after,scope=before.scope,args=before.args,before=before.before),!before||!1!==before.apply(scope||me,args||[me])){var i,childNodes=me.childNodes,length=childNodes.length;for(i=0;i<length;i++)childNodes[i].cascadeBy.call(childNodes[i],before,scope,args,after);after&&after.apply(scope||me,args||[me])}},eachChild:function(fn,scope,args){var i,childNodes=this.childNodes,length=childNodes.length;for(i=0;i<length&&!1!==fn.apply(scope||this,args||[childNodes[i]]);i++);},findChild:function(attribute,value,deep){return this.findChildBy(function(){return this.get(attribute)==value},null,deep)},findChildBy:function(fn,scope,deep){for(var n,res,cs=this.childNodes,len=cs.length,i=0;i<len;i++){if(n=cs[i],!0===fn.call(scope||n,n))return n;if(deep&&null!==(res=n.findChildBy(fn,scope,deep)))return res}return null},contains:function(node){return node.isAncestor(this)},isAncestor:function(node){for(var p=this.parentNode;p;){if(p===node)return!0;p=p.parentNode}return!1},sort:function(sortFn,recursive,suppressEvent){var i,n,me=this,childNodes=me.childNodes,ln=childNodes.length,info={isFirst:!0};if(0<ln){for(sortFn=sortFn||me.getTreeStore().getSortFn(),Ext.Array.sort(childNodes,sortFn),me.setFirstChild(childNodes[0]),me.setLastChild(childNodes[ln-1]),i=0;i<ln;i++)(n=childNodes[i]).previousSibling=childNodes[i-1],n.nextSibling=childNodes[i+1],info.isLast=i===ln-1,info.index=i,n.updateInfo(!1,info),info.isFirst=!1,recursive&&!n.isLeaf()&&n.sort(sortFn,!0,!0);!0!==suppressEvent&&(me.fireEventArgs("sort",[me,childNodes]),me.callTreeStore("onNodeSort",[childNodes]))}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isBranchLoaded:function(){var isBranchLoaded=!this.isLeaf()&&this.isLoaded();return isBranchLoaded&&this.cascadeBy(function(node){return node.isLeaf()||(isBranchLoaded=isBranchLoaded||node.isBranchLoaded()),isBranchLoaded}),isBranchLoaded},isLoading:function(){return this.get("loading")},isRoot:function(){return!this.parentNode},isVisible:function(){for(var parent=this.parentNode;parent;){if(!parent.isExpanded())return!1;parent=parent.parentNode}return!0},expand:function(recursive,callback,scope){var treeStore,resumeAddEvent,me=this;me.isLeaf()?Ext.callback(callback,scope||me):me.isLoading()?me.on("expand",function(){me.expand(recursive,callback,scope)},me,{single:!0}):me.isExpanded()?recursive?me.expandChildren(!0,callback,scope):Ext.callback(callback,scope||me,[me.childNodes]):!1!==me.fireEventArgs("beforeexpand",[me])&&(recursive&&(me.parentNode&&me.parentNode.isSynchronousRecursiveExpand?me.isSynchronousRecursiveExpand=!0:((treeStore=me.getTreeStore()).getProxy().isSynchronous||me.isBranchLoaded())&&(me.isSynchronousRecursiveExpand=!0,treeStore.suspendEvent("add"),resumeAddEvent=!0)),me.callTreeStore("onBeforeNodeExpand",[me.onChildNodesAvailable,me,[recursive,callback,scope]]),resumeAddEvent&&(treeStore.resumeEvent("add"),treeStore.fireEvent("refresh",treeStore)),me.isSynchronousRecursiveExpand=!1)},onChildNodesAvailable:function(records,recursive,callback,scope){var ancestor,i,collapsedAncestors,me=this,treeStore=me.getTreeStore(),bulkUpdate=treeStore&&treeStore.bulkUpdate;for(Ext.suspendLayouts(),ancestor=me.parentNode;ancestor;ancestor=ancestor.parentNode)ancestor.isExpanded()||(collapsedAncestors=collapsedAncestors||[]).unshift(ancestor);if(bulkUpdate?me.data.expanded=!0:me.set("expanded",!0),collapsedAncestors){for(i=1;i<collapsedAncestors.length;i++)ancestor=collapsedAncestors[i],bulkUpdate?ancestor.data.expanded=!0:ancestor.set("expanded",!0);for(collapsedAncestors[0].expand(),i=1;i<collapsedAncestors.length;i++)(ancestor=collapsedAncestors[i]).fireEventArgs("expand",[ancestor,ancestor.childNodes])}else me.callTreeStore("onNodeExpand",[records,!1]);me.fireEventArgs("expand",[me,records]),recursive?me.expandChildren(!0,callback,scope):Ext.callback(callback,scope||me,[me.childNodes]),Ext.resumeLayouts(!0)},expandChildren:function(recursive,callback,scope,singleExpand){var origCallback,i,allNodes,expandNodes,ln,node,treeStore;for(Ext.isBoolean(callback)&&(origCallback=callback,callback=scope,scope=singleExpand,singleExpand=origCallback),void 0===singleExpand&&(singleExpand=(treeStore=this.getTreeStore())&&treeStore.singleExpand),allNodes=this.childNodes,expandNodes=[],ln=singleExpand?Math.min(allNodes.length,1):allNodes.length,i=0;i<ln;++i)(node=allNodes[i]).isLeaf()||(expandNodes[expandNodes.length]=node);for(ln=expandNodes.length,i=0;i<ln;++i)expandNodes[i].expand(recursive);callback&&Ext.callback(callback,scope||this,[this.childNodes])},collapse:function(recursive,callback,scope){var i,collapseChildren,me=this,expanded=me.isExpanded(),treeStore=me.getTreeStore(),bulkUpdate=treeStore&&treeStore.bulkUpdate,len=me.childNodes.length;if(!me.isLeaf()&&(!expanded&&recursive||!1!==me.fireEventArgs("beforecollapse",[me]))){if(Ext.suspendLayouts(),me.isExpanded())callback=recursive?(collapseChildren=function(){for(i=0;i<len;i++)me.childNodes[i].setCollapsed(!0)},callback?Ext.Function.createSequence(collapseChildren,Ext.Function.bind(callback,scope,[me.childNodes])):collapseChildren):callback&&Ext.Function.bind(callback,scope,[me.childNodes]),bulkUpdate?me.data.expanded=!1:me.set("expanded",!1),me.callTreeStore("onNodeCollapse",[me.childNodes,callback,scope]),me.fireEventArgs("collapse",[me,me.childNodes]),callback=null;else if(recursive)for(i=0;i<len;i++)me.childNodes[i].setCollapsed(!0);Ext.resumeLayouts(!0)}Ext.callback(callback,scope||me,[me.childNodes])},setCollapsed:function(recursive){var i,me=this,len=me.childNodes.length;if(!me.isLeaf()&&!1!==me.fireEventArgs("beforecollapse",[me])&&(me.data.expanded=!1,me.fireEventArgs("collapse",[me,me.childNodes]),recursive))for(i=0;i<len;i++)me.childNodes[i].setCollapsed(!0)},collapseChildren:function(recursive,callback,scope){var i,node,allNodes=this.childNodes,ln=allNodes.length,collapseNodes=[];for(i=0;i<ln;++i)!(node=allNodes[i]).isLeaf()&&node.isLoaded()&&node.isExpanded()&&collapseNodes.push(node);if(ln=collapseNodes.length)for(i=0;i<ln;++i)node=collapseNodes[i],i===ln-1?node.collapse(recursive,callback,scope):node.collapse(recursive);else Ext.callback(callback,scope)},fireEvent:function(eventName){return this.fireEventArgs(eventName,Ext.Array.slice(arguments,1))},fireEventArgs:function(eventName,args){var result,eventSource,topNode,fireEventArgs=Ext.mixin.Observable.prototype.fireEventArgs;if(bubbledEvents[eventName]){for(eventSource=this;!1!==result&&eventSource;eventSource=(topNode=eventSource).parentNode)eventSource.hasListeners&&eventSource.hasListeners[eventName]&&(result=fireEventArgs.call(eventSource,eventName,args));return!1!==result&&(eventSource=topNode.getTreeStore())&&eventSource.hasListeners&&eventSource.hasListeners[eventName="node"+eventName]&&(result=eventSource.fireEventArgs(eventName,args)),result}return fireEventArgs.apply(this,arguments)},serialize:function(writerParam){var children,i,writer=writerParam||new Ext.data.writer.Json({writeAllFields:!0}),result=writer.getRecordData(this),childNodes=this.childNodes,len=childNodes.length;if(0<len)for(result.children=children=[],i=0;i<len;i++)children.push(childNodes[i].serialize(writer));return result},callTreeStore:function(funcName,args){var target=this.getTreeStore(),fn=target&&target[funcName];target&&fn&&((args=args||[])[0]!==this&&args.unshift(this),fn.apply(target,args))},privates:{join:function(store){store.isTreeStore?this.isRoot()&&(this.treeStore=this.store=store):this.callParent([store])},callJoined:function(funcName,args){this.callParent([funcName,args]),this.callTreeStore(funcName,args)}}}}}}),Ext.define("Ext.mixin.Queryable",{mixinId:"queryable",isQueryable:!0,query:function(selector){return selector=selector||"*",Ext.ComponentQuery.query(selector,this.getQueryRoot())},queryBy:function(fn,scope){for(var item,out=[],items=this.getQueryRoot().getRefItems(!0),i=0,len=items.length;i<len;++i)item=items[i],!1!==fn.call(scope||item,item)&&out.push(item);return out},queryById:function(id){return this.down(Ext.makeIdSelector(id))},child:function(selector){var children=this.getQueryRoot().getRefItems();return selector&&selector.isComponent?this.matchById(children,selector.getItemId()):(selector&&(children=Ext.ComponentQuery.query(selector,children)),children.length?children[0]:null)},down:function(selector){return selector&&selector.isComponent?this.matchById(this.getRefItems(!0),selector.getItemId()):(selector=selector||"",this.query(selector)[0]||null)},visitPreOrder:function(selector,fn,scope,extraArgs){Ext.ComponentQuery._visit(!0,selector,this.getQueryRoot(),fn,scope,extraArgs)},visitPostOrder:function(selector,fn,scope,extraArgs){Ext.ComponentQuery._visit(!1,selector,this.getQueryRoot(),fn,scope,extraArgs)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(items,id){var i,item,len=items.length;for(i=0;i<len;++i)if((item=items[i]).getItemId()===id)return item;return null}}}),Ext.define("Ext.data.TreeModel",{extend:Ext.data.Model,mixins:[Ext.mixin.Queryable],getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode},statics:{defaultProxy:"memory"}},function(){Ext.data.NodeInterface.decorate(this)}),Ext.define("Ext.data.Request",{config:{action:void 0,params:void 0,method:"GET",url:null,operation:null,proxy:null,disableCaching:!1,headers:{},callbackKey:null,rawRequest:null,jsonData:void 0,xmlData:void 0,withCredentials:!1,username:null,password:null,binary:!1,callback:null,scope:null,timeout:3e4,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(config){this.initConfig(config)},getParam:function(key){var params=this.getParams();if(params)return params[key]},setParam:function(key,value){var params=this.getParams()||{};params[key]=value,this.setParams(params)}}),Ext.define("Ext.data.TreeStore",{extend:Ext.data.Store,alias:"store.tree",isTreeStore:!0,config:{root:null,rootVisible:!1,defaultRootProperty:"children",parentIdProperty:null,clearOnLoad:!0,clearRemovedOnLoad:!0,nodeParam:"node",defaultRootId:"root",defaultRootText:"Root",folderSort:!1},lazyFill:!1,fillCount:0,bulkUpdate:0,_silentOptions:{silent:!0},implicitModel:"Ext.data.TreeModel",constructor:function(config){this.byIdMap={},this.callParent([config])},applyFields:function(fields,oldFields){fields&&this.defaultRootProperty!==this.self.prototype.config.defaultRootProperty&&(fields=fields.concat({name:this.defaultRootProperty,type:"auto",defaultValue:null,persist:!1})),this.callParent([fields,oldFields])},onSorterEndUpdate:function(){var me=this,sorters=me.getSorters().getRange(),rootNode=me.getRoot(),folderSort=me.getFolderSort();me.fireEvent("beforesort",me,sorters),rootNode&&(folderSort||sorters.length)?me.getRemoteSort()?sorters.length&&me.load({callback:function(){me.fireEvent("sort",me,sorters)}}):(rootNode.sort(this.getSortFn(),!0),me.fireEvent("datachanged",me),me.fireEvent("refresh",me),me.fireEvent("sort",me,sorters)):me.fireEvent("sort",me,sorters)},updateFolderSort:function(folderSort){this.needsFolderSort=folderSort,this.onSorterEndUpdate()},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var me=this,sortersSortFn=this.sorters.getSortFn();return function(node1,node2){var result=0;return me.needsFolderSort&&(result=(node1.data.leaf?1:0)-(node2.data.leaf?1:0)),me.needsIndexSort&&0===result&&(result=node1.data.index-node2.data.index),result||sortersSortFn(node1,node2)}},getTotalCount:function(){return this.getCount()},afterEdit:function(node,modifiedFieldNames){this.needsLocalFilter()&&this.doFilter(node),this.callParent([node,modifiedFieldNames])},afterReject:function(record){this.contains(record)&&(this.onUpdate(record,Ext.data.Model.REJECT,null),this.fireEvent("update",this,record,Ext.data.Model.REJECT,null))},afterCommit:function(record,modifiedFieldNames){modifiedFieldNames=modifiedFieldNames||null,this.contains(record)&&(this.onUpdate(record,Ext.data.Model.COMMIT,modifiedFieldNames),this.fireEvent("update",this,record,Ext.data.Model.COMMIT,modifiedFieldNames))},fireChangeEvent:function(record){return!!this.byIdMap[record.id]},updateRootVisible:function(rootVisible){var data,rootNode=this.getRoot();rootNode&&(data=this.getData(),rootVisible?data.insert(0,rootNode):data.remove(rootNode))},updateTrackRemoved:function(trackRemoved){this.callParent(arguments),this.removedNodes=this.removed,this.removed=null},onDestroyRecords:function(records,operation,success){success&&(this.removedNodes.length=0)},updateProxy:function(proxy){var reader;proxy&&(proxy.setIdParam&&proxy.setIdParam(this.getNodeParam()),reader=proxy.getReader(),Ext.isEmpty(reader.getRootProperty())&&reader.setRootProperty(this.getDefaultRootProperty()))},setProxy:function(proxy){this.changingProxy=!0,this.callParent([proxy]),this.changingProxy=!1},updateModel:function(model){var isNode=model.prototype.isNode;Ext.data.NodeInterface.decorate(model),isNode||this.changingProxy||this.getProxy().getReader().buildExtractors(!0)},onFilterEndUpdate:function(filters){var childNodes,childNode,filteredNodes,i,me=this,length=filters.length,root=me.getRoot();if(me.getRemoteFilter())me.callParent([filters]);else{if(length?me.doFilter(root):root.cascadeBy({after:function(node){node.set("visible",!0,me._silentOptions)}}),length)for(filteredNodes=[],i=0,length=(childNodes=root.childNodes).length;i<length;i++)(childNode=childNodes[i]).get("visible")&&filteredNodes.push(childNode);else filteredNodes=root.childNodes;me.onNodeFilter(root,filteredNodes),root.fireEvent("filterchange",root,filteredNodes),me.fireEvent("filterchange",me,filters),me.suppressNextFilter=!0,me.callParent([filters]),me.suppressNextFilter=!1}},onNodeFilter:function(root,childNodes){var me=this,data=me.getData(),toAdd=[];me.getRootVisible()&&(childNodes.length?toAdd.push(root):root.set("visible",!1,me._silentOptions)),me.handleNodeExpand(root,childNodes,toAdd),me.suspendEvents(),data.splice(0,data.getCount(),toAdd),me.resumeEvents(),me.suppressNextFilter||(me.fireEvent("datachanged",me),me.fireEvent("refresh",me))},onBeforeNodeExpand:function(node,callback,scope,args){var storeReader,nodeProxy,nodeReader,reader,children,callbackArgs,me=this;node.isLoaded()?(callbackArgs=[node.childNodes],args&&callbackArgs.push.apply(callbackArgs,args),Ext.callback(callback,scope||node,callbackArgs)):node.isLoading()?me.on("load",function(){callbackArgs=[node.childNodes],args&&callbackArgs.push.apply(callbackArgs,args),Ext.callback(callback,scope||node,callbackArgs)},me,{single:!0,priority:1001}):(storeReader=me.getProxy().getReader(),(children=(reader=(nodeReader=(nodeProxy=node.getProxy())?nodeProxy.getReader():null)&&nodeReader.initialConfig.rootProperty?nodeReader:storeReader).getRoot(node.raw||node.data))||node.phantom&&!node.isRoot()?(children&&me.fillNode(node,reader.extractData(children,{model:node.childType,recordCreator:me.recordCreator})),callbackArgs=[node.childNodes],args&&callbackArgs.push.apply(callbackArgs,args),Ext.callback(callback,scope||node,callbackArgs)):(me.read({node:node,onChildNodesAvailable:function(){delete me.lastOptions.onChildNodesAvailable,callbackArgs=[node.childNodes],args&&callbackArgs.push.apply(callbackArgs,args),Ext.callback(callback,scope||node,callbackArgs)}}),me.flushLoad()))},onNodeExpand:function(parent,records){var me=this,insertIndex=me.indexOf(parent)+1,toAdd=[];me.handleNodeExpand(parent,records,toAdd),me.refreshCounter||!parent.isRoot()||parent.get("visible")?me.insert(insertIndex,toAdd):me.loadRecords(toAdd)},handleNodeExpand:function(parent,records,toAdd){var i,record,ln=records?records.length:0;if((parent===this.getRoot()||this.isVisible(parent))&&ln)for(i=0;i<ln;i++)(record=records[i]).get("visible")&&(toAdd.push(record),record.isExpanded()&&(record.isLoaded()?this.handleNodeExpand(record,record.childNodes,toAdd):(record.set("expanded",!1),record.expand())))},onNodeCollapse:function(parent,records,callback,scope){var lastNodeIndexPlus,me=this,collapseIndex=me.indexOf(parent)+1;me.needsLocalFilter()&&(records=Ext.Array.filter(records,me.filterVisible)),records.length&&me.data.contains(records[0])&&(lastNodeIndexPlus=me.indexOfNextVisibleNode(parent),me.removeAt(collapseIndex,lastNodeIndexPlus-collapseIndex)),Ext.callback(callback,scope)},indexOfNextVisibleNode:function(node){for(var result;node.parentNode;){for(result=node.nextSibling;result&&!result.get("visible");result=result.nextSibling);if(result)return this.indexOf(result);node=node.parentNode}return this.getCount()},filterNew:function(item){return!item.get("root")&&this.callParent([item])},filterRejects:function(item){return!item.get("root")&&this.callParent([item])},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew,this)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(parentNode,childNodes){Ext.isArray(childNodes)||(childNodes=[childNodes]);var i,startNode,me=this,len=childNodes.length;for(i=0;!startNode&&i<len;i++)childNodes[i].get("visible")&&(startNode=childNodes[i]);startNode?(me.startRemoveIndex=me.indexOf(childNodes[0]),me.lastRemoveIndexPlusOne=me.indexOfNextVisibleNode(childNodes[childNodes.length-1])):(me.startRemoveIndex=-1,me.lastRemoveIndexPlusOne=0)},afterDrop:Ext.emptyFn,onNodeRemove:function(parentNode,childNodes,isMove){var i,me=this,removed=me.removedNodes,len=childNodes.length,startRemoveIndex=me.startRemoveIndex,lastRemoveIndexPlusOne=me.lastRemoveIndexPlusOne;for(me.suspendAutoSync(),-1!==startRemoveIndex&&(me.removeIsMove=isMove,me.removeAt(startRemoveIndex,lastRemoveIndexPlusOne-startRemoveIndex),me.removeIsMove=!1),i=0;i<len;i++)childNodes[i].cascadeBy(function(node){me.unregisterNode(node),removed&&!isMove&&(node.phantom||node.erasing||me.loading||(node.removedFrom=me.indexOf(node),removed.push(node),me.needsSync=!0))});me.resumeAutoSync()},onNodeAppend:function(parent,node,index){this.onNodeInsert(parent,node,index)},onNodeInsert:function(parent,node,index){var refNode,sibling,storeReader,nodeProxy,nodeReader,reader,dataRoot,me=this,data=node.raw||node.data,removed=me.removedNodes;if(parent&&me.needsLocalFilter()&&me.doFilter(parent),me.beginUpdate(),me.isVisible(node)){if(0!==index&&node.previousSibling){for(sibling=node.previousSibling;sibling&&!sibling.get("visible");sibling=sibling.previousSibling);for(;sibling.isExpanded()&&sibling.lastChild;)sibling=sibling.lastChild;refNode=sibling}else refNode=parent;me.insert(me.indexOf(refNode)+1,node),!node.isLeaf()&&node.isExpanded()&&(node.isLoaded()?me.onNodeExpand(node,node.childNodes):me.fillCount||(node.set("expanded",!1),node.expand()))}Ext.Array.remove(removed,node),me.needsSync=me.needsSync||node.phantom||node.dirty,node.isLeaf()||node.isLoaded()||me.lazyFill||(storeReader=me.getProxy().getReader(),(dataRoot=(reader=(nodeReader=(nodeProxy=node.getProxy())?nodeProxy.getReader():null)&&nodeReader.initialConfig.rootProperty?nodeReader:storeReader).getRoot(data))&&me.fillNode(node,reader.extractData(dataRoot,{model:node.childType,recordCreator:me.recordCreator}))),me.endUpdate()},registerNode:function(node,includeChildren){var children,length,i;if(this.byIdMap[node.id]=node,!0===includeChildren)for(length=(children=node.childNodes).length,i=0;i<length;i++)this.registerNode(children[i],!0)},unregisterNode:function(node,includeChildren){var children,length,i;if(delete this.byIdMap[node.id],!0===includeChildren)for(length=(children=node.childNodes).length,i=0;i<length;i++)this.unregisterNode(children[i],!0)},onNodeSort:function(node,childNodes){var me=this;me.suspendAutoSync(),(-1!==me.indexOf(node)&&node.isExpanded()||node===me.getRoot()&&!me.getRootVisible())&&(Ext.suspendLayouts(),me.onNodeCollapse(node,childNodes),me.onNodeExpand(node,childNodes),Ext.resumeLayouts(!0)),me.resumeAutoSync(me.autoSync)},applyRoot:function(newRoot){var Model=this.getModel(),idProperty=Model.prototype.idProperty,defaultRootId=this.getDefaultRootId();return newRoot&&!newRoot.isNode&&(newRoot=Ext.apply({text:this.getDefaultRootText(),root:!0,isFirst:!0,isLast:!0,depth:0,index:0,parentId:null,allowDrag:!1},newRoot),defaultRootId&&void 0===newRoot[idProperty]&&(newRoot[idProperty]=defaultRootId),newRoot=new Model(newRoot)),newRoot},updateRoot:function(newRoot,oldRoot){var oldOwner,toRemove,me=this,initial=!oldRoot;if(me.byIdMap={},me.getTrackRemoved(),me.suspendEvent("add","remove"),oldRoot&&oldRoot.isModel&&(toRemove=me.getRootVisible()?[oldRoot]:oldRoot.childNodes,me.beforeNodeRemove(null,toRemove),oldRoot.set("root",!1),me.onNodeRemove(null,toRemove),oldRoot.fireEvent("remove",null,oldRoot,!1),oldRoot.fireEvent("rootchange",null),oldRoot.clearListeners(),oldRoot.store=oldRoot.treeStore=null),me.getData().clear(),newRoot)if(!1===newRoot.fireEventArgs("beforeappend",[null,newRoot]))newRoot=null;else{if(oldOwner=newRoot.parentNode){if(!oldOwner.removeChild(newRoot,!1,!1,oldOwner.getTreeStore()===me))return}else(oldOwner=newRoot.getTreeStore())&&oldOwner!==me&&newRoot===oldOwner.getRoot()&&oldOwner.setRoot(null);newRoot.store=newRoot.treeStore=me,newRoot.set("root",!0),newRoot.updateInfo(!0,{isFirst:!0,isLast:!0,depth:0,index:0,parentId:null}),me.registerNode(newRoot,!0),newRoot.fireEvent("append",null,newRoot,!1),newRoot.fireEvent("rootchange",newRoot),me.onNodeAppend(null,newRoot,0),newRoot.phantom=!0}me.fireEvent("rootchange",newRoot,oldRoot),newRoot&&(me.getAutoLoad()||newRoot.isExpanded())?newRoot.isLoaded()?(me.onNodeExpand(newRoot,newRoot.childNodes),me.fireEvent("datachanged",me),me.fireEvent("refresh",me)):(newRoot.data.expanded=!1,newRoot.expand(!1,function(){me.fireEvent("datachanged",me),me.fireEvent("refresh",me)})):initial||(me.fireEvent("datachanged",me),me.fireEvent("refresh",me)),me.resumeEvent("add","remove")},getNodeById:function(id){return this.byIdMap[id]||null},findNode:function(property,value,startsWith,endsWith,ignoreCase){if(Ext.isEmpty(value,!1))return null;if(value===this.model.idProperty&&arguments.length<3)return this.byIdMap[value];var regex=Ext.String.createRegex(value,startsWith,endsWith,ignoreCase),result=null;return Ext.Object.eachValue(this.byIdMap,function(node){if(node&&regex.test(node.get(property)))return result=node,!1}),result},load:function(options){var node=options&&options.node;if(!node&!(node=this.getRoot()))node=this.setRoot({expanded:!0});else if(!node.isLoading())return this.callParent([options])},flushLoad:function(){var node,callback,scope,isReload,operation,doClear,me=this,options=me.pendingLoadOptions,clearOnLoad=me.getClearOnLoad();if(me.clearLoadTask(),options)return isReload=(node=options.node||me.getRoot())&&node.isRoot()&&node.isLoaded()&&clearOnLoad,callback=options.callback,scope=options.scope,options.params=options.params||{},node.data.expanded&&!isReload&&(node.data.loaded=!1,clearOnLoad&&(node.data.expanded=!1),options.callback=function(loadedNodes,operation,success){clearOnLoad||node.collapse(),node.expand(),Ext.callback(callback,scope,[loadedNodes,operation,success])}),options.id=node.getId(),options=Ext.apply({filters:me.getFilters().items,sorters:me.getSorters().items,node:options.node||node,internalScope:me,internalCallback:me.onProxyLoad},options),me.lastOptions=Ext.apply({},options),options.isReload=isReload,operation=me.createOperation("read",options),!1!==me.fireEvent("beforeload",me,operation)&&(me.loading=!0,isReload?(me.getClearRemovedOnLoad()&&(me.removedNodes.length=0),me.unregisterNode(node,!0),doClear=!(node.childNodes.length=0)):clearOnLoad&&(me.getTrackRemoved()&&me.getClearRemovedOnLoad()&&me.clearRemoved(node),node.removeAll(!1)),me.loading&&node&&node.set("loading",!0),doClear&&(me.clearData(!0),me.getRootVisible()&&(me.suspendEvents(),me.add(node),me.resumeEvents())),operation.execute()),me},onProxyLoad:function(operation){var me=this,options=operation.initialConfig,successful=operation.wasSuccessful(),records=operation.getRecords(),node=options.node,isReload=options.isReload,scope=operation.getScope()||me,args=[records,operation,successful];me.destroyed||(me.loading=!1,node.set("loading",!1),successful&&(++me.loadCount,me.getClearOnLoad()||(records=me.cleanRecords(node,records)),me.getParentIdProperty()&&(records=me.treeify(node,records)),isReload&&me.suspendEvent("add","update"),records=me.fillNode(node,records)),isReload?(me.resumeEvent("add","update"),me.callObservers("BeforePopulate"),me.fireEvent("datachanged",me),me.fireEvent("refresh",me),me.callObservers("AfterPopulate")):Ext.callback(options.onChildNodesAvailable,scope,args),me.fireEvent("load",me,records,successful,operation,node))},clearRemoved:function(node){var removedNode,targetNode,targetId,me=this,removed=me.removedNodes,id=node.getId(),removedLength=removed.length,i=removedLength,recordsToClear={},newRemoved=[],removedHash={};if(node!==me.getRoot()){for(;i--;)removedHash[(removedNode=removed[i]).getId()]=removedNode;for(i=removedLength;i--;){for(targetNode=removedNode=removed[i];targetNode&&targetNode.getId()!==id;)targetId=targetNode.get("parentId")||targetNode.get("lastParentId"),targetNode=targetNode.parentNode||me.getNodeById(targetId)||removedHash[targetId];targetNode&&(recordsToClear[removedNode.getId()]=removedNode)}for(i=0;i<removedLength;i++)recordsToClear[(removedNode=removed[i]).getId()]||newRemoved.push(removedNode);me.removedNodes=newRemoved}else me.removedNodes.length=0},fillNode:function(node,newNodes){var newNodeCount=newNodes?newNodes.length:0;return++this.bulkUpdate,newNodeCount&&this.setupNodes(newNodes),1===this.bulkUpdate?node.set("loaded",!0):node.data.loaded=!0,newNodes.length&&node.appendChild(newNodes,void 0,!0),--this.bulkUpdate,newNodes},setupNodes:function(newNodes){var node1,node2,i,filterFn,me=this,sorters=me.getSorters(),needsIndexSort=!1,newNodeCount=newNodes.length,performLocalSort=me.sortOnLoad&&1<newNodeCount&&!me.getRemoteSort()&&me.getFolderSort()||sorters.length;for(me.needsLocalFilter()&&(filterFn=me.getFilters().getFilterFn(),newNodes[0].set("visible",filterFn(newNodes[0]))),i=1;i<newNodeCount;i++)node1=newNodes[i],node2=newNodes[i-1],filterFn&&node1.set("visible",filterFn(node1)),needsIndexSort=node1.data.index!==node2.data.index;performLocalSort?(me.needsIndexSort=!0,Ext.Array.sort(newNodes,me.getSortFn()),me.needsIndexSort=!1):needsIndexSort&&Ext.Array.sort(newNodes,me.sortByIndex)},beginFill:function(){var me=this;me.fillCount++||(me.beginUpdate(),me.suspendEvent("add","update"),me.suspendAutoSync(),me.fillArray=[])},endFill:function(parent,nodes){var i,len,index,me=this,fillArray=me.fillArray;if(fillArray.push(nodes),!--me.fillCount){for(me.resumeAutoSync(),me.resumeEvent("add","update"),i=0,len=fillArray.length;i<len;i++)-1!==(index=me.indexOf(fillArray[i][0]))&&me.fireEvent("add",me,fillArray[i],index);me.fillArray=null,me.endUpdate()}},sortByIndex:function(node1,node2){return node1.data.index-node2.data.index},onIdChanged:function(node,oldId,newId){var i,childNodes=node.childNodes,len=childNodes&&childNodes.length;for(this.callParent(arguments),delete this.byIdMap[oldId],this.byIdMap[newId]=node,i=0;i<len;i++)childNodes[i].set("parentId",newId)},treeify:function(parentNode,records){var i,node,parentId,parent,id,children,loadParentNodeId=parentNode.getId(),parentIdProperty=this.getParentIdProperty(),len=records.length,result=[],nodeMap={};for(i=0;i<len;i++)nodeMap[(node=records[i]).id]=node;for(i=0;i<len;i++)!(parentId=(node=records[i]).data[parentIdProperty])&&0!==parentId||parentId===loadParentNodeId?result.push(node):((parent=nodeMap[parentId]).$children=parent.$children||[],parent.$children.push(node));for(id in nodeMap)(children=(node=nodeMap[id]).$children)&&(delete node.$children,this.setupNodes(children),node.appendChild(children)),this.registerNode(node);return this.setupNodes(result),result},cleanRecords:function(node,records){for(var rec,nodeHash={},childNodes=node.childNodes,i=0,len=childNodes.length,out=[];i<len;++i)nodeHash[childNodes[i].getId()]=!0;for(i=0,len=records.length;i<len;++i)nodeHash[(rec=records[i]).getId()]||out.push(rec);return out},removeAll:function(){this.suspendEvents(),this.setRoot(null),this.resumeEvents(),this.callParent()},doSort:function(sorterFn){var me=this;me.getRemoteSort()?me.load():(me.tree.sort(sorterFn,!0),me.fireEvent("datachanged",me),me.fireEvent("refresh",me)),me.fireEvent("sort",me,me.sorters.getRange())},filterVisible:function(node){return node.get("visible")},isVisible:function(node){for(var parentNode=node.parentNode,visible=node.data.visible,root=this.getRoot();visible&&parentNode;)visible=parentNode.data.expanded&&parentNode.data.visible,parentNode=parentNode.parentNode;return visible&&!(node===root&&!this.getRootVisible())},commitChanges:function(){var removed=this.removedNodes;removed&&(removed.length=0),this.callParent()},getRootNode:function(){return this.getRoot()},setRootNode:function(root){return this.setRoot(root),this.getRoot()},privates:{getRawRemovedRecords:function(){return this.removedNodes},recordCreator:function(data,Model){return new Model(data)},doFilter:function(node){var root=this.getRoot(),filterFn=this.getFilters().getFilterFn();this.filterNodes(root,node,filterFn)},filterNodes:function(root,node,filterFn){var match,i,childNodes=node.childNodes,len=childNodes&&childNodes.length;if(len)for(i=0;i<len;++i)this.filterNodes(root,childNodes[i],filterFn);return match=node===root||filterFn(node),node.set("visible",match,this._silentOptions),match},needsLocalFilter:function(){return!this.getRemoteFilter()&&this.getFilters().length},onRemoteFilterSet:function(filters,remoteFilter){this.getData().setFilters(null),filters&&filters.on("endupdate",this.onFilterEndUpdate,this)},onRemoteSortSet:function(sorters,remoteSort){this.getData().setSorters(null),sorters&&sorters.on("endupdate",this.onSorterEndUpdate,this)}},deprecated:{5:{properties:{tree:null}}}}),Ext.define("Ext.data.Validation",{extend:Ext.data.Model,isValidation:!0,syncGeneration:0,attach:function(record){this.record=record,delete this.data.id},getValidation:function(){return null},isValid:function(){return this.syncGeneration!==this.record.generation&&this.refresh(),!this.dirty},refresh:function(force){var defaultMessage,currentValue,error,field,i,len,msg,val,name,me=this,data=me.data,record=me.record,fields=record.fields,generation=record.generation,recordData=record.data,sep=record.validationSeparator,values=null;if(force||me.syncGeneration!==generation){for(me.syncGeneration=generation,i=0,len=fields.length;i<len;++i)val=recordData[name=(field=fields[i]).name],defaultMessage=field.defaultInvalidMessage,error=0,name in data?currentValue=data[name]:data[name]=currentValue=!0,field.validate!==Ext.emptyFn&&!0!==(msg=field.validate(val,sep,null,record))&&(error=msg||defaultMessage),(error=error||!0)!==currentValue&&((values=values||{})[name]=error);values&&me.set(values)}}}),Ext.define("Ext.dom.Helper",function(){var camelCaseRe,cache,bbValues=["BeforeBegin","previousSibling"],aeValues=["AfterEnd","nextSibling"],bb_ae_PositionHash={beforebegin:bbValues,afterend:aeValues},fullPositionHash={beforebegin:bbValues,afterend:aeValues,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:!0,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:(camelCaseRe=/([a-z])([A-Z])/g,cache={},function(s){return cache[s]||(cache[s]=s.replace(camelCaseRe,decamel))}),generateMarkup:function(spec,buffer){var attr,val,tag,i,closeTags,me=this,specType=typeof spec;if("string"==specType||"number"==specType)buffer.push(spec);else if(Ext.isArray(spec))for(i=0;i<spec.length;i++)spec[i]&&me.generateMarkup(spec[i],buffer);else{for(attr in tag=spec.tag||"div",buffer.push("<",tag),spec)spec.hasOwnProperty(attr)&&(void 0===(val=spec[attr])||me.confRe.test(attr)||("object"==typeof val?(buffer.push(" ",attr,'="'),me.generateStyles(val,buffer,!0).push('"')):buffer.push(" ",me.attributeTransform[attr]||attr,'="',val,'"')));me.emptyTags.test(tag)?buffer.push("/>"):(buffer.push(">"),(val=spec.tpl)&&val.applyOut(spec.tplData,buffer),(val=spec.html)&&buffer.push(val),(val=spec.cn||spec.children)&&me.generateMarkup(val,buffer),closeTags=me.closeTags,buffer.push(closeTags[tag]||(closeTags[tag]="</"+tag+">")))}return buffer},generateStyles:function(styles,buffer,encode){var name,val,a=buffer||[];for(name in styles)styles.hasOwnProperty(name)&&(val=styles[name],name=this.decamelizeName(name),encode&&Ext.String.hasHtmlCharacters(val)&&(val=Ext.String.htmlEncode(val)),a.push(name,":",val,";"));return buffer||a.join("")},markup:function(spec){return"string"==typeof spec?spec:this.generateMarkup(spec,[]).join("")},applyStyles:function(el,styles){Ext.fly(el).applyStyles(styles)},createContextualFragment:function(html){var length,childNodes,div=this.detachedDiv,fragment=document.createDocumentFragment();for(div.innerHTML=html,length=(childNodes=div.childNodes).length;length--;)fragment.appendChild(childNodes[0]);return fragment},createDom:function(o,parentNode){var child,markup=this.markup(o),div=this.detachedDiv;return div.innerHTML=markup,child=div.firstChild,Ext.supports.ChildContentClearedWhenSettingInnerHTML?child.cloneNode(!0):child},insertHtml:function(where,el,html){var hashVal,range,rangeEl,setStart,frag;if(where=where.toLowerCase(),el.insertAdjacentHTML)return this.ieInsertHtml&&(frag=this.ieInsertHtml(where,el,html))?frag:(hashVal=fullPositionHash[where])?(el.insertAdjacentHTML(hashVal[0],html),el[hashVal[1]]):void 0;if(3===el.nodeType&&(where="beforeend"===(where="afterbegin"===where?"beforebegin":where)?"afterend":where),range=Ext.supports.CreateContextualFragment?el.ownerDocument.createRange():void 0,setStart="setStart"+(this.endRe.test(where)?"After":"Before"),bb_ae_PositionHash[where])return frag=range?(range[setStart](el),range.createContextualFragment(html)):this.createContextualFragment(html),el.parentNode.insertBefore(frag,"beforebegin"===where?el:el.nextSibling),el[("beforebegin"===where?"previous":"next")+"Sibling"];if(rangeEl=("afterbegin"===where?"first":"last")+"Child",el.firstChild){if(range)try{range[setStart](el[rangeEl]),frag=range.createContextualFragment(html)}catch(e){frag=this.createContextualFragment(html)}else frag=this.createContextualFragment(html);"afterbegin"===where?el.insertBefore(frag,el.firstChild):el.appendChild(frag)}else el.innerHTML=html;return el[rangeEl]},insertBefore:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"beforebegin")},insertAfter:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"afterend")},insertFirst:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"afterbegin")},append:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"beforeend")},overwrite:function(el,html,returnElement){var newNode;return el=Ext.getDom(el),html=this.markup(html),this.ieOverwrite&&(newNode=this.ieOverwrite(el,html)),newNode||(el.innerHTML=html,newNode=el.firstChild),returnElement?Ext.get(newNode):newNode},doInsert:function(el,o,returnElement,where){var newNode;return"innerHTML"in(el=el.dom||Ext.getDom(el))?newNode=this.insertHtml(where,el,this.markup(o)):(newNode=this.createDom(o,null),3===el.nodeType&&(where="beforeend"===(where="afterbegin"===where?"beforebegin":where)?"afterend":where),bb_ae_PositionHash[where]?el.parentNode.insertBefore(newNode,"beforebegin"===where?el:el.nextSibling):el.firstChild&&"afterbegin"===where?el.insertBefore(newNode,el.firstChild):el.appendChild(newNode)),returnElement?Ext.get(newNode):newNode},createTemplate:function(o){var html=this.markup(o);return new Ext.Template(html)},createHtml:function(spec){return this.markup(spec)}};function decamel(match,p1,p2){return p1+"-"+p2.toLowerCase()}}),Ext.define("Ext.overrides.dom.Helper",function(){var tableRe=/^(?:table|thead|tbody|tr|td)$/i,tableElRe=/td|tr|tbody|thead/i,ts="<table>",te="</table>",tbs=ts+"<tbody>",tbe="</tbody>"+te;return{override:"Ext.dom.Helper",ieInsertHtml:function(where,el,html){var frag=null;return Ext.isIE9m&&tableRe.test(el.tagName)&&(frag=this.insertIntoTable(el.tagName.toLowerCase(),where,el,html)),frag},ieOverwrite:function(el,html){if(Ext.isIE9m&&tableRe.test(el.tagName)){for(;el.firstChild;)el.removeChild(el.firstChild);if(html)return this.insertHtml("afterbegin",el,html)}},ieTable:function(depth,openingTags,htmlContent,closingTags){var ns,nx,i=-1,el=this.detachedDiv;for(el.innerHTML=[openingTags,htmlContent,closingTags].join("");++i<depth;)el=el.firstChild;if(ns=el.nextSibling)for(ns=el,el=document.createDocumentFragment();ns;)nx=ns.nextSibling,el.appendChild(ns),ns=nx;return el},insertIntoTable:function(tag,where,destinationEl,html){var node,before,bb="beforebegin"===where,ab="afterbegin"===where,be="beforeend"===where,ae="afterend"===where;return"td"===tag&&(ab||be)||!tableElRe.test(tag)&&(bb||ae)?null:(before=bb?destinationEl:ae?destinationEl.nextSibling:ab?destinationEl.firstChild:null,(bb||ae)&&(destinationEl=destinationEl.parentNode),node="td"===tag||"tr"===tag&&(be||ab)?this.ieTable(4,"<table><tbody><tr>",html,"</tr></tbody></table>"):("tbody"===tag||"thead"===tag)&&(be||ab)||"tr"===tag&&(bb||ae)?this.ieTable(3,tbs,html,tbe):this.ieTable(2,ts,html,te),destinationEl.insertBefore(node,before),node)}}}()),Ext.define("Ext.dom.GarbageCollector",{singleton:!0,interval:3e4,constructor:function(){var me=this;me.collect=Ext.Function.bind(me.collect,me),me.lastTime=Ext.now(),me.resume()},collect:function(){var eid,dom,el,t,isGarbage,cache=Ext.cache;for(eid in cache)if(cache.hasOwnProperty(eid)&&!(el=cache[eid]).skipGarbageCollection){dom=el.dom;try{isGarbage=Ext.isGarbage(dom)}catch(e){delete cache[eid];continue}isGarbage&&el&&el.dom&&el.collect()}if(Ext.isIE9m){for(eid in t={},cache)cache.hasOwnProperty(eid)&&(t[eid]=cache[eid]);Ext.cache=Ext.dom.Element.cache=t}this.lastTime=Ext.now()},pause:function(){clearTimeout(this.timerId)},resume:function(){var me=this,lastTime=me.lastTime;Ext.enableGarbageCollector&&Ext.now()-lastTime>me.interval&&me.collect(),me.timerId=Ext.interval(me.collect,me.interval)}}),Ext.define("Ext.event.gesture.Recognizer",{mixins:[Ext.mixin.Identifiable],priority:0,handledEvents:[],config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(config){this.initConfig(config),Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,onTouchCancel:Ext.emptyFn,fail:function(){return!1},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)},reset:Ext.emptyFn,debugHooks:{$enabled:!1,fail:function(msg){return Ext.log.info(this.$className+" Gesture Failed: "+msg),!1}}}),Ext.define("Ext.event.gesture.SingleTouch",{extend:Ext.event.gesture.Recognizer,inheritableStatics:{NOT_SINGLE_TOUCH:"Not Single Touch",TOUCH_MOVED:"Touch Moved",EVENT_CANCELED:"Event Canceled"},onTouchStart:function(e){if(1<e.touches.length)return this.fail(this.self.NOT_SINGLE_TOUCH)},onTouchCancel:function(){return!1}}),Ext.define("Ext.event.gesture.DoubleTap",{extend:Ext.event.gesture.SingleTouch,priority:300,inheritableStatics:{DIFFERENT_TARGET:"Different Target"},config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(e){var lastStartPoint,me=this;if(!1===me.callParent(arguments))return!1;lastStartPoint=me.lastStartPoint=e.changedTouches[0].point,me.startPoint=me.startPoint||lastStartPoint,me.startTime=e.time,clearTimeout(me.singleTapTimer)},onTouchMove:function(e){var me=this,point=e.changedTouches[0].point;if(Math.abs(point.getDistanceTo(me.lastStartPoint))>=me.getMoveDistance())return me.startPoint=null,me.fail(me.self.TOUCH_MOVED)},onTouchEnd:function(e){var duration,me=this,maxDuration=me.getMaxDuration(),time=e.time,target=e.target,lastTapTime=me.lastTapTime,lastTarget=me.lastTarget,point=e.changedTouches[0].point;if(me.lastTapTime=time,me.lastTarget=target,lastTapTime&&(duration=time-lastTapTime)<=maxDuration&&Math.abs(point.getDistanceTo(me.startPoint))<=me.getTapDistance())return target!==lastTarget?me.fail(me.self.DIFFERENT_TARGET):(me.lastTarget=null,me.lastTapTime=0,me.fire("doubletap",e,{touch:e.changedTouches[0],duration:duration}),void(me.startPoint=null));time-me.startTime>maxDuration?me.fireSingleTap(e):me.setSingleTapTimer(e)},setSingleTapTimer:function(e){var me=this;me.singleTapTimer=Ext.defer(function(){me.fireSingleTap(e)},me.getMaxDuration())},fireSingleTap:function(e,touch){this.fire("singletap",e,{touch:touch}),this.startPoint=null},reset:function(){var me=this;me.startTime=me.lastTapTime=0,me.lastStartPoint=me.startPoint=me.singleTapTimer=null}},function(DoubleTap){var gestures=Ext.manifest.gestures;DoubleTap.instance=new DoubleTap(gestures&&gestures.doubleTap)}),Ext.define("Ext.event.gesture.Drag",{extend:Ext.event.gesture.SingleTouch,priority:100,isStarted:!1,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){this.callParent(arguments),this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0}}},onTouchStart:function(e){if(!1===this.callParent(arguments))return this.isStarted&&null!==this.lastMoveEvent&&(this.lastMoveEvent.isStopped=!1,this.onTouchEnd(this.lastMoveEvent)),!1;this.startTime=e.time,this.startPoint=e.changedTouches[0].point},tryDragStart:function(e){var startPoint=this.startPoint,touch=e.changedTouches[0],point=touch.point,minDistance=this.getMinDistance(),info=this.info;Math.abs(point.getDistanceTo(startPoint))>=minDistance&&(this.isStarted=!0,this.previousPoint=this.lastPoint=point,this.resetInfo("x",e,touch),this.resetInfo("y",e,touch),info.time=e.time,this.fire("dragstart",e,info))},onTouchMove:function(e){if(this.isStarted||this.tryDragStart(e),this.isStarted){var touch=e.changedTouches[0],point=touch.point;this.lastPoint&&(this.previousPoint=this.lastPoint),this.lastPoint=point,this.lastMoveEvent=e,this.updateInfo("x",e,touch),this.updateInfo("y",e,touch),this.info.time=e.time,this.fire("drag",e,this.info)}},onAxisDragEnd:function(axis,info){var duration=info.time-info.previousTime[axis];0<duration&&(info.flick.velocity[axis]=(info[axis]-info.previous[axis])/duration)},resetInfo:function(axis,e,touch){var value=this.lastPoint[axis],startValue=this.startPoint[axis],delta=value-startValue,capAxis=axis.toUpperCase(),info=this.info;info.touch=touch,info.delta[axis]=delta,info.absDelta[axis]=Math.abs(delta),info.previousTime[axis]=this.startTime,info.previous[axis]=startValue,info[axis]=value,info.direction[axis]=0,info["start"+capAxis]=this.startPoint[axis],info["previous"+capAxis]=info.previous[axis],info["page"+capAxis]=info[axis],info["delta"+capAxis]=info.delta[axis],info["absDelta"+capAxis]=info.absDelta[axis],info["previousDelta"+capAxis]=0,info.startTime=this.startTime},updateInfo:function(axis,e,touch){var me=this,value=me.lastPoint[axis],previousValue=me.previousPoint[axis],startValue=me.startPoint[axis],delta=value-startValue,info=me.info,direction=info.direction,capAxis=axis.toUpperCase(),previousFlick=info.previous[axis];info.touch=touch,info.delta[axis]=delta,info.absDelta[axis]=Math.abs(delta),value!==previousFlick&&value!==info[axis]&&(info.previous[axis]=info[axis],info.previousTime[axis]=info.time),previousValue<(info[axis]=value)?direction[axis]=1:value<previousValue&&(direction[axis]=-1),info["start"+capAxis]=startValue,info["previous"+capAxis]=info.previous[axis],info["page"+capAxis]=info[axis],info["delta"+capAxis]=info.delta[axis],info["absDelta"+capAxis]=info.absDelta[axis],info["previousDelta"+capAxis]=info.previous[axis]-startValue,info.startTime=me.startTime},onTouchEnd:function(e){this.doEnd(e)},onTouchCancel:function(e){return this.doEnd(e,!0),!1},doEnd:function(e,isCancel){if(this.isStarted||this.tryDragStart(e),this.isStarted){var touch=e.changedTouches[0],point=touch.point,info=this.info;this.isStarted=!1,this.lastPoint=point,this.updateInfo("x",e,touch),this.updateInfo("y",e,touch),info.time=e.time,this.onAxisDragEnd("x",info),this.onAxisDragEnd("y",info),this.fire(isCancel?"dragcancel":"dragend",e,info),this.startPoint=null,this.previousPoint=null,this.lastPoint=null,this.lastMoveEvent=null}},reset:function(){var me=this;me.isStarted=me.lastPoint=me.startPoint=me.previousPoint=me.lastPoint=me.lastMoveEvent=null,me.initInfo()}},function(Drag){var gestures=Ext.manifest.gestures;Drag.instance=new Drag(gestures&&gestures.drag)}),Ext.define("Ext.event.gesture.Swipe",{extend:Ext.event.gesture.SingleTouch,priority:500,handledEvents:["swipestart","swipe","swipecancel"],inheritableStatics:{MAX_OFFSET_EXCEEDED:"Max Offset Exceeded",MAX_DURATION_EXCEEDED:"Max Duration Exceeded",DISTANCE_NOT_ENOUGH:"Distance Not Enough"},config:{minDistance:80,maxOffset:35,maxDuration:1e3},onTouchStart:function(e){if(!1===this.callParent(arguments))return!1;var touch=e.changedTouches[0];this.startTime=e.time,this.isHorizontal=!0,this.isVertical=!0,this.startX=touch.pageX,this.startY=touch.pageY},onTouchMove:function(e){var direction,distance,touch=e.changedTouches[0],x=touch.pageX,y=touch.pageY,deltaX=x-this.startX,deltaY=y-this.startY,absDeltaX=Math.abs(x-this.startX),absDeltaY=Math.abs(y-this.startY),duration=e.time-this.startTime,minDistance=this.getMinDistance();return e.time-this.startTime>this.getMaxDuration()?this.fail(this.self.MAX_DURATION_EXCEEDED):(this.isHorizontal&&absDeltaY>this.getMaxOffset()&&(this.isHorizontal=!1),this.isVertical&&absDeltaX>this.getMaxOffset()&&(this.isVertical=!1),this.isVertical&&this.isHorizontal||(this.isHorizontal&&absDeltaX<minDistance?(direction=deltaX<0?"left":"right",distance=absDeltaX):this.isVertical&&absDeltaY<minDistance&&(direction=deltaY<0?"up":"down",distance=absDeltaY)),direction&&!this.started&&(this.started=!0,this.fire("swipestart",e,{touch:touch,direction:direction,distance:distance,duration:duration})),this.isHorizontal||this.isVertical?void 0:this.fail(this.self.MAX_OFFSET_EXCEEDED))},onTouchEnd:function(e){if(!1===this.onTouchMove(e))return!1;var direction,distance,touch=e.changedTouches[0],x=touch.pageX,y=touch.pageY,deltaX=x-this.startX,deltaY=y-this.startY,absDeltaX=Math.abs(deltaX),absDeltaY=Math.abs(deltaY),minDistance=this.getMinDistance(),duration=e.time-this.startTime;if(this.isVertical&&absDeltaY<minDistance&&(this.isVertical=!1),this.isHorizontal&&absDeltaX<minDistance&&(this.isHorizontal=!1),this.isHorizontal)direction=deltaX<0?"left":"right",distance=absDeltaX;else{if(!this.isVertical)return this.fail(this.self.DISTANCE_NOT_ENOUGH);direction=deltaY<0?"up":"down",distance=absDeltaY}this.started=!1,this.fire("swipe",e,{touch:touch,direction:direction,distance:distance,duration:duration})},onTouchCancel:function(e){return this.fire("swipecancel",e),!1},reset:function(){var me=this;me.startTime=me.isHorizontal=me.isVertical=me.startX=me.startY=null}},function(Swipe){var gestures=Ext.manifest.gestures;Swipe.instance=new Swipe(gestures&&gestures.swipe)}),Ext.define("Ext.event.gesture.EdgeSwipe",{extend:Ext.event.gesture.Swipe,priority:800,handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],inheritableStatics:{NOT_NEAR_EDGE:"Not Near Edge"},config:{minDistance:60},onTouchStart:function(e){if(!1===this.callParent(arguments))return!1;var touch=e.changedTouches[0];this.started=!1,this.direction=null,this.isHorizontal=!0,this.isVertical=!0,this.startX=touch.pageX,this.startY=touch.pageY},onTouchMove:function(e){var direction,distance,touch=e.changedTouches[0],x=touch.pageX,y=touch.pageY,deltaX=x-this.startX,deltaY=y-this.startY,absDeltaY=Math.abs(y-this.startY),absDeltaX=Math.abs(x-this.startX),minDistance=this.getMinDistance(),maxOffset=this.getMaxOffset(),duration=e.time-this.startTime,elementWidth=Ext.Viewport&&Ext.Element.getViewportWidth(),elementHeight=Ext.Viewport&&Ext.Element.getViewportHeight();if(this.isVertical&&maxOffset<absDeltaX&&(this.isVertical=!1),this.isHorizontal&&maxOffset<absDeltaY&&(this.isHorizontal=!1),this.isVertical&&this.isHorizontal&&(absDeltaX<absDeltaY?this.isHorizontal=!1:this.isVertical=!1),this.isHorizontal?(direction=deltaX<0?"left":"right",distance=deltaX):this.isVertical&&(direction=deltaY<0?"up":"down",distance=deltaY),"up"===(direction=this.direction||(this.direction=direction))?distance=-1*deltaY:"left"===direction&&(distance=-1*deltaX),!(this.distance=distance))return this.fail(this.self.DISTANCE_NOT_ENOUGH);if(this.started)this.fire("edgeswipe",e,{touch:touch,direction:direction,distance:distance,duration:duration});else{if("right"===direction&&this.startX>minDistance)return this.fail(this.self.NOT_NEAR_EDGE);if("down"===direction&&this.startY>minDistance)return this.fail(this.self.NOT_NEAR_EDGE);if("left"===direction&&elementWidth-this.startX>minDistance)return this.fail(this.self.NOT_NEAR_EDGE);if("up"===direction&&elementHeight-this.startY>minDistance)return this.fail(this.self.NOT_NEAR_EDGE);this.started=!0,this.startTime=e.time,this.fire("edgeswipestart",e,{touch:touch,direction:direction,distance:distance,duration:duration})}},onTouchEnd:function(e){var duration;!1!==this.onTouchMove(e)&&(duration=e.time-this.startTime,this.fire("edgeswipeend",e,{touch:e.changedTouches[0],direction:this.direction,distance:this.distance,duration:duration}))},onTouchCancel:function(e){return this.fire("edgeswipecancel",e,{touch:e.changedTouches[0]}),!1},reset:function(){var me=this;me.started=me.direction=me.isHorizontal=me.isVertical=me.startX=me.startY=me.startTime=me.distance=null}},function(EdgeSwipe){var gestures=Ext.manifest.gestures;EdgeSwipe.instance=new EdgeSwipe(gestures&&gestures.edgeSwipe)}),Ext.define("Ext.event.gesture.LongPress",{extend:Ext.event.gesture.SingleTouch,priority:400,inheritableStatics:{DURATION_NOT_ENOUGH:"Duration Not Enough"},config:{moveDistance:8,minDuration:1e3},handledEvents:["longpress","taphold"],fireLongPress:function(e){this.fire("longpress",e,{touch:e.changedTouches[0],duration:this.getMinDuration()}),this.isLongPress=!0},onTouchStart:function(e){if(!1===this.callParent(arguments))return!1;this.startPoint=e.changedTouches[0].point,this.isLongPress=!1,this.setLongPressTimer(e)},setLongPressTimer:function(e){var me=this;me.timer=Ext.defer(function(){me.fireLongPress(e)},me.getMinDuration())},onTouchMove:function(e){var point=e.changedTouches[0].point;if(Math.abs(point.getDistanceTo(this.startPoint))>=this.getMoveDistance())return this.fail(this.self.TOUCH_MOVED)},onTouchEnd:function(){if(!this.isLongPress)return this.fail(this.self.DURATION_NOT_ENOUGH)},fail:function(){return clearTimeout(this.timer),this.callParent(arguments)},reset:function(){this.isLongPress=this.startPoint=null},fire:function(eventName){if("longpress"===eventName){var args=Array.prototype.slice.call(arguments);args[0]="taphold",this.fire.apply(this,args)}return this.callParent(arguments)}},function(LongPress){var gestures=Ext.manifest.gestures;LongPress.instance=new LongPress(gestures&&gestures.longPress)}),Ext.define("Ext.event.gesture.MultiTouch",{extend:Ext.event.gesture.Recognizer,requiredTouchesCount:2,isTracking:!1,isStarted:!1,onTouchStart:function(e){var requiredTouchesCount=this.requiredTouchesCount,touchesCount=e.touches.length;touchesCount===requiredTouchesCount?this.start(e):requiredTouchesCount<touchesCount&&this.end(e)},onTouchEnd:function(e){this.end(e)},onTouchCancel:function(e){return this.end(e,!0),!1},start:function(){this.isTracking||(this.isTracking=!0,this.isStarted=!1)},end:function(e,isCancel){this.isTracking&&(this.isTracking=!1,this.isStarted&&(this.isStarted=!1,this[isCancel?"fireCancel":"fireEnd"](e)))},reset:function(){this.isTracking=this.isStarted=!1}}),Ext.define("Ext.event.gesture.Pinch",{extend:Ext.event.gesture.MultiTouch,priority:600,handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(e){if(this.isTracking){var firstPoint,secondPoint,distance,touches=e.touches;firstPoint=touches[0].point,secondPoint=touches[1].point,0!==(distance=firstPoint.getDistanceTo(secondPoint))&&(this.isStarted?this.fire("pinch",e,{touches:touches,distance:distance,scale:distance/this.startDistance}):(this.isStarted=!0,this.startDistance=distance,this.fire("pinchstart",e,{touches:touches,distance:distance,scale:1})))}},fireEnd:function(e){this.fire("pinchend",e)},fireCancel:function(e){this.fire("pinchcancel",e)},fail:function(){return this.callParent(arguments)},reset:function(){this.lastTouches=null,this.startDistance=0,this.callParent()}},function(Pinch){var gestures=Ext.manifest.gestures;Pinch.instance=new Pinch(gestures&&gestures.pinch)}),Ext.define("Ext.event.gesture.Rotate",{extend:Ext.event.gesture.MultiTouch,priority:700,handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(e){if(this.isTracking){var firstPoint,secondPoint,angle,nextAngle,previousAngle,diff,touches=e.touches,lastAngle=this.lastAngle;firstPoint=touches[0].point,secondPoint=touches[1].point,angle=firstPoint.getAngleTo(secondPoint),null!==lastAngle&&(diff=Math.abs(lastAngle-angle),nextAngle=angle+360,previousAngle=angle-360,Math.abs(nextAngle-lastAngle)<diff?angle=nextAngle:Math.abs(previousAngle-lastAngle)<diff&&(angle=previousAngle)),this.lastAngle=angle,this.isStarted?this.fire("rotate",e,{touches:touches,angle:angle,rotation:angle-this.startAngle}):(this.isStarted=!0,this.startAngle=angle,this.fire("rotatestart",e,{touches:touches,angle:angle,rotation:0})),this.lastTouches=Ext.Array.clone(touches)}},fireEnd:function(e){this.lastAngle=null,this.fire("rotateend",e)},fireCancel:function(e){this.lastAngle=null,this.fire("rotatecancel",e)},reset:function(){this.lastTouches=this.lastAngle=this.startAngle=null,this.callParent()}},function(Rotate){var gestures=Ext.manifest.gestures;Rotate.instance=new Rotate(gestures&&gestures.rotate)}),Ext.define("Ext.event.gesture.Tap",{extend:Ext.event.gesture.SingleTouch,priority:200,handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(e){if(!1===this.callParent([e]))return!1;this.startPoint=e.changedTouches[0].point},onTouchMove:function(e){var touch=e.changedTouches[0],point=touch.point;if(Math.abs(point.getDistanceTo(this.startPoint))>=this.getMoveDistance())return this.fire("tapcancel",e,{touch:touch}),this.fail(this.self.TOUCH_MOVED)},onTouchEnd:function(e){this.fire("tap",e,{touch:e.changedTouches[0]})},onTouchCancel:function(e){return this.fire("tapcancel",e,{touch:e.changedTouches[0]}),!1},reset:function(){this.startPoint=null}},function(Tap){var gestures=Ext.manifest.gestures;Tap.instance=new Tap(gestures&&gestures.tap)}),Ext.define("Ext.event.publisher.Focus",{extend:Ext.event.publisher.Dom,type:"focus",handledEvents:["focusenter","focusleave","focusmove"],handledDomEvents:["focusin","focusout"],doDelegatedEvent:function(e,invokeAfter){var relatedTarget;(e=this.callParent([e,!1]))&&("focusout"===e.type?null==e.relatedTarget&&this.processFocusIn(e,e.target,document.body,invokeAfter):(relatedTarget=e.relatedTarget,this.processFocusIn(e,null!=relatedTarget&&relatedTarget.tagName?relatedTarget:document.body,e.target,invokeAfter)))},processFocusIn:function(e,fromElement,toElement,invokeAfter){var commonAncestor,node,event,focusEnterEvent,fromFly,toFly,me=this,targets=[];if(fromFly=Ext.fly(fromElement),toFly=Ext.fly(toElement),!(fromFly&&fromFly.isFocusSuspended()||toFly&&toFly.isFocusSuspended())){for(node=fromElement,commonAncestor=Ext.dom.Element.getCommonAncestor(toElement,fromElement,!0);node&&node!==commonAncestor;node=node.parentNode)targets.push(node);if(!targets.length||(event=me.createSyntheticEvent("focusleave",e,fromElement,toElement),me.publish("focusleave",targets,event),!event.isStopped)){for(targets.length=0,node=toElement;node!==commonAncestor;node=node.parentNode)targets.push(node);focusEnterEvent=me.createSyntheticEvent("focusenter",e,toElement,fromElement),targets.length&&(me.publish("focusenter",targets,focusEnterEvent),focusEnterEvent.isStopped)||(targets=me.getPropagatingTargets(commonAncestor)).length&&(event=me.createSyntheticEvent("focusmove",e,toElement,fromElement),me.publish("focusmove",targets,event),event.isStopped)||(invokeAfter&&me.afterEvent(e),Ext.GlobalEvents.fireEvent("focus",{event:focusEnterEvent,toElement:toElement,fromElement:fromElement}))}}},createSyntheticEvent:function(eventName,browserEvent,target,relatedTarget){var event=new Ext.event.Event(browserEvent);return event.type=eventName,event.relatedTarget=relatedTarget,event.target=target,event}},function(Focus){var focusTimeout;Focus.instance=new Focus,Ext.supports.FocusinFocusoutEvents||this.override({handledDomEvents:["focus","blur"],doDelegatedEvent:function(e,invokeAfter){var me=this;if(e=me.callSuper([e,!1]))if(clearTimeout(focusTimeout),focusTimeout=0,"blur"===e.type){var blurredEl=e.target===window?document.body:e.target;focusTimeout=setTimeout(function(){focusTimeout=0,me.processFocusIn(e,blurredEl,document.body,invokeAfter),Focus.previousActiveElement=null},0),e.target===window||e.target===document?Focus.previousActiveElement=null:Focus.previousActiveElement=e.target}else me.processFocusIn(e,Focus.previousActiveElement||document.body,e.target===window?document.body:e.target,invokeAfter)}})}),Ext.define("Ext.fx.State",{isAnimatable:{"background-color":!0,"background-image":!0,"background-position":!0,"border-bottom-color":!0,"border-bottom-width":!0,"border-color":!0,"border-left-color":!0,"border-left-width":!0,"border-right-color":!0,"border-right-width":!0,"border-spacing":!0,"border-top-color":!0,"border-top-width":!0,"border-width":!0,bottom:!0,color:!0,crop:!0,"font-size":!0,"font-weight":!0,height:!0,left:!0,"letter-spacing":!0,"line-height":!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"max-height":!0,"max-width":!0,"min-height":!0,"min-width":!0,opacity:!0,"outline-color":!0,"outline-offset":!0,"outline-width":!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,right:!0,"text-indent":!0,"text-shadow":!0,top:!0,"vertical-align":!0,visibility:!0,width:!0,"word-spacing":!0,"z-index":!0,zoom:!0,transform:!0},constructor:function(data){this.data={},this.set(data)},setConfig:function(data){return this.set(data),this},setRaw:function(data){return this.data=data,this},clear:function(){return this.setRaw({})},setTransform:function(name,value){var ln,key,data=this.data,isArray=Ext.isArray(value),transform=data.transform;if(transform=transform||(data.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}),"string"==typeof name)switch(name){case"translate":if(isArray){if(0==(ln=value.length))break;if(transform.translateX=value[0],1==ln)break;if(transform.translateY=value[1],2==ln)break;transform.translateZ=value[2]}else transform.translateX=value;break;case"rotate":if(isArray){if(0==(ln=value.length))break;if(transform.rotateX=value[0],1==ln)break;if(transform.rotateY=value[1],2==ln)break;transform.rotateZ=value[2]}else transform.rotate=value;break;case"scale":if(isArray){if(0==(ln=value.length))break;if(transform.scaleX=value[0],1==ln)break;if(transform.scaleY=value[1],2==ln)break;transform.scaleZ=value[2]}else transform.scaleX=value,transform.scaleY=value;break;case"skew":if(isArray){if(0==(ln=value.length))break;if(transform.skewX=value[0],1==ln)break;transform.skewY=value[1]}else transform.skewX=value;break;default:transform[name]=value}else for(key in name)name.hasOwnProperty(key)&&(value=name[key],this.setTransform(key,value))},set:function(name,value){var key,data=this.data;if("string"!=typeof name)for(key in name)value=name[key],"transform"===key?this.setTransform(value):data[key]=value;else"transform"===name?this.setTransform(value):data[name]=value;return this},unset:function(name){var data=this.data;return data.hasOwnProperty(name)&&delete data[name],this},getData:function(){return this.data}}),Ext.define("Ext.fx.animation.Abstract",{extend:Ext.Evented,isAnimation:!0,config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:!1,replacePrevious:!0},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\d\.]+)%$/,constructor:function(){return this.states={},this.callParent(arguments),this},applyElement:function(element){return Ext.get(element)},applyBefore:function(before,current){if(before)return Ext.factory(before,Ext.fx.State,current)},applyAfter:function(after,current){if(after)return Ext.factory(after,Ext.fx.State,current)},setFrom:function(from){return this.setState(this.STATE_FROM,from)},setTo:function(to){return this.setState(this.STATE_TO,to)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(states){var name,validNameRegex=this.stateNameRegex;for(name in states)validNameRegex.test(name)&&this.setState(name,states[name]);return this},getStates:function(){return this.states},updateCallback:function(callback){callback&&this.setOnEnd(callback)},end:function(){this.stop()},stop:function(){this.fireEvent("stop",this)},destroy:function(){this.stop(),this.callParent()},setState:function(name,state){var stateInstance,states=this.getStates();return(stateInstance=Ext.factory(state,Ext.fx.State,states[name]))&&(states[name]=stateInstance),this},getState:function(name){return this.getStates()[name]},getData:function(){var data,name,me=this,states=me.getStates(),statesData={},before=me.getBefore(),after=me.getAfter(),from=states[me.STATE_FROM],to=states[me.STATE_TO],fromData=from.getData(),toData=to.getData();for(name in states)states.hasOwnProperty(name)&&(data=states[name].getData(),statesData[name]=data);return{before:before?before.getData():{},after:after?after.getData():{},states:statesData,from:fromData,to:toData,duration:me.getDuration(),iteration:me.getIteration(),direction:me.getDirection(),easing:me.getEasing(),delay:me.getDelay(),onEnd:me.getOnEnd(),onBeforeEnd:me.getOnBeforeEnd(),onBeforeStart:me.getOnBeforeStart(),scope:me.getScope(),preserveEndState:me.getPreserveEndState(),replacePrevious:me.getReplacePrevious()}}}),Ext.define("Ext.fx.animation.Slide",{extend:Ext.fx.animation.Abstract,alternateClassName:"Ext.fx.animation.SlideIn",alias:["animation.slide","animation.slideIn"],config:{direction:"left",out:!1,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:!0,useCssTransform:!0},reverseDirectionMap:{up:"down",down:"up",left:"right",right:"left"},applyEasing:function(easing){return"auto"===easing?"ease-"+(this.getOut()?"in":"out"):easing},getContainerBox:function(){var box=this._containerBox;return"auto"===box&&(box=this.getElement().getParent().getBox()),box},getElementBox:function(){var box=this._elementBox;return this.getIsElementBoxFit()?this.getContainerBox():("auto"===box&&(box=this.getElement().getBox()),box)},getData:function(){var fromX,fromY,toX,toY,elementBox=this.getElementBox(),containerBox=this.getContainerBox(),box=elementBox||containerBox,from=this.getFrom(),to=this.getTo(),out=this.getOut(),offset=this.getOffset(),direction=this.getDirection(),useCssTransform=this.getUseCssTransform(),translateX=0,translateY=0;switch(this.getReverse()&&(direction=this.reverseDirectionMap[direction]),direction){case this.DIRECTION_UP:translateY=out?containerBox.top-box.top-box.height-offset:containerBox.bottom-box.bottom+box.height+offset;break;case this.DIRECTION_DOWN:translateY=out?containerBox.bottom-box.bottom+box.height+offset:containerBox.top-box.height-box.top-offset;break;case this.DIRECTION_RIGHT:translateX=out?containerBox.right-box.right+box.width+offset:containerBox.left-box.left-box.width-offset;break;case this.DIRECTION_LEFT:translateX=out?containerBox.left-box.left-box.width-offset:containerBox.right-box.right+box.width+offset}return fromX=out?0:translateX,fromY=out?0:translateY,useCssTransform?from.setTransform({translateX:fromX,translateY:fromY}):(from.set("left",fromX),from.set("top",fromY)),toX=out?translateX:0,toY=out?translateY:0,useCssTransform?to.setTransform({translateX:toX,translateY:toY}):(to.set("left",toX),to.set("top",toY)),this.callParent(arguments)}}),Ext.define("Ext.fx.animation.SlideOut",{extend:Ext.fx.animation.Slide,alias:["animation.slideOut"],config:{out:!0}}),Ext.define("Ext.fx.animation.Fade",{extend:Ext.fx.animation.Abstract,alternateClassName:"Ext.fx.animation.FadeIn",alias:["animation.fade","animation.fadeIn"],config:{out:!1,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(newOut){var to=this.getTo(),from=this.getFrom();newOut?(from.set("opacity",1),to.set("opacity",0)):(from.set("opacity",0),to.set("opacity",1))}}),Ext.define("Ext.fx.animation.FadeOut",{extend:Ext.fx.animation.Fade,alias:"animation.fadeOut",config:{out:!0,before:{}}}),Ext.define("Ext.fx.animation.Flip",{extend:Ext.fx.animation.Abstract,alias:"animation.flip",config:{easing:"ease-in",direction:"right",half:!1,out:null},getData:function(){var me=this,from=me.getFrom(),to=me.getTo(),direction=me.getDirection(),out=me.getOut(),rotate=me.getHalf()?90:180,fromScale=1,toScale=1,fromRotateX=0,fromRotateY=0,toRotateX=0,toRotateY=0;switch(out?toScale=.8:fromScale=.8,direction){case this.DIRECTION_UP:out?toRotateX=rotate:fromRotateX=-rotate;break;case this.DIRECTION_DOWN:out?toRotateX=-rotate:fromRotateX=rotate;break;case this.DIRECTION_RIGHT:out?toRotateY=rotate:fromRotateY=-rotate;break;case this.DIRECTION_LEFT:out?toRotateY=-rotate:fromRotateY=rotate}return from.setTransform({rotateX:fromRotateX,rotateY:fromRotateY,scale:fromScale}),to.setTransform({rotateX:toRotateX,rotateY:toRotateY,scale:toScale}),this.callParent()}}),Ext.define("Ext.fx.animation.Pop",{extend:Ext.fx.animation.Abstract,alias:["animation.pop","animation.popIn"],alternateClassName:"Ext.fx.animation.PopIn",config:{out:!1,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var to=this.getTo(),from=this.getFrom();return this.getOut()?(from.set("opacity",1),from.setTransform({scale:1}),to.set("opacity",0),to.setTransform({scale:0})):(from.set("opacity",0),from.setTransform({scale:0}),to.set("opacity",1),to.setTransform({scale:1})),this.callParent(arguments)}}),Ext.define("Ext.fx.animation.PopOut",{extend:Ext.fx.animation.Pop,alias:"animation.popOut",config:{out:!0,before:{}}}),Ext.define("Ext.fx.Animation",{constructor:function(config){var type,defaultClass=Ext.fx.animation.Abstract;return"string"==typeof config?(type=config,config={}):config&&config.type&&(type=config.type),type&&(defaultClass=Ext.ClassManager.getByAlias("animation."+type)),Ext.factory(config,defaultClass)}}),Ext.define("Ext.fx.runner.Css",{extend:Ext.Evented,prefixedProperties:{transform:!0,"transform-origin":!0,perspective:!0,"transform-style":!0,transition:!0,"transition-property":!0,"transition-duration":!0,"transition-timing-function":!0,"transition-delay":!0,animation:!0,"animation-name":!0,"animation-duration":!0,"animation-iteration-count":!0,"animation-direction":!0,"animation-timing-function":!0,"animation-delay":!0},lengthProperties:{top:!0,right:!0,bottom:!0,left:!0,width:!0,height:!0,"max-height":!0,"max-width":!0,"min-height":!0,"min-width":!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,"border-bottom-width":!0,"border-left-width":!0,"border-right-width":!0,"border-spacing":!0,"border-top-width":!0,"border-width":!0,"outline-width":!0,"letter-spacing":!0,"line-height":!0,"text-indent":!0,"word-spacing":!0,"font-size":!0,translate:!0,translateX:!0,translateY:!0,translateZ:!0,translate3d:!0},durationProperties:{"transition-duration":!0,"transition-delay":!0,"animation-duration":!0,"animation-delay":!0},angleProperties:{rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,skew:!0,skewX:!0,skewY:!0},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",formattedNameCache:{},transformMethods3d:["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"],transformMethodsNo3d:["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"],constructor:function(){var me=this;me.transformMethods=Ext.feature.has.Css3dTransforms?me.transformMethods3d:me.transformMethodsNo3d,me.vendorPrefix=Ext.browser.getStyleDashPrefix(),me.ruleStylesCache={},me.callParent()},getStyleSheet:function(){var styleElement,styleSheets,styleSheet=this.styleSheet;return styleSheet||((styleElement=document.createElement("style")).type="text/css",(document.head||document.getElementsByTagName("head")[0]).appendChild(styleElement),styleSheets=document.styleSheets,this.styleSheet=styleSheet=styleSheets[styleSheets.length-1]),styleSheet},applyRules:function(selectors){var selector,properties,ruleStyle,ruleStyleCache,rulesLength,name,value,styleSheet=this.getStyleSheet(),ruleStylesCache=this.ruleStylesCache,rules=styleSheet.cssRules;for(selector in selectors)for(name in properties=selectors[selector],void 0===(ruleStyle=ruleStylesCache[selector])&&(rulesLength=rules.length,styleSheet.insertRule(selector+"{}",rulesLength),ruleStyle=ruleStylesCache[selector]=rules.item(rulesLength).style),ruleStyleCache=(ruleStyleCache=ruleStyle.$cache)||(ruleStyle.$cache={}),properties)value=this.formatValue(properties[name],name),ruleStyleCache[name=this.formatName(name)]!==value&&(null===(ruleStyleCache[name]=value)?ruleStyle.removeProperty(name):ruleStyle.setProperty(name,value,"important"));return this},applyStyles:function(styles){var id,element,elementStyle,properties,name,value;for(id in styles)if(styles.hasOwnProperty(id)){if(!(element=document.getElementById(id)))continue;for(name in elementStyle=element.style,properties=styles[id])properties.hasOwnProperty(name)&&(value=this.formatValue(properties[name],name),name=this.formatName(name),null===value?elementStyle.removeProperty(name):elementStyle.setProperty(name,value,"important"))}return this},formatName:function(name){var cache=this.formattedNameCache,formattedName=cache[name];return formattedName||(formattedName=!Ext.os.is.Tizen&&Ext.feature.has.CssTransformNoPrefix||!this.prefixedProperties[name]?name:this.vendorPrefix+name,cache[name]=formattedName),formattedName},formatValue:function(value,name){var transformMethods,method,i,ln,transformValues,values,type=typeof value,lengthUnit=this.DEFAULT_UNIT_LENGTH;if(null===value)return"";if("string"==type)return!this.lengthProperties[name]||0<value.match(this.lengthUnitRegex)[1].length?value:value+lengthUnit;if("number"==type){if(0==value)return"0";if(this.lengthProperties[name])return value+lengthUnit;if(this.angleProperties[name])return value+this.DEFAULT_UNIT_ANGLE;if(this.durationProperties[name])return value+this.DEFAULT_UNIT_DURATION}else{if("transform"===name){for(transformValues=[],i=0,ln=(transformMethods=this.transformMethods).length;i<ln;i++)method=transformMethods[i],transformValues.push(method+"("+this.formatValue(value[method],method)+")");return transformValues.join(" ")}if(Ext.isArray(value)){for(values=[],i=0,ln=value.length;i<ln;i++)values.push(this.formatValue(value[i],name));return 0<values.length?values.join(", "):"none"}}return value}}),Ext.define("Ext.fx.runner.CssTransition",{extend:Ext.fx.runner.Css,alternateClassName:"Ext.Animator",singleton:!0,listenersAttached:!1,constructor:function(){return this.runningAnimationsData={},this.callParent(arguments)},attachListeners:function(){this.listenersAttached=!0,Ext.getWin().on("transitionend","onTransitionEnd",this)},onTransitionEnd:function(e){var target=e.target,id=target.id;id&&this.runningAnimationsData.hasOwnProperty(id)&&this.refreshRunningAnimationsData(Ext.get(target),[e.browserEvent.propertyName])},onAnimationEnd:function(element,data,animation,isInterrupted,isReplaced){var runningNameMap,toPropertyNames,i,ln,name,id=element.getId(),runningData=this.runningAnimationsData[id],endRules={},endData={};if(animation.un("stop","onAnimationStop",this),runningData&&(runningNameMap=runningData.nameMap),endRules[id]=endData,data.onBeforeEnd&&data.onBeforeEnd.call(data.scope||this,element,isInterrupted),animation.fireEvent("animationbeforeend",animation,element,isInterrupted),this.fireEvent("animationbeforeend",this,animation,element,isInterrupted),isReplaced||!isInterrupted&&!data.preserveEndState)for(i=0,ln=(toPropertyNames=data.toPropertyNames).length;i<ln;i++)name=toPropertyNames[i],runningNameMap&&!runningNameMap.hasOwnProperty(name)&&(endData[name]=null);data.after&&Ext.merge(endData,data.after),this.applyStyles(endRules),data.onEnd&&data.onEnd.call(data.scope||this,element,isInterrupted),animation.fireEvent("animationend",animation,element,isInterrupted),this.fireEvent("animationend",this,animation,element,isInterrupted),Ext.AnimationQueue.stop(Ext.emptyFn,animation)},onAllAnimationsEnd:function(element){var id=element.getId(),endRules={};delete this.runningAnimationsData[id],endRules[id]={"transition-property":null,"transition-duration":null,"transition-timing-function":null,"transition-delay":null},this.applyStyles(endRules),this.fireEvent("animationallend",this,element)},hasRunningAnimations:function(element){var id=element.getId(),runningAnimationsData=this.runningAnimationsData;return runningAnimationsData.hasOwnProperty(id)&&0<runningAnimationsData[id].sessions.length},refreshRunningAnimationsData:function(element,propertyNames,interrupt,replace){var id=element.getId(),runningData=this.runningAnimationsData[id];if(runningData){var ln,j,subLn,name,i,session,map,list,nameMap=runningData.nameMap,nameList=runningData.nameList,sessions=runningData.sessions,hasCompletedSession=!1;if(interrupt=Boolean(interrupt),replace=Boolean(replace),!sessions)return this;if(0===(ln=sessions.length))return this;if(replace){for(runningData.nameMap={},i=nameList.length=0;i<ln;i++)session=sessions[i],this.onAnimationEnd(element,session.data,session.animation,interrupt,replace);sessions.length=0}else for(i=0;i<ln;i++){for(map=(session=sessions[i]).map,list=session.list,j=0,subLn=propertyNames.length;j<subLn;j++)map[name=propertyNames[j]]&&(delete map[name],Ext.Array.remove(list,name),session.length--,0==--nameMap[name]&&(delete nameMap[name],Ext.Array.remove(nameList,name)));0==session.length&&(sessions.splice(i,1),i--,ln--,hasCompletedSession=!0,this.onAnimationEnd(element,session.data,session.animation,interrupt))}replace||interrupt||0!=sessions.length||!hasCompletedSession||this.onAllAnimationsEnd(element)}},getRunningData:function(id){var runningAnimationsData=this.runningAnimationsData;return runningAnimationsData.hasOwnProperty(id)||(runningAnimationsData[id]={nameMap:{},nameList:[],sessions:[]}),runningAnimationsData[id]},getTestElement:function(){var iframe,iframeDocument,iframeStyle,testElement=this.testElement;return testElement||((iframe=document.createElement("iframe")).setAttribute("tabIndex",-1),(iframeStyle=iframe.style).setProperty("visibility","hidden","important"),iframeStyle.setProperty("width","0px","important"),iframeStyle.setProperty("height","0px","important"),iframeStyle.setProperty("position","absolute","important"),iframeStyle.setProperty("border","0px","important"),iframeStyle.setProperty("zIndex","-1000","important"),document.body.appendChild(iframe),(iframeDocument=iframe.contentDocument).open(),iframeDocument.writeln("</body>"),iframeDocument.close(),this.testElement=testElement=iframeDocument.createElement("div"),testElement.style.setProperty("position","absolute","important"),iframeDocument.body.appendChild(testElement),this.testElementComputedStyle=window.getComputedStyle(testElement)),testElement},getCssStyleValue:function(name,value){var testElement=this.getTestElement(),computedStyle=this.testElementComputedStyle,style=testElement.style;return style.setProperty(name,value),Ext.browser.is.Firefox&&testElement.offsetHeight,value=computedStyle.getPropertyValue(name),style.removeProperty(name),value},run:function(animations){var element,elementId,from,to,before,fromPropertyNames,toPropertyNames,doApplyTo,message,runningData,elementData,i,j,ln,animation,propertiesLength,sessionNameMap,computedStyle,formattedName,name,toFormattedValue,fromFormattedValue,isLengthProperty,runningNameMap,runningNameList,runningSessions,runningSession,me=this,isLengthPropertyMap=me.lengthProperties,fromData={},toData={},data={};for(me.listenersAttached||me.attachListeners(),i=0,ln=(animations=Ext.Array.from(animations)).length;i<ln;i++){for(name in animation=animations[i],element=(animation=Ext.factory(animation,Ext.fx.Animation)).getElement(),Ext.AnimationQueue.start(Ext.emptyFn,animation),computedStyle=window.getComputedStyle(element.dom),elementId=element.getId(),data=Ext.merge({},animation.getData()),animation.onBeforeStart&&animation.onBeforeStart.call(animation.scope||me,element),animation.fireEvent("animationstart",animation),me.fireEvent("animationstart",me,animation),before=(data[elementId]=data).before,from=data.from,to=data.to,data.fromPropertyNames=fromPropertyNames=[],data.toPropertyNames=toPropertyNames=[],to)to.hasOwnProperty(name)&&(to[name]=toFormattedValue=me.formatValue(to[name],name),formattedName=me.formatName(name),(isLengthProperty=isLengthPropertyMap.hasOwnProperty(name))||(toFormattedValue=me.getCssStyleValue(formattedName,toFormattedValue)),from.hasOwnProperty(name)?(from[name]=fromFormattedValue=me.formatValue(from[name],name),isLengthProperty||(fromFormattedValue=me.getCssStyleValue(formattedName,fromFormattedValue)),toFormattedValue!==fromFormattedValue&&(fromPropertyNames.push(formattedName),toPropertyNames.push(formattedName))):toFormattedValue!==computedStyle.getPropertyValue(formattedName)&&toPropertyNames.push(formattedName));if(0!==(propertiesLength=toPropertyNames.length)){for(0<(runningSessions=(runningData=me.getRunningData(elementId)).sessions).length&&me.refreshRunningAnimationsData(element,Ext.Array.merge(fromPropertyNames,toPropertyNames),!0,data.replacePrevious),runningNameMap=runningData.nameMap,runningNameList=runningData.nameList,sessionNameMap={},j=0;j<propertiesLength;j++)sessionNameMap[name=toPropertyNames[j]]=!0,runningNameMap.hasOwnProperty(name)?runningNameMap[name]++:(runningNameMap[name]=1,runningNameList.push(name));runningSession={element:element,map:sessionNameMap,list:toPropertyNames.slice(),length:propertiesLength,data:data,animation:animation},runningSessions.push(runningSession),animation.on("stop","onAnimationStop",me),elementData=Ext.apply({},before),Ext.apply(elementData,from),0<runningNameList.length&&(fromPropertyNames=Ext.Array.difference(runningNameList,fromPropertyNames),toPropertyNames=Ext.Array.merge(fromPropertyNames,toPropertyNames),elementData["transition-property"]=fromPropertyNames),fromData[elementId]=elementData,toData[elementId]=Ext.apply({},to),toData[elementId]["transition-property"]=toPropertyNames,toData[elementId]["transition-duration"]=data.duration,toData[elementId]["transition-timing-function"]=data.easing,toData[elementId]["transition-delay"]=data.delay,animation.startTime=Date.now()}else me.onAnimationEnd(element,data,animation)}message=me.$className,me.applyStyles(fromData),doApplyTo=function(e){e.data===message&&e.source===window&&(window.removeEventListener("message",doApplyTo,!1),me.applyStyles(toData))},window.requestAnimationFrame?window.requestAnimationFrame(function(){window.addEventListener("message",doApplyTo,!1),window.postMessage(message,"*")}):Ext.defer(function(){window.addEventListener("message",doApplyTo,!1),window.postMessage(message,"*")},1)},onAnimationStop:function(animation){var id,sessions,i,ln,session,runningAnimationsData=this.runningAnimationsData;for(id in runningAnimationsData)if(runningAnimationsData.hasOwnProperty(id))for(i=0,ln=(sessions=runningAnimationsData[id].sessions).length;i<ln;i++)(session=sessions[i]).animation===animation&&this.refreshRunningAnimationsData(session.element,session.list.slice(),!1)}}),Ext.define("Ext.mixin.Container",{extend:Ext.Mixin,mixinConfig:{id:"container"},isContainer:!0,config:{referenceHolder:!1},getReferences:function(){return Ext.ComponentManager.fixReferences(),this.refs||null},lookup:function(key){var refs=this.getReferences();return refs&&refs[key]||null},lookupReference:function(key){return this.lookup(key)},privates:{attachReference:function(component){this.destroying||this.destroyed||((this.refs||(this.refs={}))[component.referenceKey]=component)},clearReference:function(component){var refs=this.refs,key=component.referenceKey;refs&&key&&(component.viewModelKey=component.referenceKey=refs[key]=null)},containerOnAdded:function(component,instanced){instanced&&Ext.ComponentManager.markReferencesDirty()},containerOnRemoved:function(destroying){var refHolder;destroying||(refHolder=this.lookupReferenceHolder())&&(Ext.ComponentManager.markReferencesDirty(),refHolder.clearReferences())},clearReferences:function(){this.refs=null},initContainerInheritedState:function(inheritedState,inheritedStateInner){var me=this,controller=me.getController(),session=me.getSession(),viewModel=me.getConfig("viewModel",!0),reference=me.getReference(),referenceHolder=me.getReferenceHolder();controller?(inheritedState.referenceHolder=controller,referenceHolder=!0):referenceHolder&&(inheritedState.referenceHolder=me),referenceHolder?inheritedState.referencePath="":reference&&me.isParentReference&&(inheritedState.referencePath=me.referenceKey+"."),session&&(inheritedState.session=session),viewModel?inheritedState.viewModelPath="":reference&&me.isParentReference&&(inheritedState.viewModelPath=me.viewModelKey+".")},setupReference:function(reference){var len;return reference&&">"===reference.charAt(len=reference.length-1)&&(this.isParentReference=!0,reference=reference.substring(0,len)),reference}}}),Ext.define("Ext.mixin.Responsive",function(Responsive){return{extend:Ext.Mixin,mixinConfig:{id:"responsive",after:{destroy:"destroy"}},config:{responsiveConfig:{$value:void 0,merge:function(newValue,oldValue,target,mixinClass){if(!newValue)return oldValue;var rule,ret=oldValue?Ext.Object.chain(oldValue):{};for(rule in newValue)mixinClass&&rule in ret||(ret[rule]={fn:null,config:newValue[rule]});return ret}},responsiveFormulas:{$value:0,merge:function(newValue,oldValue,target,mixinClass){return this.mergeNew(newValue,oldValue,target,mixinClass)}}},destroy:function(){Responsive.unregister(this),this.callParent()},privates:{statics:{active:!1,all:{},context:Ext.Object.chain(Ext.platformTags),count:0,nextId:0,activate:function(){Responsive.active=!0,Responsive.updateContext(),Ext.on("resize",Responsive.onResize,Responsive)},deactivate:function(){Responsive.active=!1,Ext.un("resize",Responsive.onResize,Responsive)},notify:function(){var id,all=Responsive.all,context=Responsive.context,globalEvents=Ext.GlobalEvents,timer=Responsive.timer;for(id in timer&&(Responsive.timer=null,Ext.Function.cancelAnimationFrame(timer)),Responsive.updateContext(),Ext.suspendLayouts(),globalEvents.fireEvent("beforeresponsiveupdate",context),all)all[id].setupResponsiveContext();for(id in globalEvents.fireEvent("beginresponsiveupdate",context),all)all[id].updateResponsiveState();globalEvents.fireEvent("responsiveupdate",context),Ext.resumeLayouts(!0)},onResize:function(){Responsive.timer||(Responsive.timer=Ext.Function.requestAnimationFrame(Responsive.onTimer))},onTimer:function(){Responsive.timer=null,Responsive.notify()},processConfig:function(instance,instanceConfig,name){var cfg,value=instanceConfig&&instanceConfig[name],config=instance.config;value&&(cfg=instance.getConfigurator().configs[name],config[name]=cfg.merge(value,config[name],instance))},register:function(responder){var id=responder.$responsiveId;id||(responder.$responsiveId=id=++Responsive.nextId,Responsive.all[id]=responder,1==++Responsive.count&&Responsive.activate())},unregister:function(responder){var id=responder.$responsiveId;id in Responsive.all&&(responder.$responsiveId=null,delete Responsive.all[id],0==--Responsive.count&&Responsive.deactivate())},updateContext:function(){var El=Ext.Element,width=El.getViewportWidth(),height=El.getViewportHeight(),context=Responsive.context;context.width=width,context.height=height,context.tall=width<height,context.wide=!context.tall,context.landscape=context.portrait=!1,context.platform||(context.platform=Ext.platformTags),context[Ext.dom.Element.getOrientation()]=!0}},afterClassMixedIn:function(targetClass){var config,proto=targetClass.prototype,responsiveConfig=proto.responsiveConfig,responsiveFormulas=proto.responsiveFormulas;(responsiveConfig||responsiveFormulas)&&(config={},responsiveConfig&&(delete proto.responsiveConfig,config.responsiveConfig=responsiveConfig),responsiveFormulas&&(delete proto.responsiveFormulas,config.responsiveFormulas=responsiveFormulas),targetClass.getConfigurator().add(config))},applyResponsiveConfig:function(rules){for(var rule in rules)rules[rule].fn=Ext.createRuleFn(rule);return rules},applyResponsiveFormulas:function(formulas){var fn,name,ret={};if(formulas)for(name in formulas)Ext.isString(fn=formulas[name])&&(fn=Ext.createRuleFn(fn)),ret[name]=fn;return ret},getResponsiveState:function(){var entry,rule,context=Responsive.context,rules=this.getResponsiveConfig(),ret={};if(rules)for(rule in rules)(entry=rules[rule]).fn.call(this,context)&&Ext.merge(ret,entry.config);return ret},setupResponsiveContext:function(){var name,formulas=this.getResponsiveFormulas(),context=Responsive.context;if(formulas)for(name in formulas)context[name]=formulas[name].call(this,context)},transformInstanceConfig:function(instanceConfig){var ret,me=this;return Responsive.register(me),instanceConfig&&(Responsive.processConfig(me,instanceConfig,"responsiveConfig"),Responsive.processConfig(me,instanceConfig,"responsiveFormulas")),me.setupResponsiveContext(),ret=me.getResponsiveState(),instanceConfig&&(delete(ret=Ext.merge({},instanceConfig,ret)).responsiveConfig,delete ret.responsiveFormulas),ret},updateResponsiveState:function(){var config=this.getResponsiveState();this.setConfig(config)}}}}),Ext.define("Ext.perf.Accumulator",function(){var formatTpl,currentFrame=null,khrome=Ext.global.chrome,getTimestamp=function(){var interval,toolbox;if(getTimestamp=Ext.now,Ext.isChrome&&khrome&&khrome.Interval)(interval=new khrome.Interval).start(),getTimestamp=function(){return interval.microseconds()/1e3};else if(window.ActiveXObject)try{toolbox=new ActiveXObject("SenchaToolbox.Toolbox"),Ext.senchaToolbox=toolbox,getTimestamp=function(){return toolbox.milliseconds}}catch(e){}return Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=getTimestamp,getTimestamp()};function adjustSet(set,time){set.sum+=time,set.min=Math.min(set.min,time),set.max=Math.max(set.max,time)}function leaveFrame(time){var totalTime=time||getTimestamp()-this.time,accum=this.accum;++accum.count,--accum.depth||adjustSet(accum.total,totalTime),adjustSet(accum.pure,totalTime-this.childTime),(currentFrame=this.parent)&&(++currentFrame.accum.childCount,currentFrame.childTime+=totalTime)}function makeSet(){return{min:Number.MAX_VALUE,max:0,sum:0}}function makeTap(me,fn){return function(){var frame=me.enter(),ret=fn.apply(this,arguments);return frame.leave(),ret}}function setToJSON(count,childCount,calibration,set){var data={avg:0,min:set.min,max:set.max,sum:0};return count&&(calibration=calibration||0,data.sum=set.sum-childCount*calibration,data.avg=data.sum/count),data}return{constructor:function(name){var me=this;me.count=me.childCount=me.depth=me.maxDepth=0,me.pure=makeSet(),me.total=makeSet(),me.name=name},statics:{getTimestamp:getTimestamp},format:function(calibration){formatTpl=formatTpl||new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(t){return Math.round(100*t)/100}});var data=this.getData(calibration);return data.name=this.name,data.pure.type="Pure",data.total.type="Total",data.times=[data.pure,data.total],formatTpl.apply(data)},getData:function(calibration){var me=this;return{count:me.count,childCount:me.childCount,depth:me.maxDepth,pure:setToJSON(me.count,me.childCount,calibration,me.pure),total:setToJSON(me.count,me.childCount,calibration,me.total)}},enter:function(){var me=this,frame={accum:me,leave:leaveFrame,childTime:0,parent:currentFrame};return++me.depth,me.maxDepth<me.depth&&(me.maxDepth=me.depth),(currentFrame=frame).time=getTimestamp(),frame},monitor:function(fn,scope,args){var frame=this.enter();args?fn.apply(scope,args):fn.call(scope),frame.leave()},report:function(){Ext.log(this.format())},tap:function(className,methodName){var klass,statik,i,parts,length,name,src,tapFunc,me=this,methods="string"==typeof methodName?[methodName]:methodName;return tapFunc=function(){if("string"==typeof className)for(klass=Ext.global,parts=className.split("."),i=0,length=parts.length;i<length;++i)klass=klass[parts[i]];else klass=className;for(i=0,length=methods.length;i<length;++i)name=methods[i],(statik="!"===name.charAt(0))?name=name.substring(1):statik=!(name in klass.prototype),(src=statik?klass:klass.prototype)[name]=makeTap(me,src[name])},Ext.ClassManager.onCreated(tapFunc,me,className),me}}},function(){Ext.perf.getTimestamp=this.getTimestamp}),Ext.define("Ext.perf.Monitor",{singleton:!0,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[],this.accumulatorsByName={}},calibrate:function(){var startTime,accum=new Ext.perf.Accumulator("$"),total=accum.total,getTimestamp=Ext.perf.Accumulator.getTimestamp,count=0;for(startTime=getTimestamp();accum.enter().leave(),++count,total.sum<100;);return(getTimestamp()-startTime)/count},get:function(name){var accum=this.accumulatorsByName[name];return accum||(this.accumulatorsByName[name]=accum=new Ext.perf.Accumulator(name),this.accumulators.push(accum)),accum},enter:function(name){return this.get(name).enter()},monitor:function(name,fn,scope){this.get(name).monitor(fn,scope)},report:function(){var accumulators=this.accumulators,calibration=this.calibrate();accumulators.sort(function(a,b){return a.name<b.name?-1:b.name<a.name?1:0}),this.updateGC(),Ext.log("Calibration: "+Math.round(100*calibration)/100+" msec/sample"),Ext.each(accumulators,function(accum){Ext.log(accum.format(calibration))})},getData:function(all){var ret={},accumulators=this.accumulators;return Ext.each(accumulators,function(accum){(all||accum.count)&&(ret[accum.name]=accum.getData())}),ret},reset:function(){Ext.each(this.accumulators,function(accum){var me=accum;me.count=me.childCount=me.depth=me.maxDepth=0,me.pure={min:Number.MAX_VALUE,max:0,sum:0},me.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var bucket,accumGC=this.accumulatorsByName.GC,toolbox=Ext.senchaToolbox;accumGC&&(accumGC.count=toolbox.garbageCollectionCounter||0,accumGC.count&&(bucket=accumGC.pure,accumGC.total.sum=bucket.sum=toolbox.garbageCollectionMilliseconds,bucket.min=bucket.max=bucket.sum/accumGC.count,(bucket=accumGC.total).min=bucket.max=bucket.sum/accumGC.count))},watchGC:function(){Ext.perf.getTimestamp();var toolbox=Ext.senchaToolbox;toolbox&&(this.get("GC"),toolbox.watchGarbageCollector(!1))},setup:function(config){var key,prop,accum,className,methods;for(key in config=config||{render:{"Ext.Component":"render"},layout:{"Ext.layout.Context":"run"}},this.currentConfig=config)if(config.hasOwnProperty(key))for(className in prop=config[key],accum=Ext.Perf.get(key),prop)prop.hasOwnProperty(className)&&(methods=prop[className],accum.tap(className,methods));this.watchGC()},setupLog:function(config){var className,cls,methods,method,override;for(className in config)if(config.hasOwnProperty(className)&&(cls=Ext.ClassManager.get(className))){for(method in override={},methods=config[className])override[method]=function(methodName,idProp){return function(){var before,diff,id,idHolder,ret;return before=+Date.now(),ret=this.callParent(arguments),diff=Date.now()-before,window.console&&0<diff&&((idHolder="this"===idProp?this:"string"==typeof idProp?this[idProp]:"number"==typeof idProp?arguments[idProp]:null)&&(id=idHolder.id),null!=id?console.log(methodName+" for "+id+": "+diff+"ms"):console.log(methodName+" for unknown: "+diff+"ms"),console.trace&&console.trace()),ret}}(method,methods[method]);Ext.override(cls,override)}}}),Ext.define("Ext.plugin.Abstract",{alternateClassName:"Ext.AbstractPlugin",isPlugin:!0,constructor:function(config){config&&(this.pluginConfig=config,this.initConfig(config))},clonePlugin:function(overrideCfg){return new this.self(Ext.apply({},overrideCfg,this.pluginConfig))},setCmp:function(cmp){this.cmp=cmp},getCmp:function(){return this.cmp},init:Ext.emptyFn,destroy:function(){this.cmp=this.pluginConfig=null,this.callParent()},onClassExtended:function(cls,data,hooks){var alias=data.alias;alias&&!data.ptype&&(Ext.isArray(alias)&&(alias=alias[0]),cls.prototype.ptype=alias.split("plugin.")[1])},resolveListenerScope:function(defaultScope){var scope,cmp=this.getCmp();return cmp&&(scope=cmp.resolveSatelliteListenerScope(this,defaultScope)),scope||this.mixins.observable.resolveListenerScope.call(this,defaultScope)}}),Ext.define("Ext.overrides.plugin.Abstract",{override:"Ext.plugin.Abstract",$configStrict:!1,$configPrefixed:!1,disabled:!1,getState:null,applyState:null,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}}),Ext.define("Ext.util.ItemCollection",{extend:Ext.util.MixedCollection,alternateClassName:"Ext.ItemCollection",getKey:function(item){return item.getItemId&&item.getItemId()},has:function(item){return this.map.hasOwnProperty(item.getId())}}),Ext.define("Ext.util.TaskManager",{extend:Ext.util.TaskRunner,alternateClassName:["Ext.TaskManager"],singleton:!0}),Ext.define("Ext.util.TextMetrics",{statics:{shared:null,measure:function(el,text,fixedWidth){var shared=this.shared;return(shared=shared||(this.shared=new this(el,fixedWidth))).bind(el),shared.setFixedWidth(fixedWidth||"auto"),shared.getSize(text)},destroy:function(){Ext.destroy(this.shared),this.shared=null}},constructor:function(bindTo,fixedWidth){var measure=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"textmetrics"});measure.setVisibilityMode(1),this.measure=measure,bindTo&&this.bind(bindTo),measure.position("absolute"),measure.setLocalXY(-1e3,-1e3),measure.hide(),fixedWidth&&measure.setWidth(fixedWidth)},getSize:function(text){var size,measure=this.measure;return measure.setHtml(text),size=measure.getSize(),measure.setHtml(""),size},bind:function(el){this.el=Ext.get(el),this.measure.setStyle(this.el.getStyle(["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-break"]))},setFixedWidth:function(width){this.measure.setWidth(width)},getWidth:function(text){return this.measure.dom.style.width="auto",this.getSize(text).width},getHeight:function(text){return this.getSize(text).height},destroy:function(){this.el=this.measure=Ext.destroy(this.measure),this.callParent()}},function(){Ext.Element.override({getTextWidth:function(text,min,max){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(text,this.dom.innerHTML,!0)).width,min||0,max||1e6)}})}),Ext.define("Ext.ElementLoader",{mixins:[Ext.util.Observable],statics:{Renderer:{Html:function(loader,response,active){return loader.getTarget().setHtml(response.responseText,!0===active.scripts,active.rendererScope),!0}}},url:null,params:null,baseParams:null,autoLoad:!1,target:null,loadMask:!1,ajaxOptions:null,scripts:!1,isLoader:!0,constructor:function(config){var autoLoad,me=this;me.mixins.observable.constructor.call(me,config),me.setTarget(me.target),me.autoLoad&&(!0===(autoLoad=me.autoLoad)&&(autoLoad=null),me.load(autoLoad))},setTarget:function(target){target=Ext.get(target),this.target&&this.target!==target&&this.abort(),this.target=target},getTarget:function(){return this.target||null},abort:function(){var active=this.active;void 0!==active&&(Ext.Ajax.abort(active.request),active.mask&&this.removeMask(),delete this.active)},removeMask:function(){this.target.unmask()},addMask:function(mask){this.target.mask(!0===mask?null:mask)},load:function(options){options=Ext.apply({},options);var me=this,mask=Ext.isDefined(options.loadMask)?options.loadMask:me.loadMask,params=Ext.apply({},options.params),ajaxOptions=Ext.apply({},options.ajaxOptions),callback=options.callback||me.callback,scope=options.scope||me.scope||me;Ext.applyIf(ajaxOptions,me.ajaxOptions),Ext.applyIf(options,ajaxOptions),Ext.applyIf(params,me.params),Ext.apply(params,me.baseParams),Ext.applyIf(options,{url:me.url}),Ext.apply(options,{scope:me,params:params,callback:me.onComplete}),!1!==me.fireEvent("beforeload",me,options)&&(mask&&me.addMask(mask),me.active={options:options,mask:mask,scope:scope,callback:callback,success:options.success||me.success,failure:options.failure||me.failure,renderer:options.renderer||me.renderer,scripts:Ext.isDefined(options.scripts)?options.scripts:me.scripts},me.active.request=Ext.Ajax.request(options),me.setOptions(me.active,options))},setOptions:function(active,options){active.rendererScope=options.rendererScope||this.rendererScope||this},onComplete:function(options,success,response){var rendererScope,scope,me=this,active=me.active;active&&(scope=active.scope,rendererScope=active.rendererScope,(success=success&&!1!==me.getRenderer(active.renderer).call(rendererScope,me,response,active))?(Ext.callback(active.success,scope,[me,response,options]),me.fireEvent("load",me,response,options)):(Ext.callback(active.failure,scope,[me,response,options]),me.fireEvent("exception",me,response,options)),Ext.callback(active.callback,scope,[me,success,response,options]),active.mask&&me.removeMask()),delete me.active},getRenderer:function(renderer){return Ext.isFunction(renderer)?renderer:this.statics().Renderer.Html},startAutoRefresh:function(interval,options){var me=this;me.stopAutoRefresh(),me.autoRefresh=Ext.interval(function(){me.load(options)},interval)},stopAutoRefresh:function(){clearInterval(this.autoRefresh),delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){this.stopAutoRefresh(),delete this.target,this.abort(),this.callParent()}}),Ext.define("Ext.ComponentLoader",{extend:Ext.ElementLoader,statics:{Renderer:{Data:function(loader,response,active){var success=!0;try{loader.getTarget().update(Ext.decode(response.responseText))}catch(e){success=!1}return success},Component:function(loader,response,active){var success=!0,target=loader.getTarget(),items=[];try{items=Ext.decode(response.responseText)}catch(e){success=!1}return success&&(target.suspendLayouts(),active.removeAll&&target.removeAll(),target.add(items),target.resumeLayouts(!0)),success}}},target:null,loadOnRender:!1,loadMask:!1,renderer:"html",setTarget:function(target){var me=this;Ext.isString(target)&&(target=Ext.getCmp(target)),me.target&&me.target!==target&&me.abort(),(me.target=target)&&me.loadOnRender&&(target.rendered?me.doLoadOnRender():me.mon(target,"render",me.doLoadOnRender,me))},doLoadOnRender:function(){var loadOnRender=this.loadOnRender;this.load(Ext.isObject(loadOnRender)?loadOnRender:null)},removeMask:function(){this.target.setLoading(!1)},addMask:function(mask){this.target.setLoading(mask)},setOptions:function(active,options){active.removeAll=Ext.isDefined(options.removeAll)?options.removeAll:this.removeAll,active.rendererScope=options.rendererScope||this.rendererScope||this.target},getRenderer:function(renderer){if(Ext.isFunction(renderer))return renderer;var renderers=this.statics().Renderer;switch(renderer){case"component":return renderers.Component;case"data":return renderers.Data;default:return Ext.ElementLoader.Renderer.Html}}}),Ext.define("Ext.layout.SizeModel",{constructor:function(config){var name,me=this,SizeModel=me.self,sizeModelsArray=SizeModel.sizeModelsArray;Ext.apply(me,config),me[name=me.name]=!0,me.fixed=!(me.auto=me.natural||me.shrinkWrap),sizeModelsArray[me.ordinal=sizeModelsArray.length]=SizeModel[name]=SizeModel.sizeModels[name]=me},statics:{sizeModelsArray:[],sizeModels:{}},calculated:!1,configured:!1,constrainedMax:!1,constrainedMin:!1,natural:!1,shrinkWrap:!1,calculatedFromConfigured:!1,calculatedFromNatural:!1,calculatedFromShrinkWrap:!1,names:null},function(){var i,j,n,pairs,sizeModel,sizeModelsArray=this.sizeModelsArray;for(new this({name:"calculated"}),new this({name:"configured",names:{width:"width",height:"height"}}),new this({name:"natural"}),new this({name:"shrinkWrap"}),new this({name:"calculatedFromConfigured",configured:!0,calculatedFrom:!0,names:{width:"width",height:"height"}}),new this({name:"calculatedFromNatural",natural:!0,calculatedFrom:!0}),new this({name:"calculatedFromShrinkWrap",shrinkWrap:!0,calculatedFrom:!0}),new this({name:"constrainedMax",configured:!0,constrained:!0,names:{width:"maxWidth",height:"maxHeight"}}),new this({name:"constrainedMin",configured:!0,constrained:!0,names:{width:"minWidth",height:"minHeight"}}),new this({name:"constrainedDock",configured:!0,constrained:!0,constrainedByMin:!0,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}}),i=0,n=sizeModelsArray.length;i<n;++i)for((sizeModel=sizeModelsArray[i]).pairsByHeightOrdinal=pairs=[],j=0;j<n;++j)pairs.push({width:sizeModel,height:sizeModelsArray[j]})}),Ext.define("Ext.layout.Layout",{mixins:[Ext.mixin.Factoryable],factoryConfig:{type:"layout"},isLayout:!0,initialized:!1,running:!1,needsItemSize:!0,setsItemSize:!0,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:!1,$configStrict:!1,constructor:function(config){var me=this;me.id=Ext.id(null,me.type+"-"),me.initConfig(config),delete me.type,me.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(ownerContext){var changed,me=this,context=me.context;me.lastWidthModel!==ownerContext.widthModel&&(me.lastWidthModel&&(changed=!0),me.lastWidthModel=ownerContext.widthModel),me.lastHeightModel!==ownerContext.heightModel&&(me.lastWidthModel&&(changed=!0),me.lastHeightModel=ownerContext.heightModel),changed&&((context=ownerContext.context).clearTriggers(me,!1),context.clearTriggers(me,!0),me.triggerCount=0)},finishedLayout:function(ownerContext){this.lastWidthModel=ownerContext.widthModel,this.lastHeightModel=ownerContext.heightModel,this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(item){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(itemContext){return!1},isItemLayoutRoot:function(item){var sizeModel=item.getSizeModel(),width=sizeModel.width,height=sizeModel.height;return!(!item.componentLayout.lastComponentSize&&(width.calculated||height.calculated))&&(!width.shrinkWrap&&!height.shrinkWrap)},isItemShrinkWrap:function(item){return item.shrinkWrap},isRunning:function(){return!!this.ownerContext},getItemsRenderTree:function(items,renderCfgs){var i,item,itemConfig,result,length=items.length;if(length)for(result=[],i=0;i<length;++i)(item=items[i]).rendered||(renderCfgs&&void 0!==renderCfgs[item.id]?itemConfig=renderCfgs[item.id]:(this.configureItem(item),itemConfig=item.getRenderTree(),renderCfgs&&(renderCfgs[item.id]=itemConfig)),itemConfig&&result.push(itemConfig));return result},finishRender:Ext.emptyFn,finishRenderItems:function(target,items){var i,item,length=items.length;for(i=0;i<length;i++)(item=items[i]).rendering&&item.finishRender(i)},renderChildren:function(){var items=this.getLayoutItems(),target=this.getRenderTarget();this.renderItems(items,target)},renderItems:function(items,target){var item,ln=items.length,i=0;if(ln){for(Ext.suspendLayouts();i<ln;i++)(item=items[i])&&!item.rendered?this.renderItem(item,target,i):this.isValidParent(item,target,i)?this.configureItem(item):this.moveItem(item,target,i);Ext.resumeLayouts(!0)}},isValidParent:function(item,target,position){var targetDom=target&&target.dom||target,itemDom=this.getItemLayoutEl(item);return!(!itemDom||!targetDom)&&("number"==typeof position?(position=this.getPositionOffset(position),itemDom===targetDom.childNodes[position]):itemDom.parentNode===targetDom)},getItemLayoutEl:function(item){var className,dom=item.el?item.el.dom:Ext.getDom(item),parentNode=dom.parentNode;return parentNode&&(className=parentNode.className)&&-1!==className.indexOf(Ext.baseCSSPrefix+"resizable-wrap")&&(dom=dom.parentNode),dom},getPositionOffset:function(position){return position},configureItem:function(item){item.ownerLayout=this},renderItem:function(item,target,position){item.rendered||(this.configureItem(item),item.render(target,position))},moveItem:function(item,target,position){target=target.dom||target,"number"==typeof position&&(position=target.childNodes[position]),target.insertBefore(item.el.dom,position||null),item.container=Ext.get(target),this.configureItem(item)},onContentChange:function(){return this.owner.updateLayout(),!0},initLayout:function(){this.initialized=!0},setOwner:function(owner){this.owner=owner},getLayoutItems:function(){return[]},onAdd:function(item){item.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(item){var removeClasses,el=item.el,owner=this.owner;item.rendered&&(removeClasses=[].concat(this.itemCls||[]),owner.itemCls&&(removeClasses=Ext.Array.push(removeClasses,owner.itemCls)),removeClasses.length&&el.removeCls(removeClasses)),delete item.ownerLayout},afterCollapse:function(owner,animated){animated&&this.onContentChange(owner)},afterExpand:function(owner,animated){animated&&this.onContentChange(owner)},destroy:function(){var target,me=this;me.targetCls&&(target=me.getTarget())&&target.removeCls(me.targetCls),me.onDestroy(),me.callParent()},sortWeightedItems:function(items,reverseProp){for(var i=0,length=items.length;i<length;++i)items[i].$i=i;for(Ext.Array.sort(items,function(item1,item2){var ret=item2.weight-item1.weight;return ret||(ret=item1.$i-item2.$i,item1[reverseProp]&&(ret=-ret)),ret}),i=0;i<length;++i)delete items[i].$i}},function(){this.prototype.sizeModels=this.sizeModels=Ext.layout.SizeModel.sizeModels}),Ext.define("Ext.layout.container.Container",{extend:Ext.layout.Layout,alias:"layout.container",alternateClassName:"Ext.layout.ContainerLayout",mixins:[Ext.util.ElementContainer],type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:!0,usesContainerWidth:!0,usesHeight:!0,usesWidth:!0,constructor:function(){this.callParent(arguments),this.mixins.elementCt.constructor.call(this)},destroy:function(){this.callParent(),this.mixins.elementCt.destroy.call(this)},beginLayout:function(ownerContext){this.callParent(arguments),ownerContext.targetContext=ownerContext.paddingContext=ownerContext.getEl("getTarget",this),this.cacheChildItems(ownerContext)},beginLayoutCycle:function(ownerContext,firstCycle){this.callParent(arguments),firstCycle&&(this.usesContainerHeight&&++ownerContext.consumersContainerHeight,this.usesContainerWidth&&++ownerContext.consumersContainerWidth)},cacheChildItems:function(ownerContext){var context,childItems,items,length,i;if(this.needsItemSize||this.setsItemSize)for(context=ownerContext.context,childItems=ownerContext.childItems=[],length=(items=ownerContext.visibleItems=this.getVisibleItems()).length,i=0;i<length;++i)childItems.push(context.getCmp(items[i]))},cacheElements:function(){var owner=this.owner;this.attachChildEls(owner.el,owner)},calculate:function(ownerContext){var props=ownerContext.props,el=ownerContext.el;ownerContext.widthModel.shrinkWrap&&isNaN(props.width)&&ownerContext.setContentWidth(el.getWidth()),ownerContext.heightModel.shrinkWrap&&isNaN(props.height)&&ownerContext.setContentHeight(el.getHeight())},configureItem:function(item){var needsCopy,addClasses,itemCls=this.itemCls,ownerItemCls=this.owner.itemCls;item.ownerLayout=this,itemCls&&("string"==typeof itemCls?addClasses=[itemCls]:needsCopy=!!(addClasses=itemCls)),ownerItemCls&&(needsCopy&&(addClasses=Ext.Array.clone(addClasses)),addClasses=Ext.Array.push(addClasses||[],ownerItemCls)),addClasses&&item.addCls(addClasses)},doRenderBody:function(out,renderData){this.renderItems(out,renderData),this.renderContent(out,renderData)},doRenderContainer:function(out,renderData){var me=renderData.$comp.layout,tpl=me.getRenderTpl(),data=me.getRenderData();tpl.applyOut(data,out)},doRenderItems:function(out,renderData){var tree=renderData.$layout.getRenderTree();tree&&Ext.DomHelper.generateMarkup(tree,out)},finishRender:function(){var target,items,me=this;me.callParent(),me.cacheElements(),target=me.getRenderTarget(),items=me.getLayoutItems(),me.finishRenderItems(target,items)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(ownerContext,inDom){var gotWidth,gotHeight,width,height,targetContext=ownerContext.targetContext,frameInfo=targetContext.getFrameInfo(),padding=ownerContext.paddingContext.getPaddingInfo(),got=0,needed=0;return ownerContext.widthModel.shrinkWrap||(++needed,(gotWidth="number"==typeof(width=inDom?targetContext.getDomProp("width"):targetContext.getProp("width")))&&(++got,(width-=frameInfo.width+padding.width)<0&&(width=0))),ownerContext.heightModel.shrinkWrap||(++needed,(gotHeight="number"==typeof(height=inDom?targetContext.getDomProp("height"):targetContext.getProp("height")))&&(++got,(height-=frameInfo.height+padding.height)<0&&(height=0))),{width:width,height:height,needed:needed,got:got,gotAll:got===needed,gotWidth:gotWidth,gotHeight:gotHeight}},getPositionOffset:function(position){if(!this.createsInnerCt){var offset=this.owner.itemNodeOffset;offset&&(position+=offset)}return position},getLayoutItems:function(){var owner=this.owner,items=owner&&owner.items;return items&&items.items||[]},getRenderData:function(){var comp=this.owner;return{$comp:comp,$layout:this,ownerId:comp.id}},getRenderedItems:function(){var i,item,target=this.getRenderTarget(),items=this.getLayoutItems(),ln=items.length,renderedItems=[];for(i=0;i<ln;i++)(item=items[i]).rendered&&this.isValidParent(item,target,i)&&renderedItems.push(item);return renderedItems},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var renderTpl=Ext.XTemplate.getTpl(this,"renderTpl");return renderTpl.renderContent||this.owner.setupRenderTpl(renderTpl),renderTpl},getRenderTree:function(){for(var result,itemsGen,items=this.owner.items,renderCfgs={};itemsGen=items.generation,result=this.getItemsRenderTree(this.getLayoutItems(),renderCfgs),items.generation!==itemsGen;);return result},renderChildren:function(){for(var itemsGen,items,ownerItems=this.owner.items,target=this.getRenderTarget();itemsGen=ownerItems.generation,items=this.getLayoutItems(),this.renderItems(items,target),ownerItems.generation!==itemsGen;);},getScrollbarsNeeded:function(width,height,contentWidth,contentHeight){var scrollbarSize=Ext.getScrollbarSize(),hasWidth="number"==typeof width,hasHeight="number"==typeof height,needHorz=0,needVert=0;return scrollbarSize.width?(hasHeight&&height<contentHeight&&(needVert=2,width-=scrollbarSize.width),hasWidth&&width<contentWidth&&(needHorz=1,!needVert&&hasHeight&&(height-=scrollbarSize.height)<contentHeight&&(needVert=2)),needVert+needHorz):0},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var i,item,target=this.getRenderTarget(),items=this.getLayoutItems(),ln=items.length,visibleItems=[];for(i=0;i<ln;i++)(item=items[i]).rendered&&this.isValidParent(item,target,i)&&!0!==item.hidden&&!item.floated&&visibleItems.push(item);return visibleItems},getMoveAfterIndex:function(after){return this.owner.items.indexOf(after)+1},moveItemBefore:function(item,before){var toIndex,owner=this.owner,items=owner.items,index=items.indexOf(item);return item===before?item:(before?(toIndex=items.indexOf(before),-1<index&&index<toIndex&&--toIndex):toIndex=items.length,owner.insert(toIndex,item))},setupRenderTpl:function(renderTpl){renderTpl.renderBody=this.doRenderBody,renderTpl.renderContainer=this.doRenderContainer,renderTpl.renderItems=this.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(item){item.liquidLayout||++this.activeItemCount,this.callParent([item])},onRemove:function(item,isDestroying){item.liquidLayout||--this.activeItemCount,this.callParent([item,isDestroying])}}),Ext.define("Ext.layout.container.Auto",{alias:["layout.auto","layout.autocontainer"],extend:Ext.layout.container.Container,type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:!1,managePadding:!0,manageOverflow:!1,needsItemSize:!1,setsItemSize:!1,lastOverflowAdjust:{width:0,height:0},outerCtCls:Ext.baseCSSPrefix+"autocontainer-outerCt",innerCtCls:Ext.baseCSSPrefix+"autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','<tpl if="!$comp.html">role="presentation"</tpl>','class="{innerCtCls}">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(ownerContext){this.callParent(arguments),this.initContextItems(ownerContext)},beforeLayoutCycle:function(ownerContext){var comp=this.owner,inheritedState=comp.inheritedState,inheritedStateInner=comp.inheritedStateInner;inheritedState&&!inheritedState.invalid||(inheritedState=comp.getInherited(),inheritedStateInner=comp.inheritedStateInner),ownerContext.widthModel.shrinkWrap?inheritedStateInner.inShrinkWrapTable=!0:delete inheritedStateInner.inShrinkWrapTable},beginLayoutCycle:function(ownerContext){var overflowXStyle,outerCtWidth,outerCtHeight,outerCtTableLayout,inheritedStateInner,me=this,outerCt=me.outerCt,lastOuterCtWidth=me.lastOuterCtWidth||"",lastOuterCtHeight=me.lastOuterCtHeight||"",lastOuterCtTableLayout=me.lastOuterCtTableLayout||"",state=ownerContext.state;me.callParent(arguments),outerCtWidth=outerCtHeight=outerCtTableLayout="",ownerContext.widthModel.shrinkWrap||(outerCtWidth="100%",inheritedStateInner=me.owner.inheritedStateInner,overflowXStyle=me.getOverflowXStyle(ownerContext),outerCtTableLayout=inheritedStateInner.inShrinkWrapTable||"auto"===overflowXStyle||"scroll"===overflowXStyle?"":"fixed"),ownerContext.heightModel.shrinkWrap||Ext.supports.PercentageHeightOverflowBug||(outerCtHeight="100%"),outerCtWidth===lastOuterCtWidth&&!me.hasOuterCtPxWidth||(outerCt.setStyle("width",outerCtWidth),me.lastOuterCtWidth=outerCtWidth,me.hasOuterCtPxWidth=!1),outerCtTableLayout!==lastOuterCtTableLayout&&(outerCt.setStyle("table-layout",outerCtTableLayout),me.lastOuterCtTableLayout=outerCtTableLayout),outerCtHeight===lastOuterCtHeight&&!me.hasOuterCtPxHeight||(outerCt.setStyle("height",outerCtHeight),me.lastOuterCtHeight=outerCtHeight,me.hasOuterCtPxHeight=!1),me.hasInnerCtPxHeight&&(me.innerCt.setStyle("height",""),me.hasInnerCtPxHeight=!1),state.overflowAdjust=state.overflowAdjust||me.lastOverflowAdjust},calculate:function(ownerContext){var me=this,state=ownerContext.state,containerSize=me.getContainerSize(ownerContext,!0),calculatedItems=state.calculatedItems||(state.calculatedItems=!me.calculateItems||me.calculateItems(ownerContext,containerSize));me.setCtSizeIfNeeded(ownerContext,containerSize),calculatedItems&&ownerContext.hasDomProp("containerChildrenSizeDone")&&(me.calculateContentSize(ownerContext),containerSize.gotAll)?!me.manageOverflow||ownerContext.state.secondPass||me.reserveScrollbar||me.calculateOverflow(ownerContext,containerSize):me.done=!1},calculateContentSize:function(ownerContext){var containerDimensions=(ownerContext.widthModel.shrinkWrap?1:0)|(ownerContext.heightModel.shrinkWrap?2:0),calcWidth=1&containerDimensions||void 0,calcHeight=2&containerDimensions||void 0,needed=0,props=ownerContext.props;calcWidth&&(isNaN(props.contentWidth)?++needed:calcWidth=void 0),calcHeight&&(isNaN(props.contentHeight)?++needed:calcHeight=void 0),needed&&(calcWidth&&!ownerContext.setContentWidth(this.measureContentWidth(ownerContext))&&(this.done=!1),calcHeight&&!ownerContext.setContentHeight(this.measureContentHeight(ownerContext))&&(this.done=!1))},calculateOverflow:function(ownerContext){var width,height,scrollbarSize,scrollbars,xauto,yauto,targetEl,me=this;xauto="auto"===me.getOverflowXStyle(ownerContext),yauto="auto"===me.getOverflowYStyle(ownerContext),(xauto||yauto)&&(scrollbarSize=Ext.getScrollbarSize(),scrollbars=0,(targetEl=ownerContext.overflowContext.el.dom).scrollWidth>targetEl.clientWidth&&(scrollbars|=1),targetEl.scrollHeight>targetEl.clientHeight&&(scrollbars|=2),width=yauto&&2&scrollbars?scrollbarSize.width:0,height=xauto&&1&scrollbars?scrollbarSize.height:0,width===me.lastOverflowAdjust.width&&height===me.lastOverflowAdjust.height||(me.done=!1,ownerContext.invalidate({state:{overflowAdjust:{width:width,height:height},overflowState:scrollbars,secondPass:!0}})))},completeLayout:function(ownerContext){this.lastOverflowAdjust=ownerContext.state.overflowAdjust},doRenderBody:function(out,renderData){var me=renderData.$layout,XTemplate=Ext.XTemplate,beforeBodyTpl=me.beforeBodyTpl,afterBodyTpl=me.afterBodyTpl;beforeBodyTpl&&XTemplate.getTpl(me,"beforeBodyTpl").applyOut(renderData,out),this.renderItems(out,renderData),this.renderContent(out,renderData),afterBodyTpl&&XTemplate.getTpl(me,"afterBodyTpl").applyOut(renderData,out)},doRenderPadding:function(out,renderData){var me=renderData.$layout,owner=renderData.$layout.owner,padding=owner[owner.contentPaddingProperty];me.managePadding&&padding&&out.push("padding:",owner.unitizeBox(padding))},finishedLayout:function(ownerContext){var innerCt=this.innerCt;this.callParent(arguments),Ext.isIE8&&innerCt.repaint(),Ext.isOpera&&(innerCt.setStyle("position","relative"),innerCt.dom.scrollWidth,innerCt.setStyle("position",""))},getContainerSize:function(ownerContext,inDom){var size=this.callParent(arguments),overflowAdjust=ownerContext.state.overflowAdjust;return overflowAdjust&&(size.width-=overflowAdjust.width,size.height-=overflowAdjust.height),size},getRenderData:function(){var data=this.callParent();return data.innerCtCls=this.innerCtCls,data.outerCtCls=this.outerCtCls,data},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(ownerContext){return ownerContext.overflowXStyle||(ownerContext.overflowXStyle=this.owner.scrollFlags.overflowX||ownerContext.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(ownerContext){return ownerContext.overflowYStyle||(ownerContext.overflowYStyle=this.owner.scrollFlags.overflowY||ownerContext.overflowContext.getStyle("overflow-y"))},initContextItems:function(ownerContext){var target=ownerContext.target,overflowEl=this.owner.getOverflowEl();ownerContext.outerCtContext=ownerContext.getEl("outerCt",this),ownerContext.innerCtContext=ownerContext.getEl("innerCt",this),ownerContext.overflowContext=overflowEl===ownerContext.el?ownerContext:ownerContext.getEl(overflowEl),void 0!==target[target.contentPaddingProperty]&&(ownerContext.paddingContext=ownerContext.innerCtContext)},initLayout:function(){var me=this,scrollbarWidth=Ext.getScrollbarSize().width,owner=me.owner;me.callParent(),scrollbarWidth&&me.manageOverflow&&!me.hasOwnProperty("lastOverflowAdjust")&&(owner.scrollable||me.reserveScrollbar)&&(me.lastOverflowAdjust={width:scrollbarWidth,height:0})},measureContentHeight:function(ownerContext){var contentHeight=this.outerCt.getHeight(),target=ownerContext.target;return this.managePadding&&void 0===target[target.contentPaddingProperty]&&(contentHeight+=ownerContext.targetContext.getPaddingInfo().height),contentHeight},measureContentWidth:function(ownerContext){var dom,style,old,contentWidth,target;return this.chromeCellMeasureBug&&"table-cell"===(old=(style=(dom=this.innerCt.dom).style).display)&&(style.display="",dom.offsetWidth,style.display=old),Ext.isSafari&&((style=(dom=this.outerCt.dom).style).display="table-cell",dom.offsetWidth,dom.style.display=""),contentWidth=this.outerCt.getWidth(),target=ownerContext.target,this.managePadding&&void 0===target[target.contentPaddingProperty]&&(contentWidth+=ownerContext.targetContext.getPaddingInfo().width),contentWidth},setCtSizeIfNeeded:function(ownerContext,containerSize){var needsOuterHeight,needsInnerHeight,height=containerSize.height,padding=ownerContext.paddingContext.getPaddingInfo(),targetEl=this.getTarget(),overflowXStyle=this.getOverflowXStyle(ownerContext),canOverflowX="auto"===overflowXStyle||"scroll"===overflowXStyle,scrollbarSize=Ext.getScrollbarSize();height&&!ownerContext.heightModel.shrinkWrap&&(Ext.supports.PercentageHeightOverflowBug&&(needsOuterHeight=!0),Ext.isIE8&&(needsInnerHeight=!0),(needsOuterHeight||needsInnerHeight)&&canOverflowX&&targetEl.dom.scrollWidth>targetEl.dom.clientWidth&&(height=Math.max(height-scrollbarSize.height,0)),needsOuterHeight&&(ownerContext.outerCtContext.setProp("height",height+padding.height),this.hasOuterCtPxHeight=!0),needsInnerHeight&&(ownerContext.innerCtContext.setProp("height",height),this.hasInnerCtPxHeight=!0))},setupRenderTpl:function(renderTpl){this.callParent(arguments),renderTpl.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&26<=Ext.chromeVersion}),Ext.define("Ext.ZIndexManager",{alternateClassName:"Ext.WindowGroup",statics:{zBase:9e3,activeCounter:0},constructor:function(container){var me=this;me.id=Ext.id(null,"zindex-mgr-"),me.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(comp1,comp2){var ret=(comp1.alwaysOnTop||0)-(comp2.alwaysOnTop||0);return ret=ret||comp1.getActiveCounter()-comp2.getActiveCounter()}},filters:{filterFn:function(comp){return comp.isVisible()}}}),me.zIndexStack.addObserver(me),me.front=null,me.globalListeners=Ext.GlobalEvents.on({beforehide:me.onComponentShowHide,show:me.onComponentShowHide,scope:me,destroyable:!0}),container?container.isContainer?(container.on("resize",me.onContainerResize,me),me.zseed=Ext.Number.from(me.rendered?container.getEl().getStyle("zIndex"):void 0,me.getNextZSeed()),me.targetEl=container.getTargetEl(),me.container=container):(Ext.on("resize",me.onContainerResize,me),me.zseed=me.getNextZSeed(),me.targetEl=Ext.get(container)):(me.zseed=me.getNextZSeed(),Ext.onInternalReady(function(){Ext.on("resize",me.onContainerResize,me),me.targetEl=Ext.getBody()}))},getId:function(){return this.id},getNextZSeed:function(){return Ext.ZIndexManager.zBase+=1e4},setBase:function(baseZIndex){return this.zseed=baseZIndex,this.onCollectionSort()},onCollectionSort:function(){var i,comp,topModal,topVisible,me=this,oldFront=me.front,zIndex=(oldFront&&oldFront.containsFocus,me.zseed),a=me.zIndexStack.getRange(),len=a.length,doFocus=!1;for(i=0;i<len;i++)zIndex=(comp=a[i]).setZIndex(zIndex),comp.hidden||(topVisible=comp).modal&&(topModal=comp);return topVisible!==oldFront&&(oldFront&&!oldFront.destroying&&oldFront.setActive(!1),topVisible&&(doFocus=topVisible.isFocusable(!0)&&(topVisible.modal||topVisible.focusOnToFront&&!topVisible.preventFocusOnActivate),topVisible.setActive(!0,doFocus))),me.front=topVisible,topModal?me.showModalMask(topModal):me.hideModalMask(),zIndex},onComponentUpdate:function(comp){this.zIndexStack.contains(comp)&&this.zIndexStack.sort()},onComponentRender:function(comp){this.zIndexStack.itemChanged(comp,"hidden")},onComponentShowHide:function(comp){var zIndexStack=this.zIndexStack;comp.isFloating()&&!this.hidingAll&&(zIndexStack.getSource()||zIndexStack).contains(comp)&&(zIndexStack.itemChanged(comp,"hidden"),zIndexStack.sort())},register:function(comp){comp.zIndexManager&&comp.zIndexManager.unregister(comp),comp.zIndexManager=this,comp.rendered||comp.on("render",this.onComponentRender,this,{single:!0}),this.zIndexStack.add(comp)},unregister:function(comp){delete comp.zIndexManager,comp.un("render",this.onComponentRender,this),this.zIndexStack.remove(comp),this.onCollectionSort()},get:function(id){return id.isComponent?id:this.zIndexStack.get(id)},bringToFront:function(comp,preventFocus){var newFront,preventFocusSetting,zIndexStack=this.zIndexStack,oldFront=zIndexStack.last();return!(!(comp=this.get(comp))||zIndexStack.find("alwaysOnTop",!0))&&(preventFocusSetting=comp.preventFocusOnActivate,comp.preventFocusOnActivate=preventFocus,comp.setActiveCounter(++Ext.ZIndexManager.activeCounter),comp.preventFocusOnActivate=preventFocusSetting,(newFront=zIndexStack.last())===comp&&newFront!==oldFront)},sendToBack:function(comp){return(comp=this.get(comp))&&comp.setActiveCounter(0),comp||null},hideAll:function(){var i,all=this.zIndexStack.getRange(),len=all.length;for(this.hidingAll=!0,i=0;i<len;i++)all[i].hide();this.hidingAll=!1},hide:function(){var i,comp,activeElement=Ext.Element.getActiveElement(),all=this.tempHidden=this.zIndexStack.getRange(),len=all.length;for(this.focusRestoreElement=null,i=0;i<len;i++)(comp=all[i]).el.contains(activeElement)&&(this.focusRestoreElement=activeElement),comp.el.hide(),comp.hidden=!0},show:function(){var i,comp,tempHidden=this.tempHidden,len=tempHidden?tempHidden.length:0;for(i=0;i<len;i++)(comp=tempHidden[i]).el.show(),comp.hidden=!1,comp.setPosition(comp.x,comp.y);this.tempHidden=null,this.focusRestoreElement&&this.focusRestoreElement.focus()},getActive:function(){return this.zIndexStack.last()},getBy:function(fn,scope){return this.zIndexStack.filterBy(fn,scope).getRange()},each:function(fn,scope){this.zIndexStack.each(fn,scope)},eachBottomUp:function(fn,scope){var i,comp,stack=this.zIndexStack.getRange(),len=stack.length;for(i=0;i<len;i++)if((comp=stack[i]).isComponent&&!1===fn.call(scope||comp,comp))return},eachTopDown:function(fn,scope){var i,comp,stack=this.zIndexStack.getRange();for(i=stack.length;0<i--;)if((comp=stack[i]).isComponent&&!1===fn.call(scope||comp,comp))return},destroy:function(){var i,me=this,stack=me.zIndexStack.getRange(),len=stack.length;for(i=0;i<len;i++)Ext.destroy(stack[i]);me.container?me.container.un("resize",me.onContainerResize,me):me.targetEl&&Ext.un("resize",me.onContainerResize,me),Ext.destroy(me.mask,me.maskShim,me.zIndexStack,me.globalListeners),me.zIndexStack=me.container=me.targetEl=me.globalListeners=null,me.callParent()},privates:{getMaskBox:function(){var maskTarget=this.mask.maskTarget;return maskTarget.dom===document.body?{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}:maskTarget.getBox()},onContainerResize:function(){var viewSize,mask=this.mask,maskShim=this.maskShim;mask&&mask.isVisible()&&(mask.hide(),maskShim&&maskShim.hide(),viewSize=this.getMaskBox(),maskShim&&(maskShim.setSize(viewSize),maskShim.show()),mask.setSize(viewSize),mask.show())},onMaskClick:function(){this.front&&this.front.focus()},showModalMask:function(comp){var viewSize,me=this,compEl=comp.el,zIndex=compEl.getStyle("zIndex")-4,maskTarget=comp.floatParent?comp.floatParent.getTargetEl():comp.container,mask=me.mask,shim=me.maskShim;mask?me.hideModalMask():(me.mask=mask=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"mask "+Ext.baseCSSPrefix+"border-box",style:"height:0;width:0"}),mask.setVisibilityMode(Ext.Element.DISPLAY),mask.on("click",me.onMaskClick,me)),mask.maskTarget=maskTarget,viewSize=me.getMaskBox(),shim&&(shim.setStyle("zIndex",zIndex),shim.show(),shim.setBox(viewSize)),mask.setStyle("zIndex",zIndex),maskTarget.saveTabbableState({excludeRoot:compEl}),mask.show(),mask.setBox(viewSize)},hideModalMask:function(){var mask=this.mask,maskShim=this.maskShim;mask&&mask.isVisible()&&(mask.maskTarget.restoreTabbableState(),mask.maskTarget=void 0,mask.hide(),maskShim&&maskShim.hide())}}},function(){Ext.WindowManager=Ext.WindowMgr=new this}),Ext.define("Ext.container.Container",{extend:Ext.Component,xtype:"container",alternateClassName:["Ext.Container","Ext.AbstractContainer"],mixins:[Ext.mixin.Queryable,Ext.mixin.Container],renderTpl:"{%this.renderContainer(out,values)%}",autoDestroy:!0,defaultType:"panel",detachOnRemove:!0,items:void 0,layout:"auto",suspendLayout:!1,_applyDefaultsOptions:{defaults:!0,strict:!1},ariaRole:"presentation",baseCls:Ext.baseCSSPrefix+"container",layoutCounter:0,add:function(){var addingArray,items,i,length,item,pos,ret,instanced,me=this,args=Ext.Array.slice(arguments),index="number"==typeof args[0]?args.shift():-1,layout=me.getLayout(),needsLayout=!1;for(1===args.length&&Ext.isArray(args[0])?(items=args[0],addingArray=!0):items=args,me.rendered&&Ext.suspendLayouts(),ret=items=me.prepareItems(items,!0),length=items.length,addingArray||1!==length||(ret=items[0]),i=0;i<length;i++)item=items[i],pos=index<0?me.items.length:index+i,instanced=!!item.instancedCmp,delete item.instancedCmp,item.floating?((me.floatingItems||(me.floatingItems=new Ext.util.ItemCollection)).add(item),item.onAdded(me,pos,instanced),delete item.$initParent,me.hasListeners.add&&me.fireEvent("add",me,item,pos)):me.hasListeners.beforeadd&&!1===me.fireEvent("beforeadd",me,item,pos)||!1===me.onBeforeAdd(item)||(me.items.insert(pos,item),item.onAdded(me,pos,instanced),delete item.$initParent,me.onAdd(item,pos),layout.onAdd(item,pos),needsLayout=!0,me.hasListeners.add&&me.fireEvent("add",me,item,pos));return needsLayout&&me.updateLayout(),me.rendered&&Ext.resumeLayouts(!0),ret},onAdded:function(container,pos,instanced){this.callParent([container,pos,instanced]),this.containerOnAdded(container,instanced)},onRemoved:function(destroying){this.containerOnRemoved(destroying),this.callParent(arguments)},afterComponentLayout:function(){var floaterCount,i,floater,floaters=this.floatingItems;if(this.callParent(arguments),floaters)for(floaterCount=(floaters=floaters.items).length,i=0;i<floaterCount;i++)!(floater=floaters[i]).rendered&&floater.autoShow&&floater.show()},afterLayout:function(layout){var me=this,scroller=me.getScrollable();++me.layoutCounter,scroller&&1<me.layoutCounter&&scroller.refresh(),me.hasListeners.afterlayout&&me.fireEvent("afterlayout",me,layout)},beforeDestroy:function(){var c,me=this,items=me.items,floatingItems=me.floatingItems;if(items)for(;c=items.first();)me.doRemove(c,!0);if(floatingItems)for(;c=floatingItems.first();)me.doRemove(c,!0);Ext.destroy(me.layout),me.callParent()},destroy:function(){var me=this;me.callParent(),me.items&&me.items.destroy(),me.floatingItems&&me.floatingItems.destroy(),me.refs=me.items=me.floatingItems=me.layout=null},beforeRender:function(){var targetCls,me=this,layout=me.getLayout();me.preventChildDisable=!0,me.callParent(),me.preventChildDisable=!1,layout.initialized||layout.initLayout(),(targetCls=layout.targetCls)&&me.applyTargetCls(targetCls)},cascade:function(fn,scope,origArgs){var c,me=this,cs=me.items?me.items.items:[],len=cs.length,i=0,args=origArgs?origArgs.concat(me):[me],componentIndex=args.length-1;if(!1!==fn.apply(scope||me,args))for(;i<len;i++)(c=cs[i]).cascade?c.cascade(fn,scope,origArgs):(args[componentIndex]=c,fn.apply(scope||c,args));return this},contains:function(comp,deep){var result=!1;return deep?(this.cascade(function(c){if(c.contains&&c.contains(comp))return!(result=!0)}),result):this.items.contains(comp)||this.floatingItems&&this.floatingItems.contains(comp)},disable:function(silent,fromParent){var itemsToDisable,len,i,me=this,wasDisabled=me.disabled;if(me.callParent([silent,fromParent]),!fromParent&&!me.preventChildDisable&&!wasDisabled)for(len=(itemsToDisable=me.getChildItemsToDisable()).length,i=0;i<len;i++)itemsToDisable[i].disable(silent,!0);return me},enable:function(silent,fromParent){var itemsToDisable,len,i,wasDisabled=this.disabled;if(this.callParent([silent,fromParent]),wasDisabled)for(len=(itemsToDisable=this.getChildItemsToDisable()).length,i=0;i<len;i++)itemsToDisable[i].enable(silent,!0);return this},getChildByElement:function(el,deep){var item,itemEl,i=0,it=this.getRefItems(),ln=it.length;for(el=Ext.getDom(el);i<ln;i++)if((itemEl=(item=it[i]).getEl())&&(itemEl.dom===el||itemEl.contains(el)))return deep&&item.getChildByElement?item.getChildByElement(el,deep):item;return null},getComponent:function(comp){Ext.isObject(comp)&&(comp=comp.getItemId());var c=this.items.get(comp),floaters=this.floatingItems;return!c&&floaters&&"number"!=typeof comp&&(c=floaters.get(comp)),c},getFocusEl:function(){var delegate=this.getDefaultFocus();return delegate||(this.focusable?this.getTargetEl():void 0)},getLayout:function(){var layout=this.layout;return layout&&layout.isLayout||this.setLayout(layout),this.layout},getRefItems:function(deep){for(var item,items=this.items.items,len=items.length,i=0,result=[];i<len;i++)item=items[i],result[result.length]=item,deep&&item.getRefItems&&result.push.apply(result,item.getRefItems(!0));if(this.floatingItems)for(len=(items=this.floatingItems.items).length,i=0;i<len;i++)item=items[i],result[result.length]=item,deep&&item.getRefItems&&result.push.apply(result,item.getRefItems(!0));return result},getDefaultFocus:function(){var result,defaultFocus=this.defaultFocus;return defaultFocus&&(result=this.down(defaultFocus)),result},initComponent:function(){var me=this;me.callParent(),me.getLayout(),me.constructing=!0,me.initItems(),me.disabled&&(me.disabled=!1,me.disable(!0)),delete me.constructing},initItems:function(){var items=this.items;items&&items.isMixedCollection||(this.items=new Ext.util.ItemCollection,items&&(Ext.isArray(items)||(items=[items]),this.add(items)))},initInheritedState:function(inheritedState,inheritedStateInner){var me=this,layout=(me.controller,me.layout);me.session,me.viewModel,me.reference,me.referenceHolder;me.callParent([inheritedState,inheritedStateInner]),me.collapsed&&(inheritedState.collapsed=!0),me.initContainerInheritedState(inheritedState,inheritedStateInner),layout&&layout.initInheritedState&&layout.initInheritedState(inheritedState,inheritedStateInner)},insert:function(index,component){var compIdx;return component&&component.isComponent&&-1!==(compIdx=this.items.indexOf(component))?this.move(compIdx,index):this.add(index,component)},lookupComponent:function(comp){return comp.isComponent||(comp="string"==typeof comp?Ext.ComponentManager.get(comp):Ext.ComponentManager.create(comp,this.defaultType)),comp},move:function(fromIdx,toIdx){var item,me=this,items=me.items;if(fromIdx.isComponent&&(fromIdx=items.indexOf(fromIdx)),item=items.getAt(fromIdx),fromIdx!==toIdx){if(!1===(item=items.removeAt(fromIdx)))return!1;toIdx=Math.min(toIdx,items.getCount()),items.insert(toIdx,item),me.onMove(item,fromIdx,toIdx),me.hasListeners.childmove&&me.fireEvent("childmove",me,item,fromIdx,toIdx),me.updateLayout()}return item},moveBefore:function(item,before){return item!==before&&(item=this.layout.moveItemBefore(item,before)),item},moveAfter:function(item,after){var index,layout=this.layout;return item!==after&&(index=after?layout.getMoveAfterIndex(after):0,item=layout.moveItemBefore(item,this.items.getAt(index))),item},nextChild:function(child,selector){var result,items=this.items,childIndex=items.indexOf(child),i=0,len=items.length;if(-1!==childIndex)if(selector)for(;i<len&&((result=items.getAt(childIndex+i))&&!Ext.ComponentQuery.is(result,selector));i++);else result=items.getAt(childIndex+1);return result||null},onAdd:Ext.emptyFn,onBeforeAdd:function(item){var owner=item.ownerCt;owner&&owner!==this&&owner.remove(item,!1)},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){this.callParent(arguments),this.repositionFloatingItems()},onResize:function(){this.callParent(arguments),this.repositionFloatingItems()},prevChild:function(child,selector){var result,items=this.items,childIndex=items.indexOf(child),i=0,len=items.length;if(-1!==childIndex)if(selector)for(;i<len&&((result=items.getAt(childIndex-i))&&!Ext.ComponentQuery.is(result,selector));i++);else result=items.getAt(childIndex-1);return result||null},remove:function(component,autoDestroy){var c,me=this;if(!me.destroyed&&!me.destroying)return!(c=me.getComponent(component))||me.hasListeners.beforeremove&&!1===me.fireEvent("beforeremove",me,c)||(me.doRemove(c,autoDestroy),me.hasListeners.remove&&me.fireEvent("remove",me,c),me.destroying||c.floating||me.updateLayout()),c},removeAll:function(autoDestroy){var removeItems,len,item,me=this,floaters=me.floatingItems,items=[],i=0;for(len=(removeItems=floaters?me.items.items.concat(floaters.items):me.items.items.slice()).length,Ext.suspendLayouts(),me.removingAll=!0;i<len;i++)item=removeItems[i],me.remove(item,autoDestroy),item.ownerCt!==me&&items.push(item);return me.removingAll=!1,Ext.resumeLayouts(!!len),items},setLayout:function(layout){var protoLayout,type,currentLayout=this.layout,currentIsLayout=currentLayout&&currentLayout.isLayout;"string"==typeof layout&&(layout={type:layout}),type=layout.type,!currentIsLayout||type&&type!==currentLayout.type?(currentIsLayout&&currentLayout.setOwner(null),"string"==typeof(protoLayout=this.self.prototype.layout)?layout.type=type||protoLayout:Ext.merge(Ext.merge({},protoLayout),layout),(layout=this.layout=Ext.Factory.layout(layout)).setOwner(this)):(delete layout.type,currentLayout.setConfig(layout)),this.rendered&&this.updateLayout()},setActiveItem:function(item){return this.getLayout().setActiveItem(item)},privates:{applyDefaults:function(config){var me=this,defaults=me.defaults;return defaults&&(Ext.isFunction(defaults)&&(defaults=defaults.call(me,config)),Ext.isString(config)&&(config=Ext.ComponentManager.get(config)),config.isComponent?config.setConfig(defaults,null,me._applyDefaultsOptions):config=me.getConfigurator().merge(me,Ext.Object.fork(defaults),config)),config},applyReference:function(reference){return this.setupReference(reference)},applyTargetCls:function(targetCls){this.layoutTargetCls=targetCls},detachComponent:function(component){Ext.getDetachedBody().appendChild(component.getEl())},doRemove:function(component,doDestroy){doDestroy=!0===doDestroy||!1!==doDestroy&&this.autoDestroy;var me=this,layout=me.layout,hasLayout=layout&&me.rendered,isDestroying=component.destroying||doDestroy,floating=component.floating;floating?me.floatingItems.remove(component):me.items.remove(component),hasLayout&&!floating&&(layout.running&&Ext.Component.cancelLayout(component,isDestroying),layout.onRemove(component,isDestroying)),component.onRemoved(isDestroying),me.onRemove(component,isDestroying),doDestroy?component.destroy():(hasLayout&&!floating&&layout.afterRemove(component),me.detachOnRemove&&component.rendered&&me.detachComponent(component))},finishRenderChildren:function(){this.callParent();var layout=this.getLayout();layout&&layout.finishRender()},getChildItemsToDisable:function(){return this.query("[isFormField],[isFocusableContainer],button")},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},getScrollerEl:function(){return this.layout.getScrollerEl()||this.callParent()},prepareItems:function(items,applyDefaults){for(var item,i=0,len=(items=Ext.isArray(items)?items.slice():[items]).length;i<len;i++)null==(item=items[i])?(Ext.Array.erase(items,i,1),--i,--len):(applyDefaults&&(item=this.applyDefaults(item)),item.$initParent=this,item.isComponent&&(item.instancedCmp=!0),items[i]=this.lookupComponent(item),delete item.$initParent);return items},repositionFloatingItems:function(){var floaterCount,i,floater,floaters=this.floatingItems;if(floaters)for(floaterCount=(floaters=floaters.items).length,i=0;i<floaterCount;i++)(floater=floaters[i]).el&&!floater.hidden&&floater.setPosition(floater.x,floater.y)},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){for(var item,items=this.items.items,i=items.length,noMargin=this._noMargin;i--;)(item=items[i]).margin$=null,item.el.setStyle(noMargin)},setupRenderTpl:function(renderTpl){this.callParent(arguments),this.getLayout().setupRenderTpl(renderTpl)}}}),Ext.define("Ext.Img",{extend:Ext.Component,alias:["widget.image","widget.imagecomponent"],autoEl:"img",baseCls:Ext.baseCSSPrefix+"img",config:{src:null},alt:"",title:"",imgCls:"",maskOnDisable:!1,initComponent:function(){this.glyph&&(this.autoEl="div"),this.callParent()},applySrc:function(src){return src&&Ext.resolveResource(src)},getElConfig:function(){var img,glyphParts,me=this,autoEl=me.autoEl,config=me.callParent(),glyphFontFamily=Ext._glyphFontFamily,glyph=me.glyph;return"img"===autoEl||Ext.isObject(autoEl)&&"img"===autoEl.tag?img=config:me.glyph?("string"==typeof glyph&&(glyph=(glyphParts=glyph.split("@"))[0],glyphFontFamily=glyphParts[1]||glyphFontFamily),config.html="&#"+glyph+";",glyphFontFamily&&(config.style=config.style||{},config.style.fontFamily=glyphFontFamily),config.role="img"):config.cn=[img={tag:"img",id:me.id+"-img"}],img&&(me.imgCls&&(img.cls=(img.cls?img.cls+" ":"")+me.imgCls),img.src=me.src||Ext.BLANK_IMAGE_URL),me.alt?(img||config).alt=me.alt:(img||config).alt="",me.title&&((img||config).title=me.title),config},onRender:function(){var el,me=this,autoEl=me.autoEl;me.callParent(arguments),el=me.el,"img"===autoEl||Ext.isObject(autoEl)&&"img"===autoEl.tag?me.imgEl=el:me.imgEl=el.getById(me.id+"-img")},onDestroy:function(){var imgEl=this.imgEl;imgEl&&this.el!==imgEl&&imgEl.destroy(),this.imgEl=null,this.callParent()},getTitle:function(){return this.title},setTitle:function(title){var imgEl=this.imgEl;this.title=title||"",imgEl&&(imgEl.dom.title=title||"")},getAlt:function(){return this.alt},setAlt:function(alt){var imgEl=this.imgEl;this.alt=alt||"",imgEl&&(imgEl.dom.alt=alt||"")},updateSrc:function(src){var imgEl=this.imgEl;imgEl&&(imgEl.dom.src=src||Ext.BLANK_IMAGE_URL)},setGlyph:function(glyph){var glyphParts,glyphFontFamily=Ext._glyphFontFamily,old=this.glyph,el=this.el;this.glyph=glyph,this.rendered&&glyph!==old&&("string"==typeof glyph&&(glyph=(glyphParts=glyph.split("@"))[0],glyphFontFamily=glyphParts[1]||glyphFontFamily),el.dom.innerHTML="&#"+glyph+";",glyphFontFamily&&el.setStyle("font-family",glyphFontFamily))}}),Ext.define("Ext.util.StoreHolder",{mixinId:"storeholder",bindStore:function(store,initial,propertyName){propertyName=propertyName||"store";var me=this,oldStore=initial?null:me[propertyName];return store!==oldStore&&(oldStore&&(me.onUnbindStore(oldStore,initial,propertyName),me.isComponent&&"store"===propertyName&&oldStore.autoDestroy?oldStore.destroy():me.unbindStoreListeners(oldStore)),store?(me[propertyName]=store=Ext.data.StoreManager.lookup(store),me.bindStoreListeners(store),me.onBindStore(store,oldStore)):me[propertyName]=null),me},getStore:function(){return this.store},setStore:function(store){this.bindStore(store)},unbindStoreListeners:function(store){var listeners=this.storeListeners;listeners&&store.un(listeners)},bindStoreListeners:function(store){var listeners=this.getStoreListeners(store);listeners&&((listeners=Ext.apply({},listeners)).scope||(listeners.scope=this),this.storeListeners=listeners,store.on(listeners))},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn}),Ext.define("Ext.LoadMask",{extend:Ext.Component,alias:"widget.loadmask",mixins:[Ext.util.StoreHolder],isLoadMask:!0,msg:"Loading...",msgCls:Ext.baseCSSPrefix+"mask-loading",msgWrapCls:Ext.baseCSSPrefix+"mask-msg",useMsg:!0,useTargetEl:!1,cls:Ext.baseCSSPrefix+"mask",componentCls:Ext.baseCSSPrefix+"border-box",ariaRole:"status",focusable:!0,tabIndex:0,autoEl:{tag:"div",role:"status"},childEls:["msgWrapEl","msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="{[values.$comp.msgWrapCls]}">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ',Ext.baseCSSPrefix,'mask-msg-inner {childElCls}">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',Ext.baseCSSPrefix,"mask-msg-text",'{childElCls}">{msg}</div>',"</div>","</div>"],maskOnDisable:!1,skipLayout:!0,constructor:function(config){var comp,me=this;2===arguments.length?(comp=me.target=config,config=arguments[1]):comp=config.target,me.callParent([config]),comp.isComponent?(me.ownerCt=comp,me.hidden=!0,me.renderTo=me.getMaskTarget(),me.external=me.renderTo===Ext.getBody(),me.bindComponent(comp)):(comp=Ext.get(comp),me.isElement=!0,me.renderTo=me.target),me.render(me.renderTo),me.store&&me.bindStore(me.store,!0)},initRenderData:function(){var result=this.callParent(arguments);return result.msg=this.msg||"",result},onRender:function(){this.callParent(arguments),this.maskEl=this.el},bindComponent:function(comp){var me=this,listeners={scope:this,resize:me.sizeMask};me.external&&(listeners.added=me.onComponentAdded,listeners.removed=me.onComponentRemoved,comp.floating?(listeners.move=me.sizeMask,me.activeOwner=comp):comp.ownerCt&&me.onComponentAdded(comp.ownerCt)),me.mon(comp,listeners),me.external&&me.mon(Ext.GlobalEvents,{show:me.onContainerShow,hide:me.onContainerHide,expand:me.onContainerExpand,collapse:me.onContainerCollapse,scope:me})},onComponentAdded:function(owner){var me=this;delete me.activeOwner,(me.floatParent=owner).floating||(owner=owner.up("[floating]")),owner?(me.activeOwner=owner,me.mon(owner,"move",me.sizeMask,me),me.mon(owner,"tofront",me.onOwnerToFront,me)):me.preventBringToFront=!0,owner=me.floatParent.ownerCt,me.rendered&&me.isVisible()&&owner&&(me.floatOwner=owner,me.mon(owner,"afterlayout",me.sizeMask,me,{single:!0}))},onComponentRemoved:function(owner){var me=this,activeOwner=me.activeOwner,floatOwner=me.floatOwner;activeOwner&&(me.mun(activeOwner,"move",me.sizeMask,me),me.mun(activeOwner,"tofront",me.onOwnerToFront,me)),floatOwner&&me.mun(floatOwner,"afterlayout",me.sizeMask,me),delete me.activeOwner,delete me.floatOwner},afterRender:function(){this.callParent(arguments),Ext.isIE&&this.el.on("mousedown",this.onMouseDown,this),this.el.skipGarbageCollection=!0},onMouseDown:function(e){var el=this.el;e.within(el)&&(e.preventDefault(),el.focus())},onOwnerToFront:function(owner,zIndex){this.el.setStyle("zIndex",zIndex+1)},onContainerShow:function(container){this.isHierarchicallyHidden()||this.onComponentShow()},onContainerHide:function(container){this.isHierarchicallyHidden()&&this.onComponentHide()},onContainerExpand:function(container){this.isHierarchicallyHidden()||this.onComponentShow()},onContainerCollapse:function(container){this.isHierarchicallyHidden()&&this.onComponentHide()},onComponentHide:function(){this.rendered&&this.isVisible()&&(this.hide(),this.showNext=!0)},onComponentShow:function(){this.showNext&&this.show(),delete this.showNext},sizeMask:function(){var me=this,target=me.activeOwner||me.target,boxTarget=me.external?me.getOwner().el:me.getMaskTarget();me.rendered&&me.isVisible()&&(me.external&&(!me.isElement&&target.floating&&me.onOwnerToFront(target,target.el.getZIndex()),me.el.setSize(boxTarget.getSize()).alignTo(boxTarget,"tl-tl")),me.msgWrapEl.center(me.el))},bindStore:function(store,initial){var me=this;if(Ext.destroy(me.proxyListeners),me.mixins.storeholder.bindStore.apply(me,arguments),store=me.store){for(;store.getSource;)store=store.getSource();store.loadsSynchronously()||(me.proxyListeners=store.getProxy().on({exception:me.onLoad,scope:me,destroyable:!0})),store.isLoading()&&me.onBeforeLoad()}},getStoreListeners:function(store){var onLoad=this.onLoad,beforeLoad=this.onBeforeLoad,result={cachemiss:beforeLoad,cachefilled:{fn:onLoad,buffer:100}};return store.loadsSynchronously()||(result.beforeload=beforeLoad,result.load=onLoad),result},onDisable:function(){this.callParent(arguments),this.loading&&this.onLoad()},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var owner=this.getOwner();return this.isElement?this.target:this.useTargetEl?owner.getTargetEl():owner.getMaskTarget()||Ext.getBody()},onBeforeLoad:function(){var origin,me=this,owner=me.getOwner();me.disabled||(me.loading=!0,owner.componentLayoutCounter?me.maybeShow():(origin=owner.afterComponentLayout,owner.afterComponentLayout=function(){(owner.afterComponentLayout=origin).apply(owner,arguments),me.maybeShow()}))},maybeShow:function(){var owner=this.getOwner();owner.isVisible(!0)?this.loading&&owner.rendered&&this.show():this.showNext=!0},hide:function(){var me=this,ownerCt=me.ownerCt;return me.isElement?(ownerCt.unmask(),void me.fireEvent("hide",this)):(ownerCt&&(ownerCt.enableTabbing(),ownerCt.setMasked(!1)),delete me.showNext,me.callParent(arguments))},show:function(){return this.isElement?(this.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls),void this.fireEvent("show",this)):this.callParent(arguments)},afterShow:function(){var me=this,ownerCt=me.ownerCt;me.loading=!0,me.callParent(arguments),ownerCt.disableTabbing(),ownerCt.setMasked(!0),me.el.restoreTabbableState(),me.syncMaskState()},syncMaskState:function(){var me=this,ownerCt=me.ownerCt,el=me.el;me.isVisible()&&(me.hasOwnProperty("msgWrapCls")&&(el.dom.className=me.msgWrapCls),me.useMsg?me.msgTextEl.setHtml(me.msg):me.msgEl.hide(),me.shim||Ext.useShims?el.enableShim(null,!0):el.disableShim(),ownerCt.el.contains(Ext.Element.getActiveElement())&&me.focus(),me.sizeMask())},onLoad:function(){this.loading=!1,this.hide()},beforeDestroy:function(){this.ownerCt=null,this.bindStore(null),this.callParent()},onDestroy:function(){this.isElement&&this.ownerCt.unmask(),this.callParent()}}),Ext.define("Ext.layout.component.Component",{extend:Ext.layout.Layout,type:"component",isComponentLayout:!0,nullBox:{},usesContentHeight:!0,usesContentWidth:!0,usesHeight:!0,usesWidth:!0,widthCache:{},heightCache:{},beginLayoutCycle:function(ownerContext,firstCycle){var ownerLayout,v,width,height,me=this,owner=me.owner,ownerCtContext=ownerContext.ownerCtContext,heightModel=ownerContext.heightModel,widthModel=ownerContext.widthModel,body=owner.el.dom===document.body,lastBox=owner.lastBox||me.nullBox,lastSize=owner.el.lastBox||me.nullBox,dirty=!body,isTopLevel=ownerContext.isTopLevel;me.callParent([ownerContext,firstCycle]),firstCycle&&(me.usesContentWidth&&++ownerContext.consumersContentWidth,me.usesContentHeight&&++ownerContext.consumersContentHeight,me.usesWidth&&++ownerContext.consumersWidth,me.usesHeight&&++ownerContext.consumersHeight,ownerCtContext&&!ownerCtContext.hasRawContent&&(ownerLayout=owner.ownerLayout)&&(ownerLayout.usesWidth&&++ownerContext.consumersWidth,ownerLayout.usesHeight&&++ownerContext.consumersHeight)),widthModel.configured?(width=owner[widthModel.names.width],isTopLevel&&widthModel.calculatedFrom&&(width=lastBox.width),body||(dirty=me.setWidthInDom||(firstCycle?width!==lastSize.width:widthModel.constrained)),ownerContext.setWidth(width,dirty)):isTopLevel&&(widthModel.calculated&&(v=lastBox.width,ownerContext.setWidth(v,v!==lastSize.width)),v=lastBox.x,ownerContext.setProp("x",v,v!==lastSize.x)),heightModel.configured?(height=owner[heightModel.names.height],isTopLevel&&heightModel.calculatedFrom&&(height=lastBox.height),body||(dirty=firstCycle?height!==lastSize.height:heightModel.constrained),ownerContext.setHeight(height,dirty)):isTopLevel&&(heightModel.calculated&&(v=lastBox.height,ownerContext.setHeight(v,v!==lastSize.height)),v=lastBox.y,ownerContext.setProp("y",v,v!==lastSize.y))},finishedLayout:function(ownerContext){var len,i,elContext,lastBox,props,elementChildren=ownerContext.children,owner=this.owner;if(elementChildren)for(len=elementChildren.length,i=0;i<len;i++)(elContext=elementChildren[i]).el.lastBox=elContext.props;ownerContext.previousSize=this.lastComponentSize,this.lastComponentSize=owner.el.lastBox=props=ownerContext.props,(lastBox=owner.lastBox||(owner.lastBox={})).x=props.x,lastBox.y=props.y,lastBox.width=props.width,lastBox.height=props.height,lastBox.invalid=!1,this.callParent([ownerContext])},notifyOwner:function(ownerContext){var currentSize=this.lastComponentSize,prevSize=ownerContext.previousSize;this.owner.afterComponentLayout(currentSize.width,currentSize.height,prevSize?prevSize.width:void 0,prevSize?prevSize.height:void 0)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(ownerContext){var target,targetInfo=this.targetInfo;return targetInfo||(target=ownerContext.getEl("getTarget",this),this.targetInfo=targetInfo={padding:target.getPaddingInfo(),border:target.getBorderInfo()}),targetInfo},measureAutoDimensions:function(ownerContext,dimensions){var isContainer,zeroWidth,zeroHeight,size,temp,key,cache,me=this,owner=me.owner,containerLayout=owner.layout,heightModel=ownerContext.heightModel,widthModel=ownerContext.widthModel,boxParent=ownerContext.boxParent,isBoxParent=ownerContext.isBoxParent,target=ownerContext.target,props=ownerContext.props,ret={gotWidth:!1,gotHeight:!1,isContainer:isContainer=!ownerContext.hasRawContent},hv=dimensions||3,needed=0,got=0;return widthModel.shrinkWrap&&ownerContext.consumersContentWidth?(++needed,zeroWidth=!(1&hv),isContainer?zeroWidth?(ret.contentWidth=0,ret.gotWidth=!0,++got):void 0!==(ret.contentWidth=ownerContext.getProp("contentWidth"))&&(ret.gotWidth=!0,++got):"number"==typeof(size=props.contentWidth)?(ret.contentWidth=size,ret.gotWidth=!0,++got):(zeroWidth||!!ownerContext.hasDomProp("containerChildrenSizeDone")&&(!(!isBoxParent&&boxParent&&!boxParent.widthModel.shrinkWrap)||boxParent.hasDomProp("width")))&&(temp=zeroWidth?0:containerLayout&&containerLayout.measureContentWidth?containerLayout.measureContentWidth(ownerContext):target.cacheWidth?(key=target.xtype+"-"+target.ui,(cache=me.widthCache)[key]||(cache[key]=me.measureContentWidth(ownerContext))):me.measureContentWidth(ownerContext),isNaN(ret.contentWidth=temp)||(ownerContext.setContentWidth(temp,!0),ret.gotWidth=!0,++got))):widthModel.natural&&ownerContext.consumersWidth&&(++needed,"number"==typeof(size=props.width)?(ret.width=size,ret.gotWidth=!0,++got):(!(!isBoxParent&&boxParent)||boxParent.hasDomProp("width"))&&(isNaN(ret.width=me.measureOwnerWidth(ownerContext))||(ownerContext.setWidth(ret.width,!1),ret.gotWidth=!0,++got))),heightModel.shrinkWrap&&ownerContext.consumersContentHeight?(++needed,zeroHeight=!(2&hv),isContainer?zeroHeight?(ret.contentHeight=0,ret.gotHeight=!0,++got):void 0!==(ret.contentHeight=ownerContext.getProp("contentHeight"))&&(ret.gotHeight=!0,++got):"number"==typeof(size=props.contentHeight)?(ret.contentHeight=size,ret.gotHeight=!0,++got):(zeroHeight||!!ownerContext.hasDomProp("containerChildrenSizeDone")&&(!!owner.noWrap||(widthModel.shrinkWrap?!(!isBoxParent&&boxParent&&!boxParent.widthModel.shrinkWrap)||boxParent.hasDomProp("width"):(ownerContext.bodyContext||ownerContext).hasDomProp("width"))))&&(temp=zeroHeight?0:containerLayout&&containerLayout.measureContentHeight?containerLayout.measureContentHeight(ownerContext):target.cacheHeight?(key=target.xtype+"-"+target.ui,(cache=me.heightCache)[key]||(cache[key]=me.measureContentHeight(ownerContext))):me.measureContentHeight(ownerContext),isNaN(ret.contentHeight=temp)||(ownerContext.setContentHeight(temp,!0),ret.gotHeight=!0,++got))):heightModel.natural&&ownerContext.consumersHeight&&(++needed,"number"==typeof(size=props.height)?(ret.height=size,ret.gotHeight=!0,++got):(!(!isBoxParent&&boxParent)||boxParent.hasDomProp("width"))&&(isNaN(ret.height=me.measureOwnerHeight(ownerContext))||(ownerContext.setHeight(ret.height,!1),ret.gotHeight=!0,++got))),boxParent&&ownerContext.onBoxMeasured(),ret.gotAll=got===needed,ret},measureContentWidth:function(ownerContext){return ownerContext.el.getWidth()-ownerContext.getFrameInfo().width},measureContentHeight:function(ownerContext){return ownerContext.el.getHeight()-ownerContext.getFrameInfo().height},measureOwnerHeight:function(ownerContext){return ownerContext.el.getHeight()},measureOwnerWidth:function(ownerContext){return ownerContext.el.getWidth()}}),Ext.define("Ext.layout.component.Auto",{alias:"layout.autocomponent",extend:Ext.layout.component.Component,type:"autocomponent",setHeightInDom:!1,setWidthInDom:!1,waitForOuterHeightInDom:!1,waitForOuterWidthInDom:!1,beginLayoutCycle:function(ownerContext,firstCycle){var lastWidthModel=this.lastWidthModel,lastHeightModel=this.lastHeightModel,el=this.owner.el;this.callParent(arguments),lastWidthModel&&lastWidthModel.fixed&&ownerContext.widthModel.shrinkWrap&&el.setWidth(null),lastHeightModel&&lastHeightModel.fixed&&ownerContext.heightModel.shrinkWrap&&el.setHeight(null)},calculate:function(ownerContext){var width,height,me=this,measurement=me.measureAutoDimensions(ownerContext),heightModel=ownerContext.heightModel,widthModel=ownerContext.widthModel;measurement.gotWidth?widthModel.shrinkWrap?me.publishOwnerWidth(ownerContext,measurement.contentWidth):me.publishInnerWidth&&me.publishInnerWidth(ownerContext,measurement.width):!widthModel.auto&&me.publishInnerWidth&&(void 0===(width=me.waitForOuterWidthInDom?ownerContext.getDomProp("width"):ownerContext.getProp("width"))?me.done=!1:me.publishInnerWidth(ownerContext,width)),measurement.gotHeight?heightModel.shrinkWrap?me.publishOwnerHeight(ownerContext,measurement.contentHeight):me.publishInnerHeight&&me.publishInnerHeight(ownerContext,measurement.height):!heightModel.auto&&me.publishInnerHeight&&(void 0===(height=me.waitForOuterHeightInDom?ownerContext.getDomProp("height"):ownerContext.getProp("height"))?me.done=!1:me.publishInnerHeight(ownerContext,height)),measurement.gotAll||(me.done=!1)},calculateOwnerHeightFromContentHeight:function(ownerContext,contentHeight){return contentHeight+ownerContext.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(ownerContext,contentWidth){return contentWidth+ownerContext.getFrameInfo().width},publishOwnerHeight:function(ownerContext,contentHeight){var constrainedHeight,dirty,heightModel,me=this,owner=me.owner,height=me.calculateOwnerHeightFromContentHeight(ownerContext,contentHeight);isNaN(height)?me.done=!1:((constrainedHeight=Ext.Number.constrain(height,owner.minHeight,owner.maxHeight))===height?dirty=me.setHeightInDom:(heightModel=me.sizeModels[constrainedHeight<height?"constrainedMax":"constrainedMin"],height=constrainedHeight,ownerContext.heightModel.calculatedFromShrinkWrap?ownerContext.heightModel=heightModel:ownerContext.invalidate({heightModel:heightModel})),ownerContext.setHeight(height,dirty))},publishOwnerWidth:function(ownerContext,contentWidth){var constrainedWidth,dirty,widthModel,me=this,owner=me.owner,width=me.calculateOwnerWidthFromContentWidth(ownerContext,contentWidth);isNaN(width)?me.done=!1:((constrainedWidth=Ext.Number.constrain(width,owner.minWidth,owner.maxWidth))===width?dirty=me.setWidthInDom:(widthModel=me.sizeModels[constrainedWidth<width?"constrainedMax":"constrainedMin"],width=constrainedWidth,ownerContext.widthModel.calculatedFromShrinkWrap?ownerContext.widthModel=widthModel:ownerContext.invalidate({widthModel:widthModel})),ownerContext.setWidth(width,dirty))}}),Ext.define("Ext.layout.component.ProgressBar",{alias:["layout.progressbar"],extend:Ext.layout.component.Auto,type:"progressbar",beginLayout:function(ownerContext){var i,textEls;if(this.callParent(arguments),!ownerContext.textEls)if((textEls=this.owner.textEl).isComposite)for(ownerContext.textEls=[],i=(textEls=textEls.elements).length;i--;)ownerContext.textEls[i]=ownerContext.getEl(Ext.get(textEls[i]));else ownerContext.textEls=[ownerContext.getEl("textEl")]},calculate:function(ownerContext){var i,textEls,width;if(this.callParent(arguments),Ext.isNumber(width=ownerContext.getProp("width")))for(width-=ownerContext.getBorderInfo().width,i=(textEls=ownerContext.textEls).length;i--;)textEls[i].setWidth(width);else this.done=!1}}),Ext.define("Ext.ProgressBar",{extend:Ext.Component,xtype:"progressbar",mixins:[Ext.ProgressBase],baseCls:Ext.baseCSSPrefix+"progress",animate:!1,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initRenderData:function(){var value=this.value||0;return Ext.apply(this.callParent(),{internalText:!this.hasOwnProperty("textEl"),text:this.text||"&#160;",percentage:100*value})},onRender:function(){var me=this;me.callParent(arguments),me.textEl?(me.textEl=Ext.get(me.textEl),me.updateText(me.text)):me.textEl=me.el.select("."+me.baseCls+"-text")},updateValue:function(value){this.updateProgress(value,Math.round(100*value)+"%")},updateProgress:function(value,text,animate){value=value||0;var me=this,oldValue=me.value,textTpl=me.getTextTpl();return me.value=value=value||0,null!=text?me.updateText(text):textTpl&&me.updateText(textTpl.apply({value:value,percent:100*value})),me.rendered&&!me.destroyed&&(!0===animate||!1!==animate&&me.animate?(me.bar.stopAnimation(),me.bar.animate(Ext.apply({from:{width:100*oldValue+"%"},to:{width:100*value+"%"}},me.animate))):me.bar.setStyle("width",100*value+"%")),me.fireEvent("update",me,value,text),me},updateText:function(text){var me=this;return me.text=text,me.rendered&&me.textEl.setHtml(me.text),me},applyText:function(text){this.updateText(text)},getText:function(){return this.text},wait:function(o){var scope,me=this;return me.waitTimer||(o=o||{},(scope=me).updateText(o.text),me.waitTimer=Ext.TaskManager.start({run:function(i){var inc=o.increment||10;--i,me.updateProgress(100/inc*((i+inc)%inc+1)*.01,null,o.animate)},interval:o.interval||1e3,duration:o.duration,onStop:function(){o.fn&&o.fn.apply(o.scope||me),me.reset()},scope:scope})),me},isWaiting:function(){return null!==this.waitTimer},reset:function(hide){return this.updateProgress(0),this.clearTimer(),!0===hide&&this.hide(),this},clearTimer:function(){this.waitTimer&&(this.waitTimer.onStop=null,Ext.TaskManager.stop(this.waitTimer),this.waitTimer=null)},onDestroy:function(){var me=this,bar=me.bar;me.clearTimer(),me.rendered&&(me.textEl.isComposite&&me.textEl.clear(),Ext.destroyMembers(me,"textEl","progressBar"),bar&&me.animate&&bar.stopAnimation()),me.callParent()}}),Ext.define("Ext.dom.ButtonElement",{extend:Ext.dom.Element,setSize:function(width,height,animate){var component=this.component;return this.callParent([width,height,animate]),component.btnWrap.setStyle("table-layout",width&&"auto"!==width?"fixed":""),component.btnEl.setStyle("height",height&&"auto"!==height?"auto":""),this},setStyle:function(prop,value){var width,height,component=this.component;return this.callParent([prop,value]),prop&&(("width"===prop||"string"!=typeof prop&&"width"in prop)&&(width=value||prop.width,component.btnWrap.setStyle("table-layout",width&&"auto"!==width?"fixed":"")),("height"===prop||"string"!=typeof prop&&"height"in prop)&&(height=value||prop.height,component.btnEl.setStyle("height",height&&"auto"!==height?"auto":""))),this},setHeight:function(height,animate){return this.callParent([height,animate]),this.component.btnEl.setStyle("height",height&&"auto"!==height?"auto":""),this},setWidth:function(width,animate){return this.callParent([width,animate]),this.component.btnWrap.setStyle("table-layout",width&&"auto"!==width?"fixed":""),this}}),Ext.define("Ext.button.Manager",{singleton:!0,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,init:function(){this.initialized||(Ext.getDoc().on({mouseup:this.onDocumentMouseUp,scope:this}),this.initialized=!0)},onButtonMousedown:function(button,e){var pressed=this.pressedButton;pressed&&pressed.onMouseUp(e),this.pressedButton=button},onDocumentMouseUp:function(e){var pressed=this.pressedButton;pressed&&(pressed.onMouseUp(e),this.pressedButton=null)},toggleGroup:function(btn,state){if(state){var i,g=this.groups[btn.toggleGroup],length=g.length;for(i=0;i<length;i++)g[i]!==btn&&g[i].toggle(!1)}},register:function(btn){var groups=this.groups,group=groups[btn.toggleGroup];this.init(),btn.toggleGroup&&((group=group||(groups[btn.toggleGroup]=[])).push(btn),btn.on("toggle",this.toggleGroup,this))},unregister:function(btn){if(btn.toggleGroup){var group=this.groups[btn.toggleGroup];group&&(Ext.Array.remove(group,btn),btn.un("toggle",this.toggleGroup,this))}},getPressed:function(groupName){var len,group=this.groups[groupName],i=0;if(group)for(len=group.length;i<len;i++)if(!0===group[i].pressed)return group[i];return null}}),Ext.define("Ext.menu.Manager",{singleton:!0,alternateClassName:"Ext.menu.MenuMgr",groups:{},visible:[],constructor:function(){var me=this;me.onShow=function(){return delete me.onShow,Ext.on("mousedown",me.checkActiveMenus,me),me.onShow.apply(me,arguments)}},checkActiveMenus:function(e){var i,menu,allMenus=this.visible,len=allMenus.length,mousedownCmp=Ext.Component.fromElement(e.target);if(len)for(allMenus=allMenus.slice(),i=0;i<len;++i)(menu=allMenus[i]).owns(e)||mousedownCmp&&mousedownCmp.isMenuCheckItem&&mousedownCmp.menu===menu||menu.hide()},onShow:function(menu){menu.floating&&Ext.Array.include(this.visible,menu)},onHide:function(menu){menu.floating&&Ext.Array.remove(this.visible,menu)},hideAll:function(){var i,allMenus=this.visible,len=allMenus.length,result=!1;if(len)for(allMenus=allMenus.slice(),i=0;i<len;i++)allMenus[i].hide(),result=!0;return result},get:function(menu,config){var result;return"string"==typeof menu?(result=Ext.getCmp(menu))instanceof Ext.menu.Menu&&(menu=result):Ext.isArray(menu)?(config=Ext.apply({items:menu},config),menu=new Ext.menu.Menu(config)):menu.isComponent||(config=Ext.apply({},menu,config),menu=Ext.ComponentManager.create(config,"menu")),menu},registerCheckable:function(menuItem){var groups=this.groups,groupId=menuItem.group;groupId&&(groups[groupId]||(groups[groupId]=[]),groups[groupId].push(menuItem))},unregisterCheckable:function(menuItem){var groups=this.groups,groupId=menuItem.group;groupId&&Ext.Array.remove(groups[groupId],menuItem)},onCheckChange:function(menuItem,state){var group,ln,curr,groups=this.groups,groupId=menuItem.group,i=0;if(groupId&&state)for(ln=(group=groups[groupId]).length;i<ln;i++)(curr=group[i])!==menuItem&&curr.setChecked(!1)}}),Ext.define("Ext.util.ClickRepeater",{extend:Ext.util.Observable,constructor:function(el,config){var me=this;me.el=Ext.get(el),me.el.unselectable(),Ext.apply(me,config),me.callParent(),me.disabled||(me.disabled=!0,me.enable()),me.handler&&me.on("click",me.handler,me.scope||me)},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,enable:function(){this.disabled&&(this.el.on("mousedown",this.handleMouseDown,this),Ext.isIE8&&this.el.on("dblclick",this.handleDblClick,this),(this.preventDefault||this.stopDefault)&&this.el.on("click",this.eventOptions,this)),this.disabled=!1},disable:function(force){!force&&this.disabled||(clearTimeout(this.timer),this.pressedCls&&this.el.removeCls(this.pressedCls),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.clearListeners()),this.disabled=!0},setDisabled:function(disabled){this[disabled?"disable":"enable"]()},eventOptions:function(e){this.preventDefault&&e.preventDefault(),this.stopDefault&&e.stopEvent()},destroy:function(){this.disable(!0),this.callParent()},handleDblClick:function(e){clearTimeout(this.timer),this.fireEvent("mousedown",this,e),this.fireEvent("click",this,e)},handleMouseDown:function(e){clearTimeout(this.timer),this.pressedCls&&this.el.addCls(this.pressedCls),this.mousedownTime=new Date,Ext.getDoc().on("mouseup",this.handleMouseUp,this),this.el.on("mouseout",this.handleMouseOut,this),this.fireEvent("mousedown",this,e),this.fireEvent("click",this,e),this.accelerate&&(this.delay=400),this.timer=Ext.defer(this.click,this.delay||this.interval,this,[e]),this.mousedownPreventDefault&&e.preventDefault(),this.mousedownStopEvent&&e.stopEvent()},click:function(e){this.fireEvent("click",this,e),this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12e3):this.interval,this,[e])},easeOutExpo:function(t,b,c,d){return t===d?b+c:c*(1-Math.pow(2,-10*t/d))+b},handleMouseOut:function(){clearTimeout(this.timer),this.pressedCls&&this.el.removeCls(this.pressedCls),this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(e){this.el.un("mouseover",this.handleMouseReturn,this),this.pressedCls&&this.el.addCls(this.pressedCls),this.click(e)},handleMouseUp:function(e){clearTimeout(this.timer),this.el.un("mouseover",this.handleMouseReturn,this),this.el.un("mouseout",this.handleMouseOut,this),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.pressedCls&&this.el.removeCls(this.pressedCls),this.fireEvent("mouseup",this,e)}}),Ext.define("Ext.button.Button",{alias:"widget.button",extend:Ext.Component,mixins:[Ext.mixin.Queryable,Ext.util.KeyboardInteractive],alternateClassName:"Ext.Button",config:{iconAlign:"left",text:null,textAlign:"center",arrowVisible:!0},isButton:!0,_syncFrameHeight:!0,liquidLayout:!0,hidden:!1,disabled:!1,pressed:!1,tabIndex:0,enableToggle:!1,menuAlign:"tl-bl?",showEmptyMenu:!1,clickEvent:"click",preventDefault:!0,handleMouseEvents:!0,tooltipType:"qtip",baseCls:Ext.baseCSSPrefix+"btn",hrefTarget:"_blank",destroyMenu:!0,focusable:!0,ariaRole:"button",keyHandlers:{SPACE:"onEnterKey",ENTER:"onEnterKey",DOWN:"onDownKey"},defaultBindProperty:"text",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl","arrowEl"],publishes:{pressed:1},_btnWrapCls:Ext.baseCSSPrefix+"btn-wrap",_btnCls:Ext.baseCSSPrefix+"btn-button",_baseIconCls:Ext.baseCSSPrefix+"btn-icon-el",_glyphCls:Ext.baseCSSPrefix+"btn-glyph",_innerCls:Ext.baseCSSPrefix+"btn-inner",_textCls:Ext.baseCSSPrefix+"btn-text",_noTextCls:Ext.baseCSSPrefix+"btn-no-text",_hasIconCls:Ext.baseCSSPrefix+"btn-icon",_pressedCls:Ext.baseCSSPrefix+"btn-pressed",overCls:Ext.baseCSSPrefix+"btn-over",_disabledCls:Ext.baseCSSPrefix+"btn-disabled",_menuActiveCls:Ext.baseCSSPrefix+"btn-menu-active",_arrowElCls:Ext.baseCSSPrefix+"btn-arrow-el",_focusCls:Ext.baseCSSPrefix+"btn-focus",_arrowFocusCls:Ext.baseCSSPrefix+"arrow-focus",renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl><tpl if="split"><span id="{id}-arrowEl" class="{arrowElCls}" data-ref="arrowEl" role="button" hidefocus="on" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="arrowElAttributes"> {$}="{.}"</tpl>>{arrowElText}</span></tpl>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></span>',scale:"small",allowedScales:["small","medium","large"],arrowAlign:"right",arrowCls:"arrow",maskOnDisable:!1,shrinkWrap:3,frame:!0,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){this.disabled||this.doNavigate()},doNavigate:function(){"_blank"===this.hrefTarget?window.open(this.getHref(),this.hrefTarget):location.href=this.getHref()},_triggerRegion:{},initComponent:function(){var me=this;me.addCls(Ext.baseCSSPrefix+"unselectable"),me.callParent(),me.menu&&(me.split=!0,me.setMenu(me.menu,!1,!0)),me.url&&(me.href=me.url),me.configuredWithPreventDefault=me.hasOwnProperty("preventDefault"),me.href&&!me.configuredWithPreventDefault&&(me.preventDefault=!1),Ext.isString(me.toggleGroup)&&""!==me.toggleGroup&&(me.enableToggle=!0),me.html&&!me.text&&(me.text=me.html,delete me.html)},getElConfig:function(){var me=this,config=me.callParent(),href=me.getHref(),hrefTarget=me.hrefTarget;return"a"===config.tag&&(me.disabled||(config.tabIndex=me.tabIndex),href&&(me.disabled||(config.href=href,hrefTarget&&(config.target=hrefTarget)))),me.ariaStaticRoles[me.ariaRole]||(me.menu&&!me.isSplitButton&&(config["aria-haspopup"]=!0),me.enableToggle&&(config["aria-pressed"]=!!me.pressed)),config},beforeRender:function(){this.callParent(),this.pressed&&this.addCls(this._pressedCls)},initRenderData:function(){return Ext.apply(this.callParent(),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(menu,destroyMenu,initial){var instanced,ariaAttr,me=this,oldMenu=me.menu,ariaDom=me.isSplitButton?me.arrowEl&&me.arrowEl.dom:me.ariaEl.dom;oldMenu&&!initial&&(!1!==destroyMenu&&me.destroyMenu&&oldMenu.destroy(),oldMenu.ownerCmp=null),menu?(instanced=menu.isMenu,(menu=Ext.menu.Manager.get(menu,{ownerCmp:me})).setOwnerCmp(me,instanced),menu.menuClickBuffer=250,me.mon(menu,{scope:me,show:me.onMenuShow,hide:me.onMenuHide}),!oldMenu&&me.getArrowVisible()&&(me.split=!0,me.rendered&&(me._addSplitCls(),me.updateLayout())),me.menu=menu,ariaDom?(ariaDom.setAttribute("aria-haspopup",!0),ariaDom.setAttribute("aria-owns",menu.id)):((ariaAttr=me.isSplitButton?me.ariaArrowElAttributes||(me.ariaArrowElAttributes={}):me.ariaRenderAttributes||(me.ariaRenderAttributes={}))["aria-haspopup"]=!0,ariaAttr["aria-owns"]=menu.id)):(me.rendered?(ariaDom.removeAttribute("aria-haspopup"),ariaDom.removeAttribute("aria-owns"),me._removeSplitCls(),me.updateLayout()):(ariaAttr=me.isSplitButton?me.ariaArrowElAttributes:me.ariaRenderAttributes)&&(delete ariaAttr["aria-haspopup"],delete ariaAttr["aria-owns"]),me.split=!1,me.menu=null)},onRender:function(){var addOnclick,btn,btnListeners,me=this;me.callParent(arguments),btn=me.el,me.tooltip&&me.setTooltip(me.tooltip,!0),me.handleMouseEvents?(btnListeners={scope:me,mouseover:me.onMouseOver,mouseout:me.onMouseOut,mousedown:me.onMouseDown},me.split&&(btnListeners.mousemove=me.onMouseMove)):btnListeners={scope:me},Ext.supports.Touch&&(btnListeners.touchstart=me.onTouchStart),me.repeat?me.mon(new Ext.util.ClickRepeater(btn,Ext.isObject(me.repeat)?me.repeat:{}),"click",me.onRepeatClick,me):btnListeners[me.clickEvent]?addOnclick=!0:btnListeners[me.clickEvent]=me.onClick,me.mon(btn,btnListeners),me.hasFrameTable()&&me.mon(me.frameTable,"click",me.frameTableListener,me),addOnclick&&me.mon(btn,me.clickEvent,me.onClick,me),Ext.button.Manager.register(me)},onFocusLeave:function(e){this.callParent([e]),this.menu&&this.menu.hide()},getTemplateArgs:function(){var glyphParts,me=this,btnCls=me._btnCls,baseIconCls=me._baseIconCls,iconAlign=me.getIconAlign(),glyph=me.glyph,glyphFontFamily=Ext._glyphFontFamily,text=me.text,hasIcon=me._hasIcon(),hasIconCls=me._hasIconCls;return"string"==typeof glyph&&(glyph=(glyphParts=glyph.split("@"))[0],glyphFontFamily=glyphParts[1]),{split:me.isSplitButton,innerCls:me._innerCls,splitCls:me.getArrowVisible()?me.getSplitCls():"",iconUrl:me.icon,iconCls:me.iconCls,glyph:glyph,glyphCls:glyph?me._glyphCls:"",glyphFontFamily:glyphFontFamily,text:text||"&#160;",closeText:me.closeText,textCls:text?me._textCls:"",noTextCls:text?"":me._noTextCls,hasIconCls:hasIcon?hasIconCls:"",btnWrapCls:me._btnWrapCls,btnWrapStyle:me.width?"table-layout:fixed;":"",btnElStyle:me.height?"height:auto;":"",btnCls:btnCls,baseIconCls:baseIconCls,iconBeforeText:"left"===iconAlign||"top"===iconAlign,iconAlignCls:hasIcon?hasIconCls+"-"+iconAlign:"",textAlignCls:btnCls+"-"+me.getTextAlign(),arrowElCls:me._arrowElCls,tabIndex:me.tabIndex}},renderIcon:function(values){return this.getTpl("iconTpl").apply(values)},setHref:function(href){var dom,me=this,hrefTarget=me.hrefTarget;me.href=href,me.configuredWithPreventDefault||(me.preventDefault=!href),me.rendered&&(dom=me.el.dom,!href||me.disabled?(dom.removeAttribute("href"),dom.removeAttribute("hrefTarget")):(dom.href=me.getHref(),hrefTarget&&(dom.target=hrefTarget)))},getHref:function(){var href=this.href;return!!href&&Ext.urlAppend(href,Ext.Object.toQueryString(Ext.apply({},this.params,this.baseParams)))},setParams:function(params){var dom,me=this;me.params=params,me.rendered&&(dom=me.el.dom,me.disabled?dom.removeAttribute("href"):dom.href=me.getHref()||"")},getSplitCls:function(){var me=this;return me.split?me.baseCls+"-"+me.arrowCls+" "+me.baseCls+"-"+me.arrowCls+"-"+me.arrowAlign:""},setIcon:function(icon){icon=icon||"";var me=this,btnIconEl=me.btnIconEl,oldIcon=me.icon||"";return(me.icon=icon)!==oldIcon&&(btnIconEl&&(btnIconEl.setStyle("background-image",icon?"url("+icon+")":""),me._syncHasIconCls(),me.didIconStateChange(oldIcon,icon)&&me.updateLayout()),me.fireEvent("iconchange",me,oldIcon,icon)),me},setIconCls:function(cls){cls=cls||"";var me=this,btnIconEl=me.btnIconEl,oldCls=me.iconCls||"";return oldCls!==(me.iconCls=cls)&&(btnIconEl&&(btnIconEl.removeCls(oldCls),btnIconEl.addCls(cls),me._syncHasIconCls(),me.didIconStateChange(oldCls,cls)&&me.updateLayout()),me.fireEvent("iconchange",me,oldCls,cls)),me},setGlyph:function(glyph){glyph=glyph||0;var fontFamily,glyphParts,me=this,btnIconEl=me.btnIconEl,oldGlyph=me.glyph,glyphCls=me._glyphCls;return me.glyph=glyph,btnIconEl&&("string"==typeof glyph&&(glyph=(glyphParts=glyph.split("@"))[0],fontFamily=glyphParts[1]||Ext._glyphFontFamily),glyph?oldGlyph!==glyph&&(btnIconEl.dom.innerHTML="&#"+glyph+";",btnIconEl.addCls(glyphCls)):(btnIconEl.dom.innerHTML="",btnIconEl.removeCls(glyphCls)),fontFamily&&btnIconEl.setStyle("font-family",fontFamily),me._syncHasIconCls(),me.didIconStateChange(oldGlyph,glyph)&&me.updateLayout()),me.fireEvent("glyphchange",me,me.glyph,oldGlyph),me},setTooltip:function(tooltip,initial){var me=this;return me.rendered?(initial&&tooltip||me.clearTip(),tooltip&&(Ext.quickTipsActive&&Ext.isObject(tooltip)?(Ext.tip.QuickTipManager.register(Ext.apply({target:me.el.id},tooltip)),me.tooltip=tooltip):me.el.dom.setAttribute(me.getTipAttr(),tooltip))):me.tooltip=tooltip,me},updateIconAlign:function(align,oldAlign){var btnEl,btnIconEl,hasIconCls,me=this;me.rendered&&(btnEl=me.btnEl,btnIconEl=me.btnIconEl,hasIconCls=me._hasIconCls,oldAlign&&btnEl.removeCls(hasIconCls+"-"+oldAlign),btnEl.addCls(hasIconCls+"-"+align),"top"===align||"left"===align?btnEl.insertFirst(btnIconEl):btnEl.appendChild(btnIconEl),me.updateLayout())},updateTextAlign:function(align,oldAlign){var btnEl=this.btnEl,btnCls=this._btnCls;this.rendered&&(btnEl.removeCls(btnCls+"-"+oldAlign),btnEl.addCls(btnCls+"-"+align))},getTipAttr:function(){return"qtip"===this.tooltipType?"data-qtip":"title"},getRefItems:function(deep){var items,menu=this.menu;return menu&&(items=menu.getRefItems(deep)).unshift(menu),items||[]},clearTip:function(){var el=this.el;Ext.quickTipsActive&&Ext.isObject(this.tooltip)?Ext.tip.QuickTipManager.unregister(el):el.dom.removeAttribute(this.getTipAttr())},beforeDestroy:function(){this.rendered&&this.clearTip(),Ext.destroy(this.repeater),this.callParent()},onDestroy:function(){var me=this,menu=me.menu;me.rendered&&(Ext.destroy(me.keyMap),delete me.keyMap),menu&&me.destroyMenu&&(me.menu=Ext.destroy(menu)),Ext.button.Manager.unregister(me),me.callParent()},setHandler:function(handler,scope){return this.handler=handler,1<arguments.length&&(this.scope=scope),this},updateText:function(text,oldText){text=null==text?"":String(text),oldText=oldText||"";var me=this,btnInnerEl=me.btnInnerEl,btnEl=me.btnEl;me.rendered&&(btnInnerEl.setHtml(text||"&#160;"),btnEl[text?"addCls":"removeCls"](me._textCls),btnEl[text?"removeCls":"addCls"](me._noTextCls),me.updateLayout()),me.fireEvent("textchange",me,oldText,text)},didIconStateChange:function(old,current){var currentEmpty=Ext.isEmpty(current);return Ext.isEmpty(old)?!currentEmpty:currentEmpty},click:function(e){return this.onClick(e)},setPressed:function(pressed){return this.toggle(!1!==pressed)},toggle:function(state,suppressEvent){var me=this,ariaDom=me.ariaEl.dom;return state=void 0===state?!me.pressed:!!state,!1!==me.fireEvent("beforetoggle",me,state)&&state!==me.pressed&&(me[state?"addCls":"removeCls"](me._pressedCls),me.pressed=state,ariaDom&&ariaDom.setAttribute("aria-pressed",state),suppressEvent||(me.fireEvent("toggle",me,state),Ext.callback(me.toggleHandler,me.scope,[me,state],0,me),me.reference&&me.publishState&&me.publishState("pressed",state))),me},maybeShowMenu:function(e){this.menu&&this.showMenu(e)},showMenu:function(clickEvent){var me=this,menu=me.menu,isPointerEvent=!clickEvent||clickEvent.pointerType;return menu&&me.rendered&&(me.tooltip&&Ext.quickTipsActive&&"title"!==me.getTipAttr()&&Ext.tip.QuickTipManager.getQuickTip().cancelShow(me.el),menu.isVisible()?isPointerEvent?menu.hide():menu.focus():(!clickEvent||me.showEmptyMenu||0<menu.items.getCount())&&(menu.autoFocus=!isPointerEvent,menu.showBy(me.el,me.menuAlign))),me},hideMenu:function(){return this.hasVisibleMenu()&&this.menu.hide(),this},hasVisibleMenu:function(){var menu=this.menu;return menu&&menu.rendered&&menu.isVisible()},onRepeatClick:function(repeat,e){this.onClick(e)},onTouchStart:function(e){this.doPreventDefault(e)},onEnterKey:function(e){return this.onClick(e),e.stopEvent(),!1},onClick:function(e){var me=this;me.doPreventDefault(e),"keydown"!==e.type&&e.button||me.disabled||(me.doToggle(),me.maybeShowMenu(e),me.fireHandler(e))},doPreventDefault:function(e){e&&(this.preventDefault||this.disabled&&this.getHref())&&e.preventDefault()},fireHandler:function(e){var me=this;!1===me.fireEvent("click",me,e)||me.destroyed||Ext.callback(me.handler,me.scope,[me,e],0,me)},doToggle:function(){!this.enableToggle||!1===this.allowDepress&&this.pressed||this.toggle()},onMouseOver:function(e){this.disabled||e.within(this.el,!0,!0)||this.onMouseEnter(e)},onMouseOut:function(e){e.within(this.el,!0,!0)||(this.overMenuTrigger&&this.onMenuTriggerOut(e),this.onMouseLeave(e))},onMouseMove:function(e){var me=this,over=me.overMenuTrigger;me.split&&(me.isWithinTrigger(e)?over||me.onMenuTriggerOver(e):over&&me.onMenuTriggerOut(e))},isWithinTrigger:function(e){var overPosition,triggerRegion,el=this.el;return(overPosition="right"===this.arrowAlign?e.getX()-this.getX():e.getY()-el.getY())>(triggerRegion=this.getTriggerRegion()).begin&&overPosition<triggerRegion.end},getTriggerRegion:function(){var me=this,region=me._triggerRegion,isRight="right"===me.arrowAlign,getEnd=isRight?"getRight":"getBottom",btnSize=isRight?me.getWidth():me.getHeight();return region.begin=btnSize-(me.el[getEnd]()-me.btnEl[getEnd]()),region.end=btnSize,region},onMouseEnter:function(e){this.fireEvent("mouseover",this,e)},onMouseLeave:function(e){this.fireEvent("mouseout",this,e)},onMenuTriggerOver:function(e){var me=this,arrowTip=me.arrowTooltip;me.overMenuTrigger=!0,me.split&&arrowTip&&me.btnWrap.dom.setAttribute(me.getTipAttr(),arrowTip),me.fireEvent("menutriggerover",me,me.menu,e)},onMenuTriggerOut:function(e){var me=this;delete me.overMenuTrigger,me.split&&me.arrowTooltip&&me.btnWrap.dom.setAttribute(me.getTipAttr(),""),me.fireEvent("menutriggerout",me,me.menu,e)},onEnable:function(){var me=this,href=me.href,hrefTarget=me.hrefTarget,dom=me.el.dom;me.callParent(),me.removeCls(me._disabledCls),dom.setAttribute("tabIndex",me.tabIndex),href&&(dom.href=href),hrefTarget&&(dom.target=hrefTarget)},onDisable:function(){var me=this,dom=me.el.dom;me.callParent(),me.addCls(me._disabledCls),me.removeCls(me.overCls),dom.removeAttribute("tabIndex"),me.href&&dom.removeAttribute("href"),me.hrefTarget&&dom.removeAttribute("target")},setScale:function(scale){var me=this,ui=me.ui.replace("-"+me.scale,"");if(!Ext.Array.contains(me.allowedScales,scale))throw"#setScale: scale must be an allowed scale ("+me.allowedScales.join(", ")+")";me.scale=scale,me.setUI(ui)},setUI:function(ui){this.scale&&!ui.match(this.scale)&&(ui=ui+"-"+this.scale),this.callParent([ui])},onMouseDown:function(e){var me=this;!Ext.isIE&&"touch"!==e.pointerType||Ext.defer(function(){var focusEl=me.getFocusEl();focusEl&&!e.defaultPrevented&&focusEl.focus()},1),me.disabled||0!==e.button||(Ext.button.Manager.onButtonMousedown(me,e),me.addCls(me._pressedCls))},onMouseUp:function(e){this.destroyed||0!==e.button||this.pressed||this.removeCls(this._pressedCls)},onMenuShow:function(){var me=this;me.addCls(me._menuActiveCls),me.fireEvent("menushow",me,me.menu)},onMenuHide:function(e){var me=this;me.removeCls(me._menuActiveCls),me.fireEvent("menuhide",me,me.menu)},onDownKey:function(e){if(this.menu&&!this.disabled)return this.showMenu(e),e.stopEvent(),!1},updateArrowVisible:function(visible){var me=this;return me.rendered&&(visible?(me.menu||me.isSplitButton)&&(me.split=!0,me._addSplitCls()):(me._removeSplitCls(),me.split=!1)),visible},privates:{addOverCls:function(){this.disabled||this.addCls(this.overCls)},_addSplitCls:function(){this.btnWrap.addCls(this.getSplitCls())},getTdCls:function(){return Ext.baseCSSPrefix+"button-"+this.ui+"-"+this.scale+"-cell"},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){this.btnWrap.removeCls(this.getSplitCls())},_syncHasIconCls:function(){var btnEl=this.btnEl,hasIconCls=this._hasIconCls;btnEl&&btnEl[this._hasIcon()?"addCls":"removeCls"]([hasIconCls,hasIconCls+"-"+this.iconAlign])},_hasIcon:function(){return!!(this.icon||this.iconCls||this.glyph)},wrapPrimaryEl:function(dom){this.el=new Ext.dom.ButtonElement(dom),this.callParent([dom])}}}),Ext.define("Ext.panel.Bar",{extend:Ext.container.Container,vertical:!1,_verticalSides:{left:1,right:1},initComponent:function(){var me=this,vertical=me.vertical;me.dock=me.dock||(vertical?"left":"top"),me.layout=Ext.apply(vertical?{type:"vbox",align:"middle",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},me.layout),this.callParent()},onAdded:function(container,pos,instanced){this.initOrientation(),this.callParent([container,pos,instanced])},onRemoved:function(destroying){this.removeClsWithUI(this.uiCls),this.callParent([destroying])},beforeRender:function(){!this.forceOrientation&&this.ownerCt||this.initOrientation(),this.callParent()},setDock:function(dock){var layout,vertical,me=this;dock!==me.dock&&(Ext.suspendLayouts(),me.clearOrientation(),me.callParent([dock]),me.initOrientation(),vertical=me.vertical,(layout=me.layout).setVertical(vertical),layout.setAlignRoundingMethod(vertical?"ceil":"floor"),Ext.resumeLayouts(!0))},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?"vertical":"horizontal",this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var me=this,dock=me.dock,vertical=me.vertical=dock?dock in me._verticalSides:me.vertical;me.addClsWithUI([vertical?"vertical":"horizontal",me.getDockName()])}}}),Ext.define("Ext.panel.Title",{extend:Ext.Component,xtype:"title",isTitle:!0,noWrap:!0,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{role:"presentation",unselectable:"on"},textElRole:"presentation",tabIndex:0,childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="textElRole"> role="{textElRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></div>',_textAlignClasses:{left:Ext.baseCSSPrefix+"title-align-left",center:Ext.baseCSSPrefix+"title-align-center",right:Ext.baseCSSPrefix+"title-align-right"},_iconAlignClasses:{top:Ext.baseCSSPrefix+"title-icon-top",right:Ext.baseCSSPrefix+"title-icon-right",bottom:Ext.baseCSSPrefix+"title-icon-bottom",left:Ext.baseCSSPrefix+"title-icon-left"},_rotationClasses:{0:Ext.baseCSSPrefix+"title-rotate-none",1:Ext.baseCSSPrefix+"title-rotate-right",2:Ext.baseCSSPrefix+"title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:Ext.baseCSSPrefix+"title",_titleSuffix:"-title",_glyphCls:Ext.baseCSSPrefix+"title-glyph",_iconWrapCls:Ext.baseCSSPrefix+"title-icon-wrap",_baseIconCls:Ext.baseCSSPrefix+"title-icon",_itemCls:Ext.baseCSSPrefix+"title-item",_textCls:Ext.baseCSSPrefix+"title-text",afterComponentLayout:function(){var lastBox,lastX,el,rotation=this.getRotation();rotation&&!Ext.isIE8&&(el=this.el,lastX=(lastBox=this.lastBox).x,el.setStyle(this._getVerticalAdjustDirection(),lastX+(1===rotation?lastBox.width:-lastBox.height)+"px")),this.callParent()},onRender:function(){var rotation=this.getRotation(),el=this.el;this.callParent(),rotation&&el.setVertical(this._rotationAngles[rotation]),Ext.supports.FixedTableWidthBug&&(el._needsTableWidthFix=!0)},applyText:function(text){return text=text||"&#160;"},beforeRender:function(){var me=this;me.callParent(),me.addCls(me._rotationClasses[me.getRotation()]),me.addCls(me._textAlignClasses[me.getTextAlign()])},getIconMarkup:function(){return this.getTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var glyphParts,me=this,icon=me.getIcon(),iconCls=me.getIconCls(),glyph=me.getGlyph(),glyphFontFamily=Ext._glyphFontFamily,iconAlign=me.getIconAlign();return"string"==typeof glyph&&(glyph=(glyphParts=glyph.split("@"))[0],glyphFontFamily=glyphParts[1]),{id:me.id,ui:me.ui,itemCls:me._itemCls,iconUrl:icon,iconCls:iconCls,iconWrapCls:me._iconWrapCls,baseIconCls:me._baseIconCls,iconAlignCls:me._iconAlignClasses[iconAlign],glyph:glyph,glyphCls:glyph?me._glyphCls:"",glyphFontFamily:glyphFontFamily}},initRenderData:function(){var iconAlign,renderData,me=this;return renderData=Ext.apply({text:me.getText(),textElRole:me.textElRole,id:me.id,ui:me.ui,itemCls:me._itemCls,textCls:me._textCls,iconMarkup:null,iconBeforeTitle:null},me.callParent()),me._hasIcon()&&(iconAlign=me.getIconAlign(),renderData.iconMarkup=me.getIconMarkup(),renderData.iconBeforeTitle="top"===iconAlign||"left"===iconAlign),renderData},onAdded:function(container,pos,instanced){var suffix=this._titleSuffix,baseCls=container.baseCls;this.addCls([baseCls+suffix,baseCls+suffix+"-"+container.ui]),this.callParent([container,pos,instanced])},updateGlyph:function(glyph,oldGlyph){glyph=glyph||0;var iconEl,fontFamily,glyphParts,me=this,glyphCls=me._glyphCls;me.glyph=glyph,me.rendered&&(me._syncIconVisibility(),iconEl=me.iconEl,"string"==typeof glyph&&(glyph=(glyphParts=glyph.split("@"))[0],fontFamily=glyphParts[1]||Ext._glyphFontFamily),glyph?oldGlyph!==glyph&&(iconEl.dom.innerHTML="&#"+glyph+";",iconEl.addCls(glyphCls)):(iconEl.dom.innerHTML="",iconEl.removeCls(glyphCls)),fontFamily&&iconEl.setStyle("font-family",fontFamily),me._didIconStateChange(oldGlyph,glyph)&&me.updateLayout())},updateIcon:function(icon,oldIcon){icon=icon||"";var me=this;me.rendered&&icon!==oldIcon&&(me._syncIconVisibility(),me.iconEl.setStyle("background-image",icon?"url("+icon+")":""),me._didIconStateChange(oldIcon,icon)&&me.updateLayout())},updateIconAlign:function(align,oldAlign){var el,iconAlignClasses,me=this,iconWrapEl=me.iconWrapEl;me.iconWrapEl&&(el=me.el,iconAlignClasses=me._iconAlignClasses,oldAlign&&iconWrapEl.removeCls(iconAlignClasses[oldAlign]),iconWrapEl.addCls(iconAlignClasses[align]),"top"===align||"left"===align?el.insertFirst(iconWrapEl):el.appendChild(iconWrapEl),me.updateLayout())},updateIconCls:function(cls,oldCls){cls=cls||"";var iconEl,me=this;me.rendered&&oldCls!==cls&&(me._syncIconVisibility(),iconEl=me.iconEl,oldCls&&iconEl.removeCls(oldCls),iconEl.addCls(cls),me._didIconStateChange(oldCls,cls)&&me.updateLayout())},updateRotation:function(rotation,oldRotation){var el,rotationClasses,me=this;me.rendered&&(el=me.el,rotationClasses=me._rotationClasses,me.removeCls(rotationClasses[oldRotation]),me.addCls(rotationClasses[rotation]),el.setHorizontal(),rotation&&el.setVertical(me._rotationAngles[rotation]),el.setStyle({right:"",left:"",top:"",height:"",width:""}),me.lastBox=null,me.updateLayout())},updateText:function(text){this.rendered&&(this.textEl.setHtml(text),this.updateLayout())},updateTextAlign:function(align,oldAlign){var me=this,textAlignClasses=me._textAlignClasses;me.rendered&&(oldAlign&&me.removeCls(textAlignClasses[oldAlign]),me.addCls(textAlignClasses[align]),me.updateLayout())},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(old,current){var currentEmpty=Ext.isEmpty(current);return Ext.isEmpty(old)?!currentEmpty:currentEmpty},_hasIcon:function(){return!!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var isBefore,iconAlign,me=this,el=me.el,hasIcon=me._hasIcon(),iconWrapEl=me.iconWrapEl;hasIcon&&!iconWrapEl&&(isBefore="left"===(iconAlign=me.iconAlign)||"top"===iconAlign,el.dom.insertAdjacentHTML(isBefore?"afterbegin":"beforeend",me.getIconMarkup()),iconWrapEl=me.iconWrapEl=el[isBefore?"first":"last"](),me.iconEl=iconWrapEl.first()),iconWrapEl&&iconWrapEl.setDisplayed(hasIcon)}}}),Ext.define("Ext.panel.Tool",{extend:Ext.Component,xtype:"tool",isTool:!0,baseCls:Ext.baseCSSPrefix+"tool",disabledCls:Ext.baseCSSPrefix+"tool-disabled",toolPressedCls:Ext.baseCSSPrefix+"tool-pressed",toolOverCls:Ext.baseCSSPrefix+"tool-over",childEls:["toolEl"],renderTpl:['<div id="{id}-toolEl" data-ref="toolEl" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"></div>'],toolOwner:null,tooltipType:"qtip",stopEvent:!0,ariaRole:"button",focusable:!0,tabIndex:0,keyHandlers:{SPACE:"onClick",ENTER:"onClick"},cacheHeight:!0,cacheWidth:!0,initComponent:function(){var me=this;me.type=me.type||me.id,Ext.applyIf(me.renderData,{baseCls:me.baseCls,type:me.type}),me.tooltip=me.tooltip||me.qtip,me.callParent()},afterRender:function(){var tip,me=this;me.callParent(arguments),me.el.on({click:me.onClick,mousedown:me.onMouseDown,mouseover:me.onMouseOver,mouseout:me.onMouseOut,scope:me}),(tip=me.tooltip)&&me.setTooltip(tip)},tipAttrs:{qtip:"data-qtip"},setTooltip:function(tooltip,type){var attr,me=this,oldTip=me.tooltip,oldType=me.tooltipType,id=me.id,el=me.el;oldTip&&Ext.quickTipsActive&&Ext.isObject(oldTip)&&Ext.tip.QuickTipManager.unregister(id),me.tooltip=tooltip,type&&(me.tooltipType=type),tooltip&&(Ext.quickTipsActive&&Ext.isObject(tooltip)?Ext.tip.QuickTipManager.register(Ext.apply({target:id},tooltip)):el&&(type&&oldType&&type!==oldType&&(attr=me.tipAttrs[oldType]||"title",el.dom.removeAttribute(attr)),attr=me.tipAttrs[type||oldType]||"title",el.dom.setAttribute(attr,tooltip)),"title"!==attr&&me.ariaRole&&"presentation"!==me.ariaRole&&(el?el.dom.setAttribute("aria-label",tooltip):(me.ariaRenderAttributes=me.ariaRenderAttributes||{},me.ariaRenderAttributes["aria-label"]=tooltip)))},setType:function(type){var me=this,oldType=me.type;return me.type=type,me.rendered?(oldType&&me.toolEl.removeCls(me.baseCls+"-"+oldType),me.toolEl.addCls(me.baseCls+"-"+type)):me.renderData.type=type,me},onDestroy:function(){this.keyMap;this.setTooltip(null),delete this.toolOwner,this.callParent()},privates:{onClick:function(e,target){var me=this;return!me.disabled&&("keydown"!==e.type&&me.el.removeCls(me.toolPressedCls+" "+me.toolOverCls),!1!==me.stopEvent&&e.stopEvent(),me.handler?Ext.callback(me.handler,me.scope,[e,target,me.ownerCt,me],0,me):me.callback&&Ext.callback(me.callback,me.scope,[me.toolOwner||me.ownerCt,me,e],0,me),me.fireEvent("click",me,e,me.toolOwner||me.ownerCt),!0)},onMouseDown:function(e){if(e.preventDefault(),this.disabled)return!1;this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled)return!1;this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}}),Ext.define("Ext.util.KeyMap",{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(config){var me=this;1!==arguments.length||"string"==typeof config||config.dom||config.tagName||config===document||config.isComponent?me.legacyConstructor.apply(me,arguments):(Ext.apply(me,config),me.bindings=[],me.target.isComponent||(me.target=Ext.get(me.target)),me.binding?me.addBinding(me.binding):config.key&&me.addBinding(config),me.enable())},legacyConstructor:function(el,binding,eventName){Ext.apply(this,{target:Ext.get(el),eventName:eventName||this.eventName,bindings:[]}),binding&&this.addBinding(binding),this.enable()},addBinding:function(binding){var i,len,me=this,keyCode=binding.key;if(me.processing&&(me.bindings=me.bindings.slice(0)),Ext.isArray(binding))for(i=0,len=binding.length;i<len;i++)me.addBinding(binding[i]);else me.bindings.push(Ext.apply({keyCode:me.processKeys(keyCode)},binding))},removeBinding:function(binding){var i,item,keys,me=this,bindings=me.bindings,len=bindings.length;for(me.processing&&(me.bindings=bindings.slice(0)),keys=me.processKeys(binding.key),i=0;i<len;++i)if(((item=bindings[i]).fn||item.handler)===(binding.fn||binding.handler)&&item.scope===binding.scope&&binding.alt===item.alt&&binding.crtl===item.crtl&&binding.shift===item.shift&&Ext.Array.equals(item.keyCode,keys))return void Ext.Array.erase(me.bindings,i,1)},processKeys:function(keyCode){var key,keys,keyString,len,i,processed=!1;if(keyCode.test)return keyCode;if(Ext.isString(keyCode)){for(keys=[],i=0,len=(keyString=keyCode.toUpperCase()).length;i<len;++i)keys.push(keyString.charCodeAt(i));keyCode=keys,processed=!0}if(Ext.isArray(keyCode)||(keyCode=[keyCode]),!processed)for(i=0,len=keyCode.length;i<len;++i)key=keyCode[i],Ext.isString(key)&&(keyCode[i]=key.toUpperCase().charCodeAt(0));return keyCode},handleTargetEvent:function(event){var bindings,i,len,result,me=this;if(me.enabled&&(i=0,len=(bindings=me.bindings).length,event=me.processEvent.apply(me.processEventScope||me,arguments))){if(me.lastKeyEvent=event,me.ignoreInputFields&&Ext.fly(event.target).isInputField())return;if(!event.getKey)return event;for(me.processing=!0;i<len;++i)if(!1===(result=me.processBinding(bindings[i],event)))return me.processing=!1,result;me.processing=!1}},processEvent:Ext.identityFn,processBinding:function(binding,event){if(this.checkModifiers(binding,event)){var i,len,result,key=event.getKey(),handler=binding.fn||binding.handler,scope=binding.scope||this,keyCode=binding.keyCode,defaultEventAction=binding.defaultEventAction;if(keyCode.test){if(keyCode.test(String.fromCharCode(event.getCharCode()))&&(!0!==(result=handler.call(scope,key,event))&&defaultEventAction&&event[defaultEventAction](),!1===result))return result}else if(keyCode.length)for(i=0,len=keyCode.length;i<len;++i)if(key===keyCode[i]){if(!0!==(result=handler.call(scope,key,event))&&defaultEventAction&&event[defaultEventAction](),!1===result)return result;break}}},checkModifiers:function(binding,event){for(var val,key,keys=["shift","ctrl","alt"],i=0,len=keys.length;i<len;++i)if(void 0!==(val=binding[key=keys[i]])&&val!==event[key+"Key"])return!1;return!0},on:function(key,fn,scope){var keyCode,shift,ctrl,alt;Ext.isObject(key)&&!Ext.isArray(key)?(keyCode=key.key,shift=key.shift,ctrl=key.ctrl,alt=key.alt):keyCode=key,this.addBinding({key:keyCode,shift:shift,ctrl:ctrl,alt:alt,fn:fn,scope:scope})},un:function(key,fn,scope){var keyCode,shift,ctrl,alt;Ext.isObject(key)&&!Ext.isArray(key)?(keyCode=key.key,shift=key.shift,ctrl=key.ctrl,alt=key.alt):keyCode=key,this.removeBinding({key:keyCode,shift:shift,ctrl:ctrl,alt:alt,fn:fn,scope:scope})},isEnabled:function(){return this.enabled},enable:function(){var me=this;me.enabled||(me.target.on(me.eventName,me.handleTargetEvent,me,{capture:me.capture,priority:me.priority}),me.enabled=!0)},disable:function(){var me=this;me.enabled&&(me.target.removeListener(me.eventName,me.handleTargetEvent,me),me.enabled=!1)},setDisabled:function(disabled){disabled?this.disable():this.enable()},destroy:function(removeTarget){var me=this,target=me.target;me.bindings=[],me.disable(),removeTarget&&target.destroy(),delete me.target,me.callParent()}}),Ext.define("Ext.util.KeyNav",{alternateClassName:"Ext.KeyNav",disabled:!1,defaultEventAction:!1,forceKeyDown:!1,eventName:"keypress",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(config){2!==arguments.length?this.doConstruction(config):this.legacyConstructor.apply(this,arguments)},legacyConstructor:function(el,config){this.doConstruction(Ext.apply({target:el},config))},doConstruction:function(config){var map,me=this,keymapCfg={target:config.target,ignoreInputFields:config.ignoreInputFields,eventName:me.getKeyEvent("forceKeyDown"in config?config.forceKeyDown:me.forceKeyDown,config.eventName),capture:config.capture};me.map&&me.map.destroy(),me.initConfig(config),config.processEvent&&(keymapCfg.processEvent=config.processEvent,keymapCfg.processEventScope=config.processEventScope||me),config.priority&&(keymapCfg.priority=config.priority),config.keyMap?map=me.map=config.keyMap:(map=me.map=new Ext.util.KeyMap(keymapCfg),me.destroyKeyMap=!0),this.addBindings(config),map.disable(),config.disabled||map.enable()},addBindings:function(bindings){var keyName,binding,keyCode,me=this,map=me.map,keyCodes=Ext.util.KeyNav.keyOptions,defaultScope=bindings.scope||me;for(keyName in bindings)binding=bindings[keyName],null!=(keyCode=keyCodes[keyName])&&(keyName=keyCode),!binding||1!==keyName.length&&isNaN(keyName=parseInt(keyName,10))||("function"==typeof binding&&(binding={handler:binding,defaultEventAction:void 0!==bindings.defaultEventAction?bindings.defaultEventAction:me.defaultEventAction}),map.addBinding({key:keyName,ctrl:binding.ctrl,shift:binding.shift,alt:binding.alt,handler:Ext.Function.bind(me.handleEvent,binding.scope||defaultScope,[binding.handler||binding.fn,me],!0),defaultEventAction:void 0!==binding.defaultEventAction?binding.defaultEventAction:me.defaultEventAction}))},handleEvent:function(keyCode,event,handler,keyNav){return keyNav.lastKeyEvent=event,handler.call(this,event)},destroy:function(removeEl){this.destroyKeyMap&&this.map.destroy(removeEl),delete this.map,this.callParent()},enable:function(){this.map&&(this.map.enable(),this.disabled=!1)},disable:function(){this.map&&this.map.disable(),this.disabled=!0},setDisabled:function(disabled){this.map.setDisabled(disabled),this.disabled=disabled},getKeyEvent:function(forceKeyDown,configuredEventName){return forceKeyDown||Ext.supports.SpecialKeyDownRepeat&&!configuredEventName?"keydown":configuredEventName||this.eventName}}),Ext.define("Ext.util.FocusableContainer",{extend:Ext.Mixin,mixinConfig:{id:"focusablecontainer",before:{onAdd:"onFocusableChildAdd",onRemove:"onFocusableChildRemove",destroy:"destroyFocusableContainer",onFocusEnter:"onFocusEnter"},after:{afterRender:"initFocusableContainer",onFocusLeave:"onFocusLeave",afterShow:"activateFocusableContainerEl"}},isFocusableContainer:!0,enableFocusableContainer:!0,activeChildTabIndex:0,inactiveChildTabIndex:-1,privates:{initFocusableContainer:function(clearChildren){var items,i,len;if(this.enableFocusableContainer)clearChildren=null==clearChildren||clearChildren,this.doInitFocusableContainer(clearChildren);else for(i=0,len=(items=this.getFocusables()).length;i<len;i++)items[i].focusableContainer=null},doInitFocusableContainer:function(clearChildren){var el,me=this;el=me.getFocusableContainerEl(),clearChildren&&me.clearFocusables(),me.findNextFocusableChild({step:1,beforeRender:!0})&&me.activateFocusableContainerEl(el),me.focusableContainerMouseListener=me.mon(el,"mousedown",me.onFocusableContainerMousedown,me),me.focusableKeyNav=me.createFocusableContainerKeyNav(el)},createFocusableContainerKeyNav:function(el){var me=this;return new Ext.util.KeyNav(el,{eventName:"keydown",ignoreInputFields:!0,scope:me,tab:me.onFocusableContainerTabKey,enter:me.onFocusableContainerEnterKey,space:me.onFocusableContainerSpaceKey,up:me.onFocusableContainerUpKey,down:me.onFocusableContainerDownKey,left:me.onFocusableContainerLeftKey,right:me.onFocusableContainerRightKey})},destroyFocusableContainer:function(){this.enableFocusableContainer&&this.doDestroyFocusableContainer()},doDestroyFocusableContainer:function(){var me=this;me.keyNav&&me.keyNav.destroy(),me.focusableContainerMouseListener&&me.focusableContainerMouseListener.destroy(),me.focusableKeyNav=me.focusableContainerMouseListener=null},getFocusables:function(){return this.items.items},initDefaultFocusable:function(beforeRender){var items,item,i,len,tabIdx,activeIndex=this.activeChildTabIndex,haveFocusable=!1;if(len=(items=this.getFocusables()).length){for(i=0;i<len;i++)if((item=items[i]).focusable&&!item.disabled&&(haveFocusable=!0,null!=(tabIdx=item.getTabIndex())&&activeIndex<=tabIdx))return item;if(haveFocusable)return(item=this.findNextFocusableChild({beforeRender:beforeRender,items:items,step:!0}))&&this.activateFocusable(item),item}},clearFocusables:function(){var item,i,items=this.getFocusables(),len=items.length;for(i=0;i<len;i++)(item=items[i]).focusable&&!item.disabled&&this.deactivateFocusable(item)},activateFocusable:function(child,newTabIndex){var activeIndex=null!=newTabIndex?newTabIndex:this.activeChildTabIndex;child.setTabIndex(activeIndex)},deactivateFocusable:function(child,newTabIndex){var inactiveIndex=null!=newTabIndex?newTabIndex:this.inactiveChildTabIndex;child.setTabIndex(inactiveIndex)},onFocusableContainerTabKey:function(){return!0},onFocusableContainerEnterKey:function(){return!0},onFocusableContainerSpaceKey:function(){return!0},onFocusableContainerUpKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!1)},onFocusableContainerDownKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!0)},onFocusableContainerLeftKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!1)},onFocusableContainerRightKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!0)},getFocusableFromEvent:function(e){return Ext.Component.fromElement(e.getTarget())},moveChildFocus:function(e,forward){var child=this.getFocusableFromEvent(e);return this.focusChild(child,forward,e)},focusChild:function(child,forward){var nextChild=this.findNextFocusableChild({child:child,step:forward});return nextChild&&nextChild.focus(),nextChild},findNextFocusableChild:function(options){var items,item,child,step,idx,i,len,beforeRender=options.beforeRender;for(items=options.items||this.getFocusables(),step=null!=options.step?options.step:1,child=options.child,idx=Ext.Array.indexOf(items,child),step=!0===step?1:!1===step?-1:step,len=items.length,i=0<step?idx<len?idx+step:0:0<idx?idx+step:len-1;;i+=step){if(idx<0&&(len<=i||i<0))return null;if(len<=i)i=-1;else if(i<0)i=len;else{if(i===idx)return null;if((item=items[i])&&item.focusable&&!item.disabled&&(beforeRender||item.isFocusable&&item.isFocusable()))return item}}return null},getFocusableContainerEl:function(){return this.el},onFocusableChildAdd:function(child){if(this.enableFocusableContainer)return this.doFocusableChildAdd(child)},activateFocusableContainerEl:function(el){(el=el||this.getFocusableContainerEl())&&el.set({tabIndex:this.activeChildTabIndex})},deactivateFocusableContainerEl:function(el){(el=el||this.getFocusableContainerEl())&&el.set({tabIndex:void 0})},isFocusableContainerActive:function(){var el,child,focusEl,isActive=!1;return((el=this.getFocusableContainerEl())&&el.isTabbable&&el.isTabbable()||(focusEl=(child=this.lastFocusedChild)&&child.getFocusEl&&child.getFocusEl())&&focusEl.isTabbable&&focusEl.isTabbable())&&(isActive=!0),isActive},doFocusableChildAdd:function(child){child.focusable&&(child.focusableContainer=this)},onFocusableChildRemove:function(child){if(this.enableFocusableContainer)return this.doFocusableChildRemove(child);child.focusableContainer=null},doFocusableChildRemove:function(child){child===this.lastFocusedChild&&(this.lastFocusedChild=null,this.activateFocusableContainerEl())},onFocusableContainerMousedown:function(e,target){var targetCmp=Ext.Component.fromElement(target);this.mousedownTimestamp=targetCmp===this?Ext.Date.now():0,targetCmp===this&&e.preventDefault()},onFocusEnter:function(e){var child,me=this,target=e.toComponent,mousedownTimestamp=me.mousedownTimestamp;return me.enableFocusableContainer?(me.mousedownTimestamp=0,target===me?(!mousedownTimestamp||50<Ext.Date.now()-mousedownTimestamp)&&(child=me.initDefaultFocusable())&&(me.deactivateFocusableContainerEl(),child.focus()):me.deactivateFocusableContainerEl(),target):null},onFocusLeave:function(e){var me=this,lastFocused=me.lastFocusedChild;me.enableFocusableContainer&&(me.destroyed||me.destroying||(me.clearFocusables(),lastFocused&&!lastFocused.disabled?me.activateFocusable(lastFocused):me.activateFocusableContainerEl()))},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(child){this.enableFocusableContainer&&(this.clearFocusables(),this.activateFocusable(child),child.needArrowKeys&&this.guardFocusableChild(child))},guardFocusableChild:function(child){var guard,index=this.activeChildTabIndex;(guard=this.findNextFocusableChild({child:child,step:-1}))&&guard.setTabIndex(index),(guard=this.findNextFocusableChild({child:child,step:1}))&&guard.setTabIndex(index)},afterFocusableChildFocus:function(child){this.enableFocusableContainer&&(this.lastFocusedChild=child)},beforeFocusableChildEnable:Ext.privateFn,onFocusableChildEnable:function(child){var me=this;me.enableFocusableContainer&&child!==me.lastFocusedChild&&(me.deactivateFocusable(child),me.isFocusableContainerActive()||me.activateFocusableContainerEl())},beforeFocusableChildDisable:function(child){var nextTarget;!this.enableFocusableContainer||this.destroying||this.destroyed||child.hasFocus&&(nextTarget=this.findNextFocusableChild({child:child})||child.findFocusTarget())&&nextTarget.focus()},onFocusableChildDisable:function(child){var me=this,lastFocused=me.lastFocusedChild;!me.enableFocusableContainer||me.destroying||me.destroyed||(child===lastFocused&&me.activateFocusableContainerEl(),me.findNextFocusableChild({step:1})||me.deactivateFocusableContainerEl())},onFocusableChildShow:Ext.privateFn,onFocusableChildHide:Ext.privateFn,onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn}}),Ext.define("Ext.panel.Header",{extend:Ext.panel.Bar,xtype:"header",mixins:[Ext.util.FocusableContainer],isHeader:!0,defaultType:"tool",indicateDrag:!1,weight:-1,shrinkWrap:3,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",autoEl:{role:"presentation"},beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{xtype:"title",flex:1},merge:function(newValue,oldValue){return"object"!=typeof newValue&&(newValue={text:newValue}),Ext.merge(oldValue?Ext.Object.chain(oldValue):{},newValue)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:Ext.baseCSSPrefix+"header",initComponent:function(){var me=this,items=me.items,itemPosition=me.itemPosition,cls=[me.headerCls];me.tools=me.tools||[],me.items=items=items?items.slice():[],void 0!==itemPosition&&(me._userItems=items.slice(),me.items=items=[]),me.indicateDragCls=me.headerCls+"-draggable",me.indicateDrag&&cls.push(me.indicateDragCls),me.addCls(cls),me.syncNoBorderCls(),me.enableFocusableContainer=!me.isAccordionHeader&&0<me.tools.length,me.enableFocusableContainer&&(me.ariaRole="toolbar"),Ext.Array.push(items,me.tools),me.tools.length=0,me.callParent(),me.on({dblclick:me.onDblClick,click:me.onClick,element:"el",scope:me})},addTool:function(tool){var me=this;me.add(Ext.ComponentManager.create(tool,"tool")),!me.isAccordionHeader&&0<me.tools.length&&!me.enableFocusableContainer&&(me.enableFocusableContainer=!0,me.ariaRole="toolbar",me.rendered&&(me.ariaEl.dom.setAttribute("role","toolbar"),me.initFocusableContainer(!0)))},afterLayout:function(){var frameBR,frameTR,frameTL,xPos,me=this;me.vertical&&(frameTR=me.frameTR)&&(frameBR=me.frameBR,frameTL=me.frameTL,xPos=me.getWidth()-frameTR.getPadding("r")-(frameTL?frameTL.getPadding("l"):me.el.getBorderWidth("l"))+"px",frameBR.setStyle("background-position-x",xPos),frameTR.setStyle("background-position-x",xPos)),this.callParent()},applyTitle:function(title,oldTitle){var isString,configHasRotation,me=this;return(isString="string"==typeof(title=title||""))&&(title={text:title}),oldTitle?(Ext.suspendLayouts(),oldTitle.setConfig(title),Ext.resumeLayouts(!0),title=oldTitle):(isString&&(title.xtype="title"),title.ui=me.ui,configHasRotation="rotation"in title,title.id=me.id+"-title",me.isAccordionHeader&&(title.ariaRole="tab",title.textElRole=null,title.focusable=!0),title=Ext.create(title),!configHasRotation&&me.vertical&&"default"===me.titleRotation&&(title.rotation=1)),title},applyTitlePosition:function(position){var max=this.items.getCount();return this._titleInItems&&--max,Math.max(Math.min(position,max),0)},beforeLayout:function(){this.callParent(),this.syncBeforeAfterTitleClasses()},beforeRender:function(){var me=this,itemPosition=me.itemPosition;me.protoEl.unselectable(),me.callParent(),void 0!==itemPosition&&me.insert(itemPosition,me._userItems)},getTools:function(){return this.tools.slice()},onAdd:function(component,index){var tools=this.tools;this.callParent([component,index]),component.isTool&&(tools.push(component),tools[component.type]=component)},onAdded:function(container,pos,instanced){this.syncNoBorderCls(),this.callParent([container,pos,instanced])},onRemoved:function(container,pos,instanced){this.syncNoBorderCls(),this.callParent([container,pos,instanced])},setDock:function(dock){var me=this,title=me.getTitle(),rotation=me.getTitleRotation(),titleRotation=title.getRotation();Ext.suspendLayouts(),me.callParent([dock]),"default"===rotation&&((rotation=me.vertical?1:0)!==titleRotation&&title.setRotation(rotation),me.rendered&&me.resetItemMargins()),Ext.resumeLayouts(!0)},updateGlyph:function(glyph){this.getTitle().setGlyph(glyph)},updateIcon:function(icon){this.getTitle().setIcon(icon)},updateIconAlign:function(align,oldAlign){this.getTitle().setIconAlign(align)},updateIconCls:function(cls){this.getTitle().setIconCls(cls)},updateTitle:function(title,oldTitle){oldTitle||(this.insert(this.getTitlePosition(),title),this._titleInItems=!0),this.titleCmp=title},updateTitleAlign:function(align,oldAlign){this.getTitle().setTextAlign(align)},updateTitlePosition:function(position){this.insert(position,this.getTitle())},updateTitleRotation:function(rotation){"default"===rotation&&(rotation=this.vertical?1:0),this.getTitle().setRotation(rotation)},privates:{fireClickEvent:function(type,e){var toolCls="."+Ext.panel.Tool.prototype.baseCls;e.getTarget(toolCls)||this.fireEvent(type,this,e)},getFramingInfoCls:function(){var me=this,cls=me.callParent(),owner=me.ownerCt;return!me.expanding&&owner&&(owner.collapsed||me.isCollapsedExpander)&&(cls+="-"+owner.collapsedCls),cls+"-"+me.dock},onClick:function(e){this.fireClickEvent("click",e)},onDblClick:function(e){this.fireClickEvent("dblclick",e)},onFocusableContainerMousedown:function(e,target){Ext.Component.fromElement(target)===this?e.preventDefault():this.mixins.focusablecontainer.onFocusableContainerMousedown.apply(this,arguments)},syncBeforeAfterTitleClasses:function(force){var afterCls,beforeCls,i,item,me=this,items=me.items,childItems=items.items,titlePosition=me.getTitlePosition(),itemCount=childItems.length,itemGeneration=items.generation,syncGen=me.syncBeforeAfterGen;if(force||syncGen!==itemGeneration)for(me.syncBeforeAfterGen=itemGeneration,i=0;i<itemCount;++i)afterCls=(item=childItems[i]).afterTitleCls||(item.afterTitleCls=item.baseCls+"-after-title"),beforeCls=item.beforeTitleCls||(item.beforeTitleCls=item.baseCls+"-before-title"),!me.title||i<titlePosition?(syncGen&&item.removeCls(afterCls),item.addCls(beforeCls)):titlePosition<i&&(syncGen&&item.removeCls(beforeCls),item.addCls(afterCls))},syncNoBorderCls:function(){var ownerCt=this.ownerCt,noBorderCls=this.headerCls+"-noborder";(ownerCt?!1!==ownerCt.border||ownerCt.frame:!1!==this.border)?this.removeCls(noBorderCls):this.addCls(noBorderCls)}}}),Ext.define("Ext.layout.container.boxOverflow.None",{alternateClassName:"Ext.layout.boxOverflow.None",alias:["box.overflow.none","box.overflow.None"],mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:"none"},isBoxOverflowHandler:!0,$configPrefixed:!1,$configStrict:!1,constructor:function(config){this.initConfig(config)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(ownerContext){var overflow,plan=ownerContext.state.boxPlan;plan&&plan.tooNarrow?(overflow=this.handleOverflow(ownerContext))&&overflow.reservedSpace&&this.layout.publishInnerCtSize(ownerContext,overflow.reservedSpace):this.clearOverflow()},completeLayout:Ext.emptyFn,finishedLayout:function(ownerContext){var hiddens,hiddenCount,owner=this.layout.owner;owner.hasListeners.overflowchange&&(hiddenCount=(hiddens=owner.query(">[hidden]")).length)!==this.lastHiddenCount&&(owner.fireEvent("overflowchange",this.lastHiddenCount,hiddenCount,hiddens),this.lastHiddenCount=hiddenCount)},onRemove:Ext.emptyFn,getItem:function(item){return this.layout.owner.getComponent(item)},getOwnerType:function(owner){return owner.isToolbar?"toolbar":owner.isTabBar?"tab-bar":owner.isMenu?"menu":owner.isBreadcrumb?"breadcrumb":owner.getXType()},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""},setVertical:function(){var layout=this.layout,innerCt=layout.innerCt;innerCt.removeCls(this.getOverflowCls(layout.oppositeDirection)),innerCt.addCls(this.getOverflowCls(layout.direction))}}),Ext.define("Ext.layout.container.boxOverflow.Scroller",{extend:Ext.layout.container.boxOverflow.None,alternateClassName:"Ext.layout.boxOverflow.Scroller",alias:["box.overflow.scroller","box.overflow.Scroller"],mixins:{observable:Ext.mixin.Observable},animateScroll:!1,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:Ext.baseCSSPrefix+"box-scroller",beforeSuffix:"-before-scroller",afterSuffix:"-after-scroller",constructor:function(config){this.mixins.observable.constructor.call(this,config),this.scrollPosition=0,this.scrollSize=0},getPrefixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls("beforeX"),style:"display:none"}},getSuffixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls("afterX"),style:"display:none"}},createScrollerCls:function(xName){var layout=this.layout,owner=layout.owner,type=this.getOwnerType(owner),scrollerCls=this.scrollerCls,cls=scrollerCls+" "+scrollerCls+"-"+layout.names[xName]+" "+scrollerCls+"-"+type+" "+scrollerCls+"-"+type+"-"+owner.ui;return owner.plain&&(cls+=" "+scrollerCls+"-plain"),cls},getOverflowCls:function(direction){return this.scrollerCls+"-body-"+direction},beginLayout:function(ownerContext){ownerContext.innerCtScrollPos=this.getScrollPosition(),this.callParent(arguments)},finishedLayout:function(ownerContext){var lastProps,me=this,plan=ownerContext.state.boxPlan,layout=me.layout,names=layout.names,scrollPos=Math.min(me.getMaxScrollPosition(),ownerContext.innerCtScrollPos);plan&&plan.tooNarrow&&(lastProps=ownerContext.childItems[ownerContext.childItems.length-1].props,me.scrollSize=lastProps[names.x]+lastProps[names.width],me.updateScrollButtons(),layout.innerCt[names.setScrollLeft](scrollPos)),me.callParent([ownerContext])},handleOverflow:function(ownerContext){var scrollerWidth,targetPaddingWidth,beforeScroller,afterScroller,names=this.layout.names,getWidth=names.getWidth,parallelMargins=names.parallelMargins;return this.showScrollers(),beforeScroller=this.getBeforeScroller(),afterScroller=this.getAfterScroller(),scrollerWidth=beforeScroller[getWidth]()+afterScroller[getWidth]()+beforeScroller.getMargin(parallelMargins)+afterScroller.getMargin(parallelMargins),targetPaddingWidth=ownerContext.targetContext.getPaddingInfo()[names.width],{reservedSpace:Math.max(scrollerWidth-targetPaddingWidth,0)}},getBeforeScroller:function(){return this._beforeScroller||(this._beforeScroller=this.createScroller(this.beforeSuffix,"beforeRepeater","scrollLeft"))},getAfterScroller:function(){return this._afterScroller||(this._afterScroller=this.createScroller(this.afterSuffix,"afterRepeater","scrollRight"))},createScroller:function(suffix,repeaterName,scrollHandler){var scrollerEl,me=this,owner=me.layout.owner,scrollerCls=me.scrollerCls;return(scrollerEl=owner.el.getById(owner.id+suffix)).addClsOnOver(scrollerCls+"-hover"),scrollerEl.addClsOnClick(scrollerCls+"-pressed"),scrollerEl.setVisibilityMode(Ext.Element.DISPLAY),me[repeaterName]=new Ext.util.ClickRepeater(scrollerEl,{interval:me.scrollRepeatInterval,handler:scrollHandler,scope:me}),scrollerEl},createWheelListener:function(){this.wheelListener=this.layout.innerCt.on("mousewheel",this.onMouseWheel,this,{destroyable:!0})},onMouseWheel:function(e){e.stopEvent(),this.scrollBy(this.getWheelDelta(e)*this.wheelIncrement*-1,!1)},getWheelDelta:function(e){return e.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var me=this;me.wheelListener||me.createWheelListener(),me.getBeforeScroller().show(),me.getAfterScroller().show(),me.layout.owner.addClsWithUI("vertical"===me.layout.direction?"vertical-scroller":"scroller")},hideScrollers:function(){var beforeScroller=this.getBeforeScroller(),afterScroller=this.getAfterScroller();beforeScroller&&(beforeScroller.hide(),afterScroller.hide(),this.layout.owner.removeClsWithUI("vertical"===this.layout.direction?"vertical-scroller":"scroller"))},destroy:function(){Ext.destroyMembers(this,"beforeRepeater","afterRepeater","_beforeScroller","_afterScroller","wheelListener"),this.callParent()},scrollBy:function(delta,animate){this.scrollTo(this.getScrollPosition()+delta,animate)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var disabledCls,me=this,beforeScroller=me.getBeforeScroller(),afterScroller=me.getAfterScroller();beforeScroller&&afterScroller&&(disabledCls=me.scrollerCls+"-disabled",beforeScroller[me.atExtremeBefore()?"addCls":"removeCls"](disabledCls),afterScroller[me.atExtremeAfter()?"addCls":"removeCls"](disabledCls),me.scrolling=!1)},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,!1)},scrollRight:function(){this.scrollBy(this.scrollIncrement,!1)},getScrollPosition:function(){var layout=this.layout;return isNaN(this.scrollPosition)?layout.innerCt[layout.names.getScrollLeft]():this.scrollPosition},getMaxScrollPosition:function(){var layout=this.layout,maxScrollPos=this.scrollSize-layout.innerCt.lastBox[layout.names.width];return maxScrollPos<0?0:maxScrollPos},atExtremeBefore:function(){return!this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},setVertical:function(){var beforeScroller=this.getBeforeScroller(),afterScroller=this.getAfterScroller(),names=this.layout.names,scrollerCls=this.scrollerCls;beforeScroller.removeCls(scrollerCls+"-"+names.beforeY),afterScroller.removeCls(scrollerCls+"-"+names.afterY),beforeScroller.addCls(scrollerCls+"-"+names.beforeX),afterScroller.addCls(scrollerCls+"-"+names.afterX),this.callParent()},scrollTo:function(position,animate){var me=this,layout=me.layout,names=layout.names,oldPosition=me.getScrollPosition(),newPosition=Ext.Number.constrain(position,0,me.getMaxScrollPosition());newPosition===oldPosition||me.scrolling||(me.scrollPosition=NaN,void 0===animate&&(animate=me.animateScroll),layout.innerCt[names.scrollTo](names.beforeScrollX,newPosition,!!animate&&me.getScrollAnim()),animate?me.scrolling=!0:me.updateScrollButtons(),me.fireEvent("scroll",me,newPosition,!!animate&&me.getScrollAnim()))},scrollToItem:function(item,animate){var visibility,box,newPos,me=this,layout=me.layout,owner=layout.owner,names=layout.names,innerCt=layout.innerCt;void 0!==(item=me.getItem(item))&&(item===owner.items.first()?newPos=0:item===owner.items.last()?newPos=me.getMaxScrollPosition():(visibility=me.getItemVisibility(item)).fullyVisible||(newPos=(box=item.getBox(!1,!0))[names.x],visibility.hiddenEnd&&(newPos-=innerCt[names.getWidth]()-box[names.width])),void 0!==newPos&&me.scrollTo(newPos,animate))},getItemVisibility:function(item){var box=this.getItem(item).getBox(!0,!0),layout=this.layout,names=layout.names,itemStart=box[names.x],itemEnd=itemStart+box[names.width],scrollStart=this.getScrollPosition(),scrollEnd=scrollStart+layout.innerCt[names.getWidth]();return{hiddenStart:itemStart<scrollStart,hiddenEnd:scrollEnd<itemEnd,fullyVisible:scrollStart<=itemStart&&itemEnd<=scrollEnd}}}),Ext.define("Ext.dd.DragDropManager",{singleton:!0,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,notifyOccluded:!1,dragCls:Ext.baseCSSPrefix+"dd-drag-current",_execOnAll:function(sMethod,args){var i,j,oDD,item,ids=this.ids;for(i in ids)if(ids.hasOwnProperty(i))for(j in item=ids[i])if(item.hasOwnProperty(j)){if(oDD=item[j],!this.isTypeOfDD(oDD))continue;oDD[sMethod].apply(oDD,args)}},addListeners:function(){var me=this;me.init(),Ext.getDoc().on({mouseup:me.handleMouseUp,mousemove:{fn:me.handleMouseMove,capture:!1},dragstart:me.preventDrag,drag:me.preventDrag,dragend:me.preventDrag,capture:!0,scope:me}),Ext.getWin().on({unload:me._onUnload,resize:me._onResize,scope:me})},preventDrag:function(e){this.isMouseDown&&e.stopPropagation()},_onResize:function(e){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:8,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(oDD,sGroup){this.initialized||this.init(),this.ids[sGroup]||(this.ids[sGroup]={}),this.ids[sGroup][oDD.id]=oDD},removeDDFromGroup:function(oDD,sGroup){this.ids[sGroup]||(this.ids[sGroup]={});var obj=this.ids[sGroup];obj&&obj[oDD.id]&&delete obj[oDD.id]},_remove:function(oDD,clearGroup){var g,me=this,ids=me.ids,groups=oDD.groups;if(!me.clearingAll){for(g in me.dragCurrent===oDD&&(me.dragCurrent=null),groups)groups.hasOwnProperty(g)&&(clearGroup?delete ids[g]:ids[g]&&delete ids[g][oDD.id]);delete me.handleIds[oDD.id],delete me.locationCache[oDD.id]}},regHandle:function(sDDId,sHandleId){this.handleIds[sDDId]||(this.handleIds[sDDId]={}),this.handleIds[sDDId][sHandleId]=sHandleId},isDragDrop:function(id){return!!this.getDDById(id)},getRelated:function(p_oDD,bTargetsOnly){var i,j,dd,oDDs=[];for(i in p_oDD.groups)for(j in this.ids[i])dd=this.ids[i][j],this.isTypeOfDD(dd)&&(bTargetsOnly&&!dd.isTarget||(oDDs[oDDs.length]=dd));return oDDs},isLegalTarget:function(oDD,oTargetDD){var i,len,targets=this.getRelated(oDD,!0);for(i=0,len=targets.length;i<len;++i)if(targets[i].id===oTargetDD.id)return!0;return!1},isTypeOfDD:function(oDD){return oDD&&oDD.__ygDragDrop},isHandle:function(sDDId,sHandleId){return this.handleIds[sDDId]&&this.handleIds[sDDId][sHandleId]},getDDById:function(id,force){var i,dd;for(i in this.ids)if((dd=this.ids[i][id])instanceof Ext.dd.DDTarget||force)return dd;return null},handleMouseDown:function(e,oDD){var xy,el,me=this;me.isMouseDown=!0,Ext.quickTipsActive&&Ext.tip.QuickTipManager.ddDisable(),me.currentPoint=e.getPoint(),me.dragCurrent&&me.handleMouseUp(e),me.mousedownEvent=e,me.currentTarget=e.getTarget(),el=(me.dragCurrent=oDD).getEl(),Ext.fly(el).setCapture(),xy=e.getXY(),me.startX=xy[0],me.startY=xy[1],me.offsetX=me.offsetY=0,me.deltaX=me.startX-el.offsetLeft,me.deltaY=me.startY-el.offsetTop,me.dragThreshMet=!1},startDrag:function(x,y){var dragEl,current=this.dragCurrent;clearTimeout(this.clickTimeout),current&&(current.b4StartDrag(x,y),current.startDrag(x,y),(dragEl=current.getDragEl())&&Ext.fly(dragEl).addCls(this.dragCls)),this.dragThreshMet=!0},handleMouseUp:function(e){var me=this;me.isMouseDown=!1,Ext.quickTipsActive&&Ext.tip.QuickTipManager.ddEnable(),me.dragCurrent&&(Ext.isIE&&document.releaseCapture&&document.releaseCapture(),clearTimeout(me.clickTimeout),me.dragThreshMet&&me.fireEvents(e,!0),me.stopDrag(e),me.stopEvent(e),me.mousedownEvent=me.currentTarget=null)},stopEvent:function(e){this.stopPropagation&&e.stopPropagation(),this.preventDefault&&e.preventDefault()},stopDrag:function(e){var dragEl,me=this,current=me.dragCurrent;current&&(me.dragThreshMet&&((dragEl=current.getDragEl())&&Ext.fly(dragEl).removeCls(me.dragCls),current.b4EndDrag(e),current.endDrag(e)),me.dragCurrent.onMouseUp(e)),me.dragCurrent=null,me.dragOvers={}},handleMouseMove:function(e){var diffX,diffY,me=this,current=me.dragCurrent,point=me.currentPoint=e.getPoint(),currentX=point.x,currentY=point.y;return me.offsetX=currentX-me.startX,me.offsetY=currentY-me.startY,current&&(me.dragThreshMet||(diffX=Math.abs(me.offsetX),diffY=Math.abs(me.offsetY),(diffX>me.clickPixelThresh||diffY>me.clickPixelThresh)&&me.startDrag(me.startX,me.startY)),me.dragThreshMet&&(current.b4Drag(e),current.onDrag(e),current.moveOnly||me.fireEvents(e,!1)),me.stopEvent(e)),!0},fireEvents:function(e,isDrop){var dragEl,overTarget,overTargetEl,needsSort,i,len,sGroup,overDragEl,me=this,isTouch=Ext.supports.Touch,dragCurrent=me.dragCurrent,mousePoint=me.currentPoint,currentX=mousePoint.x,currentY=mousePoint.y,allTargets=[],oldOvers=[],outEvts=[],overEvts=[],dropEvts=[],enterEvts=[],zoom=isTouch?document.documentElement.clientWidth/window.innerWidth:1;if(dragCurrent&&!dragCurrent.isLocked()){for(i in overDragEl=!(dragCurrent.deltaX<0||dragCurrent.deltaY<0),(isTouch||!me.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&overDragEl)&&(dragEl=dragCurrent.getDragEl(),overDragEl&&(dragEl.style.visibility="hidden"),e.target=document.elementFromPoint(currentX/zoom,currentY/zoom),overDragEl&&(dragEl.style.visibility="visible")),me.dragOvers)overTarget=me.dragOvers[i],delete me.dragOvers[i],me.isTypeOfDD(overTarget)&&!overTarget.destroyed&&(me.notifyOccluded?this.isOverTarget(mousePoint,overTarget,me.mode)||outEvts.push(overTarget):e.within(overTarget.getEl())||outEvts.push(overTarget),oldOvers[i]=!0);for(sGroup in dragCurrent.groups)if("string"==typeof sGroup)for(i in me.ids[sGroup])if(overTarget=me.ids[sGroup][i],me.isTypeOfDD(overTarget)&&(overTargetEl=overTarget.getEl())&&overTarget.isTarget&&!overTarget.isLocked()&&Ext.fly(overTargetEl).isVisible(!0)&&(overTarget!==dragCurrent||!1===dragCurrent.ignoreSelf))if(me.notifyOccluded)-1!==(overTarget.zIndex=me.getZIndex(overTargetEl))&&(needsSort=!0),allTargets.push(overTarget);else if(e.within(overTarget.getEl())){allTargets.push(overTarget);break}for(needsSort&&Ext.Array.sort(allTargets,me.byZIndex),i=0,len=allTargets.length;i<len&&(overTarget=allTargets[i],!me.isOverTarget(mousePoint,overTarget,me.mode)||(isDrop?dropEvts.push(overTarget):(oldOvers[overTarget.id]?overEvts.push(overTarget):enterEvts.push(overTarget),me.dragOvers[overTarget.id]=overTarget),me.notifyOccluded));i++);if(me.mode)outEvts.length&&(dragCurrent.b4DragOut(e,outEvts),dragCurrent.onDragOut(e,outEvts)),enterEvts.length&&dragCurrent.onDragEnter(e,enterEvts),overEvts.length&&(dragCurrent.b4DragOver(e,overEvts),dragCurrent.onDragOver(e,overEvts)),dropEvts.length&&(dragCurrent.b4DragDrop(e,dropEvts),dragCurrent.onDragDrop(e,dropEvts));else{for(i=0,len=outEvts.length;i<len;++i)dragCurrent.b4DragOut(e,outEvts[i].id),dragCurrent.onDragOut(e,outEvts[i].id);for(i=0,len=enterEvts.length;i<len;++i)dragCurrent.onDragEnter(e,enterEvts[i].id);for(i=0,len=overEvts.length;i<len;++i)dragCurrent.b4DragOver(e,overEvts[i].id),dragCurrent.onDragOver(e,overEvts[i].id);for(i=0,len=dropEvts.length;i<len;++i)dragCurrent.b4DragDrop(e,dropEvts[i].id),dragCurrent.onDragDrop(e,dropEvts[i].id)}isDrop&&!dropEvts.length&&dragCurrent.onInvalidDrop(e)}},getZIndex:function(element){var z,body=document.body,zIndex=-1;for(element=Ext.getDom(element);element!==body;)isNaN(z=Number(Ext.fly(element).getStyle("zIndex")))||(zIndex=z),element=element.parentNode;return zIndex},byZIndex:function(d1,d2){return d1.zIndex<d2.zIndex},getBestMatch:function(dds){var i,dd,winner=null,len=dds.length;if(1===len)winner=dds[0];else for(i=0;i<len;++i){if((dd=dds[i]).cursorIsOver){winner=dd;break}(!winner||winner.overlap.getArea()<dd.overlap.getArea())&&(winner=dd)}return winner},refreshCache:function(groups){var sGroup,i,oDD,loc;for(sGroup in groups)if("string"==typeof sGroup)for(i in this.ids[sGroup])oDD=this.ids[sGroup][i],this.isTypeOfDD(oDD)&&((loc=this.getLocation(oDD))?this.locationCache[oDD.id]=loc:delete this.locationCache[oDD.id])},verifyEl:function(el){return Ext.getBody().contains(el)},getLocation:function(oDD){if(!this.isTypeOfDD(oDD))return null;if(oDD.getRegion)return oDD.getRegion();var pos,x1,x2,y1,y2,t,r,b,l,el=oDD.getEl();try{pos=Ext.fly(el).getXY()}catch(e){}return pos?(x2=(x1=pos[0])+el.offsetWidth,y2=(y1=pos[1])+el.offsetHeight,t=y1-oDD.padding[0],r=x2+oDD.padding[1],b=y2+oDD.padding[2],l=x1-oDD.padding[3],new Ext.util.Region(t,r,b,l)):null},isOverTarget:function(pt,oTarget,intersect){var dc,pos,el,overlap,loc=this.locationCache[oTarget.id];return loc&&this.useCache||(loc=this.getLocation(oTarget),this.locationCache[oTarget.id]=loc),!!loc&&(oTarget.cursorIsOver=loc.contains(pt),(dc=this.dragCurrent)&&dc.getTargetCoord&&(intersect||dc.constrainX||dc.constrainY)?(oTarget.overlap=null,pos=dc.getTargetCoord(pt.x,pt.y),el=dc.getDragEl(),!!(overlap=new Ext.util.Region(pos.y,pos.x+el.offsetWidth,pos.y+el.offsetHeight,pos.x).intersect(loc))&&(oTarget.overlap=overlap,!!intersect||oTarget.cursorIsOver)):oTarget.cursorIsOver)},_onUnload:function(e,me){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var i,me=this,cache=me.elementCache;for(i in me.dragCurrent&&(me.stopDrag(),me.dragCurrent=null),me.clearingAll=!0,me._execOnAll("unreg",[]),delete me.clearingAll,cache)delete cache[i];me.elementCache={},me.ids={},me.handleIds={}},elementCache:{},getElWrapper:function(id){var oWrapper=this.elementCache[id];return oWrapper&&oWrapper.el||(oWrapper=this.elementCache[id]=new this.ElementWrapper(Ext.getDom(id))),oWrapper},getElement:function(id){return Ext.getDom(id)},getCss:function(id){var el=Ext.getDom(id);return el?el.style:null},ElementWrapper:function(el){this.el=el||null,this.id=this.el&&el.id,this.css=this.el&&el.style},getPosX:function(el){return Ext.fly(el).getX()},getPosY:function(el){return Ext.fly(el).getY()},swapNode:function(n1,n2){if(n1.swapNode)n1.swapNode(n2);else{var p=n2.parentNode,s=n2.nextSibling;s===n1?p.insertBefore(n1,n2):n2===n1.nextSibling?p.insertBefore(n2,n1):(n1.parentNode.replaceChild(n2,n1),p.insertBefore(n1,s))}},getScroll:function(){var doc=window.document,docEl=doc.documentElement,body=doc.body,top=0,left=0;return docEl&&(docEl.scrollTop||docEl.scrollLeft)?(top=docEl.scrollTop,left=docEl.scrollLeft):body&&(top=body.scrollTop,left=body.scrollLeft),{top:top,left:left}},getStyle:function(el,styleProp){return Ext.fly(el).getStyle(styleProp)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(moveEl,targetEl){var aCoord=Ext.fly(targetEl).getXY();Ext.fly(moveEl).setXY(aCoord)},numericSort:function(a,b){return a-b},handleWasClicked:function(node,id){if(this.isHandle(id,node.id))return!0;for(var p=node.parentNode;p;){if(this.isHandle(id,p.id))return!0;p=p.parentNode}return!1}},function(DragDropManager){Ext.onInternalReady(function(){DragDropManager.addListeners()})}),Ext.define("Ext.resizer.Splitter",{extend:Ext.Component,xtype:"splitter",childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',Ext.baseCSSPrefix,"collapse-el ",Ext.baseCSSPrefix,'layout-split-{collapseDir}{childElCls}">',"</div>","</tpl>"],isSplitter:!0,baseCls:Ext.baseCSSPrefix+"splitter",collapsedClsInternal:Ext.baseCSSPrefix+"splitter-collapsed",canResize:!0,collapsible:null,collapseOnDblClick:!0,defaultSplitMin:40,defaultSplitMax:1e3,collapseTarget:"next",horizontal:!1,vertical:!1,size:5,tracker:null,ariaRole:"separator",focusable:!0,tabIndex:0,getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var me=this,target=me.getCollapseTarget(),collapsible=me.collapsible;me.callParent(),target.collapsed&&me.addCls(me.collapsedClsInternal),me.canResize||me.addCls(me.baseCls+"-noresize"),Ext.applyIf(me.renderData,{collapseDir:me.getCollapseDirection(),collapsible:null!==collapsible?collapsible:target.collapsible}),me.ariaRenderAttributes=me.ariaRenderAttributes||{},me.ariaRenderAttributes["aria-orientation"]=me.orientation,me.protoEl.unselectable()},onRender:function(){var collapseEl,me=this;me.callParent(arguments),!1!==me.performCollapse&&(me.renderData.collapsible&&me.mon(me.collapseEl,"click",me.toggleTargetCmp,me),me.collapseOnDblClick&&me.mon(me.el,"dblclick",me.toggleTargetCmp,me)),me.getCollapseTarget().on({collapse:me.onTargetCollapse,expand:me.onTargetExpand,beforeexpand:me.onBeforeTargetExpand,beforecollapse:me.onBeforeTargetCollapse,scope:me}),me.canResize&&(me.tracker=Ext.create(me.getTrackerConfig()),me.relayEvents(me.tracker,["beforedragstart","dragstart","dragend"])),(collapseEl=me.collapseEl)&&(collapseEl.lastCollapseDirCls=me.collapseDirProps[me.collapseDirection].cls)},getCollapseDirection:function(){var collapseTarget,items,type,me=this,dir=me.collapseDirection;return dir||((collapseTarget=me.collapseTarget).isComponent&&(dir=collapseTarget.collapseDirection),dir||(type=me.ownerCt.layout.type,dir=["bottom","right","top","left"][collapseTarget.isComponent?(items=me.ownerCt.items,Number(items.indexOf(collapseTarget)===items.indexOf(me)-1)<<1|Number("hbox"===type)):Number("prev"===me.collapseTarget)<<1|Number("hbox"===type)]),me.collapseDirection=dir),me.setOrientation("top"===dir||"bottom"===dir?"horizontal":"vertical"),dir},getCollapseTarget:function(){var me=this;return me.collapseTarget.isComponent?me.collapseTarget:"prev"===me.collapseTarget?me.previousSibling():me.nextSibling()},setCollapseEl:function(display){var el=this.collapseEl;el&&el.setDisplayed(display)},onBeforeTargetExpand:function(target){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(target){var me=this;target===me.getCollapseTarget()&&target["vertical"===me.orientation?"collapsedHorizontal":"collapsedVertical"]()&&me.el.addCls(me.collapsedClsInternal+" "+(me.collapsedCls||"")),me.setCollapseEl("")},onTargetExpand:function(target){this.el.removeCls(this.collapsedClsInternal+" "+(this.collapsedCls||"")),this.setCollapseEl("")},collapseDirProps:{top:{cls:Ext.baseCSSPrefix+"layout-split-top"},right:{cls:Ext.baseCSSPrefix+"layout-split-right"},bottom:{cls:Ext.baseCSSPrefix+"layout-split-bottom"},left:{cls:Ext.baseCSSPrefix+"layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var cls,collapseEl=this.collapseEl,collapseDirProps=this.collapseDirProps[this.collapseDirection];collapseEl&&((cls=collapseEl.lastCollapseDirCls)&&collapseEl.removeCls(cls),collapseEl.addCls(collapseEl.lastCollapseDirCls=collapseDirProps.cls))},applyOrientation:function(){var me=this,orientation=me.orientation,orientationProps=me.orientationProps[orientation],defaultSize=me.size,fixedSizeProp=orientationProps.fixedAxis,stretchSizeProp=orientationProps.stretchedAxis,cls=me.baseCls+"-";me[orientation]=!0,me[orientationProps.opposite]=!1,me.hasOwnProperty(fixedSizeProp)&&"100%"!==me[fixedSizeProp]||(me[fixedSizeProp]=defaultSize),me.hasOwnProperty(stretchSizeProp)&&me[stretchSizeProp]!==defaultSize||(me[stretchSizeProp]="100%"),me.removeCls(cls+orientationProps.opposite),me.addCls(cls+orientation)},setOrientation:function(orientation){this.orientation!==orientation&&(this.orientation=orientation,this.applyOrientation())},updateOrientation:function(){delete this.collapseDirection,this.getCollapseDirection(),this.applyCollapseDirection()},toggleTargetCmp:function(e,t){var cmp=this.getCollapseTarget(),placeholder=cmp.placeholder;!Ext.isFunction(cmp.expand)||!Ext.isFunction(cmp.collapse)||(!placeholder||placeholder.hidden)&&cmp.hidden||(cmp.collapsed?cmp.expand():cmp.collapseDirection?cmp.collapse():cmp.collapse(this.renderData.collapseDir))},setSize:function(){this.callParent(arguments),Ext.isIE&&this.el&&this.el.repaint()},beforeDestroy:function(){Ext.destroy(this.tracker),this.callParent()}}),Ext.define("Ext.layout.container.Box",{extend:Ext.layout.container.Container,alias:"layout.box",alternateClassName:"Ext.layout.BoxLayout",type:"box",config:{align:"begin",constrainAlign:!1,enableSplitters:!0,overflowHandler:{$value:null,merge:function(newValue,oldValue){return"string"==typeof newValue&&(newValue={type:newValue}),Ext.merge(oldValue?Ext.Object.chain(oldValue):{},newValue)}},padding:0,pack:"start",stretchMaxPartner:void 0,vertical:!1,alignRoundingMethod:"round"},itemCls:Ext.baseCSSPrefix+"box-item",targetCls:Ext.baseCSSPrefix+"box-layout-ct",targetElCls:Ext.baseCSSPrefix+"box-target",innerCls:Ext.baseCSSPrefix+"box-inner",manageMargins:!0,createsInnerCt:!0,childEls:["innerCt","targetEl"],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:!0,definitions:"var dh=Ext.DomHelper;"}],constructor:function(config){var type,me=this;me.callParent(arguments),me.setVertical(me.vertical),me.flexSortFn=me.flexSort.bind(me),"string"!=(type=typeof me.padding)&&"number"!=type||(me.padding=Ext.util.Format.parseBox(me.padding),me.padding.height=me.padding.top+me.padding.bottom,me.padding.width=me.padding.left+me.padding.right)},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(item,ownerSizeModel){var me=this,policy=me.sizePolicy,align=me.align,flex=item.flex,key=align,names=me.names,heightName=names.height,widthName=names.width,width=item[widthName],height=item[heightName],percentageRe=me._percentageRe,percentageWidth=percentageRe.test(width),isStretch="stretch"===align,isStretchMax="stretchmax"===align,constrain=me.constrainAlign;return!ownerSizeModel&&(isStretch||flex||percentageWidth||constrain&&!isStretchMax)&&(ownerSizeModel=me.owner.getSizeModel()),isStretch?!percentageRe.test(height)&&ownerSizeModel[heightName].shrinkWrap&&(key="stretchmax"):isStretchMax||(key=percentageRe.test(height)?"stretch":constrain&&!ownerSizeModel[heightName].shrinkWrap?"stretchmax":""),(flex||percentageWidth)&&(ownerSizeModel[widthName].shrinkWrap||(policy=policy.flex)),policy[key]},flexSort:function(a,b){var aMin,bMin,aMax,bMax,hasMin,hasMax,maxWidthName=this.names.maxWidth,minWidthName=this.names.minWidth,aTarget=a.target,bTarget=b.target,aFlex=aTarget.flex,bFlex=bTarget.flex,result=0;return aMax=aTarget[maxWidthName]||1/0,bMax=bTarget[maxWidthName]||1/0,aMin=aTarget[minWidthName]||0,bMin=bTarget[minWidthName]||0,hasMin=isFinite(aMin)||isFinite(bMin),hasMax=isFinite(aMax)||isFinite(bMax),(hasMin||hasMax)&&(hasMax&&(result=aMax-bMax),0===result&&hasMin&&(result=bMin-aMin),0===result&&(result=hasMax?bFlex-aFlex:aFlex-bFlex)),result},isItemBoxParent:function(itemContext){return!0},isItemShrinkWrap:function(item){return!0},roundFlex:function(width){return Math.floor(width)},beginCollapse:function(child){("vertical"===this.direction&&child.collapsedVertical()||"horizontal"===this.direction&&child.collapsedHorizontal())&&(child.collapseMemento.capture(["flex"]),delete child.flex)},beginExpand:function(child){child.collapseMemento.restore(["flex"])},beginLayout:function(ownerContext){var scrollPos,me=this,owner=me.owner,smp=owner.stretchMaxPartner,style=me.innerCt.dom.style,names=me.names,overflowHandler=me.overflowHandler,scrollable=owner.getScrollable();ownerContext.boxNames=names,overflowHandler&&overflowHandler.beginLayout(ownerContext),"string"==typeof smp&&(smp=Ext.getCmp(smp)||owner.query(smp)[0]),ownerContext.stretchMaxPartner=smp&&ownerContext.context.getCmp(smp),me.callParent(arguments),ownerContext.innerCtContext=ownerContext.getEl("innerCt",me),ownerContext.targetElContext=ownerContext.getEl("targetEl",me),scrollable&&((scrollPos=(ownerContext.ownerScrollable=scrollable).getPosition()).x||scrollPos.y)&&(ownerContext.scrollRestore=scrollPos),style.width=style.height=""},beginLayoutCycle:function(ownerContext,firstCycle){var widthModel,heightModel,me=this,state=ownerContext.state,scrollable=ownerContext.ownerScrollable,align=me.align,names=ownerContext.boxNames,pack=me.pack,centerRe=me._centerRe,overflowHandler=me.overflowHandler,canScroll=ownerContext.state.canScroll;overflowHandler&&overflowHandler.beginLayoutCycle(ownerContext,firstCycle),me.callParent(arguments),ownerContext.parallelSizeModel=widthModel=ownerContext[names.widthModel],ownerContext.perpendicularSizeModel=heightModel=ownerContext[names.heightModel],ownerContext.boxOptions={align:align={stretch:"stretch"===align,stretchmax:"stretchmax"===align,center:centerRe.test(align),bottom:me._endRe.test(align)},pack:pack={center:centerRe.test(pack),end:"end"===pack}},scrollable&&(canScroll||(state.canScroll={parallel:!widthModel.shrinkWrap&&scrollable[names.getX](),perpendicular:!heightModel.shrinkWrap&&scrollable[names.getY]()}),state.actualScroll||(state.actualScroll={parallel:!1,perpendicular:!1})),align.stretch&&heightModel.shrinkWrap&&(align.stretchmax=!0,align.stretch=!1),align.nostretch=!(align.stretch||align.stretchmax),widthModel.shrinkWrap&&(pack.center=pack.end=!1),me.cacheFlexes(ownerContext),me.targetEl.setWidth(2e4)},cacheFlexes:function(ownerContext){for(var child,childContext,flex,match,heightModel,widthModel,height,names=ownerContext.boxNames,widthModelName=names.widthModel,heightModelName=names.heightModel,nostretch=ownerContext.boxOptions.align.nostretch,totalFlex=0,childItems=ownerContext.childItems,i=childItems.length,flexedItems=[],minWidth=0,smallestHeight=0,smallestWidth=0,minWidthName=names.minWidth,minHeightName=names.minHeight,percentageRe=this._percentageRe,percentageWidths=0,percentageHeights=0;i--;)child=(childContext=childItems[i]).target,(widthModel=childContext[widthModelName]).calculated&&(childContext.flex=flex=child.flex,flex?(totalFlex+=flex,flexedItems.push(childContext),minWidth+=child[minWidthName]||0):(match=percentageRe.exec(child[names.width]),childContext.percentageParallel=parseFloat(match[1])/100,++percentageWidths)),smallestWidth+=widthModel.configured?child[names.width]:child[minWidthName]||0,heightModel=childContext[heightModelName],nostretch&&heightModel.calculated&&(match=percentageRe.exec(child[names.height]),childContext.percentagePerpendicular=parseFloat(match[1])/100,++percentageHeights),smallestHeight<(height=heightModel.configured?child[names.height]:child[minHeightName]||0)&&(smallestHeight=height);ownerContext.flexedItems=flexedItems,ownerContext.flexedMinWidth=minWidth,ownerContext.smallestWidth=smallestWidth,ownerContext.smallestHeight=smallestHeight,ownerContext.totalFlex=totalFlex,ownerContext.percentageWidths=percentageWidths,ownerContext.percentageHeights=percentageHeights,Ext.Array.sort(flexedItems,this.flexSortFn)},calculate:function(ownerContext){var me=this,names=ownerContext.boxNames,state=ownerContext.state,actualScroll=state.actualScroll,needsScroll=state.needsScroll,canScroll=state.canScroll,plan=state.boxPlan||(state.boxPlan={}),overflowHandler=me.overflowHandler;if(plan.targetSize=me.getContainerSize(ownerContext),canScroll&&!needsScroll&&(state.needsScroll=needsScroll={parallel:canScroll.parallel&&plan.targetSize[names.width]<ownerContext.smallestWidth,perpendicular:canScroll.perpendicular&&plan.targetSize[names.height]<ownerContext.smallestHeight}),state.parallelDone||(state.parallelDone=me.calculateParallel(ownerContext,names,plan)),state.perpendicularDone||(state.perpendicularDone=me.calculatePerpendicular(ownerContext,names,plan)),state.parallelDone&&state.perpendicularDone){if(canScroll&&!state.scrollPass&&(needsScroll.parallel!==actualScroll.parallel||needsScroll.perpendicular!==actualScroll.perpendicular))return ownerContext.invalidate({state:{scrollPass:!0,canScroll:canScroll,needsScroll:actualScroll}}),void(me.done=!1);me.publishInnerCtSize(ownerContext),me.done&&ownerContext.boxOptions.align.stretchmax&&!state.stretchMaxDone&&(me.calculateStretchMax(ownerContext,names,plan),state.stretchMaxDone=!0),overflowHandler&&overflowHandler.calculate(ownerContext)}else me.done=!1},calculateParallel:function(ownerContext,names,plan){var i,childMargins,remainingWidth,remainingFlex,childContext,flex,flexedWidth,contentWidth,childWidth,percentageSpace,availableSpace,widthShrinkWrap=ownerContext.parallelSizeModel.shrinkWrap,widthName=names.width,childItems=ownerContext.childItems,beforeXName=names.beforeX,afterXName=names.afterX,setWidthName=names.setWidth,childItemsLength=childItems.length,flexedItems=ownerContext.flexedItems,flexedItemsLength=flexedItems.length,pack=ownerContext.boxOptions.pack,padding=this.padding,targetSize=plan.targetSize,containerWidth=targetSize[widthName],state=ownerContext.state,needsScroll=state.needsScroll,canScroll=state.canScroll,totalMargin=0,left=padding[beforeXName],nonFlexWidth=left+padding[afterXName],scrollbarSize=Ext.getScrollbarSize(),scrollbarWidth=scrollbarSize[names.width],scrollbarHeight=scrollbarSize[names.height];if(!widthShrinkWrap&&!targetSize[names.gotWidth])return!1;for(i=0;i<childItemsLength;++i)if(totalMargin+=(childMargins=(childContext=childItems[i]).marginInfo||childContext.getMarginInfo())[widthName],!childContext[names.widthModel].calculated&&(nonFlexWidth+=childWidth=childContext.getProp(widthName),isNaN(nonFlexWidth)))return!1;if(nonFlexWidth+=totalMargin,ownerContext.percentageWidths){if(percentageSpace=containerWidth-totalMargin,isNaN(percentageSpace))return!1;for(i=0;i<childItemsLength;++i)(childContext=childItems[i]).percentageParallel&&(childWidth=Math.ceil(percentageSpace*childContext.percentageParallel),nonFlexWidth+=childWidth=childContext.setWidth(childWidth))}for(widthShrinkWrap?(availableSpace=0,plan.tooNarrow=!1):(availableSpace=containerWidth-nonFlexWidth,needsScroll&&needsScroll.perpendicular&&(availableSpace-=scrollbarHeight),plan.tooNarrow=availableSpace<ownerContext.flexedMinWidth,plan.tooNarrow&&canScroll&&canScroll.parallel&&(state.actualScroll.parallel=!0)),contentWidth=nonFlexWidth,remainingWidth=availableSpace,remainingFlex=ownerContext.totalFlex,i=0;i<flexedItemsLength;i++)flex=(childContext=flexedItems[i]).flex,flexedWidth=this.roundFlex(flex/remainingFlex*remainingWidth),contentWidth+=flexedWidth=childContext[setWidthName](flexedWidth),remainingWidth=Math.max(0,remainingWidth-flexedWidth),remainingFlex-=flex;for(pack.center?(left+=remainingWidth/2)<0&&(left=0):pack.end&&(left+=remainingWidth),i=0;i<childItemsLength;++i)left+=(childMargins=(childContext=childItems[i]).marginInfo)[beforeXName],childContext.setProp(names.x,left),left+=childMargins[afterXName]+childContext.props[widthName];return contentWidth+=ownerContext.targetContext.getPaddingInfo()[widthName],ownerContext.state.contentWidth=contentWidth,needsScroll&&needsScroll.perpendicular&&(widthShrinkWrap&&(contentWidth+=scrollbarWidth),ownerContext[names.hasOverflowY]=!0,ownerContext.target.componentLayout[names.setWidthInDom]=!0,ownerContext[names.invalidateScrollY]=Ext.isIE8),ownerContext[names.setContentWidth](contentWidth),!0},calculatePerpendicular:function(ownerContext,names,plan){var childTop,i,childHeight,childMargins,diff,height,childContext,stretchMaxPartner,stretchMaxChildren,shrinkWrapParallelOverflow,percentagePerpendicular,me=this,state=ownerContext.state,needsScroll=state.needsScroll,canScroll=state.canScroll,heightShrinkWrap=ownerContext.perpendicularSizeModel.shrinkWrap,targetSize=plan.targetSize,childItems=ownerContext.childItems,childItemsLength=childItems.length,mmax=Math.max,heightName=names.height,setHeightName=names.setHeight,beforeYName=names.beforeY,topPositionName=names.y,padding=me.padding,top=padding[beforeYName],availHeight=targetSize[heightName]-top-padding[names.afterY],align=ownerContext.boxOptions.align,isStretch=align.stretch,isStretchMax=align.stretchmax,isCenter=align.center,isBottom=align.bottom,constrain=me.constrainAlign,maxHeight=0,hasPercentageSizes=0,onBeforeInvalidateChild=me.onBeforeConstrainInvalidateChild,onAfterInvalidateChild=me.onAfterConstrainInvalidateChild,scrollbarHeight=Ext.getScrollbarSize().height;if(!heightShrinkWrap&&!targetSize[names.gotHeight])return!1;if((isStretch||(isCenter||isBottom)&&!heightShrinkWrap)&&isNaN(availHeight))return!1;if(needsScroll&&needsScroll.parallel&&(heightShrinkWrap?shrinkWrapParallelOverflow=!0:(availHeight-=scrollbarHeight,plan.targetSize[heightName]-=scrollbarHeight)),isStretch)maxHeight=mmax(height=availHeight,ownerContext.smallestHeight);else for(i=0;i<childItemsLength;i++){if(childMargins=((childContext=childItems[i]).marginInfo||childContext.getMarginInfo())[heightName],percentagePerpendicular=childContext.percentagePerpendicular){if(++hasPercentageSizes,heightShrinkWrap)continue;childHeight=percentagePerpendicular*availHeight-childMargins,childHeight=childContext[names.setHeight](childHeight)}else childHeight=childContext.getProp(heightName);if(!heightShrinkWrap&&constrain&&childContext[names.heightModel].shrinkWrap&&availHeight<childHeight&&(childContext.invalidate({before:onBeforeInvalidateChild,after:onAfterInvalidateChild,layout:me,childHeight:availHeight,names:names}),ownerContext.state.parallelDone=!1),isNaN(maxHeight=mmax(maxHeight,childHeight+childMargins,childContext.target[names.minHeight]||0)))return!1}if(shrinkWrapParallelOverflow&&(maxHeight+=scrollbarHeight,ownerContext[names.hasOverflowX]=!0,ownerContext.target.componentLayout[names.setHeightInDom]=!0,ownerContext[names.invalidateScrollX]=Ext.isIE8),(stretchMaxPartner=ownerContext.stretchMaxPartner)&&(ownerContext.setProp("maxChildHeight",maxHeight),(stretchMaxChildren=stretchMaxPartner.childItems)&&stretchMaxChildren.length&&(maxHeight=mmax(maxHeight,stretchMaxPartner.getProp("maxChildHeight")),isNaN(maxHeight))))return!1;for(ownerContext[names.setContentHeight](maxHeight+me.padding[heightName]+ownerContext.targetContext.getPaddingInfo()[heightName]),shrinkWrapParallelOverflow&&(maxHeight-=scrollbarHeight),maxHeight>targetSize[heightName]&&canScroll&&canScroll.perpendicular&&(state.actualScroll.perpendicular=!0),plan.maxSize=maxHeight,isStretchMax?height=maxHeight:(isCenter||isBottom||hasPercentageSizes)&&(height=constrain?heightShrinkWrap?maxHeight:availHeight:heightShrinkWrap?maxHeight:mmax(availHeight,maxHeight),height-=ownerContext.innerCtContext.getBorderInfo()[heightName]),i=0;i<childItemsLength;i++)childTop=top+(childMargins=(childContext=childItems[i]).marginInfo||childContext.getMarginInfo())[beforeYName],isStretch?childContext[setHeightName](height-childMargins[heightName]):(percentagePerpendicular=childContext.percentagePerpendicular,heightShrinkWrap&&percentagePerpendicular&&(childHeight=percentagePerpendicular*height-(childMargins=childContext.marginInfo||childContext.getMarginInfo())[heightName],childHeight=childContext.setHeight(childHeight)),isCenter?0<(diff=height-childContext.props[heightName])&&(childTop=top+Math[me.alignRoundingMethod](diff/2)):isBottom&&(childTop=mmax(0,height-childTop-childContext.props[heightName]))),childContext.setProp(topPositionName,childTop);return!0},onBeforeConstrainInvalidateChild:function(childContext,options){var heightModelName=options.names.heightModel;childContext[heightModelName].constrainedMin||(childContext[heightModelName]=Ext.layout.SizeModel.calculated)},onAfterConstrainInvalidateChild:function(childContext,options){var names=options.names;childContext.setProp(names.beforeY,0),childContext[names.heightModel].calculated&&childContext[names.setHeight](options.childHeight)},calculateStretchMax:function(ownerContext,names,plan){var childContext,props,i,childHeight,heightName=names.height,widthName=names.width,childItems=ownerContext.childItems,length=childItems.length,height=plan.maxSize,onBeforeStretchMaxInvalidateChild=this.onBeforeStretchMaxInvalidateChild,onAfterStretchMaxInvalidateChild=this.onAfterStretchMaxInvalidateChild;for(i=0;i<length;++i)props=(childContext=childItems[i]).props,(childHeight=height-childContext.getMarginInfo()[heightName])===props[heightName]&&!childContext[names.heightModel].constrained||childContext.invalidate({before:onBeforeStretchMaxInvalidateChild,after:onAfterStretchMaxInvalidateChild,layout:this,childWidth:props[widthName],childHeight:childHeight,childX:props.x,childY:props.y,names:names})},onBeforeStretchMaxInvalidateChild:function(childContext,options){var heightModelName=options.names.heightModel;childContext[heightModelName].constrainedMax||(childContext[heightModelName]=Ext.layout.SizeModel.calculated)},onAfterStretchMaxInvalidateChild:function(childContext,options){var names=options.names,childHeight=options.childHeight,childWidth=options.childWidth;childContext.setProp("x",options.childX),childContext.setProp("y",options.childY),childContext[names.heightModel].calculated&&childContext[names.setHeight](childHeight),childContext[names.widthModel].calculated&&childContext[names.setWidth](childWidth)},completeLayout:function(ownerContext){var dom,el,overflowX,overflowY,styles,invalidateScrollX=ownerContext.invalidateScrollX,invalidateScrollY=ownerContext.invalidateScrollY,overflowHandler=this.overflowHandler,scrollRestore=ownerContext.scrollRestore;overflowHandler&&overflowHandler.completeLayout(ownerContext),(invalidateScrollX||invalidateScrollY)&&(styles=(dom=(el=this.getTarget()).dom).style,invalidateScrollX&&("auto"===(overflowX=el.getStyle("overflowX"))?(overflowX=styles.overflowX,styles.overflowX="scroll"):invalidateScrollX=!1),invalidateScrollY&&("auto"===(overflowY=el.getStyle("overflowY"))?(overflowY=styles.overflowY,styles.overflowY="scroll"):invalidateScrollY=!1),(invalidateScrollX||invalidateScrollY)&&(dom.scrollWidth,invalidateScrollX&&(styles.overflowX=overflowX),invalidateScrollY&&(styles.overflowY=overflowY))),scrollRestore&&ownerContext.ownerScrollable.scrollTo(scrollRestore.x,scrollRestore.y)},finishedLayout:function(ownerContext){var overflowHandler=this.overflowHandler;overflowHandler&&overflowHandler.finishedLayout(ownerContext),this.callParent(arguments)},getLayoutItems:function(){var lastVisibleItem,hide,i,item,splitAfter,splitBefore,splitter,items=this.callParent(),n=items.length;for(i=0;i<n;++i)(item=items[i]).isSplitter||(splitter=item.splitter,item.hidden?splitter&&(splitter.hidden||(splitter.hidden=!0,splitter.el&&splitter.el.hide())):(splitBefore=!!splitter&&"next"===splitter.collapseTarget,hide=null,lastVisibleItem&&splitAfter?(splitAfter.hidden&&(splitAfter.hidden=!1,splitAfter.el&&splitAfter.el.show()),splitBefore&&(hide=!0)):splitBefore&&(hide=!lastVisibleItem),null!==hide&&splitter.hidden!==hide&&(splitter.hidden=hide,splitter.el&&splitter.el.setVisible(!hide)),splitAfter=!splitBefore&&splitter,lastVisibleItem=item));return lastVisibleItem&&splitAfter&&!splitAfter.hidden&&(splitAfter.hidden=!0,splitAfter.el&&splitAfter.el.hide()),items},getScrollerEl:function(){return this.innerCt},insertSplitter:function(item,index,hidden,splitterCfg){var splitter={xtype:"splitter",id:item.id+"-splitter",hidden:hidden,splitterFor:item,synthetic:!0},at=index+("prev"===splitterCfg.collapseTarget?1:0);splitter[this.names.height]="100%",splitterCfg&&Ext.apply(splitter,splitterCfg),item.splitter=this.owner.add(at,splitter)},publishInnerCtSize:function(ownerContext,widthOffset){widthOffset=widthOffset||0;var innerCtWidth,innerCtHeight,state=ownerContext.state,names=ownerContext.boxNames,heightName=names.height,widthName=names.width,align=ownerContext.boxOptions.align,padding=this.padding,plan=state.boxPlan,targetSize=plan.targetSize,height=plan.maxSize,needsScroll=state.needsScroll,innerCtContext=ownerContext.innerCtContext;ownerContext.parallelSizeModel.shrinkWrap||plan.tooNarrow&&state.canScroll?innerCtWidth=state.contentWidth-ownerContext.targetContext.getPaddingInfo()[widthName]:(innerCtWidth=targetSize[widthName],needsScroll&&needsScroll.perpendicular&&(innerCtWidth-=Ext.getScrollbarSize()[widthName])),innerCtWidth-=widthOffset,this.owner.tooNarrow=plan.tooNarrow,align.stretch?innerCtHeight=height:(innerCtHeight=plan.maxSize+padding[names.beforeY]+padding[names.afterY]+innerCtContext.getBorderInfo()[heightName],ownerContext.perpendicularSizeModel.shrinkWrap||!align.center&&!align.bottom||(innerCtHeight=Math.max(targetSize[heightName],innerCtHeight))),innerCtContext[names.setWidth](innerCtWidth),innerCtContext[names.setHeight](innerCtHeight),ownerContext.targetElContext.setWidth(ownerContext.innerCtContext.props.width-(!this.vertical&&widthOffset||0)),isNaN(innerCtWidth+innerCtHeight)&&(this.done=!1)},onAdd:function(item,index){var split=this.enableSplitters&&item.split&&!item.isButton;this.callParent(arguments),split&&(split=!0===split?{collapseTarget:"next"}:Ext.isString(split)?{collapseTarget:"before"===split?"next":"prev"}:Ext.apply({collapseTarget:"before"===split.side?"next":"prev"},split),this.insertSplitter(item,index,!!item.hidden,split))},onRemove:function(comp,isDestroying){var el,me=this,names=me.names,owner=me.owner,splitter=comp.splitter,overflowHandler=me.overflowHandler;me.callParent(arguments),splitter&&owner.contains(splitter)&&(owner.doRemove(splitter,!0),comp.splitter=null),overflowHandler&&overflowHandler.onRemove(comp),comp.layoutMarginCap===me.id&&delete comp.layoutMarginCap,owner.destroying||isDestroying||!comp.rendered||(el=comp.getEl())&&(el.setStyle(names.beforeY,""),el.setStyle(names.beforeX,""),el.setStyle("margin",""))},applyOverflowHandler:function(overflowHandler,oldOverflowHandler){return"string"==typeof overflowHandler&&(overflowHandler={type:overflowHandler}),overflowHandler.type,oldOverflowHandler&&oldOverflowHandler.type===overflowHandler.type?(delete overflowHandler.type,oldOverflowHandler.setConfig(overflowHandler),oldOverflowHandler):(overflowHandler.layout=this,Ext.Factory.boxOverflow(overflowHandler))},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var me=this;Ext.destroy(me.innerCt,me.overflowHandler),me.flexSortFn=me.innerCt=null,me.callParent()},getRenderData:function(){var data=this.callParent();return data.targetElCls=this.targetElCls,data},updateVertical:function(vertical){var overflowHandler=this.overflowHandler,owner=this.owner,props=this._props;Ext.apply(this,vertical?props.vbox:props.hbox),overflowHandler&&owner&&owner.rendered&&overflowHandler.setVertical(vertical)},_props:{hbox:{direction:"horizontal",oppositeDirection:"vertical",horizontal:!0,vertical:!1,names:{beforeX:"left",beforeScrollX:"left",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",getX:"getX",setX:"setX",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",getY:"getY",setY:"setY",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},vbox:{direction:"vertical",oppositeDirection:"horizontal",horizontal:!1,vertical:!0,names:{beforeX:"top",beforeScrollX:"top",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",getX:"getY",setX:"setY",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",getY:"getX",setY:"setX",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}}),Ext.define("Ext.layout.container.HBox",{extend:Ext.layout.container.Box,alias:"layout.hbox",alternateClassName:"Ext.layout.HBoxLayout",type:"hbox",vertical:!1}),Ext.define("Ext.layout.container.VBox",{extend:Ext.layout.container.Box,alias:"layout.vbox",alternateClassName:"Ext.layout.VBoxLayout",type:"vbox",vertical:!0}),Ext.define("Ext.toolbar.Toolbar",{extend:Ext.container.Container,alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",mixins:[Ext.util.FocusableContainer],isToolbar:!0,baseCls:Ext.baseCSSPrefix+"toolbar",ariaRole:"toolbar",defaultType:"button",layout:void 0,vertical:void 0,enableOverflow:!1,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:!0,itemCls:Ext.baseCSSPrefix+"toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var me=this,layout=me.layout,vertical=me.vertical;void 0===vertical&&(me.vertical=vertical="right"===me.dock||"left"===me.dock),me.layout=layout=Ext.applyIf(Ext.isString(layout)?{type:layout}:layout||{},{type:vertical?"vbox":"hbox",align:vertical?"stretchmax":"middle"}),me.overflowHandler?layout.overflowHandler=me.overflowHandler:me.enableOverflow&&(layout.overflowHandler="menu"),vertical&&me.addClsWithUI("vertical"),"footer"===me.ui&&(me.ignoreBorderManagement=!0),me.callParent()},getRefItems:function(deep){var handler,items=this.callParent(arguments),layout=this.layout;return deep&&(this.enableOverflow||"menu"===this.overflowHandler)&&(handler=layout.overflowHandler)&&handler.menu&&(items=items.concat(handler.menu.getRefItems(deep))),items},lookupComponent:function(c){var shortcut,T,args=arguments;return"string"==typeof c&&(c="string"==typeof(shortcut=(T=Ext.toolbar.Toolbar).shortcutsHV[this.vertical?1:0][c]||T.shortcuts[c])?{xtype:shortcut}:shortcut?Ext.apply({},shortcut):{xtype:"tbtext",text:c},this.applyDefaults(c),args=[c]),this.callParent(args)},onBeforeAdd:function(component){var me=this,isFooter="footer"===me.ui,defaultButtonUI=isFooter?me.defaultFooterButtonUI:me.defaultButtonUI;component.isSegmentedButton?"default"!==component.getDefaultUI()||component.config.hasOwnProperty("defaultUI")||component.setDefaultUI(defaultButtonUI):"default"!==component.ui||component.hasOwnProperty("ui")||(component.isButton?component.ui=defaultButtonUI:component.isFormField&&(component.ui=isFooter?me.defaultFooterFieldUI:me.defaultFieldUI)),component instanceof Ext.toolbar.Separator&&component.setUI(me.vertical?"vertical":"horizontal"),me.callParent(arguments)},onAdd:function(component){component.needArrowKeys&&this.enableFocusableContainer&&(this.enableFocusableContainer=!1),this.callParent(arguments),this.trackMenu(component)},onRemove:function(c){this.callParent(arguments),this.trackMenu(c,!0)},privates:{applyDefaults:function(c){return Ext.isString(c)||(c=this.callParent(arguments)),c},trackMenu:function(item,remove){var me=this;me.trackMenus&&item.menu&&item[remove?"un":"on"]({mouseover:me.onButtonOver,menushow:me.onButtonMenuShow,menuhide:me.onButtonMenuHide,scope:me})},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(btn,e){var activeMenuBtn=this.activeMenuBtn;activeMenuBtn&&activeMenuBtn!==btn&&(activeMenuBtn.hideMenu(),btn.focus(),btn.showMenu(e),this.activeMenuBtn=btn)},onButtonMenuShow:function(btn){this.activeMenuBtn=btn},onButtonMenuHide:function(btn){this.activeMenuBtn=null}}}),Ext.define("Ext.dd.DragDrop",{constructor:function(id,sGroup,config){id&&this.init(id,sGroup,config)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,triggerEvent:"mousedown",b4StartDrag:function(x,y){},startDrag:function(x,y){},b4Drag:function(e){},onDrag:function(e){},onDragEnter:function(e,id){},b4DragOver:function(e){},onDragOver:function(e,id){},b4DragOut:function(e){},onDragOut:function(e,id){},b4DragDrop:function(e){},onDragDrop:function(e,id){},onInvalidDrop:function(e){},b4EndDrag:function(e){},endDrag:function(e){},b4MouseDown:function(e){},onMouseDown:function(e){},onMouseUp:function(e){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(constrainTo,pad,inContent){Ext.isNumber(pad)&&(pad={left:pad,right:pad,top:pad,bottom:pad}),pad=pad||this.defaultPadding;var c,xy,topSpace,leftSpace,ddBox=Ext.get(this.getEl()).getBox(),constrainEl=Ext.get(constrainTo),s=constrainEl.getScroll(),constrainDom=constrainEl.dom;c=constrainDom===document.body?{x:s.left,y:s.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}:{x:(xy=constrainEl.getXY())[0],y:xy[1],width:constrainDom.clientWidth,height:constrainDom.clientHeight},topSpace=ddBox.y-c.y,leftSpace=ddBox.x-c.x,this.resetConstraints(),this.setXConstraint(leftSpace-(pad.left||0),c.width-leftSpace-ddBox.width-(pad.right||0),this.xTickSize),this.setYConstraint(topSpace-(pad.top||0),c.height-topSpace-ddBox.height-(pad.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(id,sGroup,config){var me=this;me.el=me.el||Ext.get(id),me.initTarget(id,sGroup,config),Ext.get(me.id).on(me.triggerEvent,me.handleMouseDown,me)},initTarget:function(id,sGroup,config){this.config=config||{},this.DDMInstance=Ext.dd.DragDropManager,this.groups={},"string"!=typeof id&&(id=Ext.id(id)),this.id=id,this.addToGroup(sGroup||"default"),this.handleElId=id,this.setDragElId(id),this.invalidHandleTypes={A:"A"},this.invalidHandleIds={},this.invalidHandleClasses=[],this.applyConfig(),this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0],this.isTarget=!1!==this.config.isTarget,this.maintainOffset=this.config.maintainOffset,this.primaryButtonOnly=!1!==this.config.primaryButtonOnly},handleOnAvailable:function(){this.available=!0,this.resetConstraints(),this.onAvailable()},setPadding:function(iTop,iRight,iBot,iLeft){this.padding=iRight||0===iRight?iBot||0===iBot?[iTop,iRight,iBot,iLeft]:[iTop,iRight,iTop,iRight]:[iTop,iTop,iTop,iTop]},setInitPosition:function(diffX,diffY){var dx,dy,p,el=this.getEl();this.DDMInstance.verifyEl(el)&&(dx=diffX||0,dy=diffY||0,p=Ext.fly(el).getXY(),this.initPageX=p[0]-dx,this.initPageY=p[1]-dy,this.lastPageX=p[0],this.lastPageY=p[1],this.setStartPosition(p))},setStartPosition:function(pos){var p=pos||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null,this.startPageX=p[0],this.startPageY=p[1]},addToGroup:function(sGroup){this.groups[sGroup]=!0,this.DDMInstance.regDragDrop(this,sGroup)},removeFromGroup:function(sGroup){this.groups[sGroup]&&delete this.groups[sGroup],this.DDMInstance.removeDDFromGroup(this,sGroup)},setDragElId:function(id){this.dragElId=id},setHandleElId:function(id){"string"!=typeof id&&(id=Ext.id(id)),this.handleElId=id,this.DDMInstance.regHandle(this.id,id)},setOuterHandleElId:function(id){"string"!=typeof id&&(id=Ext.id(id)),Ext.get(id).on(this.triggerEvent,this.handleMouseDown,this),this.setHandleElId(id),this.hasOuterHandles=!0},unreg:function(){var el,me=this;me._domRef&&(el=Ext.fly(me.id))&&el.un(me.triggerEvent,me.handleMouseDown,me),me._domRef=null,me.DDMInstance._remove(me,me.autoGroup)},destroy:function(){this.unreg(),this.callParent()},isLocked:function(){return this.DDMInstance.isLocked()||this.locked},handleMouseDown:function(e,oDD){var me=this;me.primaryButtonOnly&&e.button||me.isLocked()||(me.DDMInstance.refreshCache(me.groups),(me.hasOuterHandles||me.DDMInstance.isOverTarget(e.getPoint(),me))&&me.clickValidator(e)&&(me.setStartPosition(),me.b4MouseDown(e),me.onMouseDown(e),me.DDMInstance.handleMouseDown(e,me),me.DDMInstance.stopEvent(e)))},clickValidator:function(e){var target=e.getTarget();return this.isValidHandleChild(target)&&(this.id===this.handleElId||this.DDMInstance.handleWasClicked(target,this.id))},addInvalidHandleType:function(tagName){var type=tagName.toUpperCase();this.invalidHandleTypes[type]=type},addInvalidHandleId:function(id){"string"!=typeof id&&(id=Ext.id(id)),this.invalidHandleIds[id]=id},addInvalidHandleClass:function(cssClass){this.invalidHandleClasses.push(cssClass)},removeInvalidHandleType:function(tagName){var type=tagName.toUpperCase();delete this.invalidHandleTypes[type]},removeInvalidHandleId:function(id){"string"!=typeof id&&(id=Ext.id(id)),delete this.invalidHandleIds[id]},removeInvalidHandleClass:function(cssClass){var i,invalidHandleClasses=this.invalidHandleClasses,len=invalidHandleClasses.length;for(i=0;i<len;++i)invalidHandleClasses[i]===cssClass&&delete invalidHandleClasses[i]},isValidHandleChild:function(node){var nodeName,i,len,valid=!0;try{nodeName=node.nodeName.toUpperCase()}catch(e){nodeName=node.nodeName}for(valid=(valid=valid&&!this.invalidHandleTypes[nodeName])&&!this.invalidHandleIds[node.id],i=0,len=this.invalidHandleClasses.length;valid&&i<len;++i)valid=!Ext.fly(node).hasCls(this.invalidHandleClasses[i]);return valid},setXTicks:function(iStartX,iTickSize){this.xTicks=[],this.xTickSize=iTickSize;var i,tickMap={};for(i=this.initPageX;i>=this.minX;i-=iTickSize)tickMap[i]||(tickMap[this.xTicks[this.xTicks.length]=i]=!0);for(i=this.initPageX;i<=this.maxX;i+=iTickSize)tickMap[i]||(tickMap[this.xTicks[this.xTicks.length]=i]=!0);Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(iStartY,iTickSize){this.yTicks=[],this.yTickSize=iTickSize;var i,tickMap={};for(i=this.initPageY;i>=this.minY;i-=iTickSize)tickMap[i]||(tickMap[this.yTicks[this.yTicks.length]=i]=!0);for(i=this.initPageY;i<=this.maxY;i+=iTickSize)tickMap[i]||(tickMap[this.yTicks[this.yTicks.length]=i]=!0);Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(iLeft,iRight,iTickSize){this.leftConstraint=iLeft,this.rightConstraint=iRight,this.minX=this.initPageX-iLeft,this.maxX=this.initPageX+iRight,iTickSize&&this.setXTicks(this.initPageX,iTickSize),this.constrainX=!0},clearConstraints:function(){this.constrainX=!1,this.constrainY=!1,this.clearTicks()},clearTicks:function(){this.xTicks=null,this.yTicks=null,this.xTickSize=0,this.yTickSize=0},setYConstraint:function(iUp,iDown,iTickSize){this.topConstraint=iUp,this.bottomConstraint=iDown,this.minY=this.initPageY-iUp,this.maxY=this.initPageY+iDown,iTickSize&&this.setYTicks(this.initPageY,iTickSize),this.constrainY=!0},resetConstraints:function(){if(this.initPageX||0===this.initPageX){var dx=this.maintainOffset?this.lastPageX-this.initPageX:0,dy=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(dx,dy)}else this.setInitPosition();this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize),this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(val,tickArray){if(tickArray){if(tickArray[0]>=val)return tickArray[0];var i,len,next;for(i=0,len=tickArray.length;i<len;++i)if(tickArray[next=i+1]&&tickArray[next]>=val)return val-tickArray[i]<tickArray[next]-val?tickArray[i]:tickArray[next];return tickArray[tickArray.length-1]}return val},toString:function(){return"DragDrop "+this.id}}),Ext.define("Ext.dd.DD",{extend:Ext.dd.DragDrop,constructor:function(id,sGroup,config){id&&this.init(id,sGroup,config)},scroll:!0,autoOffset:function(iPageX,iPageY){var x=iPageX-this.startPageX,y=iPageY-this.startPageY;this.setDelta(x,y)},setDelta:function(iDeltaX,iDeltaY){this.deltaX=iDeltaX,this.deltaY=iDeltaY},setDragElPos:function(iPageX,iPageY){var el=this.getDragEl();this.alignElWithMouse(el,iPageX,iPageY)},alignElWithMouse:function(el,iPageX,iPageY){var vpSize,aCoord,newLeft,newTop,oCoord=this.getTargetCoord(iPageX,iPageY),fly=el.dom?el:Ext.fly(el,"_dd"),elSize=fly.getSize(),EL=Ext.Element;return this.deltaSetXY?(vpSize=this.cachedViewportSize,this.setLocalXY(fly,Math.max(0,Math.min(oCoord.x+this.deltaSetXY[0],vpSize.width-elSize.width)),Math.max(0,Math.min(oCoord.y+this.deltaSetXY[1],vpSize.height-elSize.height)))):(vpSize=this.cachedViewportSize={width:EL.getDocumentWidth(),height:EL.getDocumentHeight()},aCoord=[Math.max(0,Math.min(oCoord.x,vpSize.width-elSize.width)),Math.max(0,Math.min(oCoord.y,vpSize.height-elSize.height))],fly.setXY(aCoord),newLeft=this.getLocalX(fly),newTop=fly.getLocalY(),this.deltaSetXY=[newLeft-oCoord.x,newTop-oCoord.y]),this.cachePosition(oCoord.x,oCoord.y),this.autoScroll(oCoord.x,oCoord.y,el.offsetHeight,el.offsetWidth),oCoord},cachePosition:function(iPageX,iPageY){if(iPageX)this.lastPageX=iPageX,this.lastPageY=iPageY;else{var aCoord=Ext.fly(this.getEl()).getXY();this.lastPageX=aCoord[0],this.lastPageY=aCoord[1]}},autoScroll:function(x,y,h,w){if(this.scroll){var clientH=Ext.Element.getViewportHeight(),clientW=Ext.Element.getViewportWidth(),st=this.DDMInstance.getScrollTop(),sl=this.DDMInstance.getScrollLeft(),bot=h+y,right=w+x,toBot=clientH+st-y-this.deltaY,toRight=clientW+sl-x-this.deltaX,scrAmt=document.all?80:30;clientH<bot&&toBot<40&&window.scrollTo(sl,st+scrAmt),y<st&&0<st&&y-st<40&&window.scrollTo(sl,st-scrAmt),clientW<right&&toRight<40&&window.scrollTo(sl+scrAmt,st),x<sl&&0<sl&&x-sl<40&&window.scrollTo(sl-scrAmt,st)}},getTargetCoord:function(iPageX,iPageY){var x=iPageX-this.deltaX,y=iPageY-this.deltaY;return this.constrainX&&(x<this.minX&&(x=this.minX),x>this.maxX&&(x=this.maxX)),this.constrainY&&(y<this.minY&&(y=this.minY),y>this.maxY&&(y=this.maxY)),{x:x=this.getTick(x,this.xTicks),y:y=this.getTick(y,this.yTicks)}},applyConfig:function(){this.callParent(),this.scroll=!1!==this.config.scroll},b4MouseDown:function(e){var xy=e.getXY();this.autoOffset(xy[0],xy[1])},b4Drag:function(e){var xy=e.getXY();this.setDragElPos(xy[0],xy[1])},toString:function(){return"DD "+this.id},getLocalX:function(el){return el.getLocalX()},setLocalXY:function(el,x,y){el.setLocalXY(x,y)}}),Ext.define("Ext.dd.DDProxy",{extend:Ext.dd.DD,statics:{dragElId:"ygddfdiv"},constructor:function(id,sGroup,config){id&&(this.init(id,sGroup,config),this.initFrame())},resizeFrame:!0,centerFrame:!1,createFrame:function(){var div,s,self=this,body=document.body;body&&body.firstChild?(div=this.getDragEl())||((div=document.createElement("div")).id=this.dragElId,div.setAttribute("role","presentation"),(s=div.style).position="absolute",s.visibility="hidden",s.cursor="move",s.border="2px solid #aaa",s.zIndex=999,body.insertBefore(div,body.firstChild)):Ext.defer(function(){self.createFrame()},50)},initFrame:function(){this.createFrame()},applyConfig:function(){this.callParent(),this.resizeFrame=!1!==this.config.resizeFrame,this.centerFrame=this.config.centerFrame,this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(iPageX,iPageY){var me=this,dragEl=me.getDragEl(),s=dragEl.style;me._resizeProxy(),me.centerFrame&&me.setDelta(Math.round(parseInt(s.width,10)/2),Math.round(parseInt(s.height,10)/2)),me.setDragElPos(iPageX,iPageY),Ext.fly(dragEl).show()},_resizeProxy:function(){if(this.resizeFrame){var el=this.getEl();Ext.fly(this.getDragEl()).setSize(el.offsetWidth,el.offsetHeight)}},b4MouseDown:function(e){var xy=e.getXY(),x=xy[0],y=xy[1];this.autoOffset(x,y),this.setDragElPos(x,y)},b4StartDrag:function(x,y){this.showFrame(x,y)},b4EndDrag:function(e){Ext.fly(this.getDragEl()).hide()},endDrag:function(e){var lel=this.getEl(),del=this.getDragEl();del.style.visibility="",this.beforeMove(),lel.style.visibility="hidden",Ext.dd.DDM.moveToEl(lel,del),del.style.visibility="hidden",lel.style.visibility="",this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}}),Ext.define("Ext.dd.StatusProxy",{extend:Ext.Component,animRepair:!1,childEls:["ghost"],renderTpl:['<div class="'+Ext.baseCSSPrefix+'dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="'+Ext.baseCSSPrefix+'dd-drag-ghost" role="presentation"></div>'],repairCls:Ext.baseCSSPrefix+"dd-drag-repair",ariaRole:"presentation",skipLayout:!0,constructor:function(config){config=config||{},Ext.apply(this,{hideMode:"visibility",hidden:!0,floating:!0,id:this.id||Ext.id(),cls:Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed,shadow:config.shadow||!1,renderTo:Ext.getDetachedBody()}),this.callParent(arguments),this.dropStatus=this.dropNotAllowed},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",setStatus:function(cssClass){cssClass=cssClass||this.dropNotAllowed,this.dropStatus!==cssClass&&(this.el.replaceCls(this.dropStatus,cssClass),this.dropStatus=cssClass)},reset:function(clearGhost){var me=this,clsPrefix=Ext.baseCSSPrefix+"dd-drag-proxy ";me.el.replaceCls(clsPrefix+me.dropAllowed,clsPrefix+me.dropNotAllowed),me.dropStatus=me.dropNotAllowed,clearGhost&&me.ghost.setHtml("")},update:function(html){"string"==typeof html?this.ghost.setHtml(html):(this.ghost.setHtml(""),html.style.margin="0",this.ghost.dom.appendChild(html));var el=this.ghost.dom.firstChild;el&&Ext.fly(el).setStyle("float","none")},getGhost:function(){return this.ghost},hide:function(clear){this.callParent(),clear&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},sync:function(){this.el.syncUnderlays()},repair:function(xy,callback,scope){var me=this;me.callback=callback,me.scope=scope,xy&&!1!==me.animRepair?(me.el.addCls(me.repairCls),me.el.setUnderlaysVisible(!1),me.anim=me.el.animate({duration:me.repairDuration||500,easing:"ease-out",to:{x:xy[0],y:xy[1]},stopAnimation:!0,callback:me.afterRepair,scope:me})):me.afterRepair()},afterRepair:function(){var me=this;me.hide(!0),me.el.removeCls(me.repairCls),"function"==typeof me.callback&&me.callback.call(me.scope||me),delete me.callback,delete me.scope}}),Ext.define("Ext.dd.DragSource",{extend:Ext.dd.DDProxy,dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",animRepair:!0,repairHighlightColor:"c3daf9",constructor:function(el,config){this.el=Ext.get(el),this.dragData||(this.dragData={}),Ext.apply(this,config),this.proxy||(this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})),this.callParent([this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:!0===this.scroll}]),this.dragging=!1},getDragData:function(e){return this.dragData},onDragEnter:function(e,id){var status,target=Ext.dd.DragDropManager.getDDById(id);this.cachedTarget=target,!1!==this.beforeDragEnter(target,e,id)&&(target.isNotifyTarget?(status=target.notifyEnter(this,e,this.dragData),this.proxy.setStatus(status)):this.proxy.setStatus(this.dropAllowed),this.afterDragEnter&&this.afterDragEnter(target,e,id))},beforeDragEnter:function(target,e,id){return!0},onDragOver:function(e,id){var status,target=this.cachedTarget||Ext.dd.DragDropManager.getDDById(id);!1!==this.beforeDragOver(target,e,id)&&(target.isNotifyTarget&&(status=target.notifyOver(this,e,this.dragData),this.proxy.setStatus(status)),this.afterDragOver&&this.afterDragOver(target,e,id))},beforeDragOver:function(target,e,id){return!0},onDragOut:function(e,id){var target=this.cachedTarget||Ext.dd.DragDropManager.getDDById(id);!1!==this.beforeDragOut(target,e,id)&&(target.isNotifyTarget&&target.notifyOut(this,e,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(target,e,id)),this.cachedTarget=null},beforeDragOut:function(target,e,id){return!0},onDragDrop:function(e,id){var target=this.cachedTarget||Ext.dd.DragDropManager.getDDById(id);!1!==this.beforeDragDrop(target,e,id)&&(!target.isNotifyTarget||!1!==target.notifyDrop(this,e,this.dragData)?this.onValidDrop(target,e,id):this.onInvalidDrop(target,e,id),this.afterDragDrop&&this.afterDragDrop(target,e,id)),delete this.cachedTarget},beforeDragDrop:function(target,e,id){return!0},onValidDrop:function(target,e,id){this.hideProxy(),this.afterValidDrop&&this.afterValidDrop(target,e,id)},getRepairXY:function(e,data){return this.el.getXY()},onInvalidDrop:function(target,e,id){var me=this;e||(e=target,target=null,id=e.getTarget().id),!1!==me.beforeInvalidDrop(target,e,id)&&(me.cachedTarget&&(me.cachedTarget.isNotifyTarget&&me.cachedTarget.notifyOut(me,e,me.dragData),me.cacheTarget=null),me.proxy.repair(me.getRepairXY(e,me.dragData),me.afterRepair,me),me.afterInvalidDrop&&me.afterInvalidDrop(e,id))},afterRepair:function(){Ext.enableFx&&this.el.highlight(this.repairHighlightColor),this.dragging=!1},beforeInvalidDrop:function(target,e,id){return!0},handleMouseDown:function(e){if(!this.dragging){var data=this.getDragData(e);data&&!1!==this.onBeforeDrag(data,e)&&(this.dragData=data,this.proxy.stop(),this.callParent(arguments))}},onBeforeDrag:function(data,e){return!0},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){return this.proxy.ensureAttachedToBody(!0),this.callParent(arguments)},startDrag:function(x,y){this.proxy.reset(),this.proxy.hidden=!1,this.dragging=!0,this.proxy.update(""),this.onInitDrag(x,y),this.proxy.show()},onInitDrag:function(x,y){var clone=this.el.dom.cloneNode(!0);return clone.id=Ext.id(),this.proxy.update(clone),this.onStartDrag(x,y),!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide(),this.proxy.reset(!0),this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(e){},endDrag:function(e){this.onEndDrag(this.dragData,e)},onEndDrag:function(data,e){},autoOffset:function(x,y){this.setDelta(-12,-20)},destroy:function(){this.callParent(),Ext.destroy(this.proxy)}}),Ext.define("Ext.panel.Proxy",{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:!0,constructor:function(panel,config){this.panel=panel,this.id=this.panel.id+"-ddproxy",Ext.apply(this,config)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var me=this;me.ghost&&(me.proxy&&(me.proxy.destroy(),delete me.proxy),me.panel.unghost(null,me.moveOnDrag),delete me.ghost)},show:function(){var panelSize,me=this;me.ghost||(panelSize=me.panel.getSize(),me.panel.el.setVisibilityMode(Ext.Element.DISPLAY),me.ghost=me.panel.ghost(),me.insertProxy&&(me.proxy=me.panel.el.insertSibling({role:"presentation",cls:Ext.baseCSSPrefix+"panel-dd-spacer"}),me.proxy.setSize(panelSize)))},repair:function(xy,callback,scope){this.hide(),Ext.callback(callback,scope||this)},moveProxy:function(parentNode,before){this.proxy&&parentNode.insertBefore(this.proxy.dom,before)}}),Ext.define("Ext.panel.DD",{extend:Ext.dd.DragSource,constructor:function(panel,cfg){var me=this;me.panel=panel,me.dragData={panel:panel},me.panelProxy=new Ext.panel.Proxy(panel,cfg),me.proxy=me.panelProxy.proxy,me.callParent([panel.el,cfg]),me.setupEl(panel)},setupEl:function(panel){var header=panel.header,el=panel.body;header&&(this.setHandleElId(header.id),el=header.el),el?(el.setStyle("cursor","move"),this.scroll=!1):panel.on("boxready",this.setupEl,this,{single:!0})},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(x,y){this.panelProxy.show()},b4MouseDown:function(e){var xy=e.getXY(),x=xy[0],y=xy[1];this.autoOffset(x,y)},onInitDrag:function(x,y){return this.onStartDrag(x,y),!0},createFrame:Ext.emptyFn,getDragEl:function(e){var ghost=this.panelProxy.ghost;if(ghost)return ghost.el.dom},endDrag:function(e){this.panelProxy.hide(),this.panel.saveState()},autoOffset:function(x,y){x-=this.startPageX,y-=this.startPageY,this.setDelta(x,y)},onInvalidDrop:function(target,e,id){var me=this;!1!==me.beforeInvalidDrop(target,e,id)&&(me.cachedTarget&&(me.cachedTarget.isNotifyTarget&&me.cachedTarget.notifyOut(me,e,me.dragData),me.cacheTarget=null),me.afterInvalidDrop&&me.afterInvalidDrop(e,id))}}),Ext.define("Ext.layout.component.Dock",{extend:Ext.layout.component.Component,alias:"layout.dock",alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:!0,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:!1,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:!0,x:!0},verticalCollapsePolicy:{height:!0,y:!0},finishRender:function(){var target,items;this.callParent(),target=this.getRenderTarget(),items=this.getDockedItems(),this.finishRenderItems(target,items)},isItemBoxParent:function(itemContext){return!0},isItemShrinkWrap:function(item){return!0},noBorderClasses:[Ext.baseCSSPrefix+"docked-noborder-top",Ext.baseCSSPrefix+"docked-noborder-right",Ext.baseCSSPrefix+"docked-noborder-bottom",Ext.baseCSSPrefix+"docked-noborder-left"],noBorderClassesSides:{top:Ext.baseCSSPrefix+"docked-noborder-top",right:Ext.baseCSSPrefix+"docked-noborder-right",bottom:Ext.baseCSSPrefix+"docked-noborder-bottom",left:Ext.baseCSSPrefix+"docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},_itemCls:Ext.baseCSSPrefix+"docked",handleItemBorders:function(){var borders,docked,i,ln,item,dock,side,me=this,owner=me.owner,lastItems=me.lastDockedItems,oldBorders=me.borders,currentGeneration=owner.dockedItems.generation,noBorderClassesSides=me.noBorderClassesSides,borderWidthProps=me.borderWidthProps,collapsed=me.collapsed;if(!(me.initializedBorders===currentGeneration||owner.border&&!owner.manageBodyBorders||owner.collapsed&&"mini"===owner.collapseMode)){for(me.initializedBorders=currentGeneration,me.collapsed=!1,me.lastDockedItems=docked=me.getLayoutItems(),me.collapsed=collapsed,borders={top:[],right:[],bottom:[],left:[]},i=0,ln=docked.length;i<ln;i++)dock=(item=docked[i]).dock,item.ignoreBorderManagement||(borders[dock].satisfied||(borders[dock].push(item),borders[dock].satisfied=!0),borders.top.satisfied||"bottom"===dock||borders.top.push(item),borders.right.satisfied||"left"===dock||borders.right.push(item),borders.bottom.satisfied||"top"===dock||borders.bottom.push(item),borders.left.satisfied||"right"===dock||borders.left.push(item));if(lastItems)for(i=0,ln=lastItems.length;i<ln;i++)(item=lastItems[i]).destroyed||item.ignoreBorderManagement||owner.manageBodyBorders||item.removeCls(me.noBorderClasses);if(oldBorders)for(side in oldBorders)owner.manageBodyBorders&&oldBorders[side].satisfied&&owner.setBodyStyle(borderWidthProps[side],"");for(side in borders)if(ln=borders[side].length,owner.manageBodyBorders)borders[side].satisfied&&owner.setBodyStyle(borderWidthProps[side],"1px");else{for(i=0;i<ln;i++)borders[side][i].addCls(noBorderClassesSides[side]);!borders[side].satisfied&&!owner.bodyBorder||!1===owner.bodyBorder?owner.addBodyCls(noBorderClassesSides[side]):owner.removeBodyCls(noBorderClassesSides[side])}me.borders=borders}},beforeLayoutCycle:function(ownerContext){var collapsedHorz,collapsedVert,owner=this.owner,shrinkWrap=this.sizeModels.shrinkWrap,shrinkWrapDock=owner.shrinkWrapDock;owner.collapsed&&(owner.collapsedVertical()?(collapsedVert=!0,ownerContext.measureDimensions=1):(collapsedHorz=!0,ownerContext.measureDimensions=2)),ownerContext.collapsedVert=collapsedVert,ownerContext.collapsedHorz=collapsedHorz,collapsedVert?ownerContext.heightModel=shrinkWrap:collapsedHorz&&(ownerContext.widthModel=shrinkWrap),shrinkWrapDock=!0===shrinkWrapDock?3:shrinkWrapDock||0,ownerContext.shrinkWrapDockHeight=1&shrinkWrapDock&&ownerContext.heightModel.shrinkWrap,ownerContext.shrinkWrapDockWidth=2&shrinkWrapDock&&ownerContext.widthModel.shrinkWrap},beginLayout:function(ownerContext){var dockedItems,i,item,itemContext,offsets,collapsed,dock,me=this,owner=me.owner,docked=me.getLayoutItems(),layoutContext=ownerContext.context,dockedItemCount=docked.length,lastCollapsedState=me.lastCollapsedState;for(me.callParent(arguments),(collapsed=owner.getCollapsed())!==lastCollapsedState&&void 0!==lastCollapsedState&&(me.owner.collapsed?(ownerContext.isCollapsingOrExpanding=1,owner.addClsWithUI(owner.collapsedCls)):(ownerContext.isCollapsingOrExpanding=2,owner.removeClsWithUI(owner.collapsedCls),ownerContext.lastCollapsedState=me.lastCollapsedState)),me.lastCollapsedState=collapsed,ownerContext.dockedItems=dockedItems=[],i=0;i<dockedItemCount;i++)(item=docked[i]).rendered&&(dock=item.dock,(itemContext=layoutContext.getCmp(item)).dockedAt={x:0,y:0},itemContext.offsets=offsets=Ext.Element.parseBox(item.offsets||0),itemContext.horizontal="top"===dock||"bottom"===dock,offsets.width=offsets.left+offsets.right,offsets.height=offsets.top+offsets.bottom,dockedItems.push(itemContext));ownerContext.bodyContext=ownerContext.getEl("body")},beginLayoutCycle:function(ownerContext){var i,item,dock,me=this,docked=ownerContext.dockedItems,len=docked.length,owner=me.owner,frameBody=owner.frameBody,lastHeightModel=me.lastHeightModel;for(me.callParent(arguments),me.owner.manageHeight?me.lastBodyDisplay&&(owner.body.dom.style.display=me.lastBodyDisplay=""):("inline-block"!==me.lastBodyDisplay&&(owner.body.dom.style.display=me.lastBodyDisplay="inline-block"),lastHeightModel&&lastHeightModel.shrinkWrap&&!ownerContext.heightModel.shrinkWrap&&(owner.body.dom.style.marginBottom="")),ownerContext.widthModel.auto&&(ownerContext.widthModel.shrinkWrap&&owner.el.setWidth(null),owner.body.setWidth(null),frameBody&&frameBody.setWidth(null)),ownerContext.heightModel.auto&&(owner.body.setHeight(null),frameBody&&frameBody.setHeight(null)),ownerContext.collapsedVert?ownerContext.setContentHeight(0):ownerContext.collapsedHorz&&ownerContext.setContentWidth(0),i=0;i<len;i++)if("right"===(dock=(item=docked[i].target).dock))item.setLocalX(0);else if("left"!==dock)continue},calculate:function(ownerContext){var framing,horz,vert,forward,backward,me=this,measure=me.measureAutoDimensions(ownerContext,ownerContext.measureDimensions),state=ownerContext.state,horzDone=state.horzDone,vertDone=state.vertDone,bodyContext=ownerContext.bodyContext;for(ownerContext.borderInfo||ownerContext.getBorderInfo(),ownerContext.paddingInfo||ownerContext.getPaddingInfo(),ownerContext.frameInfo||ownerContext.getFrameInfo(),bodyContext.borderInfo||bodyContext.getBorderInfo(),bodyContext.paddingInfo||bodyContext.getPaddingInfo(),ownerContext.frameBorder||((framing=ownerContext.framing)?(ownerContext.frameBorder=framing.border,ownerContext.framePadding=framing.padding):(ownerContext.frameBorder=ownerContext.borderInfo,ownerContext.framePadding=ownerContext.paddingInfo)),horz=!horzDone&&me.createAxis(ownerContext,measure.contentWidth,ownerContext.widthModel,me.horzAxisProps,ownerContext.collapsedHorz),vert=!vertDone&&me.createAxis(ownerContext,measure.contentHeight,ownerContext.heightModel,me.vertAxisProps,ownerContext.collapsedVert),forward=0,backward=ownerContext.dockedItems.length;backward--;++forward)horz&&me.dockChild(ownerContext,horz,backward,forward),vert&&me.dockChild(ownerContext,vert,backward,forward);horz&&me.finishAxis(ownerContext,horz)&&(state.horzDone=horzDone=horz),vert&&me.finishAxis(ownerContext,vert)&&(state.vertDone=vertDone=vert),horzDone&&vertDone&&me.finishConstraints(ownerContext,horzDone,vertDone)?me.finishPositions(ownerContext,horzDone,vertDone):me.done=!1},createAxis:function(ownerContext,contentSize,sizeModel,axisProps,collapsedAxis){var framing,padding,end,begin=0,owner=this.owner,maxSize=owner[axisProps.maxSize],minSize=owner[axisProps.minSize]||0,dockBegin=axisProps.dockBegin,dockEnd=axisProps.dockEnd,posProp=axisProps.pos,sizeProp=axisProps.size,hasMaxSize=null!=maxSize;return end=sizeModel.shrinkWrap?collapsedAxis?0:contentSize+ownerContext.bodyContext.borderInfo[sizeProp]:(framing=ownerContext.frameBorder,padding=ownerContext.framePadding,begin=framing[dockBegin]+padding[dockBegin],ownerContext.getProp(sizeProp)-(framing[dockEnd]+padding[dockEnd])),{shrinkWrap:sizeModel.shrinkWrap,sizeModel:sizeModel,initialBegin:begin,begin:begin,end:end,collapsed:collapsedAxis,horizontal:axisProps.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:end-begin,maxChildSize:0,hasMinMaxConstraints:(minSize||hasMaxSize)&&sizeModel.shrinkWrap,minSize:minSize,maxSize:hasMaxSize?maxSize:1e9,bodyPosProp:this.owner.manageHeight?posProp:axisProps.marginBegin,dockBegin:dockBegin,dockEnd:dockEnd,posProp:posProp,sizeProp:sizeProp,setSize:axisProps.setSize,shrinkWrapDock:ownerContext[axisProps.shrinkWrapDock],sizeModelName:axisProps.sizeModel,dockedPixelsEnd:0}},dockChild:function(ownerContext,axis,backward,forward){var pos,size,me=this,itemContext=ownerContext.dockedItems[axis.shrinkWrap?backward:forward],item=itemContext.target,dock=item.dock,sizeProp=axis.sizeProp;item.ignoreParentFrame&&ownerContext.isCollapsingOrExpanding&&itemContext.clearMarginCache(),itemContext.marginInfo||itemContext.getMarginInfo(),pos=dock===axis.dockBegin?axis.shrinkWrap?me.dockOutwardBegin(ownerContext,itemContext,item,axis):me.dockInwardBegin(ownerContext,itemContext,item,axis):dock===axis.dockEnd?axis.shrinkWrap?me.dockOutwardEnd(ownerContext,itemContext,item,axis):me.dockInwardEnd(ownerContext,itemContext,item,axis):axis.shrinkWrapDock?(size=itemContext.getProp(sizeProp)+itemContext.marginInfo[sizeProp],axis.maxChildSize=Math.max(axis.maxChildSize,size),0):me.dockStretch(ownerContext,itemContext,item,axis),itemContext.dockedAt[axis.posProp]=pos},dockInwardBegin:function(ownerContext,itemContext,item,axis){var delta,size,dock,pos=axis.begin,sizeProp=axis.sizeProp,ignoreParentFrame=item.ignoreParentFrame;return ignoreParentFrame&&(axis.ignoreFrameBegin=itemContext,dock=item.dock,pos-=(delta=ownerContext.frameBorder[dock])+ownerContext.framePadding[dock]),item.overlay||(size=itemContext.getProp(sizeProp)+itemContext.marginInfo[sizeProp],axis.begin+=size,ignoreParentFrame&&(axis.begin-=delta)),pos},dockInwardEnd:function(ownerContext,itemContext,item,axis){var frameEnd,sizeProp=axis.sizeProp,size=itemContext.getProp(sizeProp)+itemContext.marginInfo[sizeProp],pos=axis.end-size;return item.overlay||(axis.end=pos),item.ignoreParentFrame&&(axis.ignoreFrameEnd=itemContext,pos+=(frameEnd=ownerContext.frameBorder[item.dock])+ownerContext.framePadding[item.dock],axis.end+=frameEnd),pos},dockOutwardBegin:function(ownerContext,itemContext,item,axis){var pos=axis.begin,sizeProp=axis.sizeProp;return axis.collapsed?axis.ignoreFrameBegin=axis.ignoreFrameEnd=itemContext:item.ignoreParentFrame&&(axis.ignoreFrameBegin=itemContext),item.overlay||(pos-=itemContext.getProp(sizeProp)+itemContext.marginInfo[sizeProp],axis.begin=pos),pos},dockOutwardEnd:function(ownerContext,itemContext,item,axis){var size,pos=axis.end,sizeProp=axis.sizeProp;return size=itemContext.getProp(sizeProp)+itemContext.marginInfo[sizeProp],axis.collapsed?axis.ignoreFrameBegin=axis.ignoreFrameEnd=itemContext:item.ignoreParentFrame&&(axis.ignoreFrameEnd=itemContext),item.overlay||(axis.end=pos+size,axis.dockedPixelsEnd+=size),pos},dockStretch:function(ownerContext,itemContext,item,axis){var size,dock=item.dock,sizeProp=axis.sizeProp,horizontal="top"===dock||"bottom"===dock,border=ownerContext.frameBorder,offsets=itemContext.offsets,padding=ownerContext.framePadding,endProp=horizontal?"right":"bottom",startProp=horizontal?"left":"top",pos=axis.begin+offsets[startProp];return!1!==item.stretch&&(size=axis.end-pos-offsets[endProp],item.ignoreParentFrame&&(pos-=padding[startProp]+border[startProp],size+=padding[sizeProp]+border[sizeProp]),size-=itemContext.marginInfo[sizeProp],itemContext[axis.setSize](size)),pos},finishAxis:function(ownerContext,axis){if(isNaN(axis.maxChildSize))return!1;var bodyPos,bodySize,delta,dirty,axisBegin=axis.begin,size=axis.end-axisBegin,collapsed=axis.collapsed,setSizeMethod=axis.setSize,beginName=axis.dockBegin,endName=axis.dockEnd,padding=ownerContext.framePadding,border=ownerContext.frameBorder,borderBegin=border[beginName],framing=ownerContext.framing,framingBegin=framing&&framing[beginName],paddingBegin=collapsed?0:padding[beginName],sizeProp=axis.sizeProp,ignoreFrameBegin=axis.ignoreFrameBegin,ignoreFrameEnd=axis.ignoreFrameEnd,bodyContext=ownerContext.bodyContext,extraPaddingBegin=Math.max(borderBegin+paddingBegin-framingBegin,0);return axis.shrinkWrap?(bodySize=axis.initialSize,framing?bodyPos=(delta=-axisBegin+borderBegin+paddingBegin)-framingBegin-extraPaddingBegin:delta=(bodyPos=-axisBegin)+paddingBegin,collapsed||(size+=padding[sizeProp]),ignoreFrameBegin?(delta-=borderBegin,bodyPos-=borderBegin,ignoreFrameBegin.dockedAt[axis.posProp]-=paddingBegin):size+=borderBegin,collapsed||(ignoreFrameEnd?ignoreFrameEnd.dockedAt[axis.posProp]+=padding[endName]:size+=border[endName]),axis.size=size,axis.horizontal||this.owner.manageHeight||(dirty=!1)):(bodyPos=framing?(delta=0,axisBegin-framingBegin-extraPaddingBegin):(delta=-borderBegin,axisBegin-paddingBegin-borderBegin),bodySize=size),axis.delta=delta,bodyContext[setSizeMethod](bodySize,dirty),bodyContext.setProp(axis.bodyPosProp,bodyPos),!isNaN(size)},beforeInvalidateShrinkWrapDock:function(itemContext,options){var sizeModelName=options.axis.sizeModelName;itemContext[sizeModelName].constrainedMin||(itemContext[sizeModelName]=Ext.layout.SizeModel.calculated)},afterInvalidateShrinkWrapDock:function(itemContext,options){var pos,axis=options.axis,me=options.layout;itemContext[axis.sizeModelName].calculated&&(pos=me.dockStretch(options.ownerContext,itemContext,itemContext.target,axis),itemContext.setProp(axis.posProp,axis.delta+pos))},finishConstraints:function(ownerContext,horz,vert){var dirty,height,width,heightModel,widthModel,size,minSize,maxSize,maxChildSize,desiredSize,sizeModels=this.sizeModels,publishWidth=horz.shrinkWrap,publishHeight=vert.shrinkWrap,owner=this.owner;if(publishWidth&&(size=horz.size,minSize=horz.collapsed?0:horz.minSize,maxSize=horz.maxSize,maxChildSize=horz.maxChildSize,maxSize<(desiredSize=Math.max(size,maxChildSize))?(widthModel=sizeModels.constrainedMax,width=maxSize):desiredSize<minSize?(widthModel=sizeModels.constrainedMin,width=minSize):size<maxChildSize?(widthModel=sizeModels.constrainedDock,owner.dockConstrainedWidth=width=maxChildSize):width=size),publishHeight&&(size=vert.size,minSize=vert.collapsed?0:vert.minSize,maxSize=vert.maxSize,maxChildSize=vert.maxChildSize,maxSize<(desiredSize=Math.max(size,maxChildSize+size-vert.initialSize))?(heightModel=sizeModels.constrainedMax,height=maxSize):desiredSize<minSize?(heightModel=sizeModels.constrainedMin,height=minSize):size<maxChildSize?(heightModel=sizeModels.constrainedDock,owner.dockConstrainedHeight=height=maxChildSize):(ownerContext.collapsedVert||owner.manageHeight||(dirty=!1,ownerContext.bodyContext.setProp("margin-bottom",vert.dockedPixelsEnd)),height=size)),widthModel||heightModel){if(widthModel&&heightModel&&widthModel.constrainedMax&&heightModel.constrainedByMin)return ownerContext.invalidate({widthModel:widthModel}),!1;if(!ownerContext.widthModel.calculatedFromShrinkWrap&&!ownerContext.heightModel.calculatedFromShrinkWrap)return ownerContext.invalidate({widthModel:widthModel,heightModel:heightModel}),!1}else this.invalidateAxes(ownerContext,horz,vert);return publishWidth&&(ownerContext.setWidth(width),widthModel&&(ownerContext.widthModel=widthModel)),publishHeight&&(ownerContext.setHeight(height,dirty),heightModel&&(ownerContext.heightModel=heightModel)),!0},invalidateAxes:function(ownerContext,horz,vert){var dockedItems,len,i,itemContext,itemSize,isHorz,axis,sizeProp,before=this.beforeInvalidateShrinkWrapDock,after=this.afterInvalidateShrinkWrapDock,horzSize=horz.end-horz.begin,vertSize=vert.initialSize,invalidateHorz=horz.shrinkWrapDock&&horz.maxChildSize<=horzSize,invalidateVert=vert.shrinkWrapDock&&vert.maxChildSize<=vertSize;if(invalidateHorz||invalidateVert)for(invalidateVert&&(vert.begin=vert.initialBegin,vert.end=vert.begin+vert.initialSize),i=0,len=(dockedItems=ownerContext.dockedItems).length;i<len;++i)isHorz=(itemContext=dockedItems[i]).horizontal,axis=null,invalidateHorz&&isHorz?(sizeProp=horz.sizeProp,itemSize=horzSize,axis=horz):invalidateVert&&!isHorz&&(sizeProp=vert.sizeProp,itemSize=vertSize,axis=vert),axis&&(itemSize-=itemContext.getMarginInfo()[sizeProp])!==itemContext.props[sizeProp]&&itemContext.invalidate({before:before,after:after,axis:axis,ownerContext:ownerContext,layout:this})},finishPositions:function(ownerContext,horz,vert){var index,itemContext,dockedItems=ownerContext.dockedItems,length=dockedItems.length,deltaX=horz.delta,deltaY=vert.delta;for(index=0;index<length;++index)(itemContext=dockedItems[index]).setProp("x",deltaX+itemContext.dockedAt.x),itemContext.setProp("y",deltaY+itemContext.dockedAt.y)},finishedLayout:function(ownerContext){var target=ownerContext.target;this.callParent(arguments),ownerContext.animatePolicy||(1===ownerContext.isCollapsingOrExpanding?target.afterCollapse(!1):2===ownerContext.isCollapsingOrExpanding&&target.afterExpand(!1))},getAnimatePolicy:function(ownerContext){var lastCollapsedState,policy;return 1===ownerContext.isCollapsingOrExpanding?lastCollapsedState=this.lastCollapsedState:2===ownerContext.isCollapsingOrExpanding&&(lastCollapsedState=ownerContext.lastCollapsedState),"left"===lastCollapsedState||"right"===lastCollapsedState?policy=this.horizontalCollapsePolicy:"top"!==lastCollapsedState&&"bottom"!==lastCollapsedState||(policy=this.verticalCollapsePolicy),policy},getDockedItems:function(order,beforeBody){var renderOrder,dock,dockedItems,i,isBefore,length,me=this,renderedOnly="visual"===order,all=renderedOnly?Ext.ComponentQuery.query("[rendered]",me.owner.dockedItems.items):me.owner.dockedItems.items,sort=all&&all.length&&!1!==order;if(null==beforeBody)dockedItems=sort&&!renderedOnly?all.slice():all;else{for(dockedItems=[],i=0,length=all.length;i<length;++i)isBefore="top"===(dock=all[i].dock)||"left"===dock,(beforeBody?isBefore:!isBefore)&&dockedItems.push(all[i]);sort=sort&&dockedItems.length}return sort&&(renderOrder="render"===(order=order||"render"),Ext.Array.sort(dockedItems,function(a,b){var aw,bw;return!renderOrder||(aw=me.owner.dockOrder[a.dock])===(bw=me.owner.dockOrder[b.dock])||aw+bw?(aw=me.getItemWeight(a,order),bw=me.getItemWeight(b,order),void 0!==aw&&void 0!==bw?aw-bw:0):aw-bw})),dockedItems||[]},getItemWeight:function(item,order){var weight=item.weight||this.owner.defaultDockWeights[item.dock];return weight[order]||weight},getLayoutItems:function(){var items,itemCount,item,i,result;if(this.owner.collapsed)result=this.owner.getCollapsedDockedItems();else for(itemCount=(items=this.getDockedItems("visual")).length,result=[],i=0;i<itemCount;i++)(item=items[i]).hidden||result.push(item);return result},measureContentWidth:function(ownerContext){var bodyContext=ownerContext.bodyContext;return bodyContext.el.getWidth()-bodyContext.getBorderInfo().width},measureContentHeight:function(ownerContext){var bodyContext=ownerContext.bodyContext;return bodyContext.el.getHeight()-bodyContext.getBorderInfo().height},redoLayout:function(ownerContext){var owner=this.owner;1===ownerContext.isCollapsingOrExpanding?(owner.reExpander&&owner.reExpander.el.show(),owner.addClsWithUI(owner.collapsedCls),ownerContext.redo(!0)):2===ownerContext.isCollapsingOrExpanding&&(owner.removeClsWithUI(owner.collapsedCls),ownerContext.bodyContext.redo())},renderChildren:function(){var items=this.getDockedItems(),target=this.getRenderTarget();this.handleItemBorders(),this.renderItems(items,target)},renderItems:function(items,target){var baseIndex,childNodes,childNodeCount,dom,gap,i,item,position,bodyFound,me=this,owner=me.owner,dockedItemIds={},dockedItemCount=items.length,bodyEl=owner.body,hasFrame=!!owner.frameSize,bodyContainer=owner.bodyContainer;if(dockedItemCount){for(i=0;i<dockedItemCount;i++)dockedItemIds[(item=items[i]).id]=item;for(childNodeCount=(childNodes=me.getRenderTarget().dom.childNodes).length,i=gap=0;i<childNodeCount;++i){if(dom=childNodes[i],hasFrame?!(bodyFound=dom===bodyEl.dom||dom===bodyContainer)&&Ext.fly(dom).contains(bodyEl)&&(bodyFound=!0,owner.bodyContainer=dom):bodyFound=dom===bodyEl.dom,bodyFound){baseIndex=i;break}dockedItemIds[dom.id]&&++gap}for(baseIndex-=gap,i=0;i<dockedItemCount;++i)position=baseIndex+i,"right"!==(item=items[i]).dock&&"bottom"!==item.dock||++position,item.rendered?me.isValidParent(item,target,position)||me.moveItem(item,target,position):me.renderItem(item,target,position)}},undoLayout:function(ownerContext){var owner=this.owner;1===ownerContext.isCollapsingOrExpanding?(owner.reExpander&&owner.reExpander.el.hide(),owner.removeClsWithUI(owner.collapsedCls),ownerContext.undo(!0)):2===ownerContext.isCollapsingOrExpanding&&(owner.addClsWithUI(owner.collapsedCls),ownerContext.bodyContext.undo())},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(item,ownerSizeModel){var dock,vertical,policy=this.sizePolicy,shrinkWrapDock=this.owner.shrinkWrapDock;return!1===item.stretch?policy.nostretch:(shrinkWrapDock=!0===shrinkWrapDock?3:shrinkWrapDock||0,(vertical="left"===(dock=item.dock)||"right"===dock)?(policy=policy.vert,shrinkWrapDock&=1):(policy=policy.horz,shrinkWrapDock&=2),shrinkWrapDock&&(ownerSizeModel=ownerSizeModel||this.owner.getSizeModel())[vertical?"height":"width"].shrinkWrap?policy.shrinkWrap:policy.stretch)},configureItem:function(item,pos){this.callParent(arguments),item.addCls(this._itemCls),item.ignoreBorderManagement||item.addClsWithUI(this.getDockCls(item.dock))},getDockCls:function(dock){return"docked-"+dock},afterRemove:function(item){var dom;this.callParent(arguments),item.removeCls(this._itemCls),item.ignoreBorderManagement||item.removeClsWithUI(this.getDockCls(item.dock)),dom=item.el.dom,!item.destroying&&dom&&dom.parentNode.removeChild(dom),this.childrenChanged=!0},borderCollapseMap:{},getBorderCollapseTable:function(){var table,map=this.borderCollapseMap,owner=this.owner,baseCls=owner.baseCls,ui=owner.ui;return(table=(map=map[baseCls]||(map[baseCls]={}))[ui])||(baseCls+="-"+ui+"-outer-border-",map[ui]=table=[0,baseCls+"l",baseCls+"b",baseCls+"bl",baseCls+"r",baseCls+"rl",baseCls+"rb",baseCls+"rbl",baseCls+"t",baseCls+"tl",baseCls+"tb",baseCls+"tbl",baseCls+"tr",baseCls+"trl",baseCls+"trb",baseCls+"trbl"]),table}}),Ext.define("Ext.util.Memento",function(){function captureOne(src,target,prop,prefix){src[prefix?prefix+prop:prop]=target[prop]}function removeOne(src,target,prop){delete src[prop]}function restoreOne(src,target,prop,prefix){var name=prefix?prefix+prop:prop,value=src[name];(value||src.hasOwnProperty(name))&&restoreValue(target,prop,value)}function restoreValue(target,prop,value){Ext.isDefined(value)?target[prop]=value:delete target[prop]}function doMany(doOne,src,target,props,prefix){if(src)if(Ext.isArray(props)){var p,pLen=props.length;for(p=0;p<pLen;p++)doOne(src,target,props[p],prefix)}else doOne(src,target,props,prefix)}return{data:null,target:null,constructor:function(target,props){this.data={},target&&(this.target=target,props&&this.capture(props))},capture:function(props,target,prefix){doMany(captureOne,this.data||(this.data={}),target||this.target,props,prefix)},remove:function(props){doMany(removeOne,this.data,null,props)},restore:function(props,clear,target,prefix){doMany(restoreOne,this.data,target||this.target,props,prefix),!1!==clear&&this.remove(props)},restoreAll:function(clear,target){var prop,t=target||this.target,data=this.data;for(prop in clear=!1!==clear,data)data.hasOwnProperty(prop)&&(restoreValue(t,prop,data[prop]),clear&&delete data[prop])}}}()),Ext.define("Ext.container.DockingContainer",{isDockingContainer:!0,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,tabGuard:!1,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" tabIndex="0" class="'+Ext.baseCSSPrefix+"tab-guard "+Ext.baseCSSPrefix+'tab-guard-{tabGuard}" ></div>',addDocked:function(items,pos){var index,instanced,item,length,me=this,rendered=me.rendered,i=0,dockedItems=me.dockedItems,lastIndex=dockedItems.getCount();for(length=(items=me.prepareItems(items)).length,rendered&&Ext.suspendLayouts(),pos=void 0===pos?lastIndex:Math.min(pos,lastIndex);i<length;i++)(item=items[i]).dock=item.dock||"top","left"!==item.dock&&"right"!==item.dock||me.horizontalDocks++,index=pos+i,dockedItems.insert(index,item),instanced=!!item.instancedCmp,delete item.instancedCmp,item.onAdded(me,index,instanced),delete item.$initParent,me.onDockedAdd!==Ext.emptyFn&&me.onDockedAdd(item),me.hasListeners.dockedadd&&me.fireEvent("dockedadd",me,item,index);return me.rendered&&(me.updateLayout(),Ext.resumeLayouts(!0)),items},destroyDockedItems:function(){var c,dockedItems=this.dockedItems;if(dockedItems)for(;c=dockedItems.first();)this.removeDocked(c,!0)},doRenderDockedItems:function(out,renderData,after){var items,tree,me=renderData.$comp,layout=me.componentLayout,tabGuard=me.tabGuard&&me.getTpl("tabGuardTpl");layout.getDockedItems&&!renderData.$skipDockedItems&&(tabGuard&&!after&&(renderData.tabGuard="before",me.addChildEl(renderData.tabGuardEl="tabGuardBeforeEl"),tabGuard.applyOut(renderData,out)),(tree=(items=layout.getDockedItems("render",!after))&&layout.getItemsRenderTree(items))&&Ext.DomHelper.generateMarkup(tree,out),tabGuard&&after&&(renderData.tabGuard="after",me.addChildEl(renderData.tabGuardEl="tabGuardAfterEl"),tabGuard.applyOut(renderData,out)))},getDockedComponent:function(comp){return Ext.isObject(comp)&&(comp=comp.getItemId()),this.dockedItems.get(comp)},getDockedItems:function(selector,beforeBody){var dockedItems=this.getComponentLayout().getDockedItems("render",beforeBody);return selector&&dockedItems.length&&(dockedItems=Ext.ComponentQuery.query(selector,dockedItems)),dockedItems},getDockingRefItems:function(deep,containerItems){var items,selector=deep&&"*,* *",dockedItems=this.getDockedItems(selector,!0);return dockedItems.push.apply(dockedItems,containerItems),items=this.getDockedItems(selector,!1),dockedItems.push.apply(dockedItems,items),dockedItems},initDockingItems:function(){var items=this.dockedItems;items&&items.isMixedCollection||(this.dockedItems=new Ext.util.ItemCollection,items&&this.addDocked(items))},insertDocked:function(pos,items){this.addDocked(items,pos)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(item,autoDestroy){var layout,hasLayout,me=this;return autoDestroy=!0===autoDestroy||!1!==autoDestroy&&me.autoDestroy,me.dockedItems.contains(item)&&("left"!==item.dock&&"right"!==item.dock||me.horizontalDocks--,(hasLayout=(layout=me.componentLayout)&&me.rendered)&&layout.onRemove(item),me.dockedItems.remove(item),item.onRemoved(item.destroying||autoDestroy),me.onDockedRemove(item),autoDestroy?item.destroy():hasLayout&&layout.afterRemove(item),me.hasListeners.dockedremove&&me.fireEvent("dockedremove",me,item),me.destroying||me.updateLayout()),item},moveDocked:function(item,side){this.rendered&&Ext.suspendLayouts(),this.removeDocked(item,!1),item.dock=side,this.addDocked(item),this.rendered&&(item.frame&&(Ext.getDetachedBody().appendChild(item.el),item.updateFrame()),Ext.resumeLayouts(!0))},setupDockingRenderTpl:function(renderTpl){renderTpl.renderDockedItems=this.doRenderDockedItems}}),Ext.define("Ext.panel.Panel",{extend:Ext.container.Container,alias:"widget.panel",alternateClassName:"Ext.Panel",mixins:{docking:Ext.container.DockingContainer},childEls:["body"],renderTpl:['<tpl if="headingText">','<div id="{id}-headingEl" data-ref="headingEl" role="heading"',' class="',Ext.baseCSSPrefix,'hidden-clip" style="height:0">',"{headingText}","</div>","</tpl>","{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyAriaAttributes">','<tpl foreach="bodyAriaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",'<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:!0,closable:!1,closeAction:"destroy",closeToolText:"Close panel",collapsed:!1,collapsedCls:"collapsed",collapseFirst:!0,collapsible:void 0,collapseToolText:"Collapse panel",expandToolText:"Expand panel",constrain:!1,constrainHeader:!1,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:!0,frame:!1,frameHeader:!0,hideCollapseTool:!1,manageHeight:!0,maskElement:"el",minButtonWidth:75,preventHeader:!1,shrinkWrapDock:!1,titleCollapse:void 0,baseCls:Ext.baseCSSPrefix+"panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:!0,defaultBindProperty:"title",addBodyCls:function(cls){return(this.rendered?this.body:this.getProtoBody()).addCls(cls),this},addTool:function(tools){Ext.isArray(tools)||(tools=[tools]);var t,tool,me=this,header=me.header,tLen=tools.length,curTools=me.tools;for(header&&header.isHeader||(header=null,curTools||(me.tools=curTools=[])),t=0;t<tLen;t++)(tool=tools[t]).toolOwner=me,header?header.addTool(tool):curTools.push(tool);me.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(collapsible){var me=this,current=me.collapsible,collapseTool=me.collapseTool;(me.collapsible=collapsible)&&!current?(me.updateCollapseTool(),(collapseTool=me.collapseTool)&&collapseTool.show()):!collapsible&&current&&collapseTool&&collapseTool.hide()},addUIClsToElement:function(cls){var me=this,result=me.callParent(arguments);return me.addBodyCls([Ext.baseCSSPrefix+cls,me.baseCls+"-body-"+cls,me.baseCls+"-body-"+me.ui+"-"+cls]),result},afterCollapse:function(animated){var me=this,ariaDom=me.ariaEl.dom,ownerLayout=me.ownerLayout;me.isCollapsingOrExpanding=0,me.updateCollapseTool(),animated&&me.removeCls(Ext.baseCSSPrefix+"animating-size"),ownerLayout&&ownerLayout.afterCollapse(me,animated),ariaDom&&ariaDom.setAttribute("aria-expanded",!1),me.isAccordionPanel&&me.body.dom.setAttribute("aria-hidden",!0),me.setHiddenDocked(),me.fireEvent("collapse",me)},afterExpand:function(animated){var me=this,ariaDom=me.ariaEl.dom,ownerLayout=me.ownerLayout;me.isCollapsingOrExpanding=0,me.updateCollapseTool(),animated&&me.removeCls(Ext.baseCSSPrefix+"animating-size"),ownerLayout&&ownerLayout.afterExpand(me,animated),ariaDom&&ariaDom.setAttribute("aria-expanded",!0),me.isAccordionPanel&&me.body.dom.setAttribute("aria-hidden",!1),me.fireEvent("expand",me),me.fireHierarchyEvent("expand")},beforeDestroy:function(){var me=this;Ext.destroy(me.placeholder,me.ghostPanel,me.dd,me.accordionKeyNav,me.defaultButtonKeyNav),me.destroyDockedItems(),me.callParent()},destroy:function(){this.callParent(),this.dockedItems=this.bodyContainer=null},beforeRender:function(){var wasCollapsed,me=this;me.getProtoBody(),me.callParent(),me.initTools(),(!me.preventHeader&&!1!==me.header||me.isViewportBorderChild)&&me.updateHeader(),me.afterHeaderInit=!0,me.collapsed&&(me.isPlaceHolderCollapse()?me.hidden||(me.setHiddenState(!0),me.preventCollapseFire=!0,me.placeholderCollapse(),delete me.preventCollapseFire,wasCollapsed=me.collapsed,me.collapsed=!1):(me.beginCollapse(),me.addClsWithUI(me.collapsedCls))),wasCollapsed&&(me.collapsed=wasCollapsed)},getMemento:function(name){if(name&&"string"==typeof name)return this[name+="Memento"]||(this[name]=new Ext.util.Memento(this))},beginCollapse:function(){var reExpander,me=this,lastBox=me.lastBox,rendered=me.rendered,collapseMemento=me.getMemento("collapse"),sizeModel=me.getSizeModel(),header=me.header;collapseMemento.capture(["height","minHeight","width","minWidth"]),lastBox&&collapseMemento.capture(me.restoreDimension(),lastBox,"last."),me.collapsedVertical()?(sizeModel.width.shrinkWrap&&(me.width=rendered?me.getWidth():me.width||me.minWidth||100),delete me.height,me.minHeight=0):me.collapsedHorizontal()&&(sizeModel.height.shrinkWrap&&(me.height=rendered?me.getHeight():me.height||me.minHeight||100),delete me.width,me.minWidth=0),me.ownerCt&&me.ownerCt.getLayout().beginCollapse(me),me.isPlaceHolderCollapse()||!1===header||(header===(reExpander=me.getReExpander())?(header.collapseImmune=!0,header.getInherited().collapseImmune=!0,header.addClsWithUI(me.getHeaderCollapsedClasses(header)),header.rendered&&header.updateFrame()):reExpander.el&&(reExpander.el.show(),reExpander.hidden=!1)),me.resizer&&me.resizer.disable()},beginDrag:function(){this.floatingDescendants&&this.floatingDescendants.hide()},beginExpand:function(){var reExpander,me=this,lastBox=me.lastBox,collapseMemento=me.getMemento("collapse"),restoreDimension=me.restoreDimension(),header=me.header;collapseMemento&&(collapseMemento.restore(["minHeight","minWidth",restoreDimension]),lastBox&&collapseMemento.restore(restoreDimension,!0,lastBox,"last.")),me.ownerCt&&me.ownerCt.getLayout().beginExpand(me),me.isPlaceHolderCollapse()||!1===header||(header===(reExpander=me.getReExpander())?(delete header.collapseImmune,delete header.getInherited().collapseImmune,header.removeClsWithUI(me.getHeaderCollapsedClasses(header)),header.rendered&&(header.expanding=!0,header.updateFrame(),delete header.expanding)):(reExpander.hidden=!0,reExpander.el.hide())),me.resizer&&me.resizer.enable()},bridgeToolbars:function(){var fbar,fbarDefaults,me=this,docked=[],minButtonWidth=me.minButtonWidth;function initToolbar(toolbar,pos,useButtonAlign){return Ext.isArray(toolbar)?toolbar={xtype:"toolbar",items:toolbar}:toolbar.xtype||(toolbar.xtype="toolbar"),toolbar.dock=pos,useButtonAlign&&(toolbar.layout=Ext.applyIf(toolbar.layout||{},{pack:{left:"start",center:"center"}[me.buttonAlign]||"end"})),toolbar}me.tbar&&(docked.push(initToolbar(me.tbar,"top")),me.tbar=null),me.bbar&&(docked.push(initToolbar(me.bbar,"bottom")),me.bbar=null),me.buttons&&(me.fbar=me.buttons,me.buttons=null),me.fbar&&((fbar=initToolbar(me.fbar,"bottom",!0)).ui="footer",minButtonWidth&&(fbarDefaults=fbar.defaults,fbar.defaults=function(config){var cls,defaults=fbarDefaults||{},isButton=!config.xtype||config.isButton;return isButton||(cls=Ext.ClassManager.getByAlias("widget."+config.xtype))&&(isButton=cls.prototype.isButton),!isButton||"minWidth"in defaults||(defaults=Ext.apply({minWidth:minButtonWidth},defaults)),defaults}),docked.push(fbar),me.fbar=null),me.lbar&&(docked.push(initToolbar(me.lbar,"left")),me.lbar=null),me.rbar&&(docked.push(initToolbar(me.rbar,"right")),me.rbar=null),me.dockedItems?me.dockedItems.isMixedCollection?me.addDocked(docked):(Ext.isArray(me.dockedItems)||(me.dockedItems=[me.dockedItems]),me.dockedItems=me.dockedItems.concat(docked)):me.dockedItems=docked},close:function(){!1!==this.fireEvent("beforeclose",this)&&this.doClose()},collapse:function(direction,animate){var me=this,collapseDir=direction||me.collapseDirection,ownerCt=me.ownerCt,layout=me.ownerLayout,rendered=me.rendered;return me.isCollapsingOrExpanding?me:(arguments.length<2&&(animate=me.animCollapse),me.collapsed||!1===me.fireEvent("beforecollapse",me,direction,animate)||layout&&layout.onBeforeComponentCollapse&&!1===layout.onBeforeComponentCollapse(me)?me:rendered&&ownerCt&&me.isPlaceHolderCollapse()?me.placeholderCollapse(direction,animate):(me.collapsed=collapseDir,rendered&&me.beginCollapse(),me.getInherited().collapsed=!0,me.fireHierarchyEvent("collapse"),rendered&&me.doCollapseExpand(1,animate),me))},collapsedHorizontal:function(){var dir=this.getCollapsed();return"left"===dir||"right"===dir},collapsedVertical:function(){var dir=this.getCollapsed();return"top"===dir||"bottom"===dir},convertCollapseDir:function(collapseDir){return collapseDir.substr(0,1)},createGhost:function(cls){var me=this,header=me.header,frame=me.frame&&!me.alwaysFramed;return{xtype:"panel",hidden:!1,header:header?{titleAlign:header.getTitleAlign()}:null,ui:frame?me.ui.replace(/-framed$/,""):me.ui,id:me.id+"-ghost",renderTo:Ext.getBody(),resizable:!1,draggable:!1,closable:!1,focusable:!1,floating:!0,shadow:!1,frame:frame,shim:me.shim,alwaysFramed:me.alwaysFramed,overlapHeader:me.overlapHeader,headerPosition:me.getHeaderPosition(),titleRotation:me.getTitleRotation(),baseCls:me.baseCls,getRefOwner:function(){return me.getRefOwner()},cls:me.baseCls+"-ghost "+(cls||"")}},createReExpander:function(direction,defaults){var me=this,isLeft="left"===direction,isRight="right"===direction,isVertical=isLeft||isRight,ownerCt=me.ownerCt,result=Ext.apply({hideMode:"offsets",title:me.getTitle(),titleAlign:me.getTitleAlign(),vertical:isVertical,textCls:me.headerTextCls,icon:me.getIcon(),iconCls:me.getIconCls(),iconAlign:me.getIconAlign(),glyph:me.getGlyph(),baseCls:me.self.prototype.baseCls+"-header",ui:me.ui,frame:me.frame&&me.frameHeader,ignoreParentFrame:me.frame||me.overlapHeader,ignoreBorderManagement:me.frame||me.ignoreHeaderBorderManagement,indicateDrag:me.draggable,collapseImmune:!0,ariaRole:me.ariaRole,preventRefocus:!0,ownerCt:ownerCt&&"placeholder"===me.collapseMode?ownerCt:me,ownerLayout:me.componentLayout,forceOrientation:!0,margin:me.margin},defaults);return"mini"===me.collapseMode&&(isVertical?result.width=1:result.height=1),me.hideCollapseTool||((isLeft||isRight&&me.isPlaceHolderCollapse())&&(result.titlePosition=1),result.tools=[{xtype:"tool",type:"expand-"+me.getOppositeDirection(direction),isDefaultExpandTool:!0,uiCls:["top"],handler:me.toggleCollapse,scope:me,tooltip:me.expandToolText}]),(result=new Ext.panel.Header(result)).addClsWithUI(me.getHeaderCollapsedClasses(result)),result.expandTool=result.down("tool[isDefaultExpandTool=true]"),result},doClose:function(){this.fireEvent("close",this),this[this.closeAction]()},doCollapseExpand:function(flags,animate){var me=this,originalAnimCollapse=me.animCollapse,ownerLayout=me.ownerLayout;return me.animCollapse=animate,me.isCollapsingOrExpanding=flags,animate&&me.addCls(Ext.baseCSSPrefix+"animating-size"),ownerLayout&&!animate?ownerLayout.onContentChange(me):me.updateLayout({isRoot:!0}),me.animCollapse=originalAnimCollapse,me},endDrag:function(){this.floatingDescendants&&this.floatingDescendants.show()},expand:function(animate){var me=this,layout=me.ownerLayout,rendered=me.rendered;return me.isCollapsingOrExpanding?me:(arguments.length||(animate=me.animCollapse),!me.collapsed&&!me.floatedFromCollapse||!1===me.fireEvent("beforeexpand",me,animate)||layout&&layout.onBeforeComponentExpand&&!1===layout.onBeforeComponentExpand(me)?me:(delete me.getInherited().collapsed,rendered&&me.isPlaceHolderCollapse()?me.placeholderExpand(animate):(me.restoreHiddenDocked(),rendered&&me.beginExpand(),me.collapsed=!1,me.rendered&&me.doCollapseExpand(2,animate),me)))},findReExpander:function(direction){var comp,i,c=Ext.Component,dockedItems=this.dockedItems.items,dockedItemCount=dockedItems.length;if("mini"!==this.collapseMode)switch(direction){case c.DIRECTION_TOP:case c.DIRECTION_BOTTOM:for(i=0;i<dockedItemCount;i++)if(!(comp=dockedItems[i]).hidden&&comp.isHeader&&(!comp.dock||"top"===comp.dock||"bottom"===comp.dock))return comp;break;case c.DIRECTION_LEFT:case c.DIRECTION_RIGHT:for(i=0;i<dockedItemCount;i++)if(!(comp=dockedItems[i]).hidden&&comp.isHeader&&("left"===comp.dock||"right"===comp.dock))return comp;break;default:throw"Panel#findReExpander must be passed a valid collapseDirection"}},floatCollapsedPanel:function(){var slideDirection,onBodyMousedown,myBox,me=this,placeholder=me.placeholder,ps=placeholder.getSize(),floatCls=Ext.panel.Panel.floatCls,collapsed=me.collapsed,layoutOwner=me.ownerCt||me;if(!me.isSliding)if(me.el.hasCls(floatCls))me.slideOutFloatedPanel();else{switch(me.isSliding=!0,placeholder.el.hide(),placeholder.hidden=!0,me.el.show(),me.setHiddenState(!1),me.collapsed=!1,layoutOwner.updateLayout(),placeholder.el.show(),placeholder.hidden=!1,me.el.hide(),me.setHiddenState(!0),me.collapsed=collapsed,layoutOwner.updateLayout(),myBox=me.getBox(!1,!0),me.slideOutTask=me.slideOutTask||new Ext.util.DelayedTask(me.slideOutFloatedPanel,me),Ext.supports.Touch&&Ext.on("mousedown",onBodyMousedown=function(event){event.within(me.el)||(Ext.un("mousedown",onBodyMousedown),me.slideOutFloatedPanel())}),me.placeholderListener||(me.placeholderListener=placeholder.on({resize:me.onPlaceholderResize,scope:me,destroyable:!0})),placeholder.el.on("mouseleave",me.onMouseLeaveFloated,me),me.el.on("mouseleave",me.onMouseLeaveFloated,me),placeholder.el.on("mouseenter",me.onMouseEnterFloated,me),me.el.on("mouseenter",me.onMouseEnterFloated,me),me.el.addCls(floatCls),me.floated=collapsed,me.collapseTool&&me.collapseTool.el.hide(),me.collapsed){case"top":me.width=ps.width,me.setLocalXY(myBox.x,myBox.y+ps.height);break;case"right":me.height=ps.height,me.setLocalXY(myBox.x-ps.width,myBox.y);break;case"bottom":me.width=ps.width,me.setLocalXY(myBox.x,myBox.y-ps.height);break;case"left":me.height=ps.height,me.setLocalXY(myBox.x+ps.width,myBox.y)}slideDirection=me.convertCollapseDir(me.collapsed),me.floatedFromCollapse=me.collapsed,me.collapsed=!1,me.setHiddenState(!1),me.el.slideIn(slideDirection,{preserveScroll:!0,duration:Ext.Number.from(me.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){me.isSliding=!1,me.fireEvent("float",me)}}})}},onPlaceholderResize:function(ph,newWidth,newHeight){var me=this,myBox=me.getBox(!1,!0),phBox=ph.getBox(!1,!0);switch(me.floated){case"top":me.width=newWidth,me.setLocalY(phBox.y+phBox.height);break;case"right":me.height=newHeight,me.setLocalX(phBox.x-myBox.width);break;case"bottom":me.width=newWidth,me.setLocalY(phBox.y-myBox.height);break;case"left":me.height=newHeight,me.setLocalX(phBox.x+phBox.width)}me.updateLayout({isRoot:!0})},getAnimationProps:function(){var props,animCollapse=this.animCollapse;return props=this.callParent(),"number"==typeof animCollapse&&(props.duration=animCollapse),props},getCollapsed:function(){return!0===this.collapsed?this.collapseDirection:this.collapsed},getCollapsedDockedItems:function(){return!1===this.header||"placeholder"===this.collapseMode?this.emptyArray:[this.getReExpander()]},getComponent:function(comp){var component=this.callParent(arguments);return void 0!==component||Ext.isNumber(comp)||(component=this.getDockedComponent(comp)),component},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(header){var collapsedClasses,collapsedCls=this.collapsedCls;return collapsedClasses=[collapsedCls,collapsedCls+"-"+header.getDockName()],this.border&&(!this.frame||this.frame&&Ext.supports.CSS3BorderRadius)&&collapsedClasses.push(collapsedCls+"-border-"+header.getDockName()),collapsedClasses},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(d){var c=Ext.Component;switch(d){case c.DIRECTION_TOP:return c.DIRECTION_BOTTOM;case c.DIRECTION_RIGHT:return c.DIRECTION_LEFT;case c.DIRECTION_BOTTOM:return c.DIRECTION_TOP;case c.DIRECTION_LEFT:return c.DIRECTION_RIGHT}},getPlaceholder:function(direction){var me=this,collapseDir=direction||me.collapseDirection,listeners=null,placeholder=me.placeholder,floatable=me.floatable,titleCollapse=me.titleCollapse;return placeholder||((floatable||me.collapsible&&titleCollapse)&&(listeners={click:{fn:!titleCollapse&&floatable?me.floatCollapsedPanel:me.toggleCollapse,element:"el",scope:me}}),me.placeholder=placeholder=Ext.widget(me.createReExpander(collapseDir,{id:me.id+"-placeholder",listeners:listeners}))),placeholder.placeholderFor||(placeholder.isComponent||(me.placeholder=placeholder=me.lookupComponent(placeholder)),Ext.applyIf(placeholder,{margin:me.margin,placeholderFor:me,synthetic:!0}),placeholder.addCls([Ext.baseCSSPrefix+"region-collapsed-placeholder",Ext.baseCSSPrefix+"region-collapsed-"+collapseDir+"-placeholder",me.collapsedCls])),placeholder},getProtoBody:function(){var body=this.protoBody;return body||(this.protoBody=body=new Ext.util.ProtoElement({cls:this.bodyCls,style:this.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:!0})),body},getReExpander:function(direction){var me=this,collapseDir=direction||me.collapseDirection,reExpander=me.reExpander||me.findReExpander(collapseDir);return me.expandDirection=me.getOppositeDirection(collapseDir),reExpander||(me.reExpander=reExpander=me.createReExpander(collapseDir,{dock:collapseDir,cls:Ext.baseCSSPrefix+"docked "+me.baseCls+"-"+me.ui+"-collapsed",isCollapsedExpander:!0}),me.dockedItems.insert(0,reExpander)),reExpander},getRefItems:function(deep){var items=this.callParent(arguments);return this.getDockingRefItems(deep,items)},getState:function(){var memento,me=this,state=me.callParent()||{},collapsed=me.collapsed,floated=me.floated;return floated&&(me.collapsed=floated),state=me.addPropertyToState(state,"collapsed"),floated&&(me.collapsed=collapsed),me.getCollapsed()&&(memento=me.getMemento("collapse").data,state=me.addPropertyToState(state,"collapsed",memento),me.collapsedVertical()?(delete state.height,memento&&(state=me.addPropertyToState(state,"height",memento.height))):(delete state.width,memento&&(state=me.addPropertyToState(state,"width",memento.width)))),state},applyState:function(state){var collapsed,collapseMemento={};state&&((collapsed=state.collapsed)&&(collapseMemento=this.getMemento("collapse"),Ext.Object.merge(collapseMemento.data,collapsed),state.collapsed=!0),this.callParent(arguments))},ghost:function(cls){var ghostHeader,tools,icon,iconCls,glyph,i,me=this,ghostPanel=me.ghostPanel,box=me.getBox(),header=me.header;if(ghostPanel?ghostPanel.el.show():(me.ghostPanel=ghostPanel=Ext.widget(me.createGhost(cls)),ghostPanel.el.dom.removeAttribute("tabIndex")),ghostPanel.setHiddenState(!1),ghostPanel.floatParent=me.floatParent,ghostPanel.toFront(),header&&!me.preventHeader){for((ghostHeader=ghostPanel.header).suspendLayouts(),i=(tools=ghostHeader.query("tool")).length;i--;)ghostHeader.remove(tools[i]);ghostHeader.setTitlePosition(0),ghostPanel.addTool(me.ghostTools()),ghostPanel.setTitle(me.getTitle()),ghostHeader.setTitlePosition(header.titlePosition),(iconCls=me.getIconCls())?ghostPanel.setIconCls(iconCls):(icon=me.getIcon())?ghostPanel.setIcon(icon):(glyph=me.getGlyph())&&ghostPanel.setGlyph(glyph),ghostHeader.addCls(Ext.baseCSSPrefix+"header-ghost"),ghostHeader.resumeLayouts()}return ghostPanel.setPagePosition(box.x,box.y),ghostPanel.setSize(box.width,box.height),me.el.hide(),ghostPanel},ghostTools:function(){var t,tLen,tool,tools=[],header=this.header,headerTools=header?header.query("tool[hidden=false]"):[];if(headerTools.length)for(t=0,tLen=headerTools.length;t<tLen;t++)tool=headerTools[t],tools.push({type:tool.type,tooltip:tool.tooltip});else tools=[{type:"placeholder"}];return tools},initBodyBorder:function(){var me=this;me.frame&&me.bodyBorder&&(Ext.isNumber(me.bodyBorder)||(me.bodyBorder=1),me.getProtoBody().setStyle("border-width",this.unitizeBox(me.bodyBorder)))},initBodyStyles:function(){var me=this,body=me.getProtoBody();void 0!==me.bodyPadding&&(me.layout.managePadding?body.setStyle("padding",0):body.setStyle("padding",this.unitizeBox(!0===me.bodyPadding?5:me.bodyPadding))),me.initBodyBorder()},initBorderProps:function(){var me=this;me.frame&&me.border&&void 0===me.bodyBorder&&(me.bodyBorder=!1),me.frame&&me.border&&(!1===me.bodyBorder||0===me.bodyBorder)&&(me.manageBodyBorders=!0)},initComponent:function(){var me=this;me.collapsible&&me.addStateEvents(["expand","collapse"]),me.unstyled&&me.setUI("plain"),me.frame&&me.setUI(me.ui+"-framed"),me.bridgeToolbars(),me.initBorderProps(),me.callParent(),me.collapseDirection=me.collapseDirection||me.getHeaderPosition()||Ext.Component.DIRECTION_TOP,me.hiddenOnCollapse=new Ext.dom.CompositeElement},initItems:function(){this.callParent(),this.initDockingItems()},initRenderData:function(){var me=this,data=me.callParent();return me.initBodyStyles(),me.protoBody.writeTo(data),delete me.protoBody,me.headingText&&(data.headingText=me.headingText,me.addChildEl("headingEl")),me.bodyAriaRole&&(data.bodyAriaAttributes={role:me.bodyAriaRole},!me.ariaStaticRoles[me.bodyAriaRole]&&me.bodyAriaRenderAttributes&&Ext.apply(data.bodyAriaAttributes,me.bodyAriaRenderAttributes)),data},calculateConstrainedPosition:function(constrainTo,proposedPosition,local,proposedSize){var lastBox,fp,me=this,header=me.header;return me.constrainHeader&&(lastBox=header.lastBox,proposedSize?proposedSize=header.vertical?[lastBox?lastBox.width:proposedSize[0],proposedSize[1]]:[proposedSize[0],lastBox?lastBox.height:proposedSize[1]]:lastBox&&(proposedSize=[lastBox.width,lastBox.height]),fp=me.floatParent,constrainTo=constrainTo||me.constrainTo||(fp?fp.getTargetEl():null)||me.container||me.el.parent()),me.callParent([constrainTo,proposedPosition,local,proposedSize])},initTools:function(){var i,toolCfg,tool,me=this,tools=me.tools;for(me.tools=[],i=tools&&tools.length;i;)--i,me.tools[i]=tool=tools[i],tool.toolOwner=me;!me.collapsible||me.hideCollapseTool||!1===me.header||me.preventHeader||(me.updateCollapseTool(),me.collapseFirst&&me.tools.unshift(me.collapseTool)),me.addTools(),me.pinnable&&me.initPinnable(),me.closable&&(me.addClsWithUI("closable"),toolCfg={xtype:"tool",type:"close",scope:me,handler:me.close,tooltip:me.closeToolText},me.isAccordionPanel&&(toolCfg.focusable=!1,toolCfg.ariaRole="presentation"),me.addTool(toolCfg)),me.collapseTool&&!me.collapseFirst&&me.addTool(me.collapseTool)},isLayoutRoot:function(){return!!this.floatedFromCollapse||this.callParent()},isPlaceHolderCollapse:function(){return"placeholder"===this.collapseMode},isVisible:function(deep){return this.collapsed&&this.placeholder?this.placeholder.isVisible(deep):this.callParent(arguments)},onBoxReady:function(){var target,me=this;me.callParent(arguments),me.collapsed&&me.setHiddenDocked(),me.isAccordionPanel&&(me.ariaEl=me.header.titleCmp.el,me.ariaEl.dom.setAttribute("aria-expanded",!me.collapsed),me.body.dom.setAttribute("aria-labelledby",me.header.titleCmp.id),me.body.dom.setAttribute("aria-hidden",!!me.collapsed),me.accordionKeyNav=new Ext.util.KeyNav({target:me.header.titleCmp.el,scope:me,right:me.navigateAccordion,left:me.navigateAccordion,up:me.navigateAccordion,down:me.navigateAccordion,home:me.navigateAccordion,end:me.navigateAccordion,space:me.toggleCollapse,enter:me.toggleCollapse,del:{alt:!0,fn:me.maybeClose}})),me.defaultButton&&(target=me.defaultButtonTarget?me[me.defaultButtonTarget]:me.body,me.defaultButtonKeyNav=new Ext.util.KeyNav({target:target,scope:me,defaultEventAction:"stopEvent",enter:me.fireDefaultButton}))},onHide:function(animateTarget,cb,scope){var me=this,dd=me.dd;me.floatedFromCollapse&&me.slideOutFloatedPanel(!0),me.draggable&&dd&&dd.endDrag(),me.collapsed&&me.placeholder?(me.splitter&&(Ext.suspendLayouts(),me.splitter.hide(),Ext.resumeLayouts()),me.placeholder.hide()):me.callParent([animateTarget,cb,scope])},onMouseEnterFloated:function(e){this.slideOutTask.cancel()},onMouseLeaveFloated:function(e){this.slideOutTask.delay(500)},onRemoved:function(destroying){this.placeholder&&!destroying&&this.ownerCt.remove(this.placeholder,!1),this.callParent(arguments)},onShow:function(){var me=this;me.collapsed&&me.isPlaceHolderCollapse()?(me.splitter&&(Ext.suspendLayouts(),me.splitter.show(),Ext.resumeLayouts()),me.setHiddenState(!0),me.placeholderCollapse()):me.callParent(arguments)},placeholderCollapse:function(direction,animate){var slideInDirection,me=this,ownerCt=me.ownerCt,collapseDir=direction||me.collapseDirection,floatCls=Ext.panel.Panel.floatCls,collapseTool=me.collapseTool,placeholder=me.getPlaceholder(collapseDir);return me.isCollapsingOrExpanding=1,me.setHiddenState(!0),me.collapsed=collapseDir,placeholder.rendered?(placeholder.el.dom.parentNode!==me.el.dom.parentNode&&me.el.dom.parentNode.insertBefore(placeholder.el.dom,me.el.dom),placeholder.hidden=!1,placeholder.setHiddenState(!1),placeholder.el.show(),ownerCt.updateLayout()):ownerCt.insert(ownerCt.items.indexOf(me),placeholder),me.rendered?(collapseTool&&Ext.ComponentManager.getActiveComponent()===collapseTool&&(me.focusPlaceholderExpandTool=!0),me.el.setVisibilityMode(me.placeholderCollapseHideMode),animate?(me.el.addCls(floatCls),placeholder.el.hide(),slideInDirection=me.convertCollapseDir(collapseDir),me.el.slideOut(slideInDirection,{preserveScroll:!0,duration:Ext.Number.from(animate,Ext.fx.Anim.prototype.duration),listeners:{scope:me,afteranimate:function(){this.el.removeCls(floatCls),this.placeholder.el.show().setStyle("display","none").slideIn(slideInDirection,{easing:"linear",duration:100,listeners:{afteranimate:this.doPlaceholderCollapse,scope:this}})}}})):(me.el.hide(),me.doPlaceholderCollapse())):(me.isCollapsingOrExpanding=0,me.preventCollapseFire||me.fireEvent("collapse",me)),me},doPlaceholderCollapse:function(){var me=this,placeholder=me.placeholder,expandTool=placeholder.expandTool;me.focusPlaceholderExpandTool&&expandTool?expandTool.focus():placeholder.focus(),me.focusPlaceholderExpandTool=!1,placeholder.setHiddenState(!1),placeholder.ariaEl.dom.setAttribute("aria-hidden",!1),placeholder.ariaEl.dom.setAttribute("aria-expanded",!1),me.ariaEl.dom.setAttribute("aria-hidden",!0),me.ariaEl.dom.setAttribute("aria-expanded",!1),me.isCollapsingOrExpanding=0,me.fireEvent("collapse",me)},placeholderExpand:function(animate){var finalPos,floatedPos,me=this,collapseDir=me.collapsed,expandTool=me.placeholder.expandTool,floatCls=Ext.panel.Panel.floatCls,center=me.ownerLayout?me.ownerLayout.centerRegion:null;return Ext.Component.layoutSuspendCount&&(animate=!1),me.floatedFromCollapse&&(floatedPos=me.getPosition(!0),me.slideOutFloatedPanelBegin(),me.slideOutFloatedPanelEnd(),me.floated=!1),expandTool&&Ext.ComponentManager.getActiveComponent()===expandTool&&(me.focusHeaderCollapseTool=!0,expandTool._ariaRole=expandTool.ariaEl.dom.getAttribute("role"),expandTool._ariaLabel=expandTool.ariaEl.dom.getAttribute("aria-label"),expandTool.ariaEl.dom.setAttribute("role","presentation"),expandTool.ariaEl.dom.removeAttribute("aria-label")),animate?(Ext.suspendLayouts(),me.placeholder.hide(),me.el.show(),me.collapsed=!1,me.setHiddenState(!1),center&&!floatedPos&&(center.hidden=!0),Ext.resumeLayouts(!0),center.hidden=!1,me.el.addCls(floatCls),me.isCollapsingOrExpanding=2,floatedPos?(finalPos=me.getXY(),me.setLocalXY(floatedPos[0],floatedPos[1]),me.setXY([finalPos[0],finalPos[1]],{duration:Ext.Number.from(animate,Ext.fx.Anim.prototype.duration),listeners:{scope:me,afteranimate:function(){this.el.removeCls(floatCls),this.isCollapsingOrExpanding=0,this.fireEvent("expand",this)}}})):(me.el.hide(),me.placeholder.el.show(),me.placeholder.hidden=!1,me.setHiddenState(!1),me.el.slideIn(me.convertCollapseDir(collapseDir),{preserveScroll:!0,duration:Ext.Number.from(animate,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:me.doPlaceholderExpand,scope:me}}))):(me.floated=me.collapsed=!1,me.doPlaceholderExpand(!0)),me},doPlaceholderExpand:function(nonAnimated){var me=this,placeholder=me.placeholder,collapseTool=me.collapseTool,expandTool=placeholder.expandTool;nonAnimated&&(Ext.suspendLayouts(),me.show()),me.el.removeCls(Ext.panel.Panel.floatCls),placeholder.hide(),nonAnimated?Ext.resumeLayouts(!0):me.updateLayout(),me.focusHeaderCollapseTool&&collapseTool&&collapseTool.focus(),me.focusHeaderCollapseTool=!1,placeholder.ariaEl.dom.setAttribute("aria-expanded",!0),me.ariaEl.dom.setAttribute("aria-expanded",!0),expandTool&&expandTool._ariaRole&&(expandTool.ariaEl.dom.setAttribute("role",expandTool._ariaRole),expandTool.ariaEl.dom.setAttribute("aria-label",expandTool._ariaLabel),expandTool._ariaRole=expandTool._ariaLabel=null),me.isCollapsingOrExpanding=0,me.fireEvent("expand",me)},remove:function(component,autoDestroy){var dockedItems=this.dockedItems;return dockedItems&&dockedItems.contains(component)?this.removeDocked(component,autoDestroy):this.callParent([component,autoDestroy]),component},removeBodyCls:function(cls){return(this.rendered?this.body:this.getProtoBody()).removeCls(cls),this},removeUIClsFromElement:function(cls){var me=this,result=me.callParent(arguments);return me.removeBodyCls([Ext.baseCSSPrefix+cls,me.baseCls+"-body-"+cls,me.baseCls+"-body-"+me.ui+"-"+cls]),result},restoreDimension:function(){var dir=this.collapseDirection;return"top"===dir||"bottom"===dir?"height":"width"},restoreHiddenDocked:function(){this.setDockedItemsVisibility(this.hiddenOnCollapse,!0)},setBodyStyle:function(style,value){var body=this.rendered?this.body:this.getProtoBody();return Ext.isFunction(style)&&(style=style()),1===arguments.length?(Ext.isString(style)&&(style=Ext.Element.parseStyles(style)),body.setStyle(style)):body.setStyle(style,value),this},setBorder:function(border,targetEl){if(!targetEl){var me=this,header=me.header;border=border?!0===border?"1px":me.unitizeBox(border):0,header&&(header.isHeader?header.setBorder(border):header.border=border),me.rendered&&!1!==me.bodyBorder&&me.body.setStyle("border-width",border),me.updateLayout(),me.border=border}},setCollapsed:function(collapsed){this[collapsed?"collapse":"expand"]()},setDockedItemsVisibility:function(els,show){var item,reExpander,items=this.getDockedItems(),len=items.length,i=0;for(!1!==this.header&&(reExpander=this.getReExpander());i<len;i++)(item=items[i])&&item!==reExpander&&item.el&&els.add(item.el);els.setStyle("visibility",show?"":"hidden"),els.clear()},setGlyph:function(glyph){var me=this,oldGlyph=me.glyph,header=me.header,placeholder=me.placeholder;glyph!==oldGlyph&&(me.glyph=glyph,header?header.isHeader?header.setGlyph(glyph):header.glyph=glyph:(me.rendered||me.afterHeaderInit)&&me.updateHeader(),placeholder&&placeholder.setGlyph&&placeholder.setGlyph(glyph),me.fireEvent("glyphchange",me,glyph,oldGlyph))},setIcon:function(icon){var me=this,oldIcon=me.icon,header=me.header,placeholder=me.placeholder;icon!==oldIcon&&(me.icon=icon,header?header.isHeader?header.setIcon(icon):header.icon=icon:(me.rendered||me.afterHeaderInit)&&me.updateHeader(),placeholder&&placeholder.setIcon&&placeholder.setIcon(icon),me.fireEvent("iconchange",me,icon,oldIcon))},setIconCls:function(iconCls){var me=this,oldIconCls=me.iconCls,header=me.header,placeholder=me.placeholder;iconCls!==oldIconCls&&(me.iconCls=iconCls,header?header.isHeader?header.setIconCls(iconCls):header.iconCls=iconCls:(me.rendered||me.afterHeaderInit)&&me.updateHeader(),placeholder&&placeholder.setIconCls&&placeholder.setIconCls(iconCls),me.fireEvent("iconclschange",me,iconCls,oldIconCls))},setTitle:function(title){var me=this,oldTitle=me.title,header=me.header,reExpander=me.reExpander,placeholder=me.placeholder;title!==oldTitle&&(me.title=title,header?header.isHeader&&header.setTitle(title):(me.rendered||me.afterHeaderInit)&&me.updateHeader(),me.headingEl&&me.headingEl.setHtml(title),reExpander&&reExpander.setTitle(title),placeholder&&placeholder.setTitle&&placeholder.setTitle(title),me.fireEvent("titlechange",me,title,oldTitle))},setHiddenDocked:function(){var toHide=new Ext.dom.CompositeElement;this.hiddenOnCollapse.add(this.body),toHide.add(this.body),this.setDockedItemsVisibility(toHide,!1)},setUI:function(ui){this.callParent(arguments),this.header&&this.header.rendered&&this.header.setUI(ui)},toggleCollapse:function(){return this.collapsed||this.floatedFromCollapse?this.expand():this.collapse()},updateCollapseTool:function(){var toolCfg,me=this,collapseTool=me.collapseTool;!collapseTool&&me.collapsible&&(me.collapseDirection=me.collapseDirection||me.getHeaderPosition()||"top",toolCfg={xtype:"tool",handler:me.toggleCollapse,scope:me},me.isAccordionPanel&&(toolCfg.focusable=!1,toolCfg.ariaRole="presentation"),me.collapseTool=me.expandTool=collapseTool=Ext.widget(toolCfg)),collapseTool&&(me.collapsed&&!me.isPlaceHolderCollapse()?(collapseTool.setType("expand-"+me.getOppositeDirection(me.collapseDirection)),collapseTool.setTooltip(me.expandToolText)):(collapseTool.setType("collapse-"+me.collapseDirection),collapseTool.setTooltip(me.collapseToolText)))},navigateAccordion:function(e){var sibling,me=this,wrapOver=me.accordionWrapOver,siblingSel="[isAccordionPanel]";switch(e.getKey()){case e.UP:case e.LEFT:!(sibling=me.prev(siblingSel))&&wrapOver&&(sibling=me.ownerCt.child("[isAccordionPanel]:last"));break;case e.DOWN:case e.RIGHT:!(sibling=me.next(siblingSel))&&wrapOver&&(sibling=me.ownerCt.child("[isAccordionPanel]:first"));break;case e.HOME:sibling=me.ownerCt.child("[isAccordionPanel]:first");break;case e.END:sibling=me.ownerCt.child("[isAccordionPanel]:last");break;case e.DELETE:(sibling=me.prev(siblingSel)||me.next(siblingSel))||(e.doNotClose=!0)}sibling&&sibling!==me&&sibling.header.titleCmp.focus()},fireDefaultButton:function(e){var btn;if((btn=(this.lookupReferenceHolder(!1)||this).lookupReference(this.defaultButton))&&btn.click)return btn.click(e),e.stopEvent(),!1},maybeClose:function(e){this.closable&&(this.navigateAccordion(e),e.doNotClose||this.close())},onFocusEnter:function(e){var ariaDom=this.ariaEl.dom;this.callParent([e]),this.isAccordionPanel&&ariaDom&&ariaDom.setAttribute("aria-selected",!0)},onFocusLeave:function(e){var ariaDom=this.ariaEl.dom;this.callParent([e]),this.isAccordionPanel&&ariaDom&&ariaDom.removeAttribute("aria-selected")},updateHeaderPosition:function(position){var header=this.header;header&&header.isHeader&&header.setDock(position)},updateIconAlign:function(align){var header=this.header;header&&header.isHeader&&header.setIconAlign(align)},updateTitleAlign:function(align){var header=this.header;header&&header.isHeader&&header.setTitleAlign(align)},updateTitleRotation:function(rotation){var header=this.header;header&&header.isHeader&&header.setTitleRotation(rotation)},unghost:function(show,matchPosition,focus){var me=this,ghostPanel=me.ghostPanel;ghostPanel&&(!1!==show&&(me.el.show(),!1!==matchPosition&&(me.setPagePosition(ghostPanel.getXY()),"offsets"===me.hideMode&&delete me.el.hideModeStyles),focus&&me.focus(!1,10)),ghostPanel.el.hide(),ghostPanel.setHiddenState(!0))},updateHeader:function(force){var headingEl,ariaAttr,me=this,header=me.header,title=me.getTitle(),tools=me.tools,icon=me.getIcon(),glyph=me.getGlyph(),iconCls=me.getIconCls(),hasIcon=glyph||icon||iconCls,ariaDom=me.ariaEl.dom,headerPosition=me.getHeaderPosition(),vertical="left"===headerPosition||"right"===headerPosition;Ext.isObject(header)||!1!==header&&(force||title||hasIcon||tools&&tools.length||me.collapsible&&!me.titleCollapse)?(header&&header.isHeader?header.show():(header=me.header=Ext.widget(Ext.merge({xtype:"header",title:title,titleAlign:me.getTitleAlign(),vertical:vertical,dock:me.getHeaderPosition()||"top",titleRotation:me.getTitleRotation(),textCls:me.headerTextCls,iconCls:iconCls,iconAlign:me.getIconAlign(),icon:icon,glyph:glyph,baseCls:me.baseCls+"-header",tools:tools,ui:me.ui,id:me.id+"_header",overCls:me.headerOverCls,indicateDrag:me.draggable,frame:(me.frame||me.alwaysFramed)&&me.frameHeader,ignoreParentFrame:me.frame||me.overlapHeader,ignoreBorderManagement:me.frame||me.ignoreHeaderBorderManagement,isAccordionHeader:me.isAccordionPanel,ownerCt:me,synthetic:!0,listeners:me.collapsible&&me.titleCollapse?{click:me.toggleCollapse,scope:me}:null},me.header)),me.addDocked(header,0)),me.isAccordionPanel?ariaDom?(ariaDom.setAttribute("aria-labelledby",header.id+"-title"),ariaDom.removeAttribute("aria-label")):((ariaAttr=me.ariaRenderAttributes||(me.ariaRenderAttributes={}))["aria-labelledby"]=header.id+"-title",delete ariaAttr["aria-label"]):title?"tabpanel"!==me.ariaRole&&(ariaDom?(ariaDom.setAttribute("aria-labelledby",header.id+"-title-textEl"),ariaDom.removeAttribute("aria-label")):((ariaAttr=me.ariaRenderAttributes||(me.ariaRenderAttributes={}))["aria-labelledby"]=header.id+"-title-textEl",delete ariaAttr["aria-label"])):me.ariaRenderAttributes&&delete me.ariaRenderAttributes["aria-label"]):(header&&header.hide(),title=Ext.util.Format.stripTags(title),ariaDom?ariaDom.hasAttribute("aria-labelledby")||(title?ariaDom.setAttribute("aria-label",title):ariaDom.removeAttribute("aria-label")):(ariaAttr=me.ariaRenderAttributes||(me.ariaRenderAttributes={}))["aria-labelledby"]||(title?ariaAttr["aria-label"]=title:delete ariaAttr["aria-label"])),me.isViewportBorderChild&&!me.hasOwnProperty("ariaRole")&&(me.ariaRole="region"),title&&"region"===me.ariaRole?(headingEl=me.headingEl)?headingEl.setHtml(title):me.rendered?(me.headingEl=Ext.dom.Helper.insertFirst(me.el,{tag:"div",id:me.id+"-headingEl",role:"heading",class:Ext.baseCSSPrefix+"hidden-clip",style:"height:0",html:title},!0),ariaDom.removeAttribute("aria-label"),ariaDom.setAttribute("aria-labelledby",me.id+"-headingEl")):(me.headingText=me.title,(ariaAttr=me.ariaRenderAttributes||(me.ariaRenderAttributes={}))["aria-labelledby"]=me.id+"-headingEl",delete ariaAttr["aria-label"]):me.headingEl&&(me.headingEl.destroy(),me.headingEl=null)},statics:{floatCls:Ext.baseCSSPrefix+"border-region-slide-in"},privates:{addUIToElement:function(){this.callParent(arguments),this.addBodyCls(this.baseCls+"-body-"+this.ui)},applyTargetCls:function(targetCls){this.getProtoBody().addCls(targetCls)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.protoBody||this.frameBody||this.el},initDraggable:function(){var me=this;me.simpleDrag?me.initSimpleDraggable():me.dd=new Ext.panel.DD(me,Ext.isBoolean(me.draggable)?null:me.draggable)},initResizable:function(){this.callParent(arguments),this.collapsed&&this.resizer.disable()},initSimpleDraggable:function(){var ddConfig,dd,me=this;me.header||me.updateHeader(!0),me.header&&(ddConfig=Ext.applyIf({el:me.el,delegate:"#"+me.header.id},me.draggable),(me.constrain||me.constrainHeader)&&(ddConfig.constrain=me.constrain,ddConfig.constrainDelegate=me.constrainHeader,ddConfig.constrainTo=me.constrainTo||me.container),dd=me.dd=new Ext.util.ComponentDragger(me,ddConfig),me.relayEvents(dd,["dragstart","drag","dragend"]),me.maximized&&dd.disable())},removeUIFromElement:function(){this.callParent(arguments),this.removeBodyCls(this.baseCls+"-body-"+this.ui)},setupRenderTpl:function(renderTpl){this.callParent(arguments),this.setupDockingRenderTpl(renderTpl)},slideOutFloatedPanel:function(preventAnimate){function afterSlideOut(){me.slideOutFloatedPanelEnd(),me.el.removeCls(Ext.baseCSSPrefix+"border-region-slide-in")}var collapseDirection,me=this,compEl=me.el;if(!me.isSliding&&!me.destroyed){if(me.isSliding=!0,me.floated=!1,me.slideOutFloatedPanelBegin(),preventAnimate)return compEl.hide(),afterSlideOut();"string"==typeof me.collapsed&&(collapseDirection=me.convertCollapseDir(me.collapsed)),compEl.slideOut(collapseDirection,{preserveScroll:!0,duration:Ext.Number.from(me.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:afterSlideOut}})}},slideOutFloatedPanelBegin:function(){var me=this,placeholderEl=me.placeholder.el,el=me.el;me.collapsed=me.floatedFromCollapse,me.setHiddenState(!0),me.floatedFromCollapse=null,placeholderEl.un("mouseleave",me.onMouseLeaveFloated,me),el.un("mouseleave",me.onMouseLeaveFloated,me),placeholderEl.un("mouseenter",me.onMouseEnterFloated,me),el.un("mouseenter",me.onMouseEnterFloated,me)},slideOutFloatedPanelEnd:function(suppressEvents){var me=this;me.collapseTool&&me.collapseTool.el.show(),me.slideOutTask.cancel(),me.isSliding=!1,suppressEvents||me.fireEvent("unfloat",me)}}},function(){var proto=this.prototype;proto.animCollapse=Ext.enableFx,proto.placeholderCollapseHideMode=Ext.Element.VISIBILITY}),Ext.define("Ext.plugin.Responsive",{extend:Ext.mixin.Responsive,alias:"plugin.responsive",pluginId:"responsive",isPlugin:!0,constructor:function(config){var me=this,cmp=config.cmp,c=Ext.apply({responsiveConfig:cmp.responsiveConfig,responsiveFormulas:cmp.responsiveFormulas},config);delete c.cmp,me.cmp=cmp,me.initConfig(c),me.transformed&&(cmp.setConfig(me.transformed),me.transformed=null)},init:Ext.emptyFn,privates:{transformInstanceConfig:function(config){var transformed=this.callParent([config]);transformed.ptype&&delete(transformed=Ext.apply({},transformed)).ptype,this.transformed=transformed;var ret=Ext.apply({},config);return delete ret.ptype,delete ret.responsiveConfig,delete ret.responsiveFormulas,ret},updateResponsiveState:function(){var config=this.getResponsiveState();this.cmp.setConfig(config)}}}),Ext.define("Ext.plugin.Viewport",{extend:Ext.plugin.Responsive,alias:"plugin.viewport",setCmp:function(cmp){(this.cmp=cmp)&&!cmp.isViewport&&(this.decorate(cmp),cmp.renderConfigs&&cmp.flushRenderConfigs(),cmp.setupViewport())},statics:{decorate:function(target){Ext.applyIf(target.prototype||target,{ariaRole:"application",viewportCls:Ext.baseCSSPrefix+"viewport"}),Ext.override(target,{isViewport:!0,preserveElOnDestroy:!0,initComponent:function(){this.callParent(),this.setupViewport()},getSizeModel:function(){var configured=Ext.layout.SizeModel.configured;return configured.pairsByHeightOrdinal[configured.ordinal]},handleViewportResize:function(){var Element=Ext.dom.Element,width=Element.getViewportWidth(),height=Element.getViewportHeight();width===this.width&&height===this.height||this.setSize(width,height)},setupViewport:function(){var me=this,el=document.body,DomScroller=Ext.scroll.DomScroller;DomScroller.document&&(DomScroller.document=DomScroller.document.destroy()),el.id||(el.id=me.id),el.setAttribute("data-componentid",me.id),me.ariaStaticRoles[me.ariaRole]||el.setAttribute("role",me.ariaRole),el=me.el=Ext.getBody(),Ext.fly(document.documentElement).addCls(me.viewportCls),el.setHeight=el.setWidth=Ext.emptyFn,el.dom.scroll="no",me.allowDomMove=!1,me.renderTo=el,Ext.supports.Touch&&me.addMeta("apple-mobile-web-app-capable","yes"),Ext.getScrollbarSize(),me.width=me.height=void 0,me.initialViewportHeight=Ext.Element.getViewportHeight(),me.initialViewportWidth=Ext.Element.getViewportWidth()},afterLayout:function(layout){Ext.supports.Touch&&(document.body.scrollTop=0),this.callParent([layout])},onRender:function(){var me=this;me.callParent(arguments),me.width=me.initialViewportWidth,me.height=me.initialViewportHeight,me.initialViewportWidth=me.initialViewportHeight=null,Ext.supports.TouchEvents&&me.mon(Ext.getDoc(),{touchmove:function(e){e.preventDefault()},translate:!1,delegated:!1})},initInheritedState:function(inheritedState,inheritedStateInner){var root=Ext.rootInheritedState;inheritedState!==root?this.initInheritedState(this.inheritedState=root,this.inheritedStateInner=Ext.Object.chain(root)):this.callParent([inheritedState,inheritedStateInner])},beforeDestroy:function(){var key,me=this,root=Ext.rootInheritedState;for(key in root)"rtl"!==key&&delete root[key];me.removeUIFromElement(),me.el.removeCls(me.baseCls),Ext.fly(document.body.parentNode).removeCls(me.viewportCls),me.callParent()},addMeta:function(name,content){var meta=document.createElement("meta");meta.setAttribute("name",name),meta.setAttribute("content",content),Ext.getHead().appendChild(meta)},privates:{applyTargetCls:function(targetCls){this.el.addCls(targetCls)},disableTabbing:function(){var el=this.el;el&&el.saveTabbableState({skipSelf:!0})},enableTabbing:function(){var el=this.el;el&&el.restoreTabbableState(!0)}}})}},privates:{updateResponsiveState:function(){this.cmp.handleViewportResize(),this.callParent()}}},function(Viewport){Viewport.prototype.decorate=Viewport.decorate}),Ext.define("Ext.container.Viewport",{extend:Ext.container.Container,mixins:[Ext.mixin.Responsive],alias:"widget.viewport",alternateClassName:"Ext.Viewport",ariaRole:"application",privates:{updateResponsiveState:function(){this.handleViewportResize(),this.mixins.responsive.updateResponsiveState.call(this)}}},function(){Ext.plugin.Viewport.decorate(this)}),Ext.define("Ext.layout.container.Anchor",{alias:"layout.anchor",extend:Ext.layout.container.Auto,alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:!0,setsItemSize:!0,beginLayoutCycle:function(ownerContext){var anchorSpec,childContext,childItems,i,length,dimensions=0;for(this.callParent(arguments),length=(childItems=ownerContext.childItems).length,i=0;i<length&&(!(anchorSpec=(childContext=childItems[i]).target.anchorSpec)||(childContext.widthModel.calculated&&anchorSpec.right&&(dimensions|=1),childContext.heightModel.calculated&&anchorSpec.bottom&&(dimensions|=2),3!==dimensions));++i);ownerContext.anchorDimensions=dimensions},calculateItems:function(ownerContext,containerSize){var anchorSpec,childContext,childMargins,height,i,width,childItems=ownerContext.childItems,length=childItems.length,gotHeight=containerSize.gotHeight,gotWidth=containerSize.gotWidth,ownerHeight=containerSize.height,ownerWidth=containerSize.width,knownDimensions=(gotWidth?1:0)|(gotHeight?2:0),anchorDimensions=ownerContext.anchorDimensions;if(!anchorDimensions)return!0;for(i=0;i<length;i++)childMargins=(childContext=childItems[i]).getMarginInfo(),anchorSpec=childContext.target.anchorSpec,gotWidth&&childContext.widthModel.calculated&&(width=anchorSpec.right(ownerWidth)-childMargins.width,width=this.adjustWidthAnchor(width,childContext),childContext.setWidth(width)),gotHeight&&childContext.heightModel.calculated&&(height=anchorSpec.bottom(ownerHeight)-childMargins.height,height=this.adjustHeightAnchor(height,childContext),childContext.setHeight(height));return(knownDimensions&anchorDimensions)===anchorDimensions},anchorFactory:{offset:function(delta){return function(v){return v+delta}},ratio:function(ratio){return function(v){return Math.floor(v*ratio)}},standard:function(diff){return function(v){return v-diff}}},parseAnchor:function(a,start,cstart){if(a&&"none"!==a){var delta,factory=this.anchorFactory;if(this.parseAnchorRE.test(a))return factory.standard(cstart-start);if(-1!==a.indexOf("%"))return factory.ratio(.01*parseFloat(a.replace("%","")));if(delta=parseInt(a,10),!isNaN(delta))return factory.offset(delta)}return null},adjustWidthAnchor:function(value,childContext){return value},adjustHeightAnchor:function(value,childContext){return value},configureItem:function(item){var anchorsArray,anchorWidth,anchorHeight,me=this,owner=me.owner,anchor=item.anchor;me.callParent(arguments),item.anchor||!item.items||Ext.isNumber(item.width)||(item.anchor=anchor=me.defaultAnchor),owner.anchorSize?"number"==typeof owner.anchorSize?anchorWidth=owner.anchorSize:(anchorWidth=owner.anchorSize.width,anchorHeight=owner.anchorSize.height):(anchorWidth=owner.initialConfig.width,anchorHeight=owner.initialConfig.height),anchor&&(anchorsArray=anchor.split(" "),item.anchorSpec={right:me.parseAnchor(anchorsArray[0],item.initialConfig.width,anchorWidth),bottom:me.parseAnchor(anchorsArray[1],item.initialConfig.height,anchorHeight)})},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(item){var sizeModel,anchorSpec=item.anchorSpec,key="$",policy=this.sizePolicy;return anchorSpec&&(sizeModel=this.owner.getSizeModel(),anchorSpec.right&&!sizeModel.width.shrinkWrap&&(policy=policy.r),anchorSpec.bottom&&!sizeModel.height.shrinkWrap&&(key="b")),policy[key]}}),Ext.define("Ext.dd.DragTracker",{mixins:{observable:Ext.util.Observable},active:!1,trackOver:!1,tolerance:5,autoStart:!1,constructor:function(config){var me=this;Ext.apply(me,config),me.dragRegion=new Ext.util.Region(0,0,0,0),me.el&&me.initEl(me.el),me.mixins.observable.constructor.call(me),me.disabled&&me.disable()},initEl:function(el){var me=this,delegate=me.delegate;me.el=el=Ext.get(el),delegate&&delegate.isElement&&(me.handle=delegate),me.delegate=me.handle?void 0:me.delegate,me.handle||(me.handle=el),me.handleListeners={scope:me,delegate:me.delegate,mousedown:me.onMouseDown,dragstart:me.onDragStart},Ext.supports.TouchEvents||!me.trackOver&&!me.overCls||Ext.apply(me.handleListeners,{mouseover:me.onMouseOver,mouseout:me.onMouseOut}),me.mon(me.handle,me.handleListeners),me.keyNav=new Ext.util.KeyNav({target:el,up:me.onResizeKeyDown,left:me.onResizeKeyDown,right:me.onResizeKeyDown,down:me.onResizeKeyDown,scope:me})},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){var me=this;me.endDrag({}),me.el=me.handle=me.onBeforeStart=me.onStart=me.onDrag=me.onEnd=null,me.callParent()},onMouseOver:function(e,target){var handleCls,el,i,len,cls,me=this;if(!me.disabled&&(e.within(e.target,!0,!0)||me.delegate)){if(handleCls=me.handleCls,me.mouseIsOut=!1,handleCls)for(i=0,len=me.handleEls.length;i<len;i++)cls=(cls=(el=me.handleEls[i]).delegateCls)||(el.delegateCls=[handleCls,"-",el.region,"-over"].join("")),el.addCls([cls,me.overCls]);me.fireEvent("mouseover",me,e,me.delegate?e.getTarget(me.delegate,target):me.handle)}},onMouseOut:function(e){var el,i,len,me=this;if(me.mouseIsDown)me.mouseIsOut=!0;else{if(me.handleCls)for(i=0,len=me.handleEls.length;i<len;i++)(el=me.handleEls[i]).removeCls([el.delegateCls,me.overCls]);me.fireEvent("mouseout",me,e)}},onMouseDown:function(e,target){var me=this;me.disabled||e.dragTracked||(me.dragTarget=me.delegate?target:me.handle.dom,me.startXY=me.lastXY=e.getXY(),me.startRegion=Ext.fly(me.dragTarget).getRegion(),!1!==me.fireEvent("mousedown",me,e)&&!1!==me.fireEvent("beforedragstart",me,e)&&!1!==me.onBeforeStart(e)&&(me.mouseIsDown=!0,e.dragTracked=!0,me.el.setCapture(),e.stopPropagation(),!1!==me.preventDefault&&e.preventDefault(),Ext.getDoc().on({scope:me,capture:!0,mouseup:me.onMouseUp,mousemove:me.onMouseMove,selectstart:me.stopSelect}),me.dragEnded=!1,me.tolerance?me.autoStart&&(me.timer=Ext.defer(me.triggerStart,!0===me.autoStart?1e3:me.autoStart,me,[e])):me.triggerStart()))},onMouseMove:function(e,target){var me=this,xy=e.getXY(),s=me.startXY;if(e.stopPropagation(),!1!==me.preventDefault&&e.preventDefault(),!me.dragEnded){if(me.lastXY=xy,!me.active){if(!(Math.max(Math.abs(s[0]-xy[0]),Math.abs(s[1]-xy[1]))>me.tolerance))return;me.triggerStart(e)}!1===me.fireEvent("mousemove",me,e)?me.onMouseUp(e):(me.onDrag(e),me.fireEvent("drag",me,e))}},onMouseUp:function(e){var me=this;me.mouseIsDown=!1,me.mouseIsOut&&(me.mouseIsOut=!1,me.onMouseOut(e)),!1!==me.preventDefault&&e.preventDefault(),Ext.isIE&&document.releaseCapture&&document.releaseCapture(),me.fireEvent("mouseup",me,e),me.endDrag(e)},endDrag:function(e){var me=this,wasActive=me.active;Ext.getDoc().un({mousemove:me.onMouseMove,mouseup:me.onMouseUp,selectstart:me.stopSelect,capture:!0,scope:me}),me.clearStart(),me.active=!1,wasActive&&(me.dragEnded=!0,me.onEnd(e),me.fireEvent("dragend",me,e)),me._constrainRegion=null},triggerStart:function(e){var me=this;me.clearStart(),me.active=!0,me.onStart(e),me.fireEvent("dragstart",me,e)},clearStart:function(){var timer=this.timer;timer&&(clearTimeout(timer),this.timer=null)},stopSelect:function(e){return e.stopEvent(),!1},onBeforeStart:function(e){},onStart:function(xy){},onDrag:function(e){},onEnd:function(e){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var me=this;if(me.constrainTo){if(me.constrainTo instanceof Ext.util.Region)return me.constrainTo;me._constrainRegion||(me._constrainRegion=Ext.fly(me.constrainTo).getViewRegion())}else me._constrainRegion||(me._constrainRegion=me.getDragCt().getViewRegion());return me._constrainRegion},getXY:function(constrain){return constrain?this.constrainModes[constrain](this,this.lastXY):this.lastXY},getOffset:function(constrain){var xy=this.getXY(constrain),s=this.startXY;return[xy[0]-s[0],xy[1]-s[1]]},onDragStart:function(e){e.stopPropagation()},constrainModes:{point:function(me,xy){var dr=me.dragRegion,constrainTo=me.getConstrainRegion();return constrainTo?(dr.x=dr.left=dr[0]=dr.right=xy[0],dr.y=dr.top=dr[1]=dr.bottom=xy[1],dr.constrainTo(constrainTo),[dr.left,dr.top]):xy},dragTarget:function(me,xy){var adjust,s=me.startXY,dr=me.startRegion.copy(),constrainTo=me.getConstrainRegion();return constrainTo&&(dr.translateBy(xy[0]-s[0],xy[1]-s[1]),dr.right>constrainTo.right&&(xy[0]+=adjust=constrainTo.right-dr.right,dr.left+=adjust),dr.left<constrainTo.left&&(xy[0]+=constrainTo.left-dr.left),dr.bottom>constrainTo.bottom&&(xy[1]+=adjust=constrainTo.bottom-dr.bottom,dr.top+=adjust),dr.top<constrainTo.top&&(xy[1]+=constrainTo.top-dr.top)),xy}}}),Ext.define("Ext.resizer.SplitterTracker",{extend:Ext.dd.DragTracker,enabled:!0,overlayCls:Ext.baseCSSPrefix+"resizable-overlay",createDragOverlay:function(){var overlay,El=Ext.dom.Element;(overlay=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"})).unselectable(),overlay.setSize(El.getDocumentWidth(),El.getDocumentHeight()),overlay.show()},getPrevCmp:function(){return this.getSplitter().previousSibling(":not([hidden])")},getNextCmp:function(){return this.getSplitter().nextSibling(":not([hidden])")},onBeforeStart:function(e){var box,me=this,prevCmp=me.getPrevCmp(),nextCmp=me.getNextCmp(),collapseEl=me.getSplitter().collapseEl,target=e.getTarget();return!(!prevCmp||!nextCmp)&&((!collapseEl||target!==collapseEl.dom)&&(!nextCmp.collapsed&&!prevCmp.collapsed&&(me.prevBox=prevCmp.getEl().getBox(),me.nextBox=nextCmp.getEl().getBox(),me.constrainTo=box=me.calculateConstrainRegion(),box||!1)))},onStart:function(e){var splitter=this.getSplitter();this.createDragOverlay(),splitter.addCls(splitter.baseCls+"-active")},onResizeKeyDown:function(e){var easing,me=this,splitter=me.getSplitter(),key=e.getKey(),incrIdx="vertical"===splitter.orientation?0:1,incr=key===e.UP||key===e.LEFT?-1:1;!me.active&&me.onBeforeStart(e)&&(Ext.fly(e.target).on("keyup",me.onResizeKeyUp,me),me.triggerStart(e),me.onMouseDown(e),me.startXY=splitter.getXY(),me.lastKeyDownXY=Ext.Array.slice(me.startXY),(easing=me.easing=new Ext.fx.easing.Linear).setStartTime(Ext.Date.now()),easing.setStartValue(1),easing.setEndValue(4),easing.setDuration(2e3)),me.active&&(me.lastKeyDownXY[incrIdx]=Math.round(me.lastKeyDownXY[incrIdx]+incr*me.easing.getValue()),me.lastXY=me.lastKeyDownXY,splitter.setXY(me.getXY("dragTarget")))},onResizeKeyUp:function(e){this.onMouseUp(e)},calculateConstrainRegion:function(){var prevConstrainRegion,nextConstrainRegion,constrainOptions,me=this,splitter=me.getSplitter(),splitWidth=splitter.getWidth(),defaultMin=splitter.defaultSplitMin,orient=splitter.orientation,prevBox=me.prevBox,prevCmp=me.getPrevCmp(),nextBox=me.nextBox,nextCmp=me.getNextCmp();return nextConstrainRegion="vertical"===orient?(constrainOptions={prevCmp:prevCmp,nextCmp:nextCmp,prevBox:prevBox,nextBox:nextBox,defaultMin:defaultMin,splitWidth:splitWidth},prevConstrainRegion=new Ext.util.Region(prevBox.y,me.getVertPrevConstrainRight(constrainOptions),prevBox.bottom,me.getVertPrevConstrainLeft(constrainOptions)),new Ext.util.Region(nextBox.y,me.getVertNextConstrainRight(constrainOptions),nextBox.bottom,me.getVertNextConstrainLeft(constrainOptions))):(prevConstrainRegion=new Ext.util.Region(prevBox.y+(prevCmp.minHeight||defaultMin),prevBox.right,(prevCmp.maxHeight?prevBox.y+prevCmp.maxHeight:nextBox.bottom-(nextCmp.minHeight||defaultMin))+splitWidth,prevBox.x),new Ext.util.Region((nextCmp.maxHeight?nextBox.bottom-nextCmp.maxHeight:prevBox.y+(prevCmp.minHeight||defaultMin))-splitWidth,nextBox.right,nextBox.bottom-(nextCmp.minHeight||defaultMin),nextBox.x)),prevConstrainRegion.intersect(nextConstrainRegion)},performResize:function(e,offset){for(var item,size,me=this,splitter=me.getSplitter(),orient=splitter.orientation,prevCmp=me.getPrevCmp(),nextCmp=me.getNextCmp(),owner=splitter.ownerCt,flexedSiblings=owner.query(">[flex]"),len=flexedSiblings.length,vertical="vertical"===orient,i=0,dimension=vertical?"width":"height";i<len;i++)item=flexedSiblings[i],size=vertical?item.getWidth():item.getHeight(),item.flex=size;offset=vertical?offset[0]:offset[1],prevCmp&&(size=me.prevBox[dimension]+offset,prevCmp.flex?prevCmp.flex=size:prevCmp[dimension]=size),nextCmp&&(size=me.nextBox[dimension]-offset,nextCmp.flex?nextCmp.flex=size:nextCmp[dimension]=size),owner.updateLayout()},endDrag:function(){this.overlay&&(this.overlay.destroy(),delete this.overlay),this.callParent(arguments)},onEnd:function(e){var splitter=this.getSplitter();splitter.removeCls(splitter.baseCls+"-active"),this.performResize(e,this.getResizeOffset())},onDrag:function(e){var offset=this.getOffset("dragTarget"),splitter=this.getSplitter(),splitEl=splitter.getEl();"vertical"===splitter.orientation?splitEl.setX(this.startRegion.left+offset[0]):splitEl.setY(this.startRegion.top+offset[1])},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(o){return(o.prevCmp.maxWidth?o.prevBox.x+o.prevCmp.maxWidth:o.nextBox.right-(o.nextCmp.minWidth||o.defaultMin))+o.splitWidth},getVertPrevConstrainLeft:function(o){return o.prevBox.x+(o.prevCmp.minWidth||o.defaultMin)},getVertNextConstrainRight:function(o){return o.nextBox.right-(o.nextCmp.minWidth||o.defaultMin)},getVertNextConstrainLeft:function(o){return(o.nextCmp.maxWidth?o.nextBox.right-o.nextCmp.maxWidth:o.prevBox.x+(o.prevBox.minWidth||o.defaultMin))-o.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}}),Ext.define("Ext.dd.DDTarget",{extend:Ext.dd.DragDrop,constructor:function(id,sGroup,config){id&&this.initTarget(id,sGroup,config)},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return"DDTarget "+this.id}}),Ext.define("Ext.dd.ScrollManager",{singleton:!0,dirTrans:{up:-1,left:-1,down:1,right:1},constructor:function(){var ddm=Ext.dd.DragDropManager;ddm.fireEvents=Ext.Function.createSequence(ddm.fireEvents,this.onFire,this),ddm.stopDrag=Ext.Function.createSequence(ddm.stopDrag,this.onStop,this),this.doScroll=this.doScroll.bind(this),this.ddmInstance=ddm,this.els={},this.dragEl=null,this.proc={}},onStop:function(e){var sm=Ext.dd.ScrollManager;sm.dragEl=null,sm.clearProc()},triggerRefresh:function(){this.ddmInstance.dragCurrent&&this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)},doScroll:function(){var me=this;if(me.ddmInstance.dragCurrent){function afterScroll(){me.triggerRefresh()}var proc=me.proc,procEl=proc.el,scrollComponent=proc.component,ddScrollConfig=proc.el.ddScrollConfig,distance=ddScrollConfig&&ddScrollConfig.increment?ddScrollConfig.increment:me.increment,animate=ddScrollConfig&&"animate"in ddScrollConfig?ddScrollConfig.animate:me.animate;animate&&(!0===animate?animate={callback:afterScroll}:animate.callback=animate.callback?Ext.Function.createSequence(animate.callback,afterScroll):afterScroll),scrollComponent?(distance*=me.dirTrans[proc.dir],"up"===proc.dir||"down"===proc.dir?scrollComponent.scrollBy(0,distance,animate):scrollComponent.scrollBy(distance,0,animate)):procEl.scroll(proc.dir,distance,animate),animate||afterScroll()}},clearProc:function(){var proc=this.proc;proc.id&&clearInterval(proc.id),proc.id=0,proc.el=null,proc.dir=""},startProc:function(el,dir){var group,freq,me=this,proc=me.proc;me.clearProc(),proc.el=el,proc.dir=dir,group=el.ddScrollConfig?el.ddScrollConfig.ddGroup:void 0,freq=el.ddScrollConfig&&el.ddScrollConfig.frequency?el.ddScrollConfig.frequency:me.frequency,void 0!==group&&me.ddmInstance.dragCurrent.ddGroup!==group||(proc.id=Ext.interval(me.doScroll,freq))},onFire:function(e,isDrop){var pt,proc,els,id,el,elementRegion,configSource,me=this;if(!isDrop&&me.ddmInstance.dragCurrent){for(id in me.dragEl&&me.dragEl===me.ddmInstance.dragCurrent||(me.dragEl=me.ddmInstance.dragCurrent,me.refreshCache()),pt=e.getPoint(),proc=me.proc,els=me.els)if(elementRegion=(el=els[id])._region,configSource=el.ddScrollConfig||me,elementRegion&&elementRegion.contains(pt)&&el.isScrollable()){if(elementRegion.bottom-pt.y<=configSource.vthresh)return void(proc.el!==el&&me.startProc(el,"down"));if(elementRegion.right-pt.x<=configSource.hthresh)return void(proc.el!==el&&me.startProc(el,"right"));if(pt.y-elementRegion.top<=configSource.vthresh)return void(proc.el!==el&&me.startProc(el,"up"));if(pt.x-elementRegion.left<=configSource.hthresh)return void(proc.el!==el&&me.startProc(el,"left"))}me.clearProc()}},register:function(el){if(Ext.isArray(el))for(var i=0,len=el.length;i<len;i++)this.register(el[i]);else el=Ext.get(el),this.els[el.id]=el},unregister:function(el){if(Ext.isArray(el))for(var i=0,len=el.length;i<len;i++)this.unregister(el[i]);else el=Ext.get(el),delete this.els[el.id]},vthresh:25*(window.devicePixelRatio||1),hthresh:25*(window.devicePixelRatio||1),increment:100,frequency:500,animate:!0,animDuration:.4,ddGroup:void 0,refreshCache:function(){var id,els=this.els;for(id in els)"object"==typeof els[id]&&(els[id]._region=els[id].getRegion())}}),Ext.define("Ext.dd.DropTarget",{extend:Ext.dd.DDTarget,constructor:function(el,config){this.el=Ext.get(el),Ext.apply(this,config),this.containerScroll&&Ext.dd.ScrollManager.register(this.el),this.callParent([this.el.dom,this.ddGroup||this.group,{isTarget:!0}])},containerScroll:!1,dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(dd,e,data){return this.overClass&&this.el.addCls(this.overClass),this.dropAllowed},notifyOver:function(dd,e,data){return this.dropAllowed},notifyOut:function(dd,e,data){this.overClass&&this.el.removeCls(this.overClass)},notifyDrop:function(dd,e,data){return this.overClass&&this.el.removeCls(this.overClass),!1},destroy:function(){this.callParent(),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}}),Ext.define("Ext.dd.DragZone",{extend:Ext.dd.DragSource,constructor:function(el,config){var scroll=this.containerScroll;this.callParent([el,config]),scroll&&(el=this.scrollEl||el,el=Ext.get(el),Ext.isObject(scroll)&&(el.ddScrollConfig=scroll),Ext.dd.ScrollManager.register(el))},getDragData:function(e){return Ext.dd.Registry.getHandleFromEvent(e)},onInitDrag:function(x,y){return this.proxy.update(this.dragData.ddel.cloneNode(!0)),this.onStartDrag(x,y),!0},getRepairXY:function(e){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){this.callParent(),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}}),Ext.define("Ext.dd.Registry",{singleton:!0,constructor:function(){this.elements={},this.handles={},this.autoIdSeed=0},getId:function(el,autogen){if("string"==typeof el)return el;var id=el.id;return id||!1===autogen||(id="extdd-"+ ++this.autoIdSeed,el.id=id),id},register:function(el,data){if(data=data||{},"string"==typeof el&&(el=document.getElementById(el)),data.ddel=el,!1!==(this.elements[this.getId(el)]=data).isHandle&&(this.handles[data.ddel.id]=data),data.handles){var i,len,hs=data.handles;for(i=0,len=hs.length;i<len;i++)this.handles[this.getId(hs[i])]=data}},unregister:function(el){var hs,i,len,id=this.getId(el,!1),data=this.elements[id];if(data&&(delete this.elements[id],data.handles))for(i=0,len=(hs=data.handles).length;i<len;i++)delete this.handles[this.getId(hs[i],!1)]},getHandle:function(id){return"string"!=typeof id&&(id=id.id),this.handles[id]},getHandleFromEvent:function(e){var t=e.getTarget();return t?this.handles[t.id]:null},getTarget:function(id){return"string"!=typeof id&&(id=id.id),this.elements[id]},getTargetFromEvent:function(e){var t=e.getTarget();return t?this.elements[t.id]||this.handles[t.id]:null}}),Ext.define("Ext.dd.DropZone",{extend:Ext.dd.DropTarget,getTargetFromEvent:function(e){return Ext.dd.Registry.getTargetFromEvent(e)},onNodeEnter:function(n,dd,e,data){},onNodeOver:function(n,dd,e,data){return this.dropAllowed},onNodeOut:function(n,dd,e,data){},onNodeDrop:function(n,dd,e,data){return!1},onContainerOver:function(dd,e,data){return this.dropNotAllowed},onContainerDrop:function(dd,e,data){return!1},notifyEnter:function(dd,e,data){return this.dropNotAllowed},notifyOver:function(dd,e,data){var me=this,n=me.getTargetFromEvent(e);return n?(me.lastOverNode!==n&&(me.lastOverNode&&me.onNodeOut(me.lastOverNode,dd,e,data),me.onNodeEnter(n,dd,e,data),me.lastOverNode=n),me.onNodeOver(n,dd,e,data)):(me.lastOverNode&&(me.onNodeOut(me.lastOverNode,dd,e,data),me.lastOverNode=null),me.onContainerOver(dd,e,data))},notifyOut:function(dd,e,data){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,dd,e,data),this.lastOverNode=null)},notifyDrop:function(dd,e,data){var me=this,n=me.getTargetFromEvent(e),result=n?me.onNodeDrop(n,dd,e,data):me.onContainerDrop(dd,e,data);return me.lastOverNode&&(me.onNodeOut(me.lastOverNode,dd,e,data),me.lastOverNode=null),result},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}}),Ext.define("Ext.event.publisher.MouseEnterLeave",{extend:Ext.event.publisher.Dom,type:"mouseEnterLeave"},function(MouseEnterLeave){var eventMap={mouseover:"mouseenter",mouseout:"mouseleave"};Ext.supports.MouseEnterLeave||MouseEnterLeave.override({handledDomEvents:["mouseover","mouseout"],handledEvents:["mouseenter","mouseleave"],doDelegatedEvent:function(e){var target,relatedTarget,id,el,type,event;target=(e=this.callParent([e])).getTarget(),(relatedTarget=e.getRelatedTarget())&&Ext.fly(target).contains(relatedTarget)||(id=target.id)&&(el=Ext.cache[id])&&(type=eventMap[e.type],e=e.chain({type:type}),el.hasListeners[type]&&(event=(event=el.events[type])&&event.directs)&&(e.setCurrentTarget(el.dom),event.fire(e,e.target)))}}),MouseEnterLeave.instance=new MouseEnterLeave}),Ext.define("Ext.util.ComponentDragger",{extend:Ext.dd.DragTracker,autoStart:500,constructor:function(comp,config){this.comp=comp,this.initialConstrainTo=config.constrainTo,this.callParent([config])},onStart:function(e){var me=this,comp=me.comp;me.startPosition=comp.getXY(),comp.ghost&&!comp.liveDrag&&(me.proxy=comp.ghost(),me.dragTarget=me.proxy.header.el),(me.constrain||me.constrainDelegate)&&(me.constrainTo=me.calculateConstrainRegion()),comp.beginDrag&&comp.beginDrag(),comp.el.shim&&comp.el.maskIframes()},calculateConstrainRegion:function(){var delegateRegion,elRegion,me=this,comp=me.comp,constrainTo=me.initialConstrainTo,constraintInsets=comp.constraintInsets,dragEl=me.proxy?me.proxy.el:comp.el,shadow=dragEl.shadow,shadowSize=shadow&&!me.constrainDelegate&&comp.constrainShadow&&!shadow.disabled?shadow.getShadowSize():0;return constrainTo=constrainTo instanceof Ext.util.Region?constrainTo.copy():Ext.fly(constrainTo).getConstrainRegion(),constraintInsets&&(constraintInsets=Ext.isObject(constraintInsets)?constraintInsets:Ext.Element.parseBox(constraintInsets),constrainTo.adjust(constraintInsets.top,constraintInsets.right,constraintInsets.bottom,constraintInsets.left)),shadowSize&&constrainTo.adjust(shadowSize[0],-shadowSize[1],-shadowSize[2],shadowSize[3]),me.constrainDelegate||(delegateRegion=Ext.fly(me.dragTarget).getRegion(),elRegion=dragEl.getRegion(),constrainTo.adjust(delegateRegion.top-elRegion.top,delegateRegion.right-elRegion.right,delegateRegion.bottom-elRegion.bottom,delegateRegion.left-elRegion.left)),constrainTo},onDrag:function(e){var me=this,comp=me.proxy&&!me.comp.liveDrag?me.proxy:me.comp,offset=me.getOffset(me.constrain||me.constrainDelegate?"dragTarget":null);comp.setPagePosition(me.startPosition[0]+offset[0],me.startPosition[1]+offset[1])},onEnd:function(e){var comp=this.comp;comp.destroyed||comp.destroying||(this.proxy&&!comp.liveDrag&&comp.unghost(),comp.endDrag&&comp.endDrag(),comp.el.shim&&comp.el.unmaskIframes())}}),Ext.define("Ext.util.FocusTrap",{extend:Ext.Mixin,mixinConfig:{id:"focustrap",after:{afterRender:"initTabGuards",addTool:"initTabGuards",add:"initTabGuards",remove:"initTabGuards",addDocked:"initTabGuards",removeDocked:"initTabGuards",onShow:"initTabGuards",afterHide:"initTabGuards"}},config:{tabGuard:!0,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" role="button" data-tabguardposition="{tabGuard}" aria-busy="true" style="height:0"class="'+Ext.baseCSSPrefix+'hidden-clip"></div>',tabGuardIndex:0},tabGuardPositionAttribute:"data-tabguardposition",privates:{initTabGuards:function(){var nodes,me=this,posAttr=me.tabGuardPositionAttribute,beforeGuard=me.tabGuardBeforeEl,afterGuard=me.tabGuardAfterEl,tabIndex=me.tabGuardIndex;me.rendered&&me.tabGuard&&((nodes=me.el.findTabbableElements({skipSelf:!0}))[0]&&nodes[0].hasAttribute(posAttr)&&nodes.shift(),nodes.length&&nodes[nodes.length-1].hasAttribute(posAttr)&&nodes.pop(),nodes.length?(beforeGuard.dom.setAttribute("tabIndex",tabIndex),beforeGuard.on("focusenter",me.onTabGuardFocusEnter,me),afterGuard.dom.setAttribute("tabIndex",tabIndex),afterGuard.on("focusenter",me.onTabGuardFocusEnter,me)):(beforeGuard.dom.removeAttribute("tabIndex"),beforeGuard.un("focusenter",me.onTabGuardFocusEnter,me),afterGuard.dom.removeAttribute("tabIndex"),afterGuard.un("focusenter",me.onTabGuardFocusEnter,me)))},onTabGuardFocusEnter:function(e,target){var nodes,forward,nextFocus,el=this.el,posAttr=this.tabGuardPositionAttribute,position=target.getAttribute(posAttr),from=e.relatedTarget;forward=!from.hasAttribute(posAttr)&&from!==el.dom&&el.contains(from)?"before"!==position:"before"===position,(nodes=el.findTabbableElements({skipSelf:!0})).shift(),nodes.pop(),(nextFocus=forward?nodes[0]:nodes[nodes.length-1])&&nextFocus.focus()}}}),Ext.define("Ext.window.Window",{extend:Ext.panel.Panel,alternateClassName:"Ext.Window",mixins:[Ext.util.FocusTrap],alias:"widget.window",baseCls:Ext.baseCSSPrefix+"window",resizable:!0,draggable:!0,constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:50,minWidth:50,expandOnShow:!0,collapsible:!1,closable:!0,hidden:!0,autoRender:!0,hideMode:"offsets",floating:!0,itemCls:Ext.baseCSSPrefix+"window-item",overlapHeader:!0,ignoreHeaderBorderManagement:!0,alwaysFramed:!0,isRootCfg:{isRoot:!0},isWindow:!0,ariaRole:"dialog",initComponent:function(){var me=this;me.frame=!1,me.callParent(),me.plain&&me.addClsWithUI("plain"),me.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var elConfig;return(elConfig=this.callParent()).tabIndex=-1,elConfig},getFocusEl:function(){return this.getDefaultFocus()||this.el},getState:function(){var pos,me=this,state=me.callParent()||{},maximized=!!me.maximized,ghostBox=me.ghostBox;return pos=(state.maximized=maximized)?me.restorePos:ghostBox?[ghostBox.x,ghostBox.y]:me.getPosition(),Ext.apply(state,{size:maximized?me.restoreSize:me.getSize(),pos:pos}),state},applyState:function(state){var me=this;state&&(me.maximized=state.maximized,me.maximized?(me.hasSavedRestore=!0,me.restoreSize=state.size,me.restorePos=state.pos):Ext.apply(me,{width:state.size.width,height:state.size.height,x:state.pos[0],y:state.pos[1]}))},onRender:function(ct,position){var me=this;me.callParent(arguments),me.header&&me.header.on({scope:me,click:me.onHeaderClick}),me.maximizable&&me.header.on({scope:me,dblclick:me.toggleMaximize})},afterRender:function(){var keyMap,me=this,header=me.header;me.maximized&&(me.maximized=!1,me.maximize(),header&&header.removeCls(header.indicateDragCls)),me.callParent(),me.closable?(keyMap=me.getKeyMap()).on(27,me.onEsc,me):keyMap=me.keyMap,keyMap&&me.hidden&&keyMap.disable()},onEsc:function(k,e){e.stopEvent(),this.close()},beforeDestroy:function(){var me=this;me.rendered&&(Ext.un("resize",me.onWindowResize,me),delete me.animateTarget,me.hide(),Ext.destroy(me.keyMap)),me.callParent()},addTools:function(){var me=this,tools=[];me.callParent(),me.minimizable&&tools.push({type:"minimize",handler:"minimize",scope:me}),me.maximizable&&tools.push({type:me.maximized?"restore":"maximize",handler:"toggleMaximize",scope:me}),tools.length&&me.addTool(tools)},onShow:function(){var me=this;me.callParent(arguments),me.expandOnShow&&me.expand(!1),me.syncMonitorWindowResize(),me.keyMap&&me.keyMap.enable()},doClose:function(){var me=this;me.hidden?(me.fireEvent("close",me),"destroy"===me.closeAction&&me.destroy()):me.hide(me.animateTarget,me.doClose,me)},afterHide:function(){this.syncMonitorWindowResize(),this.keyMap&&this.keyMap.disable(),this.callParent(arguments)},onWindowResize:function(){var sizeModel,me=this;me.destroyed||(me.maximized?me.fitContainer():(((sizeModel=me.getSizeModel()).width.natural||sizeModel.height.natural)&&me.updateLayout(),me.doConstrain()))},minimize:function(){return this.fireEvent("minimize",this),this},resumeHeaderLayout:function(changed){this.header.resumeLayouts(changed?this.isRootCfg:null)},afterCollapse:function(){var me=this,header=me.header,tools=me.tools;header&&me.maximizable&&(header.suspendLayouts(),tools.maximize.hide(),this.resumeHeaderLayout(!0)),me.resizer&&me.resizer.disable(),me.callParent(arguments)},afterExpand:function(){var changed,me=this,header=me.header,tools=me.tools;header&&(header.suspendLayouts(),me.maximizable&&(tools.maximize.show(),changed=!0),this.resumeHeaderLayout(changed)),me.resizer&&me.resizer.enable(),me.callParent(arguments)},maximize:function(animate){var changed,me=this,header=me.header,tools=me.tools,width=me.width,height=me.height;return me.maximized||(me.expand(!1),me.hasSavedRestore||(me.restoreSize={width:width||null,height:height||null},me.restorePos=me.getPosition()),header&&(header.suspendLayouts(),tools.maximize&&tools.maximize.setType("restore"),me.collapseTool&&(me.collapseTool.hide(),changed=!0),me.resumeHeaderLayout(changed)),me.el.disableShadow(),me.dd&&(me.dd.disable(),header&&header.removeCls(header.indicateDragCls)),me.resizer&&me.resizer.disable(),me.el.addCls(Ext.baseCSSPrefix+"window-maximized"),me.container.addCls(Ext.baseCSSPrefix+"window-maximized-ct"),me.syncMonitorWindowResize(),me.fitContainer(animate=animate||me.animateTarget?{callback:function(){me.maximized=!0,me.fireEvent("maximize",me)}}:null),animate||(me.maximized=!0,me.fireEvent("maximize",me))),me},restore:function(animate){var changed,me=this,tools=me.tools,header=me.header,newBox=me.restoreSize;return me.maximized&&(me.hasSavedRestore=null,me.removeCls(Ext.baseCSSPrefix+"window-maximized"),header&&(header.suspendLayouts(),tools.maximize&&tools.maximize.setType("maximize"),me.collapseTool&&(me.collapseTool.show(),changed=!0),me.resumeHeaderLayout(changed)),newBox.x=me.restorePos[0],newBox.y=me.restorePos[1],me.setBox(newBox,animate=animate||me.animateTarget?{callback:function(){me.el.enableShadow(null,!0),me.maximized=!1,me.fireEvent("restore",me)}}:null),me.restorePos=me.restoreSize=null,me.dd&&(me.dd.enable(),header&&header.addCls(header.indicateDragCls)),me.resizer&&me.resizer.enable(),me.container.removeCls(Ext.baseCSSPrefix+"window-maximized-ct"),me.syncMonitorWindowResize(),animate||(me.el.enableShadow(null,!0),me.maximized=!1,me.fireEvent("restore",me))),me},syncMonitorWindowResize:function(){var me=this,currentlyMonitoring=me._monitoringResize,yes=me.monitorResize||me.constrain||me.constrainHeader||me.maximized,veto=me.hidden||me.destroying||me.destroyed;yes&&!veto?currentlyMonitoring||(Ext.on("resize",me.onWindowResize,me,{buffer:1}),me._monitoringResize=!0):currentlyMonitoring&&(Ext.un("resize",me.onWindowResize,me),me._monitoringResize=!1)},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var ghost=this.callParent(arguments);return ghost.xtype="window",ghost.focusOnToFront=!1,ghost},getDefaultFocus:function(){var result,selector,defaultComp=this.defaultFocus;return void 0!==defaultComp&&(Ext.isNumber(defaultComp)?result=this.query("button")[defaultComp]:Ext.isString(defaultComp)?(selector=defaultComp,Ext.validIdRe.test(selector)&&(result=this.down(Ext.makeIdSelector(selector))),result=result||this.down(selector)):defaultComp.focus&&(result=defaultComp)),result},privates:{initDraggable:function(){this.initSimpleDraggable()},onHeaderClick:function(header,e){var delegate;header.el.contains(e.getTarget())&&(delegate=this.getDefaultFocus())&&delegate.focus()},initResizable:function(){this.callParent(arguments),this.maximized&&this.resizer.disable()}}}),Ext.define("Ext.form.Labelable",{extend:Ext.Mixin,isLabelable:!0,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl","ariaErrorEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{childElCls} {unselectableCls}" style="{labelStyle}"<tpl if="inputId">',' for="{inputId}"</tpl> {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" role="presentation"',' class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}",'<div id="{id}-ariaErrorEl" data-ref="ariaErrorEl" role="alert" aria-live="polite"',' class="'+Ext.baseCSSPrefix+'hidden-clip">',"</div>","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="presentation" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{tipAnchorTarget}">',"</div>","</div>","</tpl>",{disableFormats:!0}],activeErrorsTpl:void 0,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:!0,formItemCls:Ext.baseCSSPrefix+"form-item",labelCls:Ext.baseCSSPrefix+"form-item-label",topLabelCls:Ext.baseCSSPrefix+"form-item-label-top",rightLabelCls:Ext.baseCSSPrefix+"form-item-label-right",labelInnerCls:Ext.baseCSSPrefix+"form-item-label-inner",topLabelSideErrorCls:Ext.baseCSSPrefix+"form-item-label-top-side-error",errorMsgCls:Ext.baseCSSPrefix+"form-error-msg",errorWrapCls:Ext.baseCSSPrefix+"form-error-wrap",errorWrapSideCls:Ext.baseCSSPrefix+"form-error-wrap-side",errorWrapUnderCls:Ext.baseCSSPrefix+"form-error-wrap-under",errorWrapUnderSideLabelCls:Ext.baseCSSPrefix+"form-error-wrap-under-side-label",baseBodyCls:Ext.baseCSSPrefix+"form-item-body",invalidIconCls:Ext.baseCSSPrefix+"form-invalid-icon",invalidUnderCls:Ext.baseCSSPrefix+"form-invalid-under",noLabelCls:Ext.baseCSSPrefix+"form-item-no-label",fieldBodyCls:"",invalidCls:Ext.baseCSSPrefix+"form-invalid",fieldLabel:void 0,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:!1,hideEmptyLabel:!0,preventMark:!1,autoFitErrors:!0,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:!0,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var cfg,copy,tip=this.tip;tip||(cfg={id:"ext-form-error-tip",ui:"form-invalid"},Ext.supports.Touch&&(cfg.dismissDelay=0,cfg.anchor="top",cfg.showDelay=0,cfg.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.anchorTarget).getWidth()}}),tip=this.tip=Ext.create("Ext.tip.QuickTip",cfg),(copy=Ext.apply({},tip.tagConfig)).attribute="errorqtip",tip.setTagConfig(copy))},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var me=this,padding=me.padding;padding&&(me.padding=void 0,me.extraMargins=Ext.Element.parseBox(padding)),Ext.isIE8&&(me.restoreDisplay=Ext.Function.createDelayed(me.doRestoreDisplay,0,me)),me.activeErrorsTpl||("title"===me.msgTarget?me.activeErrorsTpl=me.plaintextActiveErrorsTpl:me.activeErrorsTpl=me.htmlActiveErrorsTpl),me.addCls([me.formItemCls,me.formItemCls+"-"+me.ui]),me.lastActiveError="",me.enableBubble("errorchange")},trimLabelSeparator:function(){var separator=this.labelSeparator,label=this.fieldLabel||"";return label.substr(label.length-1)===separator?label.slice(0,-1):label},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(label){label=label||"";var me=this,separator=me.labelSeparator,labelEl=me.labelEl,errorWrapEl=me.errorWrapEl,sideLabel="top"!==me.labelAlign,noLabelCls=me.noLabelCls,errorWrapUnderSideLabelCls=me.errorWrapUnderSideLabelCls;me.fieldLabel=label,me.rendered&&(Ext.isEmpty(label)&&me.hideEmptyLabel?(me.addCls(noLabelCls),sideLabel&&errorWrapEl&&errorWrapEl.removeCls(errorWrapUnderSideLabelCls)):(separator&&(label=me.trimLabelSeparator()+separator),labelEl.dom.firstChild.innerHTML=label,me.removeCls(noLabelCls),sideLabel&&errorWrapEl&&errorWrapEl.addCls(errorWrapUnderSideLabelCls)),me.updateLayout())},setHideLabel:function(hideLabel){var me=this;hideLabel!==me.hideLabel&&(me.hideLabel=hideLabel,me.rendered&&(me[hideLabel?"addCls":"removeCls"](me.noLabelCls),me.updateLayout()))},setHideEmptyLabel:function(hideEmptyLabel){var hide,me=this;hideEmptyLabel!==me.hideEmptyLabel&&(me.hideEmptyLabel=hideEmptyLabel,me.rendered&&!me.hideLabel&&(hide=hideEmptyLabel&&!me.getFieldLabel(),me[hide?"addCls":"removeCls"](me.noLabelCls),me.updateLayout()))},getInsertionRenderData:function(data,names){for(var name,value,i=names.length;i--;)(value=this[name=names[i]])&&"string"!=typeof value&&(value.isTemplate||(value=Ext.XTemplate.getTpl(this,name)),value=value.apply(data)),data[name]=value||"";return data},getLabelableRenderData:function(){var bodyStyle,data,me=this,labelAlign=me.labelAlign,topLabel="top"===labelAlign,rightLabel="right"===labelAlign,sideError="side"===me.msgTarget,underError="under"===me.msgTarget,errorMsgCls=me.errorMsgCls,labelPad=me.labelPad,labelWidth=me.labelWidth,labelClsExtra=me.labelClsExtra||"",errorWrapExtraCls=sideError?me.errorWrapSideCls:me.errorWrapUnderCls,labelStyle="",labelInnerStyle="",labelVisible=me.hasVisibleLabel(),autoFitErrors=me.autoFitErrors,defaultBodyWidth=me.defaultBodyWidth;return topLabel?(labelClsExtra+=" "+me.topLabelCls,labelPad&&(labelInnerStyle="padding-bottom:"+labelPad+"px;"),sideError&&!autoFitErrors&&(labelClsExtra+=" "+me.topLabelSideErrorCls)):(rightLabel&&(labelClsExtra+=" "+me.rightLabelCls),labelPad&&(labelStyle+=me.getHorizontalPaddingStyle()+labelPad+"px;"),labelStyle+="width:"+(labelWidth+(labelPad||0))+"px;",labelInnerStyle="width:"+labelWidth+"px"),labelVisible&&!topLabel&&underError&&(errorWrapExtraCls+=" "+me.errorWrapUnderSideLabelCls),defaultBodyWidth&&(bodyStyle="min-width:"+defaultBodyWidth+"px;max-width:"+defaultBodyWidth+"px;"),data={id:me.id,inputId:me.getInputId(),labelCls:me.labelCls,labelClsExtra:labelClsExtra,labelStyle:labelStyle+(me.labelStyle||""),labelInnerStyle:labelInnerStyle,labelInnerCls:me.labelInnerCls,unselectableCls:Ext.Element.unselectableCls,bodyStyle:bodyStyle,baseBodyCls:me.baseBodyCls,fieldBodyCls:me.fieldBodyCls,extraFieldBodyCls:me.extraFieldBodyCls,errorWrapCls:me.errorWrapCls,errorWrapExtraCls:errorWrapExtraCls,renderError:sideError||underError,invalidMsgCls:sideError?me.invalidIconCls:underError?me.invalidUnderCls:"",errorMsgCls:errorMsgCls,growCls:me.grow?me.growCls:"",tipAnchorTarget:me.id+"-inputEl",errorWrapStyle:sideError&&!autoFitErrors?"visibility:hidden":"display:none",fieldLabel:me.getFieldLabel(),labelSeparator:me.labelSeparator},me.getInsertionRenderData(data,me.labelableInsertions),data},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){var me=this;me.setFieldDefaults(me.getInherited().fieldDefaults),me.ownerLayout&&me.addCls(Ext.baseCSSPrefix+me.ownerLayout.type+"-form-item"),me.hasVisibleLabel()||me.addCls(me.noLabelCls)},onLabelRender:function(){var margins,side,me=this,style={},ExtElement=Ext.Element,errorWrapEl=me.errorWrapEl;if(errorWrapEl&&errorWrapEl.setVisibilityMode("side"!==me.msgTarget||me.autoFitErrors?ExtElement.DISPLAY:ExtElement.VISIBILITY),me.extraMargins){for(side in margins=me.el.getMargin())margins.hasOwnProperty(side)&&(style["margin-"+side]=margins[side]+me.extraMargins[side]+"px");me.el.setStyle(style)}},hasVisibleLabel:function(){return!this.hideLabel&&!(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return!!this.getActiveError()},setActiveError:function(msg){this.setActiveErrors(msg)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(errors){var actionEl,activeError,tpl,targetEl,me=this,errorWrapEl=me.errorWrapEl,msgTarget=me.msgTarget,isSide="side"===msgTarget,isQtip="qtip"===msgTarget;errors=Ext.Array.from(errors),tpl=me.getTpl("activeErrorsTpl"),me.activeErrors=errors,activeError=me.activeError=tpl.apply({fieldLabel:me.fieldLabel,errors:errors,listCls:Ext.baseCSSPrefix+"list-plain"}),me.renderActiveError(),me.rendered&&(actionEl=me.getActionEl(),isSide?me.errorEl.dom.setAttribute("data-errorqtip",activeError):isQtip?actionEl.dom.setAttribute("data-errorqtip",activeError):"title"===msgTarget&&actionEl.dom.setAttribute("title",activeError),"title"!==msgTarget&&(me.ariaErrorEl.dom.innerHTML=errors.join(". "),actionEl.dom.setAttribute("aria-describedby",me.ariaErrorEl.id)),(isSide||isQtip)&&Ext.form.Labelable.initTip(),me.msgTargets[msgTarget]||(targetEl=Ext.get(msgTarget))&&(targetEl.dom.innerHTML=activeError)),errorWrapEl&&(errorWrapEl.setVisible(0<errors.length),isSide&&me.autoFitErrors&&me.labelEl.addCls(me.topLabelSideErrorCls),me.updateLayout())},unsetActiveError:function(){var actionEl,targetEl,me=this,errorWrapEl=me.errorWrapEl,msgTarget=me.msgTarget,restoreDisplay=me.restoreDisplay;me.hasActiveError()&&(delete me.activeError,delete me.activeErrors,me.renderActiveError(),me.rendered&&(actionEl=me.getActionEl(),"qtip"===msgTarget?actionEl.dom.removeAttribute("data-errorqtip"):"title"===msgTarget&&actionEl.dom.removeAttribute("title"),"title"!==msgTarget&&(me.ariaErrorEl.dom.innerHTML="",actionEl.dom.removeAttribute("aria-describedby")),me.msgTargets[msgTarget]||(targetEl=Ext.get(msgTarget))&&(targetEl.dom.innerHTML=""),errorWrapEl&&(errorWrapEl.hide(),"side"===msgTarget&&me.autoFitErrors&&me.labelEl.removeCls(me.topLabelSideErrorCls),me.updateLayout(),restoreDisplay&&(me.el.dom.style.display="block",me.restoreDisplay()))))},doRestoreDisplay:function(){var el=this.el;el&&el.dom&&(el.dom.style.display="")},renderActiveError:function(){var me=this,activeError=me.getActiveError(),hasError=!!activeError;activeError!==me.lastActiveError&&(me.lastActiveError=activeError,me.fireEvent("errorchange",me,activeError)),!me.rendered||me.destroyed||me.preventMark||(me.toggleInvalidCls(hasError),me.errorEl&&(me.errorEl.dom.innerHTML=activeError))},toggleInvalidCls:function(hasError){this.el[hasError?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(defaults){var key;for(key in defaults)this.hasOwnProperty(key)||(this[key]=defaults[key])}},function(){Ext.supports.Touch&&(this.prototype.msgTarget="side")}),Ext.define("Ext.form.field.Field",{mixinId:"field",isFormField:!0,config:{validation:null,validationField:null},disabled:!1,submitValue:!0,validateOnChange:!0,valuePublishEvent:"change",suspendCheckChange:0,dirty:!1,initField:function(){var len,i,me=this,valuePublishEvent=me.valuePublishEvent;if(me.initValue(),Ext.isString(valuePublishEvent))me.on(valuePublishEvent,me.publishValue,me);else for(i=0,len=valuePublishEvent.length;i<len;++i)me.on(valuePublishEvent[i],me.publishValue,me)},initValue:function(){var me=this;"value"in me&&(me.suspendCheckChange++,me.setValue(me.value),me.suspendCheckChange--),me.initialValue=me.originalValue=me.lastValue=me.getValue()},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(value){return this.value=value,this.checkChange(),this},isEqual:function(value1,value2){return String(value1)===String(value2)},isEqualAsString:function(value1,value2){return String(Ext.valueFrom(value1,""))===String(Ext.valueFrom(value2,""))},getSubmitData:function(){var data=null;return!this.disabled&&this.submitValue&&((data={})[this.getName()]=""+this.getValue()),data},getModelData:function(includeEmptyText,isSubmitting){var data=null;return this.disabled||!this.submitValue&&isSubmitting||((data={})[this.getFieldIdentifier()]=this.getValue()),data},reset:function(){var me=this;me.beforeReset(),me.setValue(me.originalValue),me.clearInvalid(),delete me.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue(),this.checkDirty()},checkChange:function(){var newVal,oldVal,me=this;me.suspendCheckChange||(newVal=me.getValue(),oldVal=me.lastValue,!me.destroyed&&me.didValueChange(newVal,oldVal)&&(me.lastValue=newVal,me.fireEvent("change",me,newVal,oldVal),me.onChange(newVal,oldVal)))},didValueChange:function(newVal,oldVal){return!this.isEqual(newVal,oldVal)},onChange:function(newVal){this.validateOnChange&&this.validate(),this.checkDirty()},publishValue:function(){this.rendered&&!this.getErrors().length&&this.publishState("value",this.getValue())},isDirty:function(){return!this.disabled&&!this.isEqual(this.getValue(),this.originalValue)},checkDirty:function(){var me=this,isDirty=me.isDirty();isDirty!==me.wasDirty&&(me.dirty=isDirty,me.fireEvent("dirtychange",me,isDirty),me.onDirtyChange(isDirty),me.wasDirty=isDirty)},onDirtyChange:Ext.emptyFn,getErrors:function(value){var result,errors=[],validationField=this.getValidationField(),validation=this.getValidation();return validationField&&!0!==(result=validationField.validate(value))&&errors.push(result),validation&&!0!==validation&&errors.push(validation),errors},isValid:function(){return this.disabled||Ext.isEmpty(this.getErrors())},validate:function(){return this.checkValidityChange(this.isValid())},checkValidityChange:function(isValid){return isValid!==this.wasValid&&(this.wasValid=isValid,this.fireEvent("validitychange",this,isValid)),isValid},batchChanges:function(fn){try{this.suspendCheckChange++,fn()}catch(pseudo){throw pseudo}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return!1},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(validation,oldValidation){oldValidation&&this.validate()},privates:{resetToInitialValue:function(){var me=this,originalValue=me.originalValue;me.originalValue=me.initialValue,me.reset(),me.originalValue=originalValue}}}),Ext.define("Ext.form.field.Base",{extend:Ext.Component,mixins:[Ext.form.Labelable,Ext.form.field.Field],xtype:"field",alternateClassName:["Ext.form.Field","Ext.form.BaseField"],focusable:!0,shrinkWrap:!0,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:!0}],defaultBindProperty:"value",autoEl:{role:"presentation"},subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:!0,invalidText:"The value in this field is invalid",fieldCls:Ext.baseCSSPrefix+"form-field",focusCls:"form-focus",dirtyCls:Ext.baseCSSPrefix+"form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:!0,readOnly:!1,readOnlyCls:Ext.baseCSSPrefix+"form-readonly",validateOnBlur:!0,hasFocus:!1,baseCls:Ext.baseCSSPrefix+"field",fieldBodyCls:Ext.baseCSSPrefix+"field-body",maskOnDisable:!1,stretchInputElFixed:!0,ariaEl:"inputEl",initComponent:function(){var me=this;me.callParent(),me.subTplData=me.subTplData||{},me.initLabelable(),me.initField(),me.initDefaultName(),me.readOnly&&me.addCls(me.readOnlyCls),me.addCls(Ext.baseCSSPrefix+"form-type-"+me.inputType)},initDefaultName:function(){this.name||(this.name=this.getInputId())},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(fieldData){var data,ariaAttr,me=this,type=me.inputType,inputId=me.getInputId();return data=Ext.apply({ui:me.ui,id:inputId,cmpId:me.id,name:me.name||inputId,disabled:me.disabled,readOnly:me.readOnly,value:me.getRawValue(),type:type,fieldCls:me.fieldCls,fieldStyle:me.getFieldStyle(),childElCls:fieldData.childElCls,tabIdx:me.tabIndex,inputCls:me.inputCls,typeCls:Ext.baseCSSPrefix+"form-"+(me.isTextInput?"text":type)},me.subTplData),me.ariaRole&&(ariaAttr={role:me.ariaRole,"aria-hidden":!!me.hidden,"aria-disabled":!!me.disabled,"aria-readonly":!!me.readOnly,"aria-invalid":!1},me.ariaLabel&&(ariaAttr["aria-label"]=me.ariaLabel),me.format&&me.formatText&&!data.title&&(ariaAttr.title=Ext.String.formatEncode(me.formatText,me.format)),data.inputElAriaAttributes=Ext.apply(ariaAttr,me.getAriaAttributes())),me.getInsertionRenderData(data,me.subTplInsertions),data},getSubTplMarkup:function(fieldData){var data=this.getSubTplData(fieldData),preSubTpl=this.getTpl("preSubTpl"),postSubTpl=this.getTpl("postSubTpl"),markup="";return preSubTpl&&(markup+=preSubTpl.apply(data)),markup+=this.getTpl("fieldSubTpl").apply(data),postSubTpl&&(markup+=postSubTpl.apply(data)),markup},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},setFieldStyle:function(style){var inputEl=this.inputEl;inputEl&&inputEl.applyStyles(style),this.fieldStyle=style},getFieldStyle:function(){var style=this.fieldStyle;return Ext.isObject(style)?Ext.DomHelper.generateStyles(style,null,!0):style||""},onRender:function(){this.callParent(arguments),this.mixins.labelable.self.initTip(),this.renderActiveError()},onFocusLeave:function(e){this.callParent([e]),this.completeEdit()},completeEdit:Ext.emptyFn,isFileUpload:function(){return"file"===this.inputType},getSubmitData:function(){var val,data=null;return!this.disabled&&this.submitValue&&null!==(val=this.getSubmitValue())&&((data={})[this.getName()]=val),data},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var v=this.inputEl?this.inputEl.getValue():Ext.valueFrom(this.rawValue,"");return this.rawValue=v},setRawValue:function(value){var me=this,rawValue=me.rawValue;return me.transformRawValue.$nullFn||(value=me.transformRawValue(value)),value=Ext.valueFrom(value,""),void 0!==rawValue&&rawValue===value&&!me.valueContainsPlaceholder||(me.rawValue=value,me.inputEl&&(me.bindChangeEvents(!1),me.inputEl.dom.value=value,me.bindChangeEvents(!0)),me.rendered&&me.reference&&me.publishState("rawValue",value)),value},transformRawValue:Ext.identityFn,valueToRaw:function(value){return""+Ext.valueFrom(value,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var val=this.rawToValue(this.processRawValue(this.getRawValue()));return this.value=val},setValue:function(value){return this.setRawValue(this.valueToRaw(value)),this.mixins.field.setValue.call(this,value)},onBoxReady:function(){this.callParent(arguments),this.setReadOnlyOnBoxReady&&this.setReadOnly(this.readOnly)},onDisable:function(){var me=this,inputEl=me.inputEl;me.callParent(),inputEl&&(inputEl.dom.disabled=!0,me.hasActiveError()&&(me.clearInvalid(),me.hadErrorOnDisable=!0)),!1===me.wasValid&&me.checkValidityChange(!0)},onEnable:function(){var valid,me=this,inputEl=me.inputEl,mark=me.preventMark;me.callParent(),inputEl&&(inputEl.dom.disabled=!1),void 0!==me.wasValid&&(me.forceValidation=!0,me.preventMark=!me.hadErrorOnDisable,valid=me.isValid(),me.forceValidation=!1,me.preventMark=mark,me.checkValidityChange(valid)),delete me.hadErrorOnDisable},setReadOnly:function(readOnly){var me=this,inputEl=me.inputEl,old=me.readOnly;me[(readOnly=!!readOnly)?"addCls":"removeCls"](me.readOnlyCls),me.readOnly=readOnly,inputEl?(inputEl.dom.readOnly=readOnly,me.ariaEl.dom.setAttribute("aria-readonly",readOnly)):me.rendering&&(me.setReadOnlyOnBoxReady=!0),readOnly!==old&&me.fireEvent("writeablechange",me,readOnly)},fireKey:function(e){e.isSpecialKey()&&this.fireEvent("specialkey",this,e)},initEvents:function(){var i,event,me=this,inputEl=me.inputEl,onFieldMutation=me.onFieldMutation,events=me.checkChangeEvents,len=events.length;if(inputEl)for(me.mon(inputEl,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",me.fireKey,me),i=0;i<len;++i)"propertychange"===(event=events[i])&&(me.usesPropertychange=!0),"textInput"===event&&(me.usesTextInput=!0),me.mon(inputEl,event,onFieldMutation,me);me.callParent()},onFieldMutation:function(e){this.readOnly||"propertychange"===e.type&&this.ignoreChangeRe.test(e.browserEvent.propertyName)||this.startCheckChangeTask()},startCheckChangeTask:function(){var me=this,task=me.checkChangeTask;task||(me.checkChangeTask=task=new Ext.util.DelayedTask(me.doCheckChangeTask,me)),me.bindNotifyListener||(me.bindNotifyListener=Ext.on("beforebindnotify",me.onBeforeNotify,me,{destroyable:!0})),task.delay(me.checkChangeBuffer)},doCheckChangeTask:function(){var bindNotifyListener=this.bindNotifyListener;bindNotifyListener&&(bindNotifyListener.destroy(),this.bindNotifyListener=null),this.checkChange()},publishValue:function(){this.rendered&&!this.getErrors().length&&this.publishState("value",this.getValue())},onDirtyChange:function(isDirty){var me=this;me[isDirty?"addCls":"removeCls"](me.dirtyCls),me.rendered&&me.reference&&me.publishState("dirty",isDirty)},isValid:function(){var me=this,disabled=me.disabled;return me.forceValidation||!disabled?me.validateValue(me.processRawValue(me.getRawValue())):disabled},validateValue:function(value){var errors=this.getErrors(value),isValid=Ext.isEmpty(errors);return this.preventMark||(isValid?this.clearInvalid():this.markInvalid(errors)),isValid},markInvalid:function(errors){var active,me=this,ariaDom=me.ariaEl.dom,oldMsg=me.getActiveError();me.setActiveErrors(Ext.Array.from(errors)),oldMsg!==(active=me.getActiveError())&&(me.setError(active),!me.ariaStaticRoles[me.ariaRole]&&ariaDom&&ariaDom.setAttribute("aria-invalid",!0))},clearInvalid:function(){var me=this,ariaDom=me.ariaEl.dom,hadError=me.hasActiveError();delete me.hadErrorOnDisable,me.unsetActiveError(),hadError&&(me.setError(""),!me.ariaStaticRoles[me.ariaRole]&&ariaDom&&ariaDom.setAttribute("aria-invalid",!1))},setError:function(error){var prop,msgTarget=this.msgTarget;this.rendered&&("title"===msgTarget||"qtip"===msgTarget?(prop="qtip"===msgTarget?"data-errorqtip":"title",this.getActionEl().dom.setAttribute(prop,error||"")):this.updateLayout())},renderActiveError:function(){var me=this,hasError=me.hasActiveError(),invalidCls=me.invalidCls+"-field";me.inputEl&&me.inputEl[hasError?"addCls":"removeCls"]([invalidCls,invalidCls+"-"+me.ui]),me.mixins.labelable.renderActiveError.call(me)},beforeDestroy:function(){var me=this,task=me.checkChangeTask;task&&task.cancel(),me.checkChangeTask=me.bindNotifyListener=Ext.destroy(me.bindNotifyListener),me.callParent()},privates:{applyBind:function(bind,currentBindings){var bindings,newValueBind,valueBinding=currentBindings&&currentBindings.value;return(bindings=this.callParent([bind,currentBindings]))&&(newValueBind=bindings.value,this.hasBindingValue=!!newValueBind,newValueBind!==valueBinding&&this.getInherited().modelValidation&&this.updateValueBinding(bindings)),bindings},applyRenderSelectors:function(){var me=this;me.callParent(),me.inputEl||(me.inputEl=me.el.getById(me.getInputId()))},bindChangeEvents:function(active){var method=active?"resumeEvent":"suspendEvent",inputEl=this.inputEl;this.usesPropertychange&&inputEl[method]("propertychange"),this.usesTextInput&&inputEl[method]("textInput")},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){return this.hasOwnProperty("renderTpl")||(this.renderTpl=this.getTpl("labelableRenderTpl")),this.callParent()},onBeforeNotify:function(){this.checkChangeTask.cancel(),this.checkChange()},updateValueBinding:function(bindings){var newBinding=bindings.value,fieldBinding=bindings.$fieldBinding;fieldBinding&&(fieldBinding.destroy(),bindings.$fieldBinding=null),newBinding&&newBinding.bindValidationField&&(this.fieldBinding=newBinding.bindValidationField("setValidationField",this))}},deprecated:{5:{methods:{doComponentLayout:function(){this.bindChangeEvents(!1),this.callParent(arguments),this.bindChangeEvents(!0)}}}}}),Ext.define("Ext.form.field.VTypes",function(){var alpha=/^[a-zA-Z_]+$/,alphanum=/^[a-zA-Z0-9_]+$/,email=/^(")?(?:[^\."\s])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,url=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:!0,alternateClassName:"Ext.form.VTypes",email:function(value){return email.test(value)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(value){return url.test(value)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(value){return alpha.test(value)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(value){return alphanum.test(value)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()),Ext.define("Ext.form.trigger.Trigger",{alias:"trigger.trigger",mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:"trigger"},repeatClick:!1,hidden:!1,hideOnReadOnly:void 0,weight:0,preventMouseDown:!0,baseCls:Ext.baseCSSPrefix+"form-trigger",focusCls:Ext.baseCSSPrefix+"form-trigger-focus",overCls:Ext.baseCSSPrefix+"form-trigger-over",clickCls:Ext.baseCSSPrefix+"form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>',"{[values.$trigger.renderBody(values)]}","</div>"],statics:{weightComparator:function(triggerA,triggerB){return triggerA.weight-triggerB.weight}},constructor:function(config){var cls,me=this;Ext.apply(me,config),me.compat4Mode&&(cls=me.cls,me.focusCls=[me.focusCls,cls+"-focus"],me.overCls=[me.overCls,cls+"-over"],me.clickCls=[me.clickCls,cls+"-click"])},afterFieldRender:function(){this.initEvents()},destroy:function(){var me=this;me.clickRepeater=me.el=Ext.destroy(me.clickRepeater,me.el),me.callParent()},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var el=this.el;this.hidden=!0,el&&el.hide()},initEvents:function(){var me=this,isFieldEnabled=me.isFieldEnabled,stateEl=me.getStateEl(),el=me.el;stateEl.addClsOnOver(me.overCls,isFieldEnabled,me),stateEl.addClsOnClick(me.clickCls,isFieldEnabled,me),me.repeatClick?me.clickRepeater=new Ext.util.ClickRepeater(el,{preventDefault:!0,handler:me.onClick,listeners:{mousedown:me.onClickRepeaterMouseDown,scope:me},scope:me}):me.field.mon(el,{click:me.onClick,mousedown:me.onMouseDown,scope:me})},isFieldEnabled:function(){return!this.field.disabled},isVisible:function(){var field=this.field,hidden=!1;return!this.hidden&&field&&this.rendered&&!this.destroyed||(hidden=!0),!hidden},onClick:function(){var me=this,args=arguments,e=me.clickRepeater?args[1]:args[0],handler=me.handler,field=me.field;handler&&!field.readOnly&&me.isFieldEnabled()&&Ext.callback(me.handler,me.scope,[field,me,e],0,field)},resolveListenerScope:function(scope){return this.field.resolveSatelliteListenerScope(this,scope)},onMouseDown:function(e){"touch"===e.pointerType||this.field.owns(Ext.Element.getActiveElement())||this.field.inputEl.focus(),this.preventMouseDown&&e.preventDefault()},onClickRepeaterMouseDown:function(clickRepeater,e){e.parentEvent&&"mousedown"!==e.parentEvent.type||this.field.inputEl.focus(),e.preventDefault()},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){(this.el=this.field.triggerWrap.selectNode("#"+this.domId,!1)).setVisibilityMode(Ext.Element.DISPLAY),this.rendered=!0},renderBody:function(renderData){var bodyTpl=this.bodyTpl;return Ext.apply(renderData,this.getBodyRenderData()),bodyTpl?Ext.XTemplate.getTpl(this,"bodyTpl").apply(renderData):""},renderTrigger:function(fieldData){var me=this,width=me.width,triggerStyle=me.hidden?"display:none;":"";return width&&(triggerStyle+="width:"+width),Ext.XTemplate.getTpl(me,"renderTpl").apply({$trigger:me,fieldData:fieldData,ui:fieldData.ui,childElCls:fieldData.childElCls,triggerId:me.domId=me.field.id+"-trigger-"+me.id,cls:me.cls,triggerStyle:triggerStyle,extraCls:me.extraCls,baseCls:me.baseCls})},setHidden:function(hidden){hidden!==this.hidden&&this[hidden?"hide":"show"]()},setVisible:function(visible){this.setHidden(!visible)},show:function(){var el=this.el;this.hidden=!1,el&&el.show()}}),Ext.define("Ext.form.field.Text",{extend:Ext.form.field.Base,alias:"widget.textfield",alternateClassName:["Ext.form.TextField","Ext.form.Text"],config:{hideTrigger:!1,triggers:void 0},renderConfig:{editable:!0},growMin:30,growMax:800,growAppend:"W",allowBlank:!0,validateBlank:!1,allowOnlyWhitespace:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyText:"",emptyCls:Ext.baseCSSPrefix+"form-empty-field",requiredCls:Ext.baseCSSPrefix+"form-required-field",valueContainsPlaceholder:!1,ariaRole:"textbox",repeatTriggerClick:!1,triggerWrapCls:Ext.baseCSSPrefix+"form-trigger-wrap",triggerWrapFocusCls:Ext.baseCSSPrefix+"form-trigger-wrap-focus",triggerWrapInvalidCls:Ext.baseCSSPrefix+"form-trigger-wrap-invalid",fieldBodyCls:Ext.baseCSSPrefix+"form-text-field-body",inputWrapCls:Ext.baseCSSPrefix+"form-text-wrap",inputWrapFocusCls:Ext.baseCSSPrefix+"form-text-wrap-focus",inputWrapInvalidCls:Ext.baseCSSPrefix+"form-text-wrap-invalid",growCls:Ext.baseCSSPrefix+"form-text-grow",needArrowKeys:!0,squashMouseUp:{mouseup:function(){},translate:!1,single:!0,preventDefault:!0},childEls:["triggerWrap","inputWrap"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap"',' role="presentation" class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap"',' role="presentation" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:["</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var me=this,emptyCls=me.emptyCls;!1===me.allowOnlyWhitespace&&(me.allowBlank=!1),me.size&&(me.defaultBodyWidth=6.5*me.size+20),me.onTrigger1Click||(me.onTrigger1Click=me.onTriggerClick),me.callParent(),me.readOnly&&me.setReadOnly(me.readOnly),me.fieldFocusCls=me.baseCls+"-focus",me.emptyUICls=emptyCls+" "+emptyCls+"-"+me.ui,me.addStateEvents("change")},initEvents:function(){var me=this,el=me.inputEl;me.callParent(),(me.selectOnFocus||me.emptyText)&&me.mon(el,"mousedown",me.onMouseDown,me),(me.maskRe||me.vtype&&!0!==me.disableKeyFilter&&(me.maskRe=Ext.form.field.VTypes[me.vtype+"Mask"]))&&me.mon(el,"keypress",me.filterKeys,me),me.enableKeyEvents&&me.mon(el,{scope:me,keyup:me.onKeyUp,keydown:me.onKeyDown,keypress:me.onKeyPress})},isEqual:function(value1,value2){return this.isEqualAsString(value1,value2)},onChange:function(newVal,oldVal){this.callParent(arguments),this.autoSize()},getSubTplData:function(fieldData){var placeholder,data,inputElAttr,me=this,value=me.getRawValue(),isEmpty=me.emptyText&&value.length<1,maxLength=me.maxLength;return me.enforceMaxLength&&maxLength!==Number.MAX_VALUE||(maxLength=void 0),isEmpty&&(Ext.supports.Placeholder?placeholder=me.emptyText:(value=me.emptyText,me.valueContainsPlaceholder=!0)),(inputElAttr=(data=Ext.apply(me.callParent([fieldData]),{triggerWrapCls:me.triggerWrapCls,inputWrapCls:me.inputWrapCls,triggers:me.orderedTriggers,maxLength:maxLength,readOnly:!me.editable||me.readOnly,placeholder:placeholder,value:value,fieldCls:me.fieldCls+(isEmpty&&(placeholder||value)?" "+me.emptyUICls:"")+(me.allowBlank?"":" "+me.requiredCls)})).inputElAriaAttributes)&&(inputElAttr["aria-required"]=!me.allowBlank),data},onRender:function(){var id,me=this,triggers=me.getTriggers(),elements=[];if(Ext.supports.FixedTableWidthBug&&(me.el._needsTableWidthFix=!0),me.callParent(),triggers){for(id in this.invokeTriggers("onFieldRender"),triggers)elements.push(triggers[id].el);me.triggerEl=me.triggerCell=new Ext.CompositeElement(elements,!0)}me.inputCell=me.inputWrap},afterRender:function(){this.autoSize(),this.callParent(),this.invokeTriggers("afterFieldRender")},onMouseDown:function(){this.hasFocus||Ext.getDoc().on(this.squashMouseUp)},applyTriggers:function(triggers){var id,triggerCfg,trigger,triggerCls,i,me=this,hideAllTriggers=me.getHideTrigger(),readOnly=me.readOnly,orderedTriggers=me.orderedTriggers=[],repeatTriggerClick=me.repeatTriggerClick;if(!triggers)for(triggers={},me.triggerCls&&!me.trigger1Cls&&(me.trigger1Cls=me.triggerCls),i=1;triggerCls=me["trigger"+i+"Cls"];i++)triggers["trigger"+i]={cls:triggerCls,extraCls:Ext.baseCSSPrefix+"trigger-index-"+i,handler:"onTrigger"+i+"Click",compat4Mode:!0,scope:me};for(id in triggers)triggers.hasOwnProperty(id)&&((triggerCfg=triggers[id]).field=me,triggerCfg.id=id,(readOnly&&!1!==triggerCfg.hideOnReadOnly||hideAllTriggers&&!1!==triggerCfg.hidden)&&(triggerCfg.hidden=!0),repeatTriggerClick&&!1!==triggerCfg.repeatClick&&(triggerCfg.repeatClick=!0),trigger=triggers[id]=Ext.form.trigger.Trigger.create(triggerCfg),orderedTriggers.push(trigger));return Ext.Array.sort(orderedTriggers,Ext.form.trigger.Trigger.weightComparator),triggers},invokeTriggers:function(methodName,args){var id,trigger,triggers=this.getTriggers();if(triggers)for(id in triggers)triggers.hasOwnProperty(id)&&(trigger=triggers[id])[methodName].apply(trigger,args||[])},getTrigger:function(id){return this.getTriggers()[id]},updateHideTrigger:function(hideTrigger){this.invokeTriggers(hideTrigger?"hide":"show")},updateEditable:function(editable,oldEditable){this.setReadOnlyAttr(!editable||this.readOnly)},setReadOnly:function(readOnly){var trigger,id,me=this,triggers=me.getTriggers(),hideTriggers=me.getHideTrigger();if(readOnly=!!readOnly,me.callParent([readOnly]),me.rendered&&me.setReadOnlyAttr(readOnly||!me.editable),triggers)for(id in triggers)!0!==(trigger=triggers[id]).hideOnReadOnly&&(!1===trigger.hideOnReadOnly||hideTriggers)||trigger.setVisible(!readOnly)},setReadOnlyAttr:function(readOnly){var inputEl=this.inputEl.dom;readOnly?inputEl.setAttribute("readonly","readonly"):inputEl.removeAttribute("readonly"),this.ariaRole&&this.ariaEl.dom.setAttribute("aria-readonly",!!readOnly)},processRawValue:function(value){var mod,newValue,stripRe=this.stripCharsRe;return stripRe&&(stripRe.global||(mod="g",mod+=stripRe.ignoreCase?"i":"",mod+=stripRe.multiline?"m":"",stripRe=new RegExp(stripRe.source,mod)),(newValue=value.replace(stripRe,""))!==value&&(this.setRawValue(newValue),value=newValue)),value},onDisable:function(){this.callParent(),Ext.isIE&&(this.inputEl.dom.unselectable="on")},onEnable:function(){this.callParent(),Ext.isIE&&(this.inputEl.dom.unselectable="")},onKeyDown:function(e){this.fireEvent("keydown",this,e)},onKeyUp:function(e){this.fireEvent("keyup",this,e)},onKeyPress:function(e){this.fireEvent("keypress",this,e)},reset:function(){this.callParent(),this.applyEmptyText()},applyEmptyText:function(){var isEmpty,me=this,emptyText=me.emptyText;me.rendered&&emptyText&&(isEmpty=me.getRawValue().length<1&&!me.hasFocus,Ext.supports.Placeholder?me.inputEl.dom.placeholder=emptyText:isEmpty&&(me.setRawValue(emptyText),me.valueContainsPlaceholder=!0),isEmpty?me.inputEl.addCls(me.emptyUICls):me.inputEl.removeCls(me.emptyUICls),me.autoSize())},getEmptyText:function(){return this.emptyText},setEmptyText:function(value){var me=this,inputEl=me.inputEl,inputDom=inputEl&&inputEl.dom,emptyText=value||"";return value?(me.emptyText=emptyText,me.applyEmptyText()):inputDom&&(Ext.supports.Placeholder?inputDom.removeAttribute("placeholder"):inputDom.value!==me.getRawValue()&&(inputDom.value="",inputEl.removeCls(me.emptyUICls)),me.valueContainsPlaceholder=!1),me.emptyText=emptyText,me},afterFirstLayout:function(){if(this.callParent(),Ext.isIE&&this.disabled){var el=this.inputEl;el&&(el.dom.unselectable="on")}},toggleInvalidCls:function(hasError){var method=hasError?"addCls":"removeCls";this.callParent(),this.triggerWrap[method](this.triggerWrapInvalidCls),this.inputWrap[method](this.inputWrapInvalidCls)},beforeFocus:function(){var me=this,inputEl=me.inputEl,emptyText=me.emptyText;me.callParent(arguments),emptyText&&!Ext.supports.Placeholder&&inputEl.dom.value===me.emptyText&&me.valueContainsPlaceholder?(me.setRawValue(""),inputEl.removeCls(me.emptyUICls),me.valueContainsPlaceholder=!1):Ext.supports.Placeholder&&inputEl.removeCls(me.emptyUICls)},onFocus:function(e){var me=this;me.callParent(arguments),me.selectOnFocus&&me.inputEl.dom.select(),me.emptyText&&me.autoSize(),me.addCls(me.fieldFocusCls),me.triggerWrap.addCls(me.triggerWrapFocusCls),me.inputWrap.addCls(me.inputWrapFocusCls),me.invokeTriggers("onFieldFocus",[e])},onBlur:function(e){var me=this;me.callParent(arguments),me.removeCls(me.fieldFocusCls),me.triggerWrap.removeCls(me.triggerWrapFocusCls),me.inputWrap.removeCls(me.inputWrapFocusCls),me.invokeTriggers("onFieldBlur",[e])},completeEdit:function(e){this.callParent([e]),this.applyEmptyText()},filterKeys:function(e){if(!(e.ctrlKey&&!e.altKey||e.isSpecialKey())){var charCode=String.fromCharCode(e.getCharCode());this.maskRe.test(charCode)||e.stopEvent()}},getState:function(){return this.addPropertyToState(this.callParent(),"value")},applyState:function(state){this.callParent(arguments),state.hasOwnProperty("value")&&this.setValue(state.value)},getRawValue:function(){var v=this.callParent();return v===this.emptyText&&this.valueContainsPlaceholder&&(v=""),v},setValue:function(value){var me=this,inputEl=me.inputEl;return inputEl&&me.emptyText&&!Ext.isEmpty(value)&&(inputEl.removeCls(me.emptyUICls),me.valueContainsPlaceholder=!1),me.callParent(arguments),me.applyEmptyText(),me},getErrors:function(value){value=arguments.length?null==value?"":value:this.processRawValue(this.getRawValue());var msg,isBlank,me=this,errors=me.callParent([value]),validator=me.validator,vtype=me.vtype,vtypes=Ext.form.field.VTypes,regex=me.regex,format=Ext.String.format;if(Ext.isFunction(validator)&&!0!==(msg=validator.call(me,value))&&errors.push(msg),(me.allowOnlyWhitespace?value:Ext.String.trim(value)).length<1||value===me.emptyText&&me.valueContainsPlaceholder){if(me.allowBlank||errors.push(me.blankText),!me.validateBlank)return errors;isBlank=!0}return!isBlank&&value.length<me.minLength&&errors.push(format(me.minLengthText,me.minLength)),value.length>me.maxLength&&errors.push(format(me.maxLengthText,me.maxLength)),vtype&&(vtypes[vtype](value,me)||errors.push(me.vtypeText||vtypes[vtype+"Text"])),regex&&!regex.test(value)&&errors.push(me.regexText||me.invalidText),errors},selectText:function(start,end){var range,len=this.getRawValue().length,el=this.inputEl.dom;0<len&&(start=void 0===start?0:Math.min(start,len),end=void 0===end?len:Math.min(end,len),el.setSelectionRange?el.setSelectionRange(start,end):el.createTextRange&&((range=el.createTextRange()).moveStart("character",start),range.moveEnd("character",end-len),range.select()))},getGrowWidth:function(){return this.inputEl.dom.value},autoSize:function(){var triggers,triggerId,triggerWidth,inputEl,width,value,me=this;if(me.grow&&me.rendered&&me.getSizeModel().width.auto){for(triggerId in inputEl=me.inputEl,triggers=me.getTriggers(),triggerWidth=0,value=Ext.util.Format.htmlEncode(me.getGrowWidth()||(me.hasFocus?"":me.emptyText)||""),value+=me.growAppend,triggers)triggerWidth+=triggers[triggerId].el.getWidth();width=inputEl.getTextWidth(value)+triggerWidth+me.inputWrap.getBorderWidth("lr")+me.triggerWrap.getBorderWidth("lr"),width=Math.min(Math.max(width,me.growMin),me.growMax),me.bodyEl.setWidth(width),me.updateLayout(),me.fireEvent("autosize",me,width)}},onDestroy:function(){this.invokeTriggers("destroy"),Ext.destroy(this.triggerRepeater),this.callParent()},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var id,triggers=this.getTriggers(),width=0;if(triggers&&this.rendered)for(id in triggers)triggers.hasOwnProperty(id)&&(width+=triggers[id].el.getWidth());return width}}}}}),Ext.define("Ext.form.field.TextArea",{extend:Ext.form.field.Text,alias:["widget.textareafield","widget.textarea"],alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" data-ref="inputEl" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:!0}],growMin:60,growMax:1e3,growAppend:"\n-",enterIsSpecial:!1,preventScrollbars:!1,returnRe:/\r/g,inputCls:Ext.baseCSSPrefix+"form-textarea",extraFieldBodyCls:Ext.baseCSSPrefix+"form-textarea-body",ariaAttributes:{"aria-multiline":!0},getSubTplData:function(fieldData){var me=this,fieldStyle=me.getFieldStyle(),ret=me.callParent(arguments);return me.grow&&me.preventScrollbars&&(ret.fieldStyle=(fieldStyle||"")+";overflow:hidden;height:"+me.growMin+"px"),ret},afterRender:function(){var me=this;me.callParent(arguments),me.needsMaxCheck=me.enforceMaxLength&&me.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength,me.needsMaxCheck&&me.inputEl.on("paste",me.onPaste,me)},transformRawValue:function(value){return this.stripReturns(value)},getValue:function(){return this.stripReturns(this.callParent())},valueToRaw:function(value){return value=this.stripReturns(value),this.callParent([value])},stripReturns:function(value){return value&&"string"==typeof value&&(value=value.replace(this.returnRe,"")),value},onPaste:function(){var me=this;me.pasteTask||(me.pasteTask=new Ext.util.DelayedTask(me.pasteCheck,me)),me.pasteTask.delay(1)},pasteCheck:function(){var value=this.getValue(),max=this.maxLength;value.length>max&&(value=value.substr(0,max),this.setValue(value))},fireKey:function(e){var me=this,key=e.getKey();e.isSpecialKey()&&(me.enterIsSpecial||key!==e.ENTER||e.hasModifier())&&me.fireEvent("specialkey",me,e),!me.needsMaxCheck||key===e.BACKSPACE||key===e.DELETE||e.isNavKeyPress()||me.isCutCopyPasteSelectAll(e,key)||me.getValue().length>=me.maxLength&&e.stopEvent()},isCutCopyPasteSelectAll:function(e,key){return!!e.ctrlKey&&(key===e.A||key===e.C||key===e.V||key===e.X)},autoSize:function(){var inputEl,height,curWidth,value,me=this;me.grow&&me.rendered&&me.getSizeModel().height.auto&&(curWidth=(inputEl=me.inputEl).getWidth(!0),value=Ext.util.Format.htmlEncode(inputEl.dom.value)||"&#160;",value=(value+=me.growAppend).replace(/\n/g,"<br/>"),height=Ext.util.TextMetrics.measure(inputEl,value,curWidth).height+inputEl.getPadding("tb")+me.inputWrap.getBorderWidth("tb")+me.triggerWrap.getBorderWidth("tb"),height=Math.min(Math.max(height,me.growMin),me.growMax),me.bodyEl.setHeight(height),me.updateLayout(),me.fireEvent("autosize",me,height))},beforeDestroy:function(){var task=this.pasteTask;task&&(task.cancel(),this.pasteTask=null),this.callParent()}}),Ext.define("Ext.window.MessageBox",{extend:Ext.window.Window,alias:"widget.messagebox",OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:Ext.baseCSSPrefix+"message-box-info",WARNING:Ext.baseCSSPrefix+"message-box-warning",QUESTION:Ext.baseCSSPrefix+"message-box-question",ERROR:Ext.baseCSSPrefix+"message-box-error",hideMode:"offsets",closeAction:"hide",resizable:!1,scrollable:!0,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:!0,cls:[Ext.baseCSSPrefix+"message-box",Ext.baseCSSPrefix+"hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:!0,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:Ext.baseCSSPrefix+"message-box-icon",ariaRole:"alertdialog",makeButton:function(btnIdx){var btnId=this.buttonIds[btnIdx];return new Ext.button.Button({handler:this.btnCallback,itemId:btnId,scope:this,text:this.buttonText[btnId],minWidth:75})},btnCallback:function(btn,event){var value,field,me=this;!event||"keydown"!==event.type||event.isSpecialKey()?((me.cfg.prompt||me.cfg.multiline)&&(value=(field=me.cfg.multiline?me.textArea:me.textField).getValue(),field.reset()),me.hide(),me.userCallback(btn.itemId,value,me.cfg)):event.getTarget(null,null,!0).on({keyup:function(e){me.btnCallback(btn,e)},single:!0})},hide:function(){var me=this,cls=me.cfg?me.cfg.cls:"";me.progressBar.reset(),cls&&me.removeCls(cls),me.callParent(arguments)},constructor:function(cfg){var me=this;me.callParent(arguments),me.minWidth=me.defaultMinWidth=me.minWidth||me.defaultMinWidth,me.maxWidth=me.defaultMaxWidth=me.maxWidth||me.defaultMaxWidth,me.minHeight=me.defaultMinHeight=me.minHeight||me.defaultMinHeight,me.maxHeight=me.defaultMaxHeight=me.maxHeight||me.defaultMaxHeight},initComponent:function(cfg){var i,button,me=this,baseId=me.id;for(me.title=me.title||"&#160;",me.iconCls=me.iconCls||"",me.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[me.iconComponent=new Ext.Component({cls:me.baseIconCls}),me.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[me.msg=new Ext.Component({id:baseId+"-msg",cls:me.baseCls+"-text"}),me.textField=new Ext.form.field.Text({id:baseId+"-textfield",enableKeyEvents:!0,listeners:{keydown:me.onPromptKey,scope:me}}),me.textArea=new Ext.form.field.TextArea({id:baseId+"-textarea",height:75})]})]}),me.progressBar=new Ext.ProgressBar({id:baseId+"-progressbar",margin:"0 10 10 10"}),me.items=[me.topContainer,me.progressBar],me.msgButtons=[],i=0;i<4;i++)button=me.makeButton(i),me.msgButtons[button.itemId]=button,me.msgButtons.push(button);me.bottomTb=new Ext.toolbar.Toolbar({id:baseId+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[me.msgButtons[0],me.msgButtons[1],me.msgButtons[2],me.msgButtons[3]]}),me.dockedItems=[me.bottomTb],me.on("close",me.onClose,me),me.callParent()},onClose:function(){var btn=this.header.child("[type=close]");btn&&(btn.itemId="cancel",this.btnCallback(btn),delete btn.itemId)},onPromptKey:function(textField,e){var me=this;e.keyCode!==e.RETURN&&10!==e.keyCode||(me.msgButtons.ok.isVisible()?me.msgButtons.ok.handler.call(me,me.msgButtons.ok):me.msgButtons.yes.isVisible()&&me.msgButtons.yes.handler.call(me,me.msgButtons.yes))},reconfigure:function(cfg){var resizeTracker,width,height,i,textArea,textField,msg,progressBar,msgButtons,wait,tool,me=this,buttons=0,hideToolbar=!0,oldButtonText=me.buttonText,resizer=me.resizer,header=me.header,headerCfg=header&&!header.isHeader,message=cfg&&(cfg.message||cfg.msg);for(me.updateButtonText(),me.cfg=cfg=cfg||{},wait=cfg.wait,cfg.width&&(width=cfg.width),cfg.height&&(height=cfg.height),me.minWidth=cfg.minWidth||me.defaultMinWidth,me.maxWidth=cfg.maxWidth||me.defaultMaxWidth,me.minHeight=cfg.minHeight||me.defaultMinHeight,me.maxHeight=cfg.maxHeight||me.defaultMaxHeight,resizer&&(resizeTracker=resizer.resizeTracker,resizer.minWidth=resizeTracker.minWidth=me.minWidth,resizer.maxWidth=resizeTracker.maxWidth=me.maxWidth,resizer.minHeight=resizeTracker.minHeight=me.minHeight,resizer.maxHeight=resizeTracker.maxHeight=me.maxHeight),delete me.defaultFocus,cfg.defaultFocus&&(me.defaultFocus=cfg.defaultFocus),me.animateTarget=cfg.animateTarget||void 0,me.modal=!1!==cfg.modal,me.setTitle(cfg.title||headerCfg&&header.title||me.title),me.setIconCls(cfg.iconCls||headerCfg&&header.iconCls||me.iconCls),buttons=Ext.isObject(cfg.buttons)?(me.buttonText=cfg.buttons,0):(me.buttonText=cfg.buttonText||me.buttonText,Ext.isNumber(cfg.buttons)?cfg.buttons:0),buttons|=me.updateButtonText(),me.buttonText=oldButtonText,Ext.suspendLayouts(),me.width=me.height=null,(width||height)&&(width&&me.setWidth(width),height&&me.setHeight(height)),me.hidden=!1,me.rendered||me.render(Ext.getBody()),me.closable=!1!==cfg.closable&&!wait,(header=me.header)&&((tool=header.child("[type=close]"))&&tool.setVisible(me.closable),cfg.title||me.closable||cfg.iconCls?header.show():header.hide()),me.liveDrag=!cfg.proxyDrag,me.userCallback=Ext.Function.bindCallback(cfg.callback||cfg.fn||Ext.emptyFn,cfg.scope||Ext.global),me.setIcon(cfg.icon),msg=me.msg,message?(msg.setHtml(message),msg.show()):msg.hide(),textArea=me.textArea,textField=me.textField,cfg.prompt||cfg.multiline?(me.multiline=cfg.multiline,cfg.multiline?(textArea.setValue(cfg.value),textArea.setHeight(cfg.defaultTextHeight||me.defaultTextHeight),textArea.show(),textField.hide(),me.defaultFocus=textArea):(textField.setValue(cfg.value),textArea.hide(),textField.show(),me.defaultFocus=textField)):(textArea.hide(),textField.hide()),progressBar=me.progressBar,cfg.progress||wait?(progressBar.show(),me.updateProgress(0,cfg.progressText),wait&&progressBar.wait(!0===wait?cfg.waitConfig:wait)):progressBar.hide(),msgButtons=me.msgButtons,i=0;i<4;i++)buttons&Math.pow(2,i)?(me.defaultFocus||(me.defaultFocus=msgButtons[i]),msgButtons[i].show(),hideToolbar=!1):msgButtons[i].hide();hideToolbar?me.bottomTb.hide():me.bottomTb.show(),Ext.resumeLayouts(!0)},updateButtonText:function(){var btnId,btn,me=this,buttonText=me.buttonText,buttons=0;for(btnId in buttonText)buttonText.hasOwnProperty(btnId)&&(btn=me.msgButtons[btnId])&&(me.cfg&&me.cfg.buttonText&&(buttons|=Math.pow(2,Ext.Array.indexOf(me.buttonIds,btnId))),btn.text!==buttonText[btnId]&&btn.setText(buttonText[btnId]));return buttons},show:function(cfg){var visibleFocusables,me=this;return cfg=cfg||{},Ext.Component.layoutSuspendCount?Ext.on({resumelayouts:function(){me.show(cfg)},single:!0}):(me.reconfigure(cfg),cfg.cls&&me.addCls(cfg.cls),visibleFocusables=me.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])"),me.preventFocusOnActivate=!visibleFocusables.length,me.hidden=!0,me.callParent()),me},onShow:function(){this.callParent(arguments),this.center()},updateText:function(text){this.msg.setHtml(text)},setIcon:function(icon,width,height){var iconCmp=this.iconComponent,cls=this.messageIconCls;return cls&&iconCmp.removeCls(cls),icon?(iconCmp.show(),(width||height)&&iconCmp.setSize(width||iconCmp.getWidth(),height||iconCmp.getHeight()),iconCmp.addCls(Ext.baseCSSPrefix+"dlg-icon"),iconCmp.addCls(this.messageIconCls=icon)):(iconCmp.removeCls(Ext.baseCSSPrefix+"dlg-icon"),iconCmp.hide()),this},updateProgress:function(value,progressText,message){return this.progressBar.updateProgress(value,progressText),message&&this.updateText(message),this},onEsc:function(){!1!==this.closable&&this.callParent(arguments)},confirm:function(cfg,message,fn,scope){return Ext.isString(cfg)&&(cfg={title:cfg,icon:this.QUESTION,message:message,buttons:this.YESNO,callback:fn,scope:scope}),this.show(cfg)},prompt:function(title,message,fn,scope,multiline,value){return Ext.isString(title)&&(title={prompt:!0,title:title,minWidth:this.minPromptWidth,message:message,buttons:this.OKCANCEL,callback:fn,scope:scope,multiline:multiline,value:value}),this.show(title)},wait:function(message,title,config){return Ext.isString(message)&&(message={title:title,message:message,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:config}),this.show(message)},alert:function(title,message,fn,scope){return Ext.isString(title)&&(title={title:title,message:message,buttons:this.OK,fn:fn,scope:scope,minWidth:this.minWidth}),this.show(title)},progress:function(title,message,progressText){return Ext.isString(title)&&(title={title:title,message:message,progress:!0,progressText:progressText}),this.show(title)}},function(MessageBox){Ext.onInternalReady(function(){Ext.MessageBox=Ext.Msg=new MessageBox})}),Ext.define("Ext.form.Label",{extend:Ext.Component,alias:"widget.label",autoEl:"label",maskOnDisable:!1,getElConfig:function(){var me=this;return me.html=me.text?Ext.util.Format.htmlEncode(me.text):me.html||"",Ext.apply(me.callParent(),{htmlFor:me.forId||""})},setText:function(text,encode){var me=this;return(encode=!1!==encode)?(me.text=text,delete me.html):(me.html=text,delete me.text),me.rendered&&(me.el.dom.innerHTML=!1!==encode?Ext.util.Format.htmlEncode(text):text,me.updateLayout()),me}}),Ext.define("Ext.selection.Model",{extend:Ext.mixin.Observable,alternateClassName:"Ext.AbstractSelectionModel",mixins:[Ext.util.StoreHolder,Ext.mixin.Factoryable],alias:"selection.abstract",factoryConfig:{defaultType:"dataviewmodel"},$configPrefixed:!1,$configStrict:!1,config:{store:null,selected:{}},isSelectionModel:!0,allowDeselect:void 0,toggleOnClick:!0,selected:null,pruneRemoved:!0,suspendChange:0,ignoreRightMouseSelection:!1,constructor:function(cfg){var me=this;me.modes={SINGLE:!0,SIMPLE:!0,MULTI:!0},me.callParent([cfg]),me.setSelectionMode(me.mode),"SINGLE"!==me.selectionMode&&(me.allowDeselect=!0)},updateStore:function(store,oldStore){this.bindStore(store,!oldStore)},applySelected:function(selected){return selected.isCollection||(selected=new Ext.util.Collection(Ext.apply({rootProperty:"data"},selected))),selected},getStoreListeners:function(){var me=this;return{add:me.onStoreAdd,clear:me.onStoreClear,remove:me.onStoreRemove,update:me.onStoreUpdate,idchanged:me.onIdChanged,load:me.onStoreLoad,refresh:me.onStoreRefresh,pageadd:me.onPageAdd,pageremove:me.onPageRemove}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){this.suspendChange&&--this.suspendChange},selectAll:function(suppressEvent){var me=this,selections=me.store.getRange(),start=me.getSelection().length;me.suspendChanges(),me.doSelect(selections,!0,suppressEvent),me.resumeChanges(),suppressEvent||me.destroyed||me.maybeFireSelectionChange(me.getSelection().length!==start)},deselectAll:function(suppressEvent){var i,l,rec,me=this,selections=me.getSelection(),selIndexes={},store=me.store,start=selections.length;for(i=0,l=selections.length;i<l;i++)rec=selections[i],selIndexes[rec.id]=store.indexOf(rec);selections=Ext.Array.sort(selections,function(r1,r2){return selIndexes[r1.id]<selIndexes[r2.id]?-1:1}),me.suspendChanges(),me.doDeselect(selections,suppressEvent),me.resumeChanges(),suppressEvent||me.destroyed||me.maybeFireSelectionChange(me.getSelection().length!==start)},getSelectionStart:function(){return this.selectionStart},setSelectionStart:function(selection){this.selectionStart=selection},selectWithEvent:function(record,e){var me=this,isSelected=me.isSelected(record),shift=e.shiftKey;switch(me.selectionMode){case"MULTI":me.selectWithEventMulti(record,e,isSelected);break;case"SIMPLE":me.selectWithEventSimple(record,e,isSelected);break;case"SINGLE":me.selectWithEventSingle(record,e,isSelected)}shift||(me.isSelected(record)?me.selectionStart=record:me.selectionStart=null)},vetoSelection:function(e){return!!e.stopSelection||("keydown"===e.type||0===e.button?"mousedown"===e.type:!(!this.ignoreRightMouseSelection&&!this.isSelected(e.record))||void 0)},onNavigate:function(e){if(e.record&&!this.vetoSelection(e.keyEvent)){this.onBeforeNavigate(e);var me=this,keyEvent=e.keyEvent,ctrlKey=keyEvent.ctrlKey||e.ctrlKey,recIdx=e.recordIndex,record=e.record,lastFocused=e.previousRecord,isSelected=me.isSelected(record),from=me.selectionStart&&me.isSelected(e.previousRecord)?me.selectionStart:me.selectionStart=e.previousRecord,fromIdx=e.previousRecordIndex,key=keyEvent.getCharCode(),isSpace=key===keyEvent.SPACE,direction=key===keyEvent.UP||key===keyEvent.PAGE_UP||key===keyEvent.HOME?"up":key===keyEvent.DOWN||key===keyEvent.PAGE_DOWN||key===keyEvent.END?"down":null;switch(me.selectionMode){case"MULTI":me.setSelectionStart(e.selectionStart),key===keyEvent.A&&ctrlKey?(me.selected.beginUpdate(),me.selectRange(0,me.store.getCount()-1),me.selected.endUpdate()):isSpace?keyEvent.shiftKey?me.selectRange(from,record,ctrlKey):isSelected?me.allowDeselect&&me.doDeselect(record):me.doSelect(record,ctrlKey):keyEvent.shiftKey&&from?("up"===direction&&fromIdx<=recIdx?me.deselectRange(lastFocused,recIdx+1):"down"===direction&&recIdx<=fromIdx?me.deselectRange(lastFocused,recIdx-1):from!==record&&me.selectRange(from,record,ctrlKey),me.lastSelected=record):key?ctrlKey||me.doSelect(record,!1):me.selectWithEvent(record,keyEvent);break;case"SIMPLE":key===keyEvent.A&&ctrlKey?(me.selected.beginUpdate(),me.selectRange(0,me.store.getCount()-1),me.selected.endUpdate()):isSelected?me.doDeselect(record):me.doSelect(record,!0);break;case"SINGLE":ctrlKey||(direction?me.doSelect(record,!1):!isSpace&&key||me.selectWithEvent(record,keyEvent))}keyEvent.shiftKey||me.destroyed||!me.isSelected(record)||(me.selectionStart=record,me.selectionStartIdx=recIdx)}},selectRange:function(startRow,endRow,keepExisting){var result,i,len,toSelect,toDeselect,idx,rec,me=this,store=me.store,selected=me.selected.items;if(!me.isLocked()){for(startRow=(result=me.normalizeRowRange(startRow,endRow))[0],endRow=result[1],toSelect=[],i=startRow;i<=endRow;i++)me.isSelected(store.getAt(i))||toSelect.push(store.getAt(i));if(!keepExisting){for(toDeselect=[],me.suspendChanges(),i=0,len=selected.length;i<len;++i)rec=selected[i],((idx=store.indexOf(rec))<startRow||endRow<idx)&&toDeselect.push(rec);for(i=0,len=toDeselect.length;i<len;++i)me.doDeselect(toDeselect[i]);me.resumeChanges()}me.destroyed||(toSelect.length?me.doMultiSelect(toSelect,!0):toDeselect&&me.maybeFireSelectionChange(0<toDeselect.length))}},deselectRange:function(startRow,endRow){var result,i,toDeselect,record,me=this,store=me.store;if(!me.isLocked()){for(startRow=(result=me.normalizeRowRange(startRow,endRow))[0],endRow=result[1],toDeselect=[],i=startRow;i<=endRow;i++)record=store.getAt(i),me.isSelected(record)&&toDeselect.push(record);toDeselect.length&&me.doDeselect(toDeselect)}},normalizeRowRange:function(startRow,endRow){var tmp,store=this.store;return Ext.isNumber(startRow)||(startRow=store.indexOf(startRow)),startRow=Math.max(0,startRow),Ext.isNumber(endRow)||(endRow=store.indexOf(endRow)),(endRow=Math.min(endRow,store.getCount()-1))<startRow&&(tmp=endRow,endRow=startRow,startRow=tmp),[startRow,endRow]},select:function(records,keepExisting,suppressEvent){!Ext.isDefined(records)||Ext.isArray(records)&&!records.length||this.doSelect(records,keepExisting,suppressEvent)},deselect:function(records,suppressEvent){this.doDeselect(records,suppressEvent)},doSelect:function(records,keepExisting,suppressEvent){var record,me=this;if(!me.locked&&null!=records){if("number"==typeof records){if(!(record=me.store.getAt(records)))return;records=[record]}"SINGLE"===me.selectionMode?(records.isModel&&(records=[records]),records.length&&me.doSingleSelect(records[0],suppressEvent)):me.doMultiSelect(records,keepExisting,suppressEvent)}},doMultiSelect:function(records,keepExisting,suppressEvent){var result,i,len,record,commit,me=this,selected=me.selected,change=!1;if(!me.locked){if(len=(records=Ext.isArray(records)?records:[records]).length,!keepExisting&&0<selected.getCount()){if(result=me.deselectDuringSelect(records,suppressEvent),me.destroyed)return;if(result[0])return void me.maybeFireSelectionChange(0<result[1]&&!suppressEvent);change=0<result[1]}for(commit=function(){selected.getCount()||(me.selectionStart=record),selected.add(record),change=!0},i=0;i<len;i++)if(record=records[i],!me.isSelected(record)&&(me.onSelectChange(record,!0,suppressEvent,commit),me.destroyed))return;me.lastSelected=record,me.maybeFireSelectionChange(change&&!suppressEvent)}},deselectDuringSelect:function(toSelect,suppressEvent){var item,i,me=this,selected=me.selected.getRange(),len=selected.length,changed=0,failed=!1;for(me.suspendChanges(),me.deselectingDuringSelect=!0,i=0;i<len;++i)if(item=selected[i],Ext.Array.contains(toSelect,item)||(me.doDeselect(item,suppressEvent)?++changed:failed=!0),me.destroyed){failed=!0,changed=0;break}return me.deselectingDuringSelect=!1,me.resumeChanges(),[failed,changed]},doDeselect:function(records,suppressEvent){var len,record,commit,me=this,selected=me.selected,i=0,attempted=0,accepted=0;if(me.locked||!me.store)return!1;if("number"==typeof records){if(!(record=me.store.getAt(records)))return!1;records=[record]}else Ext.isArray(records)||(records=[records]);for(commit=function(){++accepted,selected.remove(record),record===me.selectionStart&&(me.selectionStart=null)},len=records.length,me.suspendChanges();i<len;i++)if(record=records[i],me.isSelected(record)&&(me.lastSelected===record&&(me.lastSelected=selected.last()),++attempted,me.onSelectChange(record,!1,suppressEvent,commit),me.destroyed))return!1;return me.resumeChanges(),me.maybeFireSelectionChange(0<accepted&&!suppressEvent),accepted===attempted},doSingleSelect:function(record,suppressEvent){var commit,me=this,changed=!1,selected=me.selected;me.locked||me.isSelected(record)||(commit=function(){if(selected.getCount()){me.suspendChanges();var result=me.deselectDuringSelect([record],suppressEvent);if(me.destroyed)return;if(me.resumeChanges(),result[0])return!1}me.lastSelected=record,selected.getCount()||(me.selectionStart=record),selected.add(record),changed=!0},me.onSelectChange(record,!0,suppressEvent,commit),changed&&!me.destroyed&&me.maybeFireSelectionChange(!suppressEvent))},maybeFireSelectionChange:function(fireEvent){fireEvent&&!this.suspendChange&&this.fireEvent("selectionchange",this,this.getSelection())},getLastSelected:function(){return this.lastSelected},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(selMode){selMode=selMode?selMode.toUpperCase():"SINGLE",this.selectionMode=this.modes[selMode]?selMode:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(locked){this.locked=!!locked},isRangeSelected:function(startRow,endRow){var i,result,store=this.store;for(startRow=(result=this.normalizeRowRange(startRow,endRow))[0],endRow=result[1],i=startRow;i<=endRow;i++)if(!this.isSelected(store.getAt(i)))return!1;return!0},isSelected:function(record){return record=Ext.isNumber(record)?this.store.getAt(record):record,this.selected.contains(record)},hasSelection:function(){var selected=this.getSelected();return!(!selected||!selected.getCount())},refresh:function(){var change,d,storeData,selection,rec,i,me=this,store=me.store,toBeSelected=[],toBeReAdded=[],oldSelections=me.getSelection(),len=oldSelections.length,selected=me.getSelected();if(store&&(selected.isCollection||selected.isRows)&&selected.getCount()){for((storeData=store.getData()).getSource&&(d=storeData.getSource())&&(storeData=d),me.refreshing=!0,selected.beginUpdate(),me.suspendChanges(),i=0;i<len&&(selection=oldSelections[i],(rec=storeData.get(selection.getId()))?toBeSelected.push(rec):me.pruneRemoved||toBeReAdded.push(selection),"SINGLE"!==me.mode||!toBeReAdded.length);i++);selected.getCount()!==toBeSelected.length+toBeReAdded.length&&(change=!0),me.clearSelections(),toBeSelected.length&&me.doSelect(toBeSelected,!1,!0),toBeReAdded.length&&(selected.add(toBeReAdded),me.lastSelected||(me.lastSelected=toBeReAdded[toBeReAdded.length-1])),me.resumeChanges(),change?selected.endUpdate():selected.updating--,me.refreshing=!1,me.maybeFireSelectionChange(change)}},clearSelections:function(){var selected=this.getSelected();selected&&selected.clear(),this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){!this.store.isLoading()&&this.hasSelection()&&(this.clearSelections(),this.maybeFireSelectionChange(!0))},onStoreRemove:function(store,records,index,isMove){var i,len,rec,moveMap,me=this,toDeselect=records;if(me.selectionStart&&Ext.Array.contains(records,me.selectionStart)&&(me.selectionStart=null),!isMove&&!me.locked&&me.pruneRemoved){if(moveMap=store.isMoving(null,!0))for(toDeselect=null,i=0,len=records.length;i<len;++i)moveMap[(rec=records[i]).id]||(toDeselect=toDeselect||[]).push(rec);toDeselect&&me.deselect(toDeselect)}},onPageRemove:function(pageMap,pageNumber,records){this.onStoreRemove(this.store,records)},onPageAdd:function(pageMap,pageNumber,records){var i,record,len=records.length;for(i=0;i<len;i++)record=records[i],this.selected.get(record.id)&&this.selected.replace(record)},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){var me=this;me.clearSelections(),me.bindStore(null),me.selected=Ext.destroy(me.selected),me.callParent()},onStoreUpdate:Ext.emptyFn,onIdChanged:function(store,rec,oldId,newId){this.selected.updateKey(rec,oldId)},onStoreRefresh:function(){this.updateSelectedInstances(this.selected)},updateSelectedInstances:function(selected){var items,length,i,selectedRec,rec,lastSelectedChanged,me=this,store=me.getStore(),lastSelected=me.lastSelected,removeCount=0,prune=me.pruneRemovedOnRefresh();if(!store.isBufferedStore){for(length=(items=selected.getRange()).length,lastSelected&&(me.lastSelected=store.getById(lastSelected.id),lastSelectedChanged=me.lastSelected!==lastSelected),me.refreshing=!0,i=0;i<length;++i)selectedRec=items[i],(rec=store.getById(selectedRec.id))?rec!==selectedRec&&selected.replace(rec):prune&&(selected.remove(selectedRec),++removeCount);me.refreshing=!1,me.maybeFireSelectionChange(0<removeCount),lastSelectedChanged&&me.fireEvent("lastselectedchanged",me,me.getSelection(),me.lastSelected)}},pruneRemovedOnRefresh:function(){return this.pruneRemoved},onStoreLoad:Ext.emptyFn,onSelectChange:function(record,isSelected,suppressEvent,commitFn){var eventName=isSelected?"select":"deselect";!1!==(suppressEvent||this.fireEvent("before"+eventName,this,record))&&!1!==commitFn()&&(suppressEvent||this.fireEvent(eventName,this,record))},onEditorKey:Ext.emptyFn,beforeViewRender:function(view){Ext.Array.include(this.views||(this.views=[]),view)},onHeaderClick:Ext.emptyFn,resolveListenerScope:function(defaultScope){var scope,view=this.view;return view&&(scope=view.resolveSatelliteListenerScope(this,defaultScope)),scope||this.callParent([defaultScope])},bindComponent:Ext.emptyFn,privates:{onBeforeNavigate:Ext.privateFn,selectWithEventMulti:function(record,e,isSelected){var toDeselect,i,item,me=this,shift=e.shiftKey,ctrl=e.ctrlKey,start=shift?me.getSelectionStart():null,selected=me.getSelection(),len=selected.length;if(shift&&start)me.selectRange(start,record,ctrl);else if(ctrl&&isSelected)me.allowDeselect&&me.doDeselect(record,!1);else if(ctrl)me.doSelect(record,!0,!1);else if(isSelected&&!shift&&!ctrl&&1<len){if(me.allowDeselect){for(toDeselect=[],i=0;i<len;++i)(item=selected[i])!==record&&toDeselect.push(item);me.doDeselect(toDeselect)}}else isSelected||me.doSelect(record,!1)},selectWithEventSimple:function(record,e,isSelected){isSelected?this.doDeselect(record):this.doSelect(record,!0)},selectWithEventSingle:function(record,e,isSelected){var allowDeselect=this.allowDeselect;allowDeselect&&!e.ctrlKey&&(allowDeselect=this.toggleOnClick),allowDeselect&&isSelected?this.doDeselect(record):this.doSelect(record,!1)}}}),Ext.define("Ext.selection.DataViewModel",{extend:Ext.selection.Model,alias:"selection.dataviewmodel",deselectOnContainerClick:!0,bindComponent:function(view){var viewListeners,me=this;me.view!==view&&(me.view&&(me.navigationModel=null,Ext.destroy(me.viewListeners,me.navigationListeners)),(me.view=view)&&((viewListeners=me.getViewListeners()).scope=me,viewListeners.destroyable=!0,me.navigationModel=view.getNavigationModel(),me.viewListeners=view.on(viewListeners),me.navigationListeners=me.navigationModel.on({navigate:me.onNavigate,scope:me,destroyable:!0})))},getViewListeners:function(){var eventListeners={};return eventListeners[this.view.triggerCtEvent]=this.onContainerClick,eventListeners},onUpdate:function(record){var view=this.view;view&&this.isSelected(record)&&view.onItemSelect(record)},onContainerClick:function(){this.deselectOnContainerClick&&this.deselectAll()},onSelectChange:function(record,isSelected,suppressEvent,commitFn){var me=this,view=me.view,eventName=isSelected?"select":"deselect",recordIndex=me.store.indexOf(record);!1!==(suppressEvent||me.fireEvent("before"+eventName,me,record,recordIndex))&&!1!==commitFn()&&(view&&(isSelected?view.onItemSelect(record):view.onItemDeselect(record)),suppressEvent||me.fireEvent(eventName,me,record,recordIndex))},destroy:function(){this.bindComponent(),Ext.destroy(this.keyNav),this.callParent()}}),Ext.define("Ext.view.NavigationModel",{mixins:[Ext.util.Observable,Ext.mixin.Factoryable,Ext.util.StoreHolder],alias:"view.navigation.default",config:{store:null},focusCls:Ext.baseCSSPrefix+"view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(view){this.view!==view&&(this.view=view,this.bindView(view))},bindView:function(view){var listeners,me=this,dataSource=view.dataSource;me.initKeyNav(view),dataSource.isEmptyStore||me.setStore(dataSource),(listeners=me.getViewListeners()).destroyable=!0,me.viewListeners=me.viewListeners||[],me.viewListeners.push(view.on(listeners))},updateStore:function(store){this.mixins.storeholder.bindStore.apply(this,[store])},getViewListeners:function(){var me=this;return{containermousedown:me.onContainerMouseDown,itemmousedown:me.onItemMouseDown,itemclick:me.onItemClick,itemcontextmenu:me.onItemMouseDown,scope:me}},initKeyNav:function(view){var me=this;me.keyNav=new Ext.util.KeyNav({target:view,ignoreInputFields:!0,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:me.processViewEvent,up:me.onKeyUp,down:me.onKeyDown,right:me.onKeyRight,left:me.onKeyLeft,pageDown:me.onKeyPageDown,pageUp:me.onKeyPageUp,home:me.onKeyHome,end:me.onKeyEnd,space:me.onKeySpace,enter:me.onKeyEnter,A:{ctrl:!0,handler:me.onSelectAllKeyPress},scope:me})},processViewEvent:function(view,record,node,index,event){return event},addKeyBindings:function(binding){this.keyNav.addBindings(binding)},enable:function(){this.keyNav.enable(),this.disabled=!1},disable:function(){this.keyNav.disable(),this.disabled=!0},onContainerMouseDown:function(view,mousedownEvent){"mouse"===mousedownEvent.pointerType&&Ext.getScrollbarSize().width&&(view.el.getClientRegion().contains(mousedownEvent.getPoint())||mousedownEvent.preventDefault())},onItemMouseDown:function(view,record,item,index,mousedownEvent){"touch"!==mousedownEvent.pointerType&&this.setPosition(index)},onItemClick:function(view,record,item,index,clickEvent){this.record===record?this.fireNavigateEvent(clickEvent):this.setPosition(index,clickEvent)},setPosition:function(recordIndex,keyEvent,suppressEvent,preventNavigation){var newRecord,newRecordIndex,me=this,view=me.view,selModel=view.getSelectionModel(),dataSource=view.dataSource;if(null!=recordIndex&&view.all.getCount()?"number"==typeof recordIndex?(newRecordIndex=Math.max(Math.min(recordIndex,dataSource.getCount()-1),0),newRecord=dataSource.getAt(recordIndex)):recordIndex.isEntity?(newRecord=dataSource.getById(recordIndex.id),-1===(newRecordIndex=dataSource.indexOf(newRecord))&&(newRecord=dataSource.getAt(0),newRecordIndex=0)):recordIndex.tagName?(newRecord=view.getRecord(recordIndex),newRecordIndex=dataSource.indexOf(newRecord)):newRecord=newRecordIndex=null:me.record=me.recordIndex=null,newRecord===me.record)return me.recordIndex=newRecordIndex,me.focusPosition(newRecordIndex);me.item&&me.item.removeCls(me.focusCls),me.previousRecordIndex=me.recordIndex,me.previousRecord=me.record,me.previousItem=me.item,me.recordIndex=newRecordIndex,me.record=newRecord,preventNavigation=preventNavigation||me.record===me.lastFocused,newRecord?me.focusPosition(me.recordIndex):me.item=null,suppressEvent||selModel.fireEvent("focuschange",selModel,me.previousRecord,me.record),!preventNavigation&&keyEvent&&me.fireNavigateEvent(keyEvent)},focusPosition:function(recordIndex){var me=this;null!=recordIndex&&-1!==recordIndex?(recordIndex.isEntity&&(recordIndex=me.view.dataSource.indexOf(recordIndex)),me.item=me.view.all.item(recordIndex),me.item?(me.lastFocused=me.record,me.lastFocusedIndex=me.recordIndex,me.focusItem(me.item)):me.record=null):me.item=null},focusItem:function(item){item.addCls(this.focusCls),item.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){return-1===this.view.dataSource.indexOf(this.lastFocused)?null:this.lastFocused},onKeyUp:function(keyEvent){var newPosition=this.recordIndex-1;newPosition<0&&(newPosition=this.view.all.getCount()-1),this.setPosition(newPosition,keyEvent)},onKeyDown:function(keyEvent){var newPosition=this.recordIndex+1;newPosition>this.view.all.getCount()-1&&(newPosition=0),this.setPosition(newPosition,keyEvent)},onKeyRight:function(keyEvent){var newPosition=this.recordIndex+1;newPosition>this.view.all.getCount()-1&&(newPosition=0),this.setPosition(newPosition,keyEvent)},onKeyLeft:function(keyEvent){var newPosition=this.recordIndex-1;newPosition<0&&(newPosition=this.view.all.getCount()-1),this.setPosition(newPosition,keyEvent)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(keyEvent){this.setPosition(0,keyEvent)},onKeyEnd:function(keyEvent){this.setPosition(this.view.all.getCount()-1,keyEvent)},onKeySpace:function(keyEvent){this.fireNavigateEvent(keyEvent)},onKeyEnter:function(keyEvent){keyEvent.stopEvent(),keyEvent.view.fireEvent("itemclick",keyEvent.view,keyEvent.record,keyEvent.item,keyEvent.recordIndex,keyEvent)},onSelectAllKeyPress:function(keyEvent){this.fireNavigateEvent(keyEvent)},fireNavigateEvent:function(keyEvent){var me=this;me.fireEvent("navigate",{navigationModel:me,keyEvent:keyEvent,previousRecordIndex:me.previousRecordIndex,previousRecord:me.previousRecord,previousItem:me.previousItem,recordIndex:me.recordIndex,record:me.record,item:me.item})},destroy:function(){var me=this;me.setStore(null),Ext.destroy(me.viewListeners,me.keyNav),me.keyNav=me.viewListeners=me.dataSource=me.lastFocused=null,me.callParent()}}),Ext.define("Ext.view.AbstractView",{extend:Ext.Component,mixins:[Ext.util.StoreHolder],inheritableStatics:{getRecord:function(node){return this.getBoundView(node).getRecord(node)},getBoundView:function(node){return Ext.getCmp(node.getAttribute("data-boundView"))}},defaultBindProperty:"store",renderBuffer:document.createElement("div"),statics:{updateDelay:200,queueRecordChange:function(view,store,record,operation,modifiedFieldNames){var recChange,updated,len,i,fieldName,value,checkForReversion,me=this,changeQueue=me.changeQueue||(me.changeQueue={}),recId=record.internalId;if(updated=(recChange=changeQueue[recId]||(changeQueue[recId]={operation:operation,record:record,data:{},views:[]})).data,Ext.Array.include(recChange.views,view),modifiedFieldNames&&(len=modifiedFieldNames.length)){for(i=0;i<len;i++)fieldName=modifiedFieldNames[i],value=record.data[fieldName],updated.hasOwnProperty(fieldName)?record.isEqual(updated[fieldName],value)&&(delete updated[fieldName],checkForReversion=!0):updated[fieldName]=value;checkForReversion&&!Ext.Object.getKeys(updated).length&&delete changeQueue[recId]}else Ext.apply(updated,record.data);me.flushQueueTask||(me.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(me.onFlushTick,me):Ext.Function.bind(me.onFlushTick,me),interval:Ext.view.AbstractView.updateDelay,repeat:1})),me.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var dirtyViews,len,changeQueue,recChange,recId,i,view;if(Ext.isScrolling)this.flushQueueTask.start();else{for(recId in changeQueue=this.changeQueue,this.changeQueue={},changeQueue)for(len=(dirtyViews=(recChange=changeQueue[recId]).views).length,i=0;i<len;i++)(view=dirtyViews[i]).destroyed||view.handleUpdate(view.dataSource,recChange.record,recChange.operation,Ext.Object.getKeys(recChange.data));Ext.AnimationQueue.stop(this.flushChangeQueue,this)}}},config:{selection:null,store:"ext-empty-store",navigationModel:{type:"default"},selectionModel:{type:"dataviewmodel"}},publishes:["selection"],twoWayBindable:["selection"],throttledUpdate:!1,deferInitialRefresh:!1,itemCls:Ext.baseCSSPrefix+"dataview-item",loadingText:"Loading...",loadMask:!0,loadingUseMsg:!0,selectedItemCls:Ext.baseCSSPrefix+"item-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,blockRefresh:!1,preserveScrollOnRefresh:!1,preserveScrollOnReload:!1,ariaRole:"listbox",itemAriaRole:"option",last:!1,focusable:!0,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:!0,updateSuspendCounter:0,addCmpEvents:Ext.emptyFn,constructor:function(config){config&&config.selModel&&(config.selectionModel=config.selModel),this.callParent([config])},initComponent:function(){var store,me=this,itemTpl=(Ext.isDefined,me.itemTpl),memberFn={};itemTpl&&(Ext.isArray(itemTpl)?("string"!=typeof itemTpl[itemTpl.length-1]&&(memberFn=(itemTpl=itemTpl.slice(0)).pop()),itemTpl=itemTpl.join("")):Ext.isObject(itemTpl)&&(memberFn=Ext.apply(memberFn,itemTpl.initialConfig),itemTpl=itemTpl.html),me.itemSelector||(me.itemSelector="."+me.itemCls),itemTpl=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',me.itemCls,itemTpl,me.itemAriaRole),me.tpl=new Ext.XTemplate(itemTpl,memberFn)),me.callParent(),me.tpl=me.getTpl("tpl"),me.overItemCls&&(me.trackOver=!0),me.addCmpEvents(),store=me.store=Ext.data.StoreManager.lookup(me.store||"ext-empty-store"),me.dataSource||(me.dataSource=store),me.bindStore(store,!0),me.getNavigationModel().bindComponent(this),me.all||(me.all=new Ext.CompositeElementLite),me.scrollState={top:0,left:0},me.savedTabIndexAttribute="data-savedtabindex-"+me.id},getElConfig:function(){var result=this.mixins.renderable.getElConfig.call(this);return this.focusable&&(result.tabIndex=0),result},onRender:function(){var mask=this.loadMask;this.callParent(arguments),mask&&this.createMask(mask)},beforeLayout:function(){var me=this;me.callParent(arguments),me.refreshNeeded&&!me.pendingRefresh&&(me.refreshCounter?me.refresh():me.doFirstRefresh(me.dataSource))},onMaskBeforeShow:function(){var me=this,loadingHeight=me.loadingHeight;loadingHeight&&loadingHeight>me.getHeight()&&(me.hasLoadingHeight=!0,me.oldMinHeight=me.minHeight,me.minHeight=loadingHeight,me.updateLayout())},onMaskHide:function(){var me=this;!me.destroying&&me.hasLoadingHeight&&(me.minHeight=me.oldMinHeight,me.updateLayout(),delete me.hasLoadingHeight)},beforeRender:function(){this.callParent(arguments),this.getSelectionModel().beforeViewRender(this)},afterRender:function(){this.callParent(arguments),this.focusable&&(this.focusEl=this.el)},getRefItems:function(){var mask=this.loadMask,result=[];return mask&&mask.isComponent&&result.push(mask),result},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(selection){var sm;this.ignoreNextSelection||(this.ignoreNextSelection=!0,sm=this.getSelectionModel(),selection?sm.select(selection):sm.deselectAll(),this.ignoreNextSelection=!1)},updateBindSelection:function(selModel,selection){var me=this,selected=null;me.ignoreNextSelection||(me.ignoreNextSelection=!0,selection.length&&(selected=selModel.getLastSelected(),me.hasHadSelection=!0),me.hasHadSelection&&me.setSelection(selected),me.ignoreNextSelection=!1)},applySelectionModel:function(selModel,oldSelModel){var mode,ariaDom,me=this,grid=me.grid;return oldSelModel?(oldSelModel.un({scope:me,selectionchange:me.updateBindSelection,lastselectedchanged:me.updateBindSelection,select:me.ariaSelect,deselect:me.ariaDeselect}),Ext.destroy(me.selModelRelayer),selModel=Ext.Factory.selection(selModel)):selModel&&selModel.isSelectionModel?selModel.locked=me.disableSelection:(mode=me.simpleSelect?"SIMPLE":me.multiSelect?"MULTI":"SINGLE","string"==typeof selModel&&(selModel={type:selModel}),selModel=Ext.Factory.selection(Ext.apply({allowDeselect:me.allowDeselect||me.multiSelect,mode:mode,locked:me.disableSelection},selModel))),"SINGLE"!==selModel.mode&&((ariaDom=(grid||me).ariaEl.dom)?ariaDom.setAttribute("aria-multiselectable",!0):grid||((me.ariaRenderAttributes||(me.ariaRenderAttributes={}))["aria-multiselectable"]=!0)),me.selModelRelayer=me.relayEvents(selModel,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]),selModel.on({scope:me,lastselectedchanged:me.updateBindSelection,selectionchange:me.updateBindSelection,select:me.ariaSelect,deselect:me.ariaDeselect}),selModel},updateSelectionModel:function(selectionModel){this.selModel=selectionModel},applyNavigationModel:function(navigationModel){return Ext.Factory.viewNavigation(navigationModel)},onFocusEnter:function(e){var focusPosition,me=this,navigationModel=me.getNavigationModel();me.toggleChildrenTabbability(!1),!me.itemFocused&&me.all.getCount()&&(focusPosition=navigationModel.getLastFocused(),navigationModel.setPosition(focusPosition||0,e.event,null,!focusPosition),me.itemFocused=null!=navigationModel.getPosition()),me.itemFocused&&this.el.dom.setAttribute("tabIndex","-1"),me.callParent([e])},onFocusLeave:function(e){var me=this;me.itemFocused&&!me.refreshing&&(me.getNavigationModel().setPosition(null,e.event,null,!0),me.itemFocused=!1,me.el.dom.setAttribute("tabIndex",0)),me.callParent([e])},ariaSelect:function(selModel,record){var node=this.getNode(record);node&&node.setAttribute("aria-selected",!0)},ariaDeselect:function(selModel,record){var node=this.getNode(record);node&&node.removeAttribute("aria-selected")},onRemoved:function(isDestroying){this.callParent([isDestroying]),isDestroying||this.onFocusLeave({})},refresh:function(){var targetEl,records,restoreFocus,scrollPos,me=this,items=me.all,prevItemCount=items.getCount(),refreshCounter=me.refreshCounter,selModel=me.getSelectionModel(),scroller=refreshCounter&&items.getCount()&&me.preserveScrollOnRefresh&&me.getScrollable();me.rendered&&!me.destroyed&&(me.hasListeners.beforerefresh&&!1===me.fireEvent("beforerefresh",me)||(me.refreshing=!0,restoreFocus=me.saveFocusState(),targetEl=me.getTargetEl(),records=me.getViewRange(),targetEl.dom,scroller&&((scrollPos=scroller.getPosition()).x||scrollPos.y||(scrollPos=null)),refreshCounter?(me.clearViewEl(),me.refreshCounter++):me.refreshCounter=1,me.tpl.append(targetEl,me.collectData(records,items.startIndex||0)),records.length<1?(me.addEmptyText(),items.clear()):(me.collectNodes(targetEl.dom),me.updateIndexes(0)),restoreFocus(),!1!==me.refreshSelmodelOnRefresh&&selModel.refresh(),me.refreshNeeded=!1,me.refreshSize(items.getCount()!==prevItemCount),me.fireEvent("refresh",me,records),scroller&&scroller.scrollTo(scrollPos),me.viewReady||(me.viewReady=!0,me.fireEvent("viewready",me)),me.refreshing=!1,me.refreshScroll(),me.cleanupData()))},addEmptyText:function(){var me=this,store=me.getStore();me.emptyText&&!store.isLoading()&&(!me.deferEmptyText||1<me.refreshCounter||store.isLoaded())&&(me.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",me.getTargetEl().dom,me.emptyText))},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(forceLayout){var me=this,sizeModel=me.getSizeModel(),scroller=me.getScrollable();sizeModel.height.shrinkWrap||sizeModel.width.shrinkWrap||forceLayout?me.updateLayout():me.touchScroll&&!me.bufferedRenderer&&(scroller?scroller.refresh():me.on({boxready:me.refreshScroll,scope:me,single:!0}))},afterFirstLayout:function(width,height){var me=this,scroller=me.getScrollable();scroller&&scroller.on({scroll:me.onViewScroll,scrollend:me.onViewScrollEnd,scope:me,onFrame:!!Ext.global.requestAnimationFrame}),me.callParent([width,height])},clearViewEl:function(){var targetEl=this.getTargetEl(),nodeContainerIsTarget=this.getNodeContainer()===targetEl;this.clearEmptyEl(),this.all.clear(!nodeContainerIsTarget),nodeContainerIsTarget&&(targetEl.dom.innerHTML="")},clearEmptyEl:function(){var emptyEl=this.emptyEl;emptyEl&&Ext.removeNode(emptyEl),this.emptyEl=null},onViewScroll:function(scroller,x,y){this.fireEvent("scroll",this,x,y)},onViewScrollEnd:function(scroller,x,y){this.fireEvent("scrollend",this,x,y)},saveScrollState:function(){var state=this.scrollState;this.rendered&&(state.left=this.getScrollX(),state.top=this.getScrollY())},restoreScrollState:function(){var state=this.scrollState;this.rendered&&(this.setScrollX(state.left),this.setScrollY(state.top))},prepareData:function(data,index,record){var associatedData,attr,hasCopied;if(record)for(attr in associatedData=record.getAssociatedData())associatedData.hasOwnProperty(attr)&&(hasCopied||(data=Ext.Object.chain(data),hasCopied=!0),data[attr]=associatedData[attr]);return data},collectData:function(records,startIndex){for(var record,data=[],i=0,len=records.length;i<len;i++)record=records[i],data[i]=this.prepareData(record.data,startIndex+i,record);return data},cleanupData:Ext.emptyFn,bufferRender:function(records,index){var nodes,len,i,div=this.renderBuffer,result=document.createDocumentFragment();for(this.tpl.overwrite(div,this.collectData(records,index)),i=0,len=(nodes=Ext.fly(div).query(this.getItemSelector())).length;i<len;i++)result.appendChild(nodes[i]);return{fragment:result,children:nodes}},nodeContainerSelector:null,getNodeContainer:function(){var target=this.getTargetEl(),selector=this.nodeContainerSelector;return selector?target.down(selector,!0):target},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(store,record,operation,modifiedFieldNames,details){var me=this;details&&details.filtered||!me.getNode(record)||(me.throttledUpdate?me.statics().queueRecordChange(me,store,record,operation,modifiedFieldNames):me.handleUpdate.apply(me,arguments))},handleUpdate:function(store,record){var index,node,me=this,selModel=me.getSelectionModel();if(me.viewReady&&-1<(index=me.dataSource.indexOf(record))&&me.getNode(record))return node=me.bufferRender([record],index).children[0],me.all.replaceElement(index,node,!0),me.updateIndexes(index,index),selModel.onUpdate(record),me.refreshSizePending=!0,selModel.isSelected(record)&&me.onItemSelect(record),me.hasListeners.itemupdate&&me.fireEvent("itemupdate",record,index,node),node},onReplace:function(store,startIndex,oldRecords,newRecords){var result,fragment,children,oldItems,endIndex,restoreFocus,me=this,all=me.all,selModel=me.getSelectionModel(),origStart=startIndex;me.rendered&&(fragment=(result=me.bufferRender(newRecords,startIndex,!0)).fragment,children=result.children,all.item(startIndex)?all.item(startIndex).insertSibling(fragment,"before",!0):me.appendNodes(fragment),all.insert(startIndex,children),oldRecords.length&&(restoreFocus=me.saveFocusState()),endIndex=(startIndex+=newRecords.length)+oldRecords.length-1,oldItems=all.removeRange(startIndex,endIndex,!0),!1!==me.refreshSelmodelOnRefresh&&selModel.refresh(),me.updateIndexes(startIndex),me.hasListeners.itemremove&&me.fireEvent("itemremove",oldRecords,origStart,oldItems,me),me.hasListeners.itemadd&&me.fireEvent("itemadd",newRecords,origStart,children),restoreFocus(),me.refreshSize())},onAdd:function(store,records,index){var nodes,me=this,selModel=me.getSelectionModel();me.rendered&&(0===me.all.getCount()?(me.refresh(),nodes=me.all.slice()):(nodes=me.doAdd(records,index),!1!==me.refreshSelmodelOnRefresh&&selModel.refresh(),me.updateIndexes(index),me.refreshSizePending=!0),me.hasListeners.itemadd&&me.fireEvent("itemadd",records,index,nodes))},appendNodes:function(nodes){var all=this.all,count=all.getCount();this.nodeContainerSelector?this.getNodeContainer().appendChild(nodes):all.item(count-1).insertSibling(nodes,"after")},doAdd:function(records,index){var result=this.bufferRender(records,index,!0),fragment=result.fragment,children=result.children,all=this.all,count=all.getCount(),firstRowIndex=all.startIndex||0,lastRowIndex=all.endIndex||count-1;return 0===count||lastRowIndex<index?this.appendNodes(fragment):index<=firstRowIndex?all.item(firstRowIndex).insertSibling(fragment,"before",!0):all.item(index).insertSibling(children,"before",!0),all.insert(index,children),children},onRemove:function(store,records,index){var currIdx,i,record,nodes,node,restoreFocus,me=this,rows=me.all,fireItemRemove=me.hasListeners.itemremove;if(rows.getCount()){if(0===me.dataSource.getCount())fireItemRemove&&me.fireEvent("itemremove",records,index,me.getNodes(index,index+records.length-1)),me.refresh();else{for(restoreFocus=me.saveFocusState(),fireItemRemove&&(nodes=[]),i=records.length-1;0<=i;--i)record=records[i],currIdx=index+i,nodes&&(node=rows.item(currIdx),nodes[i]=node?node.dom:void 0),rows.item(currIdx)&&me.doRemove(record,currIdx);fireItemRemove&&me.fireEvent("itemremove",records,index,nodes,me),restoreFocus(),me.updateIndexes(index)}me.refreshSizePending=!0}},doRemove:function(record,index){this.all.removeElement(index,!0)},saveFocusState:function(){var me=this,store=me.dataSource||me.store,navModel=me.getNavigationModel(),lastFocusedIndex=navModel.recordIndex,lastFocusedRec=navModel.record;return me.el.contains(Ext.Element.getActiveElement())?(me.el.dom.focus(),function(){store.getCount()&&(lastFocusedIndex=Math.min(lastFocusedIndex,me.all.getCount()-1),navModel.setPosition(store.contains(lastFocusedRec)?lastFocusedRec:lastFocusedIndex,null,null,!0))}):Ext.emptyFn},refreshNode:function(record){Ext.isNumber(record)&&(record=this.store.getAt(record)),this.onUpdate(this.dataSource,record)},updateIndexes:function(startIndex,endIndex){var node,i,nodes=this.all.elements,records=this.getViewRange(),myId=this.id;for(startIndex=startIndex||0,endIndex=endIndex||(0===endIndex?0:nodes.length-1),i=startIndex;i<=endIndex;i++)(node=nodes[i]).setAttribute("data-recordIndex",i),node.setAttribute("data-recordId",records[i].internalId),node.setAttribute("data-boundView",myId)},bindStore:function(store,initial){var me=this,selModel=me.getSelectionModel(),navModel=me.getNavigationModel();selModel.bindStore(store),selModel.bindComponent(store?me:null),me.mixins.storeholder.bindStore.apply(me,arguments),navModel.setStore(store),store&&me.componentLayoutCounter&&me.doFirstRefresh(store,!initial)},doFirstRefresh:function(store,noDefer){this.deferInitialRefresh&&!noDefer?Ext.defer(this.doFirstRefresh,1,this,[store,!0]):store&&!store.isLoading()&&this.refresh()},onUnbindStore:function(store){this.setMaskBind(null),this.dataSource===store&&(this.dataSource=null)},onBindStore:function(store,oldStore){var me=this;me.store.isBufferedStore&&(me.store.preserveScrollOnReload=me.preserveScrollOnReload),oldStore&&oldStore.isBufferedStore&&delete oldStore.preserveScrollOnReload,me.setMaskBind(store),me.dataSource||(me.dataSource=store)},setMaskBind:function(store){var mask=this.loadMask;this.rendered&&mask&&store&&!mask.bindStore&&(mask=this.createMask()),mask&&mask.bindStore&&mask.bindStore(store)},getStoreListeners:function(){var me=this;return{refresh:me.onDataRefresh,replace:me.onReplace,add:me.onAdd,remove:me.onRemove,update:me.onUpdate,clear:me.onDataRefresh,beginupdate:me.onBeginUpdate,endupdate:me.onEndUpdate}},onBeginUpdate:function(){++this.updateSuspendCounter,Ext.suspendLayouts()},onEndUpdate:function(){var me=this;me.updateSuspendCounter&&--me.updateSuspendCounter,Ext.resumeLayouts(!0),me.refreshSizePending&&(me.refreshSize(!0),me.refreshSizePending=!1)},onDataRefresh:function(store){var me=this,preserveScrollOnRefresh=me.preserveScrollOnRefresh;store.loadCount>me.lastRefreshLoadCount&&(me.preserveScrollOnRefresh=me.preserveScrollOnReLoad),me.refreshView(),me.preserveScrollOnRefresh=preserveScrollOnRefresh,me.lastRefreshLoadCount=store.loadCount},refreshView:function(){var me=this;me.blockRefresh||!me.rendered||me.up("[collapsed],[isCollapsingOrExpanding],[hidden]")?me.refreshNeeded=!0:me.bufferedRenderer?me.bufferedRenderer.refreshView():me.refresh()},findItemByChild:function(node){return Ext.fly(node).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(e){return e.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){for(var nodes=[],records=this.getSelectionModel().getSelection(),ln=records.length,i=0;i<ln;i++)nodes.push(this.getNode(records[i]));return nodes},getRecords:function(nodes){for(var records=[],i=0,len=nodes.length,data=this.dataSource.data;i<len;i++)records[records.length]=data.getByKey(nodes[i].getAttribute("data-recordId"));return records},getRecord:function(node){return this.dataSource.getByInternalId(Ext.getDom(node).getAttribute("data-recordId"))},isSelected:function(node){var r=this.getRecord(node);return this.getSelectionModel().isSelected(r)},select:function(records,keepExisting,suppressEvent){this.getSelectionModel().select(records,keepExisting,suppressEvent)},deselect:function(records,suppressEvent){this.getSelectionModel().deselect(records,suppressEvent)},getNode:function(nodeInfo){var out,me=this;return me.rendered&&(nodeInfo||0===nodeInfo)&&(out=Ext.isString(nodeInfo)?document.getElementById(nodeInfo):nodeInfo.isModel?me.getNodeByRecord(nodeInfo):Ext.isNumber(nodeInfo)?me.all.elements[nodeInfo]:(nodeInfo.target&&nodeInfo.target.nodeType&&(nodeInfo=nodeInfo.target),Ext.fly(nodeInfo).findParent(me.itemSelector,me.getTargetEl()))),out||null},getNodeByRecord:function(record){var index=this.store.indexOf(record);return this.all.elements[index]||null},getNodes:function(start,end){return void 0!==end&&end++,this.all.slice(start,end)},indexOf:function(node){return(node=this.getNode(node))||0===node?node.getAttribute("data-recordIndex")?Number(node.getAttribute("data-recordIndex")):this.all.indexOf(node):-1},onDestroy:function(){var me=this,count=me.updateSuspendCounter;for(me.all.clear(),me.emptyEl=null,me.callParent(),me.bindStore(null),me.store=me.dataSource=me.storeListeners=null,me.selModelRelayer&&(me.selModelRelayer.destroy(),me.selModelRelayer=null),Ext.destroy(me.navigationModel,me.selectionModel),me.navigationModel=me.selectionModel=me.selModel=null,me.loadMask=null;count--;)Ext.resumeLayouts(!0)},onItemSelect:function(record){var node=this.getNode(record);node&&Ext.fly(node).addCls(this.selectedItemCls)},onItemDeselect:function(record){var node=this.getNode(record);node&&Ext.fly(node).removeCls(this.selectedItemCls)},getItemSelector:function(){return this.itemSelector},addItemCls:function(itemInfo,cls){var item=this.getNode(itemInfo);item&&Ext.fly(item).addCls(cls)},removeItemCls:function(itemInfo,cls){var item=this.getNode(itemInfo);item&&Ext.fly(item).removeCls(cls)},setStore:function(newStore){this.store!==newStore&&(this.isConfiguring?this.store=newStore:this.bindStore(newStore,!1))},privates:{toggleChildrenTabbability:function(enableTabbing){var focusEl=this.getTargetEl();enableTabbing?focusEl.restoreTabbableState(!0):focusEl.saveTabbableState({skipSelf:!0,includeSaved:!1})},collectNodes:function(targetEl){var all=this.all,options={role:this.itemAriaRole};all.fill(Ext.fly(targetEl).query(this.getItemSelector()),all.startIndex||0),this.focusable&&(options.tabindex="-1"),all.set(options)},createMask:function(mask){var cfg,me=this,maskStore=me.getStore();return!maskStore||maskStore.isEmptyStore||maskStore.loadsSynchronously()||(cfg={target:me,msg:me.loadingText,useMsg:me.loadingUseMsg,store:maskStore},me.loadingCls&&(cfg.msgCls=me.loadingCls),Ext.isObject(mask)&&(cfg=Ext.apply(cfg,mask)),me.loadMask=new Ext.LoadMask(cfg),me.loadMask.on({scope:me,beforeshow:me.onMaskBeforeShow,hide:me.onMaskHide})),me.loadMask},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)},getTargetEl:function(){return this.touchScroll?this.getScrollerEl():this.callParent()}}},function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection().length},getSelectedRecords:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection()},select:function(records,keepExisting,supressEvents){Ext.global.console&&Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()");var sm=this.getSelectionModel();return sm.select.apply(sm,arguments)},clearSelections:function(){return Ext.global.console&&Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()"),this.getSelectionModel().deselectAll()}})})}),Ext.define("Ext.view.View",{extend:Ext.view.AbstractView,alternateClassName:"Ext.DataView",alias:"widget.dataview",inputTagRe:/^textarea$|^input$/i,keyEventRe:/^key/,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keyup:"KeyUp",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var me=this;me.callParent(),me.mon(me.el,{scope:me,click:me.handleEvent,longpress:me.handleEvent,mousedown:me.handleEvent,mouseup:me.handleEvent,dblclick:me.handleEvent,contextmenu:me.handleEvent,keydown:me.handleEvent,keyup:me.handleEvent,keypress:me.handleEvent,mouseover:me.handleMouseOver,mouseout:me.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(e){var me=this,itemSelector=me.getTargetSelector(),item=e.getTarget(itemSelector);me.destroyed||(item?me.mouseOverItem!==item&&me.el.contains(item)&&(me.mouseOverItem=e.item=item,e.newType="mouseenter",me.handleEvent(e)):me.handleEvent(e))},handleMouseOut:function(e){var sourceView,itemSelector=this.getTargetSelector(),item=e.getTarget(itemSelector),computedRelatedTarget=e.getRelatedTarget(itemSelector);(item!==computedRelatedTarget||null===item&&null===computedRelatedTarget)&&(this.destroyed||(item&&(sourceView=this.self.getBoundView(item))?(e.item=item,e.newType="mouseleave",sourceView.handleEvent(e),sourceView.mouseOverItem=null):this.handleEvent(e)))},handleEvent:function(e){var me=this,isKeyEvent=me.keyEventRe.test(e.type);e.view=me,e.item=e.getTarget(me.itemSelector),e.item&&(e.record=me.getRecord(e.item)),!1!==me.processUIEvent(e)&&me.processSpecialEvent(e),isKeyEvent&&!Ext.fly(e.target).isInputField()&&(e.getKey()!==e.SPACE&&!e.isNavKeyPress(!0)||e.preventDefault()),e.view=null},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(e){if(Ext.getBody().isAncestor(e.target)){var index,me=this,item=e.item,self=me.self,map=self.EventMap,touchMap=self.TouchEventMap,record=e.record,type=e.type,newType=type;if(e.newType&&(newType=e.newType),item){if(newType=touchMap[newType]||newType,index=e.recordIndex=me.indexInStore?me.indexInStore(record):me.indexOf(item),!record||!1===me.processItemEvent(record,item,index,e))return!1;if(!1===me["onBeforeItem"+map[newType]](record,item,index,e)||!1===me.fireEvent("beforeitem"+newType,me,record,item,index,e)||!1===me["onItem"+map[newType]](record,item,index,e))return!1;me.fireEvent("item"+newType,me,record,item,index,e)}else{if(type=touchMap[type]||type,!1===me.processContainerEvent(e)||!1===me["onBeforeContainer"+map[type]](e)||!1===me.fireEvent("beforecontainer"+type,me,e)||!1===me["onContainer"+map[type]](e))return!1;me.fireEvent("container"+type,me,e)}return!0}},onItemMouseEnter:function(record,item,index,e){this.trackOver&&this.highlightItem(item)},onItemMouseLeave:function(record,item,index,e){this.trackOver&&this.clearHighlight()},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyUp:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyUp:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyUp:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyUp:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(item){var me=this,highlighted=me.highlightedItem,overItemCls=me.overItemCls;highlighted!==item&&(highlighted&&(Ext.fly(highlighted).removeCls(overItemCls),Ext.isIE8&&(me.repaintBorder(highlighted),me.repaintBorder(highlighted.nextSibling)),me.hasListeners.unhighlightitem&&me.fireEvent("unhighlightitem",me,highlighted)),(me.highlightedItem=item)&&(Ext.fly(item).addCls(me.overItemCls),Ext.isIE8&&me.repaintBorder(item.nextSibling),me.hasListeners.highlightitem&&me.fireEvent("highlightitem",me,item)))},highlightItem:function(item){this.setHighlightedItem(item)},clearHighlight:function(){this.setHighlightedItem(void 0)},handleUpdate:function(store,record){var node,newNode,highlighted,me=this;me.viewReady&&(node=me.getNode(record),newNode=me.callParent(arguments),(highlighted=me.highlightedItem)&&highlighted===node&&(delete me.highlightedItem,newNode&&me.highlightItem(newNode)))},refresh:function(){this.clearHighlight(),this.callParent(arguments)},focusNode:function(rec){var nodeRegion,node=Ext.fly(this.getNode(rec)),el=this.el,adjustmentY=0,adjustmentX=0,elRegion=el.getRegion();elRegion.bottom=elRegion.top+el.dom.clientHeight,elRegion.right=elRegion.left+el.dom.clientWidth,node&&((nodeRegion=node.getRegion()).top<elRegion.top?adjustmentY=nodeRegion.top-elRegion.top:nodeRegion.bottom>elRegion.bottom&&(adjustmentY=nodeRegion.bottom-elRegion.bottom),nodeRegion.left<elRegion.left?adjustmentX=nodeRegion.left-elRegion.left:nodeRegion.right>elRegion.right&&(adjustmentX=nodeRegion.right-elRegion.right),(adjustmentX||adjustmentY)&&this.scrollBy(adjustmentX,adjustmentY,!1),node.set({tabIndex:-1}),node.focus())},privates:{repaintBorder:function(rowIdx){var node=this.getNode(rowIdx);node&&(node.className=node.className)}}}),Ext.define("Ext.toolbar.Item",{extend:Ext.Component,alias:"widget.tbitem",alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn}),Ext.define("Ext.toolbar.TextItem",{extend:Ext.toolbar.Item,alias:"widget.tbtext",alternateClassName:"Ext.Toolbar.TextItem",text:"",baseCls:Ext.baseCSSPrefix+"toolbar-text",ariaRole:null,beforeRender:function(){var text=this.text;this.callParent(),text&&(this.html=text)},setText:function(text){this.update(text)}}),Ext.define("Ext.tip.Tip",{extend:Ext.panel.Panel,alias:"widget.tip",alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:!0,autoRender:!0,hidden:!0,baseCls:Ext.baseCSSPrefix+"tip",focusOnToFront:!1,maskOnDisable:!1,closeAction:"hide",alwaysFramed:!0,frameHeader:!1,initComponent:function(){var me=this;me.floating=Ext.apply({},{shadow:me.shadow,constrain:me.constrainPosition},me.self.prototype.floating),me.callParent(arguments),me.constrain=me.constrain||me.constrainPosition},showAt:function(xy){var me=this;this.callParent(arguments),me.isVisible()&&(me.setPagePosition(xy[0],xy[1]),(me.constrainPosition||me.constrain)&&me.doConstrain(),me.toFront(!0))},privates:{initDraggable:function(){var me=this;me.draggable={el:me.getDragEl(),delegate:me.header.el,constrain:me,constrainTo:me.el.dom.parentNode},Ext.Component.prototype.initDraggable.call(me)}},ghost:void 0,unghost:void 0}),Ext.define("Ext.tip.ToolTip",{extend:Ext.tip.Tip,alias:"widget.tooltip",alternateClassName:"Ext.ToolTip",autoHide:!0,showDelay:500,hideDelay:200,dismissDelay:5e3,trackMouse:!1,anchorToTarget:!0,anchorOffset:0,targetCounter:0,quickShowInterval:250,hideAction:"hide",fadeOutDuration:1e3,ariaRole:"tooltip",initComponent:function(){var me=this;me.callParent(arguments),me.lastActive=new Date,me.setTarget(me.target),me.origAnchor=me.anchor},onRender:function(ct,position){var me=this;me.callParent(arguments),me.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+me.getAnchorPosition(),me.anchorEl=me.el.createChild({role:"presentation",cls:Ext.baseCSSPrefix+"tip-anchor "+me.anchorCls})},setTarget:function(target){var tg,me=this,t=Ext.get(target);me.target&&(tg=Ext.get(me.target),Ext.supports.Touch?me.mun(tg,"tap",me.onTargetOver,me):me.mun(tg,{mouseover:me.onTargetOver,mouseout:me.onTargetOut,mousemove:me.onMouseMove,scope:me})),(me.target=t)&&(Ext.supports.Touch?me.mon(t,{tap:me.onTargetOver,scope:me}):me.mon(t,{mouseover:me.onTargetOver,mouseout:me.onTargetOut,mousemove:me.onMouseMove,scope:me})),me.anchor&&(me.anchorTarget=me.target)},onMouseMove:function(e){var t,xy,me=this;me.target&&!me.target.contains(e.target)||((t=me.delegate?e.getTarget(me.delegate):me.triggerElement=!0)?(me.targetXY=e.getXY(),t===me.triggerElement?!me.hidden&&me.trackMouse&&(xy=me.getTargetXY(),me.constrainPosition&&(xy=me.el.adjustForConstraints(xy,me.el.parent())),me.setPagePosition(xy)):(me.hide(),me.lastActive=new Date(0),me.onTargetOver(e))):!me.closable&&me.isVisible()&&!1!==me.autoHide&&me.delayHide())},getTargetXY:function(){var mouseOffset,offsets,xy,dw,dh,de,bd,scrollX,scrollY,axy,sz,constrainPosition,me=this;if(me.delegate&&(me.anchorTarget=me.triggerElement),me.anchor){if(me.targetCounter++,offsets=me.getOffsets(),xy=me.anchorToTarget&&!me.trackMouse?me.getAlignToXY(me.anchorTarget,me.getAnchorAlign()):me.targetXY,dw=Ext.Element.getViewportWidth()-5,dh=Ext.Element.getViewportHeight()-5,de=document.documentElement,bd=document.body,scrollX=(de.scrollLeft||bd.scrollLeft||0)+5,scrollY=(de.scrollTop||bd.scrollTop||0)+5,axy=[xy[0]+offsets[0],xy[1]+offsets[1]],sz=me.getSize(),constrainPosition=me.constrainPosition,me.anchorEl.removeCls(me.anchorCls),me.targetCounter<2&&constrainPosition){if(axy[0]<scrollX)return me.anchorToTarget&&(me.defaultAlign="l-r",me.mouseOffset&&(me.mouseOffset[0]*=-1)),me.anchor="left",me.getTargetXY();if(axy[0]+sz.width>dw)return me.anchorToTarget&&(me.defaultAlign="r-l",me.mouseOffset&&(me.mouseOffset[0]*=-1)),me.anchor="right",me.getTargetXY();if(axy[1]<scrollY)return me.anchorToTarget&&(me.defaultAlign="t-b",me.mouseOffset&&(me.mouseOffset[1]*=-1)),me.anchor="top",me.getTargetXY();if(axy[1]+sz.height>dh)return me.anchorToTarget&&(me.defaultAlign="b-t",me.mouseOffset&&(me.mouseOffset[1]*=-1)),me.anchor="bottom",me.getTargetXY()}return me.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+me.getAnchorPosition(),me.anchorEl.addCls(me.anchorCls),me.targetCounter=0,axy}return mouseOffset=me.getMouseOffset(),me.targetXY?[me.targetXY[0]+mouseOffset[0],me.targetXY[1]+mouseOffset[1]]:mouseOffset},calculateConstrainedPosition:function(constrainTo){var visible,result,floatParentBox,me=this;return!constrainTo&&me.isContainedFloater()?((visible=me.isVisible())||me.el.show(),result=me.getTargetXY(),visible||me.el.hide(),floatParentBox=me.floatParent.getTargetEl().getViewRegion(),result[0]-=floatParentBox.left,result[1]-=floatParentBox.top):result=me.callOverridden(arguments),result},getMouseOffset:function(){var offset=this.anchor?[0,0]:[15,18];return this.mouseOffset&&(offset[0]+=this.mouseOffset[0],offset[1]+=this.mouseOffset[1]),offset},fadeOut:function(){var me=this;me.el.fadeOut({duration:me.fadeOutDuration,callback:function(){me.hide(),me.el.setOpacity("")}})},getAnchorPosition:function(){var m,me=this;switch(me.anchor?me.tipAnchor=me.anchor.charAt(0):(m=me.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/),me.tipAnchor=m[1].charAt(0)),me.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var mouseOffset,offsets,me=this,ap=me.getAnchorPosition().charAt(0);if(me.anchorToTarget&&!me.trackMouse)switch(ap){case"t":offsets=[0,9];break;case"b":offsets=[0,-13];break;case"r":offsets=[-13,0];break;default:offsets=[9,0]}else switch(ap){case"t":offsets=[-15-me.anchorOffset,30];break;case"b":offsets=[-19-me.anchorOffset,-13-me.el.dom.offsetHeight];break;case"r":offsets=[-15-me.el.dom.offsetWidth,-13-me.anchorOffset];break;default:offsets=[25,-13-me.anchorOffset]}return mouseOffset=me.getMouseOffset(),offsets[0]+=mouseOffset[0],offsets[1]+=mouseOffset[1],offsets},onTargetOver:function(e){var t,me=this,delegate=me.delegate;me.disabled||e.within(me.target.dom,!0)||(t=!delegate||e.getTarget(delegate))&&(me.triggerElement=t,me.triggerEvent=e,me.clearTimer("hide"),me.targetXY=e.getXY(),me.delayShow())},delayShow:function(trackMouse){var me=this,xy=me.el&&(!1===trackMouse||!me.trackMouse)&&me.getTargetXY();me.hidden&&!me.showTimer?Ext.Date.getElapsed(me.lastActive)<me.quickShowInterval?me.show():me.showTimer=Ext.defer(me.showFromDelay,me.showDelay,me,[xy]):me.hidden||!1===me.autoHide||me.show(xy)},showFromDelay:function(xy){this.disabled||(this.fromDelayShow=!0,this.show(xy),delete this.fromDelayShow)},onShowVeto:function(){this.callParent(),delete this.triggerElement,this.clearTimer("show")},onTargetOut:function(e){var me=this,triggerEl=me.triggerElement,target=!0===triggerEl?me.target:triggerEl;me.disabled||!triggerEl||e.within(target,!0)||(me.showTimer&&(me.clearTimer("show"),me.triggerElement=null),!1!==me.autoHide&&me.delayHide())},delayHide:function(){var me=this;me.hidden||me.hideTimer||(me.hideTimer=Ext.defer(me[me.hideAction],me.hideDelay,me))},hide:function(){var me=this;me.clearTimer("dismiss"),me.lastActive=new Date,me.anchorEl&&me.anchorEl.hide(),me.callParent(arguments),delete me.triggerElement},show:function(xy){var me=this;this.callParent(),!1===this.hidden&&(me.anchor&&(me.anchor=me.origAnchor),me.calledFromShowAt||me.showAt(xy||me.getTargetXY()))},showAt:function(xy){var me=this;me.lastActive=new Date,me.clearTimers(),me.calledFromShowAt=!0,me.isVisible()||this.callParent(arguments),me.isVisible()&&(me.setPagePosition(xy[0],xy[1]),(me.constrainPosition||me.constrain)&&me.doConstrain(),me.toFront(!0),me.el.syncUnderlays(),me.dismissDelay&&!1!==me.autoHide&&(me.dismissTimer=Ext.defer(me.hide,me.dismissDelay,me))),delete me.calledFromShowAt},syncAnchor:function(){var anchorPos,targetPos,offset,me=this;switch(me.tipAnchor.charAt(0)){case"t":anchorPos="b",targetPos="tl",offset=[20+me.anchorOffset,1];break;case"r":anchorPos="l",targetPos="tr",offset=[-1,12+me.anchorOffset];break;case"b":anchorPos="t",targetPos="bl",offset=[20+me.anchorOffset,-1];break;default:anchorPos="r",targetPos="tl",offset=[1,12+me.anchorOffset]}me.anchorEl.alignTo(me.el,anchorPos+"-"+targetPos,offset),me.anchorEl.setStyle("z-index",parseInt(me.el.getZIndex(),10)||1).setVisibilityMode(Ext.Element.DISPLAY)},afterSetPosition:function(x,y){var me=this;me.callParent(arguments),me.anchor?(me.syncAnchor(),me.anchorEl.isVisible()||me.anchorEl.show()):me.anchorEl.hide()},_timerNames:{},clearTimer:function(name){var names=this._timerNames,propName=names[name]||(names[name]=name+"Timer"),timer=this[propName];timer&&(clearTimeout(timer),this[propName]=null)},clearTimers:function(){this.clearTimer("show"),this.clearTimer("dismiss"),this.clearTimer("hide")},onShow:function(){this.callParent(),this.mon(Ext.getDoc(),"mousedown",this.onDocMouseDown,this)},onHide:function(){this.callParent(),this.mun(Ext.getDoc(),"mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(e){var me=this;me.closable||e.within(me.el.dom)||(me.disable(),Ext.defer(me.doEnable,100,me))},doEnable:function(){this.destroyed||this.enable()},onDisable:function(){this.callParent(),this.clearTimers(),this.hide()},beforeDestroy:function(){var me=this;me.clearTimers(),Ext.destroy(me.anchorEl),delete me.anchorEl,delete me.target,delete me.anchorTarget,delete me.triggerElement,me.callParent()},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this),this.callParent()}}),Ext.define("Ext.tip.QuickTip",{extend:Ext.tip.ToolTip,alias:"widget.quicktip",alternateClassName:"Ext.QuickTip",interceptTitles:!1,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},isQuickTip:!0,shrinkWrapDock:!0,initComponent:function(){var me=this;me.target=me.target||Ext.getDoc(),me.targets=me.targets||{},me.callParent()},setTagConfig:function(cfg){this.tagConfig=Ext.apply({},cfg),delete this.tagConfig.attr},text:null,register:function(config){for(var target,j,targetLen,configs=Ext.isArray(config)?config:arguments,i=0,len=configs.length;i<len;i++)if(target=(config=configs[i]).target)if(Ext.isArray(target))for(j=0,targetLen=target.length;j<targetLen;j++)this.targets[Ext.id(target[j])]=config;else this.targets[Ext.id(target)]=config},unregister:function(el){delete this.targets[Ext.id(el)]},cancelShow:function(el){var activeTarget=this.activeTarget;el=Ext.get(el).dom,this.isVisible()?activeTarget&&activeTarget.el===el&&this.hide():activeTarget&&activeTarget.el===el&&this.clearTimer("show")},getTipCfg:function(target,event){var text,titleText=target.title,cfg=this.tagConfig,attr=cfg.attr||(cfg.attr=cfg.namespace+cfg.attribute);return this.interceptTitles&&titleText&&Ext.isString(titleText)?(target.setAttribute(attr,titleText),target.removeAttribute("title"),{text:titleText}):(target=Ext.fly(target).findParent(function(dom){return text=dom.getAttribute(attr)}))?{target:target,text:text}:void 0},onTargetOver:function(event){this.doTargetOver(event.getTarget(this.delegate),null,event)},doTargetOver:function(target,xy,event){var hasShowDelay,hideAction,delay,elTarget,cfg,ns,tipConfig,autoHide,targets,targetEl,value,key,me=this;if(!me.disabled&&("string"==typeof target&&(target=Ext.getDom(target)),me.targetXY=xy||(event?event.getXY():Ext.fly(target).getXY()),target&&1===target.nodeType&&target!==document.documentElement&&target!==document.body))if(!me.activeTarget||target!==me.activeTarget.el&&!Ext.fly(me.activeTarget.el).contains(target)){if(target){for(key in targets=me.targets)if(targets.hasOwnProperty(key)&&(value=targets[key],(targetEl=Ext.fly(value.target))&&(targetEl.dom===target||targetEl.contains(target)))){elTarget=targetEl.dom;break}if(elTarget)return me.activeTarget=me.targets[elTarget.id],me.activeTarget.el=target,me.anchor=me.activeTarget.anchor,me.anchor&&(me.anchorTarget=target),(hasShowDelay=parseInt(me.activeTarget.showDelay,10))&&(delay=me.showDelay,me.showDelay=hasShowDelay),me.delayShow(),hasShowDelay&&(me.showDelay=delay),void((hideAction=me.activeTarget.hideAction)?me.hideAction=hideAction:delete me.hideAction)}elTarget=Ext.fly(target,"_quicktip-target"),ns=(cfg=me.tagConfig).namespace,(tipConfig=me.getTipCfg(target,event))&&(tipConfig.target&&(target=tipConfig.target,elTarget=Ext.fly(target,"_quicktip-target")),autoHide=elTarget.getAttribute(ns+cfg.hide),me.activeTarget={el:target,text:tipConfig.text,width:+elTarget.getAttribute(ns+cfg.width)||null,autoHide:"user"!==autoHide&&"false"!==autoHide,title:elTarget.getAttribute(ns+cfg.title),cls:elTarget.getAttribute(ns+cfg.cls),align:elTarget.getAttribute(ns+cfg.align),showDelay:parseInt(elTarget.getAttribute(ns+cfg.showDelay)||0,10),hideAction:elTarget.getAttribute(ns+cfg.hideAction),anchorTarget:elTarget.getAttribute(ns+cfg.anchorTarget)},me.initialConfig.hasOwnProperty("anchor")||(me.anchor=elTarget.getAttribute(ns+cfg.anchor)),me.anchor&&!me.initialConfig.hasOwnProperty("anchorTarget")&&(me.anchorTarget=me.activeTarget.anchorTarget||target),(hasShowDelay=parseInt(me.activeTarget.showDelay,10))&&(delay=me.showDelay,me.showDelay=hasShowDelay),me.delayShow(),hasShowDelay&&(me.showDelay=delay))}else me.targetTextEmpty()?(me.onShowVeto(),delete me.activeTarget):(me.clearTimer("hide"),me.show())},onTargetOut:function(e){var hasHideDelay,delay,me=this,active=me.activeTarget;active&&e.within(me.activeTarget.el)&&!me.getTipCfg(e.getTarget(),e)||(me.clearTimer("show"),delete me.activeTarget,!1!==me.autoHide&&((hasHideDelay=active&&parseInt(active.hideDelay,10))&&(delay=me.hideDelay,me.hideDelay=hasHideDelay),me.delayHide(),hasHideDelay&&(me.hideDelay=delay)))},targetTextEmpty:function(){var el,target=this.activeTarget,cfg=this.tagConfig;return!(!target||!(el=target.el)||el.getAttribute(cfg.namespace+cfg.attribute)||this.targets[Ext.id(target.target)])},show:function(){var me=this;if(me.fromDelayShow&&me.targetTextEmpty())return me.onShowVeto(),void delete me.activeTarget;me.callParent(arguments)},showAt:function(xy){var dismiss,cls,me=this,target=me.activeTarget,header=me.header;target&&(me.rendered||(me.render(Ext.getBody()),me.activeTarget=target),me.suspendLayouts(),target.title?(me.setTitle(target.title),header.show()):header&&header.hide(),me.update(target.text),me.autoHide=target.autoHide,dismiss=target.dismissDelay,me.dismissDelay=Ext.isNumber(dismiss)?dismiss:me.dismissDelay,target.mouseOffset&&(xy[0]+=target.mouseOffset[0],xy[1]+=target.mouseOffset[1]),(cls=me.lastCls)&&(me.removeCls(cls),delete me.lastCls),(cls=target.cls)&&(me.addCls(cls),me.lastCls=cls),me.setWidth(target.width),me.anchor?me.constrainPosition=!1:target.align?(xy=me.getAlignToXY(target.el,target.align),me.constrainPosition=!1):me.constrainPosition=!0,me.resumeLayouts(!0)),me.callParent([xy])},showByTarget:function(targetEl){var target,size,xy,me=this;(target=me.targets[targetEl.id])&&(me.activeTarget=target,me.activeTarget.el=Ext.get(targetEl).dom,me.anchor=me.activeTarget.anchor,size=targetEl.getSize(),xy=targetEl.getXY(),me.showAt([xy[0],xy[1]+size.height]))},hide:function(){delete this.activeTarget,this.callParent()}}),Ext.define("Ext.tip.QuickTipManager",{singleton:!0,alternateClassName:"Ext.QuickTips",disabled:!1,init:function(autoRender,config){if(!this.tip){if(!Ext.isReady)return Ext.onInternalReady(function(){Ext.tip.QuickTipManager.init(autoRender,config)}),!1;var tipConfig=Ext.apply({disabled:this.disabled,id:"ext-quicktips-tip"},config),className=tipConfig.className,xtype=tipConfig.xtype;className?delete tipConfig.className:xtype&&(className="widget."+xtype,delete tipConfig.xtype),!1!==autoRender&&(tipConfig.renderTo=document.body),this.tip=Ext.create(className||"Ext.tip.QuickTip",tipConfig),Ext.quickTipsActive=!0}},destroy:function(){Ext.destroy(this.tip),this.tip=void 0},ddDisable:function(){var tip=this.tip;tip&&!this.disabled&&tip.disable()},ddEnable:function(){var tip=this.tip;tip&&!this.disabled&&tip.enable()},enable:function(){var tip=this.tip;tip&&tip.enable(),this.disabled=!1},disable:function(){var tip=this.tip;tip&&tip.disable(),this.disabled=!0},isEnabled:function(){var tip=this.tip;return void 0!==tip&&!tip.disabled},getQuickTip:function(){return this.tip},register:function(){var tip=this.tip;tip.register.apply(tip,arguments)},unregister:function(){var tip=this.tip;tip.unregister.apply(tip,arguments)},tips:function(){var tip=this.tip;tip.register.apply(tip,arguments)}}),Ext.define("Ext.toolbar.Separator",{extend:Ext.toolbar.Item,alias:"widget.tbseparator",alternateClassName:"Ext.Toolbar.Separator",baseCls:Ext.baseCSSPrefix+"toolbar-separator",ariaRole:"separator"}),Ext.define("Ext.grid.CellContext",{isCellContext:!0,constructor:function(view){this.view=view},setPosition:function(row,col){var me=this;if(1===arguments.length)if(row.length)col=row[0],row=row[1];else{if(row.isCellContext)return me.setAll(row.view,row.rowIdx,row.colIdx,row.record,row.columnHeader);row.view&&(me.view=row.view),col=row.column,row=row.row}return me.setRow(row),me.setColumn(col),me},setAll:function(view,recordIndex,columnIndex,record,columnHeader){var me=this;return me.view=view,me.rowIdx=recordIndex,me.colIdx=columnIndex,me.record=record,me.column=columnHeader,me},setRow:function(row){var me=this,dataSource=me.view.dataSource;return void 0!==row&&("number"==typeof row?(me.rowIdx=Math.max(Math.min(row,dataSource.getCount()-1),0),me.record=dataSource.getAt(row)):row.isModel?(me.record=row,me.rowIdx=dataSource.indexOf(row)):(row.tagName||row.isElement)&&(me.record=me.view.getRecord(row),me.rowIdx=dataSource.indexOf(me.record))),me},setColumn:function(col){var me=this,colMgr=me.view.getVisibleColumnManager();return void 0!==col&&("number"==typeof col?(me.colIdx=col,me.column=colMgr.getHeaderAtIndex(col)):col.isHeader&&(me.column=col,me.colIdx=colMgr.indexOf(col))),me},getCell:function(returnDom){return this.view.getCellByPosition(this,returnDom)},getRow:function(returnDom){var result=this.view.getRow(this.record);return returnDom?result:Ext.get(result)},getNode:function(returnDom){var result=this.view.getNode(this.record);return returnDom?result:Ext.get(result)},isEqual:function(other){return other&&other.isCellContext&&other.record===this.record&&other.column===this.column},clone:function(){var me=this,result=new me.self(me.view);return result.rowIdx=me.rowIdx,result.colIdx=me.colIdx,result.record=me.record,result.column=me.column,result},privates:{isFirstColumn:function(){var cell=this.getCell(!0);if(cell)return!cell.previousSibling},isLastColumn:function(){var cell=this.getCell(!0);if(cell)return!cell.nextSibling},getLastColumnIndex:function(){var row=this.getRow(!0);return row?row.lastChild.cellIndex:-1},navigate:function(direction){var me=this,columns=me.view.getVisibleColumnManager().getColumns();switch(direction){case-1:for(;me.colIdx?me.colIdx--:me.colIdx=columns.length-1,me.setColumn(me.colIdx),!me.getCell(!0););break;case 1:for(;me.colIdx>=columns.length?me.colIdx=0:me.colIdx++,me.setColumn(me.colIdx),!me.getCell(!0););}}},statics:{compare:function(c1,c2){return c1.rowIdx-c2.rowIdx||c1.colIdx-c2.colIdx}}}),Ext.define("Ext.grid.ColumnComponentLayout",{extend:Ext.layout.component.Auto,alias:"layout.columncomponent",type:"columncomponent",setWidthInDom:!0,_paddingReset:{paddingTop:"",paddingBottom:""},columnAutoCls:Ext.baseCSSPrefix+"column-header-text-container-auto",beginLayout:function(ownerContext){this.callParent(arguments),ownerContext.titleContext=ownerContext.getEl("titleEl")},beginLayoutCycle:function(ownerContext){var owner=this.owner,shrinkWrap=ownerContext.widthModel.shrinkWrap;this.callParent(arguments),shrinkWrap&&owner.el.setWidth(""),owner.textContainerEl[shrinkWrap&&!owner.isGroupHeader?"addCls":"removeCls"](this.columnAutoCls),owner.titleEl.setStyle(this._paddingReset)},publishInnerHeight:function(ownerContext,outerHeight){var innerHeight,owner=this.owner;if(owner.getRootHeaderCt().hiddenHeaders)ownerContext.setProp("innerHeight",0);else if(!ownerContext.hasRawContent){if(owner.headerWrap&&!ownerContext.hasDomProp("width"))return void(this.done=!1);innerHeight=outerHeight-ownerContext.getBorderInfo().height,ownerContext.setProp("innerHeight",innerHeight-owner.titleEl.getHeight(),!1)}},measureContentHeight:function(ownerContext){return ownerContext.el.dom.offsetHeight},publishInnerWidth:function(ownerContext,outerWidth){ownerContext.hasRawContent||ownerContext.setProp("innerWidth",outerWidth-ownerContext.getBorderInfo().width,!1)},calculateOwnerHeightFromContentHeight:function(ownerContext,contentHeight){var result=this.callParent(arguments),owner=this.owner;return ownerContext.hasRawContent?result:!owner.headerWrap||ownerContext.hasDomProp("width")?contentHeight+owner.titleEl.getHeight()+ownerContext.getBorderInfo().height:null},calculateOwnerWidthFromContentWidth:function(ownerContext,contentWidth){var owner=this.owner,padWidth=ownerContext.getPaddingInfo().width,triggerOffset=this.getTriggerOffset(owner,ownerContext);return(owner.isGroupHeader?contentWidth:Math.max(contentWidth,owner.textEl.getWidth()+ownerContext.titleContext.getPaddingInfo().width))+padWidth+triggerOffset},getTriggerOffset:function(owner,ownerContext){var width=0;return ownerContext.widthModel.shrinkWrap&&!owner.menuDisabled&&0===owner.query(">:not([hidden])").length&&(width=owner.getTriggerElWidth()),width}}),Ext.define("Ext.layout.container.Fit",{extend:Ext.layout.container.Container,alternateClassName:"Ext.layout.FitLayout",alias:"layout.fit",itemCls:Ext.baseCSSPrefix+"fit-item",type:"fit",manageMargins:!0,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(item,ownerSizeModel){var sizeModel=ownerSizeModel||this.owner.getSizeModel(),mode=(sizeModel.width.shrinkWrap?0:1)|(sizeModel.height.shrinkWrap?0:2);return this.sizePolicies[mode]},beginLayoutCycle:function(ownerContext,firstCycle){var c,childItems,i,item,length,margins,minHeight,minWidth,style,me=this,resetHeight=me.lastHeightModel&&me.lastHeightModel.calculated,resetWidth=me.lastWidthModel&&me.lastWidthModel.calculated,resetSizes=resetWidth||resetHeight,maxChildMinHeight=0,maxChildMinWidth=0;for(me.callParent(arguments),resetSizes&&"TD"!==ownerContext.targetContext.el.dom.tagName.toUpperCase()&&(resetSizes=resetWidth=resetHeight=!1),length=(childItems=ownerContext.childItems).length,i=0;i<length;++i)item=childItems[i],firstCycle&&(minHeight=(c=item.target).minHeight,((minWidth=c.minWidth)||minHeight)&&(maxChildMinHeight<(minHeight+=(margins=item.marginInfo||item.getMarginInfo()).height)&&(maxChildMinHeight=minHeight),maxChildMinWidth<(minWidth+=margins.height)&&(maxChildMinWidth=minWidth))),resetSizes&&(style=item.el.dom.style,resetHeight&&(style.height=""),resetWidth&&(style.width=""));firstCycle&&(ownerContext.maxChildMinHeight=maxChildMinHeight,ownerContext.maxChildMinWidth=maxChildMinWidth),c=ownerContext.target,ownerContext.overflowX=!ownerContext.widthModel.shrinkWrap&&ownerContext.maxChildMinWidth&&c.scrollFlags.x||void 0,ownerContext.overflowY=!ownerContext.heightModel.shrinkWrap&&ownerContext.maxChildMinHeight&&c.scrollFlags.y||void 0},calculate:function(ownerContext){var scrollbars,scrollbarSize,padding,i,contentWidth,contentHeight,me=this,childItems=ownerContext.childItems,length=childItems.length,containerSize=me.getContainerSize(ownerContext),info={length:length,ownerContext:ownerContext,targetSize:containerSize},shrinkWrapWidth=ownerContext.widthModel.shrinkWrap,shrinkWrapHeight=ownerContext.heightModel.shrinkWrap,overflowX=ownerContext.overflowX,overflowY=ownerContext.overflowY;if(ownerContext.state.info=info,(overflowX||overflowY)&&(scrollbars=me.getScrollbarsNeeded(overflowX&&containerSize.width,overflowY&&containerSize.height,ownerContext.maxChildMinWidth,ownerContext.maxChildMinHeight))&&(scrollbarSize=Ext.getScrollbarSize(),1&scrollbars&&(containerSize.height-=scrollbarSize.height),2&scrollbars&&(containerSize.width-=scrollbarSize.width)),0<length)for(i=0;i<length;++i)info.index=i,me.fitItem(childItems[i],info);else info.contentWidth=info.contentHeight=0;(shrinkWrapHeight||shrinkWrapWidth)&&(padding=ownerContext.targetContext.getPaddingInfo(),shrinkWrapWidth&&(overflowY&&!containerSize.gotHeight?me.done=!1:(contentWidth=info.contentWidth+padding.width,2&scrollbars&&(contentWidth+=scrollbarSize.width),ownerContext.setContentWidth(contentWidth)||(me.done=!1))),shrinkWrapHeight&&(overflowX&&!containerSize.gotWidth?me.done=!1:(contentHeight=info.contentHeight+padding.height,1&scrollbars&&(contentHeight+=scrollbarSize.height),ownerContext.setContentHeight(contentHeight)||(me.done=!1))))},fitItem:function(itemContext,info){itemContext.invalid?this.done=!1:(info.margins=itemContext.getMarginInfo(),info.needed=info.got=0,this.fitItemWidth(itemContext,info),this.fitItemHeight(itemContext,info),info.got!==info.needed&&(this.done=!1))},fitItemWidth:function(itemContext,info){var contentWidth,width;if(info.ownerContext.widthModel.shrinkWrap)width=itemContext.getProp("width")+info.margins.width,contentWidth=info.contentWidth,info.contentWidth=void 0===contentWidth?width:Math.max(contentWidth,width);else if(itemContext.widthModel.calculated){if(++info.needed,!info.targetSize.gotWidth)return;++info.got,this.setItemWidth(itemContext,info)}this.positionItemX(itemContext,info)},fitItemHeight:function(itemContext,info){var contentHeight,height;if(info.ownerContext.heightModel.shrinkWrap)height=itemContext.getProp("height")+info.margins.height,contentHeight=info.contentHeight,info.contentHeight=void 0===contentHeight?height:Math.max(contentHeight,height);else if(itemContext.heightModel.calculated){if(++info.needed,!info.targetSize.gotHeight)return;++info.got,this.setItemHeight(itemContext,info)}this.positionItemY(itemContext,info)},positionItemX:function(itemContext,info){var margins=info.margins;(info.index||margins.left)&&itemContext.setProp("x",margins.left),margins.width&&info.ownerContext.widthModel.shrinkWrap&&itemContext.setProp("margin-right",margins.width)},positionItemY:function(itemContext,info){var margins=info.margins;(info.index||margins.top)&&itemContext.setProp("y",margins.top),margins.height&&info.ownerContext.heightModel.shrinkWrap&&itemContext.setProp("margin-bottom",margins.height)},setItemHeight:function(itemContext,info){itemContext.setHeight(info.targetSize.height-info.margins.height)},setItemWidth:function(itemContext,info){itemContext.setWidth(info.targetSize.width-info.margins.width)}}),Ext.define("Ext.panel.Table",{extend:Ext.panel.Panel,alias:"widget.tablepanel",extraBaseCls:Ext.baseCSSPrefix+"grid",extraBodyCls:Ext.baseCSSPrefix+"grid-body",actionableModeCls:Ext.baseCSSPrefix+"grid-actionable",noHeaderBordersCls:Ext.baseCSSPrefix+"no-header-borders",defaultBindProperty:"store",layout:"fit",ariaRole:"grid",config:{selection:null,headerBorders:!0},publishes:["selection"],twoWayBindable:["selection"],autoLoad:!1,variableRowHeight:!1,numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,hasView:!1,viewType:null,deferRowRender:!1,sortableColumns:!0,multiColumnSort:!1,enableLocking:!1,scrollerOwner:!0,enableColumnMove:!0,sealedColumns:!1,enableColumnResize:!0,rowLines:!0,bufferedRenderer:!0,ownerGrid:null,colLinesCls:Ext.baseCSSPrefix+"grid-with-col-lines",rowLinesCls:Ext.baseCSSPrefix+"grid-with-row-lines",noRowLinesCls:Ext.baseCSSPrefix+"grid-no-row-lines",hiddenHeaderCtCls:Ext.baseCSSPrefix+"grid-header-ct-hidden",hiddenHeaderCls:Ext.baseCSSPrefix+"grid-header-hidden",resizeMarkerCls:Ext.baseCSSPrefix+"grid-resize-marker",emptyCls:Ext.baseCSSPrefix+"grid-empty",focusable:!0,constructor:function(config){var store,me=this,topGrid=config&&config.ownerGrid;me.ownerGrid=topGrid||me,me.actionables=topGrid?topGrid.actionables:[],me.callParent([config]),(store=me.store).trackStateChanges=!0,me.autoLoad&&(store.isEmptyStore||store.load())},registerActionable:function(actionable){Ext.Array.include(this.actionables,actionable)},initComponent:function(){var store,view,i,len,bufferedRenderer,columns,viewScroller,headerCt,me=this,headerCtCfg=me.columns||me.colModel||[];if(store=me.store=Ext.data.StoreManager.lookup(me.store||"ext-empty-store"),me.enableLocking=me.enableLocking||me.hasLockedColumns(headerCtCfg),me.plugins&&(me.plugins=me.constructPlugins()),me.columnLines&&me.addBodyCls(me.colLinesCls),me.addBodyCls(me.rowLines?me.rowLinesCls:me.noRowLinesCls),me.addBodyCls(me.extraBodyCls),me.enableLocking?(me.self.mixin("lockable",Ext.grid.locking.Lockable),me.injectLockable(),headerCt=me.headerCt):headerCtCfg.isRootHeader?(me.hideHeaders?(headerCtCfg.setHeight(0),headerCtCfg.hiddenHeaders=!0):headerCtCfg.setScrollable({x:!1,y:!1}),me.headerCt=headerCt=headerCtCfg,headerCt.grid=me,headerCt.forceFit=!!me.forceFit,(headerCt.$initParent=me).columnManager=headerCtCfg.columnManager,me.visibleColumnManager=headerCtCfg.visibleColumnManager):(Ext.isArray(headerCtCfg)&&(headerCtCfg={items:headerCtCfg}),Ext.apply(headerCtCfg,{grid:me,$initParent:me,forceFit:me.forceFit,sortable:me.sortableColumns,enableColumnMove:me.enableColumnMove,enableColumnResize:me.enableColumnResize,columnLines:me.columnLines,sealed:me.sealedColumns,scrollable:me.hideHeaders?void 0:{x:!1,y:!1}}),me.hideHeaders&&(headerCtCfg.height=0,headerCtCfg.hiddenHeaders=!0),Ext.isDefined(me.enableColumnHide)&&(headerCtCfg.enableColumnHide=me.enableColumnHide),me.headerCt=headerCt=new Ext.grid.header.Container(headerCtCfg)),me.columns=columns=headerCt.getGridColumns(),me.scrollTask=new Ext.util.DelayedTask(me.syncHorizontalScroll,me),me.cls=(me.cls||"")+(" "+me.extraBaseCls),delete me.autoScroll,(bufferedRenderer=me.plugins&&Ext.Array.findBy(me.plugins,function(p){return p.isBufferedRenderer}))&&(me.bufferedRenderer=bufferedRenderer),!me.hasView){if(store.isBufferedStore&&!store.getRemoteSort())for(i=0,len=columns.length;i<len;i++)columns[i].sortable=!1;me.hideHeaders&&(me.headerCt.addCls(me.hiddenHeaderCtCls),me.addCls(me.hiddenHeaderCls)),me.relayHeaderCtEvents(headerCt),me.features=me.features||[],Ext.isArray(me.features)||(me.features=[me.features]),me.dockedItems=[].concat(me.dockedItems||[]),me.dockedItems.unshift(headerCt),me.viewConfig=me.viewConfig||{},view=me.getView(),me.items=[view],me.hasView=!0,me.hideHeaders||(viewScroller=view.getScrollable())&&headerCt.getScrollable().addPartner(viewScroller,"x"),me.bindStore(store,!0),me.mon(view,{viewready:me.onViewReady,refresh:me.onRestoreHorzScroll,scope:me})}me.selModel=me.view.getSelectionModel(),me.selModel.isRowModel&&me.selModel.on({scope:me,lastselectedchanged:me.updateBindSelection,selectionchange:me.updateBindSelection}),me.relayEvents(me.view,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown","rowclick","rowdblclick","rowcontextmenu","rowmousedown","rowmouseup","rowkeydown","beforeitemkeydown","itemkeydown","beforeitemkeyup","itemkeyup","beforeitemkeypress","itemkeypress","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","beforecontainerkeyup","beforecontainerkeypress","containermouseup","containermousedown","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","containerkeyup","containerkeypress","selectionchange","beforeselect","select","beforedeselect","deselect"]),me.callParent(),me.enableLocking?me.afterInjectLockable():delete headerCt.$initParent,me.addStateEvents(["columnresize","columnmove","columnhide","columnshow","sortchange","filterchange","groupchange"])},beforeRender:function(){var ariaAttr,me=this,bufferedRenderer=me.bufferedRenderer;me.lockable?me.getProtoBody().addCls(me.lockingBodyCls):(bufferedRenderer&&me.getSizeModel().height.auto&&(me.bufferedRenderer=bufferedRenderer=!1),bufferedRenderer&&!bufferedRenderer.isBufferedRenderer&&(bufferedRenderer={xclass:"Ext.grid.plugin.BufferedRenderer"},Ext.copy(bufferedRenderer,me,"variableRowHeight,numFromEdge,trailingBufferZone,leadingBufferZone,scrollToLoadBuffer"),me.bufferedRenderer=me.addPlugin(bufferedRenderer)),(ariaAttr=me.ariaRenderAttributes||(me.ariaRenderAttributes={}))["aria-readonly"]=!me.isEditable,ariaAttr["aria-multiselectable"]="SINGLE"!==me.selModel.selectionMode),me.callParent(arguments)},onRender:function(){var gridPanelBorderWidth,totalColumnWidth,me=this;me.isLocked&&me.getSizeModel().width.shrinkWrap&&(me.shrinkWrapColumns=!0,totalColumnWidth=me.headerCt.getTableWidth(),gridPanelBorderWidth=me.gridPanelBorderWidth||(me.gridPanelBorderWidth=me.el.getBorderWidth("lr")),me.width=totalColumnWidth+gridPanelBorderWidth),me.callParent()},getHeaderContainer:function(){return this.getView().getHeaderCt()},getColumns:function(){return this.getColumnManager().getColumns()},getVisibleColumns:function(){return this.getVisibleColumnManager().getColumns()},focus:function(){this.getView().focus()},disableColumnHeaders:function(){this.headerCt.disable()},enableColumnHeaders:function(){this.headerCt.enable()},hasLockedColumns:function(columns){var i,len,column;for(columns.isRootHeader?columns=columns.items.items:Ext.isObject(columns)&&(columns=columns.items),i=0,len=columns.length;i<len;i++)if(!(column=columns[i]).processed&&column.locked)return!0},relayHeaderCtEvents:function(headerCt){this.relayEvents(headerCt,["columnresize","columnmove","columnhide","columnshow","columnschanged","sortchange","headerclick","headercontextmenu","headertriggerclick"])},getState:function(){var state=this.callParent(),storeState=this.store.getState();return state=this.addPropertyToState(state,"columns",this.headerCt.getColumnsState()),storeState&&(state.storeState=storeState),state},applyState:function(state){var sorter=state.sort,storeState=state.storeState,store=this.store,columns=state.columns;delete state.columns,this.callParent(arguments),columns&&this.headerCt.applyColumnsState(columns,storeState),sorter?store.getRemoteSort()?store.sort({property:sorter.property,direction:sorter.direction,root:sorter.root},null,!1):store.sort(sorter.property,sorter.direction):storeState&&store.applyState(storeState)},getStore:function(){return this.store},getView:function(){var scroll,scrollable,viewConfig,me=this;return me.view||(scroll=(viewConfig=me.viewConfig).scroll||me.scroll,null==(scrollable=me.scrollable)&&null==viewConfig.scrollable&&null!==scroll&&(!0===scroll||"both"===scroll?scrollable=!0:!1===scroll||"none"===scroll?scrollable=!1:"vertical"===scroll?scrollable={x:!1,y:!0}:"horizontal"===scroll&&(scrollable={x:!0,y:!1})),viewConfig=Ext.apply({grid:me,ownerGrid:me.ownerGrid,deferInitialRefresh:me.deferRowRender,variableRowHeight:me.variableRowHeight,preserveScrollOnRefresh:!0,trackOver:!1!==me.trackMouseOver,throttledUpdate:!0===me.throttledUpdate,xtype:me.viewType,store:me.store,headerCt:me.headerCt,columnLines:me.columnLines,rowLines:me.rowLines,navigationModel:"grid",features:me.features,panel:me,emptyText:me.emptyText||""},me.viewConfig),null!=scrollable&&(viewConfig.scrollable=scrollable,me.scrollable=null),Ext.create(viewConfig),me.view.emptyText&&(me.view.emptyText='<div class="'+me.emptyCls+'">'+me.view.emptyText+"</div>"),me.view.getComponentLayout().headerCt=me.headerCt,me.mon(me.view,{uievent:me.processEvent,scope:me}),me.headerCt.view=me.view,me.hasListeners.viewcreated&&me.fireEvent("viewcreated",me,me.view)),me.view},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){return this.ownerGrid.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,applyScrollable:function(scrollable){return this.view&&this.view.setScrollable(scrollable),scrollable},getScrollable:function(){return null},processEvent:function(type,view,cell,recordIndex,cellIndex,e,record,row){var header=e.position.column;if(header)return header.processEvent.apply(header,arguments)},ensureVisible:function(record,options){this.doEnsureVisible(record,options)},scrollByDeltaY:function(yDelta,animate){this.getView().scrollBy(0,yDelta,animate)},scrollByDeltaX:function(xDelta,animate){this.getView().scrollBy(xDelta,0,animate)},afterCollapse:function(){this.saveScrollPos(),this.callParent(arguments)},afterExpand:function(){this.callParent(arguments),this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:function(){var size,scroller=this.view.getScrollable();scroller&&scroller.isTouchScroller&&(size=scroller.getSize())&&scroller.setSize({x:this.headerCt.getTableWidth(),y:size.y})},onHeaderMove:function(headerCt,header,colsToMove,fromIdx,toIdx){!1===this.optimizedColumnMove?this.view.refreshView():this.view.moveColumn(fromIdx,toIdx,colsToMove),this.delayScroll()},onHeaderHide:function(headerCt,header){var view=this.view;!headerCt.childHideCount&&view.refreshCounter&&view.refreshView()},onHeaderShow:function(headerCt,header){var view=this.view;view.refreshCounter&&view.refreshView()},onHeadersChanged:function(headerCt,header){this.rendered&&!this.reconfiguring&&(this.view.refreshView(),this.delayScroll())},delayScroll:function(){var target=this.view;target&&this.scrollTask.delay(10,null,null,[target])},onViewReady:function(){this.fireEvent("viewready",this)},onRestoreHorzScroll:function(){this.scrollXPos&&this.syncHorizontalScroll(this,!0)},getScrollerOwner:function(){var rootCmp=this;return this.scrollerOwner||(rootCmp=this.up("[scrollerOwner]")),rootCmp},getLhsMarker:function(){return this.lhsMarker||(this.lhsMarker=Ext.DomHelper.append(this.el,{role:"presentation",cls:this.resizeMarkerCls},!0))},getRhsMarker:function(){return this.rhsMarker||(this.rhsMarker=Ext.DomHelper.append(this.el,{role:"presentation",cls:this.resizeMarkerCls},!0))},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(selection){var sm;this.ignoreNextSelection||(this.ignoreNextSelection=!0,sm=this.getSelectionModel(),selection?sm.select(selection):sm.deselectAll(),this.ignoreNextSelection=!1)},updateBindSelection:function(selModel,selection){var me=this,selected=null;me.ignoreNextSelection||(me.ignoreNextSelection=!0,selection.length&&(selected=selModel.getLastSelected(),me.hasHadSelection=!0),me.hasHadSelection&&me.setSelection(selected),me.ignoreNextSelection=!1)},updateHeaderBorders:function(headerBorders){this[headerBorders?"removeCls":"addCls"](this.noHeaderBordersCls)},getNavigationModel:function(){return this.getView().getNavigationModel()},getSelectionModel:function(){return this.getView().getSelectionModel()},getScrollTarget:function(){var items=this.getScrollerOwner().query("tableview");return items[items.length-1]},syncHorizontalScroll:function(target,setBody){var me=this,x=me.view.getScrollX();setBody=!0===setBody,me.rendered&&(setBody||x!==me.scrollXPos)&&(setBody&&me.getScrollTarget().setScrollX(x),me.headerCt.setScrollX(x),me.scrollXPos=x)},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(store,initial){var me=this,view=me.getView();store?(me.store=store,view.store!==store&&view.bindStore(store,!1),me.mon(store,{load:me.onStoreLoad,scope:me}),me.storeRelayers=me.relayEvents(store,["filterchange","groupchange"])):me.unbindStore()},unbindStore:function(){var view,me=this,store=me.store;store&&(store.trackStateChanges=!1,me.store=null,me.mun(store,{load:me.onStoreLoad,scope:me}),Ext.destroy(me.storeRelayers),(view=me.view).store&&view.bindStore(null))},setColumns:function(columns){(columns.length||this.getColumnManager().getColumns().length)&&this.reconfigure(void 0,columns)},setStore:function(store){this.reconfigure(store),!this.autoLoad||store.isEmptyStore||store.loading||store.isLoaded()||store.load()},reconfigure:function(store,columns){var block,refreshCounter,me=this,oldStore=me.store,headerCt=me.headerCt,lockable=me.lockable,oldColumns=headerCt?headerCt.items.getRange():me.columns,view=me.getView();1===arguments.length&&Ext.isArray(store)&&(columns=store,store=null),columns=columns&&Ext.Array.slice(columns),me.reconfiguring=!0,store=store&&Ext.StoreManager.lookup(store),me.fireEvent("beforereconfigure",me,store,columns,oldStore,oldColumns),Ext.suspendLayouts(),lockable?me.reconfigureLockable(store,columns):(block=view.blockRefresh,view.blockRefresh=!0,store&&store!==oldStore&&(me.unbindStore(),me.bindStore(store)),columns&&(delete me.scrollXPos,headerCt.removeAll(),headerCt.add(columns)),view.blockRefresh=block,refreshCounter=view.refreshCounter),Ext.resumeLayouts(!0),lockable?me.afterReconfigureLockable():view.refreshCounter===refreshCounter&&view.refreshView(),me.fireEvent("reconfigure",me,store,columns,oldStore,oldColumns),delete me.reconfiguring},beforeDestroy:function(){var task=this.scrollTask;task&&(task.cancel(),this.scrollTask=null),Ext.destroy(this.focusEnterLeaveListeners),this.callParent()},onDestroy:function(){var me=this;me.lockable&&me.destroyLockable(),me.unbindStore(),me.callParent(),me.columns=me.storeRelayers=me.columnManager=me.visibleColumnManager=null},destroy:function(){var me=this;me.callParent(),me.destroyed&&(me.view=me.selModel=me.headerCt=null)},privates:{initFocusableElement:function(){},doEnsureVisible:function(record,options){if(this.lockable)return this.ensureLockedVisible(record,options);"number"==typeof record||record.isEntity||(record=this.store.getById(record));var callback,scope,animate,highlight,select,doFocus,scrollable,column,cell,me=this,view=me.getView(),domNode=view.getNode(record);options&&(callback=options.callback,scope=options.scope,animate=options.animate,highlight=options.highlight,select=options.select,doFocus=options.focus,column=options.column),me.deferredEnsureVisible&&me.deferredEnsureVisible.destroy(),view.componentLayoutCounter?("number"==typeof column&&(column=me.ownerGrid.getVisibleColumnManager().getColumns()[column]),domNode?(scrollable=view.getScrollable(),column&&(cell=Ext.fly(domNode).selectNode(column.getCellSelector())),scrollable&&scrollable.scrollIntoView(cell||domNode,!!column,animate,highlight),record.isEntity||(record=view.getRecord(domNode)),select&&view.getSelectionModel().select(record),doFocus&&view.getNavigationModel().setPosition(record,0),Ext.callback(callback,scope||me,[!0,record,domNode])):view.bufferedRenderer?view.bufferedRenderer.scrollTo(record,{animate:animate,highlight:highlight,select:select,focus:doFocus,column:column,callback:function(recordIdx,record,domNode){Ext.callback(callback,scope||me,[!0,record,domNode])}}):Ext.callback(callback,scope||me,[!1,null])):me.deferredEnsureVisible=view.on({resize:me.doEnsureVisible,args:Ext.Array.slice(arguments),scope:me,single:!0,destroyable:!0})},getFocusEl:function(){return this.getView().getFocusEl()},setActionableMode:function(enabled,position){var me=this.ownerGrid;if(!me.destroying&&!1!==me.view.setActionableMode(enabled,position))return me.fireEvent("actionablemodechange",enabled),me[enabled?"addCls":"removeCls"](me.actionableModeCls),!0}}}),Ext.define("Ext.grid.ColumnLayout",{extend:Ext.layout.container.HBox,alias:"layout.gridcolumn",type:"gridcolumn",firstHeaderCls:Ext.baseCSSPrefix+"column-header-first",lastHeaderCls:Ext.baseCSSPrefix+"column-header-last",initLayout:function(){this.callParent(),void 0===this.scrollbarWidth&&(this.self.prototype.scrollbarWidth=Ext.getScrollbarSize().width)},beginLayout:function(ownerContext){var i,item,me=this,owner=me.owner,firstCls=me.firstHeaderCls,lastCls=me.lastHeaderCls,bothCls=[firstCls,lastCls],items=me.getVisibleItems(),len=items.length;for(me.callParent([ownerContext]),i=0;i<len;i++)item=items[i],1===len?item.addCls(bothCls):0===i?(item.addCls(firstCls),item.removeCls(lastCls)):i===len-1?(item.removeCls(firstCls),item.addCls(lastCls)):item.removeCls(bothCls);me.scrollbarWidth=0,owner.isRootHeader&&me.determineScrollbarWidth(ownerContext),me.scrollbarWidth||(ownerContext.manageScrollbar=!1)},moveItemBefore:function(item,before){var prevOwner=item.ownerCt;return item!==before&&prevOwner&&prevOwner.remove(item,!1),this.callParent([item,before])},determineScrollbarWidth:function(ownerContext){var owner=this.owner,grid=owner.grid,vetoReserveScrollbar=!1===owner.reserveScrollbar,reserveScrollbar=grid.reserveScrollbar&&!vetoReserveScrollbar,manageScrollbar=!reserveScrollbar&&!vetoReserveScrollbar&&grid.view.scrollFlags.y;ownerContext.manageScrollbar=manageScrollbar,grid.ownerGrid.collapsed||!reserveScrollbar&&!manageScrollbar||delete this.scrollbarWidth},calculate:function(ownerContext){var lockingPartnerContext,columnsChanged,columns,len,i,column,viewOverflowY,me=this,grid=me.owner.grid,viewContext=ownerContext.viewContext,state=ownerContext.state,context=ownerContext.context;if(me.callParent([ownerContext]),grid&&state.parallelDone){if(lockingPartnerContext=viewContext.lockingPartnerContext,grid.ownerGrid.forceFit&&!state.reflexed&&me.convertWidthsToFlexes(ownerContext))return me.cacheFlexes(ownerContext),me.done=!1,void ownerContext.invalidate({state:{reflexed:!0,scrollbarAdjustment:me.getScrollbarAdjustment(ownerContext)}});if(void 0===(columnsChanged=state.columnsChanged)){for(columnsChanged=!1,i=0,len=(columns=ownerContext.target.getVisibleGridColumns()).length;i<len;i++)(column=context.getCmp(columns[i])).lastBox&&column.props.width===column.lastBox.width||((columnsChanged=columnsChanged||[])[i]=column);state.columnsChanged=columnsChanged,ownerContext.setProp("columnsChanged",columnsChanged)}if(ownerContext.manageScrollbar&&me.getScrollbarAdjustment(ownerContext)){if(void 0===(viewOverflowY=viewContext.getProp("viewOverflowY")))return void(me.done=!1);viewOverflowY||(lockingPartnerContext&&(lockingPartnerContext.invalidate(),lockingPartnerContext.headerContext.invalidate()),viewContext.invalidate(),ownerContext.invalidate({state:{scrollbarAdjustment:0}}))}}},finishedLayout:function(ownerContext){this.callParent([ownerContext]),"rowgroup"===this.owner.ariaRole&&this.innerCt.dom.setAttribute("role","row"),ownerContext.props.columnsChanged=null},convertWidthsToFlexes:function(ownerContext){var childItems,len,i,childContext,item,totalWidth=0,calculated=this.sizeModels.calculated;for(len=(childItems=ownerContext.childItems).length,i=0;i<len;i++)item=(childContext=childItems[i]).target,totalWidth+=childContext.props.width,item.fixed||!1===item.resizable||(item.flex=ownerContext.childItems[i].flex=childContext.props.width,item.width=null,childContext.widthModel=calculated);return totalWidth!==ownerContext.props.width},getScrollbarAdjustment:function(ownerContext){var state=ownerContext.state,grid=this.owner.grid,scrollbarAdjustment=state.scrollbarAdjustment;return void 0===scrollbarAdjustment&&(scrollbarAdjustment=0,(grid.reserveScrollbar||ownerContext.manageScrollbar&&!grid.ownerGrid.layout.ownerContext.heightModel.shrinkWrap)&&(scrollbarAdjustment=this.scrollbarWidth),state.scrollbarAdjustment=scrollbarAdjustment),scrollbarAdjustment},getContainerSize:function(ownerContext){var got,needed,padding,gotWidth,gotHeight,width,height,result;return this.owner.isRootHeader?((result=this.callParent([ownerContext])).gotWidth&&(result.width-=this.getScrollbarAdjustment(ownerContext)),result):(padding=ownerContext.paddingContext.getPaddingInfo(),got=needed=0,ownerContext.widthModel.shrinkWrap||(++needed,(gotWidth="number"==typeof(width=ownerContext.getProp("innerWidth")))&&(++got,(width-=padding.width)<0&&(width=0))),ownerContext.heightModel.shrinkWrap||(++needed,(gotHeight="number"==typeof(height=ownerContext.getProp("innerHeight")))&&(++got,(height-=padding.height)<0&&(height=0))),{width:width,height:height,needed:needed,got:got,gotAll:got===needed,gotWidth:gotWidth,gotHeight:gotHeight})},publishInnerCtSize:function(ownerContext){var owner=this.owner,adjustment=0;return null!=ownerContext.peek("contentWidth")&&owner.isRootHeader&&(adjustment=-ownerContext.state.scrollbarAdjustment),this.callParent([ownerContext,adjustment])}}),Ext.define("Ext.grid.ColumnManager",{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(visibleOnly,headerCt,secondHeaderCt){this.headerCt=headerCt,secondHeaderCt&&(this.secondHeaderCt=secondHeaderCt),this.visibleOnly=!!visibleOnly},getColumns:function(){return this.columns||this.cacheColumns(),this.columns},hasVariableRowHeight:function(){var i,me=this,columns=me.getColumns(),len=columns.length;if(null==me.variableRowHeight)for(me.variableRowHeight=!1,i=0;!me.variableRowHeight&&i<len;i++)me.variableRowHeight=!!columns[i].variableRowHeight;return me.variableRowHeight},getHeaderIndex:function(header){return header.isGroupHeader&&(header=this.getHeaderColumns(header)[0]),Ext.Array.indexOf(this.getColumns(),header)},getHeaderAtIndex:function(index){return this.getColumns()[index]||null},getPreviousSibling:function(header){var index=this.getHeaderIndex(header),col=null;return 0<index&&(col=this.getColumns()[index-1]),col},getNextSibling:function(header){var col,index=this.getHeaderIndex(header);return-1!==index&&(col=this.getColumns()[index+1]),col||null},getFirst:function(){var columns=this.getColumns();return 0<columns.length?columns[0]:null},getLast:function(){var columns=this.getColumns(),len=columns.length;return 0<len?columns[len-1]:null},getHeaderByDataIndex:function(dataIndex){var i,header,columns=this.getColumns(),len=columns.length;for(i=0;i<len;++i)if((header=columns[i]).dataIndex===dataIndex)return header;return null},getHeaderById:function(id){var i,header,columns=this.getColumns(),len=columns.length;for(i=0;i<len;++i)if((header=columns[i]).getItemId()===id)return header;return null},getVisibleHeaderClosestToIndex:function(index){var result=this.getHeaderAtIndex(index);return result&&result.hidden&&(result=result.next(":not([hidden])")||result.prev(":not([hidden])")),result},cacheColumns:function(){var columns=this.getHeaderColumns(this.headerCt),second=this.secondHeaderCt;second&&(columns=columns.concat(this.getHeaderColumns(second))),this.columns=columns},getHeaderColumns:function(header){var result=this.visibleOnly?header.getVisibleGridColumns():header.getGridColumns();return Ext.Array.clone(result)},invalidate:function(){var root=this.rootColumns;this.columns=this.variableRowHeight=null,root&&root.invalidate()},destroy:function(){this.columns=this.rootColumns=null,this.callParent()}},function(){this.createAlias("indexOf","getHeaderIndex")}),Ext.define("Ext.grid.NavigationModel",{extend:Ext.view.NavigationModel,alias:"view.navigation.grid",focusCls:Ext.baseCSSPrefix+"grid-item-focused",getViewListeners:function(){var me=this;return{focusmove:{element:"el",fn:me.onFocusMove},containermousedown:me.onContainerMouseDown,cellmousedown:me.onCellMouseDown,cellclick:me.onCellClick,itemmousedown:me.onItemMouseDown,itemclick:me.onItemClick,itemcontextmenu:me.onItemClick,scope:me}},initKeyNav:function(view){var me=this;me.keyNav||(me.keyNav=[],me.position=new Ext.grid.CellContext(view)),me.keyNav.push(new Ext.util.KeyNav({target:view,ignoreInputFields:!0,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:me.processViewEvent,up:me.onKeyUp,down:me.onKeyDown,right:me.onKeyRight,left:me.onKeyLeft,pageDown:me.onKeyPageDown,pageUp:me.onKeyPageUp,home:me.onKeyHome,end:me.onKeyEnd,space:me.onKeySpace,enter:me.onKeyEnter,esc:me.onKeyEsc,113:me.onKeyF2,tab:me.onKeyTab,A:{ctrl:!0,handler:me.onSelectAllKeyPress},scope:me}))},addKeyBindings:function(binding){var i,len=this.keyNav.length;for(i=0;i<len;i++)this.keyNav[i].addBindings(binding)},enable:function(){var i,len=this.keyNav.length;for(i=0;i<len;i++)this.keyNav[i].enable();this.disabled=!1},disable:function(){var i,len=this.keyNav.length;for(i=0;i<len;i++)this.keyNav[i].disable();this.disabled=!0},processViewEvent:function(view,record,row,recordIndex,event){var key=event.getKey();return view.actionableMode?(this.map.ignoreInputFields=!1,key===event.TAB||key===event.ESC||key===event.F2?event:void 0):(this.map.ignoreInputFields=!0,key===event.TAB?null:event)},onCellMouseDown:function(view,cell,cellIndex,record,row,recordIndex,mousedownEvent){var ac,targetComponent=Ext.Component.fromElement(mousedownEvent.target,cell);view.actionableMode&&(mousedownEvent.getTarget(null,null,!0).isTabbable()||(ac=Ext.ComponentManager.getActiveComponent())&&ac.owns(mousedownEvent))||("touch"!==mousedownEvent.pointerType&&this.setPosition(mousedownEvent.position,null,mousedownEvent),targetComponent&&targetComponent.isFocusable&&targetComponent.isFocusable()&&(view.setActionableMode(!0,mousedownEvent.position),targetComponent.focus()))},onCellClick:function(view,cell,cellIndex,record,row,recordIndex,clickEvent){var me=this,targetComponent=Ext.Component.fromElement(clickEvent.target,cell),clickOnFocusable=targetComponent&&targetComponent.isFocusable&&targetComponent.isFocusable();view.actionableMode?(clickEvent.position.isEqual(view.actionPosition)||clickOnFocusable||me.setPosition(clickEvent.position,null,clickEvent),me.fireEvent("navigate",{view:view,navigationModel:me,keyEvent:clickEvent,previousPosition:me.previousPosition,previousRecordIndex:me.previousRecordIndex,previousRecord:me.previousRecord,previousItem:me.previousItem,previousCell:me.previousCell,previousColumnIndex:me.previousColumnIndex,previousColumn:me.previousColumn,position:clickEvent.position,recordIndex:clickEvent.position.rowIdx,record:clickEvent.position.record,item:clickEvent.item,cell:clickEvent.position.cellElement,columnIndex:clickEvent.position.colIdx,column:clickEvent.position.column})):me.position.isEqual(clickEvent.position)||clickOnFocusable?me.fireNavigateEvent(clickEvent):me.setPosition(clickEvent.position,null,clickEvent)},onFocusMove:function(e){var record,column,newPosition,cell=e.target,view=Ext.Component.fromElement(e.delegatedTarget,null,"tableview");cell=e.target;if(view&&Ext.fly(cell).is(view.cellSelector)){if(view.actionableModeTabbing)return;view.ownerGrid.setActionableMode(!1),record=view.getRecord(cell),column=view.getHeaderByCell(cell),record&&column&&((newPosition=new Ext.grid.CellContext(view).setPosition(record,column)).isEqual(this.position)||this.setPosition(newPosition))}},onItemMouseDown:function(view,record,item,index,mousedownEvent){mousedownEvent.position.cellElement||"touch"===mousedownEvent.pointerType||(this.getClosestCell(mousedownEvent),this.setPosition(mousedownEvent.position,null,mousedownEvent))},onItemClick:function(view,record,item,index,clickEvent){clickEvent.position.cellElement||(this.getClosestCell(clickEvent),"touch"===clickEvent.pointerType&&this.setPosition(clickEvent.position,null,clickEvent),this.fireNavigateEvent(clickEvent))},getClosestCell:function(event){var x,columns,len,i,b,position=event.position;if(!position.cellElement)for(x=event.getX(),len=(columns=position.view.getVisibleColumnManager().getColumns()).length,i=0;i<len;i++)if(columns[i],x>=(b=columns[i].getBox()).left&&x<b.right)return position.setColumn(columns[i]),position.rowElement=position.getRow(!0),void(position.cellElement=position.getCell(!0))},deferSetPosition:function(delay,recordIndex,columnIndex,keyEvent,suppressEvent,preventNavigation){var setPositionTask=this.view.getFocusTask();return setPositionTask.delay(delay,this.setPosition,this,[recordIndex,columnIndex,keyEvent,suppressEvent,preventNavigation]),setPositionTask},setPosition:function(recordIndex,columnIndex,keyEvent,suppressEvent,preventNavigation){var view,scroller,selModel,dataSource,columnManager,newRecordIndex,newColumnIndex,newRecord,newColumn,me=this,clearing=null==recordIndex&&null==columnIndex,isClear=null==me.record&&null==me.recordIndex&&null==me.item;if((view=recordIndex&&recordIndex.isCellContext?recordIndex.view:keyEvent&&keyEvent.view?keyEvent.view:me.lastFocused?me.lastFocused.view:me.view).getFocusTask().cancel(),!(view.destroyed||!view.refreshCounter||!view.ownerCt||clearing&&isClear)&&view.all.getCount()){if(selModel=view.getSelectionModel(),dataSource=view.dataSource,columnManager=view.getVisibleColumnManager(),recordIndex&&recordIndex.isCellContext)newRecord=recordIndex.record,newRecordIndex=recordIndex.rowIdx,newColumnIndex=recordIndex.colIdx,newColumn=recordIndex.column,-1===dataSource.indexOf(newRecord)&&(scroller=view.getScrollable(),me.recordIndex=-1,scroller.getPosition().y>=scroller.getMaxPosition().y-view.all.last(!0).offsetHeight&&recordIndex.rowIdx--,newRecordIndex=Math.min(recordIndex.rowIdx,dataSource.getCount()-1),newColumnIndex=Math.min(newColumnIndex,columnManager.getColumns().length),newRecord=dataSource.getAt(newRecordIndex),newColumn=columnManager.getColumns()[newColumnIndex]);else{if(clearing)newRecord=newRecordIndex=null;else if(null==columnIndex&&(columnIndex=me.lastFocused?me.lastFocused.column:0),"number"==typeof recordIndex)newRecordIndex=Math.max(Math.min(recordIndex,dataSource.getCount()-1),0),newRecord=dataSource.getAt(recordIndex);else if(recordIndex.isEntity)newRecord=recordIndex,newRecordIndex=dataSource.indexOf(newRecord);else if(recordIndex.tagName)newRecord=view.getRecord(recordIndex),-1===(newRecordIndex=dataSource.indexOf(newRecord))&&(newRecord=null);else{if(isClear)return;clearing=!0,newRecord=newRecordIndex=null}newRecord?(-1===newRecordIndex&&(me.recordIndex=-1,newRecord=dataSource.getAt(0),newRecordIndex=0,columnIndex=null),null==columnIndex?(newColumn=me.column)||(newColumnIndex=0,newColumn=columnManager.getColumns()[0]):newColumnIndex="number"==typeof columnIndex?(newColumn=columnManager.getColumns()[columnIndex],columnIndex):(newColumn=columnIndex,columnManager.indexOf(columnIndex))):(clearing=!0,newColumn=newColumnIndex=null)}if(newRecordIndex===me.recordIndex&&newColumnIndex===me.columnIndex&&view===me.position.view)return me.focusPosition(me.position);me.cell&&me.cell.removeCls(me.focusCls),me.previousRecordIndex=me.recordIndex,me.previousRecord=me.record,me.previousItem=me.item,me.previousCell=me.cell,me.previousColumn=me.column,me.previousColumnIndex=me.columnIndex,me.previousPosition=me.position.clone(),me.selectionStart=selModel.selectionStart,me.position.setAll(view,me.recordIndex=newRecordIndex,me.columnIndex=newColumnIndex,me.record=newRecord,me.column=newColumn),clearing?me.item=me.cell=null:me.focusPosition(me.position,preventNavigation),suppressEvent||(selModel.fireEvent("focuschange",selModel,me.previousRecord,me.record),view.fireEvent("rowfocus",me.record,me.item,me.recordIndex),view.fireEvent("cellfocus",me.record,me.cell,me.position)),keyEvent&&!preventNavigation&&me.cell!==me.previousCell&&me.fireNavigateEvent(keyEvent)}},focusPosition:function(position){var view,row,me=this;me.item=me.cell=null,position&&position.record&&position.column&&(view=position.view,(row=position.rowElement?me.item=position.rowElement:view.getRowByRecord(position.record))?(me.cell=position.cellElement||Ext.fly(row).down(position.column.getCellSelector(),!0),me.cell?(me.cell=new Ext.dom.Fly(me.cell),view.lastFocused=me.lastFocused=me.position.clone(),me.focusItem(me.cell),view.focusEl=me.cell):(me.position.setAll(),me.record=me.column=me.recordIndex=me.columnIndex=null)):(row=view.dataSource.indexOf(position.record),me.position.setAll(),me.record=me.column=me.recordIndex=me.columnIndex=null,-1!==row&&view.bufferedRenderer&&(me.lastKeyEvent=null,view.bufferedRenderer.scrollTo(row,!1,me.afterBufferedScrollTo,me))))},focusItem:function(item){item.addCls(this.focusCls),item.focus()},getCell:function(){return this.cell},getPosition:function(skipChecks){var curIndex,view,dataSource,me=this,position=me.position;if(position.record&&position.column){if(skipChecks)return position;if(-1===(curIndex=(dataSource=(view=position.view).dataSource).indexOf(position.record))&&(curIndex=position.rowIdx,(position.record=dataSource.getAt(curIndex))||(curIndex=-1)),-1!==curIndex&&-1!==view.getVisibleColumnManager().indexOf(position.column))return position;position.setAll(),me.record=me.column=me.recordIndex=me.columnIndex=null}return null},getLastFocused:function(){var view,lastFocused=this.lastFocused;if(lastFocused&&lastFocused.record&&lastFocused.column&&-1!==(view=lastFocused.view).dataSource.indexOf(lastFocused.record)&&-1!==view.getVisibleColumnManager().indexOf(lastFocused.column))return lastFocused},onKeyTab:function(keyEvent){var focusTarget,i,forward=!keyEvent.shiftKey,position=keyEvent.position.clone(),view=position.view,cell=keyEvent.position.cellElement,tabbableChildren=Ext.fly(cell).findTabbableElements(),actionables=view.ownerGrid.actionables,len=actionables.length;for(keyEvent.preventDefault(),focusTarget=tabbableChildren[Ext.Array.indexOf(tabbableChildren,keyEvent.target)+(forward?1:-1)];!focusTarget&&(cell=cell[forward?"nextSibling":"previousSibling"]);){for(position.setColumn(view.getHeaderByCell(cell)),i=0;i<len;i++)actionables[i].activateCell(position);(tabbableChildren=Ext.fly(cell).findTabbableElements()).length&&(focusTarget=tabbableChildren[forward?0:tabbableChildren.length-1])}if(focusTarget)return this.actionPosition=position.view.actionPosition=position,void Ext.fly(focusTarget).focus();Ext.isIE&&view.el.focus(),view.onRowExit(keyEvent.item,keyEvent.item[forward?"nextSibling":"previousSibling"],forward)},onKeyUp:function(keyEvent){var newRecord=keyEvent.view.walkRecs(keyEvent.record,-1),pos=this.getPosition();newRecord&&(pos.setRow(newRecord),pos.getCell(!0)||pos.navigate(-1),this.setPosition(pos,null,keyEvent))},onKeyDown:function(keyEvent){var newRecord=keyEvent.record.isExpandingOrCollapsing?null:keyEvent.view.walkRecs(keyEvent.record,1),pos=this.getPosition();newRecord&&(pos.setRow(newRecord),pos.getCell(!0)||pos.navigate(-1),this.setPosition(pos,null,keyEvent))},onKeyRight:function(keyEvent){var newPosition=this.move("right",keyEvent);newPosition&&this.setPosition(newPosition,null,keyEvent)},onKeyLeft:function(keyEvent){var newPosition=this.move("left",keyEvent);newPosition&&this.setPosition(newPosition,null,keyEvent)},onKeyEnter:function(keyEvent){var eventArgs=["cellclick",keyEvent.view,keyEvent.position.cellElement,keyEvent.position.colIdx,keyEvent.record,keyEvent.position.rowElement,keyEvent.recordIndex,keyEvent],actionCell=keyEvent.position.getCell();actionCell&&(actionCell.query('[tabIndex="-1"]').length||(keyEvent.stopEvent(),keyEvent.view.fireEvent.apply(keyEvent.view,eventArgs),eventArgs[0]="celldblclick",keyEvent.view.fireEvent.apply(keyEvent.view,eventArgs)),this.view.actionableMode||this.view.ownerGrid.setActionableMode(!0,this.getPosition()))},onKeyF2:function(keyEvent){var grid=this.view.ownerGrid,actionableMode=grid.actionableMode;grid.setActionableMode(!actionableMode,actionableMode?null:this.getPosition())},onKeyEsc:function(keyEvent){this.view.ownerGrid.setActionableMode(!1)},move:function(dir,keyEvent){var position=this.getPosition();if(position&&position.record)return position.view.walkCells(position,dir,!keyEvent.shiftKey||"right"!==dir&&"left"!==dir?null:this.vetoRowChange,this)},vetoRowChange:function(newPosition){return this.getPosition().record===newPosition.record},onKeyPageDown:function(keyEvent){var newIdx,newRecord,me=this,view=keyEvent.view,rowsVisible=me.getRowsVisible();rowsVisible&&(view.bufferedRenderer?(newIdx=Math.min(keyEvent.recordIndex+rowsVisible,view.dataSource.getCount()-1),me.lastKeyEvent=keyEvent,view.bufferedRenderer.scrollTo(newIdx,!1,me.afterBufferedScrollTo,me)):(newRecord=view.walkRecs(keyEvent.record,rowsVisible),me.setPosition(newRecord,null,keyEvent)))},onKeyPageUp:function(keyEvent){var newIdx,newRecord,me=this,view=keyEvent.view,rowsVisible=me.getRowsVisible();rowsVisible&&(view.bufferedRenderer?(newIdx=Math.max(keyEvent.recordIndex-rowsVisible,0),me.lastKeyEvent=keyEvent,view.bufferedRenderer.scrollTo(newIdx,!1,me.afterBufferedScrollTo,me)):(newRecord=view.walkRecs(keyEvent.record,-rowsVisible),me.setPosition(newRecord,null,keyEvent)))},onKeyHome:function(keyEvent){var me=this,view=keyEvent.view;keyEvent.altKey?view.bufferedRenderer?(me.lastKeyEvent=keyEvent,view.bufferedRenderer.scrollTo(0,!1,me.afterBufferedScrollTo,me)):me.setPosition(view.walkRecs(keyEvent.record,-view.dataSource.indexOf(keyEvent.record)),null,keyEvent):me.setPosition(keyEvent.record,0,keyEvent)},afterBufferedScrollTo:function(newIdx,newRecord){this.setPosition(newRecord,null,this.lastKeyEvent,null,!this.lastKeyEvent)},onKeyEnd:function(keyEvent){var me=this,view=keyEvent.view;keyEvent.altKey?view.bufferedRenderer?(me.lastKeyEvent=keyEvent,view.bufferedRenderer.scrollTo(view.store.getCount()-1,!1,me.afterBufferedScrollTo,me)):me.setPosition(view.walkRecs(keyEvent.record,view.dataSource.getCount()-1-view.dataSource.indexOf(keyEvent.record)),null,keyEvent):me.setPosition(keyEvent.record,keyEvent.view.getVisibleColumnManager().getColumns().length-1,keyEvent)},getRowsVisible:function(){var rowHeight,gridViewHeight,rowsVisible=!1,view=this.view,firstRow=view.all.first();return firstRow&&(rowHeight=firstRow.getHeight(),gridViewHeight=view.el.getHeight(),rowsVisible=Math.floor(gridViewHeight/rowHeight)),rowsVisible},fireNavigateEvent:function(keyEvent){var me=this;me.fireEvent("navigate",{view:me.position.view,navigationModel:me,keyEvent:keyEvent||new Ext.event.Event({}),previousPosition:me.previousPosition,previousRecordIndex:me.previousRecordIndex,previousRecord:me.previousRecord,previousItem:me.previousItem,previousCell:me.previousCell,previousColumnIndex:me.previousColumnIndex,previousColumn:me.previousColumn,position:me.position,recordIndex:me.recordIndex,record:me.record,selectionStart:me.selectionStart,item:me.item,cell:me.cell,columnIndex:me.columnIndex,column:me.column})}}),Ext.define("Ext.view.TableLayout",{extend:Ext.layout.component.Auto,alias:"layout.tableview",type:"tableview",beginLayout:function(ownerContext){var me=this,owner=me.owner,ownerGrid=owner.ownerGrid,partner=owner.lockingPartner,context=ownerContext.context;ownerContext.doSyncRowHeights=partner&&partner.grid.isVisible()&&ownerGrid.syncRowHeight,me.columnFlusherId||(me.columnFlusherId=me.id+"-columns",me.rowHeightFlusherId=me.id+"-rows"),me.owner.bufferedRenderer&&me.owner.bufferedRenderer.beforeTableLayout(ownerContext),me.callParent([ownerContext]),ownerContext.doSyncRowHeights&&(ownerContext.lockingPartnerContext||((ownerContext.lockingPartnerContext=context.getCmp(partner)).lockingPartnerContext=ownerContext),ownerContext.rowHeightSynchronizer=me.owner.syncRowHeightBegin()),(ownerContext.headerContext=context.getCmp(me.headerCt)).viewContext=ownerContext},beginLayoutCycle:function(ownerContext,firstCycle){this.callParent([ownerContext,firstCycle]),ownerContext.syncRowHeights&&(ownerContext.target.syncRowHeightClear(ownerContext.rowHeightSynchronizer),ownerContext.syncRowHeights=!1)},calculate:function(ownerContext){var columnFlusher,otherSynchronizer,synchronizer,rowHeightFlusher,ctSize,overflowY,me=this,context=ownerContext.context,lockingPartnerContext=ownerContext.lockingPartnerContext,headerContext=ownerContext.headerContext,ownerCtContext=ownerContext.ownerCtContext,owner=me.owner,columnsChanged=headerContext.getProp("columnsChanged"),state=ownerContext.state,bodyDom=owner.body.dom;if(!(owner.all.getCount()||bodyDom&&owner.body.child("table")))return ownerContext.setProp("viewOverflowY",!1),void me.callParent([ownerContext]);if(void 0!==columnsChanged)if(!columnsChanged||((columnFlusher=state.columnFlusher)||context.queueFlush(state.columnFlusher=columnFlusher={ownerContext:ownerContext,columnsChanged:columnsChanged,layout:me,id:me.columnFlusherId,flush:me.flushColumnWidths}),columnFlusher.flushed)){if(ownerContext.doSyncRowHeights){if(!(rowHeightFlusher=state.rowHeightFlusher)){if((synchronizer=state.rowHeights)||(state.rowHeights=synchronizer=ownerContext.rowHeightSynchronizer,me.owner.syncRowHeightMeasure(synchronizer),ownerContext.setProp("rowHeights",synchronizer)),!(otherSynchronizer=lockingPartnerContext.getProp("rowHeights")))return void(me.done=!1);context.queueFlush(state.rowHeightFlusher=rowHeightFlusher={ownerContext:ownerContext,synchronizer:synchronizer,otherSynchronizer:otherSynchronizer,layout:me,id:me.rowHeightFlusherId,flush:me.flushRowHeights})}if(!rowHeightFlusher.flushed)return void(me.done=!1)}if(me.callParent([ownerContext]),!ownerContext.heightModel.shrinkWrap){if(overflowY=!1,!ownerCtContext.heightModel.shrinkWrap){if(!(ctSize=ownerCtContext.target.layout.getContainerSize(ownerCtContext)).gotHeight)return void(me.done=!1);overflowY=bodyDom.offsetHeight>ctSize.height}ownerContext.setProp("viewOverflowY",overflowY)}}else me.done=!1;else me.done=!1},measureContentHeight:function(ownerContext){var owner=this.owner,bodyDom=owner.body.dom,emptyEl=owner.emptyEl,bodyHeight=0;return emptyEl&&(bodyHeight+=emptyEl.offsetHeight),bodyDom&&(bodyHeight+=bodyDom.offsetHeight),ownerContext.headerContext.state.boxPlan.tooNarrow&&(bodyHeight+=Ext.getScrollbarSize().height),bodyHeight},flushColumnWidths:function(){var column,i,colWidth,lastBox,me=this.layout,ownerContext=this.ownerContext,columnsChanged=this.columnsChanged,owner=ownerContext.target,len=columnsChanged.length;if(ownerContext.state.columnFlusher===this){for(i=0;i<len;i++)(column=columnsChanged[i])&&(colWidth=column.props.width,owner.body.select(owner.getColumnSizerSelector(column.target)).setWidth(colWidth),(lastBox=column.lastBox)&&(lastBox.width=colWidth));this.flushed=!0,me.pending||ownerContext.context.queueLayout(me)}},flushRowHeights:function(){var me=this.layout,ownerContext=this.ownerContext;ownerContext.state.rowHeightFlusher===this&&(ownerContext.target.syncRowHeightFinish(this.synchronizer,this.otherSynchronizer),this.flushed=!0,ownerContext.syncRowHeights=!0,me.pending||ownerContext.context.queueLayout(me))},finishedLayout:function(ownerContext){var nodeContainer=Ext.fly(this.owner.getNodeContainer());this.callParent([ownerContext]),nodeContainer&&nodeContainer.setWidth(ownerContext.headerContext.props.contentWidth),this.owner.bufferedRenderer&&this.owner.bufferedRenderer.afterTableLayout(ownerContext)}}),Ext.define("Ext.grid.locking.RowSynchronizer",{constructor:function(view,rowEl){var rowTpl,me=this;for(me.view=view,me.rowEl=rowEl,me.els={},me.add("data",view.rowSelector),rowTpl=view.rowTpl;rowTpl;rowTpl=rowTpl.nextTpl)rowTpl.beginRowSync&&rowTpl.beginRowSync(me)},add:function(name,selector){var el=Ext.fly(this.rowEl).down(selector,!0);el&&(this.els[name]={el:el})},finish:function(other){var otherEl,delta,name,otherHeight,els=this.els,otherEls=other.els,growth=0,otherGrowth=0;for(name in els)0<(delta=(otherHeight=(otherEl=otherEls[name])?otherEl.height:0)-els[name].height)?(growth+=delta,Ext.fly(els[name].el).setHeight(otherHeight)):otherGrowth-=delta;otherHeight=other.rowHeight+otherGrowth,Ext.isIE9&&this.view.ownerGrid.rowLines&&otherHeight--,this.rowHeight+growth<otherHeight&&Ext.fly(this.rowEl).setHeight(otherHeight)},measure:function(){var name,els=this.els;for(name in this.rowHeight=this.rowEl.offsetHeight,els)els[name].height=els[name].el.offsetHeight},reset:function(){var name,els=this.els;for(name in this.rowEl.style.height="",els)els[name].el.style.height=""}}),Ext.define("Ext.view.NodeCache",{statics:{range:document.createRange&&document.createRange()},constructor:function(view){this.view=view,this.clear(),this.el=new Ext.dom.Fly},destroy:function(){var me=this;me.destroyed||(me.el.destroy(),me.el=me.view=null,me.destroyed=!0),me.callParent()},clear:function(removeDom){var key,me=this,elements=me.elements,range=me.statics().range;if(me.count&&removeDom)if(range)range.setStartBefore(elements[me.startIndex]),range.setEndAfter(elements[me.endIndex]),range.deleteContents();else for(key in elements)Ext.removeNode(elements[key]);me.elements={},me.count=me.startIndex=0,me.endIndex=-1},fill:function(newElements,startIndex,fixedNodes){fixedNodes=fixedNodes||0;var i,elements=this.elements={},len=newElements.length-fixedNodes;for(startIndex=startIndex||0,i=0;i<len;i++)elements[startIndex+i]=newElements[i+fixedNodes];return this.startIndex=startIndex,this.endIndex=startIndex+len-1,this.count=len,this},insert:function(insertPoint,nodes){var i,me=this,elements=me.elements,nodeCount=nodes.length;if(me.count){if(insertPoint<me.count)for(i=me.endIndex+nodeCount;insertPoint+nodeCount<=i;i--)elements[i]=elements[i-nodeCount],elements[i].setAttribute("data-recordIndex",i);me.endIndex=me.endIndex+nodeCount}else me.startIndex=insertPoint,me.endIndex=insertPoint+nodeCount-1;for(i=0;i<nodeCount;i++,insertPoint++)elements[insertPoint]=nodes[i],elements[insertPoint].setAttribute("data-recordIndex",insertPoint);me.count+=nodeCount},invoke:function(fn,args){var element,i;for(fn=Ext.dom.Element.prototype[fn],i=this.startIndex;i<=this.endIndex;i++)(element=this.item(i))&&fn.apply(element,args);return this},item:function(index,asDom){var result=null;return this.elements[index]&&(result=asDom?this.elements[index]:this.el.attach(this.elements[index])),result},first:function(asDom){return this.item(this.startIndex,asDom)},last:function(asDom){return this.item(this.endIndex,asDom)},moveBlock:function(increment){var end,step,i,me=this,elements=me.elements;if(increment){for(step=increment<0?(i=me.startIndex-1,end=me.endIndex,1):(i=me.endIndex+1,end=me.startIndex,-1),me.startIndex+=increment,me.endIndex+=increment;(elements[(i+=step)+increment]=elements[i]).setAttribute("data-recordIndex",i+increment),(i<me.startIndex||i>me.endIndex)&&delete elements[i],i!==end;);delete elements[i]}},getCount:function(){return this.count},slice:function(start,end){var i,elements=this.elements,result=[];for(end=end?Math.min(this.endIndex,end-1):this.endIndex,i=start||this.startIndex;i<=end;i++)result.push(elements[i]);return result},replaceElement:function(el,replacement,domReplace){var elements=this.elements,index="number"==typeof el?el:this.indexOf(el);return-1<index&&(replacement=Ext.getDom(replacement),domReplace&&((el=elements[index]).parentNode.insertBefore(replacement,el),Ext.removeNode(el),replacement.setAttribute("data-recordIndex",index)),this.elements[index]=replacement),this},indexOf:function(el){var index,elements=this.elements;for(el=Ext.getDom(el),index=this.startIndex;index<=this.endIndex;index++)if(elements[index]===el)return index;return-1},removeRange:function(start,end,removeDom){var el,i,removeCount,fromPos,me=this,elements=me.elements,removed=[];for(end=null==end?me.endIndex+1:Math.min(me.endIndex+1,end+1),null==start&&(start=me.startIndex),removeCount=end-start,i=start,fromPos=end;i<=me.endIndex;i++,fromPos++)el=elements[i],i<end&&(removed.push(el),removeDom&&Ext.removeNode(el)),fromPos<=me.endIndex?(el=elements[i]=elements[fromPos]).setAttribute("data-recordIndex",i):delete elements[i];return me.count-=removeCount,me.endIndex-=removeCount,removed},removeElement:function(keys,removeDom){var inKeys,key,deleteCount,index,fromIndex,me=this,elements=me.elements,keyIndex=0;if(Ext.isArray(keys)){for(inKeys=keys,keys=[],deleteCount=inKeys.length,keyIndex=0;keyIndex<deleteCount;keyIndex++)"number"!=typeof(key=inKeys[keyIndex])&&(key=me.indexOf(key)),key>=me.startIndex&&key<=me.endIndex&&(keys[keys.length]=key);Ext.Array.sort(keys),deleteCount=keys.length}else{if(keys<me.startIndex||keys>me.endIndex)return;deleteCount=1,keys=[keys]}for(index=fromIndex=keys[0],keyIndex=0;index<=me.endIndex;index++,fromIndex++)keyIndex<deleteCount&&index===keys[keyIndex]&&(fromIndex++,keyIndex++,removeDom&&Ext.removeNode(elements[index])),fromIndex<=me.endIndex&&fromIndex>=me.startIndex?(elements[index]=elements[fromIndex]).setAttribute("data-recordIndex",index):delete elements[index];me.endIndex-=deleteCount,me.count-=deleteCount},scroll:function(newRecords,direction,removeCount){var i,el,removeEnd,children,result,removeStart,removedRecords,removedItems,me=this,view=me.view,store=view.store,elements=me.elements,recCount=newRecords.length,nodeContainer=view.getNodeContainer(),fireItemRemove=view.hasListeners.itemremove,fireItemAdd=view.hasListeners.itemadd,range=me.statics().range;if(newRecords.length){if(-1===direction){if(removeCount){if(fireItemRemove&&(removedRecords=[],removedItems=[]),removeStart=me.endIndex-removeCount+1,range)for(range.setStartBefore(elements[removeStart]),range.setEndAfter(elements[me.endIndex]),range.deleteContents(),i=removeStart;i<=me.endIndex;i++)el=elements[i],delete elements[i],fireItemRemove&&(removedRecords.push(store.getByInternalId(el.getAttribute("data-recordId"))),removedItems.push(el));else for(i=removeStart;i<=me.endIndex;i++)el=elements[i],delete elements[i],Ext.removeNode(el),fireItemRemove&&(removedRecords.push(store.getByInternalId(el.getAttribute("data-recordId"))),removedItems.push(el));view.fireEvent("itemremove",removedRecords,removeStart,removedItems,view),me.endIndex-=removeCount}if(newRecords.length){for(children=(result=view.bufferRender(newRecords,me.startIndex-=recCount)).children,i=0;i<recCount;i++)elements[me.startIndex+i]=children[i];nodeContainer.insertBefore(result.fragment,nodeContainer.firstChild),fireItemAdd&&view.fireEvent("itemadd",newRecords,me.startIndex,children)}}else{if(removeCount){if(fireItemRemove&&(removedRecords=[],removedItems=[]),removeEnd=me.startIndex+removeCount,range)for(range.setStartBefore(elements[me.startIndex]),range.setEndAfter(elements[removeEnd-1]),range.deleteContents(),i=me.startIndex;i<removeEnd;i++)el=elements[i],delete elements[i],fireItemRemove&&(removedRecords.push(store.getByInternalId(el.getAttribute("data-recordId"))),removedItems.push(el));else for(i=me.startIndex;i<removeEnd;i++)el=elements[i],delete elements[i],Ext.removeNode(el),fireItemRemove&&(removedRecords.push(store.getByInternalId(el.getAttribute("data-recordId"))),removedItems.push(el));view.fireEvent("itemremove",removedRecords,me.startIndex,removedItems,view),me.startIndex=removeEnd}for(children=(result=view.bufferRender(newRecords,me.endIndex+1)).children,i=0;i<recCount;i++)elements[me.endIndex+=1]=children[i];nodeContainer.appendChild(result.fragment),fireItemAdd&&view.fireEvent("itemadd",newRecords,me.endIndex+1,children)}return me.count=me.endIndex-me.startIndex+1,children}},sumHeights:function(){var i,result=0,elements=this.elements;for(i=this.startIndex;i<=this.endIndex;i++)result+=elements[i].offsetHeight;return result}},function(){Ext.dom.CompositeElementLite.importElementMethods.call(this)}),Ext.define("Ext.view.Table",{extend:Ext.view.View,xtype:["tableview","gridview"],alternateClassName:"Ext.grid.View",isTableView:!0,config:{selectionModel:{type:"rowmodel"}},inheritableStatics:{normalSideEvents:["deselect","select","beforedeselect","beforeselect","selectionchange"],events:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","cellkeydown","beforecellkeydown","cellmouseup","beforecellmouseup","cellmousedown","beforecellmousedown","cellcontextmenu","beforecellcontextmenu","celldblclick","beforecelldblclick","cellclick","beforecellclick","refresh","itemremove","itemadd","beforeitemupdate","itemupdate","viewready","beforerefresh","unhighlightitem","highlightitem","focuschange","containerkeydown","containercontextmenu","containerdblclick","containerclick","containermouseout","containermouseover","containermouseup","containermousedown","beforecontainerkeydown","beforecontainercontextmenu","beforecontainerdblclick","beforecontainerclick","beforecontainermouseout","beforecontainermouseover","beforecontainermouseup","beforecontainermousedown","itemkeydown","itemcontextmenu","itemdblclick","itemclick","itemmouseleave","itemmouseenter","itemmouseup","itemmousedown","rowclick","rowcontextmenu","rowdblclick","rowkeydown","rowmouseup","rowmousedown","rowkeydown","beforeitemkeydown","beforeitemcontextmenu","beforeitemdblclick","beforeitemclick","beforeitemmouseleave","beforeitemmouseenter","beforeitemmouseup","beforeitemmousedown","statesave","beforestatesave","staterestore","beforestaterestore","uievent","groupcollapse","groupexpand","scroll"]},scrollable:!0,componentLayout:"tableview",baseCls:Ext.baseCSSPrefix+"grid-view",unselectableCls:Ext.baseCSSPrefix+"unselectable",firstCls:Ext.baseCSSPrefix+"grid-cell-first",lastCls:Ext.baseCSSPrefix+"grid-cell-last",itemCls:Ext.baseCSSPrefix+"grid-item",selectedItemCls:Ext.baseCSSPrefix+"grid-item-selected",selectedCellCls:Ext.baseCSSPrefix+"grid-cell-selected",focusedItemCls:Ext.baseCSSPrefix+"grid-item-focused",overItemCls:Ext.baseCSSPrefix+"grid-item-over",altRowCls:Ext.baseCSSPrefix+"grid-item-alt",dirtyCls:Ext.baseCSSPrefix+"grid-dirty-cell",rowClsRe:new RegExp("(?:^|\\s*)"+Ext.baseCSSPrefix+"grid-item-alt(?:\\s+|$)","g"),cellRe:new RegExp(Ext.baseCSSPrefix+"grid-cell-([^\\s]+)(?:\\s|$)",""),positionBody:!0,positionCells:!1,stripeOnUpdate:null,actionableMode:!1,trackOver:!0,getRowClass:null,stripeRows:!0,markDirty:!0,ariaRole:"rowgroup",rowAriaRole:"row",cellAriaRole:"gridcell",tpl:["{%","view = values.view;","if (!(columns = values.columns)) {","columns = values.columns = view.ownerCt.getVisibleColumnManager().getColumns();","}","values.fullWidth = 0;","for (i = 0, len = columns.length; i < len; i++) {","column = columns[i];","values.fullWidth += (column.cellWidth = column.lastBox ? column.lastBox.width : column.width || column.minWidth);","}","tableCls=values.tableCls=[];","%}",'<div class="'+Ext.baseCSSPrefix+'grid-item-container" role="presentation" style="width:{fullWidth}px">',"{[view.renderTHead(values, out, parent)]}","{%","view.renderRows(values.rows, values.columns, values.viewStartIndex, out);","%}","{[view.renderTFoot(values, out, parent)]}","</div>","{% ","view = columns = column = null;","%}",{definitions:"var view, tableCls, columns, i, len, column;",priority:0}],outerRowTpl:['<table id="{rowId}" role="presentation" ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]}" cellpadding="0" cellspacing="0" style="{itemStyle};width:0">',"{%","this.nextTpl.applyOut(values, out, parent)","%}","</table>",{priority:9999}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " '+Ext.baseCSSPrefix+'grid-row";',"%}",'<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]}"',' role="{rowRole}" {rowAttr:attributes}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],cellTpl:['<td class="{tdCls}" role="{cellRole}" {tdAttr} {cellAttr:attributes}',' style="width:{column.cellWidth}px;<tpl if="tdStyle">{tdStyle}</tpl>"',' tabindex="-1" data-columnid="{[values.column.getItemId()]}">','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}" ','style="text-align:{align};<tpl if="style">{style}</tpl>" ',"{cellInnerAttr:attributes}>{value}</div>","</td>",{priority:0}],refreshSelmodelOnRefresh:!1,tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:[Ext.baseCSSPrefix+"grid-cell "+Ext.baseCSSPrefix+"grid-td"]},constructor:function(config){config.grid.isTree&&(config.baseCls=Ext.baseCSSPrefix+"tree-view"),this.callParent([config])},hasVariableRowHeight:function(fromLockingPartner){var me=this;return me.variableRowHeight||me.store.isGrouped()||me.getVisibleColumnManager().hasVariableRowHeight()||!fromLockingPartner&&me.lockingPartner&&me.lockingPartner.hasVariableRowHeight(!0)},initComponent:function(){var me=this;me.columnLines&&me.addCls(me.grid.colLinesCls),me.rowLines&&me.addCls(me.grid.rowLinesCls),me.body=new Ext.dom.Fly,me.body.id=me.id+"gridBody",me.trackOver||(me.overItemCls=null),((me.headerCt.view=me).grid.view=me).initFeatures(me.grid),me.itemSelector=me.getItemSelector(),me.all=new Ext.view.NodeCache(me),me.callParent()},applySelectionModel:function(selModel,oldSelModel){var grid=this.ownerGrid,defaultType=selModel.type,disableSelection=this.disableSelection||grid.disableSelection;return oldSelModel||selModel&&selModel.isSelectionModel||(selModel=grid.selModel||selModel),selModel&&(selModel.isSelectionModel?(selModel.allowDeselect=grid.allowDeselect||"SINGLE"!==selModel.selectionMode,selModel.locked=disableSelection):("string"==typeof selModel?selModel={type:selModel}:selModel.type=grid.selType||selModel.selType||selModel.type||defaultType,selModel.mode||(grid.simpleSelect?selModel.mode="SIMPLE":grid.multiSelect&&(selModel.mode="MULTI")),selModel=Ext.Factory.selection(Ext.apply({allowDeselect:grid.allowDeselect,locked:disableSelection},selModel)))),selModel},updateSelectionModel:function(selModel,oldSelModel){var me=this;oldSelModel&&(oldSelModel.un({scope:me,lastselectedchanged:me.updateBindSelection,selectionchange:me.updateBindSelection}),Ext.destroy(me.selModelRelayer)),me.selModelRelayer=me.relayEvents(selModel,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]),selModel.on({scope:me,lastselectedchanged:me.updateBindSelection,selectionchange:me.updateBindSelection}),me.selModel=selModel},getVisibleColumnManager:function(){return this.ownerCt.getVisibleColumnManager()},getColumnManager:function(){return this.ownerCt.getColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},moveColumn:function(fromIdx,toIdx,colsToMove){var i,j,rows,len,tr,cells,colGroups,me=this,multiMove=1<colsToMove,range=multiMove&&document.createRange?document.createRange():null,fragment=multiMove&&!range?document.createDocumentFragment():null,destinationCellIdx=toIdx,colCount=me.getGridColumns().length,lastIndex=colCount-1,doFirstLastClasses=(me.firstCls||me.lastCls)&&(0===toIdx||toIdx===colCount||0===fromIdx||fromIdx===lastIndex);if(me.rendered&&toIdx!==fromIdx){for(i=0,len=(rows=me.el.query(me.rowSelector)).length;i<len;i++){if(cells=(tr=rows[i]).childNodes,doFirstLastClasses){if(1===cells.length){Ext.fly(cells[0]).addCls(me.firstCls),Ext.fly(cells[0]).addCls(me.lastCls);continue}0===fromIdx?(Ext.fly(cells[0]).removeCls(me.firstCls),Ext.fly(cells[1]).addCls(me.firstCls)):fromIdx===lastIndex&&(Ext.fly(cells[lastIndex]).removeCls(me.lastCls),Ext.fly(cells[lastIndex-1]).addCls(me.lastCls)),0===toIdx?(Ext.fly(cells[0]).removeCls(me.firstCls),Ext.fly(cells[fromIdx]).addCls(me.firstCls)):toIdx===colCount&&(Ext.fly(cells[lastIndex]).removeCls(me.lastCls),Ext.fly(cells[fromIdx]).addCls(me.lastCls))}if(multiMove){if(range)range.setStartBefore(cells[fromIdx]),range.setEndAfter(cells[fromIdx+colsToMove-1]),fragment=range.extractContents();else for(j=0;j<colsToMove;j++)fragment.appendChild(cells[fromIdx]);tr.insertBefore(fragment,cells[destinationCellIdx]||null)}else tr.insertBefore(cells[fromIdx],cells[destinationCellIdx]||null)}for(i=0,len=(colGroups=me.el.query("colgroup")).length;i<len;i++)if(tr=colGroups[i],multiMove){if(range)range.setStartBefore(tr.childNodes[fromIdx]),range.setEndAfter(tr.childNodes[fromIdx+colsToMove-1]),fragment=range.extractContents();else for(j=0;j<colsToMove;j++)fragment.appendChild(tr.childNodes[fromIdx]);tr.insertBefore(fragment,tr.childNodes[destinationCellIdx]||null)}else tr.insertBefore(tr.childNodes[fromIdx],tr.childNodes[destinationCellIdx]||null)}},scrollToTop:Ext.emptyFn,addElListener:function(eventName,fn,scope){this.mon(this,eventName,fn,scope,{element:"el"})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(index){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(index)},getCell:function(record,column){var row=this.getRow(record);return"number"==typeof column&&(column=this.getHeaderAtIndex(column)),Ext.fly(row).down(column.getCellSelector())},getFeature:function(id){var features=this.featuresMC;if(features)return features.get(id)},findFeature:function(ftype){if(this.features)return Ext.Array.findBy(this.features,function(feature){if(feature.ftype===ftype)return!0})},initFeatures:function(grid){var i,features,feature,len,me=this;for(me.tpl=Ext.XTemplate.getTpl(this,"tpl"),me.rowTpl=Ext.XTemplate.getTpl(this,"rowTpl"),me.addRowTpl(Ext.XTemplate.getTpl(this,"outerRowTpl")),me.cellTpl=Ext.XTemplate.getTpl(this,"cellTpl"),me.featuresMC=new Ext.util.MixedCollection,len=(features=me.features=me.constructFeatures())?features.length:0,i=0;i<len;i++)(feature=features[i]).view=me,feature.grid=grid,me.featuresMC.add(feature),feature.init(grid)},renderTHead:function(values,out,parent){var len,i,headers=values.view.headerFns;if(headers)for(i=0,len=headers.length;i<len;++i)headers[i].call(this,values,out,parent)},addHeaderFn:function(fn){var headers=this.headerFns;(headers=headers||(this.headerFns=[])).push(fn)},renderTFoot:function(values,out,parent){var len,i,footers=values.view.footerFns;if(footers)for(i=0,len=footers.length;i<len;++i)footers[i].call(this,values,out,parent)},addFooterFn:function(fn){var footers=this.footerFns;(footers=footers||(this.footerFns=[])).push(fn)},addTpl:function(newTpl){return this.insertTpl("tpl",newTpl)},addRowTpl:function(newTpl){return this.insertTpl("rowTpl",newTpl)},addCellTpl:function(newTpl){return this.insertTpl("cellTpl",newTpl)},insertTpl:function(which,newTpl){var tpl,prevTpl;for(newTpl=newTpl.isTemplate?Ext.Object.chain(newTpl):new Ext.XTemplate("{%this.nextTpl.applyOut(values, out, parent);%}",newTpl),tpl=this[which];newTpl.priority<tpl.priority;tpl=tpl.nextTpl)prevTpl=tpl;return prevTpl?prevTpl.nextTpl=newTpl:this[which]=newTpl,newTpl.nextTpl=tpl,newTpl},tplApplyOut:function(values,out,parent){this.before&&!1===this.before(values,out,parent)||(this.nextTpl.applyOut(values,out,parent),this.after&&this.after(values,out,parent))},constructFeatures:function(){var feature,result,len,features=this.features,i=0;if(features)for(result=[],len=features.length;i<len;i++)(feature=features[i]).isFeature||(feature=Ext.create("feature."+feature.ftype,feature)),result[i]=feature;return result},beforeRender:function(){this.callParent(),this.enableTextSelection||this.protoEl.unselectable()},getElConfig:function(){var config=this.callParent();return delete config["aria-hidden"],delete config["aria-disabled"],config},onBindStore:function(store){var me=this,bufferedRenderer=me.bufferedRenderer;bufferedRenderer&&bufferedRenderer.store!==store&&bufferedRenderer.bindStore(store),me.all&&me.all.getCount()&&(bufferedRenderer&&bufferedRenderer.setBodyTop(0),me.clearViewEl()),me.callParent(arguments)},getStoreListeners:function(){var result=this.callParent();return this.bufferedRenderer&&delete result.clear,result.beforepageremove=this.beforePageRemove,result},beforePageRemove:function(pageMap,pageNumber){var rows=this.all,pageSize=pageMap.getPageSize();if(rows.startIndex>=(pageNumber-1)*pageSize&&rows.endIndex<=pageNumber*pageSize-1)return pageMap.get(pageNumber),!1},onViewScroll:function(scroller,x,y){this.ignoreScroll||this.callParent([scroller,x,y])},createRowElement:function(record,index,updateColumns){var me=this,div=me.renderBuffer,tplData=me.collectData([record],index);return tplData.columns=updateColumns,me.tpl.overwrite(div,tplData),me.cleanupData(),Ext.fly(div).down(me.getNodeContainerSelector(),!0).firstChild},bufferRender:function(records,index){var result,me=this,div=me.renderBuffer,range=document.createRange?document.createRange():null;if(me.tpl.overwrite(div,me.collectData(records,index)),me.cleanupData(),Ext.fly(div).saveTabbableState({skipSelf:!0,includeHidden:!0}),div=Ext.fly(div).down(me.getNodeContainerSelector(),!0),range)range.selectNodeContents(div),result=range.extractContents();else for(result=document.createDocumentFragment();div.firstChild;)result.appendChild(div.firstChild);return{fragment:result,children:Ext.Array.toArray(result.childNodes)}},collectData:function(records,startIndex){var me=this;return((me.rowValues.view=me).tableValues.view=me).tableValues.rows=records,me.tableValues.columns=null,me.tableValues.viewStartIndex=startIndex,me.tableValues.touchScroll=me.touchScroll,me.tableValues.tableStyle="width:"+me.headerCt.getTableWidth()+"px",me.tableValues},cleanupData:function(){var tableValues=this.tableValues;tableValues.view=tableValues.columns=tableValues.rows=this.rowValues.view=null},refreshSize:function(forceLayout){var me=this,bodySelector=me.getBodySelector();bodySelector&&me.body.attach(me.el.down(bodySelector,!0)),me.hasLoadingHeight||(Ext.suspendLayouts(),me.callParent(arguments),(forceLayout||me.hasVariableRowHeight()&&me.dataSource.getCount())&&me.grid.updateLayout(),Ext.resumeLayouts(!0))},clearViewEl:function(leaveNodeContainer){var i,nodeContainer,me=this,all=me.all,store=me.getStore(),removedItems=all.slice(),removedRecs=[];if(me.hasListeners.itemremove)for(i=all.startIndex;i<=all.endIndex;i++)removedRecs.push(store.getByInternalId(all.item(i,!0).getAttribute("data-recordId")));me.fireEvent("itemremove",removedRecs,all.startIndex,removedItems,me),me.callParent(),(nodeContainer=Ext.fly(me.getNodeContainer()))&&!leaveNodeContainer&&me.getTargetEl().dom!==nodeContainer.dom&&nodeContainer.destroy()},getMaskTarget:function(){return this.ownerCt.body},statics:{getBoundView:function(node){return Ext.getCmp(node.getAttribute("data-boundView"))}},getRecord:function(node){if(!this.store.destroyed)return node.isModel?node:(node=this.getNode(node))?this.dataSource.getByInternalId(node.getAttribute("data-recordId")):void 0},indexOf:function(node){return(node=this.getNode(node))||0===node?this.all.indexOf(node):-1},indexInStore:function(node){return node?this.dataSource.indexOf(this.getRecord(node)):-1},indexOfRow:function(record){var dataSource=this.dataSource;return record.isCollapsedPlaceholder?dataSource.indexOfPlaceholder(record):dataSource.indexOf(record)},renderRows:function(rows,columns,viewStartIndex,out){var i,me=this,rowValues=me.rowValues,rowCount=rows.length;for(rowValues.view=me,rowValues.columns=columns,rowValues.rowRole=me.rowAriaRole,me.cellValues.cellRole=me.cellAriaRole,i=0;i<rowCount;i++,viewStartIndex++)rowValues.itemClasses.length=rowValues.rowClasses.length=0,me.renderRow(rows[i],viewStartIndex,out);rowValues.view=rowValues.columns=rowValues.record=null},renderColumnSizer:function(values,out){var i,column,width,columns=values.columns||this.getGridColumns(),len=columns.length;for(out.push('<colgroup role="presentation">'),i=0;i<len;i++)width=(column=columns[i]).cellWidth?column.cellWidth:Ext.grid.header.Container.prototype.defaultWidth,out.push('<col role="presentation" class="',Ext.baseCSSPrefix,"grid-cell-",columns[i].getItemId(),'" style="width:'+width+'px">');out.push("</colgroup>")},renderRow:function(record,rowIdx,out){var cls,me=this,isMetadataRecord=-1===rowIdx,selModel=me.selectionModel,rowValues=me.rowValues,itemClasses=rowValues.itemClasses,rowClasses=rowValues.rowClasses,itemCls=me.itemCls,rowTpl=me.rowTpl;if(rowValues.rowAttr={},rowValues.record=record,rowValues.recordId=record.internalId,rowValues.recordIndex=me.store.indexOf(record),rowValues.rowIndex=rowIdx,rowValues.rowId=me.getRowId(record),rowValues.itemCls=rowValues.rowCls="",rowValues.columns||(rowValues.columns=me.ownerCt.getVisibleColumnManager().getColumns()),itemClasses.length=rowClasses.length=0,isMetadataRecord||(itemClasses[0]=itemCls,!me.ownerCt.disableSelection&&selModel.isRowSelected&&selModel.isRowSelected(record)&&itemClasses.push(me.selectedItemCls),me.stripeRows&&rowIdx%2!=0&&itemClasses.push(me.altRowCls),me.getRowClass&&(cls=me.getRowClass(record,rowIdx,null,me.dataSource))&&rowClasses.push(cls)),!out)return rowTpl.apply(rowValues,me.tableValues);rowTpl.applyOut(rowValues,out,me.tableValues)},renderCell:function(column,record,recordIndex,rowIndex,columnIndex,out){var fullIndex,value,clsInsertPoint,me=this,selModel=me.selectionModel,cellValues=me.cellValues,classes=cellValues.classes,fieldValue=record.data[column.dataIndex],cellTpl=me.cellTpl,lastFocused=me.navigationModel.getPosition();cellValues.record=record,cellValues.column=column,cellValues.recordIndex=recordIndex,cellValues.rowIndex=rowIndex,cellValues.columnIndex=cellValues.cellIndex=columnIndex,cellValues.align=column.align,cellValues.innerCls=column.innerCls,cellValues.tdCls=cellValues.tdStyle=cellValues.tdAttr=cellValues.style="",cellValues.unselectableAttr=me.enableTextSelection?"":'unselectable="on"',classes[1]=column.getCellId(),clsInsertPoint=2,column.renderer&&column.renderer.call?(fullIndex=me.ownerCt.columnManager.getHeaderIndex(column),value=column.renderer.call(column.usingDefaultRenderer?column:column.scope||me.ownerCt,fieldValue,cellValues,record,recordIndex,fullIndex,me.dataSource,me),cellValues.css&&(record.cssWarning=!0,cellValues.tdCls+=" "+cellValues.css,cellValues.css=null),cellValues.tdCls&&(classes[clsInsertPoint++]=cellValues.tdCls)):value=fieldValue,cellValues.value=null==value||""===value?column.emptyCellText:value,column.tdCls&&(classes[clsInsertPoint++]=column.tdCls),me.markDirty&&record.dirty&&record.isModified(column.dataIndex)&&(classes[clsInsertPoint++]=me.dirtyCls),column.isFirstVisible&&(classes[clsInsertPoint++]=me.firstCls),column.isLastVisible&&(classes[clsInsertPoint++]=me.lastCls),me.enableTextSelection||(classes[clsInsertPoint++]=me.unselectableCls),selModel&&(selModel.isCellModel||selModel.isSpreadsheetModel)&&selModel.isCellSelected(me,recordIndex,column)&&(classes[clsInsertPoint++]=me.selectedCellCls),lastFocused&&lastFocused.record.id===record.id&&lastFocused.column===column&&(classes[clsInsertPoint++]=me.focusedItemCls),classes.length=clsInsertPoint,cellValues.tdCls=classes.join(" "),cellTpl.applyOut(cellValues,out),cellValues.column=cellValues.record=null},getRow:function(nodeInfo){var fly;return!nodeInfo&&0!==nodeInfo||!this.rendered?null:(nodeInfo.target&&(nodeInfo=nodeInfo.target),Ext.isString(nodeInfo)?Ext.fly(nodeInfo).down(this.rowSelector,!0):Ext.isNumber(nodeInfo)?(fly=this.all.item(nodeInfo))&&fly.down(this.rowSelector,!0):nodeInfo.isModel?this.getRowByRecord(nodeInfo):(fly=Ext.fly(nodeInfo)).is(this.itemSelector)?this.getRowFromItem(fly):fly.findParent(this.rowSelector,this.getTargetEl()))},getRowId:function(record){return this.id+"-record-"+record.internalId},constructRowId:function(internalId){return this.id+"-record-"+internalId},getNodeById:function(id){return id=this.constructRowId(id),this.retrieveNode(id,!1)},getRowById:function(id){return id=this.constructRowId(id),this.retrieveNode(id,!0)},getNodeByRecord:function(record){return this.retrieveNode(this.getRowId(record),!1)},getRowByRecord:function(record){return this.retrieveNode(this.getRowId(record),!0)},getRowFromItem:function(item){var i,rows=Ext.getDom(item).tBodies[0].childNodes,len=rows.length;for(i=0;i<len;i++)if(Ext.fly(rows[i]).is(this.rowSelector))return rows[i]},retrieveNode:function(id,dataRow){var result=this.el.getById(id,!0);return dataRow&&result?Ext.fly(result).down(this.rowSelector,!0):result},updateIndexes:Ext.emptyFn,bodySelector:"div."+Ext.baseCSSPrefix+"grid-item-container",nodeContainerSelector:"div."+Ext.baseCSSPrefix+"grid-item-container",itemSelector:"table."+Ext.baseCSSPrefix+"grid-item",rowSelector:"tr."+Ext.baseCSSPrefix+"grid-row",cellSelector:"td."+Ext.baseCSSPrefix+"grid-cell",sizerSelector:"."+Ext.baseCSSPrefix+"grid-cell",innerSelector:"div."+Ext.baseCSSPrefix+"grid-cell-inner",getBodySelector:function(){return this.bodySelector},getColumnSizerSelector:function(header){var selector=this.sizerSelector+"-"+header.getItemId();return"td"+selector+",col"+selector},getItemSelector:function(){return this.itemSelector},getCellSelector:function(header){return header?header.getCellSelector():this.cellSelector},getCellInnerSelector:function(header){return this.getCellSelector(header)+" "+this.innerSelector},addRowCls:function(rowInfo,cls){var row=this.getRow(rowInfo);row&&Ext.fly(row).addCls(cls)},removeRowCls:function(rowInfo,cls){var row=this.getRow(rowInfo);row&&Ext.fly(row).removeCls(cls)},onRowSelect:function(rowIdx){var rowNode;this.addItemCls(rowIdx,this.selectedItemCls),(rowNode=this.getRow(rowIdx))&&rowNode.setAttribute("aria-selected",!0),Ext.isIE8&&this.repaintBorder(rowIdx+1)},onRowDeselect:function(rowIdx){var rowNode;this.removeItemCls(rowIdx,this.selectedItemCls),(rowNode=this.getRow(rowIdx))&&rowNode.removeAttribute("aria-selected"),Ext.isIE8&&this.repaintBorder(rowIdx+1)},onCellSelect:function(position){var cell=this.getCellByPosition(position);cell&&(cell.addCls(this.selectedCellCls),cell.dom.setAttribute("aria-selected",!0))},onCellDeselect:function(position){var cell=this.getCellByPosition(position,!0);cell&&(Ext.fly(cell).removeCls(this.selectedCellCls),cell.removeAttribute("aria-selected"))},getCellInclusive:function(position,returnDom){if(position){var row=this.getRow(position.row),header=this.ownerCt.getColumnManager().getHeaderAtIndex(position.column);if(header&&row)return Ext.fly(row).down(this.getCellSelector(header),returnDom)}return!1},getCellByPosition:function(position,returnDom){if(position){var view=position.view||this,row=view.getRow(position.record||position.row),header=position.column.isColumn?position.column:view.getVisibleColumnManager().getHeaderAtIndex(position.column);if(header&&row)return Ext.fly(row).down(view.getCellSelector(header),returnDom)}return!1},onFocusEnter:function(e){var focusPosition,focusRecord,focusRowIdx,focusTarget,scroller,me=this,fromComponent=e.fromComponent,navigationModel=me.getNavigationModel(),br=me.bufferedRenderer;if(!me.actionableMode){if(e=e.event,!me.cellFocused&&me.all.getCount()&&me.dataSource.getCount())if(focusTarget=e.getTarget(),Ext.fly(focusTarget).is(me.getCellSelector()))focusPosition=new Ext.grid.CellContext(me).setPosition(me.getRecord(focusTarget),me.getHeaderByCell(focusTarget));else if(focusTarget&&Ext.fly(focusTarget).isFocusable()&&me.el.contains(focusTarget)&&focusTarget!==me.el.dom)me.ownerGrid.setActionableMode(!0,new Ext.grid.CellContext(me).setPosition(me.getRecord(focusTarget),me.getHeaderByCell(Ext.fly(focusTarget).up(me.getCellSelector())))),Ext.fly(focusTarget).focus();else{if((focusPosition=me.lastFocused)?(scroller=me.getScrollable())&&!scroller.isInView(focusPosition.getRow()).y||(focusRecord=focusPosition.record):focusPosition=new Ext.grid.CellContext(me.isNormalView&&me.lockingPartner.grid.isVisible()?me.lockingPartner:me).setColumn(0),fromComponent&&fromComponent.isColumn&&fromComponent.getView()===me&&(focusPosition.view=me,focusPosition.setColumn(fromComponent)),!focusRecord){for(focusRowIdx=br?br.getFirstVisibleRowIndex():0,focusRecord=me.dataSource.getAt(focusRowIdx);focusRecord&&focusRecord.isNonData;)focusRowIdx++,focusRecord=me.dataSource.getAt(focusRowIdx);focusRecord?focusPosition.setRow(focusRecord):focusPosition=null}if(!focusPosition)return e.stopEvent(),void me.el.focus()}focusPosition&&(navigationModel.setPosition(focusPosition,null,e,null,!0),me.cellFocused=!!navigationModel.getPosition(),me.cellFocused&&(me.el.dom.setAttribute("tabIndex","-1"),me.toggleChildrenTabbability(!1))),Ext.Component.prototype.onFocusEnter.call(me,e)}},onFocusLeave:function(e){var me=this,isLeavingGrid=!me.lockingPartner||!e.toComponent||e.toComponent!==me.lockingPartner&&!me.lockingPartner.isAncestor(e.toComponent);me.refreshing||(me.cellFocused&&(isLeavingGrid&&me.getNavigationModel().setPosition(null,null,e.event,null,!0),me.cellFocused=!1,me.focusEl=me.el,me.focusEl.dom.setAttribute("tabIndex",0)),isLeavingGrid&&me.ownerGrid.actionableMode&&me.ownerGrid.setActionableMode(!1),Ext.Component.prototype.onFocusLeave.call(me,e))},onRowFocus:function(rowIdx,highlight,supressFocus){var me=this;highlight?(me.addItemCls(rowIdx,me.focusedItemCls),supressFocus||me.focusRow(rowIdx)):me.removeItemCls(rowIdx,me.focusedItemCls),Ext.isIE8&&me.repaintBorder(rowIdx+1)},focusRow:function(row,delay){var me=this,focusTask=me.getFocusTask();delay?focusTask.delay(Ext.isNumber(delay)?delay:10,me.focusRow,me,[row,!1]):(focusTask.cancel(),me.isVisible(!0)&&me.getNavigationModel().setPosition(me.getRecord(row)))},focusNode:function(row,delay){this.focusRow(row,delay)},scrollRowIntoView:function(row,animate){(row=this.getRow(row))&&this.scrollElIntoView(row,!1,animate)},focusCell:function(position,delay){var me=this,focusTask=me.getFocusTask();delay?focusTask.delay(Ext.isNumber(delay)?delay:10,me.focusCell,me,[position,!1]):(focusTask.cancel(),me.isVisible(!0)&&me.getCellByPosition(position)&&me.getNavigationModel().setPosition(position))},getLastFocused:function(){var lastFocused=this.lastFocused;if(lastFocused&&lastFocused.record&&lastFocused.column&&-1!==this.dataSource.indexOf(lastFocused.record)&&-1!==this.getVisibleColumnManager().indexOf(lastFocused.column)&&this.getNode(lastFocused.record))return lastFocused},scrollCellIntoView:function(cell,animate){cell.isCellContext&&(cell=this.getCellByPosition(cell)),cell&&this.scrollElIntoView(cell,null,animate)},scrollElIntoView:function(el,hscroll,animate){var scroller=this.getScrollable();scroller&&scroller.scrollIntoView(el,hscroll,animate)},syncRowHeightBegin:function(){var i,j,rowSync,itemEls=this.all,ln=itemEls.count,synchronizer=[],RowSynchronizer=Ext.grid.locking.RowSynchronizer;for(i=0,j=itemEls.startIndex;i<ln;i++,j++)synchronizer[i]=rowSync=new RowSynchronizer(this,itemEls.elements[j]),rowSync.reset();return synchronizer},syncRowHeightClear:function(synchronizer){var i,ln=this.all.count;for(i=0;i<ln;i++)synchronizer[i].reset()},syncRowHeightMeasure:function(synchronizer){var i,ln=synchronizer.length;for(i=0;i<ln;i++)synchronizer[i].measure()},syncRowHeightFinish:function(synchronizer,otherSynchronizer){var i,ln=synchronizer.length,bufferedRenderer=this.bufferedRenderer;for(i=0;i<ln;i++)synchronizer[i].finish(otherSynchronizer[i]);bufferedRenderer&&bufferedRenderer.syncRowHeightsFinish()},handleUpdate:function(store,record,operation,changedFieldNames){operation=operation||Ext.data.Model.EDIT;var oldItemDom,oldDataRow,newItemDom,newAttrs,attLen,attName,attrIndex,overItemCls,columns,column,len,i,cellUpdateFlag,cell,fieldName,value,scope,elData,emptyValue,me=this,recordIndex=me.store.indexOf(record),rowTpl=me.rowTpl,markDirty=me.markDirty,dirtyCls=me.dirtyCls,clearDirty=operation!==Ext.data.Model.EDIT,columnsToUpdate=[],hasVariableRowHeight=me.variableRowHeight,updateTypeFlags=0,ownerCt=me.ownerCt,cellFly=me.cellFly||(me.self.prototype.cellFly=new Ext.dom.Fly);if(me.viewReady&&(oldItemDom=me.getNodeByRecord(record))){if(record.isCollapsedPlaceholder)return void Ext.fly(oldItemDom).syncContent(me.createRowElement(record,me.indexOfRow(record)));for(overItemCls=me.overItemCls,i=0,len=(columns=me.ownerCt.getVisibleColumnManager().getColumns()).length;i<len;i++)(column=columns[i]).preventUpdate?(cell=Ext.fly(oldItemDom).down(column.getCellSelector(),!0))&&!clearDirty&&markDirty&&(cellFly.attach(cell),record.isModified(column.dataIndex)?cellFly.addCls(dirtyCls):cellFly.removeCls(dirtyCls)):(cellUpdateFlag=me.shouldUpdateCell(record,column,changedFieldNames))&&(updateTypeFlags|=cellUpdateFlag,columnsToUpdate[columnsToUpdate.length]=column,hasVariableRowHeight=hasVariableRowHeight||column.variableRowHeight);if(me.fireEvent("beforeitemupdate",record,recordIndex,oldItemDom,columnsToUpdate),me.getRowClass||!me.getRowFromItem(oldItemDom)||1&updateTypeFlags||1<oldItemDom.tBodies[0].childNodes.length){if(elData=oldItemDom._extData,newItemDom=me.createRowElement(record,me.indexOfRow(record),columnsToUpdate),Ext.fly(oldItemDom,"_internal").hasCls(overItemCls)&&Ext.fly(newItemDom).addCls(overItemCls),Ext.isIE9m&&oldItemDom.mergeAttributes)oldItemDom.mergeAttributes(newItemDom,!0);else for(attLen=(newAttrs=newItemDom.attributes).length,attrIndex=0;attrIndex<attLen;attrIndex++)"id"!==(attName=newAttrs[attrIndex].name)&&oldItemDom.setAttribute(attName,newAttrs[attrIndex].value);for(elData&&(elData.isSynchronized=!1),columns.length&&(oldDataRow=me.getRow(oldItemDom))&&me.updateColumns(oldDataRow,Ext.fly(newItemDom).down(me.rowSelector,!0),columnsToUpdate);rowTpl&&(!rowTpl.syncContent||!1!==rowTpl.syncContent(oldItemDom,newItemDom,changedFieldNames?columnsToUpdate:null));)rowTpl=rowTpl.nextTpl}else for(i=0,len=columnsToUpdate.length;i<len;i++)fieldName=(column=columnsToUpdate[i]).dataIndex,value=record.get(fieldName),cell=Ext.fly(oldItemDom).down(column.getCellSelector(),!0),cellFly.attach(cell),!clearDirty&&markDirty&&(record.isModified(column.dataIndex)?cellFly.addCls(dirtyCls):cellFly.removeCls(dirtyCls)),scope=column.usingDefaultRenderer?column:column.scope,column.updater?Ext.callback(column.updater,scope,[cell,value,record,me,me.dataSource],0,column,ownerCt):(column.renderer&&(value=Ext.callback(column.renderer,scope,[value,null,record,0,0,me.dataSource,me],0,column,ownerCt)),value=(emptyValue=null==value||""===value)?column.emptyCellText:value,column.producesHTML||emptyValue?cellFly.down(me.innerSelector,!0).innerHTML=value:cellFly.down(me.innerSelector,!0).childNodes[0].data=value),me.highlightClass&&(Ext.fly(cell).addCls(me.highlightClass),me.changedCells||(me.self.prototype.changedCells=[],me.prototype.clearChangedTask=new Ext.util.DelayedTask(me.clearChangedCells,me.prototype),me.clearChangedTask.delay(me.unhighlightDelay)),me.changedCells.push({cell:cell,cls:me.highlightClass,expires:Ext.Date.now()+1e3}));clearDirty&&markDirty&&!record.dirty&&Ext.fly(oldItemDom,"_internal").select("."+dirtyCls).removeCls(dirtyCls),hasVariableRowHeight&&Ext.suspendLayouts(),me.fireEvent("itemupdate",record,recordIndex,oldItemDom),hasVariableRowHeight&&(me.ownerGrid.updateLayout(),Ext.resumeLayouts(!0))}},afterComponentLayout:function(){var scroller;this.callParent(arguments),this.touchScroll&&!this.bufferedRenderer&&(scroller=this.getScrollable())&&scroller.refresh()},clearChangedCells:function(){for(var changedCell,me=this,now=Ext.Date.now(),len=me.changedCells.length;0<len&&(changedCell=me.changedCells[0]).expires<=now;)Ext.fly(changedCell.cell).removeCls(changedCell.highlightClass),Ext.Array.erase(me.changedCells,0,1),len--;len&&me.clearChangedTask.delay(me.unhighlightDelay)},updateColumns:function(oldRowDom,newRowDom,columnsToUpdate){var newAttrs,attLen,attName,attrIndex,colIndex,column,oldCell,newCell,colCount=columnsToUpdate.length,cellSelector=this.getCellSelector();if(oldRowDom.mergeAttributes)oldRowDom.mergeAttributes(newRowDom,!0);else for(attLen=(newAttrs=newRowDom.attributes).length,attrIndex=0;attrIndex<attLen;attrIndex++)"id"!==(attName=newAttrs[attrIndex].name)&&oldRowDom.setAttribute(attName,newAttrs[attrIndex].value);for(colIndex=0;colIndex<colCount;colIndex++)column=columnsToUpdate[colIndex],cellSelector=this.getCellSelector(column),oldCell=Ext.fly(oldRowDom).selectNode(cellSelector),newCell=Ext.fly(newRowDom).selectNode(cellSelector),Ext.fly(oldCell).syncContent(newCell)},shouldUpdateCell:function(record,column,changedFieldNames){return column.shouldUpdateCell(record,changedFieldNames)},refresh:function(){var scroller,me=this,restoreFocus=me.saveFocusState();me.destroying||(me.callParent(arguments),restoreFocus(),me.headerCt.setSortState(),me.touchScroll&&me.el&&!me.all.getCount()&&me.headerCt&&me.headerCt.tooNarrow&&(scroller=me.getScrollable())&&scroller.isTouchScroller&&scroller.setSize({x:me.headerCt.getTableWidth(),y:scroller.getSize().y}))},processContainerEvent:function(e){var cmp=Ext.Component.fromElement(e.target.parentNode);if(cmp&&cmp.up(this.ownerCt))return!1},processItemEvent:function(record,item,rowIndex,e){var i,cellIndex,result,feature,column,row,cell,me=this,self=me.self,map=self.EventMap,type=e.type,features=me.features,len=features.length,eventPosition=e.position=me.eventPosition||(me.eventPosition=new Ext.grid.CellContext);if(Ext.isIE&&"mouseup"===type&&!e.within(me.el))return!1;if(-1===me.indexInStore(item))return this.processSpecialEvent(e),e.preventDefault(),!1;if(row=eventPosition.rowElement=Ext.fly(item).down(me.rowSelector,!0),cell=e.getTarget(me.getCellSelector(),row),type=self.TouchEventMap[type]||type,cell){if(!cell.parentNode)return!1;column=me.getHeaderByCell(cell),cellIndex=me.ownerCt.getColumnManager().getHeaderIndex(column)}else cellIndex=-1;if(eventPosition.setAll(me,rowIndex,column?me.getVisibleColumnManager().getHeaderIndex(column):-1,record,column),eventPosition.cellElement=cell,!1===(result=me.fireEvent("uievent",type,me,cell,rowIndex,cellIndex,e,record,row))||!1===me.callParent(arguments))return!1;for(i=0;i<len;++i)if((feature=features[i]).wrapsItem&&!1===feature.vetoEvent(record,row,rowIndex,e))return me.processSpecialEvent(e),!1;return cell&&"mouseover"!==type&&"mouseout"!==type&&(result=!(!1===me["onBeforeCell"+map[type]](cell,cellIndex,record,row,rowIndex,e)||!1===me.fireEvent("beforecell"+type,me,cell,cellIndex,record,row,rowIndex,e)||!1===me["onCell"+map[type]](cell,cellIndex,record,row,rowIndex,e)||!1===me.fireEvent("cell"+type,me,cell,cellIndex,record,row,rowIndex,e))),!1!==result&&(result=me.fireEvent("row"+type,me,record,row,rowIndex,e)),result},processSpecialEvent:function(e){var i,feature,prefix,featureTarget,beforeArgs,args,me=this,features=me.features,ln=features.length,type=e.type,panel=me.ownerCt;if(me.callParent(arguments),"mouseover"!==type&&"mouseout"!==type){for(type=me.self.TouchEventMap[type]||type,i=0;i<ln;i++)if((feature=features[i]).hasFeatureEvent&&(featureTarget=e.getTarget(feature.eventSelector,me.getTargetEl()))&&(prefix=feature.eventPrefix,beforeArgs=feature.getFireEventArgs("before"+prefix+type,me,featureTarget,e),args=feature.getFireEventArgs(prefix+type,me,featureTarget,e),!1===me.fireEvent.apply(me,beforeArgs)||!1===panel.fireEvent.apply(panel,beforeArgs)||!1===me.fireEvent.apply(me,args)||!1===panel.fireEvent.apply(panel,args)))return!1;return!0}},onCellMouseDown:Ext.emptyFn,onCellLongPress:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onCellKeyUp:Ext.emptyFn,onCellKeyPress:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellLongPress:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,onBeforeCellKeyUp:Ext.emptyFn,onBeforeCellKeyPress:Ext.emptyFn,expandToFit:function(header){this.autoSizeColumn(header)},autoSizeColumn:function(header){if(Ext.isNumber(header)&&(header=this.getGridColumns()[header]),header){if(header.isGroupHeader)return void header.autoSize();delete header.flex,header.setWidth(this.getMaxContentWidth(header))}},getMaxContentWidth:function(header){var maxWidth,me=this,cells=me.el.query(header.getCellInnerSelector()),originalWidth=header.getWidth(),i=0,ln=cells.length,columnSizer=me.body.select(me.getColumnSizerSelector(header)),max=Math.max,widthAdjust=0;for(0<ln&&(Ext.supports.ScrollWidthInlinePaddingBug&&(widthAdjust+=me.getCellPaddingAfter(cells[0])),me.columnLines&&(widthAdjust+=Ext.fly(cells[0].parentNode).getBorderWidth("lr"))),columnSizer.setWidth(1),header.textEl.setStyle({"text-overflow":"clip",display:"table-cell"}),maxWidth=header.textEl.dom.offsetWidth+header.titleEl.getPadding("lr"),header.textEl.setStyle({"text-overflow":"",display:""});i<ln;i++)maxWidth=max(maxWidth,cells[i].scrollWidth);return maxWidth=max((maxWidth+=widthAdjust)+1,40),columnSizer.setWidth(originalWidth),maxWidth},getPositionByEvent:function(e){var me=this,cellNode=e.getTarget(me.cellSelector),rowNode=e.getTarget(me.itemSelector),record=me.getRecord(rowNode),header=me.getHeaderByCell(cellNode);return me.getPosition(record,header)},getHeaderByCell:function(cell){return!!cell&&this.ownerCt.getVisibleColumnManager().getHeaderById(Ext.getDom(cell).getAttribute("data-columnId"))},walkCells:function(pos,direction,verifierFn,scope){var me=this,result=pos.clone(),lockingPartner=me.lockingPartner&&me.lockingPartner.grid.isVisible()?me.lockingPartner:null,rowIdx=pos.rowIdx,maxRowIdx=me.dataSource.getCount()-1,columns=me.ownerCt.getVisibleColumnManager().getColumns();switch(direction.toLowerCase()){case"right":if(pos.isLastColumn()){if(maxRowIdx<(rowIdx=lockingPartner&&me.isLockedView?rowIdx:rowIdx+1))return!1;lockingPartner&&(result.view=lockingPartner),result.setPosition(rowIdx,0)}else result.navigate(1);break;case"left":if(pos.isFirstColumn()){if((rowIdx=lockingPartner&&me.isNormalView?rowIdx:rowIdx-1)<0)return!1;lockingPartner&&(columns=(result.view=lockingPartner).getVisibleColumnManager().getColumns()),result.setPosition(rowIdx,columns[columns.length-1])}else result.navigate(-1);break;case"up":if(0===rowIdx)return!1;result.setRow(rowIdx-1);break;case"down":if(rowIdx===maxRowIdx)return!1;result.setRow(rowIdx+1)}return(!verifierFn||!0===verifierFn.call(scope||me,result))&&result},walkRows:function(startRow,distance){var node,store=this.dataSource,moved=0,lastValid=startRow,limit=distance<0?0:store.getCount()-1,increment=limit?1:-1,result=startRow;do{if(limit?limit<=result:result<=limit)return lastValid||limit;result+=increment,(node=Ext.fly(this.getRow(result)))&&node.isVisible(!0)&&(moved+=increment,lastValid=result)}while(moved!==distance);return result},walkRecs:function(startRec,distance){var node,rec,store=this.dataSource,moved=0,lastValid=startRec,limit=distance<0?0:(store.isBufferedStore?store.getTotalCount():store.getCount())-1,increment=limit?1:-1,testIndex=store.indexOf(startRec);do{if(limit?limit<=testIndex:testIndex<=limit)return lastValid;testIndex+=increment,!(rec=store.getAt(testIndex)).isCollapsedPlaceholder&&(node=Ext.fly(this.getNodeByRecord(rec)))&&node.isVisible(!0)&&(moved+=increment,lastValid=rec)}while(moved!==distance);return lastValid},getFirstVisibleRowIndex:function(){var me=this,count=me.dataSource.isBufferedStore?me.dataSource.getTotalCount():me.dataSource.getCount(),result=me.indexOf(me.all.first())-1;do{if((result+=1)===count)return}while(!Ext.fly(me.getRow(result)).isVisible(!0));return result},getLastVisibleRowIndex:function(){var result=this.indexOf(this.all.last());do{if(-1===--result)return}while(!Ext.fly(this.getRow(result)).isVisible(!0));return result},getHeaderCt:function(){return this.headerCt},getPosition:function(record,header){return new Ext.grid.CellContext(this).setPosition(record,header)},onDestroy:function(){var len,i,me=this,features=me.featuresMC;if(features)for(i=0,len=features.getCount();i<len;++i)features.getAt(i).destroy();me.cellFly=me.featuresMC=null,me.callParent(arguments),me.all.destroy(),me.body.destroy(),me.all=me.body=me.body.el=null,me.grid=me.ownerGrid=me.headerCt=me.panel=null,me.selection=me.actionPosition=me.eventPosition=me.lastFocused=null,me.actionRow=me.cellTpl=me.rowTpl=me.bufferedRenderer=null},onReplace:function(store,startIndex,oldRecords,newRecords){var restoreFocus,me=this,bufferedRenderer=me.bufferedRenderer;me.rendered&&bufferedRenderer?(restoreFocus=me.saveFocusState(),bufferedRenderer.onReplace(store,startIndex,oldRecords,newRecords),restoreFocus()):me.callParent(arguments),me.setPendingStripe(startIndex)},onResize:function(width,height,oldWidth,oldHeight){var bufferedRenderer=this.bufferedRenderer;bufferedRenderer&&bufferedRenderer.onViewResize(this,width,height,oldWidth,oldHeight),this.callParent([width,height])},onAdd:function(store,records,index){var me=this,bufferedRenderer=me.bufferedRenderer;me.rendered&&bufferedRenderer&&(bufferedRenderer.bodyTop||me.dataSource.getCount()+records.length>=bufferedRenderer.viewSize)?bufferedRenderer.onReplace(store,index,[],records):me.callParent(arguments),me.setPendingStripe(index)},onRemove:function(store,records,index){var restoreFocus,me=this,bufferedRenderer=me.bufferedRenderer;me.rendered&&bufferedRenderer&&me.dataSource.getCount()+records.length>=bufferedRenderer.viewSize?(restoreFocus=me.saveFocusState(),bufferedRenderer.onReplace(store,index,records,[]),restoreFocus()):me.callParent(arguments),me.setPendingStripe(index)},saveFocusState:function(){var refocusRow,refocusCol,me=this,store=me.dataSource,actionableMode=me.actionableMode,navModel=me.getNavigationModel(),focusPosition=actionableMode?me.actionPosition:navModel.getPosition(!0);return focusPosition?(focusPosition=focusPosition.clone(),actionableMode&&me.ownerGrid.setActionableMode(!1),me.el.dom.focus(),navModel.setPosition(),function(){store.getCount()?(refocusRow=Math.min(focusPosition.rowIdx,me.all.getCount()-1),refocusCol=Math.min(focusPosition.colIdx,me.getVisibleColumnManager().getColumns().length-1),focusPosition=new Ext.grid.CellContext(me).setPosition(store.contains(focusPosition.record)?focusPosition.record:refocusRow,refocusCol),actionableMode?me.ownerGrid.setActionableMode(!0,focusPosition):(me.cellFocused=!0,navModel.setPosition(focusPosition,null,null,null,!0))):focusPosition.column.focus()}):Ext.emptyFn},onDataRefresh:function(store){var owner=this.ownerCt;owner&&2===owner.isCollapsingOrExpanding?owner.on("expand",this.onDataRefresh,this,{single:!0}):this.callParent([store])},getViewRange:function(){return this.bufferedRenderer?this.bufferedRenderer.getViewRange():this.callParent()},setPendingStripe:function(index){var current=this.stripeOnUpdate;current=null===current?index:Math.min(current,index),this.stripeOnUpdate=current},onEndUpdate:function(){var me=this,stripeOnUpdate=me.stripeOnUpdate,startIndex=me.all.startIndex;me.rendered&&(stripeOnUpdate||0===stripeOnUpdate)&&(stripeOnUpdate<startIndex&&(stripeOnUpdate=startIndex),me.doStripeRows(stripeOnUpdate),me.stripeOnUpdate=null),me.callParent(arguments)},doStripeRows:function(startRow,endRow){var rows,rowsLn,i,row,me=this;if(me.rendered&&me.stripeRows)for(i=0,rowsLn=(rows=me.getNodes(startRow,endRow)).length;i<rowsLn;i++)(row=rows[i]).className=row.className.replace(me.rowClsRe," "),++startRow%2==0&&(row.className+=" "+me.altRowCls)},hasActiveFeature:function(){return this.isGrouping&&this.store.isGrouped()||this.isRowWrapped},getCellPaddingAfter:function(cell){return Ext.fly(cell).getPadding("r")},privates:{refreshScroll:function(){var bufferedRenderer=this.bufferedRenderer;bufferedRenderer?bufferedRenderer.refreshSize():this.callParent()},collectNodes:function(targetEl){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},setActionableMode:function(enabled,position){var focusRow,focusCell,tabbableChildren,activeEl,i,record,isActionable,lockingPartner,doRestoreFocus,me=this,navModel=me.getNavigationModel(),actionables=me.grid.actionables,len=actionables.length;if(me.actionableMode===enabled&&(!enabled||position.isEqual(me.actionPosition)))return!1;if(enabled){if(position&&(position.view===me||position.view===(lockingPartner=me.lockingPartner)&&lockingPartner.actionableMode)){if(record=(position=position.clone()).record,me.grid.ensureVisible(record,{column:position.column}),focusRow=me.all.item(position.rowIdx),!lockingPartner)for(focusCell=Ext.fly(focusRow).down(position.column.getCellSelector()),i=0;i<len;i++)isActionable=isActionable||actionables[i].activateCell(position);if(lockingPartner||focusCell.restoreTabbableState(!0).length||isActionable){for(i=0;i<len;i++)actionables[i].activateRow&&actionables[i].activateRow(focusRow);if(lockingPartner||(tabbableChildren=focusCell.findTabbableElements()).length){if(focusRow.restoreTabbableState(!0),lockingPartner)return me.actionableMode=!0,!(me.actionPosition=null);if(tabbableChildren)return me.actionRow=focusRow,me.actionableMode=me.ownerGrid.actionableMode=!0,navModel.setPosition(),navModel.actionPosition=me.actionPosition=position,Ext.fly(tabbableChildren[0]).focus(),!0}}}return!1}for(activeEl=Ext.fly(Ext.Element.getActiveElement()),(doRestoreFocus=me.el.contains(activeEl))&&(record=me.actionPosition&&me.actionPosition.record),i=0;i<len;i++)actionables[i].deactivate&&actionables[i].deactivate();me.actionRow&&me.actionRow.saveTabbableState({skipSelf:!0,includeSaved:!1}),me.actionableMode=me.ownerGrid.actionableMode=!1,me.actionPosition=navModel.actionPosition=me.actionRow=null,doRestoreFocus&&navModel.setPosition(new Ext.grid.CellContext(me).setPosition(record||0,me.getHeaderByCell(activeEl.findParent(me.getCellSelector()))||0))},onRowExit:function(prevRow,newRow,forward){var i,rowIdx,me=this,direction=forward?"nextSibling":"previousSibling",lockingPartner=me.lockingPartner,actionables=me.grid.actionables,len=actionables.length;for(me.refreshing=me.actionableModeTabbing=!0,i=0;i<len;i++)actionables[i].deactivate&&actionables[i].deactivate();lockingPartner&&lockingPartner.grid.isVisible()&&(rowIdx=me.all.indexOf(prevRow),forward?me.isNormalView&&rowIdx++:(lockingPartner.getVisibleColumnManager().getColumns().length,me.isLockedView&&rowIdx--),me.actionPosition=null,newRow=(me=lockingPartner).all.item(rowIdx,!0)),me.findFirstActionableElement(newRow,direction,forward),me.refreshing=me.actionableModeTabbing=!1,Ext.fly(prevRow).saveTabbableState({skipSelf:!0,includeSaved:!1})},findFirstActionableElement:function(focusRow,direction,forward){var focusCell,focusTarget,i,j,column,isActionable,tabbableChildren,me=this,columns=me.getVisibleColumnManager().getColumns(),columnCount=columns.length,actionables=me.grid.actionables,actionableCount=actionables.length,position=new Ext.grid.CellContext(me);if(focusRow){for(position.setRow(focusRow),i=0;i<actionableCount;i++)actionables[i].activateRow&&actionables[i].activateRow(focusRow);for(i=forward?0:columnCount-1;(forward?i<columnCount:-1<i)&&!focusTarget;i+=forward?1:-1){for(column=columns[i],position.setColumn(column),focusCell=Ext.fly(focusRow).down(position.column.getCellSelector()),j=0;j<actionableCount;j++)isActionable=isActionable||actionables[j].activateCell(position);(focusCell.restoreTabbableState(!0).length||isActionable)&&(tabbableChildren=focusCell.findTabbableElements(),me.actionRow=Ext.get(focusRow),me.actionRow.restoreTabbableState(!0),focusTarget=tabbableChildren[forward?0:tabbableChildren.length-1])}focusTarget?(me.actionPosition=me.getNavigationModel().actionPosition=position,Ext.fly(focusTarget).focus()):me.onRowExit(focusRow,me.all.item(position.rowIdx+(forward?1:-1)),forward)}else me.grid.ensureVisible(forward?0:me.dataSource.getCount()-1,{callback:function(success,record,row){success?me.findFirstActionableElement(row,direction,forward):me.ownerGrid.setActionableMode(!1)}})}}}),Ext.define("Ext.grid.plugin.HeaderResizer",{extend:Ext.plugin.Abstract,alias:"plugin.gridheaderresizer",disabled:!1,config:{dynamic:!1},colHeaderCls:Ext.baseCSSPrefix+"column-header",minColWidth:40,maxColWidth:1e3,eResizeCursor:"col-resize",init:function(headerCt){var me=this;(me.headerCt=headerCt).on("render",me.afterHeaderRender,me,{single:me}),me.minColWidth||(me.self.prototype.minColWidth=Ext.grid.column.Column.prototype.minWidth)},destroy:function(){var me=this,tracker=me.tracker;tracker&&(tracker.destroy(),me.tracker=null),me.headerCt.un("render",me.afterHeaderRender,me),me.headerCt=null,me.callParent()},afterHeaderRender:function(){var me=this,headerCt=me.headerCt,el=headerCt.el;headerCt.mon(el,"mousemove",me.onHeaderCtMouseMove,me),me.markerOwner=me.ownerGrid=me.headerCt.up("tablepanel").ownerGrid,me.tracker=new Ext.dd.DragTracker({disabled:me.disabled,onBeforeStart:me.onBeforeStart.bind(me),onStart:me.onStart.bind(me),onDrag:me.onDrag.bind(me),onEnd:me.onEnd.bind(me),tolerance:3,autoStart:300,el:el})},onHeaderCtMouseMove:function(e){var me=this;me.headerCt.dragging||me.disabled?me.activeHd&&(me.activeHd.el.dom.style.cursor="",delete me.activeHd):"touch"!==e.pointerType&&me.findActiveHeader(e)},findActiveHeader:function(e){var overHeader,resizeHeader,headers,header,me=this,headerCt=me.headerCt,headerEl=e.getTarget("."+me.colHeaderCls,headerCt.el,!0),ownerGrid=me.ownerGrid,ownerLockable=ownerGrid.ownerLockable;if(me.activeHd=null,headerEl){if((overHeader=Ext.getCmp(headerEl.id)).isAtEndEdge(e)){if(1===headerCt.visibleColumnManager.getColumns().length&&headerCt.forceFit)return;resizeHeader=overHeader}else overHeader.isAtStartEdge(e)&&(headers=headerCt.visibleColumnManager.getColumns(),header=overHeader.isGroupHeader?overHeader.getGridColumns()[0]:overHeader,(resizeHeader=headers[Ext.Array.indexOf(headers,header)-1])||!ownerLockable||ownerGrid.isLocked||(resizeHeader=(headers=ownerLockable.lockedGrid.headerCt.visibleColumnManager.getColumns())[headers.length-1]));resizeHeader?(resizeHeader.isGroupHeader&&(resizeHeader=(headers=resizeHeader.getGridColumns())[headers.length-1]),resizeHeader&&!resizeHeader.fixed&&!1!==resizeHeader.resizable&&(me.activeHd=resizeHeader,overHeader.el.dom.style.cursor=me.eResizeCursor,overHeader.triggerEl&&(overHeader.triggerEl.dom.style.cursor=me.eResizeCursor))):(overHeader.el.dom.style.cursor="",overHeader.triggerEl&&(overHeader.triggerEl.dom.style.cursor=""))}return me.activeHd},onBeforeStart:function(e){var me=this;return me.dragHd=me.activeHd||"touch"===e.pointerType&&me.findActiveHeader(e),me.dragHd&&!me.headerCt.dragging?(me.xDelta=me.dragHd.getX()+me.dragHd.getWidth()-me.tracker.getXY()[0],me.tracker.constrainTo=me.getConstrainRegion(),!0):me.headerCt.dragging=!1},getConstrainRegion:function(){var nextHd,result,me=this,dragHdEl=me.dragHd.el,ownerGrid=me.ownerGrid,widthModel=ownerGrid.getSizeModel().width,maxColWidth=widthModel.shrinkWrap?me.headerCt.getWidth()-me.headerCt.visibleColumnManager.getColumns().length*me.minColWidth:me.maxColWidth;return me.headerCt.forceFit?(nextHd=me.dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])"))&&me.headerInSameGrid(nextHd)&&(maxColWidth=dragHdEl.getWidth()+(nextHd.getWidth()-me.minColWidth)):ownerGrid.isLocked&&widthModel.shrinkWrap&&(maxColWidth=me.dragHd.up("[scrollerOwner]").getTargetEl().getWidth(!0)-ownerGrid.getWidth()-(ownerGrid.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*me.minColWidth+Ext.getScrollbarSize().width)),(result=me.adjustConstrainRegion(dragHdEl.getRegion(),0,0,0,me.minColWidth)).right=dragHdEl.getX()+maxColWidth,result},onStart:function(e){var x,y,markerOwner,lhsMarker,rhsMarker,markerHeight,me=this,dragHd=me.dragHd,width=dragHd.el.getWidth(),headerCt=dragHd.getRootHeaderCt();me.headerCt.dragging=!0,me.origWidth=width,me.dynamic||((markerOwner=me.markerOwner).frame&&markerOwner.resizable&&(me.gridOverflowSetting=markerOwner.el.dom.style.overflow,markerOwner.el.dom.style.overflow="hidden"),x=me.getLeftMarkerX(markerOwner),lhsMarker=markerOwner.getLhsMarker(),rhsMarker=markerOwner.getRhsMarker(),markerHeight=me.ownerGrid.body.getHeight()+headerCt.getHeight(),y=headerCt.getOffsetsTo(markerOwner)[1]-markerOwner.el.getBorderWidth("t"),lhsMarker.dom.style.cursor=me.eResizeCursor,rhsMarker.dom.style.cursor=me.eResizeCursor,lhsMarker.setLocalY(y),rhsMarker.setLocalY(y),lhsMarker.setHeight(markerHeight),rhsMarker.setHeight(markerHeight),me.setMarkerX(lhsMarker,x),me.setMarkerX(rhsMarker,x+width))},onDrag:function(e){var me=this;me.dynamic?me.doResize():me.setMarkerX(me.getMovingMarker(me.markerOwner),me.calculateDragX(me.markerOwner))},getMovingMarker:function(markerOwner){return markerOwner.getRhsMarker()},onEnd:function(e){var me=this,markerOwner=me.markerOwner;me.headerCt.dragging=!1,me.dragHd&&(me.dynamic||("gridOverflowSetting"in me&&(markerOwner.el.dom.style.overflow=me.gridOverflowSetting),me.setMarkerX(markerOwner.getLhsMarker(),-9999),me.setMarkerX(markerOwner.getRhsMarker(),-9999)),me.doResize(),"touch"!==e.pointerType?(me.dragHd=null,me.activeHd.el.dom.style.cursor=me.eResizeCursor):me.dragHd=me.activeHd=null),me.headerCt.blockNextEvent()},doResize:function(){var nextHd,me=this,dragHd=me.dragHd,offset=me.tracker.getOffset("point");dragHd&&offset[0]&&(dragHd.flex&&delete dragHd.flex,Ext.suspendLayouts(),me.adjustColumnWidth(offset[0]-me.xDelta),me.headerCt.forceFit&&((nextHd=dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])"))&&!me.headerInSameGrid(nextHd)&&(nextHd=null),nextHd&&(delete nextHd.flex,nextHd.setWidth(nextHd.getWidth()-offset[0]))),Ext.resumeLayouts(!0))},headerInSameGrid:function(header){var grid=this.dragHd.up("tablepanel");return!!header.up(grid)},disable:function(){var tracker=this.tracker;this.disabled=!0,tracker&&tracker.disable()},enable:function(){var tracker=this.tracker;this.disabled=!1,tracker&&tracker.enable()},calculateDragX:function(markerOwner){return this.tracker.getXY("point")[0]+this.xDelta-markerOwner.getX()-markerOwner.el.getBorderWidth("l")},getLeftMarkerX:function(markerOwner){return this.dragHd.getX()-markerOwner.getX()-markerOwner.el.getBorderWidth("l")-1},setMarkerX:function(marker,x){marker.setLocalX(x)},adjustConstrainRegion:function(region,t,r,b,l){return region.adjust(t,r,b,l)},adjustColumnWidth:function(offsetX){this.dragHd.setWidth(this.origWidth+offsetX)}}),Ext.define("Ext.grid.header.DragZone",{extend:Ext.dd.DragZone,colHeaderSelector:"."+Ext.baseCSSPrefix+"column-header",colInnerSelector:"."+Ext.baseCSSPrefix+"column-header-inner",maxProxyWidth:120,constructor:function(headerCt){var me=this;me.headerCt=headerCt,me.ddGroup=me.getDDGroup(),me.autoGroup=!0,me.callParent([headerCt.el]),me.proxy.el.addCls(Ext.baseCSSPrefix+"grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(e){if(e.getTarget(this.colInnerSelector)){var headerCmp,ddel,header=e.getTarget(this.colHeaderSelector);if(header&&(headerCmp=Ext.getCmp(header.id),!this.headerCt.dragging&&headerCmp.draggable&&!headerCmp.isAtStartEdge(e)&&!headerCmp.isAtEndEdge(e)))return(ddel=document.createElement("div")).role="presentation",ddel.innerHTML=headerCmp.text,{ddel:ddel,header:headerCmp}}return!1},onBeforeDrag:function(){return!(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=!0,this.headerCt.hideMenu(),this.callParent(arguments)},onDragDrop:function(){this.headerCt.dragging=!1,this.callParent(arguments)},afterRepair:function(){this.callParent(),this.headerCt.dragging=!1},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}}),Ext.define("Ext.grid.header.DropZone",{extend:Ext.dd.DropZone,colHeaderCls:Ext.baseCSSPrefix+"column-header",proxyOffsets:[-4,-9],constructor:function(headerCt){var me=this;me.headerCt=headerCt,me.ddGroup=me.getDDGroup(),me.autoGroup=!0,me.callParent([headerCt.el])},destroy:function(){this.callParent(),Ext.destroy(this.topIndicator,this.bottomIndicator)},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(e){return e.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){return this.topIndicator||(this.topIndicator=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"col-move-top",html:"&#160;"}),this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)),this.topIndicator},getBottomIndicator:function(){return this.bottomIndicator||(this.bottomIndicator=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"col-move-bottom",html:"&#160;"})),this.bottomIndicator},getLocation:function(e,t){var x=e.getXY()[0],region=Ext.fly(t).getRegion();return{pos:region.right-x<=(region.right-region.left)/2?"after":"before",header:Ext.getCmp(t.id),node:t}},positionIndicator:function(data,node,e){var nextHd,prevHd,topIndicator,bottomIndicator,topAnchor,bottomAnchor,topXY,bottomXY,headerCtEl,minX,maxX,allDropZones,ln,i,dropZone,me=this,dragHeader=data.header,dropLocation=me.getLocation(e,node),targetHeader=dropLocation.header,pos=dropLocation.pos;if(targetHeader!==me.lastTargetHeader||pos!==me.lastDropPos){if(nextHd=dragHeader.nextSibling("gridcolumn:not([hidden])"),prevHd=dragHeader.previousSibling("gridcolumn:not([hidden])"),me.lastTargetHeader=targetHeader,me.lastDropPos=pos,!targetHeader.draggable&&"before"===pos&&0===targetHeader.getIndex())return!1;if(data.dropLocation=dropLocation,dragHeader!==targetHeader&&("before"===pos&&nextHd!==targetHeader||"after"===pos&&prevHd!==targetHeader)&&!targetHeader.isDescendantOf(dragHeader)){for(ln=(allDropZones=Ext.dd.DragDropManager.getRelated(me)).length,i=0;i<ln;i++)(dropZone=allDropZones[i])!==me&&dropZone.invalidateDrop&&dropZone.invalidateDrop();me.valid=!0,topIndicator=me.getTopIndicator(),bottomIndicator=me.getBottomIndicator(),bottomAnchor="before"===pos?(topAnchor="bc-tl","tc-bl"):(topAnchor="bc-tr","tc-br"),topXY=topIndicator.getAlignToXY(targetHeader.el,topAnchor),bottomXY=bottomIndicator.getAlignToXY(targetHeader.el,bottomAnchor),minX=(headerCtEl=me.headerCt.el).getX()-me.indicatorXOffset,maxX=headerCtEl.getX()+headerCtEl.getWidth(),topXY[0]=Ext.Number.constrain(topXY[0],minX,maxX),bottomXY[0]=Ext.Number.constrain(bottomXY[0],minX,maxX),topIndicator.setXY(topXY),bottomIndicator.setXY(bottomXY),topIndicator.show(),bottomIndicator.show()}else me.invalidateDrop()}},invalidateDrop:function(){this.valid=!1,this.hideIndicators()},onNodeOver:function(node,dragZone,e,data){var doPosition,to,fromPanel,toPanel,me=this,from=data.header;return data.header.el.dom===node?doPosition=!1:(data.isLock=data.isUnlock=data.crossPanel=!1,to=me.getLocation(e,node).header,(doPosition=from.ownerCt===to.ownerCt)||from.ownerCt.sealed||to.ownerCt.sealed||(doPosition=!0,(fromPanel=from.up("tablepanel"))!==(toPanel=to.up("tablepanel"))&&(data.crossPanel=!0,data.isLock=toPanel.isLocked&&!fromPanel.isLocked,data.isUnlock=!toPanel.isLocked&&fromPanel.isLocked,(data.isUnlock&&!1===from.lockable||data.isLock&&!from.isLockable())&&(doPosition=!1)))),doPosition?me.positionIndicator(data,node,e):me.valid=!1,me.valid?me.dropAllowed:me.dropNotAllowed},hideIndicators:function(){this.getTopIndicator().hide(),this.getBottomIndicator().hide(),this.lastTargetHeader=this.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},getNestedHeader:function(header,first){var pos,items=header.items;return header.isGroupHeader&&items.length&&(pos=first?"last":"first",header=this.getNestedHeader(items[pos](),first)),header},onNodeDrop:function(node,dragZone,e,data){if(this.headerCt.blockNextEvent(),this.valid){var visibleToIdx,colsToMove,scrollerOwner,savedWidth,dragHeader=data.header,dropLocation=data.dropLocation,dropPosition=dropLocation.pos,targetHeader=dropLocation.header,fromCt=dragHeader.ownerCt,fromCtRoot=fromCt.getRootHeaderCt(),toCt=targetHeader.ownerCt,visibleColumnManager=this.headerCt.visibleColumnManager,visibleFromIdx=visibleColumnManager.getHeaderIndex(dragHeader);data.isLock||data.isUnlock?(scrollerOwner=fromCt.up("[scrollerOwner]"),visibleToIdx=toCt.items.indexOf(targetHeader),"after"===dropPosition&&visibleToIdx++,data.isLock?scrollerOwner.lock(dragHeader,visibleToIdx,toCt):scrollerOwner.unlock(dragHeader,visibleToIdx,toCt)):(visibleToIdx="after"===dropPosition?visibleColumnManager.getHeaderIndex(this.getNestedHeader(targetHeader,1))+1:visibleColumnManager.getHeaderIndex(this.getNestedHeader(targetHeader,0)),this.invalidateDrop(),savedWidth=dragHeader.getWidth(),Ext.suspendLayouts(),fromCt.isDDMoveInGrid=toCt.isDDMoveInGrid=!data.crossPanel,dragHeader.isGroupHeader&&targetHeader.isGroupHeader&&dragHeader.setNestedParent(targetHeader),"before"===dropPosition?targetHeader.insertNestedHeader(dragHeader):toCt["move"+dropPosition.charAt(0).toUpperCase()+dropPosition.substr(1)](dragHeader,targetHeader),0<=visibleToIdx&&(!targetHeader.isGroupHeader||targetHeader.items&&targetHeader.items.length)&&visibleFromIdx!==visibleToIdx&&(colsToMove=dragHeader.isGroupHeader?dragHeader.query(":not([hidden]):not([isGroupHeader])").length:1,visibleFromIdx<=visibleToIdx&&1<colsToMove&&(visibleToIdx-=colsToMove),toCt.getRootHeaderCt().grid.view.moveColumn(visibleFromIdx,visibleToIdx,colsToMove)),fromCtRoot.fireEvent("columnmove",fromCt,dragHeader,visibleFromIdx,visibleToIdx),fromCt.isDDMoveInGrid=toCt.isDDMoveInGrid=!1,toCt.isGroupHeader&&!fromCt.isGroupHeader?fromCt!==toCt&&(dragHeader.savedFlex=dragHeader.flex,delete dragHeader.flex,dragHeader.width=savedWidth):fromCt.isGroupHeader||dragHeader.savedFlex&&(dragHeader.flex=dragHeader.savedFlex,delete dragHeader.width),Ext.resumeLayouts(!0))}}}),Ext.define("Ext.grid.plugin.HeaderReorderer",{extend:Ext.plugin.Abstract,alias:"plugin.gridheaderreorderer",init:function(headerCt){(this.headerCt=headerCt).on({boxready:this.onHeaderCtRender,single:!0,scope:this})},destroy:function(){var me=this;me.headerCt.un("boxready",me.onHeaderCtRender,me),Ext.destroy(me.dragZone,me.dropZone),me.headerCt=me.dragZone=me.dropZone=null,me.callParent()},onHeaderCtRender:function(){var me=this;me.dragZone=new Ext.grid.header.DragZone(me.headerCt),me.dropZone=new Ext.grid.header.DropZone(me.headerCt),me.disabled&&me.dragZone.disable()},enable:function(){this.disabled=!1,this.dragZone&&this.dragZone.enable()},disable:function(){this.disabled=!0,this.dragZone&&this.dragZone.disable()}}),Ext.define("Ext.grid.header.Container",{extend:Ext.container.Container,mixins:[Ext.util.FocusableContainer],border:!0,alias:"widget.headercontainer",baseCls:Ext.baseCSSPrefix+"grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",detachOnRemove:!1,defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",headerOpenCls:Ext.baseCSSPrefix+"column-header-open",menuSortAscCls:Ext.baseCSSPrefix+"hmenu-sort-asc",menuSortDescCls:Ext.baseCSSPrefix+"hmenu-sort-desc",menuColsIcon:Ext.baseCSSPrefix+"cols-icon",blockEvents:!1,dragging:!1,sortOnClick:!0,enableFocusableContainer:!1,childHideCount:0,sortable:!0,enableColumnHide:!0,initComponent:function(){var me=this;me.plugins=me.plugins||[],me.defaults=me.defaults||{},me.isColumn||(me.enableColumnResize&&(me.resizer=new Ext.grid.plugin.HeaderResizer,me.plugins.push(me.resizer)),me.enableColumnMove&&(me.reorderer=new Ext.grid.plugin.HeaderReorderer,me.plugins.push(me.reorderer))),me.isColumn&&!me.isGroupHeader?me.items&&0!==me.items.length||(me.isContainer=me.isFocusableContainer=!1,me.focusable=!0,me.layout={type:"container",calculate:Ext.emptyFn}):(me.layout=Ext.apply({type:"gridcolumn",align:"stretch"},me.initialConfig.layout),me.defaults.columnLines=me.columnLines,me.isGroupHeader?(me.visibleColumnManager=new Ext.grid.ColumnManager(!0,me),me.columnManager=new Ext.grid.ColumnManager(!1,me)):(me.isRootHeader=!0,me.hiddenHeaders||(me.enableFocusableContainer=!0,me.ariaRole="rowgroup"),me.columnManager=new Ext.grid.ColumnManager(!1,me),me.visibleColumnManager=new Ext.grid.ColumnManager(!0,me),me.grid&&(me.grid.columnManager=me.columnManager,me.grid.visibleColumnManager=me.visibleColumnManager))),me.menuTask=new Ext.util.DelayedTask(me.updateMenuDisabledState,me),me.callParent()},insertNestedHeader:function(moveHeader){var toIndex,fromCt=moveHeader.ownerCt,toCt=this.ownerCt,layoutOwner=toCt.layout.owner;fromCt&&(this.isGroupHeader&&!toCt.isNestedParent&&(toIndex=layoutOwner.items.indexOf(this)),fromCt.remove(moveHeader,!1)),void 0===toIndex&&(toIndex=layoutOwner.items.indexOf(this)),layoutOwner.insert(toIndex,moveHeader)},isNested:function(){return!!this.getRootHeaderCt().down("[isNestedParent]")},isNestedGroupHeader:function(){var items=this.getRefOwner().query(">:not([hidden])");return 1===items.length&&items[0]===this},maybeShowNestedGroupHeader:function(){var item,items=this.items;items&&1===items.length&&(item=items.getAt(0))&&item.hidden&&item.show()},setNestedParent:function(target){target.isNestedParent=!1,target.ownerCt.isNestedParent=!(1!==this.ownerCt.items.length||1!==target.ownerCt.items.length)},initEvents:function(){var onHeaderCtEvent,listeners,me=this;me.callParent(),me.isColumn||me.isGroupHeader||(listeners={click:onHeaderCtEvent=me.onHeaderCtEvent,dblclick:onHeaderCtEvent,contextmenu:onHeaderCtEvent,mouseover:me.onHeaderCtMouseOver,mouseout:me.onHeaderCtMouseOut,scope:me},Ext.supports.Touch&&(listeners.longpress=me.onHeaderCtLongPress),me.mon(me.el,listeners))},onHeaderCtEvent:function(e,t){var header,targetEl,activeHeader,me=this,headerEl=me.getHeaderElByEvent(e);me.longPressFired?me.longPressFired=!1:headerEl&&!me.blockEvents&&(header=Ext.getCmp(headerEl.id))&&(targetEl=header[header.clickTargetName],(header.isGroupHeader||header.isContainer)&&!e.within(targetEl)||("click"===e.type||"tap"===e.type?(activeHeader=header.onTitleElClick(e,targetEl,me.sortOnClick))?me.onHeaderTriggerClick(activeHeader,e,"touch"===e.pointerType?activeHeader.el:activeHeader.triggerEl):me.onHeaderClick(header,e,t):"contextmenu"===e.type?me.onHeaderContextMenu(header,e,t):"dblclick"===e.type&&header.resizable&&header.onTitleElDblClick(e,targetEl.dom)))},blockNextEvent:function(){this.blockEvents=!0,Ext.asap(this.unblockEvents,this)},unblockEvents:function(){this.blockEvents=!1},onHeaderCtMouseOver:function(e,t){var headerEl,header,targetEl;e.within(this.el,!0)||(header=(headerEl=e.getTarget("."+Ext.grid.column.Column.prototype.baseCls))&&Ext.getCmp(headerEl.id))&&(targetEl=header[header.clickTargetName],e.within(targetEl)&&header.onTitleMouseOver(e,targetEl.dom))},onHeaderCtMouseOut:function(e,t){var header,targetEl,headerSelector="."+Ext.grid.column.Column.prototype.baseCls,outHeaderEl=e.getTarget(headerSelector),inHeaderEl=e.getRelatedTarget(headerSelector);outHeaderEl!==inHeaderEl&&(outHeaderEl&&(header=Ext.getCmp(outHeaderEl.id))&&(targetEl=header[header.clickTargetName],header.onTitleMouseOut(e,targetEl.dom)),inHeaderEl&&(header=Ext.getCmp(inHeaderEl.id))&&(targetEl=header[header.clickTargetName],header.onTitleMouseOver(e,targetEl.dom)))},onHeaderCtLongPress:function(e){var headerEl=this.getHeaderElByEvent(e),header=Ext.getCmp(headerEl.id);header.menuDisabled||(this.longPressFired=!0,this.showMenuBy(e,headerEl,header))},getHeaderElByEvent:function(e){return e.getTarget("."+Ext.grid.column.Column.prototype.baseCls)},isLayoutRoot:function(){return!this.hiddenHeaders&&this.callParent()},getRootHeaderCt:function(){return this.isRootHeader?this:this.up("[isRootHeader]")},onDestroy:function(){var me=this;me.menu&&me.menu.un("hide",me.onMenuHide,me),me.menuTask.cancel(),me.callParent(),Ext.destroy(me.visibleColumnManager,me.columnManager,me.menu),me.columnManager=me.visibleColumnManager=null},applyColumnsState:function(columns,storeState){if(columns&&columns.length){var c,col,columnState,index,me=this,items=me.items.items,count=items.length,i=0,length=columns.length,moved=!1,newOrder=[],stateHash={},newCols=[];for(c=0;c<length;c++)(columnState=columns[c]).index=c,stateHash[columnState.id]=columnState;for(i=0;i<count;i++)(columnState=stateHash[(col=items[i]).getStateId()])?(i!==(index=columnState.index)&&(moved=!0),(newOrder[index]=col).applyColumnState&&col.applyColumnState(columnState,storeState)):newCols.push({index:i,column:col});if(newOrder=Ext.Array.clean(newOrder),length=newCols.length)for(i=0;i<length;i++)(index=(columnState=newCols[i]).index)<newOrder.length?(moved=!0,Ext.Array.splice(newOrder,index,0,columnState.column)):newOrder.push(columnState.column);moved&&(me.applyingState=!0,me.removeAll(!1),delete me.applyingState,me.add(newOrder),me.purgeCache())}},getColumnsState:function(){var state,columns=[];return this.items.each(function(col){(state=col.getColumnState&&col.getColumnState())&&columns.push(state)}),columns},onAdd:function(c){this.callParent(arguments),this.onHeadersChanged(c,this.isDDMoveInGrid)},move:function(fromIdx,toIdx){var headerToMove,items=this.items;fromIdx.isComponent?(headerToMove=fromIdx,fromIdx=items.indexOf(headerToMove)):headerToMove=items.getAt(fromIdx),headerToMove.visibleFromIdx=this.getRootHeaderCt().visibleColumnManager.indexOf(headerToMove),this.callParent(arguments)},onMove:function(headerToMove,fromIdx,toIdx){var visibleToIdx,gridHeaderCt=this.getRootHeaderCt(),gridVisibleColumnManager=gridHeaderCt.visibleColumnManager,numColsToMove=1;this.onHeadersChanged(headerToMove,!0),(visibleToIdx=gridVisibleColumnManager.indexOf(headerToMove))>=headerToMove.visibleFromIdx&&visibleToIdx++,this.callParent(arguments),headerToMove.isGroupHeader&&(numColsToMove=headerToMove.visibleColumnManager.getColumns().length),gridHeaderCt.onHeaderMoved(headerToMove,numColsToMove,headerToMove.visibleFromIdx,visibleToIdx)},maybeContinueRemove:function(){var me=this;return me.isGroupHeader&&!me.applyingState&&!me.isNestedParent&&me.ownerCt&&!me.items.getCount()},onRemove:function(c,isDestroying){var me=this,ownerCt=me.ownerCt;c.lastHiddenHeader;me.callParent([c,isDestroying]),me.destroying||(me.isDDMoveInGrid||me.onHeadersChanged(c,!1),me.maybeContinueRemove()&&(c.rendered&&me.detachComponent(c),Ext.suspendLayouts(),ownerCt.remove(me),Ext.resumeLayouts(!0)))},onHeadersChanged:function(c,isMove){var gridPanel,gridHeaderCt=this.getRootHeaderCt();this.purgeHeaderCtCache(this),gridHeaderCt&&(gridHeaderCt.onColumnsChanged(),c.isGroupHeader||(gridPanel=gridHeaderCt.ownerCt)&&!isMove&&gridPanel.onHeadersChanged(gridHeaderCt,c))},onHeaderMoved:function(header,colsToMove,fromIdx,toIdx){var me=this,gridSection=me.ownerCt;me.rendered&&(gridSection&&gridSection.onHeaderMove&&gridSection.onHeaderMove(me,header,colsToMove,fromIdx,toIdx),me.fireEvent("columnmove",me,header,fromIdx,toIdx))},onColumnsChanged:function(){var columnItemSeparator,columnItem,menu=this.menu;this.rendered&&(this.fireEvent("columnschanged",this),menu&&(columnItemSeparator=menu.child("#columnItemSeparator"))&&(columnItem=menu.child("#columnItem"),columnItemSeparator.destroy(),columnItem.destroy()))},lookupComponent:function(comp){var result=this.callParent(arguments);return result.isGroupHeader||void 0!==result.width||result.flex||(result.width=this.defaultWidth),result},setSortState:function(){var i,header,sorter,store=this.up("[store]").store,columns=this.visibleColumnManager.getColumns(),len=columns.length;for(i=0;i<len;i++)(sorter=(header=columns[i]).getSorter())?store.getSorters().contains(sorter)||(sorter=null):sorter=store.getSorters().get(header.getSortParam()),header.setSortState(sorter)},getHeaderMenu:function(){var item,menu=this.getMenu();return menu&&(item=menu.child("#columnItem"))?item.menu:null},onHeaderVisibilityChange:function(header,visible){var item,menu=this.getHeaderMenu();this.purgeHeaderCtCache(header.ownerCt),menu&&((item=this.getMenuItemForHeader(menu,header))&&item.setChecked(visible,!0),menu.isVisible()&&this.menuTask.delay(50))},updateMenuDisabledState:function(menu){var i,item,checkItem,method,columns=this.query("gridcolumn:not([hidden])"),len=columns.length;for(menu=menu||this.getMenu(),i=0;i<len;++i)item=columns[i],(checkItem=this.getMenuItemForHeader(menu,item))&&(method=item.isHideable()?"enable":"disable",checkItem.menu&&(method+="CheckChange"),checkItem[method]())},getMenuItemForHeader:function(menu,header){return header?menu.down("menucheckitem[headerId="+header.id+"]"):null},onHeaderShow:function(header){var me=this,ownerCt=me.ownerCt,lastHiddenHeader=header.lastHiddenHeader;ownerCt&&(me.forceFit&&delete me.flex,lastHiddenHeader&&!header.query("[hidden=false]").length&&(lastHiddenHeader.show(),header.lastHiddenHeader=null),me.onHeaderVisibilityChange(header,!0),ownerCt.onHeaderShow(me,header),me.fireEvent("columnshow",me,header),me.fireEvent("columnschanged",this))},onHeaderHide:function(header){var me=this,ownerCt=me.ownerCt;ownerCt&&(me.onHeaderVisibilityChange(header,!1),ownerCt.onHeaderHide(me,header),me.fireEvent("columnhide",me,header),me.fireEvent("columnschanged",this))},onHeaderResize:function(header,w){var gridSection=this.ownerCt;gridSection&&gridSection.onHeaderResize(this,header,w),this.fireEvent("columnresize",this,header,w)},onHeaderClick:function(header,e,t){var selModel=header.getView().getSelectionModel();header.fireEvent("headerclick",this,header,e,t),!1!==this.fireEvent("headerclick",this,header,e,t)&&selModel.onHeaderClick&&selModel.onHeaderClick(this,header,e)},onHeaderContextMenu:function(header,e,t){header.fireEvent("headercontextmenu",this,header,e,t),this.fireEvent("headercontextmenu",this,header,e,t)},onHeaderTriggerClick:function(header,e,t){!1!==header.fireEvent("headertriggerclick",this,header,e,t)&&!1!==this.fireEvent("headertriggerclick",this,header,e,t)&&(header.activeMenu?e.pointerType?header.activeMenu.hide():header.activeMenu.focus():this.showMenuBy(e,t,header))},showMenuBy:function(clickEvent,t,header){var sortableMth,menu=this.getMenu(),ascItem=menu.down("#ascItem"),descItem=menu.down("#descItem");clickEvent&&clickEvent.pointerType;menu.activeHeader=menu.ownerCmp=header,header.setMenuActive(menu),sortableMth=header.sortable?"enable":"disable",ascItem&&ascItem[sortableMth](),descItem&&descItem[sortableMth](),menu.autoFocus=!clickEvent||clickEvent.keyCode,menu.showBy(t,"tl-bl?"),menu.isVisible()||this.onMenuHide(menu)},hideMenu:function(){this.menu&&this.menu.hide()},onMenuHide:function(menu){menu.activeHeader.setMenuActive(!1)},purgeHeaderCtCache:function(headerCt){for(;headerCt;){if(headerCt.purgeCache(),headerCt.isRootHeader)return;headerCt=headerCt.ownerCt}},purgeCache:function(){var me=this,visibleColumnManager=me.visibleColumnManager,columnManager=me.columnManager;me.gridVisibleColumns=me.gridDataColumns=me.hideableColumns=null,visibleColumnManager&&(visibleColumnManager.invalidate(),columnManager.invalidate())},getMenu:function(){var me=this,grid=me.view&&me.view.ownerGrid;return me.menu||(me.menu=new Ext.menu.Menu({hideOnParentHide:!1,items:me.getMenuItems(),listeners:{beforeshow:me.beforeMenuShow,hide:me.onMenuHide,scope:me}}),me.fireEvent("menucreate",me,me.menu),grid&&grid.fireEvent("headermenucreate",grid,me.menu,me)),me.menu},beforeMenuShow:function(menu){var hideableColumns,insertPoint,me=this;menu.child("#columnItem")||(hideableColumns=me.enableColumnHide?me.getColumnMenu(me):null,insertPoint=me.sortable?2:0,hideableColumns&&hideableColumns.length&&menu.insert(insertPoint,[{itemId:"columnItemSeparator",xtype:"menuseparator"},{itemId:"columnItem",text:me.columnsText,iconCls:me.menuColsIcon,menu:{items:hideableColumns},hideOnClick:!1}])),me.updateMenuDisabledState(me.menu)},getMenuItems:function(){var me=this,menuItems=[],hideableColumns=me.enableColumnHide?me.getColumnMenu(me):null;return me.sortable&&(menuItems=[{itemId:"ascItem",text:me.sortAscText,iconCls:me.menuSortAscCls,handler:me.onSortAscClick,scope:me},{itemId:"descItem",text:me.sortDescText,iconCls:me.menuSortDescCls,handler:me.onSortDescClick,scope:me}]),hideableColumns&&hideableColumns.length&&(me.sortable&&menuItems.push({itemId:"columnItemSeparator",xtype:"menuseparator"}),menuItems.push({itemId:"columnItem",text:me.columnsText,iconCls:me.menuColsIcon,menu:hideableColumns,hideOnClick:!1})),menuItems},onSortAscClick:function(){this.getMenu().activeHeader.sort("ASC")},onSortDescClick:function(){this.getMenu().activeHeader.sort("DESC")},getColumnMenu:function(headerContainer){for(var item,menuItem,menuItems=[],i=0,items=headerContainer.query(">gridcolumn[hideable]"),itemsLn=items.length;i<itemsLn;i++)item=items[i],menuItem=new Ext.menu.CheckItem({text:item.menuText||item.text,checked:!item.hidden,hideOnClick:!1,headerId:item.id,menu:item.isGroupHeader?this.getColumnMenu(item):void 0,checkHandler:this.onColumnCheckChange,scope:this}),menuItems.push(menuItem);return menuItems.length?menuItems:null},onColumnCheckChange:function(checkItem,checked){var header=Ext.getCmp(checkItem.headerId);header.rendered?header[checked?"show":"hide"]():header.hidden=!checked},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var i,fullWidth=0,headers=this.getVisibleGridColumns(),headersLn=headers.length;for(i=0;i<headersLn;i++)fullWidth+=headers[i].getCellWidth()||0;return fullWidth},getVisibleGridColumns:function(){var allColumns,rootHeader,result,len,i,column,me=this;if(me.gridVisibleColumns)return me.gridVisibleColumns;for(allColumns=me.getGridColumns(),rootHeader=me.getRootHeaderCt(),result=[],len=allColumns.length,i=0;i<len;i++)(column=allColumns[i]).hidden||column.isColumnHidden(rootHeader)||(result[result.length]=column);return me.gridVisibleColumns=result},isColumnHidden:function(rootHeader){for(var owner=this.getRefOwner();owner&&owner!==rootHeader;){if(owner.hidden)return!0;owner=owner.getRefOwner()}return!1},getGridColumns:function(inResult,hiddenAncestor){if(!inResult&&this.gridDataColumns)return this.gridDataColumns;var items,i,len,item,lastVisibleColumn,result=inResult||[];if(hiddenAncestor=hiddenAncestor||this.hidden,this.items&&(items=this.items.items))for(i=0,len=items.length;i<len;i++)(item=items[i]).isGroupHeader?(item.visibleIndex=result.length,item.getGridColumns(result,hiddenAncestor)):(item.hiddenAncestor=hiddenAncestor,result.push(item));if(inResult||(this.gridDataColumns=result),!inResult&&len){for(i=0,len=result.length;i<len;i++)(item=result[i]).fullColumnIndex=i,item.isFirstVisible=item.isLastVisible=!1,item.hidden||item.hiddenAncestor||(lastVisibleColumn||(item.isFirstVisible=!0),lastVisibleColumn=item);lastVisibleColumn&&(lastVisibleColumn.isLastVisible=!0)}return result},getHideableColumns:function(){var result=this.hideableColumns;return result=result||(this.hideableColumns=this.query("[hideable]"))},getHeaderIndex:function(header){return this.columnManager||(this.columnManager=this.getRootHeaderCt().columnManager),this.columnManager.getHeaderIndex(header)},getHeaderAtIndex:function(index){return this.columnManager||(this.columnManager=this.getRootHeaderCt().columnManager),this.columnManager.getHeaderAtIndex(index)},getVisibleHeaderClosestToIndex:function(index){return this.visibleColumnManager||(this.visibleColumnManager=this.getRootHeaderCt().visibleColumnManager),this.visibleColumnManager.getVisibleHeaderClosestToIndex(index)},applyForceFit:function(header){var len,i,item,maxAvailFlexOneColumn,myWidth,view=this.view,minWidth=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,useMinWidthForFlex=!1,defaultWidth=Ext.grid.header.Container.prototype.defaultWidth,availFlex=this.el.dom.clientWidth-(view.el.dom.scrollHeight>view.el.dom.clientHeight?Ext.getScrollbarSize().width:0),totalFlex=0,items=this.getVisibleGridColumns(),hidden=header.hidden;Ext.suspendLayouts(),maxAvailFlexOneColumn=availFlex-(items.length+1)*minWidth,header.flex=null,hidden?(myWidth=header.width||header.savedWidth,header.savedWidth=null):myWidth=view.getMaxContentWidth(header),maxAvailFlexOneColumn<myWidth?(header.width=maxAvailFlexOneColumn,useMinWidthForFlex=!0):(header.width=myWidth,availFlex-=myWidth+defaultWidth,function(){for(i=0,len=items.length;i<len;i++)(item=items[i])!==header&&(item.flex=item.flex||item.width||item.getWidth(),totalFlex+=item.flex,item.width=null)}()),function(){var isCurrentHeader;for(i=0,len=items.length;i<len;i++)isCurrentHeader=(item=items[i])===header,useMinWidthForFlex&&!isCurrentHeader?(item.flex=minWidth,item.width=null):isCurrentHeader||(myWidth=item.flex||defaultWidth,item.flex=Math.max(Math.ceil(myWidth/totalFlex*availFlex),minWidth),item.width=null),item.setWidth(item.width||item.flex)}(),Ext.resumeLayouts(!0)},autoSizeColumn:function(header){var view=this.view;view&&(view.autoSizeColumn(header),this.forceFit&&this.applyForceFit(header))},getRefItems:function(deep){var result=this.callParent([deep]);return this.menu&&result.push(this.menu),result},privates:{beginChildHide:function(){++this.childHideCount},endChildHide:function(){--this.childHideCount},getFocusables:function(){return this.isRootHeader?this.getVisibleGridColumns():this.items.items},createFocusableContainerKeyNav:function(el){var me=this;return new Ext.util.KeyNav(el,{scope:me,down:me.showHeaderMenu,left:me.onFocusableContainerLeftKey,right:me.onFocusableContainerRightKey,home:me.onHomeKey,end:me.onEndKey,space:me.onHeaderActivate,enter:me.onHeaderActivate})},onHomeKey:function(e){return this.focusChild(null,!0,e)},onEndKey:function(e){return this.focusChild(null,!1,e)},showHeaderMenu:function(e){var column=this.getFocusableFromEvent(e);column&&column.isColumn&&column.triggerEl&&this.onHeaderTriggerClick(column,e,column.triggerEl)},onHeaderActivate:function(e){var view,lastFocused,column=this.getFocusableFromEvent(e);column&&column.isColumn&&(view=column.getView(),column.sortable&&this.sortOnClick&&(lastFocused=view.getNavigationModel().getLastFocused(),column.toggleSortState(),lastFocused&&view.ownerCt.ensureVisible(lastFocused.record)),this.onHeaderClick(column,e,column.el))},onFocusableContainerMousedown:function(e,target){var targetCmp=Ext.Component.fromElement(target);targetCmp===this?e.preventDefault():targetCmp.focus()}}}),Ext.define("Ext.grid.column.Column",{extend:Ext.grid.header.Container,xtype:"gridcolumn",alternateClassName:"Ext.grid.Column",config:{triggerVisible:!1,sorter:null},baseCls:Ext.baseCSSPrefix+"column-header",hoverCls:Ext.baseCSSPrefix+"column-header-over",ariaRole:"columnheader",enableFocusableContainer:!1,sortState:null,possibleSortStates:["ASC","DESC"],ariaSortStates:{ASC:"ascending",DESC:"descending"},childEls:["titleEl","triggerEl","textEl","textContainerEl"],headerWrap:!1,renderTpl:['<div id="{id}-titleEl" data-ref="titleEl" role="presentation"','{tipMarkup}class="',Ext.baseCSSPrefix,'column-header-inner<tpl if="!$comp.isContainer"> ',Ext.baseCSSPrefix,"leaf-column-header</tpl>",'<tpl if="empty"> ',Ext.baseCSSPrefix,'column-header-inner-empty</tpl>">','<div id="{id}-textContainerEl" data-ref="textContainerEl" role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-container">','<div role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-wrapper">','<div id="{id}-textEl" data-ref="textEl" role="presentation" class="',Ext.baseCSSPrefix,"column-header-text",'{childElCls}">','<span role="presentation" class="',Ext.baseCSSPrefix,'column-header-text-inner">{text}</span>',"</div>","</div>","</div>",'<tpl if="!menuDisabled">','<div id="{id}-triggerEl" data-ref="triggerEl" role="presentation" class="',Ext.baseCSSPrefix,"column-header-trigger",'{childElCls}" style="{triggerStyle}"></div>',"</tpl>","</div>","{%this.renderContainer(out,values)%}"],dataIndex:null,text:"&#160;",menuText:null,emptyCellText:"&#160;",sortable:!0,resizable:!0,hideable:!0,menuDisabled:!1,renderer:!1,align:"left",draggable:!0,tooltipType:"qtip",initDraggable:Ext.emptyFn,tdCls:"",producesHTML:!0,ignoreExport:!1,isHeader:!0,isColumn:!0,tabIndex:-1,ascSortCls:Ext.baseCSSPrefix+"column-header-sort-ASC",descSortCls:Ext.baseCSSPrefix+"column-header-sort-DESC",componentLayout:"columncomponent",groupSubHeaderCls:Ext.baseCSSPrefix+"group-sub-header",groupHeaderCls:Ext.baseCSSPrefix+"group-header",clickTargetName:"titleEl",detachOnRemove:!0,initResizable:Ext.emptyFn,rendererNames:{column:"renderer",edit:"editRenderer",summary:"summaryRenderer"},formatterNames:{column:"formatter",edit:"editFormatter",summary:"summaryFormatter"},initComponent:function(){var me=this;me.rendererScope||(me.rendererScope=me.scope),null!=me.header&&(me.text=me.header,me.header=null),me.cellWrap&&(me.tdCls=(me.tdCls||"")+" "+Ext.baseCSSPrefix+"wrap-cell"),null!=me.columns?(me.isGroupHeader=!0,me.ariaRole="presentation",me.items=me.columns,me.columns=me.flex=me.width=null,me.cls=(me.cls||"")+" "+me.groupHeaderCls,me.sortable=me.resizable=!1,me.align="center"):me.flex&&(me.minWidth=me.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth),me.addCls(Ext.baseCSSPrefix+"column-header-align-"+me.align),me.setupRenderer(),me.setupRenderer("edit"),me.setupRenderer("summary"),me.callParent(arguments)},onAdded:function(container,pos,instanced){var sorter,ownerGrid,counterOwner,me=this;me.callParent([container,pos,instanced]),me.headerId||((counterOwner=(ownerGrid=me.up("tablepanel"))?ownerGrid.ownerGrid:me.getRootHeaderCt()).headerCounter=(counterOwner.headerCounter||0)+1,me.headerId="h"+counterOwner.headerCounter),me.stateId||(me.stateId=me.initialConfig.id||me.headerId),(sorter=me.getSorter())&&!sorter.initialConfig.id&&sorter.setId((me.dataIndex||me.stateId)+"-sorter")},applySorter:function(sorter){return this.getRootHeaderCt().up("tablepanel").store.getData().getSorters().decodeSorter(sorter)},bindFormatter:function(format){var me=this;return function(v){return format.format(v,format.scope||me.rendererScope||me.resolveListenerScope())}},bindRenderer:function(renderer){var me=this;return me.hasCustomRenderer=!0,function(){return Ext.callback(renderer,me.rendererScope,arguments,0,me)}},setupRenderer:function(type){type=type||"column";var scoped,dynamic,me=this,format=me[me.formatterNames[type]],renderer=me[me.rendererNames[type]],isColumnRenderer="column"===type;format?((scoped=0===format.indexOf("this."))&&(format=format.substring(5)),format=Ext.app.bind.Template.prototype.parseFormat(format),me[me.formatterNames[type]]=null,scoped&&(format.scope=null),me[me.rendererNames[type]]=me.bindFormatter(format)):renderer?("string"==typeof renderer&&(renderer=me[me.rendererNames[type]]=me.bindRenderer(renderer),dynamic=!0),isColumnRenderer&&(me.hasCustomRenderer=dynamic||1<renderer.length)):isColumnRenderer&&me.defaultRenderer&&(me.renderer=me.defaultRenderer,me.usingDefaultRenderer=!0)},getView:function(){var rootHeaderCt=this.getRootHeaderCt();if(rootHeaderCt)return rootHeaderCt.view},onFocusLeave:function(e){this.callParent([e]),this.activeMenu&&this.activeMenu.hide()},initItems:function(){var me=this;me.callParent(arguments),me.isGroupHeader&&(!me.config.hidden&&me.hasVisibleChildColumns()||me.hide())},hasVisibleChildColumns:function(){var i,item,items=this.items.items,len=items.length;for(i=0;i<len;++i)if((item=items[i]).isColumn&&!item.hidden)return!0;return!1},onAdd:function(child){var me=this;child.isColumn&&(child.isSubHeader=!0,child.addCls(me.groupSubHeaderCls)),me.isGroupHeader&&me.hidden&&me.hasVisibleChildColumns()&&me.show(),me.callParent([child])},onRemove:function(child,isDestroying){var me=this;child.isSubHeader&&(child.isSubHeader=!1,child.removeCls(me.groupSubHeaderCls)),me.callParent([child,isDestroying]),me.destroyed||me.destroying||me.hasVisibleChildColumns()||me.ownerCt.isNested()||me.hide()},initRenderData:function(){var me=this,tipMarkup="",tip=me.tooltip,text=me.text,attr="qtip"===me.tooltipType?"data-qtip":"title";return Ext.isEmpty(tip)||(tipMarkup=attr+'="'+tip+'" '),Ext.applyIf(me.callParent(arguments),{text:text,empty:"&#160;"===text||" "===text||""===text,menuDisabled:me.menuDisabled,tipMarkup:tipMarkup,triggerStyle:this.getTriggerVisible()?"display:block":""})},applyColumnState:function(state,storeState){var len,i,mySorterId,me=this,sorter=me.getSorter(),stateSorters=storeState&&storeState.sorters;if(sorter&&stateSorters&&(len=stateSorters.length))for(mySorterId=sorter.getId(),i=0;i<len;i++)if(stateSorters[i].id===mySorterId){sorter.setDirection(stateSorters[i].direction),stateSorters[i]=sorter;break}me.applyColumnsState(state.columns),null!=state.hidden&&(me.hidden=state.hidden),null!=state.locked&&(me.locked=state.locked),null!=state.sortable&&(me.sortable=state.sortable),null!=state.width?(me.flex=null,me.width=state.width):null!=state.flex&&(me.width=null,me.flex=state.flex)},getColumnState:function(){var i,items=this.items.items,iLen=items?items.length:0,columns=[],state={id:this.getStateId()};if(this.savePropsToState(["hidden","sortable","locked","flex","width"],state),this.isGroupHeader){for(i=0;i<iLen;i++)columns.push(items[i].getColumnState());columns.length&&(state.columns=columns)}return"width"in state&&delete state.flex,state},setText:function(text){this.text=text,this.rendered&&this.textEl.setHtml(text)},getIndex:function(){return!this.isGroupColumn&&this.getRootHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return null!=this.visibleIndex?this.visibleIndex:!this.isGroupColumn&&Ext.Array.indexOf(this.getRootHeaderCt().getVisibleGridColumns(),this)},getLabelChain:function(){for(var parent,child=this,labels=[];parent=child.up("headercontainer");)parent.text&&labels.unshift(Ext.util.Format.stripTags(parent.text)),child=parent;return labels},beforeRender:function(){var ariaAttr,me=this,rootHeaderCt=me.getRootHeaderCt(),isSortable=me.isSortable(),labels=[];me.callParent(),isSortable||me.groupable||me.lockable||!1!==rootHeaderCt.grid.enableColumnHide&&rootHeaderCt.getHideableColumns().length||(me.menuDisabled=!0),me.cellWrap&&(me.variableRowHeight=!0),(ariaAttr=me.ariaRenderAttributes||(me.ariaRenderAttributes={}))["aria-readonly"]=!0,isSortable&&(ariaAttr["aria-sort"]=me.ariaSortStates[me.sortState]),me.isSubHeader&&(labels=me.getLabelChain(),me.text&&labels.push(Ext.util.Format.stripTags(me.text)),labels.length&&(ariaAttr["aria-label"]=labels.join(" "))),me.protoEl.unselectable()},getTriggerElWidth:function(){var triggerEl=this.triggerEl,width=this.self.triggerElWidth;return triggerEl&&void 0===width&&(triggerEl.setStyle("display","block"),width=this.self.triggerElWidth=triggerEl.getWidth(),triggerEl.setStyle("display","")),width},afterComponentLayout:function(width,height,oldWidth,oldHeight){var rootHeaderCt=this.getRootHeaderCt();this.callParent(arguments),rootHeaderCt&&(null!=oldWidth||this.flex)&&width!==oldWidth&&rootHeaderCt.onHeaderResize(this,width)},onDestroy:function(){Ext.destroy(this.field),this.field=null,this.callParent(arguments)},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(e){this.triggerEl&&this.onTitleElClick(e,this.triggerEl.dom||this.el.dom)},onEnterKey:function(e){this.onTitleElClick(e,this.el.dom)},onTitleElDblClick:function(e){var prev,leafColumns,headerCt,me=this;if(me.isAtStartEdge(e))(prev=me.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])"))&&prev.getRootHeaderCt()===me.getRootHeaderCt()&&prev.autoSize();else if(me.isAtEndEdge(e)){if(me.isGroupHeader&&e.getPoint().isContainedBy(me.layout.innerCt))return leafColumns=me.query("gridcolumn:not([hidden]):not([isGroupHeader])"),void me.getRootHeaderCt().autoSizeColumn(leafColumns[leafColumns.length-1]);if(1===(headerCt=me.getRootHeaderCt()).visibleColumnManager.getColumns().length&&headerCt.forceFit)return;me.autoSize()}},autoSize:function(){var leafColumns,numLeaves,i,headerCt,me=this;if(me.isGroupHeader){for(numLeaves=(leafColumns=me.query("gridcolumn:not([hidden]):not([isGroupHeader])")).length,headerCt=me.getRootHeaderCt(),Ext.suspendLayouts(),i=0;i<numLeaves;i++)headerCt.autoSizeColumn(leafColumns[i]);Ext.resumeLayouts(!0)}else me.getRootHeaderCt().autoSizeColumn(me)},onTitleElClick:function(e,t,sortOnClick){var activeHeader,prevSibling,me=this;return"touch"===e.pointerType?(prevSibling=me.previousSibling(":not([hidden])"),!me.menuDisabled&&me.isAtEndEdge(e,parseInt(me.triggerEl.getStyle("width"),10))?me.menuDisabled||(activeHeader=me):prevSibling&&!prevSibling.menuDisabled&&me.isAtStartEdge(e)&&(activeHeader=prevSibling)):activeHeader=me.triggerEl&&(e.target===me.triggerEl.dom||t===me.triggerEl||e.within(me.triggerEl))?me:null,!1===sortOnClick||(activeHeader||me.isAtStartEdge(e)||me.isAtEndEdge(e))&&!e.getKey()||me.toggleSortState(),activeHeader},processEvent:function(type,view,cell,recordIndex,cellIndex,e){return this.fireEvent.apply(this,arguments)},isSortable:function(){var rootHeader=this.getRootHeaderCt(),grid=rootHeader?rootHeader.grid:null,sortable=this.sortable;return grid&&!1===grid.sortableColumns&&(sortable=!1),sortable},toggleSortState:function(){this.isSortable()&&this.sort()},sort:function(direction){var me=this,grid=me.up("tablepanel"),store=grid.store,sorter=me.getSorter();Ext.suspendLayouts(),me.sorting=!0,sorter?(direction&&sorter.setDirection(direction),store.sort(sorter,grid.multiColumnSort?"multi":"replace")):store.sort(me.getSortParam(),direction,grid.multiColumnSort?"multi":"replace"),delete me.sorting,Ext.resumeLayouts(!0)},getSortParam:function(){return this.dataIndex},setSortState:function(sorter){var changed,me=this,direction=sorter&&sorter.getDirection(),ascCls=me.ascSortCls,descCls=me.descSortCls,rootHeaderCt=me.getRootHeaderCt(),ariaDom=me.ariaEl.dom;switch(direction){case"DESC":me.hasCls(descCls)||(me.addCls(descCls),me.sortState="DESC",changed=!0),me.removeCls(ascCls);break;case"ASC":me.hasCls(ascCls)||(me.addCls(ascCls),me.sortState="ASC",changed=!0),me.removeCls(descCls);break;default:me.removeCls([ascCls,descCls]),me.sortState=null}ariaDom&&(me.sortState?ariaDom.setAttribute("aria-sort",me.ariaSortStates[me.sortState]):ariaDom.removeAttribute("aria-sort")),changed&&rootHeaderCt.fireEvent("sortchange",rootHeaderCt,me,direction)},isHideable:function(){var result={hideCandidate:this,result:this.hideable};return result.result&&this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[result]),result.result},hasOtherMenuEnabledChildren:function(result){var visibleChildren,count;return this.isXType("headercontainer")?(count=(visibleChildren=this.query(">gridcolumn:not([hidden]):not([menuDisabled])")).length,Ext.Array.contains(visibleChildren,result.hideCandidate)&&count--,!count&&void(result.hideCandidate=this)):result.result=!1},isLockable:function(){var result={result:!1!==this.lockable};return result.result&&this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[result]),result.result},isLocked:function(){return this.locked||!!this.up("[isColumn][locked]","[isRootHeader]")},hasMultipleVisibleChildren:function(result){return this.isXType("headercontainer")?!(1<this.query(">gridcolumn:not([hidden])").length)&&void 0:result.result=!1},hide:function(){var me=this,rootHeaderCt=me.getRootHeaderCt(),owner=me.getRefOwner();return owner.constructing?me.callParent():me.rendered&&!me.isVisible()||(rootHeaderCt.forceFit&&(me.visibleSiblingCount=rootHeaderCt.getVisibleGridColumns().length-1,me.flex&&(me.savedWidth=me.getWidth(),me.flex=null)),rootHeaderCt.beginChildHide(),Ext.suspendLayouts(),owner.isGroupHeader&&(me.isNestedGroupHeader()&&owner.hide(),me.isSubHeader&&!me.isGroupHeader&&1===owner.query(">gridcolumn:not([hidden])").length&&(owner.lastHiddenHeader=me)),me.callParent(),rootHeaderCt.endChildHide(),rootHeaderCt.onHeaderHide(me),Ext.resumeLayouts(!0)),me},show:function(){var me=this,rootHeaderCt=me.getRootHeaderCt(),ownerCt=me.getRefOwner();return me.isVisible()||(ownerCt.isGroupHeader&&(ownerCt.lastHiddenHeader=null),me.rendered&&rootHeaderCt.forceFit&&rootHeaderCt.applyForceFit(me),Ext.suspendLayouts(),me.isSubHeader&&ownerCt.hidden&&ownerCt.show(!1,!0),me.callParent(arguments),me.isGroupHeader&&me.maybeShowNestedGroupHeader(),(ownerCt=me.getRootHeaderCt())&&ownerCt.onHeaderShow(me),Ext.resumeLayouts(!0)),me},shouldUpdateCell:function(record,changedFieldNames){if(!this.preventUpdate){if(this.hasCustomRenderer)return 1;if(!changedFieldNames)return 2;var i,field,len=changedFieldNames.length;for(i=0;i<len;++i)if((field=changedFieldNames[i])===this.dataIndex||field===record.idProperty)return 2}},getCellWidth:function(){var result,me=this;return me.rendered&&me.componentLayout&&me.componentLayout.lastComponentSize?result=me.componentLayout.lastComponentSize.width:me.width?result=me.width:me.isColumn||(result=me.getTableWidth()),result},getCellId:function(){return Ext.baseCSSPrefix+"grid-cell-"+this.getItemId()},getCellSelector:function(){var view=this.getView();return(view?view.getCellSelector():"")+"."+this.getCellId()},getCellInnerSelector:function(){return this.getCellSelector()+" ."+Ext.baseCSSPrefix+"grid-cell-inner"},isAtStartEdge:function(e){var offset=e.getXY()[0]-this.getX();return!(offset<0&&0===this.getIndex())&&offset<this.getHandleWidth(e)},isAtEndEdge:function(e,margin){return this.getX()+this.getWidth()-e.getXY()[0]<=(margin||this.getHandleWidth(e))},getHandleWidth:function(e){return"touch"===e.pointerType?10:4},setMenuActive:function(menu){this.activeMenu=menu,this.titleEl[menu?"addCls":"removeCls"](this.headerOpenCls)},deprecated:{5:{methods:{bindRenderer:function(renderer){return function(value){return Ext.util.Format[renderer](value)}}}}}}),Ext.define("Ext.menu.Item",{extend:Ext.Component,alias:"widget.menuitem",alternateClassName:"Ext.menu.TextItem",isMenuItem:!0,mixins:[Ext.mixin.Queryable],activated:!1,activeCls:Ext.baseCSSPrefix+"menu-item-active",clickHideDelay:0,destroyMenu:!0,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",hideOnClick:!0,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:!0,ariaRole:"menuitem",ariaEl:"itemEl",baseCls:Ext.baseCSSPrefix+"menu-item",arrowCls:Ext.baseCSSPrefix+"menu-item-arrow",baseIconCls:Ext.baseCSSPrefix+"menu-item-icon",textCls:Ext.baseCSSPrefix+"menu-item-text",indentCls:Ext.baseCSSPrefix+"menu-item-indent",indentNoSeparatorCls:Ext.baseCSSPrefix+"menu-item-indent-no-separator",indentRightIconCls:Ext.baseCSSPrefix+"menu-item-indent-right-icon",indentRightArrowCls:Ext.baseCSSPrefix+"menu-item-indent-right-arrow",linkCls:Ext.baseCSSPrefix+"menu-item-link",linkHrefCls:Ext.baseCSSPrefix+"menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="ariaAttributes"> {$}="{.}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:!1,iconAlign:"left",initComponent:function(){var menu,me=this,cls=me.cls?[me.cls]:[];me.hasOwnProperty("canActivate")&&(me.focusable=me.canActivate),me.plain&&cls.push(Ext.baseCSSPrefix+"menu-item-plain"),cls.length&&(me.cls=cls.join(" ")),me.menu&&(menu=me.menu,me.menu=null,me.setMenu(menu)),me.callParent(arguments)},canFocus:function(){var me=this;return me.focusable&&me.rendered&&!1!==me.canActivate&&!me.destroying&&!me.destroyed&&me.isVisible(!0)},onFocus:function(e){var me=this;me.callParent([e]),me.disabled||(me.plain||me.addCls(me.activeCls),me.activated=!0,me.hasListeners.activate&&me.fireEvent("activate",me))},onFocusLeave:function(e){var me=this;me.callParent([e]),me.activated&&(me.plain||me.removeCls(me.activeCls),me.doHideMenu(),me.activated=!1,me.hasListeners.deactivate&&me.fireEvent("deactivate",me))},doHideMenu:function(){var menu=this.menu;this.cancelDeferExpand(),menu&&menu.isVisible()&&menu.hide()},deferHideParentMenus:function(){for(var menu=this.getRefOwner();menu&&(menu.isMenu&&menu.floating||menu.isMenuItem);menu=menu.getRefOwner())menu.isMenu&&menu.hide()},expandMenu:function(event,delay){var me=this;me.activated&&me.menu&&(me.hideOnClick=!1,me.cancelDeferHide(),0===(delay=null==delay?me.menuExpandDelay:delay)?me.doExpandMenu(event):(me.cancelDeferExpand(),me.expandMenuTimer=Ext.defer(me.doExpandMenu,delay,me,[event])))},doExpandMenu:function(clickEvent){var me=this,menu=me.menu;menu.isVisible()||((me.parentMenu.activeChild=menu).ownerCmp=me,menu.parentMenu=me.parentMenu,menu.constrainTo=document.body,menu.autoFocus=!clickEvent||!clickEvent.pointerType,menu.showBy(me,me.menuAlign))},getRefItems:function(deep){var items,menu=this.menu;return menu&&(items=menu.getRefItems(deep)).unshift(menu),items||[]},getValue:function(){return this.value},hideMenu:function(delay){var me=this;me.menu&&(me.cancelDeferExpand(),me.hideMenuTimer=Ext.defer(me.doHideMenu,Ext.isNumber(delay)?delay:me.menuHideDelay,me))},onClick:function(e){var clickResult,preventDefault,me=this,clickHideDelay=me.clickHideDelay,browserEvent=e.browserEvent;return!((!me.href||me.disabled)&&(e.stopEvent(),me.disabled))&&(me.disabled||me.handlingClick||(me.hideOnClick&&(clickHideDelay?me.deferHideParentMenusTimer=Ext.defer(me.deferHideParentMenus,clickHideDelay,me):me.deferHideParentMenus()),clickResult=me.fireEvent("click",me,e),me.destroyed)?void 0:(!1!==clickResult&&me.handler&&Ext.callback(me.handler,me.scope,[me,e],0,me),preventDefault=Ext.isIE9m?!1===browserEvent.returnValue:!!browserEvent.defaultPrevented,me.href&&"click"!==e.type&&!preventDefault&&(me.handlingClick=!0,me.itemEl.dom.click(),me.handlingClick=!1),me.hideOnClick||me.focus(),clickResult))},onRemoved:function(){var me=this;me.activated&&me.parentMenu.activeItem===me&&me.parentMenu.deactivateActiveItem(),me.callParent(arguments),me.parentMenu=me.ownerCmp=null},beforeDestroy:function(){this.rendered&&this.clearTip(),this.callParent()},onDestroy:function(){var me=this;me.cancelDeferExpand(),me.cancelDeferHide(),clearTimeout(me.deferHideParentMenusTimer),me.setMenu(null),me.callParent(arguments)},beforeRender:function(){var glyphParts,me=this,glyph=me.glyph,glyphFontFamily=Ext._glyphFontFamily,hasIcon=!!(me.icon||me.iconCls||glyph),hasMenu=!!me.menu,rightIcon="right"===me.iconAlign&&!hasMenu,isCheckItem=me.isMenuCheckItem,indentCls=[],ownerCt=me.ownerCt,isOwnerPlain=ownerCt.plain;me.plain&&(me.ariaEl="el"),me.callParent(),hasIcon&&hasMenu&&me.showCheckbox&&(hasIcon=!1),"string"==typeof glyph&&(glyph=(glyphParts=glyph.split("@"))[0],glyphFontFamily=glyphParts[1]),(!isOwnerPlain||hasIcon&&!rightIcon||isCheckItem)&&(ownerCt.showSeparator&&!isOwnerPlain?indentCls.push(me.indentCls):indentCls.push(me.indentNoSeparatorCls)),hasMenu?indentCls.push(me.indentRightArrowCls):hasIcon&&(rightIcon||isCheckItem)&&indentCls.push(me.indentRightIconCls),Ext.applyIf(me.renderData,{hasHref:!!me.href,href:me.href||"#",hrefTarget:me.hrefTarget,icon:me.icon,iconCls:me.iconCls,glyph:glyph,glyphCls:glyph?Ext.baseCSSPrefix+"menu-item-glyph":void 0,glyphFontFamily:glyphFontFamily,hasIcon:hasIcon,hasMenu:hasMenu,indent:!isOwnerPlain||hasIcon||isCheckItem,isCheckItem:isCheckItem,rightIcon:rightIcon,plain:me.plain,text:me.text,arrowCls:me.arrowCls,baseIconCls:me.baseIconCls,textCls:me.textCls,indentCls:indentCls.join(" "),linkCls:me.linkCls,linkHrefCls:me.linkHrefCls,groupCls:me.group?me.groupCls:"",tabIndex:me.tabIndex})},onRender:function(){this.callParent(arguments),this.tooltip&&this.setTooltip(this.tooltip,!0)},getMenu:function(){return this.menu||null},setMenu:function(menu,destroyMenu){var ariaAttr,instanced,me=this,oldMenu=me.menu,arrowEl=me.arrowEl,ariaDom=me.ariaEl.dom;oldMenu&&(oldMenu.ownerCmp=oldMenu.parentMenu=null,(!0===destroyMenu||!1!==destroyMenu&&me.destroyMenu)&&Ext.destroy(oldMenu),ariaDom?(ariaDom.removeAttribute("aria-haspopup"),ariaDom.removeAttribute("aria-owns")):(delete(ariaAttr=me.ariaRenderAttributes||(me.ariaRenderAttributes={}))["aria-haspopup"],delete ariaAttr["aria-owns"])),menu?(instanced=menu.isMenu,(menu=me.menu=Ext.menu.Manager.get(menu,{ownerCmp:me,focusOnToFront:!1})).setOwnerCmp(me,instanced),ariaDom?(ariaDom.setAttribute("aria-haspopup",!0),ariaDom.setAttribute("aria-owns",menu.id)):((ariaAttr=me.ariaRenderAttributes||(me.ariaRenderAttributes={}))["aria-haspopup"]=!0,ariaAttr["aria-owns"]=menu.id)):menu=me.menu=null,menu&&me.rendered&&!me.destroying&&arrowEl&&arrowEl[menu?"addCls":"removeCls"](me.arrowCls)},setHandler:function(fn,scope){this.handler=fn||null,this.scope=scope},setIcon:function(icon){var iconEl=this.iconEl,oldIcon=this.icon;iconEl&&(iconEl.src=icon||Ext.BLANK_IMAGE_URL),this.icon=icon,this.fireEvent("iconchange",this,oldIcon,icon)},setIconCls:function(iconCls){var me=this,iconEl=me.iconEl,oldCls=me.iconCls;iconEl&&(me.iconCls&&iconEl.removeCls(me.iconCls),iconCls&&iconEl.addCls(iconCls)),me.iconCls=iconCls,me.fireEvent("iconchange",me,oldCls,iconCls)},setText:function(text){var me=this,el=me.textEl||me.el,oldText=me.text;me.text=text,me.rendered&&(el.setHtml(text||""),me.updateLayout()),me.fireEvent("textchange",me,oldText,text)},getTipAttr:function(){return"qtip"===this.tooltipType?"data-qtip":"title"},clearTip:function(){Ext.quickTipsActive&&Ext.isObject(this.tooltip)&&Ext.tip.QuickTipManager.unregister(this.itemEl)},setTooltip:function(tooltip,initial){var me=this;return me.rendered?(initial||me.clearTip(),Ext.quickTipsActive&&Ext.isObject(tooltip)?(Ext.tip.QuickTipManager.register(Ext.apply({target:me.itemEl.id},tooltip)),me.tooltip=tooltip):me.itemEl.dom.setAttribute(me.getTipAttr(),tooltip)):me.tooltip=tooltip,me},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)},getFocusEl:function(){return this.plain?this.el:this.itemEl}}}),Ext.define("Ext.menu.CheckItem",{extend:Ext.menu.Item,alias:"widget.menucheckitem",checkedCls:Ext.baseCSSPrefix+"menu-item-checked",uncheckedCls:Ext.baseCSSPrefix+"menu-item-unchecked",groupCls:Ext.baseCSSPrefix+"menu-group-icon",hideOnClick:!1,checkChangeDisabled:!1,submenuText:"{0} submenu",ariaRole:"menuitemcheckbox",childEls:["checkEl"],showCheckbox:!0,isMenuCheckItem:!0,checkboxCls:Ext.baseCSSPrefix+"menu-item-checkbox",initComponent:function(){var me=this;me.checked=!!me.checked,me.callParent(arguments),me.group&&(Ext.menu.Manager.registerCheckable(me),!1!==me.initialConfig.hideOnClick&&(me.hideOnClick=!0))},beforeRender:function(){var ariaAttr,me=this;me.callParent(),Ext.apply(me.renderData,{checkboxCls:me.checkboxCls,showCheckbox:me.showCheckbox}),(ariaAttr=me.ariaRenderAttributes||(me.ariaRenderAttributes={}))["aria-checked"]=me.menu?"mixed":me.checked,me.menu&&(ariaAttr["aria-label"]=Ext.String.formatEncode(me.submenuText,me.text))},afterRender:function(){var me=this;me.callParent(),me.checked=!me.checked,me.setChecked(!me.checked,!0),me.checkChangeDisabled&&me.disableCheckChange(),Ext.isGecko&&me.checkEl&&me.checkEl.on("mousedown",me.onMouseDownCheck)},disableCheckChange:function(){var me=this,checkEl=me.checkEl;checkEl&&checkEl.addCls(me.disabledCls),Ext.isIE8&&me.rendered&&me.el.repaint(),me.checkChangeDisabled=!0},enableCheckChange:function(){var checkEl=this.checkEl;checkEl&&checkEl.removeCls(this.disabledCls),this.checkChangeDisabled=!1},onMouseDownCheck:function(e){e.preventDefault()},onClick:function(e){var me=this;if(!(me.disabled||me.checkChangeDisabled||me.checked&&me.group||me.menu&&"touch"===e.pointerType&&!me.checkEl.contains(e.target))&&(me.setChecked(!me.checked),"keydown"===e.type&&me.menu))return!1;this.callParent([e])},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this),this.callParent(arguments)},setText:function(text){var ariaDom=this.ariaEl.dom;this.callParent([text]),ariaDom&&this.menu&&ariaDom.setAttribute("aria-label",Ext.String.formatEncode(this.submenuText,text))},setChecked:function(checked,suppressEvents){var me=this,checkedCls=me.checkedCls,uncheckedCls=me.uncheckedCls,el=me.el,ariaDom=me.ariaEl.dom;me.checked===checked||!suppressEvents&&!1===me.fireEvent("beforecheckchange",me,checked)||(el&&(checked?(el.addCls(checkedCls),el.removeCls(uncheckedCls)):(el.addCls(uncheckedCls),el.removeCls(checkedCls))),ariaDom&&ariaDom.setAttribute("aria-checked",me.menu?"mixed":!!checked),me.checked=checked,Ext.menu.Manager.onCheckChange(me,checked),suppressEvents||(Ext.callback(me.checkHandler,me.scope,[me,checked],0,me),me.fireEvent("checkchange",me,checked)))}}),Ext.define("Ext.menu.Separator",{extend:Ext.menu.Item,alias:"widget.menuseparator",focusable:!1,canActivate:!1,hideOnClick:!1,plain:!0,separatorCls:Ext.baseCSSPrefix+"menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(){this.addCls(this.separatorCls),this.callParent()}}),Ext.define("Ext.menu.Menu",{extend:Ext.panel.Panel,alias:"widget.menu",mixins:[Ext.util.FocusableContainer],enableKeyNav:!0,allowOtherMenus:!1,ariaRole:"menu",floating:!0,constrain:!0,hidden:!0,hideMode:"visibility",ignoreParentClicks:!1,isMenu:!0,showSeparator:!0,minWidth:void 0,defaultMinWidth:120,defaultAlign:"tl-bl?",focusOnToFront:!1,bringParentToFront:!1,defaultFocus:":focusable",menuClickBuffer:0,baseCls:Ext.baseCSSPrefix+"menu",_iconSeparatorCls:Ext.baseCSSPrefix+"menu-icon-separator",_itemCmpCls:Ext.baseCSSPrefix+"menu-item-cmp",layout:{type:"vbox",align:"stretchmax",overflowHandler:"Scroller"},initComponent:function(){var me=this,cls=[Ext.baseCSSPrefix+"menu"],bodyCls=me.bodyCls?[me.bodyCls]:[],isFloating=!1!==me.floating,listeners={element:"el",click:me.onClick,mouseover:me.onMouseOver,scope:me};Ext.supports.Touch&&(listeners.pointerdown=me.onMouseOver),me.on(listeners),me.on({beforeshow:me.onBeforeShow,scope:me}),me.plain&&cls.push(Ext.baseCSSPrefix+"menu-plain"),me.cls=cls.join(" "),bodyCls.push(Ext.baseCSSPrefix+"menu-body",Ext.dom.Element.unselectableCls),me.bodyCls=bodyCls.join(" "),isFloating?void 0===me.minWidth&&(me.minWidth=me.defaultMinWidth):(me.hidden=!!me.initialConfig.hidden,me.constrain=!1),me.callParent(arguments),Ext.override(me.getLayout(),{configureItem:me.configureItem})},initFloatConstrain:Ext.emptyFn,getInherited:function(){var result=this.callParent();return result.hidden=this.hidden,result},beforeRender:function(){var me=this;me.callParent(arguments),me.getSizeModel().width.shrinkWrap||(me.layout.align="stretch"),me.floating&&(me.ariaRenderAttributes=me.ariaRenderAttributes||{},me.ariaRenderAttributes["aria-expanded"]=!!me.autoShow)},onBoxReady:function(){var me=this,iconSeparatorCls=me._iconSeparatorCls,keyNav=me.focusableKeyNav;keyNav?(keyNav.map.processEventScope=me,keyNav.map.processEvent=function(e){return e.keyCode===e.ESC&&(e.target=this.el.dom),e},keyNav.map.addBinding([{key:Ext.event.Event.ESC,handler:me.onEscapeKey,scope:me},{key:/[\w]/,handler:me.onShortcutKey,scope:me,shift:!1,ctrl:!1,alt:!1}])):me.escapeKeyNav=new Ext.util.KeyNav(me.el,{eventName:"keydown",scope:me,esc:me.onEscapeKey}),me.callParent(arguments),me.showSeparator&&(me.iconSepEl=me.body.insertFirst({role:"presentation",cls:iconSeparatorCls+" "+iconSeparatorCls+"-"+me.ui,html:"&#160;"})),(Ext.supports.MSPointerEvents||Ext.supports.PointerEvents)&&me.el.on({scope:me,click:me.preventClick,translate:!1}),me.mouseMonitor=me.el.monitorMouseLeave(100,me.onMouseLeave,me)},onFocusLeave:function(e){var me=this;me.callParent([e]),me.mixins.focusablecontainer.onFocusLeave.call(me,e),me.floating&&me.hide()},canActivateItem:function(item){return item&&item.isFocusable()},deactivateActiveItem:function(){var activeItem=this.lastFocusedChild;activeItem&&activeItem.blur()},getItemFromEvent:function(e){for(var renderTarget=this.layout.getRenderTarget().dom,toEl=e.getTarget();toEl.parentNode!==renderTarget;)if(!(toEl=toEl.parentNode))return;return Ext.getCmp(toEl.id)},lookupComponent:function(cmp){return"string"==typeof cmp?cmp=this.lookupItemFromString(cmp):Ext.isObject(cmp)&&(cmp=this.lookupItemFromObject(cmp)),cmp.dock||(cmp.minWidth=cmp.minWidth||this.minWidth),cmp},lookupItemFromObject:function(cmp){return cmp.isComponent||(cmp=cmp.xtype?Ext.ComponentManager.create(cmp,cmp.xtype):Ext.create("Ext.menu."+(Ext.isBoolean(cmp.checked)?"Check":"")+"Item",cmp)),cmp.isMenuItem&&(cmp.parentMenu=this),cmp},lookupItemFromString:function(cmp){return"separator"===cmp||"-"===cmp?new Ext.menu.Separator:new Ext.menu.Item({canActivate:!1,hideOnClick:!1,plain:!0,text:cmp})},configureItem:function(cmp){var cls,cmpCls,me=this.owner,prefix=Ext.baseCSSPrefix,ui=me.ui;cmp.isMenuItem?cmp.setUI(ui):1<me.items.getCount()&&!cmp.rendered&&!cmp.dock&&(cls=[(cmpCls=me._itemCmpCls)+" "+cmpCls+"-"+ui],me.plain||!1===cmp.indent&&"no-icon"!==cmp.iconCls||cls.push(prefix+"menu-item-indent-"+ui),cmp.rendered?cmp.el.addCls(cls):cmp.cls=(cmp.cls||"")+" "+cls.join(" "),cmp.$extraMenuCls=cls),this.callParent(arguments)},onRemove:function(cmp){this.callParent([cmp]),!cmp.destroyed&&cmp.$extraMenuCls&&cmp.el.removeCls(cmp.$extraMenuCls)},onClick:function(e){var item,clickResult,me=this,iskeyEvent="keydown"===e.type;me.disabled?e.stopEvent():((item=me.getItemFromEvent(e))&&item.isMenuItem&&(item.menu&&me.ignoreParentClicks?e.stopEvent():clickResult=item.onClick(e),item.menu&&!1!==clickResult&&iskeyEvent&&item.expandMenu(e,0)),item&&!item.disabled||(item=void 0),me.fireEvent("click",me,item,e))},onDestroy:function(){var me=this;me.escapeKeyNav&&me.escapeKeyNav.destroy(),me.parentMenu=me.ownerCmp=me.escapeKeyNav=null,me.rendered&&(me.el.un(me.mouseMonitor),Ext.destroy(me.iconSepEl)),Ext.menu.Manager.onHide(me),me.callParent(arguments)},onMouseLeave:function(e){this.disabled||this.fireEvent("mouseleave",this,e)},onMouseOver:function(e){var me=this,fromEl=e.getRelatedTarget(),mouseEnter=!me.el.contains(fromEl),item=me.getItemFromEvent(e),parentMenu=me.parentMenu,ownerCmp=me.ownerCmp;mouseEnter&&parentMenu&&(parentMenu.setActiveItem(ownerCmp),ownerCmp.cancelDeferHide(),parentMenu.mouseMonitor.mouseenter()),me.disabled||(item&&(item.containsFocus||item.focus(),item.expandMenu&&item.expandMenu(e)),mouseEnter&&me.fireEvent("mouseenter",me,e),me.fireEvent("mouseover",me,item,e))},setActiveItem:function(item){item&&item!==this.lastFocusedChild&&this.focusChild(item,1)},onEscapeKey:function(){this.floating&&this.hide()},onShortcutKey:function(keyCode,e){for(var shortcutChar=String.fromCharCode(e.getCharCode()),items=this.query(">[text]"),len=items.length,item=this.lastFocusedChild,focusIndex=Ext.Array.indexOf(items,item),i=focusIndex;;){if(++i===len&&(i=0),item=items[i],i===focusIndex)return;if(item.text&&item.text[0].toUpperCase()===shortcutChar)return void item.focus()}},onFocusableContainerTabKey:function(e){this.floating&&this.hide()},onFocusableContainerEnterKey:function(e){this.onClick(e)},onFocusableContainerSpaceKey:function(e){this.onClick(e)},onFocusableContainerLeftKey:function(e){e.preventDefault(),this.parentMenu&&(this.ownerCmp.focus(),this.hide())},onFocusableContainerRightKey:function(e){var focusItem=this.lastFocusedChild;e.preventDefault(),focusItem&&focusItem.expandMenu&&focusItem.expandMenu(e,0)},onBeforeShow:function(){if(Ext.Date.getElapsed(this.lastHide)<this.menuClickBuffer)return!1},beforeShow:function(){var parent,activeEl,viewHeight,me=this;me.floating&&((parent=me.hasFloatMenuParent())||me.allowOtherMenus||Ext.menu.Manager.hideAll(),parent?me.focusAnchor=parent.focusAnchor:(activeEl=Ext.Element.getActiveElement())===document.body||activeEl===document.documentElement?me.focusAnchor=null:me.focusAnchor=activeEl,me.savedMaxHeight=me.maxHeight,viewHeight=me.container.getViewSize().height,me.maxHeight=Math.min(me.maxHeight||viewHeight,viewHeight)),me.callParent(arguments)},afterShow:function(){var me=this,ariaDom=me.ariaEl.dom;me.callParent(arguments),Ext.menu.Manager.onShow(me),me.floating&&ariaDom&&ariaDom.setAttribute("aria-expanded",!0),me.floating&&me.autoFocus&&(me.maxHeight=me.savedMaxHeight,me.focus())},onHide:function(animateTarget,cb,scope){var focusTarget,me=this,ariaDom=me.ariaEl.dom;me.el.contains(Ext.Element.getActiveElement())&&(focusTarget=me.focusAnchor||me.ownerCmp||me.up(":focusable"))&&(me.previousFocus=focusTarget),me.callParent([animateTarget,cb,scope]),me.lastHide=Ext.Date.now(),Ext.menu.Manager.onHide(me),me.floating&&ariaDom&&ariaDom.setAttribute("aria-expanded",!1)},preventClick:function(e){var item=this.getItemFromEvent(e);item&&item.isMenuItem&&!item.href&&e.preventDefault()},privates:{hasFloatMenuParent:function(){return this.parentMenu||this.up("menu[floating=true]")},setOwnerCmp:function(comp,instanced){var me=this;me.parentMenu=comp.isMenuItem?comp:null,me.ownerCmp=comp,me.registerWithOwnerCt(),delete me.hierarchicallyHidden,me.onInheritedAdd(comp,instanced),me.containerOnAdded(comp,instanced)}}}),Ext.define("Ext.grid.locking.HeaderContainer",{extend:Ext.grid.header.Container,headerCtRelayEvents:["blur","focus","move","resize","destroy","beforedestroy","boxready","afterrender","render","beforerender","removed","hide","beforehide","show","beforeshow","enable","disable","added","deactivate","beforedeactivate","activate","beforeactivate","remove","add","beforeremove","beforeadd","afterlayout","menucreate","sortchange","columnschanged","columnshow","columnhide","columnmove","headertriggerclick","headercontextmenu","headerclick","columnresize","statesave","beforestatesave","staterestore","beforestaterestore"],constructor:function(lockable){var me=this,lockedGrid=lockable.lockedGrid,normalGrid=lockable.normalGrid;me.lockable=lockable,me.callParent(),lockedGrid.visibleColumnManager.rootColumns=normalGrid.visibleColumnManager.rootColumns=lockable.visibleColumnManager=me.visibleColumnManager=new Ext.grid.ColumnManager(!0,lockedGrid.headerCt,normalGrid.headerCt),lockedGrid.columnManager.rootColumns=normalGrid.columnManager.rootColumns=lockable.columnManager=me.columnManager=new Ext.grid.ColumnManager(!1,lockedGrid.headerCt,normalGrid.headerCt),me.lockedEventRelayers=me.relayEvents(lockedGrid.headerCt,me.headerCtRelayEvents),me.normalEventRelayers=me.relayEvents(normalGrid.headerCt,me.headerCtRelayEvents)},destroy:function(){var me=this;Ext.destroy(me.lockedEventRelayers,me.normalEventRelayers),me.lockedEventRelayers=me.normalEventRelayers=null,me.callParent()},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var locked=this.lockable.lockedGrid.headerCt.getColumnsState(),normal=this.lockable.normalGrid.headerCt.getColumnsState();return locked.concat(normal)},applyColumnsState:function(columns,storeState){var i,existing,lockedDefault,col,lockedGrid=this.lockable.lockedGrid,lockedHeaderCt=lockedGrid.headerCt,normalHeaderCt=this.lockable.normalGrid.headerCt,lockedCols=Ext.Array.toValueMap(lockedHeaderCt.items.items,"stateId"),normalCols=Ext.Array.toValueMap(normalHeaderCt.items.items,"stateId"),locked=[],normal=[],lockedWidth=1,length=columns.length;for(i=0;i<length;i++)(existing=(lockedDefault=lockedCols[(col=columns[i]).id])||normalCols[col.id])&&(existing.applyColumnState&&existing.applyColumnState(col,storeState),void 0===existing.locked&&(existing.locked=!!lockedDefault),existing.locked?(locked.push(existing),existing.hidden||"number"!=typeof existing.width||(lockedWidth+=existing.width)):normal.push(existing));locked.length+normal.length===lockedHeaderCt.items.getCount()+normalHeaderCt.items.getCount()&&(lockedHeaderCt.removeAll(!1),normalHeaderCt.removeAll(!1),lockedHeaderCt.add(locked),normalHeaderCt.add(normal),lockedGrid.setWidth(lockedWidth))},disable:function(){var topGrid=this.lockable;topGrid.lockedGrid.headerCt.disable(),topGrid.normalGrid.headerCt.disable()},enable:function(){var topGrid=this.lockable;topGrid.lockedGrid.headerCt.enable(),topGrid.normalGrid.headerCt.enable()}}),Ext.define("Ext.grid.locking.View",{alternateClassName:"Ext.grid.LockingView",mixins:[Ext.util.Observable,Ext.util.StoreHolder,Ext.util.Focusable],isLockingView:!0,loadMask:!0,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(config){var lockedView,normalView,ext=Ext,me=this;me.ownerGrid=config.ownerGrid,(me.ownerGrid.view=me).navigationModel="treepanel"===config.locked.xtype?new ext.tree.NavigationModel(me):new ext.grid.NavigationModel(me),config.locked.viewConfig.bindStore=ext.emptyFn,config.normal.viewConfig.bindStore=me.subViewBindStore,config.normal.viewConfig.isNormalView=config.locked.viewConfig.isLockedView=!0,config.locked.viewConfig.beforeLayout=config.normal.viewConfig.beforeLayout=me.beforeLayout,config.locked.viewConfig.navigationModel=config.normal.viewConfig.navigationModel=me.navigationModel,me.lockedGrid=me.ownerGrid.lockedGrid=ext.ComponentManager.create(config.locked),me.lockedView=lockedView=me.lockedGrid.getView(),me.selModel=config.normal.viewConfig.selModel=lockedView.getSelectionModel(),me.lockedGrid.isTree&&(me.lockedView.animate=!1,config.normal.store=lockedView.store,config.normal.viewConfig.stripeRows=me.lockedView.stripeRows,config.normal.rowLines=me.lockedGrid.rowLines),me.normalGrid=me.ownerGrid.normalGrid=ext.ComponentManager.create(config.normal),lockedView.lockingPartner=normalView=me.normalView=me.normalGrid.getView(),normalView.lockingPartner=lockedView,me.loadMask=void 0!==config.loadMask?config.loadMask:me.loadMask,me.mixins.observable.constructor.call(me),me.lockedViewEventRelayers=me.relayEvents(lockedView,ext.view.Table.events),me.normalViewEventRelayers=me.relayEvents(normalView,ext.view.Table.events.concat(ext.view.Table.normalSideEvents)),normalView.on({scope:me,itemmouseleave:me.onItemMouseLeave,itemmouseenter:me.onItemMouseEnter}),lockedView.on({scope:me,itemmouseleave:me.onItemMouseLeave,itemmouseenter:me.onItemMouseEnter}),me.ownerGrid.on({render:me.onPanelRender,scope:me}),me.loadingText=normalView.loadingText,me.loadingCls=normalView.loadingCls,me.loadingUseMsg=normalView.loadingUseMsg,me.itemSelector=me.getItemSelector(),me.all=normalView.all,me.bindStore(normalView.dataSource,!0,"dataSource")},subViewBindStore:function(store){var selModel;this.destroying||this.destroyed||((selModel=this.getSelectionModel()).bindStore(store),selModel.bindComponent(this))},beforeLayout:function(){var me=this.ownerCt.ownerLockable.view,lockedView=me.lockedGrid.view,normalView=me.normalGrid.view;me.relayingOperation||(me.lockedGrid.isVisible()&&lockedView.refreshNeeded&&lockedView.doFirstRefresh(lockedView.dataSource),normalView.refreshNeeded&&normalView.doFirstRefresh(normalView.dataSource))},onPanelRender:function(){var me=this,mask=me.loadMask,cfg={target:me.ownerGrid,msg:me.loadingText,msgCls:me.loadingCls,useMsg:me.loadingUseMsg,store:me.ownerGrid.store};me.el=me.ownerGrid.getTargetEl(),me.rendered=!0,me.initFocusableEvents(),me.fireEvent("render",me),mask&&(Ext.isObject(mask)&&(cfg=Ext.apply(cfg,mask)),me.loadMask=new Ext.LoadMask(cfg))},getRefOwner:function(){return this.ownerGrid},getVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getTopLevelVisibleColumnManager:function(){return this.ownerGrid.getVisibleColumnManager()},getGridColumns:function(){return this.getVisibleColumnManager().getColumns()},getEl:function(column){return this.getViewForColumn(column).getEl()},getCellSelector:function(){return this.normalView.getCellSelector()},getItemSelector:function(){return this.normalView.getItemSelector()},getViewForColumn:function(column){var inLocked,view=this.lockedView;return view.headerCt.cascade(function(col){if(col===column)return!(inLocked=!0)}),inLocked?view:this.normalView},onItemMouseEnter:function(view,record){var item,locked=this.lockedView,other=this.normalView;view.trackOver&&(view!==locked&&(other=locked),item=other.getNode(record),other.highlightItem(item))},onItemMouseLeave:function(view,record){var locked=this.lockedView,other=this.normalView;view.trackOver&&(view!==locked&&(other=locked),other.clearHighlight())},relayFn:function(name,args){args=args||[];var view=this.lockedView;this.relayingOperation=!0,view[name].apply(view,args),(view=this.normalView)[name].apply(view,args),this.relayingOperation=!1},getSelectionModel:function(){return this.normalView.getSelectionModel()},getNavigationModel:function(){return this.navigationModel},getStore:function(){return this.ownerGrid.store},onBindStore:function(store,initial,propName){var lockedView=this.lockedView,normalView=this.normalView;!normalView.componentLayoutCounter||lockedView.blockRefresh&&normalView.blockRefresh||(Ext.suspendLayouts(),lockedView.doFirstRefresh(store),normalView.doFirstRefresh(store),Ext.resumeLayouts(!0))},getStoreListeners:function(){var me=this;return{priority:1e3,refresh:me.onDataRefresh,replace:me.onReplace,add:me.onAdd,remove:me.onRemove,update:me.onUpdate,clear:me.onDataRefresh,beginupdate:me.onBeginUpdate,endupdate:me.onEndUpdate}},onBeginUpdate:function(){Ext.suspendLayouts(),this.relayFn("onBeginUpdate",arguments),Ext.resumeLayouts(!0)},onEndUpdate:function(){Ext.suspendLayouts(),this.relayFn("onEndUpdate",arguments),Ext.resumeLayouts(!0)},onDataRefresh:function(){Ext.suspendLayouts(),this.relayFn("onDataRefresh",arguments),Ext.resumeLayouts(!0)},onReplace:function(){Ext.suspendLayouts(),this.relayFn("onReplace",arguments),Ext.resumeLayouts(!0)},onAdd:function(){Ext.suspendLayouts(),this.relayFn("onAdd",arguments),Ext.resumeLayouts(!0)},onRemove:function(){Ext.suspendLayouts(),this.relayFn("onRemove",arguments),Ext.resumeLayouts(!0)},setActionableMode:function(enabled,position){var result,targetView;if(enabled)return!!(position=position||this.getNavigationModel().getPosition())&&((position=position.clone()).view=targetView=position.column.getView(),!1!==(result=targetView.setActionableMode(enabled,position))&&targetView.lockingPartner.grid.isVisible()&&(targetView.lockingPartner.setActionableMode(enabled,position),targetView.lockingPartner.actionableMode||(targetView.setActionableMode(!1),result=!1)),result);this.relayFn("setActionableMode",[!1])},onUpdate:function(){Ext.suspendLayouts(),this.relayFn("onUpdate",arguments),Ext.resumeLayouts(!0)},refresh:function(){Ext.suspendLayouts(),this.relayFn("refresh",arguments),Ext.resumeLayouts(!0)},refreshView:function(){Ext.suspendLayouts(),this.relayFn("refreshView",arguments),Ext.resumeLayouts(!0)},getNode:function(nodeInfo){return this.normalView.getNode(nodeInfo)},getRow:function(nodeInfo){return this.normalView.getRow(nodeInfo)},getCell:function(record,column){var row=this.getViewForColumn(column).getRow(record);return Ext.fly(row).down(column.getCellSelector())},indexOf:function(record){var result=this.lockedView.indexOf(record);return result=result||this.normalView.indexOf(record)},focus:function(){var target=this.ownerGrid.down(">tablepanel:not(hidden)>tableview");target&&target.focus()},focusRow:function(row){var lastFocused=this.getNavigationModel().lastFocused;(lastFocused?lastFocused.view:this.normalView).focusRow(row)},focusCell:function(position){position.view.focusCell(position)},onRowFocus:function(){this.relayFn("onRowFocus",arguments)},isVisible:function(deep){return this.ownerGrid.isVisible(deep)},getFocusEl:function(){var lastFocused=this.getNavigationModel().lastFocused;return(lastFocused?lastFocused.view:this.normalView).getFocusEl()},getCellInclusive:function(pos,returnDom){var col=pos.column,lockedSize=this.lockedGrid.getColumnManager().getColumns().length;return lockedSize<=col?((pos=Ext.apply({},pos)).column-=lockedSize,this.normalView.getCellInclusive(pos,returnDom)):this.lockedView.getCellInclusive(pos,returnDom)},getHeaderByCell:function(cell){return!!cell&&this.getVisibleColumnManager().getHeaderById(cell.getAttribute("data-columnId"))},onRowSelect:function(){this.relayFn("onRowSelect",arguments)},onRowDeselect:function(){this.relayFn("onRowDeselect",arguments)},onCellSelect:function(cellContext){cellContext.column.getView().onCellSelect({record:cellContext.record,column:cellContext.column})},onCellDeselect:function(cellContext){cellContext.column.getView().onCellDeselect({record:cellContext.record,column:cellContext.column})},getCellByPosition:function(pos,returnDom){var view=pos.view,col=pos.column;return view===this&&(pos=new Ext.grid.CellContext(col.getView()).setPosition(pos.record,pos.column)),view.getCellByPosition(pos,returnDom)},getRecord:function(node){var result=this.lockedView.getRecord(node);return result=result||this.normalView.getRecord(node)},scrollBy:function(){var normal=this.normalView;normal.scrollBy.apply(normal,arguments)},ensureVisible:function(){var normal=this.normalView;normal.ensureVisible.apply(normal,arguments)},disable:function(){this.relayFn("disable",arguments)},enable:function(){this.relayFn("enable",arguments)},addElListener:function(){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){var me=this;me.rendered=!1,me.bindStore(null,!1,"dataSource"),Ext.destroy(me.lockedViewEventRelayers,me.normalViewEventRelayers),me.lockedViewEventRelayers=me.normalViewEventRelayers=null,me.callParent(),Ext.destroy(me.loadMask,me.navigationModel,me.selModel),me.lockedView.lockingPartner=me.normalView.lockingPartner=null,me.lockedGrid=me.lockedView=me.normalGrid=me.normalView=null,me.loadMask=me.navigationModel=me.selModel=me.headerCt=null,me.ownerGrid=me.storeListeners=null}},function(){this.borrow(Ext.Component,["up"]),this.borrow(Ext.view.AbstractView,["doFirstRefresh","applyFirstRefresh"]),this.borrow(Ext.view.Table,["cellSelector","selectedCellCls","selectedItemCls"])}),Ext.define("Ext.grid.locking.Lockable",{alternateClassName:"Ext.grid.Lockable",syncRowHeight:!0,headerCounter:0,scrollDelta:40,lockedGridCls:Ext.baseCSSPrefix+"grid-inner-locked",normalGridCls:Ext.baseCSSPrefix+"grid-inner-normal",lockingBodyCls:Ext.baseCSSPrefix+"grid-locking-body",unlockText:"Unlock",lockText:"Lock",bothCfgCopy:["hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns","multiColumnSort","columnLines","rowLines","variableRowHeight","numFromEdge","trailingBufferZone","leadingBufferZone","scrollToLoadBuffer","syncRowHeight"],normalCfgCopy:["scroll"],lockedCfgCopy:[],determineXTypeToCreate:function(lockedSide){var typeToCreate,xtypes,xtypesLn,xtype,superxtype;if(this.subGridXType)typeToCreate=this.subGridXType;else{if(!lockedSide)return"gridpanel";xtype=(xtypes=this.getXTypes().split("/"))[(xtypesLn=xtypes.length)-1],typeToCreate="tablepanel"!==(superxtype=xtypes[xtypesLn-2])?superxtype:xtype}return typeToCreate},injectLockable:function(){this.focusable=!1,this.lockable=!0,this.hasView=!0;var allFeatures,allPlugins,lockedGrid,normalGrid,i,columns,lockedHeaderCt,normalHeaderCt,me=this,scrollbarSize=Ext.getScrollbarSize(),scrollbarWidth=scrollbarSize.width,store=me.store=Ext.StoreManager.lookup(me.store),lockedViewConfig=me.lockedViewConfig,normalViewConfig=me.normalViewConfig,Obj=Ext.Object,viewConfig=me.viewConfig,loadMaskCfg=viewConfig&&viewConfig.loadMask,loadMask=void 0!==loadMaskCfg?loadMaskCfg:me.loadMask,bufferedRenderer=me.bufferedRenderer,clipVertLockedScrollbar=0<scrollbarWidth&&2!==Ext.supports.touchScroll,rtl=me.getInherited().rtl;for(allFeatures=me.constructLockableFeatures(),me.features=null,allPlugins=me.constructLockablePlugins(),me.plugins=allPlugins.topPlugins,lockedGrid={id:me.id+"-locked",$initParent:me,isLocked:!0,bufferedRenderer:bufferedRenderer,ownerGrid:me,ownerLockable:me,xtype:me.determineXTypeToCreate(!0),store:store,reserveScrollbar:clipVertLockedScrollbar,scrollable:{indicators:{x:!0,y:!1}},scrollerOwner:!1,animate:!1,border:!1,cls:me.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||me.normalGrid.floatedFromCollapse},features:allFeatures.lockedFeatures,plugins:allPlugins.lockedPlugins},normalGrid={id:me.id+"-normal",$initParent:me,isLocked:!1,bufferedRenderer:bufferedRenderer,ownerGrid:me,ownerLockable:me,xtype:me.determineXTypeToCreate(),store:store,reserveScrollbar:me.reserveScrollbar,scrollerOwner:!1,border:!1,cls:me.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||me.lockedGrid.floatedFromCollapse},features:allFeatures.normalFeatures,plugins:allPlugins.normalPlugins},me.addCls(Ext.baseCSSPrefix+"grid-locked"),Ext.copy(normalGrid,me,me.bothCfgCopy,!0),Ext.copy(lockedGrid,me,me.bothCfgCopy,!0),Ext.copy(normalGrid,me,me.normalCfgCopy,!0),Ext.copy(lockedGrid,me,me.lockedCfgCopy,!0),Ext.apply(normalGrid,me.normalGridConfig),Ext.apply(lockedGrid,me.lockedGridConfig),i=0;i<me.normalCfgCopy.length;i++)delete me[me.normalCfgCopy[i]];for(i=0;i<me.lockedCfgCopy.length;i++)delete me[me.lockedCfgCopy[i]];me.addStateEvents(["lockcolumn","unlockcolumn"]),columns=me.processColumns(me.columns||[],lockedGrid),lockedGrid.columns=columns.locked,lockedGrid.columns.items.length||(lockedGrid.hidden=!0),normalGrid.columns=columns.normal,normalGrid.columns.items.length||(normalGrid.hidden=!0),normalGrid.flex=1,lockedGrid.viewConfig=lockedViewConfig=lockedViewConfig?Obj.chain(lockedViewConfig):{},normalGrid.viewConfig=normalViewConfig=normalViewConfig?Obj.chain(normalViewConfig):{},lockedViewConfig.loadingUseMsg=!1,lockedViewConfig.loadMask=!1,clipVertLockedScrollbar&&(lockedViewConfig.margin=rtl?"0 0 0 -"+scrollbarWidth+"px":"0 -"+scrollbarWidth+"px 0 0"),normalViewConfig.loadMask=!1,Ext.applyIf(lockedViewConfig,viewConfig),Ext.applyIf(normalViewConfig,viewConfig),me.initialConfig.layout||(me.layout={type:"hbox",align:"stretch"}),me.getLayout(),"border"===me.layout.type&&(me.split&&(lockedGrid.split=!0),lockedGrid.region||(lockedGrid.region="west"),normalGrid.region||(normalGrid.region="center"),me.addCls(Ext.baseCSSPrefix+"grid-locked-split")),me.layout instanceof Ext.layout.container.Box||(me.split=!1),me.view=new Ext.grid.locking.View({loadMask:loadMask,locked:lockedGrid,normal:normalGrid,ownerGrid:me}),lockedGrid=me.lockedGrid,(normalGrid=me.normalGrid).getView().getScrollable().addPartner(lockedGrid.getView().getScrollable(),"y"),scrollbarSize.height&&2!==Ext.supports.touchScroll&&(lockedGrid.on({afterlayout:me.afterLockedViewLayout,scope:me}),lockedGrid.getView().getOverflowStyle()),lockedHeaderCt=lockedGrid.headerCt,normalHeaderCt=normalGrid.headerCt,clipVertLockedScrollbar&&!rtl&&(lockedHeaderCt.reserveScrollbar=!1),me.headerCt=me.view.headerCt=new Ext.grid.locking.HeaderContainer(me),lockedHeaderCt.lockedCt=!0,lockedHeaderCt.lockableInjected=!0,normalHeaderCt.lockableInjected=!0,lockedHeaderCt.on({add:me.delaySyncLockedWidth,remove:me.delaySyncLockedWidth,columnshow:me.delaySyncLockedWidth,columnhide:me.delaySyncLockedWidth,sortchange:me.onLockedHeaderSortChange,columnresize:me.delaySyncLockedWidth,scope:me}),normalHeaderCt.on({add:me.delaySyncLockedWidth,remove:me.delaySyncLockedWidth,columnshow:me.delaySyncLockedWidth,columnhide:me.delaySyncLockedWidth,sortchange:me.onNormalHeaderSortChange,scope:me}),me.modifyHeaderCt(),me.items=[lockedGrid],me.split&&(me.addCls(Ext.baseCSSPrefix+"grid-locked-split"),me.items[1]={xtype:"splitter"}),me.items.push(normalGrid),me.relayHeaderCtEvents(lockedHeaderCt),me.relayHeaderCtEvents(normalHeaderCt),me.storeRelayers=me.relayEvents(store,["filterchange","groupchange","beforeload","load"]),me.gridRelayers=me.relayEvents(normalGrid,["viewready"])},afterInjectLockable:function(){delete this.lockedGrid.$initParent,delete this.normalGrid.$initParent},getLockingViewConfig:function(){return{xclass:"Ext.grid.locking.View",locked:this.lockedGrid,normal:this.normalGrid,panel:this}},processColumns:function(columns,lockedGrid){var i,len,column,copy,cp=new Ext.grid.header.Container({$initParent:this}),lockedHeaders=[],normalHeaders=[],lockedHeaderCt={itemId:"lockedHeaderCt",stretchMaxPartner:"^^>>#normalHeaderCt",items:lockedHeaders},normalHeaderCt={itemId:"normalHeaderCt",stretchMaxPartner:"^^>>#lockedHeaderCt",items:normalHeaders},result={locked:lockedHeaderCt,normal:normalHeaderCt};for(Ext.isObject(columns)&&(Ext.applyIf(lockedHeaderCt,columns),Ext.applyIf(normalHeaderCt,columns),delete(copy=Ext.apply({},columns)).items,Ext.apply(cp,copy),columns=columns.items),cp.constructing=!0,i=0,len=columns.length;i<len;++i)(column=columns[i]).isComponent||delete(column=((column=cp.applyDefaults(column)).$initParent=cp).lookupComponent(column)).$initParent,column.processed=!0,column.locked||column.autoLock?lockedHeaders.push(column):normalHeaders.push(column);return this.fireEvent("processcolumns",this,lockedHeaders,normalHeaders),cp.destroy(),result},afterLockedViewLayout:function(){var lockedGrid=this.lockedGrid,normalGrid=this.normalGrid,lockedView=lockedGrid.getView(),normalView=normalGrid.getView(),lockedViewHorizScrollBar=lockedView.scrollFlags.x&&lockedGrid.headerCt.tooNarrow,normalViewHorizScrollBar=normalView.scrollFlags.x&&normalGrid.headerCt.tooNarrow,normalScroller=normalView.getScrollable(),lockedScroller=lockedView.getScrollable();lockedViewHorizScrollBar!==normalViewHorizScrollBar?lockedViewHorizScrollBar?(normalScroller.setX("scroll"),lockedScroller.setX(!0)):(lockedScroller.setX("scroll"),normalScroller.setX(!0)):(lockedScroller.setX(!normalViewHorizScrollBar||"scroll"),normalScroller.setX(!0))},ensureLockedVisible:function(){this.lockedGrid.ensureVisible.apply(this.lockedGrid,arguments),this.normalGrid.ensureVisible.apply(this.normalGrid,arguments)},onLockedViewMouseWheel:function(e){var scrollTop,verticalCanScrollDown,verticalCanScrollUp,me=this,deltaY=-me.scrollDelta*e.getWheelDeltas().y,lockedView=me.lockedGrid.getView(),lockedViewElDom=lockedView.el.dom;me.ignoreMousewheel||(lockedViewElDom&&(verticalCanScrollDown=(scrollTop=lockedView.getScrollY())!==lockedViewElDom.scrollHeight-lockedViewElDom.clientHeight,verticalCanScrollUp=0!==scrollTop),(deltaY<0&&verticalCanScrollUp||0<deltaY&&verticalCanScrollDown)&&(e.stopEvent(),scrollTop+=deltaY,lockedView.setScrollY(scrollTop),me.normalGrid.getView().setScrollY(scrollTop),me.onNormalViewScroll()))},onLockedViewScroll:function(){var normalTable,lockedTable,lockedView=this.lockedGrid.getView(),normalView=this.normalGrid.getView(),lockedScrollTop=lockedView.getScrollY();normalView.getScrollY()!==lockedScrollTop&&(normalView.setScrollY(lockedScrollTop),normalView.bufferedRenderer&&(lockedTable=lockedView.body.dom,(normalTable=normalView.body.dom).style.position="absolute",normalTable.style.top=lockedTable.style.top))},onNormalViewScroll:function(){var lockedRowContainer,lockedView=this.lockedGrid.getView(),normalView=this.normalGrid.getView(),lockedScrollTop=lockedView.getScrollY(),normalScrollTop=normalView.getScrollY();normalScrollTop!==lockedScrollTop&&(lockedView.setScrollY(normalScrollTop),normalView.bufferedRenderer&&(lockedRowContainer=lockedView.body).dom&&(lockedRowContainer.dom.style.position="absolute",lockedRowContainer.translate(null,normalView.bufferedRenderer.bodyTop)))},syncRowHeights:function(){if(!this.destroyed){var scrollTop,normalView=this.normalGrid.getView(),lockedView=this.lockedGrid.getView(),normalSync=normalView.syncRowHeightBegin(),lockedSync=lockedView.syncRowHeightBegin();normalView.syncRowHeightMeasure(normalSync),lockedView.syncRowHeightMeasure(lockedSync),normalView.syncRowHeightFinish(normalSync,lockedSync),lockedView.syncRowHeightFinish(lockedSync,normalSync),scrollTop=normalView.getScrollY(),lockedView.setScrollY(scrollTop)}},modifyHeaderCt:function(){var me=this;me.lockedGrid.headerCt.getMenuItems=me.getMenuItems(me.lockedGrid.headerCt.getMenuItems,!0),me.normalGrid.headerCt.getMenuItems=me.getMenuItems(me.normalGrid.headerCt.getMenuItems,!1),me.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(me.lockedGrid.headerCt.showMenuBy,me.showMenuBy),me.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(me.normalGrid.headerCt.showMenuBy,me.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(clickEvent,t,header){var menu=this.getMenu(),unlockItem=menu.down("#unlockItem"),lockItem=menu.down("#lockItem"),sep=unlockItem.prev();!1===header.lockable?(sep.hide(),unlockItem.hide(),lockItem.hide()):(sep.show(),unlockItem.show(),lockItem.show(),unlockItem.initialConfig.disabled||unlockItem.setDisabled(!1===header.lockable),lockItem.initialConfig.disabled||lockItem.setDisabled(!header.isLockable()))},getMenuItems:function(getMenuItems,locked){var me=this,unlockText=me.unlockText,lockText=me.lockText,unlockCls=Ext.baseCSSPrefix+"hmenu-unlock",lockCls=Ext.baseCSSPrefix+"hmenu-lock",unlockHandler=me.onUnlockMenuClick.bind(me),lockHandler=me.onLockMenuClick.bind(me);return function(){var o=getMenuItems.call(this);return o.push("-",{itemId:"unlockItem",iconCls:unlockCls,text:unlockText,handler:unlockHandler,disabled:!locked}),o.push({itemId:"lockItem",iconCls:lockCls,text:lockText,handler:lockHandler,disabled:locked}),o}},delaySyncLockedWidth:function(){var me=this,task=me.syncLockedWidthTask;me.view.all.getCount()&&(task=task||(me.syncLockedWidthTask=new Ext.util.DelayedTask(me.syncLockedWidth,me))).delay(1)},syncLockedWidth:function(){var me=this,rendered=me.rendered,locked=me.lockedGrid,lockedView=locked.view,normal=me.normalGrid,lockedColCount=locked.getVisibleColumnManager().getColumns().length,normalColCount=normal.getVisibleColumnManager().getColumns().length,task=me.syncLockedWidthTask;return task&&task.cancel(),Ext.suspendLayouts(),normalColCount?(normal.show(),lockedColCount?(rendered&&locked.shrinkWrapColumns&&!locked.headerCt.forceFit&&(delete locked.flex,locked.setWidth(locked.headerCt.getTableWidth()+locked.gridPanelBorderWidth)),locked.addCls(me.lockedGridCls),locked.show(),locked.split&&(me.child("splitter").show(),me.addCls(Ext.baseCSSPrefix+"grid-locked-split"))):(rendered&&locked.getView().clearViewEl(!0),locked.hide(),locked.split&&(me.child("splitter").hide(),me.removeCls(Ext.baseCSSPrefix+"grid-locked-split"))),2!==Ext.supports.touchScroll&&Ext.Component.pendingLayouts&&lockedView.getScrollable().setX(!0),rendered&&(me.ignoreMousewheel=lockedView.scrollFlags.y)):(normal.hide(),locked.flex=1,delete locked.width,locked.removeCls(me.lockedGridCls),locked.show(),me.ignoreMousewheel=!0),Ext.resumeLayouts(!0),[lockedColCount,normalColCount]},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(activeHd,toIdx,toCt){var refreshFlags,ownerCt,hadFocus,normalScrollY,me=this,normalGrid=me.normalGrid,lockedGrid=me.lockedGrid,normalView=normalGrid.view,lockedView=lockedGrid.view,normalHCt=normalGrid.headerCt;hadFocus=(activeHd=activeHd||normalHCt.getMenu().activeHeader).hasFocus,toCt=toCt||lockedGrid.headerCt,ownerCt=activeHd.ownerCt,activeHd.isLockable()&&(activeHd.flex&&lockedGrid.shrinkWrapColumns&&(activeHd.width=activeHd.getWidth(),activeHd.flex=null),Ext.suspendLayouts(),lockedGrid.hidden&&(lockedGrid.componentLayoutCounter||(lockedView.bufferedRenderer&&lockedView.bufferedRenderer.onViewResize(lockedView,0,normalView.getHeight()),normalScrollY=normalView.getScrollY()),lockedGrid.show()),normalView.blockRefresh=lockedView.blockRefresh=!0,activeHd.ownerCmp=activeHd.ownerCt,ownerCt.remove(activeHd,!1),activeHd.locked=!0,Ext.isDefined(toIdx)?toCt.insert(toIdx,activeHd):toCt.add(activeHd),normalView.blockRefresh=lockedView.blockRefresh=!1,activeHd.ownerCmp=null,(refreshFlags=me.syncLockedWidth())[0]&&lockedGrid.getView().refreshView(),refreshFlags[1]&&normalGrid.getView().refreshView(),me.fireEvent("lockcolumn",me,activeHd),Ext.resumeLayouts(!0),normalScrollY&&(lockedView.setScrollY(normalScrollY),normalView.setScrollY(normalScrollY)),hadFocus&&activeHd.focus())},unlock:function(activeHd,toIdx,toCt){var refreshFlags,hadFocus,me=this,normalGrid=me.normalGrid,lockedGrid=me.lockedGrid,normalView=normalGrid.view,lockedView=lockedGrid.view,lockedHCt=lockedGrid.headerCt;Ext.isDefined(toIdx)||(toIdx=0),hadFocus=(activeHd=activeHd||lockedHCt.getMenu().activeHeader).hasFocus,toCt=toCt||normalGrid.headerCt,Ext.suspendLayouts(),normalView.blockRefresh=lockedView.blockRefresh=!0,activeHd.ownerCmp=activeHd.ownerCt,activeHd.ownerCt.remove(activeHd,!1),activeHd.locked=!1,toCt.insert(toIdx,activeHd),normalView.blockRefresh=lockedView.blockRefresh=!1,activeHd.ownerCmp=null,(refreshFlags=me.syncLockedWidth())[0]&&lockedGrid.getView().refreshView(),refreshFlags[1]&&normalGrid.getView().refreshView(),me.fireEvent("unlockcolumn",me,activeHd),Ext.resumeLayouts(!0),hadFocus&&activeHd.focus()},reconfigureLockable:function(store,columns){var view,loadMask,me=this,oldStore=me.store,lockedGrid=me.lockedGrid,normalGrid=me.normalGrid;store&&store!==oldStore&&(store=Ext.data.StoreManager.lookup(store),me.store=store,lockedGrid.view.blockRefresh=normalGrid.view.blockRefresh=!0,lockedGrid.bindStore(store),(view=lockedGrid.view).store=store,view.dataSource.isFeatureStore||(view.dataSource=store),view.bufferedRenderer&&view.bufferedRenderer.bindStore(store),normalGrid.bindStore(store),(view=normalGrid.view).store=store,view.dataSource.isFeatureStore||(view.dataSource=store),view.bufferedRenderer&&view.bufferedRenderer.bindStore(store),me.view.store=store,(loadMask=me.view.loadMask)&&loadMask.isLoadMask&&loadMask.bindStore(store),me.view.bindStore(normalGrid.view.dataSource,!1,"dataSource"),lockedGrid.view.blockRefresh=normalGrid.view.blockRefresh=!1),columns&&(lockedGrid.reconfiguring=normalGrid.reconfiguring=!0,lockedGrid.headerCt.removeAll(),normalGrid.headerCt.removeAll(),columns=me.processColumns(columns,lockedGrid),lockedGrid.headerCt.add(columns.locked.items),normalGrid.headerCt.add(columns.normal.items),lockedGrid.reconfiguring=normalGrid.reconfiguring=!1,me.syncLockedWidth()),me.refreshCounter=lockedGrid.view.refreshCounter},afterReconfigureLockable:function(){var lockedView=this.lockedGrid.getView();this.refreshCounter===lockedView.refreshCounter&&this.view.refresh()},constructLockableFeatures:function(){var feature,featureClone,lockedFeatures,normalFeatures,len,features=this.features,i=0;if(features)for(Ext.isArray(features)||(features=[features]),lockedFeatures=[],normalFeatures=[],len=features.length;i<len;i++)switch((feature=features[i]).isFeature||(feature=Ext.create("feature."+feature.ftype,feature)),feature.lockableScope){case"locked":lockedFeatures.push(feature);break;case"normal":normalFeatures.push(feature);break;default:feature.lockableScope="both",lockedFeatures.push(feature),normalFeatures.push(featureClone=feature.clone()),(featureClone.lockingPartner=feature).lockingPartner=featureClone}return{normalFeatures:normalFeatures,lockedFeatures:lockedFeatures}},constructLockablePlugins:function(){var plugin,normalPlugin,lockedPlugin,topPlugins,lockedPlugins,normalPlugins,len,plugins=this.plugins,i=0;if(plugins)for(Ext.isArray(plugins)||(plugins=[plugins]),topPlugins=[],lockedPlugins=[],normalPlugins=[],len=plugins.length;i<len;i++)switch((plugin=plugins[i]).init?plugin.lockableScope:(plugin.ptype?Ext.ClassManager.getByAlias("plugin."+plugin.ptype):Ext.ClassManager.get(plugin.xclass)).prototype.lockableScope){case"both":lockedPlugins.push(lockedPlugin=plugin.clonePlugin()),normalPlugins.push(normalPlugin=plugin.clonePlugin()),(lockedPlugin.lockingPartner=normalPlugin).lockingPartner=lockedPlugin,Ext.destroy(plugin);break;case"locked":lockedPlugins.push(plugin);break;case"normal":normalPlugins.push(plugin);break;default:topPlugins.push(plugin)}return{topPlugins:topPlugins,normalPlugins:normalPlugins,lockedPlugins:lockedPlugins}},destroyLockable:function(){var me=this,task=me.syncLockedWidthTask;task&&(task.cancel(),me.syncLockedWidthTask=null),me.lockedGrid&&me.lockedGrid.headerCt&&(me.lockedGrid.headerCt.showMenuBy=null),me.normalGrid&&me.normalGrid.headerCt&&(me.normalGrid.headerCt.showMenuBy=null),Ext.destroy(me.view,me.headerCt)}},function(){this.borrow(Ext.Component,["constructPlugin"])}),Ext.define("Ext.grid.plugin.BufferedRenderer",{extend:Ext.AbstractPlugin,alias:"plugin.bufferedrenderer",isBufferedRenderer:!0,lockableScope:"both",numFromEdge:2,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:!0,scrollToLoadBuffer:200,viewSize:100,rowHeight:21,position:0,lastScrollDirection:1,bodyTop:0,scrollHeight:0,loadId:0,init:function(grid){var me=this,view=grid.view,viewListeners={scroll:me.onViewScroll,scrollend:me.onViewScrollEnd,refresh:me.onViewRefresh,columnschanged:me.checkVariableRowHeight,boxready:me.onViewBoxReady,scope:me,destroyable:!0},initialConfig=view.initialConfig;(grid.isTree||grid.ownerLockable&&grid.ownerLockable.isTree)&&(view.blockRefresh=!1,initialConfig&&void 0===initialConfig.loadMask&&(view.loadMask=!0)),view.positionBody&&(viewListeners.refresh=me.onViewRefresh),Ext.isWebKit&&2!==Ext.supports.touchScroll&&(me.needsPointerEventsFix=!0,viewListeners.scrollEnd=me.onViewScrollEnd),me.grid=grid,me.view=view,me.isRTL=view.getInherited().rtl,view.bufferedRenderer=me,view.preserveScrollOnRefresh=!0,view.animate=!1,me.bindStore(view.dataSource),view.hasOwnProperty("rowHeight")&&(me.rowHeight=view.rowHeight),me.position=0,me.viewListeners=view.on(viewListeners)},checkVariableRowHeight:function(){this.variableRowHeight=this.view.hasVariableRowHeight()},bindStore:function(newStore){var me=this,currentStore=me.store;me.view;currentStore&&currentStore.isFeatureStore||(currentStore&&me.unbindStore(),me.storeListeners=newStore.on({scope:me,groupchange:me.onStoreGroupChange,clear:me.onStoreClear,beforeload:me.onBeforeStoreLoad,load:me.onStoreLoad,destroyable:!0}),me.store=newStore,me.view.componentLayout.layoutCount&&(delete me.viewSize,newStore.isBufferedStore&&newStore.setViewSize(me.viewSize),me.onViewResize(me.view,0,me.view.getHeight())))},unbindStore:function(){this.storeListeners.destroy(),this.storeListeners=this.store=null},onBeforeStoreLoad:function(store){var me=this,view=me.view;view&&view.refreshCounter&&(store.isTreeStore||view.preserveScrollOnReload?me.nextRefreshStartIndex=view.all.startIndex:0!==me.scrollTop&&(me.setBodyTop(me.bodyTop=me.scrollTop=me.position=me.scrollHeight=me.nextRefreshStartIndex=0),view.setScrollY(0)),me.lastScrollDirection=me.scrollOffset=null),me.disable()},onStoreLoad:function(){this.enable()},onStoreClear:function(){var me=this,view=me.view;view.rendered&&!me.store.destroyed&&(0!==me.scrollTop&&(me.bodyTop=me.scrollTop=me.position=me.scrollHeight=0,me.nextRefreshStartIndex=null,view.setScrollY(0)),view.refresh(),me.lastScrollDirection=me.scrollOffset=null)},onStoreGroupChange:function(store){this.refreshSize()},onViewBoxReady:function(view){this.refreshScroller(view,this.scrollHeight)},onViewRefresh:function(view,records){var height,me=this,rows=view.all;if(me.checkVariableRowHeight(),!view.componentLayoutCounter&&(view.headerCt.down("{flex}")||me.variableRowHeight))return view.on({boxready:Ext.Function.pass(me.onViewRefresh,[view,records],me),single:!0}),void(me.skipNextRefreshSize=!0);me.skipNextRefreshSize=!1,me.refreshing||(me.refreshSize(),me.scrollTop!==view.getScrollY()?(me.onViewScroll(),me.onViewScrollEnd()):(me.hasOwnProperty("bodyTop")||(me.bodyTop=rows.startIndex*me.rowHeight,view.setScrollY(me.bodyTop)),me.setBodyTop(me.bodyTop),height=view.getHeight(),rows.getCount()&&0<height&&(me.onViewResize(view,null,height),records&&rows.getCount()!==records.length&&(records.length=0,records.push.apply(records,me.store.getRange(rows.startIndex,rows.endIndex))))))},beforeTableLayout:function(ownerContext){var dom=this.view.body.dom;dom&&(ownerContext.bodyHeight=dom.offsetHeight,ownerContext.bodyWidth=dom.offsetWidth)},afterTableLayout:function(ownerContext){var renderedBlockHeight,me=this,view=me.view;ownerContext.bodyHeight&&view.body.dom&&(delete me.rowHeight,me.refreshSize(),(renderedBlockHeight=view.body.dom.offsetHeight)!==ownerContext.bodyHeight&&(me.onViewResize(view,null,view.el.lastBox.height),renderedBlockHeight<ownerContext.bodyHeight&&(me.viewSize>=me.store.getCount()?me.setBodyTop(0):(me.bodyTop>me.scrollTop||me.bodyTop+renderedBlockHeight<me.scrollTop+me.viewClientHeight)&&me.setBodyTop(me.scrollTop-me.trailingBufferZone*me.rowHeight)),view.all.endIndex===view.dataSource.getCount()-1&&me.stretchView(view,me.scrollHeight=me.bodyTop+renderedBlockHeight-1)))},refreshSize:function(){var me=this,view=me.view,skipNextRefreshSize=me.skipNextRefreshSize,dom=view.body.dom;me.skipNextRefreshSize=!1,!skipNextRefreshSize&&dom&&(me.bodyHeight=view.body.dom.offsetHeight,me.scrollHeight=me.getScrollHeight(),me.stretchView(view,me.scrollHeight))},onViewResize:function(view,width,height,oldWidth,oldHeight){var newViewSize,me=this;oldHeight&&height===oldHeight||(newViewSize=Math.ceil(height/me.rowHeight)+me.trailingBufferZone+me.leadingBufferZone,me.viewSize=me.setViewSize(newViewSize),me.viewClientHeight=view.el.dom.clientHeight)},stretchView:function(view,scrollRange){var me=this;me.scrollTop>scrollRange&&(me.position=me.scrollTop=Math.max(scrollRange-me.bodyHeight,0),view.setScrollY(me.scrollTop)),me.bodyTop>scrollRange&&view.body.translate(null,me.bodyTop=me.position),view.getScrollable()&&me.refreshScroller(view,scrollRange)},refreshScroller:function(view,scrollRange){var scroller=view.getScrollable();scroller&&(scroller.setElementSize&&scroller.setElementSize(),scroller.setSize({x:view.headerCt.getTableWidth(),y:scrollRange}))},setViewSize:function(viewSize,fromLockingPartner){var start,end,diff,records,oldRows,newRows,storeCount,me=this,store=me.store,view=me.view,rows=view.all,elCount=rows.getCount(),lockingPartner=me.view.lockingPartner&&me.view.lockingPartner.bufferedRenderer;return lockingPartner&&!fromLockingPartner&&lockingPartner.view.componentLayoutCounter&&(lockingPartner.viewSize>viewSize?viewSize=lockingPartner.viewSize:lockingPartner.setViewSize(viewSize,!0)),(diff=elCount-viewSize)&&(me.scrollTop=view.getScrollY(),me.viewSize=viewSize,store.isBufferedStore&&store.setViewSize(viewSize),elCount&&(storeCount=store.getCount(),start=rows.startIndex,end=Math.min(start+viewSize-1,storeCount-1),start===rows.startIndex&&end===rows.endIndex?diff<0&&me.handleViewScroll(-1):(lockingPartner&&lockingPartner.disable(),diff<0?elCount<storeCount?store.getRange(rows.endIndex+1,end,{callback:function(records,start){newRows=view.doAdd(records,start),view.fireEvent("itemadd",records,start,newRows),me.setBodyTop(me.bodyTop)}}):me.refreshView(0):(start=rows.endIndex-(diff-1),end=rows.endIndex,oldRows=rows.slice(start,end+1),rows.removeRange(start,end,!0),view.hasListeners.itemremove&&(records=store.getRange(start,end),view.fireEvent("itemremove",records,start,oldRows)),me.setBodyTop(me.bodyTop)),lockingPartner&&lockingPartner.enable()))),viewSize},getViewRange:function(){var rows=this.view.all,store=this.store,startIndex=0;return rows.getCount()?startIndex=rows.startIndex:store.isBufferedStore&&(store.currentPage||(store.currentPage=1),startIndex=rows.startIndex=(store.currentPage-1)*(store.pageSize||1),store.currentPage=1),store.data.getCount()?store.getRange(startIndex,startIndex+(this.viewSize||store.defaultViewSize)-1):[]},onReplace:function(store,startIndex,oldRecords,newRecords){var oldStartIndex,me=this,view=me.view,rows=view.all,renderedSize=rows.getCount(),lastAffectedIndex=startIndex+oldRecords.length-1,recordIncrement=newRecords.length-oldRecords.length,scrollIncrement=recordIncrement*me.rowHeight;if(!(startIndex>=rows.startIndex+me.viewSize))return renderedSize&&lastAffectedIndex<rows.startIndex&&rows.getCount()>=me.viewSize?(rows.moveBlock(recordIncrement),me.refreshSize(),oldStartIndex=rows.startIndex,0<recordIncrement&&(me.doNotMirror=!0,me.handleViewScroll(-1),me.doNotMirror=!1),rows.startIndex===oldStartIndex?rows.startIndex&&(me.setBodyTop(me.bodyTop+=scrollIncrement),view.suspendEvent("scroll"),view.scrollBy(0,scrollIncrement),view.resumeEvent("scroll"),me.position=me.scrollTop=view.getScrollY()):(view.suspendEvent("scroll"),view.scrollBy(0,(oldStartIndex-rows.startIndex)*me.rowHeight),view.resumeEvent("scroll")),void view.refreshSize(rows.getCount()!==renderedSize)):renderedSize&&startIndex>rows.endIndex?(me.refreshSize(),0<recordIncrement&&me.onRangeFetched(null,rows.startIndex,Math.min(store.getCount(),rows.startIndex+me.viewSize)-1,null,!0),void view.refreshSize(rows.getCount()!==renderedSize)):void(startIndex<rows.startIndex&&lastAffectedIndex<=rows.endIndex?me.refreshView(rows.startIndex-oldRecords.length+newRecords.length):(startIndex<rows.startIndex&&lastAffectedIndex<=rows.endIndex&&scrollIncrement&&(view.suspendEvent("scroll"),view.setScrollY(me.position=me.scrollTop+=scrollIncrement),view.resumeEvent("scroll")),me.refreshView()));me.refreshSize()},scrollTo:function(recordIdx,options){var startIdx,endIdx,targetRow,tableTop,groupingFeature,metaGroup,record,direction,args=arguments,me=this,view=me.view,lockingPartner=view.lockingPartner&&view.lockingPartner.grid.isVisible()&&view.lockingPartner.bufferedRenderer,store=me.store,total=store.getCount();if(void 0===options||options instanceof Object||(options={select:args[1],callback:args[2],scope:args[3]}),(groupingFeature=view.dataSource.groupingFeature)&&groupingFeature.collapsible)record=recordIdx.isEntity?recordIdx:view.store.getAt(Math.min(Math.max(recordIdx,0),view.store.getCount()-1)),metaGroup=groupingFeature.getMetaGroup(record),recordIdx=metaGroup&&metaGroup.isCollapsed?groupingFeature.isExpandingOrCollapsing?(record=metaGroup.placeholder,groupingFeature.indexOfPlaceholder(record)):(groupingFeature.expand(groupingFeature.getGroup(record).getGroupKey()),total=store.getCount(),groupingFeature.indexOf(record)):groupingFeature.indexOf(record);else if(recordIdx.isEntity){if(record=recordIdx,-1===(recordIdx=store.indexOf(record)))return}else recordIdx=Math.min(Math.max(recordIdx,0),total-1),record=store.getAt(recordIdx);if(record&&(targetRow=view.getNode(record)))return view.grid.ensureVisible(record,options),me.onViewScroll(),void me.onViewScrollEnd();recordIdx<view.all.startIndex?(direction=-1,startIdx=Math.max(Math.min(recordIdx-Math.floor((me.leadingBufferZone+me.trailingBufferZone)/2),total-me.viewSize+1),0),endIdx=Math.min(startIdx+me.viewSize-1,total-1)):(direction=1,endIdx=Math.min(recordIdx+Math.floor((me.leadingBufferZone+me.trailingBufferZone)/2),total-1),startIdx=Math.max(endIdx-(me.viewSize-1),0)),tableTop=Math.max(startIdx*me.rowHeight,0),store.getRange(startIdx,endIdx,{callback:function(range,start,end){me.renderRange(start,end,!0,!0),record=store.data.getRange(recordIdx,recordIdx+1)[0],targetRow=view.getNode(record),view.body.translate(null,me.bodyTop=tableTop),1===direction&&me.refreshSize(),lockingPartner&&(lockingPartner.renderRange(start,end,!0,!0),me.syncRowHeights(),lockingPartner.view.body.translate(null,lockingPartner.bodyTop=tableTop),1===direction&&lockingPartner.refreshSize()),targetRow&&(view.grid.ensureVisible(record,options),me.scrollTop=me.position=me.view.getScrollY(),lockingPartner&&(lockingPartner.position=lockingPartner.scrollTop=me.scrollTop))}})},onViewScroll:function(){var vscrollDistance,scrollDirection,me=this,totalCount=me.store.getCount(),scrollTop=me.scrollTop=me.view.getScrollY();me.needsPointerEventsFix&&(me.view.body.dom.style.pointerEvents="none"),me.disabled||totalCount<me.viewSize||(scrollDirection=0<(vscrollDistance=scrollTop-me.position)?1:-1,(20<=Math.abs(vscrollDistance)||scrollDirection!==me.lastScrollDirection)&&(me.lastScrollDirection=scrollDirection,me.handleViewScroll(me.lastScrollDirection)))},onViewScrollEnd:function(){this.needsPointerEventsFix&&(this.view.body.dom.style.pointerEvents="")},handleViewScroll:function(direction){var requestStart,requestEnd,me=this,rows=me.view.all,store=me.store,viewSize=me.viewSize,lastItemIndex=store.getCount()-1;if(-1===direction?rows.startIndex&&me.topOfViewCloseToEdge()&&(requestStart=Math.max(0,me.getLastVisibleRowIndex()+me.trailingBufferZone-viewSize)):rows.endIndex<lastItemIndex&&me.bottomOfViewCloseToEdge()&&(requestStart=Math.max(0,me.getFirstVisibleRowIndex()-me.trailingBufferZone)),null==requestStart)me.position=me.scrollTop,me.loadId++;else if(requestEnd=Math.min(requestStart+viewSize-1,lastItemIndex),me.variableRowHeight&&requestEnd===rows.endIndex&&requestEnd<lastItemIndex&&(requestEnd++,me.viewSize=viewSize++,store.isBufferedStore&&store.setViewSize(me.viewSize)),requestStart!==rows.startIndex||requestEnd!==rows.endIndex)return me.renderRange(requestStart,requestEnd),!0},bottomOfViewCloseToEdge:function(){var me=this;return me.variableRowHeight?me.bodyTop+me.bodyHeight<me.scrollTop+me.view.lastBox.height+me.numFromEdge*me.rowHeight:me.view.all.endIndex-me.getLastVisibleRowIndex()<me.numFromEdge},topOfViewCloseToEdge:function(){var me=this;return me.variableRowHeight?me.bodyTop>me.scrollTop-me.numFromEdge*me.rowHeight:me.getFirstVisibleRowIndex()-me.view.all.startIndex<me.numFromEdge},refreshView:function(startIndex){var endIndex,me=this,viewSize=me.viewSize,rows=me.view.all,store=me.store,storeCount=store.getCount(),maxIndex=Math.max(0,storeCount-1);if(!storeCount)return me.doRefreshView([],0,0);storeCount<viewSize?(startIndex=0,endIndex=maxIndex):(null==startIndex&&(null!=me.nextRefreshStartIndex?(startIndex=me.nextRefreshStartIndex,me.nextRefreshStartIndex=null):startIndex=rows.startIndex),startIndex=Math.max(0,Math.min(startIndex,maxIndex-(viewSize-me.leadingBufferZone)+1)),viewSize<(endIndex=Math.min(startIndex+viewSize-1,maxIndex))-startIndex+1&&(startIndex=endIndex-viewSize+1)),0===startIndex&&0===endIndex&&0===storeCount?me.doRefreshView([],0,0):store.getRange(startIndex,endIndex,{callback:me.doRefreshView,scope:me})},doRefreshView:function(range,startIndex,endIndex,options){var previousFirstItem,previousLastItem,calculatedTop,scrollIncrement,restoreFocus,me=this,view=me.view,rows=view.all,previousStartIndex=rows.startIndex,previousEndIndex=rows.endIndex,prevRowCount=rows.getCount(),viewMoved=startIndex!==rows.startIndex;if(view.refreshCounter){if(view.hasListeners.beforerefresh&&!1===view.fireEvent("beforerefresh",view))return;view.refreshing=me.refreshing=!0,restoreFocus=view.saveFocusState(),view.clearViewEl(!0),view.refreshCounter++,range.length?(view.doAdd(range,startIndex),viewMoved&&(previousFirstItem=rows.item(previousStartIndex,!0),previousLastItem=rows.item(previousEndIndex,!0),previousFirstItem?scrollIncrement=-previousFirstItem.offsetTop:previousLastItem&&(scrollIncrement=rows.last(!0).offsetTop-previousLastItem.offsetTop),scrollIncrement?(me.bodyTop=Math.max(me.bodyTop+scrollIncrement,0),me.scrollTop=me.bodyTop?me.scrollTop+scrollIncrement:0):(me.bodyTop=calculatedTop=startIndex*me.rowHeight,me.scrollTop=Math.max(calculatedTop-me.rowHeight*(calculatedTop<me.bodyTop?me.leadingBufferZone:me.trailingBufferZone,0))))):(me.scrollTop&&(me.bodyTop=me.scrollTop=0),view.addEmptyText()),viewMoved&&(me.setBodyTop(me.bodyTop),view.suspendEvent("scroll"),view.setScrollY(me.position=me.scrollTop),view.resumeEvent("scroll")),me.refreshSize(),view.refreshSize(rows.getCount()!==prevRowCount),view.fireEvent("refresh",view,range),restoreFocus(),view.headerCt.setSortState(),view.refreshNeeded=view.refreshing=me.refreshing=!1}else view.refresh()},renderRange:function(start,end,forceSynchronous,fromLockingPartner){var me=this,rows=me.view.all,store=me.store;start===rows.startIndex&&end===rows.endIndex||(store.rangeCached(start,end)?(me.cancelLoad(),me.synchronousRender||forceSynchronous?me.onRangeFetched(null,start,end,null,fromLockingPartner):(me.renderTask||(me.renderTask=new Ext.util.DelayedTask(me.onRangeFetched,me,null,!1)),me.renderTask.delay(1,null,null,[null,start,end,null,fromLockingPartner]))):me.attemptLoad(start,end))},onRangeFetched:function(range,start,end,options,fromLockingPartner){var oldStart,removeCount,calculatedTop,newTop,newRows,partnerNewRows,topAdditionSize,topBufferZone,i,activeEl,containsFocus,pos,me=this,view=me.view,viewEl=view.el,rows=view.all,increment=0,lockingPartner=view.lockingPartner&&!fromLockingPartner&&!me.doNotMirror&&view.lockingPartner.bufferedRenderer,variableRowHeight=me.variableRowHeight;if(!view.destroyed){if(range)me.scrollTop=me.view.getScrollY();else if(!(range=me.store.getRange(start,end)))return;if(activeEl=Ext.Element.getActiveElement(),containsFocus=viewEl.contains(activeEl),calculatedTop=start*me.rowHeight,start<rows.startIndex&&end>rows.endIndex){for(topAdditionSize=rows.startIndex-start,view.clearViewEl(!0),newRows=view.doAdd(range,start),view.fireEvent("itemadd",range,start,newRows),i=0;i<topAdditionSize;i++)increment-=newRows[i].offsetHeight;newTop=me.bodyTop+increment}else(me.teleported||start>rows.endIndex||end<rows.startIndex)&&(newTop=calculatedTop,variableRowHeight&&(topBufferZone=me.scrollTop<me.position?me.leadingBufferZone:me.trailingBufferZone)<start&&(newTop=me.scrollTop-me.rowHeight*topBufferZone),view.clearViewEl(!0),me.teleported=!1),rows.getCount()?end>rows.endIndex?(removeCount=Math.max(start-rows.startIndex,0),variableRowHeight&&(increment=rows.item(rows.startIndex+removeCount,!0).offsetTop),newRows=rows.scroll(Ext.Array.slice(range,rows.endIndex+1-start),1,removeCount),newTop=variableRowHeight?me.bodyTop+increment:calculatedTop):(removeCount=Math.max(rows.endIndex-end,0),oldStart=rows.startIndex,newRows=rows.scroll(Ext.Array.slice(range,0,rows.startIndex-start),-1,removeCount),variableRowHeight?(newTop=me.bodyTop-rows.item(oldStart,!0).offsetTop,rows.startIndex?newTop<0&&(increment=rows.startIndex*me.rowHeight,view.setScrollY(me.position=me.scrollTop+=increment),newTop=me.bodyTop+increment):newTop&&(view.setScrollY(me.position=me.scrollTop-=newTop),newTop=0)):newTop=calculatedTop):(newRows=view.doAdd(range,start),view.fireEvent("itemadd",range,start,newRows)),me.position=me.scrollTop;return containsFocus&&!viewEl.contains(activeEl)&&(pos=view.actionableMode?view.actionPosition:view.lastFocused)&&pos.column&&(view.onFocusLeave({}),pos.column.focus()),newTop=Math.max(Math.floor(newTop),0),view.positionBody&&me.setBodyTop(newTop),newRows&&lockingPartner&&!lockingPartner.disabled&&(lockingPartner.scrollTop=lockingPartner.position=me.scrollTop,lockingPartner.view.ownerCt.isVisible()&&(partnerNewRows=lockingPartner.onRangeFetched(null,start,end,options,!0),!view.ownerGrid.syncRowHeight&&lockingPartner.variableRowHeight===variableRowHeight||(me.syncRowHeights(newRows,partnerNewRows),me.bodyHeight=view.body.dom.offsetHeight)),lockingPartner.bodyTop!==newTop&&lockingPartner.setBodyTop(newTop),lockingPartner.view.setScrollY(me.scrollTop)),newRows}},syncRowHeights:function(itemEls,partnerItemEls){var i,rowSync,me=this,ln=0,otherLn=1,mySynchronizer=[],otherSynchronizer=[],RowSynchronizer=Ext.grid.locking.RowSynchronizer;for(itemEls&&partnerItemEls&&(ln=itemEls.length,otherLn=partnerItemEls.length),ln!==otherLn&&(itemEls=me.view.all.slice(),partnerItemEls=me.view.lockingPartner.all.slice(),ln=otherLn=itemEls.length),i=0;i<ln;i++)mySynchronizer[i]=rowSync=new RowSynchronizer(me.view,itemEls[i]),rowSync.measure();for(i=0;i<otherLn;i++)otherSynchronizer[i]=rowSync=new RowSynchronizer(me.view.lockingPartner,partnerItemEls[i]),rowSync.measure();for(i=0;i<ln;i++)mySynchronizer[i].finish(otherSynchronizer[i]),otherSynchronizer[i].finish(mySynchronizer[i]);me.syncRowHeightsFinish()},syncRowHeightsFinish:function(){var view=this.view,lockingPartner=view.lockingPartner.bufferedRenderer;view.componentLayoutCounter&&(delete this.rowHeight,this.refreshSize(),lockingPartner.rowHeight!==this.rowHeight&&(delete lockingPartner.rowHeight,lockingPartner.refreshSize()))},setBodyTop:function(bodyTop){var me=this,view=me.view,rows=view.all,store=me.store,body=view.body;body.dom&&(me.translateBody(body,bodyTop),me.variableRowHeight?(me.bodyHeight=body.dom.offsetHeight,rows.endIndex===store.getCount()-1?me.scrollHeight=bodyTop+me.bodyHeight-1:me.scrollHeight=me.getScrollHeight(),me.stretchView(view,me.scrollHeight)):me.bodyHeight=rows.getCount()*me.rowHeight)},translateBody:function(body,bodyTop){body.translate(null,this.bodyTop=bodyTop)},getFirstVisibleRowIndex:function(startRow,endRow,viewportTop,viewportBottom){var target,targetTop,me=this,rows=me.view.all,elements=rows.elements,clientHeight=me.viewClientHeight,bodyTop=me.bodyTop;if(rows.getCount()&&me.variableRowHeight){if(arguments.length)target=startRow+Math.floor((endRow-startRow)/2);else{if(startRow=rows.startIndex,endRow=rows.endIndex,(viewportBottom=(viewportTop=me.scrollTop)+clientHeight)<bodyTop||bodyTop+me.bodyHeight<viewportTop)return me.teleported=!0,Math.floor(me.scrollTop/me.rowHeight);target=startRow+Math.min(me.numFromEdge+(-1===me.lastScrollDirection?me.leadingBufferZone:me.trailingBufferZone),Math.floor((endRow-startRow)/2))}if((targetTop=bodyTop+elements[target].offsetTop)+elements[target].offsetHeight<=viewportTop)return me.getFirstVisibleRowIndex(target+1,endRow,viewportTop,viewportBottom);if(targetTop<=viewportTop)return target;if(target!==startRow)return me.getFirstVisibleRowIndex(startRow,target-1,viewportTop,viewportBottom)}return Math.floor(me.scrollTop/me.rowHeight)},getLastVisibleRowIndex:function(startRow,endRow,viewportTop,viewportBottom){var target,targetTop,me=this,rows=me.view.all,elements=rows.elements,clientHeight=me.viewClientHeight,bodyTop=me.bodyTop;if(rows.getCount()&&me.variableRowHeight){if(arguments.length)target=startRow+Math.floor((endRow-startRow)/2);else{if(startRow=rows.startIndex,endRow=rows.endIndex,(viewportBottom=(viewportTop=me.scrollTop)+clientHeight)<bodyTop||bodyTop+me.bodyHeight<viewportTop)return me.teleported=!0,Math.floor(me.scrollTop/me.rowHeight)+Math.ceil(clientHeight/me.rowHeight);target=endRow-Math.min(me.numFromEdge+(1===me.lastScrollDirection?me.leadingBufferZone:me.trailingBufferZone),Math.floor((endRow-startRow)/2))}if(viewportBottom<(targetTop=bodyTop+elements[target].offsetTop))return me.getLastVisibleRowIndex(startRow,target-1,viewportTop,viewportBottom);if(viewportBottom<=targetTop+elements[target].offsetHeight)return target;if(target!==endRow)return me.getLastVisibleRowIndex(target+1,endRow,viewportTop,viewportBottom)}return me.getFirstVisibleRowIndex()+Math.ceil(clientHeight/me.rowHeight)},getScrollHeight:function(){var row,rowHeight,borderWidth,scrollHeight,me=this,rows=me.view.all,recCount=me.store.getCount(),rowCount=rows.getCount();return recCount?(me.hasOwnProperty("rowHeight")||(rowCount?me.variableRowHeight?me.rowHeight=Math.floor(me.bodyHeight/rowCount):(rowHeight=(row=rows.first()).getHeight(),Ext.isIE8&&0<(borderWidth=row.getBorderWidth("b"))&&(rowHeight-=borderWidth),me.rowHeight=rowHeight):delete me.rowHeight),me.variableRowHeight?rows.endIndex===recCount-1?scrollHeight=me.bodyTop+me.bodyHeight-1:(scrollHeight=Math.floor((recCount-rowCount)*me.rowHeight)+me.bodyHeight,scrollHeight+=me.bodyTop-rows.startIndex*me.rowHeight):scrollHeight=Math.floor(recCount*me.rowHeight),me.scrollHeight=scrollHeight):0},attemptLoad:function(start,end){var me=this;me.scrollToLoadBuffer?(me.loadTask||(me.loadTask=new Ext.util.DelayedTask(me.doAttemptLoad,me,[])),me.loadTask.delay(me.scrollToLoadBuffer,me.doAttemptLoad,me,[start,end])):me.doAttemptLoad(start,end)},cancelLoad:function(){this.loadTask&&this.loadTask.cancel()},doAttemptLoad:function(start,end){var me=this;me.destroyed||me.store.getRange(start,end,{loadId:++me.loadId,callback:function(range,start,end,options){options.loadId===me.loadId&&me.onRangeFetched(range,start,end,options)},fireEvent:!1})},destroy:function(){var me=this,view=me.view;me.cancelLoad(),view&&view.el&&view.un("scroll",me.onViewScroll,me),me.store&&me.unbindStore(),me.viewListeners=me.gridListeners=me.view=me.grid=Ext.destroy(me.viewListeners,me.stretcher,me.gridListeners),me.callParent()}},function(cls){Ext.supports.Touch&&(cls.prototype.leadingBufferZone=cls.prototype.trailingBufferZone=2,cls.prototype.numFromEdge=1)}),Ext.define("Ext.util.Queue",{constructor:function(){this.clear()},add:function(obj){var me=this,key=me.getKey(obj);return me.map[key]||(++me.length,me.items.push(obj),me.map[key]=obj),obj},clear:function(){var items=this.items;return this.items=[],this.map={},this.length=0,items},contains:function(obj){var key=this.getKey(obj);return this.map.hasOwnProperty(key)},getCount:function(){return this.length},getKey:function(obj){return obj.id},remove:function(obj){var index,me=this,key=me.getKey(obj),items=me.items;return me.map[key]&&(index=Ext.Array.indexOf(items,obj),Ext.Array.erase(items,index,1),delete me.map[key],--me.length),obj}}),Ext.define("Ext.layout.ContextItem",{heightModel:null,widthModel:null,sizeModel:null,optOut:!1,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:!0,isContextItem:!0,isTopLevel:!1,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:!1,constructor:function(config){var el,lastBox,ownerCt,ownerCtContext,props,sizeModel,target,lastWidth,lastHeight,sameWidth,sameHeight,widthModel,heightModel,optOut,me=this,sizeModels=Ext.layout.SizeModel.sizeModels,configured=sizeModels.configured,shrinkWrap=sizeModels.shrinkWrap;Ext.apply(me,config),target=me.target,el=me.el,me.id=target.id,me.flushedProps={},me.props=props={},me.styles={},target.isComponent?(me.wrapsComponent=!0,me.framing=target.frameSize||null,me.isComponentChild=target.ownerLayout&&target.ownerLayout.isComponentLayout,lastBox=target.lastBox,(ownerCt=target.ownerCt)&&(ownerCtContext=ownerCt.el&&me.context.items[ownerCt.el.id])&&(me.ownerCtContext=ownerCtContext),me.sizeModel=sizeModel=target.getSizeModel(ownerCtContext&&ownerCtContext.widthModel.pairsByHeightOrdinal[ownerCtContext.heightModel.ordinal]),me.widthModel=widthModel=sizeModel.width,me.heightModel=heightModel=sizeModel.height,lastBox&&!1===lastBox.invalid&&(sameWidth=target.width===(lastWidth=lastBox.width),sameHeight=target.height===(lastHeight=lastBox.height),widthModel===shrinkWrap&&heightModel===shrinkWrap?optOut=!0:widthModel===configured&&sameWidth&&(optOut=heightModel===shrinkWrap||heightModel===configured&&sameHeight),optOut&&(me.optOut=!0,props.width=lastWidth,props.height=lastHeight))):lastBox=el.lastBox,me.lastBox=lastBox},init:function(full,options){var children,i,n,ownerCt,sizeModel,target,newHeightModel,newWidthModel,me=this,oldProps=me.props,oldDirty=me.dirty,ownerCtContext=me.ownerCtContext,ownerLayout=me.target.ownerLayout,firstTime=!me.state,ret=full||firstTime,oldHeightModel=me.heightModel,oldWidthModel=me.widthModel,remainingCount=0;if(me.dirty=me.invalid=!1,me.props={},me.remainingChildDimensions=0,me.boxChildren&&(me.boxChildren.length=0),firstTime||(me.clearAllBlocks("blocks"),me.clearAllBlocks("domBlocks")),!me.wrapsComponent)return ret;if(target=me.target,me.state={},firstTime)target.beforeLayout&&target.beforeLayout!==Ext.emptyFn&&target.beforeLayout(),!ownerCtContext&&(ownerCt=target.ownerCt)&&(ownerCtContext=me.context.items[ownerCt.el.id]),ownerCtContext?(me.ownerCtContext=ownerCtContext,me.isBoxParent=ownerLayout&&ownerLayout.isItemBoxParent(me)):me.isTopLevel=!0,me.frameBodyContext=me.getEl("frameBody");else for(ownerCtContext=me.ownerCtContext,me.isTopLevel=!ownerCtContext,i=0,n=(children=me.children).length;i<n;++i)children[i].init(!0);return me.hasRawContent=!(target.isContainer&&0<target.items.items.length),full?(me.widthModel=me.heightModel=null,sizeModel=target.getSizeModel(ownerCtContext&&ownerCtContext.widthModel.pairsByHeightOrdinal[ownerCtContext.heightModel.ordinal]),firstTime&&(me.sizeModel=sizeModel),me.widthModel=sizeModel.width,me.heightModel=sizeModel.height,ownerCtContext&&!me.isComponentChild&&(ownerLayout.needsItemSize||!target.liquidLayout?ownerCtContext.remainingChildDimensions+=2:(me.widthModel.calculated&&++ownerCtContext.remainingChildDimensions,me.heightModel.calculated&&++ownerCtContext.remainingChildDimensions))):oldProps&&(me.recoverProp("x",oldProps,oldDirty),me.recoverProp("y",oldProps,oldDirty),me.widthModel.calculated?me.recoverProp("width",oldProps,oldDirty):"width"in oldProps&&++remainingCount,me.heightModel.calculated?me.recoverProp("height",oldProps,oldDirty):"height"in oldProps&&++remainingCount,ownerCtContext&&!me.isComponentChild&&(ownerCtContext.remainingChildDimensions+=remainingCount)),oldProps&&ownerLayout&&ownerLayout.manageMargins&&(me.recoverProp("margin-top",oldProps,oldDirty),me.recoverProp("margin-right",oldProps,oldDirty),me.recoverProp("margin-bottom",oldProps,oldDirty),me.recoverProp("margin-left",oldProps,oldDirty)),options&&(newHeightModel=options.heightModel,(newWidthModel=options.widthModel)&&newHeightModel&&oldWidthModel&&oldHeightModel&&oldWidthModel.shrinkWrap&&oldHeightModel.shrinkWrap&&newWidthModel.constrainedMax&&newHeightModel.constrainedMin&&(newHeightModel=null),newWidthModel&&(me.widthModel=newWidthModel),newHeightModel&&(me.heightModel=newHeightModel),options.state&&Ext.apply(me.state,options.state)),ret},initContinue:function(full){var boxParent,me=this,ownerCtContext=me.ownerCtContext,comp=me.target,widthModel=me.widthModel,inheritedState=comp.getInherited();return widthModel.fixed?inheritedState.inShrinkWrapTable=!1:delete inheritedState.inShrinkWrapTable,full&&(ownerCtContext&&widthModel.shrinkWrap?(boxParent=ownerCtContext.isBoxParent?ownerCtContext:ownerCtContext.boxParent)&&boxParent.addBoxChild(me):widthModel.natural&&(me.boxParent=ownerCtContext)),full},initDone:function(containerLayoutDone){var me=this,props=me.props,state=me.state;0===me.remainingChildDimensions&&(props.containerChildrenSizeDone=!0),containerLayoutDone&&(props.containerLayoutDone=!0),me.boxChildren&&me.boxChildren.length&&me.widthModel.shrinkWrap&&(me.el.setWidth(1e4),state.blocks=(state.blocks||0)+1)},initAnimation:function(){var me=this,target=me.target,ownerCtContext=me.ownerCtContext;ownerCtContext&&ownerCtContext.isTopLevel?me.animatePolicy=target.ownerLayout.getAnimatePolicy(me):!ownerCtContext&&target.isCollapsingOrExpanding&&target.animCollapse&&(me.animatePolicy=target.componentLayout.getAnimatePolicy(me)),me.animatePolicy&&me.context.queueAnimation(me)},addBlock:function(name,layout,propName){var collection=this[name]||(this[name]={}),blockedLayouts=collection[propName]||(collection[propName]={});blockedLayouts[layout.id]||(++(blockedLayouts[layout.id]=layout).blockCount,++this.context.blockCount)},addBoxChild:function(boxChildItem){var children,widthModel=boxChildItem.widthModel;boxChildItem.boxParent=this,boxChildItem.measuresBox=widthModel.shrinkWrap?boxChildItem.hasRawContent:widthModel.natural,boxChildItem.measuresBox&&((children=this.boxChildren)?children.push(boxChildItem):this.boxChildren=[boxChildItem])},addPositionStyles:function(styles,props){var x=props.x,y=props.y,count=0;return void 0!==x&&(styles.left=x+"px",++count),void 0!==y&&(styles.top=y+"px",++count),count},addTrigger:function(propName,inDom){var me=this,name=inDom?"domTriggers":"triggers",collection=me[name]||(me[name]={}),context=me.context,layout=context.currentLayout,triggers=collection[propName]||(collection[propName]={});triggers[layout.id]||(++(triggers[layout.id]=layout).triggerCount,((triggers=context.triggers[inDom?"dom":"data"])[layout.id]||(triggers[layout.id]=[])).push({item:this,prop:propName}),void 0!==me.props[propName]&&(inDom&&me.dirty&&propName in me.dirty||++layout.firedTriggers))},boxChildMeasured:function(){var state=this.state;(state.boxesMeasured=(state.boxesMeasured||0)+1)===this.boxChildren.length&&(state.clearBoxWidth=1,++this.context.progressCount,this.markDirty())},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(me){var info=me.getStyles(me.borderNames,me.trblNames);return info.width=info.left+info.right,info.height=info.top+info.bottom,info},marginInfo:function(me){var info=me.getStyles(me.marginNames,me.trblNames);return info.width=info.left+info.right,info.height=info.top+info.bottom,info},paddingInfo:function(me){var info=(me.frameBodyContext||me).getStyles(me.paddingNames,me.trblNames);return info.width=info.left+info.right,info.height=info.top+info.bottom,info}},checkCache:function(entry){return this.cacheMissHandlers[entry](this)},clearAllBlocks:function(name){var propName,collection=this[name];if(collection)for(propName in collection)this.clearBlocks(name,propName)},clearBlocks:function(name,propName){var context,layout,layoutId,collection=this[name],blockedLayouts=collection&&collection[propName];if(blockedLayouts)for(layoutId in delete collection[propName],context=this.context,blockedLayouts)layout=blockedLayouts[layoutId],--context.blockCount,--layout.blockCount||layout.pending||layout.done||context.queueLayout(layout)},block:function(layout,propName){this.addBlock("blocks",layout,propName)},domBlock:function(layout,propName){this.addBlock("domBlocks",layout,propName)},fireTriggers:function(name,propName){var layout,layoutId,collection=this[name],triggers=collection&&collection[propName],context=this.context;if(triggers)for(layoutId in triggers)++(layout=triggers[layoutId]).firedTriggers,layout.done||layout.blockCount||layout.pending||context.queueLayout(layout)},flush:function(){var me=this,dirty=me.dirty,state=me.state,targetEl=me.el;me.dirtyCount=0,"attributes"in me&&(targetEl.set(me.attributes),delete me.attributes),"innerHTML"in me&&(targetEl.innerHTML=me.innerHTML,delete me.innerHTML),state&&state.clearBoxWidth&&(state.clearBoxWidth=0,me.el.setStyle("width",null),--state.blocks||me.context.queueItemLayouts(me)),dirty&&(delete me.dirty,me.writeProps(dirty,!0))},flushAnimations:function(){var target,targetAnim,duration,animateProps,anim,changeCount,j,propsLen,propName,oldValue,newValue,me=this,animateFrom=me.previousSize;if(animateFrom){for(duration=(targetAnim=(target=me.target).getAnimationProps()).duration,animateProps=Ext.Object.getKeys(me.animatePolicy),anim=Ext.apply({},{from:{},to:{},duration:duration||Ext.fx.Anim.prototype.duration},targetAnim),j=changeCount=0,propsLen=animateProps.length;j<propsLen;j++)(oldValue=animateFrom[propName=animateProps[j]])!==(newValue=me.peek(propName))&&(propName=me.translateProps[propName]||propName,anim.from[propName]=oldValue,anim.to[propName]=newValue,++changeCount);changeCount&&(1===me.isCollapsingOrExpanding?target.componentLayout.undoLayout(me):me.writeProps(anim.from),me.el.animate(anim),anim=Ext.fx.Manager.getFxQueue(me.el.id)[0],(target.$layoutAnim=anim).on({afteranimate:function(){delete target.$layoutAnim,target.destroying||target.destroyed||(1===me.isCollapsingOrExpanding?(target.componentLayout.redoLayout(me),target.afterCollapse(!0)):2===me.isCollapsingOrExpanding&&target.afterExpand(!0),target.hasListeners.afterlayoutanimation&&target.fireEvent("afterlayoutanimation",target))}}))}},getBorderInfo:function(){var info=this.borderInfo;return info||(this.borderInfo=info=this.checkCache("borderInfo")),info},getEl:function(nameOrEl,owner){var src,el,elContext;if(nameOrEl){if(nameOrEl.dom)el=nameOrEl;else if(src=this.target,owner&&(src=owner),"function"==typeof(el=src[nameOrEl])&&(el=el.call(src))===this.el)return this;el&&(elContext=this.context.getEl(this,el))}return elContext||null},getFrameInfo:function(){var framing,border,info=this.frameInfo;return info||(framing=this.framing,border=this.getBorderInfo(),this.frameInfo=info=framing?{top:framing.top+border.top,right:framing.right+border.right,bottom:framing.bottom+border.bottom,left:framing.left+border.left,width:framing.width+border.width,height:framing.height+border.height}:border),info},getMarginInfo:function(){var comp,manageMargins,ownerLayout,ownerLayoutId,me=this,info=me.marginInfo;return info||(me.wrapsComponent?(ownerLayoutId=(ownerLayout=(comp=me.target).ownerLayout)?ownerLayout.id:null,manageMargins=ownerLayout&&ownerLayout.manageMargins,(info=comp.margin$)&&info.ownerId!==ownerLayoutId&&(info=null),info||(info=me.parseMargins(comp,comp.margin)||me.checkCache("marginInfo"),manageMargins&&(me.setProp("margin-top",0),me.setProp("margin-right",0),me.setProp("margin-bottom",0),me.setProp("margin-left",0)),info.ownerId=ownerLayoutId,comp.margin$=info),info.width=info.left+info.right,info.height=info.top+info.bottom):info=me.checkCache("marginInfo"),me.marginInfo=info),info},clearMarginCache:function(){delete this.marginInfo,delete this.target.margin$},getPaddingInfo:function(){var info=this.paddingInfo;return info||(this.paddingInfo=info=this.checkCache("paddingInfo")),info},getProp:function(propName){var result=this.props[propName];return this.addTrigger(propName),result},getDomProp:function(propName){var result=this.dirty&&propName in this.dirty?void 0:this.props[propName];return this.addTrigger(propName,!0),result},getStyle:function(styleName){var info,value,styles=this.styles;return styleName in styles?value=styles[styleName]:(info=this.styleInfo[styleName],value=this.el.getStyle(styleName),info&&info.parseInt&&(value=parseInt(value,10)||0),styles[styleName]=value),value},getStyles:function(styleNames,altNames){var i,missing,missingAltNames,name,info,styleInfo,styles,value,styleCache=this.styles,values={},hits=0,n=styleNames.length;for(altNames=altNames||styleNames,i=0;i<n;++i)(name=styleNames[i])in styleCache?(values[altNames[i]]=styleCache[name],++hits,i&&1===hits&&(missing=styleNames.slice(0,i),missingAltNames=altNames.slice(0,i))):hits&&((missing=missing||[]).push(name),(missingAltNames=missingAltNames||[]).push(altNames[i]));if(hits<n)for(missing=missing||styleNames,missingAltNames=missingAltNames||altNames,styleInfo=this.styleInfo,styles=this.el.getStyle(missing),i=missing.length;i--;)info=styleInfo[name=missing[i]],value=styles[name],info&&info.parseInt&&(value=parseInt(value,10)||0),values[missingAltNames[i]]=value,styleCache[name]=value;return values},hasProp:function(propName){return null!=this.getProp(propName)},hasDomProp:function(propName){return null!=this.getDomProp(propName)},invalidate:function(options){this.context.queueInvalidate(this,options)},markDirty:function(){1==++this.dirtyCount&&this.context.queueFlush(this)},onBoxMeasured:function(){var boxParent=this.boxParent,state=this.state;boxParent&&boxParent.widthModel.shrinkWrap&&!state.boxMeasured&&this.measuresBox&&(state.boxMeasured=1,boxParent.boxChildMeasured())},parseMargins:function(comp,margins){!0===margins&&(margins=5);var ret,type=typeof margins;return"string"==type||"number"==type?ret=comp.parseBox(margins):margins&&(ret={top:0,right:0,bottom:0,left:0},margins=margins&&Ext.apply(ret,comp.parseBox(margins))),ret},peek:function(propName){return this.props[propName]},recalculateSizeModel:function(){var sizeModel,me=this,target=me.target,componentLayout=target.componentLayout,ownerCtContext=me.ownerCtContext,oldContext=componentLayout.ownerContext;componentLayout.ownerContext=null,me.sizeModel=sizeModel=target.getSizeModel(ownerCtContext&&ownerCtContext.widthModel.pairsByHeightOrdinal[ownerCtContext.heightModel.ordinal]),me.widthModel=sizeModel.width,me.heightModel=sizeModel.height,oldContext&&(componentLayout.ownerContext=me)},recoverProp:function(propName,oldProps,oldDirty){var props=this.props;propName in oldProps&&(props[propName]=oldProps[propName],oldDirty&&propName in oldDirty&&((this.dirty||(this.dirty={}))[propName]=oldDirty[propName]))},redo:function(deep){var items,len,i,me=this;if(me.revertProps(me.props),deep&&me.wrapsComponent){if(me.childItems)for(i=0,len=(items=me.childItems).length;i<len;i++)items[i].redo(deep);for(i=0,len=(items=me.children).length;i<len;i++)items[i].redo()}},removeEl:function(nameOrEl,owner){var src,el;if(nameOrEl){if(nameOrEl.dom)el=nameOrEl;else if(src=this.target,owner&&(src=owner),"function"==typeof(el=src[nameOrEl])&&(el=el.call(src))===this.el)return this;el&&this.context.removeEl(el,this)}},revertProps:function(props){var name,flushed=this.flushedProps,reverted={};for(name in props)flushed.hasOwnProperty(name)&&(reverted[name]=props[name]);this.writeProps(reverted)},setAttribute:function(name,value){this.attributes||(this.attributes={}),this.attributes[name]=value,this.markDirty()},setBox:function(box){"left"in box&&this.setProp("x",box.left),"top"in box&&this.setProp("y",box.top),this.setSize(box.width,box.height)},setContentHeight:function(height,measured){return!measured&&this.hasRawContent?1:this.setProp("contentHeight",height)},setContentWidth:function(width,measured){return!measured&&this.hasRawContent?1:this.setProp("contentWidth",width)},setContentSize:function(width,height,measured){return this.setContentWidth(width,measured)+this.setContentHeight(height,measured)===2},setProp:function(propName,value,dirty){var me=this,valueType=typeof value;return"undefined"==valueType||"number"==valueType&&isNaN(value)?0:(me.props[propName]===value||(me.props[propName]=value,++me.context.progressCount,!1===dirty?(me.fireTriggers("domTriggers",propName),me.clearBlocks("domBlocks",propName)):me.styleInfo[propName]&&(me.dirty||(me.dirty={}),me.dirty[propName]=value,me.markDirty()),me.fireTriggers("triggers",propName),me.clearBlocks("blocks",propName)),1)},setHeight:function(height,dirty){var frameBody,frameInfo,min,oldHeight,me=this,comp=me.target,ownerCtContext=me.ownerCtContext;if(height<0&&(height=0),me.wrapsComponent){if(min=!me.collapsedVert&&comp.minHeight||0,height=Ext.Number.constrain(height,min,comp.maxHeight),oldHeight=me.props.height,!me.setProp("height",height,dirty))return NaN;ownerCtContext&&!me.isComponentChild&&isNaN(oldHeight)&&(--ownerCtContext.remainingChildDimensions||ownerCtContext.setProp("containerChildrenSizeDone",!0)),(frameBody=me.frameBodyContext)&&(frameInfo=me.getFrameInfo(),frameBody[me.el.vertical?"setWidth":"setHeight"](height-frameInfo.height,dirty))}else if(!me.setProp("height",height,dirty))return NaN;return height},setWidth:function(width,dirty){var frameBody,frameInfo,min,oldWidth,me=this,comp=me.target,ownerCtContext=me.ownerCtContext;if(width<0&&(width=0),me.wrapsComponent){if(min=!me.collapsedHorz&&comp.minWidth||0,width=Ext.Number.constrain(width,min,comp.maxWidth),oldWidth=me.props.width,!me.setProp("width",width,dirty))return NaN;ownerCtContext&&!me.isComponentChild&&isNaN(oldWidth)&&(--ownerCtContext.remainingChildDimensions||ownerCtContext.setProp("containerChildrenSizeDone",!0)),(frameBody=me.frameBodyContext)&&(frameInfo=me.getFrameInfo(),frameBody.setWidth(width-frameInfo.width,dirty))}else if(!me.setProp("width",width,dirty))return NaN;return width},setSize:function(width,height,dirty){this.setWidth(width,dirty),this.setHeight(height,dirty)},translateProps:{x:"left",y:"top"},undo:function(deep){var items,len,i,me=this;if(me.revertProps(me.lastBox),deep&&me.wrapsComponent){if(me.childItems)for(i=0,len=(items=me.childItems).length;i<len;i++)items[i].undo(deep);for(i=0,len=(items=me.children).length;i<len;i++)items[i].undo()}},unsetProp:function(propName){var dirty=this.dirty;delete this.props[propName],dirty&&delete dirty[propName]},writeProps:function(dirtyProps,flushing){if(dirtyProps&&"object"==typeof dirtyProps){var info,propName,numericValue,hasWidth,hasHeight,isAbsolute,scrollbarSize,style,me=this,el=me.el,styles={},styleCount=0,styleInfo=me.styleInfo,width=dirtyProps.width,height=dirtyProps.height,target=me.target;for(propName in"displayed"in dirtyProps&&el.setDisplayed(dirtyProps.displayed),dirtyProps)flushing&&(me.fireTriggers("domTriggers",propName),me.clearBlocks("domBlocks",propName),me.flushedProps[propName]=1),(info=styleInfo[propName])&&info.dom&&(info.suffix&&(numericValue=parseInt(dirtyProps[propName],10))?styles[propName]=numericValue+info.suffix:styles[propName]=dirtyProps[propName],++styleCount);("x"in dirtyProps||"y"in dirtyProps)&&(target.isComponent?target.setPosition(dirtyProps.x,dirtyProps.y):styleCount+=me.addPositionStyles(styles,dirtyProps)),me.wrapsComponent&&Ext.isIE9&&((hasWidth=void 0!==width&&me.hasOverflowY)||(hasHeight=void 0!==height&&me.hasOverflowX))&&(void 0===(isAbsolute=me.isAbsolute)&&(isAbsolute=!1,style=me.target.getTargetEl().getStyle("position"),me.isAbsolute=isAbsolute="absolute"===style),isAbsolute&&(scrollbarSize=Ext.getScrollbarSize(),hasWidth&&(width=parseInt(width,10)+scrollbarSize.width,styles.width=width+"px",++styleCount),hasHeight&&(height=parseInt(height,10)+scrollbarSize.height,styles.height=height+"px",++styleCount))),styleCount&&el.setStyle(styles)}},debugHooks:{$enabled:!1,addBlock:function(name,layout,propName){return(layout.blockedBy||(layout.blockedBy={}))[this.id+"."+propName+("dom"===name.substring(0,3)?":dom":"")]=1,this.callParent(arguments)},addBoxChild:function(boxChildItem){var ret=this.callParent(arguments),boxChildren=this.boxChildren;return boxChildren&&1===boxChildren.length&&(this.context.boxParents||(this.context.boxParents=new Ext.util.MixedCollection)).add(this),ret},addTrigger:function(propName,inDom){var triggers,layout=this.context.currentLayout;this.callParent(arguments),((triggers=this.context.triggersByLayoutId)[layout.id]||(triggers[layout.id]={}))[this.id+"."+propName+(inDom?":dom":"")]={item:this,name:propName}},checkAuthority:function(prop){var ok,setBy,me=this,model=me[prop+"Model"],layout=me.context.currentLayout;layout===me.target.ownerLayout?ok=model.calculated:layout.isComponentLayout&&(ok=me.isTopLevel||model.auto||model.configured),ok||(setBy=me.context.getLayoutName(layout),Ext.log(setBy+" cannot set "+prop))},clearBlocks:function(name,propName){var layoutId,collection=this[name],blockedLayouts=collection&&collection[propName],key=this.id+"."+propName+("dom"===name.substring(0,3)?":dom":"");if(blockedLayouts)for(layoutId in blockedLayouts)delete blockedLayouts[layoutId].blockedBy[key];return this.callParent(arguments)},getEl:function(el){var child=this.callParent(arguments);return child&&child!==this&&child.parent!==this&&Ext.raise({msg:"Got element from wrong component"}),child},init:function(){var ret,me=this;return ret=me.callParent(arguments),me.context.logOn.initItem&&Ext.log(me.id," consumers: content=",me.consumersContentWidth,"/",me.consumersContentHeight,", container=",me.consumersContainerWidth,"/",me.consumersContainerHeight,", size=",me.consumersWidth,"/",me.consumersHeight),ret},invalidate:function(){return this.wrapsComponent?this.context.logOn.invalidate&&Ext.log("invalidate: ",this.id):Ext.raise({msg:"Cannot invalidate an element contextItem"}),this.callParent(arguments)},setProp:function(propName,value,dirty){var setByProps,me=this,layout=me.context.currentLayout,setBy=me.context.getLayoutName(layout),fullName=me.id+"."+propName;return null!==value&&((setByProps=me.setBy||(me.setBy={}))[propName]?setByProps[propName]!==setBy&&Ext.log({level:"warn"},"BAD! ",fullName," set by ",setByProps[propName]," and ",setBy):setByProps[propName]=setBy),me.context.logOn.setProp&&(void 0===value||isNaN(value)||me.props[propName]===value||Ext.log("set ",fullName," = ",value," (",dirty,")")),this.callParent(arguments)},setHeight:function(height,dirty,force){return!force&&this.wrapsComponent&&this.checkAuthority("height"),this.callParent(arguments)},setWidth:function(width,dirty,force){return!force&&this.wrapsComponent&&this.checkAuthority("width"),this.callParent(arguments)}}},function(){var px={dom:!0,parseInt:!0,suffix:"px"},isDom={dom:!0},faux={dom:!1};this.prototype.styleInfo={containerChildrenSizeDone:faux,containerLayoutDone:faux,displayed:faux,done:faux,x:faux,y:faux,columnsChanged:faux,rowHeights:faux,viewOverflowY:faux,left:px,top:px,right:px,bottom:px,width:px,height:px,"border-top-width":px,"border-right-width":px,"border-bottom-width":px,"border-left-width":px,"margin-top":px,"margin-right":px,"margin-bottom":px,"margin-left":px,"padding-top":px,"padding-right":px,"padding-bottom":px,"padding-left":px,"line-height":isDom,display:isDom,clear:isDom}}),Ext.define("Ext.layout.Context",{remainingLayouts:0,state:0,cycleWatchDog:200,constructor:function(config){var me=this;Ext.apply(me,config),me.items={},me.layouts={},me.blockCount=0,me.cycleCount=0,me.flushCount=0,me.calcCount=0,me.animateQueue=me.newQueue(),me.completionQueue=me.newQueue(),me.finalizeQueue=me.newQueue(),me.finishQueue=me.newQueue(),me.flushQueue=me.newQueue(),me.invalidateData={},me.layoutQueue=me.newQueue(),me.invalidQueue=[],me.triggers={data:{},dom:{}}},callLayout:function(layout,methodName){(this.currentLayout=layout)[methodName](this.getCmp(layout.owner))},cancelComponent:function(comp,isChild,isDestroying){var i,k,klen,items,layout,newQueue,oldQueue,entry,temp,ownerCtContext,me=this,components=comp,isArray=!comp.isComponent,length=isArray?components.length:1;for(i=0;i<length;++i){if(isArray&&(comp=components[i]),isDestroying&&(comp.ownerCt?(ownerCtContext=this.items[comp.ownerCt.el.id])&&Ext.Array.remove(ownerCtContext.childItems,me.getCmp(comp)):comp.rendered&&me.removeEl(comp.el)),!isChild&&(klen=(oldQueue=me.invalidQueue).length))for(me.invalidQueue=newQueue=[],k=0;k<klen;++k)(temp=(entry=oldQueue[k]).item.target)===comp||temp.up(comp)||newQueue.push(entry);layout=comp.componentLayout,me.cancelLayout(layout),layout.getLayoutItems&&(items=layout.getLayoutItems()).length&&me.cancelComponent(items,!0),comp.isContainer&&!comp.collapsed&&(layout=comp.layout,me.cancelLayout(layout),(items=layout.getVisibleItems()).length&&me.cancelComponent(items,!0))}},cancelLayout:function(layout){var me=this;me.completionQueue.remove(layout),me.finalizeQueue.remove(layout),me.finishQueue.remove(layout),me.layoutQueue.remove(layout),layout.running&&me.layoutDone(layout),layout.ownerContext=null},clearTriggers:function(layout,inDom){var i,item,trigger,id=layout.id,collection=this.triggers[inDom?"dom":"data"],triggers=collection&&collection[id],length=triggers&&triggers.length||0;for(i=0;i<length;++i)item=(trigger=triggers[i]).item,delete(collection=inDom?item.domTriggers:item.triggers)[trigger.prop][id]},flush:function(){var i,items=this.flushQueue.clear(),length=items.length;if(length)for(++this.flushCount,i=0;i<length;++i)items[i].flush()},flushAnimations:function(){var i,items=this.animateQueue.clear(),len=items.length;if(len){for(i=0;i<len;i++)!1!==items[i].target.animate&&items[i].flushAnimations();Ext.fx.Manager.runner()}},flushInvalidates:function(){var comp,components,entry,i,queue=this.invalidQueue,length=queue&&queue.length;if(this.invalidQueue=[],length){for(components=[],i=0;i<length;++i)(comp=(entry=queue[i]).item.target).container.isDetachedBody||(components.push(comp),entry.options&&(this.invalidateData[comp.id]=entry.options));this.invalidate(components,null)}},flushLayouts:function(queueName,methodName,dontClear){var i,layout,layouts=dontClear?this[queueName].items:this[queueName].clear(),length=layouts.length;if(length){for(i=0;i<length;++i)(layout=layouts[i]).running||this.callLayout(layout,methodName);this.currentLayout=null}},getCmp:function(cmp){return this.getItem(cmp,cmp.el)},getEl:function(parent,el){var item=this.getItem(el,el);return item.parent||((item.parent=parent).children.length?parent.children.push(item):parent.children=[item]),item},getItem:function(target,el){var id=el.id,items=this.items;return items[id]||(items[id]=new Ext.layout.ContextItem({context:this,target:target,el:el}))},handleFailure:function(){var layout,key,layouts=this.layouts;for(key in Ext.failedLayouts=(Ext.failedLayouts||0)+1,layouts)layout=layouts[key],layouts.hasOwnProperty(key)&&(layout.running=!1,layout.ownerContext=null)},invalidate:function(components,full){var containerLayoutDone,ownerLayout,firstTime,i,comp,item,items,length,componentLayout,layout,invalidateOptions,token,skipLayout,me=this,isArray=!components.isComponent;for(i=0,length=isArray?components.length:1;i<length;++i)if((comp=isArray?components[i]:components).rendered&&!comp.hidden){if(ownerLayout=comp.ownerLayout,componentLayout=comp.componentLayout,skipLayout=!1,ownerLayout&&ownerLayout.needsItemSize||!comp.liquidLayout||(skipLayout=!0),(!skipLayout||ownerLayout&&ownerLayout.setsItemSize)&&(firstTime=!(item=me.getCmp(comp)).state,layout=comp.isContainer&&!comp.collapsed?comp.layout:null,invalidateOptions=me.invalidateData[item.id],delete me.invalidateData[item.id],token=item.init(full,invalidateOptions)),skipLayout)continue;invalidateOptions&&me.processInvalidate(invalidateOptions,item,"before"),componentLayout.beforeLayoutCycle&&componentLayout.beforeLayoutCycle(item),layout&&layout.beforeLayoutCycle&&layout.beforeLayoutCycle(item),token=item.initContinue(token),containerLayoutDone=!0,componentLayout.getLayoutItems&&(componentLayout.renderChildren(),(items=componentLayout.getLayoutItems()).length&&me.invalidate(items,!0)),layout&&(containerLayoutDone=!1,layout.renderChildren(),(layout.needsItemSize||layout.activeItemCount)&&(items=layout.getVisibleItems()).length&&me.invalidate(items,!0)),item.initDone(containerLayoutDone),me.resetLayout(componentLayout,item,firstTime),layout&&me.resetLayout(layout,item,firstTime),item.initAnimation(),invalidateOptions&&me.processInvalidate(invalidateOptions,item,"after")}me.currentLayout=null},isDescendant:function(ancestor,descendant){if(ancestor.isContainer)for(var c=descendant.ownerCt;c;c=c.ownerCt)if(c===ancestor)return!0;return!1},layoutDone:function(layout){var ownerContext=layout.ownerContext;layout.running=!1,layout.isComponentLayout?(ownerContext.measuresBox&&ownerContext.onBoxMeasured(),ownerContext.setProp("done",!0)):ownerContext.setProp("containerLayoutDone",!0),--this.remainingLayouts,++this.progressCount},newQueue:function(){return new Ext.util.Queue},processInvalidate:function(options,item,name){if(options[name]){var currentLayout=this.currentLayout;this.currentLayout=options.layout||null,options[name](item,options),this.currentLayout=currentLayout}},queueAnimation:function(item){this.animateQueue.add(item)},queueCompletion:function(layout){this.completionQueue.add(layout)},queueFinalize:function(layout){this.finalizeQueue.add(layout)},queueFlush:function(item){this.flushQueue.add(item)},chainFns:function(oldOptions,newOptions,funcName){var me=this,oldLayout=oldOptions.layout,newLayout=newOptions.layout,oldFn=oldOptions[funcName],newFn=newOptions[funcName];return function(contextItem){var prev=me.currentLayout;oldFn&&(me.currentLayout=oldLayout,oldFn.call(oldOptions.scope||oldOptions,contextItem,oldOptions)),me.currentLayout=newLayout,newFn.call(newOptions.scope||newOptions,contextItem,newOptions),me.currentLayout=prev}},purgeInvalidates:function(){var oldIndex,newIndex,newComp,oldEntry,oldComp,keep,newQueue=[],oldQueue=this.invalidQueue,oldLength=oldQueue.length;for(oldIndex=0;oldIndex<oldLength;++oldIndex){for(oldComp=(oldEntry=oldQueue[oldIndex]).item.target,keep=!0,newIndex=newQueue.length;newIndex--;){if(newComp=newQueue[newIndex].item.target,oldComp.isLayoutChild(newComp)){keep=!1;break}newComp.isLayoutChild(oldComp)&&Ext.Array.erase(newQueue,newIndex,1)}keep&&newQueue.push(oldEntry)}this.invalidQueue=newQueue},queueInvalidate:function(item,options){var comp,old,oldComp,oldOptions,oldState,me=this,newQueue=[],oldQueue=me.invalidQueue,index=oldQueue.length;for(item.isComponent?(comp=item,(item=me.items[comp.el.id])?item.recalculateSizeModel():item=me.getCmp(comp)):comp=item.target,item.invalid=!0;index--;){if(oldComp=(old=oldQueue[index]).item.target,!comp.isFloating&&comp.up(oldComp))return;if(oldComp===comp)return void((oldOptions=old.options)?options&&(options.widthModel&&(oldOptions.widthModel=options.widthModel),options.heightModel&&(oldOptions.heightModel=options.heightModel),(oldState=oldOptions.state)?options.state&&Ext.apply(oldState,options.state):oldOptions.state=options.state,options.before&&(oldOptions.before=me.chainFns(oldOptions,options,"before")),options.after&&(oldOptions.after=me.chainFns(oldOptions,options,"after"))):old.options=options);oldComp.isLayoutChild(comp)||newQueue.push(old)}newQueue.push({item:item,options:options}),me.invalidQueue=newQueue},queueItemLayouts:function(item){var comp=item.isComponent?item:item.target,layout=comp.componentLayout;layout.pending||layout.invalid||layout.done||this.queueLayout(layout),!(layout=comp.layout)||layout.pending||layout.invalid||layout.done||comp.collapsed||this.queueLayout(layout)},queueLayout:function(layout){this.layoutQueue.add(layout),layout.pending=!0},removeEl:function(el,parent){var id=el.id,children=parent?parent.children:null,items=this.items;children&&Ext.Array.remove(children,items[id]),delete items[id]},resetLayout:function(layout,ownerContext,firstTime){var me=this;(me.currentLayout=layout).done=!1,layout.pending=!0,layout.firedTriggers=0,me.layoutQueue.add(layout),firstTime?((me.layouts[layout.id]=layout).running=!0,layout.finishedLayout&&me.finishQueue.add(layout),++me.remainingLayouts,++layout.layoutCount,layout.ownerContext=ownerContext,layout.beginCount=0,layout.blockCount=0,layout.calcCount=0,layout.triggerCount=0,layout.initialized||layout.initLayout(),layout.beginLayout(ownerContext)):(++layout.beginCount,layout.running||(++me.remainingLayouts,layout.running=!0,layout.ownerContext=ownerContext,layout.isComponentLayout&&ownerContext.unsetProp("done"),me.completionQueue.remove(layout),me.finalizeQueue.remove(layout))),layout.beginLayoutCycle(ownerContext,firstTime)},run:function(){var me=this,flushed=!1,watchDog=me.cycleWatchDog;for(me.purgeInvalidates(),me.flushInvalidates(),me.state=1,me.totalCount=me.layoutQueue.getCount(),me.flush();(me.remainingLayouts||me.invalidQueue.length)&&watchDog--;){if(me.invalidQueue.length&&me.flushInvalidates(),me.runCycle())flushed=!1;else if(flushed){if(!me.invalidQueue.length){me.state=2;break}}else me.flush(),flushed=!0,me.flushLayouts("completionQueue","completeLayout");me.remainingLayouts||me.invalidQueue.length||(me.flush(),me.flushLayouts("completionQueue","completeLayout"),me.flushLayouts("finalizeQueue","finalizeLayout"))}return me.runComplete()},runComplete:function(){var me=this;return me.state=2,me.remainingLayouts?(me.handleFailure(),!1):(me.flush(),me.flushLayouts("finishQueue","finishedLayout",!0),me.flushLayouts("finishQueue","notifyOwner"),me.flush(),me.flushAnimations(),!0)},runCycle:function(){var i,me=this,layouts=me.layoutQueue.clear(),length=layouts.length;for(++me.cycleCount,i=me.progressCount=0;i<length;++i)me.runLayout(me.currentLayout=layouts[i]);return me.currentLayout=null,0<me.progressCount},runLayout:function(layout){var me=this,ownerContext=me.getCmp(layout.owner);layout.pending=!1,ownerContext.state.blocks||(layout.done=!0,++layout.calcCount,++me.calcCount,layout.calculate(ownerContext),layout.done?(me.layoutDone(layout),layout.completeLayout&&me.queueCompletion(layout),layout.finalizeLayout&&me.queueFinalize(layout)):layout.pending||layout.invalid||layout.blockCount+layout.triggerCount-layout.firedTriggers||me.queueLayout(layout))},setItemSize:function(item,width,height){var i,items=item,len=1;for(item.isComposite?(len=(items=item.elements).length,item=items[0]):item.dom||item.el||(len=items.length,item=items[0]),i=0;i<len;)this.get(item).setSize(width,height),item=items[++i]},debugHooks:{$enabled:!1,pageAnalyzerMode:!0,logOn:{0:0},cancelComponent:function(comp){this.logOn.cancelComponent&&Ext.log("cancelCmp: ",comp.id),this.callParent(arguments)},cancelLayout:function(layout){this.logOn.cancelLayout&&Ext.log("cancelLayout: ",this.getLayoutName(layout)),this.callParent(arguments)},callLayout:function(layout,methodName){var accum=this.accumByType[layout.type],frame=accum&&accum.enter();this.callParent(arguments),accum&&frame.leave()},checkRemainingLayouts:function(){var key,layout,expected=0;for(key in this.layouts)layout=this.layouts[key],this.layouts.hasOwnProperty(key)&&layout.running&&++expected;this.remainingLayouts!==expected&&Ext.raise({msg:"Bookkeeping error me.remainingLayouts"})},flush:function(){if(this.logOn.flush){var items=this.flushQueue;Ext.log("--- Flush ",items&&items.getCount())}return this.callParent(arguments)},flushInvalidates:function(){this.logOn.flushInvalidate&&Ext.log(">> flushInvalidates");var ret=this.callParent(arguments);return this.logOn.flushInvalidate&&Ext.log("<< flushInvalidates"),ret},getCmp:function(target){var ret=this.callParent(arguments);return ret.wrapsComponent||Ext.raise({msg:target.id+" is not a component"}),ret},getEl:function(parent,target){var ret=this.callParent(arguments);return ret&&ret.wrapsComponent&&Ext.raise({msg:parent.id+"/"+target.id+" is a component (expected element)"}),ret},getLayoutName:function(layout){return layout.owner.id+"<"+layout.type+">"},layoutDone:function(layout){var me=this,name=me.getLayoutName(layout);me.logOn.layoutDone&&Ext.log("layoutDone: ",name," ( ",me.remainingLayouts," running)"),layout.running||Ext.raise({msg:name+" is already done"}),me.remainingLayouts||Ext.raise({msg:name+" finished but no layouts are running"}),me.callParent(arguments)},layoutTreeHasFailures:function(layout,reported){var me=this;if(function hasFailure(lo){var key,childLayout,failure=!lo.done;if(lo.done)for(key in me.layouts)me.layouts.hasOwnProperty(key)&&(childLayout=me.layouts[key]).owner.ownerLayout===lo&&hasFailure(childLayout)&&(failure=!0);return failure}(layout))return!0;return function markReported(lo){var key,childLayout;for(key in reported[lo.id]=1,me.layouts)me.layouts.hasOwnProperty(key)&&(childLayout=me.layouts[key]).owner.ownerLayout===lo&&markReported(childLayout)}(layout),!1},queueLayout:function(layout){return(layout.done||layout.blockCount||layout.pending)&&Ext.raise({msg:this.getLayoutName(layout)+" should not be queued for layout"}),this.logOn.queueLayout&&Ext.log("Queue ",this.getLayoutName(layout)),this.callParent(arguments)},reportLayoutResult:function(layout,reported){var key,value,i,length,childLayout,item,setBy,info,me=this,owner=layout.owner,ownerContext=me.getCmp(owner),blockedBy=[],triggeredBy=[];for(key in reported[layout.id]=1,layout.blockedBy)layout.blockedBy.hasOwnProperty(key)&&blockedBy.push(layout.blockedBy[key]);for(key in blockedBy.sort(),me.triggersByLayoutId[layout.id])me.triggersByLayoutId[layout.id].hasOwnProperty(key)&&(value=me.triggersByLayoutId[layout.id][key],triggeredBy.push({name:key,info:value}));if(triggeredBy.sort(function(a,b){return a.name<b.name?-1:b.name<a.name?1:0}),Ext.log({indent:1},layout.done?"++":"--",me.getLayoutName(layout),ownerContext.isBoxParent?" [isBoxParent]":"",ownerContext.boxChildren?" - boxChildren: "+ownerContext.state.boxesMeasured+"/"+ownerContext.boxChildren.length:"",ownerContext.boxParent?" - boxParent: "+ownerContext.boxParent.id:""," - size: ",ownerContext.widthModel.name,"/",ownerContext.heightModel.name),!layout.done||me.reportOnSuccess){if(blockedBy.length){for(++Ext.log.indent,Ext.log({indent:1},"blockedBy:  count=",layout.blockCount),length=blockedBy.length,i=0;i<length;i++)Ext.log(blockedBy[i]);Ext.log.indent-=2}if(triggeredBy.length){for(++Ext.log.indent,Ext.log({indent:1},"triggeredBy: count="+layout.triggerCount),length=triggeredBy.length,i=0;i<length;i++)setBy=(item=(info=value.info||value).item).setBy&&item.setBy[info.name]||"?",value=triggeredBy[i],Ext.log(value.name," (",item.props[info.name],") dirty: ",!!item.dirty&&!!item.dirty[info.name],", setBy: ",setBy);Ext.log.indent-=2}}for(key in me.layouts)me.layouts.hasOwnProperty(key)&&((childLayout=me.layouts[key]).done||childLayout.owner.ownerLayout!==layout||me.reportLayoutResult(childLayout,reported));for(key in me.layouts)me.layouts.hasOwnProperty(key)&&(childLayout=me.layouts[key]).done&&childLayout.owner.ownerLayout===layout&&me.reportLayoutResult(childLayout,reported);--Ext.log.indent},resetLayout:function(layout){var frame,me=this,type=layout.type,name=me.getLayoutName(layout),accum=me.accumByType[type];me.logOn.resetLayout&&Ext.log("resetLayout: ",name," ( ",me.remainingLayouts," running)"),me.state||(!accum&&me.profileLayoutsByType&&(me.accumByType[type]=accum=Ext.Perf.get("layout_"+layout.type)),me.numByType[type]=(me.numByType[type]||0)+1),frame=accum&&accum.enter(),me.callParent(arguments),accum&&frame.leave(),me.checkRemainingLayouts()},round:function(t){return Math.round(1e3*t)/1e3},run:function(){var ret,time,key,i,layout,boxParent,children,n,reported,unreported,calcs,total,calcsLength,calc,me=this;if(me.accumByType={},me.calcsByType={},me.numByType={},me.timesByType={},me.triggersByLayoutId={},Ext.log.indentSize=3,Ext.log("==================== LAYOUT ===================="),time=Ext.perf.getTimestamp(),ret=me.callParent(arguments),time=Ext.perf.getTimestamp()-time,me.logOn.boxParent&&me.boxParents)for(key in me.boxParents)if(me.boxParents.hasOwnProperty(key))for(n=(children=(boxParent=me.boxParents[key]).boxChildren).length,Ext.log("boxParent: ",boxParent.id),i=0;i<n;++i)Ext.log(" --\x3e ",children[i].id);for(key in ret?Ext.log("----------------- SUCCESS -----------------"):Ext.log({level:"error"},"----------------- FAILURE -----------------"),me.layouts)me.layouts.hasOwnProperty(key)&&((layout=me.layouts[key]).running&&Ext.log.error("Layout left running: ",me.getLayoutName(layout)),layout.ownerContext&&Ext.log.error("Layout left connected: ",me.getLayoutName(layout)));if(!ret||me.reportOnSuccess){for(key in reported={},unreported=0,me.layouts)me.layouts.hasOwnProperty(key)&&(layout=me.layouts[key],me.items[layout.owner.el.id].isTopLevel&&(me.reportOnSuccess||me.layoutTreeHasFailures(layout,reported))&&me.reportLayoutResult(layout,reported));for(key in me.layouts)me.layouts.hasOwnProperty(key)&&(reported[(layout=me.layouts[key]).id]||(unreported||Ext.log("----- Unreported!! -----"),++unreported,me.reportLayoutResult(layout,reported)))}for(key in Ext.log("Cycles: ",me.cycleCount,", Flushes: ",me.flushCount,", Calculates: ",me.calcCount," in ",me.round(time)," msec"),Ext.log("Calculates by type:"),calcs=[],me.numByType)me.numByType.hasOwnProperty(key)&&(total=me.numByType[key],calcs.push({type:key,total:total,calcs:me.calcsByType[key],multiple:Math.round(me.calcsByType[key]/total*10)/10,calcTime:me.round(me.timesByType[key]),avgCalcTime:me.round(me.timesByType[key]/me.calcsByType[key])}));for(calcs.sort(function(a,b){return b.calcTime-a.calcTime}),calcsLength=calcs.length,i=0;i<calcsLength;i++)calc=calcs[i],Ext.log(calc.type,": ",calc.total," in ",calc.calcs," tries (",calc.multiple,"x) at ",calc.calcTime," msec (avg ",calc.avgCalcTime," msec)");return ret},runCycle:function(){return this.logOn.runCycle&&Ext.log(">>> Cycle ",this.cycleCount," (queue length: ",this.layoutQueue.length,")"),this.callParent(arguments)},runLayout:function(layout){var frame,ret,time,me=this,type=layout.type,accum=me.accumByType[type];return me.logOn.calculate&&Ext.log("-- calculate ",this.getLayoutName(layout)),frame=accum&&accum.enter(),time=Ext.perf.getTimestamp(),ret=me.callParent(arguments),time=Ext.perf.getTimestamp()-time,accum&&frame.leave(),me.calcsByType[type]=(me.calcsByType[type]||0)+1,me.timesByType[type]=(me.timesByType[type]||0)+time,ret}}}),Ext.define("Ext.resizer.BorderSplitter",{extend:Ext.resizer.Splitter,alias:"widget.bordersplitter",collapseTarget:null,getTrackerConfig:function(){var trackerConfig=this.callParent();return trackerConfig.xclass="Ext.resizer.BorderSplitterTracker",trackerConfig},onTargetCollapse:function(target){this.callParent([target]),!1!==this.performCollapse&&"mini"==target.collapseMode&&target.addCls(target.baseCls+"-"+target.collapsedCls+"-mini")},onTargetExpand:function(target){this.callParent([target]),!1!==this.performCollapse&&"mini"==target.collapseMode&&target.removeCls(target.baseCls+"-"+target.collapsedCls+"-mini")}}),Ext.define("Ext.layout.container.Border",{extend:Ext.layout.container.Container,alias:"layout.border",alternateClassName:"Ext.layout.BorderLayout",targetCls:Ext.baseCSSPrefix+"border-layout-ct",itemCls:[Ext.baseCSSPrefix+"border-item",Ext.baseCSSPrefix+"box-item"],type:"border",isBorderLayout:!0,padding:void 0,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:!0,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:!1,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:!0,panelCollapseAnimate:!0,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(ownerContext,regions,name){var center,i,childContext,centerFlex,comp,region,match,size,type,target,placeholder,props=this.axisProps[name],isVert=!props.horizontal,sizeProp=props.sizeProp,totalFlex=0,childItems=ownerContext.childItems,length=childItems.length;for(i=0;i<length;++i)if(comp=(childContext=childItems[i]).target,childContext.layoutPos={},comp.region){if(childContext.region=region=comp.region,childContext.isCenter=comp.isCenter,childContext.isHorz=comp.isHorz,childContext.isVert=comp.isVert,childContext.weight=comp.weight||this.regionWeights[region]||0,comp.weight=childContext.weight,regions[comp.id]=childContext,comp.isCenter){center=childContext,centerFlex=comp.flex,ownerContext.centerRegion=center;continue}if(isVert!==childContext.isVert)continue;childContext.reverseWeighting=region===props.borderEnd,type=typeof(size=comp[sizeProp]),comp.collapsed||("string"==type&&(match=this.percentageRe.exec(size))?childContext.percentage=parseInt(match[1],10):comp.flex&&(totalFlex+=childContext.flex=comp.flex))}return center&&((placeholder=(target=center.target).placeholderFor)?centerFlex||isVert!==placeholder.collapsedVertical()||(centerFlex=0,center.collapseAxis=name):target.collapsed&&isVert===target.collapsedVertical()&&(centerFlex=0,center.collapseAxis=name)),null==centerFlex&&(centerFlex=1),totalFlex+=centerFlex,Ext.apply({before:isVert?"top":"left",totalFlex:totalFlex},props)},beginLayout:function(ownerContext){var childContext,item,length,i,regions,collapseTarget,doShow,hidden,region,me=this,items=me.getLayoutItems(),pad=me.padding,type=typeof pad,padOnContainer=!1;for(pad?"string"!=type&&"number"!=type||(pad=Ext.util.Format.parseBox(pad)):(pad=ownerContext.getEl("getTargetEl").getPaddingInfo(),padOnContainer=!0),ownerContext.outerPad=pad,ownerContext.padOnContainer=padOnContainer,i=0,length=items.length;i<length;++i)item=items[i],(collapseTarget=me.getSplitterTarget(item))&&(doShow=void 0,hidden=!!item.hidden,collapseTarget.split?hidden!==collapseTarget.hidden&&(doShow=!collapseTarget.hidden):collapseTarget.isCollapsingOrExpanding&&(doShow=!!collapseTarget.collapsed),doShow?item.show():!1===doShow&&item.hide());for(me.callParent(arguments),length=(items=ownerContext.childItems).length,regions={},ownerContext.borderAxisHorz=me.beginAxis(ownerContext,regions,"horz"),ownerContext.borderAxisVert=me.beginAxis(ownerContext,regions,"vert"),i=0;i<length;++i)childContext=items[i],(collapseTarget=me.getSplitterTarget(childContext.target))&&((region=regions[collapseTarget.id])||((region=ownerContext.getEl(collapseTarget.el,me)).region=collapseTarget.region),childContext.collapseTarget=collapseTarget=region,childContext.weight=collapseTarget.weight,childContext.reverseWeighting=collapseTarget.reverseWeighting,(collapseTarget.splitter=childContext).isHorz=collapseTarget.isHorz,childContext.isVert=collapseTarget.isVert);me.sortWeightedItems(items,"reverseWeighting"),me.setupSplitterNeighbors(items)},calculate:function(ownerContext){var i,childContext,childMargins,size,horzPercentTotal,vertPercentTotal,me=this,containerSize=me.getContainerSize(ownerContext),childItems=ownerContext.childItems,length=childItems.length,horz=ownerContext.borderAxisHorz,vert=ownerContext.borderAxisVert,pad=ownerContext.outerPad,padOnContainer=ownerContext.padOnContainer;for(horz.begin=pad[me.padOnContainerProp],vert.begin=pad.top,horzPercentTotal=horz.end=horz.flexSpace=containerSize.width+(padOnContainer?pad[me.padOnContainerProp]:-pad[me.padNotOnContainerProp]),vertPercentTotal=vert.end=vert.flexSpace=containerSize.height+(padOnContainer?pad.top:-pad.bottom),i=0;i<length;++i)childMargins=(childContext=childItems[i]).getMarginInfo(),(childContext.isHorz||childContext.isCenter)&&(horz.addUnflexed(childMargins.width),horzPercentTotal-=childMargins.width),(childContext.isVert||childContext.isCenter)&&(vert.addUnflexed(childMargins.height),vertPercentTotal-=childMargins.height),childContext.flex||childContext.percentage||(childContext.isHorz||childContext.isCenter&&"horz"===childContext.collapseAxis?(size=childContext.getProp("width"),horz.addUnflexed(size),childContext.collapseTarget&&(horzPercentTotal-=size)):(childContext.isVert||childContext.isCenter&&"vert"===childContext.collapseAxis)&&(size=childContext.getProp("height"),vert.addUnflexed(size),childContext.collapseTarget&&(vertPercentTotal-=size)));for(i=0;i<length;++i)childMargins=(childContext=childItems[i]).getMarginInfo(),childContext.percentage&&(childContext.isHorz?(size=Math.ceil(horzPercentTotal*childContext.percentage/100),size=childContext.setWidth(size),horz.addUnflexed(size)):childContext.isVert&&(size=Math.ceil(vertPercentTotal*childContext.percentage/100),size=childContext.setHeight(size),vert.addUnflexed(size)));for(i=0;i<length;++i)(childContext=childItems[i]).isCenter||(me.calculateChildAxis(childContext,horz),me.calculateChildAxis(childContext,vert));me.finishAxis(ownerContext,vert)+me.finishAxis(ownerContext,horz)<2?me.done=!1:me.finishPositions(childItems)},calculateChildAxis:function(childContext,axis){var region,isBegin,flex,pos,size,collapseTarget=childContext.collapseTarget,setSizeMethod="set"+axis.sizePropCap,sizeProp=axis.sizeProp,childMarginSize=childContext.getMarginInfo()[sizeProp];collapseTarget?region=collapseTarget.region:(region=childContext.region,flex=childContext.flex),(isBegin=region===axis.borderBegin)||region===axis.borderEnd?(size=flex?(size=Math.ceil(axis.flexSpace*(flex/axis.totalFlex)),childContext[setSizeMethod](size)):childContext.percentage?childContext.peek(sizeProp):childContext.getProp(sizeProp),size+=childMarginSize,isBegin?(pos=axis.begin,axis.begin+=size):axis.end=pos=axis.end-size):(childContext[setSizeMethod](axis.end-axis.begin-childMarginSize),pos=axis.begin),childContext.layoutPos[axis.posProp]=pos},eachItem:function(region,fn,scope){var item,items=this.getLayoutItems(),i=0;for(Ext.isFunction(region)&&(scope=fn=region);i<items.length&&(item=items[i],region&&item.region!==region||!1!==fn.call(scope,item));i++);},finishAxis:function(ownerContext,axis){var size=axis.end-axis.begin,center=ownerContext.centerRegion;return center&&(center["set"+axis.sizePropCap](size-center.getMarginInfo()[axis.sizeProp]),center.layoutPos[axis.posProp]=axis.begin),Ext.isNumber(size)?1:0},finishPositions:function(childItems){var index,childContext,length=childItems.length,marginProp=this.horzPositionProp;for(index=0;index<length;++index)(childContext=childItems[index]).setProp("x",childContext.layoutPos.x+childContext.marginInfo[marginProp]),childContext.setProp("y",childContext.layoutPos.y+childContext.marginInfo.top)},getLayoutItems:function(){for(var ownerItem,placeholderFor,owner=this.owner,ownerItems=owner&&owner.items&&owner.items.items||[],length=ownerItems.length,items=[],i=0;i<length;i++)placeholderFor=(ownerItem=ownerItems[i]).placeholderFor,!ownerItem.hidden&&(ownerItem.floated&&2!==ownerItem.isCollapsingOrExpanding||placeholderFor&&2===placeholderFor.isCollapsingOrExpanding)||items.push(ownerItem);return items},getPlaceholder:function(comp){return comp.getPlaceholder&&comp.getPlaceholder()},getMaxWeight:function(region){return this.getMinMaxWeight(region)},getMinWeight:function(region){return this.getMinMaxWeight(region,!0)},getMinMaxWeight:function(region,min){var weight=null;return this.eachItem(region,function(item){if(item.hasOwnProperty("weight")){if(null===weight)return void(weight=item.weight);(min&&item.weight<weight||item.weight>weight)&&(weight=item.weight)}},this),weight},getSplitterTarget:function(splitter){var collapseTarget=splitter.collapseTarget;return collapseTarget&&collapseTarget.collapsed&&collapseTarget.placeholder||collapseTarget},isItemBoxParent:function(itemContext){return!0},isItemShrinkWrap:function(item){return!0},insertSplitter:function(item,index,hidden,splitterCfg){var region=item.region,splitter=Ext.apply({xtype:"bordersplitter",collapseTarget:item,id:item.id+"-splitter",hidden:hidden,canResize:!1!==item.splitterResize,splitterFor:item,synthetic:!0},splitterCfg),at=index+("south"===region||"east"===region?0:1);"mini"===item.collapseMode&&(splitter.collapsedCls=item.collapsedCls),item.splitter=this.owner.add(at,splitter)},getMoveAfterIndex:function(after){var index=this.callParent(arguments);return after.splitter&&index++,index},moveItemBefore:function(item,before){var beforeRegion;return before&&before.splitter&&("south"!==(beforeRegion=before.region)&&"east"!==beforeRegion||(before=before.splitter)),this.callParent([item,before])},onAdd:function(item,index){var isCenter,split,hidden,cfg,me=this,placeholderFor=item.placeholderFor,region=item.region;me.callParent(arguments),region?(Ext.apply(item,me.regionFlags[region]),me.owner.isViewport&&(item.isViewportBorderChild=!0),item.initBorderRegion&&item.initBorderRegion(),(isCenter="center"===region)?me.centerRegion=item:(split=item.split,hidden=!!item.hidden,"object"==typeof split&&(cfg=split,split=!0),!item.isHorz&&!item.isVert||!split&&"mini"!==item.collapseMode||me.insertSplitter(item,index,hidden||!split,cfg)),isCenter||item.hasOwnProperty("collapseMode")||(item.collapseMode=me.panelCollapseMode),item.hasOwnProperty("animCollapse")||("placeholder"!==item.collapseMode?item.animCollapse=!1:item.animCollapse=me.panelCollapseAnimate)):placeholderFor&&(Ext.apply(item,me.regionFlags[placeholderFor.region]),item.region=placeholderFor.region,item.weight=placeholderFor.weight)},onDestroy:function(){this.centerRegion=null,this.callParent()},onRemove:function(comp,isDestroying){var el,region=comp.region,splitter=comp.splitter,owner=this.owner,destroying=owner.destroying;region&&(comp.isCenter&&(this.centerRegion=null),delete comp.isCenter,delete comp.isHorz,delete comp.isVert,splitter&&!owner.destroying&&owner.doRemove(splitter,!0),delete comp.splitter),this.callParent(arguments),destroying||isDestroying||!comp.rendered||(el=comp.getEl())&&(el.setStyle("top",""),el.setStyle(this.horzPositionProp,""))},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:!0,isHorz:!1,isVert:!1},north:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:"top"},south:{isCenter:!1,isHorz:!1,isVert:!0,collapseDirection:"bottom"},west:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:"left"},east:{isCenter:!1,isHorz:!0,isVert:!1,collapseDirection:"right"}},setupSplitterNeighbors:function(items){var i,j,center,count,edge,comp,region,splitter,touched,edgeRegions={},length=items.length,touchedRegions=this.touchedRegions;for(i=0;i<length;++i)if(region=(comp=items[i].target).region,comp.isCenter)center=comp;else if(region){for(j=0,count=(touched=touchedRegions[region]).length;j<count;++j)(edge=edgeRegions[touched[j]])&&edge.neighbors.push(comp);(splitter=comp.placeholderFor?comp.placeholderFor.splitter:comp.splitter)&&(splitter.neighbors=[]),edgeRegions[region]=splitter}if(center)for(j=0,count=(touched=touchedRegions.center).length;j<count;++j)(edge=edgeRegions[touched[j]])&&edge.neighbors.push(center)},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(item){var collapseTarget,size,policy,placeholderFor,policies=this.sizePolicies;return item.isCenter?(placeholderFor=item.placeholderFor)?placeholderFor.collapsedVertical()?policies.vert:policies.horz:item.collapsed?item.collapsedVertical()?policies.vert:policies.horz:policies.flexAll:(collapseTarget=item.collapseTarget)?collapseTarget.isVert?policies.vert:policies.horz:item.region?(policy=item.isVert?(size=item.height,policies.vert):(size=item.width,policies.horz),item.flex||"string"==typeof size&&this.percentageRe.test(size)?policies.flexAll:policy):this.autoSizePolicy}},function(){var methods={addUnflexed:function(px){this.flexSpace=Math.max(this.flexSpace-px,0)}},props=this.prototype.axisProps;Ext.apply(props.horz,methods),Ext.apply(props.vert,methods)}),Ext.define("Ext.layout.container.Card",{extend:Ext.layout.container.Fit,alternateClassName:"Ext.layout.CardLayout",alias:"layout.card",type:"card",hideInactive:!0,deferredRender:!1,getRenderTree:function(){var me=this,activeItem=me.getActiveItem();if(activeItem){if(activeItem.hasListeners.beforeactivate&&!1===activeItem.fireEvent("beforeactivate",activeItem)?activeItem=me.activeItem=me.owner.activeItem=null:activeItem.hasListeners.activate&&activeItem.on({boxready:function(){activeItem.fireEvent("activate",activeItem)},single:!0}),!me.deferredRender)return me.callParent(arguments);if(activeItem)return me.getItemsRenderTree([activeItem])}},renderChildren:function(){var me=this,active=me.getActiveItem();me.deferredRender?active&&me.renderItems([active],me.getRenderTarget()):me.callParent()},isValidParent:function(item,target,position){var itemEl=item.el?item.el.dom:Ext.getDom(item);return itemEl&&itemEl.parentNode===(target.dom||target)||!1},getActiveItem:function(){var me=this,item=void 0===me.activeItem?me.owner&&me.owner.activeItem:me.activeItem,result=me.parseActiveItem(item);return result&&-1!==me.owner.items.indexOf(result)&&(me.activeItem=result),null==result?null:me.activeItem||me.owner.activeItem},parseActiveItem:function(item){return item&&item.isComponent?item:"number"==typeof item||void 0===item?this.getLayoutItems()[item||0]:null===item?null:this.owner.getComponent(item)},configureItem:function(item){item.setHiddenState(item!==this.getActiveItem()),this.callParent(arguments)},onAdd:function(item,pos){this.callParent([item,pos]),this.setItemHideMode(item)},onRemove:function(component){this.callParent([component]),this.resetItemHideMode(component),component===this.activeItem&&(this.activeItem=void 0)},getAnimation:function(newCard,owner){var newAnim=(newCard||{}).cardSwitchAnimation;return!1!==newAnim&&(newAnim||owner.cardSwitchAnimation)},getNext:function(){var wrap=arguments[0],items=this.getLayoutItems();return items[Ext.Array.indexOf(items,this.activeItem)+1]||!!wrap&&items[0]},next:function(){var anim=arguments[0],wrap=arguments[1];return this.setActiveItem(this.getNext(wrap),anim)},getPrev:function(){var wrap=arguments[0],items=this.getLayoutItems();return items[Ext.Array.indexOf(items,this.activeItem)-1]||!!wrap&&items[items.length-1]},prev:function(){var anim=arguments[0],wrap=arguments[1];return this.setActiveItem(this.getPrev(wrap),anim)},setActiveItem:function(newCard){var focusNewCard,me=this,owner=me.owner,oldCard=me.activeItem,rendered=owner.rendered;if(newCard=me.parseActiveItem(newCard),-1===owner.items.indexOf(newCard)&&(owner.items.items.length,Ext.suspendLayouts(),newCard=owner.add(newCard),Ext.resumeLayouts()),newCard&&oldCard!==newCard){if(!1===newCard.fireEvent("beforeactivate",newCard,oldCard))return!1;if(oldCard&&!1===oldCard.fireEvent("beforedeactivate",oldCard,newCard))return!1;if(rendered){if(Ext.suspendLayouts(),newCard.rendered||me.renderItem(newCard,me.getRenderTarget(),owner.items.length),oldCard&&me.hideInactive){if(focusNewCard=oldCard.el.contains(Ext.Element.getActiveElement()),oldCard.hide(),!oldCard.hidden)return!1;oldCard.hiddenByLayout=!0,oldCard.fireEvent("deactivate",oldCard,newCard)}newCard.hidden&&newCard.show(),newCard.hidden?me.activeItem=newCard=null:(me.activeItem=newCard,focusNewCard&&(newCard.defaultFocus||(newCard.defaultFocus=":focusable"),newCard.focus())),Ext.resumeLayouts(!0)}else me.activeItem=newCard;return newCard.fireEvent("activate",newCard,oldCard),me.activeItem}return!1},resetItemHideMode:function(item){item.hideMode=item.originalHideMode,delete item.originalHideMode},setItemHideMode:function(item){item.originalHideMode=item.hideMode,item.hideMode="offsets"}}),Ext.define("Ext.plugin.Manager",{alternateClassName:["Ext.PluginManager","Ext.PluginMgr"],singleton:!0,typeName:"ptype",create:function(config,defaultType,host){var result,type;return(result=config.init?config:(host?(config=Ext.apply({},config)).cmp=host:host=config.cmp,config.xclass?Ext.create(config):(type="plugin."+(config.ptype||defaultType),Ext.ClassManager.instantiateByAlias(type,config))))&&host&&result.setCmp&&!result.setCmpCalled&&(result.setCmp(host),result.setCmpCalled=!0),result}}),Ext.define("Ext.resizer.BorderSplitterTracker",{extend:Ext.resizer.SplitterTracker,getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var i,neighbor,neighborMaxSize,minRange,maxRange,maxGrowth,maxShrink,targetSize,splitter=this.splitter,collapseTarget=splitter.collapseTarget,defaultSplitMin=splitter.defaultSplitMin,sizePropCap=splitter.vertical?"Width":"Height",minSizeProp="min"+sizePropCap,maxSizeProp="max"+sizePropCap,getSizeMethod="get"+sizePropCap,neighbors=splitter.neighbors,length=neighbors.length,box=collapseTarget.el.getBox(),left=box.x,top=box.y,right=box.right,bottom=box.bottom,size=splitter.vertical?right-left:bottom-top;for(minRange=(collapseTarget[minSizeProp]||Math.min(size,defaultSplitMin))-size,(maxRange=collapseTarget[maxSizeProp])?maxRange-=size:maxRange=1e9,targetSize=size,i=0;i<length;++i)size=(neighbor=neighbors[i])[getSizeMethod](),null===(neighborMaxSize=neighbor[maxSizeProp])&&(neighborMaxSize=void 0),maxGrowth=size-neighborMaxSize,maxShrink=size-(neighbor[minSizeProp]||Math.min(size,defaultSplitMin)),isNaN(maxGrowth)||minRange<maxGrowth&&(minRange=maxGrowth),maxShrink<maxRange&&(maxRange=maxShrink);return maxRange-minRange<2?null:(box=new Ext.util.Region(top,right,bottom,left),this.constraintAdjusters[this.getCollapseDirection()](box,minRange,maxRange,splitter),this.dragInfo={minRange:minRange,maxRange:maxRange,targetSize:targetSize},box)},constraintAdjusters:{left:function(box,minRange,maxRange,splitter){box[0]=box.x=box.left=box.right+minRange,box.right+=maxRange+splitter.getWidth()},top:function(box,minRange,maxRange,splitter){box[1]=box.y=box.top=box.bottom+minRange,box.bottom+=maxRange+splitter.getHeight()},bottom:function(box,minRange,maxRange,splitter){box.bottom=box.top-minRange,box.top-=maxRange+splitter.getHeight()},right:function(box,minRange,maxRange,splitter){box.right=box.left-minRange,box[0]=box.x=box.left=box.x-maxRange+splitter.getWidth()}},onBeforeStart:function(e){var i,neighbor,splitter=this.splitter,collapseTarget=splitter.collapseTarget,neighbors=splitter.neighbors,length=neighbors.length;if(collapseTarget.collapsed)return!1;for(i=0;i<length;++i)if((neighbor=neighbors[i]).collapsed&&neighbor.isHorz===collapseTarget.isHorz)return!1;return!!(this.constrainTo=this.calculateConstrainRegion())},performResize:function(e,offset){var owner,splitter=this.splitter,collapseDirection=splitter.getCollapseDirection(),collapseTarget=splitter.collapseTarget,adjusters=this.splitAdjusters[splitter.vertical?"horz":"vert"],delta=offset[adjusters.index],dragInfo=this.dragInfo;"right"!==collapseDirection&&"bottom"!==collapseDirection||(delta=-delta),(delta=Math.min(Math.max(dragInfo.minRange,delta),dragInfo.maxRange))&&((owner=splitter.ownerCt).suspendLayouts(),adjusters.adjustTarget(collapseTarget,dragInfo.targetSize,delta),owner.resumeLayouts(!0))},splitAdjusters:{horz:{index:0,adjustTarget:function(target,size,delta){target.flex=null,target.setSize(size+delta)}},vert:{index:1,adjustTarget:function(target,targetSize,delta){target.flex=null,target.setSize(void 0,targetSize+delta)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}}),Ext.define("Ext.resizer.ResizeTracker",{extend:Ext.dd.DragTracker,dynamic:!0,preserveRatio:!1,constrainTo:null,proxyCls:Ext.baseCSSPrefix+"resizable-proxy",constructor:function(config){var widthRatio,heightRatio,throttledResizeFn,me=this;config.el||(config.target.isComponent?me.el=config.target.getEl():me.el=config.target),this.callParent(arguments),me.preserveRatio&&me.minWidth&&me.minHeight&&((widthRatio=me.minWidth/me.el.getWidth())<(heightRatio=me.minHeight/me.el.getHeight())?me.minWidth=me.el.getWidth()*heightRatio:me.minHeight=me.el.getHeight()*widthRatio),me.throttle&&(throttledResizeFn=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(me,arguments)},me.throttle),me.resize=function(box,direction,atEnd){atEnd?Ext.resizer.ResizeTracker.prototype.resize.apply(me,arguments):throttledResizeFn.apply(null,arguments)})},onBeforeStart:function(e){this.startBox=this.target.getBox()},getProxy:function(){var me=this;if(me.dynamic||me.proxy||(me.proxy=me.createProxy(me.target||me.el),me.hideProxy=!0),me.proxy)return me.proxy.show(),me.proxy},createProxy:function(target){var proxy,cls=this.proxyCls;return(proxy=target.isComponent?target.getProxy().addCls(cls):target.createProxy({tag:"div",role:"presentation",cls:cls,id:target.id+"-rzproxy"},Ext.getBody())).removeCls(Ext.baseCSSPrefix+"proxy-el"),proxy},onStart:function(e){this.activeResizeHandle=Ext.get(this.getDragTarget().id),this.dynamic||this.resize(this.startBox)},onMouseDown:function(e,target){var targetEl=Ext.fly(target.parentNode);this.callParent(arguments),targetEl&&targetEl.shim&&targetEl.maskIframes()},onMouseUp:function(e){var targetEl=Ext.fly(this.dragTarget.parentNode);this.callParent(arguments),targetEl&&targetEl.shim&&targetEl.unmaskIframes()},onDrag:function(e){(this.dynamic||this.proxy)&&this.updateDimensions(e)},updateDimensions:function(e,atEnd){var ratio,snappedWidth,snappedHeight,oppositeCorner,axis,newBox,newHeight,newWidth,me=this,region=me.activeResizeHandle.region,offset=me.getOffset(me.constrainTo?"dragTarget":null),box=me.startBox,widthAdjust=0,heightAdjust=0,adjustX=0,adjustY=0;switch(region=me.convertRegionName(region)){case"south":heightAdjust=offset[1],axis=2;break;case"north":adjustY=-(heightAdjust=-offset[1]),axis=2;break;case"east":widthAdjust=offset[0],axis=1;break;case"west":adjustX=-(widthAdjust=-offset[0]),axis=1;break;case"northeast":adjustY=-(heightAdjust=-offset[1]),widthAdjust=offset[0],oppositeCorner=[box.x,box.y+box.height],axis=3;break;case"southeast":heightAdjust=offset[1],widthAdjust=offset[0],oppositeCorner=[box.x,box.y],axis=3;break;case"southwest":adjustX=-(widthAdjust=-offset[0]),heightAdjust=offset[1],oppositeCorner=[box.x+box.width,box.y],axis=3;break;case"northwest":adjustY=-(heightAdjust=-offset[1]),adjustX=-(widthAdjust=-offset[0]),oppositeCorner=[box.x+box.width,box.y+box.height],axis=3}if(newBox={width:box.width+widthAdjust,height:box.height+heightAdjust,x:box.x+adjustX,y:box.y+adjustY},snappedWidth=Ext.Number.snap(newBox.width,me.widthIncrement),snappedHeight=Ext.Number.snap(newBox.height,me.heightIncrement),snappedWidth!==newBox.width||snappedHeight!==newBox.height){switch(region){case"northeast":case"north":newBox.y-=snappedHeight-newBox.height;break;case"southwest":case"west":newBox.x-=snappedWidth-newBox.width;break;case"northwest":newBox.x-=snappedWidth-newBox.width,newBox.y-=snappedHeight-newBox.height}newBox.width=snappedWidth,newBox.height=snappedHeight}newBox.width<me.minWidth||newBox.width>me.maxWidth?(newBox.width=Ext.Number.constrain(newBox.width,me.minWidth,me.maxWidth),adjustX&&(newBox.x=box.x+(box.width-newBox.width))):me.lastX=newBox.x,newBox.height<me.minHeight||newBox.height>me.maxHeight?(newBox.height=Ext.Number.constrain(newBox.height,me.minHeight,me.maxHeight),adjustY&&(newBox.y=box.y+(box.height-newBox.height))):me.lastY=newBox.y,(me.preserveRatio||e.shiftKey)&&(ratio=me.startBox.width/me.startBox.height,newHeight=Math.min(Math.max(me.minHeight,newBox.width/ratio),me.maxHeight),newWidth=Math.min(Math.max(me.minWidth,newBox.height*ratio),me.maxWidth),1===axis?newBox.height=newHeight:2===axis?newBox.width=newWidth:(ratio<Math.abs(oppositeCorner[0]-this.lastXY[0])/Math.abs(oppositeCorner[1]-this.lastXY[1])?newBox.height=newHeight:newBox.width=newWidth,"northeast"===region?newBox.y=box.y-(newBox.height-box.height):"northwest"===region?(newBox.y=box.y-(newBox.height-box.height),newBox.x=box.x-(newBox.width-box.width)):"southwest"===region&&(newBox.x=box.x-(newBox.width-box.width)))),me.setPosition=newBox.x!==me.startBox.x||newBox.y!==me.startBox.y,me.resize(newBox,atEnd)},resize:function(box,atEnd){var target,me=this,setPosition=me.setPosition;(me.dynamic||!me.dynamic&&atEnd)&&(setPosition?me.target.setBox(box):me.target.setSize(box.width,box.height)),atEnd||(target=me.getProxy())&&target!==me.target&&(setPosition||me.hideProxy?target.setBox(box):target.setSize(box.width,box.height))},onEnd:function(e){this.updateDimensions(e,!0),this.proxy&&this.hideProxy&&this.proxy.hide()},convertRegionName:function(name){return name}}),Ext.define("Ext.resizer.Resizer",{mixins:{observable:Ext.util.Observable},alternateClassName:"Ext.Resizable",handleCls:Ext.baseCSSPrefix+"resizable-handle",overCls:Ext.baseCSSPrefix+"resizable-handle-over",pinnedCls:Ext.baseCSSPrefix+"resizable-pinned",wrapCls:Ext.baseCSSPrefix+"resizable-wrap",wrappedCls:Ext.baseCSSPrefix+"resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:!0,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:1e4,maxWidth:1e4,pinned:!1,preserveRatio:!1,transparent:!1,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},ariaRole:"presentation",constructor:function(config){var resizeTarget,handleCls,possibles,tag,len,i,pos,el,box,wrapTarget,positioning,targetBaseCls,me=this,handles=me.handles,unselectableCls=Ext.dom.Element.unselectableCls,handleEls=[];for((Ext.isString(config)||Ext.isElement(config)||config.dom)&&(resizeTarget=config,(config=arguments[1]||{}).target=resizeTarget),me.mixins.observable.constructor.call(me,config),(resizeTarget=me.target)?resizeTarget.isComponent?(resizeTarget.addClsWithUI("resizable"),resizeTarget.minWidth&&(me.minWidth=resizeTarget.minWidth),resizeTarget.minHeight&&(me.minHeight=resizeTarget.minHeight),resizeTarget.maxWidth&&(me.maxWidth=resizeTarget.maxWidth),resizeTarget.maxHeight&&(me.maxHeight=resizeTarget.maxHeight),resizeTarget.floating&&(me.hasOwnProperty("handles")||(me.handles="n ne e se s sw w nw")),me.el=resizeTarget.getEl()):resizeTarget=me.el=me.target=Ext.get(resizeTarget):resizeTarget=me.target=me.el=Ext.get(me.el),me.el.addCls(Ext.Component.prototype.borderBoxCls),Ext.isNumber(me.width)&&(me.width=Ext.Number.constrain(me.width,me.minWidth,me.maxWidth)),Ext.isNumber(me.height)&&(me.height=Ext.Number.constrain(me.height,me.minHeight,me.maxHeight)),null===me.width&&null===me.height||me.target.setSize(me.width,me.height),"TEXTAREA"!==(tag=me.el.dom.tagName.toUpperCase())&&"IMG"!==tag&&"TABLE"!==tag||(me.originalTarget=me.target,wrapTarget=resizeTarget.isComponent?resizeTarget.getEl():resizeTarget,me.el.addCls(me.wrappedCls),me.target=me.el=me.el.wrap({role:"presentation",cls:me.wrapCls,id:me.el.id+"-rzwrap",style:wrapTarget.getStyle(["margin-top","margin-bottom"])}),positioning=wrapTarget.getPositioning(),me.el.setPositioning(positioning),wrapTarget.clearPositioning(),box=wrapTarget.getBox(),"absolute"!==positioning.position&&(box.x=0,box.y=0),me.el.setBox(box),wrapTarget.setStyle("position","absolute"),me.isTargetWrapped=!0),me.el.position(),me.pinned&&me.el.addCls(me.pinnedCls),me.resizeTracker=new Ext.resizer.ResizeTracker({disabled:me.disabled,target:resizeTarget,el:me.el,constrainTo:me.constrainTo,handleCls:me.handleCls,overCls:me.overCls,throttle:me.throttle,proxy:me.originalTarget?me.el:null,dynamic:!!me.originalTarget||me.dynamic,originalTarget:me.originalTarget,delegate:"."+me.handleCls,preserveRatio:me.preserveRatio,heightIncrement:me.heightIncrement,widthIncrement:me.widthIncrement,minHeight:me.minHeight,maxHeight:me.maxHeight,minWidth:me.minWidth,maxWidth:me.maxWidth}),me.resizeTracker.on({mousedown:me.onBeforeResize,drag:me.onResize,dragend:me.onResizeEnd,scope:me}),"all"===me.handles&&(me.handles="n s e w ne nw se sw"),handles=me.handles=me.handles.split(me.delimiterRe),possibles=me.possiblePositions,len=handles.length,handleCls=me.handleCls+" "+me.handleCls+"-{0}",me.target.isComponent&&(handleCls+=" "+(targetBaseCls=me.target.baseCls)+"-handle "+targetBaseCls+"-handle-{0}",Ext.supports.CSS3BorderRadius&&(handleCls+=" "+targetBaseCls+"-handle-{0}-br")),i=0;i<len;i++)handles[i]&&possibles[handles[i]]&&(pos=possibles[handles[i]],handleEls.push('<div id="',me.el.id,"-",pos,'-handle" class="',Ext.String.format(handleCls,pos)," ",unselectableCls,'" unselectable="on" role="presentation"',"></div>"));for(Ext.DomHelper.append(me.el,handleEls.join("")),i=handleEls.length=0;i<len;i++)handles[i]&&possibles[handles[i]]&&(el=me[pos=possibles[handles[i]]]=me.el.getById(me.el.id+"-"+pos+"-handle"),handleEls.push(el),el.region=pos,me.transparent&&el.setOpacity(0));me.resizeTracker.handleEls=handleEls},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(tracker,e){return this.fireResizeEvent("beforeresize",tracker,e)},onResize:function(tracker,e){return this.fireResizeEvent("resizedrag",tracker,e)},onResizeEnd:function(tracker,e){return this.fireResizeEvent("resize",tracker,e)},fireResizeEvent:function(name,tracker,e){var box;if(this.hasListeners[name])return box=this.el.getBox(),this.fireEvent(name,this,box.width,box.height,e)},resizeTo:function(width,height){this.target.setSize(width,height),this.fireEvent("resize",this,width,height,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var i,handle,me=this,handles=me.handles,len=handles.length,positions=me.possiblePositions;for(me.resizeTracker.destroy(),me.isTargetWrapped&&me.target.destroy(),i=0;i<len;i++)(handle=me[positions[handles[i]]])&&handle.destroy();me.callParent()}}),Ext.define("Ext.selection.CellModel",{extend:Ext.selection.DataViewModel,alias:"selection.cellmodel",isCellModel:!0,deselectOnContainerClick:!1,enableKeyNav:!0,preventWrap:!1,bindComponent:function(view){var grid,me=this;me.view&&me.gridListeners&&me.gridListeners.destroy(),me.callParent([view]),view&&!1!==(grid=view.grid||view.ownerCt).optimizedColumnMove&&(me.gridListeners=grid.on({columnmove:me.onColumnMove,scope:me,destroyable:!0}))},getViewListeners:function(){var result=this.callParent();return result.refresh=this.onViewRefresh,result},getHeaderCt:function(){var selection=this.navigationModel.getPosition();return(selection?selection.view:this.primaryView).headerCt},onNavigate:function(e){e.record&&!e.keyEvent.stopSelection&&this.setPosition(e.position)},selectWithEvent:function(record,e){this.select(record)},select:function(pos,keepExisting,suppressEvent){var row,oldPos=this.getPosition(),store=this.view.store;!pos&&0!==pos||(pos.isModel?pos=-1!==(row=store.indexOf(pos))?{row:row,column:oldPos?oldPos.column:0}:null:"number"==typeof pos&&(pos={row:pos,column:0})),pos?this.selectByPosition(pos,suppressEvent):this.deselect()},getCurrentPosition:function(){var position=this.selecting?this.nextSelection:this.selection;return position?{view:position.view,record:position.record,row:position.rowIdx,columnHeader:position.column,column:position.view.getColumnManager().indexOf(position.column)}:position},getPosition:function(){return(this.selecting?this.nextSelection:this.selection)||null},setCurrentPosition:function(pos,suppressEvent,preventCheck){return pos&&!pos.isCellContext&&(pos=new Ext.grid.CellContext(this.view).setPosition({row:pos.row,column:"number"==typeof pos.column?this.view.getColumnManager().getColumns()[pos.column]:pos.column})),this.setPosition(pos,suppressEvent,preventCheck)},setPosition:function(pos,suppressEvent,preventCheck){var me=this,last=me.selection;if(pos=pos&&(pos.isCellContext?pos.clone():new Ext.grid.CellContext(me.view).setPosition(pos)),!preventCheck&&last&&(pos&&pos.record===last.record&&pos.column===last.column&&pos.view===last.view?pos=null:me.onCellDeselect(me.selection,suppressEvent)),pos)return me.nextSelection=pos,me.selecting=!0,me.onCellSelect(me.nextSelection,suppressEvent),me.selecting=!1,me.selection=pos},isCellSelected:function(view,row,column){var testPos,pos=this.getPosition();if(pos&&pos.view===view)return(testPos=new Ext.grid.CellContext(view).setPosition({row:row,column:"number"==typeof column?view.getColumnManager().getColumns()[column]:column})).record===pos.record&&testPos.column===pos.column},onStoreRemove:function(store,records,indices){var pos=this.getPosition();this.callParent(arguments),pos&&store.isMoving(pos.record)||(pos&&store.getCount()&&-1!==store.indexOf(pos.record)?pos.setRow(pos.record):this.selection=null)},onStoreClear:function(){this.callParent(arguments),this.selection=null},onStoreAdd:function(){var pos=this.getPosition();this.callParent(arguments),pos?pos.setRow(pos.record):this.selection=null},onCellClick:function(view,cell,cellIndex,record,row,recordIndex,e){-1!==recordIndex&&this.setPosition(e.position)},onCellSelect:function(position,supressEvent){position&&void 0!==position.rowIdx&&-1<position.rowIdx&&this.doSelect(position.record,!1,supressEvent)},onCellDeselect:function(position,supressEvent){position&&void 0!==position.rowIdx&&this.doDeselect(position.record,supressEvent)},onSelectChange:function(record,isSelected,suppressEvent,commitFn){var pos,eventName,view,me=this;eventName=isSelected?(pos=me.nextSelection,"select"):(pos=me.selection,"deselect"),view=pos.view||me.primaryView,!1!==(suppressEvent||me.fireEvent("before"+eventName,me,record,pos.rowIdx,pos.colIdx))&&!1!==commitFn()&&(isSelected?view.onCellSelect(pos):(view.onCellDeselect(pos),delete me.selection),suppressEvent||me.fireEvent(eventName,me,record,pos.rowIdx,pos.colIdx))},refresh:function(){var selRowIdx,pos=this.getPosition();pos&&-1!==(selRowIdx=this.store.indexOf(this.selected.last()))&&(pos.rowIdx=selRowIdx)},onColumnMove:function(headerCt,header,fromIdx,toIdx){var grid=headerCt.up("tablepanel");grid&&this.onViewRefresh(grid.view)},onUpdate:function(record){var pos,me=this;me.isSelected(record)&&(pos=me.selecting?me.nextSelection:me.selection,me.view.onCellSelect(pos))},onViewRefresh:function(view){var newPos,record,column,pos=this.getPosition(),headerCt=view.headerCt;pos&&pos.view===view&&(record=pos.record,(column=pos.column).isDescendantOf(headerCt)||(column=headerCt.queryById(column.id)||headerCt.down('[text="'+column.text+'"]')||headerCt.down('[dataIndex="'+column.dataIndex+'"]')),pos.record?column&&-1!==view.store.indexOfId(record.getId())&&(newPos=new Ext.grid.CellContext(view).setPosition({row:record,column:column}),this.setPosition(newPos)):this.selection=null)},selectByPosition:function(position,suppressEvent){this.setPosition(position,suppressEvent)}}),Ext.define("Ext.selection.RowModel",{extend:Ext.selection.DataViewModel,alias:"selection.rowmodel",enableKeyNav:!0,isRowModel:!0,deselectOnContainerClick:!1,onUpdate:function(record){var index,view=this.view;view&&this.isSelected(record)&&(index=view.indexOf(record),view.onRowSelect(index),record===this.lastFocused&&view.onRowFocus(index,!0))},onSelectChange:function(record,isSelected,suppressEvent,commitFn){var i,view,me=this,views=me.views||[me.view],viewsLn=views.length,recordIndex=me.store.indexOf(record),eventName=isSelected?"select":"deselect";if(!1!==(suppressEvent||me.fireEvent("before"+eventName,me,record,recordIndex))&&!1!==commitFn()){for(i=0;i<viewsLn;i++)recordIndex=(view=views[i]).indexOf(record),-1!==view.indexOf(record)&&(isSelected?view.onRowSelect(recordIndex,suppressEvent):view.onRowDeselect(recordIndex,suppressEvent));suppressEvent||me.fireEvent(eventName,me,record,recordIndex)}},getCurrentPosition:function(){var firstSelection=this.selected.getAt(0);if(firstSelection)return new Ext.grid.CellContext(this.view).setPosition(this.store.indexOf(firstSelection),0)},selectByPosition:function(position,keepExisting){position.isCellContext||(position=new Ext.grid.CellContext(this.view).setPosition(position.row,position.column)),this.select(position.record,keepExisting)},selectNext:function(keepExisting,suppressEvent){var store=this.store,selection=this.getSelection(),record=selection[selection.length-1],index=this.view.indexOf(record)+1;return index!==store.getCount()&&0!==index&&(this.doSelect(index,keepExisting,suppressEvent),!0)},selectPrevious:function(keepExisting,suppressEvent){var record=this.getSelection()[0],index=this.view.indexOf(record)-1;return!(index<0)&&(this.doSelect(index,keepExisting,suppressEvent),!0)},isRowSelected:function(record){return this.isSelected(record)},isCellSelected:function(view,record,columnHeader){return this.isSelected(record)},vetoSelection:function(e){var navModel=this.view.getNavigationModel(),key=e.getKey();return(key===e.RIGHT||key===e.LEFT)&&navModel.previousRecord===navModel.record||this.callParent([e])}}),Ext.define("Ext.selection.CheckboxModel",{alias:"selection.checkboxmodel",extend:Ext.selection.RowModel,mode:"MULTI",injectCheckbox:0,checkOnly:!1,showHeaderCheckbox:void 0,checkSelector:"."+Ext.baseCSSPrefix+"grid-row-checker",allowDeselect:!0,headerWidth:24,checkerOnCls:Ext.baseCSSPrefix+"grid-hd-checker-on",tdCls:Ext.baseCSSPrefix+"grid-cell-special "+Ext.baseCSSPrefix+"grid-cell-row-checker",constructor:function(){this.callParent(arguments),"SINGLE"===this.mode&&(this.showHeaderCheckbox=!1)},beforeViewRender:function(view){var owner,me=this;me.callParent(arguments),me.hasLockedHeader()&&!view.headerCt.lockedCt||(me.addCheckbox(view,!0),owner=view.ownerCt,view.headerCt.lockedCt&&(owner=owner.ownerCt),me.mon(owner,"reconfigure",me.onReconfigure,me))},bindComponent:function(view){this.sortable=!1,this.callParent(arguments)},hasLockedHeader:function(){var v,views=this.views,vLen=views.length;for(v=0;v<vLen;v++)if(views[v].headerCt.lockedCt)return!0;return!1},addCheckbox:function(view,initial){var checkbox=this.injectCheckbox,headerCt=view.headerCt;!1!==checkbox&&("first"===checkbox?checkbox=0:"last"===checkbox&&(checkbox=headerCt.getColumnCount()),Ext.suspendLayouts(),view.getStore().isBufferedStore&&(this.showHeaderCheckbox=!1),this.column=headerCt.add(checkbox,this.getHeaderConfig()),Ext.resumeLayouts()),!0!==initial&&view.refresh()},onReconfigure:function(grid,store,columns){columns&&this.addCheckbox(this.views[0])},toggleUiHeader:function(isChecked){var checkHd=this.views[0].headerCt.child("gridcolumn[isCheckerHd]"),cls=this.checkerOnCls;checkHd&&(isChecked?checkHd.addCls(cls):checkHd.removeCls(cls))},onHeaderClick:function(headerCt,header,e){header===this.column&&"SINGLE"!==this.mode&&(e.stopEvent(),header.el.hasCls(Ext.baseCSSPrefix+"grid-hd-checker-on")?this.deselectAll():this.selectAll())},getHeaderConfig:function(){var me=this,showCheck=!1!==me.showHeaderCheckbox;return{xtype:"gridcolumn",ignoreExport:!0,isCheckerHd:showCheck,text:"&#160;",clickTargetName:"el",width:me.headerWidth,sortable:!1,draggable:!1,resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:"",tdCls:me.tdCls,cls:showCheck?Ext.baseCSSPrefix+"column-header-checkbox ":"",defaultRenderer:me.renderer.bind(me),editRenderer:me.editRenderer||me.renderEmpty,locked:me.hasLockedHeader(),processEvent:me.processColumnEvent}},processColumnEvent:function(type,view,cell,recordIndex,cellIndex,e,record,row){var navModel=view.getNavigationModel();"keydown"===e.type&&view.actionableMode&&e.getKey()===e.SPACE&&navModel.fireEvent("navigate",{view:view,navigationModel:navModel,keyEvent:e,position:e.position,recordIndex:recordIndex,record:record,item:e.item,cell:e.position.cellElement,columnIndex:e.position.colIdx,column:e.position.column})},renderEmpty:function(){return"&#160;"},refresh:function(){this.callParent(arguments),this.updateHeaderState()},renderer:function(value,metaData,record,rowIndex,colIndex,store,view){return'<div class="'+Ext.baseCSSPrefix+'grid-row-checker" role="button" tabIndex="0">&#160;</div>'},selectByPosition:function(position,keepExisting){position.isCellContext||(position=new Ext.grid.CellContext(this.view).setPosition(position.row,position.column)),this.checkOnly&&position.column!==this.column||this.callParent([position,keepExisting])},onSelectChange:function(){this.callParent(arguments),this.suspendChange||this.updateHeaderState()},onStoreLoad:function(){this.callParent(arguments),this.updateHeaderState()},onStoreAdd:function(){this.callParent(arguments),this.updateHeaderState()},onStoreRemove:function(){this.callParent(arguments),this.updateHeaderState()},onStoreRefresh:function(){this.callParent(arguments),this.updateHeaderState()},maybeFireSelectionChange:function(fireEvent){fireEvent&&!this.suspendChange&&this.updateHeaderState(),this.callParent(arguments)},resumeChanges:function(){this.callParent(),this.suspendChange||this.updateHeaderState()},updateHeaderState:function(){var selected,len,i,store=this.store,storeCount=store.getCount(),views=this.views,hdSelectStatus=!1,selectedCount=0;if(!store.isBufferedStore&&0<storeCount){for(hdSelectStatus=!0,i=0,len=(selected=this.selected).getCount();i<len&&-1!==store.indexOfId(selected.getAt(i).id);++i)++selectedCount;hdSelectStatus=storeCount===selectedCount}views&&views.length&&this.toggleUiHeader(hdSelectStatus)},vetoSelection:function(e){var veto,isClick,isSpace,column=this.column;return this.checkOnly&&(isClick="click"===e.type&&e.getTarget(this.checkSelector),isSpace=e.getKey()===e.SPACE&&e.position.column===column,veto=!(isClick||isSpace)),veto||this.callParent([e])},destroy:function(){this.column=null,this.callParent()},privates:{onBeforeNavigate:function(metaEvent){var e=metaEvent.keyEvent;"SINGLE"!==this.selectionMode&&(metaEvent.ctrlKey=metaEvent.ctrlKey||e.ctrlKey||"click"===e.type&&!e.shiftKey||e.getKey()===e.SPACE)},selectWithEventMulti:function(record,e,isSelected){e.shiftKey||e.ctrlKey||!e.getTarget(this.checkSelector)?this.callParent([record,e,isSelected]):isSelected?this.doDeselect(record):this.doSelect(record,!0)}}}),Ext.define("Ext.selection.TreeModel",{extend:Ext.selection.RowModel,alias:"selection.treemodel",selectOnExpanderClick:!1,constructor:function(config){this.callParent([config]),this.pruneRemoved&&(this.pruneRemoved=!1,this.pruneRemovedNodes=!0)},getStoreListeners:function(){var result=this.callParent();return result.noderemove=this.onNodeRemove,result},onNodeRemove:function(parent,node,isMove){if(!isMove){var toDeselect=[];this.gatherSelected(node,toDeselect),toDeselect.length&&this.deselect(toDeselect)}},pruneRemovedOnRefresh:function(){return this.pruneRemovedNodes},vetoSelection:function(e){var view=this.view;return!this.selectOnExpanderClick&&"click"===e.type&&e.getTarget(view.expanderSelector||view.lockingPartner&&view.lockingPartner.expanderSelector)||this.callParent([e])},privates:{gatherSelected:function(node,toDeselect){var i,len,child,childNodes=node.childNodes;if(this.selected.containsKey(node.id)&&toDeselect.push(node),childNodes)for(i=0,len=childNodes.length;i<len;++i)child=childNodes[i],this.gatherSelected(child,toDeselect)}}}),Ext.define("Ext.toolbar.Fill",{extend:Ext.Component,alias:"widget.tbfill",alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:!0,flex:1}),Ext.define("Ext.tree.Column",{extend:Ext.grid.column.Column,alias:"widget.treecolumn",tdCls:Ext.baseCSSPrefix+"grid-cell-treecolumn",autoLock:!0,lockable:!1,draggable:!1,hideable:!1,iconCls:Ext.baseCSSPrefix+"tree-icon",checkboxCls:Ext.baseCSSPrefix+"tree-checkbox",elbowCls:Ext.baseCSSPrefix+"tree-elbow",expanderCls:Ext.baseCSSPrefix+"tree-expander",textCls:Ext.baseCSSPrefix+"tree-node-text",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-treecolumn",customIconCls:Ext.baseCSSPrefix+"tree-icon-custom",isTreeColumn:!0,cellTpl:['<tpl for="lines">','<div class="{parent.childCls} {parent.elbowCls}-img ','{parent.elbowCls}-<tpl if=".">line<tpl else>empty</tpl>" role="presentation"></div>',"</tpl>",'<div class="{childCls} {elbowCls}-img {elbowCls}','<tpl if="isLast">-end</tpl><tpl if="expandable">-plus {expanderCls}</tpl>" role="presentation"></div>','<tpl if="checked !== null">','<div role="button" {ariaCellCheckboxAttr}',' class="{childCls} {checkboxCls}<tpl if="checked"> {checkboxCls}-checked</tpl>"></div>',"</tpl>",'<tpl if="icon"><img src="{blankUrl}"<tpl else><div</tpl>',' role="presentation" class="{childCls} {baseIconCls} {customIconCls} ','{baseIconCls}-<tpl if="leaf">leaf<tpl else><tpl if="expanded">parent-expanded<tpl else>parent</tpl></tpl> {iconCls}" ','<tpl if="icon">style="background-image:url({icon})"/><tpl else>></div></tpl>','<tpl if="href">','<a href="{href}" role="link" target="{hrefTarget}" class="{textCls} {childCls}">{value}</a>',"<tpl else>",'<span class="{textCls} {childCls}">{value}</span>',"</tpl>"],uiFields:{checked:1,icon:1,iconCls:1},rowFields:{expanded:1,loaded:1,expandable:1,leaf:1,loading:1,qtip:1,qtitle:1,cls:1},initComponent:function(){var me=this;me.rendererScope=me.scope,me.setupRenderer(),me.innerRenderer=me.renderer,me.renderer=me.treeRenderer,me.callParent(),(me.scope=me).hasCustomRenderer=me.innerRenderer&&1<me.innerRenderer.length},treeRenderer:function(value,metaData,record,rowIdx,colIdx,store,view){var rendererData,cls=record.get("cls");return metaData&&cls&&(metaData.tdCls+=" "+cls),rendererData=this.initTemplateRendererData(value,metaData,record,rowIdx,colIdx,store,view),this.getTpl("cellTpl").apply(rendererData)},initTemplateRendererData:function(value,metaData,record,rowIdx,colIdx,store,view){for(var parentData,me=this,innerRenderer=me.innerRenderer,data=record.data,parent=record.parentNode,rootVisible=view.rootVisible,lines=[];parent&&(rootVisible||0<parent.data.depth);)parentData=parent.data,lines[rootVisible?parentData.depth:parentData.depth-1]=parentData.isLast?0:1,parent=parent.parentNode;return{record:record,baseIconCls:me.iconCls,customIconCls:data.icon||data.iconCls?me.customIconCls:"",iconCls:data.iconCls,icon:data.icon,checkboxCls:me.checkboxCls,checked:data.checked,elbowCls:me.elbowCls,expanderCls:me.expanderCls,textCls:me.textCls,leaf:data.leaf,expandable:record.isExpandable(),expanded:data.expanded,isLast:record.isLastVisible(),blankUrl:Ext.BLANK_IMAGE_URL,href:data.href,hrefTarget:data.hrefTarget,lines:lines,metaData:metaData,childCls:me.getChildCls?me.getChildCls()+" ":"",value:innerRenderer?innerRenderer.apply(me.rendererScope,arguments):value}},shouldUpdateCell:function(record,changedFieldNames){var len,field,i=0;if(changedFieldNames)for(len=changedFieldNames.length;i<len;++i){if(field=changedFieldNames[i],this.rowFields[field])return 1;if(this.uiFields[field])return 2}return this.callParent([record,changedFieldNames])}}),Ext.define("Ext.tree.NavigationModel",{extend:Ext.grid.NavigationModel,alias:"view.navigation.tree",initKeyNav:function(view){var len,i,me=this,columns=me.view.ownerGrid.columns;for(me.isTreeGrid=columns&&1<columns.length,me.callParent([view]),i=0,len=me.keyNav.length;i<len;i++)me.keyNav[i].map.addBinding([{key:"8",shift:!0,handler:me.onAsterisk,scope:me},{key:Ext.event.Event.NUM_MULTIPLY,handler:me.onAsterisk,scope:me}]);me.view.grid.on({columnschanged:me.onColumnsChanged,scope:me})},onColumnsChanged:function(){this.isTreeGrid=1<this.view.ownerGrid.getVisibleColumnManager().getColumns().length},onCellClick:function(view,cell,cellIndex,record,row,recordIndex,clickEvent){return this.callParent([view,cell,cellIndex,record,row,recordIndex,clickEvent]),!clickEvent.nodeToggled},onKeyLeft:function(keyEvent){var view=keyEvent.view,record=this.record;if(this.isTreeGrid&&!keyEvent.ctrlKey)return this.callParent([keyEvent]);keyEvent.position.column.isTreeColumn&&record.isExpanded()?view.collapse(record):!(record=record.parentNode)||record.isRoot()&&!view.rootVisible||this.setPosition(record,null,keyEvent)},onKeyRight:function(keyEvent){var record=this.record;if(this.isTreeGrid&&!keyEvent.ctrlKey)return this.callParent([keyEvent]);record.isLeaf()||(keyEvent.position.column.isTreeColumn&&!record.isExpanded()?keyEvent.view.expand(record):record.isExpanded()&&(record=record.childNodes[0])&&this.setPosition(record))},onKeyEnter:function(keyEvent){null!=this.record.data.checked?this.toggleCheck(keyEvent):this.callParent([keyEvent])},onKeySpace:function(keyEvent){null!=this.record.data.checked?this.toggleCheck(keyEvent):this.callParent([keyEvent])},toggleCheck:function(keyEvent){this.view.onCheckChange(keyEvent)},onAsterisk:function(keyEvent){this.view.ownerCt.expandAll()}}),Ext.define("Ext.tree.View",{extend:Ext.view.Table,alias:"widget.treeview",config:{selectionModel:{type:"treemodel"}},isTreeView:!0,loadingCls:Ext.baseCSSPrefix+"grid-tree-loading",expandedCls:Ext.baseCSSPrefix+"grid-tree-node-expanded",leafCls:Ext.baseCSSPrefix+"grid-tree-node-leaf",expanderSelector:"."+Ext.baseCSSPrefix+"tree-expander",checkboxSelector:"."+Ext.baseCSSPrefix+"tree-checkbox",expanderIconOverCls:Ext.baseCSSPrefix+"tree-expander-over",nodeAnimWrapCls:Ext.baseCSSPrefix+"tree-animator-wrap",ariaRole:"tree",loadMask:!1,rootVisible:!0,expandDuration:250,collapseDuration:250,toggleOnDblClick:!0,stripeRows:!1,treeRowTpl:["{%","this.processRowValues(values);","this.nextTpl.applyOut(values, out, parent);","%}",{priority:10,processRowValues:function(rowValues){var record=rowValues.record,view=rowValues.view;rowValues.rowAttr["data-qtip"]=record.get("qtip")||"",rowValues.rowAttr["data-qtitle"]=record.get("qtitle")||"",record.isExpanded()&&rowValues.rowClasses.push(view.expandedCls),record.isLeaf()&&rowValues.rowClasses.push(view.leafCls),record.isLoading()&&rowValues.rowClasses.push(view.loadingCls)}}],initComponent:function(){var me=this;me.bufferedRenderer?me.animate=!1:void 0===me.initialConfig.animate&&(me.animate=Ext.enableFx),me.store=me.panel.getStore(),me.onRootChange(me.store.getRoot()),me.animQueue={},me.animWraps={},me.callParent(),me.store.setRootVisible(me.rootVisible),me.addRowTpl(Ext.XTemplate.getTpl(me,"treeRowTpl"))},onFillComplete:function(treeStore,fillRoot,newNodes){var start=this.store.indexOf(newNodes[0]);fillRoot.triggerUIUpdate(),newNodes.length&&-1!==start&&(this.onAdd(this.store,newNodes,start),this.refreshPartner())},refreshPartner:function(){var partner=this.lockingPartner;partner&&partner.refresh()},afterComponentLayout:function(width,height,prevWidth,prevHeight){var scroller=this.getScrollable();this.callParent([width,height,prevWidth,prevHeight]),scroller&&!this.bufferedRenderer&&scroller.refresh()},processUIEvent:function(e){return!e.getTarget("."+this.nodeAnimWrapCls,this.el)&&this.callParent([e])},setRootNode:function(node){this.node=node},getChecked:function(){var checked=[];return this.node.cascadeBy(function(rec){rec.get("checked")&&checked.push(rec)}),checked},isItemChecked:function(rec){return rec.get("checked")},createAnimWrap:function(record,index){var tmpEl,node=this.getNode(record);return{record:record,node:node,el:tmpEl=Ext.fly(node).insertSibling({role:"presentation",tag:"div",cls:this.nodeAnimWrapCls},"after"),expanding:!1,collapsing:!1,animateEl:tmpEl,targetEl:tmpEl}},getAnimWrap:function(parent,bubble){if(!this.animate)return null;var wraps=this.animWraps,wrap=wraps[parent.internalId];if(!1!==bubble)for(;!wrap&&parent;)(parent=parent.parentNode)&&(wrap=wraps[parent.internalId]);return wrap},doAdd:function(records,index){var relativeIndex,targetEl,childNodes,len,result,children,me=this,parent=records[0].parentNode,all=me.all,animWrap=me.getAnimWrap(parent);return animWrap&&animWrap.expanding?(children=(result=me.bufferRender(records,index,!0)).children,parent=animWrap.record,len=(childNodes=(targetEl=animWrap.targetEl).dom.childNodes).length,relativeIndex=index-me.indexInStore(parent)-1,!len||len<=relativeIndex?targetEl.appendChild(result.fragment,!0):Ext.fly(childNodes[relativeIndex]).insertSibling(children,"before",!0),all.insert(index,children),children):me.callParent([records,index])},onRemove:function(ds,records,index){var empty,i,oldItems,me=this,fireRemoveEvent=me.hasListeners.remove;if(me.viewReady){if(empty=0===me.store.getCount(),me.bufferedRenderer)return me.callParent([ds,records,index]);if(fireRemoveEvent&&(oldItems=this.all.slice(index,index+records.length)),empty)me.refresh();else{for(index+=i=records.length-1;0<=i;--i,--index)me.doRemove(records[i],index);me.refreshSizePending=!0}fireRemoveEvent&&me.fireEvent("itemremove",records,index,oldItems,me)}},doRemove:function(record,index){var all=this.all,animWrap=this.getAnimWrap(record),item=all.item(index),node=item?item.dom:null;if(!node||!animWrap||!animWrap.collapsing)return this.callParent([record,index]);animWrap.targetEl.dom.insertBefore(node,animWrap.targetEl.dom.firstChild),all.removeElement(index)},onBeforeExpand:function(parent,records,index){var animWrap,me=this;me.rendered&&me.all.getCount()&&me.animate&&me.getNode(parent)&&((animWrap=me.getAnimWrap(parent,!1))?animWrap.collapsing&&animWrap.targetEl.select(me.itemSelector).destroy():(animWrap=me.animWraps[parent.internalId]=me.createAnimWrap(parent)).animateEl.setHeight(0),animWrap.expanding=!0,animWrap.collapsing=!1)},onExpand:function(parent){var animWrap,animateEl,targetEl,me=this,queue=me.animQueue,id=parent.getId(),node=me.getNode(parent),index=node?me.indexOf(node):-1;if(me.singleExpand&&me.ensureSingleExpand(parent),-1!==index){if(!(animWrap=me.getAnimWrap(parent,!1)))return parent.isExpandingOrCollapsing=!1,void me.fireEvent("afteritemexpand",parent,index,node);animateEl=animWrap.animateEl,targetEl=animWrap.targetEl,animateEl.stopAnimation(),queue[id]=!0,Ext.on("idle",function(){animateEl.dom.style.height="0px"},null,{single:!0}),animateEl.animate({from:{height:0},to:{height:targetEl.dom.scrollHeight},duration:me.expandDuration,listeners:{afteranimate:function(){var items=targetEl.dom.childNodes,activeEl=Ext.Element.getActiveElement();items.length&&(targetEl.contains(activeEl)||(activeEl=null),animWrap.el.insertSibling(items,"before",!0),activeEl&&Ext.fly(activeEl).focus()),animWrap.el.destroy(),me.animWraps[animWrap.record.internalId]=queue[id]=null}},callback:function(){parent.isExpandingOrCollapsing=!1,me.destroyed||me.refreshSize(!0),me.fireEvent("afteritemexpand",parent,index,node)}})}},onBeforeCollapse:function(parent,records,index,callback,scope){var animWrap,me=this;me.rendered&&me.all.getCount()&&(me.animate?parent.isVisible()&&((animWrap=me.getAnimWrap(parent))?animWrap.expanding&&animWrap.targetEl.select(this.itemSelector).destroy():animWrap=me.animWraps[parent.internalId]=me.createAnimWrap(parent,index),animWrap.expanding=!1,animWrap.collapsing=!0,animWrap.callback=callback,animWrap.scope=scope):(me.onCollapseCallback=callback,me.onCollapseScope=scope))},onCollapse:function(parent){var animateEl,me=this,queue=me.animQueue,id=parent.getId(),node=me.getNode(parent),index=node?me.indexOf(node):-1,animWrap=me.getAnimWrap(parent);if(me.all.getCount()&&parent.isVisible()){if(!animWrap)return parent.isExpandingOrCollapsing=!1,me.fireEvent("afteritemcollapse",parent,index,node),Ext.callback(me.onCollapseCallback,me.onCollapseScope),void(me.onCollapseCallback=me.onCollapseScope=null);animateEl=animWrap.animateEl,queue[id]=!0,animateEl.stopAnimation(),animateEl.animate({to:{height:0},duration:me.collapseDuration,listeners:{afteranimate:function(){animWrap.el.destroy(),me.animWraps[animWrap.record.internalId]=queue[id]=null}},callback:function(){parent.isExpandingOrCollapsing=!1,me.destroyed||me.refreshSize(!0),me.fireEvent("afteritemcollapse",parent,index,node),Ext.callback(animWrap.callback,animWrap.scope),animWrap.callback=animWrap.scope=null}})}},isAnimating:function(node){return!!this.animQueue[node.getId()]},expand:function(record,deep,callback,scope){var result,doAnimate=!!this.animate;if(!doAnimate||!record.isExpandingOrCollapsing)return record.isLeaf()||(record.isExpandingOrCollapsing=doAnimate),Ext.suspendLayouts(),result=record.expand(deep,callback,scope),Ext.resumeLayouts(!0),result},collapse:function(record,deep,callback,scope){var doAnimate=!!this.animate;if(!doAnimate||!record.isExpandingOrCollapsing)return record.isLeaf()||(record.isExpandingOrCollapsing=doAnimate),record.collapse(deep,callback,scope)},toggle:function(record,deep,callback,scope){record.isExpanded()?this.collapse(record,deep,callback,scope):this.expand(record,deep,callback,scope)},onItemDblClick:function(record,item,index,e){var editingPlugin=this.editingPlugin;this.callParent([record,item,index,e]),!this.toggleOnDblClick||!record.isExpandable()||editingPlugin&&2===editingPlugin.clicksToEdit||this.toggle(record)},onCellClick:function(cell,cellIndex,record,row,rowIndex,e){var checkedState,me=this,column=e.position.column;if(column.isTreeColumn)return e.getTarget(me.checkboxSelector,cell)&&Ext.isBoolean(checkedState=record.get("checked"))&&!1!==me.fireEvent("beforecheckchange",record,checkedState,e)?(me.onCheckChange(e),column.stopSelection&&(e.stopSelection=!0)):e.getTarget(me.expanderSelector,cell)&&record.isExpandable()&&(me.getNavigationModel().setPosition(e.position),me.toggle(record,e.ctrlKey),e.nodeToggled=!0),me.callParent([cell,cellIndex,record,row,rowIndex,e])},onCheckChange:function(e){var record=e.record,checked=!record.get("checked");record.set("checked",checked),this.fireEvent("checkchange",record,checked,e)},onItemMouseOver:function(record,item,index,e){e.getTarget(this.expanderSelector,item)&&e.getTarget(this.cellSelector,null,!0).addCls(this.expanderIconOverCls)},onItemMouseOut:function(record,item,index,e){e.getTarget(this.expanderSelector,item)&&e.getTarget(this.cellSelector,null,!0).removeCls(this.expanderIconOverCls)},getStoreListeners:function(){return Ext.apply(this.callParent(),{rootchange:this.onRootChange,fillcomplete:this.onFillComplete})},onBindStore:function(store,initial,propName,oldStore){var oldRoot=oldStore&&oldStore.getRootNode(),newRoot=store&&store.getRootNode();this.callParent([store,initial,propName,oldStore]),newRoot!==oldRoot&&this.onRootChange(newRoot,oldRoot)},onRootChange:function(newRoot,oldRoot){var me=this,grid=me.grid;oldRoot&&(me.rootListeners.destroy(),me.rootListeners=null),newRoot&&(me.rootListeners=newRoot.on({beforeexpand:me.onBeforeExpand,expand:me.onExpand,beforecollapse:me.onBeforeCollapse,collapse:me.onCollapse,destroyable:!0,scope:me}),grid.addRelayers(newRoot))},ensureSingleExpand:function(node){var parent=node.parentNode;parent&&parent.eachChild(function(child){child!==node&&child.isExpanded()&&child.collapse()})}}),Ext.define("Ext.tree.Panel",{extend:Ext.panel.Table,alias:"widget.treepanel",alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],viewType:"treeview",treeCls:Ext.baseCSSPrefix+"tree-panel",rowLines:!1,lines:!0,useArrows:!1,singleExpand:!1,ddConfig:{enableDrag:!0,enableDrop:!0},rootVisible:!0,displayField:"text",root:null,normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],isTree:!0,arrowCls:Ext.baseCSSPrefix+"tree-arrows",linesCls:Ext.baseCSSPrefix+"tree-lines",noLinesCls:Ext.baseCSSPrefix+"tree-no-lines",autoWidthCls:Ext.baseCSSPrefix+"autowidth-table",constructor:function(config){void 0===(config=config||{}).animate&&(config.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx),this.enableAnimations=config.animate,delete config.animate,this.callParent([config])},initComponent:function(){var store,view,me=this,cls=[me.treeCls];me.useArrows&&(cls.push(me.arrowCls),me.lines=!1),me.lines?cls.push(me.linesCls):me.useArrows||cls.push(me.noLinesCls),(store=me.applyStore(me.store)).getRoot()||store.setRoot({}),store.setRootVisible(me.rootVisible),me.viewConfig=Ext.apply({rootVisible:me.rootVisible,animate:me.enableAnimations,singleExpand:me.singleExpand,node:store.getRoot(),hideHeaders:me.hideHeaders,navigationModel:"tree"},me.viewConfig),me.columns||(void 0===me.initialConfig.hideHeaders&&(me.hideHeaders=!0),me.addCls(me.autoWidthCls),me.columns=[{xtype:"treecolumn",text:"Name",flex:1,dataIndex:me.displayField}]),me.cls&&cls.push(me.cls),me.cls=cls.join(" "),me.callParent(),view=me.getView(),me.relayEvents(view,["beforecheckchange","checkchange","afteritemexpand","afteritemcollapse"])},applyStore:function(store){var me=this;return Ext.isString(store)?store=me.store=Ext.StoreMgr.lookup(store):store&&store.isStore?me.root&&((store=me.store=Ext.data.StoreManager.lookup(store)).setRoot(me.root),void 0!==me.folderSort&&(store.folderSort=me.folderSort,store.sort())):(store=Ext.apply({type:"tree",proxy:"memory"},store),me.root&&(store.root=me.root),me.fields?store.fields=me.fields:me.model&&(store.model=me.model),me.folderSort&&(store.folderSort=me.folderSort),store=me.store=Ext.StoreMgr.lookup(store)),store},setStore:function(store){var me=this;(store=me.applyStore(store)).getRoot()||store.setRoot({}),store.setRootVisible(me.rootVisible),me.view&&me.view.setRootNode(store.getRootNode()),me.bindStore(store)},bindStore:function(store,initial){var me=this,root=store.getRoot(),bufferedRenderer=me.bufferedRenderer;me.callParent(arguments),bufferedRenderer&&bufferedRenderer.store&&bufferedRenderer.bindStore(store),store.singleExpand=me.singleExpand,me.storeListeners=me.mon(store,{destroyable:!0,rootchange:me.onRootChange,scope:me}),me.storeRelayers=me.relayEvents(store,["beforeload","load"]),me.rootVisible||store.autoLoad||root.isExpanded()||root.isLoading()||(root.isLoaded()?(root.data.expanded=!0,store.onNodeExpand(root,root.childNodes)):!1!==store.autoLoad&&(root.data.expanded=!1,root.expand())),store.ownerTree=me,initial||me.view.setRootNode(root)},addRelayers:function(newRoot){var me=this;me.rootRelayers&&(me.rootRelayers.destroy(),me.rootRelayers=null),me.rootRelayers=me.mon(newRoot,{destroyable:!0,append:me.createRelayer("itemappend"),remove:me.createRelayer("itemremove"),move:me.createRelayer("itemmove",[0,4]),insert:me.createRelayer("iteminsert"),beforeappend:me.createRelayer("beforeitemappend"),beforeremove:me.createRelayer("beforeitemremove"),beforemove:me.createRelayer("beforeitemmove"),beforeinsert:me.createRelayer("beforeiteminsert"),expand:me.createRelayer("itemexpand",[0,1]),collapse:me.createRelayer("itemcollapse",[0,1]),beforeexpand:me.createRelayer("beforeitemexpand",[0,1]),beforecollapse:me.createRelayer("beforeitemcollapse",[0,1]),scope:me})},unbindStore:function(){var me=this,store=me.store;store&&(me.callParent(),Ext.destroy(me.storeListeners,me.storeRelayers,me.rootRelayers),delete store.ownerTree,store.singleExpand=null)},setRootNode:function(){return this.store.setRoot.apply(this.store,arguments)},getRootNode:function(){return this.store.getRoot()},onRootChange:function(root){this.view.setRootNode(root)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(rec){return rec.get("checked")},expandNode:function(record,deep,callback,scope){return this.getView().expand(record,deep,callback,scope||this)},collapseNode:function(record,deep,callback,scope){return this.getView().collapse(record,deep,callback,scope||this)},expandAll:function(callback,scope){var root=this.getRootNode();root&&(Ext.suspendLayouts(),root.expand(!0,callback,scope||this),Ext.resumeLayouts(!0))},collapseAll:function(callback,scope){var root=this.getRootNode(),view=this.getView();root&&(Ext.suspendLayouts(),scope=scope||this,view.rootVisible?root.collapse(!0,callback,scope):root.collapseChildren(!0,callback,scope),Ext.resumeLayouts(!0))},expandPath:function(path,options){var select,doFocus,callback,scope,current,index,keys,rooted,expander,args=arguments,me=this,view=me.view,field=options&&options.field||me.store.model.idProperty,separator=options&&options.separator||"/";return options&&"object"==typeof options?(field=options.field||me.store.model.idProperty,separator=options.separator||"/",callback=options.callback,scope=options.scope,select=options.select,doFocus=options.focus):(field=args[1]||me.store.model.idProperty,separator=args[2]||"/",callback=args[3],scope=args[4]),Ext.isEmpty(path)?Ext.callback(callback,scope||me,[!1,null]):(rooted=!(keys=path.split(separator))[0],index=rooted?(current=me.getRootNode(),1):(current=me.store.findNode(field,keys[0]),0),!current||rooted&&current.get(field)!==keys[1]?Ext.callback(callback,scope||me,[!1,current]):(expander=function(newChildren){var len,i,value,node=this;if(++index===keys.length)return select&&view.getSelectionModel().select(node),doFocus&&view.getNavigationModel().setPosition(node,0),Ext.callback(callback,scope||me,[!0,node,view.getNode(node)]);for(i=0,len=newChildren?newChildren.length:0;i<len;i++)if(!(value=(node=newChildren[i]).get(field))&&0!==value||(value=value.toString()),value===keys[index])return node.expand(!1,expander);node=this,Ext.callback(callback,scope||me,[!1,node,view.getNode(node)])},void current.expand(!1,expander)))},ensureVisible:function(path,options){if(path.isEntity||"number"==typeof path)return this.callParent([path,options]);function onLastExpanded(success,lastExpanded,lastExpandedHtmlNode,targetNode){!targetNode&&success&&lastExpanded&&(targetNode=lastExpanded.findChild(field,last)),targetNode?me.doEnsureVisible(targetNode,options):Ext.callback(callback,scope||me,[!1,lastExpanded])}var callback,scope,keys,rooted,last,node,parentNode,me=this,field=options&&options.field||me.store.model.idProperty,separator=options&&options.separator||"/";options&&(callback=options.callback,scope=options.scope),rooted=!(keys=path.split(separator))[0],last=keys.pop(),!keys.length||rooted&&1===keys.length?(node=me.store.findNode(field,last))?((parentNode=node.parentNode)&&!parentNode.isExpanded()&&parentNode.expand(),onLastExpanded(!0,null,0,node)):Ext.callback(callback,scope||me,[!1,null]):me.expandPath(keys.join(separator),field,separator,onLastExpanded)},selectPath:function(path,field,separator,callback,scope){this.ensureVisible(path,{field:field,separator:separator,select:!0,callback:callback,scope:scope})}}),Ext.define("Ext.draw.ContainerBase",{extend:Ext.panel.Panel,previewTitleText:"Chart Preview",previewAltText:"Chart preview",layout:"container",addElementListener:function(){var me=this,args=arguments;me.rendered?me.el.on.apply(me.el,args):me.on("render",function(){me.el.on.apply(me.el,args)})},removeElementListener:function(){var args=arguments;this.rendered&&this.el.un.apply(this.el,args)},afterRender:function(){this.callParent(arguments),this.initAnimator()},getItems:function(){var items=this.items;return items&&items.isMixedCollection||this.initItems(),this.items},onRender:function(){this.callParent(arguments),this.element=this.el,this.innerElement=this.body},setItems:function(items){return this.items=items},setSurfaceSize:function(width,height){this.resizeHandler({width:width,height:height}),this.renderFrame()},onResize:function(width,height,oldWidth,oldHeight){this.callParent([width,height,oldWidth,oldHeight]),this.setBodySize({width:width,height:height})},preview:function(){var image=this.getImage();new Ext.window.Window({title:this.previewTitleText,closeable:!0,renderTo:Ext.getBody(),autoShow:!0,maximizeable:!0,maximized:!0,border:!0,layout:{type:"hbox",pack:"center",align:"middle"},items:{xtype:"container",items:{xtype:"image",mode:"img",cls:Ext.baseCSSPrefix+"chart-image",alt:this.previewAltText,src:image.data,listeners:{afterrender:function(){var size,me=this,img=me.imgEl.dom,ratio="svg"!==image.type&&window.devicePixelRatio||1;img.naturalWidth&&img.naturalHeight?(size=me.getSize(),me.setWidth(Math.floor(size.width/ratio)),me.setHeight(Math.floor(size.height/ratio))):img.onload=function(){var width=img.naturalWidth,height=img.naturalHeight;me.setWidth(Math.floor(width/ratio)),me.setHeight(Math.floor(height/ratio))}}}}}})},privates:{getTargetEl:function(){return this.innerElement},reattachToBody:function(){this.pendingDetachSize&&this.onBodyResize(),this.pendingDetachSize=!1,this.callParent()}}}),Ext.define("Ext.draw.SurfaceBase",{extend:Ext.Widget,getOwnerBody:function(){return this.ownerCt.body},destroy:function(){this.hasListeners.destroy&&this.fireEvent("destroy",this),this.callParent()}}),Ext.define("Ext.draw.Color",{statics:{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbToHexRe:/\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbaToHexRe:/\s*rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\.\d]+)\)/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,NONE:"none",RGBA_NONE:"rgba(0, 0, 0, 0)"},isColor:!0,lightnessFactor:.2,constructor:function(red,green,blue,alpha){this.setRGB(red,green,blue,alpha)},setRGB:function(red,green,blue,alpha){var me=this;me.r=Math.min(255,Math.max(0,red)),me.g=Math.min(255,Math.max(0,green)),me.b=Math.min(255,Math.max(0,blue)),me.a=void 0===alpha?1:Math.min(1,Math.max(0,alpha))},getGrayscale:function(){return.3*this.r+.59*this.g+.11*this.b},getHSL:function(){var h,r=this.r/255,g=this.g/255,b=this.b/255,max=Math.max(r,g,b),min=Math.min(r,g,b),delta=max-min,s=0,l=.5*(max+min);return min!==max&&(s=l<=.5?delta/(max+min):delta/(2-max-min),(h=r===max?60*(g-b)/delta:g===max?120+60*(b-r)/delta:240+60*(r-g)/delta)<0&&(h+=360),360<=h&&(h-=360)),[h,s,l]},getHSV:function(){var h,r=this.r/255,g=this.g/255,b=this.b/255,max=Math.max(r,g,b),min=Math.min(r,g,b),C=max-min,s=0;return min!=max&&(s=max?C/max:0,(h=r===max?60*(g-b)/C:g===max?60*(b-r)/C+120:60*(r-g)/C+240)<0&&(h+=360),360<=h&&(h-=360)),[h,s,max]},setHSL:function(h,s,l){var c,x,m,me=this,abs=Math.abs;if(h=(h%360+360)%360,l=1<l?1:l<0?0:l,0===(s=1<s?1:s<0?0:s)||null===h)l*=255,me.setRGB(l,l,l);else switch(h/=60,x=(c=s*(1-abs(2*l-1)))*(1-abs(h%2-1)),m=l-c/2,m*=255,c*=255,x*=255,Math.floor(h)){case 0:me.setRGB(c+m,x+m,m);break;case 1:me.setRGB(x+m,c+m,m);break;case 2:me.setRGB(m,c+m,x+m);break;case 3:me.setRGB(m,x+m,c+m);break;case 4:me.setRGB(x+m,m,c+m);break;case 5:me.setRGB(c+m,m,x+m)}return me},setHSV:function(h,s,v){var c,x,m,me=this;if(h=(h%360+360)%360,v=1<v?1:v<0?0:v,0===(s=1<s?1:s<0?0:s)||null===h)v*=255,me.setRGB(v,v,v);else switch(h/=60,x=(c=v*s)*(1-Math.abs(h%2-1)),m=v-c,m*=255,c*=255,x*=255,Math.floor(h)){case 0:me.setRGB(c+m,x+m,m);break;case 1:me.setRGB(x+m,c+m,m);break;case 2:me.setRGB(m,c+m,x+m);break;case 3:me.setRGB(m,x+m,c+m);break;case 4:me.setRGB(x+m,m,c+m);break;case 5:me.setRGB(c+m,m,x+m)}return me},createLighter:function(factor){factor||0===factor||(factor=this.lightnessFactor);var hsl=this.getHSL();return hsl[2]=Ext.Number.constrain(hsl[2]+factor,0,1),Ext.draw.Color.fromHSL(hsl[0],hsl[1],hsl[2])},createDarker:function(factor){return factor||0===factor||(factor=this.lightnessFactor),this.createLighter(-factor)},toString:function(){var me=this,round=Math.round;if(1!==me.a)return"rgba("+[round(me.r),round(me.g),round(me.b),0===me.a?0:me.a.toFixed(15)].join(", ")+")";var r=round(me.r).toString(16),g=round(me.g).toString(16),b=round(me.b).toString(16);return["#",r=1===r.length?"0"+r:r,g=1===g.length?"0"+g:g,b=1===b.length?"0"+b:b].join("")},toHex:function(color){if(Ext.isArray(color)&&(color=color[0]),!Ext.isString(color))return"";if("#"===color.substr(0,1))return color;var digits=Ext.draw.Color.colorToHexRe.exec(color);if(Ext.isArray(digits)){var red=parseInt(digits[2],10),green=parseInt(digits[3],10),rgb=parseInt(digits[4],10)|green<<8|red<<16;return digits[1]+"#"+("000000"+rgb.toString(16)).slice(-6)}return""},setFromString:function(str){var values,r,g,b,a=1,parse=parseInt;if(str===Ext.draw.Color.NONE)return this.r=this.g=this.b=this.a=0,this;if(4!==str.length&&7!==str.length||"#"!==str.substr(0,1)){if(values=str.match(Ext.draw.Color.rgbToHexRe))r=+values[1],g=+values[2],b=+values[3];else if(values=str.match(Ext.draw.Color.rgbaToHexRe))r=+values[1],g=+values[2],b=+values[3],a=+values[4];else if(Ext.draw.Color.ColorList.hasOwnProperty(str.toLowerCase()))return this.setFromString(Ext.draw.Color.ColorList[str.toLowerCase()])}else(values=str.match(Ext.draw.Color.hexRe))&&(r=parse(values[1],16)>>0,g=parse(values[2],16)>>0,b=parse(values[3],16)>>0,4===str.length&&(r+=16*r,g+=16*g,b+=16*b));return void 0===r||(this.r=r,this.g=g,this.b=b,this.a=a),this}},function(){var flyColor=new this;this.addStatics({fly:function(r,g,b,a){switch(arguments.length){case 1:flyColor.setFromString(r);break;case 3:case 4:flyColor.setRGB(r,g,b,a);break;default:return null}return flyColor},ColorList:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},fromHSL:function(h,s,l){return new this(0,0,0,0).setHSL(h,s,l)},fromHSV:function(h,s,v){return new this(0,0,0,0).setHSL(h,s,v)},fromString:function(string){return new this(0,0,0,0).setFromString(string)},create:function(arg){return arg instanceof this?arg:Ext.isArray(arg)?new Ext.draw.Color(arg[0],arg[1],arg[2],arg[3]):Ext.isString(arg)?Ext.draw.Color.fromString(arg):2<arguments.length?new Ext.draw.Color(arg,arguments[1],arguments[2],arguments[3]):new Ext.draw.Color(0,0,0,0)}})}),Ext.define("Ext.draw.sprite.AnimationParser",function(){function compute(from,to,delta){return from+(to-from)*delta}return{singleton:!0,attributeRe:/^url\(#([a-zA-Z\-]+)\)$/,color:{parseInitial:function(color1,color2){return Ext.isString(color1)&&(color1=Ext.draw.Color.create(color1)),Ext.isString(color2)&&(color2=Ext.draw.Color.create(color2)),color1 instanceof Ext.draw.Color&&color2 instanceof Ext.draw.Color?[[color1.r,color1.g,color1.b,color1.a],[color2.r,color2.g,color2.b,color2.a]]:[color1||color2,color2||color1]},compute:function(from,to,delta){return Ext.isArray(from)&&Ext.isArray(to)?[compute(from[0],to[0],delta),compute(from[1],to[1],delta),compute(from[2],to[2],delta),compute(from[3],to[3],delta)]:to||from},serve:function(array){return Ext.draw.Color.fly(array[0],array[1],array[2],array[3]).toString()}},number:{parse:function(n){return null===n?null:+n},compute:function(from,to,delta){return Ext.isNumber(from)&&Ext.isNumber(to)?compute(from,to,delta):to||from}},angle:{parseInitial:function(from,to){return to-from>Math.PI?to-=2*Math.PI:to-from<-Math.PI&&(to+=2*Math.PI),[from,to]},compute:function(from,to,delta){return Ext.isNumber(from)&&Ext.isNumber(to)?compute(from,to,delta):to||from}},path:{parseInitial:function(from,to){var i,j,fromStripe,toStripe,length,fromStripes=from.toStripes(),toStripes=to.toStripes(),fromLength=fromStripes.length,toLength=toStripes.length,lastStripe=toStripes[toLength-1],endPoint=[lastStripe[lastStripe.length-2],lastStripe[lastStripe.length-1]];for(i=fromLength;i<toLength;i++)fromStripes.push(fromStripes[fromLength-1].slice(0));for(i=toLength;i<fromLength;i++)toStripes.push(endPoint.slice(0));for(length=fromStripes.length,toStripes.path=to,toStripes.temp=new Ext.draw.Path,i=0;i<length;i++){for(fromStripe=fromStripes[i],toStripe=toStripes[i],fromLength=fromStripe.length,toLength=toStripe.length,toStripes.temp.commands.push("M"),j=toLength;j<fromLength;j+=6)toStripe.push(endPoint[0],endPoint[1],endPoint[0],endPoint[1],endPoint[0],endPoint[1]);for(endPoint=[(lastStripe=toStripes[toStripes.length-1])[lastStripe.length-2],lastStripe[lastStripe.length-1]],j=fromLength;j<toLength;j+=6)fromStripe.push(endPoint[0],endPoint[1],endPoint[0],endPoint[1],endPoint[0],endPoint[1]);for(i=0;i<toStripe.length;i++)toStripe[i]-=fromStripe[i];for(i=2;i<toStripe.length;i+=6)toStripes.temp.commands.push("C")}return[fromStripes,toStripes]},compute:function(fromStripes,toStripes,delta){if(1<=delta)return toStripes.path;for(var ln2,from,to,i=0,ln=fromStripes.length,j=0,temp=toStripes.temp.params,pos=0;i<ln;i++)for(from=fromStripes[i],to=toStripes[i],ln2=from.length,j=0;j<ln2;j++)temp[pos++]=to[j]*delta+from[j];return toStripes.temp}},data:{compute:function(from,to,delta,target){var f,t,i,lf=from.length-1,lt=to.length-1,len=Math.max(lf,lt);for(target&&target!==from||(target=[]),target.length=len+1,i=0;i<=len;i++)f=from[Math.min(i,lf)],t=to[Math.min(i,lt)],Ext.isNumber(f)?(Ext.isNumber(t)||(t=0),target[i]=(t-f)*delta+f):target[i]=t;return target}},text:{compute:function(from,to,delta){return from.substr(0,Math.round(from.length*(1-delta)))+to.substr(Math.round(to.length*(1-delta)))}},limited:"number",limited01:"number"}}),function(){if(!Ext.global.Float32Array){function Float32Array(array){if("number"==typeof array)this.length=array;else if("length"in array){this.length=array.length;for(var i=0,len=array.length;i<len;i++)this[i]=+array[i]}}Float32Array.prototype=[],Ext.global.Float32Array=Float32Array}}(),Ext.define("Ext.draw.Draw",{singleton:!0,radian:Math.PI/180,pi2:2*Math.PI,reflectFn:function(a){return a},rad:function(degrees){return degrees%360*this.radian},degrees:function(radian){return radian/this.radian%360},isBBoxIntersect:function(bbox1,bbox2,padding){return padding=padding||0,Math.max(bbox1.x,bbox2.x)-padding>Math.min(bbox1.x+bbox1.width,bbox2.x+bbox2.width)||Math.max(bbox1.y,bbox2.y)-padding>Math.min(bbox1.y+bbox1.height,bbox2.y+bbox2.height)},isPointInBBox:function(x,y,bbox){return!!bbox&&x>=bbox.x&&x<=bbox.x+bbox.width&&y>=bbox.y&&y<=bbox.y+bbox.height},spline:function(points){var i,j,nd,d,y,ny,ln=points.length,r=0,zs=new Float32Array(points.length),result=new Float32Array(3*points.length-2);for(zs[0]=0,zs[ln-1]=0,i=1;i<ln-1;i++)zs[i]=points[i+1]+points[i-1]-2*points[i]-zs[i-1],r=1/(4-r),zs[i]*=r;for(i=ln-2;0<i;i--)r=3.732050807568877+48.248711305964385/(-13.928203230275537+Math.pow(.07179676972449123,i)),zs[i]-=zs[i+1]*r;for(nd=(ny=points[0])-zs[0],j=i=0;i<ln-1;j+=3)y=ny,d=nd,nd=(ny=points[++i])-zs[i],result[j]=y,result[j+1]=(nd+2*d)/3,result[j+2]=(2*nd+d)/3;return result[j]=ny,result},getAnchors:function(prevX,prevY,curX,curY,nextX,nextY,value){value=value||4;var control1Length,control2Length,control1Angle,control2Angle,control1X,control1Y,control2X,control2Y,alpha,PI=Math.PI,halfPI=PI/2,abs=Math.abs,sin=Math.sin,cos=Math.cos,atan=Math.atan;return control1Length=(curX-prevX)/value,control2Length=(nextX-curX)/value,prevY<=curY&&nextY<=curY||curY<=prevY&&curY<=nextY?control1Angle=control2Angle=halfPI:(control1Angle=atan((curX-prevX)/abs(curY-prevY)),prevY<curY&&(control1Angle=PI-control1Angle),control2Angle=atan((nextX-curX)/abs(curY-nextY)),nextY<curY&&(control2Angle=PI-control2Angle)),halfPI<(alpha=halfPI-(control1Angle+control2Angle)%(2*PI)/2)&&(alpha-=PI),control2Angle+=alpha,control1X=curX-control1Length*sin(control1Angle+=alpha),control1Y=curY+control1Length*cos(control1Angle),control2X=curX+control2Length*sin(control2Angle),control2Y=curY+control2Length*cos(control2Angle),(prevY<curY&&control1Y<prevY||curY<prevY&&prevY<control1Y)&&(control1X+=abs(prevY-control1Y)*(control1X-curX)/(control1Y-curY),control1Y=prevY),(nextY<curY&&control2Y<nextY||curY<nextY&&nextY<control2Y)&&(control2X-=abs(nextY-control2Y)*(control2X-curX)/(control2Y-curY),control2Y=nextY),{x1:control1X,y1:control1Y,x2:control2X,y2:control2Y}},smooth:function(dataX,dataY,value){var prevX,prevY,curX,curY,nextX,nextY,x,y,i,anchors,ln=dataX.length,smoothX=[],smoothY=[];for(i=0;i<ln-1&&(prevX=dataX[i],prevY=dataY[i],0!==i||(x=prevX,y=prevY,smoothX.push(x),smoothY.push(y),1!==ln));i++){if(curX=dataX[i+1],curY=dataY[i+1],nextX=dataX[i+2],nextY=dataY[i+2],!Ext.isNumber(nextX+nextY)){smoothX.push(x,curX,curX),smoothY.push(y,curY,curY);break}anchors=this.getAnchors(prevX,prevY,curX,curY,nextX,nextY,value),smoothX.push(x,anchors.x1,curX),smoothY.push(y,anchors.y1,curY),x=anchors.x2,y=anchors.y2}return{smoothX:smoothX,smoothY:smoothY}},beginUpdateIOS:Ext.os.is.iOS?function(){this.iosUpdateEl=Ext.getBody().createChild({style:"position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; background: rgba(0,0,0,0.001); z-index: 100000"})}:Ext.emptyFn,endUpdateIOS:function(){this.iosUpdateEl=Ext.destroy(this.iosUpdateEl)}}),Ext.define("Ext.draw.gradient.Gradient",{isGradient:!0,config:{stops:[]},applyStops:function(newStops){var i,stop,color,stops=[],ln=newStops.length;for(i=0;i<ln;i++)(color=(stop=newStops[i]).color)&&color.isColor||(color=Ext.draw.Color.fly(color||Ext.draw.Color.NONE)),stops.push({offset:Math.min(1,Math.max(0,"offset"in stop?stop.offset:stop.position||0)),color:color.toString()});return stops.sort(function(a,b){return a.offset-b.offset}),stops},onClassExtended:function(subClass,member){!member.alias&&member.type&&(member.alias="gradient."+member.type)},constructor:function(config){this.initConfig(config)},generateGradient:Ext.emptyFn}),Ext.define("Ext.draw.gradient.GradientDefinition",{singleton:!0,urlStringRe:/^url\(#([\w\-]+)\)$/,gradients:{},add:function(gradients){var i,n,gradient,store=this.gradients;for(i=0,n=gradients.length;i<n;i++)gradient=gradients[i],Ext.isString(gradient.id)&&(store[gradient.id]=gradient)},get:function(str){var gradient,store=this.gradients,match=str.match(this.urlStringRe);return match&&match[1]&&(gradient=store[match[1]])&&gradient||str}}),Ext.define("Ext.draw.sprite.AttributeParser",{singleton:!0,attributeRe:/^url\(#([a-zA-Z\-]+)\)$/,default:Ext.identityFn,string:function(n){return String(n)},number:function(n){if(Ext.isNumber(+n))return n},angle:function(n){if(Ext.isNumber(n))return(n%=2*Math.PI)<-Math.PI?n+=2*Math.PI:n>=Math.PI&&(n-=2*Math.PI),n},data:function(n){return Ext.isArray(n)?n.slice():n instanceof Float32Array?new Float32Array(n):void 0},bool:function(n){return!!n},color:function(n){if(n instanceof Ext.draw.Color)return n.toString();if(n instanceof Ext.draw.gradient.Gradient)return n;if(!n)return Ext.draw.Color.NONE;if(Ext.isString(n)){if("url"!==n.substr(0,3))return Ext.draw.Color.fly(n).toString();if(n=Ext.draw.gradient.GradientDefinition.get(n),Ext.isString(n))return n}return"linear"===n.type?Ext.create("Ext.draw.gradient.Linear",n):"radial"===n.type?Ext.create("Ext.draw.gradient.Radial",n):"pattern"===n.type?Ext.create("Ext.draw.gradient.Pattern",n):Ext.draw.Color.NONE},limited:function(low,hi){return function(n){return n=+n,Ext.isNumber(n)?Math.min(Math.max(n,low),hi):void 0}},limited01:function(n){return n=+n,Ext.isNumber(n)?Math.min(Math.max(n,0),1):void 0},enums:function(){var i,ln,enums={},args=Array.prototype.slice.call(arguments,0);for(i=0,ln=args.length;i<ln;i++)enums[args[i]]=!0;return function(n){return n in enums?n:void 0}}}),Ext.define("Ext.draw.sprite.AttributeDefinition",{config:{defaults:{$value:{},lazy:!0},aliases:{},animationProcessors:{},processors:{$value:{},lazy:!0},dirtyTriggers:{},triggers:{},updaters:{}},inheritableStatics:{processorFactoryRe:/^(\w+)\(([\w\-,]*)\)$/},spriteClass:null,constructor:function(config){this.initConfig(config)},applyDefaults:function(defaults,oldDefaults){return oldDefaults=Ext.apply(oldDefaults||{},this.normalize(defaults))},applyAliases:function(aliases,oldAliases){return Ext.apply(oldAliases||{},aliases)},applyProcessors:function(processors,oldProcessors){this.getAnimationProcessors();var anyAnimationProcessors,name,match,fn,result=oldProcessors||{},defaultProcessor=Ext.draw.sprite.AttributeParser,processorFactoryRe=this.self.processorFactoryRe,animationProcessors={};for(name in processors)"string"==typeof(fn=processors[name])&&((match=fn.match(processorFactoryRe))?fn=defaultProcessor[match[1]].apply(defaultProcessor,match[2].split(",")):defaultProcessor[fn]&&(anyAnimationProcessors=!0,fn=defaultProcessor[animationProcessors[name]=fn])),result[name]=fn;return anyAnimationProcessors&&this.setAnimationProcessors(animationProcessors),result},applyAnimationProcessors:function(animationProcessors,oldAnimationProcessors){var name,item,parser=Ext.draw.sprite.AnimationParser;for(name in oldAnimationProcessors=oldAnimationProcessors||{},animationProcessors)if("none"===(item=animationProcessors[name]))oldAnimationProcessors[name]=null;else if(!Ext.isString(item)||name in oldAnimationProcessors)Ext.isObject(item)&&(oldAnimationProcessors[name]=item);else if(item in parser){for(;Ext.isString(parser[item]);)item=parser[item];oldAnimationProcessors[name]=parser[item]}return oldAnimationProcessors},updateDirtyTriggers:function(dirtyTriggers){this.setTriggers(dirtyTriggers)},applyTriggers:function(triggers,oldTriggers){for(var name in oldTriggers=oldTriggers||{},triggers)oldTriggers[name]=triggers[name].split(",");return oldTriggers},applyUpdaters:function(updaters,oldUpdaters){return Ext.apply(oldUpdaters||{},updaters)},batchedNormalize:function(batchedChanges,keepUnrecognized){if(!batchedChanges)return{};var i,ln,name,val,rotation,scaling,matrix,subVal,split,processors=this.getProcessors(),aliases=this.getAliases(),translation=batchedChanges.translation||batchedChanges.translate,normalized={};for(name in rotation="rotation"in batchedChanges?batchedChanges.rotation:"rotate"in batchedChanges?batchedChanges.rotate:void 0,void 0!==(scaling="scaling"in batchedChanges?batchedChanges.scaling:"scale"in batchedChanges?batchedChanges.scale:void 0)&&(Ext.isNumber(scaling)?(normalized.scalingX=scaling,normalized.scalingY=scaling):("x"in scaling&&(normalized.scalingX=scaling.x),"y"in scaling&&(normalized.scalingY=scaling.y),"centerX"in scaling&&(normalized.scalingCenterX=scaling.centerX),"centerY"in scaling&&(normalized.scalingCenterY=scaling.centerY))),void 0!==rotation&&(Ext.isNumber(rotation)?(rotation=Ext.draw.Draw.rad(rotation),normalized.rotationRads=rotation):("rads"in rotation?normalized.rotationRads=rotation.rads:"degrees"in rotation&&(Ext.isArray(rotation.degrees)?normalized.rotationRads=Ext.Array.map(rotation.degrees,function(deg){return Ext.draw.Draw.rad(deg)}):normalized.rotationRads=Ext.draw.Draw.rad(rotation.degrees)),"centerX"in rotation&&(normalized.rotationCenterX=rotation.centerX),"centerY"in rotation&&(normalized.rotationCenterY=rotation.centerY))),void 0!==translation&&("x"in translation&&(normalized.translationX=translation.x),"y"in translation&&(normalized.translationY=translation.y)),"matrix"in batchedChanges&&(split=(matrix=Ext.draw.Matrix.create(batchedChanges.matrix)).split(),normalized.matrix=matrix,normalized.rotationRads=split.rotation,normalized.rotationCenterX=0,normalized.rotationCenterY=0,normalized.scalingX=split.scaleX,normalized.scalingY=split.scaleY,normalized.scalingCenterX=0,normalized.scalingCenterY=0,normalized.translationX=split.translateX,normalized.translationY=split.translateY),batchedChanges)if(void 0!==(val=batchedChanges[name]))if(Ext.isArray(val))if(name in aliases&&(name=aliases[name]),name in processors)for(normalized[name]=[],i=0,ln=val.length;i<ln;i++)void 0!==(subVal=processors[name].call(this,val[i]))&&(normalized[name][i]=subVal);else keepUnrecognized&&(normalized[name]=val);else name in aliases&&(name=aliases[name]),name in processors?void 0!==(val=processors[name].call(this,val))&&(normalized[name]=val):keepUnrecognized&&(normalized[name]=val);return normalized},normalize:function(changes,keepUnrecognized){if(!changes)return{};var name,val,rotation,scaling,matrix,split,processors=this.getProcessors(),aliases=this.getAliases(),translation=changes.translation||changes.translate,normalized={};for(name in rotation="rotation"in changes?changes.rotation:"rotate"in changes?changes.rotate:void 0,scaling="scaling"in changes?changes.scaling:"scale"in changes?changes.scale:void 0,translation&&("x"in translation&&(normalized.translationX=translation.x),"y"in translation&&(normalized.translationY=translation.y)),void 0!==scaling&&(Ext.isNumber(scaling)?(normalized.scalingX=scaling,normalized.scalingY=scaling):("x"in scaling&&(normalized.scalingX=scaling.x),"y"in scaling&&(normalized.scalingY=scaling.y),"centerX"in scaling&&(normalized.scalingCenterX=scaling.centerX),"centerY"in scaling&&(normalized.scalingCenterY=scaling.centerY))),void 0!==rotation&&(Ext.isNumber(rotation)?(rotation=Ext.draw.Draw.rad(rotation),normalized.rotationRads=rotation):("rads"in rotation?normalized.rotationRads=rotation.rads:"degrees"in rotation&&(normalized.rotationRads=Ext.draw.Draw.rad(rotation.degrees)),"centerX"in rotation&&(normalized.rotationCenterX=rotation.centerX),"centerY"in rotation&&(normalized.rotationCenterY=rotation.centerY))),"matrix"in changes&&(split=(matrix=Ext.draw.Matrix.create(changes.matrix)).split(),normalized.matrix=matrix,normalized.rotationRads=split.rotation,normalized.rotationCenterX=0,normalized.rotationCenterY=0,normalized.scalingX=split.scaleX,normalized.scalingY=split.scaleY,normalized.scalingCenterX=0,normalized.scalingCenterY=0,normalized.translationX=split.translateX,normalized.translationY=split.translateY),changes)void 0!==(val=changes[name])&&(name in aliases&&(name=aliases[name]),name in processors?void 0!==(val=processors[name].call(this,val))&&(normalized[name]=val):keepUnrecognized&&(normalized[name]=val));return normalized},setBypassingNormalization:function(attr,modifierStack,changes){return modifierStack.pushDown(attr,changes)},set:function(attr,modifierStack,changes){return changes=this.normalize(changes),this.setBypassingNormalization(attr,modifierStack,changes)}}),Ext.define("Ext.draw.Matrix",{isMatrix:!0,statics:{createAffineMatrixFromTwoPair:function(x0,y0,x1,y1,x0p,y0p,x1p,y1p){var dx=x1-x0,dy=y1-y0,dxp=x1p-x0p,dyp=y1p-y0p,r=1/(dx*dx+dy*dy),a=dx*dxp+dy*dyp,b=dxp*dy-dx*dyp;return new this(a*r,-b*r,b*r,a*r,(-a*x0-b*y0)*r+x0p,(b*x0-a*y0)*r+y0p)},createPanZoomFromTwoPair:function(x0,y0,x1,y1,x0p,y0p,x1p,y1p){if(2===arguments.length)return this.createPanZoomFromTwoPair.apply(this,x0.concat(y0));var dx=x1-x0,dy=y1-y0,cx=.5*(x0+x1),cy=.5*(y0+y1),dxp=x1p-x0p,dyp=y1p-y0p,cxp=.5*(x0p+x1p),cyp=.5*(y0p+y1p),r=dx*dx+dy*dy,rp=dxp*dxp+dyp*dyp,scale=Math.sqrt(rp/r);return new this(scale,0,0,scale,cxp-scale*cx,cyp-scale*cy)},fly:function(){function simplefly(elements){return flyMatrix.elements=elements,flyMatrix}var flyMatrix=null;return function(elements){return(flyMatrix=flyMatrix||new Ext.draw.Matrix).elements=elements,Ext.draw.Matrix.fly=simplefly,flyMatrix}}(),create:function(mat){return mat instanceof this?mat:new this(mat)}},constructor:function(xx,xy,yx,yy,dx,dy){xx&&6===xx.length?this.elements=xx.slice():this.elements=void 0!==xx?[xx,xy,yx,yy,dx,dy]:[1,0,0,1,0,0]},prepend:function(xx,xy,yx,yy,dx,dy){var elements=this.elements,xx0=elements[0],xy0=elements[1],yx0=elements[2],yy0=elements[3],dx0=elements[4],dy0=elements[5];return elements[0]=xx*xx0+yx*xy0,elements[1]=xy*xx0+yy*xy0,elements[2]=xx*yx0+yx*yy0,elements[3]=xy*yx0+yy*yy0,elements[4]=xx*dx0+yx*dy0+dx,elements[5]=xy*dx0+yy*dy0+dy,this},prependMatrix:function(matrix){return this.prepend.apply(this,matrix.elements)},append:function(xx,xy,yx,yy,dx,dy){var elements=this.elements,xx0=elements[0],xy0=elements[1],yx0=elements[2],yy0=elements[3],dx0=elements[4],dy0=elements[5];return elements[0]=xx*xx0+xy*yx0,elements[1]=xx*xy0+xy*yy0,elements[2]=yx*xx0+yy*yx0,elements[3]=yx*xy0+yy*yy0,elements[4]=dx*xx0+dy*yx0+dx0,elements[5]=dx*xy0+dy*yy0+dy0,this},appendMatrix:function(matrix){return this.append.apply(this,matrix.elements)},set:function(xx,xy,yx,yy,dx,dy){var elements=this.elements;return elements[0]=xx,elements[1]=xy,elements[2]=yx,elements[3]=yy,elements[4]=dx,elements[5]=dy,this},inverse:function(target){var elements=this.elements,a=elements[0],b=elements[1],c=elements[2],d=elements[3],e=elements[4],f=elements[5],rDim=1/(a*d-b*c);return a*=rDim,b*=rDim,c*=rDim,d*=rDim,target?(target.set(d,-b,-c,a,c*f-d*e,b*e-a*f),target):new Ext.draw.Matrix(d,-b,-c,a,c*f-d*e,b*e-a*f)},translate:function(x,y,prepend){return prepend?this.prepend(1,0,0,1,x,y):this.append(1,0,0,1,x,y)},scale:function(sx,sy,scx,scy,prepend){return null==sy&&(sy=sx),void 0===scx&&(scx=0),void 0===scy&&(scy=0),prepend?this.prepend(sx,0,0,sy,scx-scx*sx,scy-scy*sy):this.append(sx,0,0,sy,scx-scx*sx,scy-scy*sy)},rotate:function(angle,rcx,rcy,prepend){var cos=Math.cos(angle),sin=Math.sin(angle);return rcx=rcx||0,rcy=rcy||0,prepend?this.prepend(cos,sin,-sin,cos,rcx-cos*rcx+rcy*sin,rcy-cos*rcy-rcx*sin):this.append(cos,sin,-sin,cos,rcx-cos*rcx+rcy*sin,rcy-cos*rcy-rcx*sin)},rotateFromVector:function(x,y,prepend){var d=Math.sqrt(x*x+y*y),cos=x/d,sin=y/d;return prepend?this.prepend(cos,sin,-sin,cos,0,0):this.append(cos,sin,-sin,cos,0,0)},clone:function(){return new Ext.draw.Matrix(this.elements)},flipX:function(){return this.append(-1,0,0,1,0,0)},flipY:function(){return this.append(1,0,0,-1,0,0)},skewX:function(angle){return this.append(1,0,Math.tan(angle),1,0,0)},skewY:function(angle){return this.append(1,Math.tan(angle),0,1,0,0)},shearX:function(factor){return this.append(1,0,factor,1,0,0)},shearY:function(factor){return this.append(1,factor,0,1,0,0)},reset:function(){return this.set(1,0,0,1,0,0)},precisionCompensate:function(devicePixelRatio,comp){var elements=this.elements,x2x=elements[0],x2y=elements[1],y2x=elements[2],y2y=elements[3],newDx=elements[4],newDy=elements[5],r=x2y*y2x-x2x*y2y;comp.b=devicePixelRatio*x2y/x2x,comp.c=devicePixelRatio*y2x/y2y,comp.d=devicePixelRatio,comp.xx=x2x/devicePixelRatio,comp.yy=y2y/devicePixelRatio,comp.dx=(newDy*x2x*y2x-newDx*x2x*y2y)/r/devicePixelRatio,comp.dy=(newDx*x2y*y2y-newDy*x2x*y2y)/r/devicePixelRatio},precisionCompensateRect:function(devicePixelRatio,comp){var elements=this.elements,x2x=elements[0],x2y=elements[1],y2x=elements[2],y2y=elements[3],newDx=elements[4],newDy=elements[5],yxOnXx=y2x/x2x;comp.b=devicePixelRatio*x2y/x2x,comp.c=devicePixelRatio*yxOnXx,comp.d=devicePixelRatio*y2y/x2x,comp.xx=x2x/devicePixelRatio,comp.yy=x2x/devicePixelRatio,comp.dx=(newDy*y2x-newDx*y2y)/(x2y*yxOnXx-y2y)/devicePixelRatio,comp.dy=-(newDy*x2x-newDx*x2y)/(x2y*yxOnXx-y2y)/devicePixelRatio},x:function(x,y){var elements=this.elements;return x*elements[0]+y*elements[2]+elements[4]},y:function(x,y){var elements=this.elements;return x*elements[1]+y*elements[3]+elements[5]},get:function(i,j){return+this.elements[i+2*j].toFixed(4)},transformPoint:function(point){var x,y,elements=this.elements;return y=point.isPoint?(x=point.x,point.y):(x=point[0],point[1]),[x*elements[0]+y*elements[2]+elements[4],x*elements[1]+y*elements[3]+elements[5]]},transformBBox:function(bbox,radius,target){var w,h,scales,elements=this.elements,l=bbox.x,t=bbox.y,w0=.5*bbox.width,h0=.5*bbox.height,xx=elements[0],xy=elements[1],yx=elements[2],yy=elements[3],cx=l+w0,cy=t+h0;return h=radius?(w0-=radius,h0-=radius,scales=[Math.sqrt(elements[0]*elements[0]+elements[2]*elements[2]),Math.sqrt(elements[1]*elements[1]+elements[3]*elements[3])],w=Math.abs(w0*xx)+Math.abs(h0*yx)+Math.abs(scales[0]*radius),Math.abs(w0*xy)+Math.abs(h0*yy)+Math.abs(scales[1]*radius)):(w=Math.abs(w0*xx)+Math.abs(h0*yx),Math.abs(w0*xy)+Math.abs(h0*yy)),(target=target||{}).x=cx*xx+cy*yx+elements[4]-w,target.y=cx*xy+cy*yy+elements[5]-h,target.width=w+w,target.height=h+h,target},transformList:function(list){var p,i,elements=this.elements,xx=elements[0],yx=elements[2],dx=elements[4],xy=elements[1],yy=elements[3],dy=elements[5],ln=list.length;for(i=0;i<ln;i++)p=list[i],list[i]=[p[0]*xx+p[1]*yx+dx,p[0]*xy+p[1]*yy+dy];return list},isIdentity:function(){var elements=this.elements;return 1===elements[0]&&0===elements[1]&&0===elements[2]&&1===elements[3]&&0===elements[4]&&0===elements[5]},isEqual:function(matrix){var elements=matrix&&matrix.isMatrix?matrix.elements:matrix,myElements=this.elements;return myElements[0]===elements[0]&&myElements[1]===elements[1]&&myElements[2]===elements[2]&&myElements[3]===elements[3]&&myElements[4]===elements[4]&&myElements[5]===elements[5]},equals:function(matrix){return this.isEqual(matrix)},toArray:function(){var elements=this.elements;return[elements[0],elements[2],elements[4],elements[1],elements[3],elements[5]]},toVerticalArray:function(){return this.elements.slice()},toString:function(){var me=this;return[me.get(0,0),me.get(0,1),me.get(1,0),me.get(1,1),me.get(2,0),me.get(2,1)].join(",")},toContext:function(ctx){return ctx.transform.apply(ctx,this.elements),this},toSvg:function(){var elements=this.elements;return"matrix("+elements[0].toFixed(9)+","+elements[1].toFixed(9)+","+elements[2].toFixed(9)+","+elements[3].toFixed(9)+","+elements[4].toFixed(9)+","+elements[5].toFixed(9)+")"},getScaleX:function(){var elements=this.elements;return Math.sqrt(elements[0]*elements[0]+elements[2]*elements[2])},getScaleY:function(){var elements=this.elements;return Math.sqrt(elements[1]*elements[1]+elements[3]*elements[3])},getXX:function(){return this.elements[0]},getXY:function(){return this.elements[1]},getYX:function(){return this.elements[2]},getYY:function(){return this.elements[3]},getDX:function(){return this.elements[4]},getDY:function(){return this.elements[5]},split:function(){var el=this.elements,xx=el[0],xy=el[1],yy=el[3],out={translateX:el[4],translateY:el[5]};return out.rotate=out.rotation=Math.atan2(xy,xx),out.scaleX=xx/Math.cos(out.rotate),out.scaleY=yy/xx*out.scaleX,out}},function(){function registerName(properties,name,i){properties[name]={get:function(){return this.elements[i]},set:function(val){this.elements[i]=val}}}if(Object.defineProperties){var properties={};registerName(properties,"a",0),registerName(properties,"b",1),registerName(properties,"c",2),registerName(properties,"d",3),registerName(properties,"e",4),registerName(properties,"f",5),Object.defineProperties(this.prototype,properties)}this.prototype.multiply=this.prototype.appendMatrix}),Ext.define("Ext.draw.modifier.Modifier",{mixins:{observable:Ext.mixin.Observable},config:{previous:null,next:null,sprite:null},constructor:function(config){this.mixins.observable.constructor.call(this,config)},updateNext:function(next){next&&next.setPrevious(this)},updatePrevious:function(prev){prev&&prev.setNext(this)},prepareAttributes:function(attr){this._previous&&this._previous.prepareAttributes(attr)},popUp:function(attributes,changes){this._next?this._next.popUp(attributes,changes):Ext.apply(attributes,changes)},pushDown:function(attr,changes){if(this._previous)return this._previous.pushDown(attr,changes);for(var name in changes)changes[name]===attr[name]&&delete changes[name];return changes}}),Ext.define("Ext.draw.modifier.Target",{extend:Ext.draw.modifier.Modifier,alias:"modifier.target",statics:{uniqueId:0},prepareAttributes:function(attr){var previous=this.getPrevious();previous&&previous.prepareAttributes(attr),attr.attributeId="attribute-"+Ext.draw.modifier.Target.uniqueId++,attr.hasOwnProperty("canvasAttributes")||(attr.bbox={plain:{dirty:!0},transform:{dirty:!0}},attr.dirty=!0,attr.pendingUpdaters={},attr.canvasAttributes={},attr.matrix=new Ext.draw.Matrix,attr.inverseMatrix=new Ext.draw.Matrix)},applyChanges:function(attr,changes){Ext.apply(attr,changes);var updaters,instances,instance,name,hasChanges,canvasAttributes,i,j,ln,sprite=this.getSprite(),pendingUpdaters=attr.pendingUpdaters,triggers=sprite.self.def.getTriggers();for(name in changes)hasChanges=!0,(updaters=triggers[name])&&sprite.scheduleUpdaters(attr,updaters,[name]),attr.template&&changes.removeFromInstance&&changes.removeFromInstance[name]&&delete attr[name];if(hasChanges){if(pendingUpdaters.canvas)for(canvasAttributes=pendingUpdaters.canvas,delete pendingUpdaters.canvas,i=0,ln=canvasAttributes.length;i<ln;i++)name=canvasAttributes[i],attr.canvasAttributes[name]=attr[name];if(attr.hasOwnProperty("children"))for(i=0,ln=(instances=attr.children).length;i<ln;i++){if(instance=instances[i],Ext.apply(instance.pendingUpdaters,pendingUpdaters),canvasAttributes)for(j=0;j<canvasAttributes.length;j++)name=canvasAttributes[j],instance.canvasAttributes[name]=instance[name];sprite.callUpdaters(instance)}sprite.setDirty(!0),sprite.callUpdaters(attr)}},popUp:function(attr,changes){this.applyChanges(attr,changes)},pushDown:function(attr,changes){var previous=this.getPrevious();return previous&&(changes=previous.pushDown(attr,changes)),this.applyChanges(attr,changes),changes}}),Ext.define("Ext.draw.TimingFunctions",function(){var name,len,i,pow=Math.pow,sin=Math.sin,cos=Math.cos,sqrt=Math.sqrt,pi=Math.PI,poly=["quad","cube","quart","quint"],easings={pow:function(p,x){return pow(p,x||6)},expo:function(p){return pow(2,8*(p-1))},circ:function(p){return 1-sqrt(1-p*p)},sine:function(p){return 1-sin((1-p)*pi/2)},back:function(p,n){return p*p*(((n=n||1.616)+1)*p-n)},bounce:function(p){for(var a=0,b=1;;a+=b,b/=2)if((7-4*a)/11<=p)return b*b-pow((11-6*a-11*p)/4,2)},elastic:function(p,x){return pow(2,10*--p)*cos(20*p*pi*(x||1)/3)}},easingsMap={};function createPoly(times){return function(p){return pow(p,times)}}function addEasing(name,easing){easingsMap[name+"In"]=function(pos){return easing(pos)},easingsMap[name+"Out"]=function(pos){return 1-easing(1-pos)},easingsMap[name+"InOut"]=function(pos){return pos<=.5?easing(2*pos)/2:(2-easing(2*(1-pos)))/2}}for(i=0,len=poly.length;i<len;++i)easings[poly[i]]=createPoly(i+2);for(name in easings)addEasing(name,easings[name]);return easingsMap.linear=Ext.identityFn,easingsMap.easeIn=easingsMap.quadIn,easingsMap.easeOut=easingsMap.quadOut,easingsMap.easeInOut=easingsMap.quadInOut,{singleton:!0,easingMap:easingsMap}},function(Cls){Ext.apply(Cls,Cls.easingMap)}),Ext.define("Ext.draw.Animator",{singleton:!0,frameCallbacks:{},frameCallbackId:0,scheduled:0,frameStartTimeOffset:Ext.now(),animations:[],running:!1,animationTime:function(){return Ext.AnimationQueue.frameStartTime-this.frameStartTimeOffset},add:function(animation){this.contains(animation)||(this.animations.push(animation),this.ignite(),"fireEvent"in animation&&animation.fireEvent("animationstart",animation))},remove:function(animation){for(var animations=this.animations,i=0,l=animations.length;i<l;++i)if(animations[i]===animation)return animations.splice(i,1),void("fireEvent"in animation&&animation.fireEvent("animationend",animation))},contains:function(animation){return-1<Ext.Array.indexOf(this.animations,animation)},empty:function(){return 0===this.animations.length},step:function(frameTime){for(var animation,animations=this.animations,i=0,ln=animations.length;i<ln;i++)(animation=animations[i]).step(frameTime),animation.animating||(animations.splice(i,1),i--,ln--,animation.fireEvent&&animation.fireEvent("animationend",animation))},schedule:function(callback,scope){scope=scope||this;var id="frameCallback"+this.frameCallbackId++;return Ext.isString(callback)&&(callback=scope[callback]),Ext.draw.Animator.frameCallbacks[id]={fn:callback,scope:scope,once:!0},this.scheduled++,Ext.draw.Animator.ignite(),id},scheduleIf:function(callback,scope){scope=scope||this;var cb,id,frameCallbacks=Ext.draw.Animator.frameCallbacks;for(id in Ext.isString(callback)&&(callback=scope[callback]),frameCallbacks)if((cb=frameCallbacks[id]).once&&cb.fn===callback&&cb.scope===scope)return null;return this.schedule(callback,scope)},cancel:function(id){Ext.draw.Animator.frameCallbacks[id]&&Ext.draw.Animator.frameCallbacks[id].once&&(this.scheduled--,delete Ext.draw.Animator.frameCallbacks[id])},addFrameCallback:function(callback,scope){scope=scope||this,Ext.isString(callback)&&(callback=scope[callback]);var id="frameCallback"+this.frameCallbackId++;return Ext.draw.Animator.frameCallbacks[id]={fn:callback,scope:scope},id},removeFrameCallback:function(id){delete Ext.draw.Animator.frameCallbacks[id]},fireFrameCallbacks:function(){var id,fn,cb,callbacks=this.frameCallbacks;for(id in callbacks)fn=(cb=callbacks[id]).fn,Ext.isString(fn)&&(fn=cb.scope[fn]),fn.call(cb.scope),callbacks[id]&&cb.once&&(this.scheduled--,delete callbacks[id])},handleFrame:function(){this.step(this.animationTime()),this.fireFrameCallbacks(),!this.scheduled&&this.empty()&&(Ext.AnimationQueue.stop(this.handleFrame,this),this.running=!1,Ext.draw.Draw.endUpdateIOS())},ignite:function(){this.running||(this.running=!0,Ext.AnimationQueue.start(this.handleFrame,this),Ext.draw.Draw.beginUpdateIOS())}}),Ext.define("Ext.draw.modifier.Animation",{extend:Ext.draw.modifier.Modifier,alias:"modifier.animation",config:{easing:Ext.identityFn,duration:0,customEasings:{},customDurations:{},customDuration:null},constructor:function(config){var me=this;me.anyAnimation=me.anySpecialAnimations=!1,me.animating=0,me.animatingPool=[],me.callParent([config])},prepareAttributes:function(attr){attr.hasOwnProperty("timers")||(attr.animating=!1,attr.timers={},attr.animationOriginal=Ext.Object.chain(attr),attr.animationOriginal.prototype=attr),this._previous&&this._previous.prepareAttributes(attr.animationOriginal)},updateSprite:function(sprite){this.setConfig(sprite.config.fx)},updateDuration:function(duration){this.anyAnimation=0<duration},applyEasing:function(easing){return"string"==typeof easing&&(easing=Ext.draw.TimingFunctions.easingMap[easing]),easing},applyCustomEasings:function(newEasings,oldEasings){var any,key,attrs,easing,i,ln;for(key in oldEasings=oldEasings||{},newEasings)for(any=!0,easing=newEasings[key],attrs=key.split(","),"string"==typeof easing&&(easing=Ext.draw.TimingFunctions.easingMap[easing]),i=0,ln=attrs.length;i<ln;i++)oldEasings[attrs[i]]=easing;return any&&(this.anySpecialAnimations=any),oldEasings},setEasingOn:function(attrs,easing){for(var customEasings={},ln=(attrs=Ext.Array.from(attrs).slice()).length,i=0;i<ln;i++)customEasings[attrs[i]]=easing;this.setCustomEasings(customEasings)},clearEasingOn:function(attrs){for(var i=0,ln=(attrs=Ext.Array.from(attrs,!0)).length;i<ln;i++)delete this._customEasings[attrs[i]]},applyCustomDurations:function(newDurations,oldDurations){var any,key,duration,attrs,i,ln;for(key in oldDurations=oldDurations||{},newDurations)for(any=!0,duration=newDurations[key],i=0,ln=(attrs=key.split(",")).length;i<ln;i++)oldDurations[attrs[i]]=duration;return any&&(this.anySpecialAnimations=any),oldDurations},applyCustomDuration:function(newDuration,oldDuration){newDuration&&(this.getCustomDurations(),this.setCustomDurations(newDuration))},setDurationOn:function(attrs,duration){for(var customDurations={},i=0,ln=(attrs=Ext.Array.from(attrs).slice()).length;i<ln;i++)customDurations[attrs[i]]=duration;this.setCustomDurations(customDurations)},clearDurationOn:function(attrs){for(var i=0,ln=(attrs=Ext.Array.from(attrs,!0)).length;i<ln;i++)delete this._customDurations[attrs[i]]},setAnimating:function(attr,animating){var me=this,pool=me.animatingPool;if(attr.animating!==animating)if(attr.animating=animating)pool.push(attr),0===me.animating&&Ext.draw.Animator.add(me),me.animating++;else{for(var i=pool.length;i--;)pool[i]===attr&&pool.splice(i,1);me.animating=pool.length}},setAttrs:function(attr,changes){var timer,name,newValue,startValue,parser,easing,duration,me=this,timers=attr.timers,parsers=me._sprite.self.def._animationProcessors,defaultEasing=me._easing,defaultDuration=me._duration,customDurations=me._customDurations,customEasings=me._customEasings,anySpecial=me.anySpecialAnimations,any=me.anyAnimation||anySpecial,animationOriginal=attr.animationOriginal,ignite=!1;if(!any){for(name in changes)attr[name]===changes[name]?delete changes[name]:attr[name]=changes[name],delete animationOriginal[name],delete timers[name];return changes}for(name in changes){if((newValue=changes[name])!==(startValue=attr[name])&&null!=startValue&&(parser=parsers[name])){if(easing=defaultEasing,duration=defaultDuration,anySpecial&&(name in customEasings&&(easing=customEasings[name]),name in customDurations&&(duration=customDurations[name])),(startValue&&startValue.isGradient||newValue&&newValue.isGradient)&&(duration=0),duration){if(timers[name]||(timers[name]={}),(timer=timers[name]).start=0,timer.easing=easing,timer.duration=duration,timer.compute=parser.compute,timer.serve=parser.serve||Ext.identityFn,timer.remove=changes.removeFromInstance&&changes.removeFromInstance[name],parser.parseInitial){var initial=parser.parseInitial(startValue,newValue);timer.source=initial[0],timer.target=initial[1]}else parser.parse?(timer.source=parser.parse(startValue),timer.target=parser.parse(newValue)):(timer.source=startValue,timer.target=newValue);animationOriginal[name]=newValue,delete changes[name],ignite=!0;continue}delete animationOriginal[name]}else delete animationOriginal[name];delete timers[name]}return ignite&&!attr.animating&&me.setAnimating(attr,!0),changes},updateAttributes:function(attr){if(!attr.animating)return{};var name,timer,delta,changes={},any=!1,timers=attr.timers,animationOriginal=attr.animationOriginal,now=Ext.draw.Animator.animationTime();if(attr.lastUpdate===now)return null;for(name in timers)1<=(delta=(timer=timers[name]).start?(now-timer.start)/timer.duration:(timer.start=now,0))?(changes[name]=animationOriginal[name],delete animationOriginal[name],timers[name].remove&&(changes.removeFromInstance=changes.removeFromInstance||{},changes.removeFromInstance[name]=!0),delete timers[name]):(changes[name]=timer.serve(timer.compute(timer.source,timer.target,timer.easing(delta),attr[name])),any=!0);return attr.lastUpdate=now,this.setAnimating(attr,any),changes},pushDown:function(attr,changes){return changes=this.callParent([attr.animationOriginal,changes]),this.setAttrs(attr,changes)},popUp:function(attr,changes){return attr=attr.prototype,changes=this.setAttrs(attr,changes),this._next?this._next.popUp(attr,changes):Ext.apply(attr,changes)},step:function(frameTime){for(var attr,changes,pool=this.animatingPool.slice(),ln=pool.length,i=0;i<ln;i++)attr=pool[i],(changes=this.updateAttributes(attr))&&this._next&&this._next.popUp(attr,changes)},stop:function(){this.step();var i,ln,pool=this.animatingPool;for(i=0,ln=pool.length;i<ln;i++)pool[i].animating=!1;this.animatingPool.length=0,this.animating=0,Ext.draw.Animator.remove(this)},destroy:function(){this.animatingPool.length=0,this.animating=0,this.callParent()}}),Ext.define("Ext.draw.modifier.Highlight",{extend:Ext.draw.modifier.Modifier,alias:"modifier.highlight",config:{enabled:!1,highlightStyle:null},preFx:!0,applyHighlightStyle:function(style,oldStyle){return oldStyle=oldStyle||{},this.getSprite()?Ext.apply(oldStyle,this.getSprite().self.def.normalize(style)):Ext.apply(oldStyle,style),oldStyle},prepareAttributes:function(attr){attr.hasOwnProperty("highlightOriginal")||(attr.highlighted=!1,attr.highlightOriginal=Ext.Object.chain(attr),(attr.highlightOriginal.prototype=attr).highlightOriginal.removeFromInstance={}),this._previous&&this._previous.prepareAttributes(attr.highlightOriginal)},updateSprite:function(sprite,oldSprite){sprite&&(this.getHighlightStyle()&&(this._highlightStyle=sprite.self.def.normalize(this.getHighlightStyle())),this.setHighlightStyle(sprite.config.highlight)),sprite.self.def.setConfig({defaults:{highlighted:!1},processors:{highlighted:"bool"}}),this.setSprite(sprite)},filterChanges:function(attr,changes){var name,highlightOriginal=attr.highlightOriginal,style=this.getHighlightStyle();if(attr.highlighted)for(name in changes)style.hasOwnProperty(name)&&(highlightOriginal[name]=changes[name],delete changes[name]);for(name in changes)"highlighted"!==name&&highlightOriginal[name]===changes[name]&&delete changes[name];return changes},pushDown:function(attr,changes){var highlighted,name,tplAttr,timer,highlightStyle=this.getHighlightStyle(),highlightOriginal=attr.highlightOriginal,removeFromInstance=highlightOriginal.removeFromInstance;if(changes.hasOwnProperty("highlighted")){if(highlighted=changes.highlighted,delete changes.highlighted,this._previous&&(changes=this._previous.pushDown(highlightOriginal,changes)),changes=this.filterChanges(attr,changes),highlighted!==attr.highlighted){if(highlighted)for(name in highlightStyle)name in changes?highlightOriginal[name]=changes[name]:(tplAttr=attr.template&&attr.template.ownAttr)&&!attr.prototype.hasOwnProperty(name)?(removeFromInstance[name]=!0,highlightOriginal[name]=tplAttr.animationOriginal[name]):((timer=highlightOriginal.timers[name])&&timer.remove&&(removeFromInstance[name]=!0),highlightOriginal[name]=attr[name]),highlightOriginal[name]!==highlightStyle[name]&&(changes[name]=highlightStyle[name]);else{for(name in highlightStyle)name in changes||(changes[name]=highlightOriginal[name]),delete highlightOriginal[name];changes.removeFromInstance=changes.removeFromInstance||{},Ext.apply(changes.removeFromInstance,removeFromInstance),highlightOriginal.removeFromInstance={}}changes.highlighted=highlighted}}else this._previous&&(changes=this._previous.pushDown(highlightOriginal,changes)),changes=this.filterChanges(attr,changes);return changes},popUp:function(attr,changes){changes=this.filterChanges(attr,changes),Ext.draw.modifier.Modifier.prototype.popUp.call(this,attr,changes)}}),Ext.define("Ext.draw.sprite.Sprite",{alias:"sprite.sprite",mixins:{observable:Ext.mixin.Observable},isSprite:!0,statics:{defaultHitTestOptions:{fill:!0,stroke:!0}},inheritableStatics:{def:{processors:{strokeStyle:"color",fillStyle:"color",strokeOpacity:"limited01",fillOpacity:"limited01",lineWidth:"number",lineCap:"enums(butt,round,square)",lineJoin:"enums(round,bevel,miter)",lineDash:"data",lineDashOffset:"number",miterLimit:"number",shadowColor:"color",shadowOffsetX:"number",shadowOffsetY:"number",shadowBlur:"number",globalAlpha:"limited01",globalCompositeOperation:"enums(source-over,destination-over,source-in,destination-in,source-out,destination-out,source-atop,destination-atop,lighter,xor,copy)",hidden:"bool",transformFillStroke:"bool",zIndex:"number",translationX:"number",translationY:"number",rotationRads:"number",rotationCenterX:"number",rotationCenterY:"number",scalingX:"number",scalingY:"number",scalingCenterX:"number",scalingCenterY:"number",constrainGradients:"bool"},aliases:{stroke:"strokeStyle",fill:"fillStyle",color:"fillStyle","stroke-width":"lineWidth","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","text-anchor":"textAlign",opacity:"globalAlpha",translateX:"translationX",translateY:"translationY",rotateRads:"rotationRads",rotateCenterX:"rotationCenterX",rotateCenterY:"rotationCenterY",scaleX:"scalingX",scaleY:"scalingY",scaleCenterX:"scalingCenterX",scaleCenterY:"scalingCenterY"},defaults:{hidden:!1,zIndex:0,strokeStyle:"none",fillStyle:"none",lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,shadowColor:"none",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,globalAlpha:1,strokeOpacity:1,fillOpacity:1,transformFillStroke:!1,translationX:0,translationY:0,rotationRads:0,rotationCenterX:null,rotationCenterY:null,scalingX:1,scalingY:1,scalingCenterX:null,scalingCenterY:null,constrainGradients:!1},triggers:{zIndex:"zIndex",globalAlpha:"canvas",globalCompositeOperation:"canvas",transformFillStroke:"canvas",strokeStyle:"canvas",fillStyle:"canvas",strokeOpacity:"canvas",fillOpacity:"canvas",lineWidth:"canvas",lineCap:"canvas",lineJoin:"canvas",lineDash:"canvas",lineDashOffset:"canvas",miterLimit:"canvas",shadowColor:"canvas",shadowOffsetX:"canvas",shadowOffsetY:"canvas",shadowBlur:"canvas",translationX:"transform",translationY:"transform",rotationRads:"transform",rotationCenterX:"transform",rotationCenterY:"transform",scalingX:"transform",scalingY:"transform",scalingCenterX:"transform",scalingCenterY:"transform",constrainGradients:"canvas"},updaters:{bbox:"bboxUpdater",zIndex:function(attr){attr.dirtyZIndex=!0},transform:function(attr){attr.dirtyTransform=!0,attr.bbox.transform.dirty=!0}}}},config:{parent:null,surface:null},onClassExtended:function(subClass,data){var cfg,superclassCfg=subClass.superclass.self.def.initialConfig,ownCfg=data.inheritableStatics&&data.inheritableStatics.def;ownCfg?(cfg=Ext.Object.merge({},superclassCfg,ownCfg),subClass.def=new Ext.draw.sprite.AttributeDefinition(cfg),delete data.inheritableStatics.def):subClass.def=new Ext.draw.sprite.AttributeDefinition(superclassCfg),subClass.def.spriteClass=subClass},constructor:function(config){var modifiers,me=this,defaults=me.self.def.getDefaults();config=Ext.isObject(config)?config:{},me.id=config.id||Ext.id(null,"ext-sprite-"),me.attr={},me.mixins.observable.constructor.apply(me,arguments),modifiers=Ext.Array.from(config.modifiers,!0),me.prepareModifiers(modifiers),me.initializeAttributes(),me.setAttributes(defaults,!0),me.setAttributes(config)},getDirty:function(){return this.attr.dirty},setDirty:function(dirty){if(this.attr.dirty=dirty){var parent=this.getParent();parent&&parent.setDirty(!0)}},addModifier:function(modifier,reinitializeAttributes){var me=this;return modifier instanceof Ext.draw.modifier.Modifier||(modifier=Ext.factory(modifier,null,null,"modifier")),modifier.setSprite(me),modifier.preFx||modifier.config&&modifier.config.preFx?(me.fx.getPrevious()&&me.fx.getPrevious().setNext(modifier),modifier.setNext(me.fx)):(me.topModifier.getPrevious().setNext(modifier),modifier.setNext(me.topModifier)),reinitializeAttributes&&me.initializeAttributes(),modifier},prepareModifiers:function(additionalModifiers){var i,ln,me=this;for(me.topModifier=new Ext.draw.modifier.Target({sprite:me}),me.fx=new Ext.draw.modifier.Animation({sprite:me}),me.fx.setNext(me.topModifier),i=0,ln=additionalModifiers.length;i<ln;i++)me.addModifier(additionalModifiers[i],!1)},getAnimation:function(){return this.fx},setAnimation:function(config){this.fx.setConfig(config)},initializeAttributes:function(){this.topModifier.prepareAttributes(this.attr)},callUpdaters:function(attr){var flags,updater,fn,me=this,pendingUpdaters=attr.pendingUpdaters,updaters=me.self.def.getUpdaters(),any=!1,dirty=!1;me.callUpdaters=Ext.emptyFn;do{for(updater in any=!1,pendingUpdaters)any=!0,flags=pendingUpdaters[updater],delete pendingUpdaters[updater],"string"==typeof(fn=updaters[updater])&&(fn=me[fn]),fn&&fn.call(me,attr,flags);dirty=dirty||any}while(any);delete me.callUpdaters,dirty&&me.setDirty(!0)},scheduleUpdaters:function(attr,updaters,triggers){var updater;if(triggers)for(var i=0,ln=updaters.length;i<ln;i++)updater=updaters[i],this.scheduleUpdater(attr,updater,triggers);else for(updater in updaters)triggers=updaters[updater],this.scheduleUpdater(attr,updater,triggers)},scheduleUpdater:function(attr,updater,triggers){triggers=triggers||[];var pendingUpdaters=attr.pendingUpdaters;updater in pendingUpdaters?triggers.length&&(pendingUpdaters[updater]=Ext.Array.merge(pendingUpdaters[updater],triggers)):pendingUpdaters[updater]=triggers},setAttributes:function(changes,bypassNormalization,avoidCopy){var name,value,obj,attr=this.attr;if(bypassNormalization)if(avoidCopy)this.topModifier.pushDown(attr,changes);else{for(name in obj={},changes)(value=changes[name])!==attr[name]&&(obj[name]=value);this.topModifier.pushDown(attr,obj)}else this.topModifier.pushDown(attr,this.self.def.normalize(changes))},setAttributesBypassingNormalization:function(changes,avoidCopy){return this.setAttributes(changes,!0,avoidCopy)},bboxUpdater:function(attr){var hasRotation=0!==attr.rotationRads,hasScaling=1!==attr.scalingX||1!==attr.scalingY,noRotationCenter=null===attr.rotationCenterX||null===attr.rotationCenterY,noScalingCenter=null===attr.scalingCenterX||null===attr.scalingCenterY;attr.bbox.plain.dirty=!0,attr.bbox.transform.dirty=!0,(hasRotation&&noRotationCenter||hasScaling&&noScalingCenter)&&this.scheduleUpdater(attr,"transform")},getBBox:function(isWithoutTransform){var bbox=this.attr.bbox,plain=bbox.plain,transform=bbox.transform;return plain.dirty&&(this.updatePlainBBox(plain),plain.dirty=!1),isWithoutTransform?plain:(this.applyTransformations(),transform.dirty&&(this.updateTransformedBBox(transform,plain),transform.dirty=!1),transform)},updatePlainBBox:Ext.emptyFn,updateTransformedBBox:function(transform,plain){this.attr.matrix.transformBBox(plain,0,transform)},getBBoxCenter:function(isWithoutTransform){var bbox=this.getBBox(isWithoutTransform);return bbox?[bbox.x+.5*bbox.width,bbox.y+.5*bbox.height]:[0,0]},hide:function(){return this.attr.hidden=!0,this.setDirty(!0),this},show:function(){return this.attr.hidden=!1,this.setDirty(!0),this},useAttributes:function(ctx,rect){this.applyTransformations();var id,canvasAttributes=this.attr.canvasAttributes,strokeStyle=canvasAttributes.strokeStyle,fillStyle=canvasAttributes.fillStyle,lineDash=canvasAttributes.lineDash,lineDashOffset=canvasAttributes.lineDashOffset;for(id in strokeStyle&&(strokeStyle.isGradient?(ctx.strokeStyle="black",ctx.strokeGradient=strokeStyle):ctx.strokeGradient=!1),fillStyle&&(fillStyle.isGradient?(ctx.fillStyle="black",ctx.fillGradient=fillStyle):ctx.fillGradient=!1),lineDash&&ctx.setLineDash(lineDash),Ext.isNumber(lineDashOffset+ctx.lineDashOffset)&&(ctx.lineDashOffset=lineDashOffset),canvasAttributes)void 0!==canvasAttributes[id]&&canvasAttributes[id]!==ctx[id]&&(ctx[id]=canvasAttributes[id]);this.setGradientBBox(ctx,rect)},setGradientBBox:function(ctx,rect){var attr=this.attr;attr.constrainGradients?ctx.setGradientBBox({x:rect[0],y:rect[1],width:rect[2],height:rect[3]}):ctx.setGradientBBox(this.getBBox(attr.transformFillStroke))},applyTransformations:function(force){if(force||this.attr.dirtyTransform){var tx_4,ty_4,attr=this.attr,center=this.getBBoxCenter(!0),centerX=center[0],centerY=center[1],tx=attr.translationX,ty=attr.translationY,sx=attr.scalingX,sy=null===attr.scalingY?attr.scalingX:attr.scalingY,scx=null===attr.scalingCenterX?centerX:attr.scalingCenterX,scy=null===attr.scalingCenterY?centerY:attr.scalingCenterY,rad=attr.rotationRads,rcx=null===attr.rotationCenterX?centerX:attr.rotationCenterX,rcy=null===attr.rotationCenterY?centerY:attr.rotationCenterY,cos=Math.cos(rad),sin=Math.sin(rad);1===sx&&1===sy&&(scy=scx=0),0===rad&&(rcy=rcx=0),tx_4=scx*(1-sx)-rcx,ty_4=scy*(1-sy)-rcy,attr.matrix.elements=[cos*sx,sin*sx,-sin*sy,cos*sy,cos*tx_4-sin*ty_4+rcx+tx,sin*tx_4+cos*ty_4+rcy+ty],attr.matrix.inverse(attr.inverseMatrix),attr.dirtyTransform=!1,attr.bbox.transform.dirty=!0}},transform:function(matrix,isSplit){var elements,attr=this.attr,spriteMatrix=attr.matrix;return elements=matrix&&matrix.isMatrix?matrix.elements:matrix,spriteMatrix.prepend.apply(spriteMatrix,elements.slice()),spriteMatrix.inverse(attr.inverseMatrix),isSplit&&this.updateTransformAttributes(),attr.dirtyTransform=!1,attr.bbox.transform.dirty=!0,this.setDirty(!0),this},updateTransformAttributes:function(){var attr=this.attr,split=attr.matrix.split();attr.rotationRads=split.rotate,attr.rotationCenterX=0,attr.rotationCenterY=0,attr.scalingX=split.scaleX,attr.scalingY=split.scaleY,attr.scalingCenterX=0,attr.scalingCenterY=0,attr.translationX=split.translateX,attr.translationY=split.translateY},resetTransform:function(isSplit){var attr=this.attr;return attr.matrix.reset(),attr.inverseMatrix.reset(),isSplit||this.updateTransformAttributes(),attr.dirtyTransform=!1,attr.bbox.transform.dirty=!0,this.setDirty(!0),this},setTransform:function(matrix,isSplit){return this.resetTransform(!0),this.transform.call(this,matrix,isSplit),this},preRender:Ext.emptyFn,render:Ext.emptyFn,hitTest:function(point,options){if(this.isVisible()){var x=point[0],y=point[1],bbox=this.getBBox();if(bbox&&x>=bbox.x&&x<=bbox.x+bbox.width&&y>=bbox.y&&y<=bbox.y+bbox.height)return{sprite:this}}return null},isVisible:function(){var attr=this.attr,parent=this.getParent(),isSeen=parent&&(parent.isSurface||parent.isVisible())&&!attr.hidden&&attr.globalAlpha,none1=Ext.draw.Color.NONE,none2=Ext.draw.Color.RGBA_NONE,hasFill=attr.fillOpacity&&attr.fillStyle!==none1&&attr.fillStyle!==none2,hasStroke=attr.strokeOpacity&&attr.strokeStyle!==none1&&attr.strokeStyle!==none2;return!!(isSeen&&(hasFill||hasStroke))},repaint:function(){var surface=this.getSurface();surface&&surface.renderFrame()},remove:function(){var surface=this.getSurface();return surface&&surface.isSurface?surface.remove(this):null},destroy:function(){for(var currentModifier,me=this,modifier=me.topModifier;modifier;)modifier=(currentModifier=modifier).getPrevious(),currentModifier.destroy();delete me.attr,me.remove(),!1!==me.fireEvent("beforedestroy",me)&&me.fireEvent("destroy",me),me.callParent()}},function(){this.def=new Ext.draw.sprite.AttributeDefinition(this.def),this.def.spriteClass=this}),Ext.define("Ext.draw.Path",{statics:{pathRe:/,?([achlmqrstvxz]),?/gi,pathRe2:/-/gi,pathSplitRe:/\s|,/g},svgString:"",constructor:function(pathString){var me=this;me.commands=[],me.params=[],me.cursor=null,me.startX=0,me.startY=0,pathString&&me.fromSvgString(pathString)},clear:function(){var me=this;me.params.length=0,me.commands.length=0,me.cursor=null,me.startX=0,me.startY=0,me.dirt()},dirt:function(){this.svgString=""},moveTo:function(x,y){var me=this;me.cursor||(me.cursor=[x,y]),me.params.push(x,y),me.commands.push("M"),me.startX=x,me.startY=y,me.cursor[0]=x,me.cursor[1]=y,me.dirt()},lineTo:function(x,y){var me=this;me.cursor?(me.params.push(x,y),me.commands.push("L")):(me.cursor=[x,y],me.params.push(x,y),me.commands.push("M")),me.cursor[0]=x,me.cursor[1]=y,me.dirt()},bezierCurveTo:function(cx1,cy1,cx2,cy2,x,y){var me=this;me.cursor||me.moveTo(cx1,cy1),me.params.push(cx1,cy1,cx2,cy2,x,y),me.commands.push("C"),me.cursor[0]=x,me.cursor[1]=y,me.dirt()},quadraticCurveTo:function(cx,cy,x,y){var me=this;me.cursor||me.moveTo(cx,cy),me.bezierCurveTo((2*cx+me.cursor[0])/3,(2*cy+me.cursor[1])/3,(2*cx+x)/3,(2*cy+y)/3,x,y)},closePath:function(){this.cursor&&(this.cursor=null,this.commands.push("Z"),this.dirt())},arcTo:function(x1,y1,x2,y2,rx,ry,rotation){var me=this;if(void 0===ry&&(ry=rx),void 0===rotation&&(rotation=0),me.cursor)if(0!==rx&&0!==ry){x2-=x1,y2-=y1;var cos,sin,xx,yx,xy,yy,dist,cx,cy,x0=me.cursor[0]-x1,y0=me.cursor[1]-y1,area=x2*y0-y2*x0,l0=Math.sqrt(x0*x0+y0*y0),l2=Math.sqrt(x2*x2+y2*y2);if(0!=area){if(ry!==rx){var temp=(xx=(cos=Math.cos(rotation))/rx)*x0+(yx=(sin=Math.sin(rotation))/ry)*y0;y0=(xy=-sin/rx)*x0+(yy=cos/ry)*y0,x0=temp,temp=xx*x2+yx*y2,y2=xy*x2+yy*y2,x2=temp}else x0/=rx,y0/=ry,x2/=rx,y2/=ry;cx=x0*l2+x2*l0,cy=y0*l2+y2*l0;var k0=((cx*=dist=1/(Math.sin(.5*Math.asin(Math.abs(area)/(l0*l2)))*Math.sqrt(cx*cx+cy*cy)))*x0+(cy*=dist)*y0)/(x0*x0+y0*y0),k2=(cx*x2+cy*y2)/(x2*x2+y2*y2),cosStart=x0*k0-cx,sinStart=y0*k0-cy,cosEnd=x2*k2-cx,sinEnd=y2*k2-cy,startAngle=Math.atan2(sinStart,cosStart),endAngle=Math.atan2(sinEnd,cosEnd);0<area?endAngle<startAngle&&(endAngle+=2*Math.PI):startAngle<endAngle&&(startAngle+=2*Math.PI),ry!==rx?(cx=cos*cx*rx-sin*cy*ry+x1,cy=sin*cy*ry+cos*cy*ry+y1,me.lineTo(cos*rx*cosStart-sin*ry*sinStart+cx,sin*rx*cosStart+cos*ry*sinStart+cy)):(cx=cx*rx+x1,cy=cy*ry+y1,me.lineTo(rx*cosStart+cx,ry*sinStart+cy)),me.ellipse(cx,cy,rx,ry,rotation,startAngle,endAngle,area<0)}else me.lineTo(x1,y1)}else me.lineTo(x1,y1);else me.moveTo(x1,y1)},ellipse:function(cx,cy,radiusX,radiusY,rotation,startAngle,endAngle,anticlockwise){var count,i,j,me=this,params=me.params,start=params.length;if(endAngle-startAngle>=2*Math.PI)return me.ellipse(cx,cy,radiusX,radiusY,rotation,startAngle,startAngle+Math.PI,anticlockwise),void me.ellipse(cx,cy,radiusX,radiusY,rotation,startAngle+Math.PI,endAngle,anticlockwise);if(anticlockwise)for(startAngle<endAngle&&(startAngle+=2*Math.PI),count=me.approximateArc(params,cx,cy,radiusX,radiusY,rotation,endAngle,startAngle),i=start,j=params.length-2;i<j;i+=2,j-=2){var temp=params[i];params[i]=params[j],params[j]=temp,temp=params[i+1],params[i+1]=params[j+1],params[j+1]=temp}else endAngle<startAngle&&(endAngle+=2*Math.PI),count=me.approximateArc(params,cx,cy,radiusX,radiusY,rotation,startAngle,endAngle);for(me.cursor?(me.cursor[0]=params[params.length-2],me.cursor[1]=params[params.length-1],me.commands.push("L")):(me.cursor=[params[params.length-2],params[params.length-1]],me.commands.push("M")),i=2;i<count;i+=6)me.commands.push("C");me.dirt()},arc:function(x,y,radius,startAngle,endAngle,anticlockwise){this.ellipse(x,y,radius,radius,0,startAngle,endAngle,anticlockwise)},rect:function(x,y,width,height){if(0!=width&&0!=height){var me=this;me.moveTo(x,y),me.lineTo(x+width,y),me.lineTo(x+width,y+height),me.lineTo(x,y+height),me.closePath()}},approximateArc:function(result,cx,cy,rx,ry,phi,theta1,theta2){var temp,y1,x3,y3,x2,y2,cosPhi=Math.cos(phi),sinPhi=Math.sin(phi),cosTheta1=Math.cos(theta1),sinTheta1=Math.sin(theta1),xx=cosPhi*cosTheta1*rx-sinPhi*sinTheta1*ry,yx=-cosPhi*sinTheta1*rx-sinPhi*cosTheta1*ry,xy=sinPhi*cosTheta1*rx+cosPhi*sinTheta1*ry,yy=-sinPhi*sinTheta1*rx+cosPhi*cosTheta1*ry,rightAngle=Math.PI/2,count=2,exx=xx,eyx=yx,exy=xy,eyy=yy,rho=.547443256150549;for((theta2-=theta1)<0&&(theta2+=2*Math.PI),result.push(xx+cx,xy+cy);rightAngle<=theta2;)result.push(exx+eyx*rho+cx,exy+eyy*rho+cy,exx*rho+eyx+cx,exy*rho+eyy+cy,eyx+cx,eyy+cy),count+=6,theta2-=rightAngle,temp=exx,exx=eyx,eyx=-temp,temp=exy,exy=eyy,eyy=-temp;return theta2&&(y1=(.3294738052815987+.012120855841304373*theta2)*theta2,x2=(x3=Math.cos(theta2))+y1*(y3=Math.sin(theta2)),y2=y3-y1*x3,result.push(exx+eyx*y1+cx,exy+eyy*y1+cy,exx*x2+eyx*y2+cx,exy*x2+eyy*y2+cy,exx*x3+eyx*y3+cx,exy*x3+eyy*y3+cy),count+=6),count},arcSvg:function(rx,ry,rotation,fA,fS,x2,y2){rx<0&&(rx=-rx),ry<0&&(ry=-ry);var x1=this.cursor[0],y1=this.cursor[1],hdx=(x1-x2)/2,hdy=(y1-y2)/2,cosPhi=Math.cos(rotation),sinPhi=Math.sin(rotation),xp=hdx*cosPhi+hdy*sinPhi,yp=-hdx*sinPhi+hdy*cosPhi,ratX=xp/rx,ratY=yp/ry,lambda=ratX*ratX+ratY*ratY,cx=.5*(x1+x2),cy=.5*(y1+y2),cpx=0,cpy=0;1<=lambda?(rx*=lambda=Math.sqrt(lambda),ry*=lambda):(lambda=Math.sqrt(1/lambda-1),fA===fS&&(lambda=-lambda),cx+=cosPhi*(cpx=lambda*rx*ratY)-sinPhi*(cpy=-lambda*ry*ratX),cy+=sinPhi*cpx+cosPhi*cpy);var theta1=Math.atan2((yp-cpy)/ry,(xp-cpx)/rx),deltaTheta=Math.atan2((-yp-cpy)/ry,(-xp-cpx)/rx)-theta1;fS?deltaTheta<=0&&(deltaTheta+=2*Math.PI):0<=deltaTheta&&(deltaTheta-=2*Math.PI),this.ellipse(cx,cy,rx,ry,rotation,theta1,theta1+deltaTheta,1-fS)},fromSvgString:function(pathString){if(pathString){var parts,lastControlX,lastControlY,i,partLength,me=this,paramCounts={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0,A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},lastCommand="",lastX=0,lastY=0,part=!1;for(Ext.isString(pathString)?parts=pathString.replace(Ext.draw.Path.pathRe," $1 ").replace(Ext.draw.Path.pathRe2," -").split(Ext.draw.Path.pathSplitRe):Ext.isArray(pathString)&&(parts=pathString.join(",").split(Ext.draw.Path.pathSplitRe)),partLength=i=0;i<parts.length;i++)""!==parts[i]&&(parts[partLength++]=parts[i]);for(parts.length=partLength,me.clear(),i=0;i<parts.length;)switch(lastCommand=part,(part=parts[i]).toUpperCase(),i++,part){case"M":for(me.moveTo(lastX=+parts[i],lastY=+parts[i+1]),i+=2;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.lineTo(lastX=+parts[i],lastY=+parts[i+1]),i+=2;break;case"L":for(me.lineTo(lastX=+parts[i],lastY=+parts[i+1]),i+=2;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.lineTo(lastX=+parts[i],lastY=+parts[i+1]),i+=2;break;case"A":for(;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.arcSvg(+parts[i],+parts[i+1],parts[i+2]*Math.PI/180,+parts[i+3],+parts[i+4],lastX=+parts[i+5],lastY=+parts[i+6]),i+=7;break;case"C":for(;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.bezierCurveTo(+parts[i],+parts[i+1],lastControlX=+parts[i+2],lastControlY=+parts[i+3],lastX=+parts[i+4],lastY=+parts[i+5]),i+=6;break;case"Z":me.closePath();break;case"m":for(me.moveTo(lastX+=+parts[i],lastY+=+parts[i+1]),i+=2;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.lineTo(lastX+=+parts[i],lastY+=+parts[i+1]),i+=2;break;case"l":for(me.lineTo(lastX+=+parts[i],lastY+=+parts[i+1]),i+=2;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.lineTo(lastX+=+parts[i],lastY+=+parts[i+1]),i+=2;break;case"a":for(;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.arcSvg(+parts[i],+parts[i+1],parts[i+2]*Math.PI/180,+parts[i+3],+parts[i+4],lastX+=+parts[i+5],lastY+=+parts[i+6]),i+=7;break;case"c":for(;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.bezierCurveTo(lastX+ +parts[i],lastY+ +parts[i+1],lastControlX=lastX+ +parts[i+2],lastControlY=lastY+ +parts[i+3],lastX+=+parts[i+4],lastY+=+parts[i+5]),i+=6;break;case"z":me.closePath();break;case"s":for("c"!==lastCommand&&"C"!==lastCommand&&"s"!==lastCommand&&"S"!==lastCommand&&(lastControlX=lastX,lastControlY=lastY);i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.bezierCurveTo(lastX+lastX-lastControlX,lastY+lastY-lastControlY,lastControlX=lastX+ +parts[i],lastControlY=lastY+ +parts[i+1],lastX+=+parts[i+2],lastY+=+parts[i+3]),i+=4;break;case"S":for("c"!==lastCommand&&"C"!==lastCommand&&"s"!==lastCommand&&"S"!==lastCommand&&(lastControlX=lastX,lastControlY=lastY);i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.bezierCurveTo(lastX+lastX-lastControlX,lastY+lastY-lastControlY,lastControlX=+parts[i],lastControlY=+parts[i+1],lastX=+parts[i+2],lastY=+parts[i+3]),i+=4;break;case"q":for(;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.quadraticCurveTo(lastControlX=lastX+ +parts[i],lastControlY=lastY+ +parts[i+1],lastX+=+parts[i+2],lastY+=+parts[i+3]),i+=4;break;case"Q":for(;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.quadraticCurveTo(lastControlX=+parts[i],lastControlY=+parts[i+1],lastX=+parts[i+2],lastY=+parts[i+3]),i+=4;break;case"t":for("q"!==lastCommand&&"Q"!==lastCommand&&"t"!==lastCommand&&"T"!==lastCommand&&(lastControlX=lastX,lastControlY=lastY);i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.quadraticCurveTo(lastControlX=lastX+lastX-lastControlX,lastControlY=lastY+lastY-lastControlY,lastX+=+parts[i+1],lastY+=+parts[i+2]),i+=2;break;case"T":for("q"!==lastCommand&&"Q"!==lastCommand&&"t"!==lastCommand&&"T"!==lastCommand&&(lastControlX=lastX,lastControlY=lastY);i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.quadraticCurveTo(lastControlX=lastX+lastX-lastControlX,lastControlY=lastY+lastY-lastControlY,lastX=+parts[i+1],lastY=+parts[i+2]),i+=2;break;case"h":for(;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.lineTo(lastX+=+parts[i],lastY),i++;break;case"H":for(;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.lineTo(lastX=+parts[i],lastY),i++;break;case"v":for(;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.lineTo(lastX,lastY+=+parts[i]),i++;break;case"V":for(;i<partLength&&!paramCounts.hasOwnProperty(parts[i]);)me.lineTo(lastX,lastY=+parts[i]),i++}}},clone:function(){var me=this,path=new Ext.draw.Path;return path.params=me.params.slice(0),path.commands=me.commands.slice(0),path.cursor=me.cursor?me.cursor.slice(0):null,path.startX=me.startX,path.startY=me.startY,path.svgString=me.svgString,path},transform:function(matrix){if(!matrix.isIdentity()){for(var x,y,xx=matrix.getXX(),yx=matrix.getYX(),dx=matrix.getDX(),xy=matrix.getXY(),yy=matrix.getYY(),dy=matrix.getDY(),params=this.params,i=0,ln=params.length;i<ln;i+=2)x=params[i],y=params[i+1],params[i]=x*xx+y*yx+dx,params[i+1]=x*xy+y*yy+dy;this.dirt()}},getDimension:function(target){if(target=target||{},!this.commands||!this.commands.length)return target.x=0,target.y=0,target.width=0,target.height=0,target;target.left=1/0,target.top=1/0,target.right=-1/0,target.bottom=-1/0;for(var x,y,i=0,j=0,commands=this.commands,params=this.params,ln=commands.length;i<ln;i++)switch(commands[i]){case"M":case"L":x=params[j],y=params[j+1],target.left=Math.min(x,target.left),target.top=Math.min(y,target.top),target.right=Math.max(x,target.right),target.bottom=Math.max(y,target.bottom),j+=2;break;case"C":this.expandDimension(target,x,y,params[j],params[j+1],params[j+2],params[j+3],x=params[j+4],y=params[j+5]),j+=6}return target.x=target.left,target.y=target.top,target.width=target.right-target.left,target.height=target.bottom-target.top,target},getDimensionWithTransform:function(matrix,target){if(!this.commands||!this.commands.length)return(target=target||{}).x=0,target.y=0,target.width=0,target.height=0,target;target.left=1/0,target.top=1/0,target.right=-1/0,target.bottom=-1/0;for(var x,y,xx=matrix.getXX(),yx=matrix.getYX(),dx=matrix.getDX(),xy=matrix.getXY(),yy=matrix.getYY(),dy=matrix.getDY(),i=0,j=0,commands=this.commands,params=this.params,ln=commands.length;i<ln;i++)switch(commands[i]){case"M":case"L":x=params[j]*xx+params[j+1]*yx+dx,y=params[j]*xy+params[j+1]*yy+dy,target.left=Math.min(x,target.left),target.top=Math.min(y,target.top),target.right=Math.max(x,target.right),target.bottom=Math.max(y,target.bottom),j+=2;break;case"C":this.expandDimension(target,x,y,params[j]*xx+params[j+1]*yx+dx,params[j]*xy+params[j+1]*yy+dy,params[j+2]*xx+params[j+3]*yx+dx,params[j+2]*xy+params[j+3]*yy+dy,x=params[j+4]*xx+params[j+5]*yx+dx,y=params[j+4]*xy+params[j+5]*yy+dy),j+=6}return(target=target||{}).x=target.left,target.y=target.top,target.width=target.right-target.left,target.height=target.bottom-target.top,target},expandDimension:function(target,x1,y1,cx1,cy1,cx2,cy2,x2,y2){var l=target.left,r=target.right,t=target.top,b=target.bottom,dim=this.dim||(this.dim=[]);this.curveDimension(x1,cx1,cx2,x2,dim),l=Math.min(l,dim[0]),r=Math.max(r,dim[1]),this.curveDimension(y1,cy1,cy2,y2,dim),t=Math.min(t,dim[0]),b=Math.max(b,dim[1]),target.left=l,target.right=r,target.top=t,target.bottom=b},curveDimension:function(a,b,c,d,dim){var x,y,delta,qa=3*(3*(b-c)-a+d),qb=6*(a-2*b+c),qc=-3*(a-b),min=Math.min(a,d),max=Math.max(a,d);if(0==qa){if(0==qb)return dim[0]=min,void(dim[1]=max);0<(x=-qc/qb)&&x<1&&(y=this.interpolate(a,b,c,d,x),min=Math.min(min,y),max=Math.max(max,y))}else 0<=(delta=qb*qb-4*qa*qc)&&(0<(x=((delta=Math.sqrt(delta))-qb)/2/qa)&&x<1&&(y=this.interpolate(a,b,c,d,x),min=Math.min(min,y),max=Math.max(max,y)),0<delta&&0<(x-=delta/qa)&&x<1&&(y=this.interpolate(a,b,c,d,x),min=Math.min(min,y),max=Math.max(max,y)));dim[0]=min,dim[1]=max},interpolate:function(a,b,c,d,t){if(0===t)return a;if(1===t)return d;var rate=(1-t)/t;return t*t*t*(d+rate*(3*c+rate*(3*b+rate*a)))},fromStripes:function(stripes){var j,ln2,stripe,me=this,i=0,ln=stripes.length;for(me.clear();i<ln;i++)for(stripe=stripes[i],me.params.push.apply(me.params,stripe),me.commands.push("M"),j=2,ln2=stripe.length;j<ln2;j+=6)me.commands.push("C");me.cursor||(me.cursor=[]),me.cursor[0]=me.params[me.params.length-2],me.cursor[1]=me.params[me.params.length-1],me.dirt()},toStripes:function(target){var curr,x,y,lastX,lastY,startX,startY,i,j,stripes=target||[],commands=this.commands,params=this.params,ln=commands.length;for(j=i=0;i<ln;i++)switch(commands[i]){case"M":curr=[startX=lastX=params[j++],startY=lastY=params[j++]],stripes.push(curr);break;case"L":x=params[j++],y=params[j++],curr.push((lastX+lastX+x)/3,(lastY+lastY+y)/3,(lastX+x+x)/3,(lastY+y+y)/3,lastX=x,lastY=y);break;case"C":curr.push(params[j++],params[j++],params[j++],params[j++],lastX=params[j++],lastY=params[j++]);break;case"Z":x=startX,y=startY,curr.push((lastX+lastX+x)/3,(lastY+lastY+y)/3,(lastX+x+x)/3,(lastY+y+y)/3,lastX=x,lastY=y)}return stripes},updateSvgString:function(){for(var result=[],commands=this.commands,params=this.params,ln=commands.length,i=0,j=0;i<ln;i++)switch(commands[i]){case"M":result.push("M"+params[j]+","+params[j+1]),j+=2;break;case"L":result.push("L"+params[j]+","+params[j+1]),j+=2;break;case"C":result.push("C"+params[j]+","+params[j+1]+" "+params[j+2]+","+params[j+3]+" "+params[j+4]+","+params[j+5]),j+=6;break;case"Z":result.push("Z")}this.svgString=result.join("")},toString:function(){return this.svgString||this.updateSvgString(),this.svgString}}),Ext.define("Ext.draw.sprite.Path",{extend:Ext.draw.sprite.Sprite,alias:["sprite.path","Ext.draw.Sprite"],type:"path",isPath:!0,inheritableStatics:{def:{processors:{path:function(n,o){return n instanceof Ext.draw.Path||(n=new Ext.draw.Path(n)),n}},aliases:{d:"path"},triggers:{path:"bbox"},updaters:{path:function(attr){var path=attr.path;path&&path.bindAttr===attr||(((path=new Ext.draw.Path).bindAttr=attr).path=path),path.clear(),this.updatePath(path,attr),this.scheduleUpdater(attr,"bbox",["path"])}}}},updatePlainBBox:function(plain){this.attr.path&&this.attr.path.getDimension(plain)},updateTransformedBBox:function(transform){this.attr.path&&this.attr.path.getDimensionWithTransform(this.attr.matrix,transform)},render:function(surface,ctx){var mat=this.attr.matrix,attr=this.attr;attr.path&&0!==attr.path.params.length&&(mat.toContext(ctx),ctx.appendPath(attr.path),ctx.fillStroke(attr))},updatePath:function(path,attr){}}),Ext.define("Ext.draw.sprite.Circle",{extend:Ext.draw.sprite.Path,alias:"sprite.circle",type:"circle",inheritableStatics:{def:{processors:{cx:"number",cy:"number",r:"number"},aliases:{radius:"r",x:"cx",y:"cy",centerX:"cx",centerY:"cy"},defaults:{cx:0,cy:0,r:4},triggers:{cx:"path",cy:"path",r:"path"}}},updatePlainBBox:function(plain){var attr=this.attr,cx=attr.cx,cy=attr.cy,r=attr.r;plain.x=cx-r,plain.y=cy-r,plain.width=r+r,plain.height=r+r},updateTransformedBBox:function(transform){var rx,ry,attr=this.attr,cx=attr.cx,cy=attr.cy,r=attr.r,matrix=attr.matrix;rx=matrix.getScaleX()*r,ry=matrix.getScaleY()*r,transform.x=matrix.x(cx,cy)-rx,transform.y=matrix.y(cx,cy)-ry,transform.width=rx+rx,transform.height=ry+ry},updatePath:function(path,attr){path.arc(attr.cx,attr.cy,attr.r,0,2*Math.PI,!1)}}),Ext.define("Ext.draw.sprite.Arc",{extend:Ext.draw.sprite.Circle,alias:"sprite.arc",type:"arc",inheritableStatics:{def:{processors:{startAngle:"number",endAngle:"number",anticlockwise:"bool"},aliases:{from:"startAngle",to:"endAngle",start:"startAngle",end:"endAngle"},defaults:{startAngle:0,endAngle:2*Math.PI,anticlockwise:!1},triggers:{startAngle:"path",endAngle:"path",anticlockwise:"path"}}},updatePath:function(path,attr){path.arc(attr.cx,attr.cy,attr.r,attr.startAngle,attr.endAngle,attr.anticlockwise)}}),Ext.define("Ext.draw.sprite.Arrow",{extend:Ext.draw.sprite.Path,alias:"sprite.arrow",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(path,attr){var s=1.5*attr.size,x=attr.x-attr.lineWidth/2,y=attr.y;path.fromSvgString("M".concat(x-.7*s,",",y-.4*s,"l",[.6*s,0,0,.4*-s,s,.8*s,-s,.8*s,0,.4*-s,.6*-s,0],"z"))}}),Ext.define("Ext.draw.sprite.Composite",{extend:Ext.draw.sprite.Sprite,alias:"sprite.composite",type:"composite",isComposite:!0,config:{sprites:[]},constructor:function(){this.sprites=[],this.sprites.map={},this.callParent(arguments)},add:function(sprite){if(!sprite)return null;sprite.isSprite||((sprite=Ext.create("sprite."+sprite.type,sprite)).setParent(this),sprite.setSurface(this.getSurface()));var attr=this.attr,oldTransformations=sprite.applyTransformations;return sprite.applyTransformations=function(){sprite.attr.dirtyTransform&&(attr.dirtyTransform=!0,attr.bbox.plain.dirty=!0,attr.bbox.transform.dirty=!0),oldTransformations.call(sprite)},this.sprites.push(sprite),this.sprites.map[sprite.id]=sprite.getId(),attr.bbox.plain.dirty=!0,attr.bbox.transform.dirty=!0,sprite},updateSurface:function(surface){for(var i=0,ln=this.sprites.length;i<ln;i++)this.sprites[i].setSurface(surface)},addAll:function(sprites){if(sprites.isSprite||sprites.type)this.add(sprites);else if(Ext.isArray(sprites))for(var i=0;i<sprites.length;)this.add(sprites[i++])},updatePlainBBox:function(plain){var sprite,bbox,i,ln,left=1/0,right=-1/0,top=1/0,bottom=-1/0;for(i=0,ln=this.sprites.length;i<ln;i++)(sprite=this.sprites[i]).applyTransformations(),left>(bbox=sprite.getBBox()).x&&(left=bbox.x),right<bbox.x+bbox.width&&(right=bbox.x+bbox.width),top>bbox.y&&(top=bbox.y),bottom<bbox.y+bbox.height&&(bottom=bbox.y+bbox.height);plain.x=left,plain.y=top,plain.width=right-left,plain.height=bottom-top},render:function(surface,ctx,rect){var i,ln;for(this.attr.matrix.toContext(ctx),i=0,ln=this.sprites.length;i<ln;i++)surface.renderSprite(this.sprites[i],rect)},destroy:function(){var i,sprites=this.sprites,ln=sprites.length;for(this.callParent(),i=0;i<ln;i++)sprites[i].destroy();sprites.length=0}}),Ext.define("Ext.draw.sprite.Cross",{extend:Ext.draw.sprite.Path,alias:"sprite.cross",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(path,attr){var s=attr.size/1.7,x=attr.x-attr.lineWidth/2,y=attr.y;path.fromSvgString("M".concat(x-s,",",y,"l",[-s,-s,s,-s,s,s,s,-s,s,s,-s,s,s,s,-s,s,-s,-s,-s,s,-s,-s,"z"]))}}),Ext.define("Ext.draw.sprite.Diamond",{extend:Ext.draw.sprite.Path,alias:"sprite.diamond",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(path,attr){var s=1.25*attr.size,x=attr.x-attr.lineWidth/2,y=attr.y;path.fromSvgString(["M",x,y-s,"l",s,s,-s,s,-s,-s,s,-s,"z"])}}),Ext.define("Ext.draw.sprite.Ellipse",{extend:Ext.draw.sprite.Path,alias:"sprite.ellipse",type:"ellipse",inheritableStatics:{def:{processors:{cx:"number",cy:"number",rx:"number",ry:"number",axisRotation:"number"},aliases:{radius:"r",x:"cx",y:"cy",centerX:"cx",centerY:"cy",radiusX:"rx",radiusY:"ry"},defaults:{cx:0,cy:0,rx:1,ry:1,axisRotation:0},triggers:{cx:"path",cy:"path",rx:"path",ry:"path",axisRotation:"path"}}},updatePlainBBox:function(plain){var attr=this.attr,cx=attr.cx,cy=attr.cy,rx=attr.rx,ry=attr.ry;plain.x=cx-rx,plain.y=cy-ry,plain.width=rx+rx,plain.height=ry+ry},updateTransformedBBox:function(transform){var xx,xy,yx,yy,dx,dy,w,h,attr=this.attr,cx=attr.cx,cy=attr.cy,rx=attr.rx,rxy=attr.ry/rx,matrix=attr.matrix.clone();matrix.append(1,0,0,rxy,0,cy*(1-rxy)),xx=matrix.getXX(),yx=matrix.getYX(),dx=matrix.getDX(),xy=matrix.getXY(),yy=matrix.getYY(),dy=matrix.getDY(),w=Math.sqrt(xx*xx+yx*yx)*rx,h=Math.sqrt(xy*xy+yy*yy)*rx,transform.x=cx*xx+cy*yx+dx-w,transform.y=cx*xy+cy*yy+dy-h,transform.width=w+w,transform.height=h+h},updatePath:function(path,attr){path.ellipse(attr.cx,attr.cy,attr.rx,attr.ry,attr.axisRotation,0,2*Math.PI,!1)}}),Ext.define("Ext.draw.sprite.EllipticalArc",{extend:Ext.draw.sprite.Ellipse,alias:"sprite.ellipticalArc",type:"ellipticalArc",inheritableStatics:{def:{processors:{startAngle:"number",endAngle:"number",anticlockwise:"bool"},aliases:{from:"startAngle",to:"endAngle",start:"startAngle",end:"endAngle"},defaults:{startAngle:0,endAngle:2*Math.PI,anticlockwise:!1},triggers:{startAngle:"path",endAngle:"path",anticlockwise:"path"}}},updatePath:function(path,attr){path.ellipse(attr.cx,attr.cy,attr.rx,attr.ry,attr.axisRotation,attr.startAngle,attr.endAngle,attr.anticlockwise)}}),Ext.define("Ext.draw.sprite.Rect",{extend:Ext.draw.sprite.Path,alias:"sprite.rect",type:"rect",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number",radius:"number"},aliases:{},triggers:{x:"path",y:"path",width:"path",height:"path",radius:"path"},defaults:{x:0,y:0,width:8,height:8,radius:0}}},updatePlainBBox:function(plain){var attr=this.attr;plain.x=attr.x,plain.y=attr.y,plain.width=attr.width,plain.height=attr.height},updateTransformedBBox:function(transform,plain){this.attr.matrix.transformBBox(plain,this.attr.radius,transform)},updatePath:function(path,attr){var x=attr.x,y=attr.y,width=attr.width,height=attr.height,radius=Math.min(attr.radius,.5*Math.abs(attr.height),.5*Math.abs(attr.width));0===radius?path.rect(x,y,width,height):(path.moveTo(x+radius,y),path.arcTo(x+width,y,x+width,y+height,radius),path.arcTo(x+width,y+height,x,y+height,radius),path.arcTo(x,y+height,x,y,radius),path.arcTo(x,y,x+radius,y,radius))}}),Ext.define("Ext.draw.sprite.Image",{extend:Ext.draw.sprite.Rect,alias:"sprite.image",type:"image",statics:{imageLoaders:{}},inheritableStatics:{def:{processors:{src:"string"},defaults:{src:"",width:null,height:null}}},render:function(surface,ctx){var imageLoader,image,i,attr=this.attr,mat=attr.matrix,src=attr.src,x=attr.x,y=attr.y,width=attr.width,height=attr.height,loadingStub=Ext.draw.sprite.Image.imageLoaders[src];loadingStub&&loadingStub.done?(mat.toContext(ctx),image=loadingStub.image,ctx.drawImage(image,x,y,width||(image.naturalWidth||image.width)/surface.devicePixelRatio,height||(image.naturalHeight||image.height)/surface.devicePixelRatio)):loadingStub?(Ext.Array.include(loadingStub.pendingSprites,this),Ext.Array.include(loadingStub.pendingSurfaces,surface)):(imageLoader=new Image,loadingStub=Ext.draw.sprite.Image.imageLoaders[src]={image:imageLoader,done:!1,pendingSprites:[this],pendingSurfaces:[surface]},imageLoader.width=width,imageLoader.height=height,imageLoader.onload=function(){if(!loadingStub.done){for(loadingStub.done=!0,i=0;i<loadingStub.pendingSprites.length;i++)loadingStub.pendingSprites[i].setDirty(!0);for(i in loadingStub.pendingSurfaces)loadingStub.pendingSurfaces[i].renderFrame()}},imageLoader.src=src)}}),Ext.define("Ext.draw.sprite.Instancing",{extend:Ext.draw.sprite.Sprite,alias:"sprite.instancing",type:"instancing",isInstancing:!0,config:{template:null},instances:null,applyTemplate:function(template){return template.isSprite||(template.xclass||template.type||(template.type="circle"),template=Ext.create(template.xclass||"sprite."+template.type,template)),template.setParent(this),template},updateTemplate:function(template,oldTemplate){oldTemplate&&delete oldTemplate.ownAttr,template.setSurface(this.getSurface()),template.ownAttr=template.attr,this.clearAll()},updateSurface:function(surface){var template=this.getTemplate();template&&template.setSurface(surface)},get:function(index){return this.instances[index]},getCount:function(){return this.instances.length},clearAll:function(){this.getTemplate().attr.children=this.instances=[],this.position=0},createInstance:function(config,bypassNormalization,avoidCopy){var template=this.getTemplate(),originalAttr=template.attr,attr=Ext.Object.chain(originalAttr);return template.topModifier.prepareAttributes(attr),template.attr=attr,template.setAttributes(config,bypassNormalization,avoidCopy),attr.template=template,this.instances.push(attr),template.attr=originalAttr,this.position++,attr},getBBox:function(){return null},getBBoxFor:function(index,isWithoutTransform){var bbox,template=this.getTemplate(),originalAttr=template.attr;return template.attr=this.instances[index],bbox=template.getBBox(isWithoutTransform),template.attr=originalAttr,bbox},isVisible:function(){var attr=this.attr,parent=this.getParent();return!!(parent&&parent.isSurface&&!attr.hidden&&attr.globalAlpha)},isInstanceVisible:function(index){var template=this.getTemplate(),originalAttr=template.attr,instances=this.instances,result=!1;return!Ext.isNumber(index)||index<0||index>=instances.length||!this.isVisible()||(template.attr=instances[index],result=template.isVisible(point,options),template.attr=originalAttr),result},render:function(surface,ctx,clipRect,rect){var i,template=this.getTemplate(),mat=this.attr.matrix,originalAttr=template.attr,instances=this.instances,ln=this.position;for(mat.toContext(ctx),template.preRender(surface,ctx,clipRect,rect),template.useAttributes(ctx,rect),i=0;i<ln&&!instances[i].dirtyZIndex;i++);for(i=0;i<ln;i++)instances[i].hidden||(ctx.save(),template.attr=instances[i],template.useAttributes(ctx,rect),template.render(surface,ctx,clipRect,rect),ctx.restore());template.attr=originalAttr},setAttributesFor:function(index,changes,bypassNormalization){var template=this.getTemplate(),originalAttr=template.attr,attr=this.instances[index];attr&&(template.attr=attr,changes=bypassNormalization?Ext.apply({},changes):template.self.def.normalize(changes),template.topModifier.pushDown(attr,changes),template.attr=originalAttr)},destroy:function(){var template=this.getTemplate();this.instances=null,template&&template.destroy(),this.callParent()}}),Ext.define("Ext.draw.sprite.Line",{extend:Ext.draw.sprite.Sprite,alias:"sprite.line",type:"line",inheritableStatics:{def:{processors:{fromX:"number",fromY:"number",toX:"number",toY:"number"},defaults:{fromX:0,fromY:0,toX:1,toY:1,strokeStyle:"black"},aliases:{x1:"fromX",y1:"fromY",x2:"toX",y2:"toY"}}},updateLineBBox:function(bbox,isTransform,x1,y1,x2,y2){var fromX,fromY,toX,toY,p,attr=this.attr,matrix=attr.matrix,halfLineWidth=attr.lineWidth/2;isTransform&&(x1=(p=matrix.transformPoint([x1,y1]))[0],y1=p[1],x2=(p=matrix.transformPoint([x2,y2]))[0],y2=p[1]),fromX=Math.min(x1,x2),toX=Math.max(x1,x2),fromY=Math.min(y1,y2),toY=Math.max(y1,y2);var dx,dy,angle=Math.atan2(toX-fromX,toY-fromY),sin=Math.sin(angle);fromX-=dx=halfLineWidth*Math.cos(angle),fromY-=dy=halfLineWidth*sin,toX+=dx,toY+=dy,bbox.x=fromX,bbox.y=fromY,bbox.width=toX-fromX,bbox.height=toY-fromY},updatePlainBBox:function(plain){var attr=this.attr;this.updateLineBBox(plain,!1,attr.fromX,attr.fromY,attr.toX,attr.toY)},updateTransformedBBox:function(transform,plain){var attr=this.attr;this.updateLineBBox(transform,!0,attr.fromX,attr.fromY,attr.toX,attr.toY)},render:function(surface,ctx){var attr=this.attr;this.attr.matrix.toContext(ctx),ctx.beginPath(),ctx.moveTo(attr.fromX,attr.fromY),ctx.lineTo(attr.toX,attr.toY),ctx.stroke()}}),Ext.define("Ext.draw.sprite.Plus",{extend:Ext.draw.sprite.Path,alias:"sprite.plus",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(path,attr){var s=attr.size/1.3,x=attr.x-attr.lineWidth/2,y=attr.y;path.fromSvgString("M".concat(x-s/2,",",y-s/2,"l",[0,-s,s,0,0,s,s,0,0,s,-s,0,0,s,-s,0,0,-s,-s,0,0,-s,"z"]))}}),Ext.define("Ext.draw.sprite.Sector",{extend:Ext.draw.sprite.Path,alias:"sprite.sector",type:"sector",inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",margin:"number"},aliases:{rho:"endRho"},triggers:{centerX:"path,bbox",centerY:"path,bbox",startAngle:"path,bbox",endAngle:"path,bbox",startRho:"path,bbox",endRho:"path,bbox",margin:"path,bbox"},defaults:{centerX:0,centerY:0,startAngle:0,endAngle:0,startRho:0,endRho:150,margin:0,path:"M 0,0"}}},getMidAngle:function(){return this.midAngle||0},updatePath:function(path,attr){var startAngle=Math.min(attr.startAngle,attr.endAngle),endAngle=Math.max(attr.startAngle,attr.endAngle),midAngle=this.midAngle=.5*(startAngle+endAngle),margin=attr.margin,centerX=attr.centerX,centerY=attr.centerY,startRho=Math.min(attr.startRho,attr.endRho),endRho=Math.max(attr.startRho,attr.endRho);margin&&(centerX+=margin*Math.cos(midAngle),centerY+=margin*Math.sin(midAngle)),path.moveTo(centerX+startRho*Math.cos(startAngle),centerY+startRho*Math.sin(startAngle)),path.lineTo(centerX+endRho*Math.cos(startAngle),centerY+endRho*Math.sin(startAngle)),path.arc(centerX,centerY,endRho,startAngle,endAngle,!1),path.lineTo(centerX+startRho*Math.cos(endAngle),centerY+startRho*Math.sin(endAngle)),path.arc(centerX,centerY,startRho,endAngle,startAngle,!0)}}),Ext.define("Ext.draw.sprite.Square",{extend:Ext.draw.sprite.Rect,alias:"sprite.square",inheritableStatics:{def:{processors:{size:"number"},defaults:{size:4},triggers:{size:"size"},updaters:{size:function(attr){var size=attr.size,halfLineWidth=attr.lineWidth/2;this.setAttributes({x:attr.x-size-halfLineWidth,y:attr.y-size,height:2*size,width:2*size})}}}}}),Ext.define("Ext.draw.TextMeasurer",{singleton:!0,measureDiv:null,measureCache:{},precise:Ext.isIE8,measureDivTpl:{tag:"div",style:{overflow:"hidden",position:"relative",float:"left",width:0,height:0},children:{tag:"div",style:{display:"block",position:"absolute",x:-1e5,y:-1e5,padding:0,margin:0,"z-index":-1e5,"white-space":"nowrap"}}},actualMeasureText:function(text,font){var size,me=Ext.draw.TextMeasurer,measureDiv=me.measureDiv;if(!measureDiv){var parent=Ext.Element.create({style:{overflow:"hidden",position:"relative",float:"left",width:0,height:0}});me.measureDiv=measureDiv=Ext.Element.create({style:{position:"absolute",x:1e5,y:1e5,"z-index":-1e5,"white-space":"nowrap",display:"block",padding:0,margin:0}}),Ext.getBody().appendChild(parent),parent.appendChild(measureDiv)}return font&&measureDiv.setStyle({font:font,lineHeight:"normal"}),measureDiv.setText("("+text+")"),size=measureDiv.getSize(),measureDiv.setText("()"),size.width-=measureDiv.getSize().width,size},measureTextSingleLine:function(text,font){if(this.precise)return this.preciseMeasureTextSingleLine(text,font);text=text.toString();var cachedItem,charactor,i,ln,size,cache=this.measureCache,chars=text.split(""),width=0,height=0;if(cache[font]||(cache[font]={}),(cache=cache[font])[text])return cache[text];for(i=0,ln=chars.length;i<ln;i++)(cachedItem=cache[charactor=chars[i]])||(size=this.actualMeasureText(charactor,font),cachedItem=cache[charactor]=size),width+=cachedItem.width,height=Math.max(height,cachedItem.height);return cache[text]={width:width,height:height}},preciseMeasureTextSingleLine:function(text,font){text=text.toString();var measureDiv=this.measureDiv||(this.measureDiv=Ext.getBody().createChild(this.measureDivTpl).down("div"));return measureDiv.setStyle({font:font||""}),Ext.util.TextMetrics.measure(measureDiv,text)},measureText:function(text,font){var line,i,sizes,lines=text.split("\n"),ln=lines.length,height=0,width=0;if(1===ln)return this.measureTextSingleLine(text,font);for(sizes=[],i=0;i<ln;i++)line=this.measureTextSingleLine(lines[i],font),sizes.push(line),height+=line.height,width=Math.max(width,line.width);return{width:width,height:height,sizes:sizes}}}),Ext.define("Ext.draw.sprite.Text",function(){var fontSizes={"xx-small":!0,"x-small":!0,small:!0,medium:!0,large:!0,"x-large":!0,"xx-large":!0},fontWeights={normal:!0,bold:!0,bolder:!0,lighter:!0,100:!0,200:!0,300:!0,400:!0,500:!0,600:!0,700:!0,800:!0,900:!0},textAlignments={start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},textBaselines={top:"top",hanging:"hanging",middle:"middle",center:"middle",alphabetic:"alphabetic",ideographic:"ideographic",bottom:"bottom"};return{extend:Ext.draw.sprite.Sprite,alias:"sprite.text",type:"text",lineBreakRe:/\r?\n/g,inheritableStatics:{def:{animationProcessors:{text:"text"},processors:{x:"number",y:"number",text:"string",fontSize:function(n){return Ext.isNumber(+n)?n+"px":n.match(Ext.dom.Element.unitRe)||n in fontSizes?n:void 0},fontStyle:"enums(,italic,oblique)",fontVariant:"enums(,small-caps)",fontWeight:function(n){return n in fontWeights?String(n):""},fontFamily:"string",textAlign:function(n){return textAlignments[n]||"center"},textBaseline:function(n){return textBaselines[n]||"alphabetic"},font:"string"},aliases:{"font-size":"fontSize","font-family":"fontFamily","font-weight":"fontWeight","font-variant":"fontVariant","text-anchor":"textAlign"},defaults:{fontStyle:"",fontVariant:"",fontWeight:"",fontSize:"10px",fontFamily:"sans-serif",font:"10px sans-serif",textBaseline:"alphabetic",textAlign:"start",strokeStyle:"rgba(0, 0, 0, 0)",fillStyle:"#000",x:0,y:0,text:""},triggers:{fontStyle:"fontX,bbox",fontVariant:"fontX,bbox",fontWeight:"fontX,bbox",fontSize:"fontX,bbox",fontFamily:"fontX,bbox",font:"font,bbox,canvas",textBaseline:"bbox",textAlign:"bbox",x:"bbox",y:"bbox",text:"bbox"},updaters:{fontX:"makeFontShorthand",font:"parseFontShorthand"}}},constructor:function(config){if(config&&config.font)for(var key in config=Ext.clone(config))"font"!==key&&0===key.indexOf("font")&&delete config[key];Ext.draw.sprite.Sprite.prototype.constructor.call(this,config)},fontValuesMap:{italic:"fontStyle",oblique:"fontStyle","small-caps":"fontVariant",bold:"fontWeight",bolder:"fontWeight",lighter:"fontWeight",100:"fontWeight",200:"fontWeight",300:"fontWeight",400:"fontWeight",500:"fontWeight",600:"fontWeight",700:"fontWeight",800:"fontWeight",900:"fontWeight","xx-small":"fontSize","x-small":"fontSize",small:"fontSize",medium:"fontSize",large:"fontSize","x-large":"fontSize","xx-large":"fontSize"},makeFontShorthand:function(attr){var parts=[];attr.fontStyle&&parts.push(attr.fontStyle),attr.fontVariant&&parts.push(attr.fontVariant),attr.fontWeight&&parts.push(attr.fontWeight),attr.fontSize&&parts.push(attr.fontSize),attr.fontFamily&&parts.push(attr.fontFamily),this.setAttributes({font:parts.join(" ")},!0)},parseFontShorthand:function(attr){for(var end,slashIndex,part,fontProperty,value=attr.font,ln=value.length,changes={},dispatcher=this.fontValuesMap,start=0;start<ln&&-1!==end;){if((end=value.indexOf(" ",start))<0)part=value.substr(start);else{if(!(start<end))continue;part=value.substr(start,end-start)}if(0<(slashIndex=part.indexOf("/")))part=part.substr(0,slashIndex);else if(0===slashIndex)continue;if("normal"!==part&&"inherit"!==part)if(fontProperty=dispatcher[part])changes[fontProperty]=part;else{if(!part.match(Ext.dom.Element.unitRe)){changes.fontFamily=value.substr(start);break}changes.fontSize=part}start=end+1}changes.fontStyle||(changes.fontStyle=""),changes.fontVariant||(changes.fontVariant=""),changes.fontWeight||(changes.fontWeight=""),this.setAttributes(changes,!0)},fontProperties:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,fontFamily:!0},setAttributes:function(changes,bypassNormalization,avoidCopy){var key,obj;if(changes&&changes.font){for(key in obj={},changes)key in this.fontProperties||(obj[key]=changes[key]);changes=obj}this.callParent([changes,bypassNormalization,avoidCopy])},getBBox:function(isWithoutTransform){var me=this,plain=me.attr.bbox.plain,surface=me.getSurface();return plain.dirty&&(me.updatePlainBBox(plain),plain.dirty=!1),surface.getInherited().rtl&&surface.getFlipRtlText()&&me.updatePlainBBox(plain,!0),me.callParent([isWithoutTransform])},rtlAlignments:{start:"end",center:"center",end:"start"},updatePlainBBox:function(plain,useOldSize){var lineWidth,me=this,attr=me.attr,x=attr.x,y=attr.y,dx=[],font=attr.font,text=attr.text,baseline=attr.textBaseline,alignment=attr.textAlign,size=useOldSize&&me.oldSize?me.oldSize:me.oldSize=Ext.draw.TextMeasurer.measureText(text,font),surface=me.getSurface(),isRtl=surface.getInherited().rtl,flipRtlText=isRtl&&surface.getFlipRtlText(),rect=surface.getRect(),sizes=size.sizes,blockHeight=size.height,blockWidth=size.width,ln=sizes?sizes.length:0,i=0;switch(baseline){case"hanging":case"top":break;case"ideographic":case"bottom":y-=blockHeight;break;case"alphabetic":y-=.8*blockHeight;break;case"middle":y-=.5*blockHeight}switch(flipRtlText&&(x=rect[2]-rect[0]-x,alignment=me.rtlAlignments[alignment]),alignment){case"start":if(isRtl)for(;i<ln;i++)lineWidth=sizes[i].width,dx.push(-(blockWidth-lineWidth));break;case"end":if(x-=blockWidth,isRtl)break;for(;i<ln;i++)lineWidth=sizes[i].width,dx.push(blockWidth-lineWidth);break;case"center":for(x-=.5*blockWidth;i<ln;i++)lineWidth=sizes[i].width,dx.push((isRtl?-1:1)*(blockWidth-lineWidth)*.5)}attr.textAlignOffsets=dx,plain.x=x,plain.y=y,plain.width=blockWidth,plain.height=blockHeight},setText:function(text){this.setAttributes({text:text},!0)},render:function(surface,ctx,rect){var x,y,i,lines,lineHeight,attr=this.attr,mat=Ext.draw.Matrix.fly(attr.matrix.elements.slice(0)),bbox=this.getBBox(!0),dx=attr.textAlignOffsets,none=Ext.draw.Color.RGBA_NONE;if(0!==attr.text.length)for(lines=attr.text.split(this.lineBreakRe),lineHeight=bbox.height/lines.length,x=attr.bbox.plain.x,y=attr.bbox.plain.y+.78*lineHeight,mat.toContext(ctx),surface.getInherited().rtl&&(x+=attr.bbox.plain.width),i=0;i<lines.length;i++)ctx.fillStyle!==none&&ctx.fillText(lines[i],x+(dx[i]||0),y+lineHeight*i),ctx.strokeStyle!==none&&ctx.strokeText(lines[i],x+(dx[i]||0),y+lineHeight*i)}}}),Ext.define("Ext.draw.sprite.Tick",{extend:Ext.draw.sprite.Line,alias:"sprite.tick",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"tick",y:"tick",size:"tick"},updaters:{tick:function(attr){var size=1.5*attr.size,halfLineWidth=attr.lineWidth/2,x=attr.x,y=attr.y;this.setAttributes({fromX:x-halfLineWidth,fromY:y-size,toX:x-halfLineWidth,toY:y+size})}}}}}),Ext.define("Ext.draw.sprite.Triangle",{extend:Ext.draw.sprite.Path,alias:"sprite.triangle",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(path,attr){var s=2.2*attr.size,x=attr.x,y=attr.y;path.fromSvgString("M".concat(x,",",y,"m0-",.58*s,"l",.5*s,",",.87*s,"-",s,",0z"))}}),Ext.define("Ext.draw.gradient.Linear",{extend:Ext.draw.gradient.Gradient,type:"linear",config:{degrees:0,radians:0},applyRadians:function(radians,oldRadians){return Ext.isNumber(radians)?radians:oldRadians},applyDegrees:function(degrees,oldDegrees){return Ext.isNumber(degrees)?degrees:oldDegrees},updateRadians:function(radians){this.setDegrees(Ext.draw.Draw.degrees(radians))},updateDegrees:function(degrees){this.setRadians(Ext.draw.Draw.rad(degrees))},generateGradient:function(ctx,bbox){var gradient,l,i,angle=this.getRadians(),cos=Math.cos(angle),sin=Math.sin(angle),w=bbox.width,h=bbox.height,cx=bbox.x+.5*w,cy=bbox.y+.5*h,stops=this.getStops(),ln=stops.length;if(Ext.isNumber(cx+cy)&&0<h&&0<w){for(l=Math.sqrt(h*h+w*w)*Math.abs(Math.cos(angle-Math.atan(h/w)))/2,gradient=ctx.createLinearGradient(cx+cos*l,cy+sin*l,cx-cos*l,cy-sin*l),i=0;i<ln;i++)gradient.addColorStop(stops[i].offset,stops[i].color);return gradient}return Ext.draw.Color.NONE}}),Ext.define("Ext.draw.gradient.Radial",{extend:Ext.draw.gradient.Gradient,type:"radial",config:{start:{x:0,y:0,r:0},end:{x:0,y:0,r:1}},applyStart:function(newStart,oldStart){if(!oldStart)return newStart;var circle={x:oldStart.x,y:oldStart.y,r:oldStart.r};return"x"in newStart?circle.x=newStart.x:"centerX"in newStart&&(circle.x=newStart.centerX),"y"in newStart?circle.y=newStart.y:"centerY"in newStart&&(circle.y=newStart.centerY),"r"in newStart?circle.r=newStart.r:"radius"in newStart&&(circle.r=newStart.radius),circle},applyEnd:function(newEnd,oldEnd){if(!oldEnd)return newEnd;var circle={x:oldEnd.x,y:oldEnd.y,r:oldEnd.r};return"x"in newEnd?circle.x=newEnd.x:"centerX"in newEnd&&(circle.x=newEnd.centerX),"y"in newEnd?circle.y=newEnd.y:"centerY"in newEnd&&(circle.y=newEnd.centerY),"r"in newEnd?circle.r=newEnd.r:"radius"in newEnd&&(circle.r=newEnd.radius),circle},generateGradient:function(ctx,bbox){var i,start=this.getStart(),end=this.getEnd(),w=.5*bbox.width,h=.5*bbox.height,x=bbox.x+w,y=bbox.y+h,gradient=ctx.createRadialGradient(x+start.x*w,y+start.y*h,start.r*Math.max(w,h),x+end.x*w,y+end.y*h,end.r*Math.max(w,h)),stops=this.getStops(),ln=stops.length;for(i=0;i<ln;i++)gradient.addColorStop(stops[i].offset,stops[i].color);return gradient}}),Ext.define("Ext.draw.Surface",{extend:Ext.draw.SurfaceBase,xtype:"surface",devicePixelRatio:window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,deprecated:{"5.1.0":{statics:{methods:{stableSort:function(list){return Ext.Array.sort(list,function(a,b){return a.attr.zIndex-b.attr.zIndex})}}}}},config:{cls:Ext.baseCSSPrefix+"surface",rect:null,background:null,items:[],dirty:!1,flipRtlText:!1},isSurface:!0,isPendingRenderFrame:!1,dirtyPredecessorCount:0,constructor:function(config){var me=this;me.predecessors=[],me.successors=[],me.map={},me.callParent([config]),me.matrix=new Ext.draw.Matrix,me.inverseMatrix=me.matrix.inverse()},roundPixel:function(num){return Math.round(this.devicePixelRatio*num)/this.devicePixelRatio},waitFor:function(surface){var predecessors=this.predecessors;Ext.Array.contains(predecessors,surface)||(predecessors.push(surface),surface.successors.push(this),surface.getDirty()&&this.dirtyPredecessorCount++)},updateDirty:function(dirty){for(var successor,successors=this.successors,ln=successors.length,i=0;i<ln;i++)successor=successors[i],dirty?(successor.dirtyPredecessorCount++,successor.setDirty(!0)):(successor.dirtyPredecessorCount--,0===successor.dirtyPredecessorCount&&successor.isPendingRenderFrame&&successor.renderFrame())},applyBackground:function(background,oldBackground){return this.setDirty(!0),Ext.isString(background)&&(background={fillStyle:background}),Ext.factory(background,Ext.draw.sprite.Rect,oldBackground)},applyRect:function(rect,oldRect){if(!oldRect||rect[0]!==oldRect[0]||rect[1]!==oldRect[1]||rect[2]!==oldRect[2]||rect[3]!==oldRect[3])return Ext.isArray(rect)?[rect[0],rect[1],rect[2],rect[3]]:Ext.isObject(rect)?[rect.x||rect.left,rect.y||rect.top,rect.width||rect.right-rect.left,rect.height||rect.bottom-rect.top]:void 0},updateRect:function(rect){var l=rect[0],t=rect[1],r=l+rect[2],b=t+rect[3],background=this.getBackground(),element=this.element;element.setLocalXY(Math.floor(l),Math.floor(t)),element.setSize(Math.ceil(r-Math.floor(l)),Math.ceil(b-Math.floor(t))),background&&background.setAttributes({x:0,y:0,width:Math.ceil(r-Math.floor(l)),height:Math.ceil(b-Math.floor(t))}),this.setDirty(!0)},resetTransform:function(){this.matrix.set(1,0,0,1,0,0),this.inverseMatrix.set(1,0,0,1,0,0),this.setDirty(!0)},get:function(id){return this.map[id]||this.getItems()[id]},add:function(){var items,item,sprite,i,ln,me=this,args=Array.prototype.slice.call(arguments),argIsArray=Ext.isArray(args[0]),map=me.map,results=[];if(!(items=Ext.Array.clean(argIsArray?args[0]:args)).length)return results;for(i=0,ln=items.length;i<ln;i++)sprite=null,(item=items[i]).isSprite&&!map[item.getId()]?sprite=item:map[item.id]||(sprite=this.createItem(item)),sprite&&(map[sprite.getId()]=sprite,results.push(sprite),sprite.setParent(me),sprite.setSurface(me),me.onAdd(sprite));return(items=me.getItems())&&items.push.apply(items,results),me.dirtyZIndex=!0,me.setDirty(!0),argIsArray||1!==results.length?results:results[0]},onAdd:Ext.emptyFn,remove:function(sprite,isDestroy){var id,isOwnSprite,me=this;if(sprite){if(sprite.charAt&&(sprite=me.map[sprite]),!sprite||!sprite.isSprite)return null;if(sprite.isDestroyed||sprite.isDestroying)return sprite;if(id=sprite.getId(),isOwnSprite=me.map[id],delete me.map[id],isDestroy&&sprite.destroy(),!isOwnSprite)return sprite;sprite.setParent(null),sprite.setSurface(null),Ext.Array.remove(me.getItems(),sprite),me.dirtyZIndex=!0,me.setDirty(!0)}return sprite||null},removeAll:function(isDestroy){var item,items=this.getItems(),i=items.length-1;if(isDestroy)for(;0<=i;i--)items[i].destroy();else for(;0<=i;i--)(item=items[i]).setParent(null),item.setSurface(null);items.length=0,this.map={},this.dirtyZIndex=!0},applyItems:function(items){return this.getItems()&&this.removeAll(!0),Ext.Array.from(this.add(items))},createItem:function(config){return Ext.create(config.xclass||"sprite."+config.type,config)},getBBox:function(sprites,isWithoutTransform){var bbox,i,ln,left=1/0,right=-1/0,top=1/0,bottom=-1/0;for(i=0,ln=(sprites=Ext.Array.from(sprites)).length;i<ln;i++)left>(bbox=sprites[i].getBBox(isWithoutTransform)).x&&(left=bbox.x),right<bbox.x+bbox.width&&(right=bbox.x+bbox.width),top>bbox.y&&(top=bbox.y),bottom<bbox.y+bbox.height&&(bottom=bbox.y+bbox.height);return{x:left,y:top,width:right-left,height:bottom-top}},emptyRect:[0,0,0,0],getEventXY:function(e){var width,isRtl=this.getInherited().rtl,pageXY=e.getXY(),container=this.getOwnerBody(),xy=container.getXY(),rect=this.getRect()||this.emptyRect,result=[];return isRtl?(width=container.getWidth(),result[0]=xy[0]-pageXY[0]-rect[0]+width):result[0]=pageXY[0]-xy[0]-rect[0],result[1]=pageXY[1]-xy[1]-rect[1],result},clear:Ext.emptyFn,orderByZIndex:function(){var i,ln,items=this.getItems(),dirtyZIndex=!1;if(this.getDirty()){for(i=0,ln=items.length;i<ln;i++)if(items[i].attr.dirtyZIndex){dirtyZIndex=!0;break}for(dirtyZIndex&&(Ext.Array.sort(items,function(a,b){return a.attr.zIndex-b.attr.zIndex}),this.setDirty(!0)),i=0,ln=items.length;i<ln;i++)items[i].attr.dirtyZIndex=!1}},repaint:function(){var me=this;me.repaint=Ext.emptyFn,Ext.defer(function(){delete me.repaint,me.element.repaint()},1)},renderFrame:function(){var me=this;if(me.element)if(0<me.dirtyPredecessorCount)me.isPendingRenderFrame=!0;else{var item,i,ln,rect=me.getRect(),background=me.getBackground(),items=me.getItems();if(rect&&(me.orderByZIndex(),me.getDirty())){for(me.clear(),me.clearTransform(),background&&me.renderSprite(background),i=0,ln=items.length;i<ln;i++){if(item=items[i],!1===me.renderSprite(item))return;item.attr.textPositionCount=me.textPosition}me.setDirty(!1)}}},renderSprite:Ext.emptyFn,clearTransform:Ext.emptyFn,destroy:function(){this.removeAll(!0),this.predecessors=null,this.successors=null,this.callParent()}}),Ext.define("Ext.draw.engine.SvgContext",{toSave:["strokeOpacity","strokeStyle","fillOpacity","fillStyle","globalAlpha","lineWidth","lineCap","lineJoin","lineDash","lineDashOffset","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","globalCompositeOperation","position","fillGradient","strokeGradient"],strokeOpacity:1,strokeStyle:"none",fillOpacity:1,fillStyle:"none",lineDash:[],lineDashOffset:0,globalAlpha:1,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"none",globalCompositeOperation:"src",urlStringRe:/^url\(#([\w\-]+)\)$/,constructor:function(SvgSurface){this.surface=SvgSurface,this.state=[],this.matrix=new Ext.draw.Matrix,this.path=null,this.clear()},clear:function(){this.group=this.surface.mainGroup,this.position=0,this.path=null},getElement:function(tag){return this.surface.getSvgElement(this.group,tag,this.position++)},removeElement:function(element){var fill,stroke,fillMatch,strokeMatch,gradients,gradient,key;if(element=Ext.fly(element)){if("g"===element.dom.tagName)for(key in gradients=element.dom.gradients)gradients[key].destroy();else fill=element.getAttribute("fill"),stroke=element.getAttribute("stroke"),fillMatch=fill&&fill.match(this.urlStringRe),strokeMatch=stroke&&stroke.match(this.urlStringRe),fillMatch&&fillMatch[1]&&(gradient=Ext.fly(fillMatch[1]))&&gradient.destroy(),strokeMatch&&strokeMatch[1]&&(gradient=Ext.fly(strokeMatch[1]))&&gradient.destroy();element.destroy()}},save:function(){var key,i,toSave=this.toSave,obj={},group=this.getElement("g");for(i=0;i<toSave.length;i++)(key=toSave[i])in this&&(obj[key]=this[key]);return this.position=0,obj.matrix=this.matrix.clone(),this.state.push(obj),this.group=group},restore:function(){for(var key,i,toSave=this.toSave,obj=this.state.pop(),children=this.group.dom.childNodes;children.length>this.position;)this.removeElement(children[children.length-1]);for(i=0;i<toSave.length;i++)(key=toSave[i])in obj?this[key]=obj[key]:delete this[key];this.setTransform.apply(this,obj.matrix.elements),this.group=this.group.getParent()},transform:function(xx,yx,xy,yy,dx,dy){if(this.path){var inv=Ext.draw.Matrix.fly([xx,yx,xy,yy,dx,dy]).inverse();this.path.transform(inv)}this.matrix.append(xx,yx,xy,yy,dx,dy)},setTransform:function(xx,yx,xy,yy,dx,dy){this.path&&this.path.transform(this.matrix),this.matrix.reset(),this.transform(xx,yx,xy,yy,dx,dy)},scale:function(x,y){this.transform(x,0,0,y,0,0)},rotate:function(angle){var xx=Math.cos(angle),yx=Math.sin(angle),xy=-Math.sin(angle),yy=Math.cos(angle);this.transform(xx,yx,xy,yy,0,0)},translate:function(x,y){this.transform(1,0,0,1,x,y)},setGradientBBox:function(bbox){this.bbox=bbox},beginPath:function(){this.path=new Ext.draw.Path},moveTo:function(x,y){this.path||this.beginPath(),this.path.moveTo(x,y),this.path.element=null},lineTo:function(x,y){this.path||this.beginPath(),this.path.lineTo(x,y),this.path.element=null},rect:function(x,y,width,height){this.moveTo(x,y),this.lineTo(x+width,y),this.lineTo(x+width,y+height),this.lineTo(x,y+height),this.closePath()},strokeRect:function(x,y,width,height){this.beginPath(),this.rect(x,y,width,height),this.stroke()},fillRect:function(x,y,width,height){this.beginPath(),this.rect(x,y,width,height),this.fill()},closePath:function(){this.path||this.beginPath(),this.path.closePath(),this.path.element=null},arcSvg:function(r1,r2,rotation,large,swipe,x2,y2){this.path||this.beginPath(),this.path.arcSvg(r1,r2,rotation,large,swipe,x2,y2),this.path.element=null},arc:function(x,y,radius,startAngle,endAngle,anticlockwise){this.path||this.beginPath(),this.path.arc(x,y,radius,startAngle,endAngle,anticlockwise),this.path.element=null},ellipse:function(x,y,radiusX,radiusY,rotation,startAngle,endAngle,anticlockwise){this.path||this.beginPath(),this.path.ellipse(x,y,radiusX,radiusY,rotation,startAngle,endAngle,anticlockwise),this.path.element=null},arcTo:function(x1,y1,x2,y2,radiusX,radiusY,rotation){this.path||this.beginPath(),this.path.arcTo(x1,y1,x2,y2,radiusX,radiusY,rotation),this.path.element=null},bezierCurveTo:function(x1,y1,x2,y2,x3,y3){this.path||this.beginPath(),this.path.bezierCurveTo(x1,y1,x2,y2,x3,y3),this.path.element=null},strokeText:function(text,x,y){if(text=String(text),this.strokeStyle){var element=this.getElement("text"),tspan=this.surface.getSvgElement(element,"tspan",0);this.surface.setElementAttributes(element,{x:x,y:y,transform:this.matrix.toSvg(),stroke:this.strokeStyle,fill:"none",opacity:this.globalAlpha,"stroke-opacity":this.strokeOpacity,style:"font: "+this.font,"stroke-dasharray":this.lineDash.join(","),"stroke-dashoffset":this.lineDashOffset}),this.lineDash.length&&this.surface.setElementAttributes(element,{"stroke-dasharray":this.lineDash.join(","),"stroke-dashoffset":this.lineDashOffset}),tspan.dom.firstChild&&tspan.dom.removeChild(tspan.dom.firstChild),this.surface.setElementAttributes(tspan,{"alignment-baseline":"alphabetic"}),tspan.dom.appendChild(document.createTextNode(Ext.String.htmlDecode(text)))}},fillText:function(text,x,y){if(text=String(text),this.fillStyle){var element=this.getElement("text"),tspan=this.surface.getSvgElement(element,"tspan",0);this.surface.setElementAttributes(element,{x:x,y:y,transform:this.matrix.toSvg(),fill:this.fillStyle,opacity:this.globalAlpha,"fill-opacity":this.fillOpacity,style:"font: "+this.font}),tspan.dom.firstChild&&tspan.dom.removeChild(tspan.dom.firstChild),this.surface.setElementAttributes(tspan,{"alignment-baseline":"alphabetic"}),tspan.dom.appendChild(document.createTextNode(Ext.String.htmlDecode(text)))}},drawImage:function(image,sx,sy,sw,sh,dx,dy,dw,dh){var element=this.getElement("image"),x=sx,y=sy,width=void 0===sw?image.width:sw,height=void 0===sh?image.height:sh,viewBox=null;void 0!==dh&&(viewBox=sx+" "+sy+" "+sw+" "+sh,x=dx,y=dy,width=dw,height=dh),element.dom.setAttributeNS("http://www.w3.org/1999/xlink","href",image.src),this.surface.setElementAttributes(element,{viewBox:viewBox,x:x,y:y,width:width,height:height,opacity:this.globalAlpha,transform:this.matrix.toSvg()})},fill:function(){if(this.path&&this.fillStyle){var path,fillGradient=this.fillGradient,bbox=this.bbox,element=this.path.element;element||(path=this.path.toString(),element=this.path.element=this.getElement("path"),this.surface.setElementAttributes(element,{d:path,transform:this.matrix.toSvg()})),this.surface.setElementAttributes(element,{fill:fillGradient&&bbox?fillGradient.generateGradient(this,bbox):this.fillStyle,"fill-opacity":this.fillOpacity*this.globalAlpha})}},stroke:function(){if(this.path&&this.strokeStyle){var path,strokeGradient=this.strokeGradient,bbox=this.bbox,element=this.path.element;if(!element||!this.path.svgString){if(!(path=this.path.toString()))return;element=this.path.element=this.getElement("path"),this.surface.setElementAttributes(element,{fill:"none",d:path,transform:this.matrix.toSvg()})}this.surface.setElementAttributes(element,{stroke:strokeGradient&&bbox?strokeGradient.generateGradient(this,bbox):this.strokeStyle,"stroke-linecap":this.lineCap,"stroke-linejoin":this.lineJoin,"stroke-width":this.lineWidth,"stroke-opacity":this.strokeOpacity*this.globalAlpha,"stroke-dasharray":this.lineDash.join(","),"stroke-dashoffset":this.lineDashOffset}),this.lineDash.length&&this.surface.setElementAttributes(element,{"stroke-dasharray":this.lineDash.join(","),"stroke-dashoffset":this.lineDashOffset})}},fillStroke:function(attr,transformFillStroke){var fillStyle=this.fillStyle,strokeStyle=this.strokeStyle,fillOpacity=this.fillOpacity,strokeOpacity=this.strokeOpacity;void 0===transformFillStroke&&(transformFillStroke=attr.transformFillStroke),transformFillStroke||attr.inverseMatrix.toContext(this),fillStyle&&0!==fillOpacity&&this.fill(),strokeStyle&&0!==strokeOpacity&&this.stroke()},appendPath:function(path){this.path=path.clone()},setLineDash:function(lineDash){this.lineDash=lineDash},getLineDash:function(){return this.lineDash},createLinearGradient:function(x0,y0,x1,y1){var gradient,me=this,element=me.surface.getNextDef("linearGradient"),gradients=me.group.dom.gradients||(me.group.dom.gradients={});return me.surface.setElementAttributes(element,{x1:x0,y1:y0,x2:x1,y2:y1,gradientUnits:"userSpaceOnUse"}),gradient=new Ext.draw.engine.SvgContext.Gradient(me,me.surface,element),gradients[element.dom.id]=gradient},createRadialGradient:function(x0,y0,r0,x1,y1,r1){var gradient,me=this,element=me.surface.getNextDef("radialGradient"),gradients=me.group.dom.gradients||(me.group.dom.gradients={});return me.surface.setElementAttributes(element,{fx:x0,fy:y0,cx:x1,cy:y1,r:r1,gradientUnits:"userSpaceOnUse"}),gradient=new Ext.draw.engine.SvgContext.Gradient(me,me.surface,element,r0/r1),gradients[element.dom.id]=gradient}}),Ext.define("Ext.draw.engine.SvgContext.Gradient",{statics:{map:{}},constructor:function(ctx,surface,element,compression){var oldInstance,map=this.statics().map;(oldInstance=map[element.dom.id])&&(oldInstance.element=null),(map[element.dom.id]=this).ctx=ctx,this.surface=surface,this.element=element,this.position=0,this.compression=compression||0},addColorStop:function(offset,color){var stop=this.surface.getSvgElement(this.element,"stop",this.position++),compression=this.compression;this.surface.setElementAttributes(stop,{offset:(100*((1-compression)*offset+compression)).toFixed(2)+"%","stop-color":color,"stop-opacity":Ext.draw.Color.fly(color).a.toFixed(15)})},toString:function(){for(var children=this.element.dom.childNodes;children.length>this.position;)Ext.fly(children[children.length-1]).destroy();return"url(#"+this.element.getId()+")"},destroy:function(){var map=this.statics().map,element=this.element;element&&element.dom&&(delete map[element.dom.id],element.destroy()),this.callParent()}}),Ext.define("Ext.draw.engine.Svg",{extend:Ext.draw.Surface,statics:{BBoxTextCache:{}},config:{highPrecision:!1},getElementConfig:function(){return{reference:"element",style:{position:"absolute"},children:[{reference:"innerElement",style:{width:"100%",height:"100%",position:"relative"},children:[{tag:"svg",reference:"svgElement",namespace:"http://www.w3.org/2000/svg",width:"100%",height:"100%",version:1.1}]}]}},constructor:function(config){var me=this;me.callParent([config]),me.mainGroup=me.createSvgNode("g"),me.defElement=me.createSvgNode("defs"),me.svgElement.appendChild(me.mainGroup),me.svgElement.appendChild(me.defElement),me.ctx=new Ext.draw.engine.SvgContext(me)},createSvgNode:function(type){var node=document.createElementNS("http://www.w3.org/2000/svg",type);return Ext.get(node)},getSvgElement:function(group,tag,position){var element;if(group.dom.childNodes.length>position){if((element=group.dom.childNodes[position]).tagName===tag)return Ext.get(element);Ext.destroy(element)}return element=Ext.get(this.createSvgNode(tag)),0===position?group.insertFirst(element):element.insertAfter(Ext.fly(group.dom.childNodes[position-1])),element.cache={},element},setElementAttributes:function(element,attributes){var name,value,dom=element.dom,cache=element.cache;for(name in attributes)value=attributes[name],cache[name]!==value&&(cache[name]=value,dom.setAttribute(name,value))},getNextDef:function(tagName){return this.getSvgElement(this.defElement,tagName,this.defPosition++)},clearTransform:function(){this.mainGroup.set({transform:this.matrix.toSvg()})},clear:function(){this.ctx.clear(),this.defPosition=0},renderSprite:function(sprite){var rect=this.getRect(),ctx=this.ctx;return sprite.attr.hidden||0===sprite.attr.globalAlpha?(ctx.save(),void ctx.restore()):(sprite.element=ctx.save(),sprite.preRender(this),sprite.useAttributes(ctx,rect),!1!==sprite.render(this,ctx,[0,0,rect[2],rect[3]])&&(sprite.setDirty(!1),void ctx.restore()))},flatten:function(size,surfaces){var surface,rect,i,svg='<?xml version="1.0" standalone="yes"?>',className=Ext.getClassName(this);for(svg+='<svg version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" width="'+size.width+'" height="'+size.height+'">',i=0;i<surfaces.length;i++)surface=surfaces[i],Ext.getClassName(surface)===className&&(svg+='<g transform="translate('+(rect=surface.getRect())[0]+","+rect[1]+')">',svg+=this.serializeNode(surface.svgElement.dom),svg+="</g>");return svg+="</svg>",{data:"data:image/svg+xml;utf8,"+encodeURIComponent(svg),type:"svg"}},serializeNode:function(node){var i,n,attr,child,result="";if(node.nodeType===document.TEXT_NODE)return node.nodeValue;if(result+="<"+node.nodeName,node.attributes.length)for(i=0,n=node.attributes.length;i<n;i++)result+=" "+(attr=node.attributes[i]).name+'="'+attr.value+'"';if(result+=">",node.childNodes&&node.childNodes.length)for(i=0,n=node.childNodes.length;i<n;i++)child=node.childNodes[i],result+=this.serializeNode(child);return result+="</"+node.nodeName+">"},destroy:function(){var me=this;me.ctx.destroy(),me.mainGroup.destroy(),delete me.mainGroup,delete me.ctx,me.callParent()},remove:function(sprite,destroySprite){sprite&&sprite.element&&(this.ctx?this.ctx.removeElement(sprite.element):sprite.element.destroy(),sprite.element=null),this.callParent(arguments)}}),Ext.draw||(Ext.draw={}),Ext.draw.engine||(Ext.draw.engine={}),Ext.draw.engine.excanvas=!0,document.createElement("canvas").getContext||function(){var m=Math,mr=m.round,ms=m.sin,mc=m.cos,abs=m.abs,sqrt=m.sqrt,Z=10,Z2=Z/2;navigator.userAgent.match(/MSIE ([\d.]+)?/)[1];function getContext(){return this.context_||(this.context_=new CanvasRenderingContext2D_(this))}var slice=Array.prototype.slice;function encodeHtmlAttribute(s){return String(s).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function addNamespace(doc,prefix,urn){Ext.onReady(function(){doc.namespaces[prefix]||doc.namespaces.add(prefix,urn,"#default#VML")})}function addNamespacesAndStylesheet(doc){if(addNamespace(doc,"g_vml_","urn:schemas-microsoft-com:vml"),addNamespace(doc,"g_o_","urn:schemas-microsoft-com:office:office"),!doc.styleSheets.ex_canvas_){var ss=doc.createStyleSheet();ss.owningElement.id="ex_canvas_",ss.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}addNamespacesAndStylesheet(document);var G_vmlCanvasManager_={init:function(opt_doc){var doc=opt_doc||document;doc.createElement("canvas"),doc.attachEvent("onreadystatechange",function(f,obj,var_args){var a=slice.call(arguments,2);return function(){return f.apply(obj,a.concat(slice.call(arguments)))}}(this.init_,this,doc))},init_:function(doc){for(var els=doc.getElementsByTagName("canvas"),i=0;i<els.length;i++)this.initElement(els[i])},initElement:function(el){if(!el.getContext){el.getContext=getContext,addNamespacesAndStylesheet(el.ownerDocument),el.innerHTML="",el.attachEvent("onpropertychange",onPropertyChange),el.attachEvent("onresize",onResize);var attrs=el.attributes;attrs.width&&attrs.width.specified?el.style.width=attrs.width.nodeValue+"px":el.width=el.clientWidth,attrs.height&&attrs.height.specified?el.style.height=attrs.height.nodeValue+"px":el.height=el.clientHeight}return el}};function onPropertyChange(e){var el=e.srcElement;switch(e.propertyName){case"width":el.getContext().clearRect(),el.style.width=el.attributes.width.nodeValue+"px",el.firstChild.style.width=el.clientWidth+"px";break;case"height":el.getContext().clearRect(),el.style.height=el.attributes.height.nodeValue+"px",el.firstChild.style.height=el.clientHeight+"px"}}function onResize(e){var el=e.srcElement;el.firstChild&&(el.firstChild.style.width=el.clientWidth+"px",el.firstChild.style.height=el.clientHeight+"px")}G_vmlCanvasManager_.init();for(var decToHex=[],i=0;i<16;i++)for(var j=0;j<16;j++)decToHex[16*i+j]=i.toString(16)+j.toString(16);function createMatrixIdentity(){return[[1,0,0],[0,1,0],[0,0,1]]}function matrixMultiply(m1,m2){for(var result=createMatrixIdentity(),x=0;x<3;x++)for(var y=0;y<3;y++){for(var sum=0,z=0;z<3;z++)sum+=m1[x][z]*m2[z][y];result[x][y]=sum}return result}function copyState(o1,o2){o2.fillStyle=o1.fillStyle,o2.lineCap=o1.lineCap,o2.lineJoin=o1.lineJoin,o2.lineDash=o1.lineDash,o2.lineWidth=o1.lineWidth,o2.miterLimit=o1.miterLimit,o2.shadowBlur=o1.shadowBlur,o2.shadowColor=o1.shadowColor,o2.shadowOffsetX=o1.shadowOffsetX,o2.shadowOffsetY=o1.shadowOffsetY,o2.strokeStyle=o1.strokeStyle,o2.globalAlpha=o1.globalAlpha,o2.font=o1.font,o2.textAlign=o1.textAlign,o2.textBaseline=o1.textBaseline,o2.arcScaleX_=o1.arcScaleX_,o2.arcScaleY_=o1.arcScaleY_,o2.lineScale_=o1.lineScale_}var colorData={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"};function getRgbHslContent(styleString){var start=styleString.indexOf("(",3),end=styleString.indexOf(")",start+1),parts=styleString.substring(start+1,end).split(",");return 4==parts.length&&"a"==styleString.charAt(3)||(parts[3]=1),parts}function percent(s){return parseFloat(s)/100}function clamp(v,min,max){return Math.min(max,Math.max(min,v))}function hueToRgb(m1,m2,h){return h<0&&h++,1<h&&h--,6*h<1?m1+6*(m2-m1)*h:2*h<1?m2:3*h<2?m1+(m2-m1)*(2/3-h)*6:m1}var processStyleCache={};function processStyle(styleString){if(styleString in processStyleCache)return processStyleCache[styleString];var alpha=1;if("#"==(styleString=String(styleString)).charAt(0))str=styleString;else if(/^rgb/.test(styleString)){for(var n,parts=getRgbHslContent(styleString),str="#",i=0;i<3;i++)n=-1!=parts[i].indexOf("%")?Math.floor(255*percent(parts[i])):+parts[i],str+=decToHex[clamp(n,0,255)];alpha=+parts[3]}else if(/^hsl/.test(styleString)){str=function(parts){var r,g,b,h,s,l;if((h=parseFloat(parts[0])/360%360)<0&&h++,s=clamp(percent(parts[1]),0,1),l=clamp(percent(parts[2]),0,1),0==s)r=g=b=l;else{var q=l<.5?l*(1+s):l+s-l*s,p=2*l-q;r=hueToRgb(p,q,h+1/3),g=hueToRgb(p,q,h),b=hueToRgb(p,q,h-1/3)}return"#"+decToHex[Math.floor(255*r)]+decToHex[Math.floor(255*g)]+decToHex[Math.floor(255*b)]}(parts=getRgbHslContent(styleString)),alpha=parts[3]}else str=colorData[styleString]||styleString;return processStyleCache[styleString]={color:str,alpha:alpha}}var DEFAULT_STYLE_style="normal",DEFAULT_STYLE_variant="normal",DEFAULT_STYLE_weight="normal",DEFAULT_STYLE_size=10,DEFAULT_STYLE_family="sans-serif",fontStyleCache={};var lineCapMap={butt:"flat",round:"round"};function CanvasRenderingContext2D_(canvasElement){this.m_=createMatrixIdentity(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineDash=[],this.lineCap="butt",this.miterLimit=+Z,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic";var cssText="width:"+(this.canvas=canvasElement).clientWidth+"px;height:"+canvasElement.clientHeight+"px;overflow:hidden;position:absolute",el=canvasElement.ownerDocument.createElement("div");el.style.cssText=cssText,canvasElement.appendChild(el);var overlayEl=el.cloneNode(!1);overlayEl.style.backgroundColor="red",overlayEl.style.filter="alpha(opacity=0)",canvasElement.appendChild(overlayEl),this.element_=el,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}var contextPrototype=CanvasRenderingContext2D_.prototype;function bezierCurveTo(self,cp1,cp2,p){self.currentPath_.push({type:"bezierCurveTo",cp1x:cp1.x,cp1y:cp1.y,cp2x:cp2.x,cp2y:cp2.y,x:p.x,y:p.y}),self.currentX_=p.x,self.currentY_=p.y}function appendStroke(ctx,lineStr){var lineCap,a=processStyle(ctx.strokeStyle),color=a.color,opacity=a.alpha*ctx.globalAlpha,lineWidth=ctx.lineScale_*ctx.lineWidth;lineWidth<1&&(opacity*=lineWidth),lineStr.push("<g_vml_:stroke",' opacity="',opacity,'"',' joinstyle="',ctx.lineJoin,'"',' dashstyle="',ctx.lineDash.join(" "),'"',' miterlimit="',ctx.miterLimit,'"',' endcap="',(lineCap=ctx.lineCap,lineCapMap[lineCap]||"square"),'"',' weight="',lineWidth,'px"',' color="',color,'" />')}function appendFill(ctx,lineStr,min,max){var fillStyle=ctx.fillStyle,arcScaleX=ctx.arcScaleX_,arcScaleY=ctx.arcScaleY_,width=max.x-min.x,height=max.y-min.y;if(fillStyle instanceof CanvasGradient_){var angle=0,focus={x:0,y:0},shift=0,expansion=1;if("gradient"==fillStyle.type_){var x0=fillStyle.x0_/arcScaleX,y0=fillStyle.y0_/arcScaleY,x1=fillStyle.x1_/arcScaleX,y1=fillStyle.y1_/arcScaleY,p0=getCoords(ctx,x0,y0),p1=getCoords(ctx,x1,y1),dx=p1.x-p0.x,dy=p1.y-p0.y;(angle=180*Math.atan2(dx,dy)/Math.PI)<0&&(angle+=360),angle<1e-6&&(angle=0)}else{focus={x:((p0=getCoords(ctx,fillStyle.x0_,fillStyle.y0_)).x-min.x)/width,y:(p0.y-min.y)/height},width/=arcScaleX*Z,height/=arcScaleY*Z;var dimension=m.max(width,height);shift=2*fillStyle.r0_/dimension,expansion=2*fillStyle.r1_/dimension-shift}var stops=fillStyle.colors_;stops.sort(function(cs1,cs2){return cs1.offset-cs2.offset});for(var length=stops.length,color1=stops[0].color,color2=stops[length-1].color,opacity1=stops[0].alpha*ctx.globalAlpha,opacity2=stops[length-1].alpha*ctx.globalAlpha,colors=[],i=0;i<length;i++){var stop=stops[i];colors.push(stop.offset*expansion+shift+" "+stop.color)}lineStr.push('<g_vml_:fill type="',fillStyle.type_,'"',' method="none" focus="100%"',' color="',color1,'"',' color2="',color2,'"',' colors="',colors.join(","),'"',' opacity="',opacity2,'"',' g_o_:opacity2="',opacity1,'"',' angle="',angle,'"',' focusposition="',focus.x,",",focus.y,'" />')}else if(fillStyle instanceof CanvasPattern_){if(width&&height){var deltaLeft=-min.x,deltaTop=-min.y;lineStr.push("<g_vml_:fill",' position="',deltaLeft/width*arcScaleX*arcScaleX,",",deltaTop/height*arcScaleY*arcScaleY,'"',' type="tile"',' src="',fillStyle.src_,'" />')}}else{var a=processStyle(ctx.fillStyle),color=a.color,opacity=a.alpha*ctx.globalAlpha;lineStr.push('<g_vml_:fill color="',color,'" opacity="',opacity,'" />')}}function getCoords(ctx,aX,aY){var m=ctx.m_;return{x:Z*(aX*m[0][0]+aY*m[1][0]+m[2][0])-Z2,y:Z*(aX*m[0][1]+aY*m[1][1]+m[2][1])-Z2}}function setM(ctx,m,updateLineScale){if(function(m){return isFinite(m[0][0])&&isFinite(m[0][1])&&isFinite(m[1][0])&&isFinite(m[1][1])&&isFinite(m[2][0])&&isFinite(m[2][1])}(m)&&(ctx.m_=m,updateLineScale)){var det=m[0][0]*m[1][1]-m[0][1]*m[1][0];ctx.lineScale_=sqrt(abs(det))}}function CanvasGradient_(aType){this.type_=aType,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function CanvasPattern_(image,repetition){switch(!function(img){img&&1==img.nodeType&&"IMG"==img.tagName||throwException("TYPE_MISMATCH_ERR");"complete"!=img.readyState&&throwException("INVALID_STATE_ERR")}(image),repetition){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=repetition;break;default:throwException("SYNTAX_ERR")}this.src_=image.src,this.width_=image.width,this.height_=image.height}function throwException(s){throw new DOMException_(s)}function DOMException_(s){this.code=this[s],this.message=s+": DOM Exception "+this.code}contextPrototype.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},contextPrototype.beginPath=function(){this.currentPath_=[]},contextPrototype.moveTo=function(aX,aY){var p=getCoords(this,aX,aY);this.currentPath_.push({type:"moveTo",x:p.x,y:p.y}),this.currentX_=p.x,this.currentY_=p.y},contextPrototype.lineTo=function(aX,aY){var p=getCoords(this,aX,aY);this.currentPath_.push({type:"lineTo",x:p.x,y:p.y}),this.currentX_=p.x,this.currentY_=p.y},contextPrototype.bezierCurveTo=function(aCP1x,aCP1y,aCP2x,aCP2y,aX,aY){var p=getCoords(this,aX,aY);bezierCurveTo(this,getCoords(this,aCP1x,aCP1y),getCoords(this,aCP2x,aCP2y),p)},contextPrototype.quadraticCurveTo=function(aCPx,aCPy,aX,aY){var cp=getCoords(this,aCPx,aCPy),p=getCoords(this,aX,aY),cp1={x:this.currentX_+2/3*(cp.x-this.currentX_),y:this.currentY_+2/3*(cp.y-this.currentY_)};bezierCurveTo(this,cp1,{x:cp1.x+(p.x-this.currentX_)/3,y:cp1.y+(p.y-this.currentY_)/3},p)},contextPrototype.arc=function(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){aRadius*=Z;var arcType=aClockwise?"at":"wa",xStart=aX+mc(aStartAngle)*aRadius-Z2,yStart=aY+ms(aStartAngle)*aRadius-Z2,xEnd=aX+mc(aEndAngle)*aRadius-Z2,yEnd=aY+ms(aEndAngle)*aRadius-Z2;xStart!=xEnd||aClockwise||(xStart+=.125);var p=getCoords(this,aX,aY),pStart=getCoords(this,xStart,yStart),pEnd=getCoords(this,xEnd,yEnd);this.currentPath_.push({type:arcType,x:p.x,y:p.y,radius:aRadius,xStart:pStart.x,yStart:pStart.y,xEnd:pEnd.x,yEnd:pEnd.y})},contextPrototype.rect=function(aX,aY,aWidth,aHeight){this.moveTo(aX,aY),this.lineTo(aX+aWidth,aY),this.lineTo(aX+aWidth,aY+aHeight),this.lineTo(aX,aY+aHeight),this.closePath()},contextPrototype.strokeRect=function(aX,aY,aWidth,aHeight){var oldPath=this.currentPath_;this.beginPath(),this.moveTo(aX,aY),this.lineTo(aX+aWidth,aY),this.lineTo(aX+aWidth,aY+aHeight),this.lineTo(aX,aY+aHeight),this.closePath(),this.stroke(),this.currentPath_=oldPath},contextPrototype.fillRect=function(aX,aY,aWidth,aHeight){var oldPath=this.currentPath_;this.beginPath(),this.moveTo(aX,aY),this.lineTo(aX+aWidth,aY),this.lineTo(aX+aWidth,aY+aHeight),this.lineTo(aX,aY+aHeight),this.closePath(),this.fill(),this.currentPath_=oldPath},contextPrototype.createLinearGradient=function(aX0,aY0,aX1,aY1){var gradient=new CanvasGradient_("gradient");return gradient.x0_=aX0,gradient.y0_=aY0,gradient.x1_=aX1,gradient.y1_=aY1,gradient},contextPrototype.createRadialGradient=function(aX0,aY0,aR0,aX1,aY1,aR1){var gradient=new CanvasGradient_("gradientradial");return gradient.x0_=aX0,gradient.y0_=aY0,gradient.r0_=aR0,gradient.x1_=aX1,gradient.y1_=aY1,gradient.r1_=aR1,gradient},contextPrototype.drawImage=function(image,var_args){var dx,dy,dw,dh,sx,sy,sw,sh,oldRuntimeWidth=image.runtimeStyle.width,oldRuntimeHeight=image.runtimeStyle.height;image.runtimeStyle.width="auto",image.runtimeStyle.height="auto";var w=image.width,h=image.height;if(image.runtimeStyle.width=oldRuntimeWidth,image.runtimeStyle.height=oldRuntimeHeight,3==arguments.length)dx=var_args,dy=arguments[2],sx=sy=0,sw=dw=w,sh=dh=h;else if(5==arguments.length)dx=var_args,dy=arguments[2],dw=arguments[3],dh=arguments[4],sx=sy=0,sw=w,sh=h;else{if(9!=arguments.length)throw Error("Invalid number of arguments");sx=var_args,sy=arguments[2],sw=arguments[3],sh=arguments[4],dx=arguments[5],dy=arguments[6],dw=arguments[7],dh=arguments[8]}var d=getCoords(this,dx,dy),vmlStr=[],m=this.m_;vmlStr.push(" <g_vml_:group",' coordsize="',10*Z,",",10*Z,'"',' coordorigin="0,0"',' style="width:',mr(10*m[0][0]),"px;height:",mr(10*m[1][1]),"px;position:absolute;","top:",mr(d.y/Z),"px;left:",mr(d.x/Z),"px; rotation:",mr(180*Math.atan(m[0][1]/m[1][1])/Math.PI),";"),vmlStr.push('" >','<g_vml_:image src="',image.src,'"',' style="width:',Z*dw,"px;"," height:",Z*dh,'px"',' cropleft="',sx/w,'"',' croptop="',sy/h,'"',' cropright="',(w-sx-sw)/w,'"',' cropbottom="',(h-sy-sh)/h,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",vmlStr.join(""))},contextPrototype.setLineDash=function(lineDash){1===lineDash.length&&((lineDash=lineDash.slice())[1]=lineDash[0]),this.lineDash=lineDash},contextPrototype.getLineDash=function(){return this.lineDash},contextPrototype.stroke=function(aFill){var lineStr=[];lineStr.push("<g_vml_:shape",' filled="',!!aFill,'"',' style="position:absolute;width:',10,"px;height:",10,'px;left:0px;top:0px;"',' coordorigin="0,0"',' coordsize="',10*Z,",",10*Z,'"',' stroked="',!aFill,'"',' path="');for(var min={x:null,y:null},max={x:null,y:null},i=0;i<this.currentPath_.length;i++){var p=this.currentPath_[i];switch(p.type){case"moveTo":lineStr.push(" m ",mr(p.x),",",mr(p.y));break;case"lineTo":lineStr.push(" l ",mr(p.x),",",mr(p.y));break;case"close":lineStr.push(" x "),p=null;break;case"bezierCurveTo":lineStr.push(" c ",mr(p.cp1x),",",mr(p.cp1y),",",mr(p.cp2x),",",mr(p.cp2y),",",mr(p.x),",",mr(p.y));break;case"at":case"wa":lineStr.push(" ",p.type," ",mr(p.x-this.arcScaleX_*p.radius),",",mr(p.y-this.arcScaleY_*p.radius)," ",mr(p.x+this.arcScaleX_*p.radius),",",mr(p.y+this.arcScaleY_*p.radius)," ",mr(p.xStart),",",mr(p.yStart)," ",mr(p.xEnd),",",mr(p.yEnd))}p&&((null==min.x||p.x<min.x)&&(min.x=p.x),(null==max.x||p.x>max.x)&&(max.x=p.x),(null==min.y||p.y<min.y)&&(min.y=p.y),(null==max.y||p.y>max.y)&&(max.y=p.y))}lineStr.push(' ">'),aFill?appendFill(this,lineStr,min,max):appendStroke(this,lineStr),lineStr.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",lineStr.join(""))},contextPrototype.fill=function(){this.$stroke(!0)},contextPrototype.closePath=function(){this.currentPath_.push({type:"close"})},contextPrototype.save=function(){var o={};copyState(this,o),this.aStack_.push(o),this.mStack_.push(this.m_),this.m_=matrixMultiply(createMatrixIdentity(),this.m_)},contextPrototype.restore=function(){this.aStack_.length&&(copyState(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},contextPrototype.translate=function(aX,aY){setM(this,matrixMultiply([[1,0,0],[0,1,0],[aX,aY,1]],this.m_),!1)},contextPrototype.rotate=function(aRot){var c=mc(aRot),s=ms(aRot);setM(this,matrixMultiply([[c,s,0],[-s,c,0],[0,0,1]],this.m_),!1)},contextPrototype.scale=function(aX,aY){this.arcScaleX_*=aX,this.arcScaleY_*=aY,setM(this,matrixMultiply([[aX,0,0],[0,aY,0],[0,0,1]],this.m_),!0)},contextPrototype.transform=function(m11,m12,m21,m22,dx,dy){setM(this,matrixMultiply([[m11,m12,0],[m21,m22,0],[dx,dy,1]],this.m_),!0)},contextPrototype.setTransform=function(m11,m12,m21,m22,dx,dy){setM(this,[[m11,m12,0],[m21,m22,0],[dx,dy,1]],!0)},contextPrototype.drawText_=function(text,x,y,maxWidth,stroke){var style,m=this.m_,left=0,right=1e3,offset={x:0,y:0},lineStr=[],fontStyle=function(style,element){var computedStyle={};for(var p in style)computedStyle[p]=style[p];var canvasFontSize=parseFloat(element.currentStyle.fontSize),fontSize=parseFloat(style.size);return"number"==typeof style.size?computedStyle.size=style.size:-1!=style.size.indexOf("px")?computedStyle.size=fontSize:-1!=style.size.indexOf("em")?computedStyle.size=canvasFontSize*fontSize:-1!=style.size.indexOf("%")?computedStyle.size=canvasFontSize/100*fontSize:-1!=style.size.indexOf("pt")?computedStyle.size=fontSize/.75:computedStyle.size=canvasFontSize,computedStyle.size*=.981,computedStyle}(function(styleString){if(fontStyleCache[styleString])return fontStyleCache[styleString];var style=document.createElement("div").style;try{style.font=styleString}catch(ex){}return fontStyleCache[styleString]={style:style.fontStyle||DEFAULT_STYLE_style,variant:style.fontVariant||DEFAULT_STYLE_variant,weight:style.fontWeight||DEFAULT_STYLE_weight,size:style.fontSize||DEFAULT_STYLE_size,family:style.fontFamily||DEFAULT_STYLE_family}}(this.font),this.element_),fontStyleString=(style=fontStyle).style+" "+style.variant+" "+style.weight+" "+style.size+"px "+style.family,elementStyle=this.element_.currentStyle,textAlign=this.textAlign.toLowerCase();switch(textAlign){case"left":case"center":case"right":break;case"end":textAlign="ltr"==elementStyle.direction?"right":"left";break;case"start":textAlign="rtl"==elementStyle.direction?"right":"left";break;default:textAlign="left"}switch(this.textBaseline){case"hanging":case"top":offset.y=fontStyle.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":offset.y=-fontStyle.size/3}switch(textAlign){case"right":left=1e3,right=.05;break;case"center":left=right=500}var d=getCoords(this,x+offset.x,y+offset.y);lineStr.push('<g_vml_:line from="',-left,' 0" to="',right,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!stroke,'" stroked="',!!stroke,'" style="position:absolute;width:1px;height:1px;left:0px;top:0px;">'),stroke?appendStroke(this,lineStr):appendFill(this,lineStr,{x:-left,y:0},{x:right,y:fontStyle.size});var skewM=m[0][0].toFixed(3)+","+m[1][0].toFixed(3)+","+m[0][1].toFixed(3)+","+m[1][1].toFixed(3)+",0,0",skewOffset=mr(d.x/Z)+","+mr(d.y/Z);lineStr.push('<g_vml_:skew on="t" matrix="',skewM,'" ',' offset="',skewOffset,'" origin="',left,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',encodeHtmlAttribute(text),'" style="v-text-align:',textAlign,";font:",encodeHtmlAttribute(fontStyleString),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",lineStr.join(""))},contextPrototype.fillText=function(text,x,y,maxWidth){this.drawText_(text,x,y,maxWidth,!1)},contextPrototype.strokeText=function(text,x,y,maxWidth){this.drawText_(text,x,y,maxWidth,!0)},contextPrototype.measureText=function(text){if(!this.textMeasureEl_){this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild}var doc=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(doc.createTextNode(text)),{width:this.textMeasureEl_.offsetWidth}},contextPrototype.clip=function(){},contextPrototype.arcTo=function(){},contextPrototype.createPattern=function(image,repetition){return new CanvasPattern_(image,repetition)},CanvasGradient_.prototype.addColorStop=function(aOffset,aColor){aColor=processStyle(aColor),this.colors_.push({offset:aOffset,color:aColor.color,alpha:aColor.alpha})};var p=DOMException_.prototype=new Error;p.INDEX_SIZE_ERR=1,p.DOMSTRING_SIZE_ERR=2,p.HIERARCHY_REQUEST_ERR=3,p.WRONG_DOCUMENT_ERR=4,p.INVALID_CHARACTER_ERR=5,p.NO_DATA_ALLOWED_ERR=6,p.NO_MODIFICATION_ALLOWED_ERR=7,p.NOT_FOUND_ERR=8,p.NOT_SUPPORTED_ERR=9,p.INUSE_ATTRIBUTE_ERR=10,p.INVALID_STATE_ERR=11,p.SYNTAX_ERR=12,p.INVALID_MODIFICATION_ERR=13,p.NAMESPACE_ERR=14,p.INVALID_ACCESS_ERR=15,p.VALIDATION_ERR=16,p.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=G_vmlCanvasManager_,CanvasRenderingContext2D=CanvasRenderingContext2D_,CanvasGradient=CanvasGradient_,CanvasPattern=CanvasPattern_,DOMException=DOMException_}(),Ext.define("Ext.draw.engine.Canvas",{extend:Ext.draw.Surface,config:{highPrecision:!1},statics:{contextOverrides:{setGradientBBox:function(bbox){this.bbox=bbox},fill:function(){var fillStyle=this.fillStyle,fillGradient=this.fillGradient,fillOpacity=this.fillOpacity,alpha=this.globalAlpha,bbox=this.bbox;fillStyle!==Ext.draw.Color.RGBA_NONE&&0!==fillOpacity&&(fillGradient&&bbox&&(this.fillStyle=fillGradient.generateGradient(this,bbox)),1!==fillOpacity&&(this.globalAlpha=alpha*fillOpacity),this.$fill(),1!==fillOpacity&&(this.globalAlpha=alpha),fillGradient&&bbox&&(this.fillStyle=fillStyle))},stroke:function(){var strokeStyle=this.strokeStyle,strokeGradient=this.strokeGradient,strokeOpacity=this.strokeOpacity,alpha=this.globalAlpha,bbox=this.bbox;strokeStyle!==Ext.draw.Color.RGBA_NONE&&0!==strokeOpacity&&(strokeGradient&&bbox&&(this.strokeStyle=strokeGradient.generateGradient(this,bbox)),1!==strokeOpacity&&(this.globalAlpha=alpha*strokeOpacity),this.$stroke(),1!==strokeOpacity&&(this.globalAlpha=alpha),strokeGradient&&bbox&&(this.strokeStyle=strokeStyle))},fillStroke:function(attr,transformFillStroke){var fillStyle=this.fillStyle,fillOpacity=this.fillOpacity,strokeStyle=this.strokeStyle,strokeOpacity=this.strokeOpacity,shadowColor=this.shadowColor,shadowBlur=this.shadowBlur,none=Ext.draw.Color.RGBA_NONE;void 0===transformFillStroke&&(transformFillStroke=attr.transformFillStroke),transformFillStroke||attr.inverseMatrix.toContext(this),fillStyle!==none&&0!==fillOpacity&&(this.fill(),this.shadowColor=none,this.shadowBlur=0),strokeStyle!==none&&0!==strokeOpacity&&this.stroke(),this.shadowColor=shadowColor,this.shadowBlur=shadowBlur},setLineDash:function(dashList){this.$setLineDash&&this.$setLineDash(dashList)},getLineDash:function(){if(this.$getLineDash)return this.$getLineDash()},ellipse:function(cx,cy,rx,ry,rotation,start,end,anticlockwise){var cos=Math.cos(rotation),sin=Math.sin(rotation);this.transform(cos*rx,sin*rx,-sin*ry,cos*ry,cx,cy),this.arc(0,0,1,start,end,anticlockwise),this.transform(cos/rx,-sin/ry,sin/rx,cos/ry,-(cos*cx+sin*cy)/rx,(sin*cx-cos*cy)/ry)},appendPath:function(path){var me=this,i=0,j=0,commands=path.commands,params=path.params,ln=commands.length;for(me.beginPath();i<ln;i++)switch(commands[i]){case"M":me.moveTo(params[j],params[j+1]),j+=2;break;case"L":me.lineTo(params[j],params[j+1]),j+=2;break;case"C":me.bezierCurveTo(params[j],params[j+1],params[j+2],params[j+3],params[j+4],params[j+5]),j+=6;break;case"Z":me.closePath()}},save:function(){for(var key,toSave=this.toSave,ln=toSave.length,obj=ln&&{},i=0;i<ln;i++)(key=toSave[i])in this&&(obj[key]=this[key]);this.state.push(obj),this.$save()},restore:function(){var key,obj=this.state.pop();if(obj)for(key in obj)this[key]=obj[key];this.$restore()}}},splitThreshold:3e3,toSave:["fillGradient","strokeGradient"],element:{reference:"element",style:{position:"absolute"},children:[{reference:"innerElement",style:{width:"100%",height:"100%",position:"relative"}}]},createCanvas:function(){var canvas=Ext.Element.create({tag:"canvas",cls:Ext.baseCSSPrefix+"surface-canvas"});window.G_vmlCanvasManager&&G_vmlCanvasManager.initElement(canvas.dom);var name,overrides=Ext.draw.engine.Canvas.contextOverrides,ctx=canvas.dom.getContext("2d");for(name in ctx.ellipse&&delete overrides.ellipse,ctx.state=[],ctx.toSave=this.toSave,overrides)ctx["$"+name]=ctx[name];Ext.apply(ctx,overrides),this.getHighPrecision()?this.enablePrecisionCompensation(ctx):this.disablePrecisionCompensation(ctx),this.innerElement.appendChild(canvas),this.canvases.push(canvas),this.contexts.push(ctx)},updateHighPrecision:function(highPrecision){var i,context,contexts=this.contexts,ln=contexts.length;for(i=0;i<ln;i++)context=contexts[i],highPrecision?this.enablePrecisionCompensation(context):this.disablePrecisionCompensation(context)},precisionNames:["rect","fillRect","strokeRect","clearRect","moveTo","lineTo","arc","arcTo","save","restore","updatePrecisionCompensate","setTransform","transform","scale","translate","rotate","quadraticCurveTo","bezierCurveTo","createLinearGradient","createRadialGradient","fillText","strokeText","drawImage"],disablePrecisionCompensation:function(ctx){var i,name,regularOverrides=Ext.draw.engine.Canvas.contextOverrides,precisionOverrides=this.precisionNames,ln=precisionOverrides.length;for(i=0;i<ln;i++)(name=precisionOverrides[i])in regularOverrides||delete ctx[name];this.setDirty(!0)},enablePrecisionCompensation:function(ctx){var surface=this,xx=1,yy=1,dx=0,dy=0,matrix=new Ext.draw.Matrix,transStack=[],comp={},regularOverrides=Ext.draw.engine.Canvas.contextOverrides,originalCtx=ctx.constructor.prototype,precisionOverrides={toSave:surface.toSave,rect:function(x,y,w,h){return originalCtx.rect.call(this,x*xx+dx,y*yy+dy,w*xx,h*yy)},fillRect:function(x,y,w,h){this.updatePrecisionCompensateRect(),originalCtx.fillRect.call(this,x*xx+dx,y*yy+dy,w*xx,h*yy),this.updatePrecisionCompensate()},strokeRect:function(x,y,w,h){this.updatePrecisionCompensateRect(),originalCtx.strokeRect.call(this,x*xx+dx,y*yy+dy,w*xx,h*yy),this.updatePrecisionCompensate()},clearRect:function(x,y,w,h){return originalCtx.clearRect.call(this,x*xx+dx,y*yy+dy,w*xx,h*yy)},moveTo:function(x,y){return originalCtx.moveTo.call(this,x*xx+dx,y*yy+dy)},lineTo:function(x,y){return originalCtx.lineTo.call(this,x*xx+dx,y*yy+dy)},arc:function(x,y,radius,startAngle,endAngle,anticlockwise){this.updatePrecisionCompensateRect(),originalCtx.arc.call(this,x*xx+dx,y*xx+dy,radius*xx,startAngle,endAngle,anticlockwise),this.updatePrecisionCompensate()},arcTo:function(x1,y1,x2,y2,radius){this.updatePrecisionCompensateRect(),originalCtx.arcTo.call(this,x1*xx+dx,y1*yy+dy,x2*xx+dx,y2*yy+dy,radius*xx),this.updatePrecisionCompensate()},save:function(){transStack.push(matrix),matrix=matrix.clone(),regularOverrides.save.call(this),originalCtx.save.call(this)},restore:function(){matrix=transStack.pop(),regularOverrides.restore.call(this),originalCtx.restore.call(this),this.updatePrecisionCompensate()},updatePrecisionCompensate:function(){matrix.precisionCompensate(surface.devicePixelRatio,comp),xx=comp.xx,yy=comp.yy,dx=comp.dx,dy=comp.dy,originalCtx.setTransform.call(this,surface.devicePixelRatio,comp.b,comp.c,comp.d,0,0)},updatePrecisionCompensateRect:function(){matrix.precisionCompensateRect(surface.devicePixelRatio,comp),xx=comp.xx,yy=comp.yy,dx=comp.dx,dy=comp.dy,originalCtx.setTransform.call(this,surface.devicePixelRatio,comp.b,comp.c,comp.d,0,0)},setTransform:function(x2x,x2y,y2x,y2y,newDx,newDy){matrix.set(x2x,x2y,y2x,y2y,newDx,newDy),this.updatePrecisionCompensate()},transform:function(x2x,x2y,y2x,y2y,newDx,newDy){matrix.append(x2x,x2y,y2x,y2y,newDx,newDy),this.updatePrecisionCompensate()},scale:function(sx,sy){this.transform(sx,0,0,sy,0,0)},translate:function(dx,dy){this.transform(1,0,0,1,dx,dy)},rotate:function(radians){var cos=Math.cos(radians),sin=Math.sin(radians);this.transform(cos,sin,-sin,cos,0,0)},quadraticCurveTo:function(cx,cy,x,y){originalCtx.quadraticCurveTo.call(this,cx*xx+dx,cy*yy+dy,x*xx+dx,y*yy+dy)},bezierCurveTo:function(c1x,c1y,c2x,c2y,x,y){originalCtx.bezierCurveTo.call(this,c1x*xx+dx,c1y*yy+dy,c2x*xx+dx,c2y*yy+dy,x*xx+dx,y*yy+dy)},createLinearGradient:function(x0,y0,x1,y1){this.updatePrecisionCompensateRect();var grad=originalCtx.createLinearGradient.call(this,x0*xx+dx,y0*yy+dy,x1*xx+dx,y1*yy+dy);return this.updatePrecisionCompensate(),grad},createRadialGradient:function(x0,y0,r0,x1,y1,r1){this.updatePrecisionCompensateRect();var grad=originalCtx.createLinearGradient.call(this,x0*xx+dx,y0*xx+dy,r0*xx,x1*xx+dx,y1*xx+dy,r1*xx);return this.updatePrecisionCompensate(),grad},fillText:function(text,x,y,maxWidth){originalCtx.setTransform.apply(this,matrix.elements),void 0===maxWidth?originalCtx.fillText.call(this,text,x,y):originalCtx.fillText.call(this,text,x,y,maxWidth),this.updatePrecisionCompensate()},strokeText:function(text,x,y,maxWidth){originalCtx.setTransform.apply(this,matrix.elements),void 0===maxWidth?originalCtx.strokeText.call(this,text,x,y):originalCtx.strokeText.call(this,text,x,y,maxWidth),this.updatePrecisionCompensate()},fill:function(){var fillGradient=this.fillGradient,bbox=this.bbox;this.updatePrecisionCompensateRect(),fillGradient&&bbox&&(this.fillStyle=fillGradient.generateGradient(this,bbox)),originalCtx.fill.call(this),this.updatePrecisionCompensate()},stroke:function(){var strokeGradient=this.strokeGradient,bbox=this.bbox;this.updatePrecisionCompensateRect(),strokeGradient&&bbox&&(this.strokeStyle=strokeGradient.generateGradient(this,bbox)),originalCtx.stroke.call(this),this.updatePrecisionCompensate()},drawImage:function(img_elem,arg1,arg2,arg3,arg4,dst_x,dst_y,dw,dh){switch(arguments.length){case 3:return originalCtx.drawImage.call(this,img_elem,arg1*xx+dx,arg2*yy+dy);case 5:return originalCtx.drawImage.call(this,img_elem,arg1*xx+dx,arg2*yy+dy,arg3*xx,arg4*yy);case 9:return originalCtx.drawImage.call(this,img_elem,arg1,arg2,arg3,arg4,dst_x*xx+dx,dst_y*yy*dy,dw*xx,dh*yy)}}};Ext.apply(ctx,precisionOverrides),this.setDirty(!0)},updateRect:function(rect){this.callParent([rect]);var i,j,k,offsetX,offsetY,dom,width,height,me=this,l=Math.floor(rect[0]),t=Math.floor(rect[1]),r=Math.ceil(rect[0]+rect[2]),b=Math.ceil(rect[1]+rect[3]),devicePixelRatio=me.devicePixelRatio,canvases=me.canvases,w=r-l,h=b-t,splitThreshold=Math.round(me.splitThreshold/devicePixelRatio),xSplits=me.xSplits=Math.ceil(w/splitThreshold),ySplits=me.ySplits=Math.ceil(h/splitThreshold);for(offsetY=j=0;j<ySplits;j++,offsetY+=splitThreshold)for(offsetX=i=0;i<xSplits;i++,offsetX+=splitThreshold)(k=j*xSplits+i)>=canvases.length&&me.createCanvas(),(dom=canvases[k].dom).style.left=offsetX+"px",dom.style.top=offsetY+"px",(height=Math.min(splitThreshold,h-offsetY))*devicePixelRatio!==dom.height&&(dom.height=height*devicePixelRatio,dom.style.height=height+"px"),(width=Math.min(splitThreshold,w-offsetX))*devicePixelRatio!==dom.width&&(dom.width=width*devicePixelRatio,dom.style.width=width+"px"),me.applyDefaults(me.contexts[k]);for(k+=1;k<canvases.length;k++)canvases[k].destroy();me.activeCanvases=xSplits*ySplits,canvases.length=me.activeCanvases,me.clear()},clearTransform:function(){var i,j,ctx,me=this,xSplits=me.xSplits,ySplits=me.ySplits,contexts=me.contexts,splitThreshold=me.splitThreshold,devicePixelRatio=me.devicePixelRatio;for(i=0;i<xSplits;i++)for(j=0;j<ySplits;j++)(ctx=contexts[j*xSplits+i]).translate(-splitThreshold*i,-splitThreshold*j),ctx.scale(devicePixelRatio,devicePixelRatio),me.matrix.toContext(ctx)},renderSprite:function(sprite){for(var offsetX,offsetY,ctx,bbox,width,height,right,bottom,i,j,k,me=this,rect=me.getRect(),surfaceMatrix=me.matrix,parent=sprite.getParent(),matrix=Ext.draw.Matrix.fly([1,0,0,1,0,0]),splitThreshold=me.splitThreshold/me.devicePixelRatio,xSplits=me.xSplits,ySplits=me.ySplits,left=0,top=0,w=rect[2],h=rect[3];parent&&parent!==me;)matrix.prependMatrix(parent.matrix||parent.attr&&parent.attr.matrix),parent=parent.getParent();if(matrix.prependMatrix(surfaceMatrix),bbox=(bbox=sprite.getBBox())&&matrix.transformBBox(bbox),sprite.preRender(me),sprite.attr.hidden||0===sprite.attr.globalAlpha)sprite.setDirty(!1);else{for(offsetY=j=0;j<ySplits;j++,offsetY+=splitThreshold)for(offsetX=i=0;i<xSplits;i++,offsetX+=splitThreshold)if(k=j*xSplits+i,ctx=me.contexts[k],right=(left=offsetX)+(width=Math.min(splitThreshold,w-offsetX)),bottom=(top=offsetY)+(height=Math.min(splitThreshold,h-offsetY)),!bbox||!(bbox.x>right||bbox.x+bbox.width<left||bbox.y>bottom||bbox.y+bbox.height<top)){if(ctx.save(),sprite.useAttributes(ctx,rect),!1===sprite.render(me,ctx,[left,top,width,height],rect))return!1;ctx.restore()}sprite.setDirty(!1)}},flatten:function(size,surfaces){var surface,canvas,rect,i,j,xy,targetCanvas=document.createElement("canvas"),className=Ext.getClassName(this),ratio=this.devicePixelRatio,ctx=targetCanvas.getContext("2d");for(targetCanvas.width=Math.ceil(size.width*ratio),targetCanvas.height=Math.ceil(size.height*ratio),i=0;i<surfaces.length;i++)if(surface=surfaces[i],Ext.getClassName(surface)===className)for(rect=surface.getRect(),j=0;j<surface.canvases.length;j++)xy=(canvas=surface.canvases[j]).getOffsetsTo(canvas.getParent()),ctx.drawImage(canvas.dom,(rect[0]+xy[0])*ratio,(rect[1]+xy[1])*ratio);return{data:targetCanvas.toDataURL(),type:"png"}},applyDefaults:function(ctx){var none=Ext.draw.Color.RGBA_NONE;ctx.strokeStyle=none,ctx.fillStyle=none,ctx.textAlign="start",ctx.textBaseline="alphabetic",ctx.miterLimit=1},clear:function(){var i,canvas,ctx,activeCanvases=this.activeCanvases;for(i=0;i<activeCanvases;i++)canvas=this.canvases[i].dom,(ctx=this.contexts[i]).setTransform(1,0,0,1,0,0),ctx.clearRect(0,0,canvas.width,canvas.height);this.setDirty(!0)},destroy:function(){var i,me=this,ln=me.canvases.length;for(i=0;i<ln;i++)me.contexts[i]=null,me.canvases[i].destroy(),me.canvases[i]=null;delete me.contexts,delete me.canvases,me.callParent()},privates:{initElement:function(){var me=this;me.callParent(),me.canvases=[],me.contexts=[],me.activeCanvases=(me.xSplits=0)*(me.ySplits=0)}}},function(){var proto=this.prototype,splitThreshold=1e10;Ext.os.is.Android4&&Ext.browser.is.Chrome?splitThreshold=3e3:Ext.is.iOS&&(splitThreshold=2200),proto.splitThreshold=splitThreshold}),Ext.define("Ext.draw.Container",{extend:Ext.draw.ContainerBase,alternateClassName:"Ext.draw.Component",xtype:"draw",defaultType:"surface",isDrawContainer:!0,engine:"Ext.draw.engine.Canvas",config:{cls:Ext.baseCSSPrefix+"draw-container",resizeHandler:null,sprites:null,gradients:[]},defaultDownloadServerUrl:"http://svg.sencha.io",supportedFormats:["png","pdf","jpeg","gif"],supportedOptions:{version:Ext.isNumber,data:Ext.isString,format:function(format){return 0<=Ext.Array.indexOf(this.supportedFormats,format)},filename:Ext.isString,width:Ext.isNumber,height:Ext.isNumber,scale:Ext.isNumber,pdf:Ext.isObject,jpeg:Ext.isObject},initAnimator:function(){this.frameCallbackId=Ext.draw.Animator.addFrameCallback("renderFrame",this)},applyGradients:function(gradients){var i,n,gradient,offset,result=[];if(!Ext.isArray(gradients))return result;for(i=0,n=gradients.length;i<n;i++)gradient=gradients[i],Ext.isObject(gradient)&&("string"!=typeof gradient.type&&(gradient.type="linear"),gradient.angle&&(gradient.degrees=gradient.angle,delete gradient.angle),Ext.isObject(gradient.stops)&&(gradient.stops=function(stops){var stop,result=[];for(offset in stops)(stop=stops[offset]).offset=offset/100,result.push(stop);return result}(gradient.stops)),result.push(gradient));return Ext.draw.gradient.GradientDefinition.add(result),result},applySprites:function(sprites){if(sprites){var i,surface,sprite,ln=(sprites=Ext.Array.from(sprites)).length,result=[];for(i=0;i<ln;i++)(surface=(sprite=sprites[i]).surface)&&surface.isSurface||(surface=Ext.isString(surface)?this.getSurface(surface):this.getSurface("main")),sprite=surface.add(sprite),result.push(sprite);return result}},onBodyResize:function(){var size,el=this.element;el&&(size=el.getSize()).width&&size.height&&this.setBodySize(size)},setBodySize:function(size){var me=this,resizeHandler=me.getResizeHandler()||me.defaultResizeHandler;me.fireEvent("bodyresize",me,size),!1!==resizeHandler.call(me,size)&&me.renderFrame()},defaultResizeHandler:function(size){this.getItems().each(function(surface){surface.setRect([0,0,size.width,size.height])})},getSurface:function(id){id=this.getId()+"-"+(id||"main");var surface=this.getItems().get(id);return surface||(surface=this.add({xclass:this.engine,id:id}),this.onBodyResize()),surface},renderFrame:function(){var i,ln,item,surfaces=this.getItems();for(i=0,ln=surfaces.length;i<ln;i++)(item=surfaces.items[i]).isSurface&&item.renderFrame()},getImage:function(format){var image,imageElement,i,j,surface,zIndex,size=this.innerElement.getSize(),surfaces=Array.prototype.slice.call(this.items.items),zIndexes=this.surfaceZIndexes;for(j=1;j<surfaces.length;j++){for(zIndex=zIndexes[(surface=surfaces[j]).type],i=j-1;0<=i&&zIndexes[surfaces[i].type]>zIndex;)surfaces[i+1]=surfaces[i],i--;surfaces[i+1]=surface}return image=surfaces[0].flatten(size,surfaces),"image"===format?((imageElement=new Image).src=image.data,image.data=imageElement):"stream"===format&&(image.data=image.data.replace(/^data:image\/[^;]+/,"data:application/octet-stream")),image},download:function(config){var markup,name,value,me=this,inputs=[];for(name in config=Ext.apply({version:2,data:me.getImage().data},config))config.hasOwnProperty(name)&&(value=config[name],name in me.supportedOptions&&me.supportedOptions[name].call(me,value)&&inputs.push({tag:"input",type:"hidden",name:name,value:Ext.String.htmlEncode(Ext.isObject(value)?Ext.JSON.encode(value):value)}));markup=Ext.dom.Helper.markup({tag:"html",children:[{tag:"head"},{tag:"body",children:[{tag:"form",method:"POST",action:config.url||me.defaultDownloadServerUrl,children:inputs},{tag:"script",type:"text/javascript",children:'document.getElementsByTagName("form")[0].submit();'}]}]}),window.open("","ImageDownload_"+Date.now()).document.write(markup)},destroy:function(){var callbackId=this.frameCallbackId;callbackId&&Ext.draw.Animator.removeFrameCallback(callbackId),this.callParent()}},function(){(location.search.match("svg")||Ext.os.is.BlackBerry&&10===Ext.os.version.getMajor()||Ext.browser.is.AndroidStock4&&(1===Ext.os.version.getMinor()||2===Ext.os.version.getMinor()||3===Ext.os.version.getMinor()))&&(Ext.draw.Container.prototype.engine="Ext.draw.engine.Svg")}),Ext.define("Ext.chart.theme.Base",{mixins:{factoryable:Ext.mixin.Factoryable},factoryConfig:{type:"chart.theme"},isTheme:!0,config:{baseColor:null,colors:void 0,gradients:null,chart:{defaults:{background:"white"}},axis:{defaults:{label:{x:0,y:0,textBaseline:"middle",textAlign:"center",fontSize:"default",fontFamily:"default",fontWeight:"default",fillStyle:"black"},title:{fillStyle:"black",fontSize:"default*1.23",fontFamily:"default",fontWeight:"default"},style:{strokeStyle:"black"},grid:{strokeStyle:"rgb(221, 221, 221)"}},top:{style:{textPadding:5}},bottom:{style:{textPadding:5}}},series:{defaults:{label:{fillStyle:"black",strokeStyle:"none",fontFamily:"default",fontWeight:"default",fontSize:"default*1.077",textBaseline:"middle",textAlign:"center"},labelOverflowPadding:5}},sprites:{text:{fontSize:"default",fontWeight:"default",fontFamily:"default",fillStyle:"black"}},seriesThemes:void 0,markerThemes:{type:["circle","cross","plus","square","triangle","diamond"]},useGradients:!1,background:null},colorDefaults:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],constructor:function(config){this.initConfig(config),this.resolveDefaults()},defaultRegEx:/^default([+\-/\*]\d+(?:\.\d+)?)?$/,defaultOperators:{"*":function(v1,v2){return v1*v2},"+":function(v1,v2){return v1+v2},"-":function(v1,v2){return v1-v2}},resolveDefaults:function(){var me=this;Ext.onReady(function(){var div,key,config,sprites=Ext.clone(me.getSprites()),axis=Ext.clone(me.getAxis()),series=Ext.clone(me.getSeries());for(key in me.superclass.defaults||(div=Ext.getBody().createChild({tag:"div",cls:"x-component"}),me.superclass.defaults={fontFamily:div.getStyle("fontFamily"),fontWeight:div.getStyle("fontWeight"),fontSize:parseFloat(div.getStyle("fontSize")),fontVariant:div.getStyle("fontVariant"),fontStyle:div.getStyle("fontStyle")},div.destroy()),me.replaceDefaults(sprites.text),me.setSprites(sprites),axis)config=axis[key],me.replaceDefaults(config.label),me.replaceDefaults(config.title);for(key in me.setAxis(axis),series)config=series[key],me.replaceDefaults(config.label);me.setSeries(series)})},replaceDefaults:function(target){var key,value,match,binaryFn,defaults=this.superclass.defaults,defaultRegEx=this.defaultRegEx;if(Ext.isObject(target))for(key in defaults)(match=defaultRegEx.exec(target[key]))&&(value=defaults[key],(match=match[1])&&(binaryFn=this.defaultOperators[match.charAt(0)],value=Math.round(binaryFn(value,parseFloat(match.substr(1))))),target[key]=value)},applyBaseColor:function(baseColor){var midColor,midL;return baseColor&&((midL=(midColor=baseColor.isColor?baseColor:Ext.draw.Color.fromString(baseColor)).getHSL()[2])<.15?midColor=midColor.createLighter(.3):midL<.3?midColor=midColor.createLighter(.15):.85<midL?midColor=midColor.createDarker(.3):.7<midL&&(midColor=midColor.createDarker(.15)),this.setColors([midColor.createDarker(.3).toString(),midColor.createDarker(.15).toString(),midColor.toString(),midColor.createLighter(.12).toString(),midColor.createLighter(.24).toString(),midColor.createLighter(.31).toString()])),baseColor},applyColors:function(newColors){return newColors||this.colorDefaults},updateUseGradients:function(useGradients){useGradients&&this.updateGradients({type:"linear",degrees:90})},updateBackground:function(background){if(background){var chart=this.getChart();chart.defaults.background=background,this.setChart(chart)}},updateGradients:function(gradients){var gradient,midColor,color,i,ln,colors=this.getColors(),items=[];if(Ext.isObject(gradients)){for(i=0,ln=colors&&colors.length||0;i<ln;i++)(midColor=Ext.draw.Color.fromString(colors[i]))&&(color=midColor.createLighter(.15).toString(),gradient=Ext.apply(Ext.Object.chain(gradients),{stops:[{offset:1,color:midColor.toString()},{offset:0,color:color.toString()}]}),items.push(gradient));this.setColors(items)}},applySeriesThemes:function(newSeriesThemes){this.getBaseColor(),this.getUseGradients(),this.getGradients();var colors=this.getColors();return newSeriesThemes=newSeriesThemes||{fillStyle:Ext.Array.clone(colors),strokeStyle:Ext.Array.map(colors,function(value){return Ext.draw.Color.fromString(value.stops?value.stops[0].color:value).createDarker(.15).toString()})}}}),Ext.define("Ext.chart.theme.Default",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.default","chart.theme.Base"]}),Ext.define("Ext.chart.Markers",{extend:Ext.draw.sprite.Instancing,isMarkers:!0,defaultCategory:"default",constructor:function(){this.callParent(arguments),this.categories={},this.revisions={}},destroy:function(){this.categories=null,this.revisions=null,this.callParent()},getMarkerFor:function(category,index){if(category in this.categories){var categoryInstances=this.categories[category];if(index in categoryInstances)return this.get(categoryInstances[index])}},clear:function(category){(category=category||this.defaultCategory)in this.revisions?this.revisions[category]++:this.revisions[category]=1},putMarkerFor:function(category,attr,index,bypassNormalization,keepRevision){category=category||this.defaultCategory;var instance,me=this,categoryInstances=me.categories[category]||(me.categories[category]={});index in categoryInstances?me.setAttributesFor(categoryInstances[index],attr,bypassNormalization):(categoryInstances[index]=me.getCount(),me.createInstance(attr,bypassNormalization)),(instance=me.get(categoryInstances[index]))&&(instance.category=category,keepRevision||(instance.revision=me.revisions[category]||(me.revisions[category]=1)))},getMarkerBBoxFor:function(category,index,isWithoutTransform){if(category in this.categories){var categoryInstances=this.categories[category];if(index in categoryInstances)return this.getBBoxFor(categoryInstances[index],isWithoutTransform)}},getBBox:function(){return null},render:function(surface,ctx,clipRect){var instance,i,ln,me=this,revisions=me.revisions,mat=me.attr.matrix,template=me.getTemplate(),templateAttr=template.attr;for(mat.toContext(ctx),template.preRender(surface,ctx,clipRect),template.useAttributes(ctx,clipRect),i=0,ln=me.instances.length;i<ln;i++)(instance=me.get(i)).hidden||instance.revision!==revisions[instance.category]||(ctx.save(),template.attr=instance,template.useAttributes(ctx,clipRect),template.render(surface,ctx,clipRect),ctx.restore());template.attr=templateAttr}}),Ext.define("Ext.chart.label.Callout",{extend:Ext.draw.modifier.Modifier,prepareAttributes:function(attr){attr.hasOwnProperty("calloutOriginal")||(attr.calloutOriginal=Ext.Object.chain(attr),attr.calloutOriginal.prototype=attr),this._previous&&this._previous.prepareAttributes(attr.calloutOriginal)},setAttrs:function(attr,changes){var dx,dy,callout=attr.callout,origin=attr.calloutOriginal,bbox=attr.bbox.plain,width=(bbox.width||0)+attr.labelOverflowPadding,height=(bbox.height||0)+attr.labelOverflowPadding;if("callout"in changes&&(callout=changes.callout),"callout"in changes||"calloutPlaceX"in changes||"calloutPlaceY"in changes||"x"in changes||"y"in changes){var temp,rotationRads="rotationRads"in changes?origin.rotationRads=changes.rotationRads:origin.rotationRads,x="x"in changes?origin.x=changes.x:origin.x,y="y"in changes?origin.y=changes.y:origin.y,calloutPlaceX="calloutPlaceX"in changes?changes.calloutPlaceX:attr.calloutPlaceX,calloutPlaceY="calloutPlaceY"in changes?changes.calloutPlaceY:attr.calloutPlaceY,calloutVertical="calloutVertical"in changes?changes.calloutVertical:attr.calloutVertical;rotationRads%=2*Math.PI,Math.cos(rotationRads)<0&&(rotationRads=(rotationRads+Math.PI)%(2*Math.PI)),rotationRads>Math.PI&&(rotationRads-=2*Math.PI),calloutVertical?(rotationRads=rotationRads*(1-callout)-Math.PI/2*callout,temp=width,width=height,height=temp):rotationRads*=1-callout,changes.rotationRads=rotationRads,changes.x=x*(1-callout)+calloutPlaceX*callout,changes.y=y*(1-callout)+calloutPlaceY*callout,dx=calloutPlaceX-x,dy=calloutPlaceY-y,Math.abs(dy*width)>Math.abs(dx*height)?0<dy?(changes.calloutEndX=changes.x-height/2*(dx/dy)*callout,changes.calloutEndY=changes.y-height/2*callout):(changes.calloutEndX=changes.x+height/2*(dx/dy)*callout,changes.calloutEndY=changes.y+height/2*callout):0<dx?(changes.calloutEndX=changes.x-width/2,changes.calloutEndY=changes.y-width/2*(dy/dx)*callout):(changes.calloutEndX=changes.x+width/2,changes.calloutEndY=changes.y+width/2*(dy/dx)*callout),changes.calloutStartX&&changes.calloutStartY?changes.calloutHasLine=0<dx&&changes.calloutStartX<changes.calloutEndX||dx<=0&&changes.calloutStartX>changes.calloutEndX||0<dy&&changes.calloutStartY<changes.calloutEndY||dy<=0&&changes.calloutStartY>changes.calloutEndY:changes.calloutHasLine=!0}return changes},pushDown:function(attr,changes){return changes=this.callParent([attr.calloutOriginal,changes]),this.setAttrs(attr,changes)},popUp:function(attr,changes){return attr=attr.prototype,changes=this.setAttrs(attr,changes),this._next?this._next.popUp(attr,changes):Ext.apply(attr,changes)}}),Ext.define("Ext.chart.label.Label",{extend:Ext.draw.sprite.Text,inheritableStatics:{def:{processors:{callout:"limited01",calloutHasLine:"bool",calloutPlaceX:"number",calloutPlaceY:"number",calloutStartX:"number",calloutStartY:"number",calloutEndX:"number",calloutEndY:"number",calloutColor:"color",calloutWidth:"number",calloutVertical:"bool",labelOverflowPadding:"number",display:"enums(none,under,over,rotate,insideStart,insideEnd,inside,outside)",orientation:"enums(horizontal,vertical)",renderer:"default"},defaults:{callout:0,calloutHasLine:!0,calloutPlaceX:0,calloutPlaceY:0,calloutStartX:0,calloutStartY:0,calloutEndX:0,calloutEndY:0,calloutWidth:1,calloutVertical:!1,calloutColor:"black",labelOverflowPadding:5,display:"none",orientation:"",renderer:null},triggers:{callout:"transform",calloutPlaceX:"transform",calloutPlaceY:"transform",labelOverflowPadding:"transform",calloutRotation:"transform",display:"hidden"},updaters:{hidden:function(attrs){attrs.hidden="none"===attrs.display}}}},config:{fx:{customDurations:{callout:200}},field:null,calloutLine:!0},applyCalloutLine:function(calloutLine){if(calloutLine)return Ext.apply({},calloutLine)},prepareModifiers:function(){this.callParent(arguments),this.calloutModifier=new Ext.chart.label.Callout({sprite:this}),this.fx.setNext(this.calloutModifier),this.calloutModifier.setNext(this.topModifier)},render:function(surface,ctx){var me=this,attr=me.attr,calloutColor=attr.calloutColor;ctx.save(),ctx.globalAlpha*=attr.callout,0<ctx.globalAlpha&&attr.calloutHasLine&&(calloutColor&&calloutColor.isGradient&&(calloutColor=calloutColor.getStops()[0].color),ctx.strokeStyle=calloutColor,ctx.fillStyle=calloutColor,ctx.lineWidth=attr.calloutWidth,ctx.beginPath(),ctx.moveTo(me.attr.calloutStartX,me.attr.calloutStartY),ctx.lineTo(me.attr.calloutEndX,me.attr.calloutEndY),ctx.stroke(),ctx.beginPath(),ctx.arc(me.attr.calloutStartX,me.attr.calloutStartY,+attr.calloutWidth,0,2*Math.PI,!0),ctx.fill(),ctx.beginPath(),ctx.arc(me.attr.calloutEndX,me.attr.calloutEndY,+attr.calloutWidth,0,2*Math.PI,!0),ctx.fill()),ctx.restore(),Ext.draw.sprite.Text.prototype.render.apply(me,arguments)}}),Ext.define("Ext.chart.series.Series",{mixins:[Ext.mixin.Observable,Ext.mixin.Bindable],isSeries:!0,defaultBindProperty:"store",type:null,seriesType:"sprite",identifiablePrefix:"ext-line-",observableType:"series",darkerStrokeRatio:.15,config:{chart:null,title:null,renderer:null,showInLegend:!0,triggerAfterDraw:!1,style:{},subStyle:{},themeStyle:{},colors:null,useDarkerStrokeColor:!0,store:null,label:{},labelOverflowPadding:null,showMarkers:!0,marker:null,markerSubStyle:null,itemInstancing:null,background:null,highlightItem:null,surface:null,overlaySurface:null,hidden:!1,highlight:!1,highlightCfg:{merge:function(value){return value},$value:{fillStyle:"yellow",strokeStyle:"red"}},animation:null,tooltip:null},directions:[],sprites:null,themeColorCount:function(){return 1},isStoreDependantColorCount:!1,themeMarkerCount:function(){return 0},getFields:function(fieldCategory){var fieldsItem,i,ln,fields=[];for(i=0,ln=fieldCategory.length;i<ln;i++)fieldsItem=this["get"+fieldCategory[i]+"Field"](),Ext.isArray(fieldsItem)?fields.push.apply(fields,fieldsItem):fields.push(fieldsItem);return fields},applyAnimation:function(newAnimation,oldAnimation){return newAnimation?!0===newAnimation&&(newAnimation={easing:"easeInOut",duration:500}):newAnimation={duration:0},oldAnimation?Ext.apply({},newAnimation,oldAnimation):newAnimation},getAnimation:function(){var chart=this.getChart();return chart&&chart.animationSuspendCount?{duration:0}:this.callParent()},updateTitle:function(newTitle){var chart=this.getChart();if(chart&&!chart.isInitializing){newTitle=Ext.Array.from(newTitle);var i,item,title,ln,series=chart.getSeries(),seriesIndex=Ext.Array.indexOf(series,this),legendStore=chart.getLegendStore(),yField=this.getYField();if(legendStore.getCount()&&-1!==seriesIndex)for(ln=yField?Math.min(newTitle.length,yField.length):newTitle.length,i=0;i<ln;i++)title=newTitle[i],item=legendStore.getAt(seriesIndex+i),title&&item&&item.set("name",title)}},applyHighlight:function(highlight,oldHighlight){return Ext.isObject(highlight)?highlight=Ext.merge({},this.config.highlightCfg,highlight):!0===highlight&&(highlight=this.config.highlightCfg),Ext.apply(oldHighlight||{},highlight)},updateHighlight:function(highlight){this.getStyle(),Ext.Object.isEmpty(highlight)||this.addItemHighlight()},updateHighlightCfg:function(highlightCfg){Ext.Object.equals(highlightCfg,this.defaultConfig.highlightCfg)||this.addItemHighlight()},applyItemInstancing:function(instancing,oldInstancing){return Ext.merge(oldInstancing||{},instancing)},setAttributesForItem:function(item,change){var i,sprite=item&&item.sprite;if(sprite)if(sprite.itemsMarker&&"items"===item.category&&sprite.putMarker(item.category,change,item.index,!1,!0),sprite.isMarkerHolder&&"markers"===item.category)sprite.putMarker(item.category,change,item.index,!1,!0);else if(sprite.isInstancing)sprite.setAttributesFor(item.index,change);else if(Ext.isArray(sprite))for(i=0;i<sprite.length;i++)sprite[i].setAttributes(change);else sprite.setAttributes(change)},getBBoxForItem:function(item){return item&&item.sprite?item.sprite.itemsMarker&&"items"===item.category?item.sprite.getMarkerBBox(item.category,item.index):item.sprite instanceof Ext.draw.sprite.Instancing?item.sprite.getBBoxFor(item.index):item.sprite.getBBox():null},applyHighlightItem:function(newHighlightItem,oldHighlightItem){if(newHighlightItem!==oldHighlightItem){if(Ext.isObject(newHighlightItem)&&Ext.isObject(oldHighlightItem)){var isSameSprite=newHighlightItem.sprite===oldHighlightItem.sprite,isSameIndex=newHighlightItem.index===oldHighlightItem.index;if(isSameSprite&&isSameIndex)return}return newHighlightItem}},updateHighlightItem:function(newHighlightItem,oldHighlightItem){this.setAttributesForItem(oldHighlightItem,{highlighted:!1}),this.setAttributesForItem(newHighlightItem,{highlighted:!0})},constructor:function(config){var id,me=this;(config=config||{}).tips&&(config=Ext.apply({tooltip:config.tips},config)),config.highlightCfg&&(config=Ext.apply({highlight:config.highlightCfg},config)),id="id"in config?config.id:"id"in me.config?me.config.id:me.getId(),me.setId(id),me.sprites=[],me.dataRange=[],me.mixins.observable.constructor.call(me,config),me.initBindable()},lookupViewModel:function(skipThis){var chart=this.getChart();return chart?chart.lookupViewModel(skipThis):null},applyTooltip:function(tooltip,oldTooltip){var config=Ext.apply({xtype:"tooltip",renderer:Ext.emptyFn,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,offsetX:10,offsetY:10},tooltip);return Ext.create(config)},updateTooltip:function(){this.addItemHighlight()},addItemHighlight:function(){var chart=this.getChart();if(chart){var i,interaction,hasRequiredInteraction,interactions=chart.getInteractions();for(i=0;i<interactions.length;i++)if((interaction=interactions[i]).isItemHighlight||interaction.isItemEdit){hasRequiredInteraction=!0;break}hasRequiredInteraction||(interactions.push("itemhighlight"),chart.setInteractions(interactions))}},showTooltip:function(item,xy){var surface,surfaceEl,pos,point,bbox,x,y,config,tooltip=this.getTooltip();tooltip&&(clearTimeout(this.tooltipTimeout),config=tooltip.config,tooltip.trackMouse?(xy[0]+=config.offsetX,xy[1]+=config.offsetY):(surface=item.sprite.getSurface(),(surfaceEl=Ext.get(surface.getId()))&&(x=(bbox=item.series.getBBoxForItem(item)).x+bbox.width/2,y=bbox.y+bbox.height/2,point=surface.matrix.transformPoint([x,y]),pos=surfaceEl.getXY(),xy=[x=surface.getInherited().rtl?pos[0]+surfaceEl.getWidth()-point[0]:pos[0]+point[0],y=pos[1]+point[1]])),Ext.callback(tooltip.renderer,tooltip.scope,[tooltip,item.record,item],0,this),tooltip.show(xy))},hideTooltip:function(item){var tooltip=this.getTooltip();tooltip&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=Ext.defer(function(){tooltip.hide()},1))},applyStore:function(store){return store&&Ext.StoreManager.lookup(store)},getStore:function(){return this._store||this.getChart()&&this.getChart().getStore()},updateStore:function(newStore,oldStore){var sprites,sprite,len,i,me=this,chart=me.getChart(),chartStore=chart&&chart.getStore();if((oldStore=oldStore||chartStore)&&oldStore!==newStore&&oldStore.un({datachanged:"onDataChanged",update:"onDataChanged",scope:me}),newStore){for(newStore.on({datachanged:"onDataChanged",update:"onDataChanged",scope:me}),i=0,len=(sprites=me.getSprites()).length;i<len;i++)(sprite=sprites[i]).setStore&&sprite.setStore(newStore);me.onDataChanged()}me.fireEvent("storechange",me,newStore,oldStore)},onStoreChange:function(chart,newStore,oldStore){this._store||this.updateStore(newStore,oldStore)},coordinate:function(direction,directionOffset,directionCount){var i,field,data,me=this,store=me.getStore(),hidden=me.getHidden(),items=store.getData().items,axis=me["get"+direction+"Axis"](),range={min:1/0,max:-1/0},fieldCategory=me["fieldCategory"+direction]||[direction],fields=me.getFields(fieldCategory),style={},sprites=me.getSprites();if(0<sprites.length){if(!Ext.isBoolean(hidden)||!hidden)for(i=0;i<fieldCategory.length;i++)field=fields[i],data=me.coordinateData(items,field,axis),me.getRangeOfData(data,range),style["data"+fieldCategory[i]]=data;for(me.dataRange[directionOffset]=range.min,me.dataRange[directionOffset+directionCount]=range.max,style["dataMin"+direction]=range.min,style["dataMax"+direction]=range.max,axis&&(axis.range=null,style["range"+direction]=axis.getRange()),i=0;i<sprites.length;i++)sprites[i].setAttributes(style)}},coordinateData:function(items,field,axis){var i,x,data=[],length=items.length,layout=axis&&axis.getLayout();for(i=0;i<length;i++)x=items[i].data[field],Ext.isEmpty(x,!0)?data[i]=x:data[i]=layout?layout.getCoordFor(x,field,i,items):+x;return data},getRangeOfData:function(data,range){var i,value,length=data.length,min=range.min,max=range.max;for(i=0;i<length;i++)(value=data[i])<min&&(min=value),max<value&&(max=value);range.min=min,range.max=max},updateLabelData:function(){var i,j,ln,labels,sprite,field,items=this.getStore().getData().items,sprites=this.getSprites(),labelTpl=this.getLabel().getTemplate(),labelFields=Ext.Array.from(labelTpl.getField());if(sprites.length&&labelFields.length)for(i=0;i<sprites.length;i++){for(labels=[],field=(sprite=sprites[i]).getField(),Ext.Array.indexOf(labelFields,field)<0&&(field=labelFields[i]),j=0,ln=items.length;j<ln;j++)labels.push(items[j].get(field));sprite.setAttributes({labels:labels})}},processData:function(){if(this.getStore()){var i,direction,axis,me=this,directions=this.directions,ln=directions.length;for(i=0;i<ln;i++)(axis=me["get"+(direction=directions[i])+"Axis"]())?axis.processData(me):me["coordinate"+direction]&&me["coordinate"+direction]();me.updateLabelData()}},applyBackground:function(background){return this.getChart()?(this.getSurface().setBackground(background),this.getSurface().getBackground()):background},updateChart:function(newChart,oldChart){var me=this,store=me._store;oldChart&&(oldChart.un("axeschange","onAxesChange",me),me.clearSprites(),me.setSurface(null),me.setOverlaySurface(null),oldChart.unregister(me),me.onChartDetached(oldChart),store||me.updateStore(null)),newChart&&(me.setSurface(newChart.getSurface("series")),me.setOverlaySurface(newChart.getSurface("overlay")),newChart.on("axeschange","onAxesChange",me),newChart.getAxes()&&me.onAxesChange(newChart),me.onChartAttached(newChart),newChart.register(me),store||me.updateStore(newChart.getStore()))},onAxesChange:function(chart){var axis,direction,i,ln,me=this,axes=chart.getAxes(),directionToAxesMap={},directionToFieldsMap={},needHighPrecision=!1,directions=this.directions;for(i=0,ln=directions.length;i<ln;i++)directionToFieldsMap[direction=directions[i]]=me.getFields(me["fieldCategory"+direction]);for(i=0,ln=axes.length;i<ln;i++)directionToAxesMap[(axis=axes[i]).getDirection()]?directionToAxesMap[axis.getDirection()].push(axis):directionToAxesMap[axis.getDirection()]=[axis];for(i=0,ln=directions.length;i<ln;i++)me["get"+(direction=directions[i])+"Axis"]()||directionToAxesMap[direction]&&(axis=me.findMatchingAxis(directionToAxesMap[direction],directionToFieldsMap[direction]))&&(me["set"+direction+"Axis"](axis),axis.getNeedHighPrecision()&&(needHighPrecision=!0));this.getSurface().setHighPrecision(needHighPrecision)},findMatchingAxis:function(directionAxes,directionFields){var axis,axisFields,i,j;for(i=0;i<directionAxes.length;i++){if(!(axisFields=(axis=directionAxes[i]).getFields()).length)return axis;if(directionFields)for(j=0;j<directionFields.length;j++)if(0<=Ext.Array.indexOf(axisFields,directionFields[j]))return axis}},onChartDetached:function(oldChart){this.fireEvent("chartdetached",oldChart,this),oldChart.un("storechange","onStoreChange",this)},onChartAttached:function(chart){var me=this;me.setBackground(me.getBackground()),me.fireEvent("chartattached",chart,me),chart.on("storechange","onStoreChange",me),me.processData()},updateOverlaySurface:function(overlaySurface){overlaySurface&&this.getLabel()&&this.getOverlaySurface().add(this.getLabel())},applyLabel:function(newLabel,oldLabel){return oldLabel?oldLabel.getTemplate().setAttributes(newLabel):(oldLabel=new Ext.chart.Markers({zIndex:10})).setTemplate(new Ext.chart.label.Label(newLabel)),oldLabel},createItemInstancingSprite:function(sprite,itemInstancing){var config,template,markers=new Ext.chart.Markers;return markers.setAttributes({zIndex:Number.MAX_VALUE}),config=Ext.apply({},itemInstancing),this.getHighlight()&&(config.highlight=this.getHighlight(),config.modifiers=["highlight"]),markers.setTemplate(config),(template=markers.getTemplate()).setAttributes(this.getStyle()),template.fx.on("animationstart","onSpriteAnimationStart",this),template.fx.on("animationend","onSpriteAnimationEnd",this),sprite.bindMarker("items",markers),this.getSurface().add(markers),markers},getDefaultSpriteConfig:function(){return{type:this.seriesType,renderer:this.getRenderer()}},updateRenderer:function(renderer){var sprites,chart=this.getChart();chart&&chart.isInitializing||(sprites=this.getSprites()).length&&(sprites[0].setAttributes({renderer:renderer||null}),chart&&!chart.isInitializing&&chart.redraw())},updateShowMarkers:function(showMarkers){var sprites=this.getSprites(),sprite=sprites&&sprites[0],markers=sprite&&sprite.getMarker("markers");markers&&markers.getTemplate().setAttributes({hidden:!showMarkers})},createSprite:function(){var markers,markersTpl,me=this,surface=me.getSurface(),itemInstancing=me.getItemInstancing(),sprite=surface.add(me.getDefaultSpriteConfig()),marker=me.getMarker();return sprite.setAttributes(me.getStyle()),sprite.setSeries(me),itemInstancing&&(sprite.itemsMarker=me.createItemInstancingSprite(sprite,itemInstancing)),sprite.bindMarker&&(marker&&(markers=new Ext.chart.Markers,markersTpl=Ext.Object.merge({},marker),me.getHighlight()&&(markersTpl.highlight=me.getHighlight(),markersTpl.modifiers=["highlight"]),markers.setTemplate(markersTpl),markers.getTemplate().fx.setCustomDurations({translationX:0,translationY:0}),sprite.dataMarker=markers,sprite.bindMarker("markers",markers),me.getOverlaySurface().add(markers)),me.getLabel().getTemplate().getField()&&sprite.bindMarker("labels",me.getLabel())),sprite.setStore&&sprite.setStore(me.getStore()),sprite.fx.on("animationstart","onSpriteAnimationStart",me),sprite.fx.on("animationend","onSpriteAnimationEnd",me),me.sprites.push(sprite),sprite},getSprites:Ext.emptyFn,onDataChanged:function(){var chart=this.getChart(),chartStore=chart&&chart.getStore();this.getStore()!==chartStore&&this.processData()},isXType:function(xtype){return"series"===xtype},getItemId:function(){return this.getId()},applyThemeStyle:function(theme,oldTheme){var fill,stroke;return stroke=(fill=theme&&theme.subStyle&&theme.subStyle.fillStyle)&&theme.subStyle.strokeStyle,fill&&!stroke&&(theme.subStyle.strokeStyle=this.getStrokeColorsFromFillColors(fill)),stroke=(fill=theme&&theme.markerSubStyle&&theme.markerSubStyle.fillStyle)&&theme.markerSubStyle.strokeStyle,fill&&!stroke&&(theme.markerSubStyle.strokeStyle=this.getStrokeColorsFromFillColors(fill)),Ext.apply(oldTheme||{},theme)},applyStyle:function(style,oldStyle){var cls=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+this.seriesType));return cls&&cls.def&&(style=cls.def.normalize(style)),Ext.apply({},style,oldStyle)},applySubStyle:function(subStyle,oldSubStyle){var cls=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+this.seriesType));return cls&&cls.def&&(subStyle=cls.def.batchedNormalize(subStyle,!0)),Ext.merge({},oldSubStyle,subStyle)},applyMarker:function(marker,oldMarker){var type=marker&&marker.type||oldMarker&&oldMarker.type||"circle",cls=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+type));return cls&&cls.def&&((marker=cls.def.normalize(Ext.isObject(marker)?marker:{},!0)).type=type),Ext.merge(oldMarker||{},marker)},applyMarkerSubStyle:function(marker,oldMarker){var type=marker&&marker.type||oldMarker&&oldMarker.type||"circle",cls=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+type));return cls&&cls.def&&(marker=cls.def.batchedNormalize(marker,!0)),Ext.merge(oldMarker||{},marker)},updateHidden:function(hidden){var me=this;me.getColors(),me.getSubStyle(),me.setSubStyle({hidden:hidden}),me.processData(),me.doUpdateStyles(),Ext.isArray(hidden)||me.updateLegendStore(hidden)},updateLegendStore:function(hidden,index){var record,legendStore=this.getChart().getLegendStore(),id=this.getId();legendStore&&(1<arguments.length?-1!==(record=legendStore.findBy(function(rec){return rec.get("series")===id&&rec.get("index")===index}))&&(record=legendStore.getAt(record)):record=legendStore.findRecord("series",id),record&&record.get("disabled")!==hidden&&record.set("disabled",hidden))},setHiddenByIndex:function(index,value){var me=this;Ext.isArray(me.getHidden())?(me.getHidden()[index]=value,me.updateHidden(me.getHidden()),me.updateLegendStore(value,index)):me.setHidden(value)},getStrokeColorsFromFillColors:function(colors){var darker=this.getUseDarkerStrokeColor(),darkerRatio=Ext.isNumber(darker)?darker:this.darkerStrokeRatio;return darker?Ext.Array.map(colors,function(color){return color=Ext.isString(color)?color:color.stops[0].color,(color=Ext.draw.Color.fromString(color)).createDarker(darkerRatio).toString()}):Ext.Array.clone(colors)},updateThemeColors:function(colors){var theme=this.getThemeStyle(),newSubStyle={fillStyle:Ext.Array.clone(colors),strokeStyle:this.getStrokeColorsFromFillColors(colors)};theme.subStyle=Ext.apply(theme.subStyle||{},newSubStyle),theme.markerSubStyle=Ext.apply(theme.markerSubStyle||{},newSubStyle),this.doUpdateStyles()},themeOnlyIfConfigured:{},updateTheme:function(theme){var key,value,isObjValue,isUnusedConfig,initialValue,cfg,me=this,seriesTheme=theme.getSeries(),initialConfig=me.getInitialConfig(),defaultConfig=me.defaultConfig,configs=me.getConfigurator().configs,genericSeriesTheme=seriesTheme.defaults,specificSeriesTheme=seriesTheme[me.type],themeOnlyIfConfigured=me.themeOnlyIfConfigured;for(key in seriesTheme=Ext.merge({},genericSeriesTheme,specificSeriesTheme))if(value=seriesTheme[key],cfg=configs[key],null!=value&&cfg){if(initialValue=initialConfig[key],isObjValue=Ext.isObject(value),isUnusedConfig=initialValue===defaultConfig[key],isObjValue){if(isUnusedConfig&&themeOnlyIfConfigured[key])continue;value=Ext.merge({},value,initialValue)}(isUnusedConfig||isObjValue)&&me[cfg.names.set](value)}},updateChartColors:function(colors){this.getColors()||this.updateThemeColors(colors)},updateColors:function(colors){this.updateThemeColors(colors)},updateStyle:function(){this.doUpdateStyles()},updateSubStyle:function(){this.doUpdateStyles()},updateThemeStyle:function(){this.doUpdateStyles()},doUpdateStyles:function(){for(var style,me=this,sprites=me.sprites,itemInstancing=me.getItemInstancing(),i=0,ln=sprites&&sprites.length,markerCfg=(me.getConfig("showMarkers",!0),me.getMarker());i<ln;i++)style=me.getStyleByIndex(i),itemInstancing&&sprites[i].itemsMarker.getTemplate().setAttributes(style),sprites[i].setAttributes(style),markerCfg&&sprites[i].dataMarker&&sprites[i].dataMarker.getTemplate().setAttributes(me.getMarkerStyleByIndex(i))},getStyleWithTheme:function(){var theme=this.getThemeStyle(),seriesThemeStyle=theme&&theme.style||{};return Ext.applyIf(Ext.apply({},this.getStyle()),seriesThemeStyle)},getSubStyleWithTheme:function(){var theme=this.getThemeStyle(),seriesThemeSubStyle=theme&&theme.subStyle||{};return Ext.applyIf(Ext.apply({},this.getSubStyle()),seriesThemeSubStyle)},getStyleByIndex:function(i){var style,themeStyle,subStyle,themeSubStyle,me=this,theme=me.getThemeStyle(),result={};return style=me.getStyle(),themeStyle=theme&&theme.style||{},subStyle=me.styleDataForIndex(me.getSubStyle(),i),themeSubStyle=me.styleDataForIndex(theme&&theme.subStyle,i),Ext.apply(result,themeStyle),Ext.apply(result,themeSubStyle),Ext.apply(result,style),Ext.apply(result,subStyle),result},getMarkerStyleByIndex:function(i){var style,themeStyle,subStyle,themeSubStyle,markerStyle,themeMarkerStyle,markerSubStyle,themeMarkerSubStyle,me=this,theme=me.getThemeStyle(),result={};return style=me.getStyle(),themeStyle=theme&&theme.style||{},(subStyle=me.styleDataForIndex(me.getSubStyle(),i)).hasOwnProperty("hidden")&&(subStyle.hidden=subStyle.hidden||!this.getConfig("showMarkers",!0)),themeSubStyle=me.styleDataForIndex(theme&&theme.subStyle,i),markerStyle=me.getMarker(),themeMarkerStyle=theme&&theme.marker||{},markerSubStyle=me.getMarkerSubStyle(),themeMarkerSubStyle=me.styleDataForIndex(theme&&theme.markerSubStyle,i),Ext.apply(result,themeStyle),Ext.apply(result,themeSubStyle),Ext.apply(result,themeMarkerStyle),Ext.apply(result,themeMarkerSubStyle),Ext.apply(result,style),Ext.apply(result,subStyle),Ext.apply(result,markerStyle),Ext.apply(result,markerSubStyle),result},styleDataForIndex:function(style,i){var value,name,result={};if(style)for(name in style)value=style[name],Ext.isArray(value)?result[name]=value[i%value.length]:result[name]=value;return result},getItemForPoint:Ext.emptyFn,getItemByIndex:function(index,category){var me=this,sprites=me.getSprites(),sprite=sprites&&sprites[0];if(sprite)return void 0===category&&sprite.isMarkerHolder?category=me.getItemInstancing()?"items":"markers":category&&""!==category&&"sprites"!==category||(sprite=sprites[index]),sprite?{series:me,category:category,index:index,record:me.getStore().getData().items[index],field:me.getYField(),sprite:sprite}:void 0},onSpriteAnimationStart:function(sprite){this.fireEvent("animationstart",this,sprite)},onSpriteAnimationEnd:function(sprite){this.fireEvent("animationend",this,sprite)},resolveListenerScope:function(defaultScope){var scope,me=this,namedScope=Ext._namedScopes[defaultScope],chart=me.getChart();return namedScope?namedScope.isThis?scope=me:namedScope.isController?scope=chart?chart.resolveListenerScope(defaultScope,!1):me:namedScope.isSelf&&((scope=chart?chart.resolveListenerScope(defaultScope,!1):me)!==chart||chart.getInheritedConfig("defaultListenerScope")||(scope=me)):scope=chart?chart.resolveListenerScope(defaultScope,!1):defaultScope||me,scope},provideLegendInfo:function(target){target.push({name:this.getTitle()||this.getId(),mark:"black",disabled:this.getHidden(),series:this.getId(),index:0})},clearSprites:function(){var sprite,i,ln,sprites=this.sprites;for(i=0,ln=sprites.length;i<ln;i++)(sprite=sprites[i])&&sprite.isSprite&&sprite.destroy();this.sprites=[]},destroy:function(){var me=this,store=me._store,tooltip=me.getConfig("tooltip",!0);store&&store.getAutoDestroy()&&Ext.destroy(store),me.setChart(null),me.clearListeners(),tooltip&&(Ext.destroy(tooltip),clearTimeout(me.tooltipTimeout)),me.callParent()}}),Ext.define("Ext.chart.interactions.Abstract",{xtype:"interaction",mixins:{observable:Ext.mixin.Observable},config:{gestures:{tap:"onGesture"},chart:null,enabled:!0},throttleGap:0,stopAnimationBeforeSync:!1,constructor:function(config){var id,me=this;id="id"in(config=config||{})?config.id:"id"in me.config?me.config.id:me.getId(),me.setId(id),me.mixins.observable.constructor.call(me,config)},initialize:Ext.emptyFn,updateChart:function(newChart,oldChart){oldChart!==newChart&&(oldChart&&(oldChart.unregister(this),this.removeChartListener(oldChart)),newChart&&(newChart.register(this),this.addChartListener()))},updateEnabled:function(enabled){var chart=this.getChart();chart&&(enabled?this.addChartListener():this.removeChartListener(chart))},onGesture:Ext.emptyFn,getItemForEvent:function(e){var chart=this.getChart(),chartXY=chart.getEventXY(e);return chart.getItemForPoint(chartXY[0],chartXY[1])},getItemsForEvent:function(e){var chart=this.getChart(),chartXY=chart.getEventXY(e);return chart.getItemsForPoint(chartXY[0],chartXY[1])},addChartListener:function(){var gesture,me=this,chart=me.getChart(),gestures=me.getGestures();if(me.getEnabled())for(gesture in me.listeners=me.listeners||{},gestures)insertGesture(gesture,gestures[gesture]);function insertGesture(name,fn){chart.addElementListener(name,me.listeners[name]=function(e){var result,locks=me.getLocks();if(me.getEnabled()&&(!(name in locks)||locks[name]===me))return!1===(result=(Ext.isFunction(fn)?fn:me[fn]).apply(this,arguments))&&e&&e.stopPropagation&&e.stopPropagation(),result},me)}},removeChartListener:function(chart){var gesture,name,fn,me=this,gestures=me.getGestures();if(me.listeners)for(gesture in gestures)name=gesture,(fn=me.listeners[name])&&(chart.removeElementListener(name,fn),delete me.listeners[name])},lockEvents:function(){for(var locks=this.getLocks(),args=Array.prototype.slice.call(arguments),i=args.length;i--;)locks[args[i]]=this},unlockEvents:function(){for(var locks=this.getLocks(),args=Array.prototype.slice.call(arguments),i=args.length;i--;)delete locks[args[i]]},getLocks:function(){var chart=this.getChart();return chart.lockedEvents||(chart.lockedEvents={})},isMultiTouch:function(){return!!Ext.browser.is.IE10||!Ext.os.is.Desktop},initializeDefaults:Ext.emptyFn,doSync:function(){var me=this,chart=me.getChart();me.syncTimer&&(clearTimeout(me.syncTimer),me.syncTimer=null),me.stopAnimationBeforeSync&&chart.animationSuspendCount++,chart.redraw(),me.stopAnimationBeforeSync&&chart.animationSuspendCount--,me.syncThrottle=Date.now()+me.throttleGap},sync:function(){var me=this;if(me.throttleGap&&Ext.frameStartTime<me.syncThrottle){if(me.syncTimer)return;me.syncTimer=Ext.defer(function(){me.doSync()},me.throttleGap)}else me.doSync()},getItemId:function(){return this.getId()},isXType:function(xtype){return"interaction"===xtype},destroy:function(){this.setChart(null),delete this.listeners,this.callParent()}},function(){Ext.os.is.Android4&&(this.prototype.throttleGap=40)}),Ext.define("Ext.chart.MarkerHolder",{extend:Ext.Mixin,mixinConfig:{id:"markerHolder",after:{constructor:"constructor",preRender:"preRender"},before:{destroy:"destroy"}},isMarkerHolder:!0,surfaceMatrix:null,inverseSurfaceMatrix:null,deprecated:{6:{methods:{getBoundMarker:{message:"Please use the 'getMarker' method instead.",fn:function(name){var marker=this.boundMarkers[name];return marker?[marker]:marker}}}}},constructor:function(){this.boundMarkers={},this.cleanRedraw=!1},bindMarker:function(name,marker){var markers=this.boundMarkers;marker&&marker.isMarkers&&(this.releaseMarker(name),(markers[name]=marker).on("destroy",this.onMarkerDestroy,this))},onMarkerDestroy:function(marker){this.releaseMarker(marker)},releaseMarker:function(marker){var name,markers=this.boundMarkers;if(marker&&marker.isMarkers){for(name in markers)if(markers[name]===marker){delete markers[name];break}}else marker=markers[name=marker],delete markers[name];return marker||null},getMarker:function(name){return this.boundMarkers[name]||null},preRender:function(){var name,marker,matrix,me=this,id=me.getId(),boundMarkers=me.boundMarkers,parent=me.getParent();if(matrix=me.surfaceMatrix?me.surfaceMatrix.set(1,0,0,1,0,0):me.surfaceMatrix=new Ext.draw.Matrix,me.cleanRedraw=!me.attr.dirty,!me.cleanRedraw)for(name in boundMarkers)(marker=boundMarkers[name])&&marker.clear(id);for(;parent&&parent.attr&&parent.attr.matrix;)matrix.prependMatrix(parent.attr.matrix),parent=parent.getParent();matrix.prependMatrix(parent.matrix),me.surfaceMatrix=matrix,me.inverseSurfaceMatrix=matrix.inverse(me.inverseSurfaceMatrix)},putMarker:function(name,attr,index,bypassNormalization,keepRevision){var marker=this.boundMarkers[name],id=this.getId();marker&&marker.putMarkerFor(id,attr,index,bypassNormalization,keepRevision)},getMarkerBBox:function(name,index,isWithoutTransform){var marker=this.boundMarkers[name],id=this.getId();if(marker)return marker.getMarkerBBoxFor(id,index,isWithoutTransform)},destroy:function(){var name,boundMarkers=this.boundMarkers;for(name in boundMarkers)boundMarkers[name].destroy()}}),Ext.define("Ext.chart.axis.sprite.Axis",{extend:Ext.draw.sprite.Sprite,alias:"sprite.axis",type:"axis",mixins:{markerHolder:Ext.chart.MarkerHolder},inheritableStatics:{def:{processors:{grid:"bool",axisLine:"bool",minorTicks:"bool",minorTickSize:"number",majorTicks:"bool",majorTickSize:"number",length:"number",startGap:"number",endGap:"number",dataMin:"number",dataMax:"number",visibleMin:"number",visibleMax:"number",position:"enums(left,right,top,bottom,angular,radial,gauge)",minStepSize:"number",estStepSize:"number",titleOffset:"number",textPadding:"number",min:"number",max:"number",centerX:"number",centerY:"number",radius:"number",totalAngle:"number",baseRotation:"number",data:"default",enlargeEstStepSizeByText:"bool"},defaults:{grid:!1,axisLine:!0,minorTicks:!1,minorTickSize:3,majorTicks:!0,majorTickSize:5,length:0,startGap:0,endGap:0,visibleMin:0,visibleMax:1,dataMin:0,dataMax:1,position:"",minStepSize:0,estStepSize:20,min:0,max:1,centerX:0,centerY:0,radius:1,baseRotation:0,data:null,titleOffset:0,textPadding:0,scalingCenterY:0,scalingCenterX:0,strokeStyle:"black",enlargeEstStepSizeByText:!1},triggers:{minorTickSize:"bbox",majorTickSize:"bbox",position:"bbox,layout",axisLine:"bbox,layout",min:"layout",max:"layout",length:"layout",minStepSize:"layout",estStepSize:"layout",data:"layout",dataMin:"layout",dataMax:"layout",visibleMin:"layout",visibleMax:"layout",enlargeEstStepSizeByText:"layout"},updaters:{layout:"layoutUpdater"}}},config:{label:null,layout:null,segmenter:null,renderer:null,layoutContext:null,axis:null},thickness:0,stepSize:0,getBBox:function(){return null},defaultRenderer:function(v){return this.segmenter.renderer(v,this)},layoutUpdater:function(){var me=this,chart=me.getAxis().getChart();if(!chart.isInitializing){var attr=me.attr,layout=me.getLayout(),isRtl=chart.getInherited().rtl,min=attr.dataMin+(attr.dataMax-attr.dataMin)*attr.visibleMin,max=attr.dataMin+(attr.dataMax-attr.dataMin)*attr.visibleMax,position=attr.position,context={attr:attr,segmenter:me.getSegmenter(),renderer:me.defaultRenderer};"left"===position||"right"===position?(attr.translationX=0,attr.translationY=max*attr.length/(max-min),attr.scalingX=1,attr.scalingY=-attr.length/(max-min),attr.scalingCenterY=0,attr.scalingCenterX=0,me.applyTransformations(!0)):"top"!==position&&"bottom"!==position||(attr.translationX=isRtl?attr.length+min*attr.length/(max-min)+1:-min*attr.length/(max-min),attr.translationY=0,attr.scalingX=(isRtl?-1:1)*attr.length/(max-min),attr.scalingY=1,attr.scalingCenterY=0,attr.scalingCenterX=0,me.applyTransformations(!0)),layout&&(layout.calculateLayout(context),me.setLayoutContext(context))}},iterate:function(snaps,fn){var i,position,id,axis,floatingAxes,floatingValues,threshold,some=Ext.Array.some,abs=Math.abs;if(snaps.getLabel){for(snaps.min<snaps.from&&fn.call(this,snaps.min,snaps.getLabel(snaps.min),-1,snaps),i=0;i<=snaps.steps;i++)fn.call(this,snaps.get(i),snaps.getLabel(i),i,snaps);snaps.max>snaps.to&&fn.call(this,snaps.max,snaps.getLabel(snaps.max),snaps.steps+1,snaps)}else{if(floatingAxes=(axis=this.getAxis()).floatingAxes,floatingValues=[],threshold=(snaps.to-snaps.from)/(snaps.steps+1),axis.getFloating())for(id in floatingAxes)floatingValues.push(floatingAxes[id]);function isTickVisible(position){return!floatingValues.length||some(floatingValues,function(value){return abs(value-position)>threshold})}for(snaps.min<snaps.from&&isTickVisible(snaps.min)&&fn.call(this,snaps.min,snaps.min,-1,snaps),i=0;i<=snaps.steps;i++)isTickVisible(position=snaps.get(i))&&fn.call(this,position,position,i,snaps);snaps.max>snaps.to&&isTickVisible(snaps.max)&&fn.call(this,snaps.max,snaps.max,snaps.steps+1,snaps)}},renderTicks:function(surface,ctx,layout,clipRect){var me=this,attr=me.attr,docked=attr.position,matrix=attr.matrix,halfLineWidth=.5*attr.lineWidth,xx=matrix.getXX(),dx=matrix.getDX(),yy=matrix.getYY(),dy=matrix.getDY(),majorTicks=layout.majorTicks,majorTickSize=attr.majorTickSize,minorTicks=layout.minorTicks,minorTickSize=attr.minorTickSize;if(majorTicks)switch(docked){case"right":function getRightTickFn(size){return function(position,labelText,i){position=surface.roundPixel(position*yy+dy)+halfLineWidth,ctx.moveTo(0,position),ctx.lineTo(size,position)}}me.iterate(majorTicks,getRightTickFn(majorTickSize)),minorTicks&&me.iterate(minorTicks,getRightTickFn(minorTickSize));break;case"left":function getLeftTickFn(size){return function(position,labelText,i){position=surface.roundPixel(position*yy+dy)+halfLineWidth,ctx.moveTo(clipRect[2]-size,position),ctx.lineTo(clipRect[2],position)}}me.iterate(majorTicks,getLeftTickFn(majorTickSize)),minorTicks&&me.iterate(minorTicks,getLeftTickFn(minorTickSize));break;case"bottom":function getBottomTickFn(size){return function(position,labelText,i){position=surface.roundPixel(position*xx+dx)-halfLineWidth,ctx.moveTo(position,0),ctx.lineTo(position,size)}}me.iterate(majorTicks,getBottomTickFn(majorTickSize)),minorTicks&&me.iterate(minorTicks,getBottomTickFn(minorTickSize));break;case"top":function getTopTickFn(size){return function(position,labelText,i){position=surface.roundPixel(position*xx+dx)-halfLineWidth,ctx.moveTo(position,clipRect[3]),ctx.lineTo(position,clipRect[3]-size)}}me.iterate(majorTicks,getTopTickFn(majorTickSize)),minorTicks&&me.iterate(minorTicks,getTopTickFn(minorTickSize));break;case"angular":me.iterate(majorTicks,function(position,labelText,i){position=position/(attr.max+1)*Math.PI*2+attr.baseRotation,ctx.moveTo(attr.centerX+attr.length*Math.cos(position),attr.centerY+attr.length*Math.sin(position)),ctx.lineTo(attr.centerX+(attr.length+majorTickSize)*Math.cos(position),attr.centerY+(attr.length+majorTickSize)*Math.sin(position))});break;case"gauge":var gaugeAngles=me.getGaugeAngles();me.iterate(majorTicks,function(position,labelText,i){position=(position-attr.min)/(attr.max-attr.min+1)*attr.totalAngle-attr.totalAngle+gaugeAngles.start,ctx.moveTo(attr.centerX+attr.length*Math.cos(position),attr.centerY+attr.length*Math.sin(position)),ctx.lineTo(attr.centerX+(attr.length+majorTickSize)*Math.cos(position),attr.centerY+(attr.length+majorTickSize)*Math.sin(position))})}},renderLabels:function(surface,ctx,layoutContext,clipRect){var font,labelOffset,labelInverseMatrix,bbox,fly,text,titlePadding,translation,me=this,attr=me.attr,halfLineWidth=.5*attr.lineWidth,docked=attr.position,matrix=attr.matrix,textPadding=attr.textPadding,xx=matrix.getXX(),dx=matrix.getDX(),yy=matrix.getYY(),dy=matrix.getDY(),thickness=0,majorTicks=layoutContext.majorTicks,tickPadding=Math.max(attr.majorTickSize,attr.minorTickSize)+attr.lineWidth,isBBoxIntersect=Ext.draw.Draw.isBBoxIntersect,label=me.getLabel(),lastLabelText=null,textSize=0,textCount=0,segmenter=layoutContext.segmenter,renderer=me.getRenderer(),axis=me.getAxis(),title=axis.getTitle(),titleBBox=title&&""!==title.attr.text&&title.getBBox(),lastBBox=null;if(majorTicks&&label&&!label.attr.hidden){switch(font=label.attr.font,ctx.font!==font&&(ctx.font=font),label.setAttributes({translationX:0,translationY:0},!0),label.applyTransformations(),labelInverseMatrix=label.attr.inverseMatrix.elements.slice(0),docked){case"left":switch(titlePadding=titleBBox?titleBBox.x+titleBBox.width:0,label.attr.textAlign){case"start":translation=surface.roundPixel(titlePadding+dx)-halfLineWidth;break;case"end":translation=surface.roundPixel(clipRect[2]-tickPadding+dx)-halfLineWidth;break;default:translation=surface.roundPixel(titlePadding+(clipRect[2]-titlePadding-tickPadding)/2+dx)-halfLineWidth}label.setAttributes({translationX:translation},!0);break;case"right":switch(titlePadding=titleBBox?clipRect[2]-titleBBox.x:0,label.attr.textAlign){case"start":translation=surface.roundPixel(tickPadding+dx)+halfLineWidth;break;case"end":translation=surface.roundPixel(clipRect[2]-titlePadding+dx)+halfLineWidth;break;default:translation=surface.roundPixel(tickPadding+(clipRect[2]-tickPadding-titlePadding)/2+dx)+halfLineWidth}label.setAttributes({translationX:translation},!0);break;case"top":titlePadding=titleBBox?titleBBox.y+titleBBox.height:0,label.setAttributes({translationY:surface.roundPixel(titlePadding+(clipRect[3]-titlePadding-tickPadding)/2)-halfLineWidth},!0);break;case"bottom":titlePadding=titleBBox?clipRect[3]-titleBBox.y:0,label.setAttributes({translationY:surface.roundPixel(tickPadding+(clipRect[3]-tickPadding-titlePadding)/2)+halfLineWidth},!0);break;case"radial":label.setAttributes({translationX:attr.centerX},!0);break;case"angular":case"gauge":label.setAttributes({translationY:attr.centerY},!0)}if("left"===docked||"right"===docked)me.iterate(majorTicks,function(position,labelText,i){if(void 0!==labelText&&(text=renderer?Ext.callback(renderer,null,[axis,labelText,layoutContext,lastLabelText],0,axis):segmenter.renderer(labelText,layoutContext,lastLabelText),lastLabelText=labelText,label.setAttributes({text:String(text),translationY:surface.roundPixel(position*yy+dy)},!0),label.applyTransformations(),(thickness=Math.max(thickness,label.getBBox().width+tickPadding))<=me.thickness)){if(fly=Ext.draw.Matrix.fly(label.attr.matrix.elements.slice(0)),bbox=fly.prepend.apply(fly,labelInverseMatrix).transformBBox(label.getBBox(!0)),lastBBox&&!isBBoxIntersect(bbox,lastBBox,textPadding))return;surface.renderSprite(label),textSize+=(lastBBox=bbox).height,textCount++}});else if("top"===docked||"bottom"===docked)me.iterate(majorTicks,function(position,labelText,i){if(void 0!==labelText&&(text=renderer?Ext.callback(renderer,null,[axis,labelText,layoutContext,lastLabelText],0,axis):segmenter.renderer(labelText,layoutContext,lastLabelText),lastLabelText=labelText,label.setAttributes({text:String(text),translationX:surface.roundPixel(position*xx+dx)},!0),label.applyTransformations(),(thickness=Math.max(thickness,label.getBBox().height+tickPadding))<=me.thickness)){if(fly=Ext.draw.Matrix.fly(label.attr.matrix.elements.slice(0)),bbox=fly.prepend.apply(fly,labelInverseMatrix).transformBBox(label.getBBox(!0)),lastBBox&&!isBBoxIntersect(bbox,lastBBox,textPadding))return;surface.renderSprite(label),textSize+=(lastBBox=bbox).width,textCount++}});else if("radial"===docked)me.iterate(majorTicks,function(position,labelText,i){if(void 0!==labelText&&(text=renderer?Ext.callback(renderer,null,[axis,labelText,layoutContext,lastLabelText],0,axis):segmenter.renderer(labelText,layoutContext,lastLabelText),lastLabelText=labelText,void 0!==text)){if(label.setAttributes({text:String(text),translationX:attr.centerX-surface.roundPixel(position)/attr.max*attr.length*Math.cos(attr.baseRotation+Math.PI/2),translationY:attr.centerY-surface.roundPixel(position)/attr.max*attr.length*Math.sin(attr.baseRotation+Math.PI/2)},!0),label.applyTransformations(),bbox=label.attr.matrix.transformBBox(label.getBBox(!0)),lastBBox&&!isBBoxIntersect(bbox,lastBBox))return;surface.renderSprite(label),textSize+=(lastBBox=bbox).width,textCount++}});else if("angular"===docked)labelOffset=attr.majorTickSize+.5*attr.lineWidth+(parseInt(label.attr.fontSize,10)||10)/2,me.iterate(majorTicks,function(position,labelText,i){if(void 0!==labelText&&(text=renderer?Ext.callback(renderer,null,[axis,labelText,layoutContext,lastLabelText],0,axis):segmenter.renderer(labelText,layoutContext,lastLabelText),lastLabelText=labelText,thickness=Math.max(thickness,Math.max(attr.majorTickSize,attr.minorTickSize)+("butt"!==attr.lineCap?.5*attr.lineWidth:0)),void 0!==text)){var angle=position/(attr.max+1)*Math.PI*2+attr.baseRotation;if(label.setAttributes({text:String(text),translationX:attr.centerX+(attr.length+labelOffset)*Math.cos(angle),translationY:attr.centerY+(attr.length+labelOffset)*Math.sin(angle)},!0),label.applyTransformations(),bbox=label.attr.matrix.transformBBox(label.getBBox(!0)),lastBBox&&!isBBoxIntersect(bbox,lastBBox))return;surface.renderSprite(label),textSize+=(lastBBox=bbox).width,textCount++}});else if("gauge"===docked){var gaugeAngles=me.getGaugeAngles();me.iterate(majorTicks,function(position,labelText,i){if(void 0!==labelText&&(text=renderer?Ext.callback(renderer,null,[axis,labelText,layoutContext,lastLabelText],0,axis):segmenter.renderer(labelText,layoutContext,lastLabelText),lastLabelText=labelText,void 0!==text)){var angle=(position-attr.min)/(attr.max-attr.min+1)*attr.totalAngle-attr.totalAngle+gaugeAngles.start;if(label.setAttributes({text:String(text),translationX:attr.centerX+(attr.length+10)*Math.cos(angle),translationY:attr.centerY+(attr.length+10)*Math.sin(angle)},!0),label.applyTransformations(),bbox=label.attr.matrix.transformBBox(label.getBBox(!0)),lastBBox&&!isBBoxIntersect(bbox,lastBBox))return;surface.renderSprite(label),textSize+=(lastBBox=bbox).width,textCount++}})}if(attr.enlargeEstStepSizeByText&&textCount&&(textSize/=textCount,textSize+=tickPadding,textSize*=2,attr.estStepSize<textSize&&(attr.estStepSize=textSize)),1<Math.abs(me.thickness-thickness))return me.thickness=thickness,attr.bbox.plain.dirty=!0,attr.bbox.transform.dirty=!0,me.doThicknessChanged(),!1}},renderAxisLine:function(surface,ctx,layout,clipRect){var position,gaugeAngles,attr=this.attr,halfLineWidth=.5*attr.lineWidth,docked=attr.position;if(attr.axisLine&&attr.length)switch(docked){case"left":position=surface.roundPixel(clipRect[2])-halfLineWidth,ctx.moveTo(position,-attr.endGap),ctx.lineTo(position,attr.length+attr.startGap+1);break;case"right":ctx.moveTo(halfLineWidth,-attr.endGap),ctx.lineTo(halfLineWidth,attr.length+attr.startGap+1);break;case"bottom":ctx.moveTo(-attr.startGap,halfLineWidth),ctx.lineTo(attr.length+attr.endGap,halfLineWidth);break;case"top":position=surface.roundPixel(clipRect[3])-halfLineWidth,ctx.moveTo(-attr.startGap,position),ctx.lineTo(attr.length+attr.endGap,position);break;case"angular":ctx.moveTo(attr.centerX+attr.length,attr.centerY),ctx.arc(attr.centerX,attr.centerY,attr.length,0,2*Math.PI,!0);break;case"gauge":gaugeAngles=this.getGaugeAngles(),ctx.moveTo(attr.centerX+Math.cos(gaugeAngles.start)*attr.length,attr.centerY+Math.sin(gaugeAngles.start)*attr.length),ctx.arc(attr.centerX,attr.centerY,attr.length,gaugeAngles.start,gaugeAngles.end,!0)}},getGaugeAngles:function(){var offset,angle=this.attr.totalAngle;return offset=angle<=Math.PI?.5*(Math.PI-angle):.5*-(2*Math.PI-angle),{start:offset=2*Math.PI-offset,end:offset-angle}},renderGridLines:function(surface,ctx,layout,clipRect){var anchor,j,lastAnchor,me=this,axis=me.getAxis(),attr=me.attr,matrix=attr.matrix,startGap=attr.startGap,endGap=attr.endGap,xx=matrix.getXX(),yy=matrix.getYY(),dx=matrix.getDX(),dy=matrix.getDY(),position=attr.position,alignment=axis.getGridAlignment(),majorTicks=layout.majorTicks;attr.grid&&majorTicks&&("left"===position||"right"===position?(lastAnchor=attr.min*yy+dy+endGap+startGap,me.iterate(majorTicks,function(position,labelText,i){anchor=position*yy+dy+endGap,me.putMarker(alignment+"-"+(i%2?"odd":"even"),{y:anchor,height:lastAnchor-anchor},j=i,!0),lastAnchor=anchor}),j++,anchor=0,me.putMarker(alignment+"-"+(j%2?"odd":"even"),{y:anchor,height:lastAnchor-anchor},j,!0)):"top"===position||"bottom"===position?(lastAnchor=attr.min*xx+dx+startGap,startGap&&me.putMarker(alignment+"-even",{x:0,width:lastAnchor},-1,!0),me.iterate(majorTicks,function(position,labelText,i){anchor=position*xx+dx+startGap,me.putMarker(alignment+"-"+(i%2?"odd":"even"),{x:anchor,width:lastAnchor-anchor},j=i,!0),lastAnchor=anchor}),j++,anchor=attr.length+attr.startGap+attr.endGap,me.putMarker(alignment+"-"+(j%2?"odd":"even"),{x:anchor,width:lastAnchor-anchor},j,!0)):"radial"===position?me.iterate(majorTicks,function(position,labelText,i){position&&(anchor=position/attr.max*attr.length,me.putMarker(alignment+"-"+(i%2?"odd":"even"),{scalingX:anchor,scalingY:anchor},i,!0),lastAnchor=anchor)}):"angular"===position&&me.iterate(majorTicks,function(position,labelText,i){attr.length&&(anchor=position/(attr.max+1)*Math.PI*2+attr.baseRotation,me.putMarker(alignment+"-"+(i%2?"odd":"even"),{rotationRads:anchor,rotationCenterX:0,rotationCenterY:0,scalingX:attr.length,scalingY:attr.length},i,!0),lastAnchor=anchor)}))},renderLimits:function(clipRect){var me=this,axis=me.getAxis(),innerPadding=axis.getChart().getInnerPadding(),limits=Ext.Array.from(axis.getLimits());if(limits.length){var titleBBox,titlePosition,titleFlip,limit,value,i,ln,x,y,limitsRect=axis.limits.surface.getRect(),attr=me.attr,matrix=attr.matrix,position=attr.position,chain=Ext.Object.chain,titles=axis.limits.titles;if(titles.instances=[],titles.position=0,"left"===position||"right"===position){for(i=0,ln=limits.length;i<ln;i++)if((limit=chain(limits[i])).line||(limit.line={}),value=(value=Ext.isString(limit.value)?axis.getCoordFor(limit.value):limit.value)*matrix.getYY()+matrix.getDY(),limit.line.y=value+innerPadding.top,limit.line.strokeStyle=limit.line.strokeStyle||attr.strokeStyle,me.putMarker("horizontal-limit-lines",limit.line,i,!0),limit.line.title){switch(titles.createInstance(limit.line.title),titleBBox=titles.getBBoxFor(titles.position-1),titlePosition=limit.line.title.position||("left"===position?"start":"end")){case"start":x=10;break;case"end":x=limitsRect[2]-10;break;case"middle":x=limitsRect[2]/2}titles.setAttributesFor(titles.position-1,{x:x,y:limit.line.y-titleBBox.height/2,textAlign:titlePosition,fillStyle:limit.line.title.fillStyle||limit.line.strokeStyle})}}else if("top"===position||"bottom"===position){for(i=0,ln=limits.length;i<ln;i++)if((limit=chain(limits[i])).line||(limit.line={}),value=(value=Ext.isString(limit.value)?axis.getCoordFor(limit.value):limit.value)*matrix.getXX()+matrix.getDX(),limit.line.x=value+innerPadding.left,limit.line.strokeStyle=limit.line.strokeStyle||attr.strokeStyle,me.putMarker("vertical-limit-lines",limit.line,i,!0),limit.line.title){switch(titles.createInstance(limit.line.title),titleBBox=titles.getBBoxFor(titles.position-1),titlePosition=limit.line.title.position||("top"===position?"end":"start")){case"start":y=limitsRect[3]-titleBBox.width/2-10;break;case"end":y=titleBBox.width/2+10;break;case"middle":y=limitsRect[3]/2}titles.setAttributesFor(titles.position-1,{x:limit.line.x+titleBBox.height/2,y:y,fillStyle:limit.line.title.fillStyle||limit.line.strokeStyle,rotationRads:Math.PI/2})}}else if("radial"===position)for(i=0,ln=limits.length;i<ln;i++)(limit=chain(limits[i])).line||(limit.line={}),(value=Ext.isString(limit.value)?axis.getCoordFor(limit.value):limit.value)>attr.max||(value=value/attr.max*attr.length,limit.line.cx=attr.centerX,limit.line.cy=attr.centerY,limit.line.scalingX=value,limit.line.scalingY=value,limit.line.strokeStyle=limit.line.strokeStyle||attr.strokeStyle,me.putMarker("circular-limit-lines",limit.line,i,!0),limit.line.title&&(titles.createInstance(limit.line.title),titleBBox=titles.getBBoxFor(titles.position-1),titles.setAttributesFor(titles.position-1,{x:attr.centerX,y:attr.centerY-value-titleBBox.height/2,fillStyle:limit.line.title.fillStyle||limit.line.strokeStyle})));else if("angular"===position)for(i=0,ln=limits.length;i<ln;i++)(limit=chain(limits[i])).line||(limit.line={}),value=(value=Ext.isString(limit.value)?axis.getCoordFor(limit.value):limit.value)/(attr.max+1)*Math.PI*2+attr.baseRotation,limit.line.translationX=attr.centerX,limit.line.translationY=attr.centerY,limit.line.rotationRads=value,limit.line.rotationCenterX=0,limit.line.rotationCenterY=0,limit.line.scalingX=attr.length,limit.line.scalingY=attr.length,limit.line.strokeStyle=limit.line.strokeStyle||attr.strokeStyle,me.putMarker("radial-limit-lines",limit.line,i,!0),limit.line.title&&(titles.createInstance(limit.line.title),titleBBox=titles.getBBoxFor(titles.position-1),titleFlip=value>-.5*Math.PI&&value<.5*Math.PI||value>1.5*Math.PI&&value<2*Math.PI?1:-1,titles.setAttributesFor(titles.position-1,{x:attr.centerX+.5*attr.length*Math.cos(value)+titleFlip*titleBBox.height/2*Math.sin(value),y:attr.centerY+.5*attr.length*Math.sin(value)-titleFlip*titleBBox.height/2*Math.cos(value),rotationRads:1==titleFlip?value:value-Math.PI,fillStyle:limit.line.title.fillStyle||limit.line.strokeStyle}))}},doThicknessChanged:function(){var axis=this.getAxis();axis&&axis.onThicknessChanged()},render:function(surface,ctx,clipRect){var me=this,layoutContext=me.getLayoutContext();if(layoutContext){if(!1===me.renderLabels(surface,ctx,layoutContext,clipRect))return!1;ctx.beginPath(),me.renderTicks(surface,ctx,layoutContext,clipRect),me.renderAxisLine(surface,ctx,layoutContext,clipRect),me.renderGridLines(surface,ctx,layoutContext,clipRect),me.renderLimits(clipRect),ctx.stroke()}}}),Ext.define("Ext.chart.axis.segmenter.Segmenter",{config:{axis:null},constructor:function(config){this.initConfig(config)},renderer:function(value,context){return String(value)},from:function(value){return value},diff:Ext.emptyFn,align:Ext.emptyFn,add:Ext.emptyFn,preferredStep:Ext.emptyFn}),Ext.define("Ext.chart.axis.segmenter.Names",{extend:Ext.chart.axis.segmenter.Segmenter,alias:"segmenter.names",renderer:function(value,context){return value},diff:function(min,max,unit){return Math.floor(max-min)},align:function(value,step,unit){return Math.floor(value)},add:function(value,step,unit){return value+step},preferredStep:function(min,estStepSize,minIdx,data){return{unit:1,step:1}}}),Ext.define("Ext.chart.axis.segmenter.Numeric",{extend:Ext.chart.axis.segmenter.Segmenter,alias:"segmenter.numeric",isNumeric:!0,renderer:function(value,context){return value.toFixed(Math.max(0,context.majorTicks.unit.fixes))},diff:function(min,max,unit){return Math.floor((max-min)/unit.scale)},align:function(value,step,unit){return Math.floor(value/(unit.scale*step))*unit.scale*step},add:function(value,step,unit){return value+step*unit.scale},preferredStep:function(min,estStepSize){var order=Math.floor(Math.log(estStepSize)*Math.LOG10E),scale=Math.pow(10,order);return(estStepSize/=scale)<2?estStepSize=2:estStepSize<5?estStepSize=5:estStepSize<10&&(estStepSize=10,order++),{unit:{fixes:-order,scale:scale},step:estStepSize}},exactStep:function(min,estStepSize){var order=Math.floor(Math.log(estStepSize)*Math.LOG10E);return{unit:{fixes:(estStepSize%Math.pow(10,order)==0?0:1)-order,scale:1},step:estStepSize}},adjustByMajorUnit:function(step,scale,range){var min=range[0],max=range[1],increment=step*scale,remainder=min%increment;0!==remainder&&(range[0]=min-remainder+(min<0?-increment:0)),0!==(remainder=max%increment)&&(range[1]=max-remainder+(0<max?increment:0))}}),Ext.define("Ext.chart.axis.segmenter.Time",{extend:Ext.chart.axis.segmenter.Segmenter,alias:"segmenter.time",config:{step:null},renderer:function(value,context){var ExtDate=Ext.Date;switch(context.majorTicks.unit){case"y":return ExtDate.format(value,"Y");case"mo":return ExtDate.format(value,"Y-m");case"d":return ExtDate.format(value,"Y-m-d")}return ExtDate.format(value,"Y-m-d\nH:i:s")},from:function(value){return new Date(value)},diff:function(min,max,unit){return isFinite(min)&&(min=new Date(min)),isFinite(max)&&(max=new Date(max)),Ext.Date.diff(min,max,unit)},align:function(date,step,unit){return"d"===unit&&7<=step?((date=Ext.Date.align(date,"d",step)).setDate(date.getDate()-date.getDay()+1),date):Ext.Date.align(date,unit,step)},add:function(value,step,unit){return Ext.Date.add(new Date(value),unit,step)},stepUnits:[[Ext.Date.YEAR,1,2,5,10,20,50,100,200,500],[Ext.Date.MONTH,1,3,6],[Ext.Date.DAY,1,7,14],[Ext.Date.HOUR,1,6,12],[Ext.Date.MINUTE,1,5,15,30],[Ext.Date.SECOND,1,5,15,30],[Ext.Date.MILLI,1,2,5,10,20,50,100,200,500]],preferredStep:function(min,estStepSize){if(this.getStep())return this.getStep();var result,unit,diff,i,j,from=new Date(+min),to=new Date(+min+Math.ceil(estStepSize)),units=this.stepUnits;for(i=0;i<units.length;i++)if(unit=units[i][0],0<(diff=this.diff(from,to,unit))){for(j=1;j<units[i].length;j++)if(diff<=units[i][j]){result={unit:unit,step:units[i][j]};break}result=result||{unit:units[--i][0],step:1};break}return result=result||{unit:Ext.Date.DAY,step:1}}}),Ext.define("Ext.chart.axis.layout.Layout",{mixins:{observable:Ext.mixin.Observable},config:{axis:null},constructor:function(config){this.mixins.observable.constructor.call(this,config)},processData:function(series){var i,ln,axis=this.getAxis(),direction=axis.getDirection(),boundSeries=axis.boundSeries;if(series)series["coordinate"+direction]();else for(i=0,ln=boundSeries.length;i<ln;i++)boundSeries[i]["coordinate"+direction]()},calculateMajorTicks:function(context){var attr=context.attr,range=attr.max-attr.min,zoom=range/Math.max(1,attr.length)*(attr.visibleMax-attr.visibleMin),viewMin=attr.min+range*attr.visibleMin,viewMax=attr.min+range*attr.visibleMax,estStepSize=attr.estStepSize*zoom,out=this.snapEnds(context,attr.min,attr.max,estStepSize);out&&(this.trimByRange(context,out,viewMin,viewMax),context.majorTicks=out)},calculateMinorTicks:function(context){this.snapMinorEnds&&(context.minorTicks=this.snapMinorEnds(context))},calculateLayout:function(context){var attr=context.attr;if(0===attr.length)return null;attr.majorTicks&&(this.calculateMajorTicks(context),attr.minorTicks&&this.calculateMinorTicks(context))},snapEnds:Ext.emptyFn,trimByRange:function(context,out,trimMin,trimMax){var segmenter=context.segmenter,unit=out.unit,beginIdx=segmenter.diff(out.from,trimMin,unit),endIdx=segmenter.diff(out.from,trimMax,unit),begin=Math.max(0,Math.ceil(beginIdx/out.step)),end=Math.min(out.steps,Math.floor(endIdx/out.step));if(end<out.steps&&(out.to=segmenter.add(out.from,end*out.step,unit)),out.max>trimMax&&(out.max=out.to),out.from<trimMin)for(out.from=segmenter.add(out.from,begin*out.step,unit);out.from<trimMin;)begin++,out.from=segmenter.add(out.from,out.step,unit);out.min<trimMin&&(out.min=out.from),out.steps=end-begin}}),Ext.define("Ext.chart.axis.layout.Discrete",{extend:Ext.chart.axis.layout.Layout,alias:"axisLayout.discrete",isDiscrete:!0,processData:function(){var i,ln,series,me=this,axis=me.getAxis(),seriesList=axis.boundSeries,direction=axis.getDirection();for(me.labels=[],me.labelMap={},i=0,ln=seriesList.length;i<ln;i++)(series=seriesList[i])["get"+direction+"Axis"]()===axis&&series["coordinate"+direction]();axis.getSprites()[0].setAttributes({data:me.labels}),me.fireEvent("datachange",me.labels)},calculateLayout:function(context){context.data=this.labels,this.callParent([context])},calculateMajorTicks:function(context){var attr=context.attr,data=context.data,range=attr.max-attr.min,zoom=range/Math.max(1,attr.length)*(attr.visibleMax-attr.visibleMin),viewMin=attr.min+range*attr.visibleMin,viewMax=attr.min+range*attr.visibleMax,estStepSize=attr.estStepSize*zoom,out=this.snapEnds(context,Math.max(0,attr.min),Math.min(attr.max,data.length-1),estStepSize);out&&(this.trimByRange(context,out,viewMin,viewMax),context.majorTicks=out)},snapEnds:function(context,min,max,estStepSize){estStepSize=Math.ceil(estStepSize);var steps=Math.floor((max-min)/estStepSize),data=context.data;return{min:min,max:max,from:min,to:steps*estStepSize+min,step:estStepSize,steps:steps,unit:1,getLabel:function(current){return data[this.from+this.step*current]},get:function(current){return this.from+this.step*current}}},trimByRange:function(context,out,trimMin,trimMax){var unit=out.unit,beginIdx=Math.ceil((trimMin-out.from)/unit)*unit,endIdx=Math.floor((trimMax-out.from)/unit)*unit,begin=Math.max(0,Math.ceil(beginIdx/out.step)),end=Math.min(out.steps,Math.floor(endIdx/out.step));if(end<out.steps&&(out.to=end),out.max>trimMax&&(out.max=out.to),out.from<trimMin&&0<out.step)for(out.from=out.from+begin*out.step*unit;out.from<trimMin;)begin++,out.from+=out.step*unit;out.min<trimMin&&(out.min=out.from),out.steps=end-begin},getCoordFor:function(value,field,idx,items){return this.labels.push(value),this.labels.length-1}}),Ext.define("Ext.chart.axis.layout.CombineDuplicate",{extend:Ext.chart.axis.layout.Discrete,alias:"axisLayout.combineDuplicate",getCoordFor:function(value,field,idx,items){if(value in this.labelMap)return this.labelMap[value];var result=this.labelMap[value]=this.labels.length;return this.labels.push(value),result}}),Ext.define("Ext.chart.axis.layout.Continuous",{extend:Ext.chart.axis.layout.Layout,alias:"axisLayout.continuous",isContinuous:!0,config:{adjustMinimumByMajorUnit:!1,adjustMaximumByMajorUnit:!1},getCoordFor:function(value,field,idx,items){return+value},snapEnds:function(context,min,max,estStepSize){var segmenter=context.segmenter,majorTickSteps=this.getAxis().getMajorTickSteps(),out=majorTickSteps&&segmenter.exactStep?segmenter.exactStep(min,(max-min)/majorTickSteps):segmenter.preferredStep(min,estStepSize),unit=out.unit,step=out.step,from=segmenter.align(min,step,unit),steps=(majorTickSteps||segmenter.diff(min,max,unit))+1;return{min:segmenter.from(min),max:segmenter.from(max),from:from,to:segmenter.add(from,steps*step,unit),step:step,steps:steps,unit:unit,get:function(current){return segmenter.add(this.from,this.step*current,unit)}}},snapMinorEnds:function(context){var majorTicks=context.majorTicks,minorTickSteps=this.getAxis().getMinorTickSteps(),segmenter=context.segmenter,min=majorTicks.min,max=majorTicks.max,from=majorTicks.from,unit=majorTicks.unit,step=majorTicks.step/minorTickSteps,scaledStep=step*unit.scale,fromMargin=from-min,offset=Math.floor(fromMargin/scaledStep),extraSteps=offset+Math.floor((max-majorTicks.to)/scaledStep)+1,steps=majorTicks.steps*minorTickSteps+extraSteps;return{min:min,max:max,from:min+fromMargin%scaledStep,to:segmenter.add(from,steps*step,unit),step:step,steps:steps,unit:unit,get:function(current){return current%minorTickSteps+offset+1!==0?segmenter.add(this.from,this.step*current,unit):null}}}}),Ext.define("Ext.chart.axis.Axis",{xtype:"axis",mixins:{observable:Ext.mixin.Observable},isAxis:!0,config:{position:"bottom",fields:[],label:void 0,grid:!1,limits:null,renderer:null,chart:null,style:null,margin:0,titleMargin:4,background:null,minimum:NaN,maximum:NaN,reconcileRange:!1,minZoom:1,maxZoom:1e4,layout:"continuous",segmenter:"numeric",hidden:!1,majorTickSteps:0,minorTickSteps:0,adjustByMajorUnit:!0,title:null,increment:.5,length:0,center:null,radius:null,totalAngle:Math.PI,rotation:null,labelInSpan:null,visibleRange:[0,1],needHighPrecision:!1,linkedTo:null,floating:null},titleOffset:0,spriteAnimationCount:0,prevMin:0,prevMax:1,boundSeries:[],sprites:null,surface:null,range:null,xValues:[],yValues:[],masterAxis:null,applyRotation:function(rotation){var twoPie=2*Math.PI;return(rotation%twoPie+Math.PI)%twoPie-Math.PI},updateRotation:function(rotation){var sprites=this.getSprites(),position=this.getPosition();!this.getHidden()&&"angular"===position&&sprites[0]&&sprites[0].setAttributes({baseRotation:rotation})},applyTitle:function(title,oldTitle){var surface;return Ext.isString(title)&&(title={text:title}),oldTitle?oldTitle.setAttributes(title):(oldTitle=Ext.create("sprite.text",title),(surface=this.getSurface())&&surface.add(oldTitle)),oldTitle},applyFloating:function(floating,oldFloating){return null===floating?floating={value:null,alongAxis:null}:Ext.isNumber(floating)&&(floating={value:floating,alongAxis:null}),Ext.isObject(floating)?(oldFloating&&oldFloating.alongAxis&&delete this.getChart().getAxis(oldFloating.alongAxis).floatingAxes[this.getId()],floating):oldFloating},constructor:function(config){var id,me=this;me.sprites=[],me.labels=[],me.floatingAxes={},"angular"===(config=config||{}).position&&(config.style=config.style||{},config.style.estStepSize=1),id="id"in config?config.id:"id"in me.config?me.config.id:me.getId(),me.setId(id),me.mixins.observable.constructor.apply(me,arguments)},getAlignment:function(){switch(this.getPosition()){case"left":case"right":return"vertical";case"top":case"bottom":return"horizontal";case"radial":return"radial";case"angular":return"angular"}},getGridAlignment:function(){switch(this.getPosition()){case"left":case"right":return"horizontal";case"top":case"bottom":return"vertical";case"radial":return"circular";case"angular":return"radial"}},getSurface:function(){var me=this,chart=me.getChart();if(chart&&!me.surface){var surface=me.surface=chart.getSurface(me.getId(),"axis"),gridSurface=me.gridSurface=chart.getSurface("main"),axisSprite=me.getSprites()[0],gridAlignment=me.getGridAlignment();gridSurface.waitFor(surface),me.getGrid(),me.getLimits()&&gridAlignment&&(gridAlignment=gridAlignment.replace("3d",""),me.limits={surface:chart.getSurface("overlay"),lines:new Ext.chart.Markers,titles:new Ext.draw.sprite.Instancing},me.limits.lines.setTemplate({xclass:"grid."+gridAlignment}),me.limits.lines.getTemplate().setAttributes({strokeStyle:"black"},!0),me.limits.surface.add(me.limits.lines),axisSprite.bindMarker(gridAlignment+"-limit-lines",me.limits.lines),me.limitTitleTpl=new Ext.draw.sprite.Text,me.limits.titles.setTemplate(me.limitTitleTpl),me.limits.surface.add(me.limits.titles),chart.on("redraw",me.renderLimits,me))}return me.surface},applyGrid:function(grid){return!0===grid?{}:grid},updateGrid:function(grid){var me=this;if(me.getChart()){var gridSprite,gridSurface=me.gridSurface,axisSprite=me.getSprites()[0],gridAlignment=me.getGridAlignment();grid&&((gridSprite=me.gridSpriteEven)||((gridSprite=me.gridSpriteEven=new Ext.chart.Markers).setTemplate({xclass:"grid."+gridAlignment}),gridSurface.add(gridSprite),axisSprite.bindMarker(gridAlignment+"-even",gridSprite)),Ext.isObject(grid)&&(gridSprite.getTemplate().setAttributes(grid),Ext.isObject(grid.even)&&gridSprite.getTemplate().setAttributes(grid.even)),(gridSprite=me.gridSpriteOdd)||((gridSprite=me.gridSpriteOdd=new Ext.chart.Markers).setTemplate({xclass:"grid."+gridAlignment}),gridSurface.add(gridSprite),axisSprite.bindMarker(gridAlignment+"-odd",gridSprite)),Ext.isObject(grid)&&(gridSprite.getTemplate().setAttributes(grid),Ext.isObject(grid.odd)&&gridSprite.getTemplate().setAttributes(grid.odd)))}else me.on({chartattached:Ext.bind(me.updateGrid,me,[grid]),single:!0})},renderLimits:function(){this.getSprites()[0].renderLimits()},getCoordFor:function(value,field,idx,items){return this.getLayout().getCoordFor(value,field,idx,items)},applyPosition:function(pos){return pos.toLowerCase()},applyLength:function(length,oldLength){return 0<length?length:oldLength},applyLabel:function(newText,oldText){return oldText=oldText||new Ext.draw.sprite.Text({}),this.limitTitleTpl&&this.limitTitleTpl.setAttributes(newText),oldText.setAttributes(newText),oldText},applyLayout:function(layout,oldLayout){return(layout=Ext.factory(layout,null,oldLayout,"axisLayout")).setAxis(this),layout},applySegmenter:function(segmenter,oldSegmenter){return(segmenter=Ext.factory(segmenter,null,oldSegmenter,"segmenter")).setAxis(this),segmenter},updateMinimum:function(){this.range=null},updateMaximum:function(){this.range=null},hideLabels:function(){this.getSprites()[0].setDirty(!0),this.setLabel({hidden:!0})},showLabels:function(){this.getSprites()[0].setDirty(!0),this.setLabel({hidden:!1})},renderFrame:function(){this.getSurface().renderFrame()},updateChart:function(newChart,oldChart){var surface,me=this;oldChart&&(oldChart.unregister(me),oldChart.un("serieschange",me.onSeriesChange,me),oldChart.un("redraw",me.renderLimits,me),me.linkAxis(),me.fireEvent("chartdetached",oldChart,me)),newChart&&(newChart.on("serieschange",me.onSeriesChange,me),me.surface=null,surface=me.getSurface(),me.getLabel().setSurface(surface),surface.add(me.getSprites()),surface.add(me.getTitle()),newChart.register(me),me.fireEvent("chartattached",newChart,me))},applyBackground:function(background){return Ext.ClassManager.getByAlias("sprite.rect").def.normalize(background)},processData:function(){this.getLayout().processData(),this.range=null},getDirection:function(){return this.getChart().getDirectionForAxis(this.getPosition())},isSide:function(){var position=this.getPosition();return"left"===position||"right"===position},applyFields:function(fields){return Ext.Array.from(fields)},applyVisibleRange:function(visibleRange,oldVisibleRange){if(this.getChart(),visibleRange[0]>visibleRange[1]){var temp=visibleRange[0];visibleRange[0]=visibleRange[1],visibleRange[0]=temp}if(visibleRange[1]===visibleRange[0]&&(visibleRange[1]+=1/this.getMaxZoom()),visibleRange[1]>visibleRange[0]+1?(visibleRange[0]=0,visibleRange[1]=1):visibleRange[0]<0?(visibleRange[1]-=visibleRange[0],visibleRange[0]=0):1<visibleRange[1]&&(visibleRange[0]-=visibleRange[1]-1,visibleRange[1]=1),!oldVisibleRange||visibleRange[0]!==oldVisibleRange[0]||visibleRange[1]!==oldVisibleRange[1])return visibleRange},updateVisibleRange:function(visibleRange){this.fireEvent("visiblerangechange",this,visibleRange)},onSeriesChange:function(chart){var i,linkedTo,masterAxis,me=this,series=chart.getSeries(),getAxisMethod="get"+me.getDirection()+"Axis",boundSeries=[],ln=series.length;for(i=0;i<ln;i++)this===series[i][getAxisMethod]()&&boundSeries.push(series[i]);me.boundSeries=boundSeries,linkedTo=me.getLinkedTo(),(masterAxis=!Ext.isEmpty(linkedTo)&&chart.getAxis(linkedTo))?me.linkAxis(masterAxis):me.getLayout().processData()},linkAxis:function(masterAxis){var me=this;function link(action,slave,master){master.getLayout()[action]("datachange","onDataChange",slave),master[action]("rangechange","onMasterAxisRangeChange",slave)}me.masterAxis&&(link("un",me,me.masterAxis),me.masterAxis=null),masterAxis&&(masterAxis.type!==this.type&&Ext.Error.raise("Linked axes must be of the same type."),link("on",me,masterAxis),me.onDataChange(masterAxis.getLayout().labels),me.onMasterAxisRangeChange(masterAxis,masterAxis.range),me.setStyle(Ext.apply({},me.config.style,masterAxis.config.style)),me.setTitle(Ext.apply({},me.config.title,masterAxis.config.title)),me.setLabel(Ext.apply({},me.config.label,masterAxis.config.label)),me.masterAxis=masterAxis)},onDataChange:function(data){this.getLayout().labels=data},onMasterAxisRangeChange:function(masterAxis,range){this.range=range},applyRange:function(newRange){return newRange?[null===newRange[0]?this.dataRange[0]:newRange[0],null===newRange[1]?this.dataRange[1]:newRange[1]]:this.dataRange.slice(0)},getRange:function(){var me=this;if(me.range)return me.range;if(me.masterAxis)return me.masterAxis.range;if(Ext.isNumber(me.getMinimum()+me.getMaximum()))return me.range=[me.getMinimum(),me.getMaximum()];var context,attr,majorTicks,i,ln,min=1/0,max=-1/0,boundSeries=me.boundSeries,layout=me.getLayout(),segmenter=me.getSegmenter(),visibleRange=me.getVisibleRange(),getRangeMethod="get"+me.getDirection()+"Range";for(i=0,ln=boundSeries.length;i<ln;i++){var minMax=boundSeries[i][getRangeMethod]();minMax&&(minMax[0]<min&&(min=minMax[0]),minMax[1]>max&&(max=minMax[1]))}return isFinite(max)||(max=me.prevMax),isFinite(min)||(min=me.prevMin),!me.getLabelInSpan()&&min!==max||(max+=me.getIncrement(),min-=me.getIncrement()),Ext.isNumber(me.getMinimum())?min=me.getMinimum():me.prevMin=min,Ext.isNumber(me.getMaximum())?max=me.getMaximum():me.prevMax=max,me.range=[Ext.Number.correctFloat(min),Ext.Number.correctFloat(max)],me.getReconcileRange()&&me.reconcileRange(),me.getAdjustByMajorUnit()&&segmenter.adjustByMajorUnit&&!me.getMajorTickSteps()&&((attr=Ext.Object.chain(me.getSprites()[0].attr)).min=me.range[0],attr.max=me.range[1],attr.visibleMin=visibleRange[0],attr.visibleMax=visibleRange[1],context={attr:attr,segmenter:segmenter},layout.calculateLayout(context),(majorTicks=context.majorTicks)?(segmenter.adjustByMajorUnit(majorTicks.step,majorTicks.unit.scale,me.range),attr.min=me.range[0],attr.max=me.range[1],delete context.majorTicks,layout.calculateLayout(context),majorTicks=context.majorTicks,segmenter.adjustByMajorUnit(majorTicks.step,majorTicks.unit.scale,me.range)):me.hasClearRangePending||(me.hasClearRangePending=!0,me.getChart().on("layout","clearRange",me))),Ext.Array.equals(me.range,me.oldRange||[])||(me.fireEvent("rangechange",me,me.range),me.oldRange=me.range),me.range},clearRange:function(){delete this.hasClearRangePending,this.range=null},reconcileRange:function(){var i,ln,axis,range,me=this,axes=me.getChart().getAxes(),direction=me.getDirection();if(axes)for(i=0,ln=axes.length;i<ln;i++)range=(axis=axes[i]).getRange(),axis!==me&&axis.getDirection()===direction&&range&&axis.getReconcileRange()&&(range[0]<me.range[0]&&(me.range[0]=range[0]),range[1]>me.range[1]&&(me.range[1]=range[1]))},applyStyle:function(style,oldStyle){var cls=Ext.ClassManager.getByAlias("sprite."+this.seriesType);return cls&&cls.def&&(style=cls.def.normalize(style)),oldStyle=Ext.apply(oldStyle||{},style)},themeOnlyIfConfigured:{grid:!0},updateTheme:function(theme){var key,value,isObjValue,isUnusedConfig,initialValue,cfg,me=this,axisTheme=theme.getAxis(),position=me.getPosition(),initialConfig=me.getInitialConfig(),defaultConfig=me.defaultConfig,configs=me.getConfigurator().configs,genericAxisTheme=axisTheme.defaults,specificAxisTheme=axisTheme[position],themeOnlyIfConfigured=me.themeOnlyIfConfigured;for(key in axisTheme=Ext.merge({},genericAxisTheme,specificAxisTheme))if(value=axisTheme[key],cfg=configs[key],null!=value&&cfg){if(initialValue=initialConfig[key],isObjValue=Ext.isObject(value),isUnusedConfig=initialValue===defaultConfig[key],isObjValue){if(isUnusedConfig&&themeOnlyIfConfigured[key])continue;value=Ext.merge({},value,initialValue)}(isUnusedConfig||isObjValue)&&me[cfg.names.set](value)}},updateCenter:function(center){var axisSprite=this.getSprites()[0],centerX=center[0],centerY=center[1];axisSprite&&axisSprite.setAttributes({centerX:centerX,centerY:centerY}),this.gridSpriteEven&&this.gridSpriteEven.getTemplate().setAttributes({translationX:centerX,translationY:centerY,rotationCenterX:centerX,rotationCenterY:centerY}),this.gridSpriteOdd&&this.gridSpriteOdd.getTemplate().setAttributes({translationX:centerX,translationY:centerY,rotationCenterX:centerX,rotationCenterY:centerY})},getSprites:function(){if(this.getChart()){var baseSprite,style,me=this,range=me.getRange(),position=me.getPosition(),animation=me.getChart().getAnimation(),length=me.getLength(),axisClass=me.superclass;if(!1===animation&&(animation={duration:0}),range){if(style=Ext.applyIf({position:position,axis:me,min:range[0],max:range[1],length:length,grid:me.getGrid(),hidden:me.getHidden(),titleOffset:me.titleOffset,layout:me.getLayout(),segmenter:me.getSegmenter(),totalAngle:me.getTotalAngle(),label:me.getLabel()},me.getStyle()),me.sprites.length)(baseSprite=me.sprites[0]).setAnimation(animation),baseSprite.setAttributes(style);else{for(;!axisClass.xtype;)axisClass=axisClass.superclass;(baseSprite=Ext.create("sprite."+axisClass.xtype,style)).fx.setCustomDurations({baseRotation:0}),baseSprite.fx.on("animationstart","onAnimationStart",me),baseSprite.fx.on("animationend","onAnimationEnd",me),baseSprite.setLayout(me.getLayout()),baseSprite.setSegmenter(me.getSegmenter()),baseSprite.setLabel(me.getLabel()),me.sprites.push(baseSprite),me.updateTitleSprite()}me.getRenderer()&&baseSprite.setRenderer(me.getRenderer())}return me.sprites}},updateTitleSprite:function(){var me=this,length=me.getLength();if(me.sprites[0]&&Ext.isNumber(length)){var thickness=this.sprites[0].thickness,surface=me.getSurface(),title=me.getTitle(),position=me.getPosition(),margin=me.getMargin(),titleMargin=me.getTitleMargin(),anchor=surface.roundPixel(length/2);if(title)switch(position){case"top":title.setAttributes({x:anchor,y:margin+titleMargin/2,textBaseline:"top",textAlign:"center"},!0),title.applyTransformations(),me.titleOffset=title.getBBox().height+titleMargin;break;case"bottom":title.setAttributes({x:anchor,y:thickness+titleMargin/2,textBaseline:"top",textAlign:"center"},!0),title.applyTransformations(),me.titleOffset=title.getBBox().height+titleMargin;break;case"left":title.setAttributes({x:margin+titleMargin/2,y:anchor,textBaseline:"top",textAlign:"center",rotationCenterX:margin+titleMargin/2,rotationCenterY:anchor,rotationRads:-Math.PI/2},!0),title.applyTransformations(),me.titleOffset=title.getBBox().width+titleMargin;break;case"right":title.setAttributes({x:thickness-margin+titleMargin/2,y:anchor,textBaseline:"bottom",textAlign:"center",rotationCenterX:thickness+titleMargin/2,rotationCenterY:anchor,rotationRads:Math.PI/2},!0),title.applyTransformations(),me.titleOffset=title.getBBox().width+titleMargin}}},onThicknessChanged:function(){this.getChart().onThicknessChanged()},getThickness:function(){return this.getHidden()?0:(this.sprites[0]&&this.sprites[0].thickness||1)+this.titleOffset+this.getMargin()},onAnimationStart:function(){this.spriteAnimationCount++,1===this.spriteAnimationCount&&this.fireEvent("animationstart",this)},onAnimationEnd:function(){this.spriteAnimationCount--,0===this.spriteAnimationCount&&this.fireEvent("animationend",this)},getItemId:function(){return this.getId()},getAncestorIds:function(){return[this.getChart().getId()]},isXType:function(xtype){return"axis"===xtype},resolveListenerScope:function(defaultScope){var scope,me=this,namedScope=Ext._namedScopes[defaultScope],chart=me.getChart();return namedScope?namedScope.isThis?scope=me:namedScope.isController?scope=chart?chart.resolveListenerScope(defaultScope,!1):me:namedScope.isSelf&&((scope=chart?chart.resolveListenerScope(defaultScope,!1):me)!==chart||chart.getInheritedConfig("defaultListenerScope")||(scope=me)):scope=chart?chart.resolveListenerScope(defaultScope,!1):defaultScope||me,scope},destroy:function(){this.setChart(null),this.surface.destroy(),this.surface=null,this.callParent()}}),Ext.define("Ext.chart.LegendBase",{extend:Ext.view.View,config:{tpl:['<div class="',Ext.baseCSSPrefix,'legend-container">','<tpl for=".">','<div class="',Ext.baseCSSPrefix,'legend-item">',"<span ",'class="',Ext.baseCSSPrefix,"legend-item-marker {[ values.disabled ? Ext.baseCSSPrefix + 'legend-inactive' : '' ]}\" ",'style="background:{mark};">',"</span>{name}","</div>","</tpl>","</div>"],nodeContainerSelector:"div."+Ext.baseCSSPrefix+"legend-container",itemSelector:"div."+Ext.baseCSSPrefix+"legend-item",docked:"bottom"},setDocked:function(docked){var panel=this.ownerCt;switch(this.docked=docked){case"top":case"bottom":this.addCls(Ext.baseCSSPrefix+"horizontal"),0;break;case"left":case"right":this.removeCls(Ext.baseCSSPrefix+"horizontal"),0}panel&&panel.setDocked(docked)},setStore:function(store){this.bindStore(store)},clearViewEl:function(){this.callParent(arguments),Ext.removeNode(this.getNodeContainer())},onItemClick:function(record,item,index,e){this.callParent(arguments),this.toggleItem(index)}}),Ext.define("Ext.chart.Legend",{xtype:"legend",extend:Ext.chart.LegendBase,config:{baseCls:Ext.baseCSSPrefix+"legend",padding:5,rect:null,disableSelection:!0,toggleable:!0},toggleItem:function(index){if(this.getToggleable()){var disabled,i,count,record,store=this.getStore(),disabledCount=0,canToggle=!0;if(store){for(count=store.getCount(),i=0;i<count;i++)(record=store.getAt(i)).get("disabled")&&disabledCount++;canToggle=1<count-disabledCount,(record=store.getAt(index))&&((disabled=record.get("disabled"))||canToggle)&&record.set("disabled",!disabled)}}}}),Ext.define("Ext.chart.AbstractChart",{extend:Ext.draw.Container,isChart:!0,defaultBindProperty:"store",config:{store:"ext-empty-store",theme:"default",style:null,animation:!Ext.isIE8,series:[],axes:[],legend:null,colors:null,insetPadding:{top:10,left:10,right:10,bottom:10},background:null,interactions:[],mainRect:null,resizeHandler:null,highlightItem:null},animationSuspendCount:0,chartLayoutSuspendCount:0,axisThicknessSuspendCount:0,isThicknessChanged:!1,surfaceZIndexes:{background:0,main:1,grid:2,series:3,axis:4,chart:5,overlay:6,events:7},constructor:function(config){var me=this;me.itemListeners={},me.surfaceMap={},me.chartComponents={},me.isInitializing=!0,me.suspendChartLayout(),me.animationSuspendCount++,me.callParent(arguments),delete me.isInitializing,me.getSurface("main"),me.getSurface("chart").setFlipRtlText(me.getInherited().rtl),me.getSurface("overlay").waitFor(me.getSurface("series")),me.animationSuspendCount--,me.resumeChartLayout()},applyAnimation:function(newAnimation,oldAnimation){return newAnimation?!0===newAnimation&&(newAnimation={easing:"easeInOut",duration:500}):newAnimation={duration:0},oldAnimation?Ext.apply({},newAnimation,oldAnimation):newAnimation},getAnimation:function(){return this.animationSuspendCount?{duration:0}:this.callParent()},applyInsetPadding:function(padding,oldPadding){return Ext.isObject(padding)?oldPadding?Ext.apply(oldPadding,padding):padding:Ext.util.Format.parseBox(padding)},suspendAnimation:function(){var series,seriesList=this.getSeries(),n=seriesList.length,i=-1;if(this.animationSuspendCount++,1===this.animationSuspendCount)for(;++i<n;)(series=seriesList[i]).setAnimation(series.getAnimation())},resumeAnimation:function(){var series,animation,seriesList=this.getSeries(),n=seriesList.length,i=-1;if(this.animationSuspendCount--,0===this.animationSuspendCount)for(;++i<n;)animation=(series=seriesList[i]).getAnimation(),series.setAnimation(animation.duration&&animation||this.getAnimation())},suspendChartLayout:function(){this.chartLayoutSuspendCount++,1===this.chartLayoutSuspendCount&&(this.scheduledLayoutId?(this.layoutInSuspension=!0,this.cancelChartLayout()):this.layoutInSuspension=!1)},resumeChartLayout:function(){this.chartLayoutSuspendCount--,0===this.chartLayoutSuspendCount&&this.layoutInSuspension&&this.scheduleLayout()},cancelChartLayout:function(){this.scheduledLayoutId&&(Ext.draw.Animator.cancel(this.scheduledLayoutId),this.scheduledLayoutId=null)},scheduleLayout:function(){this.allowSchedule()&&!this.scheduledLayoutId&&(this.scheduledLayoutId=Ext.draw.Animator.schedule("doScheduleLayout",this))},allowSchedule:function(){return!0},doScheduleLayout:function(){this.chartLayoutSuspendCount?this.layoutInSuspension=!0:this.performLayout()},suspendThicknessChanged:function(){this.axisThicknessSuspendCount++},resumeThicknessChanged:function(){0<this.axisThicknessSuspendCount&&(this.axisThicknessSuspendCount--,0===this.axisThicknessSuspendCount&&this.isThicknessChanged&&this.onThicknessChanged())},onThicknessChanged:function(){0===this.axisThicknessSuspendCount?(this.isThicknessChanged=!1,this.performLayout()):this.isThicknessChanged=!0},applySprites:function(sprites){var surface=this.getSurface("chart");return sprites=Ext.Array.from(sprites),surface.removeAll(!0),surface.add(sprites),sprites},initItems:function(){var i,ln,item,items=this.items;if(items&&!items.isMixedCollection)for(this.items=[],i=0,ln=(items=Ext.Array.from(items)).length;i<ln;i++)(item=items[i]).type?Ext.raise("To add custom sprites to the chart use the 'sprites' config."):this.items.push(item);this.callParent()},applyBackground:function(newBackground,oldBackground){var width,height,isUpdateOld,surface=this.getSurface("background");return newBackground&&(oldBackground&&(width=oldBackground.attr.width,height=oldBackground.attr.height,isUpdateOld=oldBackground.type===(newBackground.type||"rect")),newBackground.isSprite?oldBackground=newBackground:"image"===newBackground.type&&Ext.isString(newBackground.src)?isUpdateOld?oldBackground.setAttributes({src:newBackground.src}):(surface.remove(oldBackground,!0),oldBackground=surface.add(newBackground)):isUpdateOld?oldBackground.setAttributes({fillStyle:newBackground}):(surface.remove(oldBackground,!0),oldBackground=surface.add({type:"rect",fillStyle:newBackground,fx:{customDurations:{x:0,y:0,width:0,height:0}}}))),width&&height&&oldBackground.setAttributes({width:width,height:height}),oldBackground.setAnimation(this.getAnimation()),oldBackground},getLegendStore:function(){return this.legendStore},refreshLegendStore:function(){if(this.getLegendStore()){var i,ln,seriesItem,series=this.getSeries(),legendData=[];if(series)for(i=0,ln=series.length;i<ln;i++)(seriesItem=series[i]).getShowInLegend()&&seriesItem.provideLegendInfo(legendData);this.getLegendStore().setData(legendData)}},resetLegendStore:function(){var data,i,len,record;if(this.getLegendStore())for(i=0,len=(data=this.getLegendStore().getData().items).length;i<len;i++)(record=data[i]).beginEdit(),record.set("disabled",!1),record.commit()},onUpdateLegendStore:function(store,record){var seriesItem,series=this.getSeries();record&&series&&(seriesItem=series.map[record.get("series")])&&(seriesItem.setHiddenByIndex(record.get("index"),record.get("disabled")),this.redraw())},defaultResizeHandler:function(size){return this.scheduleLayout(),!1},applyMainRect:function(newRect,rect){return rect?(this.getSeries(),this.getAxes(),newRect[0]===rect[0]&&newRect[1]===rect[1]&&newRect[2]===rect[2]&&newRect[3]===rect[3]?rect:newRect):newRect},register:function(component){this.chartComponents[component.getId()]=component},unregister:function(component){delete this.chartComponents[component.getId()]},get:function(id){return this.chartComponents[id]},getAxis:function(axis){return axis instanceof Ext.chart.axis.Axis?axis:Ext.isNumber(axis)?this.getAxes()[axis]:Ext.isString(axis)?this.get(axis):void 0},getSurface:function(name,type){name=name||"main",type=type||name;var surface=this.callParent([name]),zIndexes=this.surfaceZIndexes,map=this.surfaceMap;return type in zIndexes&&surface.element.setStyle("zIndex",zIndexes[type]),map[type]||(map[type]=[]),Ext.Array.indexOf(map[type],surface)<0&&(map[surface.type=type].push(surface),surface.on("destroy",this.forgetSurface,this)),surface},forgetSurface:function(surface){var map=this.surfaceMap;if(map&&!this.isDestroying){var group=map[surface.type],index=group?Ext.Array.indexOf(group,surface):-1;0<=index&&group.splice(index,1)}},applyAxes:function(newAxes,oldAxes){var axis,oldAxis,linkedTo,id,i,ln,oldMap,me=this,positions={left:"right",right:"left"},result=[];for(me.animationSuspendCount++,me.getStore(),oldAxes||((oldAxes=[]).map={}),oldMap=oldAxes.map,result.map={},i=0,ln=(newAxes=Ext.Array.from(newAxes,!0)).length;i<ln;i++)(axis=newAxes[i])&&(axis instanceof Ext.chart.axis.Axis?(oldAxis=oldMap[axis.getId()],axis.setChart(me)):(linkedTo=(axis=Ext.Object.chain(axis)).linkedTo,id=axis.id,Ext.isNumber(linkedTo)?axis=Ext.merge({},newAxes[linkedTo],axis):Ext.isString(linkedTo)&&Ext.Array.each(newAxes,function(item){if(item.id===axis.linkedTo)return axis=Ext.merge({},item,axis),!1}),axis.id=id,(axis.chart=me).getInherited().rtl&&(axis.position=positions[axis.position]||axis.position),id=axis.getId&&axis.getId()||axis.id,axis=Ext.factory(axis,null,oldAxis=oldMap[id],"axis")),axis&&(result.push(axis),result.map[axis.getId()]=axis,oldAxis||(axis.on("animationstart","onAnimationStart",me),axis.on("animationend","onAnimationEnd",me))));for(i in oldMap)result.map[i]||oldMap[i].destroy();return me.animationSuspendCount--,result},updateAxes:function(){this.isDestroying||this.scheduleLayout()},circularCopyArray:function(inArray,startIndex,count){var i,outArray=[],len=inArray&&inArray.length;if(len)for(i=0;i<count;i++)outArray.push(inArray[(startIndex+i)%len]);return outArray},circularCopyObject:function(inObject,startIndex,count){var name,value,outObject={};if(count)for(name in inObject)inObject.hasOwnProperty(name)&&(value=inObject[name],Ext.isArray(value)?outObject[name]=this.circularCopyArray(value,startIndex,count):outObject[name]=value);return outObject},getColors:function(){var configColors=this.config.colors,theme=this.getTheme();return Ext.isArray(configColors)&&0<configColors.length&&(configColors=this.applyColors(configColors)),configColors||theme&&theme.getColors()},applyColors:function(newColors){return newColors=Ext.Array.map(newColors,function(color){return Ext.isString(color)?color:color.toString()})},updateColors:function(newColors){var i,seriesItem,seriesColors,seriesColorCount,theme=this.getTheme(),colors=newColors||theme&&theme.getColors(),colorIndex=0,series=this.getSeries(),seriesCount=series&&series.length;if(colors.length)for(i=0;i<seriesCount;i++)seriesColorCount=(seriesItem=series[i]).themeColorCount(),seriesColors=this.circularCopyArray(colors,colorIndex,seriesColorCount),colorIndex+=seriesColorCount,seriesItem.updateChartColors(seriesColors);this.refreshLegendStore()},applyTheme:function(theme){return theme&&theme.isTheme?theme:Ext.Factory.chartTheme(theme)},updateTheme:function(theme){var i,me=this,axes=me.getAxes(),seriesList=me.getSeries(),colors=me.getColors();for(me.updateChartTheme(theme),i=0;i<axes.length;i++)axes[i].updateTheme(theme);for(i=0;i<seriesList.length;i++)seriesList[i].updateTheme(theme);me.updateSpriteTheme(theme),me.updateColors(colors),me.redraw()},themeOnlyIfConfigured:{},updateChartTheme:function(theme){var key,value,isObjValue,isUnusedConfig,initialValue,cfg,me=this,chartTheme=theme.getChart(),initialConfig=me.getInitialConfig(),defaultConfig=me.defaultConfig,configs=me.getConfigurator().configs,genericChartTheme=chartTheme.defaults,specificChartTheme=chartTheme[me.xtype],themeOnlyIfConfigured=me.themeOnlyIfConfigured;for(key in chartTheme=Ext.merge({},genericChartTheme,specificChartTheme))if(value=chartTheme[key],cfg=configs[key],null!=value&&cfg){if(initialValue=initialConfig[key],isObjValue=Ext.isObject(value),isUnusedConfig=initialValue===defaultConfig[key],isObjValue){if(isUnusedConfig&&themeOnlyIfConfigured[key])continue;value=Ext.merge({},value,initialValue)}(isUnusedConfig||isObjValue)&&me[cfg.names.set](value)}},updateSpriteTheme:function(theme){this.getSprites();var sprite,style,key,attr,isText,i,ln,sprites=this.getSurface("chart").getItems(),styles=theme.getSprites();for(i=0,ln=sprites.length;i<ln;i++)if(style=styles[(sprite=sprites[i]).type]){for(key in attr={},isText="text"===sprite.type,style)key in sprite.config||isText&&0===key.indexOf("font")&&sprite.config.font||(attr[key]=style[key]);sprite.setAttributes(attr)}},addSeries:function(newSeries){var series=this.getSeries();Ext.Array.push(series,newSeries),this.setSeries(series)},removeSeries:function(series){series=Ext.Array.from(series);var i,s,existingSeries=this.getSeries(),newSeries=[],len=series.length,removeMap={};for(i=0;i<len;i++)"string"!=typeof(s=series[i])&&(s=s.getId()),removeMap[s]=!0;for(i=0,len=existingSeries.length;i<len;i++)removeMap[existingSeries[i].getId()]||newSeries.push(existingSeries[i]);this.setSeries(newSeries)},applySeries:function(newSeries,oldSeries){var oldMap,oldSeriesItem,i,ln,series,me=this,result=[];for(me.animationSuspendCount++,me.getAxes(),oldMap=oldSeries?oldSeries.map:(oldSeries=[]).map={},result.map={},i=0,ln=(newSeries=Ext.Array.from(newSeries,!0)).length;i<ln;i++)(series=newSeries[i])&&(oldSeriesItem=oldMap[series.getId&&series.getId()||series.id],series instanceof Ext.chart.series.Series?(oldSeriesItem&&oldSeriesItem!==series&&oldSeriesItem.destroy(),series.setChart(me)):Ext.isObject(series)&&(oldSeriesItem?(oldSeriesItem.setConfig(series),series=oldSeriesItem):(Ext.isString(series)&&(series={type:series}),series.chart=me,(series=Ext.create(series.xclass||"series."+series.type,series)).on("animationstart","onAnimationStart",me),series.on("animationend","onAnimationEnd",me))),result.push(series),result.map[series.getId()]=series);for(i in oldMap)result.map[oldMap[i].getId()]||oldMap[i].destroy();return me.animationSuspendCount--,result},applyLegend:function(newLegend,oldLegend){return Ext.factory(newLegend,Ext.chart.Legend,oldLegend)},updateLegend:function(legend,oldLegend){oldLegend&&oldLegend.destroy(),legend&&(this.getItems(),this.legendStore=new Ext.data.Store({autoDestroy:!0,fields:["id","name","mark","disabled","series","index"]}),legend.setStore(this.legendStore),this.refreshLegendStore(),this.legendStore.on("update","onUpdateLegendStore",this))},updateSeries:function(newSeries,oldSeries){var me=this;me.isDestroying||(me.animationSuspendCount++,me.fireEvent("serieschange",me,newSeries,oldSeries),me.refreshLegendStore(),Ext.isEmpty(newSeries)||me.updateTheme(me.getTheme()),me.scheduleLayout(),me.animationSuspendCount--)},applyInteractions:function(interactions,oldInteractions){oldInteractions||((oldInteractions=[]).map={});var i,ln,interaction,result=[],oldMap=oldInteractions.map;for(result.map={},i=0,ln=(interactions=Ext.Array.from(interactions,!0)).length;i<ln;i++)(interaction=(interaction=interactions[i])&&Ext.factory(interaction,null,oldMap[interaction.getId&&interaction.getId()||interaction.id],"interaction"))&&(interaction.setChart(this),result.push(interaction),result.map[interaction.getId()]=interaction);for(i in oldMap)result.map[i]||oldMap[i].destroy();return result},getInteraction:function(type){var interaction,i,interactions=this.getInteractions(),len=interactions&&interactions.length,out=null;if(len)for(i=0;i<len;++i)if((interaction=interactions[i]).type===type){out=interaction;break}return out},applyStore:function(store){return store&&Ext.StoreManager.lookup(store)},updateStore:function(newStore,oldStore){var me=this;oldStore&&(oldStore.un({datachanged:"onDataChanged",update:"onDataChanged",scope:me,order:"after"}),oldStore.autoDestroy&&oldStore.destroy()),newStore&&newStore.on({datachanged:"onDataChanged",update:"onDataChanged",scope:me,order:"after"}),me.fireEvent("storechange",me,newStore,oldStore),me.onDataChanged()},redraw:function(){this.fireEvent("redraw",this)},performLayout:function(){var me=this,size=me.getChartSize(!0),chartRect=[0,0,size.width,size.height],background=me.getBackground();me.hasFirstLayout=!0,me.fireEvent("layout",me),me.cancelChartLayout(),me.getSurface("background").setRect(chartRect),me.getSurface("chart").setRect(chartRect),background.setAttributes({width:size.width,height:size.height})},getChartSize:function(isRecompute){return isRecompute&&(this.chartSize=null),this.chartSize||(this.chartSize=this.innerElement.getSize())},getEventXY:function(e){return this.getSurface().getEventXY(e)},getItemForPoint:function(x,y){var item,seriesList=this.getSeries(),mainRect=this.getMainRect(),ln=seriesList.length,i=this.hasFirstLayout?ln-1:-1;if(!(mainRect&&0<=x&&x<=mainRect[2]&&0<=y&&y<=mainRect[3]))return null;for(;0<=i;i--)if(item=seriesList[i].getItemForPoint(x,y))return item;return null},getItemsForPoint:function(x,y){for(var item,seriesList=this.getSeries(),ln=seriesList.length,i=this.hasFirstLayout?ln-1:-1,items=[];0<=i;i--)(item=seriesList[i].getItemForPoint(x,y))&&items.push(item);return items},onAnimationStart:function(){this.fireEvent("animationstart",this)},onAnimationEnd:function(){this.fireEvent("animationend",this)},onDataChanged:function(){var me=this;if(!me.isInitializing){var rect=me.getMainRect(),store=me.getStore(),series=me.getSeries(),axes=me.getAxes();store&&axes&&series&&(rect?(me.processData(),me.redraw()):me.on({redraw:me.onDataChanged,scope:me,single:!0}))}},recordCount:0,processData:function(){for(var series,me=this,recordCount=me.getStore().getCount(),seriesList=me.getSeries(),ln=seriesList.length,isNeedUpdateColors=!1,i=0;i<ln;i++)(series=seriesList[i]).processData(),!isNeedUpdateColors&&series.isStoreDependantColorCount&&(isNeedUpdateColors=!0);isNeedUpdateColors&&recordCount>me.recordCount&&(me.updateColors(me.getColors()),me.recordCount=recordCount)},bindStore:function(store){this.setStore(store)},applyHighlightItem:function(newHighlightItem,oldHighlightItem){if(newHighlightItem!==oldHighlightItem){if(Ext.isObject(newHighlightItem)&&Ext.isObject(oldHighlightItem)){if((newHighlightItem.sprite&&(newHighlightItem.sprite[0]||newHighlightItem.sprite))===(oldHighlightItem.sprite&&(oldHighlightItem.sprite[0]||oldHighlightItem.sprite))&&newHighlightItem.index===oldHighlightItem.index)return}return newHighlightItem}},updateHighlightItem:function(newHighlightItem,oldHighlightItem){oldHighlightItem&&oldHighlightItem.series.setAttributesForItem(oldHighlightItem,{highlighted:!1}),newHighlightItem&&(newHighlightItem.series.setAttributesForItem(newHighlightItem,{highlighted:!0}),this.fireEvent("itemhighlight",this,newHighlightItem,oldHighlightItem)),this.fireEvent("itemhighlightchange",this,newHighlightItem,oldHighlightItem)},destroyChart:function(){var i,ln,me=this,legend=me.getLegend(),axes=me.getAxes(),series=me.getSeries(),interactions=me.getInteractions(),emptyArray=[];for(me.surfaceMap=null,i=0,ln=interactions.length;i<ln;i++)interactions[i].destroy();for(i=0,ln=axes.length;i<ln;i++)axes[i].destroy();for(i=0,ln=series.length;i<ln;i++)series[i].destroy();me.setInteractions(emptyArray),me.setAxes(emptyArray),me.setSeries(emptyArray),legend&&(legend.destroy(),me.setLegend(null)),me.legendStore=null,me.setStore(null),me.cancelChartLayout()},getRefItems:function(deep){var i,ln,series=this.getSeries(),axes=this.getAxes(),interaction=this.getInteractions(),ans=[];for(i=0,ln=series.length;i<ln;i++)ans.push(series[i]),series[i].getRefItems&&ans.push.apply(ans,series[i].getRefItems(deep));for(i=0,ln=axes.length;i<ln;i++)ans.push(axes[i]),axes[i].getRefItems&&ans.push.apply(ans,axes[i].getRefItems(deep));for(i=0,ln=interaction.length;i<ln;i++)ans.push(interaction[i]),interaction[i].getRefItems&&ans.push.apply(ans,interaction[i].getRefItems(deep));return ans}}),Ext.define("Ext.chart.overrides.AbstractChart",{override:"Ext.chart.AbstractChart",updateLegend:function(legend,oldLegend){var dock;this.callParent([legend,oldLegend]),legend&&(dock=legend.docked,this.addDocked({dock:dock,xtype:"panel",shrinkWrap:!0,scrollable:!0,layout:{type:"top"===dock||"bottom"===dock?"hbox":"vbox",pack:"center"},items:legend,cls:Ext.baseCSSPrefix+"legend-panel"}))},performLayout:function(){return this.isVisible(!0)?this.callParent():(this.cancelChartLayout(),!1)},afterComponentLayout:function(width,height,oldWidth,oldHeight){this.callParent([width,height,oldWidth,oldHeight]),this.scheduleLayout()},allowSchedule:function(){return this.rendered},onDestroy:function(){this.destroyChart(),this.callParent(arguments)}}),Ext.define("Ext.chart.grid.HorizontalGrid",{extend:Ext.draw.sprite.Sprite,alias:"grid.horizontal",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number"},defaults:{x:0,y:0,width:1,height:1,strokeStyle:"#DDD"}}},render:function(surface,ctx,clipRect){var attr=this.attr,y=surface.roundPixel(attr.y),halfLineWidth=.5*ctx.lineWidth;ctx.beginPath(),ctx.rect(clipRect[0]-surface.matrix.getDX(),y+halfLineWidth,+clipRect[2],attr.height),ctx.fill(),ctx.beginPath(),ctx.moveTo(clipRect[0]-surface.matrix.getDX(),y+halfLineWidth),ctx.lineTo(clipRect[0]+clipRect[2]-surface.matrix.getDX(),y+halfLineWidth),ctx.stroke()}}),Ext.define("Ext.chart.grid.VerticalGrid",{extend:Ext.draw.sprite.Sprite,alias:"grid.vertical",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number"},defaults:{x:0,y:0,width:1,height:1,strokeStyle:"#DDD"}}},render:function(surface,ctx,clipRect){var attr=this.attr,x=surface.roundPixel(attr.x),halfLineWidth=.5*ctx.lineWidth;ctx.beginPath(),ctx.rect(x-halfLineWidth,clipRect[1]-surface.matrix.getDY(),attr.width,clipRect[3]),ctx.fill(),ctx.beginPath(),ctx.moveTo(x-halfLineWidth,clipRect[1]-surface.matrix.getDY()),ctx.lineTo(x-halfLineWidth,clipRect[1]+clipRect[3]-surface.matrix.getDY()),ctx.stroke()}}),Ext.define("Ext.chart.CartesianChart",{extend:Ext.chart.AbstractChart,alternateClassName:"Ext.chart.Chart",xtype:["cartesian","chart"],isCartesian:!0,config:{flipXY:!1,innerRect:[0,0,1,1],innerPadding:{top:0,left:0,right:0,bottom:0}},applyInnerPadding:function(padding,oldPadding){return Ext.isObject(padding)?oldPadding?Ext.apply(oldPadding,padding):padding:Ext.util.Format.parseBox(padding)},getDirectionForAxis:function(position){var flipXY=this.getFlipXY();return"left"===position||"right"===position?flipXY?"X":"Y":flipXY?"Y":"X"},performLayout:function(){var me=this;if(me.animationSuspendCount++,!1!==me.callParent()){me.suspendThicknessChanged();var axis,series,axisSurface,thickness,surface,gridSurface,mainRect,innerWidth,innerHeight,elements,floating,floatingValue,matrix,i,ln,chartRect=me.getSurface("chart").getRect(),width=chartRect[2],height=chartRect[3],axes=me.getAxes(),seriesList=me.getSeries(),insetPadding=me.getInsetPadding(),innerPadding=me.getInnerPadding(),shrinkBox=Ext.apply({},insetPadding),isRtl=me.getInherited().rtl,flipXY=me.getFlipXY();if(!(width<=0||height<=0)){for(i=0;i<axes.length;i++){switch(axisSurface=(axis=axes[i]).getSurface(),floatingValue=(floating=axis.getFloating())?floating.value:null,thickness=axis.getThickness(),axis.getPosition()){case"top":axisSurface.setRect([0,shrinkBox.top+1,width,thickness]);break;case"bottom":axisSurface.setRect([0,height-(shrinkBox.bottom+thickness),width,thickness]);break;case"left":axisSurface.setRect([shrinkBox.left,0,thickness,height]);break;case"right":axisSurface.setRect([width-(shrinkBox.right+thickness),0,thickness,height])}null===floatingValue&&(shrinkBox[axis.getPosition()]+=thickness)}if(width-=shrinkBox.left+shrinkBox.right,height-=shrinkBox.top+shrinkBox.bottom,mainRect=[shrinkBox.left,shrinkBox.top,width,height],shrinkBox.left+=innerPadding.left,shrinkBox.top+=innerPadding.top,shrinkBox.right+=innerPadding.right,shrinkBox.bottom+=innerPadding.bottom,innerWidth=width-innerPadding.left-innerPadding.right,innerHeight=height-innerPadding.top-innerPadding.bottom,me.setInnerRect([shrinkBox.left,shrinkBox.top,innerWidth,innerHeight]),!(innerWidth<=0||innerHeight<=0)){for(me.setMainRect(mainRect),me.getSurface().setRect(mainRect),i=0,ln=me.surfaceMap.grid&&me.surfaceMap.grid.length;i<ln;i++)(gridSurface=me.surfaceMap.grid[i]).setRect(mainRect),gridSurface.matrix.set(1,0,0,1,innerPadding.left,innerPadding.top),gridSurface.matrix.inverse(gridSurface.inverseMatrix);for(i=0;i<axes.length;i++){switch(elements=(matrix=(axisSurface=(axis=axes[i]).getSurface()).matrix).elements,axis.getPosition()){case"top":case"bottom":elements[4]=shrinkBox.left,axis.setLength(innerWidth);break;case"left":case"right":elements[5]=shrinkBox.top,axis.setLength(innerHeight)}axis.updateTitleSprite(),matrix.inverse(axisSurface.inverseMatrix)}for(i=0,ln=seriesList.length;i<ln;i++)(surface=(series=seriesList[i]).getSurface()).setRect(mainRect),flipXY?isRtl?surface.matrix.set(0,-1,-1,0,innerPadding.left+innerWidth,innerPadding.top+innerHeight):surface.matrix.set(0,-1,1,0,innerPadding.left,innerPadding.top+innerHeight):surface.matrix.set(1,0,0,-1,innerPadding.left,innerPadding.top+innerHeight),surface.matrix.inverse(surface.inverseMatrix),series.getOverlaySurface().setRect(mainRect);me.redraw(),me.animationSuspendCount--,me.resumeThicknessChanged()}}}else--me.animationSuspendCount},refloatAxes:function(){var axis,axisSurface,axisRect,floating,value,alongAxis,matrix,isHorizontal,i,me=this,axes=me.getAxes(),axesCount=axes&&axes.length||0,size=me.getChartSize(),inset=me.getInsetPadding(),inner=me.getInnerPadding(),width=size.width-inset.left-inset.right,height=size.height-inset.top-inset.bottom;for(i=0;i<axesCount;i++)if(null!==(value=(floating=(axis=axes[i]).getFloating())?floating.value:null)){if(axisRect=(axisSurface=axis.getSurface()).getRect()){switch(axisRect=axisRect.slice(),(alongAxis=me.getAxis(floating.alongAxis))?(isHorizontal="horizontal"===alongAxis.getAlignment(),Ext.isString(value)&&(value=alongAxis.getCoordFor(value)),alongAxis.floatingAxes[axis.getId()]=value,matrix=alongAxis.getSprites()[0].attr.matrix,isHorizontal?(value=value*matrix.getXX()+matrix.getDX(),axis.floatingAtCoord=value+inner.left+inner.right):(value=value*matrix.getYY()+matrix.getDY(),axis.floatingAtCoord=value+inner.top+inner.bottom)):(isHorizontal="horizontal"===axis.getAlignment(),axis.floatingAtCoord=isHorizontal?value+inner.top+inner.bottom:value+inner.left+inner.right,value=axisSurface.roundPixel(.01*value*(isHorizontal?height:width))),axis.getPosition()){case"top":axisRect[1]=inset.top+inner.top+value-axisRect[3]+1;break;case"bottom":axisRect[1]=inset.top+inner.top+(alongAxis?value:height-value);break;case"left":axisRect[0]=inset.left+inner.left+value-axisRect[2];break;case"right":axisRect[0]=inset.left+inner.left+(alongAxis?value:width-value)-1}axisSurface.setRect(axisRect)}}else delete axis.floatingAtCoord},redraw:function(){var innerWidth,innerHeight,sprites,xRange,yRange,isSide,attr,i,j,ln,axis,axisX,axisY,range,visibleRange,zIndex,markersZIndex,series,sprite,markers,me=this,seriesList=me.getSeries(),axes=me.getAxes(),rect=me.getMainRect(),innerPadding=me.getInnerPadding(),flipXY=me.getFlipXY();if(rect){for(innerWidth=rect[2]-innerPadding.left-innerPadding.right,innerHeight=rect[3]-innerPadding.top-innerPadding.bottom,i=0;i<seriesList.length;i++)for(xRange=(axisX=(series=seriesList[i]).getXAxis())?(visibleRange=axisX.getVisibleRange(),[(xRange=axisX.getRange())[0]+(xRange[1]-xRange[0])*visibleRange[0],xRange[0]+(xRange[1]-xRange[0])*visibleRange[1]]):series.getXRange(),yRange=(axisY=series.getYAxis())?(visibleRange=axisY.getVisibleRange(),[(yRange=axisY.getRange())[0]+(yRange[1]-yRange[0])*visibleRange[0],yRange[0]+(yRange[1]-yRange[0])*visibleRange[1]]):series.getYRange(),attr={visibleMinX:xRange[0],visibleMaxX:xRange[1],visibleMinY:yRange[0],visibleMaxY:yRange[1],innerWidth:innerWidth,innerHeight:innerHeight,flipXY:flipXY},j=0,ln=(sprites=series.getSprites()).length;j<ln;j++)(zIndex=(sprite=sprites[j]).attr.zIndex)<1e3&&(zIndex+=100*(i+1)+1e3,sprite.attr.zIndex=zIndex,(markers=sprite.getMarker("items"))&&((markersZIndex=markers.attr.zIndex)===Number.MAX_VALUE?markers.attr.zIndex=zIndex:markersZIndex<1e3&&(markers.attr.zIndex=zIndex+markersZIndex))),sprite.setAttributes(attr,!0);for(i=0;i<axes.length;i++)for(isSide=(axis=axes[i]).isSide(),sprites=axis.getSprites(),range=axis.getRange(),visibleRange=axis.getVisibleRange(),attr={dataMin:range[0],dataMax:range[1],visibleMin:visibleRange[0],visibleMax:visibleRange[1]},isSide?(attr.length=innerHeight,attr.startGap=innerPadding.bottom,attr.endGap=innerPadding.top):(attr.length=innerWidth,attr.startGap=innerPadding.left,attr.endGap=innerPadding.right),j=0,ln=sprites.length;j<ln;j++)sprites[j].setAttributes(attr,!0);me.renderFrame(),me.callParent(arguments)}},renderFrame:function(){this.refloatAxes(),this.callParent()}}),Ext.define("Ext.chart.axis.Category",{extend:Ext.chart.axis.Axis,alias:"axis.category",type:"category",config:{layout:"combineDuplicate",segmenter:"names"}}),Ext.define("Ext.chart.axis.Numeric",{extend:Ext.chart.axis.Axis,type:"numeric",alias:["axis.numeric","axis.radial"],config:{layout:"continuous",segmenter:"numeric",aggregator:"double"}}),Ext.define("Ext.chart.series.Cartesian",{extend:Ext.chart.series.Series,config:{xField:null,yField:null,xAxis:null,yAxis:null},directions:["X","Y"],fieldCategoryX:["X"],fieldCategoryY:["Y"],applyXAxis:function(newAxis,oldAxis){return this.getChart().getAxis(newAxis)||oldAxis},applyYAxis:function(newAxis,oldAxis){return this.getChart().getAxis(newAxis)||oldAxis},updateXAxis:function(axis){axis.processData(this)},updateYAxis:function(axis){axis.processData(this)},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},getItemForPoint:function(x,y){if(this.getSprites()){var index,me=this,sprite=me.getSprites()[0],store=me.getStore();if(me.getHidden())return null;if(sprite&&-1!==(index=sprite.getIndexNearPoint(x,y)))return{series:me,category:me.getItemInstancing()?"items":"markers",index:index,record:store.getData().items[index],field:me.getYField(),sprite:sprite}}},createSprite:function(){var sprite=this.callParent(),chart=this.getChart(),xAxis=this.getXAxis();return sprite.setAttributes({flipXY:chart.getFlipXY(),xAxis:xAxis}),sprite.setAggregator&&xAxis&&xAxis.getAggregator&&(xAxis.getAggregator?sprite.setAggregator({strategy:xAxis.getAggregator()}):sprite.setAggregator({})),sprite},getSprites:function(){var sprite,chart=this.getChart(),animation=this.getAnimation()||chart&&chart.getAnimation(),itemInstancing=this.getItemInstancing(),sprites=this.sprites;return chart?(sprite=sprites.length?sprites[0]:this.createSprite(),animation&&(itemInstancing&&sprite.itemsMarker.getTemplate().setAnimation(animation),sprite.setAnimation(animation)),sprites):[]},provideLegendInfo:function(target){var me=this,style=me.getSubStyleWithTheme(),fill=style.fillStyle;Ext.isArray(fill)&&(fill=fill[0]),target.push({name:me.getTitle()||me.getYField()||me.getId(),mark:(Ext.isObject(fill)?fill.stops&&fill.stops[0].color:fill)||style.strokeStyle||"black",disabled:me.getHidden(),series:me.getId(),index:0})},getXRange:function(){return[this.dataRange[0],this.dataRange[2]]},getYRange:function(){return[this.dataRange[1],this.dataRange[3]]}}),Ext.define("Ext.chart.series.StackedCartesian",{extend:Ext.chart.series.Cartesian,config:{stacked:!0,splitStacks:!0,fullStack:!1,fullStackTotal:100,hidden:[]},spriteAnimationCount:0,themeColorCount:function(){var yField=this.getYField();return Ext.isArray(yField)?yField.length:1},updateStacked:function(){this.processData()},updateSplitStacks:function(){this.processData()},coordinateY:function(){return this.coordinateStacked("Y",1,2)},coordinateStacked:function(direction,directionOffset,directionCount){var dataEnd,i,j,k,fields,fieldCount,posTotals,negTotals,fieldCategoriesItem,data,attr,me=this,items=me.getStore().getData().items,itemCount=items.length,axis=me["get"+direction+"Axis"](),hidden=me.getHidden(),splitStacks=me.getSplitStacks(),fullStack=me.getFullStack(),fullStackTotal=me.getFullStackTotal(),range={min:0,max:0},directions=me["fieldCategory"+direction],dataStart=[],posDataStart=[],negDataStart=[],stacked=me.getStacked(),sprites=me.getSprites(),coordinatedData=[];if(sprites.length){for(i=0;i<directions.length;i++){for(fieldCategoriesItem=directions[i],fieldCount=(fields=me.getFields([fieldCategoriesItem])).length,j=0;j<itemCount;j++)dataStart[j]=0,posDataStart[j]=0,negDataStart[j]=0;for(j=0;j<fieldCount;j++)hidden[j]||(coordinatedData[j]=me.coordinateData(items,fields[j],axis));if(stacked&&fullStack)for(posTotals=[],splitStacks&&(negTotals=[]),j=0;j<itemCount;j++)for(posTotals[j]=0,splitStacks&&(negTotals[j]=0),k=0;k<fieldCount;k++)(data=coordinatedData[k])&&(0<=(data=data[j])||!splitStacks?posTotals[j]+=data:data<0&&(negTotals[j]+=data));for(j=0;j<fieldCount;j++)if(attr={},hidden[j])attr["dataStart"+fieldCategoriesItem]=dataStart,attr["data"+fieldCategoriesItem]=dataStart,sprites[j].setAttributes(attr);else{if(data=coordinatedData[j],stacked){for(dataEnd=[],k=0;k<itemCount;k++)data[k]||(data[k]=0),0<=data[k]||!splitStacks?(fullStack&&posTotals[k]&&(data[k]*=fullStackTotal/posTotals[k]),dataStart[k]=posDataStart[k],posDataStart[k]+=data[k],dataEnd[k]=posDataStart[k]):(fullStack&&negTotals[k]&&(data[k]*=fullStackTotal/negTotals[k]),dataStart[k]=negDataStart[k],negDataStart[k]+=data[k],dataEnd[k]=negDataStart[k]);attr["dataStart"+fieldCategoriesItem]=dataStart,attr["data"+fieldCategoriesItem]=dataEnd,me.getRangeOfData(dataStart,range),me.getRangeOfData(dataEnd,range)}else attr["dataStart"+fieldCategoriesItem]=dataStart,attr["data"+fieldCategoriesItem]=data,me.getRangeOfData(data,range);sprites[j].setAttributes(attr)}}for(me.dataRange[directionOffset]=range.min,me.dataRange[directionOffset+directionCount]=range.max,(attr={})["dataMin"+direction]=range.min,attr["dataMax"+direction]=range.max,i=0;i<sprites.length;i++)sprites[i].setAttributes(attr)}},getFields:function(fieldCategory){var fieldsItem,i,ln,fields=[];for(i=0,ln=fieldCategory.length;i<ln;i++)fieldsItem=this["get"+fieldCategory[i]+"Field"](),Ext.isArray(fieldsItem)?fields.push.apply(fields,fieldsItem):fields.push(fieldsItem);return fields},updateLabelOverflowPadding:function(labelOverflowPadding){this.getLabel().setAttributes({labelOverflowPadding:labelOverflowPadding})},getSprites:function(){var sprite,i,me=this,chart=me.getChart(),animation=me.getAnimation()||chart&&chart.getAnimation(),fields=me.getFields(me.fieldCategoryY),itemInstancing=me.getItemInstancing(),sprites=me.sprites,hidden=me.getHidden(),spritesCreated=!1,length=fields.length;if(!chart)return[];for(i=0;i<length;i++)(sprite=sprites[i])||((sprite=me.createSprite()).setAttributes({zIndex:-i}),sprite.setField(fields[i]),spritesCreated=!0,hidden.push(!1),itemInstancing?sprite.itemsMarker.getTemplate().setAttributes(me.getStyleByIndex(i)):sprite.setAttributes(me.getStyleByIndex(i))),animation&&(itemInstancing&&sprite.itemsMarker.getTemplate().setAnimation(animation),sprite.setAnimation(animation));return spritesCreated&&me.updateHidden(hidden),sprites},getItemForPoint:function(x,y){if(this.getSprites()){var i,ln,sprite,index,yField,me=this,itemInstancing=me.getItemInstancing(),sprites=me.getSprites(),store=me.getStore(),hidden=me.getHidden();for(i=0,ln=sprites.length;i<ln;i++)if(!hidden[i]&&-1!==(index=(sprite=sprites[i]).getIndexNearPoint(x,y)))return yField=me.getYField(),{series:me,index:index,category:itemInstancing?"items":"markers",record:store.getData().items[index],field:"string"==typeof yField?yField:yField[i],sprite:sprite};return null}},provideLegendInfo:function(target){var style,fill,i,name,me=this,sprites=me.getSprites(),title=me.getTitle(),field=me.getYField(),hidden=me.getHidden(),single=1===sprites.length;for(i=0;i<sprites.length;i++)fill=(style=me.getStyleByIndex(i)).fillStyle,title?Ext.isArray(title)?name=title[i]:single&&(name=title):name=Ext.isArray(field)?field[i]:me.getId(),target.push({name:name,mark:(Ext.isObject(fill)?fill.stops&&fill.stops[0].color:fill)||style.strokeStyle||"black",disabled:hidden[i],series:me.getId(),index:i})},onSpriteAnimationStart:function(sprite){this.spriteAnimationCount++,1===this.spriteAnimationCount&&this.fireEvent("animationstart")},onSpriteAnimationEnd:function(sprite){this.spriteAnimationCount--,0===this.spriteAnimationCount&&this.fireEvent("animationend")}}),Ext.define("Ext.chart.series.sprite.Series",{extend:Ext.draw.sprite.Sprite,mixins:{markerHolder:Ext.chart.MarkerHolder},inheritableStatics:{def:{processors:{dataMinX:"number",dataMaxX:"number",dataMinY:"number",dataMaxY:"number",rangeX:"data",rangeY:"data",dataX:"data",dataY:"data"},defaults:{dataMinX:0,dataMaxX:1,dataMinY:0,dataMaxY:1,rangeX:null,rangeY:null,dataX:null,dataY:null},triggers:{dataX:"bbox",dataY:"bbox",dataMinX:"bbox",dataMaxX:"bbox",dataMinY:"bbox",dataMaxY:"bbox"}}},config:{store:null,series:null,field:null}}),Ext.define("Ext.chart.series.sprite.Cartesian",{extend:Ext.chart.series.sprite.Series,inheritableStatics:{def:{processors:{labels:"default",labelOverflowPadding:"number",selectionTolerance:"number",flipXY:"bool",renderer:"default",visibleMinX:"number",visibleMinY:"number",visibleMaxX:"number",visibleMaxY:"number",innerWidth:"number",innerHeight:"number"},defaults:{labels:null,labelOverflowPadding:10,selectionTolerance:20,flipXY:!1,renderer:null,transformFillStroke:!1,visibleMinX:0,visibleMinY:0,visibleMaxX:1,visibleMaxY:1,innerWidth:1,innerHeight:1},triggers:{dataX:"dataX,bbox",dataY:"dataY,bbox",visibleMinX:"panzoom",visibleMinY:"panzoom",visibleMaxX:"panzoom",visibleMaxY:"panzoom",innerWidth:"panzoom",innerHeight:"panzoom"},updaters:{dataX:function(attr){this.processDataX(),this.scheduleUpdater(attr,"dataY",["dataY"])},dataY:function(){this.processDataY()},panzoom:function(attr){var dx=attr.visibleMaxX-attr.visibleMinX,dy=attr.visibleMaxY-attr.visibleMinY,innerWidth=attr.flipXY?attr.innerHeight:attr.innerWidth,innerHeight=attr.flipXY?attr.innerWidth:attr.innerHeight,surface=this.getSurface(),isRtl=!!surface&&surface.getInherited().rtl;isRtl&&!attr.flipXY?attr.translationX=innerWidth+attr.visibleMinX*innerWidth/dx:attr.translationX=-attr.visibleMinX*innerWidth/dx,attr.translationY=-attr.visibleMinY*innerHeight/dy,attr.scalingX=(isRtl&&!attr.flipXY?-1:1)*innerWidth/dx,attr.scalingY=innerHeight/dy,attr.scalingCenterX=0,attr.scalingCenterY=0,this.applyTransformations(!0)}}}},processDataY:Ext.emptyFn,processDataX:Ext.emptyFn,updatePlainBBox:function(plain){var attr=this.attr;plain.x=attr.dataMinX,plain.y=attr.dataMinY,plain.width=attr.dataMaxX-attr.dataMinX,plain.height=attr.dataMaxY-attr.dataMinY},binarySearch:function(key){var dx=this.attr.dataX,start=0,end=dx.length;if(key<=dx[0])return start;if(key>=dx[end-1])return end-1;for(;start+1<end;){var mid=start+end>>1,val=dx[mid];if(val===key)return mid;val<key?start=mid:end=mid}return start},render:function(surface,ctx,rect){var attr=this.attr,inverseMatrix=attr.inverseMatrix.clone();if(inverseMatrix.appendMatrix(surface.inverseMatrix),null!==attr.dataX&&void 0!==attr.dataX&&null!==attr.dataY&&void 0!==attr.dataY)if(inverseMatrix.getXX()*inverseMatrix.getYX()||inverseMatrix.getXY()*inverseMatrix.getYY())console.log("Cartesian Series sprite does not support rotation/sheering");else{var clip=inverseMatrix.transformList([[rect[0]-1,rect[3]+1],[rect[0]+rect[2]+1,-1]]);clip=clip[0].concat(clip[1]),this.renderClipped(surface,ctx,clip,rect)}},renderClipped:Ext.emptyFn,getIndexNearPoint:function(x,y){var minX,minY,xi,yi,i,len,me=this,mat=me.attr.matrix,dataX=me.attr.dataX,dataY=me.attr.dataY,selectionTolerance=me.attr.selectionTolerance,index=-1,imat=mat.clone().prependMatrix(me.surfaceMatrix).inverse(),center=imat.transformPoint([x,y]),positionLB=imat.transformPoint([x-selectionTolerance,y-selectionTolerance]),positionTR=imat.transformPoint([x+selectionTolerance,y+selectionTolerance]),left=Math.min(positionLB[0],positionTR[0]),right=Math.max(positionLB[0],positionTR[0]),top=Math.min(positionLB[1],positionTR[1]),bottom=Math.max(positionLB[1],positionTR[1]);for(i=0,len=dataX.length;i<len;i++)xi=dataX[i],yi=dataY[i],left<xi&&xi<right&&top<yi&&yi<bottom&&(-1===index||Math.abs(xi-center[0])<minX&&Math.abs(yi-center[1])<minY)&&(minX=Math.abs(xi-center[0]),minY=Math.abs(yi-center[1]),index=i);return index}}),Ext.define("Ext.chart.series.sprite.StackedCartesian",{extend:Ext.chart.series.sprite.Cartesian,inheritableStatics:{def:{processors:{groupCount:"number",groupOffset:"number",dataStartY:"data"},defaults:{selectionTolerance:20,groupCount:1,groupOffset:0,dataStartY:null},triggers:{dataStartY:"dataY,bbox"}}},getIndexNearPoint:function(x,y){for(var dx,dy,mat=this.attr.matrix,dataX=this.attr.dataX,dataY=this.attr.dataY,dataStartY=this.attr.dataStartY,selectionTolerance=this.attr.selectionTolerance,minX=.5,minY=1/0,index=-1,imat=mat.clone().prependMatrix(this.surfaceMatrix).inverse(),center=imat.transformPoint([x,y]),positionLB=imat.transformPoint([x-selectionTolerance,y-selectionTolerance]),positionTR=imat.transformPoint([x+selectionTolerance,y+selectionTolerance]),top=Math.min(positionLB[1],positionTR[1]),bottom=Math.max(positionLB[1],positionTR[1]),i=0;i<dataX.length;i++)Math.min(dataStartY[i],dataY[i])<=bottom&&top<=Math.max(dataStartY[i],dataY[i])&&(dx=Math.abs(dataX[i]-center[0]),dy=Math.max(-Math.min(dataY[i]-center[1],center[1]-dataStartY[i]),0),dx<minX&&dy<=minY&&(minX=dx,minY=dy,index=i));return index}}),Ext.define("Ext.chart.series.sprite.Bar",{alias:"sprite.barSeries",extend:Ext.chart.series.sprite.StackedCartesian,inheritableStatics:{def:{processors:{minBarWidth:"number",maxBarWidth:"number",minGapWidth:"number",radius:"number",inGroupGapWidth:"number"},defaults:{minBarWidth:2,maxBarWidth:100,minGapWidth:5,inGroupGapWidth:3,radius:0}}},drawLabel:function(text,dataX,dataStartY,dataY,labelId){var labelY,halfWidth,labelBBox,changes,hasPendingChanges,params,me=this,attr=me.attr,label=me.getMarker("labels"),labelTpl=label.getTemplate(),labelCfg=me.labelCfg||(me.labelCfg={}),surfaceMatrix=me.surfaceMatrix,labelOverflowPadding=attr.labelOverflowPadding,labelDisplay=labelTpl.attr.display,labelOrientation=labelTpl.attr.orientation;switch(labelCfg.x=surfaceMatrix.x(dataX,dataY),labelCfg.y=surfaceMatrix.y(dataX,dataY),attr.flipXY?labelCfg.rotationRads=0:labelCfg.rotationRads=.5*-Math.PI,labelCfg.calloutVertical=!attr.flipXY,labelOrientation){case"horizontal":labelCfg.rotationRads=0,labelCfg.calloutVertical=!1;break;case"vertical":labelCfg.rotationRads=.5*-Math.PI,labelCfg.calloutVertical=!0}labelCfg.text=text,labelTpl.attr.renderer&&(params=[text,label,labelCfg,{store:me.getStore()},labelId],"string"==typeof(changes=Ext.callback(labelTpl.attr.renderer,null,params,0,me.getSeries()))?labelCfg.text=changes:"object"==typeof changes&&("text"in changes&&(labelCfg.text=changes.text),hasPendingChanges=!0)),(labelBBox=me.getMarkerBBox("labels",labelId,!0))||(me.putMarker("labels",labelCfg,labelId),labelBBox=me.getMarkerBBox("labels",labelId,!0)),halfWidth=labelBBox.width/2+labelOverflowPadding,dataY<dataStartY&&(halfWidth=-halfWidth),labelY="horizontal"===labelOrientation&&attr.flipXY||"vertical"===labelOrientation&&!attr.flipXY||!labelOrientation?"insideStart"===labelDisplay?dataStartY+halfWidth:dataY-halfWidth:"insideStart"===labelDisplay?dataStartY+2*labelOverflowPadding:dataY-2*labelOverflowPadding,labelCfg.x=surfaceMatrix.x(dataX,labelY),labelCfg.y=surfaceMatrix.y(dataX,labelY),labelY="insideStart"===labelDisplay?dataStartY-halfWidth:dataY+halfWidth,labelCfg.calloutPlaceX=surfaceMatrix.x(dataX,labelY),labelCfg.calloutPlaceY=surfaceMatrix.y(dataX,labelY),labelY="insideStart"===labelDisplay?dataStartY:dataY,labelCfg.calloutStartX=surfaceMatrix.x(dataX,labelY),labelCfg.calloutStartY=surfaceMatrix.y(dataX,labelY),dataY<dataStartY&&(halfWidth=-halfWidth),Math.abs(dataY-dataStartY)<=2*halfWidth||"outside"===labelDisplay?labelCfg.callout=1:labelCfg.callout=0,hasPendingChanges&&Ext.apply(labelCfg,changes),me.putMarker("labels",labelCfg,labelId)},drawBar:function(ctx,surface,clip,left,top,right,bottom,index){var changes,me=this,itemCfg={},renderer=me.attr.renderer;itemCfg.x=left,itemCfg.y=top,itemCfg.width=right-left,itemCfg.height=bottom-top,itemCfg.radius=me.attr.radius,renderer&&(changes=Ext.callback(renderer,null,[me,itemCfg,{store:me.getStore()},index],0,me.getSeries()),Ext.apply(itemCfg,changes)),me.putMarker("items",itemCfg,index,!renderer)},renderClipped:function(surface,ctx,clip,rect){if(!this.cleanRedraw){var left,right,bottom,top,i,center,yLow,yHi,me=this,attr=me.attr,dataX=attr.dataX,dataY=attr.dataY,dataText=attr.labels,dataStartY=attr.dataStartY,groupCount=attr.groupCount,groupOffset=attr.groupOffset-.5*(groupCount-1),inGroupGapWidth=attr.inGroupGapWidth,lineWidth=ctx.lineWidth,matrix=attr.matrix,xx=matrix.elements[0],yy=matrix.elements[3],dx=matrix.elements[4],dy=surface.roundPixel(matrix.elements[5])-1,maxBarWidth=(xx<0?-1:1)*xx-attr.minGapWidth,minBarWidth=(Math.min(maxBarWidth,attr.maxBarWidth)-inGroupGapWidth*(groupCount-1))/groupCount,barWidth=surface.roundPixel(Math.max(attr.minBarWidth,minBarWidth)),surfaceMatrix=me.surfaceMatrix,halfLineWidth=.5*attr.lineWidth,min=Math.min(clip[0],clip[2]),max=Math.max(clip[0],clip[2]),start=Math.max(0,Math.floor(min)),end=Math.min(dataX.length-1,Math.ceil(max)),isDrawLabels=dataText&&me.getMarker("labels");for(i=start;i<=end;i++)yLow=dataStartY?dataStartY[i]:0,yHi=dataY[i],center=dataX[i]*xx+dx+groupOffset*(barWidth+inGroupGapWidth),left=surface.roundPixel(center-barWidth/2)+halfLineWidth,top=surface.roundPixel(yHi*yy+dy+lineWidth),right=surface.roundPixel(center+barWidth/2)-halfLineWidth,bottom=surface.roundPixel(yLow*yy+dy+lineWidth),me.drawBar(ctx,surface,clip,left,top-halfLineWidth,right,bottom-halfLineWidth,i),isDrawLabels&&null!=dataText[i]&&me.drawLabel(dataText[i],center,bottom,top,i),me.putMarker("markers",{translationX:surfaceMatrix.x(center,top),translationY:surfaceMatrix.y(center,top)},i,!0)}},getIndexNearPoint:function(x,y){var hitX,hitY,i,bbox,attr=this.attr,dataX=attr.dataX,surface=this.getSurface(),surfaceRect=surface.getRect()||[0,0,0,0],surfaceHeight=surfaceRect[3],index=-1;for(hitY=attr.flipXY?(hitX=surfaceHeight-y,surface.getInherited().rtl?surfaceRect[2]-x:x):(hitX=x,surfaceHeight-y),i=0;i<dataX.length;i++)if(bbox=this.getMarkerBBox("items",i),Ext.draw.Draw.isPointInBBox(hitX,hitY,bbox)){index=i;break}return index}}),Ext.define("Ext.chart.series.Bar",{extend:Ext.chart.series.StackedCartesian,alias:"series.bar",type:"bar",seriesType:"barSeries",config:{itemInstancing:{type:"rect",fx:{customDurations:{x:0,y:0,width:0,height:0,radius:0}}}},getItemForPoint:function(x,y){if(this.getSprites()){var chart=this.getChart(),padding=chart.getInnerPadding();return x+=chart.getInherited().rtl?padding.right:-padding.left,y+=padding.bottom,this.callParent(arguments)}},updateXAxis:function(axis){axis.setLabelInSpan(!0),this.callParent(arguments)},updateHidden:function(hidden){this.callParent(arguments),this.updateStacked()},updateStacked:function(stacked){var i,sprites=this.getSprites(),ln=sprites.length,visible=[],attributes={};for(i=0;i<ln;i++)sprites[i].attr.hidden||visible.push(sprites[i]);if(ln=visible.length,this.getStacked())for(attributes.groupCount=1,i=attributes.groupOffset=0;i<ln;i++)visible[i].setAttributes(attributes);else for(attributes.groupCount=visible.length,i=0;i<ln;i++)visible[attributes.groupOffset=i].setAttributes(attributes);this.callParent(arguments)}}),Ext.define("Sch.data.mixin.FilterableTreeStore",{isFilteredFlag:!1,isHiddenFlag:!1,lastTreeFilter:null,lastTreeHiding:null,allowExpandCollapseWhileFiltered:!0,reApplyFilterOnDataChange:!0,suspendIncrementalFilterRefresh:0,filterGeneration:0,currentFilterGeneration:null,dataChangeListeners:null,monitoringDataChange:!1,filterer:null,onClassMixedIn:function(cls){cls.override(Sch.data.mixin.FilterableTreeStore.prototype.inheritables()||{})},initTreeFiltering:function(){this.filterer=new Siesta.Util.TreeStoreFilterer({isLeaf:function(node){return node.data.leaf},idProp:"internalId",childNodesProp:"childNodes",parentNodeProp:"parentNode"}),this.treeFilter=new Ext.util.Filter({filterFn:this.isNodeFilteredIn,scope:this}),this.dataChangeListeners={nodeappend:this.onNeedToUpdateFilter,nodeinsert:this.onNeedToUpdateFilter,scope:this}},startDataChangeMonitoring:function(){this.monitoringDataChange||(this.monitoringDataChange=!0,this.on(this.dataChangeListeners))},stopDataChangeMonitoring:function(){this.monitoringDataChange&&(this.monitoringDataChange=!1,this.un(this.dataChangeListeners))},onNeedToUpdateFilter:function(){this.reApplyFilterOnDataChange&&!this.suspendIncrementalFilterRefresh&&this.reApplyFilter()},clearTreeFilter:function(){this.isTreeFiltered()&&(this.currentFilterGeneration=null,this.isFilteredFlag=!1,this.lastTreeFilter=null,this.isTreeFiltered(!0)||this.stopDataChangeMonitoring(),this.refreshNodeStoreContent(),this.fireEvent("filter-clear",this))},reApplyFilter:function(){this.isHiddenFlag&&this.hideNodesBy.apply(this,this.lastTreeHiding.concat(this.isFilteredFlag)),this.isFilteredFlag&&this.filterTreeBy(this.lastTreeFilter)},refreshNodeStoreContent:function(){this.getFilters().indexOf(this.treeFilter)<0?this.addFilter(this.treeFilter):this.getFilters().fireEvent("endupdate",this.getFilters())},getIndexInTotalDataset:function(record){var root=this.getRootNode(),index=-1,rootVisible=this.rootVisible;if(!rootVisible&&record==root)return-1;var isFiltered=this.isTreeFiltered(),currentFilterGeneration=this.currentFilterGeneration,collectNodes=function(node){if((isFiltered&&node.__filterGen!=currentFilterGeneration||node.hidden)&&node==record)return!1;if(!rootVisible&&node==root||index++,node==record)return!1;if(!node.data.leaf&&node.isExpanded())for(var childNodes=node.childNodes,length=childNodes.length,k=0;k<length;k++)if(!1===collectNodes(childNodes[k]))return!1};return collectNodes(root),index},isTreeFiltered:function(orHasHiddenNodes){return this.isFilteredFlag||orHasHiddenNodes&&this.isHiddenFlag},markFilteredNodes:function(params){var me=this,filterGen=this.currentFilterGeneration,root=this.getRootNode(),visibleNodes=this.filterer.collectNodes(root,Ext.apply({rootVisible:this.rootVisible},params));root.cascadeBy(function(node){visibleNodes[node.internalId]&&(node.__filterGen=filterGen,me.allowExpandCollapseWhileFiltered&&!node.data.leaf&&node.expand())})},filterTreeBy:function(params,scope){this.currentFilterGeneration=this.filterGeneration++,1==arguments.length&&Ext.isObject(params)?(scope=params.scope,params.filter):params={filter:params,scope:scope},this.fireEvent("nodestore-datachange-start",this),params=params||{},this.markFilteredNodes(params),this.startDataChangeMonitoring(),this.isFilteredFlag=!0,this.lastTreeFilter=params,this.refreshNodeStoreContent(),this.fireEvent("nodestore-datachange-end",this),this.fireEvent("filter-set",this)},isNodeFilteredIn:function(node){var isFiltered=this.isTreeFiltered(),currentFilterGeneration=this.currentFilterGeneration;return this.loading||!Boolean(isFiltered&&node.__filterGen!=currentFilterGeneration||node.hidden)},hasNativeFilters:function(){var filters=this.getFilters(),count=filters.getCount();return count&&1<count||filters.indexOf(this.treeFilter)<0},hideNodesBy:function(filter,scope,skipNodeStoreRefresh){var me=this;if(me.isFiltered()&&me.hasNativeFilters())throw new Error("Can't hide nodes of the filtered tree store");scope=scope||me,me.getRootNode().cascadeBy(function(node){node.hidden=Boolean(filter.call(scope,node,me))}),me.startDataChangeMonitoring(),me.isHiddenFlag=!0,me.lastTreeHiding=[filter,scope],skipNodeStoreRefresh||me.refreshNodeStoreContent()},showAllNodes:function(skipNodeStoreRefresh){this.getRootNode().cascadeBy(function(node){node.hidden=!1}),this.isHiddenFlag=!1,this.lastTreeHiding=null,this.isTreeFiltered(!0)||this.stopDataChangeMonitoring(),skipNodeStoreRefresh||this.refreshNodeStoreContent()},inheritables:function(){return{onNodeExpand:function(parent,records,suppressEvent){if(!this.isTreeFiltered(!0)||parent!=this.getRoot())return this.callParent(arguments);this.callParent(arguments),this.reApplyFilter()},onNodeCollapse:function(parent,records,suppressEvent,callback,scope){var me=this,data=me.data,prevContains=data.contains,isFiltered=me.isTreeFiltered(),currentFilterGeneration=me.currentFilterGeneration;data.contains=function(){for(var node,sibling,lastNodeIndexPlus,collapseIndex=me.indexOf(parent)+1,found=!1,i=0;i<records.length;i++)if(!(records[i].hidden||isFiltered&&records[i].__filterGen!=currentFilterGeneration)&&prevContains.call(this,records[i])){for(node=parent;node.parentNode;){for(sibling=node;(sibling=sibling.nextSibling)&&(sibling.hidden||isFiltered&&sibling.__filterGen!=currentFilterGeneration););if(sibling){found=!0,lastNodeIndexPlus=me.indexOf(sibling);break}node=node.parentNode}found||(lastNodeIndexPlus=me.getCount()),me.removeAt(collapseIndex,lastNodeIndexPlus-collapseIndex);break}return!1},this.callParent(arguments),data.contains=prevContains},handleNodeExpand:function(parent,records,toAdd){for(var visibleRecords=[],isFiltered=this.isTreeFiltered(),currentFilterGeneration=this.currentFilterGeneration,i=0;i<records.length;i++){var record=records[i];isFiltered&&record.__filterGen!=currentFilterGeneration||record.hidden||(visibleRecords[visibleRecords.length]=record)}return this.callParent([parent,visibleRecords,toAdd])},onNodeInsert:function(parent,node,index){var refNode,sibling,storeReader,nodeProxy,nodeReader,reader,dataRoot,isVisible,childType,me=this,data=node.raw||node.data;if(me.filterFn&&(isVisible=me.filterFn(node),node.set("visible",isVisible),isVisible&&parent.set("visible",me.filterFn(parent))),me.registerNode(node,!0),me.beginUpdate(),me.isVisible(node)){if(0!==index&&node.previousSibling){for(sibling=node.previousSibling;sibling&&!sibling.get("visible");sibling=sibling.previousSibling);if(sibling){for(;sibling.isExpanded()&&sibling.lastChild;)sibling=sibling.lastChild;refNode=sibling}else refNode=parent}else refNode=parent;me.insert(me.indexOf(refNode)+1,node),!node.isLeaf()&&node.isExpanded()&&(node.isLoaded()?me.onNodeExpand(node,node.childNodes):me.fillCount||(node.set("expanded",!1),node.expand()))}else me.needsSync=me.needsSync||node.phantom||node.dirty;node.isLeaf()||node.isLoaded()||me.lazyFill||(storeReader=me.getProxy().getReader(),(dataRoot=(reader=(nodeReader=(nodeProxy=node.getProxy())?nodeProxy.getReader():null)&&nodeReader.initialConfig.rootProperty?nodeReader:storeReader).getRoot(data))&&(childType=node.childType,me.fillNode(node,reader.extractData(dataRoot,childType?{model:childType}:void 0)))),me.endUpdate()},isFiltered:function(){return this.callParent(arguments)||this.isTreeFiltered()}}}}),Ext.define("Sch.mixin.FilterableTreeView",{filterableTreeStore:null,treeStoreFilteringListeners:null,initTreeFiltering:function(){this.treeStoreFilteringListeners={"nodestore-datachange-start":this.onFilterChangeStart,"nodestore-datachange-end":this.onFilterChangeEnd,"filter-clear":this.onFilterCleared,"filter-set":this.onFilterSet,forcedrefresh:this.onForcedRefresh,scope:this};function doInit(){var treeStore=this.up("tablepanel").store;this.bindFilterableTreeStore(treeStore)}this.rendered?doInit.call(this):this.on("beforerender",doInit,this,{single:!0})},bindFilterableTreeStore:function(store){this.filterableTreeStore&&this.mun(this.filterableTreeStore,this.treeStoreFilteringListeners),(this.filterableTreeStore=store)&&this.mon(store,this.treeStoreFilteringListeners)},onForcedRefresh:function(){this.focusRow=function(){},this.refresh(),delete this.focusRow},onFilterChangeStart:function(){Ext.suspendLayouts()},onFilterChangeEnd:function(){Ext.resumeLayouts(!0)},onFilterCleared:function(){},onFilterSet:function(){}}),Ext.define("Siesta.Project.Browser.UI.FilterableTreeView",{extend:Ext.tree.View,alias:"widget.filterabletreeview",mixins:[Sch.mixin.FilterableTreeView],constructor:function(){this.callParent(arguments),this.initTreeFiltering()},bindStore:function(store,initial,propName){store instanceof Ext.data.TreeStore?(this.bindFilterableTreeStore(store),this.callParent([store.nodeStore||store,initial,propName])):this.callParent(arguments)}}),Ext.define("Siesta.Project.Browser.UI.CoverageChart",{extend:Ext.chart.Chart,alias:"widget.coveragechart",border:!1,margin:"35% 35%",animate:{easing:"bounceOut",duration:600},store:{fields:["name","value"]},axes:[{type:"numeric",position:"left",fields:["value"],minimum:0,maximum:100,label:{renderer:Ext.util.Format.numberRenderer("0"),fill:"#555"},grid:{odd:{stroke:"#efefef"},even:{stroke:"#efefef"}}},{type:"category",position:"bottom",fields:["name"],label:{fill:"#555"}}],series:[{type:"bar",axis:"left",xField:"name",yField:"value",label:{display:"outside","text-anchor":"middle",field:"value",orientation:"horizontal",fill:"#aaa",renderer:function(value,label,storeItem,item,i,display,animate,index){return value+"%"}},renderer:function(sprite,storeItem,barAttr,i,store){return barAttr.fill="rgb(89, 205, 82)",barAttr}}]}),Ext.define("Siesta.Project.Browser.UI.TreeFilterField",{extend:Ext.form.field.Text,alias:"widget.treefilter",filterGroups:!1,cls:"filterfield",store:null,filterField:"text",hasAndCheck:null,andChecker:null,andCheckerScope:null,triggerLeafCls:"fa-file-o",triggerGroupCls:"fa-folder-o",tipText:null,constructor:function(config){var me=this;Ext.apply(config,{triggers:{clear:{cls:"fa-close",handler:function(){me.store.clearTreeFilter(),me.reset()}},leafOrGroup:{cls:me.triggerLeafCls,handler:function(){me.setFilterGroups(!me.getFilterGroups())}}},listeners:{change:{fn:this.onFilterChange,buffer:400,scope:this},specialkey:this.onFilterSpecialKey,scope:this}}),this.callParent(arguments)},afterRender:function(){this.callParent(arguments),this.tipText&&this.inputEl.set({title:this.tipText}),this.filterGroups&&(this.triggerEl.item(1).addCls(this.triggerGroupCls),this.triggerEl.item(1).removeCls(this.triggerLeafCls))},onFilterSpecialKey:function(field,e,t){e.keyCode===e.ESC&&(this.store.clearTreeFilter(),field.reset())},setFilterGroups:function(value){if(value!=this.filterGroups){if(this.filterGroups=value,this.rendered){var el=this.triggerEl.item(1);value?(el.addCls(this.triggerGroupCls),el.removeCls(this.triggerLeafCls)):(el.removeCls(this.triggerGroupCls),el.addCls(this.triggerLeafCls))}this.refreshFilter(),this.fireEvent("filter-group-change",this)}},getFilterGroups:function(){return this.filterGroups},refreshFilter:function(){this.onFilterChange(this,this.getValue())},onFilterChange:function(field,filterValue){if(filterValue||this.hasAndCheck&&this.hasAndCheck()){var testFilterRegexps,groupFilterRegexps,filterer=this.store.filterer,fieldName=this.filterField,filterGroups=this.filterGroups;if(filterGroups)testFilterRegexps=filterer.splitTermByPipe(filterValue);else{var res=filterer.parseFilterValue(filterValue);testFilterRegexps=res.testFilterRegexps,groupFilterRegexps=res.groupFilterRegexps}function getTitle(node){return node.get(fieldName)}var andChecker=this.andChecker,andCheckerScope=this.andCheckerScope||this;this.store.filterTreeBy({filter:function(node){return!(andChecker&&!andChecker.call(andCheckerScope,node))&&filterer.checkCommonFilter(node,getTitle,testFilterRegexps,groupFilterRegexps)},fullMatchingParents:filterGroups})}else this.store.clearTreeFilter()}}),Ext.define("Siesta.Project.Browser.Model.FilterableTreeStore",{extend:Ext.data.TreeStore,mixins:[Sch.data.mixin.FilterableTreeStore],constructor:function(){this.callParent(arguments),this.initTreeFiltering()},forEach:function(fn,scope){this.getRootNode().cascadeBy(fn,scope)}}),Ext.define("Siesta.Project.Browser.Model.CoverageUnit",{extend:Ext.data.Model,idProperty:"id",fields:["id","url","text","reportNode",{name:"iconCls",defaultValue:"x-fa fa-cube"}],getLineCoverage:function(){return this.getCoverageInPercent("lines")},getStatementCoverage:function(){return this.getCoverageInPercent("statements")},getBranchCoverage:function(){return this.getCoverageInPercent("branches")},getFunctionCoverage:function(){return this.getCoverageInPercent("functions")},getCoverageInPercent:function(type){var node=this.data.reportNode;if(node)return node.metrics[type].pct}},function(){Ext.data.NodeInterface.decorate(this),this.override({expand:function(){Ext.suspendLayouts(),this.callParent(arguments),Ext.resumeLayouts()}})}),Ext.define("Siesta.Project.Browser.UI.CoverageReport",{extend:Ext.Container,alias:"widget.coveragereport",cls:"st-cov-report-panel",layout:"border",htmlReport:null,treePanel:null,treeStore:null,chart:null,sourcePanel:null,contentContainer:null,toggleButtons:null,standalone:!1,dataUrl:null,project:null,expandLevels:2,initComponent:function(){var me=this,standalone=this.standalone,store=this.treeStore=new Siesta.Project.Browser.Model.FilterableTreeStore({model:"Siesta.Project.Browser.Model.CoverageUnit",proxy:"memory",rootVisible:!0});Ext.apply(this,{border:!this.standalone,items:[{xtype:"treepanel",border:!1,region:"west",enableColumnHide:!1,enableColumnMove:!1,enableColumnResize:!1,sortableColumns:!1,rowLines:!1,tbar:{cls:"siesta-toolbar",height:45,border:!1,items:[standalone?null:{text:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","closeText"),scale:"medium",style:"margin:0 10px 0 0;",handler:this.onBackToMainUI,scope:this},{xtype:"treefilter",cls:"filterfield",hasAndCheck:function(){var states=Ext.pluck(me.toggleButtons,"pressed");return!states[0]||!states[1]||!states[2]},andChecker:this.levelFilter,andCheckerScope:this,margin:"3 0 0 0",store:store,filterField:"text",width:180},"->",{xtype:"label",text:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","showText"),margin:"0 5 0 0"},{text:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","highText"),level:"high",enableToggle:!0,pressed:!0,scale:"medium",cls:"st-cov-level-high",toggleHandler:this.toggleLevels,scope:this,margin:"0 5 0 0"},{text:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","mediumText"),level:"med",enableToggle:!0,scale:"medium",pressed:!0,cls:"st-cov-level-medium",toggleHandler:this.toggleLevels,scope:this,margin:"0 5 0 0"},{text:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","lowText"),level:"low",enableToggle:!0,scale:"medium",pressed:!0,cls:"st-cov-level-low",toggleHandler:this.toggleLevels,scope:this,style:"margin:0 5px 0 0"}]},viewType:"filterabletreeview",viewConfig:{store:store.nodeStore,trackOver:!1,rootVisible:!0},cls:"st-cov-report-tree-panel",flex:1,split:!0,rootVisible:!0,columns:[{xtype:"treecolumn",dataIndex:"text",menuDisabled:!0,flex:3},{text:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","statementsText"),flex:1,menuDisabled:!0,tdCls:"cov-result-cell",renderer:this.getMetricsRenderer("statements")},{text:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","branchesText"),flex:1,menuDisabled:!0,tdCls:"cov-result-cell",renderer:this.getMetricsRenderer("branches")},{text:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","functionsText"),flex:1,menuDisabled:!0,tdCls:"cov-result-cell",renderer:this.getMetricsRenderer("functions")},{text:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","linesText"),flex:1,menuDisabled:!0,tdCls:"cov-result-cell",renderer:this.getMetricsRenderer("lines")}],store:store,listeners:{selectionchange:this.onClassSelected,scope:this}},{xtype:"container",cls:"coveragechart-container",slot:"contentContainer",region:"center",layout:{type:"card",deferredRendering:!0},items:[{xtype:"coveragechart"},{xtype:"panel",slot:"sourcePanel",flex:1,autoScroll:!0,bodyPadding:"4 0 4 10",border:!1,cls:"st-cov-report-source-panel"}]}]}),this.callParent(),this.contentContainer=this.down("[slot=contentContainer]"),this.chart=this.down("chart"),this.sourcePanel=this.down("[slot=sourcePanel]"),this.toggleButtons=this.query("button[level]"),this.treePanel=this.down("treepanel"),standalone?this.on("afterrender",function(){var loadingMask=new Ext.LoadMask({target:this,msg:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","loadingText")});loadingMask.show(),Ext.Ajax.request({url:this.dataUrl,success:function(response){loadingMask.hide(),me.loadHtmlReport(Ext.JSON.decode(response.responseText))},failure:function(){loadingMask.hide(),Ext.Msg.show({title:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","loadingErrorText"),msg:Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","loadingErrorMessageText")+me.dataUrl,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}})},this,{single:!0}):this.htmlReport&&this.loadHtmlReport(this.htmlReport),this.project&&this.project.on("testsuiteend",this.onTestSuiteEnd,this)},onTestSuiteEnd:function(descriptors){this.project&&this.isVisible()&&this.loadHtmlReport(this.project.generateCoverageHtmlReport(!1))},loadHtmlReport:function(report){this.htmlReport=report;var treeStore=this.treeStore,isFile="file"==report.coverageUnit,treeFilter=this.down("treefilter"),selModel=this.treePanel.getSelectionModel(),selected=selModel.getSelected(),oldSelectedId=0<selected.length?selected.first().getId():null;treeStore.setRootNode(this.generateFilesTree(report.htmlReport.root)),oldSelectedId&&treeStore.getNodeById(oldSelectedId)&&selModel.select(treeStore.getNodeById(oldSelectedId)),this.down("treecolumn").setText(isFile?"File name":"Class name"),treeFilter.emptyText=isFile?"Filter files":"Filter classes",treeFilter.applyEmptyText(),this.loadChartData(treeStore.getRootNode())},levelFilter:function(node){var coverage=node.getStatementCoverage();return void 0!==coverage&&this.toggleButtons[80<=coverage?0:50<=coverage?1:2].pressed},toggleLevels:function(){this.down("treefilter").refreshFilter()},getCoverageLevelClass:function(coveragePct){return"number"==typeof coveragePct?"st-cov-level-"+(80<=coveragePct?"high":50<=coveragePct?"medium":"low"):""},getMetricsRenderer:function(property){var me=this;return function(value,metaData,preloadFile){var reportNode=preloadFile.get("reportNode");if(!reportNode)return"";var metrics=reportNode.metrics[property];return metaData.tdCls=me.getCoverageLevelClass(metrics.pct),'<span class="st-cov-stat-pct-'+property+'">'+Math.round(metrics.pct)+'%</span> <span class="st-cov-stat-abs-'+property+'">('+metrics.covered+"/"+metrics.total+")</span>"}},generateFilesTree:function(node,depth){var me=this;if(depth=depth||0,"dir"!==node.kind)return{id:node.fullName,url:node.fullName,leaf:!0,text:node.relativeName,reportNode:node};var text=node.relativeName||node.fullName;return{id:node.fullName,url:node.fullName,leaf:!1,expanded:depth<this.expandLevels,text:"/"==text&&"extjs_class"==this.htmlReport.coverageUnit?Siesta.Resource("Siesta.Project.Browser.UI.CoverageReport","globalNamespaceText"):text,reportNode:node,children:Ext.Array.map(node.children,function(childNode){return me.generateFilesTree(childNode,depth+1)}).sort(this.treeSorterFn)}},treeSorterFn:function(node1,node2){return!node1.leaf&&node2.leaf?-1:node1.leaf&&!node2.leaf?1:node1.leaf===node2.leaf?node1.text<node2.text?-1:1:void 0},onClassSelected:function(view,records){var record=records[0];record&&(record.isLeaf()&&!this.htmlReport.coverageNoSource?(this.sourcePanel.update(record.get("reportNode").html),prettyPrint(),this.contentContainer.getLayout().setActiveItem(1)):(this.loadChartData(record),this.contentContainer.getLayout().setActiveItem(0)))},onBackToMainUI:function(){this.fireEvent("backtomainui",this)},loadChartData:function(node){this.chart.store.loadData([{name:"Statements",value:Math.round(node.getStatementCoverage())},{name:"Branches",value:Math.round(node.getBranchCoverage())},{name:"Functions",value:Math.round(node.getFunctionCoverage())},{name:"Lines",value:Math.round(node.getLineCoverage())}])}}),window.PR_SHOULD_USE_CONTINUATION=!0,function(){var h=["break,continue,do,else,for,if,return,while"],p=[[h,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],l=[p,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],x=[p,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],R=[x,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],w=[p,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],s="caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",I=[h,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],f=[h,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],H=[h,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],e=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,C="str",j="com",O="typ",G="lit",L="pun",F="pln",J="src",n="atv";function a(V){var S,U=/(?:^|\s)nocode(?:\s|$)/,X=[],T=0,Z=[],W=0;V.currentStyle?S=V.currentStyle.whiteSpace:window.getComputedStyle&&(S=document.defaultView.getComputedStyle(V,null).getPropertyValue("white-space"));var Y=S&&"pre"===S.substring(0,3);return function aa(ab){switch(ab.nodeType){case 1:if(U.test(ab.className))return;for(var ae=ab.firstChild;ae;ae=ae.nextSibling)aa(ae);var ad=ab.nodeName;"BR"!==ad&&"LI"!==ad||(X[W]="\n",Z[W<<1]=T++,Z[W++<<1|1]=ab);break;case 3:case 4:var ac=ab.nodeValue;ac.length&&(ac=Y?ac.replace(/\r\n?/g,"\n"):ac.replace(/[ \t\r\n]+/g," "),X[W]=ac,Z[W<<1]=T,T+=ac.length,Z[W++<<1|1]=ab)}}(V),{sourceCode:X.join("").replace(/\n$/,""),spans:Z}}function B(S,U,W,T){if(U){var V={sourceCode:U,basePos:S};W(V),T.push.apply(T,V.decorations)}}var v=/\S/;function o(S){for(var V=void 0,U=S.firstChild;U;U=U.nextSibling){var T=U.nodeType;V=1===T?V?S:U:3===T&&v.test(U.nodeValue)?S:V}return V===S?void 0:V}function g(U,T){var V,S={};!function(){for(var ad=U.concat(T),ah=[],ag={},ab=0,Z=ad.length;ab<Z;++ab){var Y=ad[ab],ac=Y[3];if(ac)for(var ae=ac.length;0<=--ae;)S[ac.charAt(ae)]=Y;var af=Y[1],aa=""+af;ag.hasOwnProperty(aa)||(ah.push(af),ag[aa]=null)}ah.push(/[\0-\uffff]/),V=function(Z){for(var ad=0,S=!1,ac=!1,V=0,U=Z.length;V<U;++V){if((ae=Z[V]).ignoreCase)ac=!0;else if(/[a-z]/i.test(ae.source.replace(/\\u[0-9a-f]{4}|\\x[0-9a-f]{2}|\\[^ux]/gi,""))){ac=!(S=!0);break}}var Y={b:8,t:9,n:10,v:11,f:12,r:13};function ab(ah){var ag=ah.charCodeAt(0);if(92!==ag)return ag;var af=ah.charAt(1);return(ag=Y[af])||("0"<=af&&af<="7"?parseInt(ah.substring(1),8):"u"===af||"x"===af?parseInt(ah.substring(2),16):ah.charCodeAt(1))}function T(af){if(af<32)return(af<16?"\\x0":"\\x")+af.toString(16);var ag=String.fromCharCode(af);return"\\"!==ag&&"-"!==ag&&"["!==ag&&"]"!==ag||(ag="\\"+ag),ag}function X(am){for(var aq=am.substring(1,am.length-1).match(new RegExp("\\\\u[0-9A-Fa-f]{4}|\\\\x[0-9A-Fa-f]{2}|\\\\[0-3][0-7]{0,2}|\\\\[0-7]{1,2}|\\\\[\\s\\S]|-|[^-\\\\]","g")),ak=[],af=[],ao="^"===aq[0],ar=ao?1:0,aj=aq.length;ar<aj;++ar){var ah=aq[ar];if(/\\[bdsw]/i.test(ah))ak.push(ah);else{var al,ag=ab(ah);ar+2<aj&&"-"===aq[ar+1]?(al=ab(aq[ar+2]),ar+=2):al=ag,af.push([ag,al]),al<65||122<ag||(al<65||90<ag||af.push([32|Math.max(65,ag),32|Math.min(al,90)]),al<97||122<ag||af.push([-33&Math.max(97,ag),-33&Math.min(al,122)]))}}af.sort(function(av,au){return av[0]-au[0]||au[1]-av[1]});var ai=[],ap=[NaN,NaN];for(ar=0;ar<af.length;++ar){(at=af[ar])[0]<=ap[1]+1?ap[1]=Math.max(ap[1],at[1]):ai.push(ap=at)}var an=["["];ao&&an.push("^"),an.push.apply(an,ak);for(ar=0;ar<ai.length;++ar){var at=ai[ar];an.push(T(at[0])),at[1]>at[0]&&(at[1]+1>at[0]&&an.push("-"),an.push(T(at[1])))}return an.push("]"),an.join("")}function W(al){for(var aj=al.source.match(new RegExp("(?:\\[(?:[^\\x5C\\x5D]|\\\\[\\s\\S])*\\]|\\\\u[A-Fa-f0-9]{4}|\\\\x[A-Fa-f0-9]{2}|\\\\[0-9]+|\\\\[^ux0-9]|\\(\\?[:!=]|[\\(\\)\\^]|[^\\x5B\\x5C\\(\\)\\^]+)","g")),ah=aj.length,an=[],ak=0,am=0;ak<ah;++ak){if("("===(ag=aj[ak]))++am;else if("\\"===ag.charAt(0))(af=+ag.substring(1))&&af<=am&&(an[af]=-1)}for(ak=1;ak<an.length;++ak)-1===an[ak]&&(an[ak]=++ad);for(ak=0,am=0;ak<ah;++ak){var af;if("("===(ag=aj[ak]))void 0===an[++am]&&(aj[ak]="(?:");else if("\\"===ag.charAt(0))(af=+ag.substring(1))&&af<=am&&(aj[ak]="\\"+an[am])}for(ak=0,am=0;ak<ah;++ak)"^"===aj[ak]&&"^"!==aj[ak+1]&&(aj[ak]="");if(al.ignoreCase&&S)for(ak=0;ak<ah;++ak){var ag,ai=(ag=aj[ak]).charAt(0);2<=ag.length&&"["===ai?aj[ak]=X(ag):"\\"!==ai&&(aj[ak]=ag.replace(/[a-zA-Z]/g,function(ao){var ap=ao.charCodeAt(0);return"["+String.fromCharCode(-33&ap,32|ap)+"]"}))}return aj.join("")}var aa=[];for(V=0,U=Z.length;V<U;++V){var ae;if((ae=Z[V]).global||ae.multiline)throw new Error(""+ae);aa.push("(?:"+W(ae)+")")}return new RegExp(aa.join("|"),ac?"gi":"g")}(ah)}();var X=T.length,W=function(ah){for(var Z=ah.sourceCode,Y=ah.basePos,ad=[Y,F],af=0,an=Z.match(V)||[],aj={},ae=0,aq=an.length;ae<aq;++ae){var am,ag=an[ae],ap=aj[ag],ai=void 0;if("string"==typeof ap)am=!1;else{var aa=S[ag.charAt(0)];if(aa)ai=ag.match(aa[1]),ap=aa[0];else{for(var ao=0;ao<X;++ao)if(aa=T[ao],ai=ag.match(aa[1])){ap=aa[0];break}ai||(ap=F)}!(am=5<=ap.length&&"lang-"===ap.substring(0,5))||ai&&"string"==typeof ai[1]||(am=!1,ap=J),am||(aj[ag]=ap)}var ab=af;if(af+=ag.length,am){var al=ai[1],ak=ag.indexOf(al),ac=ak+al.length;ai[2]&&(ak=(ac=ag.length-ai[2].length)-al.length);var ar=ap.substring(5);B(Y+ab,ag.substring(0,ak),W,ad),B(Y+ab+ak,al,q(ar,al),ad),B(Y+ab+ac,ag.substring(ac),W,ad)}else ad.push(Y+ab,ap)}ah.decorations=ad};return W}function i(T){var W=[],S=[];T.tripleQuotedStrings?W.push([C,/^(?:\'\'\'(?:[^\'\\]|\\[\s\S]|\'{1,2}(?=[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}(?=[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$))/,null,"'\""]):T.multiLineStrings?W.push([C,/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,null,"'\"`"]):W.push([C,/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,null,"\"'"]),T.verbatimStrings&&S.push([C,/^@\"(?:[^\"]|\"\")*(?:\"|$)/,null]);var Y=T.hashComments;if(Y&&(T.cStyleComments?(1<Y?W.push([j,/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,"#"]):W.push([j,/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\r\n]*)/,null,"#"]),S.push([C,/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,null])):W.push([j,/^#[^\r\n]*/,null,"#"])),T.cStyleComments&&(S.push([j,/^\/\/[^\r\n]*/,null]),S.push([j,/^\/\*[\s\S]*?(?:\*\/|$)/,null])),T.regexLiterals){S.push(["lang-regex",new RegExp("^(?:^^\\.?|[+-]|\\!|\\!=|\\!==|\\#|\\%|\\%=|&|&&|&&=|&=|\\(|\\*|\\*=|\\+=|\\,|\\-=|\\->|\\/|\\/=|:|::|\\;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\@|\\[|\\^|\\^=|\\^\\^|\\^\\^=|\\{|\\||\\|=|\\|\\||\\|\\|=|\\~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*(/(?=[^/*])(?:[^/\\x5B\\x5C]|\\x5C[\\s\\S]|\\x5B(?:[^\\x5C\\x5D]|\\x5C[\\s\\S])*(?:\\x5D|$))+/)")])}var V=T.types;V&&S.push([O,V]);var U=(""+T.keywords).replace(/^ | $/g,"");return U.length&&S.push(["kwd",new RegExp("^(?:"+U.replace(/[\s,]+/g,"|")+")\\b"),null]),W.push([F,/^\s+/,null," \r\n\t "]),S.push([G,/^@[a-z_$][a-z_$@0-9]*/i,null],[O,/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\w+_t\b)/,null],[F,/^[a-z_$][a-z_$@0-9]*/i,null],[G,new RegExp("^(?:0x[a-f0-9]+|(?:\\d(?:_\\d+)*\\d*(?:\\.\\d*)?|\\.\\d\\+)(?:e[+\\-]?\\d+)?)[a-z]*","i"),null,"0123456789"],[F,/^\\[\s\S]?/,null],[L,/^.[^\s\w\.$@\'\"\`\/\#\\]*/,null]),g(W,S)}var K=i({keywords:[l,R,w,s+I,f,H],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0});function Q(V,ag){var S,U=/(?:^|\s)nocode(?:\s|$)/,ab=/\r\n?|\n/,ac=V.ownerDocument;V.currentStyle?S=V.currentStyle.whiteSpace:window.getComputedStyle&&(S=ac.defaultView.getComputedStyle(V,null).getPropertyValue("white-space"));for(var Z=S&&"pre"===S.substring(0,3),af=ac.createElement("LI");V.firstChild;)af.appendChild(V.firstChild);var W=[af];function ae(al){switch(al.nodeType){case 1:if(U.test(al.className))break;if("BR"===al.nodeName)ad(al),al.parentNode&&al.parentNode.removeChild(al);else for(var an=al.firstChild;an;an=an.nextSibling)ae(an);break;case 3:case 4:if(Z){var am=al.nodeValue,aj=am.match(ab);if(aj){var ai=am.substring(0,aj.index);al.nodeValue=ai;var ah=am.substring(aj.index+aj[0].length);if(ah)al.parentNode.insertBefore(ac.createTextNode(ah),al.nextSibling);ad(al),ai||al.parentNode.removeChild(al)}}}}function ad(ak){for(;!ak.nextSibling;)if(!(ak=ak.parentNode))return;for(var aj,ah=function ai(al,ar){var aq=ar?al.cloneNode(!1):al,ao=al.parentNode;if(ao){var ap=ai(ao,1),an=al.nextSibling;ap.appendChild(aq);for(var am=an;am;am=an)an=am.nextSibling,ap.appendChild(am)}return aq}(ak.nextSibling,0);(aj=ah.parentNode)&&1===aj.nodeType;)ah=aj;W.push(ah)}for(var Y=0;Y<W.length;++Y)ae(W[Y]);ag===(0|ag)&&W[0].setAttribute("value",ag);var aa=ac.createElement("OL");aa.className="linenums";for(var X=Math.max(0,ag-1|0)||0,T=(Y=0,W.length);Y<T;++Y)(af=W[Y]).className="L"+(Y+X)%10,af.firstChild||af.appendChild(ac.createTextNode(" ")),aa.appendChild(af);V.appendChild(aa)}var t={};function c(U,V){for(var S=V.length;0<=--S;){var T=V[S];t.hasOwnProperty(T)?window.console&&console.warn("cannot override language handler %s",T):t[T]=U}}function q(T,S){return T&&t.hasOwnProperty(T)||(T=/^\s*</.test(S)?"default-markup":"default-code"),t[T]}function d(V){var U=V.langExtension;try{var S=a(V.sourceNode),T=S.sourceCode;V.sourceCode=T,V.spans=S.spans,V.basePos=0,q(U,T)(V),function(ac){var ar,aq,aj=/\bMSIE\b/.test(navigator.userAgent),am=/\n/g,al=ac.sourceCode,an=al.length,V=0,aa=ac.spans,T=aa.length,ah=0,X=ac.decorations,Y=X.length,Z=0;for(X[Y]=an,aq=ar=0;aq<Y;)X[aq]!==X[aq+2]?(X[ar++]=X[aq++],X[ar++]=X[aq++]):aq+=2;for(Y=ar,aq=ar=0;aq<Y;){for(var at=X[aq],ab=X[aq+1],W=aq+2;W+2<=Y&&X[W+1]===ab;)W+=2;X[ar++]=at,X[ar++]=ab,aq=W}for(Y=X.length=ar;ah<T;){aa[ah];var U,S=aa[ah+2]||an,ap=(X[Z],X[Z+2]||an),ak=(W=Math.min(S,ap),aa[ah+1]);if(1!==ak.nodeType&&(U=al.substring(V,W))){aj&&(U=U.replace(am,"\r")),ak.nodeValue=U;var ai=ak.ownerDocument,ao=ai.createElement("SPAN");ao.className=X[Z+1];var ad=ak.parentNode;ad.replaceChild(ao,ak),ao.appendChild(ak),V<S&&(aa[ah+1]=ak=ai.createTextNode(al.substring(W,S)),ad.insertBefore(ak,ao.nextSibling))}S<=(V=W)&&(ah+=2),ap<=V&&(Z+=2)}}(V)}catch(W){"console"in window&&console.log(W&&W.stack?W.stack:W)}}c(K,["default-code"]),c(g([],[[F,/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],[j,/^<\!--[\s\S]*?(?:-\->|$)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],[L,/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),c(g([[F,/^[\s]+/,null," \t\r\n"],[n,/^(?:\"[^\"]*\"?|\'[^\']*\'?)/,null,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w.:-]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^>\'\"\s]*(?:[^>\'\"\s\/]|\/(?=\s)))/],[L,/^[=<>\/]+/],["lang-js",/^on\w+\s*=\s*\"([^\"]+)\"/i],["lang-js",/^on\w+\s*=\s*\'([^\']+)\'/i],["lang-js",/^on\w+\s*=\s*([^\"\'>\s]+)/i],["lang-css",/^style\s*=\s*\"([^\"]+)\"/i],["lang-css",/^style\s*=\s*\'([^\']+)\'/i],["lang-css",/^style\s*=\s*([^\"\'>\s]+)/i]]),["in.tag"]),c(g([],[[n,/^[\s\S]+/]]),["uq.val"]),c(i({keywords:l,hashComments:!0,cStyleComments:!0,types:e}),["c","cc","cpp","cxx","cyc","m"]),c(i({keywords:"null,true,false"}),["json"]),c(i({keywords:R,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:e}),["cs"]),c(i({keywords:x,cStyleComments:!0}),["java"]),c(i({keywords:H,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),c(i({keywords:I,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),c(i({keywords:s,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),c(i({keywords:f,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),c(i({keywords:w,cStyleComments:!0,regexLiterals:!0}),["js"]),c(i({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),c(g([],[[C,/^[\s\S]+/]]),["regex"]),window.prettyPrintOne=function(W,V,U){var S=document.createElement("PRE");return S.innerHTML=W,U&&Q(S,U),d({langExtension:V,numberLines:U,sourceNode:S}),S.innerHTML},window.prettyPrint=function(ad){function Y(af){return document.getElementsByTagName(af)}for(var ac=[Y("pre"),Y("code"),Y("xmp")],T=[],aa=0;aa<ac.length;++aa)for(var Z=0,V=ac[aa].length;Z<V;++Z)T.push(ac[aa][Z]);ac=null;var W=Date;W.now||(W={now:function(){return+new Date}});var X=0,ab=/\blang(?:uage)?-([\w.]+)(?!\S)/;!function U(){for(var ag=window.PR_SHOULD_USE_CONTINUATION?W.now()+250:1/0;X<T.length&&W.now()<ag;X++){var aj=T[X],ai=aj.className;if(0<=ai.indexOf("prettyprint")){var am,ah=ai.match(ab);!ah&&(am=o(aj))&&"CODE"===am.tagName&&(ah=am.className.match(ab)),ah=ah&&ah[1];for(var al=!1,ak=aj.parentNode;ak;ak=ak.parentNode)if(("pre"===ak.tagName||"code"===ak.tagName||"xmp"===ak.tagName)&&ak.className&&0<=ak.className.indexOf("prettyprint")){al=!0;break}if(!al){var af=aj.className.match(/\blinenums\b(?::(\d+))?/);(af=!!af&&(!af[1]||!af[1].length||+af[1]))&&Q(aj,af),d({langExtension:ah,sourceNode:aj,numberLines:af})}}}X<T.length?setTimeout(U,250):ad&&ad()}()},window.PR={createSimpleLexer:g,registerLangHandler:c,sourceDecorator:i,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:n,PR_COMMENT:j,PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:G,PR_NOCODE:"nocode",PR_PLAIN:F,PR_PUNCTUATION:L,PR_SOURCE:J,PR_STRING:C,PR_TAG:"tag",PR_TYPE:O}}(),PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_DECLARATION,/^<!\w[^>]*(?:>|$)/],[PR.PR_COMMENT,/^<\!--[\s\S]*?(?:-\->|$)/],[PR.PR_PUNCTUATION,/^(?:<[%?]|[%?]>)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-handlebars",/^<script\b[^>]*type\s*=\s*['"]?text\/x-handlebars-template['"]?\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i],[PR.PR_DECLARATION,/^{{[#^>/]?\s*[\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{&?\s*[\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{{>?\s*[\w.][^}]*}}}/],[PR.PR_COMMENT,/^{{![^}]*}}/]]),["handlebars","hbs"]),PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[ \t\r\n\f]+/,null," \t\r\n\f"]],[[PR.PR_STRING,/^\"(?:[^\n\r\f\\\"]|\\(?:\r\n?|\n|\f)|\\[\s\S])*\"/,null],[PR.PR_STRING,/^\'(?:[^\n\r\f\\\']|\\(?:\r\n?|\n|\f)|\\[\s\S])*\'/,null],["lang-css-str",/^url\(([^\)\"\']*)\)/i],[PR.PR_KEYWORD,/^(?:url|rgb|\!important|@import|@page|@media|@charset|inherit)(?=[^\-\w]|$)/i,null],["lang-css-kw",/^(-?(?:[_a-z]|(?:\\[0-9a-f]+ ?))(?:[_a-z0-9\-]|\\(?:\\[0-9a-f]+ ?))*)\s*:/i],[PR.PR_COMMENT,/^\/\*[^*]*\*+(?:[^\/*][^*]*\*+)*\//],[PR.PR_COMMENT,/^(?:<!--|-->)/],[PR.PR_LITERAL,/^(?:\d+|\d*\.\d+)(?:%|[a-z]+)?/i],[PR.PR_LITERAL,/^#(?:[0-9a-f]{3}){1,2}/i],[PR.PR_PLAIN,/^-?(?:[_a-z]|(?:\\[\da-f]+ ?))(?:[_a-z\d\-]|\\(?:\\[\da-f]+ ?))*/i],[PR.PR_PUNCTUATION,/^[^\s\w\'\"]+/]]),["css"]),PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_KEYWORD,/^-?(?:[_a-z]|(?:\\[\da-f]+ ?))(?:[_a-z\d\-]|\\(?:\\[\da-f]+ ?))*/i]]),["css-kw"]),PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_STRING,/^[^\)\"\']+/]]),["css-str"]);